<link rel="lazy-import" href="my-login.html"><link rel="lazy-import" href="my-home.html"><link rel="lazy-import" href="my-case.html"><link rel="lazy-import" href="my-compare.html"><link rel="lazy-import" href="my-view404.html"><link rel="lazy-import" href="my-team.html"><link rel="lazy-import" href="my-data.html"><div hidden="" by-polymer-bundler=""><script>(function(){"use strict";var userPolymer=window.Polymer;window.Polymer=function(info){return window.Polymer._polymerFn(info)};if(userPolymer){Object.assign(Polymer,userPolymer)}window.Polymer._polymerFn=function(){throw new Error("Load polymer.html to use the Polymer() function.")};window.Polymer.version="2.6.0";window.JSCompiler_renameProperty=function(prop){return prop}})();</script><script>(function(){"use strict";var CSS_URL_RX=/(url\()([^)]*)(\))/g,ABS_URL=/(^\/)|(^#)|(^[\w-\d]*:)/,workingURL,resolveDoc;function resolveUrl(url,baseURI){if(url&&ABS_URL.test(url)){return url}if(workingURL===void 0){workingURL=!1;try{var u=new URL("b","http://a");u.pathname="c%20d";workingURL="http://a/c%20d"===u.href}catch(e){}}if(!baseURI){baseURI=document.baseURI||window.location.href}if(workingURL){return new URL(url,baseURI).href}if(!resolveDoc){resolveDoc=document.implementation.createHTMLDocument("temp");resolveDoc.base=resolveDoc.createElement("base");resolveDoc.head.appendChild(resolveDoc.base);resolveDoc.anchor=resolveDoc.createElement("a");resolveDoc.body.appendChild(resolveDoc.anchor)}resolveDoc.base.href=baseURI;resolveDoc.anchor.href=url;return resolveDoc.anchor.href||url}Polymer.ResolveUrl={resolveCss:function(cssText,baseURI){return cssText.replace(CSS_URL_RX,function(m,pre,url,post){return pre+"'"+resolveUrl(url.replace(/["']/g,""),baseURI)+"'"+post})},resolveUrl:resolveUrl,pathFromUrl:function(url){return url.substring(0,url.lastIndexOf("/")+1)}}})();</script><script>(function(){"use strict";Polymer.Settings=Polymer.Settings||{};Polymer.Settings.useShadow=!window.ShadyDOM;Polymer.Settings.useNativeCSSProperties=!!(!window.ShadyCSS||window.ShadyCSS.nativeCss);Polymer.Settings.useNativeCustomElements=!window.customElements.polyfillWrapFlushCallback;var rootPath=Polymer.rootPath||Polymer.ResolveUrl.pathFromUrl(document.baseURI||window.location.href);Polymer.rootPath=rootPath;Polymer.setRootPath=function(path){Polymer.rootPath=path};var sanitizeDOMValue=Polymer.sanitizeDOMValue;Polymer.sanitizeDOMValue=sanitizeDOMValue;Polymer.setSanitizeDOMValue=function(newSanitizeDOMValue){Polymer.sanitizeDOMValue=newSanitizeDOMValue};Polymer.passiveTouchGestures=!1;Polymer.setPassiveTouchGestures=function(usePassive){Polymer.passiveTouchGestures=usePassive}})();</script><script>(function(){"use strict";var dedupeId=0;function MixinFunction(){}MixinFunction.prototype.__mixinApplications;MixinFunction.prototype.__mixinSet;Polymer.dedupingMixin=function(mixin){var mixinApplications=mixin.__mixinApplications;if(!mixinApplications){mixinApplications=new WeakMap;mixin.__mixinApplications=mixinApplications}var mixinDedupeId=dedupeId++;function dedupingMixin(base){var baseSet=base.__mixinSet;if(baseSet&&baseSet[mixinDedupeId]){return base}var map=mixinApplications,extended=map.get(base);if(!extended){extended=mixin(base);map.set(base,extended)}var mixinSet=Object.create(extended.__mixinSet||baseSet||null);mixinSet[mixinDedupeId]=!0;extended.__mixinSet=mixinSet;return extended}return dedupingMixin}})();</script><script>(function(){"use strict";var SHADY_UNSCOPED_ATTR="shady-unscoped";function importModule(moduleId){var PolymerDomModule=customElements.get("dom-module");if(!PolymerDomModule){return null}return PolymerDomModule.import(moduleId)}function styleForImport(importDoc){var container=importDoc.body?importDoc.body:importDoc,importCss=Polymer.ResolveUrl.resolveCss(container.textContent,importDoc.baseURI),style=document.createElement("style");style.textContent=importCss;return style}Polymer.StyleGather={stylesFromModules:function stylesFromModules(moduleIds){for(var modules=moduleIds.trim().split(/\s+/),styles=[],i=0;i<modules.length;i++){styles.push.apply(styles,babelHelpers.toConsumableArray(this.stylesFromModule(modules[i])))}return styles},stylesFromModule:function stylesFromModule(moduleId){var m=importModule(moduleId);if(!m){console.warn("Could not find style data in module named",moduleId);return[]}if(m._styles===void 0){var styles=[];styles.push.apply(styles,babelHelpers.toConsumableArray(this._stylesFromModuleImports(m)));var template=m.querySelector("template");if(template){styles.push.apply(styles,babelHelpers.toConsumableArray(this.stylesFromTemplate(template,m.assetpath)))}m._styles=styles}return m._styles},stylesFromTemplate:function stylesFromTemplate(template,baseURI){if(!template._styles){for(var styles=[],e$=template.content.querySelectorAll("style"),i=0;i<e$.length;i++){var e=e$[i],include=e.getAttribute("include");if(include){styles.push.apply(styles,babelHelpers.toConsumableArray(this.stylesFromModules(include).filter(function(item,index,self){return self.indexOf(item)===index})))}if(baseURI){e.textContent=Polymer.ResolveUrl.resolveCss(e.textContent,baseURI)}styles.push(e)}template._styles=styles}return template._styles},stylesFromModuleImports:function stylesFromModuleImports(moduleId){var m=importModule(moduleId);return m?this._stylesFromModuleImports(m):[]},_stylesFromModuleImports:function _stylesFromModuleImports(module){for(var styles=[],p$=module.querySelectorAll("link[rel=import][type~=css]"),i=0,p;i<p$.length;i++){p=p$[i];if(p.import){var importDoc=p.import,unscoped=p.hasAttribute(SHADY_UNSCOPED_ATTR);if(unscoped&&!importDoc._unscopedStyle){var style=styleForImport(importDoc);style.setAttribute(SHADY_UNSCOPED_ATTR,"");importDoc._unscopedStyle=style}else if(!importDoc._style){importDoc._style=styleForImport(importDoc)}styles.push(unscoped?importDoc._unscopedStyle:importDoc._style)}}return styles},cssFromModules:function cssFromModules(moduleIds){for(var modules=moduleIds.trim().split(/\s+/),cssText="",i=0;i<modules.length;i++){cssText+=this.cssFromModule(modules[i])}return cssText},cssFromModule:function cssFromModule(moduleId){var m=importModule(moduleId);if(m&&m._cssText===void 0){var cssText=this._cssFromModuleImports(m),t=m.querySelector("template");if(t){cssText+=this.cssFromTemplate(t,m.assetpath)}m._cssText=cssText||null}if(!m){console.warn("Could not find style data in module named",moduleId)}return m&&m._cssText||""},cssFromTemplate:function cssFromTemplate(template,baseURI){for(var cssText="",e$=this.stylesFromTemplate(template,baseURI),i=0,e;i<e$.length;i++){e=e$[i];if(e.parentNode){e.parentNode.removeChild(e)}cssText+=e.textContent}return cssText},cssFromModuleImports:function cssFromModuleImports(moduleId){var m=importModule(moduleId);return m?this._cssFromModuleImports(m):""},_cssFromModuleImports:function _cssFromModuleImports(module){for(var cssText="",styles=this._stylesFromModuleImports(module),i=0;i<styles.length;i++){cssText+=styles[i].textContent}return cssText}}})();</script><script>(function(){"use strict";var modules={},lcModules={};function findModule(id){return modules[id]||lcModules[id.toLowerCase()]}function styleOutsideTemplateCheck(inst){if(inst.querySelector("style")){console.warn("dom-module %s has style outside template",inst.id)}}var DomModule=function(_HTMLElement){babelHelpers.inherits(DomModule,_HTMLElement);function DomModule(){babelHelpers.classCallCheck(this,DomModule);return babelHelpers.possibleConstructorReturn(this,(DomModule.__proto__||Object.getPrototypeOf(DomModule)).apply(this,arguments))}babelHelpers.createClass(DomModule,[{key:"attributeChangedCallback",value:function attributeChangedCallback(name,old,value){if(old!==value){this.register()}}},{key:"register",value:function register(id){id=id||this.id;if(id){this.id=id;modules[id]=this;lcModules[id.toLowerCase()]=this;styleOutsideTemplateCheck(this)}}},{key:"assetpath",get:function get(){if(!this.__assetpath){var owner=window.HTMLImports&&HTMLImports.importForElement?HTMLImports.importForElement(this)||document:this.ownerDocument,url=Polymer.ResolveUrl.resolveUrl(this.getAttribute("assetpath")||"",owner.baseURI);this.__assetpath=Polymer.ResolveUrl.pathFromUrl(url)}return this.__assetpath}}],[{key:"import",value:function _import(id,selector){if(id){var m=findModule(id);if(m&&selector){return m.querySelector(selector)}return m}return null}},{key:"observedAttributes",get:function get(){return["id"]}}]);return DomModule}(HTMLElement);DomModule.prototype.modules=modules;customElements.define("dom-module",DomModule);Polymer.DomModule=DomModule})();</script><script>(function(){"use strict";var Path={isPath:function isPath(path){return 0<=path.indexOf(".")},root:function root(path){var dotIndex=path.indexOf(".");if(-1===dotIndex){return path}return path.slice(0,dotIndex)},isAncestor:function isAncestor(base,path){return 0===base.indexOf(path+".")},isDescendant:function isDescendant(base,path){return 0===path.indexOf(base+".")},translate:function translate(base,newBase,path){return newBase+path.slice(base.length)},matches:function matches(base,path){return base===path||this.isAncestor(base,path)||this.isDescendant(base,path)},normalize:function normalize(path){if(Array.isArray(path)){for(var parts=[],i=0,args;i<path.length;i++){args=path[i].toString().split(".");for(var j=0;j<args.length;j++){parts.push(args[j])}}return parts.join(".")}else{return path}},split:function split(path){if(Array.isArray(path)){return this.normalize(path).split(".")}return path.toString().split(".")},get:function get(root,path,info){for(var prop=root,parts=this.split(path),i=0;i<parts.length;i++){if(!prop){return}var part=parts[i];prop=prop[part]}if(info){info.path=parts.join(".")}return prop},set:function set(root,path,value){var prop=root,parts=this.split(path),last=parts[parts.length-1];if(1<parts.length){for(var i=0,part;i<parts.length-1;i++){part=parts[i];prop=prop[part];if(!prop){return}}prop[last]=value}else{prop[path]=value}return parts.join(".")}};Path.isDeep=Path.isPath;Polymer.Path=Path})();</script><script>(function(){"use strict";var caseMap={},DASH_TO_CAMEL=/-[a-z]/g,CAMEL_TO_DASH=/([A-Z])/g;Polymer.CaseMap={dashToCamelCase:function dashToCamelCase(dash){return caseMap[dash]||(caseMap[dash]=0>dash.indexOf("-")?dash:dash.replace(DASH_TO_CAMEL,function(m){return m[1].toUpperCase()}))},camelToDashCase:function camelToDashCase(camel){return caseMap[camel]||(caseMap[camel]=camel.replace(CAMEL_TO_DASH,"-$1").toLowerCase())}}})();</script><script>(function(){"use strict";var microtaskCurrHandle=0,microtaskLastHandle=0,microtaskCallbacks=[],microtaskNodeContent=0,microtaskNode=document.createTextNode("");new window.MutationObserver(function(){for(var len=microtaskCallbacks.length,i=0,cb;i<len;i++){cb=microtaskCallbacks[i];if(cb){try{cb()}catch(e){setTimeout(function(){throw e})}}}microtaskCallbacks.splice(0,len);microtaskLastHandle+=len}).observe(microtaskNode,{characterData:!0});Polymer.Async={timeOut:{after:function after(delay){return{run:function run(fn){return window.setTimeout(fn,delay)},cancel:function cancel(handle){window.clearTimeout(handle)}}},run:function run(fn,delay){return window.setTimeout(fn,delay)},cancel:function cancel(handle){window.clearTimeout(handle)}},animationFrame:{run:function run(fn){return window.requestAnimationFrame(fn)},cancel:function cancel(handle){window.cancelAnimationFrame(handle)}},idlePeriod:{run:function run(fn){return window.requestIdleCallback?window.requestIdleCallback(fn):window.setTimeout(fn,16)},cancel:function cancel(handle){window.cancelIdleCallback?window.cancelIdleCallback(handle):window.clearTimeout(handle)}},microTask:{run:function run(callback){microtaskNode.textContent=microtaskNodeContent++;microtaskCallbacks.push(callback);return microtaskCurrHandle++},cancel:function cancel(handle){var idx=handle-microtaskLastHandle;if(0<=idx){if(!microtaskCallbacks[idx]){throw new Error("invalid async handle: "+handle)}microtaskCallbacks[idx]=null}}}}})();</script><script>(function(){"use strict";var microtask=Polymer.Async.microTask;Polymer.PropertiesChanged=Polymer.dedupingMixin(function(superClass){var PropertiesChanged=function(_superClass){babelHelpers.inherits(PropertiesChanged,_superClass);babelHelpers.createClass(PropertiesChanged,[{key:"_createPropertyAccessor",value:function _createPropertyAccessor(property,readOnly){this._addPropertyToAttributeMap(property);if(!this.hasOwnProperty("__dataHasAccessor")){this.__dataHasAccessor=Object.assign({},this.__dataHasAccessor)}if(!this.__dataHasAccessor[property]){this.__dataHasAccessor[property]=!0;this._definePropertyAccessor(property,readOnly)}}},{key:"_addPropertyToAttributeMap",value:function _addPropertyToAttributeMap(property){if(!this.hasOwnProperty("__dataAttributes")){this.__dataAttributes=Object.assign({},this.__dataAttributes)}if(!this.__dataAttributes[property]){var attr=this.constructor.attributeNameForProperty(property);this.__dataAttributes[attr]=property}}},{key:"_definePropertyAccessor",value:function _definePropertyAccessor(property,readOnly){Object.defineProperty(this,property,{get:function get(){return this._getProperty(property)},set:readOnly?function(){}:function(value){this._setProperty(property,value)}})}}],[{key:"createProperties",value:function createProperties(props){var proto=this.prototype;for(var prop in props){if(!(prop in proto)){proto._createPropertyAccessor(prop)}}}},{key:"attributeNameForProperty",value:function attributeNameForProperty(property){return property.toLowerCase()}},{key:"typeForProperty",value:function typeForProperty(){}}]);function PropertiesChanged(){var _this;babelHelpers.classCallCheck(this,PropertiesChanged);_this=babelHelpers.possibleConstructorReturn(this,(PropertiesChanged.__proto__||Object.getPrototypeOf(PropertiesChanged)).call(this));_this.__dataEnabled=!1;_this.__dataReady=!1;_this.__dataInvalid=!1;_this.__data={};_this.__dataPending=null;_this.__dataOld=null;_this.__dataInstanceProps=null;_this.__serializing=!1;_this._initializeProperties();return _this}babelHelpers.createClass(PropertiesChanged,[{key:"ready",value:function ready(){this.__dataReady=!0;this._flushProperties()}},{key:"_initializeProperties",value:function _initializeProperties(){for(var p in this.__dataHasAccessor){if(this.hasOwnProperty(p)){this.__dataInstanceProps=this.__dataInstanceProps||{};this.__dataInstanceProps[p]=this[p];delete this[p]}}}},{key:"_initializeInstanceProperties",value:function _initializeInstanceProperties(props){Object.assign(this,props)}},{key:"_setProperty",value:function _setProperty(property,value){if(this._setPendingProperty(property,value)){this._invalidateProperties()}}},{key:"_getProperty",value:function _getProperty(property){return this.__data[property]}},{key:"_setPendingProperty",value:function _setPendingProperty(property,value){var old=this.__data[property],changed=this._shouldPropertyChange(property,value,old);if(changed){if(!this.__dataPending){this.__dataPending={};this.__dataOld={}}if(this.__dataOld&&!(property in this.__dataOld)){this.__dataOld[property]=old}this.__data[property]=value;this.__dataPending[property]=value}return changed}},{key:"_invalidateProperties",value:function _invalidateProperties(){var _this2=this;if(!this.__dataInvalid&&this.__dataReady){this.__dataInvalid=!0;microtask.run(function(){if(_this2.__dataInvalid){_this2.__dataInvalid=!1;_this2._flushProperties()}})}}},{key:"_enableProperties",value:function _enableProperties(){if(!this.__dataEnabled){this.__dataEnabled=!0;if(this.__dataInstanceProps){this._initializeInstanceProperties(this.__dataInstanceProps);this.__dataInstanceProps=null}this.ready()}}},{key:"_flushProperties",value:function _flushProperties(){var props=this.__data,changedProps=this.__dataPending,old=this.__dataOld;if(this._shouldPropertiesChange(props,changedProps,old)){this.__dataPending=null;this.__dataOld=null;this._propertiesChanged(props,changedProps,old)}}},{key:"_shouldPropertiesChange",value:function _shouldPropertiesChange(currentProps,changedProps){return!!changedProps}},{key:"_propertiesChanged",value:function _propertiesChanged(){}},{key:"_shouldPropertyChange",value:function _shouldPropertyChange(property,value,old){return old!==value&&(old===old||value===value)}},{key:"attributeChangedCallback",value:function attributeChangedCallback(name,old,value){if(old!==value){this._attributeToProperty(name,value)}if(babelHelpers.get(PropertiesChanged.prototype.__proto__||Object.getPrototypeOf(PropertiesChanged.prototype),"attributeChangedCallback",this)){babelHelpers.get(PropertiesChanged.prototype.__proto__||Object.getPrototypeOf(PropertiesChanged.prototype),"attributeChangedCallback",this).call(this,name,old,value)}}},{key:"_attributeToProperty",value:function _attributeToProperty(attribute,value,type){if(!this.__serializing){var map=this.__dataAttributes,property=map&&map[attribute]||attribute;this[property]=this._deserializeValue(value,type||this.constructor.typeForProperty(property))}}},{key:"_propertyToAttribute",value:function _propertyToAttribute(property,attribute,value){this.__serializing=!0;value=3>arguments.length?this[property]:value;this._valueToNodeAttribute(this,value,attribute||this.constructor.attributeNameForProperty(property));this.__serializing=!1}},{key:"_valueToNodeAttribute",value:function _valueToNodeAttribute(node,value,attribute){var str=this._serializeValue(value);if(str===void 0){node.removeAttribute(attribute)}else{node.setAttribute(attribute,str)}}},{key:"_serializeValue",value:function _serializeValue(value){switch(babelHelpers.typeof(value)){case"boolean":return value?"":void 0;default:return null!=value?value.toString():void 0;}}},{key:"_deserializeValue",value:function _deserializeValue(value,type){switch(type){case Boolean:return null!==value;case Number:return+value;default:return value;}}}]);return PropertiesChanged}(superClass);return PropertiesChanged})})();</script><script>(function(){"use strict";var caseMap=Polymer.CaseMap,nativeProperties={},proto=HTMLElement.prototype;while(proto){for(var props=Object.getOwnPropertyNames(proto),i=0;i<props.length;i++){nativeProperties[props[i]]=!0}proto=Object.getPrototypeOf(proto)}function saveAccessorValue(model,property){if(!nativeProperties[property]){var value=model[property];if(value!==void 0){if(model.__data){model._setPendingProperty(property,value)}else{if(!model.__dataProto){model.__dataProto={}}else if(!model.hasOwnProperty(JSCompiler_renameProperty("__dataProto",model))){model.__dataProto=Object.create(model.__dataProto)}model.__dataProto[property]=value}}}}Polymer.PropertyAccessors=Polymer.dedupingMixin(function(superClass){var base=Polymer.PropertiesChanged(superClass),PropertyAccessors=function(_base){babelHelpers.inherits(PropertyAccessors,_base);function PropertyAccessors(){babelHelpers.classCallCheck(this,PropertyAccessors);return babelHelpers.possibleConstructorReturn(this,(PropertyAccessors.__proto__||Object.getPrototypeOf(PropertyAccessors)).apply(this,arguments))}babelHelpers.createClass(PropertyAccessors,[{key:"_initializeProperties",value:function _initializeProperties(){if(this.__dataProto){this._initializeProtoProperties(this.__dataProto);this.__dataProto=null}babelHelpers.get(PropertyAccessors.prototype.__proto__||Object.getPrototypeOf(PropertyAccessors.prototype),"_initializeProperties",this).call(this)}},{key:"_initializeProtoProperties",value:function _initializeProtoProperties(props){for(var p in props){this._setProperty(p,props[p])}}},{key:"_ensureAttribute",value:function _ensureAttribute(attribute,value){var el=this;if(!el.hasAttribute(attribute)){this._valueToNodeAttribute(el,value,attribute)}}},{key:"_serializeValue",value:function _serializeValue(value){switch(babelHelpers.typeof(value)){case"object":if(babelHelpers.instanceof(value,Date)){return value.toString()}else if(value){try{return JSON.stringify(value)}catch(x){return""}}default:return babelHelpers.get(PropertyAccessors.prototype.__proto__||Object.getPrototypeOf(PropertyAccessors.prototype),"_serializeValue",this).call(this,value);}}},{key:"_deserializeValue",value:function _deserializeValue(value,type){var outValue;switch(type){case Object:try{outValue=JSON.parse(value)}catch(x){outValue=value}break;case Array:try{outValue=JSON.parse(value)}catch(x){outValue=null;console.warn("Polymer::Attributes: couldn't decode Array as JSON: ".concat(value))}break;case Date:outValue=isNaN(value)?value+"":+value;outValue=new Date(outValue);break;default:outValue=babelHelpers.get(PropertyAccessors.prototype.__proto__||Object.getPrototypeOf(PropertyAccessors.prototype),"_deserializeValue",this).call(this,value,type);break;}return outValue}},{key:"_definePropertyAccessor",value:function _definePropertyAccessor(property,readOnly){saveAccessorValue(this,property);babelHelpers.get(PropertyAccessors.prototype.__proto__||Object.getPrototypeOf(PropertyAccessors.prototype),"_definePropertyAccessor",this).call(this,property,readOnly)}},{key:"_hasAccessor",value:function _hasAccessor(property){return this.__dataHasAccessor&&this.__dataHasAccessor[property]}},{key:"_isPropertyPending",value:function _isPropertyPending(prop){return!!(this.__dataPending&&prop in this.__dataPending)}}],[{key:"createPropertiesForAttributes",value:function createPropertiesForAttributes(){for(var a$=this.observedAttributes,_i=0;_i<a$.length;_i++){this.prototype._createPropertyAccessor(caseMap.dashToCamelCase(a$[_i]))}}},{key:"attributeNameForProperty",value:function attributeNameForProperty(property){return caseMap.camelToDashCase(property)}}]);return PropertyAccessors}(base);return PropertyAccessors})})();</script><script>(function(){"use strict";var templateExtensions={"dom-if":!0,"dom-repeat":!0};function wrapTemplateExtension(node){var is=node.getAttribute("is");if(is&&templateExtensions[is]){var t=node;t.removeAttribute("is");node=t.ownerDocument.createElement(is);t.parentNode.replaceChild(node,t);node.appendChild(t);while(t.attributes.length){node.setAttribute(t.attributes[0].name,t.attributes[0].value);t.removeAttribute(t.attributes[0].name)}}return node}function findTemplateNode(root,nodeInfo){var parent=nodeInfo.parentInfo&&findTemplateNode(root,nodeInfo.parentInfo);if(parent){for(var n=parent.firstChild,i=0;n;n=n.nextSibling){if(nodeInfo.parentIndex===i++){return n}}}else{return root}}function applyIdToMap(inst,map,node,nodeInfo){if(nodeInfo.id){map[nodeInfo.id]=node}}function applyEventListener(inst,node,nodeInfo){if(nodeInfo.events&&nodeInfo.events.length){for(var j=0,e$=nodeInfo.events,e;j<e$.length&&(e=e$[j]);j++){inst._addMethodEventListenerToNode(node,e.name,e.value,inst)}}}function applyTemplateContent(inst,node,nodeInfo){if(nodeInfo.templateInfo){node._templateInfo=nodeInfo.templateInfo}}function createNodeEventHandler(context,eventName,methodName){context=context._methodHost||context;var handler=function(e){if(context[methodName]){context[methodName](e,e.detail)}else{console.warn("listener method `"+methodName+"` not defined")}};return handler}Polymer.TemplateStamp=Polymer.dedupingMixin(function(superClass){var TemplateStamp=function(_superClass){babelHelpers.inherits(TemplateStamp,_superClass);function TemplateStamp(){babelHelpers.classCallCheck(this,TemplateStamp);return babelHelpers.possibleConstructorReturn(this,(TemplateStamp.__proto__||Object.getPrototypeOf(TemplateStamp)).apply(this,arguments))}babelHelpers.createClass(TemplateStamp,[{key:"_stampTemplate",value:function _stampTemplate(template){if(template&&!template.content&&window.HTMLTemplateElement&&HTMLTemplateElement.decorate){HTMLTemplateElement.decorate(template)}var templateInfo=this.constructor._parseTemplate(template),nodeInfo=templateInfo.nodeInfoList,content=templateInfo.content||template.content,dom=document.importNode(content,!0);dom.__noInsertionPoint=!templateInfo.hasInsertionPoint;var nodes=dom.nodeList=Array(nodeInfo.length);dom.$={};for(var i=0,l=nodeInfo.length,info,node;i<l&&(info=nodeInfo[i]);i++){node=nodes[i]=findTemplateNode(dom,info);applyIdToMap(this,dom.$,node,info);applyTemplateContent(this,node,info);applyEventListener(this,node,info)}dom=dom;return dom}},{key:"_addMethodEventListenerToNode",value:function _addMethodEventListenerToNode(node,eventName,methodName,context){context=context||node;var handler=createNodeEventHandler(context,eventName,methodName);this._addEventListenerToNode(node,eventName,handler);return handler}},{key:"_addEventListenerToNode",value:function _addEventListenerToNode(node,eventName,handler){node.addEventListener(eventName,handler)}},{key:"_removeEventListenerFromNode",value:function _removeEventListenerFromNode(node,eventName,handler){node.removeEventListener(eventName,handler)}}],[{key:"_parseTemplate",value:function _parseTemplate(template,outerTemplateInfo){if(!template._templateInfo){var templateInfo=template._templateInfo={};templateInfo.nodeInfoList=[];templateInfo.stripWhiteSpace=outerTemplateInfo&&outerTemplateInfo.stripWhiteSpace||template.hasAttribute("strip-whitespace");this._parseTemplateContent(template,templateInfo,{parent:null})}return template._templateInfo}},{key:"_parseTemplateContent",value:function _parseTemplateContent(template,templateInfo,nodeInfo){return this._parseTemplateNode(template.content,templateInfo,nodeInfo)}},{key:"_parseTemplateNode",value:function _parseTemplateNode(node,templateInfo,nodeInfo){var noted,element=node;if("template"==element.localName&&!element.hasAttribute("preserve-content")){noted=this._parseTemplateNestedTemplate(element,templateInfo,nodeInfo)||noted}else if("slot"===element.localName){templateInfo.hasInsertionPoint=!0}if(element.firstChild){noted=this._parseTemplateChildNodes(element,templateInfo,nodeInfo)||noted}if(element.hasAttributes&&element.hasAttributes()){noted=this._parseTemplateNodeAttributes(element,templateInfo,nodeInfo)||noted}return noted}},{key:"_parseTemplateChildNodes",value:function _parseTemplateChildNodes(root,templateInfo,nodeInfo){if("script"===root.localName||"style"===root.localName){return}for(var node=root.firstChild,parentIndex=0,next;node;node=next){if("template"==node.localName){node=wrapTemplateExtension(node)}next=node.nextSibling;if(node.nodeType===Node.TEXT_NODE){var n=next;while(n&&n.nodeType===Node.TEXT_NODE){node.textContent+=n.textContent;next=n.nextSibling;root.removeChild(n);n=next}if(templateInfo.stripWhiteSpace&&!node.textContent.trim()){root.removeChild(node);continue}}var childInfo={parentIndex:parentIndex,parentInfo:nodeInfo};if(this._parseTemplateNode(node,templateInfo,childInfo)){childInfo.infoIndex=templateInfo.nodeInfoList.push(childInfo)-1}if(node.parentNode){parentIndex++}}}},{key:"_parseTemplateNestedTemplate",value:function _parseTemplateNestedTemplate(node,outerTemplateInfo,nodeInfo){var templateInfo=this._parseTemplate(node,outerTemplateInfo),content=templateInfo.content=node.content.ownerDocument.createDocumentFragment();content.appendChild(node.content);nodeInfo.templateInfo=templateInfo;return!0}},{key:"_parseTemplateNodeAttributes",value:function _parseTemplateNodeAttributes(node,templateInfo,nodeInfo){for(var noted=!1,attrs=Array.from(node.attributes),i=attrs.length-1,a;a=attrs[i];i--){noted=this._parseTemplateNodeAttribute(node,templateInfo,nodeInfo,a.name,a.value)||noted}return noted}},{key:"_parseTemplateNodeAttribute",value:function _parseTemplateNodeAttribute(node,templateInfo,nodeInfo,name,value){if("on-"===name.slice(0,3)){node.removeAttribute(name);nodeInfo.events=nodeInfo.events||[];nodeInfo.events.push({name:name.slice(3),value:value});return!0}else if("id"===name){nodeInfo.id=value;return!0}return!1}},{key:"_contentForTemplate",value:function _contentForTemplate(template){var templateInfo=template._templateInfo;return templateInfo&&templateInfo.content||template.content}}]);return TemplateStamp}(superClass);return TemplateStamp})})();</script><script>(function(){"use strict";var CaseMap=Polymer.CaseMap,dedupeId=0,TYPES={COMPUTE:"__computeEffects",REFLECT:"__reflectEffects",NOTIFY:"__notifyEffects",PROPAGATE:"__propagateEffects",OBSERVE:"__observeEffects",READ_ONLY:"__readOnly"},capitalAttributeRegex=/[A-Z]/;function ensureOwnEffectMap(model,type){var effects=model[type];if(!effects){effects=model[type]={}}else if(!model.hasOwnProperty(type)){effects=model[type]=Object.create(model[type]);for(var p in effects){for(var protoFx=effects[p],instFx=effects[p]=Array(protoFx.length),i=0;i<protoFx.length;i++){instFx[i]=protoFx[i]}}}return effects}function runEffects(inst,effects,props,oldProps,hasPaths,extraArgs){if(effects){var ran=!1,id=dedupeId++;for(var prop in props){if(runEffectsForProperty(inst,effects,id,prop,props,oldProps,hasPaths,extraArgs)){ran=!0}}return ran}return!1}function runEffectsForProperty(inst,effects,dedupeId,prop,props,oldProps,hasPaths,extraArgs){var ran=!1,rootProperty=hasPaths?Polymer.Path.root(prop):prop,fxs=effects[rootProperty];if(fxs){for(var i=0,l=fxs.length,fx;i<l&&(fx=fxs[i]);i++){if((!fx.info||fx.info.lastRun!==dedupeId)&&(!hasPaths||pathMatchesTrigger(prop,fx.trigger))){if(fx.info){fx.info.lastRun=dedupeId}fx.fn(inst,prop,props,oldProps,fx.info,hasPaths,extraArgs);ran=!0}}}return ran}function pathMatchesTrigger(path,trigger){if(trigger){var triggerPath=trigger.name;return triggerPath==path||trigger.structured&&Polymer.Path.isAncestor(triggerPath,path)||trigger.wildcard&&Polymer.Path.isDescendant(triggerPath,path)}else{return!0}}function runObserverEffect(inst,property,props,oldProps,info){var fn="string"===typeof info.method?inst[info.method]:info.method,changedProp=info.property;if(fn){fn.call(inst,inst.__data[changedProp],oldProps[changedProp])}else if(!info.dynamicFn){console.warn("observer method `"+info.method+"` not defined")}}function runNotifyEffects(inst,notifyProps,props,oldProps,hasPaths){var fxs=inst[TYPES.NOTIFY],notified,id=dedupeId++;for(var prop in notifyProps){if(notifyProps[prop]){if(fxs&&runEffectsForProperty(inst,fxs,id,prop,props,oldProps,hasPaths)){notified=!0}else if(hasPaths&&notifyPath(inst,prop,props)){notified=!0}}}var host;if(notified&&(host=inst.__dataHost)&&host._invalidateProperties){host._invalidateProperties()}}function notifyPath(inst,path,props){var rootProperty=Polymer.Path.root(path);if(rootProperty!==path){var eventName=Polymer.CaseMap.camelToDashCase(rootProperty)+"-changed";dispatchNotifyEvent(inst,eventName,props[path],path);return!0}return!1}function dispatchNotifyEvent(inst,eventName,value,path){var detail={value:value,queueProperty:!0};if(path){detail.path=path}inst.dispatchEvent(new CustomEvent(eventName,{detail:detail}))}function runNotifyEffect(inst,property,props,oldProps,info,hasPaths){var rootProperty=hasPaths?Polymer.Path.root(property):property,path=rootProperty!=property?property:null,value=path?Polymer.Path.get(inst,path):inst.__data[property];if(path&&value===void 0){value=props[property]}dispatchNotifyEvent(inst,info.eventName,value,path)}function handleNotification(event,inst,fromProp,toPath,negate){var value,detail=event.detail,fromPath=detail&&detail.path;if(fromPath){toPath=Polymer.Path.translate(fromProp,toPath,fromPath);value=detail&&detail.value}else{value=event.target[fromProp]}value=negate?!value:value;if(!inst[TYPES.READ_ONLY]||!inst[TYPES.READ_ONLY][toPath]){if(inst._setPendingPropertyOrPath(toPath,value,!0,!!fromPath)&&(!detail||!detail.queueProperty)){inst._invalidateProperties()}}}function runReflectEffect(inst,property,props,oldProps,info){var value=inst.__data[property];if(Polymer.sanitizeDOMValue){value=Polymer.sanitizeDOMValue(value,info.attrName,"attribute",inst)}inst._propertyToAttribute(property,info.attrName,value)}function runComputedEffects(inst,changedProps,oldProps,hasPaths){var computeEffects=inst[TYPES.COMPUTE];if(computeEffects){var inputProps=changedProps;while(runEffects(inst,computeEffects,inputProps,oldProps,hasPaths)){Object.assign(oldProps,inst.__dataOld);Object.assign(changedProps,inst.__dataPending);inputProps=inst.__dataPending;inst.__dataPending=null}}}function runComputedEffect(inst,property,props,oldProps,info){var result=runMethodEffect(inst,property,props,oldProps,info),computedProp=info.methodInfo;if(inst.__dataHasAccessor&&inst.__dataHasAccessor[computedProp]){inst._setPendingProperty(computedProp,result,!0)}else{inst[computedProp]=result}}function computeLinkedPaths(inst,path,value){var links=inst.__dataLinkedPaths;if(links){var link;for(var a in links){var b=links[a];if(Polymer.Path.isDescendant(a,path)){link=Polymer.Path.translate(a,b,path);inst._setPendingPropertyOrPath(link,value,!0,!0)}else if(Polymer.Path.isDescendant(b,path)){link=Polymer.Path.translate(b,a,path);inst._setPendingPropertyOrPath(link,value,!0,!0)}}}}function addBinding(constructor,templateInfo,nodeInfo,kind,target,parts,literal){nodeInfo.bindings=nodeInfo.bindings||[];var binding={kind:kind,target:target,parts:parts,literal:literal,isCompound:1!==parts.length};nodeInfo.bindings.push(binding);if(shouldAddListener(binding)){var _binding$parts$=binding.parts[0],event=_binding$parts$.event,negate=_binding$parts$.negate;binding.listenerEvent=event||CaseMap.camelToDashCase(target)+"-changed";binding.listenerNegate=negate}for(var index=templateInfo.nodeInfoList.length,i=0,part;i<binding.parts.length;i++){part=binding.parts[i];part.compoundIndex=i;addEffectForBindingPart(constructor,templateInfo,binding,part,index)}}function addEffectForBindingPart(constructor,templateInfo,binding,part,index){if(!part.literal){if("attribute"===binding.kind&&"-"===binding.target[0]){console.warn("Cannot set attribute "+binding.target+" because \"-\" is not a valid attribute starting character")}else{for(var dependencies=part.dependencies,info={index:index,binding:binding,part:part,evaluator:constructor},j=0,trigger;j<dependencies.length;j++){trigger=dependencies[j];if("string"==typeof trigger){trigger=parseArg(trigger);trigger.wildcard=!0}constructor._addTemplatePropertyEffect(templateInfo,trigger.rootProperty,{fn:runBindingEffect,info:info,trigger:trigger})}}}}function runBindingEffect(inst,path,props,oldProps,info,hasPaths,nodeList){var node=nodeList[info.index],binding=info.binding,part=info.part;if(hasPaths&&part.source&&path.length>part.source.length&&"property"==binding.kind&&!binding.isCompound&&node.__isPropertyEffectsClient&&node.__dataHasAccessor&&node.__dataHasAccessor[binding.target]){var value=props[path];path=Polymer.Path.translate(part.source,binding.target,path);if(node._setPendingPropertyOrPath(path,value,!1,!0)){inst._enqueueClient(node)}}else{var _value=info.evaluator._evaluateBinding(inst,part,path,props,oldProps,hasPaths);applyBindingValue(inst,node,binding,part,_value)}}function applyBindingValue(inst,node,binding,part,value){value=computeBindingValue(node,value,binding,part);if(Polymer.sanitizeDOMValue){value=Polymer.sanitizeDOMValue(value,binding.target,binding.kind,node)}if("attribute"==binding.kind){inst._valueToNodeAttribute(node,value,binding.target)}else{var prop=binding.target;if(node.__isPropertyEffectsClient&&node.__dataHasAccessor&&node.__dataHasAccessor[prop]){if(!node[TYPES.READ_ONLY]||!node[TYPES.READ_ONLY][prop]){if(node._setPendingProperty(prop,value)){inst._enqueueClient(node)}}}else{inst._setUnmanagedPropertyToNode(node,prop,value)}}}function computeBindingValue(node,value,binding,part){if(binding.isCompound){var storage=node.__dataCompoundStorage[binding.target];storage[part.compoundIndex]=value;value=storage.join("")}if("attribute"!==binding.kind){if("textContent"===binding.target||"value"===binding.target&&("input"===node.localName||"textarea"===node.localName)){value=value==void 0?"":value}}return value}function shouldAddListener(binding){return!!binding.target&&"attribute"!=binding.kind&&"text"!=binding.kind&&!binding.isCompound&&"{"===binding.parts[0].mode}function setupBindings(inst,templateInfo){var nodeList=templateInfo.nodeList,nodeInfoList=templateInfo.nodeInfoList;if(nodeInfoList.length){for(var i=0;i<nodeInfoList.length;i++){var info=nodeInfoList[i],node=nodeList[i],bindings=info.bindings;if(bindings){for(var _i=0,binding;_i<bindings.length;_i++){binding=bindings[_i];setupCompoundStorage(node,binding);addNotifyListener(node,inst,binding)}}node.__dataHost=inst}}}function setupCompoundStorage(node,binding){if(binding.isCompound){for(var storage=node.__dataCompoundStorage||(node.__dataCompoundStorage={}),parts=binding.parts,literals=Array(parts.length),j=0;j<parts.length;j++){literals[j]=parts[j].literal}var target=binding.target;storage[target]=literals;if(binding.literal&&"property"==binding.kind){node[target]=binding.literal}}}function addNotifyListener(node,inst,binding){if(binding.listenerEvent){var part=binding.parts[0];node.addEventListener(binding.listenerEvent,function(e){handleNotification(e,inst,binding.target,part.source,part.negate)})}}function createMethodEffect(model,sig,type,effectFn,methodInfo,dynamicFn){dynamicFn=sig.static||dynamicFn&&("object"!==babelHelpers.typeof(dynamicFn)||dynamicFn[sig.methodName]);for(var info={methodName:sig.methodName,args:sig.args,methodInfo:methodInfo,dynamicFn:dynamicFn},i=0,arg;i<sig.args.length&&(arg=sig.args[i]);i++){if(!arg.literal){model._addPropertyEffect(arg.rootProperty,type,{fn:effectFn,info:info,trigger:arg})}}if(dynamicFn){model._addPropertyEffect(sig.methodName,type,{fn:effectFn,info:info})}}function runMethodEffect(inst,property,props,oldProps,info){var context=inst._methodHost||inst,fn=context[info.methodName];if(fn){var args=marshalArgs(inst.__data,info.args,property,props);return fn.apply(context,args)}else if(!info.dynamicFn){console.warn("method `"+info.methodName+"` not defined")}}var emptyArray=[],IDENT="(?:"+"[a-zA-Z_$][\\w.:$\\-*]*"+")",ARGUMENT="(?:("+IDENT+"|"+("(?:"+"[-+]?[0-9]*\\.?[0-9]+(?:[eE][-+]?[0-9]+)?"+")")+"|"+("(?:"+("(?:"+"'(?:[^'\\\\]|\\\\.)*'"+")")+"|"+("(?:"+"\"(?:[^\"\\\\]|\\\\.)*\""+")")+")")+")\\s*"+")",bindingRegex=new RegExp("(\\[\\[|{{)"+"\\s*"+"(?:(!)\\s*)?"+("("+IDENT+"\\s*"+("(?:"+"\\(\\s*"+"(?:"+("(?:"+ARGUMENT+"(?:,\\s*"+ARGUMENT+")*"+")")+"?"+")"+"\\)\\s*"+")")+"?"+")")+"(?:]]|}})","g");function literalFromParts(parts){for(var s="",i=0,literal;i<parts.length;i++){literal=parts[i].literal;s+=literal||""}return s}function parseMethod(expression){var m=expression.match(/([^\s]+?)\(([\s\S]*)\)/);if(m){var methodName=m[1],sig={methodName:methodName,static:!0,args:emptyArray};if(m[2].trim()){var args=m[2].replace(/\\,/g,"&comma;").split(",");return parseArgs(args,sig)}else{return sig}}return null}function parseArgs(argList,sig){sig.args=argList.map(function(rawArg){var arg=parseArg(rawArg);if(!arg.literal){sig.static=!1}return arg},this);return sig}function parseArg(rawArg){var arg=rawArg.trim().replace(/&comma;/g,",").replace(/\\(.)/g,"$1"),a={name:arg,value:"",literal:!1},fc=arg[0];if("-"===fc){fc=arg[1]}if("0"<=fc&&"9">=fc){fc="#"}switch(fc){case"'":case"\"":a.value=arg.slice(1,-1);a.literal=!0;break;case"#":a.value=+arg;a.literal=!0;break;}if(!a.literal){a.rootProperty=Polymer.Path.root(arg);a.structured=Polymer.Path.isPath(arg);if(a.structured){a.wildcard=".*"==arg.slice(-2);if(a.wildcard){a.name=arg.slice(0,-2)}}}return a}function marshalArgs(data,args,path,props){for(var values=[],i=0,l=args.length;i<l;i++){var arg=args[i],name=arg.name,v=void 0;if(arg.literal){v=arg.value}else{if(arg.structured){v=Polymer.Path.get(data,name);if(v===void 0){v=props[name]}}else{v=data[name]}}if(arg.wildcard){var baseChanged=0===name.indexOf(path+"."),matches=0===path.indexOf(name)&&!baseChanged;values[i]={path:matches?path:name,value:matches?props[path]:v,base:v}}else{values[i]=v}}return values}function _notifySplices(inst,array,path,splices){var splicesPath=path+".splices";inst.notifyPath(splicesPath,{indexSplices:splices});inst.notifyPath(path+".length",array.length);inst.__data[splicesPath]={indexSplices:null}}function notifySplice(inst,array,path,index,addedCount,removed){_notifySplices(inst,array,path,[{index:index,addedCount:addedCount,removed:removed,object:array,type:"splice"}])}function upper(name){return name[0].toUpperCase()+name.substring(1)}Polymer.PropertyEffects=Polymer.dedupingMixin(function(superClass){var propertyEffectsBase=Polymer.TemplateStamp(Polymer.PropertyAccessors(superClass)),PropertyEffects=function(_propertyEffectsBase){babelHelpers.inherits(PropertyEffects,_propertyEffectsBase);function PropertyEffects(){var _this;babelHelpers.classCallCheck(this,PropertyEffects);_this=babelHelpers.possibleConstructorReturn(this,(PropertyEffects.__proto__||Object.getPrototypeOf(PropertyEffects)).call(this));_this.__isPropertyEffectsClient=!0;_this.__dataCounter=0;_this.__dataClientsReady;_this.__dataPendingClients;_this.__dataToNotify;_this.__dataLinkedPaths;_this.__dataHasPaths;_this.__dataCompoundStorage;_this.__dataHost;_this.__dataTemp;_this.__dataClientsInitialized;_this.__data;_this.__dataPending;_this.__dataOld;_this.__computeEffects;_this.__reflectEffects;_this.__notifyEffects;_this.__propagateEffects;_this.__observeEffects;_this.__readOnly;_this.__templateInfo;return _this}babelHelpers.createClass(PropertyEffects,[{key:"_initializeProperties",value:function _initializeProperties(){babelHelpers.get(PropertyEffects.prototype.__proto__||Object.getPrototypeOf(PropertyEffects.prototype),"_initializeProperties",this).call(this);hostStack.registerHost(this);this.__dataClientsReady=!1;this.__dataPendingClients=null;this.__dataToNotify=null;this.__dataLinkedPaths=null;this.__dataHasPaths=!1;this.__dataCompoundStorage=this.__dataCompoundStorage||null;this.__dataHost=this.__dataHost||null;this.__dataTemp={};this.__dataClientsInitialized=!1}},{key:"_initializeProtoProperties",value:function _initializeProtoProperties(props){this.__data=Object.create(props);this.__dataPending=Object.create(props);this.__dataOld={}}},{key:"_initializeInstanceProperties",value:function _initializeInstanceProperties(props){var readOnly=this[TYPES.READ_ONLY];for(var prop in props){if(!readOnly||!readOnly[prop]){this.__dataPending=this.__dataPending||{};this.__dataOld=this.__dataOld||{};this.__data[prop]=this.__dataPending[prop]=props[prop]}}}},{key:"_addPropertyEffect",value:function _addPropertyEffect(property,type,effect){this._createPropertyAccessor(property,type==TYPES.READ_ONLY);var effects=ensureOwnEffectMap(this,type)[property];if(!effects){effects=this[type][property]=[]}effects.push(effect)}},{key:"_removePropertyEffect",value:function _removePropertyEffect(property,type,effect){var effects=ensureOwnEffectMap(this,type)[property],idx=effects.indexOf(effect);if(0<=idx){effects.splice(idx,1)}}},{key:"_hasPropertyEffect",value:function _hasPropertyEffect(property,type){var effects=this[type];return!!(effects&&effects[property])}},{key:"_hasReadOnlyEffect",value:function _hasReadOnlyEffect(property){return this._hasPropertyEffect(property,TYPES.READ_ONLY)}},{key:"_hasNotifyEffect",value:function _hasNotifyEffect(property){return this._hasPropertyEffect(property,TYPES.NOTIFY)}},{key:"_hasReflectEffect",value:function _hasReflectEffect(property){return this._hasPropertyEffect(property,TYPES.REFLECT)}},{key:"_hasComputedEffect",value:function _hasComputedEffect(property){return this._hasPropertyEffect(property,TYPES.COMPUTE)}},{key:"_setPendingPropertyOrPath",value:function _setPendingPropertyOrPath(path,value,shouldNotify,isPathNotification){if(isPathNotification||Polymer.Path.root(Array.isArray(path)?path[0]:path)!==path){if(!isPathNotification){var old=Polymer.Path.get(this,path);path=Polymer.Path.set(this,path,value);if(!path||!babelHelpers.get(PropertyEffects.prototype.__proto__||Object.getPrototypeOf(PropertyEffects.prototype),"_shouldPropertyChange",this).call(this,path,value,old)){return!1}}this.__dataHasPaths=!0;if(this._setPendingProperty(path,value,shouldNotify)){computeLinkedPaths(this,path,value);return!0}}else{if(this.__dataHasAccessor&&this.__dataHasAccessor[path]){return this._setPendingProperty(path,value,shouldNotify)}else{this[path]=value}}return!1}},{key:"_setUnmanagedPropertyToNode",value:function _setUnmanagedPropertyToNode(node,prop,value){if(value!==node[prop]||"object"==babelHelpers.typeof(value)){node[prop]=value}}},{key:"_setPendingProperty",value:function _setPendingProperty(property,value,shouldNotify){var isPath=this.__dataHasPaths&&Polymer.Path.isPath(property),prevProps=isPath?this.__dataTemp:this.__data;if(this._shouldPropertyChange(property,value,prevProps[property])){if(!this.__dataPending){this.__dataPending={};this.__dataOld={}}if(!(property in this.__dataOld)){this.__dataOld[property]=this.__data[property]}if(isPath){this.__dataTemp[property]=value}else{this.__data[property]=value}this.__dataPending[property]=value;if(isPath||this[TYPES.NOTIFY]&&this[TYPES.NOTIFY][property]){this.__dataToNotify=this.__dataToNotify||{};this.__dataToNotify[property]=shouldNotify}return!0}return!1}},{key:"_setProperty",value:function _setProperty(property,value){if(this._setPendingProperty(property,value,!0)){this._invalidateProperties()}}},{key:"_invalidateProperties",value:function _invalidateProperties(){if(this.__dataReady){this._flushProperties()}}},{key:"_enqueueClient",value:function _enqueueClient(client){this.__dataPendingClients=this.__dataPendingClients||[];if(client!==this){this.__dataPendingClients.push(client)}}},{key:"_flushProperties",value:function _flushProperties(){this.__dataCounter++;babelHelpers.get(PropertyEffects.prototype.__proto__||Object.getPrototypeOf(PropertyEffects.prototype),"_flushProperties",this).call(this);this.__dataCounter--}},{key:"_flushClients",value:function _flushClients(){if(!this.__dataClientsReady){this.__dataClientsReady=!0;this._readyClients();this.__dataReady=!0}else{this.__enableOrFlushClients()}}},{key:"__enableOrFlushClients",value:function __enableOrFlushClients(){var clients=this.__dataPendingClients;if(clients){this.__dataPendingClients=null;for(var i=0,client;i<clients.length;i++){client=clients[i];if(!client.__dataEnabled){client._enableProperties()}else if(client.__dataPending){client._flushProperties()}}}}},{key:"_readyClients",value:function _readyClients(){this.__enableOrFlushClients()}},{key:"setProperties",value:function setProperties(props,setReadOnly){for(var path in props){if(setReadOnly||!this[TYPES.READ_ONLY]||!this[TYPES.READ_ONLY][path]){this._setPendingPropertyOrPath(path,props[path],!0)}}this._invalidateProperties()}},{key:"ready",value:function ready(){this._flushProperties();if(!this.__dataClientsReady){this._flushClients()}if(this.__dataPending){this._flushProperties()}}},{key:"_propertiesChanged",value:function _propertiesChanged(currentProps,changedProps,oldProps){var hasPaths=this.__dataHasPaths;this.__dataHasPaths=!1;runComputedEffects(this,changedProps,oldProps,hasPaths);var notifyProps=this.__dataToNotify;this.__dataToNotify=null;this._propagatePropertyChanges(changedProps,oldProps,hasPaths);this._flushClients();runEffects(this,this[TYPES.REFLECT],changedProps,oldProps,hasPaths);runEffects(this,this[TYPES.OBSERVE],changedProps,oldProps,hasPaths);if(notifyProps){runNotifyEffects(this,notifyProps,changedProps,oldProps,hasPaths)}if(1==this.__dataCounter){this.__dataTemp={}}}},{key:"_propagatePropertyChanges",value:function _propagatePropertyChanges(changedProps,oldProps,hasPaths){if(this[TYPES.PROPAGATE]){runEffects(this,this[TYPES.PROPAGATE],changedProps,oldProps,hasPaths)}var templateInfo=this.__templateInfo;while(templateInfo){runEffects(this,templateInfo.propertyEffects,changedProps,oldProps,hasPaths,templateInfo.nodeList);templateInfo=templateInfo.nextTemplateInfo}}},{key:"linkPaths",value:function linkPaths(to,from){to=Polymer.Path.normalize(to);from=Polymer.Path.normalize(from);this.__dataLinkedPaths=this.__dataLinkedPaths||{};this.__dataLinkedPaths[to]=from}},{key:"unlinkPaths",value:function unlinkPaths(path){path=Polymer.Path.normalize(path);if(this.__dataLinkedPaths){delete this.__dataLinkedPaths[path]}}},{key:"notifySplices",value:function notifySplices(path,splices){var info={path:""},array=Polymer.Path.get(this,path,info);_notifySplices(this,array,info.path,splices)}},{key:"get",value:function get(path,root){return Polymer.Path.get(root||this,path)}},{key:"set",value:function set(path,value,root){if(root){Polymer.Path.set(root,path,value)}else{if(!this[TYPES.READ_ONLY]||!this[TYPES.READ_ONLY][path]){if(this._setPendingPropertyOrPath(path,value,!0)){this._invalidateProperties()}}}}},{key:"push",value:function push(path){for(var info={path:""},array=Polymer.Path.get(this,path,info),len=array.length,_len=arguments.length,items=Array(1<_len?_len-1:0),_key=1;_key<_len;_key++){items[_key-1]=arguments[_key]}var ret=array.push.apply(array,items);if(items.length){notifySplice(this,array,info.path,len,items.length,[])}return ret}},{key:"pop",value:function pop(path){var info={path:""},array=Polymer.Path.get(this,path,info),hadLength=!!array.length,ret=array.pop();if(hadLength){notifySplice(this,array,info.path,array.length,0,[ret])}return ret}},{key:"splice",value:function splice(path,start,deleteCount){for(var _Mathfloor=Math.floor,_len2=arguments.length,items=Array(3<_len2?_len2-3:0),_key2=3;_key2<_len2;_key2++){items[_key2-3]=arguments[_key2]}var info={path:""},array=Polymer.Path.get(this,path,info);if(0>start){start=array.length-_Mathfloor(-start)}else if(start){start=_Mathfloor(start)}var ret;if(2===arguments.length){ret=array.splice(start)}else{ret=array.splice.apply(array,[start,deleteCount].concat(items))}if(items.length||ret.length){notifySplice(this,array,info.path,start,items.length,ret)}return ret}},{key:"shift",value:function shift(path){var info={path:""},array=Polymer.Path.get(this,path,info),hadLength=!!array.length,ret=array.shift();if(hadLength){notifySplice(this,array,info.path,0,0,[ret])}return ret}},{key:"unshift",value:function unshift(path){for(var info={path:""},array=Polymer.Path.get(this,path,info),_len3=arguments.length,items=Array(1<_len3?_len3-1:0),_key3=1;_key3<_len3;_key3++){items[_key3-1]=arguments[_key3]}var ret=array.unshift.apply(array,items);if(items.length){notifySplice(this,array,info.path,0,items.length,[])}return ret}},{key:"notifyPath",value:function(path,value){var propPath;if(1==arguments.length){var info={path:""};value=Polymer.Path.get(this,path,info);propPath=info.path}else if(Array.isArray(path)){propPath=Polymer.Path.normalize(path)}else{propPath=path}if(this._setPendingPropertyOrPath(propPath,value,!0,!0)){this._invalidateProperties()}}},{key:"_createReadOnlyProperty",value:function _createReadOnlyProperty(property,protectedSetter){this._addPropertyEffect(property,TYPES.READ_ONLY);if(protectedSetter){this["_set"+upper(property)]=function(value){this._setProperty(property,value)}}}},{key:"_createPropertyObserver",value:function _createPropertyObserver(property,method,dynamicFn){var info={property:property,method:method,dynamicFn:!!dynamicFn};this._addPropertyEffect(property,TYPES.OBSERVE,{fn:runObserverEffect,info:info,trigger:{name:property}});if(dynamicFn){this._addPropertyEffect(method,TYPES.OBSERVE,{fn:runObserverEffect,info:info,trigger:{name:method}})}}},{key:"_createMethodObserver",value:function _createMethodObserver(expression,dynamicFn){var sig=parseMethod(expression);if(!sig){throw new Error("Malformed observer expression '"+expression+"'")}createMethodEffect(this,sig,TYPES.OBSERVE,runMethodEffect,null,dynamicFn)}},{key:"_createNotifyingProperty",value:function _createNotifyingProperty(property){this._addPropertyEffect(property,TYPES.NOTIFY,{fn:runNotifyEffect,info:{eventName:CaseMap.camelToDashCase(property)+"-changed",property:property}})}},{key:"_createReflectedProperty",value:function _createReflectedProperty(property){var attr=this.constructor.attributeNameForProperty(property);if("-"===attr[0]){console.warn("Property "+property+" cannot be reflected to attribute "+attr+" because \"-\" is not a valid starting attribute name. Use a lowercase first letter for the property instead.")}else{this._addPropertyEffect(property,TYPES.REFLECT,{fn:runReflectEffect,info:{attrName:attr}})}}},{key:"_createComputedProperty",value:function _createComputedProperty(property,expression,dynamicFn){var sig=parseMethod(expression);if(!sig){throw new Error("Malformed computed expression '"+expression+"'")}createMethodEffect(this,sig,TYPES.COMPUTE,runComputedEffect,property,dynamicFn)}},{key:"_bindTemplate",value:function _bindTemplate(template,instanceBinding){var templateInfo=this.constructor._parseTemplate(template),wasPreBound=this.__templateInfo==templateInfo;if(!wasPreBound){for(var prop in templateInfo.propertyEffects){this._createPropertyAccessor(prop)}}if(instanceBinding){templateInfo=Object.create(templateInfo);templateInfo.wasPreBound=wasPreBound;if(!wasPreBound&&this.__templateInfo){var last=this.__templateInfoLast||this.__templateInfo;this.__templateInfoLast=last.nextTemplateInfo=templateInfo;templateInfo.previousTemplateInfo=last;return templateInfo}}return this.__templateInfo=templateInfo}},{key:"_stampTemplate",value:function _stampTemplate(template){hostStack.beginHosting(this);var dom=babelHelpers.get(PropertyEffects.prototype.__proto__||Object.getPrototypeOf(PropertyEffects.prototype),"_stampTemplate",this).call(this,template);hostStack.endHosting(this);var templateInfo=this._bindTemplate(template,!0);templateInfo.nodeList=dom.nodeList;if(!templateInfo.wasPreBound){for(var nodes=templateInfo.childNodes=[],n=dom.firstChild;n;n=n.nextSibling){nodes.push(n)}}dom.templateInfo=templateInfo;setupBindings(this,templateInfo);if(this.__dataReady){runEffects(this,templateInfo.propertyEffects,this.__data,null,!1,templateInfo.nodeList)}return dom}},{key:"_removeBoundDom",value:function _removeBoundDom(dom){var templateInfo=dom.templateInfo;if(templateInfo.previousTemplateInfo){templateInfo.previousTemplateInfo.nextTemplateInfo=templateInfo.nextTemplateInfo}if(templateInfo.nextTemplateInfo){templateInfo.nextTemplateInfo.previousTemplateInfo=templateInfo.previousTemplateInfo}if(this.__templateInfoLast==templateInfo){this.__templateInfoLast=templateInfo.previousTemplateInfo}templateInfo.previousTemplateInfo=templateInfo.nextTemplateInfo=null;for(var nodes=templateInfo.childNodes,i=0,node;i<nodes.length;i++){node=nodes[i];node.parentNode.removeChild(node)}}},{key:"PROPERTY_EFFECT_TYPES",get:function get(){return TYPES}}],[{key:"addPropertyEffect",value:function addPropertyEffect(property,type,effect){this.prototype._addPropertyEffect(property,type,effect)}},{key:"createPropertyObserver",value:function createPropertyObserver(property,method,dynamicFn){this.prototype._createPropertyObserver(property,method,dynamicFn)}},{key:"createMethodObserver",value:function createMethodObserver(expression,dynamicFn){this.prototype._createMethodObserver(expression,dynamicFn)}},{key:"createNotifyingProperty",value:function createNotifyingProperty(property){this.prototype._createNotifyingProperty(property)}},{key:"createReadOnlyProperty",value:function createReadOnlyProperty(property,protectedSetter){this.prototype._createReadOnlyProperty(property,protectedSetter)}},{key:"createReflectedProperty",value:function createReflectedProperty(property){this.prototype._createReflectedProperty(property)}},{key:"createComputedProperty",value:function createComputedProperty(property,expression,dynamicFn){this.prototype._createComputedProperty(property,expression,dynamicFn)}},{key:"bindTemplate",value:function bindTemplate(template){return this.prototype._bindTemplate(template)}},{key:"_addTemplatePropertyEffect",value:function _addTemplatePropertyEffect(templateInfo,prop,effect){var hostProps=templateInfo.hostProps=templateInfo.hostProps||{};hostProps[prop]=!0;var effects=templateInfo.propertyEffects=templateInfo.propertyEffects||{},propEffects=effects[prop]=effects[prop]||[];propEffects.push(effect)}},{key:"_parseTemplateNode",value:function _parseTemplateNode(node,templateInfo,nodeInfo){var noted=babelHelpers.get(PropertyEffects.__proto__||Object.getPrototypeOf(PropertyEffects),"_parseTemplateNode",this).call(this,node,templateInfo,nodeInfo);if(node.nodeType===Node.TEXT_NODE){var parts=this._parseBindings(node.textContent,templateInfo);if(parts){node.textContent=literalFromParts(parts)||" ";addBinding(this,templateInfo,nodeInfo,"text","textContent",parts);noted=!0}}return noted}},{key:"_parseTemplateNodeAttribute",value:function _parseTemplateNodeAttribute(node,templateInfo,nodeInfo,name,value){var parts=this._parseBindings(value,templateInfo);if(parts){var origName=name,kind="property";if(capitalAttributeRegex.test(name)){kind="attribute"}else if("$"==name[name.length-1]){name=name.slice(0,-1);kind="attribute"}var literal=literalFromParts(parts);if(literal&&"attribute"==kind){node.setAttribute(name,literal)}if("input"===node.localName&&"value"===origName){node.setAttribute(origName,"")}node.removeAttribute(origName);if("property"===kind){name=Polymer.CaseMap.dashToCamelCase(name)}addBinding(this,templateInfo,nodeInfo,kind,name,parts,literal);return!0}else{return babelHelpers.get(PropertyEffects.__proto__||Object.getPrototypeOf(PropertyEffects),"_parseTemplateNodeAttribute",this).call(this,node,templateInfo,nodeInfo,name,value)}}},{key:"_parseTemplateNestedTemplate",value:function _parseTemplateNestedTemplate(node,templateInfo,nodeInfo){var noted=babelHelpers.get(PropertyEffects.__proto__||Object.getPrototypeOf(PropertyEffects),"_parseTemplateNestedTemplate",this).call(this,node,templateInfo,nodeInfo),hostProps=nodeInfo.templateInfo.hostProps;for(var source in hostProps){addBinding(this,templateInfo,nodeInfo,"property","_host_"+source,[{mode:"{",source:source,dependencies:[source]}])}return noted}},{key:"_parseBindings",value:function _parseBindings(text,templateInfo){var parts=[],lastIndex=0,m;while(null!==(m=bindingRegex.exec(text))){if(m.index>lastIndex){parts.push({literal:text.slice(lastIndex,m.index)})}var mode=m[1][0],negate=!!m[2],source=m[3].trim(),customEvent=!1,notifyEvent="",colon=-1;if("{"==mode&&0<(colon=source.indexOf("::"))){notifyEvent=source.substring(colon+2);source=source.substring(0,colon);customEvent=!0}var signature=parseMethod(source),dependencies=[];if(signature){for(var args=signature.args,methodName=signature.methodName,i=0,arg;i<args.length;i++){arg=args[i];if(!arg.literal){dependencies.push(arg)}}var dynamicFns=templateInfo.dynamicFns;if(dynamicFns&&dynamicFns[methodName]||signature.static){dependencies.push(methodName);signature.dynamicFn=!0}}else{dependencies.push(source)}parts.push({source:source,mode:mode,negate:negate,customEvent:customEvent,signature:signature,dependencies:dependencies,event:notifyEvent});lastIndex=bindingRegex.lastIndex}if(lastIndex&&lastIndex<text.length){var literal=text.substring(lastIndex);if(literal){parts.push({literal:literal})}}if(parts.length){return parts}else{return null}}},{key:"_evaluateBinding",value:function _evaluateBinding(inst,part,path,props,oldProps,hasPaths){var value;if(part.signature){value=runMethodEffect(inst,path,props,oldProps,part.signature)}else if(path!=part.source){value=Polymer.Path.get(inst,part.source)}else{if(hasPaths&&Polymer.Path.isPath(path)){value=Polymer.Path.get(inst,path)}else{value=inst.__data[path]}}if(part.negate){value=!value}return value}}]);return PropertyEffects}(propertyEffectsBase);return PropertyEffects});var hostStack={stack:[],registerHost:function registerHost(inst){if(this.stack.length){var host=this.stack[this.stack.length-1];host._enqueueClient(inst)}},beginHosting:function beginHosting(inst){this.stack.push(inst)},endHosting:function endHosting(inst){var stackLen=this.stack.length;if(stackLen&&this.stack[stackLen-1]==inst){this.stack.pop()}}}})();</script><script>(function(){"use strict";function normalizeProperties(props){var output={};for(var p in props){var o=props[p];output[p]="function"===typeof o?{type:o}:o}return output}Polymer.PropertiesMixin=Polymer.dedupingMixin(function(superClass){var base=Polymer.PropertiesChanged(superClass);function superPropertiesClass(constructor){var superCtor=Object.getPrototypeOf(constructor);return babelHelpers.instanceof(superCtor.prototype,PropertiesMixin)?superCtor:null}function ownProperties(constructor){if(!constructor.hasOwnProperty(JSCompiler_renameProperty("__ownProperties",constructor))){var props=null;if(constructor.hasOwnProperty(JSCompiler_renameProperty("properties",constructor))&&constructor.properties){props=normalizeProperties(constructor.properties)}constructor.__ownProperties=props}return constructor.__ownProperties}var PropertiesMixin=function(_base){babelHelpers.inherits(PropertiesMixin,_base);function PropertiesMixin(){babelHelpers.classCallCheck(this,PropertiesMixin);return babelHelpers.possibleConstructorReturn(this,(PropertiesMixin.__proto__||Object.getPrototypeOf(PropertiesMixin)).apply(this,arguments))}babelHelpers.createClass(PropertiesMixin,[{key:"_initializeProperties",value:function _initializeProperties(){this.constructor.finalize();babelHelpers.get(PropertiesMixin.prototype.__proto__||Object.getPrototypeOf(PropertiesMixin.prototype),"_initializeProperties",this).call(this)}},{key:"connectedCallback",value:function connectedCallback(){if(babelHelpers.get(PropertiesMixin.prototype.__proto__||Object.getPrototypeOf(PropertiesMixin.prototype),"connectedCallback",this)){babelHelpers.get(PropertiesMixin.prototype.__proto__||Object.getPrototypeOf(PropertiesMixin.prototype),"connectedCallback",this).call(this)}this._enableProperties()}},{key:"disconnectedCallback",value:function disconnectedCallback(){if(babelHelpers.get(PropertiesMixin.prototype.__proto__||Object.getPrototypeOf(PropertiesMixin.prototype),"disconnectedCallback",this)){babelHelpers.get(PropertiesMixin.prototype.__proto__||Object.getPrototypeOf(PropertiesMixin.prototype),"disconnectedCallback",this).call(this)}}}],[{key:"finalize",value:function finalize(){if(!this.hasOwnProperty(JSCompiler_renameProperty("__finalized",this))){var superCtor=superPropertiesClass(this);if(superCtor){superCtor.finalize()}this.__finalized=!0;this._finalizeClass()}}},{key:"_finalizeClass",value:function _finalizeClass(){var props=ownProperties(this);if(props){this.createProperties(props)}}},{key:"typeForProperty",value:function typeForProperty(name){var info=this._properties[name];return info&&info.type}},{key:"observedAttributes",get:function get(){var _this=this,props=this._properties;return props?Object.keys(props).map(function(p){return _this.attributeNameForProperty(p)}):[]}},{key:"_properties",get:function get(){if(!this.hasOwnProperty(JSCompiler_renameProperty("__properties",this))){var superCtor=superPropertiesClass(this);this.__properties=Object.assign({},superCtor&&superCtor._properties,ownProperties(this))}return this.__properties}}]);return PropertiesMixin}(base);return PropertiesMixin})})();</script><script>(function(){"use strict";Polymer.ElementMixin=Polymer.dedupingMixin(function(base){var polymerElementBase=Polymer.PropertiesMixin(Polymer.PropertyEffects(base));function propertyDefaults(constructor){if(!constructor.hasOwnProperty(JSCompiler_renameProperty("__propertyDefaults",constructor))){constructor.__propertyDefaults=null;var props=constructor._properties;for(var p in props){var info=props[p];if("value"in info){constructor.__propertyDefaults=constructor.__propertyDefaults||{};constructor.__propertyDefaults[p]=info}}}return constructor.__propertyDefaults}function ownObservers(constructor){if(!constructor.hasOwnProperty(JSCompiler_renameProperty("__ownObservers",constructor))){constructor.__ownObservers=constructor.hasOwnProperty(JSCompiler_renameProperty("observers",constructor))?constructor.observers:null}return constructor.__ownObservers}function createPropertyFromConfig(proto,name,info,allProps){if(info.computed){info.readOnly=!0}if(info.computed&&!proto._hasReadOnlyEffect(name)){proto._createComputedProperty(name,info.computed,allProps)}if(info.readOnly&&!proto._hasReadOnlyEffect(name)){proto._createReadOnlyProperty(name,!info.computed)}if(info.reflectToAttribute&&!proto._hasReflectEffect(name)){proto._createReflectedProperty(name)}if(info.notify&&!proto._hasNotifyEffect(name)){proto._createNotifyingProperty(name)}if(info.observer){proto._createPropertyObserver(name,info.observer,allProps[info.observer])}proto._addPropertyToAttributeMap(name)}function processElementStyles(klass,template,is,baseURI){for(var templateStyles=template.content.querySelectorAll("style"),stylesWithImports=Polymer.StyleGather.stylesFromTemplate(template),linkedStyles=Polymer.StyleGather.stylesFromModuleImports(is),firstTemplateChild=template.content.firstElementChild,idx=0,s;idx<linkedStyles.length;idx++){s=linkedStyles[idx];s.textContent=klass._processStyleText(s.textContent,baseURI);template.content.insertBefore(s,firstTemplateChild)}for(var templateStyleIndex=0,i=0;i<stylesWithImports.length;i++){var _s=stylesWithImports[i],templateStyle=templateStyles[templateStyleIndex];if(templateStyle!==_s){_s=_s.cloneNode(!0);templateStyle.parentNode.insertBefore(_s,templateStyle)}else{templateStyleIndex++}_s.textContent=klass._processStyleText(_s.textContent,baseURI)}if(window.ShadyCSS){window.ShadyCSS.prepareTemplate(template,is)}}var PolymerElement=function(_polymerElementBase){babelHelpers.inherits(PolymerElement,_polymerElementBase);babelHelpers.createClass(PolymerElement,null,[{key:"_finalizeClass",value:function _finalizeClass(){babelHelpers.get(PolymerElement.__proto__||Object.getPrototypeOf(PolymerElement),"_finalizeClass",this).call(this);if(this.hasOwnProperty(JSCompiler_renameProperty("is",this))&&this.is){Polymer.telemetry.register(this.prototype)}var observers=ownObservers(this);if(observers){this.createObservers(observers,this._properties)}var template=this.template;if(template){if("string"===typeof template){var t=document.createElement("template");t.innerHTML=template;template=t}else{template=template.cloneNode(!0)}}this.prototype._template=template}},{key:"createProperties",value:function createProperties(props){for(var p in props){createPropertyFromConfig(this.prototype,p,props[p],props)}}},{key:"createObservers",value:function createObservers(observers,dynamicFns){for(var proto=this.prototype,i=0;i<observers.length;i++){proto._createMethodObserver(observers[i],dynamicFns)}}},{key:"template",get:function get(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_template",this))){this._template=Polymer.DomModule&&Polymer.DomModule.import(this.is,"template")||Object.getPrototypeOf(this.prototype).constructor.template}return this._template}},{key:"importPath",get:function get(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_importPath",this))){var module=Polymer.DomModule&&Polymer.DomModule.import(this.is);this._importPath=module?module.assetpath:Object.getPrototypeOf(this.prototype).constructor.importPath}return this._importPath}}]);function PolymerElement(){var _this;babelHelpers.classCallCheck(this,PolymerElement);_this=babelHelpers.possibleConstructorReturn(this,(PolymerElement.__proto__||Object.getPrototypeOf(PolymerElement)).call(this));_this._template;_this._importPath;_this.rootPath;_this.importPath;_this.root;_this.$;return _this}babelHelpers.createClass(PolymerElement,[{key:"_initializeProperties",value:function _initializeProperties(){Polymer.telemetry.instanceCount++;this.constructor.finalize();var importPath=this.constructor.importPath;this.constructor._finalizeTemplate(this.localName);babelHelpers.get(PolymerElement.prototype.__proto__||Object.getPrototypeOf(PolymerElement.prototype),"_initializeProperties",this).call(this);this.rootPath=Polymer.rootPath;this.importPath=importPath;var p$=propertyDefaults(this.constructor);if(!p$){return}for(var p in p$){var info=p$[p];if(!this.hasOwnProperty(p)){var value="function"==typeof info.value?info.value.call(this):info.value;if(this._hasAccessor(p)){this._setPendingProperty(p,value,!0)}else{this[p]=value}}}}},{key:"connectedCallback",value:function connectedCallback(){if(window.ShadyCSS&&this._template){window.ShadyCSS.styleElement(this)}babelHelpers.get(PolymerElement.prototype.__proto__||Object.getPrototypeOf(PolymerElement.prototype),"connectedCallback",this).call(this)}},{key:"ready",value:function ready(){if(this._template){this.root=this._stampTemplate(this._template);this.$=this.root.$}babelHelpers.get(PolymerElement.prototype.__proto__||Object.getPrototypeOf(PolymerElement.prototype),"ready",this).call(this)}},{key:"_readyClients",value:function _readyClients(){if(this._template){this.root=this._attachDom(this.root)}babelHelpers.get(PolymerElement.prototype.__proto__||Object.getPrototypeOf(PolymerElement.prototype),"_readyClients",this).call(this)}},{key:"_attachDom",value:function _attachDom(dom){if(this.attachShadow){if(dom){if(!this.shadowRoot){this.attachShadow({mode:"open"})}this.shadowRoot.appendChild(dom);return this.shadowRoot}return null}else{throw new Error("ShadowDOM not available. "+"Polymer.Element can create dom as children instead of in "+"ShadowDOM by setting `this.root = this;` before `ready`.")}}},{key:"updateStyles",value:function updateStyles(properties){if(window.ShadyCSS){window.ShadyCSS.styleSubtree(this,properties)}}},{key:"resolveUrl",value:function resolveUrl(url,base){if(!base&&this.importPath){base=Polymer.ResolveUrl.resolveUrl(this.importPath)}return Polymer.ResolveUrl.resolveUrl(url,base)}}],[{key:"_processStyleText",value:function _processStyleText(cssText,baseURI){return Polymer.ResolveUrl.resolveCss(cssText,baseURI)}},{key:"_finalizeTemplate",value:function _finalizeTemplate(is){var template=this.prototype._template;if(template&&!template.__polymerFinalized){template.__polymerFinalized=!0;var importPath=this.importPath,baseURI=importPath?Polymer.ResolveUrl.resolveUrl(importPath):"";processElementStyles(this,template,is,baseURI);this.prototype._bindTemplate(template)}}},{key:"_parseTemplateContent",value:function _parseTemplateContent(template,templateInfo,nodeInfo){templateInfo.dynamicFns=templateInfo.dynamicFns||this._properties;return babelHelpers.get(PolymerElement.__proto__||Object.getPrototypeOf(PolymerElement),"_parseTemplateContent",this).call(this,template,templateInfo,nodeInfo)}}]);return PolymerElement}(polymerElementBase);return PolymerElement});Polymer.telemetry={instanceCount:0,registrations:[],_regLog:function _regLog(prototype){console.log("["+prototype.is+"]: registered")},register:function register(prototype){this.registrations.push(prototype);Polymer.log&&this._regLog(prototype)},dumpRegistrations:function dumpRegistrations(){this.registrations.forEach(this._regLog)}};Polymer.updateStyles=function(props){if(window.ShadyCSS){window.ShadyCSS.styleDocument(props)}}})();</script><script>(function(){"use strict";var LiteralString=function(){function LiteralString(string){babelHelpers.classCallCheck(this,LiteralString);this.value=string.toString()}babelHelpers.createClass(LiteralString,[{key:"toString",value:function toString(){return this.value}}]);return LiteralString}();function literalValue(value){if(babelHelpers.instanceof(value,LiteralString)){return value.value}else{throw new Error("non-literal value passed to Polymer.htmlLiteral: ".concat(value))}}function htmlValue(value){if(babelHelpers.instanceof(value,HTMLTemplateElement)){return value.innerHTML}else if(babelHelpers.instanceof(value,LiteralString)){return literalValue(value)}else{throw new Error("non-template value passed to Polymer.html: ".concat(value))}}Polymer.html=function(strings){for(var template=document.createElement("template"),_len=arguments.length,values=Array(1<_len?_len-1:0),_key=1;_key<_len;_key++){values[_key-1]=arguments[_key]}template.innerHTML=values.reduce(function(acc,v,idx){return acc+htmlValue(v)+strings[idx+1]},strings[0]);return template};Polymer.htmlLiteral=function(strings){for(var _len2=arguments.length,values=Array(1<_len2?_len2-1:0),_key2=1;_key2<_len2;_key2++){values[_key2-1]=arguments[_key2]}return new LiteralString(values.reduce(function(acc,v,idx){return acc+literalValue(v)+strings[idx+1]},strings[0]))}})();</script><script>(function(){"use strict";var Element=Polymer.ElementMixin(HTMLElement);Polymer.Element=Element;Polymer.html=Polymer.html})();</script><script>(function(){"use strict";var k={};function n(){this.end=this.start=0;this.rules=this.parent=this.previous=null;this.cssText=this.parsedCssText="";this.atRule=!1;this.type=0;this.parsedSelector=this.selector=this.keyframesName=""}function p(a){a=a.replace(r,"").replace(aa,"");var b=a,d=new n;d.start=0;d.end=b.length;for(var e=d,f=0,h=b.length;f<h;f++){if("{"===b[f]){e.rules||(e.rules=[]);var g=e,m=g.rules[g.rules.length-1]||null;e=new n;e.start=f+1;e.parent=g;e.previous=m;g.rules.push(e)}else"}"===b[f]&&(e.end=f+1,e=e.parent||d)}return t(d,a)}function t(a,c){var b=c.substring(a.start,a.end-1);a.parsedCssText=a.cssText=b.trim();a.parent&&(b=c.substring(a.previous?a.previous.end:a.parent.start,a.start-1),b=ba(b),b=b.replace(u," "),b=b.substring(b.lastIndexOf(";")+1),b=a.parsedSelector=a.selector=b.trim(),a.atRule=0===b.indexOf("@"),a.atRule?0===b.indexOf("@media")?a.type=v:b.match(ca)&&(a.type=x,a.keyframesName=a.selector.split(u).pop()):a.type=0===b.indexOf("--")?y:z);if(b=a.rules)for(var d=0,e=b.length,f;d<e&&(f=b[d]);d++){t(f,c)}return a}function ba(a){return a.replace(/\\([0-9a-f]{1,6})\s/gi,function(a,b){a=b;for(b=6-a.length;b--;){a="0"+a}return"\\"+a})}function A(a,c,b){b=void 0===b?"":b;var d="";if(a.cssText||a.rules){var e=a.rules,f;if(f=e)f=e[0],f=!(f&&f.selector&&0===f.selector.indexOf("--"));if(f){f=0;for(var h=e.length,g;f<h&&(g=e[f]);f++){d=A(g,c,d)}}else c?c=a.cssText:(c=a.cssText,c=c.replace(da,"").replace(ea,""),c=c.replace(fa,"").replace(ha,"")),(d=c.trim())&&(d="  "+d+"\n")}d&&(a.selector&&(b+=a.selector+" {\n"),b+=d,a.selector&&(b+="}\n\n"));return b}var z=1,x=7,v=4,y=1E3,r=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//gim,aa=/@import[^;]*;/gim,da=/(?:^[^;\-\s}]+)?--[^;{}]*?:[^{};]*?(?:[;\n]|$)/gim,ea=/(?:^[^;\-\s}]+)?--[^;{}]*?:[^{};]*?{[^}]*?}(?:[;\n]|$)?/gim,fa=/@apply\s*\(?[^);]*\)?\s*(?:[;\n]|$)?/gim,ha=/[^;:]*?:[^;]*?var\([^;]*\)(?:[;\n]|$)?/gim,ca=/^@[^\s]*keyframes/,u=/\s+/g,ia=Promise.resolve();function ja(a){if(a=k[a])a._applyShimCurrentVersion=a._applyShimCurrentVersion||0,a._applyShimValidatingVersion=a._applyShimValidatingVersion||0,a._applyShimNextVersion=(a._applyShimNextVersion||0)+1}function B(a){return a._applyShimCurrentVersion===a._applyShimNextVersion}function ka(a){a._applyShimValidatingVersion=a._applyShimNextVersion;a.b||(a.b=!0,ia.then(function(){a._applyShimCurrentVersion=a._applyShimNextVersion;a.b=!1}))}var C=!(window.ShadyDOM&&window.ShadyDOM.inUse),D;function F(a){D=a&&a.shimcssproperties?!1:C||!(navigator.userAgent.match(/AppleWebKit\/601|Edge\/15/)||!window.CSS||!CSS.supports||!CSS.supports("box-shadow","0 0 0 var(--foo)"))}window.ShadyCSS&&void 0!==window.ShadyCSS.nativeCss?D=window.ShadyCSS.nativeCss:window.ShadyCSS?(F(window.ShadyCSS),window.ShadyCSS=void 0):F(window.WebComponents&&window.WebComponents.flags);var G=D,H=/(?:^|[;\s{]\s*)(--[\w-]*?)\s*:\s*(?:((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};{])+)|\{([^}]*)\}(?:(?=[;\s}])|$))/gi,I=/(?:^|\W+)@apply\s*\(?([^);\n]*)\)?/gi,la=/@media\s(.*)/,J=new Set;function K(a){if(!a)return"";"string"===typeof a&&(a=p(a));return A(a,G)}function L(a){!a.__cssRules&&a.textContent&&(a.__cssRules=p(a.textContent));return a.__cssRules||null}function M(a,c,b,d){if(a){var e=!1,f=a.type;if(d&&f===v){var h=a.selector.match(la);h&&(window.matchMedia(h[1]).matches||(e=!0))}f===z?c(a):b&&f===x?b(a):f===y&&(e=!0);if((a=a.rules)&&!e){e=0;f=a.length;for(var g;e<f&&(g=a[e]);e++){M(g,c,b,d)}}}}function N(a,c){var b=a.indexOf("var(");if(-1===b)return c(a,"","","");a:{for(var d=0,e=b+3,f=a.length;e<f;e++){if("("===a[e])d++;else if(")"===a[e]&&0===--d)break a}e=-1}d=a.substring(b+4,e);b=a.substring(0,b);a=N(a.substring(e+1),c);e=d.indexOf(",");return-1===e?c(b,d.trim(),"",a):c(b,d.substring(0,e).trim(),d.substring(e+1).trim(),a)}var ma=/;\s*/m,na=/^\s*(initial)|(inherit)\s*$/,O=/\s*!important/;function P(){this.a={}}P.prototype.set=function(a,c){a=a.trim();this.a[a]={h:c,i:{}}};P.prototype.get=function(a){a=a.trim();return this.a[a]||null};var Q=null;function R(){this.b=this.c=null;this.a=new P}R.prototype.o=function(a){a=I.test(a)||H.test(a);I.lastIndex=0;H.lastIndex=0;return a};R.prototype.m=function(a,c){if(void 0===a.a){for(var b=[],d=a.content.querySelectorAll("style"),e=0,f;e<d.length;e++){f=d[e];if(f.hasAttribute("shady-unscoped")){if(!C){var h=f.textContent;J.has(h)||(J.add(h),h=f.cloneNode(!0),document.head.appendChild(h));f.parentNode.removeChild(f)}}else b.push(f.textContent),f.parentNode.removeChild(f)}(b=b.join("").trim())?(d=document.createElement("style"),d.textContent=b,a.content.insertBefore(d,a.content.firstChild),b=d):b=null;a.a=b}return(a=a.a)?this.j(a,c):null};R.prototype.j=function(a,c){c=void 0===c?"":c;var b=L(a);this.l(b,c);a.textContent=K(b);return b};R.prototype.f=function(a){var c=this,b=L(a);M(b,function(a){":root"===a.selector&&(a.selector="html");c.g(a)});a.textContent=K(b);return b};R.prototype.l=function(a,c){var b=this;this.c=c;M(a,function(a){b.g(a)});this.c=null};R.prototype.g=function(a){a.cssText=oa(this,a.parsedCssText);":root"===a.selector&&(a.selector=":host > *")};function oa(a,c){c=c.replace(H,function(b,c,e,f){return pa(a,b,c,e,f)});return S(a,c)}function S(a,c){for(var b;b=I.exec(c);){var d=b[0],e=b[1];b=b.index;var f=c.slice(0,b+d.indexOf("@apply"));c=c.slice(b+d.length);var h=T(a,f);d=void 0;var g=a;e=e.replace(ma,"");var m=[],l=g.a.get(e);l||(g.a.set(e,{}),l=g.a.get(e));if(l){g.c&&(l.i[g.c]=!0);var q=l.h;for(d in q){g=h&&h[d],l=[d,": var(",e,"_-_",d],g&&l.push(",",g.replace(O,"")),l.push(")"),O.test(q[d])&&l.push(" !important"),m.push(l.join(""))}}d=m.join("; ");c=""+f+d+c;I.lastIndex=b+d.length}return c}function T(a,c){c=c.split(";");for(var b,d,e={},f=0,h;f<c.length;f++){if(b=c[f])if(h=b.split(":"),1<h.length){b=h[0].trim();var g=a;d=b;h=h.slice(1).join(":");var m=na.exec(h);m&&(m[1]?(g.b||(g.b=document.createElement("meta"),g.b.setAttribute("apply-shim-measure",""),g.b.style.all="initial",document.head.appendChild(g.b)),d=window.getComputedStyle(g.b).getPropertyValue(d)):d="apply-shim-inherit",h=d);d=h;e[b]=d}}return e}function qa(a,c){if(Q)for(var b in c.i){b!==a.c&&Q(b)}}function pa(a,c,b,d,e){d&&N(d,function(c,b){b&&a.a.get(b)&&(e="@apply "+b+";")});if(!e)return c;var f=S(a,""+e),h=c.slice(0,c.indexOf("--")),g=f=T(a,f),m=a.a.get(b),l=m&&m.h;l?g=Object.assign(Object.create(l),f):a.a.set(b,g);var q=[],w,X=!1;for(w in g){var E=f[w];void 0===E&&(E="initial");!l||w in l||(X=!0);q.push(""+b+"_-_"+w+": "+E)}X&&qa(a,m);m&&(m.h=g);d&&(h=c+";"+h);return""+h+q.join("; ")+";"}R.prototype.detectMixin=R.prototype.o;R.prototype.transformStyle=R.prototype.j;R.prototype.transformCustomStyle=R.prototype.f;R.prototype.transformRules=R.prototype.l;R.prototype.transformRule=R.prototype.g;R.prototype.transformTemplate=R.prototype.m;R.prototype._separator="_-_";Object.defineProperty(R.prototype,"invalidCallback",{get:function get(){return Q},set:function set(a){Q=a}});var U=new R;function V(){this.a=null;U.invalidCallback=ja}function W(a){a.a||(a.a=window.ShadyCSS.CustomStyleInterface,a.a&&(a.a.transformCallback=function(a){U.f(a)},a.a.validateCallback=function(){requestAnimationFrame(function(){a.a.enqueued&&a.flushCustomStyles()})}))}V.prototype.prepareTemplate=function(a,c){W(this);k[c]=a;c=U.m(a,c);a._styleAst=c};V.prototype.flushCustomStyles=function(){W(this);if(this.a){var a=this.a.processStyles();if(this.a.enqueued){for(var c=0,b;c<a.length;c++){b=this.a.getStyleForCustomStyle(a[c]);b&&U.f(b)}this.a.enqueued=!1}}};V.prototype.styleSubtree=function(a,c){W(this);if(c)for(var b in c){null===b?a.style.removeProperty(b):a.style.setProperty(b,c[b])}if(a.shadowRoot)for(this.styleElement(a),a=a.shadowRoot.children||a.shadowRoot.childNodes,c=0;c<a.length;c++){this.styleSubtree(a[c])}else for(a=a.children||a.childNodes,c=0;c<a.length;c++){this.styleSubtree(a[c])}};V.prototype.styleElement=function(a){W(this);var c=a.localName,b;c?-1<c.indexOf("-")?b=c:b=a.getAttribute&&a.getAttribute("is")||"":b=a.is;if((c=k[b])&&!B(c)){if(B(c)||c._applyShimValidatingVersion!==c._applyShimNextVersion)this.prepareTemplate(c,b),ka(c);if(a=a.shadowRoot)if(a=a.querySelector("style"))a.__cssRules=c._styleAst,a.textContent=K(c._styleAst)}};V.prototype.styleDocument=function(a){W(this);this.styleSubtree(document.body,a)};if(!window.ShadyCSS||!window.ShadyCSS.ScopingShim){var Y=new V,Z=window.ShadyCSS&&window.ShadyCSS.CustomStyleInterface;window.ShadyCSS={prepareTemplate:function prepareTemplate(a,c){Y.flushCustomStyles();Y.prepareTemplate(a,c)},styleSubtree:function styleSubtree(a,c){Y.flushCustomStyles();Y.styleSubtree(a,c)},styleElement:function styleElement(a){Y.flushCustomStyles();Y.styleElement(a)},styleDocument:function styleDocument(a){Y.flushCustomStyles();Y.styleDocument(a)},getComputedStyleValue:function getComputedStyleValue(a,c){return(a=window.getComputedStyle(a).getPropertyValue(c))?a.trim():""},flushCustomStyles:function flushCustomStyles(){Y.flushCustomStyles()},nativeCss:G,nativeShadow:C};Z&&(window.ShadyCSS.CustomStyleInterface=Z)}window.ShadyCSS.ApplyShim=U}).call(this);</script><script>(function(){"use strict";var Debouncer=function(){function Debouncer(){babelHelpers.classCallCheck(this,Debouncer);this._asyncModule=null;this._callback=null;this._timer=null}babelHelpers.createClass(Debouncer,[{key:"setConfig",value:function setConfig(asyncModule,callback){var _this=this;this._asyncModule=asyncModule;this._callback=callback;this._timer=this._asyncModule.run(function(){_this._timer=null;_this._callback()})}},{key:"cancel",value:function cancel(){if(this.isActive()){this._asyncModule.cancel(this._timer);this._timer=null}}},{key:"flush",value:function flush(){if(this.isActive()){this.cancel();this._callback()}}},{key:"isActive",value:function isActive(){return null!=this._timer}}],[{key:"debounce",value:function debounce(debouncer,asyncModule,callback){if(babelHelpers.instanceof(debouncer,Debouncer)){debouncer.cancel()}else{debouncer=new Debouncer}debouncer.setConfig(asyncModule,callback);return debouncer}}]);return Debouncer}();Polymer.Debouncer=Debouncer})();</script><script>(function(){"use strict";var _Mathabs=Math.abs,HAS_NATIVE_TA="string"===typeof document.head.style.touchAction,GESTURE_KEY="__polymerGestures",HANDLED_OBJ="__polymerGesturesHandled",TOUCH_ACTION="__polymerGesturesTouchAction",TAP_DISTANCE=25,TRACK_DISTANCE=5,MOUSE_EVENTS=["mousedown","mousemove","mouseup","click"],MOUSE_WHICH_TO_BUTTONS=[0,1,4,2],MOUSE_HAS_BUTTONS=function(){try{return 1===new MouseEvent("test",{buttons:1}).buttons}catch(e){return!1}}();function isMouseEvent(name){return-1<MOUSE_EVENTS.indexOf(name)}var SUPPORTS_PASSIVE=!1;(function(){try{var opts=Object.defineProperty({},"passive",{get:function get(){SUPPORTS_PASSIVE=!0}});window.addEventListener("test",null,opts);window.removeEventListener("test",null,opts)}catch(e){}})();function PASSIVE_TOUCH(eventName){if(isMouseEvent(eventName)||"touchend"===eventName){return}if(HAS_NATIVE_TA&&SUPPORTS_PASSIVE&&Polymer.passiveTouchGestures){return{passive:!0}}else{}}var IS_TOUCH_ONLY=navigator.userAgent.match(/iP(?:[oa]d|hone)|Android/),GestureRecognizer=function(){};GestureRecognizer.prototype.reset;GestureRecognizer.prototype.mousedown;GestureRecognizer.prototype.mousemove;GestureRecognizer.prototype.mouseup;GestureRecognizer.prototype.touchstart;GestureRecognizer.prototype.touchmove;GestureRecognizer.prototype.touchend;GestureRecognizer.prototype.click;var clickedLabels=[],labellable={button:!0,input:!0,keygen:!0,meter:!0,output:!0,textarea:!0,progress:!0,select:!0};function canBeLabelled(el){return labellable[el.localName]||!1}function matchingLabels(el){var labels=babelHelpers.toConsumableArray(el.labels||[]);if(!labels.length){labels=[];var root=el.getRootNode();if(el.id){for(var matching=root.querySelectorAll("label[for = ".concat(el.id,"]")),i=0;i<matching.length;i++){labels.push(matching[i])}}}return labels}var mouseCanceller=function(mouseEvent){var sc=mouseEvent.sourceCapabilities;if(sc&&!sc.firesTouchEvents){return}mouseEvent[HANDLED_OBJ]={skip:!0};if("click"===mouseEvent.type){var clickFromLabel=!1,path=mouseEvent.composedPath&&mouseEvent.composedPath();if(path){for(var i=0;i<path.length;i++){if(path[i].nodeType===Node.ELEMENT_NODE){if("label"===path[i].localName){clickedLabels.push(path[i])}else if(canBeLabelled(path[i])){for(var ownerLabels=matchingLabels(path[i]),j=0;j<ownerLabels.length;j++){clickFromLabel=clickFromLabel||-1<clickedLabels.indexOf(ownerLabels[j])}}}if(path[i]===POINTERSTATE.mouse.target){return}}}if(clickFromLabel){return}mouseEvent.preventDefault();mouseEvent.stopPropagation()}};function setupTeardownMouseCanceller(setup){for(var events=IS_TOUCH_ONLY?["click"]:MOUSE_EVENTS,i=0,en;i<events.length;i++){en=events[i];if(setup){clickedLabels.length=0;document.addEventListener(en,mouseCanceller,!0)}else{document.removeEventListener(en,mouseCanceller,!0)}}}function hasLeftMouseButton(ev){var type=ev.type;if(!isMouseEvent(type)){return!1}if("mousemove"===type){var buttons=ev.buttons===void 0?1:ev.buttons;if(babelHelpers.instanceof(ev,window.MouseEvent)&&!MOUSE_HAS_BUTTONS){buttons=MOUSE_WHICH_TO_BUTTONS[ev.which]||0}return!!(1&buttons)}else{var button=ev.button===void 0?0:ev.button;return 0===button}}function isSyntheticClick(ev){if("click"===ev.type){if(0===ev.detail){return!0}var t=Gestures._findOriginalTarget(ev);if(!t.nodeType||t.nodeType!==Node.ELEMENT_NODE){return!0}var bcr=t.getBoundingClientRect(),x=ev.pageX,y=ev.pageY;return!(x>=bcr.left&&x<=bcr.right&&y>=bcr.top&&y<=bcr.bottom)}return!1}var POINTERSTATE={mouse:{target:null,mouseIgnoreJob:null},touch:{x:0,y:0,id:-1,scrollDecided:!1}};function firstTouchAction(ev){var ta="auto",path=ev.composedPath&&ev.composedPath();if(path){for(var i=0,n;i<path.length;i++){n=path[i];if(n[TOUCH_ACTION]){ta=n[TOUCH_ACTION];break}}}return ta}function trackDocument(stateObj,movefn,upfn){stateObj.movefn=movefn;stateObj.upfn=upfn;document.addEventListener("mousemove",movefn);document.addEventListener("mouseup",upfn)}function untrackDocument(stateObj){document.removeEventListener("mousemove",stateObj.movefn);document.removeEventListener("mouseup",stateObj.upfn);stateObj.movefn=null;stateObj.upfn=null}document.addEventListener("touchend",function(e){if(!POINTERSTATE.mouse.mouseIgnoreJob){setupTeardownMouseCanceller(!0)}POINTERSTATE.mouse.target=e.composedPath()[0];POINTERSTATE.mouse.mouseIgnoreJob=Polymer.Debouncer.debounce(POINTERSTATE.mouse.mouseIgnoreJob,Polymer.Async.timeOut.after(2500),function unset(){setupTeardownMouseCanceller();POINTERSTATE.mouse.target=null;POINTERSTATE.mouse.mouseIgnoreJob=null})},SUPPORTS_PASSIVE?{passive:!0}:!1);var Gestures={gestures:{},recognizers:[],deepTargetFind:function deepTargetFind(x,y){var node=document.elementFromPoint(x,y),next=node;while(next&&next.shadowRoot&&!window.ShadyDOM){var oldNext=next;next=next.shadowRoot.elementFromPoint(x,y);if(oldNext===next){break}if(next){node=next}}return node},_findOriginalTarget:function _findOriginalTarget(ev){if(ev.composedPath){var targets=ev.composedPath();return 0<targets.length?targets[0]:ev.target}return ev.target},_handleNative:function _handleNative(ev){var handled,type=ev.type,node=ev.currentTarget,gobj=node[GESTURE_KEY];if(!gobj){return}var gs=gobj[type];if(!gs){return}if(!ev[HANDLED_OBJ]){ev[HANDLED_OBJ]={};if("touch"===type.slice(0,5)){ev=ev;var t=ev.changedTouches[0];if("touchstart"===type){if(1===ev.touches.length){POINTERSTATE.touch.id=t.identifier}}if(POINTERSTATE.touch.id!==t.identifier){return}if(!HAS_NATIVE_TA){if("touchstart"===type||"touchmove"===type){Gestures._handleTouchAction(ev)}}}}handled=ev[HANDLED_OBJ];if(handled.skip){return}for(var i=0,r;i<Gestures.recognizers.length;i++){r=Gestures.recognizers[i];if(gs[r.name]&&!handled[r.name]){if(r.flow&&-1<r.flow.start.indexOf(ev.type)&&r.reset){r.reset()}}}for(var _i=0,_r;_i<Gestures.recognizers.length;_i++){_r=Gestures.recognizers[_i];if(gs[_r.name]&&!handled[_r.name]){handled[_r.name]=!0;_r[type](ev)}}},_handleTouchAction:function _handleTouchAction(ev){var t=ev.changedTouches[0],type=ev.type;if("touchstart"===type){POINTERSTATE.touch.x=t.clientX;POINTERSTATE.touch.y=t.clientY;POINTERSTATE.touch.scrollDecided=!1}else if("touchmove"===type){if(POINTERSTATE.touch.scrollDecided){return}POINTERSTATE.touch.scrollDecided=!0;var ta=firstTouchAction(ev),prevent=!1,dx=_Mathabs(POINTERSTATE.touch.x-t.clientX),dy=_Mathabs(POINTERSTATE.touch.y-t.clientY);if(!ev.cancelable){}else if("none"===ta){prevent=!0}else if("pan-x"===ta){prevent=dy>dx}else if("pan-y"===ta){prevent=dx>dy}if(prevent){ev.preventDefault()}else{Gestures.prevent("track")}}},addListener:function addListener(node,evType,handler){if(this.gestures[evType]){this._add(node,evType,handler);return!0}return!1},removeListener:function removeListener(node,evType,handler){if(this.gestures[evType]){this._remove(node,evType,handler);return!0}return!1},_add:function _add(node,evType,handler){var recognizer=this.gestures[evType],deps=recognizer.deps,name=recognizer.name,gobj=node[GESTURE_KEY];if(!gobj){node[GESTURE_KEY]=gobj={}}for(var i=0,dep,gd;i<deps.length;i++){dep=deps[i];if(IS_TOUCH_ONLY&&isMouseEvent(dep)&&"click"!==dep){continue}gd=gobj[dep];if(!gd){gobj[dep]=gd={_count:0}}if(0===gd._count){node.addEventListener(dep,this._handleNative,PASSIVE_TOUCH(dep))}gd[name]=(gd[name]||0)+1;gd._count=(gd._count||0)+1}node.addEventListener(evType,handler);if(recognizer.touchAction){this.setTouchAction(node,recognizer.touchAction)}},_remove:function _remove(node,evType,handler){var recognizer=this.gestures[evType],deps=recognizer.deps,name=recognizer.name,gobj=node[GESTURE_KEY];if(gobj){for(var i=0,dep,gd;i<deps.length;i++){dep=deps[i];gd=gobj[dep];if(gd&&gd[name]){gd[name]=(gd[name]||1)-1;gd._count=(gd._count||1)-1;if(0===gd._count){node.removeEventListener(dep,this._handleNative,PASSIVE_TOUCH(dep))}}}}node.removeEventListener(evType,handler)},register:function register(recog){this.recognizers.push(recog);for(var i=0;i<recog.emits.length;i++){this.gestures[recog.emits[i]]=recog}},_findRecognizerByEvent:function _findRecognizerByEvent(evName){for(var i=0,r;i<this.recognizers.length;i++){r=this.recognizers[i];for(var j=0,n;j<r.emits.length;j++){n=r.emits[j];if(n===evName){return r}}}return null},setTouchAction:function setTouchAction(node,value){if(HAS_NATIVE_TA){Polymer.Async.microTask.run(function(){node.style.touchAction=value})}node[TOUCH_ACTION]=value},_fire:function _fire(target,type,detail){var ev=new Event(type,{bubbles:!0,cancelable:!0,composed:!0});ev.detail=detail;target.dispatchEvent(ev);if(ev.defaultPrevented){var preventer=detail.preventer||detail.sourceEvent;if(preventer&&preventer.preventDefault){preventer.preventDefault()}}},prevent:function prevent(evName){var recognizer=this._findRecognizerByEvent(evName);if(recognizer.info){recognizer.info.prevent=!0}},resetMouseCanceller:function resetMouseCanceller(){if(POINTERSTATE.mouse.mouseIgnoreJob){POINTERSTATE.mouse.mouseIgnoreJob.flush()}}};Gestures.register({name:"downup",deps:["mousedown","touchstart","touchend"],flow:{start:["mousedown","touchstart"],end:["mouseup","touchend"]},emits:["down","up"],info:{movefn:null,upfn:null},reset:function reset(){untrackDocument(this.info)},mousedown:function mousedown(e){if(!hasLeftMouseButton(e)){return}var t=Gestures._findOriginalTarget(e),self=this;trackDocument(this.info,function(e){if(!hasLeftMouseButton(e)){self._fire("up",t,e);untrackDocument(self.info)}},function(e){if(hasLeftMouseButton(e)){self._fire("up",t,e)}untrackDocument(self.info)});this._fire("down",t,e)},touchstart:function touchstart(e){this._fire("down",Gestures._findOriginalTarget(e),e.changedTouches[0],e)},touchend:function touchend(e){this._fire("up",Gestures._findOriginalTarget(e),e.changedTouches[0],e)},_fire:function _fire(type,target,event,preventer){Gestures._fire(target,type,{x:event.clientX,y:event.clientY,sourceEvent:event,preventer:preventer,prevent:function prevent(e){return Gestures.prevent(e)}})}});Gestures.register({name:"track",touchAction:"none",deps:["mousedown","touchstart","touchmove","touchend"],flow:{start:["mousedown","touchstart"],end:["mouseup","touchend"]},emits:["track"],info:{x:0,y:0,state:"start",started:!1,moves:[],addMove:function addMove(move){if(this.moves.length>2){this.moves.shift()}this.moves.push(move)},movefn:null,upfn:null,prevent:!1},reset:function reset(){this.info.state="start";this.info.started=!1;this.info.moves=[];this.info.x=0;this.info.y=0;this.info.prevent=!1;untrackDocument(this.info)},hasMovedEnough:function hasMovedEnough(x,y){if(this.info.prevent){return!1}if(this.info.started){return!0}var dx=_Mathabs(this.info.x-x),dy=_Mathabs(this.info.y-y);return dx>=TRACK_DISTANCE||dy>=TRACK_DISTANCE},mousedown:function mousedown(e){if(!hasLeftMouseButton(e)){return}var t=Gestures._findOriginalTarget(e),self=this,movefn=function(e){var x=e.clientX,y=e.clientY;if(self.hasMovedEnough(x,y)){self.info.state=self.info.started?"mouseup"===e.type?"end":"track":"start";if("start"===self.info.state){Gestures.prevent("tap")}self.info.addMove({x:x,y:y});if(!hasLeftMouseButton(e)){self.info.state="end";untrackDocument(self.info)}self._fire(t,e);self.info.started=!0}};trackDocument(this.info,movefn,function(e){if(self.info.started){movefn(e)}untrackDocument(self.info)});this.info.x=e.clientX;this.info.y=e.clientY},touchstart:function touchstart(e){var ct=e.changedTouches[0];this.info.x=ct.clientX;this.info.y=ct.clientY},touchmove:function touchmove(e){var t=Gestures._findOriginalTarget(e),ct=e.changedTouches[0],x=ct.clientX,y=ct.clientY;if(this.hasMovedEnough(x,y)){if("start"===this.info.state){Gestures.prevent("tap")}this.info.addMove({x:x,y:y});this._fire(t,ct);this.info.state="track";this.info.started=!0}},touchend:function touchend(e){var t=Gestures._findOriginalTarget(e),ct=e.changedTouches[0];if(this.info.started){this.info.state="end";this.info.addMove({x:ct.clientX,y:ct.clientY});this._fire(t,ct,e)}},_fire:function _fire(target,touch){var secondlast=this.info.moves[this.info.moves.length-2],lastmove=this.info.moves[this.info.moves.length-1],dx=lastmove.x-this.info.x,dy=lastmove.y-this.info.y,ddx,ddy=0;if(secondlast){ddx=lastmove.x-secondlast.x;ddy=lastmove.y-secondlast.y}Gestures._fire(target,"track",{state:this.info.state,x:touch.clientX,y:touch.clientY,dx:dx,dy:dy,ddx:ddx,ddy:ddy,sourceEvent:touch,hover:function hover(){return Gestures.deepTargetFind(touch.clientX,touch.clientY)}})}});Gestures.register({name:"tap",deps:["mousedown","click","touchstart","touchend"],flow:{start:["mousedown","touchstart"],end:["click","touchend"]},emits:["tap"],info:{x:NaN,y:NaN,prevent:!1},reset:function reset(){this.info.x=NaN;this.info.y=NaN;this.info.prevent=!1},save:function save(e){this.info.x=e.clientX;this.info.y=e.clientY},mousedown:function mousedown(e){if(hasLeftMouseButton(e)){this.save(e)}},click:function click(e){if(hasLeftMouseButton(e)){this.forward(e)}},touchstart:function touchstart(e){this.save(e.changedTouches[0],e)},touchend:function touchend(e){this.forward(e.changedTouches[0],e)},forward:function forward(e,preventer){var dx=_Mathabs(e.clientX-this.info.x),dy=_Mathabs(e.clientY-this.info.y),t=Gestures._findOriginalTarget(preventer||e);if(!t||t.disabled){return}if(isNaN(dx)||isNaN(dy)||dx<=TAP_DISTANCE&&dy<=TAP_DISTANCE||isSyntheticClick(e)){if(!this.info.prevent){Gestures._fire(t,"tap",{x:e.clientX,y:e.clientY,sourceEvent:e,preventer:preventer})}}}});Gestures.findOriginalTarget=Gestures._findOriginalTarget;Gestures.add=Gestures.addListener;Gestures.remove=Gestures.removeListener;Polymer.Gestures=Gestures})();</script><script>(function(){"use strict";var gestures=Polymer.Gestures;Polymer.GestureEventListeners=Polymer.dedupingMixin(function(superClass){var GestureEventListeners=function(_superClass){babelHelpers.inherits(GestureEventListeners,_superClass);function GestureEventListeners(){babelHelpers.classCallCheck(this,GestureEventListeners);return babelHelpers.possibleConstructorReturn(this,(GestureEventListeners.__proto__||Object.getPrototypeOf(GestureEventListeners)).apply(this,arguments))}babelHelpers.createClass(GestureEventListeners,[{key:"_addEventListenerToNode",value:function _addEventListenerToNode(node,eventName,handler){if(!gestures.addListener(node,eventName,handler)){babelHelpers.get(GestureEventListeners.prototype.__proto__||Object.getPrototypeOf(GestureEventListeners.prototype),"_addEventListenerToNode",this).call(this,node,eventName,handler)}}},{key:"_removeEventListenerFromNode",value:function _removeEventListenerFromNode(node,eventName,handler){if(!gestures.removeListener(node,eventName,handler)){babelHelpers.get(GestureEventListeners.prototype.__proto__||Object.getPrototypeOf(GestureEventListeners.prototype),"_removeEventListenerFromNode",this).call(this,node,eventName,handler)}}}]);return GestureEventListeners}(superClass);return GestureEventListeners})})();</script><script>(function(){"use strict";var HOST_DIR=/:host\(:dir\((ltr|rtl)\)\)/g,EL_DIR=/([\s\w-#\.\[\]\*]*):dir\((ltr|rtl)\)/g,DIR_INSTANCES=[],observer=null,DOCUMENT_DIR="";function getRTL(){DOCUMENT_DIR=document.documentElement.getAttribute("dir")}function setRTL(instance){if(!instance.__autoDirOptOut){instance.setAttribute("dir",DOCUMENT_DIR)}}function updateDirection(){getRTL();DOCUMENT_DIR=document.documentElement.getAttribute("dir");for(var i=0;i<DIR_INSTANCES.length;i++){setRTL(DIR_INSTANCES[i])}}function takeRecords(){if(observer&&observer.takeRecords().length){updateDirection()}}Polymer.DirMixin=Polymer.dedupingMixin(function(base){if(!observer){getRTL();observer=new MutationObserver(updateDirection);observer.observe(document.documentElement,{attributes:!0,attributeFilter:["dir"]})}var elementBase=Polymer.PropertyAccessors(base),Dir=function(_elementBase){babelHelpers.inherits(Dir,_elementBase);babelHelpers.createClass(Dir,null,[{key:"_processStyleText",value:function _processStyleText(cssText,baseURI){cssText=babelHelpers.get(Dir.__proto__||Object.getPrototypeOf(Dir),"_processStyleText",this).call(this,cssText,baseURI);cssText=this._replaceDirInCssText(cssText);return cssText}},{key:"_replaceDirInCssText",value:function _replaceDirInCssText(text){var replacedText=text;replacedText=replacedText.replace(HOST_DIR,":host([dir=\"$1\"])");replacedText=replacedText.replace(EL_DIR,":host([dir=\"$2\"]) $1");if(text!==replacedText){this.__activateDir=!0}return replacedText}}]);function Dir(){var _this;babelHelpers.classCallCheck(this,Dir);_this=babelHelpers.possibleConstructorReturn(this,(Dir.__proto__||Object.getPrototypeOf(Dir)).call(this));_this.__autoDirOptOut=!1;return _this}babelHelpers.createClass(Dir,[{key:"ready",value:function ready(){babelHelpers.get(Dir.prototype.__proto__||Object.getPrototypeOf(Dir.prototype),"ready",this).call(this);this.__autoDirOptOut=this.hasAttribute("dir")}},{key:"connectedCallback",value:function connectedCallback(){if(elementBase.prototype.connectedCallback){babelHelpers.get(Dir.prototype.__proto__||Object.getPrototypeOf(Dir.prototype),"connectedCallback",this).call(this)}if(this.constructor.__activateDir){takeRecords();DIR_INSTANCES.push(this);setRTL(this)}}},{key:"disconnectedCallback",value:function disconnectedCallback(){if(elementBase.prototype.disconnectedCallback){babelHelpers.get(Dir.prototype.__proto__||Object.getPrototypeOf(Dir.prototype),"disconnectedCallback",this).call(this)}if(this.constructor.__activateDir){var idx=DIR_INSTANCES.indexOf(this);if(-1<idx){DIR_INSTANCES.splice(idx,1)}}}}]);return Dir}(elementBase);Dir.__activateDir=!1;return Dir})})();</script><script>(function(){"use strict";function whenImportsReady(cb){if(window.HTMLImports){HTMLImports.whenReady(cb)}else{cb()}}Polymer.importHref=function(href,onload,onerror,optAsync){var link=document.head.querySelector("link[href=\""+href+"\"][import-href]");if(!link){link=document.createElement("link");link.rel="import";link.href=href;link.setAttribute("import-href","")}if(optAsync){link.setAttribute("async","")}var cleanup=function(){link.removeEventListener("load",loadListener);link.removeEventListener("error",errorListener)},loadListener=function(event){cleanup();link.__dynamicImportLoaded=!0;if(onload){whenImportsReady(function(){onload(event)})}},errorListener=function(event){cleanup();if(link.parentNode){link.parentNode.removeChild(link)}if(onerror){whenImportsReady(function(){onerror(event)})}};link.addEventListener("load",loadListener);link.addEventListener("error",errorListener);if(null==link.parentNode){document.head.appendChild(link)}else if(link.__dynamicImportLoaded){link.dispatchEvent(new Event("load"))}return link}})();</script><script>(function(){"use strict";var scheduled=!1,beforeRenderQueue=[],afterRenderQueue=[];function schedule(){scheduled=!0;requestAnimationFrame(function(){scheduled=!1;flushQueue(beforeRenderQueue);setTimeout(function(){runQueue(afterRenderQueue)})})}function flushQueue(queue){while(queue.length){callMethod(queue.shift())}}function runQueue(queue){for(var i=0,l=queue.length;i<l;i++){callMethod(queue.shift())}}function callMethod(info){var context=info[0],callback=info[1],args=info[2];try{callback.apply(context,args)}catch(e){setTimeout(function(){throw e})}}Polymer.RenderStatus={beforeNextRender:function beforeNextRender(context,callback,args){if(!scheduled){schedule()}beforeRenderQueue.push([context,callback,args])},afterNextRender:function afterNextRender(context,callback,args){if(!scheduled){schedule()}afterRenderQueue.push([context,callback,args])},flush:function(){while(beforeRenderQueue.length||afterRenderQueue.length){flushQueue(beforeRenderQueue);flushQueue(afterRenderQueue)}scheduled=!1}}})();</script><script>(function(){"use strict";function resolve(){document.body.removeAttribute("unresolved")}if(window.WebComponents){window.addEventListener("WebComponentsReady",resolve)}else{if("interactive"===document.readyState||"complete"===document.readyState){resolve()}else{window.addEventListener("DOMContentLoaded",resolve)}}})();</script><script>(function(){"use strict";function newSplice(index,removed,addedCount){return{index:index,removed:removed,addedCount:addedCount}}var EDIT_LEAVE=0,EDIT_UPDATE=1,EDIT_ADD=2,EDIT_DELETE=3;function calcEditDistances(current,currentStart,currentEnd,old,oldStart,oldEnd){for(var rowCount=oldEnd-oldStart+1,columnCount=currentEnd-currentStart+1,distances=Array(rowCount),i=0;i<rowCount;i++){distances[i]=Array(columnCount);distances[i][0]=i}for(var j=0;j<columnCount;j++){distances[0][j]=j}for(var _i=1;_i<rowCount;_i++){for(var _j=1;_j<columnCount;_j++){if(equals(current[currentStart+_j-1],old[oldStart+_i-1]))distances[_i][_j]=distances[_i-1][_j-1];else{var north=distances[_i-1][_j]+1,west=distances[_i][_j-1]+1;distances[_i][_j]=north<west?north:west}}}return distances}function spliceOperationsFromEditDistances(distances){var i=distances.length-1,j=distances[0].length-1,current=distances[i][j],edits=[];while(0<i||0<j){if(0==i){edits.push(EDIT_ADD);j--;continue}if(0==j){edits.push(EDIT_DELETE);i--;continue}var northWest=distances[i-1][j-1],west=distances[i-1][j],north=distances[i][j-1],min=void 0;if(west<north)min=west<northWest?west:northWest;else min=north<northWest?north:northWest;if(min==northWest){if(northWest==current){edits.push(EDIT_LEAVE)}else{edits.push(EDIT_UPDATE);current=northWest}i--;j--}else if(min==west){edits.push(EDIT_DELETE);i--;current=west}else{edits.push(EDIT_ADD);j--;current=north}}edits.reverse();return edits}function calcSplices(current,currentStart,currentEnd,old,oldStart,oldEnd){var prefixCount=0,suffixCount=0,splice,minLength=Math.min(currentEnd-currentStart,oldEnd-oldStart);if(0==currentStart&&0==oldStart)prefixCount=sharedPrefix(current,old,minLength);if(currentEnd==current.length&&oldEnd==old.length)suffixCount=sharedSuffix(current,old,minLength-prefixCount);currentStart+=prefixCount;oldStart+=prefixCount;currentEnd-=suffixCount;oldEnd-=suffixCount;if(0==currentEnd-currentStart&&0==oldEnd-oldStart)return[];if(currentStart==currentEnd){splice=newSplice(currentStart,[],0);while(oldStart<oldEnd){splice.removed.push(old[oldStart++])}return[splice]}else if(oldStart==oldEnd)return[newSplice(currentStart,[],currentEnd-currentStart)];var ops=spliceOperationsFromEditDistances(calcEditDistances(current,currentStart,currentEnd,old,oldStart,oldEnd));splice=void 0;for(var splices=[],index=currentStart,oldIndex=oldStart,i=0;i<ops.length;i++){switch(ops[i]){case EDIT_LEAVE:if(splice){splices.push(splice);splice=void 0}index++;oldIndex++;break;case EDIT_UPDATE:if(!splice)splice=newSplice(index,[],0);splice.addedCount++;index++;splice.removed.push(old[oldIndex]);oldIndex++;break;case EDIT_ADD:if(!splice)splice=newSplice(index,[],0);splice.addedCount++;index++;break;case EDIT_DELETE:if(!splice)splice=newSplice(index,[],0);splice.removed.push(old[oldIndex]);oldIndex++;break;}}if(splice){splices.push(splice)}return splices}function sharedPrefix(current,old,searchLength){for(var i=0;i<searchLength;i++){if(!equals(current[i],old[i]))return i}return searchLength}function sharedSuffix(current,old,searchLength){var index1=current.length,index2=old.length,count=0;while(count<searchLength&&equals(current[--index1],old[--index2])){count++}return count}function equals(currentValue,previousValue){return currentValue===previousValue}Polymer.ArraySplice={calculateSplices:function(current,previous){return calcSplices(current,0,current.length,previous,0,previous.length)}}})();</script><script>(function(){"use strict";function isSlot(node){return"slot"===node.localName}var FlattenedNodesObserver=function(){babelHelpers.createClass(FlattenedNodesObserver,null,[{key:"getFlattenedNodes",value:function getFlattenedNodes(node){if(isSlot(node)){node=node;return node.assignedNodes({flatten:!0})}else{return Array.from(node.childNodes).map(function(node){if(isSlot(node)){node=node;return node.assignedNodes({flatten:!0})}else{return[node]}}).reduce(function(a,b){return a.concat(b)},[])}}}]);function FlattenedNodesObserver(target,callback){var _this=this;babelHelpers.classCallCheck(this,FlattenedNodesObserver);this._shadyChildrenObserver=null;this._nativeChildrenObserver=null;this._connected=!1;this._target=target;this.callback=callback;this._effectiveNodes=[];this._observer=null;this._scheduled=!1;this._boundSchedule=function(){_this._schedule()};this.connect();this._schedule()}babelHelpers.createClass(FlattenedNodesObserver,[{key:"connect",value:function connect(){var _this2=this;if(isSlot(this._target)){this._listenSlots([this._target])}else if(this._target.children){this._listenSlots(this._target.children);if(window.ShadyDOM){this._shadyChildrenObserver=ShadyDOM.observeChildren(this._target,function(mutations){_this2._processMutations(mutations)})}else{this._nativeChildrenObserver=new MutationObserver(function(mutations){_this2._processMutations(mutations)});this._nativeChildrenObserver.observe(this._target,{childList:!0})}}this._connected=!0}},{key:"disconnect",value:function disconnect(){if(isSlot(this._target)){this._unlistenSlots([this._target])}else if(this._target.children){this._unlistenSlots(this._target.children);if(window.ShadyDOM&&this._shadyChildrenObserver){ShadyDOM.unobserveChildren(this._shadyChildrenObserver);this._shadyChildrenObserver=null}else if(this._nativeChildrenObserver){this._nativeChildrenObserver.disconnect();this._nativeChildrenObserver=null}}this._connected=!1}},{key:"_schedule",value:function _schedule(){var _this3=this;if(!this._scheduled){this._scheduled=!0;Polymer.Async.microTask.run(function(){return _this3.flush()})}}},{key:"_processMutations",value:function _processMutations(mutations){this._processSlotMutations(mutations);this.flush()}},{key:"_processSlotMutations",value:function _processSlotMutations(mutations){if(mutations){for(var i=0,mutation;i<mutations.length;i++){mutation=mutations[i];if(mutation.addedNodes){this._listenSlots(mutation.addedNodes)}if(mutation.removedNodes){this._unlistenSlots(mutation.removedNodes)}}}}},{key:"flush",value:function flush(){if(!this._connected){return!1}if(window.ShadyDOM){ShadyDOM.flush()}if(this._nativeChildrenObserver){this._processSlotMutations(this._nativeChildrenObserver.takeRecords())}else if(this._shadyChildrenObserver){this._processSlotMutations(this._shadyChildrenObserver.takeRecords())}this._scheduled=!1;for(var info={target:this._target,addedNodes:[],removedNodes:[]},newNodes=this.constructor.getFlattenedNodes(this._target),splices=Polymer.ArraySplice.calculateSplices(newNodes,this._effectiveNodes),i=0,s;i<splices.length&&(s=splices[i]);i++){for(var j=0,n;j<s.removed.length&&(n=s.removed[j]);j++){info.removedNodes.push(n)}}for(var _i=0,_s;_i<splices.length&&(_s=splices[_i]);_i++){for(var _j=_s.index;_j<_s.index+_s.addedCount;_j++){info.addedNodes.push(newNodes[_j])}}this._effectiveNodes=newNodes;var didFlush=!1;if(info.addedNodes.length||info.removedNodes.length){didFlush=!0;this.callback.call(this._target,info)}return didFlush}},{key:"_listenSlots",value:function _listenSlots(nodeList){for(var i=0,n;i<nodeList.length;i++){n=nodeList[i];if(isSlot(n)){n.addEventListener("slotchange",this._boundSchedule)}}}},{key:"_unlistenSlots",value:function _unlistenSlots(nodeList){for(var i=0,n;i<nodeList.length;i++){n=nodeList[i];if(isSlot(n)){n.removeEventListener("slotchange",this._boundSchedule)}}}}]);return FlattenedNodesObserver}();Polymer.FlattenedNodesObserver=FlattenedNodesObserver})();</script><script>(function(){"use strict";var debouncerQueue=[];Polymer.enqueueDebouncer=function(debouncer){debouncerQueue.push(debouncer)};function flushDebouncers(){var didFlush=!!debouncerQueue.length;while(debouncerQueue.length){try{debouncerQueue.shift().flush()}catch(e){setTimeout(function(){throw e})}}return didFlush}Polymer.flush=function(){var shadyDOM,debouncers;do{shadyDOM=window.ShadyDOM&&ShadyDOM.flush();if(window.ShadyCSS&&window.ShadyCSS.ScopingShim){window.ShadyCSS.ScopingShim.flush()}debouncers=flushDebouncers()}while(shadyDOM||debouncers)}})();</script><script>(function(){"use strict";var p=Element.prototype,normalizedMatchesSelector=p.matches||p.matchesSelector||p.mozMatchesSelector||p.msMatchesSelector||p.oMatchesSelector||p.webkitMatchesSelector,matchesSelector=function(node,selector){return normalizedMatchesSelector.call(node,selector)},DomApi=function(){function DomApi(node){babelHelpers.classCallCheck(this,DomApi);this.node=node}babelHelpers.createClass(DomApi,[{key:"observeNodes",value:function observeNodes(callback){return new Polymer.FlattenedNodesObserver(this.node,callback)}},{key:"unobserveNodes",value:function unobserveNodes(observerHandle){observerHandle.disconnect()}},{key:"notifyObserver",value:function notifyObserver(){}},{key:"deepContains",value:function deepContains(node){if(this.node.contains(node)){return!0}var n=node,doc=node.ownerDocument;while(n&&n!==doc&&n!==this.node){n=n.parentNode||n.host}return n===this.node}},{key:"getOwnerRoot",value:function getOwnerRoot(){return this.node.getRootNode()}},{key:"getDistributedNodes",value:function getDistributedNodes(){return"slot"===this.node.localName?this.node.assignedNodes({flatten:!0}):[]}},{key:"getDestinationInsertionPoints",value:function getDestinationInsertionPoints(){var ip$=[],n=this.node.assignedSlot;while(n){ip$.push(n);n=n.assignedSlot}return ip$}},{key:"importNode",value:function importNode(node,deep){var doc=babelHelpers.instanceof(this.node,Document)?this.node:this.node.ownerDocument;return doc.importNode(node,deep)}},{key:"getEffectiveChildNodes",value:function getEffectiveChildNodes(){return Polymer.FlattenedNodesObserver.getFlattenedNodes(this.node)}},{key:"queryDistributedElements",value:function queryDistributedElements(selector){for(var c$=this.getEffectiveChildNodes(),list=[],i=0,l=c$.length,c;i<l&&(c=c$[i]);i++){if(c.nodeType===Node.ELEMENT_NODE&&matchesSelector(c,selector)){list.push(c)}}return list}},{key:"activeElement",get:function get(){var node=this.node;return node._activeElement!==void 0?node._activeElement:node.activeElement}}]);return DomApi}();(function(proto,methods){for(var _loop=function(i){var method=methods[i];proto[method]=function(){return this.node[method].apply(this.node,arguments)}},i=0;i<methods.length;i++){_loop(i)}})(DomApi.prototype,["cloneNode","appendChild","insertBefore","removeChild","replaceChild","setAttribute","removeAttribute","querySelector","querySelectorAll"]);(function(proto,properties){for(var _loop2=function(i){var name=properties[i];Object.defineProperty(proto,name,{get:function get(){var domApi=this;return domApi.node[name]},configurable:!0})},i=0;i<properties.length;i++){_loop2(i)}})(DomApi.prototype,["parentNode","firstChild","lastChild","nextSibling","previousSibling","firstElementChild","lastElementChild","nextElementSibling","previousElementSibling","childNodes","children","classList"]);(function(proto,properties){for(var _loop3=function(i){var name=properties[i];Object.defineProperty(proto,name,{get:function get(){var domApi=this;return domApi.node[name]},set:function set(value){this.node[name]=value},configurable:!0})},i=0;i<properties.length;i++){_loop3(i)}})(DomApi.prototype,["textContent","innerHTML"]);var EventApi=function(){function EventApi(event){babelHelpers.classCallCheck(this,EventApi);this.event=event}babelHelpers.createClass(EventApi,[{key:"rootTarget",get:function get(){return this.event.composedPath()[0]}},{key:"localTarget",get:function get(){return this.event.target}},{key:"path",get:function get(){return this.event.composedPath()}}]);return EventApi}();Polymer.DomApi=DomApi;Polymer.DomApi.prototype.cloneNode;Polymer.DomApi.prototype.appendChild;Polymer.DomApi.prototype.insertBefore;Polymer.DomApi.prototype.removeChild;Polymer.DomApi.prototype.replaceChild;Polymer.DomApi.prototype.setAttribute;Polymer.DomApi.prototype.removeAttribute;Polymer.DomApi.prototype.querySelector;Polymer.DomApi.prototype.querySelectorAll;Polymer.dom=function(obj){obj=obj||document;if(!obj.__domApi){var helper;if(babelHelpers.instanceof(obj,Event)){helper=new EventApi(obj)}else{helper=new DomApi(obj)}obj.__domApi=helper}return obj.__domApi};Polymer.dom.matchesSelector=matchesSelector;Polymer.dom.flush=Polymer.flush;Polymer.dom.addDebouncer=Polymer.enqueueDebouncer})();</script><script>(function(){"use strict";var styleInterface=window.ShadyCSS;Polymer.LegacyElementMixin=Polymer.dedupingMixin(function(base){var legacyElementBase=Polymer.DirMixin(Polymer.GestureEventListeners(Polymer.ElementMixin(base))),DIRECTION_MAP={x:"pan-x",y:"pan-y",none:"none",all:"auto"},LegacyElement=function(_legacyElementBase){babelHelpers.inherits(LegacyElement,_legacyElementBase);function LegacyElement(){var _this;babelHelpers.classCallCheck(this,LegacyElement);_this=babelHelpers.possibleConstructorReturn(this,(LegacyElement.__proto__||Object.getPrototypeOf(LegacyElement)).call(this));_this.isAttached;_this.__boundListeners;_this._debouncers;_this._applyListeners();return _this}babelHelpers.createClass(LegacyElement,[{key:"created",value:function created(){}},{key:"connectedCallback",value:function connectedCallback(){babelHelpers.get(LegacyElement.prototype.__proto__||Object.getPrototypeOf(LegacyElement.prototype),"connectedCallback",this).call(this);this.isAttached=!0;this.attached()}},{key:"attached",value:function attached(){}},{key:"disconnectedCallback",value:function disconnectedCallback(){babelHelpers.get(LegacyElement.prototype.__proto__||Object.getPrototypeOf(LegacyElement.prototype),"disconnectedCallback",this).call(this);this.isAttached=!1;this.detached()}},{key:"detached",value:function detached(){}},{key:"attributeChangedCallback",value:function attributeChangedCallback(name,old,value){if(old!==value){babelHelpers.get(LegacyElement.prototype.__proto__||Object.getPrototypeOf(LegacyElement.prototype),"attributeChangedCallback",this).call(this,name,old,value);this.attributeChanged(name,old,value)}}},{key:"attributeChanged",value:function attributeChanged(){}},{key:"_initializeProperties",value:function _initializeProperties(){var proto=Object.getPrototypeOf(this);if(!proto.hasOwnProperty("__hasRegisterFinished")){proto.__hasRegisterFinished=!0;this._registered()}babelHelpers.get(LegacyElement.prototype.__proto__||Object.getPrototypeOf(LegacyElement.prototype),"_initializeProperties",this).call(this);this.root=this;this.created()}},{key:"_registered",value:function _registered(){}},{key:"ready",value:function ready(){this._ensureAttributes();babelHelpers.get(LegacyElement.prototype.__proto__||Object.getPrototypeOf(LegacyElement.prototype),"ready",this).call(this)}},{key:"_ensureAttributes",value:function _ensureAttributes(){}},{key:"_applyListeners",value:function _applyListeners(){}},{key:"serialize",value:function serialize(value){return this._serializeValue(value)}},{key:"deserialize",value:function deserialize(value,type){return this._deserializeValue(value,type)}},{key:"reflectPropertyToAttribute",value:function reflectPropertyToAttribute(property,attribute,value){this._propertyToAttribute(property,attribute,value)}},{key:"serializeValueToAttribute",value:function serializeValueToAttribute(value,attribute,node){this._valueToNodeAttribute(node||this,value,attribute)}},{key:"extend",value:function extend(prototype,api){if(!(prototype&&api)){return prototype||api}for(var n$=Object.getOwnPropertyNames(api),i=0,n,pd;i<n$.length&&(n=n$[i]);i++){pd=Object.getOwnPropertyDescriptor(api,n);if(pd){Object.defineProperty(prototype,n,pd)}}return prototype}},{key:"mixin",value:function mixin(target,source){for(var i in source){target[i]=source[i]}return target}},{key:"chainObject",value:function chainObject(object,prototype){if(object&&prototype&&object!==prototype){object.__proto__=prototype}return object}},{key:"instanceTemplate",value:function instanceTemplate(template){var content=this.constructor._contentForTemplate(template),dom=document.importNode(content,!0);return dom}},{key:"fire",value:function fire(type,detail,options){options=options||{};detail=null===detail||detail===void 0?{}:detail;var event=new Event(type,{bubbles:options.bubbles===void 0?!0:options.bubbles,cancelable:!!options.cancelable,composed:options.composed===void 0?!0:options.composed});event.detail=detail;var node=options.node||this;node.dispatchEvent(event);return event}},{key:"listen",value:function listen(node,eventName,methodName){node=node||this;var hbl=this.__boundListeners||(this.__boundListeners=new WeakMap),bl=hbl.get(node);if(!bl){bl={};hbl.set(node,bl)}var key=eventName+methodName;if(!bl[key]){bl[key]=this._addMethodEventListenerToNode(node,eventName,methodName,this)}}},{key:"unlisten",value:function unlisten(node,eventName,methodName){node=node||this;var bl=this.__boundListeners&&this.__boundListeners.get(node),key=eventName+methodName,handler=bl&&bl[key];if(handler){this._removeEventListenerFromNode(node,eventName,handler);bl[key]=null}}},{key:"setScrollDirection",value:function setScrollDirection(direction,node){Polymer.Gestures.setTouchAction(node||this,DIRECTION_MAP[direction]||"auto")}},{key:"$$",value:function $$(slctr){return this.root.querySelector(slctr)}},{key:"distributeContent",value:function distributeContent(){if(window.ShadyDOM&&this.shadowRoot){ShadyDOM.flush()}}},{key:"getEffectiveChildNodes",value:function getEffectiveChildNodes(){var thisEl=this,domApi=Polymer.dom(thisEl);return domApi.getEffectiveChildNodes()}},{key:"queryDistributedElements",value:function queryDistributedElements(selector){var thisEl=this,domApi=Polymer.dom(thisEl);return domApi.queryDistributedElements(selector)}},{key:"getEffectiveChildren",value:function getEffectiveChildren(){var list=this.getEffectiveChildNodes();return list.filter(function(n){return n.nodeType===Node.ELEMENT_NODE})}},{key:"getEffectiveTextContent",value:function getEffectiveTextContent(){for(var cn=this.getEffectiveChildNodes(),tc=[],i=0,c;c=cn[i];i++){if(c.nodeType!==Node.COMMENT_NODE){tc.push(c.textContent)}}return tc.join("")}},{key:"queryEffectiveChildren",value:function queryEffectiveChildren(selector){var e$=this.queryDistributedElements(selector);return e$&&e$[0]}},{key:"queryAllEffectiveChildren",value:function queryAllEffectiveChildren(selector){return this.queryDistributedElements(selector)}},{key:"getContentChildNodes",value:function getContentChildNodes(slctr){var content=this.root.querySelector(slctr||"slot");return content?Polymer.dom(content).getDistributedNodes():[]}},{key:"getContentChildren",value:function getContentChildren(slctr){var children=this.getContentChildNodes(slctr).filter(function(n){return n.nodeType===Node.ELEMENT_NODE});return children}},{key:"isLightDescendant",value:function isLightDescendant(node){var thisNode=this;return thisNode!==node&&thisNode.contains(node)&&thisNode.getRootNode()===node.getRootNode()}},{key:"isLocalDescendant",value:function isLocalDescendant(node){return this.root===node.getRootNode()}},{key:"scopeSubtree",value:function scopeSubtree(){}},{key:"getComputedStyleValue",value:function getComputedStyleValue(property){return styleInterface.getComputedStyleValue(this,property)}},{key:"debounce",value:function debounce(jobName,callback,wait){this._debouncers=this._debouncers||{};return this._debouncers[jobName]=Polymer.Debouncer.debounce(this._debouncers[jobName],0<wait?Polymer.Async.timeOut.after(wait):Polymer.Async.microTask,callback.bind(this))}},{key:"isDebouncerActive",value:function isDebouncerActive(jobName){this._debouncers=this._debouncers||{};var debouncer=this._debouncers[jobName];return!!(debouncer&&debouncer.isActive())}},{key:"flushDebouncer",value:function flushDebouncer(jobName){this._debouncers=this._debouncers||{};var debouncer=this._debouncers[jobName];if(debouncer){debouncer.flush()}}},{key:"cancelDebouncer",value:function cancelDebouncer(jobName){this._debouncers=this._debouncers||{};var debouncer=this._debouncers[jobName];if(debouncer){debouncer.cancel()}}},{key:"async",value:function async(callback,waitTime){return 0<waitTime?Polymer.Async.timeOut.run(callback.bind(this),waitTime):~Polymer.Async.microTask.run(callback.bind(this))}},{key:"cancelAsync",value:function cancelAsync(handle){0>handle?Polymer.Async.microTask.cancel(~handle):Polymer.Async.timeOut.cancel(handle)}},{key:"create",value:function create(tag,props){var elt=document.createElement(tag);if(props){if(elt.setProperties){elt.setProperties(props)}else{for(var n in props){elt[n]=props[n]}}}return elt}},{key:"importHref",value:function importHref(href,onload,onerror,optAsync){var loadFn=onload?onload.bind(this):null,errorFn=onerror?onerror.bind(this):null;return Polymer.importHref(href,loadFn,errorFn,optAsync)}},{key:"elementMatches",value:function elementMatches(selector,node){return Polymer.dom.matchesSelector(node||this,selector)}},{key:"toggleAttribute",value:function toggleAttribute(name,bool,node){node=node||this;if(1==arguments.length){bool=!node.hasAttribute(name)}if(bool){node.setAttribute(name,"")}else{node.removeAttribute(name)}}},{key:"toggleClass",value:function toggleClass(name,bool,node){node=node||this;if(1==arguments.length){bool=!node.classList.contains(name)}if(bool){node.classList.add(name)}else{node.classList.remove(name)}}},{key:"transform",value:function transform(transformText,node){node=node||this;node.style.webkitTransform=transformText;node.style.transform=transformText}},{key:"translate3d",value:function translate3d(x,y,z,node){node=node||this;this.transform("translate3d("+x+","+y+","+z+")",node)}},{key:"arrayDelete",value:function arrayDelete(arrayOrPath,item){var index;if(Array.isArray(arrayOrPath)){index=arrayOrPath.indexOf(item);if(0<=index){return arrayOrPath.splice(index,1)}}else{var arr=Polymer.Path.get(this,arrayOrPath);index=arr.indexOf(item);if(0<=index){return this.splice(arrayOrPath,index,1)}}return null}},{key:"_logger",value:function _logger(level,args){var _console;if(Array.isArray(args)&&1===args.length&&Array.isArray(args[0])){args=args[0]}switch(level){case"log":case"warn":case"error":(_console=console)[level].apply(_console,babelHelpers.toConsumableArray(args));}}},{key:"_log",value:function _log(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}this._logger("log",args)}},{key:"_warn",value:function _warn(){for(var _len2=arguments.length,args=Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2]}this._logger("warn",args)}},{key:"_error",value:function _error(){for(var _len3=arguments.length,args=Array(_len3),_key3=0;_key3<_len3;_key3++){args[_key3]=arguments[_key3]}this._logger("error",args)}},{key:"_logf",value:function _logf(methodName){for(var _len4=arguments.length,args=Array(1<_len4?_len4-1:0),_key4=1;_key4<_len4;_key4++){args[_key4-1]=arguments[_key4]}return["[%s::%s]",this.is,methodName].concat(args)}},{key:"domHost",get:function get(){var root=this.getRootNode();return babelHelpers.instanceof(root,DocumentFragment)?root.host:root}}]);return LegacyElement}(legacyElementBase);LegacyElement.prototype.is="";return LegacyElement})})();</script><script>(function(){"use strict";var metaProps={attached:!0,detached:!0,ready:!0,created:!0,beforeRegister:!0,registered:!0,attributeChanged:!0,behaviors:!0};function mixinBehaviors(behaviors,klass){if(!behaviors){klass=klass;return klass}klass=Polymer.LegacyElementMixin(klass);if(!Array.isArray(behaviors)){behaviors=[behaviors]}var superBehaviors=klass.prototype.behaviors;behaviors=flattenBehaviors(behaviors,null,superBehaviors);klass=_mixinBehaviors(behaviors,klass);if(superBehaviors){behaviors=superBehaviors.concat(behaviors)}klass.prototype.behaviors=behaviors;return klass}function _mixinBehaviors(behaviors,klass){for(var i=0,b;i<behaviors.length;i++){b=behaviors[i];if(b){klass=Array.isArray(b)?_mixinBehaviors(b,klass):GenerateClassFromInfo(b,klass)}}return klass}function flattenBehaviors(behaviors,list,exclude){list=list||[];for(var i=behaviors.length-1,b;0<=i;i--){b=behaviors[i];if(b){if(Array.isArray(b)){flattenBehaviors(b,list)}else{if(0>list.indexOf(b)&&(!exclude||0>exclude.indexOf(b))){list.unshift(b)}}}else{console.warn("behavior is null, check for missing or 404 import")}}return list}function GenerateClassFromInfo(info,Base){var PolymerGenerated=function(_Base){babelHelpers.inherits(PolymerGenerated,_Base);function PolymerGenerated(){babelHelpers.classCallCheck(this,PolymerGenerated);return babelHelpers.possibleConstructorReturn(this,(PolymerGenerated.__proto__||Object.getPrototypeOf(PolymerGenerated)).apply(this,arguments))}babelHelpers.createClass(PolymerGenerated,[{key:"created",value:function created(){babelHelpers.get(PolymerGenerated.prototype.__proto__||Object.getPrototypeOf(PolymerGenerated.prototype),"created",this).call(this);if(info.created){info.created.call(this)}}},{key:"_registered",value:function _registered(){babelHelpers.get(PolymerGenerated.prototype.__proto__||Object.getPrototypeOf(PolymerGenerated.prototype),"_registered",this).call(this);if(info.beforeRegister){info.beforeRegister.call(Object.getPrototypeOf(this))}if(info.registered){info.registered.call(Object.getPrototypeOf(this))}}},{key:"_applyListeners",value:function _applyListeners(){babelHelpers.get(PolymerGenerated.prototype.__proto__||Object.getPrototypeOf(PolymerGenerated.prototype),"_applyListeners",this).call(this);if(info.listeners){for(var l in info.listeners){this._addMethodEventListenerToNode(this,l,info.listeners[l])}}}},{key:"_ensureAttributes",value:function _ensureAttributes(){if(info.hostAttributes){for(var a in info.hostAttributes){this._ensureAttribute(a,info.hostAttributes[a])}}babelHelpers.get(PolymerGenerated.prototype.__proto__||Object.getPrototypeOf(PolymerGenerated.prototype),"_ensureAttributes",this).call(this)}},{key:"ready",value:function ready(){babelHelpers.get(PolymerGenerated.prototype.__proto__||Object.getPrototypeOf(PolymerGenerated.prototype),"ready",this).call(this);if(info.ready){info.ready.call(this)}}},{key:"attached",value:function attached(){babelHelpers.get(PolymerGenerated.prototype.__proto__||Object.getPrototypeOf(PolymerGenerated.prototype),"attached",this).call(this);if(info.attached){info.attached.call(this)}}},{key:"detached",value:function detached(){babelHelpers.get(PolymerGenerated.prototype.__proto__||Object.getPrototypeOf(PolymerGenerated.prototype),"detached",this).call(this);if(info.detached){info.detached.call(this)}}},{key:"attributeChanged",value:function attributeChanged(name,old,value){babelHelpers.get(PolymerGenerated.prototype.__proto__||Object.getPrototypeOf(PolymerGenerated.prototype),"attributeChanged",this).call(this,name,old,value);if(info.attributeChanged){info.attributeChanged.call(this,name,old,value)}}}],[{key:"properties",get:function get(){return info.properties}},{key:"observers",get:function get(){return info.observers}},{key:"template",get:function get(){return info._template||Polymer.DomModule&&Polymer.DomModule.import(this.is,"template")||Base.template||this.prototype._template||null}}]);return PolymerGenerated}(Base);PolymerGenerated.generatedFrom=info;for(var p in info){if(!(p in metaProps)){var pd=Object.getOwnPropertyDescriptor(info,p);if(pd){Object.defineProperty(PolymerGenerated.prototype,p,pd)}}}return PolymerGenerated}Polymer.Class=function(info){if(!info){console.warn("Polymer.Class requires `info` argument")}var klass=GenerateClassFromInfo(info,info.behaviors?mixinBehaviors(info.behaviors,HTMLElement):Polymer.LegacyElementMixin(HTMLElement));klass.is=info.is;return klass};Polymer.mixinBehaviors=mixinBehaviors})();</script><script>(function(){"use strict";window.Polymer._polymerFn=function(info){var klass;if("function"===typeof info){klass=info}else{klass=Polymer.Class(info)}customElements.define(klass.is,klass);return klass}})();</script><script>(function(){"use strict";function mutablePropertyChange(inst,property,value,old,mutableData){var isObject;if(mutableData){isObject="object"===babelHelpers.typeof(value)&&null!==value;if(isObject){old=inst.__dataTemp[property]}}var shouldChange=old!==value&&(old===old||value===value);if(isObject&&shouldChange){inst.__dataTemp[property]=value}return shouldChange}Polymer.MutableData=Polymer.dedupingMixin(function(superClass){var MutableData=function(_superClass){babelHelpers.inherits(MutableData,_superClass);function MutableData(){babelHelpers.classCallCheck(this,MutableData);return babelHelpers.possibleConstructorReturn(this,(MutableData.__proto__||Object.getPrototypeOf(MutableData)).apply(this,arguments))}babelHelpers.createClass(MutableData,[{key:"_shouldPropertyChange",value:function _shouldPropertyChange(property,value,old){return mutablePropertyChange(this,property,value,old,!0)}}]);return MutableData}(superClass);return MutableData});Polymer.OptionalMutableData=Polymer.dedupingMixin(function(superClass){var OptionalMutableData=function(_superClass2){babelHelpers.inherits(OptionalMutableData,_superClass2);function OptionalMutableData(){babelHelpers.classCallCheck(this,OptionalMutableData);return babelHelpers.possibleConstructorReturn(this,(OptionalMutableData.__proto__||Object.getPrototypeOf(OptionalMutableData)).apply(this,arguments))}babelHelpers.createClass(OptionalMutableData,[{key:"_shouldPropertyChange",value:function _shouldPropertyChange(property,value,old){return mutablePropertyChange(this,property,value,old,this.mutableData)}}],[{key:"properties",get:function get(){return{mutableData:Boolean}}}]);return OptionalMutableData}(superClass);return OptionalMutableData});Polymer.MutableData._mutablePropertyChange=mutablePropertyChange})();</script><script>(function(){"use strict";var newInstance=null;function HTMLTemplateElementExtension(){return newInstance}HTMLTemplateElementExtension.prototype=Object.create(HTMLTemplateElement.prototype,{constructor:{value:HTMLTemplateElementExtension,writable:!0}});var DataTemplate=Polymer.PropertyEffects(HTMLTemplateElementExtension),MutableDataTemplate=Polymer.MutableData(DataTemplate);function upgradeTemplate(template,constructor){newInstance=template;Object.setPrototypeOf(template,constructor.prototype);new constructor;newInstance=null}var base=Polymer.PropertyEffects(function(){function _class(){babelHelpers.classCallCheck(this,_class)}return _class}()),TemplateInstanceBase=function(_base){babelHelpers.inherits(TemplateInstanceBase,_base);function TemplateInstanceBase(props){var _this;babelHelpers.classCallCheck(this,TemplateInstanceBase);_this=babelHelpers.possibleConstructorReturn(this,(TemplateInstanceBase.__proto__||Object.getPrototypeOf(TemplateInstanceBase)).call(this));_this._configureProperties(props);_this.root=_this._stampTemplate(_this.__dataHost);for(var children=_this.children=[],n=_this.root.firstChild;n;n=n.nextSibling){children.push(n);n.__templatizeInstance=babelHelpers.assertThisInitialized(_this)}if(_this.__templatizeOwner&&_this.__templatizeOwner.__hideTemplateChildren__){_this._showHideChildren(!0)}var options=_this.__templatizeOptions;if(props&&options.instanceProps||!options.instanceProps){_this._enableProperties()}return _this}babelHelpers.createClass(TemplateInstanceBase,[{key:"_configureProperties",value:function _configureProperties(props){var options=this.__templatizeOptions;if(options.forwardHostProp){for(var hprop in this.__hostProps){this._setPendingProperty(hprop,this.__dataHost["_host_"+hprop])}}for(var iprop in props){this._setPendingProperty(iprop,props[iprop])}}},{key:"forwardHostProp",value:function forwardHostProp(prop,value){if(this._setPendingPropertyOrPath(prop,value,!1,!0)){this.__dataHost._enqueueClient(this)}}},{key:"_addEventListenerToNode",value:function _addEventListenerToNode(node,eventName,handler){var _this2=this;if(this._methodHost&&this.__templatizeOptions.parentModel){this._methodHost._addEventListenerToNode(node,eventName,function(e){e.model=_this2;handler(e)})}else{var templateHost=this.__dataHost.__dataHost;if(templateHost){templateHost._addEventListenerToNode(node,eventName,handler)}}}},{key:"_showHideChildren",value:function _showHideChildren(hide){for(var c=this.children,i=0,n;i<c.length;i++){n=c[i];if(!!hide!=!!n.__hideTemplateChildren__){if(n.nodeType===Node.TEXT_NODE){if(hide){n.__polymerTextContent__=n.textContent;n.textContent=""}else{n.textContent=n.__polymerTextContent__}}else if("slot"===n.localName){if(hide){n.__polymerReplaced__=document.createComment("hidden-slot");n.parentNode.replaceChild(n.__polymerReplaced__,n)}else{var replace=n.__polymerReplaced__;if(replace){replace.parentNode.replaceChild(n,replace)}}}else if(n.style){if(hide){n.__polymerDisplay__=n.style.display;n.style.display="none"}else{n.style.display=n.__polymerDisplay__}}}n.__hideTemplateChildren__=hide;if(n._showHideChildren){n._showHideChildren(hide)}}}},{key:"_setUnmanagedPropertyToNode",value:function _setUnmanagedPropertyToNode(node,prop,value){if(node.__hideTemplateChildren__&&node.nodeType==Node.TEXT_NODE&&"textContent"==prop){node.__polymerTextContent__=value}else{babelHelpers.get(TemplateInstanceBase.prototype.__proto__||Object.getPrototypeOf(TemplateInstanceBase.prototype),"_setUnmanagedPropertyToNode",this).call(this,node,prop,value)}}},{key:"dispatchEvent",value:function dispatchEvent(){return!0}},{key:"parentModel",get:function get(){var model=this.__parentModel;if(!model){var options;model=this;do{model=model.__dataHost.__dataHost}while((options=model.__templatizeOptions)&&!options.parentModel);this.__parentModel=model}return model}}]);return TemplateInstanceBase}(base);TemplateInstanceBase.prototype.__dataHost;TemplateInstanceBase.prototype.__templatizeOptions;TemplateInstanceBase.prototype._methodHost;TemplateInstanceBase.prototype.__templatizeOwner;TemplateInstanceBase.prototype.__hostProps;var MutableTemplateInstanceBase=Polymer.MutableData(TemplateInstanceBase);function findMethodHost(template){var templateHost=template.__dataHost;return templateHost&&templateHost._methodHost||templateHost}function createTemplatizerClass(template,templateInfo,options){var base=options.mutableData?MutableTemplateInstanceBase:TemplateInstanceBase,klass=function(_base2){babelHelpers.inherits(klass,_base2);function klass(){babelHelpers.classCallCheck(this,klass);return babelHelpers.possibleConstructorReturn(this,(klass.__proto__||Object.getPrototypeOf(klass)).apply(this,arguments))}return klass}(base);klass.prototype.__templatizeOptions=options;klass.prototype._bindTemplate(template);addNotifyEffects(klass,template,templateInfo,options);return klass}function addPropagateEffects(template,templateInfo,options){var userForwardHostProp=options.forwardHostProp;if(userForwardHostProp){var klass=templateInfo.templatizeTemplateClass;if(!klass){var _base3=options.mutableData?MutableDataTemplate:DataTemplate;klass=templateInfo.templatizeTemplateClass=function(_base4){babelHelpers.inherits(TemplatizedTemplate,_base4);function TemplatizedTemplate(){babelHelpers.classCallCheck(this,TemplatizedTemplate);return babelHelpers.possibleConstructorReturn(this,(TemplatizedTemplate.__proto__||Object.getPrototypeOf(TemplatizedTemplate)).apply(this,arguments))}return TemplatizedTemplate}(_base3);var hostProps=templateInfo.hostProps;for(var prop in hostProps){klass.prototype._addPropertyEffect("_host_"+prop,klass.prototype.PROPERTY_EFFECT_TYPES.PROPAGATE,{fn:createForwardHostPropEffect(prop,userForwardHostProp)});klass.prototype._createNotifyingProperty("_host_"+prop)}}upgradeTemplate(template,klass);if(template.__dataProto){Object.assign(template.__data,template.__dataProto)}template.__dataTemp={};template.__dataPending=null;template.__dataOld=null;template._enableProperties()}}function createForwardHostPropEffect(hostProp,userForwardHostProp){return function(template,prop,props){userForwardHostProp.call(template.__templatizeOwner,prop.substring("_host_".length),props[prop])}}function addNotifyEffects(klass,template,templateInfo,options){var hostProps=templateInfo.hostProps||{};for(var iprop in options.instanceProps){delete hostProps[iprop];var userNotifyInstanceProp=options.notifyInstanceProp;if(userNotifyInstanceProp){klass.prototype._addPropertyEffect(iprop,klass.prototype.PROPERTY_EFFECT_TYPES.NOTIFY,{fn:createNotifyInstancePropEffect(iprop,userNotifyInstanceProp)})}}if(options.forwardHostProp&&template.__dataHost){for(var hprop in hostProps){klass.prototype._addPropertyEffect(hprop,klass.prototype.PROPERTY_EFFECT_TYPES.NOTIFY,{fn:createNotifyHostPropEffect()})}}}function createNotifyInstancePropEffect(instProp,userNotifyInstanceProp){return function(inst,prop,props){userNotifyInstanceProp.call(inst.__templatizeOwner,inst,prop,props[prop])}}function createNotifyHostPropEffect(){return function(inst,prop,props){inst.__dataHost._setPendingPropertyOrPath("_host_"+prop,props[prop],!0,!0)}}Polymer.Templatize={templatize:function templatize(template,owner,options){options=options||{};if(template.__templatizeOwner){throw new Error("A <template> can only be templatized once")}template.__templatizeOwner=owner;var ctor=owner?owner.constructor:TemplateInstanceBase,templateInfo=ctor._parseTemplate(template),baseClass=templateInfo.templatizeInstanceClass;if(!baseClass){baseClass=createTemplatizerClass(template,templateInfo,options);templateInfo.templatizeInstanceClass=baseClass}addPropagateEffects(template,templateInfo,options);var klass=function(_baseClass){babelHelpers.inherits(TemplateInstance,_baseClass);function TemplateInstance(){babelHelpers.classCallCheck(this,TemplateInstance);return babelHelpers.possibleConstructorReturn(this,(TemplateInstance.__proto__||Object.getPrototypeOf(TemplateInstance)).apply(this,arguments))}return TemplateInstance}(baseClass);klass.prototype._methodHost=findMethodHost(template);klass.prototype.__dataHost=template;klass.prototype.__templatizeOwner=owner;klass.prototype.__hostProps=templateInfo.hostProps;klass=klass;return klass},modelForElement:function modelForElement(template,node){var model;while(node){if(model=node.__templatizeInstance){if(model.__dataHost!=template){node=model.__dataHost}else{return model}}else{node=node.parentNode}}return null}};Polymer.TemplateInstanceBase=TemplateInstanceBase})();</script><script>(function(){"use strict";var TemplateInstanceBase=Polymer.TemplateInstanceBase;Polymer.Templatizer={templatize:function templatize(template,mutableData){this._templatizerTemplate=template;this.ctor=Polymer.Templatize.templatize(template,this,{mutableData:!!mutableData,parentModel:this._parentModel,instanceProps:this._instanceProps,forwardHostProp:this._forwardHostPropV2,notifyInstanceProp:this._notifyInstancePropV2})},stamp:function stamp(model){return new this.ctor(model)},modelForElement:function modelForElement(el){return Polymer.Templatize.modelForElement(this._templatizerTemplate,el)}}})();</script><script>(function(){"use strict";var domBindBase=Polymer.GestureEventListeners(Polymer.OptionalMutableData(Polymer.PropertyEffects(HTMLElement))),DomBind=function(_domBindBase){babelHelpers.inherits(DomBind,_domBindBase);babelHelpers.createClass(DomBind,null,[{key:"observedAttributes",get:function get(){return["mutable-data"]}}]);function DomBind(){var _this;babelHelpers.classCallCheck(this,DomBind);_this=babelHelpers.possibleConstructorReturn(this,(DomBind.__proto__||Object.getPrototypeOf(DomBind)).call(this));_this.root=null;_this.$=null;_this.__children=null;return _this}babelHelpers.createClass(DomBind,[{key:"attributeChangedCallback",value:function attributeChangedCallback(){this.mutableData=!0}},{key:"connectedCallback",value:function connectedCallback(){this.style.display="none";this.render()}},{key:"disconnectedCallback",value:function disconnectedCallback(){this.__removeChildren()}},{key:"__insertChildren",value:function __insertChildren(){this.parentNode.insertBefore(this.root,this)}},{key:"__removeChildren",value:function __removeChildren(){if(this.__children){for(var i=0;i<this.__children.length;i++){this.root.appendChild(this.__children[i])}}}},{key:"render",value:function render(){var _this2=this,template;if(!this.__children){template=template||this.querySelector("template");if(!template){var observer=new MutationObserver(function(){template=_this2.querySelector("template");if(template){observer.disconnect();_this2.render()}else{throw new Error("dom-bind requires a <template> child")}});observer.observe(this,{childList:!0});return}this.root=this._stampTemplate(template);this.$=this.root.$;this.__children=[];for(var n=this.root.firstChild;n;n=n.nextSibling){this.__children[this.__children.length]=n}this._enableProperties()}this.__insertChildren();this.dispatchEvent(new CustomEvent("dom-change",{bubbles:!0,composed:!0}))}}]);return DomBind}(domBindBase);customElements.define("dom-bind",DomBind);Polymer.DomBind=DomBind})();</script><script>(function(){"use strict";var TemplateInstanceBase=Polymer.TemplateInstanceBase,domRepeatBase=Polymer.OptionalMutableData(Polymer.Element),DomRepeat=function(_domRepeatBase){babelHelpers.inherits(DomRepeat,_domRepeatBase);babelHelpers.createClass(DomRepeat,null,[{key:"is",get:function get(){return"dom-repeat"}},{key:"template",get:function get(){return null}},{key:"properties",get:function get(){return{items:{type:Array},as:{type:String,value:"item"},indexAs:{type:String,value:"index"},itemsIndexAs:{type:String,value:"itemsIndex"},sort:{type:Function,observer:"__sortChanged"},filter:{type:Function,observer:"__filterChanged"},observe:{type:String,observer:"__observeChanged"},delay:Number,renderedItemCount:{type:Number,notify:!0,readOnly:!0},initialCount:{type:Number,observer:"__initializeChunking"},targetFramerate:{type:Number,value:20},_targetFrameTime:{type:Number,computed:"__computeFrameTime(targetFramerate)"}}}},{key:"observers",get:function get(){return["__itemsChanged(items.*)"]}}]);function DomRepeat(){var _this;babelHelpers.classCallCheck(this,DomRepeat);_this=babelHelpers.possibleConstructorReturn(this,(DomRepeat.__proto__||Object.getPrototypeOf(DomRepeat)).call(this));_this.__instances=[];_this.__limit=1/0;_this.__pool=[];_this.__renderDebouncer=null;_this.__itemsIdxToInstIdx={};_this.__chunkCount=null;_this.__lastChunkTime=null;_this.__sortFn=null;_this.__filterFn=null;_this.__observePaths=null;_this.__ctor=null;_this.__isDetached=!0;_this.template=null;return _this}babelHelpers.createClass(DomRepeat,[{key:"disconnectedCallback",value:function disconnectedCallback(){babelHelpers.get(DomRepeat.prototype.__proto__||Object.getPrototypeOf(DomRepeat.prototype),"disconnectedCallback",this).call(this);this.__isDetached=!0;for(var i=0;i<this.__instances.length;i++){this.__detachInstance(i)}}},{key:"connectedCallback",value:function connectedCallback(){babelHelpers.get(DomRepeat.prototype.__proto__||Object.getPrototypeOf(DomRepeat.prototype),"connectedCallback",this).call(this);this.style.display="none";if(this.__isDetached){this.__isDetached=!1;for(var parent=this.parentNode,i=0;i<this.__instances.length;i++){this.__attachInstance(i,parent)}}}},{key:"__ensureTemplatized",value:function __ensureTemplatized(){var _this2=this;if(!this.__ctor){var template=this.template=this.querySelector("template");if(!template){var observer=new MutationObserver(function(){if(_this2.querySelector("template")){observer.disconnect();_this2.__render()}else{throw new Error("dom-repeat requires a <template> child")}});observer.observe(this,{childList:!0});return!1}var instanceProps={};instanceProps[this.as]=!0;instanceProps[this.indexAs]=!0;instanceProps[this.itemsIndexAs]=!0;this.__ctor=Polymer.Templatize.templatize(template,this,{mutableData:this.mutableData,parentModel:!0,instanceProps:instanceProps,forwardHostProp:function forwardHostProp(prop,value){for(var i$=this.__instances,i=0,inst;i<i$.length&&(inst=i$[i]);i++){inst.forwardHostProp(prop,value)}},notifyInstanceProp:function notifyInstanceProp(inst,prop,value){if(Polymer.Path.matches(this.as,prop)){var idx=inst[this.itemsIndexAs];if(prop==this.as){this.items[idx]=value}var path=Polymer.Path.translate(this.as,"items."+idx,prop);this.notifyPath(path,value)}}})}return!0}},{key:"__getMethodHost",value:function __getMethodHost(){return this.__dataHost._methodHost||this.__dataHost}},{key:"__functionFromPropertyValue",value:function __functionFromPropertyValue(functionOrMethodName){if("string"===typeof functionOrMethodName){var obj=this.__getMethodHost();return function(){return obj[functionOrMethodName].apply(obj,arguments)}}return functionOrMethodName}},{key:"__sortChanged",value:function __sortChanged(sort){this.__sortFn=this.__functionFromPropertyValue(sort);if(this.items){this.__debounceRender(this.__render)}}},{key:"__filterChanged",value:function __filterChanged(filter){this.__filterFn=this.__functionFromPropertyValue(filter);if(this.items){this.__debounceRender(this.__render)}}},{key:"__computeFrameTime",value:function __computeFrameTime(rate){return Math.ceil(1e3/rate)}},{key:"__initializeChunking",value:function __initializeChunking(){if(this.initialCount){this.__limit=this.initialCount;this.__chunkCount=this.initialCount;this.__lastChunkTime=performance.now()}}},{key:"__tryRenderChunk",value:function __tryRenderChunk(){if(this.items&&this.__limit<this.items.length){this.__debounceRender(this.__requestRenderChunk)}}},{key:"__requestRenderChunk",value:function __requestRenderChunk(){var _this3=this;requestAnimationFrame(function(){return _this3.__renderChunk()})}},{key:"__renderChunk",value:function __renderChunk(){var currChunkTime=performance.now(),ratio=this._targetFrameTime/(currChunkTime-this.__lastChunkTime);this.__chunkCount=Math.round(this.__chunkCount*ratio)||1;this.__limit+=this.__chunkCount;this.__lastChunkTime=currChunkTime;this.__debounceRender(this.__render)}},{key:"__observeChanged",value:function __observeChanged(){this.__observePaths=this.observe&&this.observe.replace(".*",".").split(" ")}},{key:"__itemsChanged",value:function __itemsChanged(change){if(this.items&&!Array.isArray(this.items)){console.warn("dom-repeat expected array for `items`, found",this.items)}if(!this.__handleItemPath(change.path,change.value)){this.__initializeChunking();this.__debounceRender(this.__render)}}},{key:"__handleObservedPaths",value:function __handleObservedPaths(path){if(this.__sortFn||this.__filterFn){if(!path){this.__debounceRender(this.__render,this.delay)}else if(this.__observePaths){for(var paths=this.__observePaths,i=0;i<paths.length;i++){if(0===path.indexOf(paths[i])){this.__debounceRender(this.__render,this.delay)}}}}}},{key:"__debounceRender",value:function __debounceRender(fn){var delay=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0;this.__renderDebouncer=Polymer.Debouncer.debounce(this.__renderDebouncer,0<delay?Polymer.Async.timeOut.after(delay):Polymer.Async.microTask,fn.bind(this));Polymer.enqueueDebouncer(this.__renderDebouncer)}},{key:"render",value:function render(){this.__debounceRender(this.__render);Polymer.flush()}},{key:"__render",value:function __render(){if(!this.__ensureTemplatized()){return}this.__applyFullRefresh();this.__pool.length=0;this._setRenderedItemCount(this.__instances.length);this.dispatchEvent(new CustomEvent("dom-change",{bubbles:!0,composed:!0}));this.__tryRenderChunk()}},{key:"__applyFullRefresh",value:function __applyFullRefresh(){for(var _this4=this,items=this.items||[],isntIdxToItemsIdx=Array(items.length),i=0;i<items.length;i++){isntIdxToItemsIdx[i]=i}if(this.__filterFn){isntIdxToItemsIdx=isntIdxToItemsIdx.filter(function(i,idx,array){return _this4.__filterFn(items[i],idx,array)})}if(this.__sortFn){isntIdxToItemsIdx.sort(function(a,b){return _this4.__sortFn(items[a],items[b])})}var itemsIdxToInstIdx=this.__itemsIdxToInstIdx={},instIdx=0,limit=Math.min(isntIdxToItemsIdx.length,this.__limit);for(;instIdx<limit;instIdx++){var inst=this.__instances[instIdx],itemIdx=isntIdxToItemsIdx[instIdx],item=items[itemIdx];itemsIdxToInstIdx[itemIdx]=instIdx;if(inst){inst._setPendingProperty(this.as,item);inst._setPendingProperty(this.indexAs,instIdx);inst._setPendingProperty(this.itemsIndexAs,itemIdx);inst._flushProperties()}else{this.__insertInstance(item,instIdx,itemIdx)}}for(var _i=this.__instances.length-1;_i>=instIdx;_i--){this.__detachAndRemoveInstance(_i)}}},{key:"__detachInstance",value:function __detachInstance(idx){for(var inst=this.__instances[idx],i=0,el;i<inst.children.length;i++){el=inst.children[i];inst.root.appendChild(el)}return inst}},{key:"__attachInstance",value:function __attachInstance(idx,parent){var inst=this.__instances[idx];parent.insertBefore(inst.root,this)}},{key:"__detachAndRemoveInstance",value:function __detachAndRemoveInstance(idx){var inst=this.__detachInstance(idx);if(inst){this.__pool.push(inst)}this.__instances.splice(idx,1)}},{key:"__stampInstance",value:function __stampInstance(item,instIdx,itemIdx){var model={};model[this.as]=item;model[this.indexAs]=instIdx;model[this.itemsIndexAs]=itemIdx;return new this.__ctor(model)}},{key:"__insertInstance",value:function __insertInstance(item,instIdx,itemIdx){var inst=this.__pool.pop();if(inst){inst._setPendingProperty(this.as,item);inst._setPendingProperty(this.indexAs,instIdx);inst._setPendingProperty(this.itemsIndexAs,itemIdx);inst._flushProperties()}else{inst=this.__stampInstance(item,instIdx,itemIdx)}var beforeRow=this.__instances[instIdx+1],beforeNode=beforeRow?beforeRow.children[0]:this;this.parentNode.insertBefore(inst.root,beforeNode);this.__instances[instIdx]=inst;return inst}},{key:"_showHideChildren",value:function _showHideChildren(hidden){for(var i=0;i<this.__instances.length;i++){this.__instances[i]._showHideChildren(hidden)}}},{key:"__handleItemPath",value:function __handleItemPath(path,value){var itemsPath=path.slice(6),dot=itemsPath.indexOf("."),itemsIdx=0>dot?itemsPath:itemsPath.substring(0,dot);if(itemsIdx==parseInt(itemsIdx,10)){var itemSubPath=0>dot?"":itemsPath.substring(dot+1);this.__handleObservedPaths(itemSubPath);var instIdx=this.__itemsIdxToInstIdx[itemsIdx],inst=this.__instances[instIdx];if(inst){var itemPath=this.as+(itemSubPath?"."+itemSubPath:"");inst._setPendingPropertyOrPath(itemPath,value,!1,!0);inst._flushProperties()}return!0}}},{key:"itemForElement",value:function itemForElement(el){var instance=this.modelForElement(el);return instance&&instance[this.as]}},{key:"indexForElement",value:function indexForElement(el){var instance=this.modelForElement(el);return instance&&instance[this.indexAs]}},{key:"modelForElement",value:function modelForElement(el){return Polymer.Templatize.modelForElement(this.template,el)}}]);return DomRepeat}(domRepeatBase);customElements.define(DomRepeat.is,DomRepeat);Polymer.DomRepeat=DomRepeat})();</script><script>(function(){"use strict";var DomIf=function(_Polymer$Element){babelHelpers.inherits(DomIf,_Polymer$Element);babelHelpers.createClass(DomIf,null,[{key:"is",get:function get(){return"dom-if"}},{key:"template",get:function get(){return null}},{key:"properties",get:function get(){return{if:{type:Boolean,observer:"__debounceRender"},restamp:{type:Boolean,observer:"__debounceRender"}}}}]);function DomIf(){var _this;babelHelpers.classCallCheck(this,DomIf);_this=babelHelpers.possibleConstructorReturn(this,(DomIf.__proto__||Object.getPrototypeOf(DomIf)).call(this));_this.__renderDebouncer=null;_this.__invalidProps=null;_this.__instance=null;_this._lastIf=!1;_this.__ctor=null;return _this}babelHelpers.createClass(DomIf,[{key:"__debounceRender",value:function __debounceRender(){var _this2=this;this.__renderDebouncer=Polymer.Debouncer.debounce(this.__renderDebouncer,Polymer.Async.microTask,function(){return _this2.__render()});Polymer.enqueueDebouncer(this.__renderDebouncer)}},{key:"disconnectedCallback",value:function disconnectedCallback(){babelHelpers.get(DomIf.prototype.__proto__||Object.getPrototypeOf(DomIf.prototype),"disconnectedCallback",this).call(this);if(!this.parentNode||this.parentNode.nodeType==Node.DOCUMENT_FRAGMENT_NODE&&!this.parentNode.host){this.__teardownInstance()}}},{key:"connectedCallback",value:function connectedCallback(){babelHelpers.get(DomIf.prototype.__proto__||Object.getPrototypeOf(DomIf.prototype),"connectedCallback",this).call(this);this.style.display="none";if(this.if){this.__debounceRender()}}},{key:"render",value:function render(){Polymer.flush()}},{key:"__render",value:function __render(){if(this.if){if(!this.__ensureInstance()){return}this._showHideChildren()}else if(this.restamp){this.__teardownInstance()}if(!this.restamp&&this.__instance){this._showHideChildren()}if(this.if!=this._lastIf){this.dispatchEvent(new CustomEvent("dom-change",{bubbles:!0,composed:!0}));this._lastIf=this.if}}},{key:"__ensureInstance",value:function __ensureInstance(){var _this3=this,parentNode=this.parentNode;if(parentNode){if(!this.__ctor){var template=this.querySelector("template");if(!template){var observer=new MutationObserver(function(){if(_this3.querySelector("template")){observer.disconnect();_this3.__render()}else{throw new Error("dom-if requires a <template> child")}});observer.observe(this,{childList:!0});return!1}this.__ctor=Polymer.Templatize.templatize(template,this,{mutableData:!0,forwardHostProp:function forwardHostProp(prop,value){if(this.__instance){if(this.if){this.__instance.forwardHostProp(prop,value)}else{this.__invalidProps=this.__invalidProps||Object.create(null);this.__invalidProps[Polymer.Path.root(prop)]=!0}}}})}if(!this.__instance){this.__instance=new this.__ctor;parentNode.insertBefore(this.__instance.root,this)}else{this.__syncHostProperties();var c$=this.__instance.children;if(c$&&c$.length){var lastChild=this.previousSibling;if(lastChild!==c$[c$.length-1]){for(var i=0,n;i<c$.length&&(n=c$[i]);i++){parentNode.insertBefore(n,this)}}}}}return!0}},{key:"__syncHostProperties",value:function __syncHostProperties(){var props=this.__invalidProps;if(props){for(var prop in props){this.__instance._setPendingProperty(prop,this.__dataHost[prop])}this.__invalidProps=null;this.__instance._flushProperties()}}},{key:"__teardownInstance",value:function __teardownInstance(){if(this.__instance){var c$=this.__instance.children;if(c$&&c$.length){for(var parent=c$[0].parentNode,i=0,n;i<c$.length&&(n=c$[i]);i++){parent.removeChild(n)}}this.__instance=null;this.__invalidProps=null}}},{key:"_showHideChildren",value:function _showHideChildren(){var hidden=this.__hideTemplateChildren__||!this.if;if(this.__instance){this.__instance._showHideChildren(hidden)}}}]);return DomIf}(Polymer.Element);customElements.define(DomIf.is,DomIf);Polymer.DomIf=DomIf})();</script><script>(function(){"use strict";var ArraySelectorMixin=Polymer.dedupingMixin(function(superClass){var elementBase=Polymer.ElementMixin(superClass),ArraySelectorMixin=function(_elementBase){babelHelpers.inherits(ArraySelectorMixin,_elementBase);babelHelpers.createClass(ArraySelectorMixin,null,[{key:"properties",get:function get(){return{items:{type:Array},multi:{type:Boolean,value:!1},selected:{type:Object,notify:!0},selectedItem:{type:Object,notify:!0},toggle:{type:Boolean,value:!1}}}},{key:"observers",get:function get(){return["__updateSelection(multi, items.*)"]}}]);function ArraySelectorMixin(){var _this;babelHelpers.classCallCheck(this,ArraySelectorMixin);_this=babelHelpers.possibleConstructorReturn(this,(ArraySelectorMixin.__proto__||Object.getPrototypeOf(ArraySelectorMixin)).call(this));_this.__lastItems=null;_this.__lastMulti=null;_this.__selectedMap=null;return _this}babelHelpers.createClass(ArraySelectorMixin,[{key:"__updateSelection",value:function __updateSelection(multi,itemsInfo){var path=itemsInfo.path;if("items"==path){var newItems=itemsInfo.base||[],lastItems=this.__lastItems,lastMulti=this.__lastMulti;if(multi!==lastMulti){this.clearSelection()}if(lastItems){var splices=Polymer.ArraySplice.calculateSplices(newItems,lastItems);this.__applySplices(splices)}this.__lastItems=newItems;this.__lastMulti=multi}else if("items.splices"==itemsInfo.path){this.__applySplices(itemsInfo.value.indexSplices)}else{var part=path.slice("items.".length),idx=parseInt(part,10);if(0>part.indexOf(".")&&part==idx){this.__deselectChangedIdx(idx)}}}},{key:"__applySplices",value:function __applySplices(splices){for(var _this2=this,selected=this.__selectedMap,_loop=function(i){var s=splices[i];selected.forEach(function(idx,item){if(idx<s.index){}else if(idx>=s.index+s.removed.length){selected.set(item,idx+s.addedCount-s.removed.length)}else{selected.set(item,-1)}});for(var j=0,idx;j<s.addedCount;j++){idx=s.index+j;if(selected.has(_this2.items[idx])){selected.set(_this2.items[idx],idx)}}},i=0;i<splices.length;i++){_loop(i)}this.__updateLinks();var sidx=0;selected.forEach(function(idx,item){if(0>idx){if(_this2.multi){_this2.splice("selected",sidx,1)}else{_this2.selected=_this2.selectedItem=null}selected.delete(item)}else{sidx++}})}},{key:"__updateLinks",value:function __updateLinks(){var _this3=this;this.__dataLinkedPaths={};if(this.multi){var sidx=0;this.__selectedMap.forEach(function(idx){if(0<=idx){_this3.linkPaths("items."+idx,"selected."+sidx++)}})}else{this.__selectedMap.forEach(function(idx){_this3.linkPaths("selected","items."+idx);_this3.linkPaths("selectedItem","items."+idx)})}}},{key:"clearSelection",value:function clearSelection(){this.__dataLinkedPaths={};this.__selectedMap=new Map;this.selected=this.multi?[]:null;this.selectedItem=null}},{key:"isSelected",value:function isSelected(item){return this.__selectedMap.has(item)}},{key:"isIndexSelected",value:function isIndexSelected(idx){return this.isSelected(this.items[idx])}},{key:"__deselectChangedIdx",value:function __deselectChangedIdx(idx){var _this4=this,sidx=this.__selectedIndexForItemIndex(idx);if(0<=sidx){var i=0;this.__selectedMap.forEach(function(idx,item){if(sidx==i++){_this4.deselect(item)}})}}},{key:"__selectedIndexForItemIndex",value:function __selectedIndexForItemIndex(idx){var selected=this.__dataLinkedPaths["items."+idx];if(selected){return parseInt(selected.slice("selected.".length),10)}}},{key:"deselect",value:function deselect(item){var idx=this.__selectedMap.get(item);if(0<=idx){this.__selectedMap.delete(item);var sidx;if(this.multi){sidx=this.__selectedIndexForItemIndex(idx)}this.__updateLinks();if(this.multi){this.splice("selected",sidx,1)}else{this.selected=this.selectedItem=null}}}},{key:"deselectIndex",value:function deselectIndex(idx){this.deselect(this.items[idx])}},{key:"select",value:function select(item){this.selectIndex(this.items.indexOf(item))}},{key:"selectIndex",value:function selectIndex(idx){var item=this.items[idx];if(!this.isSelected(item)){if(!this.multi){this.__selectedMap.clear()}this.__selectedMap.set(item,idx);this.__updateLinks();if(this.multi){this.push("selected",item)}else{this.selected=this.selectedItem=item}}else if(this.toggle){this.deselectIndex(idx)}}}]);return ArraySelectorMixin}(elementBase);return ArraySelectorMixin});Polymer.ArraySelectorMixin=ArraySelectorMixin;var baseArraySelector=ArraySelectorMixin(Polymer.Element),ArraySelector=function(_baseArraySelector){babelHelpers.inherits(ArraySelector,_baseArraySelector);function ArraySelector(){babelHelpers.classCallCheck(this,ArraySelector);return babelHelpers.possibleConstructorReturn(this,(ArraySelector.__proto__||Object.getPrototypeOf(ArraySelector)).apply(this,arguments))}babelHelpers.createClass(ArraySelector,null,[{key:"is",get:function get(){return"array-selector"}}]);return ArraySelector}(baseArraySelector);customElements.define(ArraySelector.is,ArraySelector);Polymer.ArraySelector=ArraySelector})();</script><script>(function(){"use strict";var c=!(window.ShadyDOM&&window.ShadyDOM.inUse),f;function g(a){f=a&&a.shimcssproperties?!1:c||!(navigator.userAgent.match(/AppleWebKit\/601|Edge\/15/)||!window.CSS||!CSS.supports||!CSS.supports("box-shadow","0 0 0 var(--foo)"))}window.ShadyCSS&&void 0!==window.ShadyCSS.nativeCss?f=window.ShadyCSS.nativeCss:window.ShadyCSS?(g(window.ShadyCSS),window.ShadyCSS=void 0):g(window.WebComponents&&window.WebComponents.flags);var h=f;function k(a,b){for(var d in b){null===d?a.style.removeProperty(d):a.style.setProperty(d,b[d])}}var l=null,m=window.HTMLImports&&window.HTMLImports.whenReady||null,n;function p(a){requestAnimationFrame(function(){m?m(a):(l||(l=new Promise(function(a){n=a}),"complete"===document.readyState?n():document.addEventListener("readystatechange",function(){"complete"===document.readyState&&n()})),l.then(function(){a&&a()}))})}var q=null,r=null;function t(){this.customStyles=[];this.enqueued=!1;p(function(){window.ShadyCSS.flushCustomStyles&&window.ShadyCSS.flushCustomStyles()})}function u(a){!a.enqueued&&r&&(a.enqueued=!0,p(r))}t.prototype.c=function(a){a.__seenByShadyCSS||(a.__seenByShadyCSS=!0,this.customStyles.push(a),u(this))};t.prototype.b=function(a){if(a.__shadyCSSCachedStyle)return a.__shadyCSSCachedStyle;var b;a.getStyle?b=a.getStyle():b=a;return b};t.prototype.a=function(){for(var a=this.customStyles,b=0,d;b<a.length;b++){d=a[b];if(!d.__shadyCSSCachedStyle){var e=this.b(d);e&&(e=e.__appliedElement||e,q&&q(e),d.__shadyCSSCachedStyle=e)}}return a};t.prototype.addCustomStyle=t.prototype.c;t.prototype.getStyleForCustomStyle=t.prototype.b;t.prototype.processStyles=t.prototype.a;Object.defineProperties(t.prototype,{transformCallback:{get:function get(){return q},set:function set(a){q=a}},validateCallback:{get:function get(){return r},set:function set(a){var b=!1;r||(b=!0);r=a;b&&u(this)}}});var v=new t;window.ShadyCSS||(window.ShadyCSS={prepareTemplate:function prepareTemplate(){},styleSubtree:function styleSubtree(a,b){v.a();k(a,b)},styleElement:function styleElement(){v.a()},styleDocument:function styleDocument(a){v.a();k(document.body,a)},getComputedStyleValue:function getComputedStyleValue(a,b){return(a=window.getComputedStyle(a).getPropertyValue(b))?a.trim():""},flushCustomStyles:function flushCustomStyles(){},nativeCss:h,nativeShadow:c});window.ShadyCSS.CustomStyleInterface=v}).call(this);</script><script>(function(){"use strict";var attr="include",CustomStyleInterface=window.ShadyCSS.CustomStyleInterface,CustomStyle=function(_HTMLElement){babelHelpers.inherits(CustomStyle,_HTMLElement);function CustomStyle(){var _this;babelHelpers.classCallCheck(this,CustomStyle);_this=babelHelpers.possibleConstructorReturn(this,(CustomStyle.__proto__||Object.getPrototypeOf(CustomStyle)).call(this));_this._style=null;CustomStyleInterface.addCustomStyle(babelHelpers.assertThisInitialized(_this));return _this}babelHelpers.createClass(CustomStyle,[{key:"getStyle",value:function getStyle(){if(this._style){return this._style}var style=this.querySelector("style");if(!style){return null}this._style=style;var include=style.getAttribute(attr);if(include){style.removeAttribute(attr);style.textContent=Polymer.StyleGather.cssFromModules(include)+style.textContent}if(this.ownerDocument!==window.document){window.document.head.appendChild(this)}return this._style}}]);return CustomStyle}(HTMLElement);window.customElements.define("custom-style",CustomStyle);Polymer.CustomStyle=CustomStyle})();</script><script>(function(){"use strict";var mutablePropertyChange;(function(){mutablePropertyChange=Polymer.MutableData._mutablePropertyChange})();Polymer.MutableDataBehavior={_shouldPropertyChange:function _shouldPropertyChange(property,value,old){return mutablePropertyChange(this,property,value,old,!0)}};Polymer.OptionalMutableDataBehavior={properties:{mutableData:Boolean},_shouldPropertyChange:function _shouldPropertyChange(property,value,old){return mutablePropertyChange(this,property,value,old,this.mutableData)}}})();</script><script>Polymer.Base=Polymer.LegacyElementMixin(HTMLElement).prototype;Polymer.html=Polymer.html;</script><script>(function(){"use strict";var workingURL,urlDoc,urlBase,anchor;function resolveURL(path,base){var url;if(workingURL===void 0){workingURL=!1;try{var u=new URL("b","http://a");u.pathname="c%20d";workingURL="http://a/c%20d"===u.href;workingURL=workingURL&&"http://www.google.com/?foo%20bar"===new URL("http://www.google.com/?foo bar").href}catch(e){}}if(workingURL){url=new URL(path,base)}else{if(!urlDoc){urlDoc=document.implementation.createHTMLDocument("url");urlBase=urlDoc.createElement("base");urlDoc.head.appendChild(urlBase);anchor=urlDoc.createElement("a")}urlBase.href=base;anchor.href=path.replace(/ /g,"%20");url=anchor}return url}Polymer({is:"iron-location",properties:{path:{type:String,notify:!0,value:function value(){return window.decodeURIComponent(window.location.pathname)}},query:{type:String,notify:!0,value:function value(){return window.location.search.slice(1)}},hash:{type:String,notify:!0,value:function value(){return window.decodeURIComponent(window.location.hash.slice(1))}},dwellTime:{type:Number,value:2e3},urlSpaceRegex:{type:String,value:""},_urlSpaceRegExp:{computed:"_makeRegExp(urlSpaceRegex)"},_lastChangedAt:{type:Number},_initialized:{type:Boolean,value:!1}},hostAttributes:{hidden:!0},observers:["_updateUrl(path, query, hash)"],attached:function attached(){this.listen(window,"hashchange","_hashChanged");this.listen(window,"location-changed","_urlChanged");this.listen(window,"popstate","_urlChanged");this.listen(document.body,"click","_globalOnClick");this._lastChangedAt=window.performance.now()-(this.dwellTime-200);this._initialized=!0;this._urlChanged()},detached:function detached(){this.unlisten(window,"hashchange","_hashChanged");this.unlisten(window,"location-changed","_urlChanged");this.unlisten(window,"popstate","_urlChanged");this.unlisten(document.body,"click","_globalOnClick");this._initialized=!1},_hashChanged:function _hashChanged(){this.hash=window.decodeURIComponent(window.location.hash.substring(1))},_urlChanged:function _urlChanged(){this._dontUpdateUrl=!0;this._hashChanged();this.path=window.decodeURIComponent(window.location.pathname);this.query=window.location.search.substring(1);this._dontUpdateUrl=!1;this._updateUrl()},_getUrl:function _getUrl(){var partiallyEncodedPath=window.encodeURI(this.path).replace(/\#/g,"%23").replace(/\?/g,"%3F"),partiallyEncodedQuery="";if(this.query){partiallyEncodedQuery="?"+this.query.replace(/\#/g,"%23")}var partiallyEncodedHash="";if(this.hash){partiallyEncodedHash="#"+window.encodeURI(this.hash)}return partiallyEncodedPath+partiallyEncodedQuery+partiallyEncodedHash},_updateUrl:function _updateUrl(){if(this._dontUpdateUrl||!this._initialized){return}if(this.path===window.decodeURIComponent(window.location.pathname)&&this.query===window.location.search.substring(1)&&this.hash===window.decodeURIComponent(window.location.hash.substring(1))){return}var newUrl=this._getUrl(),fullNewUrl=resolveURL(newUrl,window.location.protocol+"//"+window.location.host).href,now=window.performance.now(),shouldReplace=this._lastChangedAt+this.dwellTime>now;this._lastChangedAt=now;if(shouldReplace){window.history.replaceState({},"",fullNewUrl)}else{window.history.pushState({},"",fullNewUrl)}this.fire("location-changed",{},{node:window})},_globalOnClick:function _globalOnClick(event){if(event.defaultPrevented){return}var href=this._getSameOriginLinkHref(event);if(!href){return}event.preventDefault();if(href===window.location.href){return}window.history.pushState({},"",href);this.fire("location-changed",{},{node:window})},_getSameOriginLinkHref:function _getSameOriginLinkHref(event){if(0!==event.button){return null}if(event.metaKey||event.ctrlKey){return null}for(var eventPath=Polymer.dom(event).path,anchor=null,i=0,element;i<eventPath.length;i++){element=eventPath[i];if("A"===element.tagName&&element.href){anchor=element;break}}if(!anchor){return null}if("_blank"===anchor.target){return null}if(("_top"===anchor.target||"_parent"===anchor.target)&&window.top!==window){return null}var href=anchor.href,url;if(null!=document.baseURI){url=resolveURL(href,document.baseURI)}else{url=resolveURL(href)}var origin;if(window.location.origin){origin=window.location.origin}else{origin=window.location.protocol+"//"+window.location.host}var urlOrigin;if(url.origin){urlOrigin=url.origin}else{urlOrigin=url.protocol+"//"+url.host}if(urlOrigin!==origin){return null}var normalizedHref=url.pathname+url.search+url.hash;if("/"!==normalizedHref[0]){normalizedHref="/"+normalizedHref}if(this._urlSpaceRegExp&&!this._urlSpaceRegExp.test(normalizedHref)){return null}var fullNormalizedHref=resolveURL(normalizedHref,window.location.href).href;return fullNormalizedHref},_makeRegExp:function _makeRegExp(urlSpaceRegex){return RegExp(urlSpaceRegex)}})})();</script><script>"use strict";Polymer({is:"iron-query-params",properties:{paramsString:{type:String,notify:!0,observer:"paramsStringChanged"},paramsObject:{type:Object,notify:!0,value:function value(){return{}}},_dontReact:{type:Boolean,value:!1}},hostAttributes:{hidden:!0},observers:["paramsObjectChanged(paramsObject.*)"],paramsStringChanged:function paramsStringChanged(){this._dontReact=!0;this.paramsObject=this._decodeParams(this.paramsString);this._dontReact=!1},paramsObjectChanged:function paramsObjectChanged(){if(this._dontReact){return}this.paramsString=this._encodeParams(this.paramsObject).replace(/%3F/g,"?").replace(/%2F/g,"/").replace(/'/g,"%27")},_encodeParams:function _encodeParams(params){var encodedParams=[];for(var key in params){var value=params[key];if(""===value){encodedParams.push(encodeURIComponent(key))}else if(value){encodedParams.push(encodeURIComponent(key)+"="+encodeURIComponent(value.toString()))}}return encodedParams.join("&")},_decodeParams:function _decodeParams(paramString){var params={};paramString=(paramString||"").replace(/\+/g,"%20");for(var paramList=paramString.split("&"),i=0,param;i<paramList.length;i++){param=paramList[i].split("=");if(param[0]){params[decodeURIComponent(param[0])]=decodeURIComponent(param[1]||"")}}return params}});</script><script>(function(){"use strict";Polymer.AppRouteConverterBehavior={properties:{route:{type:Object,notify:!0},queryParams:{type:Object,notify:!0},path:{type:String,notify:!0}},observers:["_locationChanged(path, queryParams)","_routeChanged(route.prefix, route.path)","_routeQueryParamsChanged(route.__queryParams)"],created:function created(){this.linkPaths("route.__queryParams","queryParams");this.linkPaths("queryParams","route.__queryParams")},_locationChanged:function _locationChanged(){if(this.route&&this.route.path===this.path&&this.queryParams===this.route.__queryParams){return}this.route={prefix:"",path:this.path,__queryParams:this.queryParams}},_routeChanged:function _routeChanged(){if(!this.route){return}this.path=this.route.prefix+this.route.path},_routeQueryParamsChanged:function _routeQueryParamsChanged(queryParams){if(!this.route){return}this.queryParams=queryParams}}})();</script><dom-module id="app-location" assetpath="../bower_components/app-route/"><template><iron-location path="{{__path}}" query="{{__query}}" hash="{{__hash}}" url-space-regex="{{urlSpaceRegex}}"></iron-location><iron-query-params params-string="{{__query}}" params-object="{{queryParams}}"></iron-query-params></template><script>(function(){"use strict";Polymer({is:"app-location",properties:{route:{type:Object,notify:!0},useHashAsPath:{type:Boolean,value:!1},urlSpaceRegex:{type:String,notify:!0},__queryParams:{type:Object},__path:{type:String},__query:{type:String},__hash:{type:String},path:{type:String,observer:"__onPathChanged"},_isReady:{type:Boolean}},behaviors:[Polymer.AppRouteConverterBehavior],observers:["__computeRoutePath(useHashAsPath, __hash, __path)"],ready:function ready(){this._isReady=!0},__computeRoutePath:function __computeRoutePath(){this.path=this.useHashAsPath?this.__hash:this.__path},__onPathChanged:function __onPathChanged(){if(!this._isReady){return}if(this.useHashAsPath){this.__hash=this.path}else{this.__path=this.path}}})})();</script></dom-module><script>(function(){"use strict";Polymer({is:"app-route",properties:{route:{type:Object,notify:!0},pattern:{type:String},data:{type:Object,value:function value(){return{}},notify:!0},queryParams:{type:Object,value:function value(){return{}},notify:!0},tail:{type:Object,value:function value(){return{path:null,prefix:null,__queryParams:null}},notify:!0},active:{type:Boolean,notify:!0,readOnly:!0},_queryParamsUpdating:{type:Boolean,value:!1},_matched:{type:String,value:""}},observers:["__tryToMatch(route.path, pattern)","__updatePathOnDataChange(data.*)","__tailPathChanged(tail.path)","__routeQueryParamsChanged(route.__queryParams)","__tailQueryParamsChanged(tail.__queryParams)","__queryParamsChanged(queryParams.*)"],created:function created(){this.linkPaths("route.__queryParams","tail.__queryParams");this.linkPaths("tail.__queryParams","route.__queryParams")},__routeQueryParamsChanged:function __routeQueryParamsChanged(queryParams){if(queryParams&&this.tail){if(this.tail.__queryParams!==queryParams){this.set("tail.__queryParams",queryParams)}if(!this.active||this._queryParamsUpdating){return}var copyOfQueryParams={},anythingChanged=!1;for(var key in queryParams){copyOfQueryParams[key]=queryParams[key];if(anythingChanged||!this.queryParams||queryParams[key]!==this.queryParams[key]){anythingChanged=!0}}for(var key in this.queryParams){if(anythingChanged||!(key in queryParams)){anythingChanged=!0;break}}if(!anythingChanged){return}this._queryParamsUpdating=!0;this.set("queryParams",copyOfQueryParams);this._queryParamsUpdating=!1}},__tailQueryParamsChanged:function __tailQueryParamsChanged(queryParams){if(queryParams&&this.route&&this.route.__queryParams!=queryParams){this.set("route.__queryParams",queryParams)}},__queryParamsChanged:function __queryParamsChanged(changes){if(!this.active||this._queryParamsUpdating){return}this.set("route.__"+changes.path,changes.value)},__resetProperties:function __resetProperties(){this._setActive(!1);this._matched=null},__tryToMatch:function __tryToMatch(){if(!this.route){return}var path=this.route.path,pattern=this.pattern;if(!pattern){return}if(!path){this.__resetProperties();return}for(var remainingPieces=path.split("/"),patternPieces=pattern.split("/"),matched=[],namedMatches={},i=0,patternPiece;i<patternPieces.length;i++){patternPiece=patternPieces[i];if(!patternPiece&&""!==patternPiece){break}var pathPiece=remainingPieces.shift();if(!pathPiece&&""!==pathPiece){this.__resetProperties();return}matched.push(pathPiece);if(":"==patternPiece.charAt(0)){namedMatches[patternPiece.slice(1)]=pathPiece}else if(patternPiece!==pathPiece){this.__resetProperties();return}}this._matched=matched.join("/");var propertyUpdates={};if(!this.active){propertyUpdates.active=!0}var tailPrefix=this.route.prefix+this._matched,tailPath=remainingPieces.join("/");if(0<remainingPieces.length){tailPath="/"+tailPath}if(!this.tail||this.tail.prefix!==tailPrefix||this.tail.path!==tailPath){propertyUpdates.tail={prefix:tailPrefix,path:tailPath,__queryParams:this.route.__queryParams}}propertyUpdates.data=namedMatches;this._dataInUrl={};for(var key in namedMatches){this._dataInUrl[key]=namedMatches[key]}if(this.setProperties){if(!this.active){this._setActive(!0)}this.setProperties(propertyUpdates)}else{this.__setMulti(propertyUpdates)}},__tailPathChanged:function __tailPathChanged(path){if(!this.active){return}var tailPath=path,newPath=this._matched;if(tailPath){if("/"!==tailPath.charAt(0)){tailPath="/"+tailPath}newPath+=tailPath}this.set("route.path",newPath)},__updatePathOnDataChange:function __updatePathOnDataChange(){if(!this.route||!this.active){return}var newPath=this.__getLink({}),oldPath=this.__getLink(this._dataInUrl);if(newPath===oldPath){return}this.set("route.path",newPath)},__getLink:function __getLink(overrideValues){var values={tail:null};for(var key in this.data){values[key]=this.data[key]}for(var key in overrideValues){values[key]=overrideValues[key]}var patternPieces=this.pattern.split("/"),interp=patternPieces.map(function(value){if(":"==value[0]){value=values[value.slice(1)]}return value},this);if(values.tail&&values.tail.path){if(0<interp.length&&"/"===values.tail.path.charAt(0)){interp.push(values.tail.path.slice(1))}else{interp.push(values.tail.path)}}return interp.join("/")},__setMulti:function __setMulti(setObj){for(var property in setObj){this._propertySetter(property,setObj[property])}if(setObj.data!==void 0){this._pathEffector("data",this.data);this._notifyChange("data")}if(setObj.active!==void 0){this._pathEffector("active",this.active);this._notifyChange("active")}if(setObj.tail!==void 0){this._pathEffector("tail",this.tail);this._notifyChange("tail")}}})})();</script><script>Polymer.IronResizableBehavior={properties:{_parentResizable:{type:Object,observer:"_parentResizableChanged"},_notifyingDescendant:{type:Boolean,value:!1}},listeners:{"iron-request-resize-notifications":"_onIronRequestResizeNotifications"},created:function created(){this._interestedResizables=[];this._boundNotifyResize=this.notifyResize.bind(this)},attached:function attached(){this._requestResizeNotifications()},detached:function detached(){if(this._parentResizable){this._parentResizable.stopResizeNotificationsFor(this)}else{window.removeEventListener("resize",this._boundNotifyResize)}this._parentResizable=null},notifyResize:function notifyResize(){if(!this.isAttached){return}this._interestedResizables.forEach(function(resizable){if(this.resizerShouldNotify(resizable)){this._notifyDescendant(resizable)}},this);this._fireResize()},assignParentResizable:function assignParentResizable(parentResizable){this._parentResizable=parentResizable},stopResizeNotificationsFor:function stopResizeNotificationsFor(target){var index=this._interestedResizables.indexOf(target);if(-1<index){this._interestedResizables.splice(index,1);this.unlisten(target,"iron-resize","_onDescendantIronResize")}},resizerShouldNotify:function resizerShouldNotify(){return!0},_onDescendantIronResize:function _onDescendantIronResize(event){if(this._notifyingDescendant){event.stopPropagation();return}if(!Polymer.Settings.useShadow){this._fireResize()}},_fireResize:function _fireResize(){this.fire("iron-resize",null,{node:this,bubbles:!1})},_onIronRequestResizeNotifications:function _onIronRequestResizeNotifications(event){var target=Polymer.dom(event).rootTarget;if(target===this){return}if(-1===this._interestedResizables.indexOf(target)){this._interestedResizables.push(target);this.listen(target,"iron-resize","_onDescendantIronResize")}target.assignParentResizable(this);this._notifyDescendant(target);event.stopPropagation()},_parentResizableChanged:function _parentResizableChanged(parentResizable){if(parentResizable){window.removeEventListener("resize",this._boundNotifyResize)}},_notifyDescendant:function _notifyDescendant(descendant){if(!this.isAttached){return}this._notifyingDescendant=!0;descendant.notifyResize();this._notifyingDescendant=!1},_requestResizeNotifications:function(){if(!this.isAttached)return;if("loading"===document.readyState){var _requestResizeNotifications=this._requestResizeNotifications.bind(this);document.addEventListener("readystatechange",function readystatechanged(){document.removeEventListener("readystatechange",readystatechanged);_requestResizeNotifications()})}else{this.fire("iron-request-resize-notifications",null,{node:this,bubbles:!0,cancelable:!0});if(!this._parentResizable){window.addEventListener("resize",this._boundNotifyResize);this.notifyResize()}}}};</script><script>Polymer.IronSelection=function(selectCallback){this.selection=[];this.selectCallback=selectCallback};Polymer.IronSelection.prototype={get:function get(){return this.multi?this.selection.slice():this.selection[0]},clear:function clear(excludes){this.selection.slice().forEach(function(item){if(!excludes||0>excludes.indexOf(item)){this.setItemSelected(item,!1)}},this)},isSelected:function isSelected(item){return 0<=this.selection.indexOf(item)},setItemSelected:function setItemSelected(item,isSelected){if(null!=item){if(isSelected!==this.isSelected(item)){if(isSelected){this.selection.push(item)}else{var i=this.selection.indexOf(item);if(0<=i){this.selection.splice(i,1)}}if(this.selectCallback){this.selectCallback(item,isSelected)}}}},select:function select(item){if(this.multi){this.toggle(item)}else if(this.get()!==item){this.setItemSelected(this.get(),!1);this.setItemSelected(item,!0)}},toggle:function toggle(item){this.setItemSelected(item,!this.isSelected(item))}};</script><script>Polymer.IronSelectableBehavior={properties:{attrForSelected:{type:String,value:null},selected:{type:String,notify:!0},selectedItem:{type:Object,readOnly:!0,notify:!0},activateEvent:{type:String,value:"tap",observer:"_activateEventChanged"},selectable:String,selectedClass:{type:String,value:"iron-selected"},selectedAttribute:{type:String,value:null},fallbackSelection:{type:String,value:null},items:{type:Array,readOnly:!0,notify:!0,value:function value(){return[]}},_excludedLocalNames:{type:Object,value:function value(){return{template:1,"dom-bind":1,"dom-if":1,"dom-repeat":1}}}},observers:["_updateAttrForSelected(attrForSelected)","_updateSelected(selected)","_checkFallback(fallbackSelection)"],created:function created(){this._bindFilterItem=this._filterItem.bind(this);this._selection=new Polymer.IronSelection(this._applySelection.bind(this))},attached:function attached(){this._observer=this._observeItems(this);this._addListener(this.activateEvent)},detached:function detached(){if(this._observer){Polymer.dom(this).unobserveNodes(this._observer)}this._removeListener(this.activateEvent)},indexOf:function indexOf(item){return this.items?this.items.indexOf(item):-1},select:function select(value){this.selected=value},selectPrevious:function selectPrevious(){var length=this.items.length,index=(+this._valueToIndex(this.selected)-1+length)%length;this.selected=this._indexToValue(index)},selectNext:function selectNext(){var index=(+this._valueToIndex(this.selected)+1)%this.items.length;this.selected=this._indexToValue(index)},selectIndex:function selectIndex(index){this.select(this._indexToValue(index))},forceSynchronousItemUpdate:function forceSynchronousItemUpdate(){if(this._observer&&"function"===typeof this._observer.flush){this._observer.flush()}else{this._updateItems()}},get _shouldUpdateSelection(){return null!=this.selected},_checkFallback:function _checkFallback(){this._updateSelected()},_addListener:function _addListener(eventName){this.listen(this,eventName,"_activateHandler")},_removeListener:function _removeListener(eventName){this.unlisten(this,eventName,"_activateHandler")},_activateEventChanged:function _activateEventChanged(eventName,old){this._removeListener(old);this._addListener(eventName)},_updateItems:function _updateItems(){var nodes=Polymer.dom(this).queryDistributedElements(this.selectable||"*");nodes=Array.prototype.filter.call(nodes,this._bindFilterItem);this._setItems(nodes)},_updateAttrForSelected:function _updateAttrForSelected(){if(this.selectedItem){this.selected=this._valueForItem(this.selectedItem)}},_updateSelected:function _updateSelected(){this._selectSelected(this.selected)},_selectSelected:function _selectSelected(){if(!this.items){return}var item=this._valueToItem(this.selected);if(item){this._selection.select(item)}else{this._selection.clear()}if(this.fallbackSelection&&this.items.length&&this._selection.get()===void 0){this.selected=this.fallbackSelection}},_filterItem:function _filterItem(node){return!this._excludedLocalNames[node.localName]},_valueToItem:function _valueToItem(value){return null==value?null:this.items[this._valueToIndex(value)]},_valueToIndex:function _valueToIndex(value){if(this.attrForSelected){for(var i=0,item;item=this.items[i];i++){if(this._valueForItem(item)==value){return i}}}else{return+value}},_indexToValue:function _indexToValue(index){if(this.attrForSelected){var item=this.items[index];if(item){return this._valueForItem(item)}}else{return index}},_valueForItem:function _valueForItem(item){if(!item){return null}if(!this.attrForSelected){var i=this.indexOf(item);return-1===i?null:i}var propValue=item[Polymer.CaseMap.dashToCamelCase(this.attrForSelected)];return propValue!=void 0?propValue:item.getAttribute(this.attrForSelected)},_applySelection:function _applySelection(item,isSelected){if(this.selectedClass){this.toggleClass(this.selectedClass,isSelected,item)}if(this.selectedAttribute){this.toggleAttribute(this.selectedAttribute,isSelected,item)}this._selectionChange();this.fire("iron-"+(isSelected?"select":"deselect"),{item:item})},_selectionChange:function _selectionChange(){this._setSelectedItem(this._selection.get())},_observeItems:function _observeItems(node){return Polymer.dom(node).observeNodes(function(mutation){this._updateItems();this._updateSelected();this.fire("iron-items-changed",mutation,{bubbles:!1,cancelable:!1})})},_activateHandler:function _activateHandler(e){var t=e.target,items=this.items;while(t&&t!=this){var i=items.indexOf(t);if(0<=i){var value=this._indexToValue(i);this._itemActivate(value,t);return}t=t.parentNode}},_itemActivate:function _itemActivate(value,item){if(!this.fire("iron-activate",{selected:value,item:item},{cancelable:!0}).defaultPrevented){this.select(value)}}};</script><dom-module id="iron-pages" assetpath="../bower_components/iron-pages/"><template><style>:host {
        display: block;
      }

      :host > ::slotted(:not(.iron-selected)) {
        display: none !important;
      }</style><slot></slot></template><script>Polymer({is:"iron-pages",behaviors:[Polymer.IronResizableBehavior,Polymer.IronSelectableBehavior],properties:{activateEvent:{type:String,value:null}},observers:["_selectedPageChanged(selected)"],_selectedPageChanged:function _selectedPageChanged(){this.async(this.notifyResize)}});</script></dom-module><script>var firebase=function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=11)}([function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r;if(void 0!==e)r=e;else if("undefined"!=typeof self)r=self;else try{r=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var i=r.Promise||n(8);t.local={Promise:i,GoogPromise:i}}).call(t,n(1))},function(e){var n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==("undefined"===typeof window?"undefined":babelHelpers.typeof(window))&&(n=window)}e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),i=(0,r.createFirebaseNamespace)();t.default=i,e.exports=t.default},function(e,t){"use strict";function i(e,t){if(!babelHelpers.instanceof(t,Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t;}for(var n in t){t.hasOwnProperty(n)&&(e[n]=i(e[n],t[n]))}return e}Object.defineProperty(t,"__esModule",{value:!0}),t.deepCopy=function(e){return i(void 0,e)},t.deepExtend=i,t.patchProperty=function(e,t,n){e[t]=n}},function(e,t){"use strict";function r(e,t){if(!babelHelpers.instanceof(e,t))throw new TypeError("Cannot call a class as a function")}function i(e){var t=a;return a=e,t}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0,r;n<t.length;n++){r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.patchCapture=i;var a=Error.captureStackTrace,c=function e(t,n){if(r(this,e),this.code=t,this.message=n,a)a(this,s.prototype.create);else{var i=Error.apply(this,arguments);this.name="FirebaseError",Object.defineProperty(this,"stack",{get:function get(){return i.stack}})}};c.prototype=Object.create(Error.prototype),c.prototype.constructor=c,c.prototype.name="FirebaseError";var s=t.ErrorFactory=function(){function e(t,n,i){r(this,e),this.service=t,this.serviceName=n,this.errors=i,this.pattern=/\{\$([^}]+)}/g}return o(e,[{key:"create",value:function value(e,t){void 0===t&&(t={});var n=this.errors[e],r=this.service+"/"+e,i;i=void 0===n?"Error":n.replace(this.pattern,function(e,n){var r=t[n];return void 0!==r?r.toString():"<"+n+"?>"}),i=this.serviceName+": "+i+" ("+r+").";var o=new c(r,i);for(var a in t){t.hasOwnProperty(a)&&"_"!==a.slice(-1)&&(o[a]=t[a])}return o}}]),e}()},function(e,t,n){"use strict";function r(e,t){if(!babelHelpers.instanceof(e,t))throw new TypeError("Cannot call a class as a function")}function i(){function e(e){e=e||d;var t=r[e];return void 0===t&&o("no-app",{name:e}),t}function t(e,t){Object.keys(a).forEach(function(r){var i=n(e,r);null!==i&&h[i]&&h[i](t,e)})}function n(e,t){if("serverAuth"===t)return null;var n=t,r=e.options;return"auth"===t&&(r.serviceAccount||r.credential)&&(n="serverAuth","serverAuth"in a||o("sa-not-supported")),n}var r={},a={},h={},v={__esModule:!0,initializeApp:function initializeApp(e,n){void 0===n?n=d:"string"==typeof n&&""!==n||o("bad-app-name",{name:n+""}),void 0!==r[n]&&o("duplicate-app",{name:n});var i=new p(e,n,v);return r[n]=i,t(i,"create"),void 0!=i.INTERNAL&&void 0!=i.INTERNAL.getToken||(0,c.deepExtend)(i,{INTERNAL:{getUid:function getUid(){return null},getToken:function getToken(){return l.resolve(null)},addAuthTokenListener:function addAuthTokenListener(){},removeAuthTokenListener:function removeAuthTokenListener(){}}}),i},app:e,apps:null,Promise:l,SDK_VERSION:"3.9.0",INTERNAL:{registerService:function registerService(t,n,r,i,s){a[t]&&o("duplicate-service",{name:t}),a[t]=s?n:function(e,t){return n(e,t,d)},i&&(h[t]=i);var u;return u=function(n){return void 0===n&&(n=e()),"function"!=typeof n[t]&&o("invalid-app-argument",{name:t}),n[t]()},void 0!==r&&(0,c.deepExtend)(u,r),v[t]=u,u},createFirebaseNamespace:i,extendNamespace:function extendNamespace(e){(0,c.deepExtend)(v,e)},createSubscribe:s.createSubscribe,ErrorFactory:u.ErrorFactory,removeApp:function removeApp(e){t(r[e],"delete"),delete r[e]},factories:a,useAsService:n,Promise:f.local.GoogPromise,deepExtend:c.deepExtend}};return(0,c.patchProperty)(v,"default",v),Object.defineProperty(v,"apps",{get:function get(){return Object.keys(r).map(function(e){return r[e]})}}),(0,c.patchProperty)(e,"App",p),v}function o(e,t){throw v.create(e,t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0,r;n<t.length;n++){r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.createFirebaseNamespace=i;var c=n(3),s=n(6),u=n(4),f=n(0),l=f.local.Promise,d="[DEFAULT]",p=function(){function e(t,n,i){var o=this;r(this,e),this.firebase_=i,this.isDeleted_=!1,this.services_={},this.name_=n,this.options_=(0,c.deepCopy)(t);var a="credential"in this.options_,s="serviceAccount"in this.options_;if(a||s){var u=s?"serviceAccount":"credential";"undefined"!=typeof console&&console.log("The '"+u+"' property specified in the first argument to initializeApp() is deprecated and will be removed in the next major version. You should instead use the 'firebase-admin' package. See https://firebase.google.com/docs/admin/setup for details on how to get started.")}Object.keys(i.INTERNAL.factories).forEach(function(e){var t=i.INTERNAL.useAsService(o,e);if(null!==t){var n=o.getService.bind(o,t);(0,c.patchProperty)(o,e,n)}})}return a(e,[{key:"delete",value:function value(){var e=this;return new l(function(t){e.checkDestroyed_(),t()}).then(function(){e.firebase_.INTERNAL.removeApp(e.name_);var t=[];return Object.keys(e.services_).forEach(function(n){Object.keys(e.services_[n]).forEach(function(r){t.push(e.services_[n][r])})}),l.all(t.map(function(e){return e.INTERNAL.delete()}))}).then(function(){e.isDeleted_=!0,e.services_={}})}},{key:"getService",value:function value(e,t){this.checkDestroyed_(),void 0===this.services_[e]&&(this.services_[e]={});var n=t||d;if(void 0===this.services_[e][n]){var r=this.firebase_.INTERNAL.factories[e](this,this.extendApp.bind(this),t);return this.services_[e][n]=r,r}return this.services_[e][n]}},{key:"extendApp",value:function value(e){(0,c.deepExtend)(this,e)}},{key:"checkDestroyed_",value:function value(){this.isDeleted_&&o("app-deleted",{name:this.name_})}},{key:"name",get:function get(){return this.checkDestroyed_(),this.name_}},{key:"options",get:function get(){return this.checkDestroyed_(),this.options_}}]),e}();p.prototype.name&&p.prototype.options||p.prototype.delete||console.log("dc");var v=new u.ErrorFactory("app","Firebase",{"no-app":"No Firebase App '{$name}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$name}","duplicate-app":"Firebase App named '{$name}' already exists","app-deleted":"Firebase App named '{$name}' already deleted","duplicate-service":"Firebase service named '{$name}' already registered","sa-not-supported":"Initializing the Firebase SDK with a service account is only allowed in a Node.js environment. On client devices, you should instead initialize the SDK with an api key and auth domain","invalid-app-argument":"firebase.{$name}() takes either no argument or a Firebase App instance."})},function(e,t,n){"use strict";function r(e,t){if(!babelHelpers.instanceof(e,t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("object"!==(void 0===e?"undefined":s(e))||null===e)return!1;var n=!0,r=!1,i;try{for(var o,a=t[Symbol.iterator](),c;!(n=(o=a.next()).done);n=!0){c=o.value;if(c in e&&"function"==typeof e[c])return!0}}catch(e){r=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}return!1}function c(){}Object.defineProperty(t,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==babelHelpers.typeof(Symbol.iterator)?function(e){return babelHelpers.typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":babelHelpers.typeof(e)},u=function(){function e(e,t){for(var n=0,r;n<t.length;n++){r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.createSubscribe=function(e,t){var n=new d(e,t);return n.subscribe.bind(n)},t.async=function(e,t){return function(){for(var n=arguments.length,r=Array(n),i=0;i<n;i++){r[i]=arguments[i]}l.resolve(!0).then(function(){e.apply(void 0,r)}).catch(function(e){t&&t(e)})}};var f=n(0),l=f.local.Promise,d=function(){function e(t,n){var i=this;r(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=l.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(function(){t(i)}).catch(function(e){i.error(e)})}return u(e,[{key:"next",value:function value(e){this.forEachObserver(function(t){t.next(e)})}},{key:"error",value:function value(e){this.forEachObserver(function(t){t.error(e)}),this.close(e)}},{key:"complete",value:function value(){this.forEachObserver(function(e){e.complete()}),this.close()}},{key:"subscribe",value:function value(e,t,n){var r=this,i;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");i=a(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===i.next&&(i.next=c),void 0===i.error&&(i.error=c),void 0===i.complete&&(i.complete=c);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{r.finalError?i.error(r.finalError):i.complete()}catch(e){}}),this.observers.push(i),o}},{key:"unsubscribeOne",value:function value(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function value(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++){this.sendOne(t,e)}}},{key:"sendOne",value:function value(e,t){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}})}},{key:"close",value:function value(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(function(){t.observers=void 0,t.onNoObservers=void 0}))}}]),e}()},function(e){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(e){if(f===setTimeout)return setTimeout(e,0);if((f===n||!f)&&setTimeout)return f=setTimeout,setTimeout(e,0);try{return f(e,0)}catch(t){try{return f.call(null,e,0)}catch(t){return f.call(this,e,0)}}}function o(e){if(l===clearTimeout)return clearTimeout(e);if((l===r||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(e);try{return l(e)}catch(t){try{return l.call(null,e)}catch(t){return l.call(this,e)}}}function a(){v&&p&&(v=!1,p.length?h=p.concat(h):m=-1,h.length&&c())}function c(){if(!v){var e=i(a);v=!0;for(var t=h.length;t;){for(p=h,h=[];++m<t;){p&&p[m].run()}m=-1,t=h.length}p=null,v=!1,o(e)}}function s(e,t){this.fun=e,this.array=t}function u(){}var f,l,d=e.exports={};!function(){try{f="function"==typeof setTimeout?setTimeout:n}catch(e){f=n}try{l="function"==typeof clearTimeout?clearTimeout:r}catch(e){l=r}}();var p,h=[],v=!1,m=-1;d.nextTick=function(e){var t=Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++){t[n-1]=arguments[n]}h.push(new s(e,t)),1!==h.length||v||i(c)},s.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=u,d.addListener=u,d.once=u,d.off=u,d.removeListener=u,d.removeAllListeners=u,d.emit=u,d.binding=function(){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(e,t,n){(function(t){!function(n){function r(){}function i(e,t){return function(){e.apply(t,arguments)}}function o(e){if("object"!=babelHelpers.typeof(this))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],l(e,this)}function a(e,t){for(;3===e._state;){e=e._value}if(0===e._state)return void e._deferreds.push(t);e._handled=!0,o._immediateFn(function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null===n)return void(1===e._state?c:s)(t.promise,e._value);var r;try{r=n(e._value)}catch(e){return void s(t.promise,e)}c(t.promise,r)})}function c(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==babelHelpers.typeof(t)||"function"==typeof t)){var n=t.then;if(babelHelpers.instanceof(t,o))return e._state=3,e._value=t,void u(e);if("function"==typeof n)return void l(i(n,t),e)}e._state=1,e._value=t,u(e)}catch(t){s(e,t)}}function s(e,t){e._state=2,e._value=t,u(e)}function u(e){2===e._state&&0===e._deferreds.length&&o._immediateFn(function(){e._handled||o._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++){a(e,e._deferreds[t])}e._deferreds=null}function f(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function l(e,t){var n=!1;try{e(function(e){n||(n=!0,c(t,e))},function(e){n||(n=!0,s(t,e))})}catch(e){if(n)return;n=!0,s(t,e)}}var d=setTimeout;o.prototype.catch=function(e){return this.then(null,e)},o.prototype.then=function(e,t){var n=new this.constructor(r);return a(this,new f(e,t,n)),n},o.all=function(e){var t=Array.prototype.slice.call(e);return new o(function(e,n){function r(o,a){try{if(a&&("object"==babelHelpers.typeof(a)||"function"==typeof a)){var c=a.then;if("function"==typeof c)return void c.call(a,function(e){r(o,e)},n)}t[o]=a,0==--i&&e(t)}catch(e){n(e)}}if(0===t.length)return e([]);for(var i=t.length,o=0;o<t.length;o++){r(o,t[o])}})},o.resolve=function(e){return e&&"object"==babelHelpers.typeof(e)&&e.constructor===o?e:new o(function(t){t(e)})},o.reject=function(e){return new o(function(t,n){n(e)})},o.race=function(e){return new o(function(t,n){for(var r=0,i=e.length;r<i;r++){e[r].then(t,n)}})},o._immediateFn="function"==typeof t&&function(e){t(e)}||function(e){d(e,0)},o._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},o._setImmediateFn=function(e){o._immediateFn=e},o._setUnhandledRejectionFn=function(e){o._unhandledRejectionFn=e},void 0!==e&&e.exports?e.exports=o:n.Promise||(n.Promise=o)}(this)}).call(t,n(10).setImmediate)},function(e,t,n){(function(e,t){!function(e,n){"use strict";function r(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=Array(arguments.length-1),n=0;n<t.length;n++){t[n]=arguments[n+1]}var r={callback:e,args:t};return u[s]=r,c(s),s++}function i(e){delete u[e]}function o(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r);}}function a(e){if(f)setTimeout(a,0,e);else{var t=u[e];if(t){f=!0;try{o(t)}finally{i(e),f=!1}}}}if(!e.setImmediate){var c,s=1,u={},f=!1,l=e.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(e);d=d&&d.setTimeout?d:e,"[object process]"==={}.toString.call(e.process)?function(){c=function(e){t.nextTick(function(){a(e)})}}():function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(_n){_n.source===e&&"string"==typeof _n.data&&0===_n.data.indexOf(t)&&a(+_n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),c=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){a(e.data)},c=function(t){e.port2.postMessage(t)}}():l&&"onreadystatechange"in l.createElement("script")?function(){var e=l.documentElement;c=function(t){var n=l.createElement("script");n.onreadystatechange=function(){a(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():function(){c=function(e){setTimeout(a,0,e)}}(),d.setImmediate=r,d.clearImmediate=i}}("undefined"==typeof self?void 0===e?this:e:self)}).call(t,n(1),n(7))},function(e,t,n){function r(e,t){this._id=e,this._clearFn=t}var i=Function.prototype.apply;t.setTimeout=function(){return new r(i.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new r(i.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;0<=t&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(9),t.setImmediate=setImmediate,t.clearImmediate=clearImmediate},function(e,t,n){e.exports=n(2)}]);</script><script>(function(){var _Mathpow=Math.pow,_Mathmin=Math.min,_Mathfloor=Math.floor,_Mathlog=Math.log,_Mathmax=Math.max,g,aa=this;function n(a){return void 0!==a}function ba(){}function ca(a){a.Vb=function(){return a.Ye?a.Ye:a.Ye=new a}}function da(a){var b=babelHelpers.typeof(a);if("object"==b){if(a){if(babelHelpers.instanceof(a,Array))return"array";if(babelHelpers.instanceof(a,Object))return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";}else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function ea(a){return"array"==da(a)}function fa(a){var b=da(a);return"array"==b||"object"==b&&"number"==typeof a.length}function p(a){return"string"==typeof a}function ga(a){return"number"==typeof a}function ha(a){return"function"==da(a)}function ia(a){var b=babelHelpers.typeof(a);return"object"==b&&null!=a||"function"==b}function ja(a){return a.call.apply(a.bind,arguments)}function ka(a,b){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function q(){q=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ja:ka;return q.apply(null,arguments)}function la(a,b){function c(){}c.prototype=b.prototype;a.wg=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.sg=function(a,c){for(var h=Array(arguments.length-2),k=2;k<arguments.length;k++){h[k-2]=arguments[k]}return b.prototype[c].apply(a,h)}}function ma(a){a=a+"";if(/^\s*$/.test(a)?0:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+a+")")}catch(b){}throw Error("Invalid JSON string: "+a)}function na(){this.Fd=void 0}function oa(a,b,c){switch(babelHelpers.typeof(b)){case"string":pa(b,c);break;case"number":c.push(isFinite(b)&&!isNaN(b)?b:"null");break;case"boolean":c.push(b);break;case"undefined":c.push("null");break;case"object":if(null==b){c.push("null");break}if(ea(b)){var d=b.length;c.push("[");for(var e="",f=0;f<d;f++){c.push(e),e=b[f],oa(a,a.Fd?a.Fd.call(b,f+"",e):e,c),e=","}c.push("]");break}c.push("{");d="";for(f in b){Object.prototype.hasOwnProperty.call(b,f)&&(e=b[f],"function"!=typeof e&&(c.push(d),pa(f,c),c.push(":"),oa(a,a.Fd?a.Fd.call(b,f,e):e,c),d=","))}c.push("}");break;case"function":break;default:throw Error("Unknown type: "+babelHelpers.typeof(b));}}var qa={'"':"\\\"","\\":"\\\\","/":"\\/","":"\\b","":"\\f","\n":"\\n","\r":"\\r","	":"\\t","":"\\u000b"},ra=/\uffff/.test("\uFFFF")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g;function pa(a,b){b.push("\"",a.replace(ra,function(a){if(a in qa)return qa[a];var b=a.charCodeAt(0),e="\\u";16>b?e+="000":256>b?e+="00":4096>b&&(e+="0");return qa[a]=e+b.toString(16)}),"\"")}function sa(){this.Wa=-1}function ta(){this.Wa=-1;this.Wa=64;this.M=[];this.Wd=[];this.Af=[];this.zd=[];this.zd[0]=128;for(var a=1;a<this.Wa;++a){this.zd[a]=0}this.Pd=this.$b=0;this.reset()}la(ta,sa);ta.prototype.reset=function(){this.M[0]=1732584193;this.M[1]=4023233417;this.M[2]=2562383102;this.M[3]=271733878;this.M[4]=3285377520;this.Pd=this.$b=0};function ua(a,b,c){c||(c=0);var d=a.Af;if(p(b))for(var e=0;16>e;e++){d[e]=b.charCodeAt(c)<<24|b.charCodeAt(c+1)<<16|b.charCodeAt(c+2)<<8|b.charCodeAt(c+3),c+=4}else for(e=0;16>e;e++){d[e]=b[c]<<24|b[c+1]<<16|b[c+2]<<8|b[c+3],c+=4}for(e=16;80>e;e++){var f=d[e-3]^d[e-8]^d[e-14]^d[e-16];d[e]=4294967295&(f<<1|f>>>31)}b=a.M[0];c=a.M[1];for(var h=a.M[2],k=a.M[3],m=a.M[4],l,e=0;80>e;e++){40>e?20>e?(f=k^c&(h^k),l=1518500249):(f=c^h^k,l=1859775393):60>e?(f=c&h|k&(c|h),l=2400959708):(f=c^h^k,l=3395469782),f=4294967295&(b<<5|b>>>27)+f+m+l+d[e],m=k,k=h,h=4294967295&(c<<30|c>>>2),c=b,b=f}a.M[0]=4294967295&a.M[0]+b;a.M[1]=4294967295&a.M[1]+c;a.M[2]=4294967295&a.M[2]+h;a.M[3]=4294967295&a.M[3]+k;a.M[4]=4294967295&a.M[4]+m}ta.prototype.update=function(a,b){if(null!=a){n(b)||(b=a.length);for(var c=b-this.Wa,d=0,e=this.Wd,f=this.$b;d<b;){if(0==f)for(;d<=c;){ua(this,a,d),d+=this.Wa}if(p(a))for(;d<b;){if(e[f]=a.charCodeAt(d),++f,++d,f==this.Wa){ua(this,e);f=0;break}}else for(;d<b;){if(e[f]=a[d],++f,++d,f==this.Wa){ua(this,e);f=0;break}}}this.$b=f;this.Pd+=b}};var r;a:{var va=aa.navigator;if(va){var wa=va.userAgent;if(wa){r=wa;break a}}r=""}var t=Array.prototype,xa=t.indexOf?function(a,b,c){return t.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?_Mathmax(0,a.length+c):c;if(p(a))return p(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++){if(c in a&&a[c]===b)return c}return-1},ya=t.forEach?function(a,b,c){t.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=p(a)?a.split(""):a,f=0;f<d;f++){f in e&&b.call(c,e[f],f,a)}},za=t.filter?function(a,b,c){return t.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=[],f=0,h=p(a)?a.split(""):a,k=0;k<d;k++){if(k in h){var m=h[k];b.call(c,m,k,a)&&(e[f++]=m)}}return e},Aa=t.map?function(a,b,c){return t.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=p(a)?a.split(""):a,h=0;h<d;h++){h in f&&(e[h]=b.call(c,f[h],h,a))}return e},Ba=t.reduce?function(a,b,c,d){for(var e=[],f=1,h=arguments.length;f<h;f++){e.push(arguments[f])}d&&(e[0]=q(b,d));return t.reduce.apply(a,e)}:function(a,b,c,d){var e=c;ya(a,function(c,h){e=b.call(d,e,c,h,a)});return e},Ca=t.every?function(a,b,c){return t.every.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=p(a)?a.split(""):a,f=0;f<d;f++){if(f in e&&!b.call(c,e[f],f,a))return!1}return!0};function Da(a,b){var c=Ea(a,b,void 0);return 0>c?null:p(a)?a.charAt(c):a[c]}function Ea(a,b,c){for(var d=a.length,e=p(a)?a.split(""):a,f=0;f<d;f++){if(f in e&&b.call(c,e[f],f,a))return f}return-1}function Fa(a,b){var c=xa(a,b);0<=c&&t.splice.call(a,c,1)}function Ga(a,b,c){return 2>=arguments.length?t.slice.call(a,b):t.slice.call(a,b,c)}function Ha(a,b){a.sort(b||Ia)}function Ia(a,b){return a>b?1:a<b?-1:0}function v(a,b){for(var c in a){b.call(void 0,a[c],c,a)}}function Ja(a,b){var c={},d;for(d in a){c[d]=b.call(void 0,a[d],d,a)}return c}function Ka(a,b){for(var c in a){if(!b.call(void 0,a[c],c,a))return!1}return!0}function La(a){var b=0,c;for(c in a){b++}return b}function Ma(a){for(var b in a){return b}}function Na(a){var b=[],c=0,d;for(d in a){b[c++]=a[d]}return b}function Oa(a){var b=[],c=0,d;for(d in a){b[c++]=d}return b}function Pa(a,b){for(var c in a){if(a[c]==b)return!0}return!1}function Qa(a,b,c){for(var d in a){if(b.call(c,a[d],d,a))return d}}function Ra(a,b){var c=Qa(a,b,void 0);return c&&a[c]}function Sa(a){for(var b in a){return!1}return!0}function Ta(a){var b={},c;for(c in a){b[c]=a[c]}return b}var Ua=-1!=r.indexOf("Opera")||-1!=r.indexOf("OPR"),Va=-1!=r.indexOf("Trident")||-1!=r.indexOf("MSIE"),Wa=-1!=r.indexOf("Gecko")&&-1==r.toLowerCase().indexOf("webkit")&&!(-1!=r.indexOf("Trident")||-1!=r.indexOf("MSIE")),Xa=-1!=r.toLowerCase().indexOf("webkit");(function(){var a="",b;if(Ua&&aa.opera)return a=aa.opera.version,ha(a)?a():a;Wa?b=/rv\:([^\);]+)(\)|;)/:Va?b=/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/:Xa&&(b=/WebKit\/(\S+)/);b&&(a=(a=b.exec(r))?a[1]:"");return Va&&(b=(b=aa.document)?b.documentMode:void 0,b>parseFloat(a))?b+"":a})();var Ya=null,Za=null,$a=null;function ab(a,b){if(!fa(a))throw Error("encodeByteArray takes an array as a parameter");bb();for(var c=b?Za:Ya,d=[],e=0;e<a.length;e+=3){var f=a[e],h=e+1<a.length,k=h?a[e+1]:0,m=e+2<a.length,l=m?a[e+2]:0,u=f>>2,f=(3&f)<<4|k>>4,k=(15&k)<<2|l>>6,l=63&l;m||(l=64,h||(k=64));d.push(c[u],c[f],c[k],c[l])}return d.join("")}function bb(){if(!Ya){Ya={};Za={};$a={};for(var a=0;65>a;a++){Ya[a]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(a),Za[a]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(a),$a[Za[a]]=a,62<=a&&($a["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(a)]=a)}}}function cb(a,b){if(!a)throw db(b)}function db(a){return Error("Firebase Database ("+firebase.SDK_VERSION+") INTERNAL ASSERT FAILED: "+a)}function eb(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function w(a,b){if(Object.prototype.hasOwnProperty.call(a,b))return a[b]}function fb(a,b){for(var c in a){Object.prototype.hasOwnProperty.call(a,c)&&b(c,a[c])}}function gb(a){var b=[];fb(a,function(a,d){ea(d)?ya(d,function(d){b.push(encodeURIComponent(a)+"="+encodeURIComponent(d))}):b.push(encodeURIComponent(a)+"="+encodeURIComponent(d))});return b.length?"&"+b.join("&"):""}var hb=firebase.Promise;function ib(){var a=this;this.reject=this.resolve=null;this.ra=new hb(function(b,c){a.resolve=b;a.reject=c})}function jb(a,b){return function(c,d){c?a.reject(c):a.resolve(d);ha(b)&&(kb(a.ra),1===b.length?b(c):b(c,d))}}function kb(a){a.then(void 0,ba)}function lb(a){return"undefined"!==typeof JSON&&n(JSON.parse)?JSON.parse(a):ma(a)}function x(a){if("undefined"!==typeof JSON&&n(JSON.stringify))a=JSON.stringify(a);else{var b=[];oa(new na,a,b);a=b.join("")}return a}function mb(a){for(var b=[],c=0,d=0,e;d<a.length;d++){e=a.charCodeAt(d);55296<=e&&56319>=e&&(e-=55296,d++,cb(d<a.length,"Surrogate pair missing trail surrogate."),e=65536+(e<<10)+(a.charCodeAt(d)-56320));128>e?b[c++]=e:(2048>e?b[c++]=192|e>>6:(65536>e?b[c++]=224|e>>12:(b[c++]=240|e>>18,b[c++]=128|63&e>>12),b[c++]=128|63&e>>6),b[c++]=128|63&e)}return b}function nb(a){for(var b=0,c=0,d;c<a.length;c++){d=a.charCodeAt(c);128>d?b++:2048>d?b+=2:55296<=d&&56319>=d?(b+=4,c++):b+=3}return b}function y(a,b,c,d){var e;d<b?e="at least "+b:d>c&&(e=0===c?"none":"no more than "+c);if(e)throw Error(a+" failed: Was called with "+d+(1===d?" argument.":" arguments.")+" Expects "+e+".")}function A(a,b,c){var d="";switch(b){case 1:d=c?"first":"First";break;case 2:d=c?"second":"Second";break;case 3:d=c?"third":"Third";break;case 4:d=c?"fourth":"Fourth";break;default:throw Error("errorPrefix called with argumentNumber > 4.  Need to update it?");}return a=a+" failed: "+(d+" argument ")}function B(a,b,c,d){if((!d||n(c))&&!ha(c))throw Error(A(a,b,d)+"must be a valid function.")}function ob(a,b,c){if(n(c)&&(!ia(c)||null===c))throw Error(A(a,b,!0)+"must be a valid context object.")}function pb(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test("undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:"")}function C(a,b){this.name=a;this.R=b}function qb(a,b){return new C(a,b)}function rb(a,b){return sb(a.name,b.name)}function tb(a,b){return sb(a,b)}function ub(a){this.uc=a;this.Cd="firebase:"}g=ub.prototype;g.set=function(a,b){null==b?this.uc.removeItem(this.Cd+a):this.uc.setItem(this.Cd+a,x(b))};g.get=function(a){a=this.uc.getItem(this.Cd+a);return null==a?null:lb(a)};g.remove=function(a){this.uc.removeItem(this.Cd+a)};g.Ze=!1;g.toString=function(){return this.uc.toString()};function vb(){this.pc={}}vb.prototype.set=function(a,b){null==b?delete this.pc[a]:this.pc[a]=b};vb.prototype.get=function(a){return eb(this.pc,a)?this.pc[a]:null};vb.prototype.remove=function(a){delete this.pc[a]};vb.prototype.Ze=!0;function wb(a){try{if("undefined"!==typeof window&&"undefined"!==typeof window[a]){var b=window[a];b.setItem("firebase:sentinel","cache");b.removeItem("firebase:sentinel");return new ub(b)}}catch(c){}return new vb}var xb=wb("localStorage"),yb=wb("sessionStorage");function zb(a,b,c,d,e){this.host=a.toLowerCase();this.domain=this.host.substr(this.host.indexOf(".")+1);this.Sc=b;this.pe=c;this.qg=d;this.gf=e||"";this.$a=xb.get("host:"+a)||this.host}function Ab(a,b){b!==a.$a&&(a.$a=b,"s-"===a.$a.substr(0,2)&&xb.set("host:"+a.host,a.$a))}function Bb(a,b,c){D("string"===typeof b,"typeof type must == string");D("object"===babelHelpers.typeof(c),"typeof params must == object");if(b===Cb)b=(a.Sc?"wss://":"ws://")+a.$a+"/.ws?";else if(b===Db)b=(a.Sc?"https://":"http://")+a.$a+"/.lp?";else throw Error("Unknown connection type: "+b);a.host!==a.$a&&(c.ns=a.pe);var d=[];v(c,function(a,b){d.push(b+"="+a)});return b+d.join("&")}zb.prototype.toString=function(){var a=(this.Sc?"https://":"http://")+this.host;this.gf&&(a+="<"+this.gf+">");return a};function Eb(a,b){return a&&"object"===babelHelpers.typeof(a)?(D(".sv"in a,"Unexpected leaf node or priority contents"),b[a[".sv"]]):a}function Fb(a,b){var c=new Gb;Hb(a,new E(""),function(a,e){Ib(c,a,Jb(e,b))});return c}function Jb(a,b){var c=a.C().H(),c=Eb(c,b),d;if(a.J()){var e=Eb(a.Ca(),b);return e!==a.Ca()||c!==a.C().H()?new Kb(e,G(c)):a}d=a;c!==a.C().H()&&(d=d.fa(new Kb(c)));a.O(H,function(a,c){var e=Jb(c,b);e!==c&&(d=d.T(a,e))});return d}var Lb=function(){var a=1;return function(){return a++}}(),D=cb,Mb=db;function Nb(a){var _StringfromCharCode=String.fromCharCode;try{var b;bb();for(var c=$a,d=[],e=0;e<a.length;){var f=c[a.charAt(e++)],h=e<a.length?c[a.charAt(e)]:0;++e;var k=e<a.length?c[a.charAt(e)]:64;++e;var m=e<a.length?c[a.charAt(e)]:64;++e;if(null==f||null==h||null==k||null==m)throw Error();d.push(f<<2|h>>4);64!=k&&(d.push(240&h<<4|k>>2),64!=m&&d.push(192&k<<6|m))}if(8192>d.length)b=_StringfromCharCode.apply(null,d);else{a="";for(c=0;c<d.length;c+=8192){a+=_StringfromCharCode.apply(null,Ga(d,c,c+8192))}b=a}return b}catch(l){I("base64Decode failed: ",l)}return null}function Ob(a){var b=mb(a);a=new ta;a.update(b);var b=[],c=8*a.Pd;56>a.$b?a.update(a.zd,56-a.$b):a.update(a.zd,a.Wa-(a.$b-56));for(var d=a.Wa-1;56<=d;d--){a.Wd[d]=255&c,c/=256}ua(a,a.Wd);for(d=c=0;5>d;d++){for(var e=24;0<=e;e-=8){b[c]=255&a.M[d]>>e,++c}}return ab(b)}function Pb(){for(var b="",c=0;c<arguments.length;c++){b=fa(arguments[c])?b+Pb.apply(null,arguments[c]):"object"===babelHelpers.typeof(arguments[c])?b+x(arguments[c]):b+arguments[c],b+=" "}return b}var Qb=null,Rb=!0;function Sb(a,b){cb(!b||!0===a||!1===a,"Can't turn on custom loggers persistently.");!0===a?("undefined"!==typeof console&&("function"===typeof console.log?Qb=q(console.log,console):"object"===babelHelpers.typeof(console.log)&&(Qb=function(a){console.log(a)})),b&&yb.set("logging_enabled",!0)):ha(a)?Qb=a:(Qb=null,yb.remove("logging_enabled"))}function I(){!0===Rb&&(Rb=!1,null===Qb&&!0===yb.get("logging_enabled")&&Sb(!0));if(Qb){var b=Pb.apply(null,arguments);Qb(b)}}function Tb(a){return function(){I(a,arguments)}}function Ub(){if("undefined"!==typeof console){var b="FIREBASE INTERNAL ERROR: "+Pb.apply(null,arguments);"undefined"!==typeof console.error?console.error(b):console.log(b)}}function Vb(){var b=Pb.apply(null,arguments);throw Error("FIREBASE FATAL ERROR: "+b)}function J(){if("undefined"!==typeof console){var b="FIREBASE WARNING: "+Pb.apply(null,arguments);"undefined"!==typeof console.warn?console.warn(b):console.log(b)}}function Wb(a){var b,c,d,e,f,h=a;f=c=a=b="";d=!0;e="https";if(p(h)){var k=h.indexOf("//");0<=k&&(e=h.substring(0,k-1),h=h.substring(k+2));k=h.indexOf("/");-1===k&&(k=h.length);b=h.substring(0,k);f="";h=h.substring(k).split("/");for(k=0;k<h.length;k++){if(0<h[k].length){var m=h[k];try{m=decodeURIComponent(m.replace(/\+/g," "))}catch(l){}f+="/"+m}}h=b.split(".");3===h.length?(a=h[1],c=h[0].toLowerCase()):2===h.length&&(a=h[0]);k=b.indexOf(":");0<=k&&(d="https"===e||"wss"===e)}"firebase"===a&&Vb(b+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead");c&&"undefined"!=c||Vb("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com");d||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&J("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");return{jc:new zb(b,d,c,"ws"===e||"wss"===e),path:new E(f)}}function Xb(a){return ga(a)&&(a!=a||a==Number.POSITIVE_INFINITY||a==Number.NEGATIVE_INFINITY)}function Yb(a){if("complete"===document.readyState)a();else{var b=!1,c=function(){document.body?b||(b=!0,a()):setTimeout(c,10)};document.addEventListener?(document.addEventListener("DOMContentLoaded",c,!1),window.addEventListener("load",c,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&c()}),window.attachEvent("onload",c))}}function sb(a,b){if(a===b)return 0;if("[MIN_NAME]"===a||"[MAX_NAME]"===b)return-1;if("[MIN_NAME]"===b||"[MAX_NAME]"===a)return 1;var c=Zb(a),d=Zb(b);return null!==c?null!==d?0==c-d?a.length-b.length:c-d:-1:null!==d?1:a<b?-1:1}function $b(a,b){if(b&&a in b)return b[a];throw Error("Missing required key ("+a+") in object: "+x(b))}function ac(a){if("object"!==babelHelpers.typeof(a)||null===a)return x(a);var b=[],c;for(c in a){b.push(c)}b.sort();c="{";for(var d=0;d<b.length;d++){0!==d&&(c+=","),c+=x(b[d]),c+=":",c+=ac(a[b[d]])}return c+"}"}function bc(a,b){if(a.length<=b)return[a];for(var c=[],d=0;d<a.length;d+=b){d+b>a?c.push(a.substring(d,a.length)):c.push(a.substring(d,d+b))}return c}function cc(a,b){if(ea(a))for(var c=0;c<a.length;++c){b(c,a[c])}else v(a,b)}function dc(a){var _Mathround=Math.round;D(!Xb(a),"Invalid JSON number");var b,c,d,e;0===a?(d=c=0,b=-Infinity===1/a?1:0):(b=0>a,a=Math.abs(a),2.2250738585072014e-308<=a?(d=_Mathmin(_Mathfloor(_Mathlog(a)/Math.LN2),1023),c=d+1023,d=_Mathround(a*_Mathpow(2,52-d)-4503599627370496)):(c=0,d=_Mathround(a/5e-324)));e=[];for(a=52;a;--a){e.push(d%2?1:0),d=_Mathfloor(d/2)}for(a=11;a;--a){e.push(c%2?1:0),c=_Mathfloor(c/2)}e.push(b?1:0);e.reverse();b=e.join("");c="";for(a=0;64>a;a+=8){d=parseInt(b.substr(a,8),2).toString(16),1===d.length&&(d="0"+d),c+=d}return c.toLowerCase()}var ec=/^-?\d{1,10}$/;function Zb(a){return ec.test(a)&&(a=+a,-2147483648<=a&&2147483647>=a)?a:null}function fc(a){try{a()}catch(b){setTimeout(function(){J("Exception was thrown by user callback.",b.stack||"");throw b},0)}}function gc(a,b,c){Object.defineProperty(a,b,{get:c})}function hc(a,b){var c=setTimeout(a,b);"object"===babelHelpers.typeof(c)&&c.unref&&c.unref();return c}function ic(a){var b={},c={},d={},e="";try{var f=a.split("."),b=lb(Nb(f[0])||""),c=lb(Nb(f[1])||""),e=f[2],d=c.d||{};delete c.d}catch(h){}return{tg:b,Je:c,data:d,mg:e}}function jc(a){a=ic(a);var b=a.Je;return!!a.mg&&!!b&&"object"===babelHelpers.typeof(b)&&b.hasOwnProperty("iat")}function kc(a){a=ic(a).Je;return"object"===babelHelpers.typeof(a)&&!0===w(a,"admin")}function lc(){}var mc={};function nc(a){return q(a.compare,a)}lc.prototype.nd=function(a,b){return 0!==this.compare(new C("[MIN_NAME]",a),new C("[MIN_NAME]",b))};lc.prototype.Hc=function(){return oc};function pc(a){D(!a.e()&&".priority"!==K(a),"Can't create PathIndex with empty path or .priority key");this.bc=a}la(pc,lc);g=pc.prototype;g.xc=function(a){return!a.P(this.bc).e()};g.compare=function(a,b){var c=a.R.P(this.bc),d=b.R.P(this.bc),c=c.sc(d);return 0===c?sb(a.name,b.name):c};g.Ec=function(a,b){var c=G(a),c=L.F(this.bc,c);return new C(b,c)};g.Fc=function(){var a=L.F(this.bc,qc);return new C("[MAX_NAME]",a)};g.toString=function(){return this.bc.slice().join("/")};function rc(){}la(rc,lc);g=rc.prototype;g.compare=function(a,b){var c=a.R.C(),d=b.R.C(),c=c.sc(d);return 0===c?sb(a.name,b.name):c};g.xc=function(a){return!a.C().e()};g.nd=function(a,b){return!a.C().Z(b.C())};g.Hc=function(){return oc};g.Fc=function(){return new C("[MAX_NAME]",new Kb("[PRIORITY-POST]",qc))};g.Ec=function(a,b){var c=G(a);return new C(b,new Kb("[PRIORITY-POST]",c))};g.toString=function(){return".priority"};var H=new rc;function sc(){}la(sc,lc);g=sc.prototype;g.compare=function(a,b){return sb(a.name,b.name)};g.xc=function(){throw Mb("KeyIndex.isDefinedOn not expected to be called.")};g.nd=function(){return!1};g.Hc=function(){return oc};g.Fc=function(){return new C("[MAX_NAME]",L)};g.Ec=function(a){D(p(a),"KeyIndex indexValue must always be a string.");return new C(a,L)};g.toString=function(){return".key"};var tc=new sc;function uc(){}la(uc,lc);g=uc.prototype;g.compare=function(a,b){var c=a.R.sc(b.R);return 0===c?sb(a.name,b.name):c};g.xc=function(){return!0};g.nd=function(a,b){return!a.Z(b)};g.Hc=function(){return oc};g.Fc=function(){return vc};g.Ec=function(a,b){var c=G(a);return new C(b,c)};g.toString=function(){return".value"};var wc=new uc;function xc(a,b){this.od=a;this.cc=b}xc.prototype.get=function(a){var b=w(this.od,a);if(!b)throw Error("No index defined for "+a);return b===mc?null:b};function yc(a,b,c){var d=Ja(a.od,function(d,f){var h=w(a.cc,f);D(h,"Missing index implementation for "+f);if(d===mc){if(h.xc(b.R)){for(var k=[],m=c.Wb(qb),l=M(m);l;){l.name!=b.name&&k.push(l),l=M(m)}k.push(b);return zc(k,nc(h))}return mc}h=c.get(b.name);k=d;h&&(k=k.remove(new C(b.name,h)));return k.Oa(b,b.R)});return new xc(d,a.cc)}function Ac(a,b,c){var d=Ja(a.od,function(a){if(a===mc)return a;var d=c.get(b.name);return d?a.remove(new C(b.name,d)):a});return new xc(d,a.cc)}var Bc=new xc({".priority":mc},{".priority":H});function Kb(a,b){this.B=a;D(n(this.B)&&null!==this.B,"LeafNode shouldn't be created with null/undefined value.");this.aa=b||L;Cc(this.aa);this.Db=null}var Dc=["object","boolean","number","string"];g=Kb.prototype;g.J=function(){return!0};g.C=function(){return this.aa};g.fa=function(a){return new Kb(this.B,a)};g.Q=function(a){return".priority"===a?this.aa:L};g.P=function(a){return a.e()?this:".priority"===K(a)?this.aa:L};g.Da=function(){return!1};g.Ve=function(){return null};g.T=function(a,b){return".priority"===a?this.fa(b):b.e()&&".priority"!==a?this:L.T(a,b).fa(this.aa)};g.F=function(a,b){var c=K(a);if(null===c)return b;if(b.e()&&".priority"!==c)return this;D(".priority"!==c||1===Ec(a),".priority must be the last token in a path");return this.T(c,L.F(N(a),b))};g.e=function(){return!1};g.Eb=function(){return 0};g.O=function(){return!1};g.H=function(a){return a&&!this.C().e()?{".value":this.Ca(),".priority":this.C().H()}:this.Ca()};g.hash=function(){if(null===this.Db){var a="";this.aa.e()||(a+="priority:"+Fc(this.aa.H())+":");var b=babelHelpers.typeof(this.B),a=a+(b+":"),a="number"===b?a+dc(this.B):a+this.B;this.Db=Ob(a)}return this.Db};g.Ca=function(){return this.B};g.sc=function(a){if(a===L)return 1;if(babelHelpers.instanceof(a,O))return-1;D(a.J(),"Unknown node type");var b=babelHelpers.typeof(a.B),c=babelHelpers.typeof(this.B),d=xa(Dc,b),e=xa(Dc,c);D(0<=d,"Unknown leaf type: "+b);D(0<=e,"Unknown leaf type: "+c);return d===e?"object"===c?0:this.B<a.B?-1:this.B===a.B?0:1:e-d};g.nb=function(){return this};g.yc=function(){return!0};g.Z=function(a){return a===this?!0:a.J()?this.B===a.B&&this.aa.Z(a.aa):!1};g.toString=function(){return x(this.H(!0))};function Gc(){this.set={}}g=Gc.prototype;g.add=function(a,b){this.set[a]=null!==b?b:!0};g.contains=function(a){return eb(this.set,a)};g.get=function(a){return this.contains(a)?this.set[a]:void 0};g.remove=function(a){delete this.set[a]};g.clear=function(){this.set={}};g.e=function(){return Sa(this.set)};g.count=function(){return La(this.set)};function Hc(a,b){v(a.set,function(a,d){b(d,a)})}g.keys=function(){var a=[];v(this.set,function(b,c){a.push(c)});return a};function Ic(a){D(ea(a)&&0<a.length,"Requires a non-empty array");this.Bf=a;this.Dc={}}Ic.prototype.Ge=function(a){var c=this.Dc[a]||[];var d=c.length;if(0<d){for(var e=Array(d),f=0;f<d;f++){e[f]=c[f]}c=e}else c=[];for(d=0;d<c.length;d++){c[d].Ie.apply(c[d].Ma,Array.prototype.slice.call(arguments,1))}};Ic.prototype.gc=function(a,b,c){Jc(this,a);this.Dc[a]=this.Dc[a]||[];this.Dc[a].push({Ie:b,Ma:c});(a=this.Ue(a))&&b.apply(c,a)};Ic.prototype.Ic=function(a,b,c){Jc(this,a);a=this.Dc[a]||[];for(var d=0;d<a.length;d++){if(a[d].Ie===b&&(!c||c===a[d].Ma)){a.splice(d,1);break}}};function Jc(a,b){D(Da(a.Bf,function(a){return a===b}),"Unknown event: "+b)}var Kc=function(){var a=0,b=[];return function(c){var d=c===a;a=c;for(var e=Array(8),f=7;0<=f;f--){e[f]="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz".charAt(c%64),c=_Mathfloor(c/64)}D(0===c,"Cannot push at time == 0");c=e.join("");if(d){for(f=11;0<=f&&63===b[f];f--){b[f]=0}b[f]++}else for(f=0;12>f;f++){b[f]=_Mathfloor(64*Math.random())}for(f=0;12>f;f++){c+="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz".charAt(b[f])}D(20===c.length,"nextPushId: Length should be 20.");return c}}();function Lc(){Ic.call(this,["online"]);this.hc=!0;if("undefined"!==typeof window&&"undefined"!==typeof window.addEventListener&&!pb()){var a=this;window.addEventListener("online",function(){a.hc||(a.hc=!0,a.Ge("online",!0))},!1);window.addEventListener("offline",function(){a.hc&&(a.hc=!1,a.Ge("online",!1))},!1)}}la(Lc,Ic);Lc.prototype.Ue=function(a){D("online"===a,"Unknown event type: "+a);return[this.hc]};ca(Lc);function Mc(){Ic.call(this,["visible"]);var a,b;"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(b="visibilitychange",a="hidden"):"undefined"!==typeof document.mozHidden?(b="mozvisibilitychange",a="mozHidden"):"undefined"!==typeof document.msHidden?(b="msvisibilitychange",a="msHidden"):"undefined"!==typeof document.webkitHidden&&(b="webkitvisibilitychange",a="webkitHidden"));this.Mb=!0;if(b){var c=this;document.addEventListener(b,function(){var b=!document[a];b!==c.Mb&&(c.Mb=b,c.Ge("visible",b))},!1)}}la(Mc,Ic);Mc.prototype.Ue=function(a){D("visible"===a,"Unknown event type: "+a);return[this.Mb]};ca(Mc);function E(a,b){if(1==arguments.length){this.o=a.split("/");for(var c=0,d=0;d<this.o.length;d++){0<this.o[d].length&&(this.o[c]=this.o[d],c++)}this.o.length=c;this.Y=0}else this.o=a,this.Y=b}function P(a,b){var c=K(a);if(null===c)return b;if(c===K(b))return P(N(a),N(b));throw Error("INTERNAL ERROR: innerPath ("+b+") is not within outerPath ("+a+")")}function Nc(a,b){for(var c=a.slice(),d=b.slice(),e=0,f;e<c.length&&e<d.length;e++){f=sb(c[e],d[e]);if(0!==f)return f}return c.length===d.length?0:c.length<d.length?-1:1}function K(a){return a.Y>=a.o.length?null:a.o[a.Y]}function Ec(a){return a.o.length-a.Y}function N(a){var b=a.Y;b<a.o.length&&b++;return new E(a.o,b)}function Oc(a){return a.Y<a.o.length?a.o[a.o.length-1]:null}g=E.prototype;g.toString=function(){for(var a="",b=this.Y;b<this.o.length;b++){""!==this.o[b]&&(a+="/"+this.o[b])}return a||"/"};g.slice=function(a){return this.o.slice(this.Y+(a||0))};g.parent=function(){if(this.Y>=this.o.length)return null;for(var a=[],b=this.Y;b<this.o.length-1;b++){a.push(this.o[b])}return new E(a,0)};g.n=function(a){for(var b=[],c=this.Y;c<this.o.length;c++){b.push(this.o[c])}if(babelHelpers.instanceof(a,E))for(c=a.Y;c<a.o.length;c++){b.push(a.o[c])}else for(a=a.split("/"),c=0;c<a.length;c++){0<a[c].length&&b.push(a[c])}return new E(b,0)};g.e=function(){return this.Y>=this.o.length};g.Z=function(a){if(Ec(this)!==Ec(a))return!1;for(var b=this.Y,c=a.Y;b<=this.o.length;b++,c++){if(this.o[b]!==a.o[c])return!1}return!0};g.contains=function(a){var b=this.Y,c=a.Y;if(Ec(this)>Ec(a))return!1;for(;b<this.o.length;){if(this.o[b]!==a.o[c])return!1;++b;++c}return!0};var Q=new E("");function Pc(a,b){this.Qa=a.slice();this.Ha=_Mathmax(1,this.Qa.length);this.Qe=b;for(var c=0;c<this.Qa.length;c++){this.Ha+=nb(this.Qa[c])}Qc(this)}Pc.prototype.push=function(a){0<this.Qa.length&&(this.Ha+=1);this.Qa.push(a);this.Ha+=nb(a);Qc(this)};Pc.prototype.pop=function(){var a=this.Qa.pop();this.Ha-=nb(a);0<this.Qa.length&&--this.Ha};function Qc(a){if(768<a.Ha)throw Error(a.Qe+"has a key path longer than 768 bytes ("+a.Ha+").");if(32<a.Qa.length)throw Error(a.Qe+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Rc(a))}function Rc(a){return 0==a.Qa.length?"":"in property '"+a.Qa.join(".")+"'"}function Sc(){this.children={};this.bd=0;this.value=null}function Tc(a,b,c){this.ud=a?a:"";this.Pc=b?b:null;this.A=c?c:new Sc}function Uc(a,b){for(var c=babelHelpers.instanceof(b,E)?b:new E(b),d=a,e;null!==(e=K(c));){d=new Tc(e,d,w(d.A.children,e)||new Sc),c=N(c)}return d}g=Tc.prototype;g.Ca=function(){return this.A.value};function Vc(a,b){D("undefined"!==typeof b,"Cannot set value to undefined");a.A.value=b;Wc(a)}g.clear=function(){this.A.value=null;this.A.children={};this.A.bd=0;Wc(this)};g.kd=function(){return 0<this.A.bd};g.e=function(){return null===this.Ca()&&!this.kd()};g.O=function(a){var b=this;v(this.A.children,function(c,d){a(new Tc(d,b,c))})};function Xc(a,b,c,d){c&&!d&&b(a);a.O(function(a){Xc(a,b,!0,d)});c&&d&&b(a)}function Yc(a,b){for(var c=a.parent();null!==c&&!b(c);){c=c.parent()}}g.path=function(){return new E(null===this.Pc?this.ud:this.Pc.path()+"/"+this.ud)};g.name=function(){return this.ud};g.parent=function(){return this.Pc};function Wc(a){if(null!==a.Pc){var b=a.Pc,c=a.ud,d=a.e(),e=eb(b.A.children,c);d&&e?(delete b.A.children[c],b.A.bd--,Wc(b)):d||e||(b.A.children[c]=a.A,b.A.bd++,Wc(b))}}function Zc(a,b){this.La=a;this.ba=b?b:$c}g=Zc.prototype;g.Oa=function(a,b){return new Zc(this.La,this.ba.Oa(a,b,this.La).X(null,null,!1,null,null))};g.remove=function(a){return new Zc(this.La,this.ba.remove(a,this.La).X(null,null,!1,null,null))};g.get=function(a){for(var b,c=this.ba;!c.e();){b=this.La(a,c.key);if(0===b)return c.value;0>b?c=c.left:0<b&&(c=c.right)}return null};function ad(a,b){for(var c,d=a.ba,e=null;!d.e();){c=a.La(b,d.key);if(0===c){if(d.left.e())return e?e.key:null;for(d=d.left;!d.right.e();){d=d.right}return d.key}0>c?d=d.left:0<c&&(e=d,d=d.right)}throw Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}g.e=function(){return this.ba.e()};g.count=function(){return this.ba.count()};g.Gc=function(){return this.ba.Gc()};g.ec=function(){return this.ba.ec()};g.ha=function(a){return this.ba.ha(a)};g.Wb=function(a){return new bd(this.ba,null,this.La,!1,a)};g.Xb=function(a,b){return new bd(this.ba,a,this.La,!1,b)};g.Zb=function(a,b){return new bd(this.ba,a,this.La,!0,b)};g.We=function(a){return new bd(this.ba,null,this.La,!0,a)};function bd(a,b,c,d,e){this.Hd=e||null;this.le=d;this.Pa=[];for(e=1;!a.e();){if(e=b?c(a.key,b):1,d&&(e*=-1),0>e)a=this.le?a.left:a.right;else if(0===e){this.Pa.push(a);break}else this.Pa.push(a),a=this.le?a.right:a.left}}function M(a){if(0===a.Pa.length)return null;var b=a.Pa.pop(),c;c=a.Hd?a.Hd(b.key,b.value):{key:b.key,value:b.value};if(a.le)for(b=b.left;!b.e();){a.Pa.push(b),b=b.right}else for(b=b.right;!b.e();){a.Pa.push(b),b=b.left}return c}function cd(a){if(0===a.Pa.length)return null;var b=a.Pa;b=b[b.length-1];return a.Hd?a.Hd(b.key,b.value):{key:b.key,value:b.value}}function dd(a,b,c,d,e){this.key=a;this.value=b;this.color=null!=c?c:!0;this.left=null!=d?d:$c;this.right=null!=e?e:$c}g=dd.prototype;g.X=function(a,b,c,d,e){return new dd(null!=a?a:this.key,null!=b?b:this.value,null!=c?c:this.color,null!=d?d:this.left,null!=e?e:this.right)};g.count=function(){return this.left.count()+1+this.right.count()};g.e=function(){return!1};g.ha=function(a){return this.left.ha(a)||a(this.key,this.value)||this.right.ha(a)};function ed(a){return a.left.e()?a:ed(a.left)}g.Gc=function(){return ed(this).key};g.ec=function(){return this.right.e()?this.key:this.right.ec()};g.Oa=function(a,b,c){var d,e;e=this;d=c(a,e.key);e=0>d?e.X(null,null,null,e.left.Oa(a,b,c),null):0===d?e.X(null,b,null,null,null):e.X(null,null,null,null,e.right.Oa(a,b,c));return gd(e)};function hd(a){if(a.left.e())return $c;a.left.ea()||a.left.left.ea()||(a=id(a));a=a.X(null,null,null,hd(a.left),null);return gd(a)}g.remove=function(a,b){var c,d;c=this;if(0>b(a,c.key))c.left.e()||c.left.ea()||c.left.left.ea()||(c=id(c)),c=c.X(null,null,null,c.left.remove(a,b),null);else{c.left.ea()&&(c=jd(c));c.right.e()||c.right.ea()||c.right.left.ea()||(c=kd(c),c.left.left.ea()&&(c=jd(c),c=kd(c)));if(0===b(a,c.key)){if(c.right.e())return $c;d=ed(c.right);c=c.X(d.key,d.value,null,null,hd(c.right))}c=c.X(null,null,null,null,c.right.remove(a,b))}return gd(c)};g.ea=function(){return this.color};function gd(a){a.right.ea()&&!a.left.ea()&&(a=ld(a));a.left.ea()&&a.left.left.ea()&&(a=jd(a));a.left.ea()&&a.right.ea()&&(a=kd(a));return a}function id(a){a=kd(a);a.right.left.ea()&&(a=a.X(null,null,null,null,jd(a.right)),a=ld(a),a=kd(a));return a}function ld(a){return a.right.X(null,null,a.color,a.X(null,null,!0,null,a.right.left),null)}function jd(a){return a.left.X(null,null,a.color,null,a.X(null,null,!0,a.left.right,null))}function kd(a){return a.X(null,null,!a.color,a.left.X(null,null,!a.left.color,null,null),a.right.X(null,null,!a.right.color,null,null))}function md(){}g=md.prototype;g.X=function(){return this};g.Oa=function(a,b){return new dd(a,b,null)};g.remove=function(){return this};g.count=function(){return 0};g.e=function(){return!0};g.ha=function(){return!1};g.Gc=function(){return null};g.ec=function(){return null};g.ea=function(){return!1};var $c=new md;function O(a,b,c){this.k=a;(this.aa=b)&&Cc(this.aa);a.e()&&D(!this.aa||this.aa.e(),"An empty node cannot have a priority");this.yb=c;this.Db=null}g=O.prototype;g.J=function(){return!1};g.C=function(){return this.aa||L};g.fa=function(a){return this.k.e()?this:new O(this.k,a,this.yb)};g.Q=function(a){if(".priority"===a)return this.C();a=this.k.get(a);return null===a?L:a};g.P=function(a){var b=K(a);return null===b?this:this.Q(b).P(N(a))};g.Da=function(a){return null!==this.k.get(a)};g.T=function(a,b){D(b,"We should always be passing snapshot nodes");if(".priority"===a)return this.fa(b);var c=new C(a,b),d,e;b.e()?(d=this.k.remove(a),c=Ac(this.yb,c,this.k)):(d=this.k.Oa(a,b),c=yc(this.yb,c,this.k));e=d.e()?L:this.aa;return new O(d,e,c)};g.F=function(a,b){var c=K(a);if(null===c)return b;D(".priority"!==K(a)||1===Ec(a),".priority must be the last token in a path");var d=this.Q(c).F(N(a),b);return this.T(c,d)};g.e=function(){return this.k.e()};g.Eb=function(){return this.k.count()};var nd=/^(0|[1-9]\d*)$/;g=O.prototype;g.H=function(a){if(this.e())return null;var b={},c=0,d=0,e=!0;this.O(H,function(f,h){b[f]=h.H(a);c++;e&&nd.test(f)?d=_Mathmax(d,+f):e=!1});if(!a&&e&&d<2*c){var f=[],h;for(h in b){f[h]=b[h]}return f}a&&!this.C().e()&&(b[".priority"]=this.C().H());return b};g.hash=function(){if(null===this.Db){var a="";this.C().e()||(a+="priority:"+Fc(this.C().H())+":");this.O(H,function(b,c){var d=c.hash();""!==d&&(a+=":"+b+":"+d)});this.Db=""===a?"":Ob(a)}return this.Db};g.Ve=function(a,b,c){return(c=od(this,c))?(a=ad(c,new C(a,b)))?a.name:null:ad(this.k,a)};function pd(a,b){var c=(c=od(a,b))?(c=c.Gc())&&c.name:a.k.Gc();return c?new C(c,a.k.get(c)):null}function qd(a,b){var c=(c=od(a,b))?(c=c.ec())&&c.name:a.k.ec();return c?new C(c,a.k.get(c)):null}g.O=function(a,b){var c=od(this,a);return c?c.ha(function(a){return b(a.name,a.R)}):this.k.ha(b)};g.Wb=function(a){return this.Xb(a.Hc(),a)};g.Xb=function(a,b){var c=od(this,b);if(c)return c.Xb(a,function(a){return a});for(var c=this.k.Xb(a.name,qb),d=cd(c);null!=d&&0>b.compare(d,a);){M(c),d=cd(c)}return c};g.We=function(a){return this.Zb(a.Fc(),a)};g.Zb=function(a,b){var c=od(this,b);if(c)return c.Zb(a,function(a){return a});for(var c=this.k.Zb(a.name,qb),d=cd(c);null!=d&&0<b.compare(d,a);){M(c),d=cd(c)}return c};g.sc=function(a){return this.e()?a.e()?0:-1:a.J()||a.e()?1:a===qc?-1:0};g.nb=function(a){if(a===tc||Pa(this.yb.cc,a.toString()))return this;var b=this.yb,c=this.k;D(a!==tc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var d=[],e=!1,c=c.Wb(qb),f=M(c);f;){e=e||a.xc(f.R),d.push(f),f=M(c)}d=e?zc(d,nc(a)):mc;e=a.toString();c=Ta(b.cc);c[e]=a;a=Ta(b.od);a[e]=d;return new O(this.k,this.aa,new xc(a,c))};g.yc=function(a){return a===tc||Pa(this.yb.cc,a.toString())};g.Z=function(a){if(a===this)return!0;if(a.J())return!1;if(this.C().Z(a.C())&&this.k.count()===a.k.count()){var b=this.Wb(H);a=a.Wb(H);for(var c=M(b),d=M(a);c&&d;){if(c.name!==d.name||!c.R.Z(d.R))return!1;c=M(b);d=M(a)}return null===c&&null===d}return!1};function od(a,b){return b===tc?null:a.yb.get(b.toString())}g.toString=function(){return x(this.H(!0))};function G(a,b){if(null===a)return L;var c=null;"object"===babelHelpers.typeof(a)&&".priority"in a?c=a[".priority"]:"undefined"!==typeof b&&(c=b);D(null===c||"string"===typeof c||"number"===typeof c||"object"===babelHelpers.typeof(c)&&".sv"in c,"Invalid priority type found: "+babelHelpers.typeof(c));"object"===babelHelpers.typeof(a)&&".value"in a&&null!==a[".value"]&&(a=a[".value"]);if("object"!==babelHelpers.typeof(a)||".sv"in a)return new Kb(a,G(c));if(babelHelpers.instanceof(a,Array)){var d=L,e=a;v(e,function(a,b){if(eb(e,b)&&"."!==b.substring(0,1)){var c=G(a);if(c.J()||!c.e())d=d.T(b,c)}});return d.fa(G(c))}var f=[],h=!1,k=a;fb(k,function(a){if("string"!==typeof a||"."!==a.substring(0,1)){var b=G(k[a]);b.e()||(h=h||!b.C().e(),f.push(new C(a,b)))}});if(0==f.length)return L;var m=zc(f,rb,function(a){return a.name},tb);if(h){var l=zc(f,nc(H));return new O(m,G(c),new xc({".priority":l},{".priority":H}))}return new O(m,G(c),Bc)}var rd=0.6931471805599453;function sd(a){this.count=parseInt(_Mathlog(a+1)/rd,10);this.Oe=this.count-1;this.Cf=a+1&parseInt(Array(this.count+1).join("1"),2)}function td(a){var b=!(a.Cf&1<<a.Oe);a.Oe--;return b}function zc(a,b,c,d){function e(b,d){var f=d-b;if(0==f)return null;if(1==f){var l=a[b],u=c?c(l):l;return new dd(u,l.R,!1,null,null)}var l=parseInt(f/2,10)+b,f=e(b,l),z=e(l+1,d),l=a[l],u=c?c(l):l;return new dd(u,l.R,!1,f,z)}a.sort(b);var f=function(b){function d(b,h){var k=u-b,z=u;u-=b;var z=e(k+1,z),k=a[k],F=c?c(k):k,z=new dd(F,k.R,h,null,z);f?f.left=z:l=z;f=z}for(var f=null,l=null,u=a.length,z=0;z<b.count;++z){var F=td(b),fd=_Mathpow(2,b.count-(z+1));F?d(fd,!1):(d(fd,!1),d(fd,!0))}return l}(new sd(a.length));return null!==f?new Zc(d||b,f):new Zc(d||b)}function Fc(a){return"number"===typeof a?"number:"+dc(a):"string:"+a}function Cc(a){if(a.J()){var b=a.H();D("string"===typeof b||"number"===typeof b||"object"===babelHelpers.typeof(b)&&eb(b,".sv"),"Priority must be a string or number.")}else D(a===qc||a.e(),"priority of unexpected type.");D(a===qc||a.C().e(),"Priority nodes can't have a priority of their own.")}var L=new O(new Zc(tb),null,Bc);function ud(){O.call(this,new Zc(tb),L,Bc)}la(ud,O);g=ud.prototype;g.sc=function(a){return a===this?0:1};g.Z=function(a){return a===this};g.C=function(){return this};g.Q=function(){return L};g.e=function(){return!1};var qc=new ud,oc=new C("[MIN_NAME]",L),vc=new C("[MAX_NAME]",qc);function vd(a,b){this.value=a;this.children=b||wd}var wd=new Zc(function(a,b){return a===b?0:a<b?-1:1});function xd(a){var b=R;v(a,function(a,d){b=b.set(new E(d),a)});return b}g=vd.prototype;g.e=function(){return null===this.value&&this.children.e()};function yd(a,b,c){if(null!=a.value&&c(a.value))return{path:Q,value:a.value};if(b.e())return null;var d=K(b);a=a.children.get(d);return null!==a?(b=yd(a,N(b),c),null!=b?{path:new E(d).n(b.path),value:b.value}:null):null}function zd(a,b){return yd(a,b,function(){return!0})}g.subtree=function(a){if(a.e())return this;var b=this.children.get(K(a));return null!==b?b.subtree(N(a)):R};g.set=function(a,b){if(a.e())return new vd(b,this.children);var c=K(a),d=(this.children.get(c)||R).set(N(a),b),c=this.children.Oa(c,d);return new vd(this.value,c)};g.remove=function(a){if(a.e())return this.children.e()?R:new vd(null,this.children);var b=K(a),c=this.children.get(b);return c?(a=c.remove(N(a)),b=a.e()?this.children.remove(b):this.children.Oa(b,a),null===this.value&&b.e()?R:new vd(this.value,b)):this};g.get=function(a){if(a.e())return this.value;var b=this.children.get(K(a));return b?b.get(N(a)):null};function Ad(a,b,c){if(b.e())return c;var d=K(b);b=Ad(a.children.get(d)||R,N(b),c);d=b.e()?a.children.remove(d):a.children.Oa(d,b);return new vd(a.value,d)}function Bd(a,b){return Cd(a,Q,b)}function Cd(a,b,c){var d={};a.children.ha(function(a,f){d[a]=Cd(f,b.n(a),c)});return c(b,a.value,d)}function Dd(a,b,c){return Ed(a,b,Q,c)}function Ed(a,b,c,d){var e=a.value?d(c,a.value):!1;if(e)return e;if(b.e())return null;e=K(b);return(a=a.children.get(e))?Ed(a,N(b),c.n(e),d):null}function Fd(a,b,c){Gd(a,b,Q,c)}function Gd(a,b,c,d){if(b.e())return a;a.value&&d(c,a.value);var e=K(b);return(a=a.children.get(e))?Gd(a,N(b),c.n(e),d):R}function Hd(a,b){Id(a,Q,b)}function Id(a,b,c){a.children.ha(function(a,e){Id(e,b.n(a),c)});a.value&&c(b,a.value)}function Jd(a,b){a.children.ha(function(a,d){d.value&&b(a,d.value)})}var R=new vd(null);vd.prototype.toString=function(){var a={};Hd(this,function(b,c){a[b.toString()]=c.toString()});return x(a)};var Kd=/[\[\].#$\/\u0000-\u001F\u007F]/,Ld=/[\[\].#$\u0000-\u001F\u007F]/;function Md(a){return p(a)&&0!==a.length&&!Kd.test(a)}function Nd(a){return null===a||p(a)||ga(a)&&!Xb(a)||ia(a)&&eb(a,".sv")}function Od(a,b,c,d){d&&!n(b)||Pd(A(a,1,d),b,c)}function Pd(a,b,c){babelHelpers.instanceof(c,E)&&(c=new Pc(c,a));if(!n(b))throw Error(a+"contains undefined "+Rc(c));if(ha(b))throw Error(a+"contains a function "+Rc(c)+" with contents: "+b.toString());if(Xb(b))throw Error(a+"contains "+b.toString()+" "+Rc(c));if(p(b)&&b.length>10485760/3&&10485760<nb(b))throw Error(a+"contains a string greater than 10485760 utf8 bytes "+Rc(c)+" ('"+b.substring(0,50)+"...')");if(ia(b)){var d=!1,e=!1;fb(b,function(b,h){if(".value"===b)d=!0;else if(".priority"!==b&&".sv"!==b&&(e=!0,!Md(b)))throw Error(a+" contains an invalid key ("+b+") "+Rc(c)+".  Keys must be non-empty strings and can't contain \".\", \"#\", \"$\", \"/\", \"[\", or \"]\"");c.push(b);Pd(a,h,c);c.pop()});if(d&&e)throw Error(a+" contains \".value\" child "+Rc(c)+" in addition to actual children.")}}function Qd(a,b){var c,d;for(c=0;c<b.length;c++){d=b[c];for(var e=d.slice(),f=0;f<e.length;f++){if((".priority"!==e[f]||f!==e.length-1)&&!Md(e[f]))throw Error(a+"contains an invalid key ("+e[f]+") in path "+d.toString()+". Keys must be non-empty strings and can't contain \".\", \"#\", \"$\", \"/\", \"[\", or \"]\"")}}b.sort(Nc);e=null;for(c=0;c<b.length;c++){d=b[c];if(null!==e&&e.contains(d))throw Error(a+"contains a path "+e.toString()+" that is ancestor of another path "+d.toString());e=d}}function Rd(a,b,c){var d=A(a,1,!1);if(!ia(b)||ea(b))throw Error(d+" must be an object containing the children to replace.");var e=[];fb(b,function(a,b){var k=new E(a);Pd(d,b,c.n(k));if(".priority"===Oc(k)&&!Nd(b))throw Error(d+"contains an invalid value for '"+k.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");e.push(k)});Qd(d,e)}function Sd(a,b,c){if(Xb(c))throw Error(A(a,b,!1)+"is "+c.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Nd(c))throw Error(A(a,b,!1)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}function Td(a,b,c){if(!c||n(b))switch(b){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw Error(A(a,1,c)+"must be a valid event type: \"value\", \"child_added\", \"child_removed\", \"child_changed\", or \"child_moved\".");}}function Ud(a,b){if(n(b)&&!Md(b))throw Error(A(a,2,!0)+"was an invalid key: \""+b+"\".  Firebase keys must be non-empty strings and can't contain \".\", \"#\", \"$\", \"/\", \"[\", or \"]\").")}function Vd(a,b){if(!p(b)||0===b.length||Ld.test(b))throw Error(A(a,1,!1)+"was an invalid path: \""+b+"\". Paths must be non-empty strings and can't contain \".\", \"#\", \"$\", \"[\", or \"]\"")}function Wd(a,b){if(".info"===K(b))throw Error(a+" failed: Can't modify data under /.info/")}function Xd(a,b){var c=b.path.toString(),d;!(d=!p(b.jc.host)||0===b.jc.host.length||!Md(b.jc.pe))&&(d=0!==c.length)&&(c&&(c=c.replace(/^\/*\.info(\/|$)/,"/")),d=!(p(c)&&0!==c.length&&!Ld.test(c)));if(d)throw Error(A(a,1,!1)+"must be a valid firebase URL and the path can't contain \".\", \"#\", \"$\", \"[\", or \"]\".")}function Gb(){this.k=this.B=null}Gb.prototype.find=function(a){if(null!=this.B)return this.B.P(a);if(a.e()||null==this.k)return null;var b=K(a);a=N(a);return this.k.contains(b)?this.k.get(b).find(a):null};function Ib(a,b,c){if(b.e())a.B=c,a.k=null;else if(null!==a.B)a.B=a.B.F(b,c);else{null==a.k&&(a.k=new Gc);var d=K(b);a.k.contains(d)||a.k.add(d,new Gb);a=a.k.get(d);b=N(b);Ib(a,b,c)}}function Yd(a,b){if(b.e())return a.B=null,a.k=null,!0;if(null!==a.B){if(a.B.J())return!1;var c=a.B;a.B=null;c.O(H,function(b,c){Ib(a,new E(b),c)});return Yd(a,b)}return null!==a.k?(c=K(b),b=N(b),a.k.contains(c)&&Yd(a.k.get(c),b)&&a.k.remove(c),a.k.e()?(a.k=null,!0):!1):!0}function Hb(a,b,c){null!==a.B?c(b,a.B):a.O(function(a,e){var f=new E(b.toString()+"/"+a);Hb(e,f,c)})}Gb.prototype.O=function(a){null!==this.k&&Hc(this.k,function(b,c){a(b,c)})};function Zd(a,b){this.type=$d;this.source=a;this.path=b}Zd.prototype.Mc=function(){return this.path.e()?new Zd(this.source,Q):new Zd(this.source,N(this.path))};Zd.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" listen_complete)"};function ae(a,b,c){this.type=be;this.source=a;this.path=b;this.children=c}ae.prototype.Mc=function(a){if(this.path.e())return a=this.children.subtree(new E(a)),a.e()?null:a.value?new ce(this.source,Q,a.value):new ae(this.source,Q,a);D(K(this.path)===a,"Can't get a merge for a child not on the path of the operation");return new ae(this.source,N(this.path),this.children)};ae.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"};function de(a,b,c){this.type=ee;this.source=fe;this.path=a;this.Ob=b;this.Id=c}de.prototype.Mc=function(a){if(this.path.e()){if(null!=this.Ob.value)return D(this.Ob.children.e(),"affectedTree should not have overlapping affected paths."),this;a=this.Ob.subtree(new E(a));return new de(Q,a,this.Id)}D(K(this.path)===a,"operationForChild called for unrelated child.");return new de(N(this.path),this.Ob,this.Id)};de.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" ack write revert="+this.Id+" affectedTree="+this.Ob+")"};function ce(a,b,c){this.type=ge;this.source=a;this.path=b;this.Ga=c}ce.prototype.Mc=function(a){return this.path.e()?new ce(this.source,Q,this.Ga.Q(a)):new ce(this.source,N(this.path),this.Ga)};ce.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" overwrite: "+this.Ga.toString()+")"};var ge=0,be=1,ee=2,$d=3;function he(a,b,c,d){this.ee=a;this.Se=b;this.Hb=c;this.Ee=d;D(!d||b,"Tagged queries must be from server.")}var fe=new he(!0,!1,null,!1),ie=new he(!1,!0,null,!1);he.prototype.toString=function(){return this.ee?"user":this.Ee?"server(queryID="+this.Hb+")":"server"};function je(a,b,c){this.A=a;this.da=b;this.Sb=c}function ke(a){return a.da}function le(a){return a.Sb}function me(a,b){return b.e()?a.da&&!a.Sb:ne(a,K(b))}function ne(a,b){return a.da&&!a.Sb||a.A.Da(b)}je.prototype.j=function(){return this.A};function oe(a,b){this.N=a;this.Ld=b}function pe(a,b,c,d){return new oe(new je(b,c,d),a.Ld)}function qe(a){return a.N.da?a.N.j():null}oe.prototype.w=function(){return this.Ld};function re(a){return a.Ld.da?a.Ld.j():null}function se(){}se.prototype.Te=function(){return null};se.prototype.fe=function(){return null};var te=new se;function ue(a,b,c){this.xf=a;this.Ka=b;this.yd=c}ue.prototype.Te=function(a){var b=this.Ka.N;if(ne(b,a))return b.j().Q(a);b=null!=this.yd?new je(this.yd,!0,!1):this.Ka.w();return this.xf.qc(a,b)};ue.prototype.fe=function(a,b,c){var d=null!=this.yd?this.yd:re(this.Ka);a=this.xf.Xd(d,b,1,c,a);return 0===a.length?null:a[0]};function ve(a,b){this.Sd=a;this.Df=b}function we(a){this.U=a}we.prototype.eb=function(a,b,c,d){var e=new xe,f;if(b.type===ge)b.source.ee?c=ye(this,a,b.path,b.Ga,c,d,e):(D(b.source.Se,"Unknown source."),f=b.source.Ee||le(a.w())&&!b.path.e(),c=ze(this,a,b.path,b.Ga,c,d,f,e));else if(b.type===be)b.source.ee?c=Ae(this,a,b.path,b.children,c,d,e):(D(b.source.Se,"Unknown source."),f=b.source.Ee||le(a.w()),c=Be(this,a,b.path,b.children,c,d,f,e));else if(b.type===ee){if(b.Id){if(b=b.path,null!=c.lc(b))c=a;else{f=new ue(c,a,d);d=a.N.j();if(b.e()||".priority"===K(b))ke(a.w())?b=c.Aa(re(a)):(b=a.w().j(),D(babelHelpers.instanceof(b,O),"serverChildren would be complete if leaf node"),b=c.rc(b)),b=this.U.ya(d,b,e);else{var h=K(b),k=c.qc(h,a.w());null==k&&ne(a.w(),h)&&(k=d.Q(h));b=null!=k?this.U.F(d,h,k,N(b),f,e):a.N.j().Da(h)?this.U.F(d,h,L,N(b),f,e):d;b.e()&&ke(a.w())&&(d=c.Aa(re(a)),d.J()&&(b=this.U.ya(b,d,e)))}d=ke(a.w())||null!=c.lc(Q);c=pe(a,b,d,this.U.Na())}}else c=Ce(this,a,b.path,b.Ob,c,d,e);}else if(b.type===$d)d=b.path,b=a.w(),f=b.j(),h=b.da||d.e(),c=De(this,new oe(a.N,new je(f,h,b.Sb)),d,c,te,e);else throw Mb("Unknown operation type: "+b.type);e=Na(e.fb);d=c;b=d.N;b.da&&(f=b.j().J()||b.j().e(),h=qe(a),(0<e.length||!a.N.da||f&&!b.j().Z(h)||!b.j().C().Z(h.C()))&&e.push(Ee(qe(d))));return new ve(c,e)};function De(a,b,c,d,e,f){var h=b.N;if(null!=d.lc(c))return b;var k;if(c.e())D(ke(b.w()),"If change path is empty, we must have complete server data"),le(b.w())?(e=re(b),d=d.rc(babelHelpers.instanceof(e,O)?e:L)):d=d.Aa(re(b)),f=a.U.ya(b.N.j(),d,f);else{var m=K(c);if(".priority"==m)D(1==Ec(c),"Can't have a priority with additional path components"),f=h.j(),k=b.w().j(),d=d.ad(c,f,k),f=null!=d?a.U.fa(f,d):h.j();else{var l=N(c);ne(h,m)?(k=b.w().j(),d=d.ad(c,h.j(),k),d=null!=d?h.j().Q(m).F(l,d):h.j().Q(m)):d=d.qc(m,b.w());f=null!=d?a.U.F(h.j(),m,d,l,e,f):h.j()}}return pe(b,f,h.da||c.e(),a.U.Na())}function ze(a,b,c,d,e,f,h,k){var m=b.w();h=h?a.U:a.U.Ub();if(c.e())d=h.ya(m.j(),d,null);else if(h.Na()&&!m.Sb)d=m.j().F(c,d),d=h.ya(m.j(),d,null);else{var l=K(c);if(!me(m,c)&&1<Ec(c))return b;var u=N(c);d=m.j().Q(l).F(u,d);d=".priority"==l?h.fa(m.j(),d):h.F(m.j(),l,d,u,te,null)}m=m.da||c.e();b=new oe(b.N,new je(d,m,h.Na()));return De(a,b,c,e,new ue(e,b,f),k)}function ye(a,b,c,d,e,f,h){var k=b.N;e=new ue(e,b,f);if(c.e())h=a.U.ya(b.N.j(),d,h),a=pe(b,h,!0,a.U.Na());else if(f=K(c),".priority"===f)h=a.U.fa(b.N.j(),d),a=pe(b,h,k.da,k.Sb);else{c=N(c);var m=k.j().Q(f);if(!c.e()){var l=e.Te(f);d=null!=l?".priority"===Oc(c)&&l.P(c.parent()).e()?l:l.F(c,d):L}m.Z(d)?a=b:(h=a.U.F(k.j(),f,d,c,e,h),a=pe(b,h,k.da,a.U.Na()))}return a}function Ae(a,b,c,d,e,f,h){var k=b;Hd(d,function(d,l){var u=c.n(d);ne(b.N,K(u))&&(k=ye(a,k,u,l,e,f,h))});Hd(d,function(d,l){var u=c.n(d);ne(b.N,K(u))||(k=ye(a,k,u,l,e,f,h))});return k}function Fe(a,b){Hd(b,function(b,d){a=a.F(b,d)});return a}function Be(a,b,c,d,e,f,h,k){if(b.w().j().e()&&!ke(b.w()))return b;var m=b;c=c.e()?d:Ad(R,c,d);var l=b.w().j();c.children.ha(function(c,d){if(l.Da(c)){var F=b.w().j().Q(c),F=Fe(F,d);m=ze(a,m,new E(c),F,e,f,h,k)}});c.children.ha(function(c,d){var F=!ne(b.w(),c)&&null==d.value;l.Da(c)||F||(F=b.w().j().Q(c),F=Fe(F,d),m=ze(a,m,new E(c),F,e,f,h,k))});return m}function Ce(a,b,c,d,e,f,h){if(null!=e.lc(c))return b;var k=le(b.w()),m=b.w();if(null!=d.value){if(c.e()&&m.da||me(m,c))return ze(a,b,c,m.j().P(c),e,f,k,h);if(c.e()){var l=R;m.j().O(tc,function(a,b){l=l.set(new E(a),b)});return Be(a,b,c,l,e,f,k,h)}return b}l=R;Hd(d,function(a){var b=c.n(a);me(m,b)&&(l=l.set(a,m.j().P(b)))});return Be(a,b,c,l,e,f,k,h)}function Ge(a){this.V=a;this.g=a.m.g}function He(a,b,c,d){var e=[],f=[];ya(b,function(b){b.type===Ie&&a.g.nd(b.qe,b.Ja)&&f.push(new S(Je,b.Ja,b.Xa))});Ke(a,e,Le,b,d,c);Ke(a,e,Me,b,d,c);Ke(a,e,Je,f,d,c);Ke(a,e,Ie,b,d,c);Ke(a,e,Ne,b,d,c);return e}function Ke(a,b,c,d,e,f){d=za(d,function(a){return a.type===c});Ha(d,q(a.Ff,a));ya(d,function(c){var d=Oe(a,c,f);ya(e,function(e){e.nf(c.type)&&b.push(e.createEvent(d,a.V))})})}function Oe(a,b,c){"value"!==b.type&&"child_removed"!==b.type&&(b.Dd=c.Ve(b.Xa,b.Ja,a.g));return b}Ge.prototype.Ff=function(a,b){if(null==a.Xa||null==b.Xa)throw Mb("Should only compare child_ events.");return this.g.compare(new C(a.Xa,a.Ja),new C(b.Xa,b.Ja))};function Pe(a,b){this.V=a;var c=a.m,d=new Qe(c.g),c=T(c)?new Qe(c.g):c.xa?new Re(c):new Se(c);this.hf=new we(c);var e=b.w(),f=b.N,h=d.ya(L,e.j(),null),k=c.ya(L,f.j(),null);this.Ka=new oe(new je(k,f.da,c.Na()),new je(h,e.da,d.Na()));this.Za=[];this.Jf=new Ge(a)}function Te(a){return a.V}g=Pe.prototype;g.w=function(){return this.Ka.w().j()};g.hb=function(a){var b=re(this.Ka);return b&&(T(this.V.m)||!a.e()&&!b.Q(K(a)).e())?b.P(a):null};g.e=function(){return 0===this.Za.length};g.Nb=function(a){this.Za.push(a)};g.kb=function(a,b){var c=[];if(b){D(null==a,"A cancel should cancel all event registrations.");var d=this.V.path;ya(this.Za,function(a){(a=a.Me(b,d))&&c.push(a)})}if(a){for(var e=[],f=0,h;f<this.Za.length;++f){h=this.Za[f];if(!h.matches(a))e.push(h);else if(a.Xe()){e=e.concat(this.Za.slice(f+1));break}}this.Za=e}else this.Za=[];return c};g.eb=function(a,b,c){a.type===be&&null!==a.source.Hb&&(D(re(this.Ka),"We should always have a full cache before handling merges"),D(qe(this.Ka),"Missing event cache, even though we have a server cache"));var d=this.Ka;a=this.hf.eb(d,a,b,c);b=this.hf;c=a.Sd;D(c.N.j().yc(b.U.g),"Event snap not indexed");D(c.w().j().yc(b.U.g),"Server snap not indexed");D(ke(a.Sd.w())||!ke(d.w()),"Once a server snap is complete, it should never go back");this.Ka=a.Sd;return Ue(this,a.Df,a.Sd.N.j(),null)};function Ve(a,b){var c=a.Ka.N,d=[];c.j().J()||c.j().O(H,function(a,b){d.push(new S(Me,b,a))});c.da&&d.push(Ee(c.j()));return Ue(a,d,c.j(),b)}function Ue(a,b,c,d){return He(a.Jf,b,c,d?[d]:a.Za)}function We(a,b,c,d){this.ae=b;this.Md=c;this.Dd=d;this.hd=a}We.prototype.Yb=function(){var a=this.Md.wb();return"value"===this.hd?a.path:a.getParent().path};We.prototype.ge=function(){return this.hd};We.prototype.Tb=function(){return this.ae.Tb(this)};We.prototype.toString=function(){return this.Yb().toString()+":"+this.hd+":"+x(this.Md.be())};function Xe(a,b,c){this.ae=a;this.error=b;this.path=c}Xe.prototype.Yb=function(){return this.path};Xe.prototype.ge=function(){return"cancel"};Xe.prototype.Tb=function(){return this.ae.Tb(this)};Xe.prototype.toString=function(){return this.path.toString()+":cancel"};function Ye(){this.vb=[]}function Ze(a,b){for(var c=null,d=0;d<b.length;d++){var e=b[d],f=e.Yb();null===c||f.Z(c.Yb())||(a.vb.push(c),c=null);null===c&&(c=new $e(f));c.add(e)}c&&a.vb.push(c)}function af(a,b,c){Ze(a,c);bf(a,function(a){return a.Z(b)})}function cf(a,b,c){Ze(a,c);bf(a,function(a){return a.contains(b)||b.contains(a)})}function bf(a,b){for(var c=!0,d=0,e;d<a.vb.length;d++){e=a.vb[d];if(e)if(e=e.Yb(),b(e)){for(var e=a.vb[d],f=0,h;f<e.jd.length;f++){h=e.jd[f];if(null!==h){e.jd[f]=null;var k=h.Tb();Qb&&I("event: "+h.toString());fc(k)}}a.vb[d]=null}else c=!1}c&&(a.vb=[])}function $e(a){this.qa=a;this.jd=[]}$e.prototype.add=function(a){this.jd.push(a)};$e.prototype.Yb=function(){return this.qa};function Qe(a){this.g=a}g=Qe.prototype;g.F=function(a,b,c,d,e,f){D(a.yc(this.g),"A node must be indexed if only a child is updated");e=a.Q(b);if(e.P(d).Z(c.P(d))&&e.e()==c.e())return a;null!=f&&(c.e()?a.Da(b)?df(f,new S(Le,e,b)):D(a.J(),"A child remove without an old child only makes sense on a leaf node"):e.e()?df(f,new S(Me,c,b)):df(f,new S(Ie,c,b,e)));return a.J()&&c.e()?a:a.T(b,c).nb(this.g)};g.ya=function(a,b,c){null!=c&&(a.J()||a.O(H,function(a,e){b.Da(a)||df(c,new S(Le,e,a))}),b.J()||b.O(H,function(b,e){if(a.Da(b)){var f=a.Q(b);f.Z(e)||df(c,new S(Ie,e,b,f))}else df(c,new S(Me,e,b))}));return b.nb(this.g)};g.fa=function(a,b){return a.e()?L:a.fa(b)};g.Na=function(){return!1};g.Ub=function(){return this};function Se(a){this.he=new Qe(a.g);this.g=a.g;var b;a.ka?(b=ef(a),b=a.g.Ec(ff(a),b)):b=a.g.Hc();this.Uc=b;a.na?(b=gf(a),a=a.g.Ec(hf(a),b)):a=a.g.Fc();this.vc=a}g=Se.prototype;g.matches=function(a){return 0>=this.g.compare(this.Uc,a)&&0>=this.g.compare(a,this.vc)};g.F=function(a,b,c,d,e,f){this.matches(new C(b,c))||(c=L);return this.he.F(a,b,c,d,e,f)};g.ya=function(a,b,c){b.J()&&(b=L);var d=b.nb(this.g),d=d.fa(L),e=this;b.O(H,function(a,b){e.matches(new C(a,b))||(d=d.T(a,L))});return this.he.ya(a,d,c)};g.fa=function(a){return a};g.Na=function(){return!0};g.Ub=function(){return this.he};function Re(a){this.sa=new Se(a);this.g=a.g;D(a.xa,"Only valid if limit has been set");this.oa=a.oa;this.Ib=!jf(a)}g=Re.prototype;g.F=function(a,b,c,d,e,f){this.sa.matches(new C(b,c))||(c=L);return a.Q(b).Z(c)?a:a.Eb()<this.oa?this.sa.Ub().F(a,b,c,d,e,f):kf(this,a,b,c,e,f)};g.ya=function(a,b,c){var d;if(b.J()||b.e())d=L.nb(this.g);else if(2*this.oa<b.Eb()&&b.yc(this.g)){d=L.nb(this.g);b=this.Ib?b.Zb(this.sa.vc,this.g):b.Xb(this.sa.Uc,this.g);for(var e=0;0<b.Pa.length&&e<this.oa;){var f=M(b),h;if(h=this.Ib?0>=this.g.compare(this.sa.Uc,f):0>=this.g.compare(f,this.sa.vc))d=d.T(f.name,f.R),e++;else break}}else{d=b.nb(this.g);d=d.fa(L);var k,m,l;if(this.Ib){b=d.We(this.g);k=this.sa.vc;m=this.sa.Uc;var u=nc(this.g);l=function(a,b){return u(b,a)}}else b=d.Wb(this.g),k=this.sa.Uc,m=this.sa.vc,l=nc(this.g);for(var e=0,z=!1;0<b.Pa.length;){f=M(b),!z&&0>=l(k,f)&&(z=!0),(h=z&&e<this.oa&&0>=l(f,m))?e++:d=d.T(f.name,L)}}return this.sa.Ub().ya(a,d,c)};g.fa=function(a){return a};g.Na=function(){return!0};g.Ub=function(){return this.sa.Ub()};function kf(a,b,c,d,e,f){var h;if(a.Ib){var k=nc(a.g);h=function(a,b){return k(b,a)}}else h=nc(a.g);D(b.Eb()==a.oa,"");var m=new C(c,d),l=a.Ib?pd(b,a.g):qd(b,a.g),u=a.sa.matches(m);if(b.Da(c)){for(var z=b.Q(c),l=e.fe(a.g,l,a.Ib);null!=l&&(l.name==c||b.Da(l.name));){l=e.fe(a.g,l,a.Ib)}e=null==l?1:h(l,m);if(u&&!d.e()&&0<=e)return null!=f&&df(f,new S(Ie,d,c,z)),b.T(c,d);null!=f&&df(f,new S(Le,z,c));b=b.T(c,L);return null!=l&&a.sa.matches(l)?(null!=f&&df(f,new S(Me,l.R,l.name)),b.T(l.name,l.R)):b}return d.e()?b:u&&0<=h(l,m)?(null!=f&&(df(f,new S(Le,l.R,l.name)),df(f,new S(Me,d,c))),b.T(c,d).T(l.name,L)):b}function S(a,b,c,d){this.type=a;this.Ja=b;this.Xa=c;this.qe=d;this.Dd=void 0}function Ee(a){return new S(Ne,a)}var Me="child_added",Le="child_removed",Ie="child_changed",Je="child_moved",Ne="value";function xe(){this.fb={}}function df(a,b){var c=b.type,d=b.Xa;D(c==Me||c==Ie||c==Le,"Only child changes supported for tracking");D(".priority"!==d,"Only non-priority child changes can be tracked.");var e=w(a.fb,d);if(e){var f=e.type;if(c==Me&&f==Le)a.fb[d]=new S(Ie,b.Ja,d,e.Ja);else if(c==Le&&f==Me)delete a.fb[d];else if(c==Le&&f==Ie)a.fb[d]=new S(Le,e.qe,d);else if(c==Ie&&f==Me)a.fb[d]=new S(Me,b.Ja,d);else if(c==Ie&&f==Ie)a.fb[d]=new S(Ie,b.Ja,d,e.qe);else throw Mb("Illegal combination of changes: "+b+" occurred after "+e)}else a.fb[d]=b}function lf(){this.Rb=this.na=this.Kb=this.ka=this.xa=!1;this.oa=0;this.mb="";this.dc=null;this.zb="";this.ac=null;this.xb="";this.g=H}var mf=new lf;function jf(a){return""===a.mb?a.ka:"l"===a.mb}function ff(a){D(a.ka,"Only valid if start has been set");return a.dc}function ef(a){D(a.ka,"Only valid if start has been set");return a.Kb?a.zb:"[MIN_NAME]"}function hf(a){D(a.na,"Only valid if end has been set");return a.ac}function gf(a){D(a.na,"Only valid if end has been set");return a.Rb?a.xb:"[MAX_NAME]"}function nf(a){var b=new lf;b.xa=a.xa;b.oa=a.oa;b.ka=a.ka;b.dc=a.dc;b.Kb=a.Kb;b.zb=a.zb;b.na=a.na;b.ac=a.ac;b.Rb=a.Rb;b.xb=a.xb;b.g=a.g;b.mb=a.mb;return b}g=lf.prototype;g.ne=function(a){var b=nf(this);b.xa=!0;b.oa=a;b.mb="l";return b};g.oe=function(a){var b=nf(this);b.xa=!0;b.oa=a;b.mb="r";return b};g.Nd=function(a,b){var c=nf(this);c.ka=!0;n(a)||(a=null);c.dc=a;null!=b?(c.Kb=!0,c.zb=b):(c.Kb=!1,c.zb="");return c};g.gd=function(a,b){var c=nf(this);c.na=!0;n(a)||(a=null);c.ac=a;n(b)?(c.Rb=!0,c.xb=b):(c.vg=!1,c.xb="");return c};function of(a,b){var c=nf(a);c.g=b;return c}function pf(a){var b={};a.ka&&(b.sp=a.dc,a.Kb&&(b.sn=a.zb));a.na&&(b.ep=a.ac,a.Rb&&(b.en=a.xb));if(a.xa){b.l=a.oa;var c=a.mb;""===c&&(c=jf(a)?"l":"r");b.vf=c}a.g!==H&&(b.i=a.g.toString());return b}function T(a){return!(a.ka||a.na||a.xa)}function qf(a){return T(a)&&a.g==H}function rf(a){var b={};if(qf(a))return b;var c;a.g===H?c="$priority":a.g===wc?c="$value":a.g===tc?c="$key":(D(babelHelpers.instanceof(a.g,pc),"Unrecognized index type!"),c=a.g.toString());b.orderBy=x(c);a.ka&&(b.startAt=x(a.dc),a.Kb&&(b.startAt+=","+x(a.zb)));a.na&&(b.endAt=x(a.ac),a.Rb&&(b.endAt+=","+x(a.xb)));a.xa&&(jf(a)?b.limitToFirst=a.oa:b.limitToLast=a.oa);return b}g.toString=function(){return x(pf(this))};function sf(a){this.W=a}var tf=new sf(new vd(null));function uf(a,b,c){if(b.e())return new sf(new vd(c));var d=zd(a.W,b);if(null!=d){var e=d.path,d=d.value;b=P(e,b);d=d.F(b,c);return new sf(a.W.set(e,d))}a=Ad(a.W,b,new vd(c));return new sf(a)}function vf(a,b,c){var d=a;fb(c,function(a,c){d=uf(d,b.n(a),c)});return d}sf.prototype.Ed=function(a){if(a.e())return tf;a=Ad(this.W,a,R);return new sf(a)};function wf(a,b){var c=zd(a.W,b);return null!=c?a.W.get(c.path).P(P(c.path,b)):null}function xf(a){var b=[],c=a.W.value;null!=c?c.J()||c.O(H,function(a,c){b.push(new C(a,c))}):a.W.children.ha(function(a,c){null!=c.value&&b.push(new C(a,c.value))});return b}function yf(a,b){if(b.e())return a;var c=wf(a,b);return null!=c?new sf(new vd(c)):new sf(a.W.subtree(b))}sf.prototype.e=function(){return this.W.e()};sf.prototype.apply=function(a){return zf(Q,this.W,a)};function zf(a,b,c){if(null!=b.value)return c.F(a,b.value);var d=null;b.children.ha(function(b,f){".priority"===b?(D(null!==f.value,"Priority writes must always be leaf nodes"),d=f.value):c=zf(a.n(b),f,c)});c.P(a).e()||null===d||(c=c.F(a.n(".priority"),d));return c}function Af(){this.Jd=L}Af.prototype.j=function(a){return this.Jd.P(a)};Af.prototype.toString=function(){return this.Jd.toString()};function Bf(a){this.oc=a}Bf.prototype.getToken=function(a){return this.oc.INTERNAL.getToken(a).then(null,function(a){return a&&"auth/token-not-initialized"===a.code?(I("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(a)})};function Cf(a,b){a.oc.INTERNAL.addAuthTokenListener(b)}function Df(){this.S=tf;this.la=[];this.Bc=-1}function Ef(a,b){for(var c=0,d;c<a.la.length;c++){d=a.la[c];if(d.Zc===b)return d}return null}g=Df.prototype;g.Ed=function(a){var b=Ea(this.la,function(b){return b.Zc===a});D(0<=b,"removeWrite called with nonexistent writeId.");var c=this.la[b];this.la.splice(b,1);for(var d=c.visible,e=!1,f=this.la.length-1,h;d&&0<=f;){h=this.la[f];h.visible&&(f>=b&&Ff(h,c.path)?d=!1:c.path.contains(h.path)&&(e=!0));f--}if(d){if(e)this.S=Gf(this.la,Hf,Q),this.Bc=0<this.la.length?this.la[this.la.length-1].Zc:-1;else if(c.Ga)this.S=this.S.Ed(c.path);else{var k=this;v(c.children,function(a,b){k.S=k.S.Ed(c.path.n(b))})}return!0}return!1};g.Aa=function(a,b,c,d){if(c||d){var e=yf(this.S,a);return!d&&e.e()?b:d||null!=b||null!=wf(e,Q)?(e=Gf(this.la,function(b){return(b.visible||d)&&(!c||!(0<=xa(c,b.Zc)))&&(b.path.contains(a)||a.contains(b.path))},a),b=b||L,e.apply(b)):null}e=wf(this.S,a);if(null!=e)return e;e=yf(this.S,a);return e.e()?b:null!=b||null!=wf(e,Q)?(b=b||L,e.apply(b)):null};g.rc=function(a,b){var c=L,d=wf(this.S,a);if(d)d.J()||d.O(H,function(a,b){c=c.T(a,b)});else if(b){var e=yf(this.S,a);b.O(H,function(a,b){var d=yf(e,new E(a)).apply(b);c=c.T(a,d)});ya(xf(e),function(a){c=c.T(a.name,a.R)})}else e=yf(this.S,a),ya(xf(e),function(a){c=c.T(a.name,a.R)});return c};g.ad=function(a,b,c,d){D(c||d,"Either existingEventSnap or existingServerSnap must exist");a=a.n(b);if(null!=wf(this.S,a))return null;a=yf(this.S,a);return a.e()?d.P(b):a.apply(d.P(b))};g.qc=function(a,b,c){a=a.n(b);var d=wf(this.S,a);return null!=d?d:ne(c,b)?yf(this.S,a).apply(c.j().Q(b)):null};g.lc=function(a){return wf(this.S,a)};g.Xd=function(a,b,c,d,e,f){var h;a=yf(this.S,a);h=wf(a,Q);if(null==h)if(null!=b)h=a.apply(b);else return[];h=h.nb(f);if(h.e()||h.J())return[];b=[];a=nc(f);e=e?h.Zb(c,f):h.Xb(c,f);for(f=M(e);f&&b.length<d;){0!==a(f,c)&&b.push(f),f=M(e)}return b};function Ff(a,b){return a.Ga?a.path.contains(b):!!Qa(a.children,function(c,d){return a.path.n(d).contains(b)})}function Hf(a){return a.visible}function Gf(a,b,c){for(var d=tf,e=0,f;e<a.length;++e){f=a[e];if(b(f)){var h=f.path;if(f.Ga)c.contains(h)?(h=P(c,h),d=uf(d,h,f.Ga)):h.contains(c)&&(h=P(h,c),d=uf(d,Q,f.Ga.P(h)));else if(f.children){if(c.contains(h))h=P(c,h),d=vf(d,h,f.children);else{if(h.contains(c))if(h=P(h,c),h.e())d=vf(d,Q,f.children);else if(f=w(f.children,K(h)))f=f.P(N(h)),d=uf(d,Q,f)}}else throw Mb("WriteRecord should have .snap or .children")}}return d}function If(a,b){this.Lb=a;this.W=b}g=If.prototype;g.Aa=function(a,b,c){return this.W.Aa(this.Lb,a,b,c)};g.rc=function(a){return this.W.rc(this.Lb,a)};g.ad=function(a,b,c){return this.W.ad(this.Lb,a,b,c)};g.lc=function(a){return this.W.lc(this.Lb.n(a))};g.Xd=function(a,b,c,d,e){return this.W.Xd(this.Lb,a,b,c,d,e)};g.qc=function(a,b){return this.W.qc(this.Lb,a,b)};g.n=function(a){return new If(this.Lb.n(a),this.W)};function Jf(a,b){this.rf={};this.Vc=new Kf(a);this.va=b;var c=1E4+2E4*Math.random();hc(q(this.lf,this),_Mathfloor(c))}Jf.prototype.lf=function(){var a=this.Vc.get(),b={},c=!1,d;for(d in a){0<a[d]&&eb(this.rf,d)&&(b[d]=a[d],c=!0)}c&&this.va.ye(b);hc(q(this.lf,this),_Mathfloor(6E5*Math.random()))};function Lf(){this.tc={}}function Mf(a,b,c){n(c)||(c=1);eb(a.tc,b)||(a.tc[b]=0);a.tc[b]+=c}Lf.prototype.get=function(){return Ta(this.tc)};function Kf(a){this.Ef=a;this.rd=null}Kf.prototype.get=function(){var a=this.Ef.get(),b=Ta(a);if(this.rd)for(var c in this.rd){b[c]-=this.rd[c]}this.rd=a;return b};var Nf={},Of={};function Pf(a){a=a.toString();Nf[a]||(Nf[a]=new Lf);return Nf[a]}function Qf(a,b){var c=a.toString();Of[c]||(Of[c]=b());return Of[c]}function Rf(a,b,c){this.f=Tb("p:rest:");this.L=a;this.Gb=b;this.$c=c;this.$={}}function Sf(a,b){if(n(b))return"tag$"+b;D(qf(a.m),"should have a tag if it's not a default query.");return a.path.toString()}g=Rf.prototype;g.$e=function(a,b,c,d){var e=a.path.toString();this.f("Listen called for "+e+" "+a.ja());var f=Sf(a,c),h={};this.$[f]=h;a=rf(a.m);var k=this;Tf(this,e+".json",a,function(a,b){var u=b;404===a&&(a=u=null);null===a&&k.Gb(e,u,!1,c);w(k.$,f)===h&&d(a?401==a?"permission_denied":"rest_error:"+a:"ok",null)})};g.uf=function(a,b){var c=Sf(a,b);delete this.$[c]};g.kf=function(){};g.re=function(){};g.cf=function(){};g.xd=function(){};g.put=function(){};g.af=function(){};g.ye=function(){};function Tf(a,b,c,d){c=c||{};c.format="export";a.$c.getToken(!1).then(function(e){(e=e&&e.accessToken)&&(c.auth=e);var f=(a.L.Sc?"https://":"http://")+a.L.host+b+"?"+gb(c);a.f("Sending REST request for "+f);var h=new XMLHttpRequest;h.onreadystatechange=function(){if(d&&4===h.readyState){a.f("REST Response for "+f+" received. status:",h.status,"response:",h.responseText);var b=null;if(200<=h.status&&300>h.status){try{b=lb(h.responseText)}catch(c){J("Failed to parse JSON response for "+f+": "+h.responseText)}d(null,b)}else 401!==h.status&&404!==h.status&&J("Got unsuccessful REST response for "+f+" Status: "+h.status),d(h.status);d=null}};h.open("GET",f,!0);h.send()})}function Uf(a){this.te=a;this.Bd=[];this.Qb=0;this.Yd=-1;this.Fb=null}function Vf(a,b,c){a.Yd=b;a.Fb=c;a.Yd<a.Qb&&(a.Fb(),a.Fb=null)}function Wf(a,b,c){for(a.Bd[b]=c;a.Bd[a.Qb];){var d=a.Bd[a.Qb];delete a.Bd[a.Qb];for(var e=0;e<d.length;++e){if(d[e]){fc(function(){a.te(d[e])})}}if(a.Qb===a.Yd){a.Fb&&(clearTimeout(a.Fb),a.Fb(),a.Fb=null);break}a.Qb++}}var Cb="websocket",Db="long_polling",Xf=null;"undefined"!==typeof MozWebSocket?Xf=MozWebSocket:"undefined"!==typeof WebSocket&&(Xf=WebSocket);function Yf(a,b,c,d){this.Zd=a;this.f=Tb(this.Zd);this.frames=this.zc=null;this.pb=this.qb=this.Fe=0;this.Va=Pf(b);a={v:"5"};"undefined"!==typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(a.r="f");c&&(a.s=c);d&&(a.ls=d);this.Ke=Bb(b,Cb,a)}var Zf;Yf.prototype.open=function(a,b){this.ib=b;this.Xf=a;this.f("Websocket connecting to "+this.Ke);this.wc=!1;xb.set("previous_websocket_failure",!0);try{this.Ia=new Xf(this.Ke)}catch(c){this.f("Error instantiating WebSocket.");var d=c.message||c.data;d&&this.f(d);this.bb();return}var e=this;this.Ia.onopen=function(){e.f("Websocket connected.");e.wc=!0};this.Ia.onclose=function(){e.f("Websocket connection was disconnected.");e.Ia=null;e.bb()};this.Ia.onmessage=function(a){if(null!==e.Ia)if(a=a.data,e.pb+=a.length,Mf(e.Va,"bytes_received",a.length),$f(e),null!==e.frames)ag(e,a);else{a:{D(null===e.frames,"We already have a frame buffer");if(6>=a.length){var b=+a;if(!isNaN(b)){e.Fe=b;e.frames=[];a=null;break a}}e.Fe=1;e.frames=[]}null!==a&&ag(e,a)}};this.Ia.onerror=function(a){e.f("WebSocket error.  Closing connection.");(a=a.message||a.data)&&e.f(a);e.bb()}};Yf.prototype.start=function(){};Yf.isAvailable=function(){var a=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var b=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);b&&1<b.length&&4.4>parseFloat(b[1])&&(a=!0)}return!a&&null!==Xf&&!Zf};Yf.responsesRequiredToBeHealthy=2;Yf.healthyTimeout=3E4;g=Yf.prototype;g.sd=function(){xb.remove("previous_websocket_failure")};function ag(a,b){a.frames.push(b);if(a.frames.length==a.Fe){var c=a.frames.join("");a.frames=null;c=lb(c);a.Xf(c)}}g.send=function(a){$f(this);a=x(a);this.qb+=a.length;Mf(this.Va,"bytes_sent",a.length);a=bc(a,16384);1<a.length&&bg(this,a.length+"");for(var b=0;b<a.length;b++){bg(this,a[b])}};g.Tc=function(){this.Ab=!0;this.zc&&(clearInterval(this.zc),this.zc=null);this.Ia&&(this.Ia.close(),this.Ia=null)};g.bb=function(){this.Ab||(this.f("WebSocket is closing itself"),this.Tc(),this.ib&&(this.ib(this.wc),this.ib=null))};g.close=function(){this.Ab||(this.f("WebSocket is being closed"),this.Tc())};function $f(a){clearInterval(a.zc);a.zc=setInterval(function(){a.Ia&&bg(a,"0");$f(a)},45000)}function bg(a,b){try{a.Ia.send(b)}catch(c){a.f("Exception thrown from WebSocket.send():",c.message||c.data,"Closing connection."),setTimeout(q(a.bb,a),0)}}function cg(a,b,c,d){this.Zd=a;this.f=Tb(a);this.jc=b;this.pb=this.qb=0;this.Va=Pf(b);this.tf=c;this.wc=!1;this.Cb=d;this.Yc=function(a){return Bb(b,Db,a)}}var dg,eg;cg.prototype.open=function(a,b){this.Ne=0;this.ia=b;this.bf=new Uf(a);this.Ab=!1;var c=this;this.sb=setTimeout(function(){c.f("Timed out trying to connect.");c.bb();c.sb=null},30000);Yb(function(){if(!c.Ab){c.Ta=new fg(function(a,b,d){gg(c,arguments);if(c.Ta)if(c.sb&&(clearTimeout(c.sb),c.sb=null),c.wc=!0,"start"==a)c.id=b,c.ff=d;else if("close"===a)b?(c.Ta.Kd=!1,Vf(c.bf,b,function(){c.bb()})):c.bb();else throw Error("Unrecognized command received: "+a)},function(a,b){gg(c,arguments);Wf(c.bf,a,b)},function(){c.bb()},c.Yc);var a={start:"t",ser:_Mathfloor(1E8*Math.random())};c.Ta.Qd&&(a.cb=c.Ta.Qd);a.v="5";c.tf&&(a.s=c.tf);c.Cb&&(a.ls=c.Cb);"undefined"!==typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(a.r="f");a=c.Yc(a);c.f("Connecting via long-poll to "+a);hg(c.Ta,a,function(){})}})};cg.prototype.start=function(){var a=this.Ta,b=this.ff;a.Vf=this.id;a.Wf=b;for(a.Ud=!0;ig(a);){}a=this.id;b=this.ff;this.fc=document.createElement("iframe");var c={dframe:"t",id:a,pw:b};this.fc.src=this.Yc(c);this.fc.style.display="none";document.body.appendChild(this.fc)};cg.isAvailable=function(){return dg||!eg&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===("undefined"===typeof window?"undefined":babelHelpers.typeof(window))&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===("undefined"===typeof Windows?"undefined":babelHelpers.typeof(Windows))&&"object"===babelHelpers.typeof(Windows.rg))&&!0};g=cg.prototype;g.sd=function(){};g.Tc=function(){this.Ab=!0;this.Ta&&(this.Ta.close(),this.Ta=null);this.fc&&(document.body.removeChild(this.fc),this.fc=null);this.sb&&(clearTimeout(this.sb),this.sb=null)};g.bb=function(){this.Ab||(this.f("Longpoll is closing itself"),this.Tc(),this.ia&&(this.ia(this.wc),this.ia=null))};g.close=function(){this.Ab||(this.f("Longpoll is being closed."),this.Tc())};g.send=function(a){a=x(a);this.qb+=a.length;Mf(this.Va,"bytes_sent",a.length);a=mb(a);a=ab(a,!0);a=bc(a,1840);for(var b=0,c;b<a.length;b++){c=this.Ta;c.Qc.push({jg:this.Ne,pg:a.length,Pe:a[b]});c.Ud&&ig(c);this.Ne++}};function gg(a,b){var c=x(b).length;a.pb+=c;Mf(a.Va,"bytes_received",c)}function fg(a,b,c,d){this.Yc=d;this.ib=c;this.ve=new Gc;this.Qc=[];this.$d=_Mathfloor(1E8*Math.random());this.Kd=!0;this.Qd=Lb();window["pLPCommand"+this.Qd]=a;window["pRTLPCB"+this.Qd]=b;a=document.createElement("iframe");a.style.display="none";if(document.body){document.body.appendChild(a);try{a.contentWindow.document||I("No IE domain setting required")}catch(e){a.src="javascript:void((function(){document.open();document.domain='"+document.domain+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";a.contentDocument?a.gb=a.contentDocument:a.contentWindow?a.gb=a.contentWindow.document:a.document&&(a.gb=a.document);this.Ea=a;a="";this.Ea.src&&"javascript:"===this.Ea.src.substr(0,11)&&(a="<script>document.domain=\""+document.domain+"\";</script>");a="<html><body>"+a+"</body></html>";try{this.Ea.gb.open(),this.Ea.gb.write(a),this.Ea.gb.close()}catch(f){I("frame writing exception"),f.stack&&I(f.stack),I(f)}}fg.prototype.close=function(){this.Ud=!1;if(this.Ea){this.Ea.gb.body.innerHTML="";var a=this;setTimeout(function(){null!==a.Ea&&(document.body.removeChild(a.Ea),a.Ea=null)},0)}var b=this.ib;b&&(this.ib=null,b())};function ig(a){if(a.Ud&&a.Kd&&a.ve.count()<(0<a.Qc.length?2:1)){a.$d++;for(var b={id:a.Vf,pw:a.Wf,ser:a.$d},b=a.Yc(b),c="",d=0;0<a.Qc.length;){if(1870>=a.Qc[0].Pe.length+30+c.length){var e=a.Qc.shift(),c=c+"&seg"+d+"="+e.jg+"&ts"+d+"="+e.pg+"&d"+d+"="+e.Pe;d++}else break}jg(a,b+c,a.$d);return!0}return!1}function jg(a,b,c){function d(){a.ve.remove(c);ig(a)}a.ve.add(c,1);var e=setTimeout(d,25000);hg(a,b,function(){clearTimeout(e);d()})}function hg(a,b,c){setTimeout(function(){try{if(a.Kd){var d=a.Ea.gb.createElement("script");d.type="text/javascript";d.async=!0;d.src=b;d.onload=d.onreadystatechange=function(){var a=d.readyState;a&&"loaded"!==a&&"complete"!==a||(d.onload=d.onreadystatechange=null,d.parentNode&&d.parentNode.removeChild(d),c())};d.onerror=function(){I("Long-poll script failed to load: "+b);a.Kd=!1;a.close()};a.Ea.gb.body.appendChild(d)}}catch(e){}},1)}function kg(a){lg(this,a)}var mg=[cg,Yf];function lg(a,b){var c=Yf&&Yf.isAvailable(),d=c&&!(xb.Ze||!0===xb.get("previous_websocket_failure"));b.qg&&(c||J("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),d=!0);if(d)a.Wc=[Yf];else{var e=a.Wc=[];cc(mg,function(a,b){b&&b.isAvailable()&&e.push(b)})}}function ng(a){if(0<a.Wc.length)return a.Wc[0];throw Error("No transports available")}function og(a,b,c,d,e,f,h){this.id=a;this.f=Tb("c:"+this.id+":");this.te=c;this.Lc=d;this.ia=e;this.se=f;this.L=b;this.Ad=[];this.Le=0;this.sf=new kg(b);this.Ua=0;this.Cb=h;this.f("Connection created");pg(this)}function pg(a){var b=ng(a.sf);a.I=new b("c:"+a.id+":"+a.Le++,a.L,void 0,a.Cb);a.xe=b.responsesRequiredToBeHealthy||0;var c=qg(a,a.I),d=rg(a,a.I);a.Xc=a.I;a.Rc=a.I;a.D=null;a.Bb=!1;setTimeout(function(){a.I&&a.I.open(c,d)},0);b=b.healthyTimeout||0;0<b&&(a.md=hc(function(){a.md=null;a.Bb||(a.I&&102400<a.I.pb?(a.f("Connection exceeded healthy timeout but has received "+a.I.pb+" bytes.  Marking connection healthy."),a.Bb=!0,a.I.sd()):a.I&&10240<a.I.qb?a.f("Connection exceeded healthy timeout but has sent "+a.I.qb+" bytes.  Leaving connection alive."):(a.f("Closing unhealthy connection after timeout."),a.close()))},_Mathfloor(b)))}function rg(a,b){return function(c){b===a.I?(a.I=null,c||0!==a.Ua?1===a.Ua&&a.f("Realtime connection lost."):(a.f("Realtime connection failed."),"s-"===a.L.$a.substr(0,2)&&(xb.remove("host:"+a.L.host),a.L.$a=a.L.host)),a.close()):b===a.D?(a.f("Secondary connection lost."),c=a.D,a.D=null,a.Xc!==c&&a.Rc!==c||a.close()):a.f("closing an old connection")}}function qg(a,b){return function(c){if(2!=a.Ua)if(b===a.Rc){var d=$b("t",c);c=$b("d",c);if("c"==d){if(d=$b("t",c),"d"in c)if(c=c.d,"h"===d){var d=c.ts,e=c.v,f=c.h;a.qf=c.s;Ab(a.L,f);0==a.Ua&&(a.I.start(),sg(a,a.I,d),"5"!==e&&J("Protocol version mismatch detected"),c=a.sf,(c=1<c.Wc.length?c.Wc[1]:null)&&tg(a,c))}else if("n"===d){a.f("recvd end transmission on primary");a.Rc=a.D;for(c=0;c<a.Ad.length;++c){a.wd(a.Ad[c])}a.Ad=[];ug(a)}else"s"===d?(a.f("Connection shutdown command received. Shutting down..."),a.se&&(a.se(c),a.se=null),a.ia=null,a.close()):"r"===d?(a.f("Reset packet received.  New host: "+c),Ab(a.L,c),1===a.Ua?a.close():(vg(a),pg(a))):"e"===d?Ub("Server Error: "+c):"o"===d?(a.f("got pong on primary."),wg(a),xg(a)):Ub("Unknown control packet command: "+d)}else"d"==d&&a.wd(c)}else if(b===a.D){if(d=$b("t",c),c=$b("d",c),"c"==d)"t"in c&&(c=c.t,"a"===c?yg(a):"r"===c?(a.f("Got a reset on secondary, closing it"),a.D.close(),a.Xc!==a.D&&a.Rc!==a.D||a.close()):"o"===c&&(a.f("got pong on secondary."),a.pf--,yg(a)));else if("d"==d)a.Ad.push(c);else throw Error("Unknown protocol layer: "+d);}else a.f("message on old connection")}}og.prototype.ua=function(a){zg(this,{t:"d",d:a})};function ug(a){a.Xc===a.D&&a.Rc===a.D&&(a.f("cleaning up and promoting a connection: "+a.D.Zd),a.I=a.D,a.D=null)}function yg(a){0>=a.pf?(a.f("Secondary connection is healthy."),a.Bb=!0,a.D.sd(),a.D.start(),a.f("sending client ack on secondary"),a.D.send({t:"c",d:{t:"a",d:{}}}),a.f("Ending transmission on primary"),a.I.send({t:"c",d:{t:"n",d:{}}}),a.Xc=a.D,ug(a)):(a.f("sending ping on secondary."),a.D.send({t:"c",d:{t:"p",d:{}}}))}og.prototype.wd=function(a){wg(this);this.te(a)};function wg(a){a.Bb||(a.xe--,0>=a.xe&&(a.f("Primary connection is healthy."),a.Bb=!0,a.I.sd()))}function tg(a,b){a.D=new b("c:"+a.id+":"+a.Le++,a.L,a.qf);a.pf=b.responsesRequiredToBeHealthy||0;a.D.open(qg(a,a.D),rg(a,a.D));hc(function(){a.D&&(a.f("Timed out trying to upgrade."),a.D.close())},60000)}function sg(a,b,c){a.f("Realtime connection established.");a.I=b;a.Ua=1;a.Lc&&(a.Lc(c,a.qf),a.Lc=null);0===a.xe?(a.f("Primary connection is healthy."),a.Bb=!0):hc(function(){xg(a)},5000)}function xg(a){a.Bb||1!==a.Ua||(a.f("sending ping on primary."),zg(a,{t:"c",d:{t:"p",d:{}}}))}function zg(a,b){if(1!==a.Ua)throw"Connection is not connected";a.Xc.send(b)}og.prototype.close=function(){2!==this.Ua&&(this.f("Closing realtime connection."),this.Ua=2,vg(this),this.ia&&(this.ia(),this.ia=null))};function vg(a){a.f("Shutting down all connections");a.I&&(a.I.close(),a.I=null);a.D&&(a.D.close(),a.D=null);a.md&&(clearTimeout(a.md),a.md=null)}function Ag(a,b,c,d,e,f){this.id=Bg++;this.f=Tb("p:"+this.id+":");this.qd={};this.$={};this.pa=[];this.Oc=0;this.Kc=[];this.ma=!1;this.Sa=1E3;this.td=3E5;this.Gb=b;this.Jc=c;this.ue=d;this.L=a;this.ob=this.Fa=this.Cb=this.ze=null;this.$c=e;this.de=!1;this.ke=0;if(f)throw Error("Auth override specified in options, but not supported on non Node.js platforms");this.Vd=f;this.ub=null;this.Mb=!1;this.Gd={};this.ig=0;this.Re=!0;this.Ac=this.me=null;Cg(this,0);Mc.Vb().gc("visible",this.Zf,this);-1===a.host.indexOf("fblocal")&&Lc.Vb().gc("online",this.Yf,this)}var Bg=0,Dg=0;g=Ag.prototype;g.ua=function(a,b,c){var d=++this.ig;a={r:d,a:a,b:b};this.f(x(a));D(this.ma,"sendRequest call when we're not connected not allowed.");this.Fa.ua(a);c&&(this.Gd[d]=c)};g.$e=function(a,b,c,d){var e=a.ja(),f=a.path.toString();this.f("Listen called for "+f+" "+e);this.$[f]=this.$[f]||{};D(qf(a.m)||!T(a.m),"listen() called for non-default but complete query");D(!this.$[f][e],"listen() called twice for same path/queryId.");a={G:d,ld:b,eg:a,tag:c};this.$[f][e]=a;this.ma&&Eg(this,a)};function Eg(a,b){var c=b.eg,d=c.path.toString(),e=c.ja();a.f("Listen on "+d+" for "+e);var f={p:d};b.tag&&(f.q=pf(c.m),f.t=b.tag);f.h=b.ld();a.ua("q",f,function(f){var k=f.d,m=f.s;if(k&&"object"===babelHelpers.typeof(k)&&eb(k,"w")){var l=w(k,"w");ea(l)&&0<=xa(l,"no_index")&&J("Using an unspecified index. Consider adding "+("\".indexOn\": \""+c.m.g.toString()+"\"")+" at "+c.path.toString()+" to your security rules for better performance")}(a.$[d]&&a.$[d][e])===b&&(a.f("listen response",f),"ok"!==m&&Fg(a,d,e),b.G&&b.G(m,k))})}g.kf=function(a){this.ob=a;this.f("Auth token refreshed");this.ob?Gg(this):this.ma&&this.ua("unauth",{},function(){});if(a&&40===a.length||kc(a))this.f("Admin auth credential detected.  Reducing max reconnect time."),this.td=3E4};function Gg(a){if(a.ma&&a.ob){var b=a.ob,c=jc(b)?"auth":"gauth",d={cred:b};null===a.Vd?d.noauth=!0:"object"===babelHelpers.typeof(a.Vd)&&(d.authvar=a.Vd);a.ua(c,d,function(c){var d=c.s;c=c.d||"error";a.ob===b&&("ok"===d?a.ke=0:Hg(a,d,c))})}}g.uf=function(a,b){var c=a.path.toString(),d=a.ja();this.f("Unlisten called for "+c+" "+d);D(qf(a.m)||!T(a.m),"unlisten() called for non-default but complete query");if(Fg(this,c,d)&&this.ma){var e=pf(a.m);this.f("Unlisten on "+c+" for "+d);c={p:c};b&&(c.q=e,c.t=b);this.ua("n",c)}};g.re=function(a,b,c){this.ma?Ig(this,"o",a,b,c):this.Kc.push({we:a,action:"o",data:b,G:c})};g.cf=function(a,b,c){this.ma?Ig(this,"om",a,b,c):this.Kc.push({we:a,action:"om",data:b,G:c})};g.xd=function(a,b){this.ma?Ig(this,"oc",a,null,b):this.Kc.push({we:a,action:"oc",data:null,G:b})};function Ig(a,b,c,d,e){c={p:c,d:d};a.f("onDisconnect "+b,c);a.ua(b,c,function(a){e&&setTimeout(function(){e(a.s,a.d)},0)})}g.put=function(a,b,c,d){Jg(this,"p",a,b,c,d)};g.af=function(a,b,c,d){Jg(this,"m",a,b,c,d)};function Jg(a,b,c,d,e,f){d={p:c,d:d};n(f)&&(d.h=f);a.pa.push({action:b,mf:d,G:e});a.Oc++;b=a.pa.length-1;a.ma?Kg(a,b):a.f("Buffering put: "+c)}function Kg(a,b){var c=a.pa[b].action,d=a.pa[b].mf,e=a.pa[b].G;a.pa[b].fg=a.ma;a.ua(c,d,function(d){a.f(c+" response",d);delete a.pa[b];a.Oc--;0===a.Oc&&(a.pa=[]);e&&e(d.s,d.d)})}g.ye=function(a){this.ma&&(a={c:a},this.f("reportStats",a),this.ua("s",a,function(a){"ok"!==a.s&&this.f("reportStats","Error sending stats: "+a.d)}))};g.wd=function(a){if("r"in a){this.f("from server: "+x(a));var b=a.r,c=this.Gd[b];c&&(delete this.Gd[b],c(a.b))}else{if("error"in a)throw"A server-side error has occurred: "+a.error;"a"in a&&(b=a.a,a=a.b,this.f("handleServerMessage",b,a),"d"===b?this.Gb(a.p,a.d,!1,a.t):"m"===b?this.Gb(a.p,a.d,!0,a.t):"c"===b?Lg(this,a.p,a.q):"ac"===b?Hg(this,a.s,a.d):"sd"===b?this.ze?this.ze(a):"msg"in a&&"undefined"!==typeof console&&console.log("FIREBASE: "+a.msg.replace("\n","\nFIREBASE: ")):Ub("Unrecognized action received from server: "+x(b)+"\nAre you using the latest client?"))}};g.Lc=function(a,b){this.f("connection ready");this.ma=!0;this.Ac=new Date().getTime();this.ue({serverTimeOffset:a-new Date().getTime()});this.Cb=b;if(this.Re){var c={};c["sdk.js."+firebase.SDK_VERSION.replace(/\./g,"-")]=1;pb()?c["framework.cordova"]=1:"object"===("undefined"===typeof navigator?"undefined":babelHelpers.typeof(navigator))&&"ReactNative"===navigator.product&&(c["framework.reactnative"]=1);this.ye(c)}Mg(this);this.Re=!1;this.Jc(!0)};function Cg(a,b){D(!a.Fa,"Scheduling a connect when we're already connected/ing?");a.ub&&clearTimeout(a.ub);a.ub=setTimeout(function(){a.ub=null;Ng(a)},_Mathfloor(b))}g.Zf=function(a){a&&!this.Mb&&this.Sa===this.td&&(this.f("Window became visible.  Reducing delay."),this.Sa=1E3,this.Fa||Cg(this,0));this.Mb=a};g.Yf=function(a){a?(this.f("Browser went online."),this.Sa=1E3,this.Fa||Cg(this,0)):(this.f("Browser went offline.  Killing connection."),this.Fa&&this.Fa.close())};g.df=function(){this.f("data client disconnected");this.ma=!1;this.Fa=null;for(var a=0,b;a<this.pa.length;a++){b=this.pa[a];b&&"h"in b.mf&&b.fg&&(b.G&&b.G("disconnect"),delete this.pa[a],this.Oc--)}0===this.Oc&&(this.pa=[]);this.Gd={};Og(this)&&(this.Mb?this.Ac&&(3E4<new Date().getTime()-this.Ac&&(this.Sa=1E3),this.Ac=null):(this.f("Window isn't visible.  Delaying reconnect."),this.Sa=this.td,this.me=new Date().getTime()),a=_Mathmax(0,this.Sa-(new Date().getTime()-this.me)),a*=Math.random(),this.f("Trying to reconnect in "+a+"ms"),Cg(this,a),this.Sa=_Mathmin(this.td,1.3*this.Sa));this.Jc(!1)};function Ng(a){if(Og(a)){a.f("Making a connection attempt");a.me=new Date().getTime();a.Ac=null;var b=q(a.wd,a),c=q(a.Lc,a),d=q(a.df,a),e=a.id+":"+Dg++,f=a.Cb,h=!1,k=null,m=function(){k?k.close():(h=!0,d())};a.Fa={close:m,ua:function(a){D(k,"sendRequest call when we're not connected not allowed.");k.ua(a)}};var l=a.de;a.de=!1;a.$c.getToken(l).then(function(l){h?I("getToken() completed but was canceled"):(I("getToken() completed. Creating connection."),a.ob=l&&l.accessToken,k=new og(e,a.L,b,c,d,function(b){J(b+" ("+a.L.toString()+")");a.ab("server_kill")},f))}).then(null,function(b){a.f("Failed to get token: "+b);h||m()})}}g.ab=function(a){I("Interrupting connection for reason: "+a);this.qd[a]=!0;this.Fa?this.Fa.close():(this.ub&&(clearTimeout(this.ub),this.ub=null),this.ma&&this.df())};g.kc=function(a){I("Resuming connection for reason: "+a);delete this.qd[a];Sa(this.qd)&&(this.Sa=1E3,this.Fa||Cg(this,0))};function Lg(a,b,c){c=c?Aa(c,function(a){return ac(a)}).join("$"):"default";(a=Fg(a,b,c))&&a.G&&a.G("permission_denied")}function Fg(a,b,c){b=new E(b).toString();var d;n(a.$[b])?(d=a.$[b][c],delete a.$[b][c],0===La(a.$[b])&&delete a.$[b]):d=void 0;return d}function Hg(a,b,c){I("Auth token revoked: "+b+"/"+c);a.ob=null;a.de=!0;a.Fa.close();if("invalid_token"===b||"permission_denied"===b)a.ke++,3<=a.ke&&(a.Sa=3E4,a=a.$c,b="Provided authentication credentials for the app named \""+a.oc.name+"\" are invalid. This usually indicates your app was not initialized correctly. ",b="credential"in a.oc.options?b+"Make sure the \"credential\" property provided to initializeApp() is authorized to access the specified \"databaseURL\" and is from the correct project.":"serviceAccount"in a.oc.options?b+"Make sure the \"serviceAccount\" property provided to initializeApp() is authorized to access the specified \"databaseURL\" and is from the correct project.":b+"Make sure the \"apiKey\" and \"databaseURL\" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.",J(b))}function Mg(a){Gg(a);v(a.$,function(b){v(b,function(b){Eg(a,b)})});for(var b=0;b<a.pa.length;b++){a.pa[b]&&Kg(a,b)}for(;a.Kc.length;){b=a.Kc.shift(),Ig(a,b.action,b.we,b.data,b.G)}}function Og(a){var b=Lc.Vb().hc;return Sa(a.qd)&&b}function Pg(a){babelHelpers.instanceof(a,Qg)||Vb("Don't call new Database() directly - please use firebase.database().");this.ta=a;this.ba=new U(a,Q);this.INTERNAL=new Rg(this)}var Sg={TIMESTAMP:{".sv":"timestamp"}};g=Pg.prototype;g.app=null;g.jf=function(a){Tg(this,"ref");y("database.ref",0,1,arguments.length);return n(a)?this.ba.n(a):this.ba};g.gg=function(a){Tg(this,"database.refFromURL");y("database.refFromURL",1,1,arguments.length);var b=Wb(a);Xd("database.refFromURL",b);var c=b.jc;c.host!==this.ta.L.host&&Vb("database.refFromURL: Host name does not match the current database: (found "+c.host+" but expected "+this.ta.L.host+")");return this.jf(b.path.toString())};function Tg(a,b){null===a.ta&&Vb("Cannot call "+b+" on a deleted database.")}g.Pf=function(){y("database.goOffline",0,0,arguments.length);Tg(this,"goOffline");this.ta.ab()};g.Qf=function(){y("database.goOnline",0,0,arguments.length);Tg(this,"goOnline");this.ta.kc()};Object.defineProperty(Pg.prototype,"app",{get:function get(){return this.ta.app}});function Rg(a){this.Ya=a}Rg.prototype.delete=function(){Tg(this.Ya,"delete");var a=Ug.Vb(),b=this.Ya.ta;w(a.lb,b.app.name)!==b&&Vb("Database "+b.app.name+" has already been deleted.");b.ab();delete a.lb[b.app.name];this.Ya.ta=null;this.Ya.ba=null;this.Ya=this.Ya.INTERNAL=null;return firebase.Promise.resolve()};Pg.prototype.ref=Pg.prototype.jf;Pg.prototype.refFromURL=Pg.prototype.gg;Pg.prototype.goOnline=Pg.prototype.Qf;Pg.prototype.goOffline=Pg.prototype.Pf;Rg.prototype["delete"]=Rg.prototype.delete;function V(a,b,c){this.A=a;this.V=b;this.g=c}V.prototype.H=function(){y("Firebase.DataSnapshot.val",0,0,arguments.length);return this.A.H()};V.prototype.val=V.prototype.H;V.prototype.be=function(){y("Firebase.DataSnapshot.exportVal",0,0,arguments.length);return this.A.H(!0)};V.prototype.exportVal=V.prototype.be;V.prototype.toJSON=function(){y("Firebase.DataSnapshot.toJSON",0,1,arguments.length);return this.be()};V.prototype.toJSON=V.prototype.toJSON;V.prototype.Lf=function(){y("Firebase.DataSnapshot.exists",0,0,arguments.length);return!this.A.e()};V.prototype.exists=V.prototype.Lf;V.prototype.n=function(a){y("Firebase.DataSnapshot.child",0,1,arguments.length);ga(a)&&(a=a+"");Vd("Firebase.DataSnapshot.child",a);var b=new E(a),c=this.V.n(b);return new V(this.A.P(b),c,H)};V.prototype.child=V.prototype.n;V.prototype.Da=function(a){y("Firebase.DataSnapshot.hasChild",1,1,arguments.length);Vd("Firebase.DataSnapshot.hasChild",a);var b=new E(a);return!this.A.P(b).e()};V.prototype.hasChild=V.prototype.Da;V.prototype.C=function(){y("Firebase.DataSnapshot.getPriority",0,0,arguments.length);return this.A.C().H()};V.prototype.getPriority=V.prototype.C;V.prototype.forEach=function(a){y("Firebase.DataSnapshot.forEach",1,1,arguments.length);B("Firebase.DataSnapshot.forEach",1,a,!1);if(this.A.J())return!1;var b=this;return!!this.A.O(this.g,function(c,d){return a(new V(d,b.V.n(c),H))})};V.prototype.forEach=V.prototype.forEach;V.prototype.kd=function(){y("Firebase.DataSnapshot.hasChildren",0,0,arguments.length);return this.A.J()?!1:!this.A.e()};V.prototype.hasChildren=V.prototype.kd;V.prototype.getKey=function(){y("Firebase.DataSnapshot.key",0,0,arguments.length);return this.V.getKey()};gc(V.prototype,"key",V.prototype.getKey);V.prototype.Eb=function(){y("Firebase.DataSnapshot.numChildren",0,0,arguments.length);return this.A.Eb()};V.prototype.numChildren=V.prototype.Eb;V.prototype.wb=function(){y("Firebase.DataSnapshot.ref",0,0,arguments.length);return this.V};gc(V.prototype,"ref",V.prototype.wb);function Vg(a,b,c){this.Pb=a;this.rb=b;this.tb=c||null}g=Vg.prototype;g.nf=function(a){return"value"===a};g.createEvent=function(a,b){var c=b.m.g;return new We("value",this,new V(a.Ja,b.wb(),c))};g.Tb=function(a){var b=this.tb;if("cancel"===a.ge()){D(this.rb,"Raising a cancel event on a listener with no cancel callback");var c=this.rb;return function(){c.call(b,a.error)}}var d=this.Pb;return function(){d.call(b,a.Md)}};g.Me=function(a,b){return this.rb?new Xe(this,a,b):null};g.matches=function(a){return babelHelpers.instanceof(a,Vg)?a.Pb&&this.Pb?a.Pb===this.Pb&&a.tb===this.tb:!0:!1};g.Xe=function(){return null!==this.Pb};function Wg(a,b,c){this.ga=a;this.rb=b;this.tb=c}g=Wg.prototype;g.nf=function(a){a="children_added"===a?"child_added":a;return("children_removed"===a?"child_removed":a)in this.ga};g.Me=function(a,b){return this.rb?new Xe(this,a,b):null};g.createEvent=function(a,b){D(null!=a.Xa,"Child events should have a childName.");var c=b.wb().n(a.Xa);return new We(a.type,this,new V(a.Ja,c,b.m.g),a.Dd)};g.Tb=function(a){var b=this.tb;if("cancel"===a.ge()){D(this.rb,"Raising a cancel event on a listener with no cancel callback");var c=this.rb;return function(){c.call(b,a.error)}}var d=this.ga[a.hd];return function(){d.call(b,a.Md,a.Dd)}};g.matches=function(a){if(babelHelpers.instanceof(a,Wg)){if(!this.ga||!a.ga)return!0;if(this.tb===a.tb){var b=La(a.ga);if(b===La(this.ga)){if(1===b){var b=Ma(a.ga),c=Ma(this.ga);return c===b&&(!a.ga[b]||!this.ga[c]||a.ga[b]===this.ga[c])}return Ka(this.ga,function(b,c){return a.ga[c]===b})}}}return!1};g.Xe=function(){return null!==this.ga};function Xg(){this.za={}}g=Xg.prototype;g.e=function(){return Sa(this.za)};g.eb=function(a,b,c){var d=a.source.Hb;if(null!==d)return d=w(this.za,d),D(null!=d,"SyncTree gave us an op for an invalid query."),d.eb(a,b,c);var e=[];v(this.za,function(d){e=e.concat(d.eb(a,b,c))});return e};g.Nb=function(a,b,c,d,e){var f=a.ja(),h=w(this.za,f);if(!h){var h=c.Aa(e?d:null),k=!1;h?k=!0:(h=babelHelpers.instanceof(d,O)?c.rc(d):L,k=!1);h=new Pe(a,new oe(new je(h,k,!1),new je(d,e,!1)));this.za[f]=h}h.Nb(b);return Ve(h,b)};g.kb=function(a,b,c){var d=a.ja(),e=[],f=[],h=null!=Yg(this);if("default"===d){var k=this;v(this.za,function(a,d){f=f.concat(a.kb(b,c));a.e()&&(delete k.za[d],T(a.V.m)||e.push(a.V))})}else{var m=w(this.za,d);m&&(f=f.concat(m.kb(b,c)),m.e()&&(delete this.za[d],T(m.V.m)||e.push(m.V)))}h&&null==Yg(this)&&e.push(new U(a.u,a.path));return{hg:e,Kf:f}};function Zg(a){return za(Na(a.za),function(a){return!T(a.V.m)})}g.hb=function(a){var b=null;v(this.za,function(c){b=b||c.hb(a)});return b};function $g(a,b){if(T(b.m))return Yg(a);var c=b.ja();return w(a.za,c)}function Yg(a){return Ra(a.za,function(a){return T(a.V.m)})||null}function ah(a){this.wa=R;this.jb=new Df;this.De={};this.ic={};this.Cc=a}function bh(a,b,c,d,e){var f=a.jb,h=e;D(d>f.Bc,"Stacking an older write on top of newer ones");n(h)||(h=!0);f.la.push({path:b,Ga:c,Zc:d,visible:h});h&&(f.S=uf(f.S,b,c));f.Bc=d;return e?ch(a,new ce(fe,b,c)):[]}function dh(a,b,c,d){var e=a.jb;D(d>e.Bc,"Stacking an older merge on top of newer ones");e.la.push({path:b,children:c,Zc:d,visible:!0});e.S=vf(e.S,b,c);e.Bc=d;c=xd(c);return ch(a,new ae(fe,b,c))}function eh(a,b,c){c=c||!1;var d=Ef(a.jb,b);if(a.jb.Ed(b)){var e=R;null!=d.Ga?e=e.set(Q,!0):fb(d.children,function(a,b){e=e.set(new E(a),b)});return ch(a,new de(d.path,e,c))}return[]}function fh(a,b,c){c=xd(c);return ch(a,new ae(ie,b,c))}function gh(a,b,c,d){d=hh(a,d);if(null!=d){var e=ih(d);d=e.path;e=e.Hb;b=P(d,b);c=new ce(new he(!1,!0,e,!0),b,c);return jh(a,d,c)}return[]}function kh(a,b,c,d){if(d=hh(a,d)){var e=ih(d);d=e.path;e=e.Hb;b=P(d,b);c=xd(c);c=new ae(new he(!1,!0,e,!0),b,c);return jh(a,d,c)}return[]}ah.prototype.Nb=function(a,b){var c=a.path,d=null,e=!1;Fd(this.wa,c,function(a,b){var f=P(a,c);d=d||b.hb(f);e=e||null!=Yg(b)});var f=this.wa.get(c);f?(e=e||null!=Yg(f),d=d||f.hb(Q)):(f=new Xg,this.wa=this.wa.set(c,f));var h;null!=d?h=!0:(h=!1,d=L,Jd(this.wa.subtree(c),function(a,b){var c=b.hb(Q);c&&(d=d.T(a,c))}));var k=null!=$g(f,a);if(!k&&!T(a.m)){var m=lh(a);D(!(m in this.ic),"View does not exist, but we have a tag");var l=mh++;this.ic[m]=l;this.De["_"+l]=m}h=f.Nb(a,b,new If(c,this.jb),d,h);k||e||(f=$g(f,a),h=h.concat(nh(this,a,f)));return h};ah.prototype.kb=function(a,b,c){var d=a.path,e=this.wa.get(d),f=[];if(e&&("default"===a.ja()||null!=$g(e,a))){f=e.kb(a,b,c);e.e()&&(this.wa=this.wa.remove(d));e=f.hg;f=f.Kf;b=-1!==Ea(e,function(a){return T(a.m)});var h=Dd(this.wa,d,function(a,b){return null!=Yg(b)});if(b&&!h&&(d=this.wa.subtree(d),!d.e()))for(var d=oh(d),k=0;k<d.length;++k){var m=d[k],l=m.V,m=ph(this,m);this.Cc.Ae(qh(l),rh(this,l),m.ld,m.G)}if(!h&&0<e.length&&!c)if(b)this.Cc.Od(qh(a),null);else{var u=this;ya(e,function(a){a.ja();var b=u.ic[lh(a)];u.Cc.Od(qh(a),b)})}sh(this,e)}return f};ah.prototype.Aa=function(a,b){var c=this.jb,d=Dd(this.wa,a,function(b,c){var d=P(b,a);if(d=c.hb(d))return d});return c.Aa(a,d,b,!0)};function oh(a){return Bd(a,function(a,c,d){if(c&&null!=Yg(c))return[Yg(c)];var e=[];c&&(e=Zg(c));v(d,function(a){e=e.concat(a)});return e})}function sh(a,b){for(var c=0,d;c<b.length;++c){d=b[c];if(!T(d.m)){var d=lh(d),e=a.ic[d];delete a.ic[d];delete a.De["_"+e]}}}function qh(a){return T(a.m)&&!qf(a.m)?a.wb():a}function nh(a,b,c){var d=b.path,e=rh(a,b);c=ph(a,c);b=a.Cc.Ae(qh(b),e,c.ld,c.G);d=a.wa.subtree(d);if(e)D(null==Yg(d.value),"If we're adding a query, it shouldn't be shadowed");else for(e=Bd(d,function(a,b,c){if(!a.e()&&b&&null!=Yg(b))return[Te(Yg(b))];var d=[];b&&(d=d.concat(Aa(Zg(b),function(a){return a.V})));v(c,function(a){d=d.concat(a)});return d}),d=0;d<e.length;++d){c=e[d],a.Cc.Od(qh(c),rh(a,c))}return b}function ph(a,b){var c=b.V,d=rh(a,c);return{ld:function(){return(b.w()||L).hash()},G:function(b){if("ok"===b){if(d){var f=c.path;if(b=hh(a,d)){var h=ih(b);b=h.path;h=h.Hb;f=P(b,f);f=new Zd(new he(!1,!0,h,!0),f);b=jh(a,b,f)}else b=[]}else b=ch(a,new Zd(ie,c.path));return b}f="Unknown Error";"too_big"===b?f="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"==b?f="Client doesn't have permission to access the desired data.":"unavailable"==b&&(f="The service is unavailable");f=Error(b+" at "+c.path.toString()+": "+f);f.code=b.toUpperCase();return a.kb(c,null,f)}}}function lh(a){return a.path.toString()+"$"+a.ja()}function ih(a){var b=a.indexOf("$");D(-1!==b&&b<a.length-1,"Bad queryKey.");return{Hb:a.substr(b+1),path:new E(a.substr(0,b))}}function hh(a,b){var c=a.De,d="_"+b;return d in c?c[d]:void 0}function rh(a,b){var c=lh(b);return w(a.ic,c)}var mh=1;function jh(a,b,c){var d=a.wa.get(b);D(d,"Missing sync point for query tag that we're tracking");return d.eb(c,new If(b,a.jb),null)}function ch(a,b){return th(a,b,a.wa,null,new If(Q,a.jb))}function th(a,b,c,d,e){if(b.path.e())return uh(a,b,c,d,e);var f=c.get(Q);null==d&&null!=f&&(d=f.hb(Q));var h=[],k=K(b.path),m=b.Mc(k);if((c=c.children.get(k))&&m)var l=d?d.Q(k):null,k=e.n(k),h=h.concat(th(a,m,c,l,k));f&&(h=h.concat(f.eb(b,e,d)));return h}function uh(a,b,c,d,e){var f=c.get(Q);null==d&&null!=f&&(d=f.hb(Q));var h=[];c.children.ha(function(c,f){var l=d?d.Q(c):null,u=e.n(c),z=b.Mc(c);z&&(h=h.concat(uh(a,z,f,l,u)))});f&&(h=h.concat(f.eb(b,e,d)));return h}function Qg(a,b,c){this.app=c;var d=new Bf(c);this.L=a;this.Va=Pf(a);this.Vc=null;this.ca=new Ye;this.vd=1;this.Ra=null;if(b||0<=("object"===("undefined"===typeof window?"undefined":babelHelpers.typeof(window))&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i))this.va=new Rf(this.L,q(this.Gb,this),d),setTimeout(q(this.Jc,this,!0),0);else{b=c.options.databaseAuthVariableOverride;if("undefined"!==da(b)&&null!==b){if("object"!==da(b))throw Error("Only objects are supported for option databaseAuthVariableOverride");try{x(b)}catch(e){throw Error("Invalid authOverride provided: "+e)}}this.va=this.Ra=new Ag(this.L,q(this.Gb,this),q(this.Jc,this),q(this.ue,this),d,b)}var f=this;Cf(d,function(a){f.va.kf(a)});this.og=Qf(a,q(function(){return new Jf(this.Va,this.va)},this));this.mc=new Tc;this.ie=new Af;this.pd=new ah({Ae:function(a,b,c,d){b=[];c=f.ie.j(a.path);c.e()||(b=ch(f.pd,new ce(ie,a.path,c)),setTimeout(function(){d("ok")},0));return b},Od:ba});vh(this,"connected",!1);this.ia=new Gb;this.Ya=new Pg(this);this.fd=0;this.je=null;this.K=new ah({Ae:function(a,b,c,d){f.va.$e(a,c,b,function(b,c){var e=d(b,c);cf(f.ca,a.path,e)});return[]},Od:function(a,b){f.va.uf(a,b)}})}g=Qg.prototype;g.toString=function(){return(this.L.Sc?"https://":"http://")+this.L.host};g.name=function(){return this.L.pe};function wh(a){a=a.ie.j(new E(".info/serverTimeOffset")).H()||0;return new Date().getTime()+a}function xh(a){a=a={timestamp:wh(a)};a.timestamp=a.timestamp||new Date().getTime();return a}g.Gb=function(a,b,c,d){this.fd++;var e=new E(a);b=this.je?this.je(a,b):b;a=[];d?c?(b=Ja(b,function(a){return G(a)}),a=kh(this.K,e,b,d)):(b=G(b),a=gh(this.K,e,b,d)):c?(d=Ja(b,function(a){return G(a)}),a=fh(this.K,e,d)):(d=G(b),a=ch(this.K,new ce(ie,e,d)));d=e;0<a.length&&(d=yh(this,e));cf(this.ca,d,a)};g.Jc=function(a){vh(this,"connected",a);!1===a&&zh(this)};g.ue=function(a){var b=this;cc(a,function(a,d){vh(b,d,a)})};function vh(a,b,c){b=new E("/.info/"+b);c=G(c);var d=a.ie;d.Jd=d.Jd.F(b,c);c=ch(a.pd,new ce(ie,b,c));cf(a.ca,b,c)}g.Jb=function(a,b,c,d){this.f("set",{path:a.toString(),value:b,ug:c});var e=xh(this);b=G(b,c);var e=Jb(b,e),f=this.vd++,e=bh(this.K,a,e,f,!0);Ze(this.ca,e);var h=this;this.va.put(a.toString(),b.H(!0),function(b,c){var e="ok"===b;e||J("set at "+a+" failed: "+b);e=eh(h.K,f,!e);cf(h.ca,a,e);Ah(d,b,c)});e=Bh(this,a);yh(this,e);cf(this.ca,e,[])};g.update=function(a,b,c){this.f("update",{path:a.toString(),value:b});var d=!0,e=xh(this),f={};v(b,function(a,b){d=!1;var c=G(a);f[b]=Jb(c,e)});if(d)I("update() called with empty data.  Don't do anything."),Ah(c,"ok");else{var h=this.vd++,k=dh(this.K,a,f,h);Ze(this.ca,k);var m=this;this.va.af(a.toString(),b,function(b,d){var e="ok"===b;e||J("update at "+a+" failed: "+b);var e=eh(m.K,h,!e),f=a;0<e.length&&(f=yh(m,a));cf(m.ca,f,e);Ah(c,b,d)});v(b,function(b,c){var d=Bh(m,a.n(c));yh(m,d)});cf(this.ca,a,[])}};function zh(a){a.f("onDisconnectEvents");var b=xh(a),c=[];Hb(Fb(a.ia,b),Q,function(b,e){c=c.concat(ch(a.K,new ce(ie,b,e)));var f=Bh(a,b);yh(a,f)});a.ia=new Gb;cf(a.ca,Q,c)}g.xd=function(a,b){var c=this;this.va.xd(a.toString(),function(d,e){"ok"===d&&Yd(c.ia,a);Ah(b,d,e)})};function Ch(a,b,c,d){var e=G(c);a.va.re(b.toString(),e.H(!0),function(c,h){"ok"===c&&Ib(a.ia,b,e);Ah(d,c,h)})}function Dh(a,b,c,d,e){var f=G(c,d);a.va.re(b.toString(),f.H(!0),function(c,d){"ok"===c&&Ib(a.ia,b,f);Ah(e,c,d)})}function Eh(a,b,c,d){var e=!0,f;for(f in c){e=!1}e?(I("onDisconnect().update() called with empty data.  Don't do anything."),Ah(d,"ok")):a.va.cf(b.toString(),c,function(e,f){if("ok"===e)for(var m in c){var l=G(c[m]);Ib(a.ia,b.n(m),l)}Ah(d,e,f)})}function Fh(a,b,c){c=".info"===K(b.path)?a.pd.Nb(b,c):a.K.Nb(b,c);af(a.ca,b.path,c)}g.ab=function(){this.Ra&&this.Ra.ab("repo_interrupt")};g.kc=function(){this.Ra&&this.Ra.kc("repo_interrupt")};g.Be=function(a){if("undefined"!==typeof console){a?(this.Vc||(this.Vc=new Kf(this.Va)),a=this.Vc.get()):a=this.Va.get();var b=Ba(Oa(a),function(a,b){return _Mathmax(b.length,a)},0),c;for(c in a){for(var d=a[c],e=c.length;e<b+2;e++){c+=" "}console.log(c+d)}}};g.Ce=function(a){Mf(this.Va,a);this.og.rf[a]=!0};g.f=function(){var b="";this.Ra&&(b=this.Ra.id+":");I(b,arguments)};function Ah(a,b,c){a&&fc(function(){if("ok"==b)a(null);else{var d=(b||"error").toUpperCase(),e=d;c&&(e+=": "+c);e=Error(e);e.code=d;a(e)}})}function Gh(a,b,c,d,e){function f(){}a.f("transaction on "+b);var h=new U(a,b);h.gc("value",f);c={path:b,update:c,G:d,status:null,ef:Lb(),He:e,of:0,Rd:function(){h.Ic("value",f)},Td:null,Ba:null,cd:null,dd:null,ed:null};d=a.K.Aa(b,void 0)||L;c.cd=d;d=c.update(d.H());if(n(d)){Pd("transaction failed: Data returned ",d,c.path);c.status=1;e=Uc(a.mc,b);var k=e.Ca()||[];k.push(c);Vc(e,k);"object"===babelHelpers.typeof(d)&&null!==d&&eb(d,".priority")?(k=w(d,".priority"),D(Nd(k),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):k=(a.K.Aa(b)||L).C().H();e=xh(a);d=G(d,k);e=Jb(d,e);c.dd=d;c.ed=e;c.Ba=a.vd++;c=bh(a.K,b,e,c.Ba,c.He);cf(a.ca,b,c);Hh(a)}else c.Rd(),c.dd=null,c.ed=null,c.G&&(a=new V(c.cd,new U(a,c.path),H),c.G(null,!1,a))}function Hh(a,b){var c=b||a.mc;b||Ih(a,c);if(null!==c.Ca()){var d=Jh(a,c);D(0<d.length,"Sending zero length transaction queue");Ca(d,function(a){return 1===a.status})&&Kh(a,c.path(),d)}else c.kd()&&c.O(function(b){Hh(a,b)})}function Kh(a,b,c){for(var d=Aa(c,function(a){return a.Ba}),e=a.K.Aa(b,d)||L,d=e,e=e.hash(),f=0,h;f<c.length;f++){h=c[f];D(1===h.status,"tryToSendTransactionQueue_: items in queue should all be run.");h.status=2;h.of++;var k=P(b,h.path),d=d.F(k,h.dd)}d=d.H(!0);a.va.put(b.toString(),d,function(d){a.f("transaction put response",{path:b.toString(),status:d});var e=[];if("ok"===d){d=[];for(f=0;f<c.length;f++){c[f].status=3;e=e.concat(eh(a.K,c[f].Ba));if(c[f].G){var h=c[f].ed,k=new U(a,c[f].path);d.push(q(c[f].G,null,null,!0,new V(h,k,H)))}c[f].Rd()}Ih(a,Uc(a.mc,b));Hh(a);cf(a.ca,b,e);for(f=0;f<d.length;f++){fc(d[f])}}else{if("datastale"===d)for(f=0;f<c.length;f++){c[f].status=4===c[f].status?5:1}else for(J("transaction at "+b.toString()+" failed: "+d),f=0;f<c.length;f++){c[f].status=5,c[f].Td=d}yh(a,b)}},e)}function yh(a,b){var c=Lh(a,b),d=c.path(),c=Jh(a,c);Mh(a,c,d);return d}function Mh(a,b,c){if(0!==b.length){for(var d=[],e=[],f=za(b,function(a){return 1===a.status}),f=Aa(f,function(a){return a.Ba}),h=0;h<b.length;h++){var k=b[h],m=P(c,k.path),l=!1,u;D(null!==m,"rerunTransactionsUnderNode_: relativePath should not be null.");if(5===k.status)l=!0,u=k.Td,e=e.concat(eh(a.K,k.Ba,!0));else if(1===k.status)if(25<=k.of)l=!0,u="maxretry",e=e.concat(eh(a.K,k.Ba,!0));else{var z=a.K.Aa(k.path,f)||L;k.cd=z;var F=b[h].update(z.H());n(F)?(Pd("transaction failed: Data returned ",F,k.path),m=G(F),"object"===babelHelpers.typeof(F)&&null!=F&&eb(F,".priority")||(m=m.fa(z.C())),z=k.Ba,F=xh(a),F=Jb(m,F),k.dd=m,k.ed=F,k.Ba=a.vd++,Fa(f,z),e=e.concat(bh(a.K,k.path,F,k.Ba,k.He)),e=e.concat(eh(a.K,z,!0))):(l=!0,u="nodata",e=e.concat(eh(a.K,k.Ba,!0)))}cf(a.ca,c,e);e=[];l&&(b[h].status=3,setTimeout(b[h].Rd,0),b[h].G&&("nodata"===u?(k=new U(a,b[h].path),d.push(q(b[h].G,null,null,!1,new V(b[h].cd,k,H)))):d.push(q(b[h].G,null,Error(u),!1,null))))}Ih(a,a.mc);for(h=0;h<d.length;h++){fc(d[h])}Hh(a)}}function Lh(a,b){for(var c,d=a.mc;null!==(c=K(b))&&null===d.Ca();){d=Uc(d,c),b=N(b)}return d}function Jh(a,b){var c=[];Nh(a,b,c);c.sort(function(a,b){return a.ef-b.ef});return c}function Nh(a,b,c){var d=b.Ca();if(null!==d)for(var e=0;e<d.length;e++){c.push(d[e])}b.O(function(b){Nh(a,b,c)})}function Ih(a,b){var c=b.Ca();if(c){for(var d=0,e=0;e<c.length;e++){3!==c[e].status&&(c[d]=c[e],d++)}c.length=d;Vc(b,0<c.length?c:null)}b.O(function(b){Ih(a,b)})}function Bh(a,b){var c=Lh(a,b).path(),d=Uc(a.mc,b);Yc(d,function(b){Oh(a,b)});Oh(a,d);Xc(d,function(b){Oh(a,b)});return c}function Oh(a,b){var c=b.Ca();if(null!==c){for(var d=[],e=[],f=-1,h=0;h<c.length;h++){4!==c[h].status&&(2===c[h].status?(D(f===h-1,"All SENT items should be at beginning of queue."),f=h,c[h].status=4,c[h].Td="set"):(D(1===c[h].status,"Unexpected transaction status in abort"),c[h].Rd(),e=e.concat(eh(a.K,c[h].Ba,!0)),c[h].G&&d.push(q(c[h].G,null,Error("set"),!1,null))))}-1===f?Vc(b,null):c.length=f+1;cf(a.ca,b.path(),e);for(h=0;h<d.length;h++){fc(d[h])}}}function Ug(){this.lb={};this.wf=!1}Ug.prototype.ab=function(){for(var a in this.lb){this.lb[a].ab()}};Ug.prototype.kc=function(){for(var a in this.lb){this.lb[a].kc()}};Ug.prototype.ce=function(a){this.wf=a};ca(Ug);Ug.prototype.interrupt=Ug.prototype.ab;Ug.prototype.resume=Ug.prototype.kc;var W={nc:Ag};W.DataConnection=W.nc;Ag.prototype.ng=function(a,b){this.ua("q",{p:a},b)};W.nc.prototype.simpleListen=W.nc.prototype.ng;Ag.prototype.Hf=function(a,b){this.ua("echo",{d:a},b)};W.nc.prototype.echo=W.nc.prototype.Hf;Ag.prototype.interrupt=Ag.prototype.ab;W.zf=og;W.RealTimeConnection=W.zf;og.prototype.sendRequest=og.prototype.ua;og.prototype.close=og.prototype.close;W.Rf=function(a){var b=Ag.prototype.put;Ag.prototype.put=function(c,d,e,f){n(f)&&(f=a());b.call(this,c,d,e,f)};return function(){Ag.prototype.put=b}};W.hijackHash=W.Rf;W.yf=zb;W.ConnectionTarget=W.yf;W.ja=function(a){return a.ja()};W.queryIdentifier=W.ja;W.Uf=function(a){return a.u.Ra.$};W.listens=W.Uf;W.ce=function(a){Ug.Vb().ce(a)};W.forceRestClient=W.ce;W.Context=Ug;function Ph(a,b){this.committed=a;this.snapshot=b}function X(a,b,c,d){this.u=a;this.path=b;this.m=c;this.Nc=d}function Qh(a){var b=null,c=null;a.ka&&(b=ff(a));a.na&&(c=hf(a));if(a.g===tc){if(a.ka){if("[MIN_NAME]"!=ef(a))throw Error("Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().");if("string"!==typeof b)throw Error("Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.")}if(a.na){if("[MAX_NAME]"!=gf(a))throw Error("Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().");if("string"!==typeof c)throw Error("Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.")}}else if(a.g===H){if(null!=b&&!Nd(b)||null!=c&&!Nd(c))throw Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(D(babelHelpers.instanceof(a.g,pc)||a.g===wc,"unknown index type."),null!=b&&"object"===babelHelpers.typeof(b)||null!=c&&"object"===babelHelpers.typeof(c))throw Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")}function Rh(a){if(a.ka&&a.na&&a.xa&&(!a.xa||""===a.mb))throw Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")}function Sh(a,b){if(!0===a.Nc)throw Error(b+": You can't combine multiple orderBy calls.")}g=X.prototype;g.wb=function(){y("Query.ref",0,0,arguments.length);return new U(this.u,this.path)};g.gc=function(a,b,c,d){y("Query.on",2,4,arguments.length);Td("Query.on",a,!1);B("Query.on",2,b,!1);var e=Th("Query.on",c,d);if("value"===a)Fh(this.u,this,new Vg(b,e.cancel||null,e.Ma||null));else{var f={};f[a]=b;Fh(this.u,this,new Wg(f,e.cancel,e.Ma))}return b};g.Ic=function(a,b,c){y("Query.off",0,3,arguments.length);Td("Query.off",a,!0);B("Query.off",2,b,!0);ob("Query.off",3,c);var d=null,e=null;"value"===a?d=new Vg(b||null,null,c||null):a&&(b&&(e={},e[a]=b),d=new Wg(e,null,c||null));e=this.u;d=".info"===K(this.path)?e.pd.kb(this,d):e.K.kb(this,d);af(e.ca,this.path,d)};g.$f=function(a,b){function c(k){f&&(f=!1,e.Ic(a,c),b&&b.call(d.Ma,k),h.resolve(k))}y("Query.once",1,4,arguments.length);Td("Query.once",a,!1);B("Query.once",2,b,!0);var d=Th("Query.once",arguments[2],arguments[3]),e=this,f=!0,h=new ib;kb(h.ra);this.gc(a,c,function(b){e.Ic(a,c);d.cancel&&d.cancel.call(d.Ma,b);h.reject(b)});return h.ra};g.ne=function(a){y("Query.limitToFirst",1,1,arguments.length);if(!ga(a)||_Mathfloor(a)!==a||0>=a)throw Error("Query.limitToFirst: First argument must be a positive integer.");if(this.m.xa)throw Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new X(this.u,this.path,this.m.ne(a),this.Nc)};g.oe=function(a){y("Query.limitToLast",1,1,arguments.length);if(!ga(a)||_Mathfloor(a)!==a||0>=a)throw Error("Query.limitToLast: First argument must be a positive integer.");if(this.m.xa)throw Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new X(this.u,this.path,this.m.oe(a),this.Nc)};g.ag=function(a){y("Query.orderByChild",1,1,arguments.length);if("$key"===a)throw Error("Query.orderByChild: \"$key\" is invalid.  Use Query.orderByKey() instead.");if("$priority"===a)throw Error("Query.orderByChild: \"$priority\" is invalid.  Use Query.orderByPriority() instead.");if("$value"===a)throw Error("Query.orderByChild: \"$value\" is invalid.  Use Query.orderByValue() instead.");Vd("Query.orderByChild",a);Sh(this,"Query.orderByChild");var b=new E(a);if(b.e())throw Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");b=new pc(b);b=of(this.m,b);Qh(b);return new X(this.u,this.path,b,!0)};g.bg=function(){y("Query.orderByKey",0,0,arguments.length);Sh(this,"Query.orderByKey");var a=of(this.m,tc);Qh(a);return new X(this.u,this.path,a,!0)};g.cg=function(){y("Query.orderByPriority",0,0,arguments.length);Sh(this,"Query.orderByPriority");var a=of(this.m,H);Qh(a);return new X(this.u,this.path,a,!0)};g.dg=function(){y("Query.orderByValue",0,0,arguments.length);Sh(this,"Query.orderByValue");var a=of(this.m,wc);Qh(a);return new X(this.u,this.path,a,!0)};g.Nd=function(a,b){y("Query.startAt",0,2,arguments.length);Od("Query.startAt",a,this.path,!0);Ud("Query.startAt",b);var c=this.m.Nd(a,b);Rh(c);Qh(c);if(this.m.ka)throw Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");n(a)||(b=a=null);return new X(this.u,this.path,c,this.Nc)};g.gd=function(a,b){y("Query.endAt",0,2,arguments.length);Od("Query.endAt",a,this.path,!0);Ud("Query.endAt",b);var c=this.m.gd(a,b);Rh(c);Qh(c);if(this.m.na)throw Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new X(this.u,this.path,c,this.Nc)};g.If=function(a,b){y("Query.equalTo",1,2,arguments.length);Od("Query.equalTo",a,this.path,!1);Ud("Query.equalTo",b);if(this.m.ka)throw Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.m.na)throw Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.Nd(a,b).gd(a,b)};g.toString=function(){y("Query.toString",0,0,arguments.length);for(var a=this.path,b="",c=a.Y;c<a.o.length;c++){""!==a.o[c]&&(b+="/"+encodeURIComponent(a.o[c]+""))}return this.u.toString()+(b||"/")};g.toJSON=function(){y("Query.toJSON",0,1,arguments.length);return this.toString()};g.ja=function(){var a=ac(pf(this.m));return"{}"===a?"default":a};g.isEqual=function(a){y("Query.isEqual",1,1,arguments.length);if(!babelHelpers.instanceof(a,X))throw Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");var b=this.u===a.u,c=this.path.Z(a.path),d=this.ja()===a.ja();return b&&c&&d};function Th(a,b,c){var d={cancel:null,Ma:null};if(b&&c)d.cancel=b,B(a,3,d.cancel,!0),d.Ma=c,ob(a,4,d.Ma);else if(b)if("object"===babelHelpers.typeof(b)&&null!==b)d.Ma=b;else if("function"===typeof b)d.cancel=b;else throw Error(A(a,3,!0)+" must either be a cancel callback or a context object.");return d}X.prototype.on=X.prototype.gc;X.prototype.off=X.prototype.Ic;X.prototype.once=X.prototype.$f;X.prototype.limitToFirst=X.prototype.ne;X.prototype.limitToLast=X.prototype.oe;X.prototype.orderByChild=X.prototype.ag;X.prototype.orderByKey=X.prototype.bg;X.prototype.orderByPriority=X.prototype.cg;X.prototype.orderByValue=X.prototype.dg;X.prototype.startAt=X.prototype.Nd;X.prototype.endAt=X.prototype.gd;X.prototype.equalTo=X.prototype.If;X.prototype.toString=X.prototype.toString;X.prototype.isEqual=X.prototype.isEqual;gc(X.prototype,"ref",X.prototype.wb);function Y(a,b){this.ta=a;this.qa=b}Y.prototype.cancel=function(a){y("Firebase.onDisconnect().cancel",0,1,arguments.length);B("Firebase.onDisconnect().cancel",1,a,!0);var b=new ib;this.ta.xd(this.qa,jb(b,a));return b.ra};Y.prototype.cancel=Y.prototype.cancel;Y.prototype.remove=function(a){y("Firebase.onDisconnect().remove",0,1,arguments.length);Wd("Firebase.onDisconnect().remove",this.qa);B("Firebase.onDisconnect().remove",1,a,!0);var b=new ib;Ch(this.ta,this.qa,null,jb(b,a));return b.ra};Y.prototype.remove=Y.prototype.remove;Y.prototype.set=function(a,b){y("Firebase.onDisconnect().set",1,2,arguments.length);Wd("Firebase.onDisconnect().set",this.qa);Od("Firebase.onDisconnect().set",a,this.qa,!1);B("Firebase.onDisconnect().set",2,b,!0);var c=new ib;Ch(this.ta,this.qa,a,jb(c,b));return c.ra};Y.prototype.set=Y.prototype.set;Y.prototype.Jb=function(a,b,c){y("Firebase.onDisconnect().setWithPriority",2,3,arguments.length);Wd("Firebase.onDisconnect().setWithPriority",this.qa);Od("Firebase.onDisconnect().setWithPriority",a,this.qa,!1);Sd("Firebase.onDisconnect().setWithPriority",2,b);B("Firebase.onDisconnect().setWithPriority",3,c,!0);var d=new ib;Dh(this.ta,this.qa,a,b,jb(d,c));return d.ra};Y.prototype.setWithPriority=Y.prototype.Jb;Y.prototype.update=function(a,b){y("Firebase.onDisconnect().update",1,2,arguments.length);Wd("Firebase.onDisconnect().update",this.qa);if(ea(a)){for(var c={},d=0;d<a.length;++d){c[""+d]=a[d]}a=c;J("Passing an Array to Firebase.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Rd("Firebase.onDisconnect().update",a,this.qa);B("Firebase.onDisconnect().update",2,b,!0);c=new ib;Eh(this.ta,this.qa,a,jb(c,b));return c.ra};Y.prototype.update=Y.prototype.update;var Z={Mf:function(){dg=Zf=!0}};Z.forceLongPolling=Z.Mf;Z.Nf=function(){eg=!0};Z.forceWebSockets=Z.Nf;Z.Tf=function(){return Yf.isAvailable()};Z.isWebSocketsAvailable=Z.Tf;Z.lg=function(a,b){a.u.Ra.ze=b};Z.setSecurityDebugCallback=Z.lg;Z.Be=function(a,b){a.u.Be(b)};Z.stats=Z.Be;Z.Ce=function(a,b){a.u.Ce(b)};Z.statsIncrementCounter=Z.Ce;Z.fd=function(a){return a.u.fd};Z.dataUpdateCount=Z.fd;Z.Sf=function(a,b){a.u.je=b};Z.interceptServerData=Z.Sf;function U(a,b){if(!babelHelpers.instanceof(a,Qg))throw Error("new Firebase() no longer supported - use app.database().");X.call(this,a,b,mf,!1);this.then=void 0;this["catch"]=void 0}la(U,X);g=U.prototype;g.getKey=function(){y("Firebase.key",0,0,arguments.length);return this.path.e()?null:Oc(this.path)};g.n=function(a){y("Firebase.child",1,1,arguments.length);if(ga(a))a=a+"";else if(!babelHelpers.instanceof(a,E))if(null===K(this.path)){var b=a;b&&(b=b.replace(/^\/*\.info(\/|$)/,"/"));Vd("Firebase.child",b)}else Vd("Firebase.child",a);return new U(this.u,this.path.n(a))};g.getParent=function(){y("Firebase.parent",0,0,arguments.length);var a=this.path.parent();return null===a?null:new U(this.u,a)};g.Of=function(){y("Firebase.ref",0,0,arguments.length);for(var a=this;null!==a.getParent();){a=a.getParent()}return a};g.Gf=function(){return this.u.Ya};g.set=function(a,b){y("Firebase.set",1,2,arguments.length);Wd("Firebase.set",this.path);Od("Firebase.set",a,this.path,!1);B("Firebase.set",2,b,!0);var c=new ib;this.u.Jb(this.path,a,null,jb(c,b));return c.ra};g.update=function(a,b){y("Firebase.update",1,2,arguments.length);Wd("Firebase.update",this.path);if(ea(a)){for(var c={},d=0;d<a.length;++d){c[""+d]=a[d]}a=c;J("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Rd("Firebase.update",a,this.path);B("Firebase.update",2,b,!0);c=new ib;this.u.update(this.path,a,jb(c,b));return c.ra};g.Jb=function(a,b,c){y("Firebase.setWithPriority",2,3,arguments.length);Wd("Firebase.setWithPriority",this.path);Od("Firebase.setWithPriority",a,this.path,!1);Sd("Firebase.setWithPriority",2,b);B("Firebase.setWithPriority",3,c,!0);if(".length"===this.getKey()||".keys"===this.getKey())throw"Firebase.setWithPriority failed: "+this.getKey()+" is a read-only object.";var d=new ib;this.u.Jb(this.path,a,b,jb(d,c));return d.ra};g.remove=function(a){y("Firebase.remove",0,1,arguments.length);Wd("Firebase.remove",this.path);B("Firebase.remove",1,a,!0);return this.set(null,a)};g.transaction=function(a,b,c){y("Firebase.transaction",1,3,arguments.length);Wd("Firebase.transaction",this.path);B("Firebase.transaction",1,a,!1);B("Firebase.transaction",2,b,!0);if(n(c)&&"boolean"!=typeof c)throw Error(A("Firebase.transaction",3,!0)+"must be a boolean.");if(".length"===this.getKey()||".keys"===this.getKey())throw"Firebase.transaction failed: "+this.getKey()+" is a read-only object.";"undefined"===typeof c&&(c=!0);var d=new ib;ha(b)&&kb(d.ra);Gh(this.u,this.path,a,function(a,c,h){a?d.reject(a):d.resolve(new Ph(c,h));ha(b)&&b(a,c,h)},c);return d.ra};g.kg=function(a,b){y("Firebase.setPriority",1,2,arguments.length);Wd("Firebase.setPriority",this.path);Sd("Firebase.setPriority",1,a);B("Firebase.setPriority",2,b,!0);var c=new ib;this.u.Jb(this.path.n(".priority"),a,null,jb(c,b));return c.ra};g.push=function(a,b){y("Firebase.push",0,2,arguments.length);Wd("Firebase.push",this.path);Od("Firebase.push",a,this.path,!0);B("Firebase.push",2,b,!0);var c=wh(this.u),d=Kc(c),c=this.n(d),e=this.n(d),d=null!=a?c.set(a,b).then(function(){return e}):hb.resolve(e);c.then=q(d.then,d);c["catch"]=q(d.then,d,void 0);ha(b)&&kb(d);return c};g.ib=function(){Wd("Firebase.onDisconnect",this.path);return new Y(this.u,this.path)};U.prototype.child=U.prototype.n;U.prototype.set=U.prototype.set;U.prototype.update=U.prototype.update;U.prototype.setWithPriority=U.prototype.Jb;U.prototype.remove=U.prototype.remove;U.prototype.transaction=U.prototype.transaction;U.prototype.setPriority=U.prototype.kg;U.prototype.push=U.prototype.push;U.prototype.onDisconnect=U.prototype.ib;gc(U.prototype,"database",U.prototype.Gf);gc(U.prototype,"key",U.prototype.getKey);gc(U.prototype,"parent",U.prototype.getParent);gc(U.prototype,"root",U.prototype.Of);if("undefined"===typeof firebase)throw Error("Cannot install Firebase Database - be sure to load firebase-app.js first.");try{firebase.INTERNAL.registerService("database",function(a){var b=Ug.Vb(),c=a.options.databaseURL;n(c)||Vb("Can't determine Firebase Database URL.  Be sure to include databaseURL option when calling firebase.intializeApp().");var d=Wb(c),c=d.jc;Xd("Invalid Firebase Database URL",d);d.path.e()||Vb("Database URL must point to the root of a Firebase Database (not including a child path).");(d=w(b.lb,a.name))&&Vb("FIREBASE INTERNAL ERROR: Database initialized multiple times.");d=new Qg(c,b.wf,a);b.lb[a.name]=d;return d.Ya},{Reference:U,Query:X,Database:Pg,enableLogging:Sb,INTERNAL:Z,TEST_ACCESS:W,ServerValue:Sg})}catch(Uh){Vb("Failed to register the Firebase Database Service ("+Uh+")")}})();</script><script>(function(){var _Mathfloor=Math.floor,_Mathmax=Math.max,h,aa=aa||{},l=this,ba=function(){},ca=function(a){var b=babelHelpers.typeof(a);if("object"==b){if(a){if(babelHelpers.instanceof(a,Array))return"array";if(babelHelpers.instanceof(a,Object))return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";}else if("function"==b&&"undefined"==typeof a.call)return"object";return b},da=function(a){return null===a},ea=function(a){return"array"==ca(a)},fa=function(a){var b=ca(a);return"array"==b||"object"==b&&"number"==typeof a.length},m=function(a){return"string"==typeof a},ga=function(a){return"number"==typeof a},p=function(a){return"function"==ca(a)},ha=function(a){var b=babelHelpers.typeof(a);return"object"==b&&null!=a||"function"==b},ia=function(a){return a.call.apply(a.bind,arguments)},ja=function(a,b){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}},_q=function q(){_q=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ia:ja;return _q.apply(null,arguments)},ka=function(a){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}},la=Date.now||function(){return+new Date},r=function(a,b){function c(){}c.prototype=b.prototype;a.xd=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Tf=function(a,c){for(var d=Array(arguments.length-2),e=2;e<arguments.length;e++){d[e-2]=arguments[e]}return b.prototype[c].apply(a,d)}},t=function(a){if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=a+"")};r(t,Error);t.prototype.name="CustomError";var ma=function(a){for(var c=a.split("%s"),d="",e=Array.prototype.slice.call(arguments,1);e.length&&1<c.length;){d+=c.shift()+e.shift()}return d+c.join("%s")},na=String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},oa=/&/g,pa=/</g,qa=/>/g,ra=/"/g,sa=/'/g,ta=/\x00/g,ua=/[\x00&<>"']/,u=function(a,b){return-1!=a.indexOf(b)},va=function(a,b){return a<b?-1:a>b?1:0},wa=function(a,b){b.unshift(a);t.call(this,ma.apply(null,b));b.shift()};r(wa,t);wa.prototype.name="AssertionError";var xa=function(a,b,c,d){var e="Assertion failed";if(c)var e=e+(": "+c),f=d;else a&&(e+=": "+a,f=b);throw new wa(""+e,f||[])},v=function(a,b){a||xa("",null,b,Array.prototype.slice.call(arguments,2))},ya=function(a){throw new wa("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1))},za=function(a,b){ga(a)||xa("Expected number but got %s: %s.",[ca(a),a],b,Array.prototype.slice.call(arguments,2));return a},Aa=function(a,b){m(a)||xa("Expected string but got %s: %s.",[ca(a),a],b,Array.prototype.slice.call(arguments,2))},Ba=function(a,b){p(a)||xa("Expected function but got %s: %s.",[ca(a),a],b,Array.prototype.slice.call(arguments,2))},Ca=Array.prototype.indexOf?function(a,b,c){v(null!=a.length);return Array.prototype.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?_Mathmax(0,a.length+c):c;if(m(a))return m(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++){if(c in a&&a[c]===b)return c}return-1},w=Array.prototype.forEach?function(a,b,c){v(null!=a.length);Array.prototype.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=m(a)?a.split(""):a,f=0;f<d;f++){f in e&&b.call(c,e[f],f,a)}},Da=function(a,b){for(var c=m(a)?a.split(""):a,d=a.length-1;0<=d;--d){d in c&&b.call(void 0,c[d],d,a)}},Ea=Array.prototype.map?function(a,b,c){v(null!=a.length);return Array.prototype.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=m(a)?a.split(""):a,g=0;g<d;g++){g in f&&(e[g]=b.call(c,f[g],g,a))}return e},Fa=Array.prototype.some?function(a,b,c){v(null!=a.length);return Array.prototype.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=m(a)?a.split(""):a,f=0;f<d;f++){if(f in e&&b.call(c,e[f],f,a))return!0}return!1},Ha=function(a){var b;a:{b=Ga;for(var c=a.length,d=m(a)?a.split(""):a,e=0;e<c;e++){if(e in d&&b.call(void 0,d[e],e,a)){b=e;break a}}b=-1}return 0>b?null:m(a)?a.charAt(b):a[b]},Ia=function(a,b){return 0<=Ca(a,b)},Ka=function(a,b){b=Ca(a,b);var c;(c=0<=b)&&Ja(a,b);return c},Ja=function(a,b){v(null!=a.length);return 1==Array.prototype.splice.call(a,b,1).length},La=function(a,b){var c=0;Da(a,function(d,e){b.call(void 0,d,e,a)&&Ja(a,e)&&c++})},Ma=function(){return Array.prototype.concat.apply([],arguments)},Na=function(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++){c[d]=a[d]}return c}return[]},Oa=function(a){return Ea(a,function(a){a=a.toString(16);return 1<a.length?a:"0"+a}).join("")},Pa;a:{var Qa=l.navigator;if(Qa){var Ra=Qa.userAgent;if(Ra){Pa=Ra;break a}}Pa=""}var x=function(a){return u(Pa,a)},Sa=function(a,b){for(var c in a){b.call(void 0,a[c],c,a)}},Ta=function(a){var b=[],c=0,d;for(d in a){b[c++]=a[d]}return b},Ua=function(a){var b=[],c=0,d;for(d in a){b[c++]=d}return b},Va=function(a){for(var b in a){return!1}return!0},Wa=function(a,b){for(var c in a){if(!(c in b)||a[c]!==b[c])return!1}for(c in b){if(!(c in a))return!1}return!0},Xa=function(a){var b={},c;for(c in a){b[c]=a[c]}return b},Ya="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),Za=function(a){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d){a[c]=d[c]}for(var f=0;f<Ya.length;f++){c=Ya[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}}},$a=function(a){$a[" "](a);return a};$a[" "]=ba;var bb=function(a,b){var c=ab;return Object.prototype.hasOwnProperty.call(c,a)?c[a]:c[a]=b(a)},cb=x("Opera"),y=x("Trident")||x("MSIE"),eb=x("Edge"),gb=x("Gecko")&&!(u(Pa.toLowerCase(),"webkit")&&!x("Edge"))&&!(x("Trident")||x("MSIE"))&&!x("Edge"),hb=u(Pa.toLowerCase(),"webkit")&&!x("Edge"),ib=function(){var a=l.document;return a?a.documentMode:void 0},jb;a:{var kb="",lb=function(){var a=Pa;if(gb)return /rv\:([^\);]+)(\)|;)/.exec(a);if(eb)return /Edge\/([\d\.]+)/.exec(a);if(y)return /\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(hb)return /WebKit\/(\S+)/.exec(a);if(cb)return /(?:Version)[ \/]?(\S+)/.exec(a)}();lb&&(kb=lb?lb[1]:"");if(y){var mb=ib();if(null!=mb&&mb>parseFloat(kb)){jb=mb+"";break a}}jb=kb}var nb=jb,ab={},z=function(a){return bb(a,function(){for(var b=0,c=na(nb+"").split("."),d=na(a+"").split("."),e=_Mathmax(c.length,d.length),f=0;0==b&&f<e;f++){var g=c[f]||"",k=d[f]||"";do{g=/(\d*)(\D*)(.*)/.exec(g)||["","","",""];k=/(\d*)(\D*)(.*)/.exec(k)||["","","",""];if(0==g[0].length&&0==k[0].length)break;b=va(0==g[1].length?0:parseInt(g[1],10),0==k[1].length?0:parseInt(k[1],10))||va(0==g[2].length,0==k[2].length)||va(g[2],k[2]);g=g[3];k=k[3]}while(0==b)}return 0<=b})},ob,pb=l.document;ob=pb&&y?ib()||("CSS1Compat"==pb.compatMode?parseInt(nb,10):5):void 0;var qb=null,rb=null,tb=function(a){var b="";sb(a,function(a){b+=String.fromCharCode(a)});return b},sb=function(a,b){function c(b){for(;d<a.length;){var c=a.charAt(d++),e=rb[c];if(null!=e)return e;if(!/^[\s\xa0]*$/.test(c))throw Error("Unknown base64 encoding at char: "+c)}return b}ub();for(var d=0;;){var e=c(-1),f=c(0),g=c(64),k=c(64);if(64===k&&-1===e)break;b(e<<2|f>>4);64!=g&&(b(240&f<<4|g>>2),64!=k&&b(192&g<<6|k))}},ub=function(){if(!qb){qb={};rb={};for(var a=0;65>a;a++){qb[a]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(a),rb[qb[a]]=a,62<=a&&(rb["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(a)]=a)}}},yb=function(a,b){this.Da=64;this.ec=l.Uint8Array?new Uint8Array(this.Da):Array(this.Da);this.Fc=this.hb=0;this.h=[];this.lf=a;this.Wd=b;this.Mf=l.Int32Array?new Int32Array(64):Array(64);void 0!==wb||(wb=l.Int32Array?new Int32Array(xb):xb);this.reset()},wb;r(yb,function vb(){this.Da=-1});for(var zb=[],Ab=0;63>Ab;Ab++){zb[Ab]=0}var Bb=Ma(128,zb);yb.prototype.reset=function(){this.Fc=this.hb=0;this.h=l.Int32Array?new Int32Array(this.Wd):Na(this.Wd)};var Cb=function(a){var b=a.ec;v(b.length==a.Da);for(var c=a.Mf,d=0,e=0;e<b.length;){c[d++]=b[e]<<24|b[e+1]<<16|b[e+2]<<8|b[e+3],e=4*d}for(b=16;64>b;b++){var e=0|c[b-15],d=0|c[b-2],f=0|(0|c[b-16])+((e>>>7|e<<25)^(e>>>18|e<<14)^e>>>3),g=0|(0|c[b-7])+((d>>>17|d<<15)^(d>>>19|d<<13)^d>>>10);c[b]=0|f+g}for(var d=0|a.h[0],e=0|a.h[1],k=0|a.h[2],n=0|a.h[3],C=0|a.h[4],db=0|a.h[5],Pb=0|a.h[6],f=0|a.h[7],b=0;64>b;b++){var Ah=0|((d>>>2|d<<30)^(d>>>13|d<<19)^(d>>>22|d<<10))+(d&e^d&k^e&k),g=C&db^~C&Pb,f=0|f+((C>>>6|C<<26)^(C>>>11|C<<21)^(C>>>25|C<<7)),g=0|g+(0|wb[b]),g=0|f+(0|g+(0|c[b])),f=Pb,Pb=db,db=C,C=0|n+g,n=k,k=e,e=d,d=0|g+Ah}a.h[0]=0|a.h[0]+d;a.h[1]=0|a.h[1]+e;a.h[2]=0|a.h[2]+k;a.h[3]=0|a.h[3]+n;a.h[4]=0|a.h[4]+C;a.h[5]=0|a.h[5]+db;a.h[6]=0|a.h[6]+Pb;a.h[7]=0|a.h[7]+f};yb.prototype.update=function(a,b){void 0===b&&(b=a.length);var c=0,d=this.hb;if(m(a))for(;c<b;){this.ec[d++]=a.charCodeAt(c++),d==this.Da&&(Cb(this),d=0)}else if(fa(a))for(;c<b;){var e=a[c++];if(!("number"==typeof e&&0<=e&&255>=e&&e==(0|e)))throw Error("message must be a byte array");this.ec[d++]=e;d==this.Da&&(Cb(this),d=0)}else throw Error("message must be string or array");this.hb=d;this.Fc+=b};yb.prototype.digest=function(){var a=[],b=8*this.Fc;56>this.hb?this.update(Bb,56-this.hb):this.update(Bb,this.Da-(this.hb-56));for(var c=63;56<=c;c--){this.ec[c]=255&b,b/=256}Cb(this);for(c=b=0;c<this.lf;c++){for(var d=24;0<=d;d-=8){a[b++]=255&this.h[c]>>d}}return a};var xb=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],Eb=function(){yb.call(this,8,Db)};r(Eb,yb);var Db=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],Fb=function(){this.Ga=this.Ga;this.tc=this.tc};Fb.prototype.Ga=!1;Fb.prototype.isDisposed=function(){return this.Ga};Fb.prototype.cb=function(){if(this.tc)for(;this.tc.length;){this.tc.shift()()}};var Gb=!y||9<=+ob,Hb=y&&!z("9");hb&&z("528");gb&&z("1.9b")||y&&z("8")||cb&&z("9.5")||hb&&z("528");gb&&!z("8")||y&&z("9");var Ib=function(a,b){this.type=a;this.currentTarget=this.target=b;this.defaultPrevented=this.nb=!1;this.ee=!0};Ib.prototype.preventDefault=function(){this.defaultPrevented=!0;this.ee=!1};var Jb=function(a,b){Ib.call(this,a?a.type:"");this.relatedTarget=this.currentTarget=this.target=null;this.button=this.screenY=this.screenX=this.clientY=this.clientX=this.offsetY=this.offsetX=0;this.key="";this.charCode=this.keyCode=0;this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1;this.eb=this.state=null;a&&this.init(a,b)};r(Jb,Ib);Jb.prototype.init=function(a,b){var c=this.type=a.type,d=a.changedTouches?a.changedTouches[0]:null;this.target=a.target||a.srcElement;this.currentTarget=b;if(b=a.relatedTarget){if(gb){var e;a:{try{$a(b.nodeName);e=!0;break a}catch(f){}e=!1}e||(b=null)}}else"mouseover"==c?b=a.fromElement:"mouseout"==c&&(b=a.toElement);this.relatedTarget=b;null===d?(this.offsetX=hb||void 0!==a.offsetX?a.offsetX:a.layerX,this.offsetY=hb||void 0!==a.offsetY?a.offsetY:a.layerY,this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0):(this.clientX=void 0!==d.clientX?d.clientX:d.pageX,this.clientY=void 0!==d.clientY?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0);this.button=a.button;this.keyCode=a.keyCode||0;this.key=a.key||"";this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.state=a.state;this.eb=a;a.defaultPrevented&&this.preventDefault()};Jb.prototype.preventDefault=function(){Jb.xd.preventDefault.call(this);var a=this.eb;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,Hb)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};Jb.prototype.Pe=function(){return this.eb};var Kb="closure_listenable_"+(0|1E6*Math.random()),Lb=0,Mb=function(a,b,c,d,e){this.listener=a;this.xc=null;this.src=b;this.type=c;this.capture=!!d;this.kc=e;this.key=++Lb;this.rb=this.dc=!1},Nb=function(a){a.rb=!0;a.listener=null;a.xc=null;a.src=null;a.kc=null},Ob=function(a){this.src=a;this.G={};this.$b=0};Ob.prototype.add=function(a,b,c,d,e){var f=a.toString();a=this.G[f];a||(a=this.G[f]=[],this.$b++);var g=Qb(a,b,d,e);-1<g?(b=a[g],c||(b.dc=!1)):(b=new Mb(b,this.src,f,!!d,e),b.dc=c,a.push(b));return b};Ob.prototype.remove=function(a,b,c,d){a=a.toString();if(!(a in this.G))return!1;var e=this.G[a];b=Qb(e,b,c,d);return-1<b?(Nb(e[b]),Ja(e,b),0==e.length&&(delete this.G[a],this.$b--),!0):!1};var Rb=function(a,b){var c=b.type;c in a.G&&Ka(a.G[c],b)&&(Nb(b),0==a.G[c].length&&(delete a.G[c],a.$b--))};Ob.prototype.Uc=function(a,b,c,d){a=this.G[a.toString()];var e=-1;a&&(e=Qb(a,b,c,d));return-1<e?a[e]:null};var Qb=function(a,b,c,d){for(var e=0,f;e<a.length;++e){f=a[e];if(!f.rb&&f.listener==b&&f.capture==!!c&&f.kc==d)return e}return-1},Sb="closure_lm_"+(0|1E6*Math.random()),Tb={},Ub=0,Vb=function(a,b,c,d,e){if(ea(b))for(var f=0;f<b.length;f++){Vb(a,b[f],c,d,e)}else c=Wb(c),a&&a[Kb]?a.listen(b,c,d,e):Xb(a,b,c,!1,d,e)},Xb=function(a,b,c,d,e,f){if(!b)throw Error("Invalid event type");var k=Yb(a);k||(a[Sb]=k=new Ob(a));c=k.add(b,c,d,e,f);if(!c.xc){d=Zb();c.xc=d;d.src=a;d.listener=c;if(a.addEventListener)a.addEventListener(b.toString(),d,!!e);else if(a.attachEvent)a.attachEvent($b(b.toString()),d);else throw Error("addEventListener and attachEvent are unavailable.");Ub++}},Zb=function(){var a=ac,b=Gb?function(c){return a.call(b.src,b.listener,c)}:function(c){c=a.call(b.src,b.listener,c);if(!c)return c};return b},bc=function(a,b,c,d,e){if(ea(b))for(var f=0;f<b.length;f++){bc(a,b[f],c,d,e)}else c=Wb(c),a&&a[Kb]?cc(a,b,c,d,e):Xb(a,b,c,!0,d,e)},dc=function(a,b,c,d,e){if(ea(b))for(var f=0;f<b.length;f++){dc(a,b[f],c,d,e)}else c=Wb(c),a&&a[Kb]?a.fa.remove(b+"",c,d,e):a&&(a=Yb(a))&&(b=a.Uc(b,c,!!d,e))&&ec(b)},ec=function(a){if(!ga(a)&&a&&!a.rb){var b=a.src;if(b&&b[Kb])Rb(b.fa,a);else{var c=a.type,d=a.xc;b.removeEventListener?b.removeEventListener(c,d,a.capture):b.detachEvent&&b.detachEvent($b(c),d);Ub--;(c=Yb(b))?(Rb(c,a),0==c.$b&&(c.src=null,b[Sb]=null)):Nb(a)}}},$b=function(a){return a in Tb?Tb[a]:Tb[a]="on"+a},gc=function(a,b,c,d){var e=!0;if(a=Yb(a))if(b=a.G[b.toString()])for(b=b.concat(),a=0;a<b.length;a++){var f=b[a];f&&f.capture==c&&!f.rb&&(f=fc(f,d),e=e&&!1!==f)}return e},fc=function(a,b){var c=a.listener,d=a.kc||a.src;a.dc&&ec(a);return c.call(d,b)},ac=function(a,b){if(a.rb)return!0;if(!Gb){if(!b)a:{b=["window","event"];for(var c=l,d;d=b.shift();){if(null!=c[d])c=c[d];else{b=null;break a}}b=c}d=b;b=new Jb(d,this);c=!0;if(!(0>d.keyCode||void 0!=d.returnValue)){a:{var e=!1;if(0==d.keyCode)try{d.keyCode=-1;break a}catch(g){e=!0}if(e||void 0==d.returnValue)d.returnValue=!0}d=[];for(e=b.currentTarget;e;e=e.parentNode){d.push(e)}a=a.type;for(e=d.length-1;!b.nb&&0<=e;e--){b.currentTarget=d[e];var f=gc(d[e],a,!0,b),c=c&&f}for(e=0;!b.nb&&e<d.length;e++){b.currentTarget=d[e],f=gc(d[e],a,!1,b),c=c&&f}}return c}return fc(a,new Jb(b,this))},Yb=function(a){a=a[Sb];return babelHelpers.instanceof(a,Ob)?a:null},hc="__closure_events_fn_"+(1E9*Math.random()>>>0),Wb=function(a){v(a,"Listener can not be null.");if(p(a))return a;v(a.handleEvent,"An object listener must have handleEvent method.");a[hc]||(a[hc]=function(b){return a.handleEvent(b)});return a[hc]},ic=/^[+a-zA-Z0-9_.!#$%&'*\/=?^`{|}~-]+@([a-zA-Z0-9-]+\.)+[a-zA-Z0-9]{2,63}$/,kc=function(){this.Cc="";this.we=jc};kc.prototype.Eb=!0;kc.prototype.Bb=function(){return this.Cc};kc.prototype.toString=function(){return"Const{"+this.Cc+"}"};var lc=function(a){if(babelHelpers.instanceof(a,kc)&&a.constructor===kc&&a.we===jc)return a.Cc;ya("expected object of type Const, got '"+a+"'");return"type_error:Const"},jc={},mc=function(a){var b=new kc;b.Cc=a;return b};mc("");var oc=function(){this.wc="";this.xe=nc};oc.prototype.Eb=!0;oc.prototype.Bb=function(){return this.wc};oc.prototype.toString=function(){return"TrustedResourceUrl{"+this.wc+"}"};var nc={},qc=function(){this.pa="";this.ve=pc};qc.prototype.Eb=!0;qc.prototype.Bb=function(){return this.pa};qc.prototype.toString=function(){return"SafeUrl{"+this.pa+"}"};var rc=function(a){if(babelHelpers.instanceof(a,qc)&&a.constructor===qc&&a.ve===pc)return a.pa;ya("expected object of type SafeUrl, got '"+a+"' of type "+ca(a));return"type_error:SafeUrl"},sc=/^(?:(?:https?|mailto|ftp):|[^&:/?#]*(?:[/?#]|$))/i,uc=function(a){if(babelHelpers.instanceof(a,qc))return a;a=a.Eb?a.Bb():a+"";sc.test(a)||(a="about:invalid#zClosurez");return tc(a)},pc={},tc=function(a){var b=new qc;b.pa=a;return b};tc("about:blank");var xc=function(a){var b=[];vc(new wc,a,b);return b.join("")},wc=function(){this.yc=void 0},vc=function(a,b,c){if(null==b)c.push("null");else{if("object"==babelHelpers.typeof(b)){if(ea(b)){var d=b;b=d.length;c.push("[");for(var e="",f=0;f<b;f++){c.push(e),e=d[f],vc(a,a.yc?a.yc.call(d,f+"",e):e,c),e=","}c.push("]");return}if(babelHelpers.instanceof(b,String)||babelHelpers.instanceof(b,Number)||babelHelpers.instanceof(b,Boolean))b=b.valueOf();else{c.push("{");f="";for(d in b){Object.prototype.hasOwnProperty.call(b,d)&&(e=b[d],"function"!=typeof e&&(c.push(f),yc(d,c),c.push(":"),vc(a,a.yc?a.yc.call(b,d,e):e,c),f=","))}c.push("}");return}}switch(babelHelpers.typeof(b)){case"string":yc(b,c);break;case"number":c.push(isFinite(b)&&!isNaN(b)?b+"":"null");break;case"boolean":c.push(b+"");break;case"function":c.push("null");break;default:throw Error("Unknown type: "+babelHelpers.typeof(b));}}},zc={'"':"\\\"","\\":"\\\\","/":"\\/","":"\\b","":"\\f","\n":"\\n","\r":"\\r","	":"\\t","":"\\u000b"},Ac=/\uffff/.test("\uFFFF")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g,yc=function(a,b){b.push("\"",a.replace(Ac,function(a){var b=zc[a];b||(b="\\u"+(65536|a.charCodeAt(0)).toString(16).substr(1),zc[a]=b);return b}),"\"")},Bc=function(){};Bc.prototype.Dd=null;var Cc=function(a){return a.Dd||(a.Dd=a.$c())},Dc,Ec=function(){};r(Ec,Bc);Ec.prototype.fc=function(){var a=Fc(this);return a?new ActiveXObject(a):new XMLHttpRequest};Ec.prototype.$c=function(){var a={};Fc(this)&&(a[0]=!0,a[1]=!0);return a};var Fc=function(a){if(!a.Vd&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var b=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],c=0,d;c<b.length;c++){d=b[c];try{return new ActiveXObject(d),a.Vd=d}catch(e){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return a.Vd};Dc=new Ec;var Gc=function(){};r(Gc,Bc);Gc.prototype.fc=function(){var a=new XMLHttpRequest;if("withCredentials"in a)return a;if("undefined"!=typeof XDomainRequest)return new Hc;throw Error("Unsupported browser")};Gc.prototype.$c=function(){return{}};var Hc=function(){this.ua=new XDomainRequest;this.readyState=0;this.onreadystatechange=null;this.responseText="";this.status=-1;this.statusText=this.responseXML=null;this.ua.onload=_q(this.Re,this);this.ua.onerror=_q(this.Sd,this);this.ua.onprogress=_q(this.Se,this);this.ua.ontimeout=_q(this.Te,this)};h=Hc.prototype;h.open=function(a,b,c){if(null!=c&&!c)throw Error("Only async requests are supported.");this.ua.open(a,b)};h.send=function(a){if(a){if("string"==typeof a)this.ua.send(a);else throw Error("Only string data is supported");}else this.ua.send()};h.abort=function(){this.ua.abort()};h.setRequestHeader=function(){};h.Re=function(){this.status=200;this.responseText=this.ua.responseText;Ic(this,4)};h.Sd=function(){this.status=500;this.responseText="";Ic(this,4)};h.Te=function(){this.Sd()};h.Se=function(){this.status=200;Ic(this,1)};var Ic=function(a,b){a.readyState=b;if(a.onreadystatechange)a.onreadystatechange()},Jc=function(a,b,c){this.ef=c;this.Fe=a;this.wf=b;this.sc=0;this.lc=null};Jc.prototype.get=function(){var a;0<this.sc?(this.sc--,a=this.lc,this.lc=a.next,a.next=null):a=this.Fe();return a};Jc.prototype.put=function(a){this.wf(a);this.sc<this.ef&&(this.sc++,a.next=this.lc,this.lc=a)};var Kc=function(a){l.setTimeout(function(){throw a},0)},Lc,Mc=function(){var a=l.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!x("Presto")&&(a=function(){var a=document.createElement("IFRAME");a.style.display="none";a.src="";document.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open();a.write("");a.close();var c="callImmediate"+Math.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host,a=_q(function(a){if(("*"==d||a.origin==d)&&a.data==c)this.port1.onmessage()},this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function postMessage(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&!x("Trident")&&!x("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(void 0!==c.next){c=c.next;var a=c.Gd;c.Gd=null;a()}};return function(a){d.next={Gd:a};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(a){var b=document.createElement("SCRIPT");b.onreadystatechange=function(){b.onreadystatechange=null;b.parentNode.removeChild(b);b=null;a();a=null};document.documentElement.appendChild(b)}:function(a){l.setTimeout(a,0)}},Nc=function(){this.Jc=this.Za=null},Pc=new Jc(function(){return new Oc},function(a){a.reset()},100);Nc.prototype.add=function(a,b){var c=Pc.get();c.set(a,b);this.Jc?this.Jc.next=c:(v(!this.Za),this.Za=c);this.Jc=c};Nc.prototype.remove=function(){var a=null;this.Za&&(a=this.Za,this.Za=this.Za.next,this.Za||(this.Jc=null),a.next=null);return a};var Oc=function(){this.next=this.scope=this.Tc=null};Oc.prototype.set=function(a,b){this.Tc=a;this.scope=b;this.next=null};Oc.prototype.reset=function(){this.next=this.scope=this.Tc=null};var Uc=function(a,b){Qc||Rc();Sc||(Qc(),Sc=!0);Tc.add(a,b)},Qc,Rc=function(){if(-1!=(l.Promise+"").indexOf("[native code]")){var a=l.Promise.resolve(void 0);Qc=function(){a.then(Vc)}}else Qc=function(){var a=Vc;!p(l.setImmediate)||l.Window&&l.Window.prototype&&!x("Edge")&&l.Window.prototype.setImmediate==l.setImmediate?(Lc||(Lc=Mc()),Lc(a)):l.setImmediate(a)}},Sc=!1,Tc=new Nc,Vc=function(){for(var a;a=Tc.remove();){try{a.Tc.call(a.scope)}catch(b){Kc(b)}Pc.put(a)}Sc=!1};!gb&&!y||y&&9<=+ob||gb&&z("1.9.1");y&&z("9");var Xc=function(){this.pa="";this.ue=Wc};Xc.prototype.Eb=!0;Xc.prototype.Bb=function(){return this.pa};Xc.prototype.toString=function(){return"SafeHtml{"+this.pa+"}"};var Yc=function(a){if(babelHelpers.instanceof(a,Xc)&&a.constructor===Xc&&a.ue===Wc)return a.pa;ya("expected object of type SafeHtml, got '"+a+"' of type "+ca(a));return"type_error:SafeHtml"},Wc={};Xc.prototype.$e=function(a){this.pa=a;return this};var $c=function(a,b){Sa(b,function(b,d){b&&b.Eb&&(b=b.Bb());"style"==d?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:Zc.hasOwnProperty(d)?a.setAttribute(Zc[d],b):0==d.lastIndexOf("aria-",0)||0==d.lastIndexOf("data-",0)?a.setAttribute(d,b):a[d]=b})},Zc={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"},ad=function(a){a.prototype.then=a.prototype.then;a.prototype.$goog_Thenable=!0},bd=function(a){if(!a)return!1;try{return!!a.$goog_Thenable}catch(b){return!1}},A=function(a,b){this.N=0;this.ra=void 0;this.bb=this.na=this.s=null;this.jc=this.Sc=!1;if(a!=ba)try{var c=this;a.call(b,function(a){cd(c,2,a)},function(a){if(!babelHelpers.instanceof(a,dd))try{if(babelHelpers.instanceof(a,Error))throw a;throw Error("Promise rejected.")}catch(e){}cd(c,3,a)})}catch(d){cd(this,3,d)}},ed=function(){this.next=this.context=this.jb=this.Oa=this.child=null;this.xb=!1};ed.prototype.reset=function(){this.context=this.jb=this.Oa=this.child=null;this.xb=!1};var fd=new Jc(function(){return new ed},function(a){a.reset()},100),gd=function(a,b,c){var d=fd.get();d.Oa=a;d.jb=b;d.context=c;return d},B=function(a){if(babelHelpers.instanceof(a,A))return a;var b=new A(ba);cd(b,2,a);return b},D=function(a){return new A(function(b,c){c(a)})},id=function(a,b,c){hd(a,b,c,null)||Uc(ka(b,a))},jd=function(a){return new A(function(b){var c=a.length,d=[];if(c)for(var e=function(a,_e,f){c--;d[a]=_e?{Ne:!0,value:f}:{Ne:!1,reason:f};0==c&&b(d)},f=0,g;f<a.length;f++){g=a[f],id(g,ka(e,f,!0),ka(e,f,!1))}else b(d)})};A.prototype.then=function(a,b,c){null!=a&&Ba(a,"opt_onFulfilled should be a function.");null!=b&&Ba(b,"opt_onRejected should be a function. Did you pass opt_context as the second argument instead of the third?");return kd(this,p(a)?a:null,p(b)?b:null,c)};ad(A);var md=function(a,b){b=gd(b,b,void 0);b.xb=!0;ld(a,b);return a};A.prototype.f=function(a,b){return kd(this,null,a,b)};A.prototype.cancel=function(a){0==this.N&&Uc(function(){var b=new dd(a);nd(this,b)},this)};var nd=function(a,b){if(0==a.N)if(a.s){var c=a.s;if(c.na){for(var d=0,e=null,f=null,g=c.na;g&&(g.xb||(d++,g.child==a&&(e=g),!(e&&1<d)));g=g.next){e||(f=g)}e&&(0==c.N&&1==d?nd(c,b):(f?(d=f,v(c.na),v(null!=d),d.next==c.bb&&(c.bb=d),d.next=d.next.next):od(c),pd(c,e,3,b)))}a.s=null}else cd(a,3,b)},ld=function(a,b){a.na||2!=a.N&&3!=a.N||qd(a);v(null!=b.Oa);a.bb?a.bb.next=b:a.na=b;a.bb=b},kd=function(a,b,c,d){var e=gd(null,null,null);e.child=new A(function(a,g){e.Oa=b?function(c){try{var e=b.call(d,c);a(e)}catch(C){g(C)}}:a;e.jb=c?function(b){try{var e=c.call(d,b);void 0===e&&babelHelpers.instanceof(b,dd)?g(b):a(e)}catch(C){g(C)}}:g});e.child.s=a;ld(a,e);return e.child};A.prototype.Jf=function(a){v(1==this.N);this.N=0;cd(this,2,a)};A.prototype.Kf=function(a){v(1==this.N);this.N=0;cd(this,3,a)};var cd=function(a,b,c){0==a.N&&(a===c&&(b=3,c=new TypeError("Promise cannot resolve to itself")),a.N=1,hd(c,a.Jf,a.Kf,a)||(a.ra=c,a.N=b,a.s=null,qd(a),3!=b||babelHelpers.instanceof(c,dd)||rd(a,c)))},hd=function(a,b,c,d){if(babelHelpers.instanceof(a,A))return null!=b&&Ba(b,"opt_onFulfilled should be a function."),null!=c&&Ba(c,"opt_onRejected should be a function. Did you pass opt_context as the second argument instead of the third?"),ld(a,gd(b||ba,c||null,d)),!0;if(bd(a))return a.then(b,c,d),!0;if(ha(a))try{var e=a.then;if(p(e))return sd(a,e,b,c,d),!0}catch(f){return c.call(d,f),!0}return!1},sd=function(a,b,c,d,e){var f=!1,g=function(a){f||(f=!0,c.call(e,a))},k=function(a){f||(f=!0,d.call(e,a))};try{b.call(a,g,k)}catch(n){k(n)}},qd=function(a){a.Sc||(a.Sc=!0,Uc(a.Je,a))},od=function(a){var b=null;a.na&&(b=a.na,a.na=b.next,b.next=null);a.na||(a.bb=null);null!=b&&v(null!=b.Oa);return b};A.prototype.Je=function(){for(var a;a=od(this);){pd(this,a,this.N,this.ra)}this.Sc=!1};var pd=function(a,b,c,d){if(3==c&&b.jb&&!b.xb)for(;a&&a.jc;a=a.s){a.jc=!1}if(b.child)b.child.s=null,td(b,c,d);else try{b.xb?b.Oa.call(b.context):td(b,c,d)}catch(e){ud.call(null,e)}fd.put(b)},td=function(a,b,c){2==b?a.Oa.call(a.context,c):a.jb&&a.jb.call(a.context,c)},rd=function(a,b){a.jc=!0;Uc(function(){a.jc&&ud.call(null,b)})},ud=Kc,dd=function(a){t.call(this,a)};r(dd,t);dd.prototype.name="cancel";var vd=function(a,b){this.zc=[];this.$d=a;this.Jd=b||null;this.Cb=this.fb=!1;this.ra=void 0;this.ud=this.Cd=this.Nc=!1;this.Gc=0;this.s=null;this.Oc=0};vd.prototype.cancel=function(a){if(this.fb)babelHelpers.instanceof(this.ra,vd)&&this.ra.cancel();else{if(this.s){var b=this.s;delete this.s;a?b.cancel(a):(b.Oc--,0>=b.Oc&&b.cancel())}this.$d?this.$d.call(this.Jd,this):this.ud=!0;this.fb||wd(this,new xd)}};vd.prototype.Hd=function(a,b){this.Nc=!1;yd(this,a,b)};var yd=function(a,b,c){a.fb=!0;a.ra=c;a.Cb=!b;zd(a)},Bd=function(a){if(a.fb){if(!a.ud)throw new Ad;a.ud=!1}};vd.prototype.callback=function(a){Bd(this);Cd(a);yd(this,!0,a)};var wd=function(a,b){Bd(a);Cd(b);yd(a,!1,b)},Cd=function(a){v(!babelHelpers.instanceof(a,vd),"An execution sequence may not be initiated with a blocking Deferred.")},Gd=function(a){var b=Dd("https://apis.google.com/js/client.js?onload="+Ed);Fd(b,null,a,void 0)},Fd=function(a,b,c,d){v(!a.Cd,"Blocking Deferreds can not be re-used");a.zc.push([b,c,d]);a.fb&&zd(a)};vd.prototype.then=function(a,b,c){var d,e,f=new A(function(a,b){d=a;e=b});Fd(this,d,function(a){babelHelpers.instanceof(a,xd)?f.cancel():e(a)});return f.then(a,b,c)};ad(vd);var Hd=function(a){return Fa(a.zc,function(a){return p(a[1])})},zd=function(a){if(a.Gc&&a.fb&&Hd(a)){var b=a.Gc,c=Id[b];c&&(l.clearTimeout(c.Db),delete Id[b]);a.Gc=0}a.s&&(a.s.Oc--,delete a.s);for(var b=a.ra,d=c=!1;a.zc.length&&!a.Nc;){var e=a.zc.shift(),f=e[0],g=e[1],e=e[2];if(f=a.Cb?g:f)try{var k=f.call(e||a.Jd,b);void 0!==k&&(a.Cb=a.Cb&&(k==b||babelHelpers.instanceof(k,Error)),a.ra=b=k);if(bd(b)||"function"===typeof l.Promise&&babelHelpers.instanceof(b,l.Promise))d=!0,a.Nc=!0}catch(n){b=n,a.Cb=!0,Hd(a)||(c=!0)}}a.ra=b;d&&(k=_q(a.Hd,a,!0),d=_q(a.Hd,a,!1),babelHelpers.instanceof(b,vd)?(Fd(b,k,d),b.Cd=!0):b.then(k,d));c&&(b=new Jd(b),Id[b.Db]=b,a.Gc=b.Db)},Ad=function(){t.call(this)};r(Ad,t);Ad.prototype.message="Deferred has already fired";Ad.prototype.name="AlreadyCalledError";var xd=function(){t.call(this)};r(xd,t);xd.prototype.message="Deferred was canceled";xd.prototype.name="CanceledError";var Jd=function(a){this.Db=l.setTimeout(_q(this.If,this),0);this.P=a};Jd.prototype.If=function(){v(Id[this.Db],"Cannot throw an error that is not scheduled.");delete Id[this.Db];throw this.P};var Id={},Dd=function(a){var b=new oc;b.wc=a;return Kd(b)},Kd=function(a){var b={},c=b.document||document,d;babelHelpers.instanceof(a,oc)&&a.constructor===oc&&a.xe===nc?d=a.wc:(ya("expected object of type TrustedResourceUrl, got '"+a+"' of type "+ca(a)),d="type_error:TrustedResourceUrl");var e=document.createElement("SCRIPT");a={fe:e,Zb:void 0};var f=new vd(Ld,a),g=null,k=null!=b.timeout?b.timeout:5E3;0<k&&(g=window.setTimeout(function(){Md(e,!0);wd(f,new Nd(1,"Timeout reached for loading script "+d))},k),a.Zb=g);e.onload=e.onreadystatechange=function(){e.readyState&&"loaded"!=e.readyState&&"complete"!=e.readyState||(Md(e,b.Uf||!1,g),f.callback(null))};e.onerror=function(){Md(e,!0,g);wd(f,new Nd(0,"Error while loading script "+d))};a=b.attributes||{};Za(a,{type:"text/javascript",charset:"UTF-8",src:d});$c(e,a);Od(c).appendChild(e);return f},Od=function(a){var b;return(b=(a||document).getElementsByTagName("HEAD"))&&0!=b.length?b[0]:a.documentElement},Ld=function(){if(this&&this.fe){var a=this.fe;a&&"SCRIPT"==a.tagName&&Md(a,!0,this.Zb)}},Md=function(a,b,c){null!=c&&l.clearTimeout(c);a.onload=ba;a.onerror=ba;a.onreadystatechange=ba;b&&window.setTimeout(function(){a&&a.parentNode&&a.parentNode.removeChild(a)},0)},Nd=function(a,b){var c="Jsloader error (code #"+a+")";b&&(c+=": "+b);t.call(this,c);this.code=a};r(Nd,t);var Pd="StopIteration"in l?l.StopIteration:{message:"StopIteration",stack:""},Qd=function(){};Qd.prototype.next=function(){throw Pd};Qd.prototype.ye=function(){return this};var Rd=function(a){this.ga={};this.w=[];this.wb=this.o=0;var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2){this.set(arguments[d],arguments[d+1])}}else a&&this.addAll(a)};Rd.prototype.Z=function(){Sd(this);for(var a=[],b=0;b<this.w.length;b++){a.push(this.ga[this.w[b]])}return a};Rd.prototype.oa=function(){Sd(this);return this.w.concat()};Rd.prototype.yb=function(a){return Td(this.ga,a)};Rd.prototype.remove=function(a){return Td(this.ga,a)?(delete this.ga[a],this.o--,this.wb++,this.w.length>2*this.o&&Sd(this),!0):!1};var Sd=function(a){if(a.o!=a.w.length){for(var b=0,c=0,d;b<a.w.length;){d=a.w[b];Td(a.ga,d)&&(a.w[c++]=d);b++}a.w.length=c}if(a.o!=a.w.length){for(var e={},c=b=0;b<a.w.length;){d=a.w[b],Td(e,d)||(a.w[c++]=d,e[d]=1),b++}a.w.length=c}};h=Rd.prototype;h.get=function(a,b){return Td(this.ga,a)?this.ga[a]:b};h.set=function(a,b){Td(this.ga,a)||(this.o++,this.w.push(a),this.wb++);this.ga[a]=b};h.addAll=function(a){var b;babelHelpers.instanceof(a,Rd)?(b=a.oa(),a=a.Z()):(b=Ua(a),a=Ta(a));for(var c=0;c<b.length;c++){this.set(b[c],a[c])}};h.forEach=function(a,b){for(var c=this.oa(),d=0;d<c.length;d++){var e=c[d],f=this.get(e);a.call(b,f,e,this)}};h.clone=function(){return new Rd(this)};h.ye=function(a){Sd(this);var b=0,c=this.wb,d=this,e=new Qd;e.next=function(){if(c!=d.wb)throw Error("The map has changed since the iterator was created");if(b>=d.w.length)throw Pd;var e=d.w[b++];return a?e:d.ga[e]};return e};var Td=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},Ud=function(a){if(a.Z&&"function"==typeof a.Z)return a.Z();if(m(a))return a.split("");if(fa(a)){for(var b=[],c=a.length,d=0;d<c;d++){b.push(a[d])}return b}return Ta(a)},Vd=function(a){if(a.oa&&"function"==typeof a.oa)return a.oa();if(!a.Z||"function"!=typeof a.Z){if(fa(a)||m(a)){var b=[];a=a.length;for(var c=0;c<a;c++){b.push(c)}return b}return Ua(a)}},Wd=function(a,b){if(a.forEach&&"function"==typeof a.forEach)a.forEach(b,void 0);else if(fa(a)||m(a))w(a,b,void 0);else for(var c=Vd(a),d=Ud(a),e=d.length,f=0;f<e;f++){b.call(void 0,d[f],c&&c[f],a)}},Xd=function(a,b,c,d,e){this.reset(a,b,c,d,e)};Xd.prototype.Md=null;var Yd=0;Xd.prototype.reset=function(a,b,c,d,e){"number"==typeof e||Yd++;d||la();this.Ib=a;this.hf=b;delete this.Md};Xd.prototype.ie=function(a){this.Ib=a};var Zd=function(a){this.jf=a;this.Td=this.Pc=this.Ib=this.s=null},$d=function(a,b){this.name=a;this.value=b};$d.prototype.toString=function(){return this.name};var ae=new $d("SEVERE",1E3),be=new $d("CONFIG",700),ce=new $d("FINE",500);Zd.prototype.getParent=function(){return this.s};Zd.prototype.ie=function(a){this.Ib=a};var de=function(a){if(a.Ib)return a.Ib;if(a.s)return de(a.s);ya("Root logger has no level set.");return null};Zd.prototype.log=function(a,b,c){if(a.value>=de(this).value)for(p(b)&&(b=b()),a=new Xd(a,b+"",this.jf),c&&(a.Md=c),c="log:"+a.hf,l.console&&(l.console.timeStamp?l.console.timeStamp(c):l.console.markTimeline&&l.console.markTimeline(c)),l.msWriteProfilerMark&&l.msWriteProfilerMark(c),c=this;c;){var d=c,e=a;if(d.Td)for(var f=0;b=d.Td[f];f++){b(e)}c=c.getParent()}};var ee={},fe=null,ge=function(a){fe||(fe=new Zd(""),ee[""]=fe,fe.ie(be));var b;if(!(b=ee[a])){b=new Zd(a);var c=a.lastIndexOf("."),d=a.substr(c+1),c=ge(a.substr(0,c));c.Pc||(c.Pc={});c.Pc[d]=b;b.s=c;ee[a]=b}return b},he=function(){Fb.call(this);this.fa=new Ob(this);this.ze=this;this.hd=null};r(he,Fb);he.prototype[Kb]=!0;h=he.prototype;h.addEventListener=function(a,b,c,d){Vb(this,a,b,c,d)};h.removeEventListener=function(a,b,c,d){dc(this,a,b,c,d)};h.dispatchEvent=function(a){ie(this);var b,c=this.hd;if(c){b=[];for(var d=1;c;c=c.hd){b.push(c),v(1E3>++d,"infinite loop")}}c=this.ze;d=a.type||a;if(m(a))a=new Ib(a,c);else if(babelHelpers.instanceof(a,Ib))a.target=a.target||c;else{var e=a;a=new Ib(d,c);Za(a,e)}var e=!0,f;if(b)for(var g=b.length-1;!a.nb&&0<=g;g--){f=a.currentTarget=b[g],e=je(f,d,!0,a)&&e}a.nb||(f=a.currentTarget=c,e=je(f,d,!0,a)&&e,a.nb||(e=je(f,d,!1,a)&&e));if(b)for(g=0;!a.nb&&g<b.length;g++){f=a.currentTarget=b[g],e=je(f,d,!1,a)&&e}return e};h.cb=function(){he.xd.cb.call(this);if(this.fa){var a=this.fa,b=0,c;for(c in a.G){for(var d=a.G[c],e=0;e<d.length;e++){++b,Nb(d[e])}delete a.G[c];a.$b--}}this.hd=null};h.listen=function(a,b,c,d){ie(this);return this.fa.add(a+"",b,!1,c,d)};var cc=function(a,b,c,d,e){a.fa.add(b+"",c,!0,d,e)},je=function(a,b,c,d){b=a.fa.G[b+""];if(!b)return!0;b=b.concat();for(var e=!0,f=0,g;f<b.length;++f){g=b[f];if(g&&!g.rb&&g.capture==c){var k=g.listener,n=g.kc||g.src;g.dc&&Rb(a.fa,g);e=!1!==k.call(n,d)&&e}}return e&&0!=d.ee};he.prototype.Uc=function(a,b,c,d){return this.fa.Uc(a+"",b,c,d)};var ie=function(a){v(a.fa,"Event target is not initialized. Did you call the superclass (goog.events.EventTarget) constructor?")},E=function(a,b){a&&a.log(ce,b,void 0)},ke=function(a,b,c){if(p(a))c&&(a=_q(a,c));else if(a&&"function"==typeof a.handleEvent)a=_q(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<+b?-1:l.setTimeout(a,b||0)},le=function(a){var b=null;return new A(function(c,d){b=ke(function(){c(void 0)},a);-1==b&&d(Error("Failed to schedule timer."))}).f(function(a){l.clearTimeout(b);throw a})},me=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/,ne=function(a,b){if(a){a=a.split("&");for(var c=0;c<a.length;c++){var d=a[c].indexOf("="),e,f=null;0<=d?(e=a[c].substring(0,d),f=a[c].substring(d+1)):e=a[c];b(e,f?decodeURIComponent(f.replace(/\+/g," ")):"")}}},F=function(a){he.call(this);this.headers=new Rd;this.Lc=a||null;this.va=!1;this.Kc=this.b=null;this.Hb=this.Zd=this.qc="";this.Ka=this.Yc=this.oc=this.Rc=!1;this.sb=0;this.Ec=null;this.de="";this.Hc=this.sf=this.te=!1};r(F,he);var oe=F.prototype,pe=ge("goog.net.XhrIo");oe.U=pe;var qe=/^https?$/i,re=["POST","PUT"];F.prototype.send=function(a,b,c,d){if(this.b)throw Error("[goog.net.XhrIo] Object is active with another request="+this.qc+"; newUri="+a);b=b?b.toUpperCase():"GET";this.qc=a;this.Hb="";this.Zd=b;this.Rc=!1;this.va=!0;this.b=this.Lc?this.Lc.fc():Dc.fc();this.Kc=this.Lc?Cc(this.Lc):Cc(Dc);this.b.onreadystatechange=_q(this.be,this);this.sf&&"onprogress"in this.b&&(this.b.onprogress=_q(function(a){this.ae(a,!0)},this),this.b.upload&&(this.b.upload.onprogress=_q(this.ae,this)));try{E(this.U,se(this,"Opening Xhr")),this.Yc=!0,this.b.open(b,a+"",!0),this.Yc=!1}catch(f){E(this.U,se(this,"Error opening Xhr: "+f.message));this.P(5,f);return}a=c||"";var e=this.headers.clone();d&&Wd(d,function(a,b){e.set(b,a)});d=Ha(e.oa());c=l.FormData&&babelHelpers.instanceof(a,l.FormData);!Ia(re,b)||d||c||e.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");e.forEach(function(a,b){this.b.setRequestHeader(b,a)},this);this.de&&(this.b.responseType=this.de);"withCredentials"in this.b&&this.b.withCredentials!==this.te&&(this.b.withCredentials=this.te);try{te(this),0<this.sb&&(this.Hc=ue(this.b),E(this.U,se(this,"Will abort after "+this.sb+"ms if incomplete, xhr2 "+this.Hc)),this.Hc?(this.b.timeout=this.sb,this.b.ontimeout=_q(this.Zb,this)):this.Ec=ke(this.Zb,this.sb,this)),E(this.U,se(this,"Sending request")),this.oc=!0,this.b.send(a),this.oc=!1}catch(f){E(this.U,se(this,"Send error: "+f.message)),this.P(5,f)}};var ue=function(a){return y&&z(9)&&ga(a.timeout)&&void 0!==a.ontimeout},Ga=function(a){return"content-type"==a.toLowerCase()};F.prototype.Zb=function(){"undefined"!=typeof aa&&this.b&&(this.Hb="Timed out after "+this.sb+"ms, aborting",E(this.U,se(this,this.Hb)),this.dispatchEvent("timeout"),this.abort(8))};F.prototype.P=function(a,b){this.va=!1;this.b&&(this.Ka=!0,this.b.abort(),this.Ka=!1);this.Hb=b;ve(this);we(this)};var ve=function(a){a.Rc||(a.Rc=!0,a.dispatchEvent("complete"),a.dispatchEvent("error"))};F.prototype.abort=function(){this.b&&this.va&&(E(this.U,se(this,"Aborting")),this.va=!1,this.Ka=!0,this.b.abort(),this.Ka=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),we(this))};F.prototype.cb=function(){this.b&&(this.va&&(this.va=!1,this.Ka=!0,this.b.abort(),this.Ka=!1),we(this,!0));F.xd.cb.call(this)};F.prototype.be=function(){this.isDisposed()||(this.Yc||this.oc||this.Ka?xe(this):this.nf())};F.prototype.nf=function(){xe(this)};var xe=function(a){if(a.va&&"undefined"!=typeof aa)if(a.Kc[1]&&4==ye(a)&&2==ze(a))E(a.U,se(a,"Local request error detected and ignored"));else if(a.oc&&4==ye(a))ke(a.be,0,a);else if(a.dispatchEvent("readystatechange"),4==ye(a)){E(a.U,se(a,"Request complete"));a.va=!1;try{var b=ze(a),c;a:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:c=!0;break a;default:c=!1;}var d;if(!(d=c)){var e;if(e=0===b){var f=(a.qc+"").match(me)[1]||null;if(!f&&l.self&&l.self.location)var g=l.self.location.protocol,f=g.substr(0,g.length-1);e=!qe.test(f?f.toLowerCase():"")}d=e}if(d)a.dispatchEvent("complete"),a.dispatchEvent("success");else{var k;try{k=2<ye(a)?a.b.statusText:""}catch(n){E(a.U,"Can not get status: "+n.message),k=""}a.Hb=k+" ["+ze(a)+"]";ve(a)}}finally{we(a)}}};F.prototype.ae=function(a,b){v("progress"===a.type,"goog.net.EventType.PROGRESS is of the same type as raw XHR progress.");this.dispatchEvent(Ae(a,"progress"));this.dispatchEvent(Ae(a,b?"downloadprogress":"uploadprogress"))};var Ae=function(a,b){return{type:b,lengthComputable:a.lengthComputable,loaded:a.loaded,total:a.total}},we=function(a,b){if(a.b){te(a);var c=a.b,d=a.Kc[0]?ba:null;a.b=null;a.Kc=null;b||a.dispatchEvent("ready");try{c.onreadystatechange=d}catch(e){(a=a.U)&&a.log(ae,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}},te=function(a){a.b&&a.Hc&&(a.b.ontimeout=null);ga(a.Ec)&&(l.clearTimeout(a.Ec),a.Ec=null)},ye=function(a){return a.b?a.b.readyState:0},ze=function(a){try{return 2<ye(a)?a.b.status:-1}catch(b){return-1}},Be=function(a){try{return a.b?a.b.responseText:""}catch(b){return E(a.U,"Can not get responseText: "+b.message),""}},se=function(a,b){return b+" ["+a.Zd+" "+a.qc+" "+ze(a)+"]"},G=function(a,b){this.ea=this.Xa=this.ha="";this.lb=null;this.Ja=this.xa="";this.S=this.df=!1;var c;babelHelpers.instanceof(a,G)?(this.S=void 0!==b?b:a.S,Ce(this,a.ha),c=a.Xa,H(this),this.Xa=c,De(this,a.ea),Ee(this,a.lb),Fe(this,a.xa),Ge(this,a.W.clone()),a=a.Ja,H(this),this.Ja=a):a&&(c=(a+"").match(me))?(this.S=!!b,Ce(this,c[1]||"",!0),a=c[2]||"",H(this),this.Xa=He(a),De(this,c[3]||"",!0),Ee(this,c[4]),Fe(this,c[5]||"",!0),Ge(this,c[6]||"",!0),a=c[7]||"",H(this),this.Ja=He(a)):(this.S=!!b,this.W=new I(null,0,this.S))};G.prototype.toString=function(){var a=[],b=this.ha;b&&a.push(Ie(b,Je,!0),":");var c=this.ea;if(c||"file"==b)a.push("//"),(b=this.Xa)&&a.push(Ie(b,Je,!0),"@"),a.push(encodeURIComponent(c+"").replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c=this.lb,null!=c&&a.push(":",c+"");if(c=this.xa)this.ea&&"/"!=c.charAt(0)&&a.push("/"),a.push(Ie(c,"/"==c.charAt(0)?Ke:Le,!0));(c=this.W.toString())&&a.push("?",c);(c=this.Ja)&&a.push("#",Ie(c,Me));return a.join("")};G.prototype.resolve=function(a){var b=this.clone(),c=!!a.ha;c?Ce(b,a.ha):c=!!a.Xa;if(c){var d=a.Xa;H(b);b.Xa=d}else c=!!a.ea;c?De(b,a.ea):c=null!=a.lb;d=a.xa;if(c)Ee(b,a.lb);else if(c=!!a.xa){if("/"!=d.charAt(0))if(this.ea&&!this.xa)d="/"+d;else{var e=b.xa.lastIndexOf("/");-1!=e&&(d=b.xa.substr(0,e+1)+d)}e=d;if(".."==e||"."==e)d="";else if(u(e,"./")||u(e,"/.")){for(var d=0==e.lastIndexOf("/",0),e=e.split("/"),f=[],g=0,k;g<e.length;){k=e[g++];"."==k?d&&g==e.length&&f.push(""):".."==k?((1<f.length||1==f.length&&""!=f[0])&&f.pop(),d&&g==e.length&&f.push("")):(f.push(k),d=!0)}d=f.join("/")}else d=e}c?Fe(b,d):c=""!==a.W.toString();c?Ge(b,a.W.clone()):c=!!a.Ja;c&&(a=a.Ja,H(b),b.Ja=a);return b};G.prototype.clone=function(){return new G(this)};var Ce=function(a,b,c){H(a);a.ha=c?He(b,!0):b;a.ha&&(a.ha=a.ha.replace(/:$/,""))},De=function(a,b,c){H(a);a.ea=c?He(b,!0):b},Ee=function(a,b){H(a);if(b){b=+b;if(isNaN(b)||0>b)throw Error("Bad port number "+b);a.lb=b}else a.lb=null},Fe=function(a,b,c){H(a);a.xa=c?He(b,!0):b},Ge=function(a,b,c){H(a);babelHelpers.instanceof(b,I)?(a.W=b,a.W.td(a.S)):(c||(b=Ie(b,Ne)),a.W=new I(b,0,a.S))},J=function(a,b,c){H(a);a.W.set(b,c)},Oe=function(a,b){return a.W.get(b)};G.prototype.removeParameter=function(a){H(this);this.W.remove(a);return this};var H=function(a){if(a.df)throw Error("Tried to modify a read-only Uri")};G.prototype.td=function(a){this.S=a;this.W&&this.W.td(a);return this};var Pe=function(a){return babelHelpers.instanceof(a,G)?a.clone():new G(a,void 0)},Qe=function(a,b){var c=new G(null,void 0);Ce(c,"https");a&&De(c,a);b&&Fe(c,b);return c},He=function(a,b){return a?b?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""},Ie=function(a,b,c){return m(a)?(a=encodeURI(a).replace(b,Re),c&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null},Re=function(a){a=a.charCodeAt(0);return"%"+(15&a>>4).toString(16)+(15&a).toString(16)},Je=/[#\/\?@]/g,Le=/[\#\?:]/g,Ke=/[\#\?]/g,Ne=/[\#\?@]/g,Me=/#/g,I=function(a,b,c){this.o=this.l=null;this.O=a||null;this.S=!!c},Se=function(a){a.l||(a.l=new Rd,a.o=0,a.O&&ne(a.O,function(b,c){a.add(decodeURIComponent(b.replace(/\+/g," ")),c)}))},Ue=function(a){var b=Vd(a);if("undefined"==typeof b)throw Error("Keys are undefined");var c=new I(null,0,void 0);a=Ud(a);for(var d=0;d<b.length;d++){var e=b[d],f=a[d];ea(f)?Te(c,e,f):c.add(e,f)}return c};h=I.prototype;h.add=function(a,b){Se(this);this.O=null;a=this.R(a);var c=this.l.get(a);c||this.l.set(a,c=[]);c.push(b);this.o=za(this.o)+1;return this};h.remove=function(a){Se(this);a=this.R(a);return this.l.yb(a)?(this.O=null,this.o=za(this.o)-this.l.get(a).length,this.l.remove(a)):!1};h.yb=function(a){Se(this);a=this.R(a);return this.l.yb(a)};h.oa=function(){Se(this);for(var a=this.l.Z(),b=this.l.oa(),c=[],d=0;d<b.length;d++){for(var e=a[d],f=0;f<e.length;f++){c.push(b[d])}}return c};h.Z=function(a){Se(this);var b=[];if(m(a))this.yb(a)&&(b=Ma(b,this.l.get(this.R(a))));else{a=this.l.Z();for(var c=0;c<a.length;c++){b=Ma(b,a[c])}}return b};h.set=function(a,b){Se(this);this.O=null;a=this.R(a);this.yb(a)&&(this.o=za(this.o)-this.l.get(a).length);this.l.set(a,[b]);this.o=za(this.o)+1;return this};h.get=function(a,b){a=a?this.Z(a):[];return 0<a.length?a[0]+"":b};var Te=function(a,b,c){a.remove(b);0<c.length&&(a.O=null,a.l.set(a.R(b),Na(c)),a.o=za(a.o)+c.length)};I.prototype.toString=function(){if(this.O)return this.O;if(!this.l)return"";for(var a=[],b=this.l.oa(),c=0;c<b.length;c++){for(var d=b[c],e=encodeURIComponent(d+""),d=this.Z(d),f=0,g;f<d.length;f++){g=e;""!==d[f]&&(g+="="+encodeURIComponent(d[f]+""));a.push(g)}}return this.O=a.join("&")};I.prototype.clone=function(){var a=new I;a.O=this.O;this.l&&(a.l=this.l.clone(),a.o=this.o);return a};I.prototype.R=function(a){a=a+"";this.S&&(a=a.toLowerCase());return a};I.prototype.td=function(a){a&&!this.S&&(Se(this),this.O=null,this.l.forEach(function(a,c){var b=c.toLowerCase();c!=b&&(this.remove(c),Te(this,b,a))},this));this.S=a};var Ve=function(){var a=K();return y&&!!ob&&11==ob||/Edge\/\d+/.test(a)},We=function(){return l.window&&l.window.location.href||""},Xe=function(a,b){b=b||l.window;var c="about:blank";a&&(c=rc(uc(a)));b.location.href=c},Ye=function(a,b){var c=[],d;for(d in a){d in b?babelHelpers.typeof(a[d])!=babelHelpers.typeof(b[d])?c.push(d):ea(a[d])?Wa(a[d],b[d])||c.push(d):"object"==babelHelpers.typeof(a[d])&&null!=a[d]&&null!=b[d]?0<Ye(a[d],b[d]).length&&c.push(d):a[d]!==b[d]&&c.push(d):c.push(d)}for(d in b){d in a||c.push(d)}return c},$e=function(){var a=K();a="Chrome"!=Ze(a)?null:(a=a.match(/\sChrome\/(\d+)/i))&&2==a.length?parseInt(a[1],10):null;return a&&30>a?!1:!y||!ob||9<ob},af=function(a){a=(a||K()).toLowerCase();return a.match(/android/)||a.match(/webos/)||a.match(/iphone|ipad|ipod/)||a.match(/blackberry/)||a.match(/windows phone/)||a.match(/iemobile/)?!0:!1},bf=function(a){a=a||l.window;try{a.close()}catch(b){}},cf=function(a,b,c){var d=_Mathfloor(1E9*Math.random()).toString();b=b||500;c=c||600;var e=(window.screen.availHeight-c)/2,f=(window.screen.availWidth-b)/2;b={width:b,height:c,top:0<e?e:0,left:0<f?f:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1};c=K().toLowerCase();d&&(b.target=d,u(c,"crios/")&&(b.target="_blank"));"Firefox"==Ze(K())&&(a=a||"http://localhost",b.scrollbars=!0);c=a||"about:blank";(d=b)||(d={});a=window;b=babelHelpers.instanceof(c,qc)?c:uc("undefined"!=typeof c.href?c.href:c+"");c=d.target||c.target;e=[];for(var g in d){switch(g){case"width":case"height":case"top":case"left":e.push(g+"="+d[g]);break;case"target":case"noreferrer":break;default:e.push(g+"="+(d[g]?1:0));}}g=e.join(",");(x("iPhone")&&!x("iPod")&&!x("iPad")||x("iPad")||x("iPod"))&&a.navigator&&a.navigator.standalone&&c&&"_self"!=c?(g=a.document.createElement("A"),"undefined"!=typeof HTMLAnchorElement&&"undefined"!=typeof Location&&"undefined"!=typeof Element&&(e=g&&(babelHelpers.instanceof(g,HTMLAnchorElement)||!(babelHelpers.instanceof(g,Location)||babelHelpers.instanceof(g,Element))),f=ha(g)?g.constructor.displayName||g.constructor.name||Object.prototype.toString.call(g):void 0===g?"undefined":null===g?"null":babelHelpers.typeof(g),v(e,"Argument is not a HTMLAnchorElement (or a non-Element mock); got: %s",f)),b=babelHelpers.instanceof(b,qc)?b:uc(b),g.href=rc(b),g.setAttribute("target",c),d.noreferrer&&g.setAttribute("rel","noreferrer"),d=document.createEvent("MouseEvent"),d.initMouseEvent("click",!0,!0,a,1),g.dispatchEvent(d),g={}):d.noreferrer?(g=a.open("",c,g),d=rc(b),g&&((eb||y)&&u(d,";")&&(d="'"+d.replace(/'/g,"%27")+"'"),g.opener=null,a=mc("b/12014412, meta tag with sanitized URL"),ua.test(d)&&(-1!=d.indexOf("&")&&(d=d.replace(oa,"&amp;")),-1!=d.indexOf("<")&&(d=d.replace(pa,"&lt;")),-1!=d.indexOf(">")&&(d=d.replace(qa,"&gt;")),-1!=d.indexOf("\"")&&(d=d.replace(ra,"&quot;")),-1!=d.indexOf("'")&&(d=d.replace(sa,"&#39;")),-1!=d.indexOf("\0")&&(d=d.replace(ta,"&#0;"))),d="<META HTTP-EQUIV=\"refresh\" content=\"0; url="+d+"\">",Aa(lc(a),"must provide justification"),v(!/^[\s\xa0]*$/.test(lc(a)),"must provide non-empty justification"),g.document.write(Yc(new Xc().$e(d))),g.document.close())):g=a.open(rc(b),c,g);if(g)try{g.focus()}catch(k){}return g},df=function(a){return new A(function(b){var c=function(){le(2E3).then(function(){if(!a||a.closed)b();else return c()})};return c()})},ef=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ff=function(){var a=null;return new A(function(b){"complete"==l.document.readyState?b():(a=function(){b()},bc(window,"load",a))}).f(function(b){dc(window,"load",a);throw b})},hf=function(){return gf(void 0)?ff().then(function(){return new A(function(a,b){var c=l.document,d=setTimeout(function(){b(Error("Cordova framework is not ready."))},1E3);c.addEventListener("deviceready",function(){clearTimeout(d);a()},!1)})}):D(Error("Cordova must run in an Android or iOS file scheme."))},gf=function(a){a=a||K();return!("file:"!==jf()||!a.toLowerCase().match(/iphone|ipad|ipod|android/))},kf=function(){var a=l.window;try{return!(!a||a==a.top)}catch(b){return!1}},L=function(){return firebase.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":firebase.INTERNAL.hasOwnProperty("node")?"Node":"Browser"},lf=function(){var a=L();return"ReactNative"===a||"Node"===a},Ze=function(a){var b=a.toLowerCase();if(u(b,"opera/")||u(b,"opr/")||u(b,"opios/"))return"Opera";if(u(b,"iemobile"))return"IEMobile";if(u(b,"msie")||u(b,"trident/"))return"IE";if(u(b,"edge/"))return"Edge";if(u(b,"firefox/"))return"Firefox";if(u(b,"silk/"))return"Silk";if(u(b,"blackberry"))return"Blackberry";if(u(b,"webos"))return"Webos";if(!u(b,"safari/")||u(b,"chrome/")||u(b,"crios/")||u(b,"android")){if(!u(b,"chrome/")&&!u(b,"crios/")||u(b,"edge/")){if(u(b,"android"))return"Android";if((a=a.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==a.length)return a[1]}else return"Chrome";}else return"Safari";return"Other"},mf=function(a){var b=L();return("Browser"===b?Ze(K()):b)+"/JsCore/"+a},K=function(){return l.navigator&&l.navigator.userAgent||""},M=function(a,b){a=a.split(".");b=b||l;for(var c=0;c<a.length&&"object"==babelHelpers.typeof(b)&&null!=b;c++){b=b[a[c]]}c!=a.length&&(b=void 0);return b},pf=function(){var a;if(a=(nf()||"chrome-extension:"===jf()||gf())&&!lf())a:{try{var b=l.localStorage,c=of();if(b){b.setItem(c,"1");b.removeItem(c);a=Ve()?!!l.indexedDB:!0;break a}}catch(d){}a=!1}return a},nf=function(){return"http:"===jf()||"https:"===jf()},jf=function(){return l.location&&l.location.protocol||null},qf=function(a){a=a||K();return af(a)||"Firefox"==Ze(a)?!1:!0},rf=function(a){return"undefined"===typeof a?null:xc(a)},sf=function(a){var b={},c;for(c in a){a.hasOwnProperty(c)&&null!==a[c]&&void 0!==a[c]&&(b[c]=a[c])}return b},tf=function(a){if(null!==a)return JSON.parse(a)},of=function(a){return a?a:""+_Mathfloor(1E9*Math.random()).toString()},uf=function(a){a=a||K();return"Safari"==Ze(a)||a.toLowerCase().match(/iphone|ipad|ipod/)?!1:!0},vf=function(){var a=l.___jsl;if(a&&a.H)for(var b in a.H){if(a.H[b].r=a.H[b].r||[],a.H[b].L=a.H[b].L||[],a.H[b].r=a.H[b].L.concat(),a.CP)for(var c=0;c<a.CP.length;c++){a.CP[c]=null}}},wf=function(){return l.navigator&&"boolean"===typeof l.navigator.onLine?l.navigator.onLine:!0},xf=function(a,b,c,d){if(a>b)throw Error("Short delay should be less than long delay!");this.Ff=a;this.gf=b;a=c||K();d=d||L();this.cf=af(a)||"ReactNative"===d};xf.prototype.get=function(){return this.cf?this.gf:this.Ff};var yf=function(){var a=l.document;return a&&"undefined"!==typeof a.visibilityState?"visible"==a.visibilityState:!0},zf=function(){var a=l.document,_b=null;return yf()||!a?B():new A(function(c){_b=function b(){yf()&&(a.removeEventListener("visibilitychange",_b,!1),c())};a.addEventListener("visibilitychange",_b,!1)}).f(function(c){a.removeEventListener("visibilitychange",_b,!1);throw c})},Af={},Bf=function(a){Af[a]||(Af[a]=!0,"undefined"!==typeof console&&"function"===typeof console.warn&&console.warn(a))},Cf;try{var Df={};Object.defineProperty(Df,"abcd",{configurable:!0,enumerable:!0,value:1});Object.defineProperty(Df,"abcd",{configurable:!0,enumerable:!0,value:2});Cf=2==Df.abcd}catch(a){Cf=!1}var N=function(a,b,c){Cf?Object.defineProperty(a,b,{configurable:!0,enumerable:!0,value:c}):a[b]=c},Ef=function(a,b){Cf?Object.defineProperty(a,"provider",{configurable:!0,enumerable:!0,get:function get(){Bf("firebase.auth.AuthCredential.provider is deprecated. Please use the providerId field instead.");return b}}):a.provider=b},Ff=function(a,b){if(b)for(var c in b){b.hasOwnProperty(c)&&N(a,c,b[c])}},Gf=function(a){var b={};Ff(b,a);return b},Hf=function(a){var b={},c;for(c in a){a.hasOwnProperty(c)&&(b[c]=a[c])}return b},If=function(a,b){if(!b||!b.length)return!0;if(!a)return!1;for(var c=0,d;c<b.length;c++){d=a[b[c]];if(void 0===d||null===d||""===d)return!1}return!0},Jf=function(a){var b=a;if("object"==babelHelpers.typeof(a)&&null!=a){var b="length"in a?[]:{},c;for(c in a){N(b,c,Jf(a[c]))}}return b},Kf="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Lf=["client_id","response_type","scope","redirect_uri","state"],Mf={Pf:{Mb:500,Lb:600,providerId:"facebook.com",qd:Lf},Qf:{Mb:500,Lb:620,providerId:"github.com",qd:Lf},Rf:{Mb:515,Lb:680,providerId:"google.com",qd:Lf},Sf:{Mb:485,Lb:705,providerId:"twitter.com",qd:Kf}},Nf=function(a){for(var b in Mf){if(Mf[b].providerId==a)return Mf[b]}return null},O=function(a,b){this.code="auth/"+a;this.message=b||Of[a]||""};r(O,Error);O.prototype.C=function(){return{code:this.code,message:this.message}};O.prototype.toJSON=function(){return this.C()};var Pf=function(a){var b=a&&a.code;return b?new O(b.substring(5),a.message):null},Of={"argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"","code-expired":"","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"The user's credential is no longer valid. The user must sign in again.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-identifier-number":"","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"","missing-iframe-start":"An internal error has occurred.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"","missing-verification-code":"","missing-identifier-number":"","missing-verification-id":"","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":"This operation is not supported in the environment this application is running on. \"location.protocol\" must be http, https or chrome-extension and web storage must be enabled.","popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","user-cancelled":"User did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},P=function(a,b,c,d,e){this.da=a;this.J=b||null;this.tb=c||null;this.sd=d||null;this.P=e||null;if(this.tb||this.P){if(this.tb&&this.P)throw new O("invalid-auth-event");if(this.tb&&!this.sd)throw new O("invalid-auth-event")}else throw new O("invalid-auth-event")};P.prototype.ic=function(){return this.sd};P.prototype.getError=function(){return this.P};P.prototype.C=function(){return{type:this.da,eventId:this.J,urlResponse:this.tb,sessionId:this.sd,error:this.P&&this.P.C()}};var Qf=function(a){a=a||{};return a.type?new P(a.type,a.eventId,a.urlResponse,a.sessionId,a.error&&Pf(a.error)):null},Rf=function(a){var b="unauthorized-domain",c,d=Pe(a);a=d.ea;d=d.ha;"chrome-extension"==d?c=ma("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",a):"http"==d||"https"==d?c=ma("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",a):b="operation-not-supported-in-this-environment";O.call(this,b,c)};r(Rf,O);var Sf=function(a){this.ff=a.sub;la();this.gc=a.email||null},Tf=function(a,b){return a.then(function(a){if(a.idToken){var c;a:{var e=a.idToken.split(".");if(3==e.length){for(var e=e[1],f=(4-e.length%4)%4,g=0;g<f;g++){e+="."}try{var k=JSON.parse(tb(e));if(k.sub&&k.iss&&k.aud&&k.exp){c=new Sf(k);break a}}catch(n){}}c=null}if(!c||b!=c.ff)throw new O("user-mismatch");return a}throw new O("user-mismatch")}).f(function(a){throw a&&a.code&&"auth/user-not-found"==a.code?new O("user-mismatch"):a})},Uf=function(a,b){if(b.idToken||b.accessToken)b.idToken&&N(this,"idToken",b.idToken),b.accessToken&&N(this,"accessToken",b.accessToken);else if(b.oauthToken&&b.oauthTokenSecret)N(this,"accessToken",b.oauthToken),N(this,"secret",b.oauthTokenSecret);else throw new O("internal-error","failed to construct a credential");Ef(this,a);N(this,"providerId",a)};Uf.prototype.Ab=function(a){return Vf(a,Wf(this))};Uf.prototype.cd=function(a,b){var c=Wf(this);c.idToken=b;return Xf(a,c)};Uf.prototype.ed=function(a,b){var c=Wf(this);return Tf(Yf(a,c),b)};var Wf=function(a){var b={};a.idToken&&(b.id_token=a.idToken);a.accessToken&&(b.access_token=a.accessToken);a.secret&&(b.oauth_token_secret=a.secret);b.providerId=a.providerId;return{postBody:Ue(b).toString(),requestUri:"http://localhost"}};Uf.prototype.C=function(){var a={providerId:this.providerId};this.idToken&&(a.oauthIdToken=this.idToken);this.accessToken&&(a.oauthAccessToken=this.accessToken);this.secret&&(a.oauthTokenSecret=this.secret);return a};var Zf=function(a,b){this.vf=b||[];Ff(this,{providerId:a,isOAuthProvider:!0});this.Id={}};Zf.prototype.setCustomParameters=function(a){this.Id=Xa(a);return this};var Q=function(a){Zf.call(this,a,Lf);this.rd=[]};r(Q,Zf);Q.prototype.addScope=function(a){Ia(this.rd,a)||this.rd.push(a);return this};Q.prototype.Rd=function(){return Na(this.rd)};Q.prototype.credential=function(a,b){if(!a&&!b)throw new O("argument-error","credential failed: must provide the ID token and/or the access token.");return new Uf(this.providerId,{idToken:a||null,accessToken:b||null})};var $f=function(){Q.call(this,"facebook.com")};r($f,Q);N($f,"PROVIDER_ID","facebook.com");var ag=function(a){if(!a)throw new O("argument-error","credential failed: expected 1 argument (the OAuth access token).");var b=a;ha(a)&&(b=a.accessToken);return new $f().credential(null,b)},bg=function(){Q.call(this,"github.com")};r(bg,Q);N(bg,"PROVIDER_ID","github.com");var cg=function(a){if(!a)throw new O("argument-error","credential failed: expected 1 argument (the OAuth access token).");var b=a;ha(a)&&(b=a.accessToken);return new bg().credential(null,b)},dg=function(){Q.call(this,"google.com");this.addScope("profile")};r(dg,Q);N(dg,"PROVIDER_ID","google.com");var eg=function(a,b){var c=a;ha(a)&&(c=a.idToken,b=a.accessToken);return new dg().credential(c,b)},fg=function(){Zf.call(this,"twitter.com",Kf)};r(fg,Zf);N(fg,"PROVIDER_ID","twitter.com");var gg=function(a,b){var c=a;ha(c)||(c={oauthToken:a,oauthTokenSecret:b});if(!c.oauthToken||!c.oauthTokenSecret)throw new O("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new Uf("twitter.com",c)},hg=function(a,b){this.gc=a;this.jd=b;Ef(this,"password");N(this,"providerId","password")};hg.prototype.Ab=function(a){return R(a,ig,{email:this.gc,password:this.jd})};hg.prototype.cd=function(a,b){return R(a,jg,{idToken:b,email:this.gc,password:this.jd})};hg.prototype.ed=function(a,b){return Tf(this.Ab(a),b)};hg.prototype.C=function(){return{email:this.gc,password:this.jd}};var kg=function(){Ff(this,{providerId:"password",isOAuthProvider:!1})};Ff(kg,{PROVIDER_ID:"password"});var lg=function(a){if(!(a.Bd&&a.Ad||a.Yb&&a.ya))throw new O("internal-error");this.I=a;N(this,"providerId","identifier")};lg.prototype.Ab=function(a){return a.se(mg(this))};lg.prototype.cd=function(a,b){var c=mg(this);c.idToken=b;return R(a,ng,c)};lg.prototype.ed=function(a,b){var c=mg(this);c.operation="REAUTH";a=R(a,og,c);return Tf(a,b)};lg.prototype.C=function(){var a={providerId:"identifier"};this.I.Bd&&(a.verificationId=this.I.Bd);this.I.Ad&&(a.verificationCode=this.I.Ad);this.I.Yb&&(a.temporaryProof=this.I.Yb);this.I.ya&&(a.identifierNumber=this.I.ya);return a};var mg=function(a){return a.I.Yb&&a.I.ya?{temporaryProof:a.I.Yb,identifierNumber:a.I.ya}:{sessionInfo:a.I.Bd,code:a.I.Ad}},pg=function(a){try{this.Ce=a||firebase.auth()}catch(b){throw new O("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.identifierAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Ff(this,{providerId:"identifier",isOAuthProvider:!1})};pg.prototype.se=function(a,b){var c=this.Ce.g;return B(b.verify()).then(function(d){if(!m(d))throw new O("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(b.type){case"recaptcha":return R(c,qg,{identifierNumber:a,recaptchaToken:d});default:throw new O("argument-error","Only firebase.auth.ApplicationVerifiers with type=\"recaptcha\" are currently supported.");}})};Ff(pg,{PROVIDER_ID:"identifier"});var rg=function(a){if(a.temporaryProof&&a.identifierNumber)return new lg({Yb:a.temporaryProof,ya:a.identifierNumber});var b=a&&a.providerId;if(!b||"password"===b)return null;var c=a&&a.oauthAccessToken,d=a&&a.oauthTokenSecret;a=a&&a.oauthIdToken;try{switch(b){case"google.com":return eg(a,c);case"facebook.com":return ag(c);case"github.com":return cg(c);case"twitter.com":return gg(c,d);default:return new Q(b).credential(a,c);}}catch(e){return null}},sg=function(a){if(!a.isOAuthProvider)throw new O("invalid-oauth-provider")},tg=function(a,b,c){O.call(this,a,c);a=b||{};a.email&&N(this,"email",a.email);a.ya&&N(this,"identifierNumber",a.ya);a.credential&&N(this,"credential",a.credential)};r(tg,O);tg.prototype.C=function(){var a={code:this.code,message:this.message};this.email&&(a.email=this.email);this.identifierNumber&&(a.identifierNumber=this.identifierNumber);var b=this.credential&&this.credential.C();b&&Za(a,b);return a};tg.prototype.toJSON=function(){return this.C()};var ug=function(a){if(a.code){var b=a.code||"";0==b.indexOf("auth/")&&(b=b.substring(5));var c={credential:rg(a)};if(a.email)c.email=a.email;else if(a.identifierNumber)c.ya=a.identifierNumber;else return new O(b,a.message||void 0);return new tg(b,c,a.message)}return null},vg=function(a){this.Of=a};r(vg,Bc);vg.prototype.fc=function(){return new this.Of};vg.prototype.$c=function(){return{}};var S=function(a,b,c){var d="Node"==L();d=l.XMLHttpRequest||d&&firebase.INTERNAL.node&&firebase.INTERNAL.node.XMLHttpRequest;if(!d)throw new O("internal-error","The XMLHttpRequest compatibility library was not found.");this.j=a;a=b||{};this.Bf=a.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token";this.Cf=a.secureTokenTimeout||wg;this.ge=Xa(a.secureTokenHeaders||xg);this.Le=a.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/";this.Me=a.firebaseTimeout||yg;this.Pd=Xa(a.firebaseHeaders||zg);c&&(this.Pd["X-Client-Version"]=c,this.ge["X-Client-Version"]=c);this.Ee=new Gc;this.Nf=new vg(d)},Ag,wg=new xf(3E4,6E4),xg={"Content-Type":"application/x-www-form-urlencoded"},yg=new xf(3E4,6E4),zg={"Content-Type":"application/json"},Cg=function(a,b,c,d,e,f,g){wf()?($e()?a=_q(a.Ef,a):(Ag||(Ag=new A(function(a,b){Bg(a,b)})),a=_q(a.Df,a)),a(b,c,d,e,f,g)):c&&c(null)};S.prototype.Ef=function(a,b,c,d,e,f){var g="Node"==L(),k=lf()?g?new F(this.Nf):new F:new F(this.Ee),n;f&&(k.sb=_Mathmax(0,f),n=setTimeout(function(){k.dispatchEvent("timeout")},f));k.listen("complete",function(){n&&clearTimeout(n);var a=null;try{a=JSON.parse(Be(this))||null}catch(db){a=null}b&&b(a)});cc(k,"ready",function(){n&&clearTimeout(n);this.Ga||(this.Ga=!0,this.cb())});cc(k,"timeout",function(){n&&clearTimeout(n);this.Ga||(this.Ga=!0,this.cb());b&&b(null)});k.send(a,c,d,e)};var Ed="__fcb"+_Mathfloor(1E6*Math.random()).toString(),Bg=function(a,b){((window.gapi||{}).client||{}).request?a():(l[Ed]=function(){((window.gapi||{}).client||{}).request?a():b(Error("CORS_UNSUPPORTED"))},Gd(function(){b(Error("CORS_UNSUPPORTED"))}))};S.prototype.Df=function(a,b,c,d,e){var f=this;Ag.then(function(){window.gapi.client.setApiKey(f.j);var g=window.gapi.auth.getToken();window.gapi.auth.setToken(null);window.gapi.client.request({path:a,method:c,body:d,headers:e,authType:"none",callback:function callback(a){window.gapi.auth.setToken(g);b&&b(a)}})}).f(function(a){b&&b({error:{message:a&&a.message||"CORS_UNSUPPORTED"}})})};var Eg=function(a,b){return new A(function(c,d){"refresh_token"==b.grant_type&&b.refresh_token||"authorization_code"==b.grant_type&&b.code?Cg(a,a.Bf+"?key="+encodeURIComponent(a.j),function(a){a?a.error?d(Dg(a)):a.access_token&&a.refresh_token?c(a):d(new O("internal-error")):d(new O("network-request-failed"))},"POST",Ue(b).toString(),a.ge,a.Cf.get()):d(new O("internal-error"))})},Fg=function(a,b,c,d,e,f){var g=Pe(a.Le+b);J(g,"key",a.j);f&&J(g,"cb",la().toString());var k="GET"==c;if(k)for(var n in d){d.hasOwnProperty(n)&&J(g,n,d[n])}return new A(function(b,f){Cg(a,g.toString(),function(a){a?a.error?f(Dg(a,e||{})):b(a):f(new O("network-request-failed"))},c,k?void 0:xc(sf(d)),a.Pd,a.Me.get())})},Gg=function(a){if(!ic.test(a.email))throw new O("invalid-email")},Hg=function(a){"email"in a&&Gg(a)},Jg=function(a,b){return R(a,Ig,{identifier:b,continueUri:nf()?We():"http://localhost"}).then(function(a){return a.allProviders||[]})},Lg=function(a){return R(a,Kg,{}).then(function(a){return a.authorizedDomains||[]})},Mg=function(a){if(!a.idToken)throw new O("internal-error")},Ng=function(a){if(a.identifierNumber||a.temporaryProof){if(!a.identifierNumber||!a.temporaryProof)throw new O("internal-error")}else{if(!a.sessionInfo)throw new O("missing-verification-id");if(!a.code)throw new O("missing-verification-code")}};S.prototype.signInAnonymously=function(){return R(this,Og,{})};S.prototype.updateEmail=function(a,b){return R(this,Pg,{idToken:a,email:b})};S.prototype.updatePassword=function(a,b){return R(this,jg,{idToken:a,password:b})};var Qg={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};S.prototype.updateProfile=function(a,b){var c={idToken:a},d=[];Sa(Qg,function(a,f){var e=b[f];null===e?d.push(a):f in b&&(c[f]=e)});d.length&&(c.deleteAttribute=d);return R(this,Pg,c)};S.prototype.sendPasswordResetEmail=function(a){return R(this,Rg,{requestType:"PASSWORD_RESET",email:a})};S.prototype.sendEmailVerification=function(a){return R(this,Sg,{requestType:"VERIFY_EMAIL",idToken:a})};S.prototype.se=function(a){return R(this,Tg,a)};var Vg=function(a,b,c){return R(a,Ug,{idToken:b,deleteProvider:c})},Wg=function(a){if(!a.requestUri||!a.sessionId&&!a.postBody)throw new O("internal-error")},Xg=function(a){var b=null;a.needConfirmation?(a.code="account-exists-with-different-credential",b=ug(a)):"FEDERATED_USER_ID_ALREADY_LINKED"==a.errorMessage?(a.code="credential-already-in-use",b=ug(a)):"EMAIL_EXISTS"==a.errorMessage&&(a.code="email-already-in-use",b=ug(a));if(b)throw b;if(!a.idToken)throw new O("internal-error")},Vf=function(a,b){b.returnIdpCredential=!0;return R(a,Yg,b)},Xf=function(a,b){b.returnIdpCredential=!0;return R(a,Zg,b)},Yf=function(a,b){b.returnIdpCredential=!0;b.autoCreate=!1;return R(a,$g,b)},ah=function(a){if(!a.oobCode)throw new O("invalid-action-code")};S.prototype.confirmPasswordReset=function(a,b){return R(this,bh,{oobCode:a,newPassword:b})};S.prototype.checkActionCode=function(a){return R(this,ch,{oobCode:a})};S.prototype.applyActionCode=function(a){return R(this,dh,{oobCode:a})};var dh={endpoint:"setAccountInfo",A:ah,Wa:"email"},ch={endpoint:"resetPassword",A:ah,Y:function(a){if(!a.email||!a.requestType)throw new O("internal-error")}},eh={endpoint:"signupNewUser",A:function(a){Gg(a);if(!a.password)throw new O("weak-password")},Y:Mg,sa:!0},Ig={endpoint:"createAuthUri"},fh={endpoint:"deleteAccount",Ua:["idToken"]},Ug={endpoint:"setAccountInfo",Ua:["idToken","deleteProvider"],A:function(a){if(!ea(a.deleteProvider))throw new O("internal-error")}},gh={endpoint:"getAccountInfo"},Sg={endpoint:"getOobConfirmationCode",Ua:["idToken","requestType"],A:function(a){if("VERIFY_EMAIL"!=a.requestType)throw new O("internal-error")},Wa:"email"},Rg={endpoint:"getOobConfirmationCode",Ua:["requestType"],A:function(a){if("PASSWORD_RESET"!=a.requestType)throw new O("internal-error");Gg(a)},Wa:"email"},Kg={De:!0,endpoint:"getProjectConfig",We:"GET"},bh={endpoint:"resetPassword",A:ah,Wa:"email"},qg={endpoint:"sendVerificationCode",Ua:["identifierNumber","recaptchaToken"],Wa:"sessionInfo"},Pg={endpoint:"setAccountInfo",Ua:["idToken"],A:Hg,sa:!0},jg={endpoint:"setAccountInfo",Ua:["idToken"],A:function(a){Hg(a);if(!a.password)throw new O("weak-password")},Y:Mg,sa:!0},Og={endpoint:"signupNewUser",Y:Mg,sa:!0},Yg={endpoint:"verifyAssertion",A:Wg,Y:Xg,sa:!0},$g={endpoint:"verifyAssertion",A:Wg,Y:function(a){if(a.errorMessage&&"USER_NOT_FOUND"==a.errorMessage)throw new O("user-not-found");if(!a.idToken)throw new O("internal-error")},sa:!0},Zg={endpoint:"verifyAssertion",A:function(a){Wg(a);if(!a.idToken)throw new O("internal-error")},Y:Xg,sa:!0},hh={endpoint:"verifyCustomToken",A:function(a){if(!a.token)throw new O("invalid-custom-token")},Y:Mg,sa:!0},ig={endpoint:"verifyPassword",A:function(a){Gg(a);if(!a.password)throw new O("wrong-password")},Y:Mg,sa:!0},Tg={endpoint:"verifyidentifierNumber",A:Ng,Y:Mg},ng={endpoint:"verifyidentifierNumber",A:function(a){if(!a.idToken)throw new O("internal-error");Ng(a)},Y:function(a){if(a.temporaryProof)throw a.code="credential-already-in-use",ug(a);Mg(a)}},og={Ge:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyidentifierNumber",A:Ng,Y:Mg},R=function(a,b,c){if(!If(c,b.Ua))return D(new O("internal-error"));var d=b.We||"POST",e;return B(c).then(b.A).then(function(){b.sa&&(c.returnSecureToken=!0);return Fg(a,b.endpoint,d,c,b.Ge,b.De||!1)}).then(function(a){return e=a}).then(b.Y).then(function(){if(!b.Wa)return e;if(!(b.Wa in e))throw new O("internal-error");return e[b.Wa]})},Dg=function(a,b){var c=(a.error&&a.error.errors&&a.error.errors[0]||{}).reason||"";var d={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(c=d[c]?new O(d[c]):null)return c;c=a.error&&a.error.message||"";d={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_identifier_NUMBER:"invalid-identifier-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_identifier_NUMBER:"missing-identifier-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired"};Za(d,b||{});b=(b=c.match(/^[^\s]+\s*:\s*(.*)$/))&&1<b.length?b[1]:void 0;for(var e in d){if(0===c.indexOf(e))return new O(d[e],b)}!b&&a&&(b=rf(a));return new O("internal-error",b)},ih=function(a){this.V=a};ih.prototype.value=function(){return this.V};ih.prototype.je=function(a){this.V.style=a;return this};var jh=function(a){this.V=a||{}};jh.prototype.value=function(){return this.V};jh.prototype.je=function(a){this.V.style=a;return this};var lh=function(a){this.Lf=a;this.nc=null;this.gd=kh(this)},mh=function(a){var b=new jh;b.V.where=document.body;b.V.url=a.Lf;b.V.messageHandlersFilter=M("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER");b.V.attributes=b.V.attributes||{};new ih(b.V.attributes).je({position:"absolute",top:"-100px",width:"1px",height:"1px"});b.V.dontclear=!0;return b},kh=function(a){return nh().then(function(){return new A(function(b,c){M("gapi.iframes.getContext")().open(mh(a).value(),function(d){a.nc=d;a.nc.restyle({setHideOnLeave:!1});var e=setTimeout(function(){c(Error("Network Error"))},oh.get()),f=function(){clearTimeout(e);b()};d.ping(f).then(f,function(){c(Error("Network Error"))})})})})};lh.prototype.sendMessage=function(a){var b=this;return this.gd.then(function(){return new A(function(c){b.nc.send(a.type,a,c,M("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})})};var ph=function(a,b){a.gd.then(function(){a.nc.register("authEvent",b,M("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})},qh=new xf(3E4,6E4),oh=new xf(5E3,15E3),nh=function(){return new A(function(a,b){if(wf()){var c=function(){vf();M("gapi.load")("gapi.iframes",{callback:a,ontimeout:function ontimeout(){vf();b(Error("Network Error"))},timeout:qh.get()})};if(M("gapi.iframes.Iframe"))a();else if(M("gapi.load"))c();else{var d="__iframefcb"+_Mathfloor(1E6*Math.random()).toString();l[d]=function(){M("gapi.load")?c():b(Error("Network Error"))};B(Dd("https://apis.google.com/js/api.js?onload="+d)).f(function(){b(Error("Network Error"))})}}else b(Error("Network Error"))})},rh=function(a,b,c){this.v=a;this.j=b;this.D=c;this.Ya=null;this.ac=Qe(this.v,"/__/auth/iframe");J(this.ac,"apiKey",this.j);J(this.ac,"appName",this.D)};rh.prototype.setVersion=function(a){this.Ya=a;return this};rh.prototype.toString=function(){this.Ya?J(this.ac,"v",this.Ya):this.ac.removeParameter("v");return this.ac.toString()};var sh=function(a,b,c,d,e){this.v=a;this.j=b;this.D=c;this.Be=d;this.Ya=this.J=this.pd=null;this.Pb=e};sh.prototype.setVersion=function(a){this.Ya=a;return this};sh.prototype.toString=function(){var a=Qe(this.v,"/__/auth/handler");J(a,"apiKey",this.j);J(a,"appName",this.D);J(a,"authType",this.Be);if(this.Pb.isOAuthProvider){J(a,"providerId",this.Pb.providerId);var b=this.Pb,c=sf(b.Id),d;for(d in c){c[d]=c[d].toString()}b=b.vf;c=Xa(c);for(d=0;d<b.length;d++){var e=b[d];e in c&&delete c[e]}Va(c)||J(a,"customParameters",rf(c))}"function"===typeof this.Pb.Rd&&(b=this.Pb.Rd(),b.length&&J(a,"scopes",b.join(",")));this.pd?J(a,"redirectUrl",this.pd):a.removeParameter("redirectUrl");this.J?J(a,"eventId",this.J):a.removeParameter("eventId");this.Ya?J(a,"v",this.Ya):a.removeParameter("v");if(this.bc)for(var f in this.bc){this.bc.hasOwnProperty(f)&&!Oe(a,f)&&J(a,f,this.bc[f])}return a.toString()};var th=function(a,b,c,d){this.v=a;this.j=b;this.D=c;this.Oe=(this.Ea=d||null)?mf(this.Ea):null;d=this.Ea;this.Xe=new rh(a,b,c).setVersion(d).toString();this.ma=[];this.g=new S(b,null,this.Oe);this.pc=this.wa=null},uh=function(a){var b=We();return Lg(a).then(function(a){a:{for(var c=Pe(b),e=c.ha,c=c.ea,f=0;f<a.length;f++){var g,k=a[f];g=c;var n=e;0==k.indexOf("chrome-extension://")?g=Pe(k).ea==g&&"chrome-extension"==n:"http"!=n&&"https"!=n?g=!1:ef.test(k)?g=g==k:(k=k.split(".").join("\\."),g=new RegExp("^(.+\\."+k+"|"+k+")$","i").test(g));if(g){a=!0;break a}}a=!1}if(!a)throw new Rf(We())})};h=th.prototype;h.Gb=function(){if(this.pc)return this.pc;var a=this;return this.pc=ff().then(function(){a.mc=new lh(a.Xe);vh(a)})};h.Vb=function(a,b,c){var d=new O("popup-closed-by-user"),e=new O("web-storage-unsupported"),f=this,g=!1;return this.La().then(function(){wh(f).then(function(c){c||(a&&bf(a),b(e),g=!0)})}).f(function(){}).then(function(){if(!g)return df(a)}).then(function(){if(!g)return le(c).then(function(){b(d)})})};h.ke=function(){var a=K();return!qf(a)&&!uf(a)};h.Ud=function(){return!1};h.Nb=function(a,b,c,d,e,f,g){if(!a)return D(new O("popup-blocked"));if(g&&!qf())return this.La().f(function(b){bf(a);e(b)}),d(),B();this.wa||(this.wa=uh(this.g));var k=this;return this.wa.then(function(){var b=k.La().f(function(b){bf(a);e(b);throw b});d();return b}).then(function(){sg(c);if(!g){var d=xh(k.v,k.j,k.D,b,c,null,f,k.Ea);Xe(d,a)}}).f(function(a){"auth/network-request-failed"==a.code&&(k.wa=null);throw a})};h.Ob=function(a,b,c){this.wa||(this.wa=uh(this.g));var d=this;return this.wa.then(function(){sg(b);var e=xh(d.v,d.j,d.D,a,b,We(),c,d.Ea);Xe(e)})};h.La=function(){var a=this;return this.Gb().then(function(){return a.mc.gd}).f(function(){a.wa=null;throw new O("network-request-failed")})};h.ne=function(){return!0};var xh=function(a,b,c,d,e,f,g,k,n){a=new sh(a,b,c,d,e);a.pd=f;a.J=g;f=a.setVersion(k);f.bc=Xa(n||null);return f.toString()},vh=function(a){if(!a.mc)throw Error("IfcHandler must be initialized!");ph(a.mc,function(b){var c={};if(b&&b.authEvent){var d=!1;b=Qf(b.authEvent);for(c=0;c<a.ma.length;c++){d=a.ma[c](b)||d}c={};c.status=d?"ACK":"ERROR";return B(c)}c.status="ERROR";return B(c)})},wh=function(a){var b={type:"webStorageSupport"};return a.Gb().then(function(){return a.mc.sendMessage(b)}).then(function(a){if(a&&a.length&&"undefined"!==typeof a[0].webStorageSupport)return a[0].webStorageSupport;throw Error()})};th.prototype.$a=function(a){this.ma.push(a)};th.prototype.Tb=function(a){La(this.ma,function(b){return b==a})};var yh=function(a){this.B=a||firebase.INTERNAL.reactNative&&firebase.INTERNAL.reactNative.AsyncStorage;if(!this.B)throw new O("internal-error","The React Native compatibility library was not found.")};h=yh.prototype;h.get=function(a){return B(this.B.getItem(a)).then(function(a){return a&&tf(a)})};h.set=function(a,b){return B(this.B.setItem(a,rf(b)))};h.remove=function(a){return B(this.B.removeItem(a))};h.ab=function(){};h.Ta=function(){};var zh=function(){this.B={}};h=zh.prototype;h.get=function(a){return B(this.B[a])};h.set=function(a,b){this.B[a]=b;return B()};h.remove=function(a){delete this.B[a];return B()};h.ab=function(){};h.Ta=function(){};var Ch=function(){if(!Bh()){if("Node"==L())throw new O("internal-error","The LocalStorage compatibility library was not found.");throw new O("web-storage-unsupported")}this.B=l.localStorage||firebase.INTERNAL.node.localStorage},Bh=function(){var a="Node"==L(),a=l.localStorage||a&&firebase.INTERNAL.node&&firebase.INTERNAL.node.localStorage;if(!a)return!1;try{return a.setItem("__sak","1"),a.removeItem("__sak"),!0}catch(b){return!1}};h=Ch.prototype;h.get=function(a){var b=this;return B().then(function(){var c=b.B.getItem(a);return tf(c)})};h.set=function(a,b){var c=this;return B().then(function(){var d=rf(b);null===d?c.remove(a):c.B.setItem(a,d)})};h.remove=function(a){var b=this;return B().then(function(){b.B.removeItem(a)})};h.ab=function(a){l.window&&Vb(l.window,"storage",a)};h.Ta=function(a){l.window&&dc(l.window,"storage",a)};var Dh=function(){this.B={}};h=Dh.prototype;h.get=function(){return B(null)};h.set=function(){return B()};h.remove=function(){return B()};h.ab=function(){};h.Ta=function(){};var Fh=function(){if(!Eh()){if("Node"==L())throw new O("internal-error","The SessionStorage compatibility library was not found.");throw new O("web-storage-unsupported")}this.B=l.sessionStorage||firebase.INTERNAL.node.sessionStorage},Eh=function(){var a="Node"==L(),a=l.sessionStorage||a&&firebase.INTERNAL.node&&firebase.INTERNAL.node.sessionStorage;if(!a)return!1;try{return a.setItem("__sak","1"),a.removeItem("__sak"),!0}catch(b){return!1}};h=Fh.prototype;h.get=function(a){var b=this;return B().then(function(){var c=b.B.getItem(a);return tf(c)})};h.set=function(a,b){var c=this;return B().then(function(){var d=rf(b);null===d?c.remove(a):c.B.setItem(a,d)})};h.remove=function(a){var b=this;return B().then(function(){b.B.removeItem(a)})};h.ab=function(){};h.Ta=function(){};var Gh=function(a,b,c,d,e,f){if(!window.indexedDB)throw new O("web-storage-unsupported");this.He=a;this.fd=b;this.Qc=c;this.re=d;this.wb=e;this.$={};this.Wb=[];this.Jb=0;this.Ye=f||l.indexedDB},Hh,Ih=function(a){return new A(function(b,c){var d=a.Ye.open(a.He,a.wb);d.onerror=function(a){c(Error(a.target.errorCode))};d.onupgradeneeded=function(b){b=b.target.result;try{b.createObjectStore(a.fd,{keyPath:a.Qc})}catch(f){c(f)}};d.onsuccess=function(a){b(a.target.result)}})},Jh=function(a){a.Xd||(a.Xd=Ih(a));return a.Xd},Kh=function(a,b){return b.objectStore(a.fd)},Lh=function(a,b,c){return b.transaction([a.fd],c?"readwrite":"readonly")},Mh=function(a){return new A(function(b,c){a.onsuccess=function(a){a&&a.target?b(a.target.result):b()};a.onerror=function(a){c(Error(a.target.errorCode))}})};h=Gh.prototype;h.set=function(a,b){var c=!1,d,e=this;return md(Jh(this).then(function(b){d=b;b=Kh(e,Lh(e,d,!0));return Mh(b.get(a))}).then(function(f){var g=Kh(e,Lh(e,d,!0));if(f)return f.value=b,Mh(g.put(f));e.Jb++;c=!0;f={};f[e.Qc]=a;f[e.re]=b;return Mh(g.add(f))}).then(function(){e.$[a]=b}),function(){c&&e.Jb--})};h.get=function(a){var b=this;return Jh(this).then(function(c){return Mh(Kh(b,Lh(b,c,!1)).get(a))}).then(function(a){return a&&a.value})};h.remove=function(a){var b=!1,c=this;return md(Jh(this).then(function(d){b=!0;c.Jb++;return Mh(Kh(c,Lh(c,d,!0))["delete"](a))}).then(function(){delete c.$[a]}),function(){b&&c.Jb--})};h.Hf=function(){var a=this;return Jh(this).then(function(b){var c=Kh(a,Lh(a,b,!1));return c.getAll?Mh(c.getAll()):new A(function(a,b){var d=[],e=c.openCursor();e.onsuccess=function(b){(b=b.target.result)?(d.push(b.value),b["continue"]()):a(d)};e.onerror=function(a){b(Error(a.target.errorCode))}})}).then(function(b){var c={},d=[];if(0==a.Jb){for(d=0;d<b.length;d++){c[b[d][a.Qc]]=b[d][a.re]}d=Ye(a.$,c);a.$=c}return d})};h.ab=function(a){0==this.Wb.length&&this.vd();this.Wb.push(a)};h.Ta=function(a){La(this.Wb,function(b){return b==a});0==this.Wb.length&&this.Bc()};h.vd=function(){var a=this;this.Bc();var b=function(){a.kd=le(800).then(_q(a.Hf,a)).then(function(b){0<b.length&&w(a.Wb,function(a){a(b)})}).then(b).f(function(a){"STOP_EVENT"!=a.message&&b()});return a.kd};b()};h.Bc=function(){this.kd&&this.kd.cancel("STOP_EVENT")};var Qh=function(){this.Ld={Browser:Nh,Node:Oh,ReactNative:Ph}[L()]},Rh,Nh={M:Ch,yd:Fh},Oh={M:Ch,yd:Fh},Ph={M:yh,yd:Dh},Sh=function(a){var b={},c=a.email,d=a.newEmail;a=a.requestType;if(!c||!a)throw Error("Invalid provider user info!");b.fromEmail=d||null;b.email=c;N(this,"operation",a);N(this,"data",Jf(b))},Th=function(a,b,c,d,e,f){this.pf=a;this.xf=b;this.Qe=c;this.rc=d;this.zd=e;this.yf=!!f;this.kb=null;this.Ma=this.rc;if(this.zd<this.rc)throw Error("Proactive refresh lower bound greater than upper bound!")};Th.prototype.start=function(){this.Ma=this.rc;Uh(this,!0)};var Vh=function(a,b){if(b)return a.Ma=a.rc,a.Qe();b=a.Ma;a.Ma*=2;a.Ma>a.zd&&(a.Ma=a.zd);return b},Uh=function(a,b){a.stop();a.kb=le(Vh(a,b)).then(function(){return a.yf?B():zf()}).then(function(){return a.pf()}).then(function(){Uh(a,!0)}).f(function(b){a.xf(b)&&Uh(a,!1)})};Th.prototype.stop=function(){this.kb&&(this.kb.cancel(),this.kb=null)};var ai=function(a){var b={"facebook.com":Wh,"google.com":Xh,"github.com":Yh,"twitter.com":Zh},c=a&&a.providerId;return c?b[c]?new b[c](a):new $h(a):null},$h=function(a){var b=tf(a.rawUserInfo||"{}");a=a.providerId;if(!a)throw Error("Invalid additional user info!");N(this,"profile",Jf(b||{}));N(this,"providerId",a)},Wh=function(a){$h.call(this,a);if("facebook.com"!=this.providerId)throw Error("Invalid provider id!")};r(Wh,$h);var Yh=function(a){$h.call(this,a);if("github.com"!=this.providerId)throw Error("Invalid provider id!");N(this,"username",this.profile&&this.profile.login||null)};r(Yh,$h);var Xh=function(a){$h.call(this,a);if("google.com"!=this.providerId)throw Error("Invalid provider id!")};r(Xh,$h);var Zh=function(a){$h.call(this,a);if("twitter.com"!=this.providerId)throw Error("Invalid provider id!");N(this,"username",a.screenName||null)};r(Zh,$h);var bi=function(a,b,c,d){this.kf=a;this.he=b;this.zf=c;this.Ub=d;this.T={};Rh||(Rh=new Qh);a=Rh;try{var e;Ve()?(Hh||(Hh=new Gh("firebaseLocalStorageDb","firebaseLocalStorage","fbase_key","value",1)),e=Hh):e=new a.Ld.M;this.Qa=e}catch(f){this.Qa=new zh,this.Ub=!0}try{this.Dc=new a.Ld.yd}catch(f){this.Dc=new zh}this.wd=_q(this.le,this);this.$={}},ci,di=function(){ci||(ci=new bi("firebase",":",!uf(K())&&kf()?!0:!1,qf()));return ci};h=bi.prototype;h.R=function(a,b){return this.kf+this.he+a.name+(b?this.he+b:"")};h.get=function(a,b){return(a.M?this.Qa:this.Dc).get(this.R(a,b))};h.remove=function(a,b){b=this.R(a,b);a.M&&!this.Ub&&(this.$[b]=null);return(a.M?this.Qa:this.Dc).remove(b)};h.set=function(a,b,c){var d=this.R(a,c),e=this,f=a.M?this.Qa:this.Dc;return f.set(d,b).then(function(){return f.get(d)}).then(function(b){a.M&&!this.Ub&&(e.$[d]=b)})};h.addListener=function(a,b,c){a=this.R(a,b);this.Ub||(this.$[a]=l.localStorage.getItem(a));Va(this.T)&&this.vd();this.T[a]||(this.T[a]=[]);this.T[a].push(c)};h.removeListener=function(a,b,c){a=this.R(a,b);this.T[a]&&(La(this.T[a],function(a){return a==c}),0==this.T[a].length&&delete this.T[a]);Va(this.T)&&this.Bc()};h.vd=function(){this.Qa.ab(this.wd);this.Ub||Ve()||ei(this)};var ei=function(a){fi(a);a.dd=setInterval(function(){for(var b in a.T){var c=l.localStorage.getItem(b),d=a.$[b];c!=d&&(a.$[b]=c,c=new Jb({type:"storage",key:b,target:window,oldValue:d,newValue:c,rf:!0}),a.le(c))}},1E3)},fi=function(a){a.dd&&(clearInterval(a.dd),a.dd=null)};bi.prototype.Bc=function(){this.Qa.Ta(this.wd);fi(this)};bi.prototype.le=function(a){if(a&&a.Pe){var b=a.eb.key;"undefined"!==typeof a.eb.rf?this.Qa.Ta(this.wd):fi(this);if(this.zf){var c=l.localStorage.getItem(b);a=a.eb.newValue;a!=c&&(a?l.localStorage.setItem(b,a):a||l.localStorage.removeItem(b))}this.$[b]=l.localStorage.getItem(b);this.Ed(b)}else w(a,_q(this.Ed,this))};bi.prototype.Ed=function(a){this.T[a]&&w(this.T[a],function(a){a()})};var gi=function(a,b){this.u=a;this.i=b||di()},hi={name:"authEvent",M:!0},ii=function(a){return a.i.get(hi,a.u).then(function(a){return Qf(a)})};gi.prototype.$a=function(a){this.i.addListener(hi,this.u,a)};gi.prototype.Tb=function(a){this.i.removeListener(hi,this.u,a)};var ji=function(a){this.i=a||di()},ki={name:"sessionId",M:!1};ji.prototype.ic=function(a){return this.i.get(ki,a)};var li=function(a,b,c,d,e,f){this.v=a;this.j=b;this.D=c;this.Ea=d||null;this.me=b+":"+c;this.Af=new ji;this.Qd=new gi(this.me);this.Zc=null;this.ma=[];this.bf=e||500;this.tf=f||2E3;this.Fb=this.uc=null},mi=function(a){return new O("invalid-cordova-configuration",a)};li.prototype.La=function(){return this.ad?this.ad:this.ad=hf().then(function(){if("function"!==typeof M("universalLinks.subscribe",l))throw mi("cordova-universal-links-plugin is not installed");if("undefined"===typeof M("BuildInfo.packageName",l))throw mi("cordova-plugin-buildinfo is not installed");if("function"!==typeof M("cordova.plugins.browsertab.openUrl",l))throw mi("cordova-plugin-browsertab is not installed");if("function"!==typeof M("cordova.InAppBrowser.open",l))throw mi("cordova-plugin-inappbrowser is not installed")},function(){throw new O("cordova-not-ready")})};var ni=function(){for(var a=20,b=[];0<a;){b.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(_Mathfloor(62*Math.random()))),a--}return b.join("")},oi=function(a){var b=new Eb;b.update(a);return Oa(b.digest())};h=li.prototype;h.Vb=function(a,b){b(new O("operation-not-supported-in-this-environment"));return B()};h.Nb=function(){return D(new O("operation-not-supported-in-this-environment"))};h.ne=function(){return!1};h.ke=function(){return!0};h.Ud=function(){return!0};h.Ob=function(a,b,c){if(this.uc)return D(new O("redirect-operation-pending"));var d=this,e=l.document,f=null,g=null,k=null,n=null;return this.uc=md(B().then(function(){sg(b);return pi(d)}).then(function(){return qi(d,a,b,c)}).then(function(){return new A(function(a,b){g=function(){var b=M("cordova.plugins.browsertab.close",l);a();"function"===typeof b&&b();d.Fb&&"function"===typeof d.Fb.close&&(d.Fb.close(),d.Fb=null);return!1};d.$a(g);k=function(){f||(f=le(d.tf).then(function(){b(new O("redirect-cancelled-by-user"))}))};n=function(){yf()&&k()};e.addEventListener("resume",k,!1);K().toLowerCase().match(/android/)||e.addEventListener("visibilitychange",n,!1)}).f(function(a){return ri(d).then(function(){throw a})})}),function(){k&&e.removeEventListener("resume",k,!1);n&&e.removeEventListener("visibilitychange",n,!1);f&&f.cancel();g&&d.Tb(g);d.uc=null})};var qi=function(a,b,c,d){var e=ni(),f=new P(b,d,null,e,new O("no-auth-event")),g=M("BuildInfo.packageName",l);if("string"!==typeof g)throw new O("invalid-cordova-configuration");var k=M("BuildInfo.displayName",l),n={};if(K().toLowerCase().match(/iphone|ipad|ipod/))n.ibi=g;else if(K().toLowerCase().match(/android/))n.apn=g;else return D(new O("operation-not-supported-in-this-environment"));k&&(n.appDisplayName=k);e=oi(e);n.sessionId=e;var C=xh(a.v,a.j,a.D,b,c,null,d,a.Ea,n);return a.La().then(function(){var b=a.me;return a.Af.i.set(hi,f.C(),b)}).then(function(){var b=M("cordova.plugins.browsertab.isAvailable",l);if("function"!==typeof b)throw new O("invalid-cordova-configuration");var c=null;b(function(b){if(b){c=M("cordova.plugins.browsertab.openUrl",l);if("function"!==typeof c)throw new O("invalid-cordova-configuration");c(C)}else{c=M("cordova.InAppBrowser.open",l);if("function"!==typeof c)throw new O("invalid-cordova-configuration");b=c;var d=K();d=!(!d.match(/(iPad|iPhone|iPod).*OS 7_\d/i)&&!d.match(/(iPad|iPhone|iPod).*OS 8_\d/i));a.Fb=b(C,d?"_blank":"_system","location=yes")}})})},si=function(a,b){for(var c=0;c<a.ma.length;c++){try{a.ma[c](b)}catch(d){}}},pi=function(a){a.Zc||(a.Zc=a.La().then(function(){return new A(function(b){var c=function(d){b(d);a.Tb(c);return!1};a.$a(c);ti(a)})}));return a.Zc},ri=function(a){var b=null;return ii(a.Qd).then(function(c){b=c;c=a.Qd;return c.i.remove(hi,c.u)}).then(function(){return b})},ti=function(a){var b=M("universalLinks.subscribe",l);if("function"!==typeof b)throw new O("invalid-cordova-configuration");var c=new P("unknown",null,null,null,new O("no-auth-event")),d=!1,e=le(a.bf).then(function(){return ri(a).then(function(){d||si(a,c)})}),f=function(b){d=!0;e&&e.cancel();ri(a).then(function(d){var e=c;if(d&&b&&b.url){var e=null,f;f=b.url;var g=Pe(f),k=Oe(g,"link"),n=Oe(Pe(k),"link"),g=Oe(g,"deep_link_id");f=Oe(Pe(g),"link")||g||n||k||f;-1!=f.indexOf("/__/auth/callback")&&(e=Pe(f),e=tf(Oe(e,"firebaseError")||null),e=(e="object"===babelHelpers.typeof(e)?Pf(e):null)?new P(d.da,d.J,null,null,e):new P(d.da,d.J,f,d.ic()));e=e||c}si(a,e)})},g=l.handleOpenURL;l.handleOpenURL=function(a){0==a.indexOf(M("BuildInfo.packageName",l)+"://")&&f({url:a});if("function"===typeof g)try{g(a)}catch(n){console.error(n)}};b(null,f)};li.prototype.$a=function(a){this.ma.push(a);pi(this).f(function(b){"auth/invalid-cordova-configuration"===b.code&&(b=new P("unknown",null,null,null,new O("no-auth-event")),a(b))})};li.prototype.Tb=function(a){La(this.ma,function(b){return b==a})};var ui=function(a){this.u=a;this.i=di()},vi={name:"pendingRedirect",M:!1},wi=function(a){return a.i.set(vi,"pending",a.u)},xi=function(a){return a.i.remove(vi,a.u)},yi=function(a){return a.i.get(vi,a.u).then(function(a){return"pending"==a})},T=function(a,b,c){this.v=a;this.j=b;this.D=c;this.Xb=[];this.ib=!1;this.Mc=_q(this.Wc,this);this.Ra=new zi(this);this.ld=new Ai(this);this.Kb=new ui(this.j+":"+this.D);this.Aa={};this.Aa.unknown=this.Ra;this.Aa.signInViaRedirect=this.Ra;this.Aa.linkViaRedirect=this.Ra;this.Aa.reauthViaRedirect=this.Ra;this.Aa.signInViaPopup=this.ld;this.Aa.linkViaPopup=this.ld;this.Aa.reauthViaPopup=this.ld;this.K=Bi(this.v,this.j,this.D)},Bi=function(a,b,c){var d=firebase.SDK_VERSION||null;return gf()?new li(a,b,c,d):new th(a,b,c,d)};T.prototype.reset=function(){this.ib=!1;this.K.Tb(this.Mc);this.K=Bi(this.v,this.j,this.D)};T.prototype.Gb=function(){var a=this;this.ib||(this.ib=!0,this.K.$a(this.Mc));var b=this.K;return this.K.La().f(function(c){a.K==b&&a.reset();throw c})};var Ei=function(a){a.K.ke()&&a.Gb().f(function(b){var c=new P("unknown",null,null,null,new O("operation-not-supported-in-this-environment"));Ci(b)&&a.Wc(c)});a.K.Ud()||Di(a.Ra)};T.prototype.subscribe=function(a){Ia(this.Xb,a)||this.Xb.push(a);if(!this.ib){var b=this;yi(this.Kb).then(function(a){a?xi(b.Kb).then(function(){b.Gb().f(function(a){var c=new P("unknown",null,null,null,new O("operation-not-supported-in-this-environment"));Ci(a)&&b.Wc(c)})}):Ei(b)}).f(function(){Ei(b)})}};T.prototype.unsubscribe=function(a){La(this.Xb,function(b){return b==a})};T.prototype.Wc=function(a){if(!a)throw new O("invalid-auth-event");for(var b=!1,c=0,d;c<this.Xb.length;c++){d=this.Xb[c];if(d.Fd(a.da,a.J)){(b=this.Aa[a.da])&&b.ce(a,d);b=!0;break}}Di(this.Ra);return b};var Fi=new xf(2E3,1E4),Gi=new xf(3E4,6E4);T.prototype.getRedirectResult=function(){return this.Ra.getRedirectResult()};T.prototype.Nb=function(a,b,c,d,e){var f=this;return this.K.Nb(a,b,c,function(){f.ib||(f.ib=!0,f.K.$a(f.Mc))},function(){f.reset()},d,e)};var Ci=function(a){return a&&"auth/cordova-not-ready"==a.code?!0:!1};T.prototype.Ob=function(a,b,c){var d=this,e;return wi(this.Kb).then(function(){return d.K.Ob(a,b,c).f(function(a){if(Ci(a))throw new O("operation-not-supported-in-this-environment");e=a;return xi(d.Kb).then(function(){throw e})}).then(function(){return d.K.ne()?new A(function(){}):xi(d.Kb).then(function(){return d.getRedirectResult()}).then(function(){}).f(function(){})})})};T.prototype.Vb=function(a,b,c,d){return this.K.Vb(c,function(c){a.Va(b,null,c,d)},Fi.get())};var Hi={},Ii=function(a,b,c){var d=b+":"+c;Hi[d]||(Hi[d]=new T(a,b,c));return Hi[d]},zi=function(a){this.i=a;this.qb=null;this.Rb=[];this.Qb=[];this.ob=null;this.od=!1};zi.prototype.reset=function(){this.qb=null;this.ob&&(this.ob.cancel(),this.ob=null)};zi.prototype.ce=function(a,b){if(!a)return D(new O("invalid-auth-event"));this.reset();this.od=!0;var c=a.da,d=a.J,e=a.getError()&&"auth/web-storage-unsupported"==a.getError().code,f=a.getError()&&"auth/operation-not-supported-in-this-environment"==a.getError().code;"unknown"!=c||e||f?a=a.P?this.md(a,b):b.zb(c,d)?this.nd(a,b):D(new O("invalid-auth-event")):(Ji(this,!1,null,null),a=B());return a};var Di=function(a){a.od||(a.od=!0,Ji(a,!1,null,null))};zi.prototype.md=function(a){Ji(this,!0,null,a.getError());return B()};zi.prototype.nd=function(a,b){var c=this;b=b.zb(a.da,a.J);var d=a.tb,e=a.ic(),f=!!a.da.match(/Redirect$/);return b(d,e).then(function(a){Ji(c,f,a,null)}).f(function(a){Ji(c,f,null,a)})};var Ki=function(a,b){a.qb=function(){return D(b)};if(a.Qb.length)for(var c=0;c<a.Qb.length;c++){a.Qb[c](b)}},Li=function(a,b){a.qb=function(){return B(b)};if(a.Rb.length)for(var c=0;c<a.Rb.length;c++){a.Rb[c](b)}},Ji=function(a,b,c,d){b?d?Ki(a,d):Li(a,c):Li(a,{user:null});a.Rb=[];a.Qb=[]};zi.prototype.getRedirectResult=function(){var a=this;return new A(function(b,c){a.qb?a.qb().then(b,c):(a.Rb.push(b),a.Qb.push(c),Mi(a))})};var Mi=function(a){var b=new O("timeout");a.ob&&a.ob.cancel();a.ob=le(Gi.get()).then(function(){a.qb||Ji(a,!0,null,b)})},Ai=function(a){this.i=a};Ai.prototype.ce=function(a,b){if(!a)return D(new O("invalid-auth-event"));var c=a.da,d=a.J;return a.P?this.md(a,b):b.zb(c,d)?this.nd(a,b):D(new O("invalid-auth-event"))};Ai.prototype.md=function(a,b){b.Va(a.da,null,a.getError(),a.J);return B()};Ai.prototype.nd=function(a,b){var c=a.J,d=a.da,e=b.zb(d,c),f=a.tb;a=a.ic();return e(f,a).then(function(a){b.Va(d,a,null,c)}).f(function(a){b.Va(d,null,a,c)})};var Ni=function(a){this.g=a;this.Ba=this.X=null;this.Ha=0};Ni.prototype.C=function(){return{apiKey:this.g.j,refreshToken:this.X,accessToken:this.Ba,expirationTime:this.Ha}};var Pi=function(a,b){var c=b.idToken,d=b.refreshToken;b=Oi(b.expiresIn);a.Ba=c;a.Ha=b;a.X=d},Oi=function(a){return la()+1E3*parseInt(a,10)},Qi=function(a,b){return Eg(a.g,b).then(function(b){a.Ba=b.access_token;a.Ha=Oi(b.expires_in);a.X=b.refresh_token;return{accessToken:a.Ba,expirationTime:a.Ha,refreshToken:a.X}}).f(function(b){"auth/user-token-expired"==b.code&&(a.X=null);throw b})};Ni.prototype.getToken=function(a){a=!!a;return this.Ba&&!this.X?D(new O("user-token-expired")):a||!this.Ba||la()>this.Ha-3E4?this.X?Qi(this,{grant_type:"refresh_token",refresh_token:this.X}):B(null):B({accessToken:this.Ba,expirationTime:this.Ha,refreshToken:this.X})};var Ri=function(a,b,c,d,e){Ff(this,{uid:a,displayName:d||null,photoURL:e||null,email:c||null,providerId:b})},Si=function(a,b){Ib.call(this,a);for(var c in b){this[c]=b[c]}};r(Si,Ib);var U=function(a,b,c){this.ba=[];this.j=a.apiKey;this.D=a.appName;this.v=a.authDomain||null;a=firebase.SDK_VERSION?mf(firebase.SDK_VERSION):null;this.g=new S(this.j,null,a);this.ia=new Ni(this.g);Ti(this,b.idToken);Pi(this.ia,b);N(this,"refreshToken",this.ia.X);Ui(this,c||{});he.call(this);this.vc=!1;this.v&&pf()&&(this.m=Ii(this.v,this.j,this.D));this.Ac=[];this.ka=null;this.mb=Vi(this);this.vb=_q(this.Xc,this)};r(U,he);U.prototype.Xc=function(){this.mb.kb&&(this.mb.stop(),this.mb.start())};var Vi=function(a){return new Th(function(){return a.getToken(!0)},function(a){return a&&"auth/network-request-failed"==a.code?!0:!1},function(){var b=a.ia.Ha-la()-3E5;return 0<b?b:0},3E4,96E4,!1)},Wi=function(a){a.Kd||a.mb.kb||(a.mb.start(),dc(a,"tokenChanged",a.vb),Vb(a,"tokenChanged",a.vb))},Xi=function(a){dc(a,"tokenChanged",a.vb);a.mb.stop()},Ti=function(a,b){a.Yd=b;N(a,"_lat",b)},Yi=function(a,b){La(a.Ac,function(a){return a==b})},Zi=function(a){for(var b=[],c=0;c<a.Ac.length;c++){b.push(a.Ac[c](a))}return jd(b).then(function(){return a})},$i=function(a){a.m&&!a.vc&&(a.vc=!0,a.m.subscribe(a))},Ui=function(a,b){Ff(a,{uid:b.uid,displayName:b.displayName||null,photoURL:b.photoURL||null,email:b.email||null,emailVerified:b.emailVerified||!1,identifierNumber:b.identifierNumber||null,isAnonymous:b.isAnonymous||!1,providerData:[]})};N(U.prototype,"providerId","firebase");var aj=function(){},bj=function(a){return B().then(function(){if(a.Kd)throw new O("app-deleted")})},cj=function(a){return Ea(a.providerData,function(a){return a.providerId})},ej=function(a,b){b&&(dj(a,b.providerId),a.providerData.push(b))},dj=function(a,b){La(a.providerData,function(a){return a.providerId==b})},fj=function(a,b,c){("uid"!=b||c)&&a.hasOwnProperty(b)&&N(a,b,c)};U.prototype.copy=function(a){var b=this;b!=a&&(Ff(this,{uid:a.uid,displayName:a.displayName,photoURL:a.photoURL,email:a.email,emailVerified:a.emailVerified,identifierNumber:a.identifierNumber,isAnonymous:a.isAnonymous,providerData:[]}),w(a.providerData,function(a){ej(b,a)}),this.ia=a.ia,N(this,"refreshToken",this.ia.X))};U.prototype.reload=function(){var a=this;return this.c(bj(this).then(function(){return gj(a).then(function(){return Zi(a)}).then(aj)}))};var gj=function(a){return a.getToken().then(function(b){var c=a.isAnonymous;return hj(a,b).then(function(){c||fj(a,"isAnonymous",!1);return b})})};U.prototype.getToken=function(a){var b=this;return this.c(bj(this).then(function(){return b.ia.getToken(a)}).then(function(a){if(!a)throw new O("internal-error");a.accessToken!=b.Yd&&(Ti(b,a.accessToken),b.Na());fj(b,"refreshToken",a.refreshToken);return a.accessToken}))};var ij=function(a,b){b.idToken&&a.Yd!=b.idToken&&(Pi(a.ia,b),a.Na(),Ti(a,b.idToken),fj(a,"refreshToken",a.ia.X))};U.prototype.Na=function(){this.dispatchEvent(new Si("tokenChanged"))};var hj=function(a,b){return R(a.g,gh,{idToken:b}).then(_q(a.qf,a))};U.prototype.qf=function(a){a=a.users;if(!a||!a.length)throw new O("internal-error");a=a[0];Ui(this,{uid:a.localId,displayName:a.displayName,photoURL:a.photoUrl,email:a.email,emailVerified:!!a.emailVerified,identifierNumber:a.identifierNumber});for(var b=jj(a),c=0;c<b.length;c++){ej(this,b[c])}fj(this,"isAnonymous",!(this.email&&a.passwordHash)&&!(this.providerData&&this.providerData.length))};var jj=function(a){return(a=a.providerUserInfo)&&a.length?Ea(a,function(a){return new Ri(a.rawId,a.providerId,a.email,a.displayName,a.photoUrl)}):[]},lj=function(a,b){var c=null;return a.c(b.ed(a.g,a.uid).then(function(b){ij(a,b);c=kj(a,b,"reauthenticate");a.ka=null;return a.reload()}).then(function(){return c}),!0)};U.prototype.reauthenticate=function(a){Bf("firebase.User.prototype.reauthenticate is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead.");return this.reauthenticateWithCredential(a)};U.prototype.reauthenticateWithCredential=function(a){return lj(this,a).then(function(){})};var mj=function(a,b){return gj(a).then(function(){if(Ia(cj(a),b))return Zi(a).then(function(){throw new O("provider-already-linked")})})},oj=function(a,b){var c=null;return a.c(mj(a,b.providerId).then(function(){return a.getToken()}).then(function(c){return b.cd(a.g,c)}).then(function(b){c=kj(a,b,"link");return nj(a,b)}).then(function(){return c}))};U.prototype.link=function(a){Bf("firebase.User.prototype.link is deprecated. Please use firebase.User.prototype.linkWithCredential instead.");return this.linkWithCredential(a)};U.prototype.linkWithCredential=function(a){return oj(this,a).then(function(a){return a.user})};var kj=function(a,b,c){var d=rg(b);b=ai(b);return Gf({user:a,credential:d,additionalUserInfo:b,operationType:c})},nj=function(a,b){ij(a,b);return a.reload().then(function(){return a})};h=U.prototype;h.updateEmail=function(a){var b=this;return this.c(this.getToken().then(function(c){return b.g.updateEmail(c,a)}).then(function(a){ij(b,a);return b.reload()}))};h.updatePassword=function(a){var b=this;return this.c(this.getToken().then(function(c){return b.g.updatePassword(c,a)}).then(function(a){ij(b,a);return b.reload()}))};h.updateProfile=function(a){if(void 0===a.displayName&&void 0===a.photoURL)return bj(this);var b=this;return this.c(this.getToken().then(function(c){return b.g.updateProfile(c,{displayName:a.displayName,photoUrl:a.photoURL})}).then(function(a){ij(b,a);fj(b,"displayName",a.displayName||null);fj(b,"photoURL",a.photoUrl||null);return Zi(b)}).then(aj))};h.unlink=function(a){var b=this;return this.c(gj(this).then(function(c){return Ia(cj(b),a)?Vg(b.g,c,[a]).then(function(a){var c={};w(a.providerUserInfo||[],function(a){c[a.providerId]=!0});w(cj(b),function(a){c[a]||dj(b,a)});return Zi(b)}):Zi(b).then(function(){throw new O("no-such-provider")})}))};h["delete"]=function(){var a=this;return this.c(this.getToken().then(function(b){return R(a.g,fh,{idToken:b})}).then(function(){a.dispatchEvent(new Si("userDeleted"))})).then(function(){for(var b=0;b<a.ba.length;b++){a.ba[b].cancel("app-deleted")}a.ba=[];a.Kd=!0;Xi(a);N(a,"refreshToken",null);a.m&&a.m.unsubscribe(a)})};h.Fd=function(a,b){return"linkViaPopup"==a&&(this.ca||null)==b&&this.aa||"reauthViaPopup"==a&&(this.ca||null)==b&&this.aa||"linkViaRedirect"==a&&(this.za||null)==b||"reauthViaRedirect"==a&&(this.za||null)==b?!0:!1};h.Va=function(a,b,c,d){"linkViaPopup"!=a&&"reauthViaPopup"!=a||d!=(this.ca||null)||(c&&this.Pa?this.Pa(c):b&&!c&&this.aa&&this.aa(b),this.F&&(this.F.cancel(),this.F=null),delete this.aa,delete this.Pa)};h.zb=function(a,b){return"linkViaPopup"==a&&b==(this.ca||null)?_q(this.Nd,this):"reauthViaPopup"==a&&b==(this.ca||null)?_q(this.Od,this):"linkViaRedirect"==a&&(this.za||null)==b?_q(this.Nd,this):"reauthViaRedirect"==a&&(this.za||null)==b?_q(this.Od,this):null};h.hc=function(){return of(this.uid+":::")};var qj=function(a,b){return pj(a,"linkViaPopup",b,function(){return mj(a,b.providerId).then(function(){return Zi(a)})},!1)};U.prototype.linkWithPopup=function(a){return qj(this,a).then(function(a){return a?Gf({user:a.user,credential:a.credential,operationType:a.operationType}):a})};var rj=function(a,b){return pj(a,"reauthViaPopup",b,function(){return B()},!0)};U.prototype.reauthenticateWithPopup=function(a){return rj(this,a).then(function(a){return a?Gf({user:a.user,credential:a.credential,operationType:a.operationType}):a})};var pj=function(a,b,c,d,e){if(!pf())return D(new O("operation-not-supported-in-this-environment"));if(a.ka&&!e)return D(a.ka);var f=Nf(c.providerId),g=a.hc(),k=null;(!qf()||kf())&&a.v&&c.isOAuthProvider&&(k=xh(a.v,a.j,a.D,b,c,null,g,firebase.SDK_VERSION||null));var n=cf(k,f&&f.Mb,f&&f.Lb);d=d().then(function(){sj(a);if(!e)return a.getToken().then(function(){})}).then(function(){return a.m.Nb(n,b,c,g,!!k)}).then(function(){return new A(function(c,d){a.Va(b,null,new O("cancelled-popup-request"),a.ca||null);a.aa=c;a.Pa=d;a.ca=g;a.F=a.m.Vb(a,b,n,g)})}).then(function(a){n&&bf(n);return a}).f(function(a){n&&bf(n);throw a});return a.c(d,e)};U.prototype.linkWithRedirect=function(a){var b=this;return tj(this,"linkViaRedirect",a,function(){return mj(b,a.providerId)},!1)};U.prototype.reauthenticateWithRedirect=function(a){return tj(this,"reauthViaRedirect",a,function(){return B()},!0)};var tj=function(a,b,c,d,e){if(!pf())return D(new O("operation-not-supported-in-this-environment"));if(a.ka&&!e)return D(a.ka);var f=null,g=a.hc();d=d().then(function(){sj(a);if(!e)return a.getToken().then(function(){})}).then(function(){a.za=g;return Zi(a)}).then(function(b){a.Sa&&(b=a.Sa,b=b.i.set(uj,a.C(),b.u));return b}).then(function(){return a.m.Ob(b,c,g)}).f(function(b){f=b;if(a.Sa)return vj(a.Sa);throw f}).then(function(){if(f)throw f});return a.c(d,e)},sj=function(a){if(!a.m||!a.vc){if(a.m&&!a.vc)throw new O("internal-error");throw new O("auth-domain-config-required")}};U.prototype.Nd=function(a,b){var c=this;this.F&&(this.F.cancel(),this.F=null);var d=null,e=this.getToken().then(function(d){return Xf(c.g,{requestUri:a,sessionId:b,idToken:d})}).then(function(a){d=kj(c,a,"link");return nj(c,a)}).then(function(){return d});return this.c(e)};U.prototype.Od=function(a,b){var c=this;this.F&&(this.F.cancel(),this.F=null);var d=null,e=B().then(function(){return Tf(Yf(c.g,{requestUri:a,sessionId:b}),c.uid)}).then(function(a){d=kj(c,a,"reauthenticate");ij(c,a);c.ka=null;return c.reload()}).then(function(){return d});return this.c(e,!0)};U.prototype.sendEmailVerification=function(){var a=this;return this.c(this.getToken().then(function(b){return a.g.sendEmailVerification(b)}).then(function(b){if(a.email!=b)return a.reload()}).then(function(){}))};U.prototype.c=function(a,b){var c=this,d=wj(this,a,b);this.ba.push(d);md(d,function(){Ka(c.ba,d)});return d};var wj=function(a,b,c){return a.ka&&!c?(b.cancel(),D(a.ka)):b.f(function(b){b&&("auth/user-disabled"==b.code||"auth/user-token-expired"==b.code)&&(a.ka||a.dispatchEvent(new Si("userInvalidated")),a.ka=b);throw b})};U.prototype.toJSON=function(){return this.C()};U.prototype.C=function(){var a={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,identifierNumber:this.identifierNumber,isAnonymous:this.isAnonymous,providerData:[],apiKey:this.j,appName:this.D,authDomain:this.v,stsTokenManager:this.ia.C(),redirectEventId:this.za||null};w(this.providerData,function(b){a.providerData.push(Hf(b))});return a};var xj=function(a){if(!a.apiKey)return null;var b={apiKey:a.apiKey,authDomain:a.authDomain,appName:a.appName},c={};if(a.stsTokenManager&&a.stsTokenManager.accessToken&&a.stsTokenManager.expirationTime)c.idToken=a.stsTokenManager.accessToken,c.refreshToken=a.stsTokenManager.refreshToken||null,c.expiresIn=(a.stsTokenManager.expirationTime-la())/1E3;else return null;var d=new U(b,c,a);a.providerData&&w(a.providerData,function(a){a&&ej(d,Gf(a))});a.redirectEventId&&(d.za=a.redirectEventId);return d},yj=function(a,b,c){var d=new U(a,b);c&&(d.Sa=c);return d.reload().then(function(){return d})},zj=function(a){this.u=a;this.i=di()},uj={name:"redirectUser",M:!1},vj=function(a){return a.i.remove(uj,a.u)},Aj=function(a,b){return a.i.get(uj,a.u).then(function(a){a&&b&&(a.authDomain=b);return xj(a||{})})},Bj=function(a){this.u=a;this.i=di()},Cj={name:"authUser",M:!0},Dj=function(a,b){return a.i.set(Cj,b.C(),a.u)},Ej=function(a){return a.i.remove(Cj,a.u)},Fj=function(a,b){return a.i.get(Cj,a.u).then(function(a){a&&b&&(a.authDomain=b);return xj(a||{})})},W=function(a){this.Fa=!1;N(this,"app",a);if(V(this).options&&V(this).options.apiKey)a=firebase.SDK_VERSION?mf(firebase.SDK_VERSION):null,this.g=new S(V(this).options&&V(this).options.apiKey,null,a);else throw new O("invalid-api-key");this.ba=[];this.Ca=[];this.ub=[];this.mf=firebase.INTERNAL.createSubscribe(_q(this.Ze,this));this.Ic=void 0;firebase.INTERNAL.createSubscribe(_q(this.af,this));Gj(this,null);this.ta=new Bj(V(this).options.apiKey+":"+V(this).name);this.pb=new zj(V(this).options.apiKey+":"+V(this).name);this.cc=this.c(Hj(this));this.qa=this.c(Ij(this));this.bd=!1;this.Vc=_q(this.Gf,this);this.qe=_q(this.gb,this);this.vb=_q(this.Xc,this);this.oe=_q(this.Ue,this);this.pe=_q(this.Ve,this);Jj(this);this.INTERNAL={};this.INTERNAL["delete"]=_q(this["delete"],this);this.Ia=0};W.prototype.toJSON=function(){return{apiKey:V(this).options.apiKey,authDomain:V(this).options.authDomain,appName:V(this).name,currentUser:X(this)&&X(this).C()}};var Kj=function(a){return a.Ie||D(new O("auth-domain-config-required"))},Jj=function(a){var b=V(a).options.authDomain,c=V(a).options.apiKey;b&&pf()&&(a.Ie=a.cc.then(function(){if(!a.Fa)return a.m=Ii(b,c,V(a).name),a.m.subscribe(a),X(a)&&$i(X(a)),a.Sb&&($i(a.Sb),a.Sb=null),a.m}))};h=W.prototype;h.Fd=function(a,b){switch(a){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.ca==b&&!!this.aa;default:return!1;}};h.Va=function(a,b,c,d){"signInViaPopup"==a&&this.ca==d&&(c&&this.Pa?this.Pa(c):b&&!c&&this.aa&&this.aa(b),this.F&&(this.F.cancel(),this.F=null),delete this.aa,delete this.Pa)};h.zb=function(a,b){return"signInViaRedirect"==a||"signInViaPopup"==a&&this.ca==b&&this.aa?_q(this.Ke,this):null};h.Ke=function(a,b){var c=this;a={requestUri:a,sessionId:b};this.F&&(this.F.cancel(),this.F=null);var d=null,e=null,f=Vf(c.g,a).then(function(a){d=rg(a);e=ai(a);return a});a=c.cc.then(function(){return f}).then(function(a){return Lj(c,a)}).then(function(){return Gf({user:X(c),credential:d,additionalUserInfo:e,operationType:"signIn"})});return this.c(a)};h.hc=function(){return of()};var Mj=function(a,b){if(!pf())return D(new O("operation-not-supported-in-this-environment"));var c=Nf(b.providerId),d=a.hc(),e=null;(!qf()||kf())&&V(a).options.authDomain&&b.isOAuthProvider&&(e=xh(V(a).options.authDomain,V(a).options.apiKey,V(a).name,"signInViaPopup",b,null,d,firebase.SDK_VERSION||null));var f=cf(e,c&&c.Mb,c&&c.Lb),c=Kj(a).then(function(a){return a.Nb(f,"signInViaPopup",b,d,!!e)}).then(function(){return new A(function(b,c){a.Va("signInViaPopup",null,new O("cancelled-popup-request"),a.ca);a.aa=b;a.Pa=c;a.ca=d;a.F=a.m.Vb(a,"signInViaPopup",f,d)})}).then(function(a){f&&bf(f);return a}).f(function(a){f&&bf(f);throw a});return a.c(c)};W.prototype.signInWithPopup=function(a){return Mj(this,a).then(function(a){return a?Gf({user:a.user,credential:a.credential,operationType:a.operationType}):a})};W.prototype.getRedirectResult=function(){return Nj(this).then(function(a){return a?Gf({user:a.user,credential:a.credential,operationType:a.operationType}):a})};W.prototype.signInWithRedirect=function(a){if(!pf())return D(new O("operation-not-supported-in-this-environment"));var b=this,c=Kj(this).then(function(){return b.m.Ob("signInViaRedirect",a)});return this.c(c)};var Nj=function(a){if(!pf())return D(new O("operation-not-supported-in-this-environment"));var b=Kj(a).then(function(){return a.m.getRedirectResult()});return a.c(b)},Lj=function(a,b){var c={apiKey:V(a).options.apiKey,authDomain:V(a).options.authDomain,appName:V(a).name};return a.cc.then(function(){return yj(c,b,a.pb)}).then(function(b){if(X(a)&&b.uid==X(a).uid)return X(a).copy(b),a.gb(b);Gj(a,b);$i(b);return a.gb(b)}).then(function(){a.Na()})},Gj=function(a,b){X(a)&&(Yi(X(a),a.qe),dc(X(a),"tokenChanged",a.vb),dc(X(a),"userDeleted",a.oe),dc(X(a),"userInvalidated",a.pe),Xi(X(a)));b&&(b.Ac.push(a.qe),Vb(b,"tokenChanged",a.vb),Vb(b,"userDeleted",a.oe),Vb(b,"userInvalidated",a.pe),0<a.Ia&&Wi(b));N(a,"currentUser",b)};W.prototype.signOut=function(){var a=this,b=this.qa.then(function(){if(!X(a))return B();Gj(a,null);return Ej(a.ta).then(function(){a.Na()})});return this.c(b)};var Oj=function(a){var b=Aj(a.pb,V(a).options.authDomain).then(function(b){if(a.Sb=b)b.Sa=a.pb;return vj(a.pb)});return a.c(b)},Hj=function(a){var b=V(a).options.authDomain,c=Oj(a).then(function(){return Fj(a.ta,b)}).then(function(b){return b?(b.Sa=a.pb,a.Sb&&(a.Sb.za||null)==(b.za||null)?b:b.reload().then(function(){return Dj(a.ta,b).then(function(){return b})}).f(function(c){return"auth/network-request-failed"==c.code?b:Ej(a.ta)})):null}).then(function(b){Gj(a,b||null)});return a.c(c)},Ij=function(a){return a.cc.then(function(){return a.getRedirectResult()}).f(function(){}).then(function(){if(!a.Fa)return a.Vc()}).f(function(){}).then(function(){if(!a.Fa){a.bd=!0;var b=a.ta;b.i.addListener(Cj,b.u,a.Vc)}})};h=W.prototype;h.Gf=function(){var a=this;return Fj(this.ta,V(this).options.authDomain).then(function(b){if(!a.Fa){var c;if(c=X(a)&&b){c=X(a).uid;var d=b.uid;c=void 0===c||null===c||""===c||void 0===d||null===d||""===d?!1:c==d}if(c)return X(a).copy(b),X(a).getToken();if(X(a)||b)Gj(a,b),b&&($i(b),b.Sa=a.pb),a.m&&a.m.subscribe(a),a.Na()}})};h.gb=function(a){return Dj(this.ta,a)};h.Xc=function(){this.Na();this.gb(X(this))};h.Ue=function(){this.signOut()};h.Ve=function(){this.signOut()};var Pj=function(a,b){var c=null,d=null;return a.c(b.then(function(b){c=rg(b);d=ai(b);return Lj(a,b)}).then(function(){return Gf({user:X(a),credential:c,additionalUserInfo:d,operationType:"signIn"})}))};h=W.prototype;h.Ze=function(a){var b=this;this.addAuthTokenListener(function(){a.next(X(b))})};h.af=function(a){var b=this;Qj(this,function(){a.next(X(b))})};h.onAuthStateChanged=function(a,b,c){var d=this;this.bd&&firebase.Promise.resolve().then(function(){p(a)?a(X(d)):p(a.next)&&a.next(X(d))});return this.mf(a,b,c)};h.getToken=function(a){var b=this,c=this.qa.then(function(){return X(b)?X(b).getToken(a).then(function(a){return{accessToken:a}}):null});return this.c(c)};h.signInWithCustomToken=function(a){var b=this;return this.qa.then(function(){return Pj(b,R(b.g,hh,{token:a}))}).then(function(a){a=a.user;fj(a,"isAnonymous",!1);return b.gb(a)}).then(function(){return X(b)})};h.signInWithEmailAndPassword=function(a,b){var c=this;return this.qa.then(function(){return Pj(c,R(c.g,ig,{email:a,password:b}))}).then(function(a){return a.user})};h.createUserWithEmailAndPassword=function(a,b){var c=this;return this.qa.then(function(){return Pj(c,R(c.g,eh,{email:a,password:b}))}).then(function(a){return a.user})};h.signInWithCredential=function(a){return Rj(this,a).then(function(a){return a.user})};var Rj=function(a,b){return a.qa.then(function(){return Pj(a,b.Ab(a.g))})};W.prototype.signInAnonymously=function(){var a=X(this),b=this;return a&&a.isAnonymous?B(a):this.qa.then(function(){return Pj(b,b.g.signInAnonymously())}).then(function(a){a=a.user;fj(a,"isAnonymous",!0);return b.gb(a)}).then(function(){return X(b)})};var V=function(a){return a.app},X=function(a){return a.currentUser};W.prototype.getUid=function(){return X(this)&&X(this).uid||null};var Sj=function(a){return X(a)&&X(a)._lat||null};h=W.prototype;h.Na=function(){if(this.bd){for(var a=0;a<this.Ca.length;a++){if(this.Ca[a])this.Ca[a](Sj(this))}if(this.Ic!==this.getUid()&&this.ub.length)for(this.Ic=this.getUid(),a=0;a<this.ub.length;a++){if(this.ub[a])this.ub[a](Sj(this))}}};h.Ae=function(a){this.addAuthTokenListener(a);this.Ia++;0<this.Ia&&X(this)&&Wi(X(this))};h.uf=function(a){var b=this;w(this.Ca,function(c){c==a&&b.Ia--});0>this.Ia&&(this.Ia=0);0==this.Ia&&X(this)&&Xi(X(this));this.removeAuthTokenListener(a)};h.addAuthTokenListener=function(a){var b=this;this.Ca.push(a);this.c(this.qa.then(function(){b.Fa||Ia(b.Ca,a)&&a(Sj(b))}))};h.removeAuthTokenListener=function(a){La(this.Ca,function(b){return b==a})};var Qj=function(a,b){a.ub.push(b);a.c(a.qa.then(function(){!a.Fa&&Ia(a.ub,b)&&a.Ic!==a.getUid()&&(a.Ic=a.getUid(),b(Sj(a)))}))};h=W.prototype;h["delete"]=function(){this.Fa=!0;for(var a=0;a<this.ba.length;a++){this.ba[a].cancel("app-deleted")}this.ba=[];this.ta&&(a=this.ta,a.i.removeListener(Cj,a.u,this.Vc));this.m&&this.m.unsubscribe(this);return firebase.Promise.resolve()};h.c=function(a){var b=this;this.ba.push(a);md(a,function(){Ka(b.ba,a)});return a};h.fetchProvidersForEmail=function(a){return this.c(Jg(this.g,a))};h.verifyPasswordResetCode=function(a){return this.checkActionCode(a).then(function(a){return a.data.email})};h.confirmPasswordReset=function(a,b){return this.c(this.g.confirmPasswordReset(a,b).then(function(){}))};h.checkActionCode=function(a){return this.c(this.g.checkActionCode(a).then(function(a){return new Sh(a)}))};h.applyActionCode=function(a){return this.c(this.g.applyActionCode(a).then(function(){}))};h.sendPasswordResetEmail=function(a){return this.c(this.g.sendPasswordResetEmail(a).then(function(){}))};var Tj="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" "),Y=function(a,b){return{name:a||"",ja:"a valid string",optional:!!b,la:m}},Z=function(a){return{name:a||"",ja:"a valid object",optional:!1,la:ha}},Uj=function(a,b){return{name:a||"",ja:"a function",optional:!!b,la:p}},Vj=function(){return{name:"",ja:"null",optional:!1,la:da}},Wj=function(){return{name:"credential",ja:"a valid credential",optional:!1,la:function(a){return a?!!a.Ab:!1}}},Xj=function(){return{name:"authProvider",ja:"a valid Auth provider",optional:!1,la:function(a){return!!(a&&a.providerId&&a.hasOwnProperty&&a.hasOwnProperty("isOAuthProvider"))}}},Yj=function(a,b,c,d){return{name:c||"",ja:a.ja+" or "+b.ja,optional:!!d,la:function(c){return a.la(c)||b.la(c)}}},ak=function(a,b){for(var c in b){var d=b[c].name;a[d]=Zj(d,a[c],b[c].a)}},bk=function(a,b,c,d){a[b]=Zj(b,c,d)},Zj=function(a,b,c){if(!c)return b;var d=ck(a);a=function(){var a=Array.prototype.slice.call(arguments),e;a:{e=Array.prototype.slice.call(a);var k=0;for(var n=!1,C=0;C<c.length;C++){if(c[C].optional)n=!0;else{if(n)throw new O("internal-error","Argument validator encountered a required argument after an optional argument.");k++}}n=c.length;if(e.length<k||n<e.length)e="Expected "+(k==n?1==k?"1 argument":k+" arguments":k+"-"+n+" arguments")+" but got "+e.length+".";else{for(k=0;k<e.length;k++){if(n=c[k].optional&&void 0===e[k],!c[k].la(e[k])&&!n){e=c[k];if(0>k||k>=Tj.length)throw new O("internal-error","Argument validator received an unsupported number of arguments.");e=Tj[k]+" argument "+(e.name?"\""+e.name+"\" ":"")+"must be "+e.ja+".";break a}}e=null}}if(e)throw new O("argument-error",d+" failed: "+e);return b.apply(this,a)};for(var e in b){a[e]=b[e]}for(e in b.prototype){a.prototype[e]=b.prototype[e]}return a},ck=function(a){a=a.split(".");return a[a.length-1]};ak(W.prototype,{applyActionCode:{name:"applyActionCode",a:[Y("code")]},checkActionCode:{name:"checkActionCode",a:[Y("code")]},confirmPasswordReset:{name:"confirmPasswordReset",a:[Y("code"),Y("newPassword")]},createUserWithEmailAndPassword:{name:"createUserWithEmailAndPassword",a:[Y("email"),Y("password")]},fetchProvidersForEmail:{name:"fetchProvidersForEmail",a:[Y("email")]},getRedirectResult:{name:"getRedirectResult",a:[]},onAuthStateChanged:{name:"onAuthStateChanged",a:[Yj(Z(),Uj(),"nextOrObserver"),Uj("opt_error",!0),Uj("opt_completed",!0)]},sendPasswordResetEmail:{name:"sendPasswordResetEmail",a:[Y("email")]},signInAnonymously:{name:"signInAnonymously",a:[]},signInWithCredential:{name:"signInWithCredential",a:[Wj()]},signInWithCustomToken:{name:"signInWithCustomToken",a:[Y("token")]},signInWithEmailAndPassword:{name:"signInWithEmailAndPassword",a:[Y("email"),Y("password")]},signInWithPopup:{name:"signInWithPopup",a:[Xj()]},signInWithRedirect:{name:"signInWithRedirect",a:[Xj()]},signOut:{name:"signOut",a:[]},toJSON:{name:"toJSON",a:[Y(null,!0)]},verifyPasswordResetCode:{name:"verifyPasswordResetCode",a:[Y("code")]}});ak(U.prototype,{delete:{name:"delete",a:[]},getToken:{name:"getToken",a:[{name:"opt_forceRefresh",ja:"a boolean",optional:!0,la:function(a){return"boolean"==typeof a}}]},link:{name:"link",a:[Wj()]},linkWithCredential:{name:"linkWithCredential",a:[Wj()]},linkWithPopup:{name:"linkWithPopup",a:[Xj()]},linkWithRedirect:{name:"linkWithRedirect",a:[Xj()]},reauthenticate:{name:"reauthenticate",a:[Wj()]},reauthenticateWithCredential:{name:"reauthenticateWithCredential",a:[Wj()]},reauthenticateWithPopup:{name:"reauthenticateWithPopup",a:[Xj()]},reauthenticateWithRedirect:{name:"reauthenticateWithRedirect",a:[Xj()]},reload:{name:"reload",a:[]},sendEmailVerification:{name:"sendEmailVerification",a:[]},toJSON:{name:"toJSON",a:[Y(null,!0)]},unlink:{name:"unlink",a:[Y("provider")]},updateEmail:{name:"updateEmail",a:[Y("email")]},updatePassword:{name:"updatePassword",a:[Y("password")]},updateProfile:{name:"updateProfile",a:[Z("profile")]}});ak(A.prototype,{f:{name:"catch"},then:{name:"then"}});bk(kg,"credential",function(a,b){return new hg(a,b)},[Y("email"),Y("password")]);ak($f.prototype,{addScope:{name:"addScope",a:[Y("scope")]},setCustomParameters:{name:"setCustomParameters",a:[Z("customOAuthParameters")]}});bk($f,"credential",ag,[Yj(Y(),Z(),"token")]);ak(bg.prototype,{addScope:{name:"addScope",a:[Y("scope")]},setCustomParameters:{name:"setCustomParameters",a:[Z("customOAuthParameters")]}});bk(bg,"credential",cg,[Yj(Y(),Z(),"token")]);ak(dg.prototype,{addScope:{name:"addScope",a:[Y("scope")]},setCustomParameters:{name:"setCustomParameters",a:[Z("customOAuthParameters")]}});bk(dg,"credential",eg,[Yj(Y(),Yj(Z(),Vj()),"idToken"),Yj(Y(),Vj(),"accessToken",!0)]);ak(fg.prototype,{setCustomParameters:{name:"setCustomParameters",a:[Z("customOAuthParameters")]}});bk(fg,"credential",gg,[Yj(Y(),Z(),"token"),Y("secret",!0)]);ak(O.prototype,{toJSON:{name:"toJSON",a:[Y(null,!0)]}});ak(tg.prototype,{toJSON:{name:"toJSON",a:[Y(null,!0)]}});ak(Rf.prototype,{toJSON:{name:"toJSON",a:[Y(null,!0)]}});(function(){if("undefined"!==typeof firebase&&firebase.INTERNAL&&firebase.INTERNAL.registerService){var a={Auth:W,Error:O};bk(a,"EmailAuthProvider",kg,[]);bk(a,"FacebookAuthProvider",$f,[]);bk(a,"GithubAuthProvider",bg,[]);bk(a,"GoogleAuthProvider",dg,[]);bk(a,"TwitterAuthProvider",fg,[]);firebase.INTERNAL.registerService("auth",function(a,c){a=new W(a);c({INTERNAL:{getUid:_q(a.getUid,a),getToken:_q(a.getToken,a),addAuthTokenListener:_q(a.Ae,a),removeAuthTokenListener:_q(a.uf,a)}});return a},a,function(a,c){if("create"===a)try{c.auth()}catch(d){}});firebase.INTERNAL.extendNamespace({User:U})}else throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.")})()}).call(this);</script><script>(function(){for(var h,aa="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)},l="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this,n=["Number","MIN_SAFE_INTEGER"],ba=0,ca;ba<n.length-1;ba++){ca=n[ba];ca in l||(l[ca]={});l=l[ca]}var da=n[n.length-1];-9007199254740991!=l[da]&&aa(l,da,{configurable:!0,writable:!0,value:-9007199254740991});var p=this,q=function(a){return void 0!==a},ea=function(a){var b=babelHelpers.typeof(a);if("object"==b){if(a){if(babelHelpers.instanceof(a,Array))return"array";if(babelHelpers.instanceof(a,Object))return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";}else if("function"==b&&"undefined"==typeof a.call)return"object";return b},r=function(a,b){this.code="storage/"+a;this.message="Firebase Storage: "+b;this.serverResponse=null;this.name="FirebaseError"};(function(){var a=Error;function b(){}b.prototype=a.prototype;r.b=a.prototype;r.prototype=new b;r.a=function(b,d){for(var c=Array(arguments.length-2),f=2;f<arguments.length;f++){c[f-2]=arguments[f]}return a.prototype[d].apply(b,c)}})();var fa=function(){return new r("unknown","An unknown error occurred, please check the error payload for server response.")},ga=function(){return new r("canceled","User canceled the upload/download.")},ha=function(){return new r("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")},ia=function(a,b,c){return new r("invalid-argument","Invalid argument in `"+b+"` at index "+a+": "+c)},ja=function(){return new r("app-deleted","The Firebase app was deleted.")},t=function(a,b){return new r("invalid-format","String does not match format '"+a+"': "+b)},u=function(a){throw new r("internal-error","Internal error: "+a)},v="https://firebasestorage.googleapis.com",ka=function(a){if("undefined"!==typeof firebase)return new firebase.Promise(a);throw Error("Error in Firebase Storage - be sure to load firebase-app.js first.")},la=function(a,b){return-1!==a.indexOf(b)},ma=function(a,b,c){function d(){C||(C=!0,b.apply(null,arguments))}function e(b){m=setTimeout(function(){m=null;a(g,2===y)},b)}function g(a){if(!C)if(a)d.apply(null,arguments);else if(2===y||z)d.apply(null,arguments);else{64>k&&(k*=2);var c;1===y?(y=2,c=0):c=1E3*(k+Math.random());e(c)}}function f(a){Pa||(Pa=!0,C||(null!==m?(a||(y=2),clearTimeout(m),e(0)):a||(y=1)))}var k=1,m=null,z=!1,y=0,C=!1,Pa=!1;e(0);setTimeout(function(){z=!0;f(!0)},c);return f},na=function(a,b){for(var c in a){Object.prototype.hasOwnProperty.call(a,c)&&b(c,a[c])}},oa=function(a){var b={};na(a,function(a,d){b[a]=d});return b},w=function(a,b,c,d){this.l=a;this.b={};this.method=b;this.headers={};this.body=null;this.m=c;this.c=this.a=null;this.f=[200];this.i=[];this.timeout=d;this.g=!0},pa=function(a){var b=encodeURIComponent,c="?";na(a,function(a,e){a=b(a)+"="+b(e);c=c+a+"&"});return c=c.slice(0,-1)},ra=function(a,b,c,d,e,g,f,k,m,z,y){this.F=a;this.D=b;this.A=c;this.u=d;this.B=e.slice();this.s=g.slice();this.m=this.o=this.c=this.b=null;this.g=this.i=!1;this.v=f;this.l=k;this.f=z;this.G=y;this.C=m;var C=this;this.w=ka(function(a,b){C.o=a;C.m=b;qa(C)})},sa=function(a,b,c){this.b=a;this.c=b;this.a=!!c},qa=function(a){function b(a,b){function c(a){d.f(a.loaded,a.lengthComputable?a.total:-1)}b?a(!1,new sa(!1,null,!0)):(b=new ta,b.h.withCredentials=d.G,d.b=b,null!==d.f&&q(b.h.upload)&&b.h.upload.addEventListener("progress",c),ua(b,d.F,d.D,d.u,d.A).then(function(b){null!==d.f&&q(b.h.upload)&&b.h.upload.removeEventListener("progress",c);d.b=null;var e=0===va(b),f=x(b);if(!(e=!e))var e=la([408,429],f),g=la(d.s,f),e=500<=f&&600>f||e||g;e?(b=2===va(b),a(!1,new sa(!1,null,b))):a(!0,new sa(la(d.B,f),b))}))}function c(a,b){var c=d.o;a=d.m;var e=b.c;if(b.b)try{var g=d.v(e,wa(e));q(g)?c(g):c()}catch(z){a(z)}else null!==e?(b=fa(),g=wa(e),b.serverResponse=g,d.l?a(d.l(e,b)):a(b)):(b=b.a?d.g?ja():ga():new r("retry-limit-exceeded","Max retry time for operation exceeded, please try again."),a(b))}var d=a;a.i?c(0,new sa(!1,null,!0)):a.c=ma(b,c,a.C)};ra.prototype.a=function(){return this.w};ra.prototype.cancel=function(a){this.i=!0;this.g=a||!1;null!==this.c&&(0,this.c)(!1);null!==this.b&&this.b.abort()};var xa=function(a,b,c){var d=pa(a.b),d=a.l+d,e=a.headers?oa(a.headers):{};null!==b&&0<b.length&&(e.Authorization="Firebase "+b);e["X-Firebase-Storage-Version"]="webjs/"+("undefined"!==typeof firebase?firebase.SDK_VERSION:"AppManager");return new ra(d,a.method,e,a.body,a.f,a.i,a.m,a.a,a.timeout,a.c,c)},ya=function(a){this.b=firebase.Promise.reject(a)};ya.prototype.a=function(){return this.b};ya.prototype.cancel=function(){};var A=function(a,b){this.bucket=a;this.path=b},za=function(a){var b=encodeURIComponent;return"/b/"+b(a.bucket)+"/o/"+b(a.path)},Ba=function(a){var b;try{b=Aa(a)}catch(c){return new A(a,"")}if(""===b.path)return b;throw new r("invalid-default-bucket","Invalid default bucket '"+a+"'.")},Aa=function(a){for(var b=null,c=[{M:/^gs:\/\/([A-Za-z0-9.\-]+)(\/(.*))?$/i,H:{bucket:1,path:3},L:function(a){"/"===a.path.charAt(a.path.length-1)&&(a.path=a.path.slice(0,-1))}},{M:/^https?:\/\/firebasestorage\.googleapis\.com\/v[A-Za-z0-9_]+\/b\/([A-Za-z0-9.\-]+)\/o(\/([^?#]*).*)?$/i,H:{bucket:1,path:3},L:function(a){a.path=decodeURIComponent(a.path)}}],d=0;d<c.length;d++){var e=c[d],g=e.M.exec(a);if(g){b=g[e.H.bucket];(g=g[e.H.path])||(g="");b=new A(b,g);e.L(b);break}}if(null==b)throw new r("invalid-url","Invalid URL '"+a+"'.");return b},Ca=function(){this.a={};this.b=Number.MIN_SAFE_INTEGER},Da=function(a,b){function c(){delete e.a[d]}var d=a.b;a.b++;a.a[d]=b;var e=a;b.a().then(c,c)},Ea=function(a){na(a.a,function(a,c){c&&c.cancel(!0)});a.a={}},B=function(a){return q(a)&&null!==a},Fa=function(a){return"string"===typeof a||babelHelpers.instanceof(a,String)},Ga=function(){return"undefined"!==typeof Blob},Ha=function(a,b,c,d,e){this.a=a;this.g=null;null!==this.a&&(a=this.a.options,B(a)&&(a=a.storageBucket||null,this.g=null==a?null:Ba(a).bucket));this.s=b;this.o=c;this.l=e;this.m=d;this.c=12E4;this.b=6E4;this.i=new Ca;this.f=!1},Ia=function(a){return null!==a.a&&B(a.a.INTERNAL)&&B(a.a.INTERNAL.getToken)?a.a.INTERNAL.getToken().then(function(a){return B(a)?a.accessToken:null},function(){return null}):firebase.Promise.resolve(null)};Ha.prototype.bucket=function(){if(this.f)throw ja();return this.g};var D=function(a,b,c){if(a.f)return new ya(ja());b=a.o(b,c,null===a.a,a.l);Da(a.i,b);return b},Ja=function(a,b){b=b.split("/").filter(function(a){return 0<a.length}).join("/");return 0===a.length?b:a+"/"+b},Ka=function(a){var b=a.lastIndexOf("/",a.length-2);return-1===b?a:a.slice(b+1)},La=function(a,b){return b},E=function(a,b,c,d){this.c=a;this.b=b||a;this.writable=!!c;this.a=d||La},Ma=null,Na=function(){if(Ma)return Ma;var a=[new E("bucket"),new E("generation"),new E("metageneration"),new E("name","fullPath",!0)],b=new E("name");b.a=function(a,b){return!Fa(b)||2>b.length?b:Ka(b)};a.push(b);b=new E("size");b.a=function(a,b){return B(b)?+b:b};a.push(b);a.push(new E("timeCreated"));a.push(new E("updated"));a.push(new E("md5Hash",null,!0));a.push(new E("cacheControl",null,!0));a.push(new E("contentDisposition",null,!0));a.push(new E("contentEncoding",null,!0));a.push(new E("contentLanguage",null,!0));a.push(new E("contentType",null,!0));a.push(new E("metadata","customMetadata",!0));a.push(new E("downloadTokens","downloadURLs",!1,function(a,b){if(!(Fa(b)&&0<b.length))return[];var c=encodeURIComponent;return b.split(",").map(function(b){var d=a.fullPath,d="https://firebasestorage.googleapis.com/v0"+("/b/"+c(a.bucket)+"/o/"+c(d));b=pa({alt:"media",token:b});return d+b})}));return Ma=a},Oa=function(a,b){Object.defineProperty(a,"ref",{get:function get(){return b.s(b,new A(a.bucket,a.fullPath))}})},Qa=function(a,b){for(var c={},d=b.length,e=0,g;e<d;e++){g=b[e];g.writable&&(c[g.c]=a[g.b])}return JSON.stringify(c)},Ra=function(a){if(!a||"object"!==babelHelpers.typeof(a))throw"Expected Metadata object.";for(var b in a){var c=a[b];if("customMetadata"===b){if("object"!==babelHelpers.typeof(c))throw"Expected object for 'customMetadata' mapping."}else if(null!=c&&"object"===babelHelpers.typeof(c))throw"Mapping for '"+b+"' cannot be an object."}},F=function(a,b,c){for(var d=b.length,e=b.length,g=0;g<b.length;g++){if(b[g].b){d=g;break}}if(!(d<=c.length&&c.length<=e))throw d===e?(b=d,d=1===d?"argument":"arguments"):(b="between "+d+" and "+e,d="arguments"),new r("invalid-argument-count","Invalid argument count in `"+a+"`: Expected "+b+" "+d+", received "+c.length+".");for(g=0;g<c.length;g++){try{b[g].a(c[g])}catch(f){if(babelHelpers.instanceof(f,Error))throw ia(g,a,f.message);throw ia(g,a,f)}}},G=function(a,b){var c=this;this.a=function(b){c.b&&!q(b)||a(b)};this.b=!!b},Sa=function(a,b){return function(c){a(c);b(c)}},H=function(a,b){function c(a){if(!("string"===typeof a||babelHelpers.instanceof(a,String)))throw"Expected string."}var d;a?d=Sa(c,a):d=c;return new G(d,b)},Ta=function(){return new G(function(a){if(!(babelHelpers.instanceof(a,Uint8Array)||babelHelpers.instanceof(a,ArrayBuffer)||Ga()&&babelHelpers.instanceof(a,Blob)))throw"Expected Blob or File."})},Ua=function(){return new G(function(a){if(!(("number"===typeof a||babelHelpers.instanceof(a,Number))&&0<=a))throw"Expected a number 0 or greater."})},Va=function(a,b){return new G(function(b){if(!(null===b||B(b)&&babelHelpers.instanceof(b,Object)))throw"Expected an Object.";B(a)&&a(b)},b)},I=function(){return new G(function(a){if(null!==a&&"function"!=ea(a))throw"Expected a Function."},!0)},J=function(a){return function(){var b=[];Array.prototype.push.apply(b,arguments);firebase.Promise.resolve(!0).then(function(){a.apply(null,b)})}},Wa=String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},Xa=function(a,b){return a<b?-1:a>b?1:0},K;a:{var Ya=p.navigator;if(Ya){var Za=Ya.userAgent;if(Za){K=Za;break a}}K=""}var ab=function(a,b){var c=$a;return Object.prototype.hasOwnProperty.call(c,a)?c[a]:c[a]=b(a)},bb=-1!=K.indexOf("Opera"),cb=-1!=K.indexOf("Trident")||-1!=K.indexOf("MSIE"),db=-1!=K.indexOf("Edge"),eb=-1!=K.indexOf("Gecko")&&!(-1!=K.toLowerCase().indexOf("webkit")&&-1==K.indexOf("Edge"))&&!(-1!=K.indexOf("Trident")||-1!=K.indexOf("MSIE"))&&-1==K.indexOf("Edge"),fb=-1!=K.toLowerCase().indexOf("webkit")&&-1==K.indexOf("Edge"),gb;a:{var hb="",ib=function(){var a=K;if(eb)return /rv\:([^\);]+)(\)|;)/.exec(a);if(db)return /Edge\/([\d\.]+)/.exec(a);if(cb)return /\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(fb)return /WebKit\/(\S+)/.exec(a);if(bb)return /(?:Version)[ \/]?(\S+)/.exec(a)}();ib&&(hb=ib?ib[1]:"");if(cb){var jb,kb=p.document;jb=kb?kb.documentMode:void 0;if(null!=jb&&jb>parseFloat(hb)){gb=jb+"";break a}}gb=hb}var lb=gb,$a={},mb=function(a){return ab(a,function(){for(var b=0,c=Wa(lb+"").split("."),d=Wa(a+"").split("."),e=Math.max(c.length,d.length),g=0;0==b&&g<e;g++){var f=c[g]||"",k=d[g]||"";do{f=/(\d*)(\D*)(.*)/.exec(f)||["","","",""];k=/(\d*)(\D*)(.*)/.exec(k)||["","","",""];if(0==f[0].length&&0==k[0].length)break;b=Xa(0==f[1].length?0:parseInt(f[1],10),0==k[1].length?0:parseInt(k[1],10))||Xa(0==f[2].length,0==k[2].length)||Xa(f[2],k[2]);f=f[3];k=k[3]}while(0==b)}return 0<=b})},nb=function(){var b=p.BlobBuilder||p.WebKitBlobBuilder;if(q(b)){for(var b=new b,c=0;c<arguments.length;c++){b.append(arguments[c])}return b.getBlob()}b=Array.prototype.slice.call(arguments);c=p.BlobBuilder||p.WebKitBlobBuilder;if(q(c)){for(var c=new c,d=0;d<b.length;d++){c.append(b[d],void 0)}b=c.getBlob(void 0)}else if(q(p.Blob))b=new Blob(b,{});else throw Error("This browser doesn't seem to support creating Blobs");return b},ob=function(a,b,c){q(c)||(c=a.size);return a.webkitSlice?a.webkitSlice(b,c):a.mozSlice?a.mozSlice(b,c):a.slice?eb&&!mb("13.0")||fb&&!mb("537.1")?(0>b&&(b+=a.size),0>b&&(b=0),0>c&&(c+=a.size),c<b&&(c=b),a.slice(b,c-b)):a.slice(b,c):null},L={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},pb=function(a){switch(a){case"raw":case"base64":case"base64url":case"data_url":break;default:throw"Expected one of the event types: [raw, base64, base64url, data_url].";}},qb=function(a,b){this.data=a;this.a=b||null},ub=function(a,b){switch(a){case"raw":return new qb(rb(b));case"base64":case"base64url":return new qb(sb(a,b));case"data_url":a=new tb(b);var c;if(a.a)c=sb("base64",a.c);else{try{c=decodeURIComponent(a.c)}catch(d){throw t("data_url","Malformed data URL.")}c=rb(c)}return new qb(c,new tb(b).b);}throw fa()},rb=function(a){for(var b=[],c=0,d;c<a.length;c++){d=a.charCodeAt(c);if(127>=d)b.push(d);else if(2047>=d)b.push(192|d>>6,128|63&d);else if(55296==(64512&d)){if(c<a.length-1&&56320==(64512&a.charCodeAt(c+1))){var e=a.charCodeAt(++c),d=65536|(1023&d)<<10|1023&e;b.push(240|d>>18,128|63&d>>12,128|63&d>>6,128|63&d)}else b.push(239,191,189);}else 56320==(64512&d)?b.push(239,191,189):b.push(224|d>>12,128|63&d>>6,128|63&d)}return new Uint8Array(b)},sb=function(a,b){switch(a){case"base64":var c=-1!==b.indexOf("-"),d=-1!==b.indexOf("_");if(c||d)throw t(a,"Invalid character '"+(c?"-":"_")+"' found: is it base64url encoded?");break;case"base64url":c=-1!==b.indexOf("+");d=-1!==b.indexOf("/");if(c||d)throw t(a,"Invalid character '"+(c?"+":"/")+"' found: is it base64 encoded?");b=b.replace(/-/g,"+").replace(/_/g,"/");}var e;try{e=atob(b)}catch(g){throw t(a,"Invalid character found")}a=new Uint8Array(e.length);for(b=0;b<e.length;b++){a[b]=e.charCodeAt(b)}return a},tb=function(a){var b=a.match(/^data:([^,]+)?,/);if(null===b)throw t("data_url","Must be formatted 'data:[<mediatype>][;base64],<data>");b=b[1]||null;this.a=!1;this.b=null;if(null!=b){var c=b.length-7;this.b=(this.a=0<=c&&b.indexOf(";base64",c)==c)?b.substring(0,b.length-7):b}this.c=a.substring(a.indexOf(",")+1)},M=function(a,b){Ga()&&babelHelpers.instanceof(a,Blob)?(this.j=a,b=a.size,a=a.type):(babelHelpers.instanceof(a,ArrayBuffer)?(b?this.j=new Uint8Array(a):(this.j=new Uint8Array(a.byteLength),this.j.set(new Uint8Array(a))),b=this.j.length):(b?this.j=a:(this.j=new Uint8Array(a.length),this.j.set(a)),b=a.length),a="");this.a=b;this.b=a};M.prototype.type=function(){return this.b};M.prototype.slice=function(a,b){if(Ga()&&babelHelpers.instanceof(this.j,Blob))return a=ob(this.j,a,b),null===a?null:new M(a);a=new Uint8Array(this.j.buffer,a,b-a);return new M(a,!0)};var vb=function(){var b=[];Array.prototype.push.apply(b,arguments);if(Ga())return b=b.map(function(a){return babelHelpers.instanceof(a,M)?a.j:a}),new M(nb.apply(null,b));var b=b.map(function(a){return Fa(a)?ub("raw",a).data:a.j}),c=0;b.forEach(function(a){c+=a.byteLength});var d=new Uint8Array(c),e=0;b.forEach(function(a){for(var b=0;b<a.length;b++){d[e++]=a[b]}});return new M(d,!0)},wb=function(a,b,c){"function"==ea(a)||B(b)||B(c)?(this.b=a,this.error=b||null,this.a=c||null):(this.b=a.next||null,this.error=a.error||null,this.a=a.complete||null)},N=function(a){if(!a)throw fa()},xb=function(a,b){return function(c,d){var e;a:{try{e=JSON.parse(d)}catch(k){e=null;break a}c=babelHelpers.typeof(e);e="object"==c&&null!=e||"function"==c?e:null}if(null===e)e=null;else{c={type:"file"};d=b.length;for(var g=0,f;g<d;g++){f=b[g];c[f.b]=f.a(c,e[f.c])}Oa(c,a);e=c}N(null!==e);return e}},O=function(a){return function(b,c){b=401===x(b)?new r("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===x(b)?new r("quota-exceeded","Quota for bucket '"+a.bucket+"' exceeded, please view quota on https://firebase.google.com/pricing/."):403===x(b)?new r("unauthorized","User does not have permission to access '"+a.path+"'."):c;b.serverResponse=c.serverResponse;return b}},yb=function(a){var b=O(a);return function(c,d){var e=b(c,d);404===x(c)&&(e=new r("object-not-found","Object '"+a.path+"' does not exist."));e.serverResponse=d.serverResponse;return e}},zb=function(a,b,c){var d=za(b);a=new w(v+"/v0"+d,"GET",xb(a,c),a.c);a.a=yb(b);return a},Ab=function(a,b){var c=za(b);a=new w(v+"/v0"+c,"DELETE",function(){},a.c);a.f=[200,204];a.a=yb(b);return a},Bb=function(a,b,c){c=c?oa(c):{};c.fullPath=a.path;c.size=b.a;c.contentType||(a=b&&b.type()||"application/octet-stream",c.contentType=a);return c},Cb=function(a,b,c,d,e){var g="/b/"+encodeURIComponent(b.bucket)+"/o",f={"X-Goog-Upload-Protocol":"multipart"},k;k="";for(var m=0;2>m;m++){k+=Math.random().toString().slice(2)}f["Content-Type"]="multipart/related; boundary="+k;e=Bb(b,d,e);m=Qa(e,c);d=vb("--"+k+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+m+"\r\n--"+k+"\r\nContent-Type: "+e.contentType+"\r\n\r\n",d,"\r\n--"+k+"--");if(null===d)throw ha();a=new w(v+"/v0"+g,"POST",xb(a,c),a.b);a.b={name:e.fullPath};a.headers=f;a.body=d.j;a.a=O(b);return a},Db=function(a,b,c,d){this.current=a;this.total=b;this.I=!!c;this.metadata=d||null},Eb=function(a,b){var c;try{c=a.h.getResponseHeader("X-Goog-Upload-Status")}catch(d){N(!1)}N(la(b||["active"],c));return c},Fb=function(a,b,c,d,e){var g="/b/"+encodeURIComponent(b.bucket)+"/o",f=Bb(b,d,e);e={name:f.fullPath};g=v+"/v0"+g;d={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":d.a,"X-Goog-Upload-Header-Content-Type":f.contentType,"Content-Type":"application/json; charset=utf-8"};c=Qa(f,c);a=new w(g,"POST",function(a){Eb(a);var b;try{b=a.h.getResponseHeader("X-Goog-Upload-URL")}catch(z){N(!1)}N(Fa(b));return b},a.b);a.b=e;a.headers=d;a.body=c;a.a=O(b);return a},Gb=function(a,b,c,d){a=new w(c,"POST",function(a){var b=Eb(a,["active","final"]),c;try{c=a.h.getResponseHeader("X-Goog-Upload-Size-Received")}catch(k){N(!1)}a=c;isFinite(a)&&(a=a+"");a="string"==typeof a?/^\s*-?0x/i.test(a)?parseInt(a,16):parseInt(a,10):NaN;N(!isNaN(a));return new Db(a,d.a,"final"===b)},a.b);a.headers={"X-Goog-Upload-Command":"query"};a.a=O(b);a.g=!1;return a},Hb=function(a,b,c,d,e,g,f,k){var m=new Db(0,0);f?(m.current=f.current,m.total=f.total):(m.current=0,m.total=d.a);if(d.a!==m.total)throw new r("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var z=f=m.total-m.current;0<e&&(z=Math.min(z,e));var y=m.current;e={"X-Goog-Upload-Command":z===f?"upload, finalize":"upload","X-Goog-Upload-Offset":m.current};f=d.slice(y,y+z);if(null===f)throw ha();c=new w(c,"POST",function(a,c){var e=Eb(a,["active","final"]),f=m.current+z,k=d.a,y;"final"===e?y=xb(b,g)(a,c):y=null;return new Db(f,k,"final"===e,y)},b.b);c.headers=e;c.body=f.j;c.c=k||null;c.a=O(a);c.g=!1;return c},Ib={STATE_CHANGED:"state_changed"},P={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"},Jb=function(a){switch(a){case"running":case"pausing":case"canceling":return"running";case"paused":return"paused";case"success":return"success";case"canceled":return"canceled";case"error":return"error";default:return"error";}},ta=function(){var a=this;this.h=new XMLHttpRequest;this.b=0;this.c=ka(function(b){a.h.addEventListener("abort",function(){a.b=2;b(a)});a.h.addEventListener("error",function(){a.b=1;b(a)});a.h.addEventListener("load",function(){b(a)})});this.a=!1},ua=function(a,b,c,d,e){if(a.a)throw u("cannot .send() more than once");a.a=!0;a.h.open(c,b,!0);B(e)&&na(e,function(b,c){a.h.setRequestHeader(b,c.toString())});B(d)?a.h.send(d):a.h.send();return a.c},va=function(a){if(!a.a)throw u("cannot .getErrorCode() before sending");return a.b},x=function(a){if(!a.a)throw u("cannot .getStatus() before sending");try{return a.h.status}catch(b){return-1}},wa=function(a){if(!a.a)throw u("cannot .getResponseText() before sending");return a.h.responseText};ta.prototype.abort=function(){this.h.abort()};var Kb=function(){},Q=function(a,b,c,d,e,g){this.b=a;this.i=b;this.f=c;this.a=d;this.g=e;this.c=g};h=Q.prototype;h.X=function(){return this.b};h.sa=function(){return this.i};h.pa=function(){return this.f};h.ka=function(){return this.a};h.Y=function(){if(B(this.a)){var a=this.a.downloadURLs;return B(a)&&B(a[0])?a[0]:null}return null};h.ra=function(){return this.g};h.na=function(){return this.c};var T=function(a,b,c,d,e,g){var f=this;this.O=a;this.c=b;this.o=c;this.f=e;this.i=void 0===g?null:g;this.u=d;this.l=0;this.G=this.w=!1;this.B=[];this.U=262144<this.f.a;this.b="running";this.a=this.A=this.g=null;this.m=1;this.s=function(a){f.a=null;f.m=1;"storage/canceled"===a.code?(f.w=!0,R(f)):(f.g=a,S(f,"error"))};this.N=function(a){f.a=null;"storage/canceled"===a.code?R(f):(f.g=a,S(f,"error"))};this.D=this.v=null;this.F=ka(function(a,b){f.v=a;f.D=b;Lb(f)});this.F.then(null,function(){})},Nb=function(a){var b=a.l;return function(c){Mb(a,b+c)}},Lb=function(a){"running"===a.b&&null===a.a&&(a.U?null===a.A?Ob(a):a.w?Pb(a):a.G?Qb(a):Rb(a):Sb(a))},U=function(a,b){Ia(a.c).then(function(c){switch(a.b){case"running":b(c);break;case"canceling":S(a,"canceled");break;case"pausing":S(a,"paused");}})},Ob=function(a){U(a,function(b){var c=Fb(a.c,a.o,a.u,a.f,a.i);a.a=D(a.c,c,b);a.a.a().then(function(b){a.a=null;a.A=b;a.w=!1;R(a)},a.s)})},Pb=function(a){var b=a.A;U(a,function(c){var d=Gb(a.c,a.o,b,a.f);a.a=D(a.c,d,c);a.a.a().then(function(b){a.a=null;Mb(a,b.current);a.w=!1;b.I&&(a.G=!0);R(a)},a.s)})},Rb=function(a){var b=262144*a.m,c=new Db(a.l,a.f.a),d=a.A;U(a,function(e){var g;try{g=Hb(a.o,a.c,d,a.f,b,a.u,c,Nb(a))}catch(f){a.g=f;S(a,"error");return}a.a=D(a.c,g,e);a.a.a().then(function(b){33554432>262144*a.m&&(a.m*=2);a.a=null;Mb(a,b.current);b.I?(a.i=b.metadata,S(a,"success")):R(a)},a.s)})},Qb=function(a){U(a,function(b){var c=zb(a.c,a.o,a.u);a.a=D(a.c,c,b);a.a.a().then(function(b){a.a=null;a.i=b;S(a,"success")},a.N)})},Sb=function(a){U(a,function(b){var c=Cb(a.c,a.o,a.u,a.f,a.i);a.a=D(a.c,c,b);a.a.a().then(function(b){a.a=null;a.i=b;Mb(a,a.f.a);S(a,"success")},a.s)})},Mb=function(a,b){var c=a.l;a.l=b;a.l!==c&&V(a)},S=function(a,b){if(a.b!==b)switch(b){case"canceling":a.b=b;null!==a.a&&a.a.cancel();break;case"pausing":a.b=b;null!==a.a&&a.a.cancel();break;case"running":var c="paused"===a.b;a.b=b;c&&(V(a),Lb(a));break;case"paused":a.b=b;V(a);break;case"canceled":a.g=ga();a.b=b;V(a);break;case"error":a.b=b;V(a);break;case"success":a.b=b,V(a);}},R=function(a){switch(a.b){case"pausing":S(a,"paused");break;case"canceling":S(a,"canceled");break;case"running":Lb(a);}};T.prototype.C=function(){return new Q(this.l,this.f.a,Jb(this.b),this.i,this,this.O)};T.prototype.P=function(a,b,c,d){function e(a){try{f(a);return}catch(C){}try{if(k(a),!(q(a.next)||q(a.error)||q(a.complete)))throw""}catch(C){throw"Expected a function or an Object with one of `next`, `error`, `complete` properties."}}function g(a){return function(b,c,d){null!==a&&F("on",a,arguments);var e=new wb(b,c,d);m.B.push(e);Tb(m,e);return function(){var a=m.B,b=a.indexOf(e);-1!==b&&a.splice(b,1)}}}var f=I().a,k=Va(null,!0).a;F("on",[H(function(){if("state_changed"!==a)throw"Expected one of the event types: [state_changed]."}),Va(e,!0),I(),I()],arguments);var m=this,z=[Va(function(a){if(null===a)throw"Expected a function or an Object with one of `next`, `error`, `complete` properties.";e(a)}),I(),I()];return q(b)||q(c)||q(d)?g(null)(b,c,d):g(z)};T.prototype.then=function(a,b){return this.F.then(void 0===a?null:a,void 0===b?null:b)};T.prototype["catch"]=function(a){return this.then(null,a)};var V=function(a){Ub(a);Array.prototype.slice.call(a.B).forEach(function(b){Tb(a,b)})},Ub=function(a){if(null!==a.v){var b=!0;switch(Jb(a.b)){case"success":J(a.v.bind(null,a.C()))();break;case"canceled":case"error":J(a.D.bind(null,a.g))();break;default:b=!1;}b&&(a.v=null,a.D=null)}},Tb=function(a,b){switch(Jb(a.b)){case"running":case"paused":null!==b.b&&J(b.b.bind(b,a.C()))();break;case"success":null!==b.a&&J(b.a.bind(b))();break;case"canceled":case"error":null!==b.error&&J(b.error.bind(b,a.g))();break;default:null!==b.error&&J(b.error.bind(b,a.g))();}};T.prototype.T=function(){F("resume",[],arguments);var a="paused"===this.b||"pausing"===this.b;a&&S(this,"running");return a};T.prototype.R=function(){F("pause",[],arguments);var a="running"===this.b;a&&S(this,"pausing");return a};T.prototype.cancel=function(){F("cancel",[],arguments);var a="running"===this.b||"pausing"===this.b;a&&S(this,"canceling");return a};var W=function(a,b){this.a=a;this.location=babelHelpers.instanceof(b,A)?b:Aa(b)};W.prototype.toString=function(){F("toString",[],arguments);return"gs://"+this.location.bucket+"/"+this.location.path};var Vb=function(a,b){return new W(a,b)};h=W.prototype;h.J=function(a){F("child",[H()],arguments);var b=Ja(this.location.path,a);return Vb(this.a,new A(this.location.bucket,b))};h.ma=function(){var a=this.location.path;if(0==a.length)a=null;else{var b=a.lastIndexOf("/");a=-1===b?"":a.slice(0,b)}return null===a?null:Vb(this.a,new A(this.location.bucket,a))};h.oa=function(){return Vb(this.a,new A(this.location.bucket,""))};h.W=function(){return this.location.bucket};h.ha=function(){return this.location.path};h.la=function(){return Ka(this.location.path)};h.qa=function(){return this.a.m};h.aa=function(a,b){F("put",[Ta(),new G(Ra,!0)],arguments);X(this,"put");return new T(this,this.a,this.location,Na(),new M(a),b)};h.ba=function(a,b,c){F("putString",[H(),H(pb,!0),new G(Ra,!0)],arguments);X(this,"putString");var d=ub(B(b)?b:"raw",a),e=c?oa(c):{};!B(e.contentType)&&B(d.a)&&(e.contentType=d.a);return new T(this,this.a,this.location,Na(),new M(d.data,!0),e)};h.Z=function(){F("delete",[],arguments);X(this,"delete");var a=this;return Ia(this.a).then(function(b){var c=Ab(a.a,a.location);return D(a.a,c,b).a()})};h.K=function(){F("getMetadata",[],arguments);X(this,"getMetadata");var a=this;return Ia(this.a).then(function(b){var c=zb(a.a,a.location,Na());return D(a.a,c,b).a()})};h.ca=function(a){F("updateMetadata",[new G(Ra,void 0)],arguments);X(this,"updateMetadata");var b=this;return Ia(this.a).then(function(c){var d=b.a,e=b.location,g=a,f=Na(),k=za(e),k=v+"/v0"+k,g=Qa(g,f),d=new w(k,"PATCH",xb(d,f),d.c);d.headers={"Content-Type":"application/json; charset=utf-8"};d.body=g;d.a=yb(e);return D(b.a,d,c).a()})};h.$=function(){F("getDownloadURL",[],arguments);X(this,"getDownloadURL");return this.K().then(function(a){a=a.downloadURLs[0];if(B(a))return a;throw new r("no-download-url","The given file does not have any download URLs.")})};var X=function(a,b){if(""===a.location.path)throw new r("invalid-root-operation","The operation '"+b+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")},Y=function(a,b,c){this.a=new Ha(a,function(a,b){return new W(a,b)},xa,this,b);this.c=a;q(c)?this.b=Ba(c):null!=this.a.bucket()&&(this.b=new A(this.a.bucket(),""));this.f=new Wb(this)};h=Y.prototype;h.da=function(a){F("ref",[H(function(a){if(/^[A-Za-z]+:\/\//.test(a))throw"Expected child path but got a URL, use refFromURL instead."},!0)],arguments);if(null===this.b)throw Error("No Storage Bucket defined in Firebase Options.");var b=new W(this.a,this.b);return q(a)?b.J(a):b};h.ea=function(a){F("refFromURL",[H(function(a){if(!/^[A-Za-z]+:\/\//.test(a))throw"Expected full URL but got a child path, use ref instead.";try{Aa(a)}catch(c){throw"Expected valid full URL but got an invalid one."}},!1)],arguments);return new W(this.a,a)};h.ja=function(){return this.a.b};h.ga=function(a){F("setMaxUploadRetryTime",[Ua()],arguments);this.a.b=a};h.ia=function(){return this.a.c};h.fa=function(a){F("setMaxOperationRetryTime",[Ua()],arguments);this.a.c=a};h.V=function(){return this.c};h.S=function(){return this.f};var Wb=function(a){this.a=a};Wb.prototype.b=function(){var a=this.a.a;a.f=!0;a.a=null;Ea(a.i)};var Z=function(a,b,c){Object.defineProperty(a,b,{get:c})};W.prototype.toString=W.prototype.toString;W.prototype.child=W.prototype.J;W.prototype.put=W.prototype.aa;W.prototype.putString=W.prototype.ba;W.prototype["delete"]=W.prototype.Z;W.prototype.getMetadata=W.prototype.K;W.prototype.updateMetadata=W.prototype.ca;W.prototype.getDownloadURL=W.prototype.$;Z(W.prototype,"parent",W.prototype.ma);Z(W.prototype,"root",W.prototype.oa);Z(W.prototype,"bucket",W.prototype.W);Z(W.prototype,"fullPath",W.prototype.ha);Z(W.prototype,"name",W.prototype.la);Z(W.prototype,"storage",W.prototype.qa);Y.prototype.ref=Y.prototype.da;Y.prototype.refFromURL=Y.prototype.ea;Z(Y.prototype,"maxOperationRetryTime",Y.prototype.ia);Y.prototype.setMaxOperationRetryTime=Y.prototype.fa;Z(Y.prototype,"maxUploadRetryTime",Y.prototype.ja);Y.prototype.setMaxUploadRetryTime=Y.prototype.ga;Z(Y.prototype,"app",Y.prototype.V);Z(Y.prototype,"INTERNAL",Y.prototype.S);Wb.prototype["delete"]=Wb.prototype.b;Y.prototype.capi_=function(a){v=a};T.prototype.on=T.prototype.P;T.prototype.resume=T.prototype.T;T.prototype.pause=T.prototype.R;T.prototype.cancel=T.prototype.cancel;T.prototype.then=T.prototype.then;T.prototype["catch"]=T.prototype["catch"];Z(T.prototype,"snapshot",T.prototype.C);Z(Q.prototype,"bytesTransferred",Q.prototype.X);Z(Q.prototype,"totalBytes",Q.prototype.sa);Z(Q.prototype,"state",Q.prototype.pa);Z(Q.prototype,"metadata",Q.prototype.ka);Z(Q.prototype,"downloadURL",Q.prototype.Y);Z(Q.prototype,"task",Q.prototype.ra);Z(Q.prototype,"ref",Q.prototype.na);Ib.STATE_CHANGED="state_changed";P.RUNNING="running";P.PAUSED="paused";P.SUCCESS="success";P.CANCELED="canceled";P.ERROR="error";L.RAW="raw";L.BASE64="base64";L.BASE64URL="base64url";L.DATA_URL="data_url";(function(){function a(a,b,e){return new Y(a,new Kb(),e)}if("undefined"!==typeof firebase)firebase.INTERNAL.registerService("storage",a,{TaskState:P,TaskEvent:Ib,StringFormat:L,Storage:Y,Reference:W},void 0,!0);else throw Error("Cannot install Firebase Storage - be sure to load firebase-app.js first.")})()}).call(this);</script><script>(function(){var f=function(a,b){function c(){}c.prototype=b.prototype;a.u=b.prototype;a.prototype=new c;for(var d in b){if(Object.defineProperties){var e=Object.getOwnPropertyDescriptor(b,d);e&&Object.defineProperty(a,d,e)}else a[d]=b[d]}},g=this,h=function(a){var b=babelHelpers.typeof(a);if("object"==b){if(a){if(babelHelpers.instanceof(a,Array))return"array";if(babelHelpers.instanceof(a,Object))return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";}else if("function"==b&&"undefined"==typeof a.call)return"object";return b},k=function(a,b){function c(){}c.prototype=b.prototype;a.u=b.prototype;a.prototype=new c;a.v=function(a,c){for(var d=Array(arguments.length-2),e=2;e<arguments.length;e++){d[e-2]=arguments[e]}return b.prototype[c].apply(a,d)}},m=function(a){if(Error.captureStackTrace)Error.captureStackTrace(this,m);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=a+"")};k(m,Error);var p=function(a){for(var c=a.split("%s"),d="",e=Array.prototype.slice.call(arguments,1);e.length&&1<c.length;){d+=c.shift()+e.shift()}return d+c.join("%s")},q=function(a,b){b.unshift(a);m.call(this,p.apply(null,b));b.shift()};k(q,m);var r=function(a,b){if(!a){var d="Assertion failed";if(b)var d=d+(": "+b),e=Array.prototype.slice.call(arguments,2);throw new q(""+d,e||[])}},t=null,v=function(a){a=new Uint8Array(a);var b=h(a);r("array"==b||"object"==b&&"number"==typeof a.length,"encodeByteArray takes an array as a parameter");if(!t)for(t={},b=0;65>b;b++){t[b]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(b)}for(var b=t,c=[],d=0;d<a.length;d+=3){var e=a[d],n=d+1<a.length,l=n?a[d+1]:0,z=d+2<a.length,u=z?a[d+2]:0,M=e>>2,e=(3&e)<<4|l>>4,l=(15&l)<<2|u>>6,u=63&u;z||(u=64,n||(l=64));c.push(b[M],b[e],b[l],b[u])}return c.join("").replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")},w={},x=(w["only-available-in-window"]="This method is available in a Window context.",w["only-available-in-sw"]="This method is available in a service worker context.",w["should-be-overriden"]="This method should be overriden by extended classes.",w["bad-sender-id"]="Please ensure that 'messagingSenderId' is set correctly in the options passed into firebase.initializeApp().",w["permission-default"]="The required permissions were not granted and dismissed instead.",w["permission-blocked"]="The required permissions were not granted and blocked instead.",w["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",w["notifications-blocked"]="Notifications have been blocked.",w["failed-serviceworker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",w["sw-registration-expected"]="A service worker registration was the expected input.",w["get-subscription-failed"]="There was an error when trying to get any existing Push Subscriptions.",w["invalid-saved-token"]="Unable to access details of the saved token.",w["sw-reg-redundant"]="The service worker being used for push was made redundant.",w["token-subscribe-failed"]="A problem occured while subscribing the user to FCM: {$message}",w["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",w["token-subscribe-no-push-set"]="FCM returned an invalid response when getting an FCM token.",w["use-sw-before-get-token"]="You must call useServiceWorker() before calling getToken() to ensure your service worker is used.",w["invalid-delete-token"]="You must pass a valid token into deleteToken(), i.e. the token from getToken().",w["delete-token-not-found"]="The deletion attempt for token could not be performed as the token was not found.",w["delete-scope-not-found"]="The deletion attempt for service worker scope could not be performed as the scope was not found.",w["bg-handler-function-expected"]="The input to setBackgroundMessageHandler() must be a function.",w["no-window-client-to-msg"]="An attempt was made to message a non-existant window client.",w["unable-to-resubscribe"]="There was an error while re-subscribing the FCM token for push messaging. Will have to resubscribe the user on next visit. {$message}",w["no-fcm-token-for-resubscribe"]="Could not find an FCM token and as a result, unable to resubscribe. Will have to resubscribe the user on next visit.",w["failed-to-delete-token"]="Unable to delete the currently saved token.",w["no-sw-in-reg"]="Even though the service worker registration was successful, there was a problem accessing the service worker itself.",w["incorrect-gcm-sender-id"]="Please change your web app manifest's 'gcm_sender_id' value to '103953800507' to use Firebase messaging.",w["bad-scope"]="The service worker scope must be a string with at least one character.",w["bad-vapid-key"]="The public VAPID key must be a string with at least one character.",w["bad-subscription"]="The subscription must be a valid PushSubscription.",w["bad-token"]="The FCM Token used for storage / lookup was not a valid token string.",w["bad-push-set"]="The FCM push set used for storage / lookup was not not a valid push set string.",w["failed-delete-vapid-key"]="The VAPID key could not be deleted.",w),y={userVisibleOnly:!0,applicationServerKey:new Uint8Array([4,51,148,247,223,161,235,177,220,3,162,94,21,113,219,72,211,46,237,237,178,52,219,183,71,58,12,143,196,204,225,111,60,140,132,223,171,182,102,62,242,12,212,139,254,227,249,118,47,20,28,99,8,106,111,45,177,26,149,176,206,55,192,156,110])},A=new firebase.INTERNAL.ErrorFactory("messaging","Messaging",x),B=function(){this.a=null},C=function(a){if(a.a)return a.a;a.a=new Promise(function(a,c){var b=g.indexedDB.open("fcm_token_details_db",1);b.onerror=function(a){c(a.target.error)};b.onsuccess=function(b){a(b.target.result)};b.onupgradeneeded=function(a){a=a.target.result.createObjectStore("fcm_token_object_Store",{keyPath:"swScope"});a.createIndex("fcmSenderId","fcmSenderId",{unique:!1});a.createIndex("fcmToken","fcmToken",{unique:!0})}});return a.a},D=function(a){a.a?a.a.then(function(b){b.close();a.a=null}):Promise.resolve()},E=function(a,b){return C(a).then(function(a){return new Promise(function(c,e){var d=a.transaction(["fcm_token_object_Store"]).objectStore("fcm_token_object_Store").index("fcmToken").get(b);d.onerror=function(a){e(a.target.error)};d.onsuccess=function(a){c(a.target.result)}})})},F=function(a,b){return C(a).then(function(a){return new Promise(function(c,e){var d=[],l=a.transaction(["fcm_token_object_Store"]).objectStore("fcm_token_object_Store").openCursor();l.onerror=function(a){e(a.target.error)};l.onsuccess=function(a){(a=a.target.result)?(a.value.fcmSenderId===b&&d.push(a.value),a.continue()):c(d)}})})},G=function(a,b,c){var d=v(b.getKey("p256dh")),e=v(b.getKey("auth"));a="authorized_entity="+a+"&"+("endpoint="+b.endpoint+"&")+("encryption_key="+d+"&")+("encryption_auth="+e);c&&(a+="&pushSet="+c);c=new Headers;c.append("Content-Type","application/x-www-form-urlencoded");return fetch("https://fcm.googleapis.com/fcm/connect/subscribe",{method:"POST",headers:c,body:a}).then(function(a){return a.json()}).then(function(a){if(a.error)throw A.create("token-subscribe-failed",{message:a.error.message});if(!a.token)throw A.create("token-subscribe-no-token");if(!a.pushSet)throw A.create("token-subscribe-no-push-set");return{token:a.token,pushSet:a.pushSet}})},H=function(a,b,c,d,e,n){var l={swScope:c.scope,endpoint:d.endpoint,auth:v(d.getKey("auth")),p256dh:v(d.getKey("p256dh")),fcmToken:e,fcmPushSet:n,fcmSenderId:b};return C(a).then(function(a){return new Promise(function(b,c){var d=a.transaction(["fcm_token_object_Store"],"readwrite").objectStore("fcm_token_object_Store").put(l);d.onerror=function(a){c(a.target.error)};d.onsuccess=function(){b()}})})};B.prototype.i=function(a,b){return babelHelpers.instanceof(b,ServiceWorkerRegistration)?"string"!==typeof a||0===a.length?Promise.reject(A.create("bad-sender-id")):F(this,a).then(function(c){if(0!==c.length){var d=c.findIndex(function(c){return b.scope===c.swScope&&a===c.fcmSenderId});if(-1!==d)return c[d]}}).then(function(a){if(a)return b.pushManager.getSubscription().catch(function(){throw A.create("get-subscription-failed")}).then(function(b){var c;if(c=b)c=b.endpoint===a.endpoint&&v(b.getKey("auth"))===a.auth&&v(b.getKey("p256dh"))===a.p256dh;if(c)return a.fcmToken})}):Promise.reject(A.create("sw-registration-expected"))};B.prototype.getSavedToken=B.prototype.i;B.prototype.h=function(a,b){var c=this;return"string"!==typeof a||0===a.length?Promise.reject(A.create("bad-sender-id")):babelHelpers.instanceof(b,ServiceWorkerRegistration)?b.pushManager.getSubscription().then(function(a){return a?a:b.pushManager.subscribe(y)}).then(function(d){return G(a,d).then(function(e){return H(c,a,b,d,e.token,e.pushSet).then(function(){return e.token})})}):Promise.reject(A.create("sw-registration-expected"))};B.prototype.createToken=B.prototype.h;B.prototype.deleteToken=function(a){var b=this;return"string"!==typeof a||0===a.length?Promise.reject(A.create("invalid-delete-token")):E(this,a).then(function(a){if(!a)throw A.create("delete-token-not-found");return C(b).then(function(b){return new Promise(function(c,d){var e=b.transaction(["fcm_token_object_Store"],"readwrite").objectStore("fcm_token_object_Store").delete(a.swScope);e.onerror=function(a){d(a.target.error)};e.onsuccess=function(b){0===b.target.result?d(A.create("failed-to-delete-token")):c(a)}})})})};var I=function(a){var b=this;this.a=new firebase.INTERNAL.ErrorFactory("messaging","Messaging",x);if(!a.options.messagingSenderId||"string"!==typeof a.options.messagingSenderId)throw this.a.create("bad-sender-id");this.l=a.options.messagingSenderId;this.c=new B;this.app=a;this.INTERNAL={};this.INTERNAL.delete=function(){return b.delete}};I.prototype.getToken=function(){var a=this,b=Notification.permission;return"granted"!==b?"denied"===b?Promise.reject(this.a.create("notifications-blocked")):Promise.resolve(null):this.f().then(function(b){return a.c.i(a.l,b).then(function(c){return c?c:a.c.h(a.l,b)})})};I.prototype.getToken=I.prototype.getToken;I.prototype.deleteToken=function(a){var b=this;return this.c.deleteToken(a).then(function(){return b.f()}).then(function(a){return a?a.pushManager.getSubscription():null}).then(function(a){if(a)return a.unsubscribe()})};I.prototype.deleteToken=I.prototype.deleteToken;I.prototype.f=function(){throw this.a.create("should-be-overriden")};I.prototype.requestPermission=function(){throw this.a.create("only-available-in-window")};I.prototype.useServiceWorker=function(){throw this.a.create("only-available-in-window")};I.prototype.useServiceWorker=I.prototype.useServiceWorker;I.prototype.onMessage=function(){throw this.a.create("only-available-in-window")};I.prototype.onMessage=I.prototype.onMessage;I.prototype.onTokenRefresh=function(){throw this.a.create("only-available-in-window")};I.prototype.onTokenRefresh=I.prototype.onTokenRefresh;I.prototype.setBackgroundMessageHandler=function(){throw this.a.create("only-available-in-sw")};I.prototype.setBackgroundMessageHandler=I.prototype.setBackgroundMessageHandler;I.prototype.delete=function(){D(this.c)};var J=function(a,b){var c={};return c["firebase-messaging-msg-type"]=a,c["firebase-messaging-msg-data"]=b,c},K=self,P=function(a){I.call(this,a);var b=this;this.a=new firebase.INTERNAL.ErrorFactory("messaging","Messaging",x);K.addEventListener("push",function(a){return L(b,a)},!1);K.addEventListener("pushsubscriptionchange",function(a){return N(b,a)},!1);K.addEventListener("notificationclick",function(a){return O(b,a)},!1);this.b=null};f(P,I);var L=function(a,b){var c;try{c=b.data.json()}catch(e){return}var d=Q().then(function(b){if(b){if(c.notification||a.b)return R(a,c)}else{if((b=c)&&"object"===babelHelpers.typeof(b.notification)){var d=Object.assign({},b.notification),e={};d.data=(e.FCM_MSG=b,e);b=d}else b=void 0;if(b)return K.registration.showNotification(b.title||"",b);if(a.b)return a.b(c)}});b.waitUntil(d)},N=function(a,b){var c=a.getToken().then(function(b){if(!b)throw a.a.create("no-fcm-token-for-resubscribe");var c=a.c;return E(c,b).then(function(b){if(!b)throw a.a.create("invalid-saved-token");return K.registration.pushManager.subscribe(y).then(function(a){return G(b.A,a,b.w)}).catch(function(d){return c.deleteToken(b.B).then(function(){throw a.a.create("unable-to-resubscribe",{message:d})})})})});b.waitUntil(c)},O=function(a,b){if(b.notification&&b.notification.data&&b.notification.data.FCM_MSG){b.stopImmediatePropagation();b.notification.close();var c=b.notification.data.FCM_MSG,d=c.notification.click_action;if(d){var e=S(d).then(function(a){return a?a:K.clients.openWindow(d)}).then(function(b){if(b)return delete c.notification,T(a,b,J("notification-clicked",c))});b.waitUntil(e)}}};P.prototype.setBackgroundMessageHandler=function(a){if(a&&"function"!==typeof a)throw this.a.create("bg-handler-function-expected");this.b=a};P.prototype.setBackgroundMessageHandler=P.prototype.setBackgroundMessageHandler;var S=function(a){var b=new URL(a).href;return K.clients.matchAll({type:"window",includeUncontrolled:!0}).then(function(a){for(var c=null,e=0;e<a.length;e++){if(new URL(a[e].url).href===b){c=a[e];break}}if(c)return c.focus(),c})},T=function(a,b,c){return new Promise(function(d,e){if(!b)return e(a.a.create("no-window-client-to-msg"));b.postMessage(c);d()})},Q=function(){return K.clients.matchAll({type:"window",includeUncontrolled:!0}).then(function(a){return a.some(function(a){return"visible"===a.visibilityState})})},R=function(a,b){return K.clients.matchAll({type:"window",includeUncontrolled:!0}).then(function(c){var d=J("push-msg-received",b);return Promise.all(c.map(function(b){return T(a,b,d)}))})};P.prototype.f=function(){return Promise.resolve(K.registration)};var V=function(a){I.call(this,a);var b=this;this.j=null;this.m=firebase.INTERNAL.createSubscribe(function(a){b.j=a});this.s=null;this.o=firebase.INTERNAL.createSubscribe(function(a){b.s=a});U(this)};f(V,I);V.prototype.getToken=function(){var a=this;return"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")?W(this).then(function(){return I.prototype.getToken.call(a)}):Promise.reject(this.a.create("unsupported-browser"))};V.prototype.getToken=V.prototype.getToken;var W=function(a){if(a.g)return a.g;var b=document.querySelector("link[rel=\"manifest\"]");b?a.g=fetch(b.href).then(function(a){return a.json()}).catch(function(){return Promise.resolve()}).then(function(b){if(b&&b.gcm_sender_id&&"103953800507"!==b.gcm_sender_id)throw a.a.create("incorrect-gcm-sender-id")}):a.g=Promise.resolve();return a.g};V.prototype.requestPermission=function(){var a=this;return"granted"===Notification.permission?Promise.resolve():new Promise(function(b,c){var d=function(_d){return"granted"===_d?b():"denied"===_d?c(a.a.create("permission-blocked")):c(a.a.create("permission-default"))},e=Notification.requestPermission(function(a){e||d(a)});e&&e.then(d)})};V.prototype.requestPermission=V.prototype.requestPermission;V.prototype.useServiceWorker=function(a){if(!babelHelpers.instanceof(a,ServiceWorkerRegistration))throw this.a.create("sw-registration-expected");if("undefined"!==typeof this.b)throw this.a.create("use-sw-before-get-token");this.b=a};V.prototype.useServiceWorker=V.prototype.useServiceWorker;V.prototype.onMessage=function(a,b,c){return this.m(a,b,c)};V.prototype.onMessage=V.prototype.onMessage;V.prototype.onTokenRefresh=function(a,b,c){return this.o(a,b,c)};V.prototype.onTokenRefresh=V.prototype.onTokenRefresh;var X=function(a,b){var c=b.installing||b.waiting||b.active;return new Promise(function(d,e){if(c){if("activated"===c.state)d(b);else if("redundant"===c.state)e(a.a.create("sw-reg-redundant"));else{var n=function(){if("activated"===c.state)d(b);else if("redundant"===c.state)e(a.a.create("sw-reg-redundant"));else return;c.removeEventListener("statechange",n)};c.addEventListener("statechange",n)}}else e(a.a.create("no-sw-in-reg"))})};V.prototype.f=function(){var a=this;if(this.b)return X(this,this.b);this.b=null;return navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"}).catch(function(b){throw a.a.create("failed-serviceworker-registration",{browserErrorMessage:b.message})}).then(function(b){return X(a,b).then(function(){a.b=b;b.update();return b})})};var U=function(a){"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",function(b){if(b.data&&b.data["firebase-messaging-msg-type"])switch(b=b.data,b["firebase-messaging-msg-type"]){case"push-msg-received":case"notification-clicked":a.j.next(b["firebase-messaging-msg-data"]);}},!1)};if(!(firebase&&firebase.INTERNAL&&firebase.INTERNAL.registerService))throw Error("Cannot install Firebase Messaging - be sure to load firebase-app.js first.");firebase.INTERNAL.registerService("messaging",function(a){return self&&"ServiceWorkerGlobalScope"in self?new P(a):new V(a)},{Messaging:V});new firebase.INTERNAL.ErrorFactory("messaging","Messaging",x);new firebase.INTERNAL.ErrorFactory("messaging","Messaging",x);new firebase.INTERNAL.ErrorFactory("messaging","Messaging",x)}).call(this);</script><dom-module id="firebase-app" assetpath="../bower_components/polymerfire/"><script>(function(){"use strict";Polymer({is:"firebase-app",properties:{name:{type:String,value:""},apiKey:{type:String},authDomain:{type:String},databaseUrl:{type:String},storageBucket:{type:String,value:null},messagingSenderId:{type:String,value:null},app:{type:Object,notify:!0,computed:"__computeApp(name, apiKey, authDomain, databaseUrl, storageBucket, messagingSenderId)"}},__computeApp:function __computeApp(name,apiKey,authDomain,databaseUrl,storageBucket,messagingSenderId){if(apiKey&&authDomain&&databaseUrl){var init=[{apiKey:apiKey,authDomain:authDomain,databaseURL:databaseUrl,storageBucket:storageBucket,messagingSenderId:messagingSenderId}];if(name){init.push(name)}firebase.initializeApp.apply(firebase,init);this.fire("firebase-app-initialized")}else{return null}return firebase.app(name)}})})();</script></dom-module><script>(function(){"use strict";var networkStatusSubscribers=[];function notifySubscribers(){for(var i=0;i<networkStatusSubscribers.length;++i){networkStatusSubscribers[i].refreshNetworkStatus()}}window.addEventListener("online",notifySubscribers);window.addEventListener("offline",notifySubscribers);Polymer.AppNetworkStatusBehavior={properties:{online:{type:Boolean,readOnly:!0,notify:!0,value:function value(){return window.navigator.onLine}}},attached:function attached(){networkStatusSubscribers.push(this);this.refreshNetworkStatus()},detached:function detached(){var index=networkStatusSubscribers.indexOf(this);if(0>index){return}networkStatusSubscribers.splice(index,1)},refreshNetworkStatus:function refreshNetworkStatus(){this._setOnline(window.navigator.onLine)}}})();</script><script>(function(){"use strict";Polymer.FirebaseCommonBehaviorImpl={properties:{app:{type:Object,notify:!0,observer:"__appChanged"},appName:{type:String,notify:!0,value:"",observer:"__appNameChanged"}},__appNameChanged:function __appNameChanged(appName){if(this.app&&this.app.name===appName){return}try{if(null==appName){this.app=firebase.app()}else{this.app=firebase.app(appName)}}catch(e){var self=this;window.addEventListener("firebase-app-initialized",function onFirebaseAppInitialized(){window.removeEventListener("firebase-app-initialized",onFirebaseAppInitialized);self.__appNameChanged(self.appName)})}},__appChanged:function __appChanged(app){if(app&&app.name===this.appName){return}this.appName=app?app.name:""},__onError:function __onError(err){this.fire("error",err)}};Polymer.FirebaseCommonBehavior=[Polymer.AppNetworkStatusBehavior,Polymer.FirebaseCommonBehaviorImpl]})();</script><dom-module id="firebase-auth" assetpath="../bower_components/polymerfire/"><script>(function(){"use strict";Polymer({is:"firebase-auth",behaviors:[Polymer.FirebaseCommonBehavior],properties:{auth:{type:Object,computed:"_computeAuth(app)",observer:"__authChanged"},provider:{type:String,notify:!0},signedIn:{type:Boolean,computed:"_computeSignedIn(user)",notify:!0},user:{type:Object,readOnly:!0,value:null,notify:!0},statusKnown:{type:Boolean,value:!1,notify:!0,readOnly:!0,reflectToAttribute:!0}},signInAnonymously:function signInAnonymously(){if(!this.auth){return Promise.reject("No app configured for firebase-auth!")}return this._handleSignIn(this.auth.signInAnonymously())},signInWithCustomToken:function signInWithCustomToken(token){if(!this.auth){return Promise.reject("No app configured for firebase-auth!")}return this._handleSignIn(this.auth.signInWithCustomToken(token))},signInWithCredential:function signInWithCredential(credential){if(!this.auth){return Promise.reject("No app configured for firebase-auth!")}return this._handleSignIn(this.auth.signInWithCredential(credential))},signInWithPopup:function signInWithPopup(provider){return this._attemptProviderSignIn(this._normalizeProvider(provider),this.auth.signInWithPopup)},signInWithRedirect:function signInWithRedirect(provider){return this._attemptProviderSignIn(this._normalizeProvider(provider),this.auth.signInWithRedirect)},signInWithEmailAndPassword:function signInWithEmailAndPassword(email,password){return this._handleSignIn(this.auth.signInWithEmailAndPassword(email,password))},createUserWithEmailAndPassword:function createUserWithEmailAndPassword(email,password){return this._handleSignIn(this.auth.createUserWithEmailAndPassword(email,password))},sendPasswordResetEmail:function sendPasswordResetEmail(email){return this._handleSignIn(this.auth.sendPasswordResetEmail(email))},signOut:function signOut(){if(!this.auth){return Promise.reject("No app configured for auth!")}return this.auth.signOut()},_attemptProviderSignIn:function _attemptProviderSignIn(provider,method){provider=provider||this._providerFromName(this.provider);if(!provider){return Promise.reject("Must supply a provider for popup sign in.")}if(!this.auth){return Promise.reject("No app configured for firebase-auth!")}return this._handleSignIn(method.call(this.auth,provider))},_providerFromName:function _providerFromName(name){switch(name){case"facebook":return new firebase.auth.FacebookAuthProvider;case"github":return new firebase.auth.GithubAuthProvider;case"google":return new firebase.auth.GoogleAuthProvider;case"twitter":return new firebase.auth.TwitterAuthProvider;default:this.fire("error","Unrecognized firebase-auth provider \""+name+"\"");}},_normalizeProvider:function _normalizeProvider(provider){if("string"===typeof provider){return this._providerFromName(provider)}return provider},_handleSignIn:function _handleSignIn(promise){return promise.catch(function(err){this.fire("error",err);throw err}.bind(this))},_computeSignedIn:function _computeSignedIn(user){return!!user},_computeAuth:function _computeAuth(){return this.app.auth()},__authChanged:function __authChanged(auth,oldAuth){this._setStatusKnown(!1);if(oldAuth!==auth&&this._unsubscribe){this._unsubscribe();this._unsubscribe=null}if(this.auth){this._unsubscribe=this.auth.onAuthStateChanged(function(user){this._setUser(user);this._setStatusKnown(!0)}.bind(this),function(err){this.fire("error",err)}.bind(this))}}})})();</script></dom-module><script>(function(){Polymer.IronMeta=function(options){Polymer.IronMeta[" "](options);this.type=options&&options.type||"default";this.key=options&&options.key;if(options&&"value"in options){this.value=options.value}};Polymer.IronMeta[" "]=function(){};Polymer.IronMeta.types={};Polymer.IronMeta.prototype={get value(){var type=this.type,key=this.key;if(type&&key){return Polymer.IronMeta.types[type]&&Polymer.IronMeta.types[type][key]}},set value(value){var type=this.type,key=this.key;if(type&&key){type=Polymer.IronMeta.types[type]=Polymer.IronMeta.types[type]||{};if(null==value){delete type[key]}else{type[key]=value}}},get list(){var type=this.type;if(type){var items=Polymer.IronMeta.types[this.type];if(!items){return[]}return Object.keys(items).map(function(key){return metaDatas[this.type][key]},this)}},byKey:function byKey(key){this.key=key;return this.value}};var metaDatas=Polymer.IronMeta.types;Polymer({is:"iron-meta",properties:{type:{type:String,value:"default"},key:{type:String},value:{type:String,notify:!0},self:{type:Boolean,observer:"_selfChanged"},__meta:{type:Boolean,computed:"__computeMeta(type, key, value)"}},hostAttributes:{hidden:!0},__computeMeta:function __computeMeta(type,key,value){var meta=new Polymer.IronMeta({type:type,key:key});if(value!==void 0&&value!==meta.value){meta.value=value}else if(this.value!==meta.value){this.value=meta.value}return meta},get list(){return this.__meta&&this.__meta.list},_selfChanged:function _selfChanged(self){if(self){this.value=this}},byKey:function byKey(key){return new Polymer.IronMeta({type:this.type,key:key}).value}})})();</script><script>Polymer({is:"iron-iconset-svg",properties:{name:{type:String,observer:"_nameChanged"},size:{type:Number,value:24},rtlMirroring:{type:Boolean,value:!1},useGlobalRtlAttribute:{type:Boolean,value:!1}},created:function created(){this._meta=new Polymer.IronMeta({type:"iconset",key:null,value:null})},attached:function attached(){this.style.display="none"},getIconNames:function getIconNames(){this._icons=this._createIconMap();return Object.keys(this._icons).map(function(n){return this.name+":"+n},this)},applyIcon:function applyIcon(element,iconName){this.removeIcon(element);var svg=this._cloneIcon(iconName,this.rtlMirroring&&this._targetIsRTL(element));if(svg){var pde=Polymer.dom(element.root||element);pde.insertBefore(svg,pde.childNodes[0]);return element._svgIcon=svg}return null},removeIcon:function removeIcon(element){if(element._svgIcon){Polymer.dom(element.root||element).removeChild(element._svgIcon);element._svgIcon=null}},_targetIsRTL:function _targetIsRTL(target){if(null==this.__targetIsRTL){if(this.useGlobalRtlAttribute){var globalElement=document.body&&document.body.hasAttribute("dir")?document.body:document.documentElement;this.__targetIsRTL="rtl"===globalElement.getAttribute("dir")}else{if(target&&target.nodeType!==Node.ELEMENT_NODE){target=target.host}this.__targetIsRTL=target&&"rtl"===window.getComputedStyle(target).direction}}return this.__targetIsRTL},_nameChanged:function _nameChanged(){this._meta.value=null;this._meta.key=this.name;this._meta.value=this;this.async(function(){this.fire("iron-iconset-added",this,{node:window})})},_createIconMap:function _createIconMap(){var icons=Object.create(null);Polymer.dom(this).querySelectorAll("[id]").forEach(function(icon){icons[icon.id]=icon});return icons},_cloneIcon:function _cloneIcon(id,mirrorAllowed){this._icons=this._icons||this._createIconMap();return this._prepareSvgClone(this._icons[id],this.size,mirrorAllowed)},_prepareSvgClone:function _prepareSvgClone(sourceSvg,size,mirrorAllowed){if(sourceSvg){var content=sourceSvg.cloneNode(!0),svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),viewBox=content.getAttribute("viewBox")||"0 0 "+size+" "+size,cssText="pointer-events: none; display: block; width: 100%; height: 100%;";if(mirrorAllowed&&content.hasAttribute("mirror-in-rtl")){cssText+="-webkit-transform:scale(-1,1);transform:scale(-1,1);transform-origin:center;"}svg.setAttribute("viewBox",viewBox);svg.setAttribute("preserveAspectRatio","xMidYMid meet");svg.setAttribute("focusable","false");svg.style.cssText=cssText;svg.appendChild(content).removeAttribute("id");return svg}return null}});</script><link rel="import" href="my-icons.html"></div><dom-module id="my-app"><template><style>:host {
        --dark-primary-color:       #212121;
        --default-primary-color:    #424242;
        --light-primary-color:      #bdbdbd;
        --text-primary-color:       #FFFFFF;
        --accent-color:             rgb(98, 97, 99);
        --primary-background-color: #CFD8DC;
        --primary-text-color:       #212121;
        --secondary-text-color:     #757575;
        --disabled-text-color:      #BDBDBD;
        --divider-color:            #BDBDBD;
        --paper-checkbox-label-color: var(--primary-text-color);


        /* Components */

        /* paper-drawer-panel */
        --drawer-menu-color:           #ffffff;
        --drawer-border-color:         1px solid #ccc;
        --drawer-toolbar-border-color: 1px solid rgba(0, 0, 0, 0.22);

        /* paper-menu */
        --paper-menu-background-color: #fff;
        --menu-link-color:             #111111;

        /* paper-input */
        --paper-input-container-color:       #607D8B;
        --paper-input-container-focus-color: #455A64;
        --paper-input-container-input-color: #212121;

        /* paper-radio-button */
        --paper-radio-button-checked-color: var(--accent-color);
        --paper-radio-button-checked-ink-color: var(--accent-color);

        /* paper-tabs */
        --paper-tab-ink: var(--accent-color);
        --paper-tabs-selection-bar-color: var(--accent-color);

        /* paper-button */
        --paper-button: {
          background-color: var(--accent-color);
          color: var(--text-primary-color);
        }</style><app-location route="{{route}}"></app-location><app-route route="{{route}}" pattern="[[rootPattern]]:page/:subpage" data="{{routeData}}" tail="{{subroute}}"></app-route><firebase-app auth-domain="atlas-4951a.firebaseapp.com" database-url="https://atlas-4951a.firebaseio.com/" api-key="AIzaSyA14VnwL_vCDqgwlEsUyJPqyGgk92BTko8"></firebase-app><firebase-auth id="FBAuth" signed-in="{{signedIn}}"></firebase-auth><iron-pages role="main" selected="[[page]]" attr-for-selected="name" fallback-selection="view404"><my-login name="login"></my-login><my-home name="home" todo-list="{{todo}}"></my-home><my-case name="case" route-data="[[routeData]]" todo="[[todo]]"></my-case><my-compare name="compare" route-data="[[routeData]]" todo="[[todo]]"></my-compare><my-view404 name="view404"></my-view404><my-data name="data" route-data="[[routeData]]"></my-data><my-team name="team" route-data="[[routeData]]"></my-team></iron-pages></template><script>var MyApp=function(_Polymer$Element){babelHelpers.inherits(MyApp,_Polymer$Element);babelHelpers.createClass(MyApp,null,[{key:"is",get:function get(){return"my-app"}},{key:"properties",get:function get(){return{page:{type:String,reflectToAttribute:!0,observer:"_pageChanged"},rootPattern:String,subroute:String,signedIn:{type:Boolean,observer:"_signedInChanged"}}}},{key:"observers",get:function get(){return["_routePageChanged(routeData.page)"]}}]);function MyApp(){var _this;babelHelpers.classCallCheck(this,MyApp);_this=babelHelpers.possibleConstructorReturn(this,(MyApp.__proto__||Object.getPrototypeOf(MyApp)).call(this));_this.rootPattern=new URL(_this.rootPath).pathname;return _this}babelHelpers.createClass(MyApp,[{key:"_routePageChanged",value:function _routePageChanged(page){if(!this.signedIn&&"login"!==page){return}if(this.signedIn&&"login"===page){return}this.page=page||"home"}},{key:"_pageChanged",value:function _pageChanged(page){var resolvedPageUrl=this.resolveUrl("my-"+page+".html");Polymer.importHref(resolvedPageUrl,null,this._showPage404.bind(this),!0)}},{key:"_showPage404",value:function _showPage404(){this.page="view404"}},{key:"_signedInChanged",value:function _signedInChanged(signedIn){if(signedIn){this.set("routeData.page","home")}else{this.set("routeData.page","login");this.set("routeData.subpage","")}}}]);return MyApp}(Polymer.Element);window.customElements.define(MyApp.is,MyApp);</script></dom-module><script>(function(){var style=document.createElement("style");style.textContent="[hidden] { display: none !important; }";document.head.appendChild(style)})();</script><custom-style><style is="custom-style">[hidden] {
      display: none !important;
    }</style></custom-style><custom-style><style is="custom-style">html {

      --layout: {
        display: -ms-flexbox;
        display: -webkit-flex;
        display: flex;
      };

      --layout-inline: {
        display: -ms-inline-flexbox;
        display: -webkit-inline-flex;
        display: inline-flex;
      };

      --layout-horizontal: {
        @apply --layout;

        -ms-flex-direction: row;
        -webkit-flex-direction: row;
        flex-direction: row;
      };

      --layout-horizontal-reverse: {
        @apply --layout;

        -ms-flex-direction: row-reverse;
        -webkit-flex-direction: row-reverse;
        flex-direction: row-reverse;
      };

      --layout-vertical: {
        @apply --layout;

        -ms-flex-direction: column;
        -webkit-flex-direction: column;
        flex-direction: column;
      };

      --layout-vertical-reverse: {
        @apply --layout;

        -ms-flex-direction: column-reverse;
        -webkit-flex-direction: column-reverse;
        flex-direction: column-reverse;
      };

      --layout-wrap: {
        -ms-flex-wrap: wrap;
        -webkit-flex-wrap: wrap;
        flex-wrap: wrap;
      };

      --layout-wrap-reverse: {
        -ms-flex-wrap: wrap-reverse;
        -webkit-flex-wrap: wrap-reverse;
        flex-wrap: wrap-reverse;
      };

      --layout-flex-auto: {
        -ms-flex: 1 1 auto;
        -webkit-flex: 1 1 auto;
        flex: 1 1 auto;
      };

      --layout-flex-none: {
        -ms-flex: none;
        -webkit-flex: none;
        flex: none;
      };

      --layout-flex: {
        -ms-flex: 1 1 0.000000001px;
        -webkit-flex: 1;
        flex: 1;
        -webkit-flex-basis: 0.000000001px;
        flex-basis: 0.000000001px;
      };

      --layout-flex-2: {
        -ms-flex: 2;
        -webkit-flex: 2;
        flex: 2;
      };

      --layout-flex-3: {
        -ms-flex: 3;
        -webkit-flex: 3;
        flex: 3;
      };

      --layout-flex-4: {
        -ms-flex: 4;
        -webkit-flex: 4;
        flex: 4;
      };

      --layout-flex-5: {
        -ms-flex: 5;
        -webkit-flex: 5;
        flex: 5;
      };

      --layout-flex-6: {
        -ms-flex: 6;
        -webkit-flex: 6;
        flex: 6;
      };

      --layout-flex-7: {
        -ms-flex: 7;
        -webkit-flex: 7;
        flex: 7;
      };

      --layout-flex-8: {
        -ms-flex: 8;
        -webkit-flex: 8;
        flex: 8;
      };

      --layout-flex-9: {
        -ms-flex: 9;
        -webkit-flex: 9;
        flex: 9;
      };

      --layout-flex-10: {
        -ms-flex: 10;
        -webkit-flex: 10;
        flex: 10;
      };

      --layout-flex-11: {
        -ms-flex: 11;
        -webkit-flex: 11;
        flex: 11;
      };

      --layout-flex-12: {
        -ms-flex: 12;
        -webkit-flex: 12;
        flex: 12;
      };

      /* alignment in cross axis */

      --layout-start: {
        -ms-flex-align: start;
        -webkit-align-items: flex-start;
        align-items: flex-start;
      };

      --layout-center: {
        -ms-flex-align: center;
        -webkit-align-items: center;
        align-items: center;
      };

      --layout-end: {
        -ms-flex-align: end;
        -webkit-align-items: flex-end;
        align-items: flex-end;
      };

      --layout-baseline: {
        -ms-flex-align: baseline;
        -webkit-align-items: baseline;
        align-items: baseline;
      };

      /* alignment in main axis */

      --layout-start-justified: {
        -ms-flex-pack: start;
        -webkit-justify-content: flex-start;
        justify-content: flex-start;
      };

      --layout-center-justified: {
        -ms-flex-pack: center;
        -webkit-justify-content: center;
        justify-content: center;
      };

      --layout-end-justified: {
        -ms-flex-pack: end;
        -webkit-justify-content: flex-end;
        justify-content: flex-end;
      };

      --layout-around-justified: {
        -ms-flex-pack: distribute;
        -webkit-justify-content: space-around;
        justify-content: space-around;
      };

      --layout-justified: {
        -ms-flex-pack: justify;
        -webkit-justify-content: space-between;
        justify-content: space-between;
      };

      --layout-center-center: {
        @apply --layout-center;
        @apply --layout-center-justified;
      };

      /* self alignment */

      --layout-self-start: {
        -ms-align-self: flex-start;
        -webkit-align-self: flex-start;
        align-self: flex-start;
      };

      --layout-self-center: {
        -ms-align-self: center;
        -webkit-align-self: center;
        align-self: center;
      };

      --layout-self-end: {
        -ms-align-self: flex-end;
        -webkit-align-self: flex-end;
        align-self: flex-end;
      };

      --layout-self-stretch: {
        -ms-align-self: stretch;
        -webkit-align-self: stretch;
        align-self: stretch;
      };

      --layout-self-baseline: {
        -ms-align-self: baseline;
        -webkit-align-self: baseline;
        align-self: baseline;
      };

      /* multi-line alignment in main axis */

      --layout-start-aligned: {
        -ms-flex-line-pack: start;  /* IE10 */
        -ms-align-content: flex-start;
        -webkit-align-content: flex-start;
        align-content: flex-start;
      };

      --layout-end-aligned: {
        -ms-flex-line-pack: end;  /* IE10 */
        -ms-align-content: flex-end;
        -webkit-align-content: flex-end;
        align-content: flex-end;
      };

      --layout-center-aligned: {
        -ms-flex-line-pack: center;  /* IE10 */
        -ms-align-content: center;
        -webkit-align-content: center;
        align-content: center;
      };

      --layout-between-aligned: {
        -ms-flex-line-pack: justify;  /* IE10 */
        -ms-align-content: space-between;
        -webkit-align-content: space-between;
        align-content: space-between;
      };

      --layout-around-aligned: {
        -ms-flex-line-pack: distribute;  /* IE10 */
        -ms-align-content: space-around;
        -webkit-align-content: space-around;
        align-content: space-around;
      };

      /*******************************
                Other Layout
      *******************************/

      --layout-block: {
        display: block;
      };

      --layout-invisible: {
        visibility: hidden !important;
      };

      --layout-relative: {
        position: relative;
      };

      --layout-fit: {
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
      };

      --layout-scroll: {
        -webkit-overflow-scrolling: touch;
        overflow: auto;
      };

      --layout-fullbleed: {
        margin: 0;
        height: 100vh;
      };

      /* fixed position */

      --layout-fixed-top: {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
      };

      --layout-fixed-right: {
        position: fixed;
        top: 0;
        right: 0;
        bottom: 0;
      };

      --layout-fixed-bottom: {
        position: fixed;
        right: 0;
        bottom: 0;
        left: 0;
      };

      --layout-fixed-left: {
        position: fixed;
        top: 0;
        bottom: 0;
        left: 0;
      };

    }</style></custom-style><script>Polymer.IronScrollTargetBehavior={properties:{scrollTarget:{type:HTMLElement,value:function value(){return this._defaultScrollTarget}}},observers:["_scrollTargetChanged(scrollTarget, isAttached)"],_shouldHaveListener:!0,_scrollTargetChanged:function _scrollTargetChanged(scrollTarget,isAttached){if(this._oldScrollTarget){this._toggleScrollListener(!1,this._oldScrollTarget);this._oldScrollTarget=null}if(!isAttached){return}if("document"===scrollTarget){this.scrollTarget=this._doc}else if("string"===typeof scrollTarget){var domHost=this.domHost;this.scrollTarget=domHost&&domHost.$?domHost.$[scrollTarget]:Polymer.dom(this.ownerDocument).querySelector("#"+scrollTarget)}else if(this._isValidScrollTarget()){this._oldScrollTarget=scrollTarget;this._toggleScrollListener(this._shouldHaveListener,scrollTarget)}},_scrollHandler:function(){},get _defaultScrollTarget(){return this._doc},get _doc(){return this.ownerDocument.documentElement},get _scrollTop(){if(this._isValidScrollTarget()){return this.scrollTarget===this._doc?window.pageYOffset:this.scrollTarget.scrollTop}return 0},get _scrollLeft(){if(this._isValidScrollTarget()){return this.scrollTarget===this._doc?window.pageXOffset:this.scrollTarget.scrollLeft}return 0},set _scrollTop(top){if(this.scrollTarget===this._doc){window.scrollTo(window.pageXOffset,top)}else if(this._isValidScrollTarget()){this.scrollTarget.scrollTop=top}},set _scrollLeft(left){if(this.scrollTarget===this._doc){window.scrollTo(left,window.pageYOffset)}else if(this._isValidScrollTarget()){this.scrollTarget.scrollLeft=left}},scroll:function scroll(left,top){if(this.scrollTarget===this._doc){window.scrollTo(left,top)}else if(this._isValidScrollTarget()){this.scrollTarget.scrollLeft=left;this.scrollTarget.scrollTop=top}},get _scrollTargetWidth(){if(this._isValidScrollTarget()){return this.scrollTarget===this._doc?window.innerWidth:this.scrollTarget.offsetWidth}return 0},get _scrollTargetHeight(){if(this._isValidScrollTarget()){return this.scrollTarget===this._doc?window.innerHeight:this.scrollTarget.offsetHeight}return 0},_isValidScrollTarget:function _isValidScrollTarget(){return babelHelpers.instanceof(this.scrollTarget,HTMLElement)},_toggleScrollListener:function _toggleScrollListener(yes,scrollTarget){var eventTarget=scrollTarget===this._doc?window:scrollTarget;if(yes){if(!this._boundScrollHandler){this._boundScrollHandler=this._scrollHandler.bind(this);eventTarget.addEventListener("scroll",this._boundScrollHandler)}}else{if(this._boundScrollHandler){eventTarget.removeEventListener("scroll",this._boundScrollHandler);this._boundScrollHandler=null}}},toggleScrollListener:function toggleScrollListener(yes){this._shouldHaveListener=yes;this._toggleScrollListener(yes,this.scrollTarget)}};</script><script>Polymer.AppLayout=Polymer.AppLayout||{};Polymer.AppLayout._scrollEffects=Polymer.AppLayout._scrollEffects||{};Polymer.AppLayout.scrollTimingFunction=function(t,b,c,d){t/=d;return-c*t*(t-2)+b};Polymer.AppLayout.registerEffect=function(effectName,effectDef){if(null!=Polymer.AppLayout._scrollEffects[effectName]){throw new Error("effect `"+effectName+"` is already registered.")}Polymer.AppLayout._scrollEffects[effectName]=effectDef};Polymer.AppLayout.queryAllRoot=function(selector,root){var queue=[root],matches=[];while(0<queue.length){var node=queue.shift();matches.push.apply(matches,node.querySelectorAll(selector));for(i=0;node.children[i];i++){if(node.children[i].shadowRoot){queue.push(node.children[i].shadowRoot)}}}return matches};Polymer.AppLayout.scroll=function(options){options=options||{};var docEl=document.documentElement,target=options.target||docEl,hasNativeScrollBehavior="scrollBehavior"in target.style&&target.scroll,scrollTop=options.top||0,scrollLeft=options.left||0,scrollTo=target===docEl?window.scrollTo:function(scrollLeft,scrollTop){target.scrollLeft=scrollLeft;target.scrollTop=scrollTop};if("smooth"===options.behavior){if(hasNativeScrollBehavior){target.scroll(options)}else{var timingFn=Polymer.AppLayout.scrollTimingFunction,startTime=Date.now(),currentScrollTop=target===docEl?window.pageYOffset:target.scrollTop,currentScrollLeft=target===docEl?window.pageXOffset:target.scrollLeft,duration=300,updateFrame=function updateFrame(){var now=Date.now(),elapsedTime=now-startTime;if(elapsedTime<duration){scrollTo(timingFn(elapsedTime,currentScrollLeft,scrollLeft-currentScrollLeft,duration),timingFn(elapsedTime,currentScrollTop,scrollTop-currentScrollTop,duration));requestAnimationFrame(updateFrame)}else{scrollTo(scrollLeft,scrollTop)}}.bind(this);updateFrame()}}else if("silent"===options.behavior){var headers=Polymer.AppLayout.queryAllRoot("app-header",document.body);headers.forEach(function(header){header.setAttribute("silent-scroll","")});window.cancelAnimationFrame(Polymer.AppLayout._scrollTimer);Polymer.AppLayout._scrollTimer=window.requestAnimationFrame(function(){headers.forEach(function(header){header.removeAttribute("silent-scroll")});Polymer.AppLayout._scrollTimer=null});scrollTo(scrollLeft,scrollTop)}else{scrollTo(scrollLeft,scrollTop)}};</script><script>Polymer.AppScrollEffectsBehavior=[Polymer.IronScrollTargetBehavior,{properties:{effects:{type:String},effectsConfig:{type:Object,value:function value(){return{}}},disabled:{type:Boolean,reflectToAttribute:!0,value:!1},threshold:{type:Number,value:0},thresholdTriggered:{type:Boolean,notify:!0,readOnly:!0,reflectToAttribute:!0}},observers:["_effectsChanged(effects, effectsConfig, isAttached)"],_updateScrollState:function _updateScrollState(){},isOnScreen:function isOnScreen(){return!1},isContentBelow:function isContentBelow(){return!1},_effectsRunFn:null,_effects:null,get _clampedScrollTop(){return Math.max(0,this._scrollTop)},detached:function detached(){this._tearDownEffects()},createEffect:function createEffect(effectName,effectConfig){var effectDef=Polymer.AppLayout._scrollEffects[effectName];if(!effectDef){throw new ReferenceError(this._getUndefinedMsg(effectName))}var prop=this._boundEffect(effectDef,effectConfig||{});prop.setUp();return prop},_effectsChanged:function _effectsChanged(effects,effectsConfig,isAttached){this._tearDownEffects();if(!effects||!isAttached){return}effects.split(" ").forEach(function(effectName){var effectDef;if(""!==effectName){if(effectDef=Polymer.AppLayout._scrollEffects[effectName]){this._effects.push(this._boundEffect(effectDef,effectsConfig[effectName]))}else{console.warn(this._getUndefinedMsg(effectName))}}},this);this._setUpEffect()},_layoutIfDirty:function _layoutIfDirty(){return this.offsetWidth},_boundEffect:function _boundEffect(effectDef,effectsConfig){effectsConfig=effectsConfig||{};var startsAt=parseFloat(effectsConfig.startsAt||0),endsAt=parseFloat(effectsConfig.endsAt||1),noop=function(){},runFn=0===startsAt&&1===endsAt?effectDef.run:function(progress,y){effectDef.run.call(this,Math.max(0,(progress-startsAt)/(endsAt-startsAt)),y)};return{setUp:effectDef.setUp?effectDef.setUp.bind(this,effectsConfig):noop,run:effectDef.run?runFn.bind(this):noop,tearDown:effectDef.tearDown?effectDef.tearDown.bind(this):noop}},_setUpEffect:function _setUpEffect(){if(this.isAttached&&this._effects){this._effectsRunFn=[];this._effects.forEach(function(effectDef){if(!1!==effectDef.setUp()){this._effectsRunFn.push(effectDef.run)}},this)}},_tearDownEffects:function _tearDownEffects(){if(this._effects){this._effects.forEach(function(effectDef){effectDef.tearDown()})}this._effectsRunFn=[];this._effects=[]},_runEffects:function _runEffects(p,y){if(this._effectsRunFn){this._effectsRunFn.forEach(function(run){run(p,y)})}},_scrollHandler:function _scrollHandler(){if(!this.disabled){var scrollTop=this._clampedScrollTop;this._updateScrollState(scrollTop);if(0<this.threshold){this._setThresholdTriggered(scrollTop>=this.threshold)}}},_getDOMRef:function _getDOMRef(id){console.warn("_getDOMRef","`"+id+"` is undefined")},_getUndefinedMsg:function _getUndefinedMsg(effectName){return"Scroll effect `"+effectName+"` is undefined. "+"Did you forget to import app-layout/app-scroll-effects/effects/"+effectName+".html ?"}}];</script><script>Polymer.AppLayoutBehavior=[Polymer.IronResizableBehavior,{listeners:{"app-reset-layout":"_appResetLayoutHandler","iron-resize":"resetLayout"},attached:function attached(){this.fire("app-reset-layout")},_appResetLayoutHandler:function _appResetLayoutHandler(e){if(Polymer.dom(e).path[0]===this){return}this.resetLayout();e.stopPropagation()},_updateLayoutStates:function _updateLayoutStates(){console.error("unimplemented")},resetLayout:function resetLayout(){var self=this,cb=this._updateLayoutStates.bind(this);if(Polymer.Async&&Polymer.Async.animationFrame){this._layoutDebouncer=Polymer.Debouncer.debounce(this._layoutDebouncer,Polymer.Async.animationFrame,cb);Polymer.enqueueDebouncer(this._layoutDebouncer)}else{this.debounce("resetLayout",cb)}this._notifyDescendantResize()},_notifyLayoutChanged:function _notifyLayoutChanged(){var self=this;requestAnimationFrame(function(){self.fire("app-reset-layout")})},_notifyDescendantResize:function _notifyDescendantResize(){if(!this.isAttached){return}this._interestedResizables.forEach(function(resizable){if(this.resizerShouldNotify(resizable)){this._notifyDescendant(resizable)}},this)}}];</script><dom-module id="app-header" assetpath="../bower_components/app-layout/app-header/"><template><style>:host {
        position: relative;
        display: block;
        transition-timing-function: linear;
        transition-property: -webkit-transform;
        transition-property: transform;
      }

      :host::before {
        position: absolute;
        right: 0px;
        bottom: -5px;
        left: 0px;
        width: 100%;
        height: 5px;
        content: "";
        transition: opacity 0.4s;
        pointer-events: none;
        opacity: 0;
        box-shadow: inset 0px 5px 6px -3px rgba(0, 0, 0, 0.4);
        will-change: opacity;
        @apply --app-header-shadow;
      }

      :host([shadow])::before {
        opacity: 1;
      }

      #background {
        @apply --layout-fit;
        overflow: hidden;
      }

      #backgroundFrontLayer,
      #backgroundRearLayer {
        @apply --layout-fit;
        height: 100%;
        pointer-events: none;
        background-size: cover;
      }

      #backgroundFrontLayer {
        @apply --app-header-background-front-layer;
      }

      #backgroundRearLayer {
        opacity: 0;
        @apply --app-header-background-rear-layer;
      }

      #contentContainer {
        position: relative;
        width: 100%;
        height: 100%;
      }

      :host([disabled]),
      :host([disabled])::after,
      :host([disabled]) #backgroundFrontLayer,
      :host([disabled]) #backgroundRearLayer,
      /* Silent scrolling should not run CSS transitions */
      :host([silent-scroll]),
      :host([silent-scroll])::after,
      :host([silent-scroll]) #backgroundFrontLayer,
      :host([silent-scroll]) #backgroundRearLayer {
        transition: none !important;
      }

      :host([disabled]) ::slotted(app-toolbar:first-of-type),
      :host([disabled]) ::slotted([sticky]),
      /* Silent scrolling should not run CSS transitions */
      :host([silent-scroll]) ::slotted(app-toolbar:first-of-type),
      :host([silent-scroll]) ::slotted([sticky]) {
        transition: none !important;
      }</style><div id="contentContainer"><slot id="slot"></slot></div></template><script>Polymer({is:"app-header",behaviors:[Polymer.AppScrollEffectsBehavior,Polymer.AppLayoutBehavior],properties:{condenses:{type:Boolean,value:!1},fixed:{type:Boolean,value:!1},reveals:{type:Boolean,value:!1},shadow:{type:Boolean,reflectToAttribute:!0,value:!1}},observers:["_configChanged(isAttached, condenses, fixed)"],_height:0,_dHeight:0,_stickyElTop:0,_stickyElRef:null,_top:0,_progress:0,_wasScrollingDown:!1,_initScrollTop:0,_initTimestamp:0,_lastTimestamp:0,_lastScrollTop:0,get _maxHeaderTop(){return this.fixed?this._dHeight:this._height+5},get _stickyEl(){if(this._stickyElRef){return this._stickyElRef}for(var nodes=Polymer.dom(this.$.slot).getDistributedNodes(),i=0,node;node=nodes[i];i++){if(node.nodeType===Node.ELEMENT_NODE){if(node.hasAttribute("sticky")){this._stickyElRef=node;break}else if(!this._stickyElRef){this._stickyElRef=node}}}return this._stickyElRef},_configChanged:function _configChanged(){this.resetLayout();this._notifyLayoutChanged()},_updateLayoutStates:function _updateLayoutStates(){if(0===this.offsetWidth&&0===this.offsetHeight){return}var scrollTop=this._clampedScrollTop,firstSetup=0===this._height||0===scrollTop,currentDisabled=this.disabled;this._height=this.offsetHeight;this._stickyElRef=null;this.disabled=!0;if(!firstSetup){this._updateScrollState(0,!0)}if(this._mayMove()){this._dHeight=this._stickyEl?this._height-this._stickyEl.offsetHeight:0}else{this._dHeight=0}this._stickyElTop=this._stickyEl?this._stickyEl.offsetTop:0;this._setUpEffect();if(firstSetup){this._updateScrollState(scrollTop,!0)}else{this._updateScrollState(this._lastScrollTop,!0);this._layoutIfDirty()}this.disabled=currentDisabled},_updateScrollState:function _updateScrollState(scrollTop,forceUpdate){var _Mathabs=Math.abs;if(0===this._height){return}var progress=0,top=0,lastTop=this._top,lastScrollTop=this._lastScrollTop,maxHeaderTop=this._maxHeaderTop,dScrollTop=scrollTop-this._lastScrollTop,absDScrollTop=_Mathabs(dScrollTop),isScrollingDown=scrollTop>this._lastScrollTop,now=performance.now();if(this._mayMove()){top=this._clamp(this.reveals?lastTop+dScrollTop:scrollTop,0,maxHeaderTop)}if(scrollTop>=this._dHeight){top=this.condenses&&!this.fixed?Math.max(this._dHeight,top):top;this.style.transitionDuration="0ms"}if(this.reveals&&!this.disabled&&100>absDScrollTop){if(300<now-this._initTimestamp||this._wasScrollingDown!==isScrollingDown){this._initScrollTop=scrollTop;this._initTimestamp=now}if(scrollTop>=maxHeaderTop){if(30<_Mathabs(this._initScrollTop-scrollTop)||10<absDScrollTop){if(isScrollingDown&&scrollTop>=maxHeaderTop){top=maxHeaderTop}else if(!isScrollingDown&&scrollTop>=this._dHeight){top=this.condenses&&!this.fixed?this._dHeight:0}var scrollVelocity=dScrollTop/(now-this._lastTimestamp);this.style.transitionDuration=this._clamp((top-lastTop)/scrollVelocity,0,300)+"ms"}else{top=this._top}}}if(0===this._dHeight){progress=0<scrollTop?1:0}else{progress=top/this._dHeight}if(!forceUpdate){this._lastScrollTop=scrollTop;this._top=top;this._wasScrollingDown=isScrollingDown;this._lastTimestamp=now}if(forceUpdate||progress!==this._progress||lastTop!==top||0===scrollTop){this._progress=progress;this._runEffects(progress,top);this._transformHeader(top)}},_mayMove:function _mayMove(){return this.condenses||!this.fixed},willCondense:function willCondense(){return 0<this._dHeight&&this.condenses},isOnScreen:function isOnScreen(){return 0!==this._height&&this._top<this._height},isContentBelow:function isContentBelow(){return 0===this._top?0<this._clampedScrollTop:0<=this._clampedScrollTop-this._maxHeaderTop},_transformHeader:function _transformHeader(y){this.translate3d(0,-y+"px",0);if(this._stickyEl){this.translate3d(0,this.condenses&&y>=this._stickyElTop?Math.min(y,this._dHeight)-this._stickyElTop+"px":0,0,this._stickyEl)}},_clamp:function _clamp(v,min,max){return Math.min(max,Math.max(min,v))},_ensureBgContainers:function _ensureBgContainers(){if(!this._bgContainer){this._bgContainer=document.createElement("div");this._bgContainer.id="background";this._bgRear=document.createElement("div");this._bgRear.id="backgroundRearLayer";this._bgContainer.appendChild(this._bgRear);this._bgFront=document.createElement("div");this._bgFront.id="backgroundFrontLayer";this._bgContainer.appendChild(this._bgFront);Polymer.dom(this.root).insertBefore(this._bgContainer,this.$.contentContainer)}},_getDOMRef:function _getDOMRef(id){switch(id){case"backgroundFrontLayer":this._ensureBgContainers();return this._bgFront;case"backgroundRearLayer":this._ensureBgContainers();return this._bgRear;case"background":this._ensureBgContainers();return this._bgContainer;case"mainTitle":return Polymer.dom(this).querySelector("[main-title]");case"condensedTitle":return Polymer.dom(this).querySelector("[condensed-title]");}return null},getScrollState:function getScrollState(){return{progress:this._progress,top:this._top}}});</script></dom-module><dom-module id="app-header-layout" assetpath="../bower_components/app-layout/app-header-layout/"><template><style>:host {
        display: block;
        /**
         * Force app-header-layout to have its own stacking context so that its parent can
         * control the stacking of it relative to other elements (e.g. app-drawer-layout).
         * This could be done using `isolation: isolate`, but that's not well supported
         * across browsers.
         */
        position: relative;
        z-index: 0;
      }

      #wrapper ::slotted([slot=header]) {
        @apply --layout-fixed-top;
        z-index: 1;
      }

      #wrapper.initializing ::slotted([slot=header]) {
        position: relative;
      }

      :host([has-scrolling-region]) {
        height: 100%;
      }

      :host([has-scrolling-region]) #wrapper ::slotted([slot=header]) {
        position: absolute;
      }

      :host([has-scrolling-region]) #wrapper.initializing ::slotted([slot=header]) {
        position: relative;
      }

      :host([has-scrolling-region]) #wrapper #contentContainer {
        @apply --layout-fit;
        overflow-y: auto;
        -webkit-overflow-scrolling: touch;
      }

      :host([has-scrolling-region]) #wrapper.initializing #contentContainer {
        position: relative;
      }

      :host([fullbleed]) {
        @apply --layout-vertical;
        @apply --layout-fit;
      }

      :host([fullbleed]) #wrapper,
      :host([fullbleed]) #wrapper #contentContainer {
        @apply --layout-vertical;
        @apply --layout-flex;
      }

      #contentContainer {
        /* Create a stacking context here so that all children appear below the header. */
        position: relative;
        z-index: 0;
      }</style><div id="wrapper" class="initializing"><slot id="headerSlot" name="header"></slot><div id="contentContainer"><slot></slot></div></div></template><script>Polymer({is:"app-header-layout",behaviors:[Polymer.AppLayoutBehavior],properties:{hasScrollingRegion:{type:Boolean,value:!1,reflectToAttribute:!0}},observers:["resetLayout(isAttached, hasScrollingRegion)"],get header(){return Polymer.dom(this.$.headerSlot).getDistributedNodes()[0]},_updateLayoutStates:function _updateLayoutStates(){var header=this.header;if(!this.isAttached||!header){return}this.$.wrapper.classList.remove("initializing");header.scrollTarget=this.hasScrollingRegion?this.$.contentContainer:this.ownerDocument.documentElement;var headerHeight=header.offsetHeight;if(!this.hasScrollingRegion){requestAnimationFrame(function(){var rect=this.getBoundingClientRect(),rightOffset=document.documentElement.clientWidth-rect.right;header.style.left=rect.left+"px";header.style.right=rightOffset+"px"}.bind(this))}else{header.style.left="";header.style.right=""}var containerStyle=this.$.contentContainer.style;if(header.fixed&&!header.condenses&&this.hasScrollingRegion){containerStyle.marginTop=headerHeight+"px";containerStyle.paddingTop=""}else{containerStyle.paddingTop=headerHeight+"px";containerStyle.marginTop=""}}});</script></dom-module><dom-module id="app-toolbar" assetpath="../bower_components/app-layout/app-toolbar/"><template><style>:host {
        @apply --layout-horizontal;
        @apply --layout-center;
        position: relative;
        height: 64px;
        padding: 0 16px;
        pointer-events: none;
        font-size: var(--app-toolbar-font-size, 20px);
      }

      :host ::slotted(*) {
        pointer-events: auto;
      }

      :host ::slotted(paper-icon-button) {
        /* paper-icon-button/issues/33 */
        font-size: 0;
      }

      :host ::slotted([main-title]),
      :host ::slotted([condensed-title]) {
        pointer-events: none;
        @apply --layout-flex;
      }

      :host ::slotted([bottom-item]) {
        position: absolute;
        right: 0;
        bottom: 0;
        left: 0;
      }

      :host ::slotted([top-item]) {
        position: absolute;
        top: 0;
        right: 0;
        left: 0;
      }

      :host ::slotted([spacer]) {
        margin-left: 64px;
      }</style><slot></slot></template><script>Polymer({is:"app-toolbar"});</script></dom-module><script>Polymer.IronMultiSelectableBehaviorImpl={properties:{multi:{type:Boolean,value:!1,observer:"multiChanged"},selectedValues:{type:Array,notify:!0,value:function value(){return[]}},selectedItems:{type:Array,readOnly:!0,notify:!0,value:function value(){return[]}}},observers:["_updateSelected(selectedValues.splices)"],select:function select(value){if(this.multi){this._toggleSelected(value)}else{this.selected=value}},multiChanged:function multiChanged(multi){this._selection.multi=multi;this._updateSelected()},get _shouldUpdateSelection(){return null!=this.selected||null!=this.selectedValues&&this.selectedValues.length},_updateAttrForSelected:function _updateAttrForSelected(){if(!this.multi){Polymer.IronSelectableBehavior._updateAttrForSelected.apply(this)}else if(this.selectedItems&&0<this.selectedItems.length){this.selectedValues=this.selectedItems.map(function(selectedItem){return this._indexToValue(this.indexOf(selectedItem))},this).filter(function(unfilteredValue){return null!=unfilteredValue},this)}},_updateSelected:function _updateSelected(){if(this.multi){this._selectMulti(this.selectedValues)}else{this._selectSelected(this.selected)}},_selectMulti:function _selectMulti(values){values=values||[];var selectedItems=(this._valuesToItems(values)||[]).filter(function(item){return null!==item&&item!==void 0});this._selection.clear(selectedItems);for(var i=0;i<selectedItems.length;i++){this._selection.setItemSelected(selectedItems[i],!0)}if(this.fallbackSelection&&!this._selection.get().length){var fallback=this._valueToItem(this.fallbackSelection);if(fallback){this.select(this.fallbackSelection)}}},_selectionChange:function _selectionChange(){var s=this._selection.get();if(this.multi){this._setSelectedItems(s);this._setSelectedItem(s.length?s[0]:null)}else{if(null!==s&&s!==void 0){this._setSelectedItems([s]);this._setSelectedItem(s)}else{this._setSelectedItems([]);this._setSelectedItem(null)}}},_toggleSelected:function _toggleSelected(value){var i=this.selectedValues.indexOf(value);if(0>i){this.push("selectedValues",value)}else{this.splice("selectedValues",i,1)}},_valuesToItems:function _valuesToItems(values){return null==values?null:values.map(function(value){return this._valueToItem(value)},this)}};Polymer.IronMultiSelectableBehavior=[Polymer.IronSelectableBehavior,Polymer.IronMultiSelectableBehaviorImpl];</script><script>(function(){"use strict";var _StringfromCharCode=String.fromCharCode,KEY_IDENTIFIER={"U+0008":"backspace","U+0009":"tab","U+001B":"esc","U+0020":"space","U+007F":"del"},KEY_CODE={8:"backspace",9:"tab",13:"enter",27:"esc",33:"pageup",34:"pagedown",35:"end",36:"home",32:"space",37:"left",38:"up",39:"right",40:"down",46:"del",106:"*"},MODIFIER_KEYS={shift:"shiftKey",ctrl:"ctrlKey",alt:"altKey",meta:"metaKey"},KEY_CHAR=/[a-z0-9*]/,IDENT_CHAR=/U\+/,ARROW_KEY=/^arrow/,SPACE_KEY=/^space(bar)?/,ESC_KEY=/^escape$/;function transformKey(key,noSpecialChars){var validKey="";if(key){var lKey=key.toLowerCase();if(" "===lKey||SPACE_KEY.test(lKey)){validKey="space"}else if(ESC_KEY.test(lKey)){validKey="esc"}else if(1==lKey.length){if(!noSpecialChars||KEY_CHAR.test(lKey)){validKey=lKey}}else if(ARROW_KEY.test(lKey)){validKey=lKey.replace("arrow","")}else if("multiply"==lKey){validKey="*"}else{validKey=lKey}}return validKey}function transformKeyIdentifier(keyIdent){var validKey="";if(keyIdent){if(keyIdent in KEY_IDENTIFIER){validKey=KEY_IDENTIFIER[keyIdent]}else if(IDENT_CHAR.test(keyIdent)){keyIdent=parseInt(keyIdent.replace("U+","0x"),16);validKey=_StringfromCharCode(keyIdent).toLowerCase()}else{validKey=keyIdent.toLowerCase()}}return validKey}function transformKeyCode(keyCode){var validKey="";if(+keyCode){if(65<=keyCode&&90>=keyCode){validKey=_StringfromCharCode(32+keyCode)}else if(112<=keyCode&&123>=keyCode){validKey="f"+(keyCode-112+1)}else if(48<=keyCode&&57>=keyCode){validKey=keyCode-48+""}else if(96<=keyCode&&105>=keyCode){validKey=keyCode-96+""}else{validKey=KEY_CODE[keyCode]}}return validKey}function normalizedKeyForEvent(keyEvent,noSpecialChars){if(keyEvent.key){return transformKey(keyEvent.key,noSpecialChars)}if(keyEvent.detail&&keyEvent.detail.key){return transformKey(keyEvent.detail.key,noSpecialChars)}return transformKeyIdentifier(keyEvent.keyIdentifier)||transformKeyCode(keyEvent.keyCode)||""}function keyComboMatchesEvent(keyCombo,event){var keyEvent=normalizedKeyForEvent(event,keyCombo.hasModifiers);return keyEvent===keyCombo.key&&(!keyCombo.hasModifiers||!!event.shiftKey===!!keyCombo.shiftKey&&!!event.ctrlKey===!!keyCombo.ctrlKey&&!!event.altKey===!!keyCombo.altKey&&!!event.metaKey===!!keyCombo.metaKey)}function parseKeyComboString(keyComboString){if(1===keyComboString.length){return{combo:keyComboString,key:keyComboString,event:"keydown"}}return keyComboString.split("+").reduce(function(parsedKeyCombo,keyComboPart){var eventParts=keyComboPart.split(":"),keyName=eventParts[0],event=eventParts[1];if(keyName in MODIFIER_KEYS){parsedKeyCombo[MODIFIER_KEYS[keyName]]=!0;parsedKeyCombo.hasModifiers=!0}else{parsedKeyCombo.key=keyName;parsedKeyCombo.event=event||"keydown"}return parsedKeyCombo},{combo:keyComboString.split(":").shift()})}function parseEventString(eventString){return eventString.trim().split(" ").map(function(keyComboString){return parseKeyComboString(keyComboString)})}Polymer.IronA11yKeysBehavior={properties:{keyEventTarget:{type:Object,value:function value(){return this}},stopKeyboardEventPropagation:{type:Boolean,value:!1},_boundKeyHandlers:{type:Array,value:function value(){return[]}},_imperativeKeyBindings:{type:Object,value:function value(){return{}}}},observers:["_resetKeyEventListeners(keyEventTarget, _boundKeyHandlers)"],keyBindings:{},registered:function registered(){this._prepKeyBindings()},attached:function attached(){this._listenKeyEventListeners()},detached:function detached(){this._unlistenKeyEventListeners()},addOwnKeyBinding:function addOwnKeyBinding(eventString,handlerName){this._imperativeKeyBindings[eventString]=handlerName;this._prepKeyBindings();this._resetKeyEventListeners()},removeOwnKeyBindings:function removeOwnKeyBindings(){this._imperativeKeyBindings={};this._prepKeyBindings();this._resetKeyEventListeners()},keyboardEventMatchesKeys:function keyboardEventMatchesKeys(event,eventString){for(var keyCombos=parseEventString(eventString),i=0;i<keyCombos.length;++i){if(keyComboMatchesEvent(keyCombos[i],event)){return!0}}return!1},_collectKeyBindings:function _collectKeyBindings(){var keyBindings=this.behaviors.map(function(behavior){return behavior.keyBindings});if(-1===keyBindings.indexOf(this.keyBindings)){keyBindings.push(this.keyBindings)}return keyBindings},_prepKeyBindings:function _prepKeyBindings(){this._keyBindings={};this._collectKeyBindings().forEach(function(keyBindings){for(var eventString in keyBindings){this._addKeyBinding(eventString,keyBindings[eventString])}},this);for(var eventString in this._imperativeKeyBindings){this._addKeyBinding(eventString,this._imperativeKeyBindings[eventString])}for(var eventName in this._keyBindings){this._keyBindings[eventName].sort(function(kb1,kb2){var b1=kb1[0].hasModifiers,b2=kb2[0].hasModifiers;return b1===b2?0:b1?-1:1})}},_addKeyBinding:function _addKeyBinding(eventString,handlerName){parseEventString(eventString).forEach(function(keyCombo){this._keyBindings[keyCombo.event]=this._keyBindings[keyCombo.event]||[];this._keyBindings[keyCombo.event].push([keyCombo,handlerName])},this)},_resetKeyEventListeners:function _resetKeyEventListeners(){this._unlistenKeyEventListeners();if(this.isAttached){this._listenKeyEventListeners()}},_listenKeyEventListeners:function _listenKeyEventListeners(){if(!this.keyEventTarget){return}Object.keys(this._keyBindings).forEach(function(eventName){var keyBindings=this._keyBindings[eventName],boundKeyHandler=this._onKeyBindingEvent.bind(this,keyBindings);this._boundKeyHandlers.push([this.keyEventTarget,eventName,boundKeyHandler]);this.keyEventTarget.addEventListener(eventName,boundKeyHandler)},this)},_unlistenKeyEventListeners:function _unlistenKeyEventListeners(){var keyHandlerTuple,keyEventTarget,eventName,boundKeyHandler;while(this._boundKeyHandlers.length){keyHandlerTuple=this._boundKeyHandlers.pop();keyEventTarget=keyHandlerTuple[0];eventName=keyHandlerTuple[1];boundKeyHandler=keyHandlerTuple[2];keyEventTarget.removeEventListener(eventName,boundKeyHandler)}},_onKeyBindingEvent:function _onKeyBindingEvent(keyBindings,event){if(this.stopKeyboardEventPropagation){event.stopPropagation()}if(event.defaultPrevented){return}for(var i=0;i<keyBindings.length;i++){var keyCombo=keyBindings[i][0],handlerName=keyBindings[i][1];if(keyComboMatchesEvent(keyCombo,event)){this._triggerKeyHandler(keyCombo,handlerName,event);if(event.defaultPrevented){return}}}},_triggerKeyHandler:function _triggerKeyHandler(keyCombo,handlerName,keyboardEvent){var detail=Object.create(keyCombo);detail.keyboardEvent=keyboardEvent;var event=new CustomEvent(keyCombo.event,{detail:detail,cancelable:!0});this[handlerName].call(this,event);if(event.defaultPrevented){keyboardEvent.preventDefault()}}}})();</script><script>Polymer.IronMenuBehaviorImpl={properties:{focusedItem:{observer:"_focusedItemChanged",readOnly:!0,type:Object},attrForItemTitle:{type:String},disabled:{type:Boolean,value:!1,observer:"_disabledChanged"}},_MODIFIER_KEYS:["Alt","AltGraph","CapsLock","Control","Fn","FnLock","Hyper","Meta","NumLock","OS","ScrollLock","Shift","Super","Symbol","SymbolLock"],_SEARCH_RESET_TIMEOUT_MS:1e3,_previousTabIndex:0,hostAttributes:{role:"menu"},observers:["_updateMultiselectable(multi)"],listeners:{focus:"_onFocus",keydown:"_onKeydown","iron-items-changed":"_onIronItemsChanged"},keyBindings:{up:"_onUpKey",down:"_onDownKey",esc:"_onEscKey","shift+tab:keydown":"_onShiftTabDown"},attached:function attached(){this._resetTabindices()},select:function select(value){if(this._defaultFocusAsync){this.cancelAsync(this._defaultFocusAsync);this._defaultFocusAsync=null}var item=this._valueToItem(value);if(item&&item.hasAttribute("disabled"))return;this._setFocusedItem(item);Polymer.IronMultiSelectableBehaviorImpl.select.apply(this,arguments)},_resetTabindices:function _resetTabindices(){var selectedItem=this.multi?this.selectedItems&&this.selectedItems[0]:this.selectedItem;this.items.forEach(function(item){item.setAttribute("tabindex",item===selectedItem?"0":"-1")},this)},_updateMultiselectable:function _updateMultiselectable(multi){if(multi){this.setAttribute("aria-multiselectable","true")}else{this.removeAttribute("aria-multiselectable")}},_focusWithKeyboardEvent:function _focusWithKeyboardEvent(event){if(-1!==this._MODIFIER_KEYS.indexOf(event.key))return;this.cancelDebouncer("_clearSearchText");var searchText=this._searchText||"",key=event.key&&1==event.key.length?event.key:String.fromCharCode(event.keyCode);searchText+=key.toLocaleLowerCase();for(var searchLength=searchText.length,i=0,item;item=this.items[i];i++){if(item.hasAttribute("disabled")){continue}var attr=this.attrForItemTitle||"textContent",title=(item[attr]||item.getAttribute(attr)||"").trim();if(title.length<searchLength){continue}if(title.slice(0,searchLength).toLocaleLowerCase()==searchText){this._setFocusedItem(item);break}}this._searchText=searchText;this.debounce("_clearSearchText",this._clearSearchText,this._SEARCH_RESET_TIMEOUT_MS)},_clearSearchText:function _clearSearchText(){this._searchText=""},_focusPrevious:function _focusPrevious(){for(var length=this.items.length,curFocusIndex=+this.indexOf(this.focusedItem),i=1,item;i<length+1;i++){item=this.items[(curFocusIndex-i+length)%length];if(!item.hasAttribute("disabled")){var owner=Polymer.dom(item).getOwnerRoot()||document;this._setFocusedItem(item);if(Polymer.dom(owner).activeElement==item){return}}}},_focusNext:function _focusNext(){for(var length=this.items.length,curFocusIndex=+this.indexOf(this.focusedItem),i=1,item;i<length+1;i++){item=this.items[(curFocusIndex+i)%length];if(!item.hasAttribute("disabled")){var owner=Polymer.dom(item).getOwnerRoot()||document;this._setFocusedItem(item);if(Polymer.dom(owner).activeElement==item){return}}}},_applySelection:function _applySelection(item,isSelected){if(isSelected){item.setAttribute("aria-selected","true")}else{item.removeAttribute("aria-selected")}Polymer.IronSelectableBehavior._applySelection.apply(this,arguments)},_focusedItemChanged:function _focusedItemChanged(focusedItem,old){old&&old.setAttribute("tabindex","-1");if(focusedItem&&!focusedItem.hasAttribute("disabled")&&!this.disabled){focusedItem.setAttribute("tabindex","0");focusedItem.focus()}},_onIronItemsChanged:function _onIronItemsChanged(event){if(event.detail.addedNodes.length){this._resetTabindices()}},_onShiftTabDown:function _onShiftTabDown(){var oldTabIndex=this.getAttribute("tabindex");Polymer.IronMenuBehaviorImpl._shiftTabPressed=!0;this._setFocusedItem(null);this.setAttribute("tabindex","-1");this.async(function(){this.setAttribute("tabindex",oldTabIndex);Polymer.IronMenuBehaviorImpl._shiftTabPressed=!1},1)},_onFocus:function _onFocus(event){if(Polymer.IronMenuBehaviorImpl._shiftTabPressed){return}var rootTarget=Polymer.dom(event).rootTarget;if(rootTarget!==this&&"undefined"!==typeof rootTarget.tabIndex&&!this.isLightDescendant(rootTarget)){return}this._defaultFocusAsync=this.async(function(){var selectedItem=this.multi?this.selectedItems&&this.selectedItems[0]:this.selectedItem;this._setFocusedItem(null);if(selectedItem){this._setFocusedItem(selectedItem)}else if(this.items[0]){this._focusNext()}})},_onUpKey:function _onUpKey(event){this._focusPrevious();event.detail.keyboardEvent.preventDefault()},_onDownKey:function _onDownKey(event){this._focusNext();event.detail.keyboardEvent.preventDefault()},_onEscKey:function _onEscKey(){var focusedItem=this.focusedItem;if(focusedItem){focusedItem.blur()}},_onKeydown:function _onKeydown(event){if(!this.keyboardEventMatchesKeys(event,"up down esc")){this._focusWithKeyboardEvent(event)}event.stopPropagation()},_activateHandler:function _activateHandler(event){Polymer.IronSelectableBehavior._activateHandler.call(this,event);event.stopPropagation()},_disabledChanged:function _disabledChanged(disabled){if(disabled){this._previousTabIndex=this.hasAttribute("tabindex")?this.tabIndex:0;this.removeAttribute("tabindex")}else if(!this.hasAttribute("tabindex")){this.setAttribute("tabindex",this._previousTabIndex)}}};Polymer.IronMenuBehaviorImpl._shiftTabPressed=!1;Polymer.IronMenuBehavior=[Polymer.IronMultiSelectableBehavior,Polymer.IronA11yKeysBehavior,Polymer.IronMenuBehaviorImpl];</script><dom-module id="iron-icon" assetpath="../bower_components/iron-icon/"><template><style>:host {
        @apply --layout-inline;
        @apply --layout-center-center;
        position: relative;

        vertical-align: middle;

        fill: var(--iron-icon-fill-color, currentcolor);
        stroke: var(--iron-icon-stroke-color, none);

        width: var(--iron-icon-width, 24px);
        height: var(--iron-icon-height, 24px);
        @apply --iron-icon;
      }

      :host([hidden]) {
        display: none;
      }</style></template><script>Polymer({is:"iron-icon",properties:{icon:{type:String},theme:{type:String},src:{type:String},_meta:{value:Polymer.Base.create("iron-meta",{type:"iconset"})}},observers:["_updateIcon(_meta, isAttached)","_updateIcon(theme, isAttached)","_srcChanged(src, isAttached)","_iconChanged(icon, isAttached)"],_DEFAULT_ICONSET:"icons",_iconChanged:function _iconChanged(icon){var parts=(icon||"").split(":");this._iconName=parts.pop();this._iconsetName=parts.pop()||this._DEFAULT_ICONSET;this._updateIcon()},_srcChanged:function _srcChanged(){this._updateIcon()},_usesIconset:function _usesIconset(){return this.icon||!this.src},_updateIcon:function _updateIcon(){if(this._usesIconset()){if(this._img&&this._img.parentNode){Polymer.dom(this.root).removeChild(this._img)}if(""===this._iconName){if(this._iconset){this._iconset.removeIcon(this)}}else if(this._iconsetName&&this._meta){this._iconset=this._meta.byKey(this._iconsetName);if(this._iconset){this._iconset.applyIcon(this,this._iconName,this.theme);this.unlisten(window,"iron-iconset-added","_updateIcon")}else{this.listen(window,"iron-iconset-added","_updateIcon")}}}else{if(this._iconset){this._iconset.removeIcon(this)}if(!this._img){this._img=document.createElement("img");this._img.style.width="100%";this._img.style.height="100%";this._img.draggable=!1}this._img.src=this.src;Polymer.dom(this.root).appendChild(this._img)}}});</script></dom-module><script>Polymer.IronControlState={properties:{focused:{type:Boolean,value:!1,notify:!0,readOnly:!0,reflectToAttribute:!0},disabled:{type:Boolean,value:!1,notify:!0,observer:"_disabledChanged",reflectToAttribute:!0},_oldTabIndex:{type:String},_boundFocusBlurHandler:{type:Function,value:function value(){return this._focusBlurHandler.bind(this)}},__handleEventRetargeting:{type:Boolean,value:function value(){return!this.shadowRoot&&!Polymer.Element}}},observers:["_changedControlState(focused, disabled)"],ready:function ready(){this.addEventListener("focus",this._boundFocusBlurHandler,!0);this.addEventListener("blur",this._boundFocusBlurHandler,!0)},_focusBlurHandler:function _focusBlurHandler(event){if(Polymer.Element){this._setFocused("focus"===event.type);return}if(event.target===this){this._setFocused("focus"===event.type)}else if(this.__handleEventRetargeting){var target=Polymer.dom(event).localTarget;if(!this.isLightDescendant(target)){this.fire(event.type,{sourceEvent:event},{node:this,bubbles:event.bubbles,cancelable:event.cancelable})}}},_disabledChanged:function _disabledChanged(disabled){this.setAttribute("aria-disabled",disabled?"true":"false");this.style.pointerEvents=disabled?"none":"";if(disabled){this._oldTabIndex=this.getAttribute("tabindex");this._setFocused(!1);this.tabIndex=-1;this.blur()}else if(this._oldTabIndex!==void 0){if(null===this._oldTabIndex){this.removeAttribute("tabindex")}else{this.setAttribute("tabindex",this._oldTabIndex)}}},_changedControlState:function _changedControlState(){if(this._controlStateChanged){this._controlStateChanged()}}};</script><script>Polymer.IronButtonStateImpl={properties:{pressed:{type:Boolean,readOnly:!0,value:!1,reflectToAttribute:!0,observer:"_pressedChanged"},toggles:{type:Boolean,value:!1,reflectToAttribute:!0},active:{type:Boolean,value:!1,notify:!0,reflectToAttribute:!0},pointerDown:{type:Boolean,readOnly:!0,value:!1},receivedFocusFromKeyboard:{type:Boolean,readOnly:!0},ariaActiveAttribute:{type:String,value:"aria-pressed",observer:"_ariaActiveAttributeChanged"}},listeners:{down:"_downHandler",up:"_upHandler",tap:"_tapHandler"},observers:["_focusChanged(focused)","_activeChanged(active, ariaActiveAttribute)"],keyBindings:{"enter:keydown":"_asyncClick","space:keydown":"_spaceKeyDownHandler","space:keyup":"_spaceKeyUpHandler"},_mouseEventRe:/^mouse/,_tapHandler:function _tapHandler(){if(this.toggles){this._userActivate(!this.active)}else{this.active=!1}},_focusChanged:function _focusChanged(focused){this._detectKeyboardFocus(focused);if(!focused){this._setPressed(!1)}},_detectKeyboardFocus:function _detectKeyboardFocus(focused){this._setReceivedFocusFromKeyboard(!this.pointerDown&&focused)},_userActivate:function _userActivate(active){if(this.active!==active){this.active=active;this.fire("change")}},_downHandler:function _downHandler(){this._setPointerDown(!0);this._setPressed(!0);this._setReceivedFocusFromKeyboard(!1)},_upHandler:function _upHandler(){this._setPointerDown(!1);this._setPressed(!1)},_spaceKeyDownHandler:function _spaceKeyDownHandler(event){var keyboardEvent=event.detail.keyboardEvent,target=Polymer.dom(keyboardEvent).localTarget;if(this.isLightDescendant(target))return;keyboardEvent.preventDefault();keyboardEvent.stopImmediatePropagation();this._setPressed(!0)},_spaceKeyUpHandler:function _spaceKeyUpHandler(event){var keyboardEvent=event.detail.keyboardEvent,target=Polymer.dom(keyboardEvent).localTarget;if(this.isLightDescendant(target))return;if(this.pressed){this._asyncClick()}this._setPressed(!1)},_asyncClick:function _asyncClick(){this.async(function(){this.click()},1)},_pressedChanged:function _pressedChanged(){this._changedButtonState()},_ariaActiveAttributeChanged:function _ariaActiveAttributeChanged(value,oldValue){if(oldValue&&oldValue!=value&&this.hasAttribute(oldValue)){this.removeAttribute(oldValue)}},_activeChanged:function _activeChanged(active){if(this.toggles){this.setAttribute(this.ariaActiveAttribute,active?"true":"false")}else{this.removeAttribute(this.ariaActiveAttribute)}this._changedButtonState()},_controlStateChanged:function _controlStateChanged(){if(this.disabled){this._setPressed(!1)}else{this._changedButtonState()}},_changedButtonState:function _changedButtonState(){if(this._buttonStateChanged){this._buttonStateChanged()}}};Polymer.IronButtonState=[Polymer.IronA11yKeysBehavior,Polymer.IronButtonStateImpl];</script><dom-module id="paper-ripple" assetpath="../bower_components/paper-ripple/"><template><style>:host {
        display: block;
        position: absolute;
        border-radius: inherit;
        overflow: hidden;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;

        /* See PolymerElements/paper-behaviors/issues/34. On non-Chrome browsers,
         * creating a node (with a position:absolute) in the middle of an event
         * handler "interrupts" that event handler (which happens when the
         * ripple is created on demand) */
        pointer-events: none;
      }

      :host([animating]) {
        /* This resolves a rendering issue in Chrome (as of 40) where the
           ripple is not properly clipped by its parent (which may have
           rounded corners). See: http://jsbin.com/temexa/4

           Note: We only apply this style conditionally. Otherwise, the browser
           will create a new compositing layer for every ripple element on the
           page, and that would be bad. */
        -webkit-transform: translate(0, 0);
        transform: translate3d(0, 0, 0);
      }

      #background,
      #waves,
      .wave-container,
      .wave {
        pointer-events: none;
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
      }

      #background,
      .wave {
        opacity: 0;
      }

      #waves,
      .wave {
        overflow: hidden;
      }

      .wave-container,
      .wave {
        border-radius: 50%;
      }

      :host(.circle) #background,
      :host(.circle) #waves {
        border-radius: 50%;
      }

      :host(.circle) .wave-container {
        overflow: hidden;
      }</style><div id="background"></div><div id="waves"></div></template></dom-module><script>(function(){"use strict";var _Mathmin=Math.min,_Mathmax=Math.max,_Mathsqrt=Math.sqrt,Utility={distance:function distance(x1,y1,x2,y2){var xDelta=x1-x2,yDelta=y1-y2;return _Mathsqrt(xDelta*xDelta+yDelta*yDelta)},now:window.performance&&window.performance.now?window.performance.now.bind(window.performance):Date.now};function ElementMetrics(element){this.element=element;this.width=this.boundingRect.width;this.height=this.boundingRect.height;this.size=_Mathmax(this.width,this.height)}ElementMetrics.prototype={get boundingRect(){return this.element.getBoundingClientRect()},furthestCornerDistanceFrom:function furthestCornerDistanceFrom(x,y){var topLeft=Utility.distance(x,y,0,0),topRight=Utility.distance(x,y,this.width,0),bottomLeft=Utility.distance(x,y,0,this.height),bottomRight=Utility.distance(x,y,this.width,this.height);return _Mathmax(topLeft,topRight,bottomLeft,bottomRight)}};function Ripple(element){this.element=element;this.color=window.getComputedStyle(element).color;this.wave=document.createElement("div");this.waveContainer=document.createElement("div");this.wave.style.backgroundColor=this.color;this.wave.classList.add("wave");this.waveContainer.classList.add("wave-container");Polymer.dom(this.waveContainer).appendChild(this.wave);this.resetInteractionState()}Ripple.MAX_RADIUS=300;Ripple.prototype={get recenters(){return this.element.recenters},get center(){return this.element.center},get mouseDownElapsed(){var elapsed;if(!this.mouseDownStart){return 0}elapsed=Utility.now()-this.mouseDownStart;if(this.mouseUpStart){elapsed-=this.mouseUpElapsed}return elapsed},get mouseUpElapsed(){return this.mouseUpStart?Utility.now()-this.mouseUpStart:0},get mouseDownElapsedSeconds(){return this.mouseDownElapsed/1e3},get mouseUpElapsedSeconds(){return this.mouseUpElapsed/1e3},get mouseInteractionSeconds(){return this.mouseDownElapsedSeconds+this.mouseUpElapsedSeconds},get initialOpacity(){return this.element.initialOpacity},get opacityDecayVelocity(){return this.element.opacityDecayVelocity},get radius(){var width2=this.containerMetrics.width*this.containerMetrics.width,height2=this.containerMetrics.height*this.containerMetrics.height,waveRadius=1.1*_Mathmin(_Mathsqrt(width2+height2),Ripple.MAX_RADIUS)+5,duration=1.1-.2*(waveRadius/Ripple.MAX_RADIUS),timeNow=this.mouseInteractionSeconds/duration,size=waveRadius*(1-Math.pow(80,-timeNow));return Math.abs(size)},get opacity(){if(!this.mouseUpStart){return this.initialOpacity}return _Mathmax(0,this.initialOpacity-this.mouseUpElapsedSeconds*this.opacityDecayVelocity)},get outerOpacity(){var outerOpacity=.3*this.mouseUpElapsedSeconds,waveOpacity=this.opacity;return _Mathmax(0,_Mathmin(outerOpacity,waveOpacity))},get isOpacityFullyDecayed(){return .01>this.opacity&&this.radius>=_Mathmin(this.maxRadius,Ripple.MAX_RADIUS)},get isRestingAtMaxRadius(){return this.opacity>=this.initialOpacity&&this.radius>=_Mathmin(this.maxRadius,Ripple.MAX_RADIUS)},get isAnimationComplete(){return this.mouseUpStart?this.isOpacityFullyDecayed:this.isRestingAtMaxRadius},get translationFraction(){return _Mathmin(1,2*(this.radius/this.containerMetrics.size)/1.4142135623730951)},get xNow(){if(this.xEnd){return this.xStart+this.translationFraction*(this.xEnd-this.xStart)}return this.xStart},get yNow(){if(this.yEnd){return this.yStart+this.translationFraction*(this.yEnd-this.yStart)}return this.yStart},get isMouseDown(){return this.mouseDownStart&&!this.mouseUpStart},resetInteractionState:function resetInteractionState(){this.maxRadius=0;this.mouseDownStart=0;this.mouseUpStart=0;this.xStart=0;this.yStart=0;this.xEnd=0;this.yEnd=0;this.slideDistance=0;this.containerMetrics=new ElementMetrics(this.element)},draw:function draw(){var scale,dx,dy;this.wave.style.opacity=this.opacity;scale=this.radius/(this.containerMetrics.size/2);dx=this.xNow-this.containerMetrics.width/2;dy=this.yNow-this.containerMetrics.height/2;this.waveContainer.style.webkitTransform="translate("+dx+"px, "+dy+"px)";this.waveContainer.style.transform="translate3d("+dx+"px, "+dy+"px, 0)";this.wave.style.webkitTransform="scale("+scale+","+scale+")";this.wave.style.transform="scale3d("+scale+","+scale+",1)"},downAction:function downAction(event){var xCenter=this.containerMetrics.width/2,yCenter=this.containerMetrics.height/2;this.resetInteractionState();this.mouseDownStart=Utility.now();if(this.center){this.xStart=xCenter;this.yStart=yCenter;this.slideDistance=Utility.distance(this.xStart,this.yStart,this.xEnd,this.yEnd)}else{this.xStart=event?event.detail.x-this.containerMetrics.boundingRect.left:this.containerMetrics.width/2;this.yStart=event?event.detail.y-this.containerMetrics.boundingRect.top:this.containerMetrics.height/2}if(this.recenters){this.xEnd=xCenter;this.yEnd=yCenter;this.slideDistance=Utility.distance(this.xStart,this.yStart,this.xEnd,this.yEnd)}this.maxRadius=this.containerMetrics.furthestCornerDistanceFrom(this.xStart,this.yStart);this.waveContainer.style.top=(this.containerMetrics.height-this.containerMetrics.size)/2+"px";this.waveContainer.style.left=(this.containerMetrics.width-this.containerMetrics.size)/2+"px";this.waveContainer.style.width=this.containerMetrics.size+"px";this.waveContainer.style.height=this.containerMetrics.size+"px"},upAction:function upAction(){if(!this.isMouseDown){return}this.mouseUpStart=Utility.now()},remove:function remove(){Polymer.dom(this.waveContainer.parentNode).removeChild(this.waveContainer)}};Polymer({is:"paper-ripple",behaviors:[Polymer.IronA11yKeysBehavior],properties:{initialOpacity:{type:Number,value:.25},opacityDecayVelocity:{type:Number,value:.8},recenters:{type:Boolean,value:!1},center:{type:Boolean,value:!1},ripples:{type:Array,value:function value(){return[]}},animating:{type:Boolean,readOnly:!0,reflectToAttribute:!0,value:!1},holdDown:{type:Boolean,value:!1,observer:"_holdDownChanged"},noink:{type:Boolean,value:!1},_animating:{type:Boolean},_boundAnimate:{type:Function,value:function value(){return this.animate.bind(this)}}},get target(){return this.keyEventTarget},keyBindings:{"enter:keydown":"_onEnterKeydown","space:keydown":"_onSpaceKeydown","space:keyup":"_onSpaceKeyup"},attached:function attached(){if(11==this.parentNode.nodeType){this.keyEventTarget=Polymer.dom(this).getOwnerRoot().host}else{this.keyEventTarget=this.parentNode}var keyEventTarget=this.keyEventTarget;this.listen(keyEventTarget,"up","uiUpAction");this.listen(keyEventTarget,"down","uiDownAction")},detached:function detached(){this.unlisten(this.keyEventTarget,"up","uiUpAction");this.unlisten(this.keyEventTarget,"down","uiDownAction");this.keyEventTarget=null},get shouldKeepAnimating(){for(var index=0;index<this.ripples.length;++index){if(!this.ripples[index].isAnimationComplete){return!0}}return!1},simulatedRipple:function simulatedRipple(){this.downAction(null);this.async(function(){this.upAction()},1)},uiDownAction:function uiDownAction(event){if(!this.noink){this.downAction(event)}},downAction:function downAction(event){if(this.holdDown&&0<this.ripples.length){return}var ripple=this.addRipple();ripple.downAction(event);if(!this._animating){this._animating=!0;this.animate()}},uiUpAction:function uiUpAction(event){if(!this.noink){this.upAction(event)}},upAction:function upAction(event){if(this.holdDown){return}this.ripples.forEach(function(ripple){ripple.upAction(event)});this._animating=!0;this.animate()},onAnimationComplete:function onAnimationComplete(){this._animating=!1;this.$.background.style.backgroundColor=null;this.fire("transitionend")},addRipple:function addRipple(){var ripple=new Ripple(this);Polymer.dom(this.$.waves).appendChild(ripple.waveContainer);this.$.background.style.backgroundColor=ripple.color;this.ripples.push(ripple);this._setAnimating(!0);return ripple},removeRipple:function removeRipple(ripple){var rippleIndex=this.ripples.indexOf(ripple);if(0>rippleIndex){return}this.ripples.splice(rippleIndex,1);ripple.remove();if(!this.ripples.length){this._setAnimating(!1)}},animate:function animate(){if(!this._animating){return}var index,ripple;for(index=0;index<this.ripples.length;++index){ripple=this.ripples[index];ripple.draw();this.$.background.style.opacity=ripple.outerOpacity;if(ripple.isOpacityFullyDecayed&&!ripple.isRestingAtMaxRadius){this.removeRipple(ripple)}}if(!this.shouldKeepAnimating&&0===this.ripples.length){this.onAnimationComplete()}else{window.requestAnimationFrame(this._boundAnimate)}},_onEnterKeydown:function _onEnterKeydown(){this.uiDownAction();this.async(this.uiUpAction,1)},_onSpaceKeydown:function _onSpaceKeydown(){this.uiDownAction()},_onSpaceKeyup:function _onSpaceKeyup(){this.uiUpAction()},_holdDownChanged:function _holdDownChanged(newVal,oldVal){if(oldVal===void 0){return}if(newVal){this.downAction()}else{this.upAction()}}})})();</script><script>Polymer.PaperRippleBehavior={properties:{noink:{type:Boolean,observer:"_noinkChanged"},_rippleContainer:{type:Object}},_buttonStateChanged:function _buttonStateChanged(){if(this.focused){this.ensureRipple()}},_downHandler:function _downHandler(event){Polymer.IronButtonStateImpl._downHandler.call(this,event);if(this.pressed){this.ensureRipple(event)}},ensureRipple:function ensureRipple(optTriggeringEvent){if(!this.hasRipple()){this._ripple=this._createRipple();this._ripple.noink=this.noink;var rippleContainer=this._rippleContainer||this.root;if(rippleContainer){Polymer.dom(rippleContainer).appendChild(this._ripple)}if(optTriggeringEvent){var domContainer=Polymer.dom(this._rippleContainer||this),target=Polymer.dom(optTriggeringEvent).rootTarget;if(domContainer.deepContains(target)){this._ripple.uiDownAction(optTriggeringEvent)}}}},getRipple:function getRipple(){this.ensureRipple();return this._ripple},hasRipple:function hasRipple(){return!!this._ripple},_createRipple:function _createRipple(){var element=document.createElement("paper-ripple");return element},_noinkChanged:function _noinkChanged(noink){if(this.hasRipple()){this._ripple.noink=noink}}};</script><script>Polymer.PaperInkyFocusBehaviorImpl={observers:["_focusedChanged(receivedFocusFromKeyboard)"],_focusedChanged:function _focusedChanged(receivedFocusFromKeyboard){if(receivedFocusFromKeyboard){this.ensureRipple()}if(this.hasRipple()){this._ripple.holdDown=receivedFocusFromKeyboard}},_createRipple:function _createRipple(){var ripple=Polymer.PaperRippleBehavior._createRipple();ripple.id="ink";ripple.setAttribute("center","");ripple.classList.add("circle");return ripple}};Polymer.PaperInkyFocusBehavior=[Polymer.IronButtonState,Polymer.IronControlState,Polymer.PaperRippleBehavior,Polymer.PaperInkyFocusBehaviorImpl];</script><custom-style><style is="custom-style">html {

      /* Material Design color palette for Google products */

      --google-red-100: #f4c7c3;
      --google-red-300: #e67c73;
      --google-red-500: #db4437;
      --google-red-700: #c53929;

      --google-blue-100: #c6dafc;
      --google-blue-300: #7baaf7;
      --google-blue-500: #4285f4;
      --google-blue-700: #3367d6;

      --google-green-100: #b7e1cd;
      --google-green-300: #57bb8a;
      --google-green-500: #0f9d58;
      --google-green-700: #0b8043;

      --google-yellow-100: #fce8b2;
      --google-yellow-300: #f7cb4d;
      --google-yellow-500: #f4b400;
      --google-yellow-700: #f09300;

      --google-grey-100: #f5f5f5;
      --google-grey-300: #e0e0e0;
      --google-grey-500: #9e9e9e;
      --google-grey-700: #616161;

      /* Material Design color palette from online spec document */

      --paper-red-50: #ffebee;
      --paper-red-100: #ffcdd2;
      --paper-red-200: #ef9a9a;
      --paper-red-300: #e57373;
      --paper-red-400: #ef5350;
      --paper-red-500: #f44336;
      --paper-red-600: #e53935;
      --paper-red-700: #d32f2f;
      --paper-red-800: #c62828;
      --paper-red-900: #b71c1c;
      --paper-red-a100: #ff8a80;
      --paper-red-a200: #ff5252;
      --paper-red-a400: #ff1744;
      --paper-red-a700: #d50000;

      --paper-pink-50: #fce4ec;
      --paper-pink-100: #f8bbd0;
      --paper-pink-200: #f48fb1;
      --paper-pink-300: #f06292;
      --paper-pink-400: #ec407a;
      --paper-pink-500: #e91e63;
      --paper-pink-600: #d81b60;
      --paper-pink-700: #c2185b;
      --paper-pink-800: #ad1457;
      --paper-pink-900: #880e4f;
      --paper-pink-a100: #ff80ab;
      --paper-pink-a200: #ff4081;
      --paper-pink-a400: #f50057;
      --paper-pink-a700: #c51162;

      --paper-purple-50: #f3e5f5;
      --paper-purple-100: #e1bee7;
      --paper-purple-200: #ce93d8;
      --paper-purple-300: #ba68c8;
      --paper-purple-400: #ab47bc;
      --paper-purple-500: #9c27b0;
      --paper-purple-600: #8e24aa;
      --paper-purple-700: #7b1fa2;
      --paper-purple-800: #6a1b9a;
      --paper-purple-900: #4a148c;
      --paper-purple-a100: #ea80fc;
      --paper-purple-a200: #e040fb;
      --paper-purple-a400: #d500f9;
      --paper-purple-a700: #aa00ff;

      --paper-deep-purple-50: #ede7f6;
      --paper-deep-purple-100: #d1c4e9;
      --paper-deep-purple-200: #b39ddb;
      --paper-deep-purple-300: #9575cd;
      --paper-deep-purple-400: #7e57c2;
      --paper-deep-purple-500: #673ab7;
      --paper-deep-purple-600: #5e35b1;
      --paper-deep-purple-700: #512da8;
      --paper-deep-purple-800: #4527a0;
      --paper-deep-purple-900: #311b92;
      --paper-deep-purple-a100: #b388ff;
      --paper-deep-purple-a200: #7c4dff;
      --paper-deep-purple-a400: #651fff;
      --paper-deep-purple-a700: #6200ea;

      --paper-indigo-50: #e8eaf6;
      --paper-indigo-100: #c5cae9;
      --paper-indigo-200: #9fa8da;
      --paper-indigo-300: #7986cb;
      --paper-indigo-400: #5c6bc0;
      --paper-indigo-500: #3f51b5;
      --paper-indigo-600: #3949ab;
      --paper-indigo-700: #303f9f;
      --paper-indigo-800: #283593;
      --paper-indigo-900: #1a237e;
      --paper-indigo-a100: #8c9eff;
      --paper-indigo-a200: #536dfe;
      --paper-indigo-a400: #3d5afe;
      --paper-indigo-a700: #304ffe;

      --paper-blue-50: #e3f2fd;
      --paper-blue-100: #bbdefb;
      --paper-blue-200: #90caf9;
      --paper-blue-300: #64b5f6;
      --paper-blue-400: #42a5f5;
      --paper-blue-500: #2196f3;
      --paper-blue-600: #1e88e5;
      --paper-blue-700: #1976d2;
      --paper-blue-800: #1565c0;
      --paper-blue-900: #0d47a1;
      --paper-blue-a100: #82b1ff;
      --paper-blue-a200: #448aff;
      --paper-blue-a400: #2979ff;
      --paper-blue-a700: #2962ff;

      --paper-light-blue-50: #e1f5fe;
      --paper-light-blue-100: #b3e5fc;
      --paper-light-blue-200: #81d4fa;
      --paper-light-blue-300: #4fc3f7;
      --paper-light-blue-400: #29b6f6;
      --paper-light-blue-500: #03a9f4;
      --paper-light-blue-600: #039be5;
      --paper-light-blue-700: #0288d1;
      --paper-light-blue-800: #0277bd;
      --paper-light-blue-900: #01579b;
      --paper-light-blue-a100: #80d8ff;
      --paper-light-blue-a200: #40c4ff;
      --paper-light-blue-a400: #00b0ff;
      --paper-light-blue-a700: #0091ea;

      --paper-cyan-50: #e0f7fa;
      --paper-cyan-100: #b2ebf2;
      --paper-cyan-200: #80deea;
      --paper-cyan-300: #4dd0e1;
      --paper-cyan-400: #26c6da;
      --paper-cyan-500: #00bcd4;
      --paper-cyan-600: #00acc1;
      --paper-cyan-700: #0097a7;
      --paper-cyan-800: #00838f;
      --paper-cyan-900: #006064;
      --paper-cyan-a100: #84ffff;
      --paper-cyan-a200: #18ffff;
      --paper-cyan-a400: #00e5ff;
      --paper-cyan-a700: #00b8d4;

      --paper-teal-50: #e0f2f1;
      --paper-teal-100: #b2dfdb;
      --paper-teal-200: #80cbc4;
      --paper-teal-300: #4db6ac;
      --paper-teal-400: #26a69a;
      --paper-teal-500: #009688;
      --paper-teal-600: #00897b;
      --paper-teal-700: #00796b;
      --paper-teal-800: #00695c;
      --paper-teal-900: #004d40;
      --paper-teal-a100: #a7ffeb;
      --paper-teal-a200: #64ffda;
      --paper-teal-a400: #1de9b6;
      --paper-teal-a700: #00bfa5;

      --paper-green-50: #e8f5e9;
      --paper-green-100: #c8e6c9;
      --paper-green-200: #a5d6a7;
      --paper-green-300: #81c784;
      --paper-green-400: #66bb6a;
      --paper-green-500: #4caf50;
      --paper-green-600: #43a047;
      --paper-green-700: #388e3c;
      --paper-green-800: #2e7d32;
      --paper-green-900: #1b5e20;
      --paper-green-a100: #b9f6ca;
      --paper-green-a200: #69f0ae;
      --paper-green-a400: #00e676;
      --paper-green-a700: #00c853;

      --paper-light-green-50: #f1f8e9;
      --paper-light-green-100: #dcedc8;
      --paper-light-green-200: #c5e1a5;
      --paper-light-green-300: #aed581;
      --paper-light-green-400: #9ccc65;
      --paper-light-green-500: #8bc34a;
      --paper-light-green-600: #7cb342;
      --paper-light-green-700: #689f38;
      --paper-light-green-800: #558b2f;
      --paper-light-green-900: #33691e;
      --paper-light-green-a100: #ccff90;
      --paper-light-green-a200: #b2ff59;
      --paper-light-green-a400: #76ff03;
      --paper-light-green-a700: #64dd17;

      --paper-lime-50: #f9fbe7;
      --paper-lime-100: #f0f4c3;
      --paper-lime-200: #e6ee9c;
      --paper-lime-300: #dce775;
      --paper-lime-400: #d4e157;
      --paper-lime-500: #cddc39;
      --paper-lime-600: #c0ca33;
      --paper-lime-700: #afb42b;
      --paper-lime-800: #9e9d24;
      --paper-lime-900: #827717;
      --paper-lime-a100: #f4ff81;
      --paper-lime-a200: #eeff41;
      --paper-lime-a400: #c6ff00;
      --paper-lime-a700: #aeea00;

      --paper-yellow-50: #fffde7;
      --paper-yellow-100: #fff9c4;
      --paper-yellow-200: #fff59d;
      --paper-yellow-300: #fff176;
      --paper-yellow-400: #ffee58;
      --paper-yellow-500: #ffeb3b;
      --paper-yellow-600: #fdd835;
      --paper-yellow-700: #fbc02d;
      --paper-yellow-800: #f9a825;
      --paper-yellow-900: #f57f17;
      --paper-yellow-a100: #ffff8d;
      --paper-yellow-a200: #ffff00;
      --paper-yellow-a400: #ffea00;
      --paper-yellow-a700: #ffd600;

      --paper-amber-50: #fff8e1;
      --paper-amber-100: #ffecb3;
      --paper-amber-200: #ffe082;
      --paper-amber-300: #ffd54f;
      --paper-amber-400: #ffca28;
      --paper-amber-500: #ffc107;
      --paper-amber-600: #ffb300;
      --paper-amber-700: #ffa000;
      --paper-amber-800: #ff8f00;
      --paper-amber-900: #ff6f00;
      --paper-amber-a100: #ffe57f;
      --paper-amber-a200: #ffd740;
      --paper-amber-a400: #ffc400;
      --paper-amber-a700: #ffab00;

      --paper-orange-50: #fff3e0;
      --paper-orange-100: #ffe0b2;
      --paper-orange-200: #ffcc80;
      --paper-orange-300: #ffb74d;
      --paper-orange-400: #ffa726;
      --paper-orange-500: #ff9800;
      --paper-orange-600: #fb8c00;
      --paper-orange-700: #f57c00;
      --paper-orange-800: #ef6c00;
      --paper-orange-900: #e65100;
      --paper-orange-a100: #ffd180;
      --paper-orange-a200: #ffab40;
      --paper-orange-a400: #ff9100;
      --paper-orange-a700: #ff6500;

      --paper-deep-orange-50: #fbe9e7;
      --paper-deep-orange-100: #ffccbc;
      --paper-deep-orange-200: #ffab91;
      --paper-deep-orange-300: #ff8a65;
      --paper-deep-orange-400: #ff7043;
      --paper-deep-orange-500: #ff5722;
      --paper-deep-orange-600: #f4511e;
      --paper-deep-orange-700: #e64a19;
      --paper-deep-orange-800: #d84315;
      --paper-deep-orange-900: #bf360c;
      --paper-deep-orange-a100: #ff9e80;
      --paper-deep-orange-a200: #ff6e40;
      --paper-deep-orange-a400: #ff3d00;
      --paper-deep-orange-a700: #dd2c00;

      --paper-brown-50: #efebe9;
      --paper-brown-100: #d7ccc8;
      --paper-brown-200: #bcaaa4;
      --paper-brown-300: #a1887f;
      --paper-brown-400: #8d6e63;
      --paper-brown-500: #795548;
      --paper-brown-600: #6d4c41;
      --paper-brown-700: #5d4037;
      --paper-brown-800: #4e342e;
      --paper-brown-900: #3e2723;

      --paper-grey-50: #fafafa;
      --paper-grey-100: #f5f5f5;
      --paper-grey-200: #eeeeee;
      --paper-grey-300: #e0e0e0;
      --paper-grey-400: #bdbdbd;
      --paper-grey-500: #9e9e9e;
      --paper-grey-600: #757575;
      --paper-grey-700: #616161;
      --paper-grey-800: #424242;
      --paper-grey-900: #212121;

      --paper-blue-grey-50: #eceff1;
      --paper-blue-grey-100: #cfd8dc;
      --paper-blue-grey-200: #b0bec5;
      --paper-blue-grey-300: #90a4ae;
      --paper-blue-grey-400: #78909c;
      --paper-blue-grey-500: #607d8b;
      --paper-blue-grey-600: #546e7a;
      --paper-blue-grey-700: #455a64;
      --paper-blue-grey-800: #37474f;
      --paper-blue-grey-900: #263238;

      /* opacity for dark text on a light background */
      --dark-divider-opacity: 0.12;
      --dark-disabled-opacity: 0.38; /* or hint text or icon */
      --dark-secondary-opacity: 0.54;
      --dark-primary-opacity: 0.87;

      /* opacity for light text on a dark background */
      --light-divider-opacity: 0.12;
      --light-disabled-opacity: 0.3; /* or hint text or icon */
      --light-secondary-opacity: 0.7;
      --light-primary-opacity: 1.0;

    }</style></custom-style><custom-style><style is="custom-style">html {
      /*
       * You can use these generic variables in your elements for easy theming.
       * For example, if all your elements use `--primary-text-color` as its main
       * color, then switching from a light to a dark theme is just a matter of
       * changing the value of `--primary-text-color` in your application.
       */
      --primary-text-color: var(--light-theme-text-color);
      --primary-background-color: var(--light-theme-background-color);
      --secondary-text-color: var(--light-theme-secondary-color);
      --disabled-text-color: var(--light-theme-disabled-color);
      --divider-color: var(--light-theme-divider-color);
      --error-color: var(--paper-deep-orange-a700);

      /*
       * Primary and accent colors. Also see color.html for more colors.
       */
      --primary-color: var(--paper-indigo-500);
      --light-primary-color: var(--paper-indigo-100);
      --dark-primary-color: var(--paper-indigo-700);

      --accent-color: var(--paper-pink-a200);
      --light-accent-color: var(--paper-pink-a100);
      --dark-accent-color: var(--paper-pink-a400);


      /*
       * Material Design Light background theme
       */
      --light-theme-background-color: #ffffff;
      --light-theme-base-color: #000000;
      --light-theme-text-color: var(--paper-grey-900);
      --light-theme-secondary-color: #737373;  /* for secondary text and icons */
      --light-theme-disabled-color: #9b9b9b;  /* disabled/hint text */
      --light-theme-divider-color: #dbdbdb;

      /*
       * Material Design Dark background theme
       */
      --dark-theme-background-color: var(--paper-grey-900);
      --dark-theme-base-color: #ffffff;
      --dark-theme-text-color: #ffffff;
      --dark-theme-secondary-color: #bcbcbc;  /* for secondary text and icons */
      --dark-theme-disabled-color: #646464;  /* disabled/hint text */
      --dark-theme-divider-color: #3c3c3c;

      /*
       * Deprecated values because of their confusing names.
       */
      --text-primary-color: var(--dark-theme-text-color);
      --default-primary-color: var(--primary-color);
    }</style></custom-style><dom-module id="paper-icon-button" assetpath="../bower_components/paper-icon-button/"><template strip-whitespace=""><style>:host {
        display: inline-block;
        position: relative;
        padding: 8px;
        outline: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
        cursor: pointer;
        z-index: 0;
        line-height: 1;

        width: 40px;
        height: 40px;

        /* NOTE: Both values are needed, since some phones require the value to be `transparent`. */
        -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
        -webkit-tap-highlight-color: transparent;

        /* Because of polymer/2558, this style has lower specificity than * */
        box-sizing: border-box !important;

        @apply --paper-icon-button;
      }

      :host #ink {
        color: var(--paper-icon-button-ink-color, var(--primary-text-color));
        opacity: 0.6;
      }

      :host([disabled]) {
        color: var(--paper-icon-button-disabled-text, var(--disabled-text-color));
        pointer-events: none;
        cursor: auto;

        @apply --paper-icon-button-disabled;
      }

      :host([hidden]) {
        display: none !important;
      }

      :host(:hover) {
        @apply --paper-icon-button-hover;
      }

      iron-icon {
        --iron-icon-width: 100%;
        --iron-icon-height: 100%;
      }</style><iron-icon id="icon" src="[[src]]" icon="[[icon]]" alt$="[[alt]]"></iron-icon></template><script>Polymer({is:"paper-icon-button",hostAttributes:{role:"button",tabindex:"0"},behaviors:[Polymer.PaperInkyFocusBehavior],properties:{src:{type:String},icon:{type:String},alt:{type:String,observer:"_altChanged"}},_altChanged:function _altChanged(newValue,oldValue){var label=this.getAttribute("aria-label");if(!label||oldValue==label){this.setAttribute("aria-label",newValue)}}});</script></dom-module><script>(function(){"use strict";var SPLICES_RX=/\.splices$/,LENGTH_RX=/\.length$/,NUMBER_RX=/\.?#?([0-9]+)$/;Polymer.AppStorageBehavior={properties:{data:{type:Object,notify:!0,value:function value(){return this.zeroValue}},sequentialTransactions:{type:Boolean,value:!1},log:{type:Boolean,value:!1}},observers:["__dataChanged(data.*)"],created:function created(){this.__initialized=!1;this.__syncingToMemory=!1;this.__initializingStoredValue=null;this.__transactionQueueAdvances=Promise.resolve()},ready:function ready(){this._initializeStoredValue()},get isNew(){return!0},get transactionsComplete(){return this.__transactionQueueAdvances},get zeroValue(){},saveValue:function saveValue(){return Promise.resolve()},reset:function reset(){},destroy:function destroy(){this.data=this.zeroValue;return this.saveValue()},initializeStoredValue:function initializeStoredValue(){if(this.isNew){return Promise.resolve()}return this._getStoredValue("data").then(function(data){this._log("Got stored value!",data,this.data);if(null==data){return this._setStoredValue("data",this.data||this.zeroValue)}else{this.syncToMemory(function(){this.set("data",data)})}}.bind(this))},getStoredValue:function getStoredValue(){return Promise.resolve()},setStoredValue:function setStoredValue(storagePath,value){return Promise.resolve(value)},memoryPathToStoragePath:function memoryPathToStoragePath(path){return path},storagePathToMemoryPath:function storagePathToMemoryPath(path){return path},syncToMemory:function syncToMemory(operation){if(this.__syncingToMemory){return}this._group("Sync to memory.");this.__syncingToMemory=!0;operation.call(this);this.__syncingToMemory=!1;this._groupEnd("Sync to memory.")},valueIsEmpty:function valueIsEmpty(value){if(Array.isArray(value)){return 0===value.length}else if(Object.prototype.isPrototypeOf(value)){return 0===Object.keys(value).length}else{return null==value}},_getStoredValue:function _getStoredValue(path){return this.getStoredValue(this.memoryPathToStoragePath(path))},_setStoredValue:function _setStoredValue(path,value){return this.setStoredValue(this.memoryPathToStoragePath(path),value)},_enqueueTransaction:function _enqueueTransaction(transaction){if(this.sequentialTransactions){transaction=transaction.bind(this)}else{var result=transaction.call(this);transaction=function(){return result}}return this.__transactionQueueAdvances=this.__transactionQueueAdvances.then(transaction).catch(function(error){this._error("Error performing queued transaction.",error)}.bind(this))},_log:function _log(){if(this.log){console.log.apply(console,arguments)}},_error:function _error(){if(this.log){console.error.apply(console,arguments)}},_group:function _group(){if(this.log){console.group.apply(console,arguments)}},_groupEnd:function _groupEnd(){if(this.log){console.groupEnd.apply(console,arguments)}},_initializeStoredValue:function _initializeStoredValue(){if(this.__initializingStoredValue){return}this._group("Initializing stored value.");var initializingStoredValue=this.__initializingStoredValue=this.initializeStoredValue().then(function(){this.__initialized=!0;this.__initializingStoredValue=null;this._groupEnd("Initializing stored value.")}.bind(this));return this._enqueueTransaction(function(){return initializingStoredValue})},__dataChanged:function __dataChanged(change){if(this.isNew||this.__syncingToMemory||!this.__initialized||this.__pathCanBeIgnored(change.path)){return}var path=this.__normalizeMemoryPath(change.path),value=change.value,indexSplices=value&&value.indexSplices;this._enqueueTransaction(function(){this._log("Setting",path+":",indexSplices||value);if(indexSplices&&this.__pathIsSplices(path)){path=this.__parentPath(path);value=this.get(path)}return this._setStoredValue(path,value)})},__normalizeMemoryPath:function __normalizeMemoryPath(path){for(var parts=path.split("."),parentPath=[],currentPath=[],normalizedPath=[],i=0;i<parts.length;++i){currentPath.push(parts[i]);if(/^#/.test(parts[i])){normalizedPath.push(this.get(parentPath).indexOf(this.get(currentPath)))}else{normalizedPath.push(parts[i])}parentPath.push(parts[i])}return normalizedPath.join(".")},__parentPath:function __parentPath(path){var parentPath=path.split(".");return parentPath.slice(0,parentPath.length-1).join(".")},__pathCanBeIgnored:function __pathCanBeIgnored(path){return LENGTH_RX.test(path)&&Array.isArray(this.get(this.__parentPath(path)))},__pathIsSplices:function __pathIsSplices(path){return SPLICES_RX.test(path)&&Array.isArray(this.get(this.__parentPath(path)))},__pathRefersToArray:function __pathRefersToArray(path){return(SPLICES_RX.test(path)||LENGTH_RX.test(path))&&Array.isArray(this.get(this.__parentPath(path)))},__pathTailToIndex:function __pathTailToIndex(path){var tail=path.split(".").pop();return window.parseInt(tail.replace(NUMBER_RX,"$1"),10)}}})();</script><script>(function(){"use strict";Polymer.FirebaseDatabaseBehaviorImpl={properties:{db:{type:Object,computed:"__computeDb(app)"},ref:{type:Object,computed:"__computeRef(db, path, disabled)",observer:"__refChanged"},path:{type:String,value:null,observer:"__pathChanged"},disabled:{type:Boolean,value:!1}},observers:["__onlineChanged(online)"],_setFirebaseValue:function _setFirebaseValue(path,value){this._log("Setting Firebase value at",path,"to",value);var key=value&&value.$key,leaf=value&&value.hasOwnProperty("$val");if(key){value.$key=null}var result=this.db.ref(path).set(leaf?value.$val:value);if(key){value.$key=key}return result},__computeDb:function __computeDb(app){return app?app.database():null},__computeRef:function __computeRef(db,path){if(null==db||null==path||!this.__pathReady(path)||this.disabled){return null}return db.ref(path)},__refChanged:function __refChanged(){},__pathChanged:function __pathChanged(){if(!this.disabled&&!this.valueIsEmpty(this.data)){this.syncToMemory(function(){this.data=this.zeroValue;this.__needSetData=!0})}},__pathReady:function __pathReady(path){return path&&0>path.split("/").slice(1).indexOf("")},__onlineChanged:function __onlineChanged(online){if(!this.ref){return}if(online){this.db.goOnline()}else{this.db.goOffline()}}};Polymer.FirebaseDatabaseBehavior=[Polymer.AppStorageBehavior,Polymer.FirebaseCommonBehavior,Polymer.FirebaseDatabaseBehaviorImpl]})();</script><dom-module id="firebase-query" assetpath="../bower_components/polymerfire/"><script>(function(){"use strict";Polymer({is:"firebase-query",behaviors:[Polymer.FirebaseDatabaseBehavior],properties:{query:{type:Object,computed:"__computeQuery(ref, orderByChild, orderByValue, limitToFirst, limitToLast, startAt, endAt, equalTo)",observer:"__queryChanged"},orderByChild:{type:String,value:""},orderByValue:{type:Boolean,value:!1},startAt:{type:String,value:""},endAt:{type:String,value:""},equalTo:{type:Object,value:null},limitToFirst:{type:Number,value:0},limitToLast:{type:Number,value:0}},created:function created(){this.__map={}},attached:function attached(){this.__queryChanged(this.query,this.query)},detached:function detached(){if(null==this.query){return}this.__queryChanged(null,this.query)},child:function child(key){return this.__map[key]},get isNew(){return this.disabled||!this.__pathReady(this.path)},get zeroValue(){return[]},memoryPathToStoragePath:function memoryPathToStoragePath(path){var storagePath=this.path;if("data"!==path){var parts=path.split("."),index=window.parseInt(parts[1],10);if(null!=index&&!isNaN(index)){parts[1]=null!=this.data[index]&&this.data[index].$key}storagePath+=parts.join("/").replace(/^data\.?/,"")}return storagePath},storagePathToMemoryPath:function storagePathToMemoryPath(storagePath){var path="data";if(storagePath!==this.path){var parts=storagePath.replace(this.path+"/","").split("/"),key=parts[0],datum=this.__map[key];if(datum){parts[0]=this.__indexFromKey(key)}path+="."+parts.join(".")}return path},setStoredValue:function setStoredValue(storagePath,value){if(storagePath===this.path||/\$key$/.test(storagePath)){return Promise.resolve()}else if(/\/\$val$/.test(storagePath)){return this._setFirebaseValue(storagePath.replace(/\/\$val$/,""),value)}else{return this._setFirebaseValue(storagePath,value)}},_propertyToKey:function _propertyToKey(property){var index=window.parseInt(property,10);if(null!=index&&!isNaN(index)){return this.data[index].$key}},__computeQuery:function __computeQuery(ref,orderByChild,orderByValue,limitToFirst,limitToLast,startAt,endAt,equalTo){if(null==ref){return null}var query;if(orderByChild){query=ref.orderByChild(orderByChild)}else if(orderByValue){query=ref.orderByValue()}else{query=ref.orderByKey()}if(limitToFirst){query=query.limitToFirst(limitToFirst)}else if(limitToLast){query=query.limitToLast(limitToLast)}if(startAt){query=query.startAt(startAt)}if(endAt){query=query.endAt(endAt)}if(null!==equalTo){query=query.equalTo(equalTo)}return query},__pathChanged:function __pathChanged(path){if(null==path){this.syncToMemory(function(){this.data=this.zeroValue})}},__queryChanged:function __queryChanged(query,oldQuery){if(oldQuery){oldQuery.off("child_added",this.__onFirebaseChildAdded,this);oldQuery.off("child_removed",this.__onFirebaseChildRemoved,this);oldQuery.off("child_changed",this.__onFirebaseChildChanged,this);oldQuery.off("child_moved",this.__onFirebaseChildMoved,this);this.syncToMemory(function(){this.set("data",this.zeroValue)})}if(query){if(this._onOnce){query.off("child_added",this.__onFirebaseChildAdded,this);query.off("child_removed",this.__onFirebaseChildRemoved,this);query.off("child_changed",this.__onFirebaseChildChanged,this);query.off("child_moved",this.__onFirebaseChildMoved,this)}this._onOnce=!0;query.on("child_added",this.__onFirebaseChildAdded,this.__onError,this);query.on("child_removed",this.__onFirebaseChildRemoved,this.__onError,this);query.on("child_changed",this.__onFirebaseChildChanged,this.__onError,this);query.on("child_moved",this.__onFirebaseChildMoved,this.__onError,this)}},__indexFromKey:function __indexFromKey(key){if(null!=key){for(var i=0;i<this.data.length;i++){if(this.data[i].$key===key){return i}}}return-1},__onFirebaseChildAdded:function __onFirebaseChildAdded(snapshot,previousChildKey){var key=snapshot.key,value=snapshot.val(),previousChildIndex=this.__indexFromKey(previousChildKey);this._log("Firebase child_added:",key,value);value=this.__snapshotToValue(snapshot);this.__map[key]=value;this.splice("data",previousChildIndex+1,0,value)},__onFirebaseChildRemoved:function __onFirebaseChildRemoved(snapshot){var key=snapshot.key,value=this.__map[key];this._log("Firebase child_removed:",key,value);if(value){this.__map[key]=null;this.async(function(){this.syncToMemory(function(){this.splice("data",this.__indexFromKey(key),1)})})}},__onFirebaseChildChanged:function __onFirebaseChildChanged(snapshot){var key=snapshot.key,prev=this.__map[key];this._log("Firebase child_changed:",key,prev);if(prev){this.async(function(){var index=this.__indexFromKey(key),value=this.__snapshotToValue(snapshot);this.__map[key]=value;this.syncToMemory(function(){if(babelHelpers.instanceof(value,Object)){for(var property in value){this.set(["data",index,property],value[property])}for(var property in prev){if(!value.hasOwnProperty(property)){this.set(["data",index,property],void 0)}}}else{this.set(["data",index],value)}})})}},__onFirebaseChildMoved:function __onFirebaseChildMoved(snapshot,previousChildKey){var key=snapshot.key,value=this.__map[key],targetIndex=previousChildKey?this.__indexFromKey(previousChildKey):0;this._log("Firebase child_moved:",key,value,"to index",targetIndex);if(value){var index=this.__indexFromKey(key);value=this.__snapshotToValue(snapshot);this.__map[key]=value;this.async(function(){this.syncToMemory(function(){this.splice("data",index,1);this.splice("data",targetIndex,0,value)})})}},__snapshotToValue:function __snapshotToValue(snapshot){var key=snapshot.key,value=snapshot.val(),leaf="object"!==babelHelpers.typeof(value);if(leaf){value={$key:key,$val:value}}else{value.$key=key}return value}})})();</script></dom-module><script>Polymer.PaperButtonBehaviorImpl={properties:{elevation:{type:Number,reflectToAttribute:!0,readOnly:!0}},observers:["_calculateElevation(focused, disabled, active, pressed, receivedFocusFromKeyboard)","_computeKeyboardClass(receivedFocusFromKeyboard)"],hostAttributes:{role:"button",tabindex:"0",animated:!0},_calculateElevation:function _calculateElevation(){var e=1;if(this.disabled){e=0}else if(this.active||this.pressed){e=4}else if(this.receivedFocusFromKeyboard){e=3}this._setElevation(e)},_computeKeyboardClass:function _computeKeyboardClass(receivedFocusFromKeyboard){this.toggleClass("keyboard-focus",receivedFocusFromKeyboard)},_spaceKeyDownHandler:function _spaceKeyDownHandler(event){Polymer.IronButtonStateImpl._spaceKeyDownHandler.call(this,event);if(this.hasRipple()&&1>this.getRipple().ripples.length){this._ripple.uiDownAction()}},_spaceKeyUpHandler:function _spaceKeyUpHandler(event){Polymer.IronButtonStateImpl._spaceKeyUpHandler.call(this,event);if(this.hasRipple()){this._ripple.uiUpAction()}}};Polymer.PaperButtonBehavior=[Polymer.IronButtonState,Polymer.IronControlState,Polymer.PaperRippleBehavior,Polymer.PaperButtonBehaviorImpl];</script><custom-style><style is="custom-style">html {

      --shadow-transition: {
        transition: box-shadow 0.28s cubic-bezier(0.4, 0, 0.2, 1);
      };

      --shadow-none: {
        box-shadow: none;
      };

      /* from http://codepen.io/shyndman/pen/c5394ddf2e8b2a5c9185904b57421cdb */

      --shadow-elevation-2dp: {
        box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14),
                    0 1px 5px 0 rgba(0, 0, 0, 0.12),
                    0 3px 1px -2px rgba(0, 0, 0, 0.2);
      };

      --shadow-elevation-3dp: {
        box-shadow: 0 3px 4px 0 rgba(0, 0, 0, 0.14),
                    0 1px 8px 0 rgba(0, 0, 0, 0.12),
                    0 3px 3px -2px rgba(0, 0, 0, 0.4);
      };

      --shadow-elevation-4dp: {
        box-shadow: 0 4px 5px 0 rgba(0, 0, 0, 0.14),
                    0 1px 10px 0 rgba(0, 0, 0, 0.12),
                    0 2px 4px -1px rgba(0, 0, 0, 0.4);
      };

      --shadow-elevation-6dp: {
        box-shadow: 0 6px 10px 0 rgba(0, 0, 0, 0.14),
                    0 1px 18px 0 rgba(0, 0, 0, 0.12),
                    0 3px 5px -1px rgba(0, 0, 0, 0.4);
      };

      --shadow-elevation-8dp: {
        box-shadow: 0 8px 10px 1px rgba(0, 0, 0, 0.14),
                    0 3px 14px 2px rgba(0, 0, 0, 0.12),
                    0 5px 5px -3px rgba(0, 0, 0, 0.4);
      };

      --shadow-elevation-12dp: {
        box-shadow: 0 12px 16px 1px rgba(0, 0, 0, 0.14),
                    0 4px 22px 3px rgba(0, 0, 0, 0.12),
                    0 6px 7px -4px rgba(0, 0, 0, 0.4);
      };

      --shadow-elevation-16dp: {
        box-shadow: 0 16px 24px 2px rgba(0, 0, 0, 0.14),
                    0  6px 30px 5px rgba(0, 0, 0, 0.12),
                    0  8px 10px -5px rgba(0, 0, 0, 0.4);
      };

      --shadow-elevation-24dp: {
        box-shadow: 0 24px 38px 3px rgba(0, 0, 0, 0.14),
                    0 9px 46px 8px rgba(0, 0, 0, 0.12),
                    0 11px 15px -7px rgba(0, 0, 0, 0.4);
      };
    }</style></custom-style><dom-module id="paper-material-styles" assetpath="../bower_components/paper-styles/element-styles/"><template><style>:host, html {
        --paper-material: {
          display: block;
          position: relative;
        };
        --paper-material-elevation-1: {
          @apply --shadow-elevation-2dp;
        };
        --paper-material-elevation-2: {
          @apply --shadow-elevation-4dp;
        };
        --paper-material-elevation-3: {
          @apply --shadow-elevation-6dp;
        };
        --paper-material-elevation-4: {
          @apply --shadow-elevation-8dp;
        };
        --paper-material-elevation-5: {
          @apply --shadow-elevation-16dp;
        };
      }
      :host(.paper-material), .paper-material {
        @apply --paper-material;
      }
      :host(.paper-material[elevation="1"]), .paper-material[elevation="1"] {
        @apply --paper-material-elevation-1;
      }
      :host(.paper-material[elevation="2"]), .paper-material[elevation="2"] {
        @apply --paper-material-elevation-2;
      }
      :host(.paper-material[elevation="3"]), .paper-material[elevation="3"] {
        @apply --paper-material-elevation-3;
      }
      :host(.paper-material[elevation="4"]), .paper-material[elevation="4"] {
        @apply --paper-material-elevation-4;
      }
      :host(.paper-material[elevation="5"]), .paper-material[elevation="5"] {
        @apply --paper-material-elevation-5;
      }</style></template></dom-module><dom-module id="paper-button" assetpath="../bower_components/paper-button/"><template strip-whitespace=""><style include="paper-material-styles">/* Need to specify the same specificity as the styles imported from paper-material. */
      :host {
        @apply --layout-inline;
        @apply --layout-center-center;
        position: relative;
        box-sizing: border-box;
        min-width: 5.14em;
        margin: 0 0.29em;
        background: transparent;
        -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
        -webkit-tap-highlight-color: transparent;
        font: inherit;
        text-transform: uppercase;
        outline-width: 0;
        border-radius: 3px;
        -moz-user-select: none;
        -ms-user-select: none;
        -webkit-user-select: none;
        user-select: none;
        cursor: pointer;
        z-index: 0;
        padding: 0.7em 0.57em;

        @apply --paper-font-common-base;
        @apply --paper-button;
      }

      :host([elevation="1"]) {
        @apply --paper-material-elevation-1;
      }

      :host([elevation="2"]) {
        @apply --paper-material-elevation-2;
      }

      :host([elevation="3"]) {
        @apply --paper-material-elevation-3;
      }

      :host([elevation="4"]) {
        @apply --paper-material-elevation-4;
      }

      :host([elevation="5"]) {
        @apply --paper-material-elevation-5;
      }

      :host([hidden]) {
        display: none !important;
      }

      :host([raised].keyboard-focus) {
        font-weight: bold;
        @apply --paper-button-raised-keyboard-focus;
      }

      :host(:not([raised]).keyboard-focus) {
        font-weight: bold;
        @apply --paper-button-flat-keyboard-focus;
      }

      :host([disabled]) {
        background: #eaeaea;
        color: #a8a8a8;
        cursor: auto;
        pointer-events: none;

        @apply --paper-button-disabled;
      }

      :host([animated]) {
        @apply --shadow-transition;
      }

      paper-ripple {
        color: var(--paper-button-ink-color);
      }</style><slot></slot></template><script>Polymer({is:"paper-button",behaviors:[Polymer.PaperButtonBehavior],properties:{raised:{type:Boolean,reflectToAttribute:!0,value:!1,observer:"_calculateElevation"}},_calculateElevation:function _calculateElevation(){if(!this.raised){this._setElevation(0)}else{Polymer.PaperButtonBehaviorImpl._calculateElevation.apply(this)}}});</script></dom-module><dom-module id="iron-collapse" assetpath="../bower_components/iron-collapse/"><template><style>:host {
        display: block;
        transition-duration: var(--iron-collapse-transition-duration, 300ms);
        /* Safari 10 needs this property prefixed to correctly apply the custom property */
        -webkit-transition-duration: var(--iron-collapse-transition-duration, 300ms);
        overflow: visible;
      }

      :host(.iron-collapse-closed) {
        display: none;
      }

      :host(:not(.iron-collapse-opened)) {
        overflow: hidden;
      }</style><slot></slot></template></dom-module><script>Polymer({is:"iron-collapse",behaviors:[Polymer.IronResizableBehavior],properties:{horizontal:{type:Boolean,value:!1,observer:"_horizontalChanged"},opened:{type:Boolean,value:!1,notify:!0,observer:"_openedChanged"},transitioning:{type:Boolean,notify:!0,readOnly:!0},noAnimation:{type:Boolean},_desiredSize:{type:String,value:""}},get dimension(){return this.horizontal?"width":"height"},get _dimensionMax(){return this.horizontal?"maxWidth":"maxHeight"},get _dimensionMaxCss(){return this.horizontal?"max-width":"max-height"},hostAttributes:{role:"group","aria-hidden":"true"},listeners:{transitionend:"_onTransitionEnd"},toggle:function toggle(){this.opened=!this.opened},show:function show(){this.opened=!0},hide:function hide(){this.opened=!1},updateSize:function updateSize(size,animated){size="auto"===size?"":size;var willAnimate=animated&&!this.noAnimation&&this.isAttached&&this._desiredSize!==size;this._desiredSize=size;this._updateTransition(!1);if(willAnimate){var startSize=this._calcSize();if(""===size){this.style[this._dimensionMax]="";size=this._calcSize()}this.style[this._dimensionMax]=startSize;this.scrollTop=this.scrollTop;this._updateTransition(!0);willAnimate=size!==startSize}this.style[this._dimensionMax]=size;if(!willAnimate){this._transitionEnd()}},enableTransition:function enableTransition(enabled){Polymer.Base._warn("`enableTransition()` is deprecated, use `noAnimation` instead.");this.noAnimation=!enabled},_updateTransition:function _updateTransition(enabled){this.style.transitionDuration=enabled&&!this.noAnimation?"":"0s"},_horizontalChanged:function _horizontalChanged(){this.style.transitionProperty=this._dimensionMaxCss;var otherDimension="maxWidth"===this._dimensionMax?"maxHeight":"maxWidth";this.style[otherDimension]="";this.updateSize(this.opened?"auto":"0px",!1)},_openedChanged:function _openedChanged(){this.setAttribute("aria-hidden",!this.opened);this._setTransitioning(!0);this.toggleClass("iron-collapse-closed",!1);this.toggleClass("iron-collapse-opened",!1);this.updateSize(this.opened?"auto":"0px",!0);if(this.opened){this.focus()}},_transitionEnd:function _transitionEnd(){this.style[this._dimensionMax]=this._desiredSize;this.toggleClass("iron-collapse-closed",!this.opened);this.toggleClass("iron-collapse-opened",this.opened);this._updateTransition(!1);this.notifyResize();this._setTransitioning(!1)},_onTransitionEnd:function _onTransitionEnd(event){if(Polymer.dom(event).rootTarget===this){this._transitionEnd()}},_calcSize:function _calcSize(){return this.getBoundingClientRect()[this.dimension]+"px"}});</script><script>Polymer.IronFormElementBehavior={properties:{name:{type:String},value:{notify:!0,type:String},required:{type:Boolean,value:!1},_parentForm:{type:Object}},attached:function attached(){if(!Polymer.Element){this.fire("iron-form-element-register")}},detached:function detached(){if(!Polymer.Element&&this._parentForm){this._parentForm.fire("iron-form-element-unregister",{target:this})}}};</script><script>Polymer.IronValidatableBehaviorMeta=null;Polymer.IronValidatableBehavior={properties:{validator:{type:String},invalid:{notify:!0,reflectToAttribute:!0,type:Boolean,value:!1,observer:"_invalidChanged"}},registered:function registered(){Polymer.IronValidatableBehaviorMeta=new Polymer.IronMeta({type:"validator"})},_invalidChanged:function _invalidChanged(){if(this.invalid){this.setAttribute("aria-invalid","true")}else{this.removeAttribute("aria-invalid")}},get _validator(){return Polymer.IronValidatableBehaviorMeta&&Polymer.IronValidatableBehaviorMeta.byKey(this.validator)},hasValidator:function hasValidator(){return null!=this._validator},validate:function validate(value){if(value===void 0&&this.value!==void 0)this.invalid=!this._getValidity(this.value);else this.invalid=!this._getValidity(value);return!this.invalid},_getValidity:function _getValidity(value){if(this.hasValidator()){return this._validator.validate(value)}return!0}};</script><dom-module id="iron-a11y-announcer" assetpath="../bower_components/iron-a11y-announcer/"><template><style>:host {
        display: inline-block;
        position: fixed;
        clip: rect(0px,0px,0px,0px);
      }</style><div aria-live$="[[mode]]">[[_text]]</div></template><script>(function(){"use strict";Polymer.IronA11yAnnouncer=Polymer({is:"iron-a11y-announcer",properties:{mode:{type:String,value:"polite"},_text:{type:String,value:""}},created:function created(){if(!Polymer.IronA11yAnnouncer.instance){Polymer.IronA11yAnnouncer.instance=this}document.body.addEventListener("iron-announce",this._onIronAnnounce.bind(this))},announce:function announce(text){this._text="";this.async(function(){this._text=text},100)},_onIronAnnounce:function _onIronAnnounce(event){if(event.detail&&event.detail.text){this.announce(event.detail.text)}}});Polymer.IronA11yAnnouncer.instance=null;Polymer.IronA11yAnnouncer.requestAvailability=function(){if(!Polymer.IronA11yAnnouncer.instance){Polymer.IronA11yAnnouncer.instance=document.createElement("iron-a11y-announcer")}document.body.appendChild(Polymer.IronA11yAnnouncer.instance)}})();</script></dom-module><dom-module id="iron-input" assetpath="../bower_components/iron-input/"><template><style>:host {
        display: inline-block;
      }</style><slot id="content"></slot></template><script>Polymer({is:"iron-input",behaviors:[Polymer.IronValidatableBehavior],properties:{bindValue:{type:String,value:""},value:{type:String,computed:"_computeValue(bindValue)"},allowedPattern:{type:String},autoValidate:{type:Boolean,value:!1},_inputElement:Object},observers:["_bindValueChanged(bindValue, _inputElement)"],listeners:{input:"_onInput",keypress:"_onKeypress"},created:function created(){Polymer.IronA11yAnnouncer.requestAvailability();this._previousValidInput="";this._patternAlreadyChecked=!1},attached:function attached(){this._observer=Polymer.dom(this).observeNodes(function(){this._initSlottedInput()}.bind(this))},detached:function detached(){if(this._observer){Polymer.dom(this).unobserveNodes(this._observer);this._observer=null}},get inputElement(){return this._inputElement},_initSlottedInput:function _initSlottedInput(){this._inputElement=this.getEffectiveChildren()[0];if(this.inputElement&&this.inputElement.value){this.bindValue=this.inputElement.value}this.fire("iron-input-ready")},get _patternRegExp(){var pattern;if(this.allowedPattern){pattern=new RegExp(this.allowedPattern)}else{switch(this.inputElement.type){case"number":pattern=/[0-9.,e-]/;break;}}return pattern},_bindValueChanged:function _bindValueChanged(bindValue,inputElement){if(!inputElement){return}if(bindValue===void 0){inputElement.value=null}else if(bindValue!==inputElement.value){this.inputElement.value=bindValue}if(this.autoValidate){this.validate()}this.fire("bind-value-changed",{value:bindValue})},_onInput:function _onInput(){if(this.allowedPattern&&!this._patternAlreadyChecked){var valid=this._checkPatternValidity();if(!valid){this._announceInvalidCharacter("Invalid string of characters not entered.");this.inputElement.value=this._previousValidInput}}this.bindValue=this._previousValidInput=this.inputElement.value;this._patternAlreadyChecked=!1},_isPrintable:function _isPrintable(event){var anyNonPrintable=8==event.keyCode||9==event.keyCode||13==event.keyCode||27==event.keyCode,mozNonPrintable=19==event.keyCode||20==event.keyCode||45==event.keyCode||46==event.keyCode||144==event.keyCode||145==event.keyCode||32<event.keyCode&&41>event.keyCode||111<event.keyCode&&124>event.keyCode;return!anyNonPrintable&&!(0==event.charCode&&mozNonPrintable)},_onKeypress:function _onKeypress(event){if(!this.allowedPattern&&"number"!==this.inputElement.type){return}var regexp=this._patternRegExp;if(!regexp){return}if(event.metaKey||event.ctrlKey||event.altKey){return}this._patternAlreadyChecked=!0;var thisChar=String.fromCharCode(event.charCode);if(this._isPrintable(event)&&!regexp.test(thisChar)){event.preventDefault();this._announceInvalidCharacter("Invalid character "+thisChar+" not entered.")}},_checkPatternValidity:function _checkPatternValidity(){var regexp=this._patternRegExp;if(!regexp){return!0}for(var i=0;i<this.inputElement.value.length;i++){if(!regexp.test(this.inputElement.value[i])){return!1}}return!0},validate:function validate(){if(!this.inputElement){this.invalid=!1;return!0}var valid=this.inputElement.checkValidity();if(valid){if(this.required&&""===this.bindValue){valid=!1}else if(this.hasValidator()){valid=Polymer.IronValidatableBehavior.validate.call(this,this.bindValue)}}this.invalid=!valid;this.fire("iron-input-validate");return valid},_announceInvalidCharacter:function _announceInvalidCharacter(message){this.fire("iron-announce",{text:message})},_computeValue:function _computeValue(bindValue){return bindValue}});</script></dom-module><script>Polymer.PaperInputHelper={};Polymer.PaperInputHelper.NextLabelID=1;Polymer.PaperInputHelper.NextAddonID=1;Polymer.PaperInputHelper.NextInputID=1;Polymer.PaperInputBehaviorImpl={properties:{label:{type:String},value:{notify:!0,type:String},disabled:{type:Boolean,value:!1},invalid:{type:Boolean,value:!1,notify:!0},allowedPattern:{type:String},type:{type:String},list:{type:String},pattern:{type:String},required:{type:Boolean,value:!1},errorMessage:{type:String},charCounter:{type:Boolean,value:!1},noLabelFloat:{type:Boolean,value:!1},alwaysFloatLabel:{type:Boolean,value:!1},autoValidate:{type:Boolean,value:!1},validator:{type:String},autocomplete:{type:String,value:"off"},autofocus:{type:Boolean,observer:"_autofocusChanged"},inputmode:{type:String},minlength:{type:Number},maxlength:{type:Number},min:{type:String},max:{type:String},step:{type:String},name:{type:String},placeholder:{type:String,value:""},readonly:{type:Boolean,value:!1},size:{type:Number},autocapitalize:{type:String,value:"none"},autocorrect:{type:String,value:"off"},autosave:{type:String},results:{type:Number},accept:{type:String},multiple:{type:Boolean},_ariaDescribedBy:{type:String,value:""},_ariaLabelledBy:{type:String,value:""},_inputId:{type:String,value:""}},listeners:{"addon-attached":"_onAddonAttached"},keyBindings:{"shift+tab:keydown":"_onShiftTabDown"},hostAttributes:{tabindex:0},get inputElement(){if(!this.$){this.$={}}if(!this.$.input){this._generateInputId();this.$.input=this.$$("#"+this._inputId)}return this.$.input},get _focusableElement(){return this.inputElement},created:function created(){this._typesThatHaveText=["date","datetime","datetime-local","month","time","week","file"]},attached:function attached(){this._updateAriaLabelledBy();if(!Polymer.Element&&this.inputElement&&-1!==this._typesThatHaveText.indexOf(this.inputElement.type)){this.alwaysFloatLabel=!0}},_appendStringWithSpace:function _appendStringWithSpace(str,more){if(str){str=str+" "+more}else{str=more}return str},_onAddonAttached:function _onAddonAttached(event){var target=Polymer.dom(event).rootTarget;if(target.id){this._ariaDescribedBy=this._appendStringWithSpace(this._ariaDescribedBy,target.id)}else{var id="paper-input-add-on-"+Polymer.PaperInputHelper.NextAddonID++;target.id=id;this._ariaDescribedBy=this._appendStringWithSpace(this._ariaDescribedBy,id)}},validate:function validate(){return this.inputElement.validate()},_focusBlurHandler:function _focusBlurHandler(event){Polymer.IronControlState._focusBlurHandler.call(this,event);if(this.focused&&!this._shiftTabPressed&&this._focusableElement){this._focusableElement.focus()}},_onShiftTabDown:function _onShiftTabDown(){var oldTabIndex=this.getAttribute("tabindex");this._shiftTabPressed=!0;this.setAttribute("tabindex","-1");this.async(function(){this.setAttribute("tabindex",oldTabIndex);this._shiftTabPressed=!1},1)},_handleAutoValidate:function _handleAutoValidate(){if(this.autoValidate)this.validate()},updateValueAndPreserveCaret:function updateValueAndPreserveCaret(newValue){try{var start=this.inputElement.selectionStart;this.value=newValue;this.inputElement.selectionStart=start;this.inputElement.selectionEnd=start}catch(e){this.value=newValue}},_computeAlwaysFloatLabel:function _computeAlwaysFloatLabel(alwaysFloatLabel,placeholder){return placeholder||alwaysFloatLabel},_updateAriaLabelledBy:function _updateAriaLabelledBy(){var label=Polymer.dom(this.root).querySelector("label");if(!label){this._ariaLabelledBy="";return}var labelledBy;if(label.id){labelledBy=label.id}else{labelledBy="paper-input-label-"+Polymer.PaperInputHelper.NextLabelID++;label.id=labelledBy}this._ariaLabelledBy=labelledBy},_generateInputId:function _generateInputId(){if(!this._inputId||""===this._inputId){this._inputId="input-"+Polymer.PaperInputHelper.NextInputID++}},_onChange:function _onChange(event){if(this.shadowRoot){this.fire(event.type,{sourceEvent:event},{node:this,bubbles:event.bubbles,cancelable:event.cancelable})}},_autofocusChanged:function _autofocusChanged(){if(this.autofocus&&this._focusableElement){var activeElement=document.activeElement,isActiveElementValid=babelHelpers.instanceof(activeElement,HTMLElement),isSomeElementActive=isActiveElementValid&&activeElement!==document.body&&activeElement!==document.documentElement;if(!isSomeElementActive){this._focusableElement.focus()}}}};Polymer.PaperInputBehavior=[Polymer.IronControlState,Polymer.IronA11yKeysBehavior,Polymer.PaperInputBehaviorImpl];</script><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,700|Roboto:400,300,300italic,400italic,500,500italic,700,700italic" crossorigin="anonymous"><custom-style><style is="custom-style">html {

      /* Shared Styles */
      --paper-font-common-base: {
        font-family: 'Roboto', 'Noto', sans-serif;
        -webkit-font-smoothing: antialiased;
      };

      --paper-font-common-code: {
        font-family: 'Roboto Mono', 'Consolas', 'Menlo', monospace;
        -webkit-font-smoothing: antialiased;
      };

      --paper-font-common-expensive-kerning: {
        text-rendering: optimizeLegibility;
      };

      --paper-font-common-nowrap: {
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      };

      /* Material Font Styles */

      --paper-font-display4: {
        @apply --paper-font-common-base;
        @apply --paper-font-common-nowrap;

        font-size: 112px;
        font-weight: 300;
        letter-spacing: -.044em;
        line-height: 120px;
      };

      --paper-font-display3: {
        @apply --paper-font-common-base;
        @apply --paper-font-common-nowrap;

        font-size: 56px;
        font-weight: 400;
        letter-spacing: -.026em;
        line-height: 60px;
      };

      --paper-font-display2: {
        @apply --paper-font-common-base;

        font-size: 45px;
        font-weight: 400;
        letter-spacing: -.018em;
        line-height: 48px;
      };

      --paper-font-display1: {
        @apply --paper-font-common-base;

        font-size: 34px;
        font-weight: 400;
        letter-spacing: -.01em;
        line-height: 40px;
      };

      --paper-font-headline: {
        @apply --paper-font-common-base;

        font-size: 24px;
        font-weight: 400;
        letter-spacing: -.012em;
        line-height: 32px;
      };

      --paper-font-title: {
        @apply --paper-font-common-base;
        @apply --paper-font-common-nowrap;

        font-size: 20px;
        font-weight: 500;
        line-height: 28px;
      };

      --paper-font-subhead: {
        @apply --paper-font-common-base;

        font-size: 16px;
        font-weight: 400;
        line-height: 24px;
      };

      --paper-font-body2: {
        @apply --paper-font-common-base;

        font-size: 14px;
        font-weight: 500;
        line-height: 24px;
      };

      --paper-font-body1: {
        @apply --paper-font-common-base;

        font-size: 14px;
        font-weight: 400;
        line-height: 20px;
      };

      --paper-font-caption: {
        @apply --paper-font-common-base;
        @apply --paper-font-common-nowrap;

        font-size: 12px;
        font-weight: 400;
        letter-spacing: 0.011em;
        line-height: 20px;
      };

      --paper-font-menu: {
        @apply --paper-font-common-base;
        @apply --paper-font-common-nowrap;

        font-size: 13px;
        font-weight: 500;
        line-height: 24px;
      };

      --paper-font-button: {
        @apply --paper-font-common-base;
        @apply --paper-font-common-nowrap;

        font-size: 14px;
        font-weight: 500;
        letter-spacing: 0.018em;
        line-height: 24px;
        text-transform: uppercase;
      };

      --paper-font-code2: {
        @apply --paper-font-common-code;

        font-size: 14px;
        font-weight: 700;
        line-height: 20px;
      };

      --paper-font-code1: {
        @apply --paper-font-common-code;

        font-size: 14px;
        font-weight: 500;
        line-height: 20px;
      };

    }</style></custom-style><script>Polymer.PaperInputAddonBehavior={attached:function attached(){Polymer.dom.flush();this.fire("addon-attached")},update:function update(){}};</script><dom-module id="paper-input-char-counter" assetpath="../bower_components/paper-input/"><template><style>:host {
        display: inline-block;
        float: right;

        @apply --paper-font-caption;
        @apply --paper-input-char-counter;
      }

      :host([hidden]) {
        display: none !important;
      }

      :host(:dir(rtl)) {
        float: left;
      }</style><span>[[_charCounterStr]]</span></template></dom-module><script>Polymer({is:"paper-input-char-counter",behaviors:[Polymer.PaperInputAddonBehavior],properties:{_charCounterStr:{type:String,value:"0"}},update:function update(state){if(!state.inputElement){return}state.value=state.value||"";var counter=state.value.toString().length.toString();if(state.inputElement.hasAttribute("maxlength")){counter+="/"+state.inputElement.getAttribute("maxlength")}this._charCounterStr=counter}});</script><custom-style><style is="custom-style">html {
      --paper-input-container-shared-input-style: {
        position: relative; /* to make a stacking context */
        outline: none;
        box-shadow: none;
        padding: 0;
        margin: 0;
        width: 100%;
        max-width: 100%;
        background: transparent;
        border: none;
        color: var(--paper-input-container-input-color, var(--primary-text-color));
        -webkit-appearance: none;
        text-align: inherit;
        vertical-align: bottom;

        @apply --paper-font-subhead;
      };
    }</style></custom-style><dom-module id="paper-input-container" assetpath="../bower_components/paper-input/"><template><style>:host {
        display: block;
        padding: 8px 0;
        @apply --paper-input-container;
      }

      :host([inline]) {
        display: inline-block;
      }

      :host([disabled]) {
        pointer-events: none;
        opacity: 0.33;

        @apply --paper-input-container-disabled;
      }

      :host([hidden]) {
        display: none !important;
      }

      [hidden] {
        display: none !important;
      }

      .floated-label-placeholder {
        @apply --paper-font-caption;
      }

      .underline {
        height: 2px;
        position: relative;
      }

      .focused-line {
        @apply --layout-fit;
        border-bottom: 2px solid var(--paper-input-container-focus-color, var(--primary-color));

        -webkit-transform-origin: center center;
        transform-origin: center center;
        -webkit-transform: scale3d(0,1,1);
        transform: scale3d(0,1,1);

        @apply --paper-input-container-underline-focus;
      }

      .underline.is-highlighted .focused-line {
        -webkit-transform: none;
        transform: none;
        -webkit-transition: -webkit-transform 0.25s;
        transition: transform 0.25s;

        @apply --paper-transition-easing;
      }

      .underline.is-invalid .focused-line {
        border-color: var(--paper-input-container-invalid-color, var(--error-color));
        -webkit-transform: none;
        transform: none;
        -webkit-transition: -webkit-transform 0.25s;
        transition: transform 0.25s;

        @apply --paper-transition-easing;
      }

      .unfocused-line {
        @apply --layout-fit;
        border-bottom: 1px solid var(--paper-input-container-color, var(--secondary-text-color));
        @apply --paper-input-container-underline;
      }

      :host([disabled]) .unfocused-line {
        border-bottom: 1px dashed;
        border-color: var(--paper-input-container-color, var(--secondary-text-color));
        @apply --paper-input-container-underline-disabled;
      }

      .input-wrapper {
        @apply --layout-horizontal;
        @apply --layout-center;
        position: relative;
      }

      .input-content {
        @apply --layout-flex-auto;
        @apply --layout-relative;
        max-width: 100%;
      }

      .input-content ::slotted(label),
      .input-content ::slotted(.paper-input-label) {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        font: inherit;
        color: var(--paper-input-container-color, var(--secondary-text-color));
        -webkit-transition: -webkit-transform 0.25s, width 0.25s;
        transition: transform 0.25s, width 0.25s;
        -webkit-transform-origin: left top;
        transform-origin: left top;
        /* Fix for safari not focusing 0-height date/time inputs with -webkit-apperance: none; */
        min-height: 1px;

        @apply --paper-font-common-nowrap;
        @apply --paper-font-subhead;
        @apply --paper-input-container-label;
        @apply --paper-transition-easing;
      }

      .input-content.label-is-floating ::slotted(label),
      .input-content.label-is-floating ::slotted(.paper-input-label) {
        -webkit-transform: translateY(-75%) scale(0.75);
        transform: translateY(-75%) scale(0.75);

        /* Since we scale to 75/100 of the size, we actually have 100/75 of the
        original space now available */
        width: 133%;

        @apply --paper-input-container-label-floating;
      }

      :host(:dir(rtl)) .input-content.label-is-floating ::slotted(label),
      :host(:dir(rtl)) .input-content.label-is-floating ::slotted(.paper-input-label) {
        right: 0;
        left: auto;
        -webkit-transform-origin: right top;
        transform-origin: right top;
      }

      .input-content.label-is-highlighted ::slotted(label),
      .input-content.label-is-highlighted ::slotted(.paper-input-label) {
        color: var(--paper-input-container-focus-color, var(--primary-color));

        @apply --paper-input-container-label-focus;
      }

      .input-content.is-invalid ::slotted(label),
      .input-content.is-invalid ::slotted(.paper-input-label) {
        color: var(--paper-input-container-invalid-color, var(--error-color));
      }

      .input-content.label-is-hidden ::slotted(label),
      .input-content.label-is-hidden ::slotted(.paper-input-label) {
        visibility: hidden;
      }

      .input-content ::slotted(input),
      .input-content ::slotted(iron-input),
      .input-content ::slotted(textarea),
      .input-content ::slotted(iron-autogrow-textarea),
      .input-content ::slotted(.paper-input-input) {
        @apply --paper-input-container-shared-input-style;
        /* The apply shim doesn't apply the nested color custom property,
          so we have to re-apply it here. */
        color: var(--paper-input-container-input-color, var(--primary-text-color));
        @apply --paper-input-container-input;
      }

      .input-content ::slotted(input)::-webkit-outer-spin-button,
      .input-content ::slotted(input)::-webkit-inner-spin-button {
        @apply --paper-input-container-input-webkit-spinner;
      }

      .input-content.focused ::slotted(input),
      .input-content.focused ::slotted(iron-input),
      .input-content.focused ::slotted(textarea),
      .input-content.focused ::slotted(iron-autogrow-textarea),
      .input-content.focused ::slotted(.paper-input-input) {
        @apply --paper-input-container-input-focus;
      }

      .input-content.is-invalid ::slotted(input),
      .input-content.is-invalid ::slotted(iron-input),
      .input-content.is-invalid ::slotted(textarea),
      .input-content.is-invalid ::slotted(iron-autogrow-textarea),
      .input-content.is-invalid ::slotted(.paper-input-input) {
        @apply --paper-input-container-input-invalid;
      }

      .prefix ::slotted(*) {
        display: inline-block;
        @apply --paper-font-subhead;
        @apply --layout-flex-none;
        @apply --paper-input-prefix;
      }

      .suffix ::slotted(*) {
        display: inline-block;
        @apply --paper-font-subhead;
        @apply --layout-flex-none;

        @apply --paper-input-suffix;
      }

      /* Firefox sets a min-width on the input, which can cause layout issues */
      .input-content ::slotted(input) {
        min-width: 0;
      }

      .input-content ::slotted(textarea) {
        resize: none;
      }

      .add-on-content {
        position: relative;
      }

      .add-on-content.is-invalid ::slotted(*) {
        color: var(--paper-input-container-invalid-color, var(--error-color));
      }

      .add-on-content.is-highlighted ::slotted(*) {
        color: var(--paper-input-container-focus-color, var(--primary-color));
      }</style><div class="floated-label-placeholder" aria-hidden="true" hidden="[[noLabelFloat]]">&nbsp;</div><div class="input-wrapper"><span class="prefix"><slot name="prefix"></slot></span><div class$="[[_computeInputContentClass(noLabelFloat,alwaysFloatLabel,focused,invalid,_inputHasContent)]]" id="labelAndInputContainer"><slot name="label"></slot><slot name="input"></slot></div><span class="suffix"><slot name="suffix"></slot></span></div><div class$="[[_computeUnderlineClass(focused,invalid)]]"><div class="unfocused-line"></div><div class="focused-line"></div></div><div class$="[[_computeAddOnContentClass(focused,invalid)]]"><slot name="add-on"></slot></div></template></dom-module><script>Polymer({is:"paper-input-container",properties:{noLabelFloat:{type:Boolean,value:!1},alwaysFloatLabel:{type:Boolean,value:!1},attrForValue:{type:String,value:"bind-value"},autoValidate:{type:Boolean,value:!1},invalid:{observer:"_invalidChanged",type:Boolean,value:!1},focused:{readOnly:!0,type:Boolean,value:!1,notify:!0},_addons:{type:Array},_inputHasContent:{type:Boolean,value:!1},_inputSelector:{type:String,value:"input,iron-input,textarea,.paper-input-input"},_boundOnFocus:{type:Function,value:function value(){return this._onFocus.bind(this)}},_boundOnBlur:{type:Function,value:function value(){return this._onBlur.bind(this)}},_boundOnInput:{type:Function,value:function value(){return this._onInput.bind(this)}},_boundValueChanged:{type:Function,value:function value(){return this._onValueChanged.bind(this)}}},listeners:{"addon-attached":"_onAddonAttached","iron-input-validate":"_onIronInputValidate"},get _valueChangedEvent(){return this.attrForValue+"-changed"},get _propertyForValue(){return Polymer.CaseMap.dashToCamelCase(this.attrForValue)},get _inputElement(){return Polymer.dom(this).querySelector(this._inputSelector)},get _inputElementValue(){return this._inputElement[this._propertyForValue]||this._inputElement.value},ready:function ready(){this.__isFirstValueUpdate=!0;if(!this._addons){this._addons=[]}this.addEventListener("focus",this._boundOnFocus,!0);this.addEventListener("blur",this._boundOnBlur,!0)},attached:function attached(){if(this.attrForValue){this._inputElement.addEventListener(this._valueChangedEvent,this._boundValueChanged)}else{this.addEventListener("input",this._onInput)}if(this._inputElementValue&&""!=this._inputElementValue){this._handleValueAndAutoValidate(this._inputElement)}else{this._handleValue(this._inputElement)}},_onAddonAttached:function _onAddonAttached(event){if(!this._addons){this._addons=[]}var target=event.target;if(-1===this._addons.indexOf(target)){this._addons.push(target);if(this.isAttached){this._handleValue(this._inputElement)}}},_onFocus:function _onFocus(){this._setFocused(!0)},_onBlur:function _onBlur(){this._setFocused(!1);this._handleValueAndAutoValidate(this._inputElement)},_onInput:function _onInput(event){this._handleValueAndAutoValidate(event.target)},_onValueChanged:function _onValueChanged(event){var input=event.target;if(this.__isFirstValueUpdate){this.__isFirstValueUpdate=!1;if(input.value===void 0){return}}this._handleValueAndAutoValidate(event.target)},_handleValue:function _handleValue(inputElement){var value=this._inputElementValue;if(value||0===value||"number"===inputElement.type&&!inputElement.checkValidity()){this._inputHasContent=!0}else{this._inputHasContent=!1}this.updateAddons({inputElement:inputElement,value:value,invalid:this.invalid})},_handleValueAndAutoValidate:function _handleValueAndAutoValidate(inputElement){if(this.autoValidate&&inputElement){var valid;if(inputElement.validate){valid=inputElement.validate(this._inputElementValue)}else{valid=inputElement.checkValidity()}this.invalid=!valid}this._handleValue(inputElement)},_onIronInputValidate:function _onIronInputValidate(){this.invalid=this._inputElement.invalid},_invalidChanged:function _invalidChanged(){if(this._addons){this.updateAddons({invalid:this.invalid})}},updateAddons:function updateAddons(state){for(var addon,index=0;addon=this._addons[index];index++){addon.update(state)}},_computeInputContentClass:function _computeInputContentClass(noLabelFloat,alwaysFloatLabel,focused,invalid,_inputHasContent){var cls="input-content";if(!noLabelFloat){var label=this.querySelector("label");if(alwaysFloatLabel||_inputHasContent){cls+=" label-is-floating";this.$.labelAndInputContainer.style.position="static";if(invalid){cls+=" is-invalid"}else if(focused){cls+=" label-is-highlighted"}}else{if(label){this.$.labelAndInputContainer.style.position="relative"}if(invalid){cls+=" is-invalid"}}}else{if(_inputHasContent){cls+=" label-is-hidden"}if(invalid){cls+=" is-invalid"}}if(focused){cls+=" focused"}return cls},_computeUnderlineClass:function _computeUnderlineClass(focused,invalid){var cls="underline";if(invalid){cls+=" is-invalid"}else if(focused){cls+=" is-highlighted"}return cls},_computeAddOnContentClass:function _computeAddOnContentClass(focused,invalid){var cls="add-on-content";if(invalid){cls+=" is-invalid"}else if(focused){cls+=" is-highlighted"}return cls}});</script><dom-module id="paper-input-error" assetpath="../bower_components/paper-input/"><template><style>:host {
        display: inline-block;
        visibility: hidden;

        color: var(--paper-input-container-invalid-color, var(--error-color));

        @apply --paper-font-caption;
        @apply --paper-input-error;
        position: absolute;
        left:0;
        right:0;
      }

      :host([invalid]) {
        visibility: visible;
      };</style><slot></slot></template></dom-module><script>Polymer({is:"paper-input-error",behaviors:[Polymer.PaperInputAddonBehavior],properties:{invalid:{readOnly:!0,reflectToAttribute:!0,type:Boolean}},update:function update(state){this._setInvalid(state.invalid)}});</script><dom-module id="paper-input" assetpath="../bower_components/paper-input/"><template><style>:host {
        display: block;
      }

      :host([focused]) {
        outline: none;
      }

      :host([hidden]) {
        display: none !important;
      }

      input {
        /* Firefox sets a min-width on the input, which can cause layout issues */
        min-width: 0;
      }

      /* In 1.x, the <input> is distributed to paper-input-container, which styles it.
      In 2.x the <iron-input> is distributed to paper-input-container, which styles
      it, but in order for this to work correctly, we need to reset some
      of the native input's properties to inherit (from the iron-input) */
      iron-input > input {
        @apply --paper-input-container-shared-input-style;
        font-family: inherit;
        font-weight: inherit;
        font-size: inherit;
        letter-spacing: inherit;
        word-spacing: inherit;
        line-height: inherit;
        text-shadow: inherit;
        color: inherit;
        cursor: inherit;
      }

      input:disabled {
        @apply --paper-input-container-input-disabled;
      }

      input::-webkit-outer-spin-button,
      input::-webkit-inner-spin-button {
        @apply --paper-input-container-input-webkit-spinner;
      }

      input::-webkit-clear-button {
        @apply --paper-input-container-input-webkit-clear;
      }

      input::-webkit-calendar-picker-indicator {
        @apply --paper-input-container-input-webkit-calendar-picker-indicator;
      }

      input::-webkit-input-placeholder {
        color: var(--paper-input-container-color, var(--secondary-text-color));
      }

      input:-moz-placeholder {
        color: var(--paper-input-container-color, var(--secondary-text-color));
      }

      input::-moz-placeholder {
        color: var(--paper-input-container-color, var(--secondary-text-color));
      }

      input::-ms-clear {
        @apply --paper-input-container-ms-clear;
      }

      input::-ms-reveal {
        @apply --paper-input-container-ms-reveal;
      }

      input:-ms-input-placeholder {
        color: var(--paper-input-container-color, var(--secondary-text-color));
      }

      label {
        pointer-events: none;
      }</style><paper-input-container id="container" no-label-float="[[noLabelFloat]]" always-float-label="[[_computeAlwaysFloatLabel(alwaysFloatLabel,placeholder)]]" auto-validate$="[[autoValidate]]" disabled$="[[disabled]]" invalid="[[invalid]]"><slot name="prefix" slot="prefix"></slot><label hidden$="[[!label]]" aria-hidden="true" for$="[[_inputId]]" slot="label">[[label]]</label> <span id="template-placeholder"></span><slot name="suffix" slot="suffix"></slot><template is="dom-if" if="[[errorMessage]]"><paper-input-error aria-live="assertive" slot="add-on">[[errorMessage]]</paper-input-error></template><template is="dom-if" if="[[charCounter]]"><paper-input-char-counter slot="add-on"></paper-input-char-counter></template></paper-input-container></template><template id="v0"><input is="iron-input" slot="input" class="input-element" id$="[[_inputId]]" aria-labelledby$="[[_ariaLabelledBy]]" aria-describedby$="[[_ariaDescribedBy]]" disabled$="[[disabled]]" title$="[[title]]" bind-value="{{value}}" invalid="{{invalid}}" prevent-invalid-input="[[preventInvalidInput]]" allowed-pattern="[[allowedPattern]]" validator="[[validator]]" type$="[[type]]" pattern$="[[pattern]]" required$="[[required]]" autocomplete$="[[autocomplete]]" autofocus$="[[autofocus]]" inputmode$="[[inputmode]]" minlength$="[[minlength]]" maxlength$="[[maxlength]]" min$="[[min]]" max$="[[max]]" step$="[[step]]" name$="[[name]]" placeholder$="[[placeholder]]" readonly$="[[readonly]]" list$="[[list]]" size$="[[size]]" autocapitalize$="[[autocapitalize]]" autocorrect$="[[autocorrect]]" on-change="_onChange" tabindex$="[[tabIndex]]" autosave$="[[autosave]]" results$="[[results]]" accept$="[[accept]]" multiple$="[[multiple]]"></template><template id="v1"><iron-input bind-value="{{value}}" slot="input" class="input-element" id$="[[_inputId]]" maxlength$="[[maxlength]]" allowed-pattern="[[allowedPattern]]" invalid="{{invalid}}" validator="[[validator]]"><input aria-labelledby$="[[_ariaLabelledBy]]" aria-describedby$="[[_ariaDescribedBy]]" disabled$="[[disabled]]" title$="[[title]]" type$="[[type]]" pattern$="[[pattern]]" required$="[[required]]" autocomplete$="[[autocomplete]]" autofocus$="[[autofocus]]" inputmode$="[[inputmode]]" minlength$="[[minlength]]" maxlength$="[[maxlength]]" min$="[[min]]" max$="[[max]]" step$="[[step]]" name$="[[name]]" placeholder$="[[placeholder]]" readonly$="[[readonly]]" list$="[[list]]" size$="[[size]]" autocapitalize$="[[autocapitalize]]" autocorrect$="[[autocorrect]]" on-change="_onChange" tabindex$="[[tabIndex]]" autosave$="[[autosave]]" results$="[[results]]" accept$="[[accept]]" multiple$="[[multiple]]"></iron-input></template></dom-module><script>Polymer({is:"paper-input",behaviors:[Polymer.PaperInputBehavior,Polymer.IronFormElementBehavior],beforeRegister:function beforeRegister(){var ironInput=document.createElement("iron-input"),version="function"==typeof ironInput._initSlottedInput?"v1":"v0",template=Polymer.DomModule.import("paper-input","template"),inputTemplate=Polymer.DomModule.import("paper-input","template#"+version),inputPlaceholder=template.content.querySelector("#template-placeholder");if(inputPlaceholder){inputPlaceholder.parentNode.replaceChild(inputTemplate.content,inputPlaceholder)}},get _focusableElement(){return Polymer.Element?this.inputElement._inputElement:this.inputElement},listeners:{"iron-input-ready":"_onIronInputReady"},_onIronInputReady:function _onIronInputReady(){if(!this.$.nativeInput){this.$.nativeInput=this.$$("input")}if(this.inputElement&&-1!==this._typesThatHaveText.indexOf(this.$.nativeInput.type)){this.alwaysFloatLabel=!0}if(!!this.inputElement.bindValue){this.$.container._handleValueAndAutoValidate(this.inputElement)}}});</script><script>Polymer.IronMenubarBehaviorImpl={hostAttributes:{role:"menubar"},keyBindings:{left:"_onLeftKey",right:"_onRightKey"},_onUpKey:function _onUpKey(event){this.focusedItem.click();event.detail.keyboardEvent.preventDefault()},_onDownKey:function _onDownKey(event){this.focusedItem.click();event.detail.keyboardEvent.preventDefault()},get _isRTL(){return"rtl"===window.getComputedStyle(this).direction},_onLeftKey:function _onLeftKey(event){if(this._isRTL){this._focusNext()}else{this._focusPrevious()}event.detail.keyboardEvent.preventDefault()},_onRightKey:function _onRightKey(event){if(this._isRTL){this._focusPrevious()}else{this._focusNext()}event.detail.keyboardEvent.preventDefault()},_onKeydown:function _onKeydown(event){if(this.keyboardEventMatchesKeys(event,"up down left right esc")){return}this._focusWithKeyboardEvent(event)}};Polymer.IronMenubarBehavior=[Polymer.IronMenuBehavior,Polymer.IronMenubarBehaviorImpl];</script><iron-iconset-svg name="icons" size="24"><svg><defs><g id="3d-rotation"><path d="M7.52 21.48C4.25 19.94 1.91 16.76 1.55 13H.05C.56 19.16 5.71 24 12 24l.66-.03-3.81-3.81-1.33 1.32zm.89-6.52c-.19 0-.37-.03-.52-.08-.16-.06-.29-.13-.4-.24-.11-.1-.2-.22-.26-.37-.06-.14-.09-.3-.09-.47h-1.3c0 .36.07.68.21.95.14.27.33.5.56.69.24.18.51.32.82.41.3.1.62.15.96.15.37 0 .72-.05 1.03-.15.32-.1.6-.25.83-.44s.42-.43.55-.72c.13-.29.2-.61.2-.97 0-.19-.02-.38-.07-.56-.05-.18-.12-.35-.23-.51-.1-.16-.24-.3-.4-.43-.17-.13-.37-.23-.61-.31.2-.09.37-.2.52-.33.15-.13.27-.27.37-.42.1-.15.17-.3.22-.46.05-.16.07-.32.07-.48 0-.36-.06-.68-.18-.96-.12-.28-.29-.51-.51-.69-.2-.19-.47-.33-.77-.43C9.1 8.05 8.76 8 8.39 8c-.36 0-.69.05-1 .16-.3.11-.57.26-.79.45-.21.19-.38.41-.51.67-.12.26-.18.54-.18.85h1.3c0-.17.03-.32.09-.45s.14-.25.25-.34c.11-.09.23-.17.38-.22.15-.05.3-.08.48-.08.4 0 .7.1.89.31.19.2.29.49.29.86 0 .18-.03.34-.08.49-.05.15-.14.27-.25.37-.11.1-.25.18-.41.24-.16.06-.36.09-.58.09H7.5v1.03h.77c.22 0 .42.02.6.07s.33.13.45.23c.12.11.22.24.29.4.07.16.1.35.1.57 0 .41-.12.72-.35.93-.23.23-.55.33-.95.33zm8.55-5.92c-.32-.33-.7-.59-1.14-.77-.43-.18-.92-.27-1.46-.27H12v8h2.3c.55 0 1.06-.09 1.51-.27.45-.18.84-.43 1.16-.76.32-.33.57-.73.74-1.19.17-.47.26-.99.26-1.57v-.4c0-.58-.09-1.1-.26-1.57-.18-.47-.43-.87-.75-1.2zm-.39 3.16c0 .42-.05.79-.14 1.13-.1.33-.24.62-.43.85-.19.23-.43.41-.71.53-.29.12-.62.18-.99.18h-.91V9.12h.97c.72 0 1.27.23 1.64.69.38.46.57 1.12.57 1.99v.4zM12 0l-.66.03 3.81 3.81 1.33-1.33c3.27 1.55 5.61 4.72 5.96 8.48h1.5C23.44 4.84 18.29 0 12 0z"></path></g><g id="accessibility"><path d="M12 2c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zm9 7h-6v13h-2v-6h-2v6H9V9H3V7h18v2z"></path></g><g id="accessible"><circle cx="12" cy="4" r="2"></circle><path d="M19 13v-2c-1.54.02-3.09-.75-4.07-1.83l-1.29-1.43c-.17-.19-.38-.34-.61-.45-.01 0-.01-.01-.02-.01H13c-.35-.2-.75-.3-1.19-.26C10.76 7.11 10 8.04 10 9.09V15c0 1.1.9 2 2 2h5v5h2v-5.5c0-1.1-.9-2-2-2h-3v-3.45c1.29 1.07 3.25 1.94 5 1.95zm-6.17 5c-.41 1.16-1.52 2-2.83 2-1.66 0-3-1.34-3-3 0-1.31.84-2.41 2-2.83V12.1c-2.28.46-4 2.48-4 4.9 0 2.76 2.24 5 5 5 2.42 0 4.44-1.72 4.9-4h-2.07z"></path></g><g id="account-balance"><path d="M4 10v7h3v-7H4zm6 0v7h3v-7h-3zM2 22h19v-3H2v3zm14-12v7h3v-7h-3zm-4.5-9L2 6v2h19V6l-9.5-5z"></path></g><g id="account-balance-wallet"><path d="M21 18v1c0 1.1-.9 2-2 2H5c-1.11 0-2-.9-2-2V5c0-1.1.89-2 2-2h14c1.1 0 2 .9 2 2v1h-9c-1.11 0-2 .9-2 2v8c0 1.1.89 2 2 2h9zm-9-2h10V8H12v8zm4-2.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"></path></g><g id="account-box"><path d="M3 5v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2H5c-1.11 0-2 .9-2 2zm12 4c0 1.66-1.34 3-3 3s-3-1.34-3-3 1.34-3 3-3 3 1.34 3 3zm-9 8c0-2 4-3.1 6-3.1s6 1.1 6 3.1v1H6v-1z"></path></g><g id="account-circle"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"></path></g><g id="add"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"></path></g><g id="add-alert"><path d="M10.01 21.01c0 1.1.89 1.99 1.99 1.99s1.99-.89 1.99-1.99h-3.98zm8.87-4.19V11c0-3.25-2.25-5.97-5.29-6.69v-.72C13.59 2.71 12.88 2 12 2s-1.59.71-1.59 1.59v.72C7.37 5.03 5.12 7.75 5.12 11v5.82L3 18.94V20h18v-1.06l-2.12-2.12zM16 13.01h-3v3h-2v-3H8V11h3V8h2v3h3v2.01z"></path></g><g id="add-box"><path d="M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"></path></g><g id="add-circle"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"></path></g><g id="add-circle-outline"><path d="M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"></path></g><g id="add-shopping-cart"><path d="M11 9h2V6h3V4h-3V1h-2v3H8v2h3v3zm-4 9c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zm10 0c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2zm-9.83-3.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.86-7.01L19.42 4h-.01l-1.1 2-2.76 5H8.53l-.13-.27L6.16 6l-.95-2-.94-2H1v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.13 0-.25-.11-.25-.25z"></path></g><g id="alarm"><path d="M22 5.72l-4.6-3.86-1.29 1.53 4.6 3.86L22 5.72zM7.88 3.39L6.6 1.86 2 5.71l1.29 1.53 4.59-3.85zM12.5 8H11v6l4.75 2.85.75-1.23-4-2.37V8zM12 4c-4.97 0-9 4.03-9 9s4.02 9 9 9c4.97 0 9-4.03 9-9s-4.03-9-9-9zm0 16c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"></path></g><g id="alarm-add"><path d="M7.88 3.39L6.6 1.86 2 5.71l1.29 1.53 4.59-3.85zM22 5.72l-4.6-3.86-1.29 1.53 4.6 3.86L22 5.72zM12 4c-4.97 0-9 4.03-9 9s4.02 9 9 9c4.97 0 9-4.03 9-9s-4.03-9-9-9zm0 16c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7zm1-11h-2v3H8v2h3v3h2v-3h3v-2h-3V9z"></path></g><g id="alarm-off"><path d="M12 6c3.87 0 7 3.13 7 7 0 .84-.16 1.65-.43 2.4l1.52 1.52c.58-1.19.91-2.51.91-3.92 0-4.97-4.03-9-9-9-1.41 0-2.73.33-3.92.91L9.6 6.43C10.35 6.16 11.16 6 12 6zm10-.28l-4.6-3.86-1.29 1.53 4.6 3.86L22 5.72zM2.92 2.29L1.65 3.57 2.98 4.9l-1.11.93 1.42 1.42 1.11-.94.8.8C3.83 8.69 3 10.75 3 13c0 4.97 4.02 9 9 9 2.25 0 4.31-.83 5.89-2.2l2.2 2.2 1.27-1.27L3.89 3.27l-.97-.98zm13.55 16.1C15.26 19.39 13.7 20 12 20c-3.87 0-7-3.13-7-7 0-1.7.61-3.26 1.61-4.47l9.86 9.86zM8.02 3.28L6.6 1.86l-.86.71 1.42 1.42.86-.71z"></path></g><g id="alarm-on"><path d="M22 5.72l-4.6-3.86-1.29 1.53 4.6 3.86L22 5.72zM7.88 3.39L6.6 1.86 2 5.71l1.29 1.53 4.59-3.85zM12 4c-4.97 0-9 4.03-9 9s4.02 9 9 9c4.97 0 9-4.03 9-9s-4.03-9-9-9zm0 16c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7zm-1.46-5.47L8.41 12.4l-1.06 1.06 3.18 3.18 6-6-1.06-1.06-4.93 4.95z"></path></g><g id="all-out"><path d="M16.21 4.16l4 4v-4zm4 12l-4 4h4zm-12 4l-4-4v4zm-4-12l4-4h-4zm12.95-.95c-2.73-2.73-7.17-2.73-9.9 0s-2.73 7.17 0 9.9 7.17 2.73 9.9 0 2.73-7.16 0-9.9zm-1.1 8.8c-2.13 2.13-5.57 2.13-7.7 0s-2.13-5.57 0-7.7 5.57-2.13 7.7 0 2.13 5.57 0 7.7z"></path></g><g id="android"><path d="M6 18c0 .55.45 1 1 1h1v3.5c0 .83.67 1.5 1.5 1.5s1.5-.67 1.5-1.5V19h2v3.5c0 .83.67 1.5 1.5 1.5s1.5-.67 1.5-1.5V19h1c.55 0 1-.45 1-1V8H6v10zM3.5 8C2.67 8 2 8.67 2 9.5v7c0 .83.67 1.5 1.5 1.5S5 17.33 5 16.5v-7C5 8.67 4.33 8 3.5 8zm17 0c-.83 0-1.5.67-1.5 1.5v7c0 .83.67 1.5 1.5 1.5s1.5-.67 1.5-1.5v-7c0-.83-.67-1.5-1.5-1.5zm-4.97-5.84l1.3-1.3c.2-.2.2-.51 0-.71-.2-.2-.51-.2-.71 0l-1.48 1.48C13.85 1.23 12.95 1 12 1c-.96 0-1.86.23-2.66.63L7.85.15c-.2-.2-.51-.2-.71 0-.2.2-.2.51 0 .71l1.31 1.31C6.97 3.26 6 5.01 6 7h12c0-1.99-.97-3.75-2.47-4.84zM10 5H9V4h1v1zm5 0h-1V4h1v1z"></path></g><g id="announcement"><path d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-7 9h-2V5h2v6zm0 4h-2v-2h2v2z"></path></g><g id="apps"><path d="M4 8h4V4H4v4zm6 12h4v-4h-4v4zm-6 0h4v-4H4v4zm0-6h4v-4H4v4zm6 0h4v-4h-4v4zm6-10v4h4V4h-4zm-6 4h4V4h-4v4zm6 6h4v-4h-4v4zm0 6h4v-4h-4v4z"></path></g><g id="archive"><path d="M20.54 5.23l-1.39-1.68C18.88 3.21 18.47 3 18 3H6c-.47 0-.88.21-1.16.55L3.46 5.23C3.17 5.57 3 6.02 3 6.5V19c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V6.5c0-.48-.17-.93-.46-1.27zM12 17.5L6.5 12H10v-2h4v2h3.5L12 17.5zM5.12 5l.81-1h12l.94 1H5.12z"></path></g><g id="arrow-back"><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"></path></g><g id="arrow-downward"><path d="M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"></path></g><g id="arrow-drop-down"><path d="M7 10l5 5 5-5z"></path></g><g id="arrow-drop-down-circle"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 12l-4-4h8l-4 4z"></path></g><g id="arrow-drop-up"><path d="M7 14l5-5 5 5z"></path></g><g id="arrow-forward"><path d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"></path></g><g id="arrow-upward"><path d="M4 12l1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8-8 8z"></path></g><g id="aspect-ratio"><path d="M19 12h-2v3h-3v2h5v-5zM7 9h3V7H5v5h2V9zm14-6H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16.01H3V4.99h18v14.02z"></path></g><g id="assessment"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"></path></g><g id="assignment"><path d="M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm2 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"></path></g><g id="assignment-ind"><path d="M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm0 4c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm6 12H6v-1.4c0-2 4-3.1 6-3.1s6 1.1 6 3.1V19z"></path></g><g id="assignment-late"><path d="M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-6 15h-2v-2h2v2zm0-4h-2V8h2v6zm-1-9c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1z"></path></g><g id="assignment-return"><path d="M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm4 12h-4v3l-5-5 5-5v3h4v4z"></path></g><g id="assignment-returned"><path d="M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm0 15l-5-5h3V9h4v4h3l-5 5z"></path></g><g id="assignment-turned-in"><path d="M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm-2 14l-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9l-8 8z"></path></g><g id="attachment"><path d="M2 12.5C2 9.46 4.46 7 7.5 7H18c2.21 0 4 1.79 4 4s-1.79 4-4 4H9.5C8.12 15 7 13.88 7 12.5S8.12 10 9.5 10H17v2H9.41c-.55 0-.55 1 0 1H18c1.1 0 2-.9 2-2s-.9-2-2-2H7.5C5.57 9 4 10.57 4 12.5S5.57 16 7.5 16H17v2H7.5C4.46 18 2 15.54 2 12.5z"></path></g><g id="autorenew"><path d="M12 6v3l4-4-4-4v3c-4.42 0-8 3.58-8 8 0 1.57.46 3.03 1.24 4.26L6.7 14.8c-.45-.83-.7-1.79-.7-2.8 0-3.31 2.69-6 6-6zm6.76 1.74L17.3 9.2c.44.84.7 1.79.7 2.8 0 3.31-2.69 6-6 6v-3l-4 4 4 4v-3c4.42 0 8-3.58 8-8 0-1.57-.46-3.03-1.24-4.26z"></path></g><g id="backspace"><path d="M22 3H7c-.69 0-1.23.35-1.59.88L0 12l5.41 8.11c.36.53.9.89 1.59.89h15c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-3 12.59L17.59 17 14 13.41 10.41 17 9 15.59 12.59 12 9 8.41 10.41 7 14 10.59 17.59 7 19 8.41 15.41 12 19 15.59z"></path></g><g id="backup"><path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM14 13v4h-4v-4H7l5-5 5 5h-3z"></path></g><g id="block"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM4 12c0-4.42 3.58-8 8-8 1.85 0 3.55.63 4.9 1.69L5.69 16.9C4.63 15.55 4 13.85 4 12zm8 8c-1.85 0-3.55-.63-4.9-1.69L18.31 7.1C19.37 8.45 20 10.15 20 12c0 4.42-3.58 8-8 8z"></path></g><g id="book"><path d="M18 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 4h5v8l-2.5-1.5L6 12V4z"></path></g><g id="bookmark"><path d="M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2z"></path></g><g id="bookmark-border"><path d="M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2zm0 15l-5-2.18L7 18V5h10v13z"></path></g><g id="bug-report"><path d="M20 8h-2.81c-.45-.78-1.07-1.45-1.82-1.96L17 4.41 15.59 3l-2.17 2.17C12.96 5.06 12.49 5 12 5c-.49 0-.96.06-1.41.17L8.41 3 7 4.41l1.62 1.63C7.88 6.55 7.26 7.22 6.81 8H4v2h2.09c-.05.33-.09.66-.09 1v1H4v2h2v1c0 .34.04.67.09 1H4v2h2.81c1.04 1.79 2.97 3 5.19 3s4.15-1.21 5.19-3H20v-2h-2.09c.05-.33.09-.66.09-1v-1h2v-2h-2v-1c0-.34-.04-.67-.09-1H20V8zm-6 8h-4v-2h4v2zm0-4h-4v-2h4v2z"></path></g><g id="build"><path d="M22.7 19l-9.1-9.1c.9-2.3.4-5-1.5-6.9-2-2-5-2.4-7.4-1.3L9 6 6 9 1.6 4.7C.4 7.1.9 10.1 2.9 12.1c1.9 1.9 4.6 2.4 6.9 1.5l9.1 9.1c.4.4 1 .4 1.4 0l2.3-2.3c.5-.4.5-1.1.1-1.4z"></path></g><g id="cached"><path d="M19 8l-4 4h3c0 3.31-2.69 6-6 6-1.01 0-1.97-.25-2.8-.7l-1.46 1.46C8.97 19.54 10.43 20 12 20c4.42 0 8-3.58 8-8h3l-4-4zM6 12c0-3.31 2.69-6 6-6 1.01 0 1.97.25 2.8.7l1.46-1.46C15.03 4.46 13.57 4 12 4c-4.42 0-8 3.58-8 8H1l4 4 4-4H6z"></path></g><g id="camera-enhance"><path d="M9 3L7.17 5H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2h-3.17L15 3H9zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-1l1.25-2.75L16 13l-2.75-1.25L12 9l-1.25 2.75L8 13l2.75 1.25z"></path></g><g id="cancel"><path d="M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"></path></g><g id="card-giftcard"><path d="M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.05 0-1.96.54-2.5 1.35l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 15H4v-2h16v2zm0-5H4V8h5.08L7 10.83 8.62 12 11 8.76l1-1.36 1 1.36L15.38 12 17 10.83 14.92 8H20v6z"></path></g><g id="card-membership"><path d="M20 2H4c-1.11 0-2 .89-2 2v11c0 1.11.89 2 2 2h4v5l4-2 4 2v-5h4c1.11 0 2-.89 2-2V4c0-1.11-.89-2-2-2zm0 13H4v-2h16v2zm0-5H4V4h16v6z"></path></g><g id="card-travel"><path d="M20 6h-3V4c0-1.11-.89-2-2-2H9c-1.11 0-2 .89-2 2v2H4c-1.11 0-2 .89-2 2v11c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zM9 4h6v2H9V4zm11 15H4v-2h16v2zm0-5H4V8h3v2h2V8h6v2h2V8h3v6z"></path></g><g id="change-history"><path d="M12 7.77L18.39 18H5.61L12 7.77M12 4L2 20h20L12 4z"></path></g><g id="check"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"></path></g><g id="check-box"><path d="M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"></path></g><g id="check-box-outline-blank"><path d="M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"></path></g><g id="check-circle"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"></path></g><g id="chevron-left"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"></path></g><g id="chevron-right"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"></path></g><g id="chrome-reader-mode"><path d="M13 12h7v1.5h-7zm0-2.5h7V11h-7zm0 5h7V16h-7zM21 4H3c-1.1 0-2 .9-2 2v13c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 15h-9V6h9v13z"></path></g><g id="class"><path d="M18 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 4h5v8l-2.5-1.5L6 12V4z"></path></g><g id="clear"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></g><g id="close"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></g><g id="cloud"><path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96z"></path></g><g id="cloud-circle"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm4.5 14H8c-1.66 0-3-1.34-3-3s1.34-3 3-3l.14.01C8.58 8.28 10.13 7 12 7c2.21 0 4 1.79 4 4h.5c1.38 0 2.5 1.12 2.5 2.5S17.88 16 16.5 16z"></path></g><g id="cloud-done"><path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM10 17l-3.5-3.5 1.41-1.41L10 14.17 15.18 9l1.41 1.41L10 17z"></path></g><g id="cloud-download"><path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM17 13l-5 5-5-5h3V9h4v4h3z"></path></g><g id="cloud-off"><path d="M19.35 10.04C18.67 6.59 15.64 4 12 4c-1.48 0-2.85.43-4.01 1.17l1.46 1.46C10.21 6.23 11.08 6 12 6c3.04 0 5.5 2.46 5.5 5.5v.5H19c1.66 0 3 1.34 3 3 0 1.13-.64 2.11-1.56 2.62l1.45 1.45C23.16 18.16 24 16.68 24 15c0-2.64-2.05-4.78-4.65-4.96zM3 5.27l2.75 2.74C2.56 8.15 0 10.77 0 14c0 3.31 2.69 6 6 6h11.73l2 2L21 20.73 4.27 4 3 5.27zM7.73 10l8 8H6c-2.21 0-4-1.79-4-4s1.79-4 4-4h1.73z"></path></g><g id="cloud-queue"><path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM19 18H6c-2.21 0-4-1.79-4-4s1.79-4 4-4h.71C7.37 7.69 9.48 6 12 6c3.04 0 5.5 2.46 5.5 5.5v.5H19c1.66 0 3 1.34 3 3s-1.34 3-3 3z"></path></g><g id="cloud-upload"><path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM14 13v4h-4v-4H7l5-5 5 5h-3z"></path></g><g id="code"><path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"></path></g><g id="compare-arrows"><path d="M9.01 14H2v2h7.01v3L13 15l-3.99-4v3zm5.98-1v-3H22V8h-7.01V5L11 9l3.99 4z"></path></g><g id="content-copy"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"></path></g><g id="content-cut"><path d="M9.64 7.64c.23-.5.36-1.05.36-1.64 0-2.21-1.79-4-4-4S2 3.79 2 6s1.79 4 4 4c.59 0 1.14-.13 1.64-.36L10 12l-2.36 2.36C7.14 14.13 6.59 14 6 14c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4c0-.59-.13-1.14-.36-1.64L12 14l7 7h3v-1L9.64 7.64zM6 8c-1.1 0-2-.89-2-2s.9-2 2-2 2 .89 2 2-.9 2-2 2zm0 12c-1.1 0-2-.89-2-2s.9-2 2-2 2 .89 2 2-.9 2-2 2zm6-7.5c-.28 0-.5-.22-.5-.5s.22-.5.5-.5.5.22.5.5-.22.5-.5.5zM19 3l-6 6 2 2 7-7V3z"></path></g><g id="content-paste"><path d="M19 2h-4.18C14.4.84 13.3 0 12 0c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm7 18H5V4h2v3h10V4h2v16z"></path></g><g id="copyright"><path d="M10.08 10.86c.05-.33.16-.62.3-.87s.34-.46.59-.62c.24-.15.54-.22.91-.23.23.01.44.05.63.13.2.09.38.21.52.36s.25.33.34.53.13.42.14.64h1.79c-.02-.47-.11-.9-.28-1.29s-.4-.73-.7-1.01-.66-.5-1.08-.66-.88-.23-1.39-.23c-.65 0-1.22.11-1.7.34s-.88.53-1.2.92-.56.84-.71 1.36S8 11.29 8 11.87v.27c0 .58.08 1.12.23 1.64s.39.97.71 1.35.72.69 1.2.91 1.05.34 1.7.34c.47 0 .91-.08 1.32-.23s.77-.36 1.08-.63.56-.58.74-.94.29-.74.3-1.15h-1.79c-.01.21-.06.4-.15.58s-.21.33-.36.46-.32.23-.52.3c-.19.07-.39.09-.6.1-.36-.01-.66-.08-.89-.23-.25-.16-.45-.37-.59-.62s-.25-.55-.3-.88-.08-.67-.08-1v-.27c0-.35.03-.68.08-1.01zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"></path></g><g id="create"><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"></path></g><g id="create-new-folder"><path d="M20 6h-8l-2-2H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-1 8h-3v3h-2v-3h-3v-2h3V9h2v3h3v2z"></path></g><g id="credit-card"><path d="M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2zm0 14H4v-6h16v6zm0-10H4V6h16v2z"></path></g><g id="dashboard"><path d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"></path></g><g id="date-range"><path d="M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z"></path></g><g id="delete"><path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"></path></g><g id="delete-forever"><path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zm2.46-7.12l1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14l-2.13-2.12zM15.5 4l-1-1h-5l-1 1H5v2h14V4z"></path></g><g id="delete-sweep"><path d="M15 16h4v2h-4zm0-8h7v2h-7zm0 4h6v2h-6zM3 18c0 1.1.9 2 2 2h6c1.1 0 2-.9 2-2V8H3v10zM14 5h-3l-1-1H6L5 5H2v2h12z"></path></g><g id="description"><path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"></path></g><g id="dns"><path d="M20 13H4c-.55 0-1 .45-1 1v6c0 .55.45 1 1 1h16c.55 0 1-.45 1-1v-6c0-.55-.45-1-1-1zM7 19c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zM20 3H4c-.55 0-1 .45-1 1v6c0 .55.45 1 1 1h16c.55 0 1-.45 1-1V4c0-.55-.45-1-1-1zM7 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"></path></g><g id="done"><path d="M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"></path></g><g id="done-all"><path d="M18 7l-1.41-1.41-6.34 6.34 1.41 1.41L18 7zm4.24-1.41L11.66 16.17 7.48 12l-1.41 1.41L11.66 19l12-12-1.42-1.41zM.41 13.41L6 19l1.41-1.41L1.83 12 .41 13.41z"></path></g><g id="donut-large"><path d="M11 5.08V2c-5 .5-9 4.81-9 10s4 9.5 9 10v-3.08c-3-.48-6-3.4-6-6.92s3-6.44 6-6.92zM18.97 11H22c-.47-5-4-8.53-9-9v3.08C16 5.51 18.54 8 18.97 11zM13 18.92V22c5-.47 8.53-4 9-9h-3.03c-.43 3-2.97 5.49-5.97 5.92z"></path></g><g id="donut-small"><path d="M11 9.16V2c-5 .5-9 4.79-9 10s4 9.5 9 10v-7.16c-1-.41-2-1.52-2-2.84s1-2.43 2-2.84zM14.86 11H22c-.48-4.75-4-8.53-9-9v7.16c1 .3 1.52.98 1.86 1.84zM13 14.84V22c5-.47 8.52-4.25 9-9h-7.14c-.34.86-.86 1.54-1.86 1.84z"></path></g><g id="drafts"><path d="M21.99 8c0-.72-.37-1.35-.94-1.7L12 1 2.95 6.3C2.38 6.65 2 7.28 2 8v10c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2l-.01-10zM12 13L3.74 7.84 12 3l8.26 4.84L12 13z"></path></g><g id="eject"><path d="M5 17h14v2H5zm7-12L5.33 15h13.34z"></path></g><g id="error"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"></path></g><g id="error-outline"><path d="M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"></path></g><g id="euro-symbol"><path d="M15 18.5c-2.51 0-4.68-1.42-5.76-3.5H15v-2H8.58c-.05-.33-.08-.66-.08-1s.03-.67.08-1H15V9H9.24C10.32 6.92 12.5 5.5 15 5.5c1.61 0 3.09.59 4.23 1.57L21 5.3C19.41 3.87 17.3 3 15 3c-3.92 0-7.24 2.51-8.48 6H3v2h3.06c-.04.33-.06.66-.06 1 0 .34.02.67.06 1H3v2h3.52c1.24 3.49 4.56 6 8.48 6 2.31 0 4.41-.87 6-2.3l-1.78-1.77c-1.13.98-2.6 1.57-4.22 1.57z"></path></g><g id="event"><path d="M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z"></path></g><g id="event-seat"><path d="M4 18v3h3v-3h10v3h3v-6H4zm15-8h3v3h-3zM2 10h3v3H2zm15 3H7V5c0-1.1.9-2 2-2h6c1.1 0 2 .9 2 2v8z"></path></g><g id="exit-to-app"><path d="M10.09 15.59L11.5 17l5-5-5-5-1.41 1.41L12.67 11H3v2h9.67l-2.58 2.59zM19 3H5c-1.11 0-2 .9-2 2v4h2V5h14v14H5v-4H3v4c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"></path></g><g id="expand-less"><path d="M12 8l-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"></path></g><g id="expand-more"><path d="M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"></path></g><g id="explore"><path d="M12 10.9c-.61 0-1.1.49-1.1 1.1s.49 1.1 1.1 1.1c.61 0 1.1-.49 1.1-1.1s-.49-1.1-1.1-1.1zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm2.19 12.19L6 18l3.81-8.19L18 6l-3.81 8.19z"></path></g><g id="extension"><path d="M20.5 11H19V7c0-1.1-.9-2-2-2h-4V3.5C13 2.12 11.88 1 10.5 1S8 2.12 8 3.5V5H4c-1.1 0-1.99.9-1.99 2v3.8H3.5c1.49 0 2.7 1.21 2.7 2.7s-1.21 2.7-2.7 2.7H2V20c0 1.1.9 2 2 2h3.8v-1.5c0-1.49 1.21-2.7 2.7-2.7 1.49 0 2.7 1.21 2.7 2.7V22H17c1.1 0 2-.9 2-2v-4h1.5c1.38 0 2.5-1.12 2.5-2.5S21.88 11 20.5 11z"></path></g><g id="face"><path d="M9 11.75c-.69 0-1.25.56-1.25 1.25s.56 1.25 1.25 1.25 1.25-.56 1.25-1.25-.56-1.25-1.25-1.25zm6 0c-.69 0-1.25.56-1.25 1.25s.56 1.25 1.25 1.25 1.25-.56 1.25-1.25-.56-1.25-1.25-1.25zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8 0-.29.02-.58.05-.86 2.36-1.05 4.23-2.98 5.21-5.37C11.07 8.33 14.05 10 17.42 10c.78 0 1.53-.09 2.25-.26.21.71.33 1.47.33 2.26 0 4.41-3.59 8-8 8z"></path></g><g id="favorite"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"></path></g><g id="favorite-border"><path d="M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3zm-4.4 15.55l-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05z"></path></g><g id="feedback"><path d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-7 12h-2v-2h2v2zm0-4h-2V6h2v4z"></path></g><g id="file-download"><path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"></path></g><g id="file-upload"><path d="M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z"></path></g><g id="filter-list"><path d="M10 18h4v-2h-4v2zM3 6v2h18V6H3zm3 7h12v-2H6v2z"></path></g><g id="find-in-page"><path d="M20 19.59V8l-6-6H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c.45 0 .85-.15 1.19-.4l-4.43-4.43c-.8.52-1.74.83-2.76.83-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5c0 1.02-.31 1.96-.83 2.75L20 19.59zM9 13c0 1.66 1.34 3 3 3s3-1.34 3-3-1.34-3-3-3-3 1.34-3 3z"></path></g><g id="find-replace"><path d="M11 6c1.38 0 2.63.56 3.54 1.46L12 10h6V4l-2.05 2.05C14.68 4.78 12.93 4 11 4c-3.53 0-6.43 2.61-6.92 6H6.1c.46-2.28 2.48-4 4.9-4zm5.64 9.14c.66-.9 1.12-1.97 1.28-3.14H15.9c-.46 2.28-2.48 4-4.9 4-1.38 0-2.63-.56-3.54-1.46L10 12H4v6l2.05-2.05C7.32 17.22 9.07 18 11 18c1.55 0 2.98-.51 4.14-1.36L20 21.49 21.49 20l-4.85-4.86z"></path></g><g id="fingerprint"><path d="M17.81 4.47c-.08 0-.16-.02-.23-.06C15.66 3.42 14 3 12.01 3c-1.98 0-3.86.47-5.57 1.41-.24.13-.54.04-.68-.2-.13-.24-.04-.55.2-.68C7.82 2.52 9.86 2 12.01 2c2.13 0 3.99.47 6.03 1.52.25.13.34.43.21.67-.09.18-.26.28-.44.28zM3.5 9.72c-.1 0-.2-.03-.29-.09-.23-.16-.28-.47-.12-.7.99-1.4 2.25-2.5 3.75-3.27C9.98 4.04 14 4.03 17.15 5.65c1.5.77 2.76 1.86 3.75 3.25.16.22.11.54-.12.7-.23.16-.54.11-.7-.12-.9-1.26-2.04-2.25-3.39-2.94-2.87-1.47-6.54-1.47-9.4.01-1.36.7-2.5 1.7-3.4 2.96-.08.14-.23.21-.39.21zm6.25 12.07c-.13 0-.26-.05-.35-.15-.87-.87-1.34-1.43-2.01-2.64-.69-1.23-1.05-2.73-1.05-4.34 0-2.97 2.54-5.39 5.66-5.39s5.66 2.42 5.66 5.39c0 .28-.22.5-.5.5s-.5-.22-.5-.5c0-2.42-2.09-4.39-4.66-4.39-2.57 0-4.66 1.97-4.66 4.39 0 1.44.32 2.77.93 3.85.64 1.15 1.08 1.64 1.85 2.42.19.2.19.51 0 .71-.11.1-.24.15-.37.15zm7.17-1.85c-1.19 0-2.24-.3-3.1-.89-1.49-1.01-2.38-2.65-2.38-4.39 0-.28.22-.5.5-.5s.5.22.5.5c0 1.41.72 2.74 1.94 3.56.71.48 1.54.71 2.54.71.24 0 .64-.03 1.04-.1.27-.05.53.13.58.41.05.27-.13.53-.41.58-.57.11-1.07.12-1.21.12zM14.91 22c-.04 0-.09-.01-.13-.02-1.59-.44-2.63-1.03-3.72-2.1-1.4-1.39-2.17-3.24-2.17-5.22 0-1.62 1.38-2.94 3.08-2.94 1.7 0 3.08 1.32 3.08 2.94 0 1.07.93 1.94 2.08 1.94s2.08-.87 2.08-1.94c0-3.77-3.25-6.83-7.25-6.83-2.84 0-5.44 1.58-6.61 4.03-.39.81-.59 1.76-.59 2.8 0 .78.07 2.01.67 3.61.1.26-.03.55-.29.64-.26.1-.55-.04-.64-.29-.49-1.31-.73-2.61-.73-3.96 0-1.2.23-2.29.68-3.24 1.33-2.79 4.28-4.6 7.51-4.6 4.55 0 8.25 3.51 8.25 7.83 0 1.62-1.38 2.94-3.08 2.94s-3.08-1.32-3.08-2.94c0-1.07-.93-1.94-2.08-1.94s-2.08.87-2.08 1.94c0 1.71.66 3.31 1.87 4.51.95.94 1.86 1.46 3.27 1.85.27.07.42.35.35.61-.05.23-.26.38-.47.38z"></path></g><g id="first-page"><path d="M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"></path></g><g id="flag"><path d="M14.4 6L14 4H5v17h2v-7h5.6l.4 2h7V6z"></path></g><g id="flight-land"><path d="M2.5 19h19v2h-19zm7.18-5.73l4.35 1.16 5.31 1.42c.8.21 1.62-.26 1.84-1.06.21-.8-.26-1.62-1.06-1.84l-5.31-1.42-2.76-9.02L10.12 2v8.28L5.15 8.95l-.93-2.32-1.45-.39v5.17l1.6.43 5.31 1.43z"></path></g><g id="flight-takeoff"><path d="M2.5 19h19v2h-19zm19.57-9.36c-.21-.8-1.04-1.28-1.84-1.06L14.92 10l-6.9-6.43-1.93.51 4.14 7.17-4.97 1.33-1.97-1.54-1.45.39 1.82 3.16.77 1.33 1.6-.43 5.31-1.42 4.35-1.16L21 11.49c.81-.23 1.28-1.05 1.07-1.85z"></path></g><g id="flip-to-back"><path d="M9 7H7v2h2V7zm0 4H7v2h2v-2zm0-8c-1.11 0-2 .9-2 2h2V3zm4 12h-2v2h2v-2zm6-12v2h2c0-1.1-.9-2-2-2zm-6 0h-2v2h2V3zM9 17v-2H7c0 1.1.89 2 2 2zm10-4h2v-2h-2v2zm0-4h2V7h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2zM5 7H3v12c0 1.1.89 2 2 2h12v-2H5V7zm10-2h2V3h-2v2zm0 12h2v-2h-2v2z"></path></g><g id="flip-to-front"><path d="M3 13h2v-2H3v2zm0 4h2v-2H3v2zm2 4v-2H3c0 1.1.89 2 2 2zM3 9h2V7H3v2zm12 12h2v-2h-2v2zm4-18H9c-1.11 0-2 .9-2 2v10c0 1.1.89 2 2 2h10c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 12H9V5h10v10zm-8 6h2v-2h-2v2zm-4 0h2v-2H7v2z"></path></g><g id="folder"><path d="M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8l-2-2z"></path></g><g id="folder-open"><path d="M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm0 12H4V8h16v10z"></path></g><g id="folder-shared"><path d="M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm-5 3c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zm4 8h-8v-1c0-1.33 2.67-2 4-2s4 .67 4 2v1z"></path></g><g id="font-download"><path d="M9.93 13.5h4.14L12 7.98zM20 2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-4.05 16.5l-1.14-3H9.17l-1.12 3H5.96l5.11-13h1.86l5.11 13h-2.09z"></path></g><g id="forward"><path d="M12 8V4l8 8-8 8v-4H4V8z"></path></g><g id="fullscreen"><path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"></path></g><g id="fullscreen-exit"><path d="M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"></path></g><g id="g-translate"><path d="M20 5h-9.12L10 2H4c-1.1 0-2 .9-2 2v13c0 1.1.9 2 2 2h7l1 3h8c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zM7.17 14.59c-2.25 0-4.09-1.83-4.09-4.09s1.83-4.09 4.09-4.09c1.04 0 1.99.37 2.74 1.07l.07.06-1.23 1.18-.06-.05c-.29-.27-.78-.59-1.52-.59-1.31 0-2.38 1.09-2.38 2.42s1.07 2.42 2.38 2.42c1.37 0 1.96-.87 2.12-1.46H7.08V9.91h3.95l.01.07c.04.21.05.4.05.61 0 2.35-1.61 4-3.92 4zm6.03-1.71c.33.6.74 1.18 1.19 1.7l-.54.53-.65-2.23zm.77-.76h-.99l-.31-1.04h3.99s-.34 1.31-1.56 2.74c-.52-.62-.89-1.23-1.13-1.7zM21 20c0 .55-.45 1-1 1h-7l2-2-.81-2.77.92-.92L17.79 18l.73-.73-2.71-2.68c.9-1.03 1.6-2.25 1.92-3.51H19v-1.04h-3.64V9h-1.04v1.04h-1.96L11.18 6H20c.55 0 1 .45 1 1v13z"></path></g><g id="gavel"><path d="M1 21h12v2H1zM5.245 8.07l2.83-2.827 14.14 14.142-2.828 2.828zM12.317 1l5.657 5.656-2.83 2.83-5.654-5.66zM3.825 9.485l5.657 5.657-2.828 2.828-5.657-5.657z"></path></g><g id="gesture"><path d="M4.59 6.89c.7-.71 1.4-1.35 1.71-1.22.5.2 0 1.03-.3 1.52-.25.42-2.86 3.89-2.86 6.31 0 1.28.48 2.34 1.34 2.98.75.56 1.74.73 2.64.46 1.07-.31 1.95-1.4 3.06-2.77 1.21-1.49 2.83-3.44 4.08-3.44 1.63 0 1.65 1.01 1.76 1.79-3.78.64-5.38 3.67-5.38 5.37 0 1.7 1.44 3.09 3.21 3.09 1.63 0 4.29-1.33 4.69-6.1H21v-2.5h-2.47c-.15-1.65-1.09-4.2-4.03-4.2-2.25 0-4.18 1.91-4.94 2.84-.58.73-2.06 2.48-2.29 2.72-.25.3-.68.84-1.11.84-.45 0-.72-.83-.36-1.92.35-1.09 1.4-2.86 1.85-3.52.78-1.14 1.3-1.92 1.3-3.28C8.95 3.69 7.31 3 6.44 3 5.12 3 3.97 4 3.72 4.25c-.36.36-.66.66-.88.93l1.75 1.71zm9.29 11.66c-.31 0-.74-.26-.74-.72 0-.6.73-2.2 2.87-2.76-.3 2.69-1.43 3.48-2.13 3.48z"></path></g><g id="get-app"><path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"></path></g><g id="gif"><path d="M11.5 9H13v6h-1.5zM9 9H6c-.6 0-1 .5-1 1v4c0 .5.4 1 1 1h3c.6 0 1-.5 1-1v-2H8.5v1.5h-2v-3H10V10c0-.5-.4-1-1-1zm10 1.5V9h-4.5v6H16v-2h2v-1.5h-2v-1z"></path></g><g id="grade"><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"></path></g><g id="group-work"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM8 17.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5zM9.5 8c0-1.38 1.12-2.5 2.5-2.5s2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5S9.5 9.38 9.5 8zm6.5 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"></path></g><g id="help"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"></path></g><g id="help-outline"><path d="M11 18h2v-2h-2v2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4z"></path></g><g id="highlight-off"><path d="M14.59 8L12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41 14.59 8zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"></path></g><g id="history"><path d="M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z"></path></g><g id="home"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"></path></g><g id="hourglass-empty"><path d="M6 2v6h.01L6 8.01 10 12l-4 4 .01.01H6V22h12v-5.99h-.01L18 16l-4-4 4-3.99-.01-.01H18V2H6zm10 14.5V20H8v-3.5l4-4 4 4zm-4-5l-4-4V4h8v3.5l-4 4z"></path></g><g id="hourglass-full"><path d="M6 2v6h.01L6 8.01 10 12l-4 4 .01.01H6V22h12v-5.99h-.01L18 16l-4-4 4-3.99-.01-.01H18V2H6z"></path></g><g id="http"><path d="M4.5 11h-2V9H1v6h1.5v-2.5h2V15H6V9H4.5v2zm2.5-.5h1.5V15H10v-4.5h1.5V9H7v1.5zm5.5 0H14V15h1.5v-4.5H17V9h-4.5v1.5zm9-1.5H18v6h1.5v-2h2c.8 0 1.5-.7 1.5-1.5v-1c0-.8-.7-1.5-1.5-1.5zm0 2.5h-2v-1h2v1z"></path></g><g id="https"><path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"></path></g><g id="important-devices"><path d="M23 11.01L18 11c-.55 0-1 .45-1 1v9c0 .55.45 1 1 1h5c.55 0 1-.45 1-1v-9c0-.55-.45-.99-1-.99zM23 20h-5v-7h5v7zM20 2H2C.89 2 0 2.89 0 4v12c0 1.1.89 2 2 2h7v2H7v2h8v-2h-2v-2h2v-2H2V4h18v5h2V4c0-1.11-.9-2-2-2zm-8.03 7L11 6l-.97 3H7l2.47 1.76-.94 2.91 2.47-1.8 2.47 1.8-.94-2.91L15 9h-3.03z"></path></g><g id="inbox"><path d="M19 3H4.99c-1.11 0-1.98.89-1.98 2L3 19c0 1.1.88 2 1.99 2H19c1.1 0 2-.9 2-2V5c0-1.11-.9-2-2-2zm0 12h-4c0 1.66-1.35 3-3 3s-3-1.34-3-3H4.99V5H19v10z"></path></g><g id="indeterminate-check-box"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"></path></g><g id="info"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"></path></g><g id="info-outline"><path d="M11 17h2v-6h-2v6zm1-15C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zM11 9h2V7h-2v2z"></path></g><g id="input"><path d="M21 3.01H3c-1.1 0-2 .9-2 2V9h2V4.99h18v14.03H3V15H1v4.01c0 1.1.9 1.98 2 1.98h18c1.1 0 2-.88 2-1.98v-14c0-1.11-.9-2-2-2zM11 16l4-4-4-4v3H1v2h10v3z"></path></g><g id="invert-colors"><path d="M17.66 7.93L12 2.27 6.34 7.93c-3.12 3.12-3.12 8.19 0 11.31C7.9 20.8 9.95 21.58 12 21.58c2.05 0 4.1-.78 5.66-2.34 3.12-3.12 3.12-8.19 0-11.31zM12 19.59c-1.6 0-3.11-.62-4.24-1.76C6.62 16.69 6 15.19 6 13.59s.62-3.11 1.76-4.24L12 5.1v14.49z"></path></g><g id="label"><path d="M17.63 5.84C17.27 5.33 16.67 5 16 5L5 5.01C3.9 5.01 3 5.9 3 7v10c0 1.1.9 1.99 2 1.99L16 19c.67 0 1.27-.33 1.63-.84L22 12l-4.37-6.16z"></path></g><g id="label-outline"><path d="M17.63 5.84C17.27 5.33 16.67 5 16 5L5 5.01C3.9 5.01 3 5.9 3 7v10c0 1.1.9 1.99 2 1.99L16 19c.67 0 1.27-.33 1.63-.84L22 12l-4.37-6.16zM16 17H5V7h11l3.55 5L16 17z"></path></g><g id="language"><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm6.93 6h-2.95c-.32-1.25-.78-2.45-1.38-3.56 1.84.63 3.37 1.91 4.33 3.56zM12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 1.08-2.76 1.91-3.96zM4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2 0 .68.06 1.34.14 2H4.26zm.82 2h2.95c.32 1.25.78 2.45 1.38 3.56-1.84-.63-3.37-1.9-4.33-3.56zm2.95-8H5.08c.96-1.66 2.49-2.93 4.33-3.56C8.81 5.55 8.35 6.75 8.03 8zM12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 1.43-1.08 2.76-1.91 3.96zM14.34 14H9.66c-.09-.66-.16-1.32-.16-2 0-.68.07-1.35.16-2h4.68c.09.65.16 1.32.16 2 0 .68-.07 1.34-.16 2zm.25 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95c-.96 1.65-2.49 2.93-4.33 3.56zM16.36 14c.08-.66.14-1.32.14-2 0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2h-3.38z"></path></g><g id="last-page"><path d="M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"></path></g><g id="launch"><path d="M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"></path></g><g id="lightbulb-outline"><path d="M9 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H9v1zm3-19C8.14 2 5 5.14 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.86-3.14-7-7-7zm2.85 11.1l-.85.6V16h-4v-2.3l-.85-.6C7.8 12.16 7 10.63 7 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 1.63-.8 3.16-2.15 4.1z"></path></g><g id="line-style"><path d="M3 16h5v-2H3v2zm6.5 0h5v-2h-5v2zm6.5 0h5v-2h-5v2zM3 20h2v-2H3v2zm4 0h2v-2H7v2zm4 0h2v-2h-2v2zm4 0h2v-2h-2v2zm4 0h2v-2h-2v2zM3 12h8v-2H3v2zm10 0h8v-2h-8v2zM3 4v4h18V4H3z"></path></g><g id="line-weight"><path d="M3 17h18v-2H3v2zm0 3h18v-1H3v1zm0-7h18v-3H3v3zm0-9v4h18V4H3z"></path></g><g id="link"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"></path></g><g id="list"><path d="M3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm4 4h14v-2H7v2zm0 4h14v-2H7v2zM7 7v2h14V7H7z"></path></g><g id="lock"><path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"></path></g><g id="lock-open"><path d="M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h1.9c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm0 12H6V10h12v10z"></path></g><g id="lock-outline"><path d="M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM8.9 6c0-1.71 1.39-3.1 3.1-3.1s3.1 1.39 3.1 3.1v2H8.9V6zM18 20H6V10h12v10z"></path></g><g id="low-priority"><path d="M14 5h8v2h-8zm0 5.5h8v2h-8zm0 5.5h8v2h-8zM2 11.5C2 15.08 4.92 18 8.5 18H9v2l3-3-3-3v2h-.5C6.02 16 4 13.98 4 11.5S6.02 7 8.5 7H12V5H8.5C4.92 5 2 7.92 2 11.5z"></path></g><g id="loyalty"><path d="M21.41 11.58l-9-9C12.05 2.22 11.55 2 11 2H4c-1.1 0-2 .9-2 2v7c0 .55.22 1.05.59 1.42l9 9c.36.36.86.58 1.41.58.55 0 1.05-.22 1.41-.59l7-7c.37-.36.59-.86.59-1.41 0-.55-.23-1.06-.59-1.42zM5.5 7C4.67 7 4 6.33 4 5.5S4.67 4 5.5 4 7 4.67 7 5.5 6.33 7 5.5 7zm11.77 8.27L13 19.54l-4.27-4.27C8.28 14.81 8 14.19 8 13.5c0-1.38 1.12-2.5 2.5-2.5.69 0 1.32.28 1.77.74l.73.72.73-.73c.45-.45 1.08-.73 1.77-.73 1.38 0 2.5 1.12 2.5 2.5 0 .69-.28 1.32-.73 1.77z"></path></g><g id="mail"><path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"></path></g><g id="markunread"><path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"></path></g><g id="markunread-mailbox"><path d="M20 6H10v6H8V4h6V0H6v6H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2z"></path></g><g id="menu"><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"></path></g><g id="more-horiz"><path d="M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"></path></g><g id="more-vert"><path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"></path></g><g id="motorcycle"><path d="M19.44 9.03L15.41 5H11v2h3.59l2 2H5c-2.8 0-5 2.2-5 5s2.2 5 5 5c2.46 0 4.45-1.69 4.9-4h1.65l2.77-2.77c-.21.54-.32 1.14-.32 1.77 0 2.8 2.2 5 5 5s5-2.2 5-5c0-2.65-1.97-4.77-4.56-4.97zM7.82 15C7.4 16.15 6.28 17 5 17c-1.63 0-3-1.37-3-3s1.37-3 3-3c1.28 0 2.4.85 2.82 2H5v2h2.82zM19 17c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3z"></path></g><g id="move-to-inbox"><path d="M19 3H4.99c-1.11 0-1.98.9-1.98 2L3 19c0 1.1.88 2 1.99 2H19c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 12h-4c0 1.66-1.35 3-3 3s-3-1.34-3-3H4.99V5H19v10zm-3-5h-2V7h-4v3H8l4 4 4-4z"></path></g><g id="next-week"><path d="M20 7h-4V5c0-.55-.22-1.05-.59-1.41C15.05 3.22 14.55 3 14 3h-4c-1.1 0-2 .9-2 2v2H4c-1.1 0-2 .9-2 2v11c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V9c0-1.1-.9-2-2-2zM10 5h4v2h-4V5zm1 13.5l-1-1 3-3-3-3 1-1 4 4-4 4z"></path></g><g id="note-add"><path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 14h-3v3h-2v-3H8v-2h3v-3h2v3h3v2zm-3-7V3.5L18.5 9H13z"></path></g><g id="offline-pin"><path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2zm5 16H7v-2h10v2zm-6.7-4L7 10.7l1.4-1.4 1.9 1.9 5.3-5.3L17 7.3 10.3 14z"></path></g><g id="opacity"><path d="M17.66 8L12 2.35 6.34 8C4.78 9.56 4 11.64 4 13.64s.78 4.11 2.34 5.67 3.61 2.35 5.66 2.35 4.1-.79 5.66-2.35S20 15.64 20 13.64 19.22 9.56 17.66 8zM6 14c.01-2 .62-3.27 1.76-4.4L12 5.27l4.24 4.38C17.38 10.77 17.99 12 18 14H6z"></path></g><g id="open-in-browser"><path d="M19 4H5c-1.11 0-2 .9-2 2v12c0 1.1.89 2 2 2h4v-2H5V8h14v10h-4v2h4c1.1 0 2-.9 2-2V6c0-1.1-.89-2-2-2zm-7 6l-4 4h3v6h2v-6h3l-4-4z"></path></g><g id="open-in-new"><path d="M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"></path></g><g id="open-with"><path d="M10 9h4V6h3l-5-5-5 5h3v3zm-1 1H6V7l-5 5 5 5v-3h3v-4zm14 2l-5-5v3h-3v4h3v3l5-5zm-9 3h-4v3H7l5 5 5-5h-3v-3z"></path></g><g id="pageview"><path d="M11.5 9C10.12 9 9 10.12 9 11.5s1.12 2.5 2.5 2.5 2.5-1.12 2.5-2.5S12.88 9 11.5 9zM20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm-3.21 14.21l-2.91-2.91c-.69.44-1.51.7-2.39.7C9.01 16 7 13.99 7 11.5S9.01 7 11.5 7 16 9.01 16 11.5c0 .88-.26 1.69-.7 2.39l2.91 2.9-1.42 1.42z"></path></g><g id="pan-tool"><path d="M23 5.5V20c0 2.2-1.8 4-4 4h-7.3c-1.08 0-2.1-.43-2.85-1.19L1 14.83s1.26-1.23 1.3-1.25c.22-.19.49-.29.79-.29.22 0 .42.06.6.16.04.01 4.31 2.46 4.31 2.46V4c0-.83.67-1.5 1.5-1.5S11 3.17 11 4v7h1V1.5c0-.83.67-1.5 1.5-1.5S15 .67 15 1.5V11h1V2.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5V11h1V5.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5z"></path></g><g id="payment"><path d="M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2zm0 14H4v-6h16v6zm0-10H4V6h16v2z"></path></g><g id="perm-camera-mic"><path d="M20 5h-3.17L15 3H9L7.17 5H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h7v-2.09c-2.83-.48-5-2.94-5-5.91h2c0 2.21 1.79 4 4 4s4-1.79 4-4h2c0 2.97-2.17 5.43-5 5.91V21h7c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm-6 8c0 1.1-.9 2-2 2s-2-.9-2-2V9c0-1.1.9-2 2-2s2 .9 2 2v4z"></path></g><g id="perm-contact-calendar"><path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm6 12H6v-1c0-2 4-3.1 6-3.1s6 1.1 6 3.1v1z"></path></g><g id="perm-data-setting"><path d="M18.99 11.5c.34 0 .67.03 1 .07L20 0 0 20h11.56c-.04-.33-.07-.66-.07-1 0-4.14 3.36-7.5 7.5-7.5zm3.71 7.99c.02-.16.04-.32.04-.49 0-.17-.01-.33-.04-.49l1.06-.83c.09-.08.12-.21.06-.32l-1-1.73c-.06-.11-.19-.15-.31-.11l-1.24.5c-.26-.2-.54-.37-.85-.49l-.19-1.32c-.01-.12-.12-.21-.24-.21h-2c-.12 0-.23.09-.25.21l-.19 1.32c-.3.13-.59.29-.85.49l-1.24-.5c-.11-.04-.24 0-.31.11l-1 1.73c-.06.11-.04.24.06.32l1.06.83c-.02.16-.03.32-.03.49 0 .17.01.33.03.49l-1.06.83c-.09.08-.12.21-.06.32l1 1.73c.06.11.19.15.31.11l1.24-.5c.26.2.54.37.85.49l.19 1.32c.02.12.12.21.25.21h2c.12 0 .23-.09.25-.21l.19-1.32c.3-.13.59-.29.84-.49l1.25.5c.11.04.24 0 .31-.11l1-1.73c.06-.11.03-.24-.06-.32l-1.07-.83zm-3.71 1.01c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"></path></g><g id="perm-device-information"><path d="M13 7h-2v2h2V7zm0 4h-2v6h2v-6zm4-9.99L7 1c-1.1 0-2 .9-2 2v18c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V3c0-1.1-.9-1.99-2-1.99zM17 19H7V5h10v14z"></path></g><g id="perm-identity"><path d="M12 5.9c1.16 0 2.1.94 2.1 2.1s-.94 2.1-2.1 2.1S9.9 9.16 9.9 8s.94-2.1 2.1-2.1m0 9c2.97 0 6.1 1.46 6.1 2.1v1.1H5.9V17c0-.64 3.13-2.1 6.1-2.1M12 4C9.79 4 8 5.79 8 8s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 9c-2.67 0-8 1.34-8 4v3h16v-3c0-2.66-5.33-4-8-4z"></path></g><g id="perm-media"><path d="M2 6H0v5h.01L0 20c0 1.1.9 2 2 2h18v-2H2V6zm20-2h-8l-2-2H6c-1.1 0-1.99.9-1.99 2L4 16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zM7 15l4.5-6 3.5 4.51 2.5-3.01L21 15H7z"></path></g><g id="perm-phone-msg"><path d="M20 15.5c-1.25 0-2.45-.2-3.57-.57-.35-.11-.74-.03-1.02.24l-2.2 2.2c-2.83-1.44-5.15-3.75-6.59-6.58l2.2-2.21c.28-.27.36-.66.25-1.01C8.7 6.45 8.5 5.25 8.5 4c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1 0 9.39 7.61 17 17 17 .55 0 1-.45 1-1v-3.5c0-.55-.45-1-1-1zM12 3v10l3-3h6V3h-9z"></path></g><g id="perm-scan-wifi"><path d="M12 3C6.95 3 3.15 4.85 0 7.23L12 22 24 7.25C20.85 4.87 17.05 3 12 3zm1 13h-2v-6h2v6zm-2-8V6h2v2h-2z"></path></g><g id="pets"><circle cx="4.5" cy="9.5" r="2.5"></circle><circle cx="9" cy="5.5" r="2.5"></circle><circle cx="15" cy="5.5" r="2.5"></circle><circle cx="19.5" cy="9.5" r="2.5"></circle><path d="M17.34 14.86c-.87-1.02-1.6-1.89-2.48-2.91-.46-.54-1.05-1.08-1.75-1.32-.11-.04-.22-.07-.33-.09-.25-.04-.52-.04-.78-.04s-.53 0-.79.05c-.11.02-.22.05-.33.09-.7.24-1.28.78-1.75 1.32-.87 1.02-1.6 1.89-2.48 2.91-1.31 1.31-2.92 2.76-2.62 4.79.29 1.02 1.02 2.03 2.33 2.32.73.15 3.06-.44 5.54-.44h.18c2.48 0 4.81.58 5.54.44 1.31-.29 2.04-1.31 2.33-2.32.31-2.04-1.3-3.49-2.61-4.8z"></path></g><g id="picture-in-picture"><path d="M19 7h-8v6h8V7zm2-4H3c-1.1 0-2 .9-2 2v14c0 1.1.9 1.98 2 1.98h18c1.1 0 2-.88 2-1.98V5c0-1.1-.9-2-2-2zm0 16.01H3V4.98h18v14.03z"></path></g><g id="picture-in-picture-alt"><path d="M19 11h-8v6h8v-6zm4 8V4.98C23 3.88 22.1 3 21 3H3c-1.1 0-2 .88-2 1.98V19c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2zm-2 .02H3V4.97h18v14.05z"></path></g><g id="play-for-work"><path d="M11 5v5.59H7.5l4.5 4.5 4.5-4.5H13V5h-2zm-5 9c0 3.31 2.69 6 6 6s6-2.69 6-6h-2c0 2.21-1.79 4-4 4s-4-1.79-4-4H6z"></path></g><g id="polymer"><path d="M19 4h-4L7.11 16.63 4.5 12 9 4H5L.5 12 5 20h4l7.89-12.63L19.5 12 15 20h4l4.5-8z"></path></g><g id="power-settings-new"><path d="M13 3h-2v10h2V3zm4.83 2.17l-1.42 1.42C17.99 7.86 19 9.81 19 12c0 3.87-3.13 7-7 7s-7-3.13-7-7c0-2.19 1.01-4.14 2.58-5.42L6.17 5.17C4.23 6.82 3 9.26 3 12c0 4.97 4.03 9 9 9s9-4.03 9-9c0-2.74-1.23-5.18-3.17-6.83z"></path></g><g id="pregnant-woman"><path d="M9 4c0-1.11.89-2 2-2s2 .89 2 2-.89 2-2 2-2-.89-2-2zm7 9c-.01-1.34-.83-2.51-2-3 0-1.66-1.34-3-3-3s-3 1.34-3 3v7h2v5h3v-5h3v-4z"></path></g><g id="print"><path d="M19 8H5c-1.66 0-3 1.34-3 3v6h4v4h12v-4h4v-6c0-1.66-1.34-3-3-3zm-3 11H8v-5h8v5zm3-7c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm-1-9H6v4h12V3z"></path></g><g id="query-builder"><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z"></path></g><g id="question-answer"><path d="M21 6h-2v9H6v2c0 .55.45 1 1 1h11l4 4V7c0-.55-.45-1-1-1zm-4 6V3c0-.55-.45-1-1-1H3c-.55 0-1 .45-1 1v14l4-4h10c.55 0 1-.45 1-1z"></path></g><g id="radio-button-checked"><path d="M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zm0-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"></path></g><g id="radio-button-unchecked"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"></path></g><g id="receipt"><path d="M18 17H6v-2h12v2zm0-4H6v-2h12v2zm0-4H6V7h12v2zM3 22l1.5-1.5L6 22l1.5-1.5L9 22l1.5-1.5L12 22l1.5-1.5L15 22l1.5-1.5L18 22l1.5-1.5L21 22V2l-1.5 1.5L18 2l-1.5 1.5L15 2l-1.5 1.5L12 2l-1.5 1.5L9 2 7.5 3.5 6 2 4.5 3.5 3 2v20z"></path></g><g id="record-voice-over"><circle cx="9" cy="9" r="4"></circle><path d="M9 15c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4zm7.76-9.64l-1.68 1.69c.84 1.18.84 2.71 0 3.89l1.68 1.69c2.02-2.02 2.02-5.07 0-7.27zM20.07 2l-1.63 1.63c2.77 3.02 2.77 7.56 0 10.74L20.07 16c3.9-3.89 3.91-9.95 0-14z"></path></g><g id="redeem"><path d="M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.05 0-1.96.54-2.5 1.35l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 15H4v-2h16v2zm0-5H4V8h5.08L7 10.83 8.62 12 11 8.76l1-1.36 1 1.36L15.38 12 17 10.83 14.92 8H20v6z"></path></g><g id="redo"><path d="M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16c1.05-3.19 4.05-5.5 7.6-5.5 1.95 0 3.73.72 5.12 1.88L13 16h9V7l-3.6 3.6z"></path></g><g id="refresh"><path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"></path></g><g id="remove"><path d="M19 13H5v-2h14v2z"></path></g><g id="remove-circle"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11H7v-2h10v2z"></path></g><g id="remove-circle-outline"><path d="M7 11v2h10v-2H7zm5-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"></path></g><g id="remove-shopping-cart"><path d="M22.73 22.73L2.77 2.77 2 2l-.73-.73L0 2.54l4.39 4.39 2.21 4.66-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h7.46l1.38 1.38c-.5.36-.83.95-.83 1.62 0 1.1.89 2 1.99 2 .67 0 1.26-.33 1.62-.84L21.46 24l1.27-1.27zM7.42 15c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h2.36l2 2H7.42zm8.13-2c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H6.54l9.01 9zM7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2z"></path></g><g id="reorder"><path d="M3 15h18v-2H3v2zm0 4h18v-2H3v2zm0-8h18V9H3v2zm0-6v2h18V5H3z"></path></g><g id="reply"><path d="M10 9V5l-7 7 7 7v-4.1c5 0 8.5 1.6 11 5.1-1-5-4-10-11-11z"></path></g><g id="reply-all"><path d="M7 8V5l-7 7 7 7v-3l-4-4 4-4zm6 1V5l-7 7 7 7v-4.1c5 0 8.5 1.6 11 5.1-1-5-4-10-11-11z"></path></g><g id="report"><path d="M15.73 3H8.27L3 8.27v7.46L8.27 21h7.46L21 15.73V8.27L15.73 3zM12 17.3c-.72 0-1.3-.58-1.3-1.3 0-.72.58-1.3 1.3-1.3.72 0 1.3.58 1.3 1.3 0 .72-.58 1.3-1.3 1.3zm1-4.3h-2V7h2v6z"></path></g><g id="report-problem"><path d="M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"></path></g><g id="restore"><path d="M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z"></path></g><g id="restore-page"><path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm-2 16c-2.05 0-3.81-1.24-4.58-3h1.71c.63.9 1.68 1.5 2.87 1.5 1.93 0 3.5-1.57 3.5-3.5S13.93 9.5 12 9.5c-1.35 0-2.52.78-3.1 1.9l1.6 1.6h-4V9l1.3 1.3C8.69 8.92 10.23 8 12 8c2.76 0 5 2.24 5 5s-2.24 5-5 5z"></path></g><g id="room"><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"></path></g><g id="rounded-corner"><path d="M19 19h2v2h-2v-2zm0-2h2v-2h-2v2zM3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm0-4h2V3H3v2zm4 0h2V3H7v2zm8 16h2v-2h-2v2zm-4 0h2v-2h-2v2zm4 0h2v-2h-2v2zm-8 0h2v-2H7v2zm-4 0h2v-2H3v2zM21 8c0-2.76-2.24-5-5-5h-5v2h5c1.65 0 3 1.35 3 3v5h2V8z"></path></g><g id="rowing"><path d="M8.5 14.5L4 19l1.5 1.5L9 17h2l-2.5-2.5zM15 1c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 20.01L18 24l-2.99-3.01V19.5l-7.1-7.09c-.31.05-.61.07-.91.07v-2.16c1.66.03 3.61-.87 4.67-2.04l1.4-1.55c.19-.21.43-.38.69-.5.29-.14.62-.23.96-.23h.03C15.99 6.01 17 7.02 17 8.26v5.75c0 .84-.35 1.61-.92 2.16l-3.58-3.58v-2.27c-.63.52-1.43 1.02-2.29 1.39L16.5 18H18l3 3.01z"></path></g><g id="save"><path d="M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"></path></g><g id="schedule"><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z"></path></g><g id="search"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path></g><g id="select-all"><path d="M3 5h2V3c-1.1 0-2 .9-2 2zm0 8h2v-2H3v2zm4 8h2v-2H7v2zM3 9h2V7H3v2zm10-6h-2v2h2V3zm6 0v2h2c0-1.1-.9-2-2-2zM5 21v-2H3c0 1.1.9 2 2 2zm-2-4h2v-2H3v2zM9 3H7v2h2V3zm2 18h2v-2h-2v2zm8-8h2v-2h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2zm0-12h2V7h-2v2zm0 8h2v-2h-2v2zm-4 4h2v-2h-2v2zm0-16h2V3h-2v2zM7 17h10V7H7v10zm2-8h6v6H9V9z"></path></g><g id="send"><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"></path></g><g id="settings"><path d="M19.43 12.98c.04-.32.07-.64.07-.98s-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.3-.61-.22l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65C14.46 2.18 14.25 2 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1c-.23-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98s.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.23.09.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65zM12 15.5c-1.93 0-3.5-1.57-3.5-3.5s1.57-3.5 3.5-3.5 3.5 1.57 3.5 3.5-1.57 3.5-3.5 3.5z"></path></g><g id="settings-applications"><path d="M12 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm7-7H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-1.75 9c0 .23-.02.46-.05.68l1.48 1.16c.13.11.17.3.08.45l-1.4 2.42c-.09.15-.27.21-.43.15l-1.74-.7c-.36.28-.76.51-1.18.69l-.26 1.85c-.03.17-.18.3-.35.3h-2.8c-.17 0-.32-.13-.35-.29l-.26-1.85c-.43-.18-.82-.41-1.18-.69l-1.74.7c-.16.06-.34 0-.43-.15l-1.4-2.42c-.09-.15-.05-.34.08-.45l1.48-1.16c-.03-.23-.05-.46-.05-.69 0-.23.02-.46.05-.68l-1.48-1.16c-.13-.11-.17-.3-.08-.45l1.4-2.42c.09-.15.27-.21.43-.15l1.74.7c.36-.28.76-.51 1.18-.69l.26-1.85c.03-.17.18-.3.35-.3h2.8c.17 0 .32.13.35.29l.26 1.85c.43.18.82.41 1.18.69l1.74-.7c.16-.06.34 0 .43.15l1.4 2.42c.09.15.05.34-.08.45l-1.48 1.16c.03.23.05.46.05.69z"></path></g><g id="settings-backup-restore"><path d="M14 12c0-1.1-.9-2-2-2s-2 .9-2 2 .9 2 2 2 2-.9 2-2zm-2-9c-4.97 0-9 4.03-9 9H0l4 4 4-4H5c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.51 0-2.91-.49-4.06-1.3l-1.42 1.44C8.04 20.3 9.94 21 12 21c4.97 0 9-4.03 9-9s-4.03-9-9-9z"></path></g><g id="settings-bluetooth"><path d="M11 24h2v-2h-2v2zm-4 0h2v-2H7v2zm8 0h2v-2h-2v2zm2.71-18.29L12 0h-1v7.59L6.41 3 5 4.41 10.59 10 5 15.59 6.41 17 11 12.41V20h1l5.71-5.71-4.3-4.29 4.3-4.29zM13 3.83l1.88 1.88L13 7.59V3.83zm1.88 10.46L13 16.17v-3.76l1.88 1.88z"></path></g><g id="settings-brightness"><path d="M21 3H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16.01H3V4.99h18v14.02zM8 16h2.5l1.5 1.5 1.5-1.5H16v-2.5l1.5-1.5-1.5-1.5V8h-2.5L12 6.5 10.5 8H8v2.5L6.5 12 8 13.5V16zm4-7c1.66 0 3 1.34 3 3s-1.34 3-3 3V9z"></path></g><g id="settings-cell"><path d="M7 24h2v-2H7v2zm4 0h2v-2h-2v2zm4 0h2v-2h-2v2zM16 .01L8 0C6.9 0 6 .9 6 2v16c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V2c0-1.1-.9-1.99-2-1.99zM16 16H8V4h8v12z"></path></g><g id="settings-ethernet"><path d="M7.77 6.76L6.23 5.48.82 12l5.41 6.52 1.54-1.28L3.42 12l4.35-5.24zM7 13h2v-2H7v2zm10-2h-2v2h2v-2zm-6 2h2v-2h-2v2zm6.77-7.52l-1.54 1.28L20.58 12l-4.35 5.24 1.54 1.28L23.18 12l-5.41-6.52z"></path></g><g id="settings-input-antenna"><path d="M12 5c-3.87 0-7 3.13-7 7h2c0-2.76 2.24-5 5-5s5 2.24 5 5h2c0-3.87-3.13-7-7-7zm1 9.29c.88-.39 1.5-1.26 1.5-2.29 0-1.38-1.12-2.5-2.5-2.5S9.5 10.62 9.5 12c0 1.02.62 1.9 1.5 2.29v3.3L7.59 21 9 22.41l3-3 3 3L16.41 21 13 17.59v-3.3zM12 1C5.93 1 1 5.93 1 12h2c0-4.97 4.03-9 9-9s9 4.03 9 9h2c0-6.07-4.93-11-11-11z"></path></g><g id="settings-input-component"><path d="M5 2c0-.55-.45-1-1-1s-1 .45-1 1v4H1v6h6V6H5V2zm4 14c0 1.3.84 2.4 2 2.82V23h2v-4.18c1.16-.41 2-1.51 2-2.82v-2H9v2zm-8 0c0 1.3.84 2.4 2 2.82V23h2v-4.18C6.16 18.4 7 17.3 7 16v-2H1v2zM21 6V2c0-.55-.45-1-1-1s-1 .45-1 1v4h-2v6h6V6h-2zm-8-4c0-.55-.45-1-1-1s-1 .45-1 1v4H9v6h6V6h-2V2zm4 14c0 1.3.84 2.4 2 2.82V23h2v-4.18c1.16-.41 2-1.51 2-2.82v-2h-6v2z"></path></g><g id="settings-input-composite"><path d="M5 2c0-.55-.45-1-1-1s-1 .45-1 1v4H1v6h6V6H5V2zm4 14c0 1.3.84 2.4 2 2.82V23h2v-4.18c1.16-.41 2-1.51 2-2.82v-2H9v2zm-8 0c0 1.3.84 2.4 2 2.82V23h2v-4.18C6.16 18.4 7 17.3 7 16v-2H1v2zM21 6V2c0-.55-.45-1-1-1s-1 .45-1 1v4h-2v6h6V6h-2zm-8-4c0-.55-.45-1-1-1s-1 .45-1 1v4H9v6h6V6h-2V2zm4 14c0 1.3.84 2.4 2 2.82V23h2v-4.18c1.16-.41 2-1.51 2-2.82v-2h-6v2z"></path></g><g id="settings-input-hdmi"><path d="M18 7V4c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v3H5v6l3 6v3h8v-3l3-6V7h-1zM8 4h8v3h-2V5h-1v2h-2V5h-1v2H8V4z"></path></g><g id="settings-input-svideo"><path d="M8 11.5c0-.83-.67-1.5-1.5-1.5S5 10.67 5 11.5 5.67 13 6.5 13 8 12.33 8 11.5zm7-5c0-.83-.67-1.5-1.5-1.5h-3C9.67 5 9 5.67 9 6.5S9.67 8 10.5 8h3c.83 0 1.5-.67 1.5-1.5zM8.5 15c-.83 0-1.5.67-1.5 1.5S7.67 18 8.5 18s1.5-.67 1.5-1.5S9.33 15 8.5 15zM12 1C5.93 1 1 5.93 1 12s4.93 11 11 11 11-4.93 11-11S18.07 1 12 1zm0 20c-4.96 0-9-4.04-9-9s4.04-9 9-9 9 4.04 9 9-4.04 9-9 9zm5.5-11c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm-2 5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5z"></path></g><g id="settings-overscan"><path d="M12.01 5.5L10 8h4l-1.99-2.5zM18 10v4l2.5-1.99L18 10zM6 10l-2.5 2.01L6 14v-4zm8 6h-4l2.01 2.5L14 16zm7-13H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16.01H3V4.99h18v14.02z"></path></g><g id="settings-phone"><path d="M13 9h-2v2h2V9zm4 0h-2v2h2V9zm3 6.5c-1.25 0-2.45-.2-3.57-.57-.35-.11-.74-.03-1.02.24l-2.2 2.2c-2.83-1.44-5.15-3.75-6.59-6.58l2.2-2.21c.28-.27.36-.66.25-1.01C8.7 6.45 8.5 5.25 8.5 4c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1 0 9.39 7.61 17 17 17 .55 0 1-.45 1-1v-3.5c0-.55-.45-1-1-1zM19 9v2h2V9h-2z"></path></g><g id="settings-power"><path d="M7 24h2v-2H7v2zm4 0h2v-2h-2v2zm2-22h-2v10h2V2zm3.56 2.44l-1.45 1.45C16.84 6.94 18 8.83 18 11c0 3.31-2.69 6-6 6s-6-2.69-6-6c0-2.17 1.16-4.06 2.88-5.12L7.44 4.44C5.36 5.88 4 8.28 4 11c0 4.42 3.58 8 8 8s8-3.58 8-8c0-2.72-1.36-5.12-3.44-6.56zM15 24h2v-2h-2v2z"></path></g><g id="settings-remote"><path d="M15 9H9c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h6c.55 0 1-.45 1-1V10c0-.55-.45-1-1-1zm-3 6c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zM7.05 6.05l1.41 1.41C9.37 6.56 10.62 6 12 6s2.63.56 3.54 1.46l1.41-1.41C15.68 4.78 13.93 4 12 4s-3.68.78-4.95 2.05zM12 0C8.96 0 6.21 1.23 4.22 3.22l1.41 1.41C7.26 3.01 9.51 2 12 2s4.74 1.01 6.36 2.64l1.41-1.41C17.79 1.23 15.04 0 12 0z"></path></g><g id="settings-voice"><path d="M7 24h2v-2H7v2zm5-11c1.66 0 2.99-1.34 2.99-3L15 4c0-1.66-1.34-3-3-3S9 2.34 9 4v6c0 1.66 1.34 3 3 3zm-1 11h2v-2h-2v2zm4 0h2v-2h-2v2zm4-14h-1.7c0 3-2.54 5.1-5.3 5.1S6.7 13 6.7 10H5c0 3.41 2.72 6.23 6 6.72V20h2v-3.28c3.28-.49 6-3.31 6-6.72z"></path></g><g id="shop"><path d="M16 6V4c0-1.11-.89-2-2-2h-4c-1.11 0-2 .89-2 2v2H2v13c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6h-6zm-6-2h4v2h-4V4zM9 18V9l7.5 4L9 18z"></path></g><g id="shop-two"><path d="M3 9H1v11c0 1.11.89 2 2 2h14c1.11 0 2-.89 2-2H3V9zm15-4V3c0-1.11-.89-2-2-2h-4c-1.11 0-2 .89-2 2v2H5v11c0 1.11.89 2 2 2h14c1.11 0 2-.89 2-2V5h-5zm-6-2h4v2h-4V3zm0 12V8l5.5 3-5.5 4z"></path></g><g id="shopping-basket"><path d="M17.21 9l-4.38-6.56c-.19-.28-.51-.42-.83-.42-.32 0-.64.14-.83.43L6.79 9H2c-.55 0-1 .45-1 1 0 .09.01.18.04.27l2.54 9.27c.23.84 1 1.46 1.92 1.46h13c.92 0 1.69-.62 1.93-1.46l2.54-9.27L23 10c0-.55-.45-1-1-1h-4.79zM9 9l3-4.4L15 9H9zm3 8c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"></path></g><g id="shopping-cart"><path d="M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z"></path></g><g id="sort"><path d="M3 18h6v-2H3v2zM3 6v2h18V6H3zm0 7h12v-2H3v2z"></path></g><g id="speaker-notes"><path d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM8 14H6v-2h2v2zm0-3H6V9h2v2zm0-3H6V6h2v2zm7 6h-5v-2h5v2zm3-3h-8V9h8v2zm0-3h-8V6h8v2z"></path></g><g id="speaker-notes-off"><path d="M10.54 11l-.54-.54L7.54 8 6 6.46 2.38 2.84 1.27 1.73 0 3l2.01 2.01L2 22l4-4h9l5.73 5.73L22 22.46 17.54 18l-7-7zM8 14H6v-2h2v2zm-2-3V9l2 2H6zm14-9H4.08L10 7.92V6h8v2h-7.92l1 1H18v2h-4.92l6.99 6.99C21.14 17.95 22 17.08 22 16V4c0-1.1-.9-2-2-2z"></path></g><g id="spellcheck"><path d="M12.45 16h2.09L9.43 3H7.57L2.46 16h2.09l1.12-3h5.64l1.14 3zm-6.02-5L8.5 5.48 10.57 11H6.43zm15.16.59l-8.09 8.09L9.83 16l-1.41 1.41 5.09 5.09L23 13l-1.41-1.41z"></path></g><g id="star"><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"></path></g><g id="star-border"><path d="M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z"></path></g><g id="star-half"><path d="M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4V6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z"></path></g><g id="stars"><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm4.24 16L12 15.45 7.77 18l1.12-4.81-3.73-3.23 4.92-.42L12 5l1.92 4.53 4.92.42-3.73 3.23L16.23 18z"></path></g><g id="store"><path d="M20 4H4v2h16V4zm1 10v-2l-1-5H4l-1 5v2h1v6h10v-6h4v6h2v-6h1zm-9 4H6v-4h6v4z"></path></g><g id="subdirectory-arrow-left"><path d="M11 9l1.42 1.42L8.83 14H18V4h2v12H8.83l3.59 3.58L11 21l-6-6 6-6z"></path></g><g id="subdirectory-arrow-right"><path d="M19 15l-6 6-1.42-1.42L15.17 16H4V4h2v10h9.17l-3.59-3.58L13 9l6 6z"></path></g><g id="subject"><path d="M14 17H4v2h10v-2zm6-8H4v2h16V9zM4 15h16v-2H4v2zM4 5v2h16V5H4z"></path></g><g id="supervisor-account"><path d="M16.5 12c1.38 0 2.49-1.12 2.49-2.5S17.88 7 16.5 7C15.12 7 14 8.12 14 9.5s1.12 2.5 2.5 2.5zM9 11c1.66 0 2.99-1.34 2.99-3S10.66 5 9 5C7.34 5 6 6.34 6 8s1.34 3 3 3zm7.5 3c-1.83 0-5.5.92-5.5 2.75V19h11v-2.25c0-1.83-3.67-2.75-5.5-2.75zM9 13c-2.33 0-7 1.17-7 3.5V19h7v-2.25c0-.85.33-2.34 2.37-3.47C10.5 13.1 9.66 13 9 13z"></path></g><g id="swap-horiz"><path d="M6.99 11L3 15l3.99 4v-3H14v-2H6.99v-3zM21 9l-3.99-4v3H10v2h7.01v3L21 9z"></path></g><g id="swap-vert"><path d="M16 17.01V10h-2v7.01h-3L15 21l4-3.99h-3zM9 3L5 6.99h3V14h2V6.99h3L9 3z"></path></g><g id="swap-vertical-circle"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM6.5 9L10 5.5 13.5 9H11v4H9V9H6.5zm11 6L14 18.5 10.5 15H13v-4h2v4h2.5z"></path></g><g id="system-update-alt"><path d="M12 16.5l4-4h-3v-9h-2v9H8l4 4zm9-13h-6v1.99h6v14.03H3V5.49h6V3.5H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2v-14c0-1.1-.9-2-2-2z"></path></g><g id="tab"><path d="M21 3H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H3V5h10v4h8v10z"></path></g><g id="tab-unselected"><path d="M1 9h2V7H1v2zm0 4h2v-2H1v2zm0-8h2V3c-1.1 0-2 .9-2 2zm8 16h2v-2H9v2zm-8-4h2v-2H1v2zm2 4v-2H1c0 1.1.9 2 2 2zM21 3h-8v6h10V5c0-1.1-.9-2-2-2zm0 14h2v-2h-2v2zM9 5h2V3H9v2zM5 21h2v-2H5v2zM5 5h2V3H5v2zm16 16c1.1 0 2-.9 2-2h-2v2zm0-8h2v-2h-2v2zm-8 8h2v-2h-2v2zm4 0h2v-2h-2v2z"></path></g><g id="text-format"><path d="M5 17v2h14v-2H5zm4.5-4.2h5l.9 2.2h2.1L12.75 4h-1.5L6.5 15h2.1l.9-2.2zM12 5.98L13.87 11h-3.74L12 5.98z"></path></g><g id="theaters"><path d="M18 3v2h-2V3H8v2H6V3H4v18h2v-2h2v2h8v-2h2v2h2V3h-2zM8 17H6v-2h2v2zm0-4H6v-2h2v2zm0-4H6V7h2v2zm10 8h-2v-2h2v2zm0-4h-2v-2h2v2zm0-4h-2V7h2v2z"></path></g><g id="thumb-down"><path d="M15 3H6c-.83 0-1.54.5-1.84 1.22l-3.02 7.05c-.09.23-.14.47-.14.73v1.91l.01.01L1 14c0 1.1.9 2 2 2h6.31l-.95 4.57-.03.32c0 .41.17.79.44 1.06L9.83 23l6.59-6.59c.36-.36.58-.86.58-1.41V5c0-1.1-.9-2-2-2zm4 0v12h4V3h-4z"></path></g><g id="thumb-up"><path d="M1 21h4V9H1v12zm22-11c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73v-1.91l-.01-.01L23 10z"></path></g><g id="thumbs-up-down"><path d="M12 6c0-.55-.45-1-1-1H5.82l.66-3.18.02-.23c0-.31-.13-.59-.33-.8L5.38 0 .44 4.94C.17 5.21 0 5.59 0 6v6.5c0 .83.67 1.5 1.5 1.5h6.75c.62 0 1.15-.38 1.38-.91l2.26-5.29c.07-.17.11-.36.11-.55V6zm10.5 4h-6.75c-.62 0-1.15.38-1.38.91l-2.26 5.29c-.07.17-.11.36-.11.55V18c0 .55.45 1 1 1h5.18l-.66 3.18-.02.24c0 .31.13.59.33.8l.79.78 4.94-4.94c.27-.27.44-.65.44-1.06v-6.5c0-.83-.67-1.5-1.5-1.5z"></path></g><g id="timeline"><path d="M23 8c0 1.1-.9 2-2 2-.18 0-.35-.02-.51-.07l-3.56 3.55c.05.16.07.34.07.52 0 1.1-.9 2-2 2s-2-.9-2-2c0-.18.02-.36.07-.52l-2.55-2.55c-.16.05-.34.07-.52.07s-.36-.02-.52-.07l-4.55 4.56c.05.16.07.33.07.51 0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2c.18 0 .35.02.51.07l4.56-4.55C8.02 9.36 8 9.18 8 9c0-1.1.9-2 2-2s2 .9 2 2c0 .18-.02.36-.07.52l2.55 2.55c.16-.05.34-.07.52-.07s.36.02.52.07l3.55-3.56C19.02 8.35 19 8.18 19 8c0-1.1.9-2 2-2s2 .9 2 2z"></path></g><g id="toc"><path d="M3 9h14V7H3v2zm0 4h14v-2H3v2zm0 4h14v-2H3v2zm16 0h2v-2h-2v2zm0-10v2h2V7h-2zm0 6h2v-2h-2v2z"></path></g><g id="today"><path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"></path></g><g id="toll"><path d="M15 4c-4.42 0-8 3.58-8 8s3.58 8 8 8 8-3.58 8-8-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6zM3 12c0-2.61 1.67-4.83 4-5.65V4.26C3.55 5.15 1 8.27 1 12s2.55 6.85 6 7.74v-2.09c-2.33-.82-4-3.04-4-5.65z"></path></g><g id="touch-app"><path d="M9 11.24V7.5C9 6.12 10.12 5 11.5 5S14 6.12 14 7.5v3.74c1.21-.81 2-2.18 2-3.74C16 5.01 13.99 3 11.5 3S7 5.01 7 7.5c0 1.56.79 2.93 2 3.74zm9.84 4.63l-4.54-2.26c-.17-.07-.35-.11-.54-.11H13v-6c0-.83-.67-1.5-1.5-1.5S10 6.67 10 7.5v10.74l-3.43-.72c-.08-.01-.15-.03-.24-.03-.31 0-.59.13-.79.33l-.79.8 4.94 4.94c.27.27.65.44 1.06.44h6.79c.75 0 1.33-.55 1.44-1.28l.75-5.27c.01-.07.02-.14.02-.2 0-.62-.38-1.16-.91-1.38z"></path></g><g id="track-changes"><path d="M19.07 4.93l-1.41 1.41C19.1 7.79 20 9.79 20 12c0 4.42-3.58 8-8 8s-8-3.58-8-8c0-4.08 3.05-7.44 7-7.93v2.02C8.16 6.57 6 9.03 6 12c0 3.31 2.69 6 6 6s6-2.69 6-6c0-1.66-.67-3.16-1.76-4.24l-1.41 1.41C15.55 9.9 16 10.9 16 12c0 2.21-1.79 4-4 4s-4-1.79-4-4c0-1.86 1.28-3.41 3-3.86v2.14c-.6.35-1 .98-1 1.72 0 1.1.9 2 2 2s2-.9 2-2c0-.74-.4-1.38-1-1.72V2h-1C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10c0-2.76-1.12-5.26-2.93-7.07z"></path></g><g id="translate"><path d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></g><g id="trending-down"><path d="M16 18l2.29-2.29-4.88-4.88-4 4L2 7.41 3.41 6l6 6 4-4 6.3 6.29L22 12v6z"></path></g><g id="trending-flat"><path d="M22 12l-4-4v3H3v2h15v3z"></path></g><g id="trending-up"><path d="M16 6l2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"></path></g><g id="turned-in"><path d="M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2z"></path></g><g id="turned-in-not"><path d="M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2zm0 15l-5-2.18L7 18V5h10v13z"></path></g><g id="unarchive"><path d="M20.55 5.22l-1.39-1.68C18.88 3.21 18.47 3 18 3H6c-.47 0-.88.21-1.15.55L3.46 5.22C3.17 5.57 3 6.01 3 6.5V19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6.5c0-.49-.17-.93-.45-1.28zM12 9.5l5.5 5.5H14v2h-4v-2H6.5L12 9.5zM5.12 5l.82-1h12l.93 1H5.12z"></path></g><g id="undo"><path d="M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z"></path></g><g id="unfold-less"><path d="M7.41 18.59L8.83 20 12 16.83 15.17 20l1.41-1.41L12 14l-4.59 4.59zm9.18-13.18L15.17 4 12 7.17 8.83 4 7.41 5.41 12 10l4.59-4.59z"></path></g><g id="unfold-more"><path d="M12 5.83L15.17 9l1.41-1.41L12 3 7.41 7.59 8.83 9 12 5.83zm0 12.34L8.83 15l-1.41 1.41L12 21l4.59-4.59L15.17 15 12 18.17z"></path></g><g id="update"><path d="M21 10.12h-6.78l2.74-2.82c-2.73-2.7-7.15-2.8-9.88-.1-2.73 2.71-2.73 7.08 0 9.79 2.73 2.71 7.15 2.71 9.88 0C18.32 15.65 19 14.08 19 12.1h2c0 1.98-.88 4.55-2.64 6.29-3.51 3.48-9.21 3.48-12.72 0-3.5-3.47-3.53-9.11-.02-12.58 3.51-3.47 9.14-3.47 12.65 0L21 3v7.12zM12.5 8v4.25l3.5 2.08-.72 1.21L11 13V8h1.5z"></path></g><g id="verified-user"><path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm-2 16l-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9l-8 8z"></path></g><g id="view-agenda"><path d="M20 13H3c-.55 0-1 .45-1 1v6c0 .55.45 1 1 1h17c.55 0 1-.45 1-1v-6c0-.55-.45-1-1-1zm0-10H3c-.55 0-1 .45-1 1v6c0 .55.45 1 1 1h17c.55 0 1-.45 1-1V4c0-.55-.45-1-1-1z"></path></g><g id="view-array"><path d="M4 18h3V5H4v13zM18 5v13h3V5h-3zM8 18h9V5H8v13z"></path></g><g id="view-carousel"><path d="M7 19h10V4H7v15zm-5-2h4V6H2v11zM18 6v11h4V6h-4z"></path></g><g id="view-column"><path d="M10 18h5V5h-5v13zm-6 0h5V5H4v13zM16 5v13h5V5h-5z"></path></g><g id="view-day"><path d="M2 21h19v-3H2v3zM20 8H3c-.55 0-1 .45-1 1v6c0 .55.45 1 1 1h17c.55 0 1-.45 1-1V9c0-.55-.45-1-1-1zM2 3v3h19V3H2z"></path></g><g id="view-headline"><path d="M4 15h16v-2H4v2zm0 4h16v-2H4v2zm0-8h16V9H4v2zm0-6v2h16V5H4z"></path></g><g id="view-list"><path d="M4 14h4v-4H4v4zm0 5h4v-4H4v4zM4 9h4V5H4v4zm5 5h12v-4H9v4zm0 5h12v-4H9v4zM9 5v4h12V5H9z"></path></g><g id="view-module"><path d="M4 11h5V5H4v6zm0 7h5v-6H4v6zm6 0h5v-6h-5v6zm6 0h5v-6h-5v6zm-6-7h5V5h-5v6zm6-6v6h5V5h-5z"></path></g><g id="view-quilt"><path d="M10 18h5v-6h-5v6zm-6 0h5V5H4v13zm12 0h5v-6h-5v6zM10 5v6h11V5H10z"></path></g><g id="view-stream"><path d="M4 18h17v-6H4v6zM4 5v6h17V5H4z"></path></g><g id="view-week"><path d="M6 5H3c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h3c.55 0 1-.45 1-1V6c0-.55-.45-1-1-1zm14 0h-3c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h3c.55 0 1-.45 1-1V6c0-.55-.45-1-1-1zm-7 0h-3c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h3c.55 0 1-.45 1-1V6c0-.55-.45-1-1-1z"></path></g><g id="visibility"><path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"></path></g><g id="visibility-off"><path d="M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78l3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"></path></g><g id="warning"><path d="M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"></path></g><g id="watch-later"><path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2zm4.2 14.2L11 13V7h1.5v5.2l4.5 2.7-.8 1.3z"></path></g><g id="weekend"><path d="M21 10c-1.1 0-2 .9-2 2v3H5v-3c0-1.1-.9-2-2-2s-2 .9-2 2v5c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2v-5c0-1.1-.9-2-2-2zm-3-5H6c-1.1 0-2 .9-2 2v2.15c1.16.41 2 1.51 2 2.82V14h12v-2.03c0-1.3.84-2.4 2-2.82V7c0-1.1-.9-2-2-2z"></path></g><g id="work"><path d="M20 6h-4V4c0-1.11-.89-2-2-2h-4c-1.11 0-2 .89-2 2v2H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-6 0h-4V4h4v2z"></path></g><g id="youtube-searched-for"><path d="M17.01 14h-.8l-.27-.27c.98-1.14 1.57-2.61 1.57-4.23 0-3.59-2.91-6.5-6.5-6.5s-6.5 3-6.5 6.5H2l3.84 4 4.16-4H6.51C6.51 7 8.53 5 11.01 5s4.5 2.01 4.5 4.5c0 2.48-2.02 4.5-4.5 4.5-.65 0-1.26-.14-1.82-.38L7.71 15.1c.97.57 2.09.9 3.3.9 1.61 0 3.08-.59 4.22-1.57l.27.27v.79l5.01 4.99L22 19l-4.99-5z"></path></g><g id="zoom-in"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zm2.5-4h-2v2H9v-2H7V9h2V7h1v2h2v1z"></path></g><g id="zoom-out"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zM7 9h5v1H7z"></path></g></defs></svg></iron-iconset-svg><iron-iconset-svg name="communication" size="24"><svg><defs><g id="business"><path d="M12 7V3H2v18h20V7H12zM6 19H4v-2h2v2zm0-4H4v-2h2v2zm0-4H4V9h2v2zm0-4H4V5h2v2zm4 12H8v-2h2v2zm0-4H8v-2h2v2zm0-4H8V9h2v2zm0-4H8V5h2v2zm10 12h-8v-2h2v-2h-2v-2h2v-2h-2V9h8v10zm-2-8h-2v2h2v-2zm0 4h-2v2h2v-2z"></path></g><g id="call"><path d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"></path></g><g id="call-end"><path d="M12 9c-1.6 0-3.15.25-4.6.72v3.1c0 .39-.23.74-.56.9-.98.49-1.87 1.12-2.66 1.85-.18.18-.43.28-.7.28-.28 0-.53-.11-.71-.29L.29 13.08c-.18-.17-.29-.42-.29-.7 0-.28.11-.53.29-.71C3.34 8.78 7.46 7 12 7s8.66 1.78 11.71 4.67c.18.18.29.43.29.71 0 .28-.11.53-.29.71l-2.48 2.48c-.18.18-.43.29-.71.29-.27 0-.52-.11-.7-.28-.79-.74-1.69-1.36-2.67-1.85-.33-.16-.56-.5-.56-.9v-3.1C15.15 9.25 13.6 9 12 9z"></path></g><g id="call-made"><path d="M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5z"></path></g><g id="call-merge"><path d="M17 20.41L18.41 19 15 15.59 13.59 17 17 20.41zM7.5 8H11v5.59L5.59 19 7 20.41l6-6V8h3.5L12 3.5 7.5 8z"></path></g><g id="call-missed"><path d="M19.59 7L12 14.59 6.41 9H11V7H3v8h2v-4.59l7 7 9-9z"></path></g><g id="call-missed-outgoing"><path d="M3 8.41l9 9 7-7V15h2V7h-8v2h4.59L12 14.59 4.41 7 3 8.41z"></path></g><g id="call-received"><path d="M20 5.41L18.59 4 7 15.59V9H5v10h10v-2H8.41z"></path></g><g id="call-split"><path d="M14 4l2.29 2.29-2.88 2.88 1.42 1.42 2.88-2.88L20 10V4zm-4 0H4v6l2.29-2.29 4.71 4.7V20h2v-8.41l-5.29-5.3z"></path></g><g id="chat"><path d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 9h12v2H6V9zm8 5H6v-2h8v2zm4-6H6V6h12v2z"></path></g><g id="chat-bubble"><path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2z"></path></g><g id="chat-bubble-outline"><path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H6l-2 2V4h16v12z"></path></g><g id="clear-all"><path d="M5 13h14v-2H5v2zm-2 4h14v-2H3v2zM7 7v2h14V7H7z"></path></g><g id="comment"><path d="M21.99 4c0-1.1-.89-2-1.99-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h14l4 4-.01-18zM18 14H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"></path></g><g id="contact-mail"><path d="M21 8V7l-3 2-3-2v1l3 2 3-2zm1-5H2C.9 3 0 3.9 0 5v14c0 1.1.9 2 2 2h20c1.1 0 1.99-.9 1.99-2L24 5c0-1.1-.9-2-2-2zM8 6c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm6 12H2v-1c0-2 4-3.1 6-3.1s6 1.1 6 3.1v1zm8-6h-8V6h8v6z"></path></g><g id="contact-phone"><path d="M22 3H2C.9 3 0 3.9 0 5v14c0 1.1.9 2 2 2h20c1.1 0 1.99-.9 1.99-2L24 5c0-1.1-.9-2-2-2zM8 6c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm6 12H2v-1c0-2 4-3.1 6-3.1s6 1.1 6 3.1v1zm3.85-4h1.64L21 16l-1.99 1.99c-1.31-.98-2.28-2.38-2.73-3.99-.18-.64-.28-1.31-.28-2s.1-1.36.28-2c.45-1.62 1.42-3.01 2.73-3.99L21 8l-1.51 2h-1.64c-.22.63-.35 1.3-.35 2s.13 1.37.35 2z"></path></g><g id="contacts"><path d="M20 0H4v2h16V0zM4 24h16v-2H4v2zM20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm-8 2.75c1.24 0 2.25 1.01 2.25 2.25s-1.01 2.25-2.25 2.25S9.75 10.24 9.75 9 10.76 6.75 12 6.75zM17 17H7v-1.5c0-1.67 3.33-2.5 5-2.5s5 .83 5 2.5V17z"></path></g><g id="dialer-sip"><path d="M17 3h-1v5h1V3zm-2 2h-2V4h2V3h-3v3h2v1h-2v1h3V5zm3-2v5h1V6h2V3h-3zm2 2h-1V4h1v1zm0 10.5c-1.25 0-2.45-.2-3.57-.57-.35-.11-.74-.03-1.01.24l-2.2 2.2c-2.83-1.44-5.15-3.75-6.59-6.59l2.2-2.21c.27-.26.35-.65.24-1C8.7 6.45 8.5 5.25 8.5 4c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1 0 9.39 7.61 17 17 17 .55 0 1-.45 1-1v-3.5c0-.55-.45-1-1-1z"></path></g><g id="dialpad"><path d="M12 19c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zM6 1c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12-8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm-6 8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"></path></g><g id="email"><path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"></path></g><g id="forum"><path d="M21 6h-2v9H6v2c0 .55.45 1 1 1h11l4 4V7c0-.55-.45-1-1-1zm-4 6V3c0-.55-.45-1-1-1H3c-.55 0-1 .45-1 1v14l4-4h10c.55 0 1-.45 1-1z"></path></g><g id="import-contacts"><path d="M21 5c-1.11-.35-2.33-.5-3.5-.5-1.95 0-4.05.4-5.5 1.5-1.45-1.1-3.55-1.5-5.5-1.5S2.45 4.9 1 6v14.65c0 .25.25.5.5.5.1 0 .15-.05.25-.05C3.1 20.45 5.05 20 6.5 20c1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.3 4.75 1.05.1.05.15.05.25.05.25 0 .5-.25.5-.5V6c-.6-.45-1.25-.75-2-1zm0 13.5c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V8c1.35-.85 3.8-1.5 5.5-1.5 1.2 0 2.4.15 3.5.5v11.5z"></path></g><g id="import-export"><path d="M9 3L5 6.99h3V14h2V6.99h3L9 3zm7 14.01V10h-2v7.01h-3L15 21l4-3.99h-3z"></path></g><g id="invert-colors-off"><path d="M20.65 20.87l-2.35-2.35-6.3-6.29-3.56-3.57-1.42-1.41L4.27 4.5 3 5.77l2.78 2.78c-2.55 3.14-2.36 7.76.56 10.69C7.9 20.8 9.95 21.58 12 21.58c1.79 0 3.57-.59 5.03-1.78l2.7 2.7L21 21.23l-.35-.36zM12 19.59c-1.6 0-3.11-.62-4.24-1.76C6.62 16.69 6 15.19 6 13.59c0-1.32.43-2.57 1.21-3.6L12 14.77v4.82zM12 5.1v4.58l7.25 7.26c1.37-2.96.84-6.57-1.6-9.01L12 2.27l-3.7 3.7 1.41 1.41L12 5.1z"></path></g><g id="live-help"><path d="M19 2H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h4l3 3 3-3h4c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-6 16h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 11.9 13 12.5 13 14h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"></path></g><g id="location-off"><path d="M12 6.5c1.38 0 2.5 1.12 2.5 2.5 0 .74-.33 1.39-.83 1.85l3.63 3.63c.98-1.86 1.7-3.8 1.7-5.48 0-3.87-3.13-7-7-7-1.98 0-3.76.83-5.04 2.15l3.19 3.19c.46-.52 1.11-.84 1.85-.84zm4.37 9.6l-4.63-4.63-.11-.11L3.27 3 2 4.27l3.18 3.18C5.07 7.95 5 8.47 5 9c0 5.25 7 13 7 13s1.67-1.85 3.38-4.35L18.73 21 20 19.73l-3.63-3.63z"></path></g><g id="location-on"><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"></path></g><g id="mail-outline"><path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 14H4V8l8 5 8-5v10zm-8-7L4 6h16l-8 5z"></path></g><g id="message"><path d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"></path></g><g id="no-sim"><path d="M18.99 5c0-1.1-.89-2-1.99-2h-7L7.66 5.34 19 16.68 18.99 5zM3.65 3.88L2.38 5.15 5 7.77V19c0 1.1.9 2 2 2h10.01c.35 0 .67-.1.96-.26l1.88 1.88 1.27-1.27L3.65 3.88z"></path></g><g id="phone"><path d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"></path></g><g id="phonelink-erase"><path d="M13 8.2l-1-1-4 4-4-4-1 1 4 4-4 4 1 1 4-4 4 4 1-1-4-4 4-4zM19 1H9c-1.1 0-2 .9-2 2v3h2V4h10v16H9v-2H7v3c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V3c0-1.1-.9-2-2-2z"></path></g><g id="phonelink-lock"><path d="M19 1H9c-1.1 0-2 .9-2 2v3h2V4h10v16H9v-2H7v3c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V3c0-1.1-.9-2-2-2zm-8.2 10V9.5C10.8 8.1 9.4 7 8 7S5.2 8.1 5.2 9.5V11c-.6 0-1.2.6-1.2 1.2v3.5c0 .7.6 1.3 1.2 1.3h5.5c.7 0 1.3-.6 1.3-1.2v-3.5c0-.7-.6-1.3-1.2-1.3zm-1.3 0h-3V9.5c0-.8.7-1.3 1.5-1.3s1.5.5 1.5 1.3V11z"></path></g><g id="phonelink-ring"><path d="M20.1 7.7l-1 1c1.8 1.8 1.8 4.6 0 6.5l1 1c2.5-2.3 2.5-6.1 0-8.5zM18 9.8l-1 1c.5.7.5 1.6 0 2.3l1 1c1.2-1.2 1.2-3 0-4.3zM14 1H4c-1.1 0-2 .9-2 2v18c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V3c0-1.1-.9-2-2-2zm0 19H4V4h10v16z"></path></g><g id="phonelink-setup"><path d="M11.8 12.5v-1l1.1-.8c.1-.1.1-.2.1-.3l-1-1.7c-.1-.1-.2-.2-.3-.1l-1.3.4c-.3-.2-.6-.4-.9-.5l-.2-1.3c0-.1-.1-.2-.3-.2H7c-.1 0-.2.1-.3.2l-.2 1.3c-.3.1-.6.3-.9.5l-1.3-.5c-.1 0-.2 0-.3.1l-1 1.7c-.1.1 0 .2.1.3l1.1.8v1l-1.1.8c-.1.2-.1.3-.1.4l1 1.7c.1.1.2.2.3.1l1.4-.4c.3.2.6.4.9.5l.2 1.3c-.1.1.1.2.2.2h2c.1 0 .2-.1.3-.2l.2-1.3c.3-.1.6-.3.9-.5l1.3.5c.1 0 .2 0 .3-.1l1-1.7c.1-.1 0-.2-.1-.3l-1.1-.9zM8 14c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zM19 1H9c-1.1 0-2 .9-2 2v3h2V4h10v16H9v-2H7v3c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V3c0-1.1-.9-2-2-2z"></path></g><g id="portable-wifi-off"><path d="M17.56 14.24c.28-.69.44-1.45.44-2.24 0-3.31-2.69-6-6-6-.79 0-1.55.16-2.24.44l1.62 1.62c.2-.03.41-.06.62-.06 2.21 0 4 1.79 4 4 0 .21-.02.42-.05.63l1.61 1.61zM12 4c4.42 0 8 3.58 8 8 0 1.35-.35 2.62-.95 3.74l1.47 1.47C21.46 15.69 22 13.91 22 12c0-5.52-4.48-10-10-10-1.91 0-3.69.55-5.21 1.47l1.46 1.46C9.37 4.34 10.65 4 12 4zM3.27 2.5L2 3.77l2.1 2.1C2.79 7.57 2 9.69 2 12c0 3.7 2.01 6.92 4.99 8.65l1-1.73C5.61 17.53 4 14.96 4 12c0-1.76.57-3.38 1.53-4.69l1.43 1.44C6.36 9.68 6 10.8 6 12c0 2.22 1.21 4.15 3 5.19l1-1.74c-1.19-.7-2-1.97-2-3.45 0-.65.17-1.25.44-1.79l1.58 1.58L10 12c0 1.1.9 2 2 2l.21-.02.01.01 7.51 7.51L21 20.23 4.27 3.5l-1-1z"></path></g><g id="present-to-all"><path d="M21 3H3c-1.11 0-2 .89-2 2v14c0 1.11.89 2 2 2h18c1.11 0 2-.89 2-2V5c0-1.11-.89-2-2-2zm0 16.02H3V4.98h18v14.04zM10 12H8l4-4 4 4h-2v4h-4v-4z"></path></g><g id="ring-volume"><path d="M23.71 16.67C20.66 13.78 16.54 12 12 12 7.46 12 3.34 13.78.29 16.67c-.18.18-.29.43-.29.71 0 .28.11.53.29.71l2.48 2.48c.18.18.43.29.71.29.27 0 .52-.11.7-.28.79-.74 1.69-1.36 2.66-1.85.33-.16.56-.5.56-.9v-3.1c1.45-.48 3-.73 4.6-.73s3.15.25 4.6.72v3.1c0 .39.23.74.56.9.98.49 1.87 1.12 2.66 1.85.18.18.43.28.7.28.28 0 .53-.11.71-.29l2.48-2.48c.18-.18.29-.43.29-.71 0-.27-.11-.52-.29-.7zM21.16 6.26l-1.41-1.41-3.56 3.55 1.41 1.41s3.45-3.52 3.56-3.55zM13 2h-2v5h2V2zM6.4 9.81L7.81 8.4 4.26 4.84 2.84 6.26c.11.03 3.56 3.55 3.56 3.55z"></path></g><g id="rss-feed"><circle cx="6.18" cy="17.82" r="2.18"></circle><path d="M4 4.44v2.83c7.03 0 12.73 5.7 12.73 12.73h2.83c0-8.59-6.97-15.56-15.56-15.56zm0 5.66v2.83c3.9 0 7.07 3.17 7.07 7.07h2.83c0-5.47-4.43-9.9-9.9-9.9z"></path></g><g id="screen-share"><path d="M20 18c1.1 0 1.99-.9 1.99-2L22 6c0-1.11-.9-2-2-2H4c-1.11 0-2 .89-2 2v10c0 1.1.89 2 2 2H0v2h24v-2h-4zm-7-3.53v-2.19c-2.78 0-4.61.85-6 2.72.56-2.67 2.11-5.33 6-5.87V7l4 3.73-4 3.74z"></path></g><g id="speaker-phone"><path d="M7 7.07L8.43 8.5c.91-.91 2.18-1.48 3.57-1.48s2.66.57 3.57 1.48L17 7.07C15.72 5.79 13.95 5 12 5s-3.72.79-5 2.07zM12 1C8.98 1 6.24 2.23 4.25 4.21l1.41 1.41C7.28 4 9.53 3 12 3s4.72 1 6.34 2.62l1.41-1.41C17.76 2.23 15.02 1 12 1zm2.86 9.01L9.14 10C8.51 10 8 10.51 8 11.14v9.71c0 .63.51 1.14 1.14 1.14h5.71c.63 0 1.14-.51 1.14-1.14v-9.71c.01-.63-.5-1.13-1.13-1.13zM15 20H9v-8h6v8z"></path></g><g id="stay-current-landscape"><path d="M1.01 7L1 17c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2H3c-1.1 0-1.99.9-1.99 2zM19 7v10H5V7h14z"></path></g><g id="stay-current-portrait"><path d="M17 1.01L7 1c-1.1 0-1.99.9-1.99 2v18c0 1.1.89 2 1.99 2h10c1.1 0 2-.9 2-2V3c0-1.1-.9-1.99-2-1.99zM17 19H7V5h10v14z"></path></g><g id="stay-primary-landscape"><path d="M1.01 7L1 17c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2H3c-1.1 0-1.99.9-1.99 2zM19 7v10H5V7h14z"></path></g><g id="stay-primary-portrait"><path d="M17 1.01L7 1c-1.1 0-1.99.9-1.99 2v18c0 1.1.89 2 1.99 2h10c1.1 0 2-.9 2-2V3c0-1.1-.9-1.99-2-1.99zM17 19H7V5h10v14z"></path></g><g id="stop-screen-share"><path d="M21.22 18.02l2 2H24v-2h-2.78zm.77-2l.01-10c0-1.11-.9-2-2-2H7.22l5.23 5.23c.18-.04.36-.07.55-.1V7.02l4 3.73-1.58 1.47 5.54 5.54c.61-.33 1.03-.99 1.03-1.74zM2.39 1.73L1.11 3l1.54 1.54c-.4.36-.65.89-.65 1.48v10c0 1.1.89 2 2 2H0v2h18.13l2.71 2.71 1.27-1.27L2.39 1.73zM7 15.02c.31-1.48.92-2.95 2.07-4.06l1.59 1.59c-1.54.38-2.7 1.18-3.66 2.47z"></path></g><g id="swap-calls"><path d="M18 4l-4 4h3v7c0 1.1-.9 2-2 2s-2-.9-2-2V8c0-2.21-1.79-4-4-4S5 5.79 5 8v7H2l4 4 4-4H7V8c0-1.1.9-2 2-2s2 .9 2 2v7c0 2.21 1.79 4 4 4s4-1.79 4-4V8h3l-4-4z"></path></g><g id="textsms"><path d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM9 11H7V9h2v2zm4 0h-2V9h2v2zm4 0h-2V9h2v2z"></path></g><g id="voicemail"><path d="M18.5 6C15.46 6 13 8.46 13 11.5c0 1.33.47 2.55 1.26 3.5H9.74c.79-.95 1.26-2.17 1.26-3.5C11 8.46 8.54 6 5.5 6S0 8.46 0 11.5 2.46 17 5.5 17h13c3.04 0 5.5-2.46 5.5-5.5S21.54 6 18.5 6zm-13 9C3.57 15 2 13.43 2 11.5S3.57 8 5.5 8 9 9.57 9 11.5 7.43 15 5.5 15zm13 0c-1.93 0-3.5-1.57-3.5-3.5S16.57 8 18.5 8 22 9.57 22 11.5 20.43 15 18.5 15z"></path></g><g id="vpn-key"><path d="M12.65 10C11.83 7.67 9.61 6 7 6c-3.31 0-6 2.69-6 6s2.69 6 6 6c2.61 0 4.83-1.67 5.65-4H17v4h4v-4h2v-4H12.65zM7 14c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"></path></g></defs></svg></iron-iconset-svg><script>Polymer.IronFitBehavior={properties:{sizingTarget:{type:Object,value:function value(){return this}},fitInto:{type:Object,value:window},noOverlap:{type:Boolean},positionTarget:{type:Element},horizontalAlign:{type:String},verticalAlign:{type:String},dynamicAlign:{type:Boolean},horizontalOffset:{type:Number,value:0,notify:!0},verticalOffset:{type:Number,value:0,notify:!0},autoFitOnAttach:{type:Boolean,value:!1},_fitInfo:{type:Object}},get _fitWidth(){var fitWidth;if(this.fitInto===window){fitWidth=this.fitInto.innerWidth}else{fitWidth=this.fitInto.getBoundingClientRect().width}return fitWidth},get _fitHeight(){var fitHeight;if(this.fitInto===window){fitHeight=this.fitInto.innerHeight}else{fitHeight=this.fitInto.getBoundingClientRect().height}return fitHeight},get _fitLeft(){var fitLeft;if(this.fitInto===window){fitLeft=0}else{fitLeft=this.fitInto.getBoundingClientRect().left}return fitLeft},get _fitTop(){var fitTop;if(this.fitInto===window){fitTop=0}else{fitTop=this.fitInto.getBoundingClientRect().top}return fitTop},get _defaultPositionTarget(){var parent=Polymer.dom(this).parentNode;if(parent&&parent.nodeType===Node.DOCUMENT_FRAGMENT_NODE){parent=parent.host}return parent},get _localeHorizontalAlign(){if(this._isRTL){if("right"===this.horizontalAlign){return"left"}if("left"===this.horizontalAlign){return"right"}}return this.horizontalAlign},get __shouldPosition(){return(this.horizontalAlign||this.verticalAlign)&&("center"!==this.horizontalAlign||"middle"!==this.verticalAlign)},attached:function attached(){if("undefined"===typeof this._isRTL){this._isRTL="rtl"==window.getComputedStyle(this).direction}this.positionTarget=this.positionTarget||this._defaultPositionTarget;if(this.autoFitOnAttach){if("none"===window.getComputedStyle(this).display){setTimeout(function(){this.fit()}.bind(this))}else{window.ShadyDOM&&ShadyDOM.flush();this.fit()}}},detached:function detached(){if(this.__deferredFit){clearTimeout(this.__deferredFit);this.__deferredFit=null}},fit:function fit(){this.position();this.constrain();this.center()},_discoverInfo:function _discoverInfo(){if(this._fitInfo){return}var target=window.getComputedStyle(this),sizer=window.getComputedStyle(this.sizingTarget);this._fitInfo={inlineStyle:{top:this.style.top||"",left:this.style.left||"",position:this.style.position||""},sizerInlineStyle:{maxWidth:this.sizingTarget.style.maxWidth||"",maxHeight:this.sizingTarget.style.maxHeight||"",boxSizing:this.sizingTarget.style.boxSizing||""},positionedBy:{vertically:"auto"!==target.top?"top":"auto"!==target.bottom?"bottom":null,horizontally:"auto"!==target.left?"left":"auto"!==target.right?"right":null},sizedBy:{height:"none"!==sizer.maxHeight,width:"none"!==sizer.maxWidth,minWidth:parseInt(sizer.minWidth,10)||0,minHeight:parseInt(sizer.minHeight,10)||0},margin:{top:parseInt(target.marginTop,10)||0,right:parseInt(target.marginRight,10)||0,bottom:parseInt(target.marginBottom,10)||0,left:parseInt(target.marginLeft,10)||0}}},resetFit:function resetFit(){var info=this._fitInfo||{};for(var property in info.sizerInlineStyle){this.sizingTarget.style[property]=info.sizerInlineStyle[property]}for(var property in info.inlineStyle){this.style[property]=info.inlineStyle[property]}this._fitInfo=null},refit:function refit(){var scrollLeft=this.sizingTarget.scrollLeft,scrollTop=this.sizingTarget.scrollTop;this.resetFit();this.fit();this.sizingTarget.scrollLeft=scrollLeft;this.sizingTarget.scrollTop=scrollTop},position:function(){var _Mathmax=Math.max,_Mathmin=Math.min;if(!this.__shouldPosition){return}this._discoverInfo();this.style.position="fixed";this.sizingTarget.style.boxSizing="border-box";this.style.left="0px";this.style.top="0px";var rect=this.getBoundingClientRect(),positionRect=this.__getNormalizedRect(this.positionTarget),fitRect=this.__getNormalizedRect(this.fitInto),margin=this._fitInfo.margin,size={width:rect.width+margin.left+margin.right,height:rect.height+margin.top+margin.bottom},position=this.__getPosition(this._localeHorizontalAlign,this.verticalAlign,size,rect,positionRect,fitRect),left=position.left+margin.left,top=position.top+margin.top,right=_Mathmin(fitRect.right-margin.right,left+rect.width),bottom=_Mathmin(fitRect.bottom-margin.bottom,top+rect.height);left=_Mathmax(fitRect.left+margin.left,_Mathmin(left,right-this._fitInfo.sizedBy.minWidth));top=_Mathmax(fitRect.top+margin.top,_Mathmin(top,bottom-this._fitInfo.sizedBy.minHeight));this.sizingTarget.style.maxWidth=_Mathmax(right-left,this._fitInfo.sizedBy.minWidth)+"px";this.sizingTarget.style.maxHeight=_Mathmax(bottom-top,this._fitInfo.sizedBy.minHeight)+"px";this.style.left=left-rect.left+"px";this.style.top=top-rect.top+"px"},constrain:function constrain(){if(this.__shouldPosition){return}this._discoverInfo();var info=this._fitInfo;if(!info.positionedBy.vertically){this.style.position="fixed";this.style.top="0px"}if(!info.positionedBy.horizontally){this.style.position="fixed";this.style.left="0px"}this.sizingTarget.style.boxSizing="border-box";var rect=this.getBoundingClientRect();if(!info.sizedBy.height){this.__sizeDimension(rect,info.positionedBy.vertically,"top","bottom","Height")}if(!info.sizedBy.width){this.__sizeDimension(rect,info.positionedBy.horizontally,"left","right","Width")}},_sizeDimension:function _sizeDimension(rect,positionedBy,start,end,extent){this.__sizeDimension(rect,positionedBy,start,end,extent)},__sizeDimension:function __sizeDimension(rect,positionedBy,start,end,extent){var info=this._fitInfo,fitRect=this.__getNormalizedRect(this.fitInto),max="Width"===extent?fitRect.width:fitRect.height,flip=positionedBy===end,offset=flip?max-rect[end]:rect[start],margin=info.margin[flip?start:end],offsetExtent="offset"+extent,sizingOffset=this[offsetExtent]-this.sizingTarget[offsetExtent];this.sizingTarget.style["max"+extent]=max-margin-offset-sizingOffset+"px"},center:function center(){if(this.__shouldPosition){return}this._discoverInfo();var positionedBy=this._fitInfo.positionedBy;if(positionedBy.vertically&&positionedBy.horizontally){return}this.style.position="fixed";if(!positionedBy.vertically){this.style.top="0px"}if(!positionedBy.horizontally){this.style.left="0px"}var rect=this.getBoundingClientRect(),fitRect=this.__getNormalizedRect(this.fitInto);if(!positionedBy.vertically){var top=fitRect.top-rect.top+(fitRect.height-rect.height)/2;this.style.top=top+"px"}if(!positionedBy.horizontally){var left=fitRect.left-rect.left+(fitRect.width-rect.width)/2;this.style.left=left+"px"}},__getNormalizedRect:function __getNormalizedRect(target){if(target===document.documentElement||target===window){return{top:0,left:0,width:window.innerWidth,height:window.innerHeight,right:window.innerWidth,bottom:window.innerHeight}}return target.getBoundingClientRect()},__getOffscreenArea:function __getOffscreenArea(position,size,fitRect){var _Mathabs=Math.abs,_Mathmin2=Math.min,verticalCrop=_Mathmin2(0,position.top)+_Mathmin2(0,fitRect.bottom-(position.top+size.height)),horizontalCrop=_Mathmin2(0,position.left)+_Mathmin2(0,fitRect.right-(position.left+size.width));return _Mathabs(verticalCrop)*size.width+_Mathabs(horizontalCrop)*size.height},__getPosition:function __getPosition(hAlign,vAlign,size,sizeNoMargins,positionRect,fitRect){var positions=[{verticalAlign:"top",horizontalAlign:"left",top:positionRect.top+this.verticalOffset,left:positionRect.left+this.horizontalOffset},{verticalAlign:"top",horizontalAlign:"right",top:positionRect.top+this.verticalOffset,left:positionRect.right-size.width-this.horizontalOffset},{verticalAlign:"bottom",horizontalAlign:"left",top:positionRect.bottom-size.height-this.verticalOffset,left:positionRect.left+this.horizontalOffset},{verticalAlign:"bottom",horizontalAlign:"right",top:positionRect.bottom-size.height-this.verticalOffset,left:positionRect.right-size.width-this.horizontalOffset}];if(this.noOverlap){for(var i=0,l=positions.length,copy;i<l;i++){copy={};for(var key in positions[i]){copy[key]=positions[i][key]}positions.push(copy)}positions[0].top=positions[1].top+=positionRect.height;positions[2].top=positions[3].top-=positionRect.height;positions[4].left=positions[6].left+=positionRect.width;positions[5].left=positions[7].left-=positionRect.width}vAlign="auto"===vAlign?null:vAlign;hAlign="auto"===hAlign?null:hAlign;if(!hAlign||"center"===hAlign){positions.push({verticalAlign:"top",horizontalAlign:"center",top:positionRect.top+this.verticalOffset+(this.noOverlap?positionRect.height:0),left:positionRect.left-sizeNoMargins.width/2+positionRect.width/2+this.horizontalOffset});positions.push({verticalAlign:"bottom",horizontalAlign:"center",top:positionRect.bottom-size.height-this.verticalOffset-(this.noOverlap?positionRect.height:0),left:positionRect.left-sizeNoMargins.width/2+positionRect.width/2+this.horizontalOffset})}if(!vAlign||"middle"===vAlign){positions.push({verticalAlign:"middle",horizontalAlign:"left",top:positionRect.top-sizeNoMargins.height/2+positionRect.height/2+this.verticalOffset,left:positionRect.left+this.horizontalOffset+(this.noOverlap?positionRect.width:0)});positions.push({verticalAlign:"middle",horizontalAlign:"right",top:positionRect.top-sizeNoMargins.height/2+positionRect.height/2+this.verticalOffset,left:positionRect.right-size.width-this.horizontalOffset-(this.noOverlap?positionRect.width:0)})}for(var position,i=0;i<positions.length;i++){var candidate=positions[i],vAlignOk=candidate.verticalAlign===vAlign,hAlignOk=candidate.horizontalAlign===hAlign;if(!this.dynamicAlign&&!this.noOverlap&&vAlignOk&&hAlignOk){position=candidate;break}var alignOk=(!vAlign||vAlignOk)&&(!hAlign||hAlignOk);if(!this.dynamicAlign&&!alignOk){continue}candidate.offscreenArea=this.__getOffscreenArea(candidate,size,fitRect);if(0===candidate.offscreenArea&&alignOk){position=candidate;break}position=position||candidate;var diff=candidate.offscreenArea-position.offscreenArea;if(0>diff||0===diff&&(vAlignOk||hAlignOk)){position=candidate}}return position}};</script><dom-module id="iron-overlay-backdrop" assetpath="../bower_components/iron-overlay-behavior/"><template><style>:host {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: var(--iron-overlay-backdrop-background-color, #000);
        opacity: 0;
        transition: opacity 0.2s;
        pointer-events: none;
        @apply --iron-overlay-backdrop;
      }

      :host(.opened) {
        opacity: var(--iron-overlay-backdrop-opacity, 0.6);
        pointer-events: auto;
        @apply --iron-overlay-backdrop-opened;
      }</style><slot></slot></template></dom-module><script>Polymer({is:"iron-overlay-backdrop",properties:{opened:{reflectToAttribute:!0,type:Boolean,value:!1,observer:"_openedChanged"}},listeners:{transitionend:"_onTransitionend"},created:function created(){this.__openedRaf=null},attached:function attached(){this.opened&&this._openedChanged(this.opened)},prepare:function prepare(){if(this.opened&&!this.parentNode){Polymer.dom(document.body).appendChild(this)}},open:function open(){this.opened=!0},close:function close(){this.opened=!1},complete:function complete(){if(!this.opened&&this.parentNode===document.body){Polymer.dom(this.parentNode).removeChild(this)}},_onTransitionend:function _onTransitionend(event){if(event&&event.target===this){this.complete()}},_openedChanged:function _openedChanged(opened){if(opened){this.prepare()}else{var cs=window.getComputedStyle(this);if("0s"===cs.transitionDuration||0==cs.opacity){this.complete()}}if(!this.isAttached){return}if(this.__openedRaf){window.cancelAnimationFrame(this.__openedRaf);this.__openedRaf=null}this.scrollTop=this.scrollTop;this.__openedRaf=window.requestAnimationFrame(function(){this.__openedRaf=null;this.toggleClass("opened",this.opened)}.bind(this))}});</script><script>Polymer.IronOverlayManagerClass=function(){this._overlays=[];this._minimumZ=101;this._backdropElement=null;Polymer.Gestures.add(document.documentElement,"tap",function(){});document.addEventListener("tap",this._onCaptureClick.bind(this),!0);document.addEventListener("focus",this._onCaptureFocus.bind(this),!0);document.addEventListener("keydown",this._onCaptureKeyDown.bind(this),!0)};Polymer.IronOverlayManagerClass.prototype={constructor:Polymer.IronOverlayManagerClass,get backdropElement(){if(!this._backdropElement){this._backdropElement=document.createElement("iron-overlay-backdrop")}return this._backdropElement},get deepActiveElement(){var active=document.activeElement;if(!active||!1===babelHelpers.instanceof(active,Element)){active=document.body}while(active.root&&Polymer.dom(active.root).activeElement){active=Polymer.dom(active.root).activeElement}return active},_bringOverlayAtIndexToFront:function _bringOverlayAtIndexToFront(i){var overlay=this._overlays[i];if(!overlay){return}var lastI=this._overlays.length-1,currentOverlay=this._overlays[lastI];if(currentOverlay&&this._shouldBeBehindOverlay(overlay,currentOverlay)){lastI--}if(i>=lastI){return}var minimumZ=Math.max(this.currentOverlayZ(),this._minimumZ);if(this._getZ(overlay)<=minimumZ){this._applyOverlayZ(overlay,minimumZ)}while(i<lastI){this._overlays[i]=this._overlays[i+1];i++}this._overlays[lastI]=overlay},addOrRemoveOverlay:function addOrRemoveOverlay(overlay){if(overlay.opened){this.addOverlay(overlay)}else{this.removeOverlay(overlay)}},addOverlay:function addOverlay(overlay){var _Mathmax=Math.max,i=this._overlays.indexOf(overlay);if(0<=i){this._bringOverlayAtIndexToFront(i);this.trackBackdrop();return}var insertionIndex=this._overlays.length,currentOverlay=this._overlays[insertionIndex-1],minimumZ=_Mathmax(this._getZ(currentOverlay),this._minimumZ),newZ=this._getZ(overlay);if(currentOverlay&&this._shouldBeBehindOverlay(overlay,currentOverlay)){this._applyOverlayZ(currentOverlay,minimumZ);insertionIndex--;var previousOverlay=this._overlays[insertionIndex-1];minimumZ=_Mathmax(this._getZ(previousOverlay),this._minimumZ)}if(newZ<=minimumZ){this._applyOverlayZ(overlay,minimumZ)}this._overlays.splice(insertionIndex,0,overlay);this.trackBackdrop()},removeOverlay:function removeOverlay(overlay){var i=this._overlays.indexOf(overlay);if(-1===i){return}this._overlays.splice(i,1);this.trackBackdrop()},currentOverlay:function currentOverlay(){var i=this._overlays.length-1;return this._overlays[i]},currentOverlayZ:function currentOverlayZ(){return this._getZ(this.currentOverlay())},ensureMinimumZ:function ensureMinimumZ(minimumZ){this._minimumZ=Math.max(this._minimumZ,minimumZ)},focusOverlay:function focusOverlay(){var current=this.currentOverlay();if(current){current._applyFocus()}},trackBackdrop:function trackBackdrop(){var overlay=this._overlayWithBackdrop();if(!overlay&&!this._backdropElement){return}this.backdropElement.style.zIndex=this._getZ(overlay)-1;this.backdropElement.opened=!!overlay;this.backdropElement.prepare()},getBackdrops:function getBackdrops(){for(var backdrops=[],i=0;i<this._overlays.length;i++){if(this._overlays[i].withBackdrop){backdrops.push(this._overlays[i])}}return backdrops},backdropZ:function backdropZ(){return this._getZ(this._overlayWithBackdrop())-1},_overlayWithBackdrop:function _overlayWithBackdrop(){for(var i=this._overlays.length-1;0<=i;i--){if(this._overlays[i].withBackdrop){return this._overlays[i]}}},_getZ:function _getZ(overlay){var z=this._minimumZ;if(overlay){var z1=+(overlay.style.zIndex||window.getComputedStyle(overlay).zIndex);if(z1===z1){z=z1}}return z},_setZ:function _setZ(element,z){element.style.zIndex=z},_applyOverlayZ:function _applyOverlayZ(overlay,aboveZ){this._setZ(overlay,aboveZ+2)},_overlayInPath:function _overlayInPath(path){path=path||[];for(var i=0;i<path.length;i++){if(path[i]._manager===this){return path[i]}}},_onCaptureClick:function _onCaptureClick(event){var i=this._overlays.length-1;if(-1===i)return;var path=Polymer.dom(event).path,overlay;while((overlay=this._overlays[i])&&this._overlayInPath(path)!==overlay){overlay._onCaptureClick(event);if(overlay.allowClickThrough){i--}else{break}}},_onCaptureFocus:function _onCaptureFocus(event){var overlay=this.currentOverlay();if(overlay){overlay._onCaptureFocus(event)}},_onCaptureKeyDown:function _onCaptureKeyDown(event){var overlay=this.currentOverlay();if(overlay){if(Polymer.IronA11yKeysBehavior.keyboardEventMatchesKeys(event,"esc")){overlay._onCaptureEsc(event)}else if(Polymer.IronA11yKeysBehavior.keyboardEventMatchesKeys(event,"tab")){overlay._onCaptureTab(event)}}},_shouldBeBehindOverlay:function _shouldBeBehindOverlay(overlay1,overlay2){return!overlay1.alwaysOnTop&&overlay2.alwaysOnTop}};Polymer.IronOverlayManager=new Polymer.IronOverlayManagerClass;</script><script>(function(){"use strict";var lastTouchPosition={pageX:0,pageY:0},lastRootTarget=null,lastScrollableNodes=[],scrollEvents=["wheel","mousewheel","DOMMouseScroll","touchstart","touchmove"];Polymer.IronScrollManager={get currentLockingElement(){return this._lockingElements[this._lockingElements.length-1]},elementIsScrollLocked:function elementIsScrollLocked(element){var currentLockingElement=this.currentLockingElement;if(currentLockingElement===void 0)return!1;var scrollLocked;if(this._hasCachedLockedElement(element)){return!0}if(this._hasCachedUnlockedElement(element)){return!1}scrollLocked=!!currentLockingElement&&currentLockingElement!==element&&!this._composedTreeContains(currentLockingElement,element);if(scrollLocked){this._lockedElementCache.push(element)}else{this._unlockedElementCache.push(element)}return scrollLocked},pushScrollLock:function pushScrollLock(element){if(0<=this._lockingElements.indexOf(element)){return}if(0===this._lockingElements.length){this._lockScrollInteractions()}this._lockingElements.push(element);this._lockedElementCache=[];this._unlockedElementCache=[]},removeScrollLock:function removeScrollLock(element){var index=this._lockingElements.indexOf(element);if(-1===index){return}this._lockingElements.splice(index,1);this._lockedElementCache=[];this._unlockedElementCache=[];if(0===this._lockingElements.length){this._unlockScrollInteractions()}},_lockingElements:[],_lockedElementCache:null,_unlockedElementCache:null,_hasCachedLockedElement:function _hasCachedLockedElement(element){return-1<this._lockedElementCache.indexOf(element)},_hasCachedUnlockedElement:function _hasCachedUnlockedElement(element){return-1<this._unlockedElementCache.indexOf(element)},_composedTreeContains:function _composedTreeContains(element,child){var contentElements,distributedNodes,contentIndex,nodeIndex;if(element.contains(child)){return!0}contentElements=Polymer.dom(element).querySelectorAll("content,slot");for(contentIndex=0;contentIndex<contentElements.length;++contentIndex){distributedNodes=Polymer.dom(contentElements[contentIndex]).getDistributedNodes();for(nodeIndex=0;nodeIndex<distributedNodes.length;++nodeIndex){if(distributedNodes[nodeIndex].nodeType!==Node.ELEMENT_NODE)continue;if(this._composedTreeContains(distributedNodes[nodeIndex],child)){return!0}}}return!1},_scrollInteractionHandler:function _scrollInteractionHandler(event){if(event.cancelable&&this._shouldPreventScrolling(event)){event.preventDefault()}if(event.targetTouches){var touch=event.targetTouches[0];lastTouchPosition.pageX=touch.pageX;lastTouchPosition.pageY=touch.pageY}},_boundScrollHandler:void 0,_lockScrollInteractions:function _lockScrollInteractions(){this._boundScrollHandler=this._boundScrollHandler||this._scrollInteractionHandler.bind(this);for(var i=0,l=scrollEvents.length;i<l;i++){document.addEventListener(scrollEvents[i],this._boundScrollHandler,{capture:!0,passive:!1})}},_unlockScrollInteractions:function _unlockScrollInteractions(){for(var i=0,l=scrollEvents.length;i<l;i++){document.removeEventListener(scrollEvents[i],this._boundScrollHandler,{capture:!0,passive:!1})}},_shouldPreventScrolling:function _shouldPreventScrolling(event){var target=Polymer.dom(event).rootTarget;if("touchmove"!==event.type&&lastRootTarget!==target){lastRootTarget=target;lastScrollableNodes=this._getScrollableNodes(Polymer.dom(event).path)}if(!lastScrollableNodes.length){return!0}if("touchstart"===event.type){return!1}var info=this._getScrollInfo(event);return!this._getScrollingNode(lastScrollableNodes,info.deltaX,info.deltaY)},_getScrollableNodes:function _getScrollableNodes(nodes){for(var scrollables=[],lockingIndex=nodes.indexOf(this.currentLockingElement),i=0;i<=lockingIndex;i++){if(nodes[i].nodeType!==Node.ELEMENT_NODE){continue}var node=nodes[i],style=node.style;if("scroll"!==style.overflow&&"auto"!==style.overflow){style=window.getComputedStyle(node)}if("scroll"===style.overflow||"auto"===style.overflow){scrollables.push(node)}}return scrollables},_getScrollingNode:function _getScrollingNode(nodes,deltaX,deltaY){var _Mathabs=Math.abs;if(!deltaX&&!deltaY){return}for(var verticalScroll=_Mathabs(deltaY)>=_Mathabs(deltaX),i=0;i<nodes.length;i++){var node=nodes[i],canScroll=!1;if(verticalScroll){canScroll=0>deltaY?0<node.scrollTop:node.scrollTop<node.scrollHeight-node.clientHeight}else{canScroll=0>deltaX?0<node.scrollLeft:node.scrollLeft<node.scrollWidth-node.clientWidth}if(canScroll){return node}}},_getScrollInfo:function _getScrollInfo(event){var info={deltaX:event.deltaX,deltaY:event.deltaY};if("deltaX"in event){}else if("wheelDeltaX"in event&&"wheelDeltaY"in event){info.deltaX=-event.wheelDeltaX;info.deltaY=-event.wheelDeltaY}else if("wheelDelta"in event){info.deltaX=0;info.deltaY=-event.wheelDelta}else if("axis"in event){info.deltaX=1===event.axis?event.detail:0;info.deltaY=2===event.axis?event.detail:0}else if(event.targetTouches){var touch=event.targetTouches[0];info.deltaX=lastTouchPosition.pageX-touch.pageX;info.deltaY=lastTouchPosition.pageY-touch.pageY}return info}}})();</script><script>(function(){"use strict";var p=Element.prototype,matches=p.matches||p.matchesSelector||p.mozMatchesSelector||p.msMatchesSelector||p.oMatchesSelector||p.webkitMatchesSelector;Polymer.IronFocusablesHelper={getTabbableNodes:function getTabbableNodes(node){var result=[],needsSortByTabIndex=this._collectTabbableNodes(node,result);if(needsSortByTabIndex){return this._sortByTabIndex(result)}return result},isFocusable:function isFocusable(element){if(matches.call(element,"input, select, textarea, button, object")){return matches.call(element,":not([disabled])")}return matches.call(element,"a[href], area[href], iframe, [tabindex], [contentEditable]")},isTabbable:function isTabbable(element){return this.isFocusable(element)&&matches.call(element,":not([tabindex=\"-1\"])")&&this._isVisible(element)},_normalizedTabIndex:function _normalizedTabIndex(element){if(this.isFocusable(element)){var tabIndex=element.getAttribute("tabindex")||0;return+tabIndex}return-1},_collectTabbableNodes:function _collectTabbableNodes(node,result){if(node.nodeType!==Node.ELEMENT_NODE||!this._isVisible(node)){return!1}var element=node,tabIndex=this._normalizedTabIndex(element),needsSort=0<tabIndex;if(0<=tabIndex){result.push(element)}var children;if("content"===element.localName||"slot"===element.localName){children=Polymer.dom(element).getDistributedNodes()}else{children=Polymer.dom(element.root||element).children}for(var i=0;i<children.length;i++){needsSort=this._collectTabbableNodes(children[i],result)||needsSort}return needsSort},_isVisible:function _isVisible(element){var style=element.style;if("hidden"!==style.visibility&&"none"!==style.display){style=window.getComputedStyle(element);return"hidden"!==style.visibility&&"none"!==style.display}return!1},_sortByTabIndex:function _sortByTabIndex(tabbables){var len=tabbables.length;if(2>len){return tabbables}var pivot=Math.ceil(len/2),left=this._sortByTabIndex(tabbables.slice(0,pivot)),right=this._sortByTabIndex(tabbables.slice(pivot));return this._mergeSortByTabIndex(left,right)},_mergeSortByTabIndex:function _mergeSortByTabIndex(left,right){var result=[];while(0<left.length&&0<right.length){if(this._hasLowerTabOrder(left[0],right[0])){result.push(right.shift())}else{result.push(left.shift())}}return result.concat(left,right)},_hasLowerTabOrder:function _hasLowerTabOrder(a,b){var _Mathmax=Math.max,ati=_Mathmax(a.tabIndex,0),bti=_Mathmax(b.tabIndex,0);return 0===ati||0===bti?bti>ati:ati>bti}}})();</script><script>(function(){"use strict";Polymer.IronOverlayBehaviorImpl={properties:{opened:{observer:"_openedChanged",type:Boolean,value:!1,notify:!0},canceled:{observer:"_canceledChanged",readOnly:!0,type:Boolean,value:!1},withBackdrop:{observer:"_withBackdropChanged",type:Boolean},noAutoFocus:{type:Boolean,value:!1},noCancelOnEscKey:{type:Boolean,value:!1},noCancelOnOutsideClick:{type:Boolean,value:!1},closingReason:{type:Object},restoreFocusOnClose:{type:Boolean,value:!1},allowClickThrough:{type:Boolean},alwaysOnTop:{type:Boolean},scrollAction:{type:String},_manager:{type:Object,value:Polymer.IronOverlayManager},_focusedChild:{type:Object}},listeners:{"iron-resize":"_onIronResize"},observers:["__updateScrollObservers(isAttached, opened, scrollAction)"],get backdropElement(){return this._manager.backdropElement},get _focusNode(){return this._focusedChild||Polymer.dom(this).querySelector("[autofocus]")||this},get _focusableNodes(){return Polymer.IronFocusablesHelper.getTabbableNodes(this)},ready:function ready(){this.__isAnimating=!1;this.__shouldRemoveTabIndex=!1;this.__firstFocusableNode=this.__lastFocusableNode=null;this.__rafs={};this.__restoreFocusNode=null;this.__scrollTop=this.__scrollLeft=null;this.__onCaptureScroll=this.__onCaptureScroll.bind(this);this.__rootNodes=null;this._ensureSetup()},attached:function attached(){if(this.opened){this._openedChanged(this.opened)}this._observer=Polymer.dom(this).observeNodes(this._onNodesChange)},detached:function detached(){Polymer.dom(this).unobserveNodes(this._observer);this._observer=null;for(var cb in this.__rafs){if(null!==this.__rafs[cb]){cancelAnimationFrame(this.__rafs[cb])}}this.__rafs={};this._manager.removeOverlay(this);if(this.__isAnimating){if(this.opened){this._finishRenderOpened()}else{this._applyFocus();this._finishRenderClosed()}}},toggle:function toggle(){this._setCanceled(!1);this.opened=!this.opened},open:function open(){this._setCanceled(!1);this.opened=!0},close:function close(){this._setCanceled(!1);this.opened=!1},cancel:function cancel(event){var cancelEvent=this.fire("iron-overlay-canceled",event,{cancelable:!0});if(cancelEvent.defaultPrevented){return}this._setCanceled(!0);this.opened=!1},invalidateTabbables:function invalidateTabbables(){this.__firstFocusableNode=this.__lastFocusableNode=null},_ensureSetup:function _ensureSetup(){if(this._overlaySetup){return}this._overlaySetup=!0;this.style.outline="none";this.style.display="none"},_openedChanged:function _openedChanged(opened){if(opened){this.removeAttribute("aria-hidden")}else{this.setAttribute("aria-hidden","true")}if(!this.isAttached){return}this.__isAnimating=!0;this.__deraf("__openedChanged",this.__openedChanged)},_canceledChanged:function _canceledChanged(){this.closingReason=this.closingReason||{};this.closingReason.canceled=this.canceled},_withBackdropChanged:function _withBackdropChanged(){if(this.withBackdrop&&!this.hasAttribute("tabindex")){this.setAttribute("tabindex","-1");this.__shouldRemoveTabIndex=!0}else if(this.__shouldRemoveTabIndex){this.removeAttribute("tabindex");this.__shouldRemoveTabIndex=!1}if(this.opened&&this.isAttached){this._manager.trackBackdrop()}},_prepareRenderOpened:function _prepareRenderOpened(){this.__restoreFocusNode=this._manager.deepActiveElement;this._preparePositioning();this.refit();this._finishPositioning();if(this.noAutoFocus&&document.activeElement===this._focusNode){this._focusNode.blur();this.__restoreFocusNode.focus()}},_renderOpened:function _renderOpened(){this._finishRenderOpened()},_renderClosed:function _renderClosed(){this._finishRenderClosed()},_finishRenderOpened:function _finishRenderOpened(){this.notifyResize();this.__isAnimating=!1;this.fire("iron-overlay-opened")},_finishRenderClosed:function _finishRenderClosed(){this.style.display="none";this.style.zIndex="";this.notifyResize();this.__isAnimating=!1;this.fire("iron-overlay-closed",this.closingReason)},_preparePositioning:function _preparePositioning(){this.style.transition=this.style.webkitTransition="none";this.style.transform=this.style.webkitTransform="none";this.style.display=""},_finishPositioning:function _finishPositioning(){this.style.display="none";this.scrollTop=this.scrollTop;this.style.transition=this.style.webkitTransition="";this.style.transform=this.style.webkitTransform="";this.style.display="";this.scrollTop=this.scrollTop},_applyFocus:function _applyFocus(){if(this.opened){if(!this.noAutoFocus){this._focusNode.focus()}}else{if(this.restoreFocusOnClose&&this.__restoreFocusNode){var activeElement=this._manager.deepActiveElement;if(activeElement===document.body||Polymer.dom(this).deepContains(activeElement)){this.__restoreFocusNode.focus()}}this.__restoreFocusNode=null;this._focusNode.blur();this._focusedChild=null}},_onCaptureClick:function _onCaptureClick(event){if(!this.noCancelOnOutsideClick){this.cancel(event)}},_onCaptureFocus:function _onCaptureFocus(event){if(!this.withBackdrop){return}var path=Polymer.dom(event).path;if(-1===path.indexOf(this)){event.stopPropagation();this._applyFocus()}else{this._focusedChild=path[0]}},_onCaptureEsc:function _onCaptureEsc(event){if(!this.noCancelOnEscKey){this.cancel(event)}},_onCaptureTab:function _onCaptureTab(event){if(!this.withBackdrop){return}this.__ensureFirstLastFocusables();var shift=event.shiftKey,nodeToCheck=shift?this.__firstFocusableNode:this.__lastFocusableNode,nodeToSet=shift?this.__lastFocusableNode:this.__firstFocusableNode,shouldWrap=!1;if(nodeToCheck===nodeToSet){shouldWrap=!0}else{var focusedNode=this._manager.deepActiveElement;shouldWrap=focusedNode===nodeToCheck||focusedNode===this}if(shouldWrap){event.preventDefault();this._focusedChild=nodeToSet;this._applyFocus()}},_onIronResize:function _onIronResize(){if(this.opened&&!this.__isAnimating){this.__deraf("refit",this.refit)}},_onNodesChange:function _onNodesChange(){if(this.opened&&!this.__isAnimating){this.invalidateTabbables();this.notifyResize()}},__ensureFirstLastFocusables:function __ensureFirstLastFocusables(){if(!this.__firstFocusableNode||!this.__lastFocusableNode){var focusableNodes=this._focusableNodes;this.__firstFocusableNode=focusableNodes[0];this.__lastFocusableNode=focusableNodes[focusableNodes.length-1]}},__openedChanged:function __openedChanged(){if(this.opened){this._prepareRenderOpened();this._manager.addOverlay(this);this._applyFocus();this._renderOpened()}else{this._manager.removeOverlay(this);this._applyFocus();this._renderClosed()}},__deraf:function __deraf(jobname,callback){var rafs=this.__rafs;if(null!==rafs[jobname]){cancelAnimationFrame(rafs[jobname])}rafs[jobname]=requestAnimationFrame(function(){rafs[jobname]=null;callback.call(this)}.bind(this))},__updateScrollObservers:function __updateScrollObservers(isAttached,opened,scrollAction){if(!isAttached||!opened||!this.__isValidScrollAction(scrollAction)){Polymer.IronScrollManager.removeScrollLock(this);this.__removeScrollListeners()}else{if("lock"===scrollAction){this.__saveScrollPosition();Polymer.IronScrollManager.pushScrollLock(this)}this.__addScrollListeners()}},__addScrollListeners:function __addScrollListeners(){if(!this.__rootNodes){this.__rootNodes=[];if(Polymer.Settings.useShadow){var node=this;while(node){if(node.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&node.host){this.__rootNodes.push(node)}node=node.host||node.assignedSlot||node.parentNode}}this.__rootNodes.push(document)}this.__rootNodes.forEach(function(el){el.addEventListener("scroll",this.__onCaptureScroll,{capture:!0,passive:!0})},this)},__removeScrollListeners:function __removeScrollListeners(){if(this.__rootNodes){this.__rootNodes.forEach(function(el){el.removeEventListener("scroll",this.__onCaptureScroll,{capture:!0,passive:!0})},this)}if(!this.isAttached){this.__rootNodes=null}},__isValidScrollAction:function __isValidScrollAction(scrollAction){return"lock"===scrollAction||"refit"===scrollAction||"cancel"===scrollAction},__onCaptureScroll:function __onCaptureScroll(event){if(this.__isAnimating){return}if(0<=Polymer.dom(event).path.indexOf(this)){return}switch(this.scrollAction){case"lock":this.__restoreScrollPosition();break;case"refit":this.__deraf("refit",this.refit);break;case"cancel":this.cancel(event);break;}},__saveScrollPosition:function __saveScrollPosition(){var _Mathmax=Math.max;if(document.scrollingElement){this.__scrollTop=document.scrollingElement.scrollTop;this.__scrollLeft=document.scrollingElement.scrollLeft}else{this.__scrollTop=_Mathmax(document.documentElement.scrollTop,document.body.scrollTop);this.__scrollLeft=_Mathmax(document.documentElement.scrollLeft,document.body.scrollLeft)}},__restoreScrollPosition:function __restoreScrollPosition(){if(document.scrollingElement){document.scrollingElement.scrollTop=this.__scrollTop;document.scrollingElement.scrollLeft=this.__scrollLeft}else{document.documentElement.scrollTop=document.body.scrollTop=this.__scrollTop;document.documentElement.scrollLeft=document.body.scrollLeft=this.__scrollLeft}}};Polymer.IronOverlayBehavior=[Polymer.IronFitBehavior,Polymer.IronResizableBehavior,Polymer.IronOverlayBehaviorImpl]})();</script><script>Polymer.NeonAnimatableBehavior={properties:{animationConfig:{type:Object},entryAnimation:{observer:"_entryAnimationChanged",type:String},exitAnimation:{observer:"_exitAnimationChanged",type:String}},_entryAnimationChanged:function _entryAnimationChanged(){this.animationConfig=this.animationConfig||{};this.animationConfig.entry=[{name:this.entryAnimation,node:this}]},_exitAnimationChanged:function _exitAnimationChanged(){this.animationConfig=this.animationConfig||{};this.animationConfig.exit=[{name:this.exitAnimation,node:this}]},_copyProperties:function _copyProperties(config1,config2){for(var property in config2){config1[property]=config2[property]}},_cloneConfig:function _cloneConfig(config){var clone={isClone:!0};this._copyProperties(clone,config);return clone},_getAnimationConfigRecursive:function _getAnimationConfigRecursive(type,map,allConfigs){if(!this.animationConfig){return}if(this.animationConfig.value&&"function"===typeof this.animationConfig.value){this._warn(this._logf("playAnimation","Please put 'animationConfig' inside of your components 'properties' object instead of outside of it."));return}var thisConfig;if(type){thisConfig=this.animationConfig[type]}else{thisConfig=this.animationConfig}if(!Array.isArray(thisConfig)){thisConfig=[thisConfig]}if(thisConfig){for(var config,index=0;config=thisConfig[index];index++){if(config.animatable){config.animatable._getAnimationConfigRecursive(config.type||type,map,allConfigs)}else{if(config.id){var cachedConfig=map[config.id];if(cachedConfig){if(!cachedConfig.isClone){map[config.id]=this._cloneConfig(cachedConfig);cachedConfig=map[config.id]}this._copyProperties(cachedConfig,config)}else{map[config.id]=config}}else{allConfigs.push(config)}}}}},getAnimationConfig:function getAnimationConfig(type){var map={},allConfigs=[];this._getAnimationConfigRecursive(type,map,allConfigs);for(var key in map){allConfigs.push(map[key])}return allConfigs}};</script><script>Polymer.NeonAnimationRunnerBehaviorImpl={_configureAnimations:function _configureAnimations(configs){var results=[],resultsToPlay=[];if(0<configs.length){for(var config,index=0,neonAnimation;config=configs[index];index++){neonAnimation=document.createElement(config.name);if(neonAnimation.isNeonAnimation){var result=null;if(!neonAnimation.configure){neonAnimation.configure=function(){return null}}result=neonAnimation.configure(config);resultsToPlay.push({result:result,config:config})}else{console.warn(this.is+":",config.name,"not found!")}}}for(var i=0;i<resultsToPlay.length;i++){var result=resultsToPlay[i].result,config=resultsToPlay[i].config;try{if("function"!=typeof result.cancel){result=document.timeline.play(result)}}catch(e){result=null;console.warn("Couldnt play","(",config.name,").",e)}if(result){results.push({neonAnimation:neonAnimation,config:config,animation:result})}}return results},_shouldComplete:function _shouldComplete(activeEntries){for(var finished=!0,i=0;i<activeEntries.length;i++){if("finished"!=activeEntries[i].animation.playState){finished=!1;break}}return finished},_complete:function _complete(activeEntries){for(var i=0;i<activeEntries.length;i++){activeEntries[i].neonAnimation.complete(activeEntries[i].config)}for(var i=0;i<activeEntries.length;i++){activeEntries[i].animation.cancel()}},playAnimation:function playAnimation(type,cookie){var configs=this.getAnimationConfig(type);if(!configs){return}this._active=this._active||{};if(this._active[type]){this._complete(this._active[type]);delete this._active[type]}var activeEntries=this._configureAnimations(configs);if(0==activeEntries.length){this.fire("neon-animation-finish",cookie,{bubbles:!1});return}this._active[type]=activeEntries;for(var i=0;i<activeEntries.length;i++){activeEntries[i].animation.onfinish=function(){if(this._shouldComplete(activeEntries)){this._complete(activeEntries);delete this._active[type];this.fire("neon-animation-finish",cookie,{bubbles:!1})}}.bind(this)}},cancelAnimation:function cancelAnimation(){for(var k in this._active){var entries=this._active[k];for(var j in entries){entries[j].animation.cancel()}}this._active={}}};Polymer.NeonAnimationRunnerBehavior=[Polymer.NeonAnimatableBehavior,Polymer.NeonAnimationRunnerBehaviorImpl];</script><script>(function(){"use strict";Polymer.IronDropdownScrollManager=Polymer.IronScrollManager})();</script><dom-module id="iron-dropdown" assetpath="../bower_components/iron-dropdown/"><template><style>:host {
        position: fixed;
      }

      #contentWrapper ::slotted(*) {
        overflow: auto;
      }

      #contentWrapper.animating ::slotted(*) {
        overflow: hidden;
        pointer-events: none;
      }</style><div id="contentWrapper"><slot id="content" name="dropdown-content"></slot></div></template><script>(function(){"use strict";Polymer({is:"iron-dropdown",behaviors:[Polymer.IronControlState,Polymer.IronA11yKeysBehavior,Polymer.IronOverlayBehavior,Polymer.NeonAnimationRunnerBehavior],properties:{horizontalAlign:{type:String,value:"left",reflectToAttribute:!0},verticalAlign:{type:String,value:"top",reflectToAttribute:!0},openAnimationConfig:{type:Object},closeAnimationConfig:{type:Object},focusTarget:{type:Object},noAnimations:{type:Boolean,value:!1},allowOutsideScroll:{type:Boolean,value:!1,observer:"_allowOutsideScrollChanged"}},listeners:{"neon-animation-finish":"_onNeonAnimationFinish"},observers:["_updateOverlayPosition(positionTarget, verticalAlign, horizontalAlign, verticalOffset, horizontalOffset)"],get containedElement(){for(var nodes=Polymer.dom(this.$.content).getDistributedNodes(),i=0,l=nodes.length;i<l;i++){if(nodes[i].nodeType===Node.ELEMENT_NODE){return nodes[i]}}},ready:function ready(){if(!this.scrollAction){this.scrollAction=this.allowOutsideScroll?"refit":"lock"}this._readied=!0},attached:function attached(){if(!this.sizingTarget||this.sizingTarget===this){this.sizingTarget=this.containedElement||this}},detached:function detached(){this.cancelAnimation()},_openedChanged:function _openedChanged(){if(this.opened&&this.disabled){this.cancel()}else{this.cancelAnimation();this._updateAnimationConfig();Polymer.IronOverlayBehaviorImpl._openedChanged.apply(this,arguments)}},_renderOpened:function _renderOpened(){if(!this.noAnimations&&this.animationConfig.open){this.$.contentWrapper.classList.add("animating");this.playAnimation("open")}else{Polymer.IronOverlayBehaviorImpl._renderOpened.apply(this,arguments)}},_renderClosed:function _renderClosed(){if(!this.noAnimations&&this.animationConfig.close){this.$.contentWrapper.classList.add("animating");this.playAnimation("close")}else{Polymer.IronOverlayBehaviorImpl._renderClosed.apply(this,arguments)}},_onNeonAnimationFinish:function _onNeonAnimationFinish(){this.$.contentWrapper.classList.remove("animating");if(this.opened){this._finishRenderOpened()}else{this._finishRenderClosed()}},_updateAnimationConfig:function _updateAnimationConfig(){for(var animationNode=this.containedElement,animations=[].concat(this.openAnimationConfig||[]).concat(this.closeAnimationConfig||[]),i=0;i<animations.length;i++){animations[i].node=animationNode}this.animationConfig={open:this.openAnimationConfig,close:this.closeAnimationConfig}},_updateOverlayPosition:function _updateOverlayPosition(){if(this.isAttached){this.notifyResize()}},_allowOutsideScrollChanged:function _allowOutsideScrollChanged(allowOutsideScroll){if(!this._readied){return}if(!allowOutsideScroll){this.scrollAction="lock"}else if(!this.scrollAction||"lock"===this.scrollAction){this.scrollAction="refit"}},_applyFocus:function _applyFocus(){var focusTarget=this.focusTarget||this.containedElement;if(focusTarget&&this.opened&&!this.noAutoFocus){focusTarget.focus()}else{Polymer.IronOverlayBehaviorImpl._applyFocus.apply(this,arguments)}}})})();</script></dom-module><script>Polymer.NeonAnimationBehavior={properties:{animationTiming:{type:Object,value:function value(){return{duration:500,easing:"cubic-bezier(0.4, 0, 0.2, 1)",fill:"both"}}}},isNeonAnimation:!0,created:function created(){if(!document.body.animate){console.warn("No web animations detected. This element will not"+" function without a web animations polyfill.")}},timingFromConfig:function timingFromConfig(config){if(config.timing){for(var property in config.timing){this.animationTiming[property]=config.timing[property]}}return this.animationTiming},setPrefixedProperty:function setPrefixedProperty(node,property,value){for(var map={transform:["webkitTransform"],transformOrigin:["mozTransformOrigin","webkitTransformOrigin"]},prefixes=map[property],prefix,index=0;prefix=prefixes[index];index++){node.style[prefix]=value}node.style[property]=value},complete:function complete(){}};</script><script>Polymer({is:"fade-in-animation",behaviors:[Polymer.NeonAnimationBehavior],configure:function configure(config){var node=config.node;this._effect=new KeyframeEffect(node,[{opacity:"0"},{opacity:"1"}],this.timingFromConfig(config));return this._effect}});</script><script>Polymer({is:"fade-out-animation",behaviors:[Polymer.NeonAnimationBehavior],configure:function configure(config){var node=config.node;this._effect=new KeyframeEffect(node,[{opacity:"1"},{opacity:"0"}],this.timingFromConfig(config));return this._effect}});</script><script>Polymer({is:"paper-menu-grow-height-animation",behaviors:[Polymer.NeonAnimationBehavior],configure:function configure(config){var node=config.node,rect=node.getBoundingClientRect(),height=rect.height;this._effect=new KeyframeEffect(node,[{height:height/2+"px"},{height:height+"px"}],this.timingFromConfig(config));return this._effect}});Polymer({is:"paper-menu-grow-width-animation",behaviors:[Polymer.NeonAnimationBehavior],configure:function configure(config){var node=config.node,rect=node.getBoundingClientRect(),width=rect.width;this._effect=new KeyframeEffect(node,[{width:width/2+"px"},{width:width+"px"}],this.timingFromConfig(config));return this._effect}});Polymer({is:"paper-menu-shrink-width-animation",behaviors:[Polymer.NeonAnimationBehavior],configure:function configure(config){var node=config.node,rect=node.getBoundingClientRect(),width=rect.width;this._effect=new KeyframeEffect(node,[{width:width+"px"},{width:width-width/20+"px"}],this.timingFromConfig(config));return this._effect}});Polymer({is:"paper-menu-shrink-height-animation",behaviors:[Polymer.NeonAnimationBehavior],configure:function configure(config){var node=config.node,rect=node.getBoundingClientRect(),height=rect.height;this.setPrefixedProperty(node,"transformOrigin","0 0");this._effect=new KeyframeEffect(node,[{height:height+"px",transform:"translateY(0)"},{height:height/2+"px",transform:"translateY(-20px)"}],this.timingFromConfig(config));return this._effect}});</script><dom-module id="paper-menu-button" assetpath="../bower_components/paper-menu-button/"><template><style>:host {
        display: inline-block;
        position: relative;
        padding: 8px;
        outline: none;

        @apply --paper-menu-button;
      }

      :host([disabled]) {
        cursor: auto;
        color: var(--disabled-text-color);

        @apply --paper-menu-button-disabled;
      }

      iron-dropdown {
        @apply --paper-menu-button-dropdown;
      }

      .dropdown-content {
        @apply --shadow-elevation-2dp;

        position: relative;
        border-radius: 2px;
        background-color: var(--paper-menu-button-dropdown-background, var(--primary-background-color));

        @apply --paper-menu-button-content;
      }

      :host([vertical-align="top"]) .dropdown-content {
        margin-bottom: 20px;
        margin-top: -10px;
        top: 10px;
      }

      :host([vertical-align="bottom"]) .dropdown-content {
        bottom: 10px;
        margin-bottom: -10px;
        margin-top: 20px;
      }

      #trigger {
        cursor: pointer;
      }</style><div id="trigger" on-tap="toggle"><slot name="dropdown-trigger"></slot></div><iron-dropdown id="dropdown" opened="{{opened}}" horizontal-align="[[horizontalAlign]]" vertical-align="[[verticalAlign]]" dynamic-align="[[dynamicAlign]]" horizontal-offset="[[horizontalOffset]]" vertical-offset="[[verticalOffset]]" no-overlap="[[noOverlap]]" open-animation-config="[[openAnimationConfig]]" close-animation-config="[[closeAnimationConfig]]" no-animations="[[noAnimations]]" focus-target="[[_dropdownContent]]" allow-outside-scroll="[[allowOutsideScroll]]" restore-focus-on-close="[[restoreFocusOnClose]]" on-iron-overlay-canceled="__onIronOverlayCanceled"><div slot="dropdown-content" class="dropdown-content"><slot id="content" name="dropdown-content"></slot></div></iron-dropdown></template><script>(function(){"use strict";var config={ANIMATION_CUBIC_BEZIER:"cubic-bezier(.3,.95,.5,1)",MAX_ANIMATION_TIME_MS:400};Polymer.PaperMenuButton=Polymer({is:"paper-menu-button",behaviors:[Polymer.IronA11yKeysBehavior,Polymer.IronControlState],properties:{opened:{type:Boolean,value:!1,notify:!0,observer:"_openedChanged"},horizontalAlign:{type:String,value:"left",reflectToAttribute:!0},verticalAlign:{type:String,value:"top",reflectToAttribute:!0},dynamicAlign:{type:Boolean},horizontalOffset:{type:Number,value:0,notify:!0},verticalOffset:{type:Number,value:0,notify:!0},noOverlap:{type:Boolean},noAnimations:{type:Boolean,value:!1},ignoreSelect:{type:Boolean,value:!1},closeOnActivate:{type:Boolean,value:!1},openAnimationConfig:{type:Object,value:function value(){return[{name:"fade-in-animation",timing:{delay:100,duration:200}},{name:"paper-menu-grow-width-animation",timing:{delay:100,duration:150,easing:config.ANIMATION_CUBIC_BEZIER}},{name:"paper-menu-grow-height-animation",timing:{delay:100,duration:275,easing:config.ANIMATION_CUBIC_BEZIER}}]}},closeAnimationConfig:{type:Object,value:function value(){return[{name:"fade-out-animation",timing:{duration:150}},{name:"paper-menu-shrink-width-animation",timing:{delay:100,duration:50,easing:config.ANIMATION_CUBIC_BEZIER}},{name:"paper-menu-shrink-height-animation",timing:{duration:200,easing:"ease-in"}}]}},allowOutsideScroll:{type:Boolean,value:!1},restoreFocusOnClose:{type:Boolean,value:!0},_dropdownContent:{type:Object}},hostAttributes:{role:"group","aria-haspopup":"true"},listeners:{"iron-activate":"_onIronActivate","iron-select":"_onIronSelect"},get contentElement(){for(var nodes=Polymer.dom(this.$.content).getDistributedNodes(),i=0,l=nodes.length;i<l;i++){if(nodes[i].nodeType===Node.ELEMENT_NODE){return nodes[i]}}},toggle:function toggle(){if(this.opened){this.close()}else{this.open()}},open:function open(){if(this.disabled){return}this.$.dropdown.open()},close:function close(){this.$.dropdown.close()},_onIronSelect:function _onIronSelect(){if(!this.ignoreSelect){this.close()}},_onIronActivate:function _onIronActivate(){if(this.closeOnActivate){this.close()}},_openedChanged:function _openedChanged(opened,oldOpened){if(opened){this._dropdownContent=this.contentElement;this.fire("paper-dropdown-open")}else if(null!=oldOpened){this.fire("paper-dropdown-close")}},_disabledChanged:function _disabledChanged(disabled){Polymer.IronControlState._disabledChanged.apply(this,arguments);if(disabled&&this.opened){this.close()}},__onIronOverlayCanceled:function __onIronOverlayCanceled(event){var uiEvent=event.detail,trigger=this.$.trigger,path=Polymer.dom(uiEvent).path;if(-1<path.indexOf(trigger)){event.preventDefault()}}});Object.keys(config).forEach(function(key){Polymer.PaperMenuButton[key]=config[key]})})();</script></dom-module><iron-iconset-svg name="paper-dropdown-menu" size="24"><svg><defs><g id="arrow-drop-down"><path d="M7 10l5 5 5-5z"></path></g></defs></svg></iron-iconset-svg><dom-module id="paper-dropdown-menu-shared-styles" assetpath="../bower_components/paper-dropdown-menu/"><template><style>:host {
        display: inline-block;
        position: relative;
        text-align: left;

        /* NOTE(cdata): Both values are needed, since some phones require the
         * value to be `transparent`.
         */
        -webkit-tap-highlight-color: rgba(0,0,0,0);
        -webkit-tap-highlight-color: transparent;

        --paper-input-container-input: {
          overflow: hidden;
          white-space: nowrap;
          text-overflow: ellipsis;
          max-width: 100%;
          box-sizing: border-box;
          cursor: pointer;
        };

        @apply --paper-dropdown-menu;
      }

      :host([disabled]) {
        @apply --paper-dropdown-menu-disabled;
      }

      :host([noink]) paper-ripple {
        display: none;
      }

      :host([no-label-float]) paper-ripple {
        top: 8px;
      }

      paper-ripple {
        top: 12px;
        left: 0px;
        bottom: 8px;
        right: 0px;

        @apply --paper-dropdown-menu-ripple;
      }

      paper-menu-button {
        display: block;
        padding: 0;

        @apply --paper-dropdown-menu-button;
      }

      paper-input {
        @apply --paper-dropdown-menu-input;
      }

      iron-icon {
        color: var(--disabled-text-color);

        @apply --paper-dropdown-menu-icon;
      }</style></template></dom-module><dom-module id="paper-dropdown-menu" assetpath="../bower_components/paper-dropdown-menu/"><template><style include="paper-dropdown-menu-shared-styles"></style><span role="button"></span><paper-menu-button id="menuButton" vertical-align="[[verticalAlign]]" horizontal-align="[[horizontalAlign]]" dynamic-align="[[dynamicAlign]]" vertical-offset="[[_computeMenuVerticalOffset(noLabelFloat, verticalOffset)]]" disabled="[[disabled]]" no-animations="[[noAnimations]]" on-iron-select="_onIronSelect" on-iron-deselect="_onIronDeselect" opened="{{opened}}" close-on-activate="" allow-outside-scroll="[[allowOutsideScroll]]" restore-focus-on-close="[[restoreFocusOnClose]]"><div class="dropdown-trigger" slot="dropdown-trigger"><paper-ripple></paper-ripple><paper-input type="text" invalid="[[invalid]]" readonly="" disabled="[[disabled]]" value="[[value]]" placeholder="[[placeholder]]" error-message="[[errorMessage]]" always-float-label="[[alwaysFloatLabel]]" no-label-float="[[noLabelFloat]]" label="[[label]]"><iron-icon icon="paper-dropdown-menu:arrow-drop-down" suffix="" slot="suffix"></iron-icon></paper-input></div><slot id="content" name="dropdown-content" slot="dropdown-content"></slot></paper-menu-button></template><script>(function(){"use strict";Polymer({is:"paper-dropdown-menu",behaviors:[Polymer.IronButtonState,Polymer.IronControlState,Polymer.IronFormElementBehavior,Polymer.IronValidatableBehavior],properties:{selectedItemLabel:{type:String,notify:!0,readOnly:!0},selectedItem:{type:Object,notify:!0,readOnly:!0},value:{type:String,notify:!0},label:{type:String},placeholder:{type:String},errorMessage:{type:String},opened:{type:Boolean,notify:!0,value:!1,observer:"_openedChanged"},allowOutsideScroll:{type:Boolean,value:!1},noLabelFloat:{type:Boolean,value:!1,reflectToAttribute:!0},alwaysFloatLabel:{type:Boolean,value:!1},noAnimations:{type:Boolean,value:!1},horizontalAlign:{type:String,value:"right"},verticalAlign:{type:String,value:"top"},verticalOffset:Number,dynamicAlign:{type:Boolean},restoreFocusOnClose:{type:Boolean,value:!0}},listeners:{tap:"_onTap"},keyBindings:{"up down":"open",esc:"close"},hostAttributes:{role:"combobox","aria-autocomplete":"none","aria-haspopup":"true"},observers:["_selectedItemChanged(selectedItem)"],attached:function attached(){var contentElement=this.contentElement;if(contentElement&&contentElement.selectedItem){this._setSelectedItem(contentElement.selectedItem)}},get contentElement(){for(var nodes=Polymer.dom(this.$.content).getDistributedNodes(),i=0,l=nodes.length;i<l;i++){if(nodes[i].nodeType===Node.ELEMENT_NODE){return nodes[i]}}},open:function open(){this.$.menuButton.open()},close:function close(){this.$.menuButton.close()},_onIronSelect:function _onIronSelect(event){this._setSelectedItem(event.detail.item)},_onIronDeselect:function _onIronDeselect(){this._setSelectedItem(null)},_onTap:function _onTap(event){if(Polymer.Gestures.findOriginalTarget(event)===this){this.open()}},_selectedItemChanged:function _selectedItemChanged(selectedItem){var value="";if(!selectedItem){value=""}else{value=selectedItem.label||selectedItem.getAttribute("label")||selectedItem.textContent.trim()}this.value=value;this._setSelectedItemLabel(value)},_computeMenuVerticalOffset:function _computeMenuVerticalOffset(noLabelFloat,opt_verticalOffset){if(opt_verticalOffset){return opt_verticalOffset}return noLabelFloat?-4:8},_getValidity:function _getValidity(){return this.disabled||!this.required||this.required&&!!this.value},_openedChanged:function _openedChanged(){var openState=this.opened?"true":"false",e=this.contentElement;if(e){e.setAttribute("aria-expanded",openState)}}})})();</script></dom-module><dom-module id="paper-listbox" assetpath="../bower_components/paper-listbox/"><template><style>:host {
        display: block;
        padding: 8px 0;

        background: var(--paper-listbox-background-color, var(--primary-background-color));
        color: var(--paper-listbox-color, var(--primary-text-color));

        @apply --paper-listbox;
      }</style><slot></slot></template><script>(function(){Polymer({is:"paper-listbox",behaviors:[Polymer.IronMenuBehavior],hostAttributes:{role:"listbox"}})})();</script></dom-module><script>Polymer.PaperItemBehaviorImpl={hostAttributes:{role:"option",tabindex:"0"}};Polymer.PaperItemBehavior=[Polymer.IronButtonState,Polymer.IronControlState,Polymer.PaperItemBehaviorImpl];</script><dom-module id="paper-item-shared-styles" assetpath="../bower_components/paper-item/"><template><style>:host, .paper-item {
        display: block;
        position: relative;
        min-height: var(--paper-item-min-height, 48px);
        padding: 0px 16px;
      }

      .paper-item {
        @apply --paper-font-subhead;
        border:none;
        outline: none;
        background: white;
        width: 100%;
        text-align: left;
      }

      :host([hidden]), .paper-item[hidden] {
        display: none !important;
      }

      :host(.iron-selected), .paper-item.iron-selected {
        font-weight: var(--paper-item-selected-weight, bold);

        @apply --paper-item-selected;
      }

      :host([disabled]), .paper-item[disabled] {
        color: var(--paper-item-disabled-color, var(--disabled-text-color));

        @apply --paper-item-disabled;
      }

      :host(:focus), .paper-item:focus {
        position: relative;
        outline: 0;

        @apply --paper-item-focused;
      }

      :host(:focus):before, .paper-item:focus:before {
        @apply --layout-fit;

        background: currentColor;
        content: '';
        opacity: var(--dark-divider-opacity);
        pointer-events: none;

        @apply --paper-item-focused-before;
      }</style></template></dom-module><dom-module id="paper-item" assetpath="../bower_components/paper-item/"><template><style include="paper-item-shared-styles">:host {
        @apply --layout-horizontal;
        @apply --layout-center;
        @apply --paper-font-subhead;

        @apply --paper-item;
      }</style><slot></slot></template><script>Polymer({is:"paper-item",behaviors:[Polymer.PaperItemBehavior]});</script></dom-module><dom-module id="paper-icon-item" assetpath="../bower_components/paper-item/"><template><style include="paper-item-shared-styles"></style><style>:host {
        @apply --layout-horizontal;
        @apply --layout-center;
        @apply --paper-font-subhead;

        @apply --paper-item;
        @apply --paper-icon-item;
      }

      .content-icon {
        @apply --layout-horizontal;
        @apply --layout-center;

        width: var(--paper-item-icon-width, 56px);
        @apply --paper-item-icon;
      }</style><div id="contentIcon" class="content-icon"><slot name="item-icon"></slot></div><slot></slot></template><script>Polymer({is:"paper-icon-item",behaviors:[Polymer.PaperItemBehavior]});</script></dom-module><script>Polymer.PaperContactBehavior={openInSameTab:function openInSameTab(){var value=this._getContent();if(value){window.location.assign(encodeURI(this._getTargetUrl(value)))}},openInBlankTab:function openInBlankTab(){var value=this._getContent();if(value){window.open(encodeURI(this._getTargetUrl(value),"_blank"))}},_getContent:function _getContent(){var items=Polymer.dom(this).getEffectiveChildNodes();if(0>=items.length){return null}return Polymer.dom(items[0]).textContent}};</script><dom-module id="paper-contact-shared-styles" assetpath="../bower_components/paper-contact/"><template><style>:host {
				@apply --layout-vertical;
			}

			.item {
				cursor: pointer;
			}

			.icon {
				color: var(--disabled-text-color);
			}

			.text {
				padding-top: 14px;
				padding-bottom: 14px;
				white-space: pre-wrap;
				@apply --paper-font-body1;
			}</style></template></dom-module><dom-module id="paper-contact-email" assetpath="../bower_components/paper-contact/"><template><style include="paper-contact-shared-styles"></style><paper-icon-item class="item" on-tap="openInSameTab"><paper-ripple></paper-ripple><iron-icon class="icon" icon="communication:email" slot="item-icon"></iron-icon><div class="text"><slot></slot></div></paper-icon-item></template></dom-module><script>(function(){Polymer({is:"paper-contact-email",behaviors:[Polymer.PaperContactBehavior],_getTargetUrl:function _getTargetUrl(content){return"mailto:"+encodeURIComponent(content)}})})();</script><dom-module id="paper-contact-phone" assetpath="../bower_components/paper-contact/"><template><style include="paper-contact-shared-styles"></style><paper-icon-item class="item" on-tap="openInSameTab"><paper-ripple></paper-ripple><iron-icon class="icon" icon="communication:phone" slot="item-icon"></iron-icon><div class="text"><slot></slot></div></paper-icon-item></template></dom-module><script>(function(){Polymer({is:"paper-contact-phone",behaviors:[Polymer.PaperContactBehavior],_getTargetUrl:function _getTargetUrl(content){return"tel:"+content}})})();</script><iron-iconset-svg name="hardware" size="24"><svg><defs><g id="cast"><path d="M21 3H3c-1.1 0-2 .9-2 2v3h2V5h18v14h-7v2h7c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM1 18v3h3c0-1.66-1.34-3-3-3zm0-4v2c2.76 0 5 2.24 5 5h2c0-3.87-3.13-7-7-7zm0-4v2c4.97 0 9 4.03 9 9h2c0-6.08-4.93-11-11-11z"></path></g><g id="cast-connected"><path d="M1 18v3h3c0-1.66-1.34-3-3-3zm0-4v2c2.76 0 5 2.24 5 5h2c0-3.87-3.13-7-7-7zm18-7H5v1.63c3.96 1.28 7.09 4.41 8.37 8.37H19V7zM1 10v2c4.97 0 9 4.03 9 9h2c0-6.08-4.93-11-11-11zm20-7H3c-1.1 0-2 .9-2 2v3h2V5h18v14h-7v2h7c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"></path></g><g id="computer"><path d="M20 18c1.1 0 1.99-.9 1.99-2L22 6c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2H0v2h24v-2h-4zM4 6h16v10H4V6z"></path></g><g id="desktop-mac"><path d="M21 2H3c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h7l-2 3v1h8v-1l-2-3h7c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 12H3V4h18v10z"></path></g><g id="desktop-windows"><path d="M21 2H3c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h7v2H8v2h8v-2h-2v-2h7c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H3V4h18v12z"></path></g><g id="developer-board"><path d="M22 9V7h-2V5c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-2h2v-2h-2v-2h2v-2h-2V9h2zm-4 10H4V5h14v14zM6 13h5v4H6zm6-6h4v3h-4zM6 7h5v5H6zm6 4h4v6h-4z"></path></g><g id="device-hub"><path d="M17 16l-4-4V8.82C14.16 8.4 15 7.3 15 6c0-1.66-1.34-3-3-3S9 4.34 9 6c0 1.3.84 2.4 2 2.82V12l-4 4H3v5h5v-3.05l4-4.2 4 4.2V21h5v-5h-4z"></path></g><g id="devices-other"><path d="M3 6h18V4H3c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h4v-2H3V6zm10 6H9v1.78c-.61.55-1 1.33-1 2.22s.39 1.67 1 2.22V20h4v-1.78c.61-.55 1-1.34 1-2.22s-.39-1.67-1-2.22V12zm-2 5.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zM22 8h-6c-.5 0-1 .5-1 1v10c0 .5.5 1 1 1h6c.5 0 1-.5 1-1V9c0-.5-.5-1-1-1zm-1 10h-4v-8h4v8z"></path></g><g id="dock"><path d="M8 23h8v-2H8v2zm8-21.99L8 1c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V3c0-1.1-.9-1.99-2-1.99zM16 15H8V5h8v10z"></path></g><g id="gamepad"><path d="M15 7.5V2H9v5.5l3 3 3-3zM7.5 9H2v6h5.5l3-3-3-3zM9 16.5V22h6v-5.5l-3-3-3 3zM16.5 9l-3 3 3 3H22V9h-5.5z"></path></g><g id="headset"><path d="M12 1c-4.97 0-9 4.03-9 9v7c0 1.66 1.34 3 3 3h3v-8H5v-2c0-3.87 3.13-7 7-7s7 3.13 7 7v2h-4v8h3c1.66 0 3-1.34 3-3v-7c0-4.97-4.03-9-9-9z"></path></g><g id="headset-mic"><path d="M12 1c-4.97 0-9 4.03-9 9v7c0 1.66 1.34 3 3 3h3v-8H5v-2c0-3.87 3.13-7 7-7s7 3.13 7 7v2h-4v8h4v1h-7v2h6c1.66 0 3-1.34 3-3V10c0-4.97-4.03-9-9-9z"></path></g><g id="keyboard"><path d="M20 5H4c-1.1 0-1.99.9-1.99 2L2 17c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm-9 3h2v2h-2V8zm0 3h2v2h-2v-2zM8 8h2v2H8V8zm0 3h2v2H8v-2zm-1 2H5v-2h2v2zm0-3H5V8h2v2zm9 7H8v-2h8v2zm0-4h-2v-2h2v2zm0-3h-2V8h2v2zm3 3h-2v-2h2v2zm0-3h-2V8h2v2z"></path></g><g id="keyboard-arrow-down"><path d="M7.41 7.84L12 12.42l4.59-4.58L18 9.25l-6 6-6-6z"></path></g><g id="keyboard-arrow-left"><path d="M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"></path></g><g id="keyboard-arrow-right"><path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path></g><g id="keyboard-arrow-up"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path></g><g id="keyboard-backspace"><path d="M21 11H6.83l3.58-3.59L9 6l-6 6 6 6 1.41-1.41L6.83 13H21z"></path></g><g id="keyboard-capslock"><path d="M12 8.41L16.59 13 18 11.59l-6-6-6 6L7.41 13 12 8.41zM6 18h12v-2H6v2z"></path></g><g id="keyboard-hide"><path d="M20 3H4c-1.1 0-1.99.9-1.99 2L2 15c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-9 3h2v2h-2V6zm0 3h2v2h-2V9zM8 6h2v2H8V6zm0 3h2v2H8V9zm-1 2H5V9h2v2zm0-3H5V6h2v2zm9 7H8v-2h8v2zm0-4h-2V9h2v2zm0-3h-2V6h2v2zm3 3h-2V9h2v2zm0-3h-2V6h2v2zm-7 15l4-4H8l4 4z"></path></g><g id="keyboard-return"><path d="M19 7v4H5.83l3.58-3.59L8 6l-6 6 6 6 1.41-1.41L5.83 13H21V7z"></path></g><g id="keyboard-tab"><path d="M11.59 7.41L15.17 11H1v2h14.17l-3.59 3.59L13 18l6-6-6-6-1.41 1.41zM20 6v12h2V6h-2z"></path></g><g id="keyboard-voice"><path d="M12 15c1.66 0 2.99-1.34 2.99-3L15 6c0-1.66-1.34-3-3-3S9 4.34 9 6v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 15 6.7 12H5c0 3.42 2.72 6.23 6 6.72V22h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z"></path></g><g id="laptop"><path d="M20 18c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2H0v2h24v-2h-4zM4 6h16v10H4V6z"></path></g><g id="laptop-chromebook"><path d="M22 18V3H2v15H0v2h24v-2h-2zm-8 0h-4v-1h4v1zm6-3H4V5h16v10z"></path></g><g id="laptop-mac"><path d="M20 18c1.1 0 1.99-.9 1.99-2L22 5c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v11c0 1.1.9 2 2 2H0c0 1.1.9 2 2 2h20c1.1 0 2-.9 2-2h-4zM4 5h16v11H4V5zm8 14c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1z"></path></g><g id="laptop-windows"><path d="M20 18v-1c1.1 0 1.99-.9 1.99-2L22 5c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2v1H0v2h24v-2h-4zM4 5h16v10H4V5z"></path></g><g id="memory"><path d="M15 9H9v6h6V9zm-2 4h-2v-2h2v2zm8-2V9h-2V7c0-1.1-.9-2-2-2h-2V3h-2v2h-2V3H9v2H7c-1.1 0-2 .9-2 2v2H3v2h2v2H3v2h2v2c0 1.1.9 2 2 2h2v2h2v-2h2v2h2v-2h2c1.1 0 2-.9 2-2v-2h2v-2h-2v-2h2zm-4 6H7V7h10v10z"></path></g><g id="mouse"><path d="M13 1.07V9h7c0-4.08-3.05-7.44-7-7.93zM4 15c0 4.42 3.58 8 8 8s8-3.58 8-8v-4H4v4zm7-13.93C7.05 1.56 4 4.92 4 9h7V1.07z"></path></g><g id="phone-android"><path d="M16 1H8C6.34 1 5 2.34 5 4v16c0 1.66 1.34 3 3 3h8c1.66 0 3-1.34 3-3V4c0-1.66-1.34-3-3-3zm-2 20h-4v-1h4v1zm3.25-3H6.75V4h10.5v14z"></path></g><g id="phone-iphone"><path d="M15.5 1h-8C6.12 1 5 2.12 5 3.5v17C5 21.88 6.12 23 7.5 23h8c1.38 0 2.5-1.12 2.5-2.5v-17C18 2.12 16.88 1 15.5 1zm-4 21c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm4.5-4H7V4h9v14z"></path></g><g id="phonelink"><path d="M4 6h18V4H4c-1.1 0-2 .9-2 2v11H0v3h14v-3H4V6zm19 2h-6c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h6c.55 0 1-.45 1-1V9c0-.55-.45-1-1-1zm-1 9h-4v-7h4v7z"></path></g><g id="phonelink-off"><path d="M22 6V4H6.82l2 2H22zM1.92 1.65L.65 2.92l1.82 1.82C2.18 5.08 2 5.52 2 6v11H0v3h17.73l2.35 2.35 1.27-1.27L3.89 3.62 1.92 1.65zM4 6.27L14.73 17H4V6.27zM23 8h-6c-.55 0-1 .45-1 1v4.18l2 2V10h4v7h-2.18l3 3H23c.55 0 1-.45 1-1V9c0-.55-.45-1-1-1z"></path></g><g id="power-input"><path d="M2 9v2h19V9H2zm0 6h5v-2H2v2zm7 0h5v-2H9v2zm7 0h5v-2h-5v2z"></path></g><g id="router"><path d="M20.2 5.9l.8-.8C19.6 3.7 17.8 3 16 3s-3.6.7-5 2.1l.8.8C13 4.8 14.5 4.2 16 4.2s3 .6 4.2 1.7zm-.9.8c-.9-.9-2.1-1.4-3.3-1.4s-2.4.5-3.3 1.4l.8.8c.7-.7 1.6-1 2.5-1 .9 0 1.8.3 2.5 1l.8-.8zM19 13h-2V9h-2v4H5c-1.1 0-2 .9-2 2v4c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-4c0-1.1-.9-2-2-2zM8 18H6v-2h2v2zm3.5 0h-2v-2h2v2zm3.5 0h-2v-2h2v2z"></path></g><g id="scanner"><path d="M19.8 10.7L4.2 5l-.7 1.9L17.6 12H5c-1.1 0-2 .9-2 2v4c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-5.5c0-.8-.5-1.6-1.2-1.8zM7 17H5v-2h2v2zm12 0H9v-2h10v2z"></path></g><g id="security"><path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z"></path></g><g id="sim-card"><path d="M19.99 4c0-1.1-.89-2-1.99-2h-8L4 8v12c0 1.1.9 2 2 2h12.01c1.1 0 1.99-.9 1.99-2l-.01-16zM9 19H7v-2h2v2zm8 0h-2v-2h2v2zm-8-4H7v-4h2v4zm4 4h-2v-4h2v4zm0-6h-2v-2h2v2zm4 2h-2v-4h2v4z"></path></g><g id="smartphone"><path d="M17 1.01L7 1c-1.1 0-2 .9-2 2v18c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V3c0-1.1-.9-1.99-2-1.99zM17 19H7V5h10v14z"></path></g><g id="speaker"><path d="M17 2H7c-1.1 0-2 .9-2 2v16c0 1.1.9 1.99 2 1.99L17 22c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-5 2c1.1 0 2 .9 2 2s-.9 2-2 2c-1.11 0-2-.9-2-2s.89-2 2-2zm0 16c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"></path></g><g id="speaker-group"><path d="M18.2 1H9.8C8.81 1 8 1.81 8 2.8v14.4c0 .99.81 1.79 1.8 1.79l8.4.01c.99 0 1.8-.81 1.8-1.8V2.8c0-.99-.81-1.8-1.8-1.8zM14 3c1.1 0 2 .89 2 2s-.9 2-2 2-2-.89-2-2 .9-2 2-2zm0 13.5c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4z"></path><circle cx="14" cy="12.5" r="2.5"></circle><path d="M6 5H4v16c0 1.1.89 2 2 2h10v-2H6V5z"></path></g><g id="tablet"><path d="M21 4H3c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h18c1.1 0 1.99-.9 1.99-2L23 6c0-1.1-.9-2-2-2zm-2 14H5V6h14v12z"></path></g><g id="tablet-android"><path d="M18 0H6C4.34 0 3 1.34 3 3v18c0 1.66 1.34 3 3 3h12c1.66 0 3-1.34 3-3V3c0-1.66-1.34-3-3-3zm-4 22h-4v-1h4v1zm5.25-3H4.75V3h14.5v16z"></path></g><g id="tablet-mac"><path d="M18.5 0h-14C3.12 0 2 1.12 2 2.5v19C2 22.88 3.12 24 4.5 24h14c1.38 0 2.5-1.12 2.5-2.5v-19C21 1.12 19.88 0 18.5 0zm-7 23c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm7.5-4H4V3h15v16z"></path></g><g id="toys"><path d="M12 12c0-3 2.5-5.5 5.5-5.5S23 9 23 12H12zm0 0c0 3-2.5 5.5-5.5 5.5S1 15 1 12h11zm0 0c-3 0-5.5-2.5-5.5-5.5S9 1 12 1v11zm0 0c3 0 5.5 2.5 5.5 5.5S15 23 12 23V12z"></path></g><g id="tv"><path d="M21 3H3c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h5v2h8v-2h5c1.1 0 1.99-.9 1.99-2L23 5c0-1.1-.9-2-2-2zm0 14H3V5h18v12z"></path></g><g id="videogame-asset"><path d="M21 6H3c-1.1 0-2 .9-2 2v8c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm-10 7H8v3H6v-3H3v-2h3V8h2v3h3v2zm4.5 2c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm4-3c-.83 0-1.5-.67-1.5-1.5S18.67 9 19.5 9s1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"></path></g><g id="watch"><path d="M20 12c0-2.54-1.19-4.81-3.04-6.27L16 0H8l-.95 5.73C5.19 7.19 4 9.45 4 12s1.19 4.81 3.05 6.27L8 24h8l.96-5.73C18.81 16.81 20 14.54 20 12zM6 12c0-3.31 2.69-6 6-6s6 2.69 6 6-2.69 6-6 6-6-2.69-6-6z"></path></g></defs></svg></iron-iconset-svg><dom-module id="paper-contact-mobile" assetpath="../bower_components/paper-contact/"><template><style include="paper-contact-shared-styles"></style><paper-icon-item class="item" on-tap="openInSameTab"><paper-ripple></paper-ripple><iron-icon class="icon" icon="hardware:smartphone" slot="item-icon"></iron-icon><div class="text"><slot></slot></div></paper-icon-item></template></dom-module><script>(function(){Polymer({is:"paper-contact-mobile",behaviors:[Polymer.PaperContactBehavior],_getTargetUrl:function _getTargetUrl(content){return"tel:"+content}})})();</script><iron-iconset-svg name="social" size="24"><svg><defs><g id="cake"><path d="M12 6c1.11 0 2-.9 2-2 0-.38-.1-.73-.29-1.03L12 0l-1.71 2.97c-.19.3-.29.65-.29 1.03 0 1.1.9 2 2 2zm4.6 9.99l-1.07-1.07-1.08 1.07c-1.3 1.3-3.58 1.31-4.89 0l-1.07-1.07-1.09 1.07C6.75 16.64 5.88 17 4.96 17c-.73 0-1.4-.23-1.96-.61V21c0 .55.45 1 1 1h16c.55 0 1-.45 1-1v-4.61c-.56.38-1.23.61-1.96.61-.92 0-1.79-.36-2.44-1.01zM18 9h-5V7h-2v2H6c-1.66 0-3 1.34-3 3v1.54c0 1.08.88 1.96 1.96 1.96.52 0 1.02-.2 1.38-.57l2.14-2.13 2.13 2.13c.74.74 2.03.74 2.77 0l2.14-2.13 2.13 2.13c.37.37.86.57 1.38.57 1.08 0 1.96-.88 1.96-1.96V12C21 10.34 19.66 9 18 9z"></path></g><g id="domain"><path d="M12 7V3H2v18h20V7H12zM6 19H4v-2h2v2zm0-4H4v-2h2v2zm0-4H4V9h2v2zm0-4H4V5h2v2zm4 12H8v-2h2v2zm0-4H8v-2h2v2zm0-4H8V9h2v2zm0-4H8V5h2v2zm10 12h-8v-2h2v-2h-2v-2h2v-2h-2V9h8v10zm-2-8h-2v2h2v-2zm0 4h-2v2h2v-2z"></path></g><g id="group"><path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"></path></g><g id="group-add"><path d="M8 10H5V7H3v3H0v2h3v3h2v-3h3v-2zm10 1c1.66 0 2.99-1.34 2.99-3S19.66 5 18 5c-.32 0-.63.05-.91.14.57.81.9 1.79.9 2.86s-.34 2.04-.9 2.86c.28.09.59.14.91.14zm-5 0c1.66 0 2.99-1.34 2.99-3S14.66 5 13 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm6.62 2.16c.83.73 1.38 1.66 1.38 2.84v2h3v-2c0-1.54-2.37-2.49-4.38-2.84zM13 13c-2 0-6 1-6 3v2h12v-2c0-2-4-3-6-3z"></path></g><g id="location-city"><path d="M15 11V5l-3-3-3 3v2H3v14h18V11h-6zm-8 8H5v-2h2v2zm0-4H5v-2h2v2zm0-4H5V9h2v2zm6 8h-2v-2h2v2zm0-4h-2v-2h2v2zm0-4h-2V9h2v2zm0-4h-2V5h2v2zm6 12h-2v-2h2v2zm0-4h-2v-2h2v2z"></path></g><g id="mood"><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11zm3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z"></path></g><g id="mood-bad"><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11zm3.5 3c-2.33 0-4.31 1.46-5.11 3.5h10.22c-.8-2.04-2.78-3.5-5.11-3.5z"></path></g><g id="notifications"><path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"></path></g><g id="notifications-active"><path d="M7.58 4.08L6.15 2.65C3.75 4.48 2.17 7.3 2.03 10.5h2c.15-2.65 1.51-4.97 3.55-6.42zm12.39 6.42h2c-.15-3.2-1.73-6.02-4.12-7.85l-1.42 1.43c2.02 1.45 3.39 3.77 3.54 6.42zM18 11c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2v-5zm-6 11c.14 0 .27-.01.4-.04.65-.14 1.18-.58 1.44-1.18.1-.24.15-.5.15-.78h-4c.01 1.1.9 2 2.01 2z"></path></g><g id="notifications-none"><path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-6v-5c0-3.07-1.63-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.64 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2zm-2 1H8v-6c0-2.48 1.51-4.5 4-4.5s4 2.02 4 4.5v6z"></path></g><g id="notifications-off"><path d="M20 18.69L7.84 6.14 5.27 3.49 4 4.76l2.8 2.8v.01c-.52.99-.8 2.16-.8 3.42v5l-2 2v1h13.73l2 2L21 19.72l-1-1.03zM12 22c1.11 0 2-.89 2-2h-4c0 1.11.89 2 2 2zm6-7.32V11c0-3.08-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68c-.15.03-.29.08-.42.12-.1.03-.2.07-.3.11h-.01c-.01 0-.01 0-.02.01-.23.09-.46.2-.68.31 0 0-.01 0-.01.01L18 14.68z"></path></g><g id="notifications-paused"><path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.93 6 11v5l-2 2v1h16v-1l-2-2zm-3.5-6.2l-2.8 3.4h2.8V15h-5v-1.8l2.8-3.4H9.5V8h5v1.8z"></path></g><g id="pages"><path d="M3 5v6h5L7 7l4 1V3H5c-1.1 0-2 .9-2 2zm5 8H3v6c0 1.1.9 2 2 2h6v-5l-4 1 1-4zm9 4l-4-1v5h6c1.1 0 2-.9 2-2v-6h-5l1 4zm2-14h-6v5l4-1-1 4h5V5c0-1.1-.9-2-2-2z"></path></g><g id="party-mode"><path d="M20 4h-3.17L15 2H9L7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm-8 3c1.63 0 3.06.79 3.98 2H12c-1.66 0-3 1.34-3 3 0 .35.07.69.18 1H7.1c-.06-.32-.1-.66-.1-1 0-2.76 2.24-5 5-5zm0 10c-1.63 0-3.06-.79-3.98-2H12c1.66 0 3-1.34 3-3 0-.35-.07-.69-.18-1h2.08c.07.32.1.66.1 1 0 2.76-2.24 5-5 5z"></path></g><g id="people"><path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"></path></g><g id="people-outline"><path d="M16.5 13c-1.2 0-3.07.34-4.5 1-1.43-.67-3.3-1-4.5-1C5.33 13 1 14.08 1 16.25V19h22v-2.75c0-2.17-4.33-3.25-6.5-3.25zm-4 4.5h-10v-1.25c0-.54 2.56-1.75 5-1.75s5 1.21 5 1.75v1.25zm9 0H14v-1.25c0-.46-.2-.86-.52-1.22.88-.3 1.96-.53 3.02-.53 2.44 0 5 1.21 5 1.75v1.25zM7.5 12c1.93 0 3.5-1.57 3.5-3.5S9.43 5 7.5 5 4 6.57 4 8.5 5.57 12 7.5 12zm0-5.5c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zm9 5.5c1.93 0 3.5-1.57 3.5-3.5S18.43 5 16.5 5 13 6.57 13 8.5s1.57 3.5 3.5 3.5zm0-5.5c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2z"></path></g><g id="person"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"></path></g><g id="person-add"><path d="M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm-9-2V7H4v3H1v2h3v3h2v-3h3v-2H6zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"></path></g><g id="person-outline"><path d="M12 5.9c1.16 0 2.1.94 2.1 2.1s-.94 2.1-2.1 2.1S9.9 9.16 9.9 8s.94-2.1 2.1-2.1m0 9c2.97 0 6.1 1.46 6.1 2.1v1.1H5.9V17c0-.64 3.13-2.1 6.1-2.1M12 4C9.79 4 8 5.79 8 8s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 9c-2.67 0-8 1.34-8 4v3h16v-3c0-2.66-5.33-4-8-4z"></path></g><g id="plus-one"><path d="M10 8H8v4H4v2h4v4h2v-4h4v-2h-4zm4.5-1.92V7.9l2.5-.5V18h2V5z"></path></g><g id="poll"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"></path></g><g id="public"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"></path></g><g id="school"><path d="M5 13.18v4L12 21l7-3.82v-4L12 17l-7-3.82zM12 3L1 9l11 6 9-4.91V17h2V9L12 3z"></path></g><g id="sentiment-dissatisfied"><circle cx="15.5" cy="9.5" r="1.5"></circle><circle cx="8.5" cy="9.5" r="1.5"></circle><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm0-6c-2.33 0-4.32 1.45-5.12 3.5h1.67c.69-1.19 1.97-2 3.45-2s2.75.81 3.45 2h1.67c-.8-2.05-2.79-3.5-5.12-3.5z"></path></g><g id="sentiment-neutral"><path d="M9 14h6v1.5H9z"></path><circle cx="15.5" cy="9.5" r="1.5"></circle><circle cx="8.5" cy="9.5" r="1.5"></circle><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"></path></g><g id="sentiment-satisfied"><circle cx="15.5" cy="9.5" r="1.5"></circle><circle cx="8.5" cy="9.5" r="1.5"></circle><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm0-4c-1.48 0-2.75-.81-3.45-2H6.88c.8 2.05 2.79 3.5 5.12 3.5s4.32-1.45 5.12-3.5h-1.67c-.7 1.19-1.97 2-3.45 2z"></path></g><g id="sentiment-very-dissatisfied"><path d="M11.99 2C6.47 2 2 6.47 2 12s4.47 10 9.99 10S22 17.53 22 12 17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm4.18-12.24l-1.06 1.06-1.06-1.06L13 8.82l1.06 1.06L13 10.94 14.06 12l1.06-1.06L16.18 12l1.06-1.06-1.06-1.06 1.06-1.06zM7.82 12l1.06-1.06L9.94 12 11 10.94 9.94 9.88 11 8.82 9.94 7.76 8.88 8.82 7.82 7.76 6.76 8.82l1.06 1.06-1.06 1.06zM12 14c-2.33 0-4.31 1.46-5.11 3.5h10.22c-.8-2.04-2.78-3.5-5.11-3.5z"></path></g><g id="sentiment-very-satisfied"><path d="M11.99 2C6.47 2 2 6.47 2 12s4.47 10 9.99 10S22 17.53 22 12 17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm1-10.06L14.06 11l1.06-1.06L16.18 11l1.06-1.06-2.12-2.12zm-4.12 0L9.94 11 11 9.94 8.88 7.82 6.76 9.94 7.82 11zM12 17.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z"></path></g><g id="share"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z"></path></g><g id="whatshot"><path d="M13.5.67s.74 2.65.74 4.8c0 2.06-1.35 3.73-3.41 3.73-2.07 0-3.63-1.67-3.63-3.73l.03-.36C5.21 7.51 4 10.62 4 14c0 4.42 3.58 8 8 8s8-3.58 8-8C20 8.61 17.41 3.8 13.5.67zM11.71 19c-1.78 0-3.22-1.4-3.22-3.14 0-1.62 1.05-2.76 2.81-3.12 1.77-.36 3.6-1.21 4.62-2.58.39 1.29.59 2.65.59 4.04 0 2.65-2.15 4.8-4.8 4.8z"></path></g></defs></svg></iron-iconset-svg><dom-module id="paper-contact-linkedin" assetpath="../bower_components/paper-contact/"><template><style include="paper-contact-shared-styles"></style><paper-icon-item class="item" on-tap="openInBlankTab"><paper-ripple></paper-ripple><iron-icon class="icon" icon="social:public" slot="item-icon"></iron-icon><div class="text">LinkedIn</div></paper-icon-item></template></dom-module><script>(function(){Polymer({is:"paper-contact-linkedin",behaviors:[Polymer.PaperContactBehavior],_getTargetUrl:function _getTargetUrl(content){return content}})})();</script><dom-module id="paper-contact-twitter" assetpath="../bower_components/paper-contact/"><template><style include="paper-contact-shared-styles"></style><paper-icon-item class="item" on-tap="openInBlankTab"><paper-ripple></paper-ripple><iron-icon class="icon" icon="communication:chat" slot="item-icon"></iron-icon><div class="text">Twitter</div></paper-icon-item></template></dom-module><script>(function(){Polymer({is:"paper-contact-twitter",behaviors:[Polymer.PaperContactBehavior],_getTargetUrl:function _getTargetUrl(content){return"https://twitter.com/#!/"+content}})})();</script><dom-module id="paper-contact-skype" assetpath="../bower_components/paper-contact/"><template><style include="paper-contact-shared-styles"></style><paper-icon-item class="item" on-tap="openInBlankTab"><paper-ripple></paper-ripple><iron-icon class="icon" icon="hardware:headset-mic" slot="item-icon"></iron-icon><div class="text">Skype</div></paper-icon-item></template></dom-module><script>(function(){Polymer({is:"paper-contact-skype",behaviors:[Polymer.PaperContactBehavior],_getTargetUrl:function _getTargetUrl(content){return"skype:"+content+"?call"}})})();</script><iron-iconset-svg name="maps" size="24"><svg><defs><g id="add-location"><path d="M12 2C8.14 2 5 5.14 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.86-3.14-7-7-7zm4 8h-3v3h-2v-3H8V8h3V5h2v3h3v2z"></path></g><g id="beenhere"><path d="M19 1H5c-1.1 0-1.99.9-1.99 2L3 15.93c0 .69.35 1.3.88 1.66L12 23l8.11-5.41c.53-.36.88-.97.88-1.66L21 3c0-1.1-.9-2-2-2zm-9 15l-5-5 1.41-1.41L10 13.17l7.59-7.59L19 7l-9 9z"></path></g><g id="directions"><path d="M21.71 11.29l-9-9c-.39-.39-1.02-.39-1.41 0l-9 9c-.39.39-.39 1.02 0 1.41l9 9c.39.39 1.02.39 1.41 0l9-9c.39-.38.39-1.01 0-1.41zM14 14.5V12h-4v3H8v-4c0-.55.45-1 1-1h5V7.5l3.5 3.5-3.5 3.5z"></path></g><g id="directions-bike"><path d="M15.5 5.5c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zM5 12c-2.8 0-5 2.2-5 5s2.2 5 5 5 5-2.2 5-5-2.2-5-5-5zm0 8.5c-1.9 0-3.5-1.6-3.5-3.5s1.6-3.5 3.5-3.5 3.5 1.6 3.5 3.5-1.6 3.5-3.5 3.5zm5.8-10l2.4-2.4.8.8c1.3 1.3 3 2.1 5.1 2.1V9c-1.5 0-2.7-.6-3.6-1.5l-1.9-1.9c-.5-.4-1-.6-1.6-.6s-1.1.2-1.4.6L7.8 8.4c-.4.4-.6.9-.6 1.4 0 .6.2 1.1.6 1.4L11 14v5h2v-6.2l-2.2-2.3zM19 12c-2.8 0-5 2.2-5 5s2.2 5 5 5 5-2.2 5-5-2.2-5-5-5zm0 8.5c-1.9 0-3.5-1.6-3.5-3.5s1.6-3.5 3.5-3.5 3.5 1.6 3.5 3.5-1.6 3.5-3.5 3.5z"></path></g><g id="directions-boat"><path d="M20 21c-1.39 0-2.78-.47-4-1.32-2.44 1.71-5.56 1.71-8 0C6.78 20.53 5.39 21 4 21H2v2h2c1.38 0 2.74-.35 4-.99 2.52 1.29 5.48 1.29 8 0 1.26.65 2.62.99 4 .99h2v-2h-2zM3.95 19H4c1.6 0 3.02-.88 4-2 .98 1.12 2.4 2 4 2s3.02-.88 4-2c.98 1.12 2.4 2 4 2h.05l1.89-6.68c.08-.26.06-.54-.06-.78s-.34-.42-.6-.5L20 10.62V6c0-1.1-.9-2-2-2h-3V1H9v3H6c-1.1 0-2 .9-2 2v4.62l-1.29.42c-.26.08-.48.26-.6.5s-.15.52-.06.78L3.95 19zM6 6h12v3.97L12 8 6 9.97V6z"></path></g><g id="directions-bus"><path d="M4 16c0 .88.39 1.67 1 2.22V20c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-1h8v1c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-1.78c.61-.55 1-1.34 1-2.22V6c0-3.5-3.58-4-8-4s-8 .5-8 4v10zm3.5 1c-.83 0-1.5-.67-1.5-1.5S6.67 14 7.5 14s1.5.67 1.5 1.5S8.33 17 7.5 17zm9 0c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm1.5-6H6V6h12v5z"></path></g><g id="directions-car"><path d="M18.92 6.01C18.72 5.42 18.16 5 17.5 5h-11c-.66 0-1.21.42-1.42 1.01L3 12v8c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-1h12v1c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-8l-2.08-5.99zM6.5 16c-.83 0-1.5-.67-1.5-1.5S5.67 13 6.5 13s1.5.67 1.5 1.5S7.33 16 6.5 16zm11 0c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zM5 11l1.5-4.5h11L19 11H5z"></path></g><g id="directions-railway"><path d="M4 15.5C4 17.43 5.57 19 7.5 19L6 20.5v.5h12v-.5L16.5 19c1.93 0 3.5-1.57 3.5-3.5V5c0-3.5-3.58-4-8-4s-8 .5-8 4v10.5zm8 1.5c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm6-7H6V5h12v5z"></path></g><g id="directions-run"><path d="M13.49 5.48c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm-3.6 13.9l1-4.4 2.1 2v6h2v-7.5l-2.1-2 .6-3c1.3 1.5 3.3 2.5 5.5 2.5v-2c-1.9 0-3.5-1-4.3-2.4l-1-1.6c-.4-.6-1-1-1.7-1-.3 0-.5.1-.8.1l-5.2 2.2v4.7h2v-3.4l1.8-.7-1.6 8.1-4.9-1-.4 2 7 1.4z"></path></g><g id="directions-subway"><path d="M12 2c-4.42 0-8 .5-8 4v9.5C4 17.43 5.57 19 7.5 19L6 20.5v.5h12v-.5L16.5 19c1.93 0 3.5-1.57 3.5-3.5V6c0-3.5-3.58-4-8-4zM7.5 17c-.83 0-1.5-.67-1.5-1.5S6.67 14 7.5 14s1.5.67 1.5 1.5S8.33 17 7.5 17zm3.5-6H6V6h5v5zm5.5 6c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm1.5-6h-5V6h5v5z"></path></g><g id="directions-transit"><path d="M12 2c-4.42 0-8 .5-8 4v9.5C4 17.43 5.57 19 7.5 19L6 20.5v.5h12v-.5L16.5 19c1.93 0 3.5-1.57 3.5-3.5V6c0-3.5-3.58-4-8-4zM7.5 17c-.83 0-1.5-.67-1.5-1.5S6.67 14 7.5 14s1.5.67 1.5 1.5S8.33 17 7.5 17zm3.5-6H6V6h5v5zm5.5 6c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm1.5-6h-5V6h5v5z"></path></g><g id="directions-walk"><path d="M13.5 5.5c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zM9.8 8.9L7 23h2.1l1.8-8 2.1 2v6h2v-7.5l-2.1-2 .6-3C14.8 12 16.8 13 19 13v-2c-1.9 0-3.5-1-4.3-2.4l-1-1.6c-.4-.6-1-1-1.7-1-.3 0-.5.1-.8.1L6 8.3V13h2V9.6l1.8-.7"></path></g><g id="edit-location"><path d="M12 2C8.14 2 5 5.14 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.86-3.14-7-7-7zm-1.56 10H9v-1.44l3.35-3.34 1.43 1.43L10.44 12zm4.45-4.45l-.7.7-1.44-1.44.7-.7c.15-.15.39-.15.54 0l.9.9c.15.15.15.39 0 .54z"></path></g><g id="ev-station"><path d="M19.77 7.23l.01-.01-3.72-3.72L15 4.56l2.11 2.11c-.94.36-1.61 1.26-1.61 2.33 0 1.38 1.12 2.5 2.5 2.5.36 0 .69-.08 1-.21v7.21c0 .55-.45 1-1 1s-1-.45-1-1V14c0-1.1-.9-2-2-2h-1V5c0-1.1-.9-2-2-2H6c-1.1 0-2 .9-2 2v16h10v-7.5h1.5v5c0 1.38 1.12 2.5 2.5 2.5s2.5-1.12 2.5-2.5V9c0-.69-.28-1.32-.73-1.77zM18 10c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zM8 18v-4.5H6L10 6v5h2l-4 7z"></path></g><g id="flight"><path d="M10.18 9"></path><path d="M21 16v-2l-8-5V3.5c0-.83-.67-1.5-1.5-1.5S10 2.67 10 3.5V9l-8 5v2l8-2.5V19l-2 1.5V22l3.5-1 3.5 1v-1.5L13 19v-5.5l8 2.5z"></path></g><g id="hotel"><path d="M7 13c1.66 0 3-1.34 3-3S8.66 7 7 7s-3 1.34-3 3 1.34 3 3 3zm12-6h-8v7H3V5H1v15h2v-3h18v3h2v-9c0-2.21-1.79-4-4-4z"></path></g><g id="layers"><path d="M11.99 18.54l-7.37-5.73L3 14.07l9 7 9-7-1.63-1.27-7.38 5.74zM12 16l7.36-5.73L21 9l-9-7-9 7 1.63 1.27L12 16z"></path></g><g id="layers-clear"><path d="M19.81 14.99l1.19-.92-1.43-1.43-1.19.92 1.43 1.43zm-.45-4.72L21 9l-9-7-2.91 2.27 7.87 7.88 2.4-1.88zM3.27 1L2 2.27l4.22 4.22L3 9l1.63 1.27L12 16l2.1-1.63 1.43 1.43L12 18.54l-7.37-5.73L3 14.07l9 7 4.95-3.85L20.73 21 22 19.73 3.27 1z"></path></g><g id="local-activity"><path d="M20 12c0-1.1.9-2 2-2V6c0-1.1-.9-2-2-2H4c-1.1 0-1.99.9-1.99 2v4c1.1 0 1.99.9 1.99 2s-.89 2-2 2v4c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2v-4c-1.1 0-2-.9-2-2zm-4.42 4.8L12 14.5l-3.58 2.3 1.08-4.12-3.29-2.69 4.24-.25L12 5.8l1.54 3.95 4.24.25-3.29 2.69 1.09 4.11z"></path></g><g id="local-airport"><path d="M21 16v-2l-8-5V3.5c0-.83-.67-1.5-1.5-1.5S10 2.67 10 3.5V9l-8 5v2l8-2.5V19l-2 1.5V22l3.5-1 3.5 1v-1.5L13 19v-5.5l8 2.5z"></path></g><g id="local-atm"><path d="M11 17h2v-1h1c.55 0 1-.45 1-1v-3c0-.55-.45-1-1-1h-3v-1h4V8h-2V7h-2v1h-1c-.55 0-1 .45-1 1v3c0 .55.45 1 1 1h3v1H9v2h2v1zm9-13H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2zm0 14H4V6h16v12z"></path></g><g id="local-bar"><path d="M21 5V3H3v2l8 9v5H6v2h12v-2h-5v-5l8-9zM7.43 7L5.66 5h12.69l-1.78 2H7.43z"></path></g><g id="local-cafe"><path d="M20 3H4v10c0 2.21 1.79 4 4 4h6c2.21 0 4-1.79 4-4v-3h2c1.11 0 2-.89 2-2V5c0-1.11-.89-2-2-2zm0 5h-2V5h2v3zM2 21h18v-2H2v2z"></path></g><g id="local-car-wash"><path d="M17 5c.83 0 1.5-.67 1.5-1.5 0-1-1.5-2.7-1.5-2.7s-1.5 1.7-1.5 2.7c0 .83.67 1.5 1.5 1.5zm-5 0c.83 0 1.5-.67 1.5-1.5 0-1-1.5-2.7-1.5-2.7s-1.5 1.7-1.5 2.7c0 .83.67 1.5 1.5 1.5zM7 5c.83 0 1.5-.67 1.5-1.5C8.5 2.5 7 .8 7 .8S5.5 2.5 5.5 3.5C5.5 4.33 6.17 5 7 5zm11.92 3.01C18.72 7.42 18.16 7 17.5 7h-11c-.66 0-1.21.42-1.42 1.01L3 14v8c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-1h12v1c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-8l-2.08-5.99zM6.5 18c-.83 0-1.5-.67-1.5-1.5S5.67 15 6.5 15s1.5.67 1.5 1.5S7.33 18 6.5 18zm11 0c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zM5 13l1.5-4.5h11L19 13H5z"></path></g><g id="local-convenience-store"><path d="M19 7V4H5v3H2v13h8v-4h4v4h8V7h-3zm-8 3H9v1h2v1H8V9h2V8H8V7h3v3zm5 2h-1v-2h-2V7h1v2h1V7h1v5z"></path></g><g id="local-dining"><path d="M8.1 13.34l2.83-2.83L3.91 3.5c-1.56 1.56-1.56 4.09 0 5.66l4.19 4.18zm6.78-1.81c1.53.71 3.68.21 5.27-1.38 1.91-1.91 2.28-4.65.81-6.12-1.46-1.46-4.2-1.1-6.12.81-1.59 1.59-2.09 3.74-1.38 5.27L3.7 19.87l1.41 1.41L12 14.41l6.88 6.88 1.41-1.41L13.41 13l1.47-1.47z"></path></g><g id="local-drink"><path d="M3 2l2.01 18.23C5.13 21.23 5.97 22 7 22h10c1.03 0 1.87-.77 1.99-1.77L21 2H3zm9 17c-1.66 0-3-1.34-3-3 0-2 3-5.4 3-5.4s3 3.4 3 5.4c0 1.66-1.34 3-3 3zm6.33-11H5.67l-.44-4h13.53l-.43 4z"></path></g><g id="local-florist"><path d="M12 22c4.97 0 9-4.03 9-9-4.97 0-9 4.03-9 9zM5.6 10.25c0 1.38 1.12 2.5 2.5 2.5.53 0 1.01-.16 1.42-.44l-.02.19c0 1.38 1.12 2.5 2.5 2.5s2.5-1.12 2.5-2.5l-.02-.19c.4.28.89.44 1.42.44 1.38 0 2.5-1.12 2.5-2.5 0-1-.59-1.85-1.43-2.25.84-.4 1.43-1.25 1.43-2.25 0-1.38-1.12-2.5-2.5-2.5-.53 0-1.01.16-1.42.44l.02-.19C14.5 2.12 13.38 1 12 1S9.5 2.12 9.5 3.5l.02.19c-.4-.28-.89-.44-1.42-.44-1.38 0-2.5 1.12-2.5 2.5 0 1 .59 1.85 1.43 2.25-.84.4-1.43 1.25-1.43 2.25zM12 5.5c1.38 0 2.5 1.12 2.5 2.5s-1.12 2.5-2.5 2.5S9.5 9.38 9.5 8s1.12-2.5 2.5-2.5zM3 13c0 4.97 4.03 9 9 9 0-4.97-4.03-9-9-9z"></path></g><g id="local-gas-station"><path d="M19.77 7.23l.01-.01-3.72-3.72L15 4.56l2.11 2.11c-.94.36-1.61 1.26-1.61 2.33 0 1.38 1.12 2.5 2.5 2.5.36 0 .69-.08 1-.21v7.21c0 .55-.45 1-1 1s-1-.45-1-1V14c0-1.1-.9-2-2-2h-1V5c0-1.1-.9-2-2-2H6c-1.1 0-2 .9-2 2v16h10v-7.5h1.5v5c0 1.38 1.12 2.5 2.5 2.5s2.5-1.12 2.5-2.5V9c0-.69-.28-1.32-.73-1.77zM12 10H6V5h6v5zm6 0c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1z"></path></g><g id="local-grocery-store"><path d="M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z"></path></g><g id="local-hospital"><path d="M19 3H5c-1.1 0-1.99.9-1.99 2L3 19c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-1 11h-4v4h-4v-4H6v-4h4V6h4v4h4v4z"></path></g><g id="local-hotel"><path d="M7 13c1.66 0 3-1.34 3-3S8.66 7 7 7s-3 1.34-3 3 1.34 3 3 3zm12-6h-8v7H3V5H1v15h2v-3h18v3h2v-9c0-2.21-1.79-4-4-4z"></path></g><g id="local-laundry-service"><path d="M9.17 16.83c1.56 1.56 4.1 1.56 5.66 0 1.56-1.56 1.56-4.1 0-5.66l-5.66 5.66zM18 2.01L6 2c-1.11 0-2 .89-2 2v16c0 1.11.89 2 2 2h12c1.11 0 2-.89 2-2V4c0-1.11-.89-1.99-2-1.99zM10 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM7 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm5 16c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6z"></path></g><g id="local-library"><path d="M12 11.55C9.64 9.35 6.48 8 3 8v11c3.48 0 6.64 1.35 9 3.55 2.36-2.19 5.52-3.55 9-3.55V8c-3.48 0-6.64 1.35-9 3.55zM12 8c1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3 1.34 3 3 3z"></path></g><g id="local-mall"><path d="M19 6h-2c0-2.76-2.24-5-5-5S7 3.24 7 6H5c-1.1 0-1.99.9-1.99 2L3 20c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm-7-3c1.66 0 3 1.34 3 3H9c0-1.66 1.34-3 3-3zm0 10c-2.76 0-5-2.24-5-5h2c0 1.66 1.34 3 3 3s3-1.34 3-3h2c0 2.76-2.24 5-5 5z"></path></g><g id="local-movies"><path d="M18 3v2h-2V3H8v2H6V3H4v18h2v-2h2v2h8v-2h2v2h2V3h-2zM8 17H6v-2h2v2zm0-4H6v-2h2v2zm0-4H6V7h2v2zm10 8h-2v-2h2v2zm0-4h-2v-2h2v2zm0-4h-2V7h2v2z"></path></g><g id="local-offer"><path d="M21.41 11.58l-9-9C12.05 2.22 11.55 2 11 2H4c-1.1 0-2 .9-2 2v7c0 .55.22 1.05.59 1.42l9 9c.36.36.86.58 1.41.58.55 0 1.05-.22 1.41-.59l7-7c.37-.36.59-.86.59-1.41 0-.55-.23-1.06-.59-1.42zM5.5 7C4.67 7 4 6.33 4 5.5S4.67 4 5.5 4 7 4.67 7 5.5 6.33 7 5.5 7z"></path></g><g id="local-parking"><path d="M13 3H6v18h4v-6h3c3.31 0 6-2.69 6-6s-2.69-6-6-6zm.2 8H10V7h3.2c1.1 0 2 .9 2 2s-.9 2-2 2z"></path></g><g id="local-pharmacy"><path d="M21 5h-2.64l1.14-3.14L17.15 1l-1.46 4H3v2l2 6-2 6v2h18v-2l-2-6 2-6V5zm-5 9h-3v3h-2v-3H8v-2h3V9h2v3h3v2z"></path></g><g id="local-phone"><path d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"></path></g><g id="local-pizza"><path d="M12 2C8.43 2 5.23 3.54 3.01 6L12 22l8.99-16C18.78 3.55 15.57 2 12 2zM7 7c0-1.1.9-2 2-2s2 .9 2 2-.9 2-2 2-2-.9-2-2zm5 8c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"></path></g><g id="local-play"><path d="M20 12c0-1.1.9-2 2-2V6c0-1.1-.9-2-2-2H4c-1.1 0-1.99.9-1.99 2v4c1.1 0 1.99.9 1.99 2s-.89 2-2 2v4c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2v-4c-1.1 0-2-.9-2-2zm-4.42 4.8L12 14.5l-3.58 2.3 1.08-4.12-3.29-2.69 4.24-.25L12 5.8l1.54 3.95 4.24.25-3.29 2.69 1.09 4.11z"></path></g><g id="local-post-office"><path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"></path></g><g id="local-printshop"><path d="M19 8H5c-1.66 0-3 1.34-3 3v6h4v4h12v-4h4v-6c0-1.66-1.34-3-3-3zm-3 11H8v-5h8v5zm3-7c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm-1-9H6v4h12V3z"></path></g><g id="local-see"><circle cx="12" cy="12" r="3.2"></circle><path d="M9 2L7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2H9zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z"></path></g><g id="local-shipping"><path d="M20 8h-3V4H3c-1.1 0-2 .9-2 2v11h2c0 1.66 1.34 3 3 3s3-1.34 3-3h6c0 1.66 1.34 3 3 3s3-1.34 3-3h2v-5l-3-4zM6 18.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm13.5-9l1.96 2.5H17V9.5h2.5zm-1.5 9c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"></path></g><g id="local-taxi"><path d="M18.92 6.01C18.72 5.42 18.16 5 17.5 5H15V3H9v2H6.5c-.66 0-1.21.42-1.42 1.01L3 12v8c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-1h12v1c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-8l-2.08-5.99zM6.5 16c-.83 0-1.5-.67-1.5-1.5S5.67 13 6.5 13s1.5.67 1.5 1.5S7.33 16 6.5 16zm11 0c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zM5 11l1.5-4.5h11L19 11H5z"></path></g><g id="map"><path d="M20.5 3l-.16.03L15 5.1 9 3 3.36 4.9c-.21.07-.36.25-.36.48V20.5c0 .28.22.5.5.5l.16-.03L9 18.9l6 2.1 5.64-1.9c.21-.07.36-.25.36-.48V3.5c0-.28-.22-.5-.5-.5zM15 19l-6-2.11V5l6 2.11V19z"></path></g><g id="my-location"><path d="M12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm8.94 3c-.46-4.17-3.77-7.48-7.94-7.94V1h-2v2.06C6.83 3.52 3.52 6.83 3.06 11H1v2h2.06c.46 4.17 3.77 7.48 7.94 7.94V23h2v-2.06c4.17-.46 7.48-3.77 7.94-7.94H23v-2h-2.06zM12 19c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"></path></g><g id="navigation"><path d="M12 2L4.5 20.29l.71.71L12 18l6.79 3 .71-.71z"></path></g><g id="near-me"><path d="M21 3L3 10.53v.98l6.84 2.65L12.48 21h.98L21 3z"></path></g><g id="person-pin"><path d="M19 2H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h4l3 3 3-3h4c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-7 3.3c1.49 0 2.7 1.21 2.7 2.7 0 1.49-1.21 2.7-2.7 2.7-1.49 0-2.7-1.21-2.7-2.7 0-1.49 1.21-2.7 2.7-2.7zM18 16H6v-.9c0-2 4-3.1 6-3.1s6 1.1 6 3.1v.9z"></path></g><g id="person-pin-circle"><path d="M12 2C8.14 2 5 5.14 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.86-3.14-7-7-7zm0 2c1.1 0 2 .9 2 2 0 1.11-.9 2-2 2s-2-.89-2-2c0-1.1.9-2 2-2zm0 10c-1.67 0-3.14-.85-4-2.15.02-1.32 2.67-2.05 4-2.05s3.98.73 4 2.05c-.86 1.3-2.33 2.15-4 2.15z"></path></g><g id="pin-drop"><path d="M18 8c0-3.31-2.69-6-6-6S6 4.69 6 8c0 4.5 6 11 6 11s6-6.5 6-11zm-8 0c0-1.1.9-2 2-2s2 .9 2 2-.89 2-2 2c-1.1 0-2-.9-2-2zM5 20v2h14v-2H5z"></path></g><g id="place"><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"></path></g><g id="rate-review"><path d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 14v-2.47l6.88-6.88c.2-.2.51-.2.71 0l1.77 1.77c.2.2.2.51 0 .71L8.47 14H6zm12 0h-7.5l2-2H18v2z"></path></g><g id="restaurant"><path d="M11 9H9V2H7v7H5V2H3v7c0 2.12 1.66 3.84 3.75 3.97V22h2.5v-9.03C11.34 12.84 13 11.12 13 9V2h-2v7zm5-3v8h2.5v8H21V2c-2.76 0-5 2.24-5 4z"></path></g><g id="restaurant-menu"><path d="M8.1 13.34l2.83-2.83L3.91 3.5c-1.56 1.56-1.56 4.09 0 5.66l4.19 4.18zm6.78-1.81c1.53.71 3.68.21 5.27-1.38 1.91-1.91 2.28-4.65.81-6.12-1.46-1.46-4.2-1.1-6.12.81-1.59 1.59-2.09 3.74-1.38 5.27L3.7 19.87l1.41 1.41L12 14.41l6.88 6.88 1.41-1.41L13.41 13l1.47-1.47z"></path></g><g id="satellite"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM5 4.99h3C8 6.65 6.66 8 5 8V4.99zM5 12v-2c2.76 0 5-2.25 5-5.01h2C12 8.86 8.87 12 5 12zm0 6l3.5-4.5 2.5 3.01L14.5 12l4.5 6H5z"></path></g><g id="store-mall-directory"><path d="M20 4H4v2h16V4zm1 10v-2l-1-5H4l-1 5v2h1v6h10v-6h4v6h2v-6h1zm-9 4H6v-4h6v4z"></path></g><g id="streetview"><path d="M12.56 14.33c-.34.27-.56.7-.56 1.17V21h7c1.1 0 2-.9 2-2v-5.98c-.94-.33-1.95-.52-3-.52-2.03 0-3.93.7-5.44 1.83z"></path><circle cx="18" cy="6" r="5"></circle><path d="M11.5 6c0-1.08.27-2.1.74-3H5c-1.1 0-2 .9-2 2v14c0 .55.23 1.05.59 1.41l9.82-9.82C12.23 9.42 11.5 7.8 11.5 6z"></path></g><g id="subway"><circle cx="15.5" cy="16" r="1"></circle><circle cx="8.5" cy="16" r="1"></circle><path d="M7.01 9h10v5h-10zM17.8 2.8C16 2.09 13.86 2 12 2c-1.86 0-4 .09-5.8.8C3.53 3.84 2 6.05 2 8.86V22h20V8.86c0-2.81-1.53-5.02-4.2-6.06zm.2 13.08c0 1.45-1.18 2.62-2.63 2.62l1.13 1.12V20H15l-1.5-1.5h-2.83L9.17 20H7.5v-.38l1.12-1.12C7.18 18.5 6 17.32 6 15.88V9c0-2.63 3-3 6-3 3.32 0 6 .38 6 3v6.88z"></path></g><g id="terrain"><path d="M14 6l-3.75 5 2.85 3.8-1.6 1.2C9.81 13.75 7 10 7 10l-6 8h22L14 6z"></path></g><g id="traffic"><path d="M20 10h-3V8.86c1.72-.45 3-2 3-3.86h-3V4c0-.55-.45-1-1-1H8c-.55 0-1 .45-1 1v1H4c0 1.86 1.28 3.41 3 3.86V10H4c0 1.86 1.28 3.41 3 3.86V15H4c0 1.86 1.28 3.41 3 3.86V20c0 .55.45 1 1 1h8c.55 0 1-.45 1-1v-1.14c1.72-.45 3-2 3-3.86h-3v-1.14c1.72-.45 3-2 3-3.86zm-8 9c-1.11 0-2-.9-2-2s.89-2 2-2c1.1 0 2 .9 2 2s-.89 2-2 2zm0-5c-1.11 0-2-.9-2-2s.89-2 2-2c1.1 0 2 .9 2 2s-.89 2-2 2zm0-5c-1.11 0-2-.9-2-2 0-1.11.89-2 2-2 1.1 0 2 .89 2 2 0 1.1-.89 2-2 2z"></path></g><g id="train"><path d="M12 2c-4 0-8 .5-8 4v9.5C4 17.43 5.57 19 7.5 19L6 20.5v.5h2.23l2-2H14l2 2h2v-.5L16.5 19c1.93 0 3.5-1.57 3.5-3.5V6c0-3.5-3.58-4-8-4zM7.5 17c-.83 0-1.5-.67-1.5-1.5S6.67 14 7.5 14s1.5.67 1.5 1.5S8.33 17 7.5 17zm3.5-7H6V6h5v4zm2 0V6h5v4h-5zm3.5 7c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"></path></g><g id="tram"><path d="M19 16.94V8.5c0-2.79-2.61-3.4-6.01-3.49l.76-1.51H17V2H7v1.5h4.75l-.76 1.52C7.86 5.11 5 5.73 5 8.5v8.44c0 1.45 1.19 2.66 2.59 2.97L6 21.5v.5h2.23l2-2H14l2 2h2v-.5L16.5 20h-.08c1.69 0 2.58-1.37 2.58-3.06zm-7 1.56c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm5-4.5H7V9h10v5z"></path></g><g id="transfer-within-a-station"><path d="M16.49 15.5v-1.75L14 16.25l2.49 2.5V17H22v-1.5zm3.02 4.25H14v1.5h5.51V23L22 20.5 19.51 18zM9.5 5.5c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zM5.75 8.9L3 23h2.1l1.75-8L9 17v6h2v-7.55L8.95 13.4l.6-3C10.85 12 12.8 13 15 13v-2c-1.85 0-3.45-1-4.35-2.45l-.95-1.6C9.35 6.35 8.7 6 8 6c-.25 0-.5.05-.75.15L2 8.3V13h2V9.65l1.75-.75"></path></g><g id="zoom-out-map"><path d="M15 3l2.3 2.3-2.89 2.87 1.42 1.42L18.7 6.7 21 9V3zM3 9l2.3-2.3 2.87 2.89 1.42-1.42L6.7 5.3 9 3H3zm6 12l-2.3-2.3 2.89-2.87-1.42-1.42L5.3 17.3 3 15v6zm12-6l-2.3 2.3-2.87-2.89-1.42 1.42 2.89 2.87L15 21h6z"></path></g></defs></svg></iron-iconset-svg><dom-module id="paper-item-body" assetpath="../bower_components/paper-item/"><template><style>:host {
        overflow: hidden; /* needed for text-overflow: ellipsis to work on ff */
        @apply --layout-vertical;
        @apply --layout-center-justified;
        @apply --layout-flex;
      }

      :host([two-line]) {
        min-height: var(--paper-item-body-two-line-min-height, 72px);
      }

      :host([three-line]) {
        min-height: var(--paper-item-body-three-line-min-height, 88px);
      }

      :host > ::slotted(*) {
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
      }

      :host > ::slotted([secondary]) {
        @apply --paper-font-body1;

        color: var(--paper-item-body-secondary-color, var(--secondary-text-color));

        @apply --paper-item-body-secondary;
      }</style><slot></slot></template><script>Polymer({is:"paper-item-body"});</script></dom-module><dom-module id="paper-contact-address" assetpath="../bower_components/paper-contact/"><template><style include="paper-contact-shared-styles"></style><paper-icon-item class="item" on-tap="openInBlankTab"><paper-ripple></paper-ripple><iron-icon class="icon" icon="maps:place" slot="item-icon"></iron-icon><div class="text"><slot></slot></div></paper-icon-item></template></dom-module><script>(function(){Polymer({is:"paper-contact-address",properties:{latitude:Number,longitude:Number},behaviors:[Polymer.PaperContactBehavior],_getTargetUrl:function _getTargetUrl(content){var url="https://www.google.com/maps/search/".concat(content);if(this.latitude&&this.longitude){url+="/@".concat(this.latitude,"+").concat(this.longitude)}return url}})})();</script><dom-module id="paper-contact-list" assetpath="../bower_components/paper-contact/"><template><style>:host {
				display: block;
			}
			::slotted(*:last-of-type) {
				border-bottom: 1px solid rgba(0, 0, 0, 0.12);
			}
			::slotted(*:last-child) {
				border-bottom: none;
			}
			::slotted() > *:last-of-type > * .icon {
				visibility: hidden;
			}
			::slotted() > *:only-of-type > * .icon {
				visibility: visible;
			}
			::slotted() > *:last-child > * .text {
				border-bottom :none;
			}</style><slot></slot></template></dom-module><script>(function(){Polymer({is:"paper-contact-list"})})();</script><script>Polymer.IronCheckedElementBehaviorImpl={properties:{checked:{type:Boolean,value:!1,reflectToAttribute:!0,notify:!0,observer:"_checkedChanged"},toggles:{type:Boolean,value:!0,reflectToAttribute:!0},value:{type:String,value:"on",observer:"_valueChanged"}},observers:["_requiredChanged(required)"],created:function created(){this._hasIronCheckedElementBehavior=!0},_getValidity:function _getValidity(){return this.disabled||!this.required||this.checked},_requiredChanged:function _requiredChanged(){if(this.required){this.setAttribute("aria-required","true")}else{this.removeAttribute("aria-required")}},_checkedChanged:function _checkedChanged(){this.active=this.checked;this.fire("iron-change")},_valueChanged:function _valueChanged(){if(this.value===void 0||null===this.value){this.value="on"}}};Polymer.IronCheckedElementBehavior=[Polymer.IronFormElementBehavior,Polymer.IronValidatableBehavior,Polymer.IronCheckedElementBehaviorImpl];</script><script>Polymer.PaperCheckedElementBehaviorImpl={_checkedChanged:function _checkedChanged(){Polymer.IronCheckedElementBehaviorImpl._checkedChanged.call(this);if(this.hasRipple()){if(this.checked){this._ripple.setAttribute("checked","")}else{this._ripple.removeAttribute("checked")}}},_buttonStateChanged:function _buttonStateChanged(){Polymer.PaperRippleBehavior._buttonStateChanged.call(this);if(this.disabled){return}if(this.isAttached){this.checked=this.active}}};Polymer.PaperCheckedElementBehavior=[Polymer.PaperInkyFocusBehavior,Polymer.IronCheckedElementBehavior,Polymer.PaperCheckedElementBehaviorImpl];</script><dom-module id="paper-checkbox" assetpath="../bower_components/paper-checkbox/"><template strip-whitespace=""><style>:host {
        display: inline-block;
        white-space: nowrap;
        cursor: pointer;
        --calculated-paper-checkbox-size: var(--paper-checkbox-size, 18px);
        /* -1px is a sentinel for the default and is replaced in `attached`. */
        --calculated-paper-checkbox-ink-size: var(--paper-checkbox-ink-size, -1px);
        @apply --paper-font-common-base;
        line-height: 0;
        -webkit-tap-highlight-color: transparent;
      }

      :host([hidden]) {
        display: none !important;
      }

      :host(:focus) {
        outline: none;
      }

      .hidden {
        display: none;
      }

      #checkboxContainer {
        display: inline-block;
        position: relative;
        width: var(--calculated-paper-checkbox-size);
        height: var(--calculated-paper-checkbox-size);
        min-width: var(--calculated-paper-checkbox-size);
        margin: var(--paper-checkbox-margin, initial);
        vertical-align: var(--paper-checkbox-vertical-align, middle);
        background-color: var(--paper-checkbox-unchecked-background-color, transparent);
      }

      #ink {
        position: absolute;

        /* Center the ripple in the checkbox by negative offsetting it by
         * (inkWidth - rippleWidth) / 2 */
        top: calc(0px - (var(--calculated-paper-checkbox-ink-size) - var(--calculated-paper-checkbox-size)) / 2);
        left: calc(0px - (var(--calculated-paper-checkbox-ink-size) - var(--calculated-paper-checkbox-size)) / 2);
        width: var(--calculated-paper-checkbox-ink-size);
        height: var(--calculated-paper-checkbox-ink-size);
        color: var(--paper-checkbox-unchecked-ink-color, var(--primary-text-color));
        opacity: 0.6;
        pointer-events: none;
      }

      #ink:dir(rtl) {
        right: calc(0px - (var(--calculated-paper-checkbox-ink-size) - var(--calculated-paper-checkbox-size)) / 2);
        left: auto;
      }

      #ink[checked] {
        color: var(--paper-checkbox-checked-ink-color, var(--primary-color));
      }

      #checkbox {
        position: relative;
        box-sizing: border-box;
        height: 100%;
        border: solid 2px;
        border-color: var(--paper-checkbox-unchecked-color, var(--primary-text-color));
        border-radius: 2px;
        pointer-events: none;
        -webkit-transition: background-color 140ms, border-color 140ms;
        transition: background-color 140ms, border-color 140ms;
      }

      /* checkbox checked animations */
      #checkbox.checked #checkmark {
        -webkit-animation: checkmark-expand 140ms ease-out forwards;
        animation: checkmark-expand 140ms ease-out forwards;
      }

      @-webkit-keyframes checkmark-expand {
        0% {
          -webkit-transform: scale(0, 0) rotate(45deg);
        }
        100% {
          -webkit-transform: scale(1, 1) rotate(45deg);
        }
      }

      @keyframes checkmark-expand {
        0% {
          transform: scale(0, 0) rotate(45deg);
        }
        100% {
          transform: scale(1, 1) rotate(45deg);
        }
      }

      #checkbox.checked {
        background-color: var(--paper-checkbox-checked-color, var(--primary-color));
        border-color: var(--paper-checkbox-checked-color, var(--primary-color));
      }

      #checkmark {
        position: absolute;
        width: 36%;
        height: 70%;
        border-style: solid;
        border-top: none;
        border-left: none;
        border-right-width: calc(2/15 * var(--calculated-paper-checkbox-size));
        border-bottom-width: calc(2/15 * var(--calculated-paper-checkbox-size));
        border-color: var(--paper-checkbox-checkmark-color, white);
        -webkit-transform-origin: 97% 86%;
        transform-origin: 97% 86%;
        box-sizing: content-box; /* protect against page-level box-sizing */
      }

      #checkmark:dir(rtl) {
        -webkit-transform-origin: 50% 14%;
        transform-origin: 50% 14%;
      }

      /* label */
      #checkboxLabel {
        position: relative;
        display: inline-block;
        vertical-align: middle;
        padding-left: var(--paper-checkbox-label-spacing, 8px);
        white-space: normal;
        line-height: normal;
        color: var(--paper-checkbox-label-color, var(--primary-text-color));
        @apply --paper-checkbox-label;
      }

      :host([checked]) #checkboxLabel {
        color: var(--paper-checkbox-label-checked-color, var(--paper-checkbox-label-color, var(--primary-text-color)));
        @apply --paper-checkbox-label-checked;
      }

      #checkboxLabel:dir(rtl) {
        padding-right: var(--paper-checkbox-label-spacing, 8px);
        padding-left: 0;
      }

      #checkboxLabel[hidden] {
        display: none;
      }

      /* disabled state */

      :host([disabled]) #checkbox {
        opacity: 0.5;
        border-color: var(--paper-checkbox-unchecked-color, var(--primary-text-color));
      }

      :host([disabled][checked]) #checkbox {
        background-color: var(--paper-checkbox-unchecked-color, var(--primary-text-color));
        opacity: 0.5;
      }

      :host([disabled]) #checkboxLabel  {
        opacity: 0.65;
      }

      /* invalid state */
      #checkbox.invalid:not(.checked) {
        border-color: var(--paper-checkbox-error-color, var(--error-color));
      }</style><div id="checkboxContainer"><div id="checkbox" class$="[[_computeCheckboxClass(checked, invalid)]]"><div id="checkmark" class$="[[_computeCheckmarkClass(checked)]]"></div></div></div><div id="checkboxLabel"><slot></slot></div></template><script>Polymer({is:"paper-checkbox",behaviors:[Polymer.PaperCheckedElementBehavior],hostAttributes:{role:"checkbox","aria-checked":!1,tabindex:0},properties:{ariaActiveAttribute:{type:String,value:"aria-checked"}},attached:function attached(){Polymer.RenderStatus.afterNextRender(this,function(){var inkSize=this.getComputedStyleValue("--calculated-paper-checkbox-ink-size").trim();if("-1px"===inkSize){var checkboxSizeText=this.getComputedStyleValue("--calculated-paper-checkbox-size").trim(),units="px",unitsMatches=checkboxSizeText.match(/[A-Za-z]+$/);if(null!==unitsMatches){units=unitsMatches[0]}var checkboxSize=parseFloat(checkboxSizeText),defaultInkSize=8/3*checkboxSize;if("px"===units){defaultInkSize=Math.floor(defaultInkSize);if(defaultInkSize%2!==checkboxSize%2){defaultInkSize++}}this.updateStyles({"--paper-checkbox-ink-size":defaultInkSize+units})}})},_computeCheckboxClass:function _computeCheckboxClass(checked,invalid){var className="";if(checked){className+="checked "}if(invalid){className+="invalid"}return className},_computeCheckmarkClass:function _computeCheckmarkClass(checked){return checked?"":"hidden"},_createRipple:function _createRipple(){this._rippleContainer=this.$.checkboxContainer;return Polymer.PaperInkyFocusBehaviorImpl._createRipple.call(this)}});</script></dom-module><dom-module id="paper-radio-button" assetpath="../bower_components/paper-radio-button/"><template strip-whitespace=""><style>:host {
        display: inline-block;
        line-height: 0;
        white-space: nowrap;
        cursor: pointer;
        @apply --paper-font-common-base;
        --calculated-paper-radio-button-size: var(--paper-radio-button-size, 16px);
        /* -1px is a sentinel for the default and is replace in `attached`. */
        --calculated-paper-radio-button-ink-size: var(--paper-radio-button-ink-size, -1px);
      }

      :host(:focus) {
        outline: none;
      }

      #radioContainer {
        @apply --layout-inline;
        @apply --layout-center-center;
        position: relative;
        width: var(--calculated-paper-radio-button-size);
        height: var(--calculated-paper-radio-button-size);
        vertical-align: middle;

        @apply --paper-radio-button-radio-container;
      }

      #ink {
        position: absolute;
        top: 50%;
        left: 50%;
        right: auto;
        width: var(--calculated-paper-radio-button-ink-size);
        height: var(--calculated-paper-radio-button-ink-size);
        color: var(--paper-radio-button-unchecked-ink-color, var(--primary-text-color));
        opacity: 0.6;
        pointer-events: none;
        -webkit-transform: translate(-50%, -50%);
        transform: translate(-50%, -50%);
      }

      #ink[checked] {
        color: var(--paper-radio-button-checked-ink-color, var(--primary-color));
      }

      #offRadio, #onRadio {
        position: absolute;
        box-sizing: border-box;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        border-radius: 50%;
      }

      #offRadio {
        border: 2px solid var(--paper-radio-button-unchecked-color, var(--primary-text-color));
        background-color: var(--paper-radio-button-unchecked-background-color, transparent);
        transition: border-color 0.28s;
      }

      #onRadio {
        background-color: var(--paper-radio-button-checked-color, var(--primary-color));
        -webkit-transform: scale(0);
        transform: scale(0);
        transition: -webkit-transform ease 0.28s;
        transition: transform ease 0.28s;
        will-change: transform;
      }

      :host([checked]) #offRadio {
        border-color: var(--paper-radio-button-checked-color, var(--primary-color));
      }

      :host([checked]) #onRadio {
        -webkit-transform: scale(0.5);
        transform: scale(0.5);
      }

      #radioLabel {
        line-height: normal;
        position: relative;
        display: inline-block;
        vertical-align: middle;
        margin-left: var(--paper-radio-button-label-spacing, 10px);
        white-space: normal;
        color: var(--paper-radio-button-label-color, var(--primary-text-color));

        @apply --paper-radio-button-label;
      }

      :host([checked]) #radioLabel {
        @apply --paper-radio-button-label-checked;
      }

      #radioLabel:dir(rtl) {
        margin-left: 0;
        margin-right: var(--paper-radio-button-label-spacing, 10px);
      }

      #radioLabel[hidden] {
        display: none;
      }

      /* disabled state */

      :host([disabled]) #offRadio {
        border-color: var(--paper-radio-button-unchecked-color, var(--primary-text-color));
        opacity: 0.5;
      }

      :host([disabled][checked]) #onRadio {
        background-color: var(--paper-radio-button-unchecked-color, var(--primary-text-color));
        opacity: 0.5;
      }

      :host([disabled]) #radioLabel {
        /* slightly darker than the button, so that it's readable */
        opacity: 0.65;
      }</style><div id="radioContainer"><div id="offRadio"></div><div id="onRadio"></div></div><div id="radioLabel"><slot></slot></div></template><script>Polymer({is:"paper-radio-button",behaviors:[Polymer.PaperCheckedElementBehavior],hostAttributes:{role:"radio","aria-checked":!1,tabindex:0},properties:{ariaActiveAttribute:{type:String,value:"aria-checked"}},ready:function ready(){this._rippleContainer=this.$.radioContainer},attached:function attached(){Polymer.RenderStatus.afterNextRender(this,function(){var inkSize=this.getComputedStyleValue("--calculated-paper-radio-button-ink-size").trim();if("-1px"===inkSize){var size=parseFloat(this.getComputedStyleValue("--calculated-paper-radio-button-size").trim()),defaultInkSize=Math.floor(3*size);if(defaultInkSize%2!==size%2){defaultInkSize++}this.updateStyles({"--paper-radio-button-ink-size":defaultInkSize+"px"})}})}});</script></dom-module><dom-module id="paper-radio-group" assetpath="../bower_components/paper-radio-group/"><template><style>:host {
        display: inline-block;
      }

      :host ::slotted(*) {
        padding: var(--paper-radio-group-item-padding, 12px);
      }</style><slot></slot></template></dom-module><script>Polymer({is:"paper-radio-group",behaviors:[Polymer.IronMenubarBehavior],hostAttributes:{role:"radiogroup"},properties:{attrForSelected:{type:String,value:"name"},selectedAttribute:{type:String,value:"checked"},selectable:{type:String,value:"paper-radio-button"},allowEmptySelection:{type:Boolean,value:!1}},select:function select(value){var newItem=this._valueToItem(value);if(newItem&&newItem.hasAttribute("disabled")){return}if(this.selected){var oldItem=this._valueToItem(this.selected);if(this.selected==value){if(this.allowEmptySelection){value=""}else{if(oldItem)oldItem.checked=!0;return}}if(oldItem)oldItem.checked=!1}Polymer.IronSelectableBehavior.select.apply(this,[value]);this.fire("paper-radio-group-changed")},_activateFocusedItem:function _activateFocusedItem(){this._itemActivate(this._valueForItem(this.focusedItem),this.focusedItem)},_onUpKey:function _onUpKey(event){this._focusPrevious();event.preventDefault();this._activateFocusedItem()},_onDownKey:function _onDownKey(event){this._focusNext();event.preventDefault();this._activateFocusedItem()},_onLeftKey:function _onLeftKey(){Polymer.IronMenubarBehaviorImpl._onLeftKey.apply(this,arguments);this._activateFocusedItem()},_onRightKey:function _onRightKey(){Polymer.IronMenubarBehaviorImpl._onRightKey.apply(this,arguments);this._activateFocusedItem()}});</script><script>Polymer.IronRangeBehavior={properties:{value:{type:Number,value:0,notify:!0,reflectToAttribute:!0},min:{type:Number,value:0,notify:!0},max:{type:Number,value:100,notify:!0},step:{type:Number,value:1,notify:!0},ratio:{type:Number,value:0,readOnly:!0,notify:!0}},observers:["_update(value, min, max, step)"],_calcRatio:function _calcRatio(value){return(this._clampValue(value)-this.min)/(this.max-this.min)},_clampValue:function _clampValue(value){return Math.min(this.max,Math.max(this.min,this._calcStep(value)))},_calcStep:function _calcStep(value){value=parseFloat(value);if(!this.step){return value}var numSteps=Math.round((value-this.min)/this.step);if(1>this.step){return numSteps/(1/this.step)+this.min}else{return numSteps*this.step+this.min}},_validateValue:function _validateValue(){var v=this._clampValue(this.value);this.value=this.oldValue=isNaN(v)?this.oldValue:v;return this.value!==v},_update:function _update(){this._validateValue();this._setRatio(100*this._calcRatio(this.value))}};</script><dom-module id="paper-progress" assetpath="../bower_components/paper-progress/"><template><style>:host {
        display: block;
        width: 200px;
        position: relative;
        overflow: hidden;
      }

      :host([hidden]), [hidden] {
        display: none !important;
      }

      #progressContainer {
        @apply --paper-progress-container;
        position: relative;
      }

      #progressContainer,
      /* the stripe for the indeterminate animation*/
      .indeterminate::after {
        height: var(--paper-progress-height, 4px);
      }

      #primaryProgress,
      #secondaryProgress,
      .indeterminate::after {
        @apply --layout-fit;
      }

      #progressContainer,
      .indeterminate::after {
        background: var(--paper-progress-container-color, var(--google-grey-300));
      }

      :host(.transiting) #primaryProgress,
      :host(.transiting) #secondaryProgress {
        -webkit-transition-property: -webkit-transform;
        transition-property: transform;

        /* Duration */
        -webkit-transition-duration: var(--paper-progress-transition-duration, 0.08s);
        transition-duration: var(--paper-progress-transition-duration, 0.08s);

        /* Timing function */
        -webkit-transition-timing-function: var(--paper-progress-transition-timing-function, ease);
        transition-timing-function: var(--paper-progress-transition-timing-function, ease);

        /* Delay */
        -webkit-transition-delay: var(--paper-progress-transition-delay, 0s);
        transition-delay: var(--paper-progress-transition-delay, 0s);
      }

      #primaryProgress,
      #secondaryProgress {
        @apply --layout-fit;
        -webkit-transform-origin: left center;
        transform-origin: left center;
        -webkit-transform: scaleX(0);
        transform: scaleX(0);
        will-change: transform;
      }

      #primaryProgress {
        background: var(--paper-progress-active-color, var(--google-green-500));
      }

      #secondaryProgress {
        background: var(--paper-progress-secondary-color, var(--google-green-100));
      }

      :host([disabled]) #primaryProgress {
        background: var(--paper-progress-disabled-active-color, var(--google-grey-500));
      }

      :host([disabled]) #secondaryProgress {
        background: var(--paper-progress-disabled-secondary-color, var(--google-grey-300));
      }

      :host(:not([disabled])) #primaryProgress.indeterminate {
        -webkit-transform-origin: right center;
        transform-origin: right center;
        -webkit-animation: indeterminate-bar var(--paper-progress-indeterminate-cycle-duration, 2s) linear infinite;
        animation: indeterminate-bar var(--paper-progress-indeterminate-cycle-duration, 2s) linear infinite;
      }

      :host(:not([disabled])) #primaryProgress.indeterminate::after {
        content: "";
        -webkit-transform-origin: center center;
        transform-origin: center center;

        -webkit-animation: indeterminate-splitter var(--paper-progress-indeterminate-cycle-duration, 2s) linear infinite;
        animation: indeterminate-splitter var(--paper-progress-indeterminate-cycle-duration, 2s) linear infinite;
      }

      @-webkit-keyframes indeterminate-bar {
        0% {
          -webkit-transform: scaleX(1) translateX(-100%);
        }
        50% {
          -webkit-transform: scaleX(1) translateX(0%);
        }
        75% {
          -webkit-transform: scaleX(1) translateX(0%);
          -webkit-animation-timing-function: cubic-bezier(.28,.62,.37,.91);
        }
        100% {
          -webkit-transform: scaleX(0) translateX(0%);
        }
      }

      @-webkit-keyframes indeterminate-splitter {
        0% {
          -webkit-transform: scaleX(.75) translateX(-125%);
        }
        30% {
          -webkit-transform: scaleX(.75) translateX(-125%);
          -webkit-animation-timing-function: cubic-bezier(.42,0,.6,.8);
        }
        90% {
          -webkit-transform: scaleX(.75) translateX(125%);
        }
        100% {
          -webkit-transform: scaleX(.75) translateX(125%);
        }
      }

      @keyframes indeterminate-bar {
        0% {
          transform: scaleX(1) translateX(-100%);
        }
        50% {
          transform: scaleX(1) translateX(0%);
        }
        75% {
          transform: scaleX(1) translateX(0%);
          animation-timing-function: cubic-bezier(.28,.62,.37,.91);
        }
        100% {
          transform: scaleX(0) translateX(0%);
        }
      }

      @keyframes indeterminate-splitter {
        0% {
          transform: scaleX(.75) translateX(-125%);
        }
        30% {
          transform: scaleX(.75) translateX(-125%);
          animation-timing-function: cubic-bezier(.42,0,.6,.8);
        }
        90% {
          transform: scaleX(.75) translateX(125%);
        }
        100% {
          transform: scaleX(.75) translateX(125%);
        }
      }</style><div id="progressContainer"><div id="secondaryProgress" hidden$="[[_hideSecondaryProgress(secondaryRatio)]]"></div><div id="primaryProgress"></div></div></template></dom-module><script>Polymer({is:"paper-progress",behaviors:[Polymer.IronRangeBehavior],properties:{secondaryProgress:{type:Number,value:0},secondaryRatio:{type:Number,value:0,readOnly:!0},indeterminate:{type:Boolean,value:!1,observer:"_toggleIndeterminate"},disabled:{type:Boolean,value:!1,reflectToAttribute:!0,observer:"_disabledChanged"}},observers:["_progressChanged(secondaryProgress, value, min, max, indeterminate)"],hostAttributes:{role:"progressbar"},_toggleIndeterminate:function _toggleIndeterminate(indeterminate){this.toggleClass("indeterminate",indeterminate,this.$.primaryProgress)},_transformProgress:function _transformProgress(progress,ratio){progress.style.transform=progress.style.webkitTransform="scaleX("+ratio/100+")"},_mainRatioChanged:function _mainRatioChanged(ratio){this._transformProgress(this.$.primaryProgress,ratio)},_progressChanged:function _progressChanged(secondaryProgress,value,min,max,indeterminate){secondaryProgress=this._clampValue(secondaryProgress);value=this._clampValue(value);var secondaryRatio=100*this._calcRatio(secondaryProgress),mainRatio=100*this._calcRatio(value);this._setSecondaryRatio(secondaryRatio);this._transformProgress(this.$.secondaryProgress,secondaryRatio);this._transformProgress(this.$.primaryProgress,mainRatio);this.secondaryProgress=secondaryProgress;if(indeterminate){this.removeAttribute("aria-valuenow")}else{this.setAttribute("aria-valuenow",value)}this.setAttribute("aria-valuemin",min);this.setAttribute("aria-valuemax",max)},_disabledChanged:function _disabledChanged(disabled){this.setAttribute("aria-disabled",disabled?"true":"false")},_hideSecondaryProgress:function _hideSecondaryProgress(secondaryRatio){return 0===secondaryRatio}});</script><dom-module id="paper-slider" assetpath="../bower_components/paper-slider/"><template strip-whitespace=""><style>:host {
        @apply --layout;
        @apply --layout-justified;
        @apply --layout-center;
        width: 200px;
        cursor: default;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
        -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
        --paper-progress-active-color: var(--paper-slider-active-color, var(--google-blue-700));
        --paper-progress-secondary-color: var(--paper-slider-secondary-color, var(--google-blue-300));
        --paper-progress-disabled-active-color: var(--paper-slider-disabled-active-color, var(--paper-grey-400));
        --paper-progress-disabled-secondary-color: var(--paper-slider-disabled-secondary-color, var(--paper-grey-400));
        --calculated-paper-slider-height: var(--paper-slider-height, 2px);
      }

      /* focus shows the ripple */
      :host(:focus) {
        outline: none;
      }

      /**
       * NOTE(keanulee): Though :host-context is not universally supported, some pages
       * still rely on paper-slider being flipped when dir="rtl" is set on body. For full
       * compatability, dir="rtl" must be explicitly set on paper-slider.
       */
      :dir(rtl) #sliderContainer {
        -webkit-transform: scaleX(-1);
        transform: scaleX(-1);
      }

      /**
       * NOTE(keanulee): This is separate from the rule above because :host-context may
       * not be recognized.
       */
      :host([dir="rtl"]) #sliderContainer {
        -webkit-transform: scaleX(-1);
        transform: scaleX(-1);
      }

      /**
       * NOTE(keanulee): Needed to override the :host-context rule (where supported)
       * to support LTR sliders in RTL pages.
       */
      :host([dir="ltr"]) #sliderContainer {
        -webkit-transform: scaleX(1);
        transform: scaleX(1);
      }

      #sliderContainer {
        position: relative;
        width: 100%;
        height: calc(30px + var(--calculated-paper-slider-height));
        margin-left: calc(15px + var(--calculated-paper-slider-height)/2);
        margin-right: calc(15px + var(--calculated-paper-slider-height)/2);
      }

      #sliderContainer:focus {
        outline: 0;
      }

      #sliderContainer.editable {
        margin-top: 12px;
        margin-bottom: 12px;
      }

      .bar-container {
        position: absolute;
        top: 0;
        bottom: 0;
        left: 0;
        right: 0;
        overflow: hidden;
      }

      .ring > .bar-container {
        left: calc(5px + var(--calculated-paper-slider-height)/2);
        transition: left 0.18s ease;
      }

      .ring.expand.dragging > .bar-container {
        transition: none;
      }

      .ring.expand:not(.pin) > .bar-container {
        left: calc(8px + var(--calculated-paper-slider-height)/2);
      }

      #sliderBar {
        padding: 15px 0;
        width: 100%;
        background-color: var(--paper-slider-bar-color, transparent);
        --paper-progress-container-color: var(--paper-slider-container-color, var(--paper-grey-400));
        --paper-progress-height: var(--calculated-paper-slider-height);
      }

      .slider-markers {
        position: absolute;
        top: calc(14px + var(--paper-slider-height,2px)/2);
        height: var(--calculated-paper-slider-height);
        left: 0;
        right: -1px;
        box-sizing: border-box;
        pointer-events: none;
        @apply --layout-horizontal;
      }

      .slider-marker {
        @apply --layout-flex;
      }
      .slider-markers::after,
      .slider-marker::after {
        content: "";
        display: block;
        margin-left: -1px;
        width: 2px;
        height: var(--calculated-paper-slider-height);
        border-radius: 50%;
        background-color: var(--paper-slider-markers-color, #000);
      }

      .slider-knob {
        position: absolute;
        left: 0;
        top: 0;
        margin-left: calc(-15px - var(--calculated-paper-slider-height)/2);
        width: calc(30px + var(--calculated-paper-slider-height));
        height: calc(30px + var(--calculated-paper-slider-height));
      }

      .transiting > .slider-knob {
        transition: left 0.08s ease;
      }

      .slider-knob:focus {
        outline: none;
      }

      .slider-knob.dragging {
        transition: none;
      }

      .snaps > .slider-knob.dragging {
        transition: -webkit-transform 0.08s ease;
        transition: transform 0.08s ease;
      }

      .slider-knob-inner {
        margin: 10px;
        width: calc(100% - 20px);
        height: calc(100% - 20px);
        background-color: var(--paper-slider-knob-color, var(--google-blue-700));
        border: 2px solid var(--paper-slider-knob-color, var(--google-blue-700));
        border-radius: 50%;

        -moz-box-sizing: border-box;
        box-sizing: border-box;

        transition-property: -webkit-transform, background-color, border;
        transition-property: transform, background-color, border;
        transition-duration: 0.18s;
        transition-timing-function: ease;
      }

      .expand:not(.pin) > .slider-knob > .slider-knob-inner {
        -webkit-transform: scale(1.5);
        transform: scale(1.5);
      }

      .ring > .slider-knob > .slider-knob-inner {
        background-color: var(--paper-slider-knob-start-color, transparent);
        border: 2px solid var(--paper-slider-knob-start-border-color, var(--paper-grey-400));
      }

      .slider-knob-inner::before {
        background-color: var(--paper-slider-pin-color, var(--google-blue-700));
      }

      .pin > .slider-knob > .slider-knob-inner::before {
        content: "";
        position: absolute;
        top: 0;
        left: 50%;
        margin-left: -13px;
        width: 26px;
        height: 26px;
        border-radius: 50% 50% 50% 0;

        -webkit-transform: rotate(-45deg) scale(0) translate(0);
        transform: rotate(-45deg) scale(0) translate(0);
      }

      .slider-knob-inner::before,
      .slider-knob-inner::after {
        transition: -webkit-transform .18s ease, background-color .18s ease;
        transition: transform .18s ease, background-color .18s ease;
      }

      .pin.ring > .slider-knob > .slider-knob-inner::before {
        background-color: var(--paper-slider-pin-start-color, var(--paper-grey-400));
      }

      .pin.expand > .slider-knob > .slider-knob-inner::before {
        -webkit-transform: rotate(-45deg) scale(1) translate(17px, -17px);
        transform: rotate(-45deg) scale(1) translate(17px, -17px);
      }

      .pin > .slider-knob > .slider-knob-inner::after {
        content: attr(value);
        position: absolute;
        top: 0;
        left: 50%;
        margin-left: -16px;
        width: 32px;
        height: 26px;
        text-align: center;
        color: var(--paper-slider-font-color, #fff);
        font-size: 10px;

        -webkit-transform: scale(0) translate(0);
        transform: scale(0) translate(0);
      }

      .pin.expand > .slider-knob > .slider-knob-inner::after {
        -webkit-transform: scale(1) translate(0, -17px);
        transform: scale(1) translate(0, -17px);
      }

      /* paper-input */
      .slider-input {
        width: 50px;
        overflow: hidden;
        --paper-input-container-input: {
          text-align: center;
          @apply --paper-slider-input-container-input;
        };
        @apply --paper-slider-input;
      }

      /* disabled state */
      #sliderContainer.disabled {
        pointer-events: none;
      }

      .disabled > .slider-knob > .slider-knob-inner {
        background-color: var(--paper-slider-disabled-knob-color, var(--paper-grey-400));
        border: 2px solid var(--paper-slider-disabled-knob-color, var(--paper-grey-400));
        -webkit-transform: scale3d(0.75, 0.75, 1);
        transform: scale3d(0.75, 0.75, 1);
      }

      .disabled.ring > .slider-knob > .slider-knob-inner {
        background-color: var(--paper-slider-knob-start-color, transparent);
        border: 2px solid var(--paper-slider-knob-start-border-color, var(--paper-grey-400));
      }

      paper-ripple {
        color: var(--paper-slider-knob-color, var(--google-blue-700));
      }</style><div id="sliderContainer" class$="[[_getClassNames(disabled, pin, snaps, immediateValue, min, expand, dragging, transiting, editable)]]"><div class="bar-container"><paper-progress disabled$="[[disabled]]" id="sliderBar" aria-hidden="true" min="[[min]]" max="[[max]]" step="[[step]]" value="[[immediateValue]]" secondary-progress="[[secondaryProgress]]" on-down="_bardown" on-up="_resetKnob" on-track="_bartrack" on-tap="_barclick"></paper-progress></div><template is="dom-if" if="[[snaps]]"><div class="slider-markers"><template is="dom-repeat" items="[[markers]]"><div class="slider-marker"></div></template></div></template><div id="sliderKnob" class="slider-knob" on-down="_knobdown" on-up="_resetKnob" on-track="_onTrack" on-transitionend="_knobTransitionEnd"><div class="slider-knob-inner" value$="[[immediateValue]]"></div></div></div><template is="dom-if" if="[[editable]]"><paper-input id="input" type="number" step="[[step]]" min="[[min]]" max="[[max]]" class="slider-input" disabled$="[[disabled]]" value="[[immediateValue]]" on-change="_changeValue" on-keydown="_inputKeyDown" no-label-float=""></paper-input></template></template><script>Polymer({is:"paper-slider",behaviors:[Polymer.IronA11yKeysBehavior,Polymer.IronFormElementBehavior,Polymer.PaperInkyFocusBehavior,Polymer.IronRangeBehavior],properties:{snaps:{type:Boolean,value:!1,notify:!0},pin:{type:Boolean,value:!1,notify:!0},secondaryProgress:{type:Number,value:0,notify:!0,observer:"_secondaryProgressChanged"},editable:{type:Boolean,value:!1},immediateValue:{type:Number,value:0,readOnly:!0,notify:!0},maxMarkers:{type:Number,value:0,notify:!0},expand:{type:Boolean,value:!1,readOnly:!0},ignoreBarTouch:{type:Boolean,value:!1},dragging:{type:Boolean,value:!1,readOnly:!0,notify:!0},transiting:{type:Boolean,value:!1,readOnly:!0},markers:{type:Array,readOnly:!0,value:function value(){return[]}}},observers:["_updateKnob(value, min, max, snaps, step)","_valueChanged(value)","_immediateValueChanged(immediateValue)","_updateMarkers(maxMarkers, min, max, snaps)"],hostAttributes:{role:"slider",tabindex:0},keyBindings:{left:"_leftKey",right:"_rightKey","down pagedown home":"_decrementKey","up pageup end":"_incrementKey"},ready:function ready(){if(this.ignoreBarTouch){Polymer.Gestures.setTouchAction(this.$.sliderBar,"auto")}},increment:function increment(){this.value=this._clampValue(this.value+this.step)},decrement:function decrement(){this.value=this._clampValue(this.value-this.step)},_updateKnob:function _updateKnob(value,min,max){this.setAttribute("aria-valuemin",min);this.setAttribute("aria-valuemax",max);this.setAttribute("aria-valuenow",value);this._positionKnob(100*this._calcRatio(value))},_valueChanged:function _valueChanged(){this.fire("value-change",{composed:!0})},_immediateValueChanged:function _immediateValueChanged(){if(this.dragging){this.fire("immediate-value-change",{composed:!0})}else{this.value=this.immediateValue}},_secondaryProgressChanged:function _secondaryProgressChanged(){this.secondaryProgress=this._clampValue(this.secondaryProgress)},_expandKnob:function _expandKnob(){this._setExpand(!0)},_resetKnob:function _resetKnob(){this.cancelDebouncer("expandKnob");this._setExpand(!1)},_positionKnob:function _positionKnob(ratio){this._setImmediateValue(this._calcStep(this._calcKnobPosition(ratio)));this._setRatio(100*this._calcRatio(this.immediateValue));this.$.sliderKnob.style.left=this.ratio+"%";if(this.dragging){this._knobstartx=this.ratio*this._w/100;this.translate3d(0,0,0,this.$.sliderKnob)}},_calcKnobPosition:function _calcKnobPosition(ratio){return(this.max-this.min)*ratio/100+this.min},_onTrack:function _onTrack(event){event.stopPropagation();switch(event.detail.state){case"start":this._trackStart(event);break;case"track":this._trackX(event);break;case"end":this._trackEnd();break;}},_trackStart:function _trackStart(){this._setTransiting(!1);this._w=this.$.sliderBar.offsetWidth;this._x=this.ratio*this._w/100;this._startx=this._x;this._knobstartx=this._startx;this._minx=-this._startx;this._maxx=this._w-this._startx;this.$.sliderKnob.classList.add("dragging");this._setDragging(!0)},_trackX:function _trackX(event){if(!this.dragging){this._trackStart(event)}var direction=this._isRTL?-1:1,dx=Math.min(this._maxx,Math.max(this._minx,event.detail.dx*direction));this._x=this._startx+dx;var immediateValue=this._calcStep(this._calcKnobPosition(100*(this._x/this._w)));this._setImmediateValue(immediateValue);var translateX=this._calcRatio(this.immediateValue)*this._w-this._knobstartx;this.translate3d(translateX+"px",0,0,this.$.sliderKnob)},_trackEnd:function _trackEnd(){var s=this.$.sliderKnob.style;this.$.sliderKnob.classList.remove("dragging");this._setDragging(!1);this._resetKnob();this.value=this.immediateValue;s.transform=s.webkitTransform="";this.fire("change",{composed:!0})},_knobdown:function _knobdown(event){this._expandKnob();event.preventDefault();this.focus()},_bartrack:function _bartrack(event){if(this._allowBarEvent(event)){this._onTrack(event)}},_barclick:function _barclick(event){this._w=this.$.sliderBar.offsetWidth;var rect=this.$.sliderBar.getBoundingClientRect(),ratio=100*((event.detail.x-rect.left)/this._w);if(this._isRTL){ratio=100-ratio}var prevRatio=this.ratio;this._setTransiting(!0);this._positionKnob(ratio);if(prevRatio===this.ratio){this._setTransiting(!1)}this.async(function(){this.fire("change",{composed:!0})});event.preventDefault();this.focus()},_bardown:function _bardown(event){if(this._allowBarEvent(event)){this.debounce("expandKnob",this._expandKnob,60);this._barclick(event)}},_knobTransitionEnd:function _knobTransitionEnd(event){if(event.target===this.$.sliderKnob){this._setTransiting(!1)}},_updateMarkers:function _updateMarkers(maxMarkers,min,max,snaps){if(!snaps){this._setMarkers([])}var steps=Math.round((max-min)/this.step);if(steps>maxMarkers){steps=maxMarkers}if(0>steps||!isFinite(steps)){steps=0}this._setMarkers(Array(steps))},_mergeClasses:function _mergeClasses(classes){return Object.keys(classes).filter(function(className){return classes[className]}).join(" ")},_getClassNames:function _getClassNames(){return this._mergeClasses({disabled:this.disabled,pin:this.pin,snaps:this.snaps,ring:this.immediateValue<=this.min,expand:this.expand,dragging:this.dragging,transiting:this.transiting,editable:this.editable})},_allowBarEvent:function _allowBarEvent(event){return!this.ignoreBarTouch||babelHelpers.instanceof(event.detail.sourceEvent,MouseEvent)},get _isRTL(){if(this.__isRTL===void 0){this.__isRTL="rtl"===window.getComputedStyle(this).direction}return this.__isRTL},_leftKey:function _leftKey(event){if(this._isRTL)this._incrementKey(event);else this._decrementKey(event)},_rightKey:function _rightKey(event){if(this._isRTL)this._decrementKey(event);else this._incrementKey(event)},_incrementKey:function _incrementKey(event){if(!this.disabled){if("end"===event.detail.key){this.value=this.max}else{this.increment()}this.fire("change");event.preventDefault()}},_decrementKey:function _decrementKey(event){if(!this.disabled){if("home"===event.detail.key){this.value=this.min}else{this.decrement()}this.fire("change");event.preventDefault()}},_changeValue:function _changeValue(event){this.value=event.target.value;this.fire("change",{composed:!0})},_inputKeyDown:function _inputKeyDown(event){event.stopPropagation()},_createRipple:function _createRipple(){this._rippleContainer=this.$.sliderKnob;return Polymer.PaperInkyFocusBehaviorImpl._createRipple.call(this)},_focusedChanged:function _focusedChanged(receivedFocusFromKeyboard){if(receivedFocusFromKeyboard){this.ensureRipple()}if(this.hasRipple()){if(receivedFocusFromKeyboard){this._ripple.style.display=""}else{this._ripple.style.display="none"}this._ripple.holdDown=receivedFocusFromKeyboard}}});</script></dom-module><script>(function(k,ha){"object"===("undefined"===typeof exports?"undefined":babelHelpers.typeof(exports))&&"undefined"!==typeof module?ha(exports):"function"===typeof define&&define.amd?define(["exports"],ha):ha(k.THREE={})})(this,function(k){var _Mathtan=Math.tan,_Mathatan2=Math.atan,_Mathacos=Math.acos,_Mathround=Math.round,_Mathceil=Math.ceil,_NumberisInteger=Number.isInteger,_Mathsign=Math.sign,_NumberEPSILON=Number.EPSILON,_Mathsin=Math.sin,_Mathatan=Math.atan2,_Mathpow=Math.pow,_MathPI=Math.PI,_Mathsqrt=Math.sqrt,_MathLN=Math.LN2,_Mathlog=Math.log,_Mathmax=Math.max,_Mathcos=Math.cos,_Mathmin=Math.min,_Mathabs=Math.abs,_Mathfloor=Math.floor;function ha(){}function y(a,b){this.x=a||0;this.y=b||0}function F(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];0<arguments.length&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function X(a,b,c,d){this._x=a||0;this._y=b||0;this._z=c||0;this._w=void 0!==d?d:1}function p(a,b,c){this.x=a||0;this.y=b||0;this.z=c||0}function ta(){this.elements=[1,0,0,0,1,0,0,0,1];0<arguments.length&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}function ca(a,b,c,d,e,f,g,h,l,m){Object.defineProperty(this,"id",{value:Df++});this.uuid=P.generateUUID();this.name="";this.image=void 0!==a?a:ca.DEFAULT_IMAGE;this.mipmaps=[];this.mapping=void 0!==b?b:ca.DEFAULT_MAPPING;this.wrapS=void 0!==c?c:1001;this.wrapT=void 0!==d?d:1001;this.magFilter=void 0!==e?e:1006;this.minFilter=void 0!==f?f:1008;this.anisotropy=void 0!==l?l:1;this.format=void 0!==g?g:1023;this.type=void 0!==h?h:1009;this.offset=new y(0,0);this.repeat=new y(1,1);this.center=new y(0,0);this.rotation=0;this.matrixAutoUpdate=!0;this.matrix=new ta;this.generateMipmaps=!0;this.premultiplyAlpha=!1;this.flipY=!0;this.unpackAlignment=4;this.encoding=void 0!==m?m:3E3;this.version=0;this.onUpdate=null}function U(a,b,c,d){this.x=a||0;this.y=b||0;this.z=c||0;this.w=void 0!==d?d:1}function kb(a,b,c){this.width=a;this.height=b;this.scissor=new U(0,0,a,b);this.scissorTest=!1;this.viewport=new U(0,0,a,b);c=c||{};void 0===c.minFilter&&(c.minFilter=1006);this.texture=new ca(void 0,void 0,c.wrapS,c.wrapT,c.magFilter,c.minFilter,c.format,c.type,c.anisotropy,c.encoding);this.texture.generateMipmaps=void 0!==c.generateMipmaps?c.generateMipmaps:!0;this.depthBuffer=void 0!==c.depthBuffer?c.depthBuffer:!0;this.stencilBuffer=void 0!==c.stencilBuffer?c.stencilBuffer:!0;this.depthTexture=void 0!==c.depthTexture?c.depthTexture:null}function Lb(a,b,c){kb.call(this,a,b,c);this.activeMipMapLevel=this.activeCubeFace=0}function lb(a,b,c,d,e,f,g,h,l,m,v,n){ca.call(this,null,f,g,h,l,m,d,e,v,n);this.image={data:a,width:b,height:c};this.magFilter=void 0!==l?l:1003;this.minFilter=void 0!==m?m:1003;this.flipY=this.generateMipmaps=!1;this.unpackAlignment=1}function Wa(a,b){this.min=void 0!==a?a:new p(1/0,1/0,1/0);this.max=void 0!==b?b:new p(-Infinity,-Infinity,-Infinity)}function Ga(a,b){this.center=void 0!==a?a:new p;this.radius=void 0!==b?b:0}function Ha(a,b){this.normal=void 0!==a?a:new p(1,0,0);this.constant=void 0!==b?b:0}function qd(a,b,c,d,e,f){this.planes=[void 0!==a?a:new Ha,void 0!==b?b:new Ha,void 0!==c?c:new Ha,void 0!==d?d:new Ha,void 0!==e?e:new Ha,void 0!==f?f:new Ha]}function K(a,b,c){return void 0===b&&void 0===c?this.set(a):this.setRGB(a,b,c)}function Td(){function a(e,f){!1!==c&&(d(e,f),b.requestAnimationFrame(a))}var b=null,c=!1,d=null;return{start:function start(){!0!==c&&null!==d&&(b.requestAnimationFrame(a),c=!0)},stop:function stop(){c=!1},setAnimationLoop:function setAnimationLoop(a){d=a},setContext:function setContext(a){b=a}}}function Ef(a){function b(b,c){var d=b.array,e=b.dynamic?a.DYNAMIC_DRAW:a.STATIC_DRAW,h=a.createBuffer();a.bindBuffer(c,h);a.bufferData(c,d,e);b.onUploadCallback();c=a.FLOAT;babelHelpers.instanceof(d,Float32Array)?c=a.FLOAT:babelHelpers.instanceof(d,Float64Array)?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):babelHelpers.instanceof(d,Uint16Array)?c=a.UNSIGNED_SHORT:babelHelpers.instanceof(d,Int16Array)?c=a.SHORT:babelHelpers.instanceof(d,Uint32Array)?c=a.UNSIGNED_INT:babelHelpers.instanceof(d,Int32Array)?c=a.INT:babelHelpers.instanceof(d,Int8Array)?c=a.BYTE:babelHelpers.instanceof(d,Uint8Array)&&(c=a.UNSIGNED_BYTE);return{buffer:h,type:c,bytesPerElement:d.BYTES_PER_ELEMENT,version:b.version}}var c=new WeakMap;return{get:function get(a){a.isInterleavedBufferAttribute&&(a=a.data);return c.get(a)},remove:function remove(b){b.isInterleavedBufferAttribute&&(b=b.data);var d=c.get(b);d&&(a.deleteBuffer(d.buffer),c.delete(b))},update:function update(d,e){d.isInterleavedBufferAttribute&&(d=d.data);var f=c.get(d);if(void 0===f)c.set(d,b(d,e));else if(f.version<d.version){var g=d,h=g.array,l=g.updateRange;a.bindBuffer(e,f.buffer);!1===g.dynamic?a.bufferData(e,h,a.STATIC_DRAW):-1===l.count?a.bufferSubData(e,0,h):0===l.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(a.bufferSubData(e,l.offset*h.BYTES_PER_ELEMENT,h.subarray(l.offset,l.offset+l.count)),l.count=-1);f.version=d.version}}}}function mb(a,b,c,d){this._x=a||0;this._y=b||0;this._z=c||0;this._order=d||mb.DefaultOrder}function Ud(){this.mask=1}function B(){Object.defineProperty(this,"id",{value:Ff++});this.uuid=P.generateUUID();this.name="";this.type="Object3D";this.parent=null;this.children=[];this.up=B.DefaultUp.clone();var a=new p,b=new mb,c=new X,d=new p(1,1,1);b.onChange(function(){c.setFromEuler(b,!1)});c.onChange(function(){b.setFromQuaternion(c,void 0,!1)});Object.defineProperties(this,{position:{enumerable:!0,value:a},rotation:{enumerable:!0,value:b},quaternion:{enumerable:!0,value:c},scale:{enumerable:!0,value:d},modelViewMatrix:{value:new F},normalMatrix:{value:new ta}});this.matrix=new F;this.matrixWorld=new F;this.matrixAutoUpdate=B.DefaultMatrixAutoUpdate;this.matrixWorldNeedsUpdate=!1;this.layers=new Ud;this.visible=!0;this.receiveShadow=this.castShadow=!1;this.frustumCulled=!0;this.renderOrder=0;this.userData={}}function Qa(){B.call(this);this.type="Camera";this.matrixWorldInverse=new F;this.projectionMatrix=new F}function Mb(a,b,c,d,e,f){Qa.call(this);this.type="OrthographicCamera";this.zoom=1;this.view=null;this.left=a;this.right=b;this.top=c;this.bottom=d;this.near=void 0!==e?e:.1;this.far=void 0!==f?f:2E3;this.updateProjectionMatrix()}function Xa(a,b,c,d,e,f){this.a=a;this.b=b;this.c=c;this.normal=d&&d.isVector3?d:new p;this.vertexNormals=Array.isArray(d)?d:[];this.color=e&&e.isColor?e:new K;this.vertexColors=Array.isArray(e)?e:[];this.materialIndex=void 0!==f?f:0}function J(){Object.defineProperty(this,"id",{value:Gf+=2});this.uuid=P.generateUUID();this.name="";this.type="Geometry";this.vertices=[];this.colors=[];this.faces=[];this.faceVertexUvs=[[]];this.morphTargets=[];this.morphNormals=[];this.skinWeights=[];this.skinIndices=[];this.lineDistances=[];this.boundingSphere=this.boundingBox=null;this.groupsNeedUpdate=this.lineDistancesNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.uvsNeedUpdate=this.verticesNeedUpdate=this.elementsNeedUpdate=!1}function O(a,b,c){if(Array.isArray(a))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="";this.array=a;this.itemSize=b;this.count=void 0!==a?a.length/b:0;this.normalized=!0===c;this.dynamic=!1;this.updateRange={offset:0,count:-1};this.version=0}function vc(a,b,c){O.call(this,new Int8Array(a),b,c)}function wc(a,b,c){O.call(this,new Uint8Array(a),b,c)}function xc(a,b,c){O.call(this,new Uint8ClampedArray(a),b,c)}function yc(a,b,c){O.call(this,new Int16Array(a),b,c)}function nb(a,b,c){O.call(this,new Uint16Array(a),b,c)}function zc(a,b,c){O.call(this,new Int32Array(a),b,c)}function ob(a,b,c){O.call(this,new Uint32Array(a),b,c)}function A(a,b,c){O.call(this,new Float32Array(a),b,c)}function Ac(a,b,c){O.call(this,new Float64Array(a),b,c)}function Ee(){this.vertices=[];this.normals=[];this.colors=[];this.uvs=[];this.uvs2=[];this.groups=[];this.morphTargets={};this.skinWeights=[];this.skinIndices=[];this.boundingSphere=this.boundingBox=null;this.groupsNeedUpdate=this.uvsNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.verticesNeedUpdate=!1}function Fe(a){if(0===a.length)return-Infinity;for(var b=a[0],c=1,d=a.length;c<d;++c){a[c]>b&&(b=a[c])}return b}function G(){Object.defineProperty(this,"id",{value:Hf+=2});this.uuid=P.generateUUID();this.name="";this.type="BufferGeometry";this.index=null;this.attributes={};this.morphAttributes={};this.groups=[];this.boundingSphere=this.boundingBox=null;this.drawRange={start:0,count:1/0};this.userData={}}function Nb(a,b,c,d,e,f){J.call(this);this.type="BoxGeometry";this.parameters={width:a,height:b,depth:c,widthSegments:d,heightSegments:e,depthSegments:f};this.fromBufferGeometry(new pb(a,b,c,d,e,f));this.mergeVertices()}function pb(a,b,c,d,e,f){function g(a,b,c,d,e,f,g,k,Q,E,Bc){var t=f/Q,u=g/E,V=f/2,z=g/2;g=Q+1;var H=f=0,C,y,A=new p;for(y=0;y<E+1;y++){var B=y*u-z;for(C=0;C<g;C++){A[a]=(C*t-V)*d,A[b]=B*e,A[c]=k/2,m.push(A.x,A.y,A.z),A[a]=0,A[b]=0,A[c]=0<k?1:-1,v.push(A.x,A.y,A.z),n.push(C/Q),n.push(1-y/E),f+=1}}for(y=0;y<E;y++){for(C=0;C<Q;C++){a=r+C+g*(y+1),b=r+(C+1)+g*(y+1),c=r+(C+1)+g*y,l.push(r+C+g*y,a,c),l.push(a,b,c),H+=6}}h.addGroup(q,H,Bc);q+=H;r+=f}G.call(this);this.type="BoxBufferGeometry";this.parameters={width:a,height:b,depth:c,widthSegments:d,heightSegments:e,depthSegments:f};var h=this;a=a||1;b=b||1;c=c||1;d=_Mathfloor(d)||1;e=_Mathfloor(e)||1;f=_Mathfloor(f)||1;var l=[],m=[],v=[],n=[],r=0,q=0;g("z","y","x",-1,-1,c,b,a,f,e,0);g("z","y","x",1,-1,c,b,-a,f,e,1);g("x","z","y",1,1,a,c,b,d,f,2);g("x","z","y",1,-1,a,c,-b,d,f,3);g("x","y","z",1,-1,a,b,c,d,e,4);g("x","y","z",-1,-1,a,b,-c,d,e,5);this.setIndex(l);this.addAttribute("position",new A(m,3));this.addAttribute("normal",new A(v,3));this.addAttribute("uv",new A(n,2))}function Cc(a,b,c,d){J.call(this);this.type="PlaneGeometry";this.parameters={width:a,height:b,widthSegments:c,heightSegments:d};this.fromBufferGeometry(new rb(a,b,c,d));this.mergeVertices()}function rb(a,b,c,d){G.call(this);this.type="PlaneBufferGeometry";this.parameters={width:a,height:b,widthSegments:c,heightSegments:d};a=a||1;b=b||1;var e=a/2,f=b/2;c=_Mathfloor(c)||1;d=_Mathfloor(d)||1;var g=c+1,h=d+1,l=a/c,m=b/d,v=[],n=[],r=[],q=[];for(a=0;a<h;a++){var t=a*m-f;for(b=0;b<g;b++){n.push(b*l-e,-t,0),r.push(0,0,1),q.push(b/c),q.push(1-a/d)}}for(a=0;a<d;a++){for(b=0;b<c;b++){e=b+g*(a+1),f=b+1+g*(a+1),h=b+1+g*a,v.push(b+g*a,e,h),v.push(e,f,h)}}this.setIndex(v);this.addAttribute("position",new A(n,3));this.addAttribute("normal",new A(r,3));this.addAttribute("uv",new A(q,2))}function L(){Object.defineProperty(this,"id",{value:If++});this.uuid=P.generateUUID();this.name="";this.type="Material";this.lights=this.fog=!0;this.blending=1;this.side=0;this.flatShading=!1;this.vertexColors=0;this.opacity=1;this.transparent=!1;this.blendSrc=204;this.blendDst=205;this.blendEquation=100;this.blendEquationAlpha=this.blendDstAlpha=this.blendSrcAlpha=null;this.depthFunc=3;this.depthWrite=this.depthTest=!0;this.clippingPlanes=null;this.clipShadows=this.clipIntersection=!1;this.shadowSide=null;this.colorWrite=!0;this.precision=null;this.polygonOffset=!1;this.polygonOffsetUnits=this.polygonOffsetFactor=0;this.dithering=!1;this.alphaTest=0;this.premultipliedAlpha=!1;this.overdraw=0;this.visible=!0;this.userData={};this.needsUpdate=!0}function ka(a){L.call(this);this.type="MeshBasicMaterial";this.color=new K(16777215);this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.envMap=this.alphaMap=this.specularMap=null;this.combine=0;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.lights=this.morphTargets=this.skinning=!1;this.setValues(a)}function Ea(a){L.call(this);this.type="ShaderMaterial";this.defines={};this.uniforms={};this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}";this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";this.linewidth=1;this.wireframe=!1;this.wireframeLinewidth=1;this.morphNormals=this.morphTargets=this.skinning=this.clipping=this.lights=this.fog=!1;this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1};this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]};this.index0AttributeName=void 0;this.uniformsNeedUpdate=!1;void 0!==a&&(void 0!==a.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(a))}function sb(a,b){this.origin=void 0!==a?a:new p;this.direction=void 0!==b?b:new p}function Ob(a,b){this.start=void 0!==a?a:new p;this.end=void 0!==b?b:new p}function Aa(a,b,c){this.a=void 0!==a?a:new p;this.b=void 0!==b?b:new p;this.c=void 0!==c?c:new p}function pa(a,b){B.call(this);this.type="Mesh";this.geometry=void 0!==a?a:new G;this.material=void 0!==b?b:new ka({color:16777215*Math.random()});this.drawMode=0;this.updateMorphTargets()}function Jf(a,b,c,d){function e(a,c){b.buffers.color.setClear(a.r,a.g,a.b,c,d)}var f=new K(0),g=0,h,l,m;return{getClearColor:function getClearColor(){return f},setClearColor:function setClearColor(a,b){f.set(a);g=void 0!==b?b:1;e(f,g)},getClearAlpha:function getClearAlpha(){return g},setClearAlpha:function setClearAlpha(a){g=a;e(f,g)},render:function render(b,d,r,q){d=d.background;null===d?e(f,g):d&&d.isColor&&(e(d,1),q=!0);(a.autoClear||q)&&a.clear(a.autoClearColor,a.autoClearDepth,a.autoClearStencil);d&&d.isCubeTexture?(void 0===m&&(m=new pa(new pb(1,1,1),new Ea({uniforms:tb.cube.uniforms,vertexShader:tb.cube.vertexShader,fragmentShader:tb.cube.fragmentShader,side:1,depthTest:!0,depthWrite:!1,fog:!1})),m.geometry.removeAttribute("normal"),m.geometry.removeAttribute("uv"),m.onBeforeRender=function(a,b,c){this.matrixWorld.copyPosition(c.matrixWorld)},c.update(m)),m.material.uniforms.tCube.value=d,b.push(m,m.geometry,m.material,0,null)):d&&d.isTexture&&(void 0===h&&(h=new Mb(-1,1,1,-1,0,1),l=new pa(new rb(2,2),new ka({depthTest:!1,depthWrite:!1,fog:!1})),c.update(l)),l.material.map=d,a.renderBufferDirect(h,null,l.geometry,l.material,l,null))}}}function Kf(a,b,c){var d;this.setMode=function(a){d=a};this.render=function(b,f){a.drawArrays(d,b,f);c.update(f,d)};this.renderInstances=function(a,f,g){var e=b.get("ANGLE_instanced_arrays");null===e?console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays."):(e.drawArraysInstancedANGLE(d,f,g,a.maxInstancedCount),c.update(g,d,a.maxInstancedCount))}}function Lf(a,b,c){function d(b){if("highp"===b){if(0<a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.HIGH_FLOAT).precision&&0<a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.HIGH_FLOAT).precision)return"highp";b="mediump"}return"mediump"===b&&0<a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.MEDIUM_FLOAT).precision&&0<a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.MEDIUM_FLOAT).precision?"mediump":"lowp"}var e,f=void 0!==c.precision?c.precision:"highp",g=d(f);g!==f&&(console.warn("THREE.WebGLRenderer:",f,"not supported, using",g,"instead."),f=g);c=!0===c.logarithmicDepthBuffer;g=a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS);var h=a.getParameter(a.MAX_VERTEX_TEXTURE_IMAGE_UNITS),l=a.getParameter(a.MAX_TEXTURE_SIZE),m=a.getParameter(a.MAX_CUBE_MAP_TEXTURE_SIZE),v=a.getParameter(a.MAX_VERTEX_ATTRIBS),n=a.getParameter(a.MAX_VERTEX_UNIFORM_VECTORS),r=a.getParameter(a.MAX_VARYING_VECTORS),q=a.getParameter(a.MAX_FRAGMENT_UNIFORM_VECTORS),t=0<h,k=!!b.get("OES_texture_float");return{getMaxAnisotropy:function getMaxAnisotropy(){if(void 0!==e)return e;var c=b.get("EXT_texture_filter_anisotropic");return e=null!==c?a.getParameter(c.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:d,precision:f,logarithmicDepthBuffer:c,maxTextures:g,maxVertexTextures:h,maxTextureSize:l,maxCubemapSize:m,maxAttributes:v,maxVertexUniforms:n,maxVaryings:r,maxFragmentUniforms:q,vertexTextures:t,floatFragmentTextures:k,floatVertexTextures:t&&k}}function Mf(){function a(){m.value!==d&&(m.value=d,m.needsUpdate=0<e);c.numPlanes=e;c.numIntersection=0}function b(a,b,d,e){var f=null!==a?a.length:0,g=null;if(0!==f){g=m.value;if(!0!==e||null===g){e=d+4*f;b=b.matrixWorldInverse;l.getNormalMatrix(b);if(null===g||g.length<e)g=new Float32Array(e);for(e=0;e!==f;++e,d+=4){h.copy(a[e]).applyMatrix4(b,l),h.normal.toArray(g,d),g[d+3]=h.constant}}m.value=g;m.needsUpdate=!0}c.numPlanes=f;return g}var c=this,d=null,e=0,f=!1,g=!1,h=new Ha,l=new ta,m={value:null,needsUpdate:!1};this.uniform=m;this.numIntersection=this.numPlanes=0;this.init=function(a,c,g){var h=0!==a.length||c||0!==e||f;f=c;d=b(a,g,0);e=a.length;return h};this.beginShadows=function(){g=!0;b(null)};this.endShadows=function(){g=!1;a()};this.setState=function(c,h,l,q,t,k){if(!f||null===c||0===c.length||g&&!l)g?b(null):a();else{l=g?0:e;var n=4*l,v=t.clippingState||null;m.value=v;v=b(c,q,n,k);for(c=0;c!==n;++c){v[c]=d[c]}t.clippingState=v;this.numIntersection=h?this.numPlanes:0;this.numPlanes+=l}}}function Nf(a){var b={};return{get:function get(c){if(void 0!==b[c])return b[c];switch(c){case"WEBGL_depth_texture":var d=a.getExtension("WEBGL_depth_texture")||a.getExtension("MOZ_WEBGL_depth_texture")||a.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":d=a.getExtension("EXT_texture_filter_anisotropic")||a.getExtension("MOZ_EXT_texture_filter_anisotropic")||a.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":d=a.getExtension("WEBGL_compressed_texture_s3tc")||a.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||a.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":d=a.getExtension("WEBGL_compressed_texture_pvrtc")||a.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:d=a.getExtension(c);}null===d&&console.warn("THREE.WebGLRenderer: "+c+" extension not supported.");return b[c]=d}}}function Of(a,b,c){function d(a){a=a.target;var g=e[a.id];null!==g.index&&b.remove(g.index);for(var l in g.attributes){b.remove(g.attributes[l])}a.removeEventListener("dispose",d);delete e[a.id];if(l=f[a.id])b.remove(l),delete f[a.id];if(l=f[g.id])b.remove(l),delete f[g.id];c.memory.geometries--}var e={},f={};return{get:function get(a,b){var f=e[b.id];if(f)return f;b.addEventListener("dispose",d);b.isBufferGeometry?f=b:b.isGeometry&&(void 0===b._bufferGeometry&&(b._bufferGeometry=new G().setFromObject(a)),f=b._bufferGeometry);e[b.id]=f;c.memory.geometries++;return f},update:function update(c){var d=c.index,e=c.attributes;null!==d&&b.update(d,a.ELEMENT_ARRAY_BUFFER);for(var f in e){b.update(e[f],a.ARRAY_BUFFER)}c=c.morphAttributes;for(f in c){d=c[f];e=0;for(var g=d.length;e<g;e++){b.update(d[e],a.ARRAY_BUFFER)}}},getWireframeAttribute:function getWireframeAttribute(c){var d=f[c.id];if(d)return d;d=[];var e=c.index,g=c.attributes;if(null!==e){e=e.array;g=0;for(var v=e.length;g<v;g+=3){var n=e[g+0],r=e[g+1],q=e[g+2];d.push(n,r,r,q,q,n)}}else for(e=g.position.array,g=0,v=e.length/3-1;g<v;g+=3){n=g+0,r=g+1,q=g+2,d.push(n,r,r,q,q,n)}d=new(65535<Fe(d)?ob:nb)(d,1);b.update(d,a.ELEMENT_ARRAY_BUFFER);return f[c.id]=d}}}function Pf(a,b,c){var d,e,f;this.setMode=function(a){d=a};this.setIndex=function(a){e=a.type;f=a.bytesPerElement};this.render=function(b,h){a.drawElements(d,h,e,b*f);c.update(h,d)};this.renderInstances=function(a,h,l){var g=b.get("ANGLE_instanced_arrays");null===g?console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays."):(g.drawElementsInstancedANGLE(d,l,e,h*f,a.maxInstancedCount),c.update(l,d,a.maxInstancedCount))}}function Qf(a){var b={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:b,programs:null,autoReset:!0,reset:function reset(){b.frame++;b.calls=0;b.triangles=0;b.points=0;b.lines=0},update:function update(c,d,e){e=e||1;b.calls++;switch(d){case a.TRIANGLES:b.triangles+=c/3*e;break;case a.TRIANGLE_STRIP:case a.TRIANGLE_FAN:b.triangles+=e*(c-2);break;case a.LINES:b.lines+=c/2*e;break;case a.LINE_STRIP:b.lines+=e*(c-1);break;case a.LINE_LOOP:b.lines+=e*c;break;case a.POINTS:b.points+=e*c;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",d);}}}}function Rf(a,b){return _Mathabs(b[1])-_Mathabs(a[1])}function Sf(a){var b={},c=new Float32Array(8);return{update:function update(d,e,f,g){var h=d.morphTargetInfluences,l=h.length;d=b[e.id];if(void 0===d){d=[];for(var m=0;m<l;m++){d[m]=[m,0]}b[e.id]=d}var v=f.morphTargets&&e.morphAttributes.position;f=f.morphNormals&&e.morphAttributes.normal;for(m=0;m<l;m++){var n=d[m];0!==n[1]&&(v&&e.removeAttribute("morphTarget"+m),f&&e.removeAttribute("morphNormal"+m))}for(m=0;m<l;m++){n=d[m],n[0]=m,n[1]=h[m]}d.sort(Rf);for(m=0;8>m;m++){if(n=d[m])if(h=n[0],l=n[1]){v&&e.addAttribute("morphTarget"+m,v[h]);f&&e.addAttribute("morphNormal"+m,f[h]);c[m]=l;continue}c[m]=0}g.getUniforms().setValue(a,"morphTargetInfluences",c)}}}function Tf(a,b){var c={};return{update:function update(d){var e=b.render.frame,f=d.geometry,g=a.get(d,f);c[g.id]!==e&&(f.isGeometry&&g.updateFromObject(d),a.update(g),c[g.id]=e);return g},dispose:function dispose(){c={}}}}function cb(a,b,c,d,e,f,g,h,l,m){a=void 0!==a?a:[];ca.call(this,a,void 0!==b?b:301,c,d,e,f,g,h,l,m);this.flipY=!1}function Pb(a,b,c){var d=a[0];if(0>=d||0<d)return a;var e=b*c,f=Ge[e];void 0===f&&(f=new Float32Array(e),Ge[e]=f);if(0!==b)for(d.toArray(f,0),d=1,e=0;d!==b;++d){e+=c,a[d].toArray(f,e)}return f}function R(a,b){if(a.length!==b.length)return!1;for(var c=0,d=a.length;c<d;c++){if(a[c]!==b[c])return!1}return!0}function qa(a,b){for(var c=0,d=b.length;c<d;c++){a[c]=b[c]}}function He(a,b){var c=Ie[b];void 0===c&&(c=new Int32Array(b),Ie[b]=c);for(var d=0;d!==b;++d){c[d]=a.allocTextureUnit()}return c}function Uf(a,b){var c=this.cache;c[0]!==b&&(a.uniform1f(this.addr,b),c[0]=b)}function Vf(a,b){var c=this.cache;c[0]!==b&&(a.uniform1i(this.addr,b),c[0]=b)}function Wf(a,b){var c=this.cache;if(void 0!==b.x){if(c[0]!==b.x||c[1]!==b.y)a.uniform2f(this.addr,b.x,b.y),c[0]=b.x,c[1]=b.y}else R(c,b)||(a.uniform2fv(this.addr,b),qa(c,b))}function Xf(a,b){var c=this.cache;if(void 0!==b.x){if(c[0]!==b.x||c[1]!==b.y||c[2]!==b.z)a.uniform3f(this.addr,b.x,b.y,b.z),c[0]=b.x,c[1]=b.y,c[2]=b.z}else if(void 0!==b.r){if(c[0]!==b.r||c[1]!==b.g||c[2]!==b.b)a.uniform3f(this.addr,b.r,b.g,b.b),c[0]=b.r,c[1]=b.g,c[2]=b.b}else R(c,b)||(a.uniform3fv(this.addr,b),qa(c,b))}function Yf(a,b){var c=this.cache;if(void 0!==b.x){if(c[0]!==b.x||c[1]!==b.y||c[2]!==b.z||c[3]!==b.w)a.uniform4f(this.addr,b.x,b.y,b.z,b.w),c[0]=b.x,c[1]=b.y,c[2]=b.z,c[3]=b.w}else R(c,b)||(a.uniform4fv(this.addr,b),qa(c,b))}function Zf(a,b){var c=this.cache,d=b.elements;void 0===d?R(c,b)||(a.uniformMatrix2fv(this.addr,!1,b),qa(c,b)):R(c,d)||(Je.set(d),a.uniformMatrix2fv(this.addr,!1,Je),qa(c,d))}function $f(a,b){var c=this.cache,d=b.elements;void 0===d?R(c,b)||(a.uniformMatrix3fv(this.addr,!1,b),qa(c,b)):R(c,d)||(Ke.set(d),a.uniformMatrix3fv(this.addr,!1,Ke),qa(c,d))}function ag(a,b){var c=this.cache,d=b.elements;void 0===d?R(c,b)||(a.uniformMatrix4fv(this.addr,!1,b),qa(c,b)):R(c,d)||(Le.set(d),a.uniformMatrix4fv(this.addr,!1,Le),qa(c,d))}function bg(a,b,c){var d=this.cache,e=c.allocTextureUnit();d[0]!==e&&(a.uniform1i(this.addr,e),d[0]=e);c.setTexture2D(b||Me,e)}function cg(a,b,c){var d=this.cache,e=c.allocTextureUnit();d[0]!==e&&(a.uniform1i(this.addr,e),d[0]=e);c.setTextureCube(b||Ne,e)}function Oe(a,b){var c=this.cache;R(c,b)||(a.uniform2iv(this.addr,b),qa(c,b))}function Pe(a,b){var c=this.cache;R(c,b)||(a.uniform3iv(this.addr,b),qa(c,b))}function Qe(a,b){var c=this.cache;R(c,b)||(a.uniform4iv(this.addr,b),qa(c,b))}function dg(a){switch(a){case 5126:return Uf;case 35664:return Wf;case 35665:return Xf;case 35666:return Yf;case 35674:return Zf;case 35675:return $f;case 35676:return ag;case 35678:case 36198:return bg;case 35680:return cg;case 5124:case 35670:return Vf;case 35667:case 35671:return Oe;case 35668:case 35672:return Pe;case 35669:case 35673:return Qe;}}function eg(a,b){var c=this.cache;R(c,b)||(a.uniform1fv(this.addr,b),qa(c,b))}function fg(a,b){var c=this.cache;R(c,b)||(a.uniform1iv(this.addr,b),qa(c,b))}function gg(a,b){var c=this.cache;b=Pb(b,this.size,2);R(c,b)||(a.uniform2fv(this.addr,b),this.updateCache(b))}function hg(a,b){var c=this.cache;b=Pb(b,this.size,3);R(c,b)||(a.uniform3fv(this.addr,b),this.updateCache(b))}function ig(a,b){var c=this.cache;b=Pb(b,this.size,4);R(c,b)||(a.uniform4fv(this.addr,b),this.updateCache(b))}function jg(a,b){var c=this.cache;b=Pb(b,this.size,4);R(c,b)||(a.uniformMatrix2fv(this.addr,!1,b),this.updateCache(b))}function kg(a,b){var c=this.cache;b=Pb(b,this.size,9);R(c,b)||(a.uniformMatrix3fv(this.addr,!1,b),this.updateCache(b))}function lg(a,b){var c=this.cache;b=Pb(b,this.size,16);R(c,b)||(a.uniformMatrix4fv(this.addr,!1,b),this.updateCache(b))}function mg(a,b,c){var d=this.cache,e=b.length,f=He(c,e);!1===R(d,f)&&(a.uniform1iv(this.addr,f),qa(d,f));for(a=0;a!==e;++a){c.setTexture2D(b[a]||Me,f[a])}}function ng(a,b,c){var d=this.cache,e=b.length,f=He(c,e);!1===R(d,f)&&(a.uniform1iv(this.addr,f),qa(d,f));for(a=0;a!==e;++a){c.setTextureCube(b[a]||Ne,f[a])}}function og(a){switch(a){case 5126:return eg;case 35664:return gg;case 35665:return hg;case 35666:return ig;case 35674:return jg;case 35675:return kg;case 35676:return lg;case 35678:return mg;case 35680:return ng;case 5124:case 35670:return fg;case 35667:case 35671:return Oe;case 35668:case 35672:return Pe;case 35669:case 35673:return Qe;}}function pg(a,b,c){this.id=a;this.addr=c;this.cache=[];this.setValue=dg(b.type)}function Re(a,b,c){this.id=a;this.addr=c;this.cache=[];this.size=b.size;this.setValue=og(b.type)}function Se(a){this.id=a;this.seq=[];this.map={}}function db(a,b,c){this.seq=[];this.map={};this.renderer=c;c=a.getProgramParameter(b,a.ACTIVE_UNIFORMS);for(var d=0;d<c;++d){var e=a.getActiveUniform(b,d),f=a.getUniformLocation(b,e.name),g=this,h=e.name,l=h.length;for(Wd.lastIndex=0;;){var m=Wd.exec(h),v=Wd.lastIndex,n=m[1],r=m[3];"]"===m[2]&&(n|=0);if(void 0===r||"["===r&&v+2===l){h=g;e=void 0===r?new pg(n,e,f):new Re(n,e,f);h.seq.push(e);h.map[e.id]=e;break}else r=g.map[n],void 0===r&&(r=new Se(n),n=g,g=r,n.seq.push(g),n.map[g.id]=g),g=r}}}function qg(a){a=a.split("\n");for(var b=0;b<a.length;b++){a[b]=b+1+": "+a[b]}return a.join("\n")}function Te(a,b,c){var d=a.createShader(b);a.shaderSource(d,c);a.compileShader(d);!1===a.getShaderParameter(d,a.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile.");""!==a.getShaderInfoLog(d)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",b===a.VERTEX_SHADER?"vertex":"fragment",a.getShaderInfoLog(d),qg(c));return d}function Ue(a){switch(a){case 3E3:return["Linear","( value )"];case 3001:return["sRGB","( value )"];case 3002:return["RGBE","( value )"];case 3004:return["RGBM","( value, 7.0 )"];case 3005:return["RGBM","( value, 16.0 )"];case 3006:return["RGBD","( value, 256.0 )"];case 3007:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw Error("unsupported encoding: "+a);}}function Xd(a,b){b=Ue(b);return"vec4 "+a+"( vec4 value ) { return "+b[0]+"ToLinear"+b[1]+"; }"}function rg(a,b){b=Ue(b);return"vec4 "+a+"( vec4 value ) { return LinearTo"+b[0]+b[1]+"; }"}function sg(a,b){switch(b){case 1:b="Linear";break;case 2:b="Reinhard";break;case 3:b="Uncharted2";break;case 4:b="OptimizedCineon";break;default:throw Error("unsupported toneMapping: "+b);}return"vec3 "+a+"( vec3 color ) { return "+b+"ToneMapping( color ); }"}function tg(a,b,c){a=a||{};return[a.derivatives||b.envMapCubeUV||b.bumpMap||b.normalMap||b.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(a.fragDepth||b.logarithmicDepthBuffer)&&c.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",a.drawBuffers&&c.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(a.shaderTextureLOD||b.envMap)&&c.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Dc).join("\n")}function ug(a){var b=[],c;for(c in a){var d=a[c];!1!==d&&b.push("#define "+c+" "+d)}return b.join("\n")}function Dc(a){return""!==a}function Ve(a,b){return a.replace(/NUM_DIR_LIGHTS/g,b.numDirLights).replace(/NUM_SPOT_LIGHTS/g,b.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,b.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,b.numPointLights).replace(/NUM_HEMI_LIGHTS/g,b.numHemiLights)}function We(a,b){return a.replace(/NUM_CLIPPING_PLANES/g,b.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,b.numClippingPlanes-b.numClipIntersection)}function Yd(a){return a.replace(/^[ \t]*#include +<([\w\d.]+)>/gm,function(a,c){a=W[c];if(void 0===a)throw Error("Can not resolve #include <"+c+">");return Yd(a)})}function Xe(a){return a.replace(/#pragma unroll_loop[\s]+?for \( int i = (\d+); i < (\d+); i \+\+ \) \{([\s\S]+?)(?=\})\}/g,function(a,c,d,e){a="";for(c=parseInt(c);c<parseInt(d);c++){a+=e.replace(/\[ i \]/g,"[ "+c+" ]")}return a})}function vg(a,b,c,d,e,f){var g=a.context,h=d.defines,l=e.vertexShader,m=e.fragmentShader,v="SHADOWMAP_TYPE_BASIC";1===f.shadowMapType?v="SHADOWMAP_TYPE_PCF":2===f.shadowMapType&&(v="SHADOWMAP_TYPE_PCF_SOFT");var n="ENVMAP_TYPE_CUBE",r="ENVMAP_MODE_REFLECTION",q="ENVMAP_BLENDING_MULTIPLY";if(f.envMap){switch(d.envMap.mapping){case 301:case 302:n="ENVMAP_TYPE_CUBE";break;case 306:case 307:n="ENVMAP_TYPE_CUBE_UV";break;case 303:case 304:n="ENVMAP_TYPE_EQUIREC";break;case 305:n="ENVMAP_TYPE_SPHERE";}switch(d.envMap.mapping){case 302:case 304:r="ENVMAP_MODE_REFRACTION";}switch(d.combine){case 0:q="ENVMAP_BLENDING_MULTIPLY";break;case 1:q="ENVMAP_BLENDING_MIX";break;case 2:q="ENVMAP_BLENDING_ADD";}}var t=0<a.gammaFactor?a.gammaFactor:1,k=tg(d.extensions,f,b),p=ug(h),x=g.createProgram();d.isRawShaderMaterial?(h=[p].filter(Dc).join("\n"),0<h.length&&(h+="\n"),b=[k,p].filter(Dc).join("\n"),0<b.length&&(b+="\n")):(h=["precision "+f.precision+" float;","precision "+f.precision+" int;","#define SHADER_NAME "+e.name,p,f.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+t,"#define MAX_BONES "+f.maxBones,f.useFog&&f.fog?"#define USE_FOG":"",f.useFog&&f.fogExp?"#define FOG_EXP2":"",f.map?"#define USE_MAP":"",f.envMap?"#define USE_ENVMAP":"",f.envMap?"#define "+r:"",f.lightMap?"#define USE_LIGHTMAP":"",f.aoMap?"#define USE_AOMAP":"",f.emissiveMap?"#define USE_EMISSIVEMAP":"",f.bumpMap?"#define USE_BUMPMAP":"",f.normalMap?"#define USE_NORMALMAP":"",f.displacementMap&&f.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",f.specularMap?"#define USE_SPECULARMAP":"",f.roughnessMap?"#define USE_ROUGHNESSMAP":"",f.metalnessMap?"#define USE_METALNESSMAP":"",f.alphaMap?"#define USE_ALPHAMAP":"",f.vertexColors?"#define USE_COLOR":"",f.flatShading?"#define FLAT_SHADED":"",f.skinning?"#define USE_SKINNING":"",f.useVertexTexture?"#define BONE_TEXTURE":"",f.morphTargets?"#define USE_MORPHTARGETS":"",f.morphNormals&&!1===f.flatShading?"#define USE_MORPHNORMALS":"",f.doubleSided?"#define DOUBLE_SIDED":"",f.flipSided?"#define FLIP_SIDED":"",f.shadowMapEnabled?"#define USE_SHADOWMAP":"",f.shadowMapEnabled?"#define "+v:"",f.sizeAttenuation?"#define USE_SIZEATTENUATION":"",f.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",f.logarithmicDepthBuffer&&b.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Dc).join("\n"),b=[k,"precision "+f.precision+" float;","precision "+f.precision+" int;","#define SHADER_NAME "+e.name,p,f.alphaTest?"#define ALPHATEST "+f.alphaTest+(f.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+t,f.useFog&&f.fog?"#define USE_FOG":"",f.useFog&&f.fogExp?"#define FOG_EXP2":"",f.map?"#define USE_MAP":"",f.envMap?"#define USE_ENVMAP":"",f.envMap?"#define "+n:"",f.envMap?"#define "+r:"",f.envMap?"#define "+q:"",f.lightMap?"#define USE_LIGHTMAP":"",f.aoMap?"#define USE_AOMAP":"",f.emissiveMap?"#define USE_EMISSIVEMAP":"",f.bumpMap?"#define USE_BUMPMAP":"",f.normalMap?"#define USE_NORMALMAP":"",f.specularMap?"#define USE_SPECULARMAP":"",f.roughnessMap?"#define USE_ROUGHNESSMAP":"",f.metalnessMap?"#define USE_METALNESSMAP":"",f.alphaMap?"#define USE_ALPHAMAP":"",f.vertexColors?"#define USE_COLOR":"",f.gradientMap?"#define USE_GRADIENTMAP":"",f.flatShading?"#define FLAT_SHADED":"",f.doubleSided?"#define DOUBLE_SIDED":"",f.flipSided?"#define FLIP_SIDED":"",f.shadowMapEnabled?"#define USE_SHADOWMAP":"",f.shadowMapEnabled?"#define "+v:"",f.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",f.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",f.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",f.logarithmicDepthBuffer&&b.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",f.envMap&&b.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",0!==f.toneMapping?"#define TONE_MAPPING":"",0!==f.toneMapping?W.tonemapping_pars_fragment:"",0!==f.toneMapping?sg("toneMapping",f.toneMapping):"",f.dithering?"#define DITHERING":"",f.outputEncoding||f.mapEncoding||f.envMapEncoding||f.emissiveMapEncoding?W.encodings_pars_fragment:"",f.mapEncoding?Xd("mapTexelToLinear",f.mapEncoding):"",f.envMapEncoding?Xd("envMapTexelToLinear",f.envMapEncoding):"",f.emissiveMapEncoding?Xd("emissiveMapTexelToLinear",f.emissiveMapEncoding):"",f.outputEncoding?rg("linearToOutputTexel",f.outputEncoding):"",f.depthPacking?"#define DEPTH_PACKING "+d.depthPacking:"","\n"].filter(Dc).join("\n"));l=Yd(l);l=Ve(l,f);l=We(l,f);m=Yd(m);m=Ve(m,f);m=We(m,f);l=Xe(l);m=Xe(m);m=b+m;l=Te(g,g.VERTEX_SHADER,h+l);m=Te(g,g.FRAGMENT_SHADER,m);g.attachShader(x,l);g.attachShader(x,m);void 0!==d.index0AttributeName?g.bindAttribLocation(x,0,d.index0AttributeName):!0===f.morphTargets&&g.bindAttribLocation(x,0,"position");g.linkProgram(x);f=g.getProgramInfoLog(x).trim();v=g.getShaderInfoLog(l).trim();n=g.getShaderInfoLog(m).trim();q=r=!0;if(!1===g.getProgramParameter(x,g.LINK_STATUS))r=!1,console.error("THREE.WebGLProgram: shader error: ",g.getError(),"gl.VALIDATE_STATUS",g.getProgramParameter(x,g.VALIDATE_STATUS),"gl.getProgramInfoLog",f,v,n);else if(""!==f)console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",f);else if(""===v||""===n)q=!1;q&&(this.diagnostics={runnable:r,material:d,programLog:f,vertexShader:{log:v,prefix:h},fragmentShader:{log:n,prefix:b}});g.deleteShader(l);g.deleteShader(m);var w;this.getUniforms=function(){void 0===w&&(w=new db(g,x,a));return w};var H;this.getAttributes=function(){if(void 0===H){for(var a={},b=g.getProgramParameter(x,g.ACTIVE_ATTRIBUTES),c=0,d;c<b;c++){d=g.getActiveAttrib(x,c).name;a[d]=g.getAttribLocation(x,d)}H=a}return H};this.destroy=function(){g.deleteProgram(x);this.program=void 0};Object.defineProperties(this,{uniforms:{get:function get(){console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms().");return this.getUniforms()}},attributes:{get:function get(){console.warn("THREE.WebGLProgram: .attributes is now .getAttributes().");return this.getAttributes()}}});this.name=e.name;this.id=wg++;this.code=c;this.usedTimes=1;this.program=x;this.vertexShader=l;this.fragmentShader=m;return this}function xg(a,b,c){function d(a,b){if(a)a.isTexture?c=a.encoding:a.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),c=a.texture.encoding);else var c=3E3;3E3===c&&b&&(c=3007);return c}var e=[],f={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow"},g="precision supportsVertexTextures map mapEncoding envMap envMapMode envMapEncoding lightMap aoMap emissiveMap emissiveMapEncoding bumpMap normalMap displacementMap specularMap roughnessMap metalnessMap gradientMap alphaMap combine vertexColors fog useFog fogExp flatShading sizeAttenuation logarithmicDepthBuffer skinning maxBones useVertexTexture morphTargets morphNormals maxMorphTargets maxMorphNormals premultipliedAlpha numDirLights numPointLights numSpotLights numHemiLights numRectAreaLights shadowMapEnabled shadowMapType toneMapping physicallyCorrectLights alphaTest doubleSided flipSided numClippingPlanes numClipIntersection depthPacking dithering".split(" ");this.getParameters=function(b,e,g,v,n,r,q){var h=f[b.type];if(q.isSkinnedMesh){var l=q.skeleton.bones;if(c.floatVertexTextures)l=1024;else{var m=_Mathmin(_Mathfloor((c.maxVertexUniforms-20)/4),l.length);m<l.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+l.length+" bones. This GPU supports "+m+"."),l=0):l=m}}else l=0;m=c.precision;null!==b.precision&&(m=c.getMaxPrecision(b.precision),m!==b.precision&&console.warn("THREE.WebGLProgram.getParameters:",b.precision,"not supported, using",m,"instead."));var k=a.getRenderTarget();return{shaderID:h,precision:m,supportsVertexTextures:c.vertexTextures,outputEncoding:d(k?k.texture:null,a.gammaOutput),map:!!b.map,mapEncoding:d(b.map,a.gammaInput),envMap:!!b.envMap,envMapMode:b.envMap&&b.envMap.mapping,envMapEncoding:d(b.envMap,a.gammaInput),envMapCubeUV:!!b.envMap&&(306===b.envMap.mapping||307===b.envMap.mapping),lightMap:!!b.lightMap,aoMap:!!b.aoMap,emissiveMap:!!b.emissiveMap,emissiveMapEncoding:d(b.emissiveMap,a.gammaInput),bumpMap:!!b.bumpMap,normalMap:!!b.normalMap,displacementMap:!!b.displacementMap,roughnessMap:!!b.roughnessMap,metalnessMap:!!b.metalnessMap,specularMap:!!b.specularMap,alphaMap:!!b.alphaMap,gradientMap:!!b.gradientMap,combine:b.combine,vertexColors:b.vertexColors,fog:!!v,useFog:b.fog,fogExp:v&&v.isFogExp2,flatShading:b.flatShading,sizeAttenuation:b.sizeAttenuation,logarithmicDepthBuffer:c.logarithmicDepthBuffer,skinning:b.skinning&&0<l,maxBones:l,useVertexTexture:c.floatVertexTextures,morphTargets:b.morphTargets,morphNormals:b.morphNormals,maxMorphTargets:a.maxMorphTargets,maxMorphNormals:a.maxMorphNormals,numDirLights:e.directional.length,numPointLights:e.point.length,numSpotLights:e.spot.length,numRectAreaLights:e.rectArea.length,numHemiLights:e.hemi.length,numClippingPlanes:n,numClipIntersection:r,dithering:b.dithering,shadowMapEnabled:a.shadowMap.enabled&&q.receiveShadow&&0<g.length,shadowMapType:a.shadowMap.type,toneMapping:a.toneMapping,physicallyCorrectLights:a.physicallyCorrectLights,premultipliedAlpha:b.premultipliedAlpha,alphaTest:b.alphaTest,doubleSided:2===b.side,flipSided:1===b.side,depthPacking:void 0!==b.depthPacking?b.depthPacking:!1}};this.getProgramCode=function(b,c){var d=[];c.shaderID?d.push(c.shaderID):(d.push(b.fragmentShader),d.push(b.vertexShader));if(void 0!==b.defines)for(var e in b.defines){d.push(e),d.push(b.defines[e])}for(e=0;e<g.length;e++){d.push(c[g[e]])}d.push(b.onBeforeCompile.toString());d.push(a.gammaOutput);return d.join()};this.acquireProgram=function(c,d,f,g){for(var h,l=0,m=e.length,v;l<m;l++){v=e[l];if(v.code===g){h=v;++h.usedTimes;break}}void 0===h&&(h=new vg(a,b,g,c,d,f),e.push(h));return h};this.releaseProgram=function(a){if(0===--a.usedTimes){var b=e.indexOf(a);e[b]=e[e.length-1];e.pop();a.destroy()}};this.programs=e}function yg(){var a=new WeakMap;return{get:function get(b){var c=a.get(b);void 0===c&&(c={},a.set(b,c));return c},remove:function remove(b){a.delete(b)},update:function update(b,c,d){a.get(b)[c]=d},dispose:function dispose(){a=new WeakMap}}}function zg(a,b){return a.renderOrder!==b.renderOrder?a.renderOrder-b.renderOrder:a.program&&b.program&&a.program!==b.program?a.program.id-b.program.id:a.material.id!==b.material.id?a.material.id-b.material.id:a.z!==b.z?a.z-b.z:a.id-b.id}function Ag(a,b){return a.renderOrder!==b.renderOrder?a.renderOrder-b.renderOrder:a.z!==b.z?b.z-a.z:a.id-b.id}function Bg(){var a=[],b=0,c=[],d=[];return{opaque:c,transparent:d,init:function init(){b=0;c.length=0;d.length=0},push:function push(e,f,g,h,l){var m=a[b];void 0===m?(m={id:e.id,object:e,geometry:f,material:g,program:g.program,renderOrder:e.renderOrder,z:h,group:l},a[b]=m):(m.id=e.id,m.object=e,m.geometry=f,m.material=g,m.program=g.program,m.renderOrder=e.renderOrder,m.z=h,m.group=l);(!0===g.transparent?d:c).push(m);b++},sort:function sort(){1<c.length&&c.sort(zg);1<d.length&&d.sort(Ag)}}}function Cg(){var a={};return{get:function get(b,c){b=b.id+","+c.id;c=a[b];void 0===c&&(c=new Bg,a[b]=c);return c},dispose:function dispose(){a={}}}}function Dg(){var a={};return{get:function get(b){if(void 0!==a[b.id])return a[b.id];switch(b.type){case"DirectionalLight":var c={direction:new p,color:new K,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new y};break;case"SpotLight":c={position:new p,direction:new p,color:new K,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new y};break;case"PointLight":c={position:new p,color:new K,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new y,shadowCameraNear:1,shadowCameraFar:1E3};break;case"HemisphereLight":c={direction:new p,skyColor:new K,groundColor:new K};break;case"RectAreaLight":c={color:new K,position:new p,halfWidth:new p,halfHeight:new p};}return a[b.id]=c}}}function Eg(){var a=new Dg,b={id:Fg++,hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},c=new p,d=new F,e=new F;return{setup:function setup(f,g,h){var l=0,m=0,v=0,n=0,r=0,q=0,t=0,k=0;h=h.matrixWorldInverse;for(var p=0,x=f.length;p<x;p++){var w=f[p],H=w.color,C=w.intensity,V=w.distance,Q=w.shadow&&w.shadow.map?w.shadow.map.texture:null;if(w.isAmbientLight)l+=H.r*C,m+=H.g*C,v+=H.b*C;else if(w.isDirectionalLight){var E=a.get(w);E.color.copy(w.color).multiplyScalar(w.intensity);E.direction.setFromMatrixPosition(w.matrixWorld);c.setFromMatrixPosition(w.target.matrixWorld);E.direction.sub(c);E.direction.transformDirection(h);if(E.shadow=w.castShadow)H=w.shadow,E.shadowBias=H.bias,E.shadowRadius=H.radius,E.shadowMapSize=H.mapSize;b.directionalShadowMap[n]=Q;b.directionalShadowMatrix[n]=w.shadow.matrix;b.directional[n]=E;n++}else if(w.isSpotLight){E=a.get(w);E.position.setFromMatrixPosition(w.matrixWorld);E.position.applyMatrix4(h);E.color.copy(H).multiplyScalar(C);E.distance=V;E.direction.setFromMatrixPosition(w.matrixWorld);c.setFromMatrixPosition(w.target.matrixWorld);E.direction.sub(c);E.direction.transformDirection(h);E.coneCos=_Mathcos(w.angle);E.penumbraCos=_Mathcos(w.angle*(1-w.penumbra));E.decay=0===w.distance?0:w.decay;if(E.shadow=w.castShadow)H=w.shadow,E.shadowBias=H.bias,E.shadowRadius=H.radius,E.shadowMapSize=H.mapSize;b.spotShadowMap[q]=Q;b.spotShadowMatrix[q]=w.shadow.matrix;b.spot[q]=E;q++}else if(w.isRectAreaLight)E=a.get(w),E.color.copy(H).multiplyScalar(C),E.position.setFromMatrixPosition(w.matrixWorld),E.position.applyMatrix4(h),e.identity(),d.copy(w.matrixWorld),d.premultiply(h),e.extractRotation(d),E.halfWidth.set(.5*w.width,0,0),E.halfHeight.set(0,.5*w.height,0),E.halfWidth.applyMatrix4(e),E.halfHeight.applyMatrix4(e),b.rectArea[t]=E,t++;else if(w.isPointLight){E=a.get(w);E.position.setFromMatrixPosition(w.matrixWorld);E.position.applyMatrix4(h);E.color.copy(w.color).multiplyScalar(w.intensity);E.distance=w.distance;E.decay=0===w.distance?0:w.decay;if(E.shadow=w.castShadow)H=w.shadow,E.shadowBias=H.bias,E.shadowRadius=H.radius,E.shadowMapSize=H.mapSize,E.shadowCameraNear=H.camera.near,E.shadowCameraFar=H.camera.far;b.pointShadowMap[r]=Q;b.pointShadowMatrix[r]=w.shadow.matrix;b.point[r]=E;r++}else w.isHemisphereLight&&(E=a.get(w),E.direction.setFromMatrixPosition(w.matrixWorld),E.direction.transformDirection(h),E.direction.normalize(),E.skyColor.copy(w.color).multiplyScalar(C),E.groundColor.copy(w.groundColor).multiplyScalar(C),b.hemi[k]=E,k++)}b.ambient[0]=l;b.ambient[1]=m;b.ambient[2]=v;b.directional.length=n;b.spot.length=q;b.rectArea.length=t;b.point.length=r;b.hemi.length=k;b.hash=b.id+","+n+","+r+","+q+","+t+","+k+","+g.length},state:b}}function Gg(){var a=new Eg,b=[],c=[],d=[];return{init:function init(){b.length=0;c.length=0;d.length=0},state:{lightsArray:b,shadowsArray:c,spritesArray:d,lights:a},setupLights:function setupLights(d){a.setup(b,c,d)},pushLight:function pushLight(a){b.push(a)},pushShadow:function pushShadow(a){c.push(a)},pushSprite:function pushSprite(a){d.push(a)}}}function Hg(){var a={};return{get:function get(b,c){b=b.id+","+c.id;c=a[b];void 0===c&&(c=new Gg,a[b]=c);return c},dispose:function dispose(){a={}}}}function eb(a){L.call(this);this.type="MeshDepthMaterial";this.depthPacking=3200;this.morphTargets=this.skinning=!1;this.displacementMap=this.alphaMap=this.map=null;this.displacementScale=1;this.displacementBias=0;this.wireframe=!1;this.wireframeLinewidth=1;this.lights=this.fog=!1;this.setValues(a)}function fb(a){L.call(this);this.type="MeshDistanceMaterial";this.referencePosition=new p;this.nearDistance=1;this.farDistance=1E3;this.morphTargets=this.skinning=!1;this.displacementMap=this.alphaMap=this.map=null;this.displacementScale=1;this.displacementBias=0;this.lights=this.fog=!1;this.setValues(a)}function Ye(a,b,c){function d(b,c,d,e,f,g){var h=b.geometry,l=n,m=b.customDepthMaterial;d&&(l=r,m=b.customDistanceMaterial);m?l=m:(m=!1,c.morphTargets&&(h&&h.isBufferGeometry?m=h.morphAttributes&&h.morphAttributes.position&&0<h.morphAttributes.position.length:h&&h.isGeometry&&(m=h.morphTargets&&0<h.morphTargets.length)),b.isSkinnedMesh&&!1===c.skinning&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",b),b=b.isSkinnedMesh&&c.skinning,h=0,m&&(h|=1),b&&(h|=2),l=l[h]);a.localClippingEnabled&&!0===c.clipShadows&&0!==c.clippingPlanes.length&&(h=l.uuid,m=c.uuid,b=q[h],void 0===b&&(b={},q[h]=b),h=b[m],void 0===h&&(h=l.clone(),b[m]=h),l=h);l.visible=c.visible;l.wireframe=c.wireframe;l.side=null!=c.shadowSide?c.shadowSide:t[c.side];l.clipShadows=c.clipShadows;l.clippingPlanes=c.clippingPlanes;l.clipIntersection=c.clipIntersection;l.wireframeLinewidth=c.wireframeLinewidth;l.linewidth=c.linewidth;d&&l.isMeshDistanceMaterial&&(l.referencePosition.copy(e),l.nearDistance=f,l.farDistance=g);return l}function e(c,g,h,l){if(!1!==c.visible){if(c.layers.test(g.layers)&&(c.isMesh||c.isLine||c.isPoints)&&c.castShadow&&(!c.frustumCulled||f.intersectsObject(c))){c.modelViewMatrix.multiplyMatrices(h.matrixWorldInverse,c.matrixWorld);var m=b.update(c),n=c.material;if(Array.isArray(n))for(var r=m.groups,q=0,t=r.length;q<t;q++){var k=r[q],u=n[k.materialIndex];u&&u.visible&&(u=d(c,u,l,v,h.near,h.far),a.renderBufferDirect(h,null,m,u,c,k))}else n.visible&&(u=d(c,n,l,v,h.near,h.far),a.renderBufferDirect(h,null,m,u,c,null))}c=c.children;m=0;for(n=c.length;m<n;m++){e(c[m],g,h,l)}}}var f=new qd,g=new F,h=new y,l=new y(c,c),m=new p,v=new p,n=[,,,,],r=[,,,,],q={},t={0:1,1:0,2:2},k=[new p(1,0,0),new p(-1,0,0),new p(0,0,1),new p(0,0,-1),new p(0,1,0),new p(0,-1,0)],z=[new p(0,1,0),new p(0,1,0),new p(0,1,0),new p(0,1,0),new p(0,0,1),new p(0,0,-1)],x=[new U,new U,new U,new U,new U,new U];for(c=0;4!==c;++c){var w=0!==(1&c),H=0!==(2&c),C=new eb({depthPacking:3201,morphTargets:w,skinning:H});n[c]=C;w=new fb({morphTargets:w,skinning:H});r[c]=w}var V=this;this.enabled=!1;this.autoUpdate=!0;this.needsUpdate=!1;this.type=1;this.render=function(b,c,d){if(!1!==V.enabled&&(!1!==V.autoUpdate||!1!==V.needsUpdate)&&0!==b.length){var n=a.state;n.disable(a.context.BLEND);n.buffers.color.setClear(1,1,1,1);n.buffers.depth.setTest(!0);n.setScissorTest(!1);for(var r,q=0,t=b.length,u;q<t;q++){u=b[q];r=u.shadow;var p=u&&u.isPointLight;if(void 0===r)console.warn("THREE.WebGLShadowMap:",u,"has no shadow.");else{var w=r.camera;h.copy(r.mapSize);h.min(l);if(p){var Q=h.x,E=h.y;x[0].set(2*Q,E,Q,E);x[1].set(0,E,Q,E);x[2].set(3*Q,E,Q,E);x[3].set(Q,E,Q,E);x[4].set(3*Q,0,Q,E);x[5].set(Q,0,Q,E);h.x*=4;h.y*=2}null===r.map&&(r.map=new kb(h.x,h.y,{minFilter:1003,magFilter:1003,format:1023}),r.map.texture.name=u.name+".shadowMap",w.updateProjectionMatrix());r.isSpotLightShadow&&r.update(u);Q=r.map;E=r.matrix;v.setFromMatrixPosition(u.matrixWorld);w.position.copy(v);p?(r=6,E.makeTranslation(-v.x,-v.y,-v.z)):(r=1,m.setFromMatrixPosition(u.target.matrixWorld),w.lookAt(m),w.updateMatrixWorld(),E.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),E.multiply(w.projectionMatrix),E.multiply(w.matrixWorldInverse));a.setRenderTarget(Q);a.clear();for(u=0;u<r;u++){p&&(m.copy(w.position),m.add(k[u]),w.up.copy(z[u]),w.lookAt(m),w.updateMatrixWorld(),n.viewport(x[u])),g.multiplyMatrices(w.projectionMatrix,w.matrixWorldInverse),f.setFromMatrix(g),e(c,d,w,p)}}}V.needsUpdate=!1}}}function Qb(a,b,c,d,e,f,g,h,l){ca.call(this,a,b,c,d,e,f,g,h,l);this.needsUpdate=!0}function Ig(a,b,c,d,e){var f,g,h,l,m,v,n,r,q,t,k,z,x,w,H,C,V,Q;function E(a,b){return a.renderOrder!==b.renderOrder?a.renderOrder-b.renderOrder:a.z!==b.z?b.z-a.z:b.id-a.id}var Bc,qb,y,A,B=new p,G=new X,K=new p;this.render=function(u,p,rd){if(0!==u.length){if(void 0===y){var S=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),Da=new Uint16Array([0,1,2,0,2,3]);Bc=b.createBuffer();qb=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,Bc);b.bufferData(b.ARRAY_BUFFER,S,b.STATIC_DRAW);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,qb);b.bufferData(b.ELEMENT_ARRAY_BUFFER,Da,b.STATIC_DRAW);S=b.createProgram();Da=b.createShader(b.VERTEX_SHADER);var ia=b.createShader(b.FRAGMENT_SHADER);b.shaderSource(Da,["precision "+e.precision+" float;","#define SHADER_NAME SpriteMaterial\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform float rotation;\nuniform vec2 center;\nuniform vec2 scale;\nuniform vec2 uvOffset;\nuniform vec2 uvScale;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvarying float fogDepth;\nvoid main() {\n\tvUV = uvOffset + uv * uvScale;\n\tvec2 alignedPosition = ( position - center ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tvec4 mvPosition;\n\tmvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\tfogDepth = - mvPosition.z;\n}"].join("\n"));b.shaderSource(ia,["precision "+e.precision+" float;","#define SHADER_NAME SpriteMaterial\nuniform vec3 color;\nuniform sampler2D map;\nuniform float opacity;\nuniform int fogType;\nuniform vec3 fogColor;\nuniform float fogDensity;\nuniform float fogNear;\nuniform float fogFar;\nuniform float alphaTest;\nvarying vec2 vUV;\nvarying float fogDepth;\nvoid main() {\n\tvec4 texture = texture2D( map, vUV );\n\tgl_FragColor = vec4( color * texture.xyz, texture.a * opacity );\n\tif ( gl_FragColor.a < alphaTest ) discard;\n\tif ( fogType > 0 ) {\n\t\tfloat fogFactor = 0.0;\n\t\tif ( fogType == 1 ) {\n\t\t\tfogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t\t} else {\n\t\t\tconst float LOG2 = 1.442695;\n\t\t\tfogFactor = exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 );\n\t\t\tfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\n\t\t}\n\t\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n\t}\n}"].join("\n"));b.compileShader(Da);b.compileShader(ia);b.attachShader(S,Da);b.attachShader(S,ia);b.linkProgram(S);y=S;V=b.getAttribLocation(y,"position");Q=b.getAttribLocation(y,"uv");f=b.getUniformLocation(y,"uvOffset");g=b.getUniformLocation(y,"uvScale");h=b.getUniformLocation(y,"rotation");l=b.getUniformLocation(y,"center");m=b.getUniformLocation(y,"scale");v=b.getUniformLocation(y,"color");n=b.getUniformLocation(y,"map");r=b.getUniformLocation(y,"opacity");q=b.getUniformLocation(y,"modelViewMatrix");t=b.getUniformLocation(y,"projectionMatrix");k=b.getUniformLocation(y,"fogType");z=b.getUniformLocation(y,"fogDensity");x=b.getUniformLocation(y,"fogNear");w=b.getUniformLocation(y,"fogFar");H=b.getUniformLocation(y,"fogColor");b.getUniformLocation(y,"fogDepth");C=b.getUniformLocation(y,"alphaTest");S=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");S.width=8;S.height=8;Da=S.getContext("2d");Da.fillStyle="white";Da.fillRect(0,0,8,8);A=new Qb(S)}c.useProgram(y);c.initAttributes();c.enableAttribute(V);c.enableAttribute(Q);c.disableUnusedAttributes();c.disable(b.CULL_FACE);c.enable(b.BLEND);b.bindBuffer(b.ARRAY_BUFFER,Bc);b.vertexAttribPointer(V,2,b.FLOAT,!1,16,0);b.vertexAttribPointer(Q,2,b.FLOAT,!1,16,8);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,qb);b.uniformMatrix4fv(t,!1,rd.projectionMatrix.elements);c.activeTexture(b.TEXTURE0);b.uniform1i(n,0);Da=S=0;(ia=p.fog)?(b.uniform3f(H,ia.color.r,ia.color.g,ia.color.b),ia.isFog?(b.uniform1f(x,ia.near),b.uniform1f(w,ia.far),b.uniform1i(k,1),Da=S=1):ia.isFogExp2&&(b.uniform1f(z,ia.density),b.uniform1i(k,2),Da=S=2)):(b.uniform1i(k,0),Da=S=0);ia=0;for(var M=u.length,I;ia<M;ia++){I=u[ia];I.modelViewMatrix.multiplyMatrices(rd.matrixWorldInverse,I.matrixWorld);I.z=-I.modelViewMatrix.elements[14]}u.sort(E);var Vd=[],J=[];ia=0;for(M=u.length;ia<M;ia++){I=u[ia];var F=I.material;if(!1!==F.visible){I.onBeforeRender(a,p,rd,void 0,F,void 0);b.uniform1f(C,F.alphaTest);b.uniformMatrix4fv(q,!1,I.modelViewMatrix.elements);I.matrixWorld.decompose(B,G,K);Vd[0]=K.x;Vd[1]=K.y;J[0]=I.center.x-.5;J[1]=I.center.y-.5;var N=0;p.fog&&F.fog&&(N=Da);S!==N&&(b.uniform1i(k,N),S=N);null!==F.map?(b.uniform2f(f,F.map.offset.x,F.map.offset.y),b.uniform2f(g,F.map.repeat.x,F.map.repeat.y)):(b.uniform2f(f,0,0),b.uniform2f(g,1,1));b.uniform1f(r,F.opacity);b.uniform3f(v,F.color.r,F.color.g,F.color.b);b.uniform1f(h,F.rotation);b.uniform2fv(l,J);b.uniform2fv(m,Vd);c.setBlending(F.blending,F.blendEquation,F.blendSrc,F.blendDst,F.blendEquationAlpha,F.blendSrcAlpha,F.blendDstAlpha,F.premultipliedAlpha);c.buffers.depth.setTest(F.depthTest);c.buffers.depth.setMask(F.depthWrite);c.buffers.color.setMask(F.colorWrite);d.setTexture2D(F.map||A,0);b.drawElements(b.TRIANGLES,6,b.UNSIGNED_SHORT,0);I.onAfterRender(a,p,rd,void 0,F,void 0)}}c.enable(b.CULL_FACE);c.reset()}}}function Jg(a,b,c){function d(b,c,d){var e=new Uint8Array(4),f=a.createTexture();a.bindTexture(b,f);a.texParameteri(b,a.TEXTURE_MIN_FILTER,a.NEAREST);a.texParameteri(b,a.TEXTURE_MAG_FILTER,a.NEAREST);for(b=0;b<d;b++){a.texImage2D(c+b,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,e)}return f}function e(c,d){p[c]=1;0===x[c]&&(a.enableVertexAttribArray(c),x[c]=1);w[c]!==d&&(b.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(c,d),w[c]=d)}function f(b){!0!==H[b]&&(a.enable(b),H[b]=!0)}function g(b){!1!==H[b]&&(a.disable(b),H[b]=!1)}function h(b,d,e,h,l,m,n,v){0!==b?f(a.BLEND):g(a.BLEND);if(5!==b){if(b!==Q||v!==B)switch(b){case 2:v?(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.ONE,a.ONE,a.ONE,a.ONE)):(a.blendEquation(a.FUNC_ADD),a.blendFunc(a.SRC_ALPHA,a.ONE));break;case 3:v?(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.ZERO,a.ZERO,a.ONE_MINUS_SRC_COLOR,a.ONE_MINUS_SRC_ALPHA)):(a.blendEquation(a.FUNC_ADD),a.blendFunc(a.ZERO,a.ONE_MINUS_SRC_COLOR));break;case 4:v?(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.ZERO,a.SRC_COLOR,a.ZERO,a.SRC_ALPHA)):(a.blendEquation(a.FUNC_ADD),a.blendFunc(a.ZERO,a.SRC_COLOR));break;default:v?(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.ONE,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA)):(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA));}F=ia=A=qb=y=E=null}else{l=l||d;m=m||e;n=n||h;if(d!==E||l!==A)a.blendEquationSeparate(c.convert(d),c.convert(l)),E=d,A=l;if(e!==y||h!==qb||m!==ia||n!==F)a.blendFuncSeparate(c.convert(e),c.convert(h),c.convert(m),c.convert(n)),y=e,qb=h,ia=m,F=n}Q=b;B=v}function l(b){I!==b&&(b?a.frontFace(a.CW):a.frontFace(a.CCW),I=b)}function m(b){0!==b?(f(a.CULL_FACE),b!==G&&(1===b?a.cullFace(a.BACK):2===b?a.cullFace(a.FRONT):a.cullFace(a.FRONT_AND_BACK))):g(a.CULL_FACE);G=b}function v(b,c,d){if(b){if(f(a.POLYGON_OFFSET_FILL),M!==c||S!==d)a.polygonOffset(c,d),M=c,S=d}else g(a.POLYGON_OFFSET_FILL)}function n(b){void 0===b&&(b=a.TEXTURE0+J-1);O!==b&&(a.activeTexture(b),O=b)}var r=new function(){var b=!1,c=new U,d=null,e=new U(0,0,0,0);return{setMask:function setMask(c){d===c||b||(a.colorMask(c,c,c,c),d=c)},setLocked:function setLocked(a){b=a},setClear:function setClear(b,d,f,g,h){!0===h&&(b*=g,d*=g,f*=g);c.set(b,d,f,g);!1===e.equals(c)&&(a.clearColor(b,d,f,g),e.copy(c))},reset:function reset(){b=!1;d=null;e.set(-1,0,0,0)}}},q=new function(){var b=!1,c=null,d=null,e=null;return{setTest:function setTest(b){b?f(a.DEPTH_TEST):g(a.DEPTH_TEST)},setMask:function setMask(d){c===d||b||(a.depthMask(d),c=d)},setFunc:function setFunc(b){if(d!==b){if(b)switch(b){case 0:a.depthFunc(a.NEVER);break;case 1:a.depthFunc(a.ALWAYS);break;case 2:a.depthFunc(a.LESS);break;case 3:a.depthFunc(a.LEQUAL);break;case 4:a.depthFunc(a.EQUAL);break;case 5:a.depthFunc(a.GEQUAL);break;case 6:a.depthFunc(a.GREATER);break;case 7:a.depthFunc(a.NOTEQUAL);break;default:a.depthFunc(a.LEQUAL);}else a.depthFunc(a.LEQUAL);d=b}},setLocked:function setLocked(a){b=a},setClear:function setClear(b){e!==b&&(a.clearDepth(b),e=b)},reset:function reset(){b=!1;e=d=c=null}}},k=new function(){var b=!1,c=null,d=null,e=null,h=null,l=null,m=null,n=null,v=null;return{setTest:function setTest(b){b?f(a.STENCIL_TEST):g(a.STENCIL_TEST)},setMask:function setMask(d){c===d||b||(a.stencilMask(d),c=d)},setFunc:function setFunc(b,c,f){if(d!==b||e!==c||h!==f)a.stencilFunc(b,c,f),d=b,e=c,h=f},setOp:function setOp(b,c,d){if(l!==b||m!==c||n!==d)a.stencilOp(b,c,d),l=b,m=c,n=d},setLocked:function setLocked(a){b=a},setClear:function setClear(b){v!==b&&(a.clearStencil(b),v=b)},reset:function reset(){b=!1;v=n=m=l=h=e=d=c=null}}},u=a.getParameter(a.MAX_VERTEX_ATTRIBS),p=new Uint8Array(u),x=new Uint8Array(u),w=new Uint8Array(u),H={},C=null,V=null,Q=null,E=null,y=null,qb=null,A=null,ia=null,F=null,B=!1,I=null,G=null,K=null,M=null,S=null,J=a.getParameter(a.MAX_COMBINED_TEXTURE_IMAGE_UNITS),L=!1;u=0;u=a.getParameter(a.VERSION);-1!==u.indexOf("WebGL")?(u=parseFloat(/^WebGL ([0-9])/.exec(u)[1]),L=1<=u):-1!==u.indexOf("OpenGL ES")&&(u=parseFloat(/^OpenGL ES ([0-9])/.exec(u)[1]),L=2<=u);var O=null,P={},W=new U,Y=new U,T={};T[a.TEXTURE_2D]=d(a.TEXTURE_2D,a.TEXTURE_2D,1);T[a.TEXTURE_CUBE_MAP]=d(a.TEXTURE_CUBE_MAP,a.TEXTURE_CUBE_MAP_POSITIVE_X,6);r.setClear(0,0,0,1);q.setClear(1);k.setClear(0);f(a.DEPTH_TEST);q.setFunc(3);l(!1);m(1);f(a.CULL_FACE);f(a.BLEND);h(1);return{buffers:{color:r,depth:q,stencil:k},initAttributes:function initAttributes(){for(var a=0,b=p.length;a<b;a++){p[a]=0}},enableAttribute:function enableAttribute(a){e(a,0)},enableAttributeAndDivisor:e,disableUnusedAttributes:function disableUnusedAttributes(){for(var b=0,c=x.length;b!==c;++b){x[b]!==p[b]&&(a.disableVertexAttribArray(b),x[b]=0)}},enable:f,disable:g,getCompressedTextureFormats:function getCompressedTextureFormats(){if(null===C&&(C=[],b.get("WEBGL_compressed_texture_pvrtc")||b.get("WEBGL_compressed_texture_s3tc")||b.get("WEBGL_compressed_texture_etc1")||b.get("WEBGL_compressed_texture_astc")))for(var c=a.getParameter(a.COMPRESSED_TEXTURE_FORMATS),d=0;d<c.length;d++){C.push(c[d])}return C},useProgram:function useProgram(b){return V!==b?(a.useProgram(b),V=b,!0):!1},setBlending:h,setMaterial:function setMaterial(b,c){2===b.side?g(a.CULL_FACE):f(a.CULL_FACE);var d=1===b.side;c&&(d=!d);l(d);!0===b.transparent?h(b.blending,b.blendEquation,b.blendSrc,b.blendDst,b.blendEquationAlpha,b.blendSrcAlpha,b.blendDstAlpha,b.premultipliedAlpha):h(0);q.setFunc(b.depthFunc);q.setTest(b.depthTest);q.setMask(b.depthWrite);r.setMask(b.colorWrite);v(b.polygonOffset,b.polygonOffsetFactor,b.polygonOffsetUnits)},setFlipSided:l,setCullFace:m,setLineWidth:function setLineWidth(b){b!==K&&(L&&a.lineWidth(b),K=b)},setPolygonOffset:v,setScissorTest:function setScissorTest(b){b?f(a.SCISSOR_TEST):g(a.SCISSOR_TEST)},activeTexture:n,bindTexture:function bindTexture(b,c){null===O&&n();var d=P[O];void 0===d&&(d={type:void 0,texture:void 0},P[O]=d);if(d.type!==b||d.texture!==c)a.bindTexture(b,c||T[b]),d.type=b,d.texture=c},compressedTexImage2D:function compressedTexImage2D(){try{a.compressedTexImage2D.apply(a,arguments)}catch(N){console.error("THREE.WebGLState:",N)}},texImage2D:function texImage2D(){try{a.texImage2D.apply(a,arguments)}catch(N){console.error("THREE.WebGLState:",N)}},scissor:function scissor(b){!1===W.equals(b)&&(a.scissor(b.x,b.y,b.z,b.w),W.copy(b))},viewport:function viewport(b){!1===Y.equals(b)&&(a.viewport(b.x,b.y,b.z,b.w),Y.copy(b))},reset:function reset(){for(var b=0;b<x.length;b++){1===x[b]&&(a.disableVertexAttribArray(b),x[b]=0)}H={};O=C=null;P={};G=I=Q=V=null;r.reset();q.reset();k.reset()}}}function Kg(a,b,c,d,e,f,g){function h(a,b){if(a.width>b||a.height>b){if("data"in a){console.warn("THREE.WebGLRenderer: image in DataTexture is too big ("+a.width+"x"+a.height+").");return}b/=_Mathmax(a.width,a.height);var c=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");c.width=_Mathfloor(a.width*b);c.height=_Mathfloor(a.height*b);c.getContext("2d").drawImage(a,0,0,a.width,a.height,0,0,c.width,c.height);console.warn("THREE.WebGLRenderer: image is too big ("+a.width+"x"+a.height+"). Resized to "+c.width+"x"+c.height,a);return c}return a}function l(a){return P.isPowerOfTwo(a.width)&&P.isPowerOfTwo(a.height)}function m(a,b){return a.generateMipmaps&&b&&1003!==a.minFilter&&1006!==a.minFilter}function v(b,c,e,f){a.generateMipmap(b);d.get(c).__maxMipLevel=_Mathlog(_Mathmax(e,f))*Math.LOG2E}function n(b){return 1003===b||1004===b||1005===b?a.NEAREST:a.LINEAR}function r(b){b=b.target;b.removeEventListener("dispose",r);a:{var c=d.get(b);if(b.image&&c.__image__webglTextureCube)a.deleteTexture(c.__image__webglTextureCube);else{if(void 0===c.__webglInit)break a;a.deleteTexture(c.__webglTexture)}d.remove(b)}b.isVideoTexture&&delete H[b.id];g.memory.textures--}function q(b){b=b.target;b.removeEventListener("dispose",q);var c=d.get(b),e=d.get(b.texture);if(b){void 0!==e.__webglTexture&&a.deleteTexture(e.__webglTexture);b.depthTexture&&b.depthTexture.dispose();if(b.isWebGLRenderTargetCube)for(e=0;6>e;e++){a.deleteFramebuffer(c.__webglFramebuffer[e]),c.__webglDepthbuffer&&a.deleteRenderbuffer(c.__webglDepthbuffer[e])}else a.deleteFramebuffer(c.__webglFramebuffer),c.__webglDepthbuffer&&a.deleteRenderbuffer(c.__webglDepthbuffer);d.remove(b.texture);d.remove(b)}g.memory.textures--}function k(b,n){var q=d.get(b);if(b.isVideoTexture){var k=b.id,t=g.render.frame;H[k]!==t&&(H[k]=t,b.update())}if(0<b.version&&q.__version!==b.version)if(k=b.image,void 0===k)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",b);else if(!1===k.complete)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",b);else{void 0===q.__webglInit&&(q.__webglInit=!0,b.addEventListener("dispose",r),q.__webglTexture=a.createTexture(),g.memory.textures++);c.activeTexture(a.TEXTURE0+n);c.bindTexture(a.TEXTURE_2D,q.__webglTexture);a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,b.flipY);a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,b.premultiplyAlpha);a.pixelStorei(a.UNPACK_ALIGNMENT,b.unpackAlignment);n=h(b.image,e.maxTextureSize);(1001!==b.wrapS||1001!==b.wrapT||1003!==b.minFilter&&1006!==b.minFilter)&&!1===l(n)&&(babelHelpers.instanceof(n,HTMLImageElement)||babelHelpers.instanceof(n,HTMLCanvasElement)||babelHelpers.instanceof(n,ImageBitmap))&&(void 0===C&&(C=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),C.width=P.floorPowerOfTwo(n.width),C.height=P.floorPowerOfTwo(n.height),C.getContext("2d").drawImage(n,0,0,C.width,C.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+n.width+"x"+n.height+"). Resized to "+C.width+"x"+C.height,n),n=C);k=l(n);t=f.convert(b.format);var p=f.convert(b.type);u(a.TEXTURE_2D,b,k);var z=b.mipmaps;if(b.isDepthTexture){var V=a.DEPTH_COMPONENT;if(1015===b.type){if(!w)throw Error("Float Depth Texture only supported in WebGL2.0");V=a.DEPTH_COMPONENT32F}else w&&(V=a.DEPTH_COMPONENT16);1026===b.format&&V===a.DEPTH_COMPONENT&&1012!==b.type&&1014!==b.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),b.type=1012,p=f.convert(b.type));1027===b.format&&(V=a.DEPTH_STENCIL,1020!==b.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),b.type=1020,p=f.convert(b.type)));c.texImage2D(a.TEXTURE_2D,0,V,n.width,n.height,0,t,p,null)}else if(b.isDataTexture){if(0<z.length&&k){for(var x=0,Q=z.length;x<Q;x++){V=z[x],c.texImage2D(a.TEXTURE_2D,x,t,V.width,V.height,0,t,p,V.data)}b.generateMipmaps=!1;q.__maxMipLevel=z.length-1}else c.texImage2D(a.TEXTURE_2D,0,t,n.width,n.height,0,t,p,n.data),q.__maxMipLevel=0;}else if(b.isCompressedTexture){x=0;for(Q=z.length;x<Q;x++){V=z[x],1023!==b.format&&1022!==b.format?-1<c.getCompressedTextureFormats().indexOf(t)?c.compressedTexImage2D(a.TEXTURE_2D,x,t,V.width,V.height,0,V.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):c.texImage2D(a.TEXTURE_2D,x,t,V.width,V.height,0,t,p,V.data)}q.__maxMipLevel=z.length-1}else if(0<z.length&&k){x=0;for(Q=z.length;x<Q;x++){V=z[x],c.texImage2D(a.TEXTURE_2D,x,t,t,p,V)}b.generateMipmaps=!1;q.__maxMipLevel=z.length-1}else c.texImage2D(a.TEXTURE_2D,0,t,t,p,n),q.__maxMipLevel=0;m(b,k)&&v(a.TEXTURE_2D,b,n.width,n.height);q.__version=b.version;if(b.onUpdate)b.onUpdate(b);return}c.activeTexture(a.TEXTURE0+n);c.bindTexture(a.TEXTURE_2D,q.__webglTexture)}function u(c,g,h){h?(a.texParameteri(c,a.TEXTURE_WRAP_S,f.convert(g.wrapS)),a.texParameteri(c,a.TEXTURE_WRAP_T,f.convert(g.wrapT)),a.texParameteri(c,a.TEXTURE_MAG_FILTER,f.convert(g.magFilter)),a.texParameteri(c,a.TEXTURE_MIN_FILTER,f.convert(g.minFilter))):(a.texParameteri(c,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(c,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),1001===g.wrapS&&1001===g.wrapT||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",g),a.texParameteri(c,a.TEXTURE_MAG_FILTER,n(g.magFilter)),a.texParameteri(c,a.TEXTURE_MIN_FILTER,n(g.minFilter)),1003!==g.minFilter&&1006!==g.minFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",g));(h=b.get("EXT_texture_filter_anisotropic"))&&(1015!==g.type||null!==b.get("OES_texture_float_linear"))&&(1016!==g.type||null!==b.get("OES_texture_half_float_linear"))&&(1<g.anisotropy||d.get(g).__currentAnisotropy)&&(a.texParameterf(c,h.TEXTURE_MAX_ANISOTROPY_EXT,_Mathmin(g.anisotropy,e.getMaxAnisotropy())),d.get(g).__currentAnisotropy=g.anisotropy)}function p(b,e,g,h){var l=f.convert(e.texture.format),m=f.convert(e.texture.type);c.texImage2D(h,0,l,e.width,e.height,0,l,m,null);a.bindFramebuffer(a.FRAMEBUFFER,b);a.framebufferTexture2D(a.FRAMEBUFFER,g,h,d.get(e.texture).__webglTexture,0);a.bindFramebuffer(a.FRAMEBUFFER,null)}function x(b,c){a.bindRenderbuffer(a.RENDERBUFFER,b);c.depthBuffer&&!c.stencilBuffer?(a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_COMPONENT16,c.width,c.height),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,b)):c.depthBuffer&&c.stencilBuffer?(a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_STENCIL,c.width,c.height),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.RENDERBUFFER,b)):a.renderbufferStorage(a.RENDERBUFFER,a.RGBA4,c.width,c.height);a.bindRenderbuffer(a.RENDERBUFFER,null)}var w="undefined"!==typeof WebGL2RenderingContext&&babelHelpers.instanceof(a,WebGL2RenderingContext),H={},C;this.setTexture2D=k;this.setTextureCube=function(b,n){var q=d.get(b);if(6===b.image.length)if(0<b.version&&q.__version!==b.version){q.__image__webglTextureCube||(b.addEventListener("dispose",r),q.__image__webglTextureCube=a.createTexture(),g.memory.textures++);c.activeTexture(a.TEXTURE0+n);c.bindTexture(a.TEXTURE_CUBE_MAP,q.__image__webglTextureCube);a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,b.flipY);n=b&&b.isCompressedTexture;for(var k=b.image[0]&&b.image[0].isDataTexture,t=[],p=0;6>p;p++){t[p]=n||k?k?b.image[p].image:b.image[p]:h(b.image[p],e.maxCubemapSize)}var w=t[0],z=l(w),x=f.convert(b.format),V=f.convert(b.type);u(a.TEXTURE_CUBE_MAP,b,z);for(p=0;6>p;p++){if(n)for(var H,C=t[p].mipmaps,Q=0,y=C.length;Q<y;Q++){H=C[Q],1023!==b.format&&1022!==b.format?-1<c.getCompressedTextureFormats().indexOf(x)?c.compressedTexImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+p,Q,x,H.width,H.height,0,H.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):c.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+p,Q,x,H.width,H.height,0,x,V,H.data)}else k?c.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+p,0,x,t[p].width,t[p].height,0,x,V,t[p].data):c.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+p,0,x,x,V,t[p])}q.__maxMipLevel=n?C.length-1:0;m(b,z)&&v(a.TEXTURE_CUBE_MAP,b,w.width,w.height);q.__version=b.version;if(b.onUpdate)b.onUpdate(b)}else c.activeTexture(a.TEXTURE0+n),c.bindTexture(a.TEXTURE_CUBE_MAP,q.__image__webglTextureCube)};this.setTextureCubeDynamic=function(b,e){c.activeTexture(a.TEXTURE0+e);c.bindTexture(a.TEXTURE_CUBE_MAP,d.get(b).__webglTexture)};this.setupRenderTarget=function(b){var e=d.get(b),f=d.get(b.texture);b.addEventListener("dispose",q);f.__webglTexture=a.createTexture();g.memory.textures++;var h=!0===b.isWebGLRenderTargetCube,n=l(b);if(h){e.__webglFramebuffer=[];for(var r=0;6>r;r++){e.__webglFramebuffer[r]=a.createFramebuffer()}}else e.__webglFramebuffer=a.createFramebuffer();if(h){c.bindTexture(a.TEXTURE_CUBE_MAP,f.__webglTexture);u(a.TEXTURE_CUBE_MAP,b.texture,n);for(r=0;6>r;r++){p(e.__webglFramebuffer[r],b,a.COLOR_ATTACHMENT0,a.TEXTURE_CUBE_MAP_POSITIVE_X+r)}m(b.texture,n)&&v(a.TEXTURE_CUBE_MAP,b.texture,b.width,b.height);c.bindTexture(a.TEXTURE_CUBE_MAP,null)}else c.bindTexture(a.TEXTURE_2D,f.__webglTexture),u(a.TEXTURE_2D,b.texture,n),p(e.__webglFramebuffer,b,a.COLOR_ATTACHMENT0,a.TEXTURE_2D),m(b.texture,n)&&v(a.TEXTURE_2D,b.texture,b.width,b.height),c.bindTexture(a.TEXTURE_2D,null);if(b.depthBuffer){e=d.get(b);f=!0===b.isWebGLRenderTargetCube;if(b.depthTexture){if(f)throw Error("target.depthTexture not supported in Cube render targets");if(b&&b.isWebGLRenderTargetCube)throw Error("Depth Texture with cube render targets is not supported");a.bindFramebuffer(a.FRAMEBUFFER,e.__webglFramebuffer);if(!b.depthTexture||!b.depthTexture.isDepthTexture)throw Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");d.get(b.depthTexture).__webglTexture&&b.depthTexture.image.width===b.width&&b.depthTexture.image.height===b.height||(b.depthTexture.image.width=b.width,b.depthTexture.image.height=b.height,b.depthTexture.needsUpdate=!0);k(b.depthTexture,0);e=d.get(b.depthTexture).__webglTexture;if(1026===b.depthTexture.format)a.framebufferTexture2D(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.TEXTURE_2D,e,0);else if(1027===b.depthTexture.format)a.framebufferTexture2D(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.TEXTURE_2D,e,0);else throw Error("Unknown depthTexture format")}else if(f)for(e.__webglDepthbuffer=[],f=0;6>f;f++){a.bindFramebuffer(a.FRAMEBUFFER,e.__webglFramebuffer[f]),e.__webglDepthbuffer[f]=a.createRenderbuffer(),x(e.__webglDepthbuffer[f],b)}else a.bindFramebuffer(a.FRAMEBUFFER,e.__webglFramebuffer),e.__webglDepthbuffer=a.createRenderbuffer(),x(e.__webglDepthbuffer,b);a.bindFramebuffer(a.FRAMEBUFFER,null)}};this.updateRenderTargetMipmap=function(b){var e=b.texture,f=l(b);if(m(e,f)){f=b.isWebGLRenderTargetCube?a.TEXTURE_CUBE_MAP:a.TEXTURE_2D;var g=d.get(e).__webglTexture;c.bindTexture(f,g);v(f,e,b.width,b.height);c.bindTexture(f,null)}}}function Ze(a,b){return{convert:function convert(c){if(1E3===c)return a.REPEAT;if(1001===c)return a.CLAMP_TO_EDGE;if(1002===c)return a.MIRRORED_REPEAT;if(1003===c)return a.NEAREST;if(1004===c)return a.NEAREST_MIPMAP_NEAREST;if(1005===c)return a.NEAREST_MIPMAP_LINEAR;if(1006===c)return a.LINEAR;if(1007===c)return a.LINEAR_MIPMAP_NEAREST;if(1008===c)return a.LINEAR_MIPMAP_LINEAR;if(1009===c)return a.UNSIGNED_BYTE;if(1017===c)return a.UNSIGNED_SHORT_4_4_4_4;if(1018===c)return a.UNSIGNED_SHORT_5_5_5_1;if(1019===c)return a.UNSIGNED_SHORT_5_6_5;if(1010===c)return a.BYTE;if(1011===c)return a.SHORT;if(1012===c)return a.UNSIGNED_SHORT;if(1013===c)return a.INT;if(1014===c)return a.UNSIGNED_INT;if(1015===c)return a.FLOAT;if(1016===c){var d=b.get("OES_texture_half_float");if(null!==d)return d.HALF_FLOAT_OES}if(1021===c)return a.ALPHA;if(1022===c)return a.RGB;if(1023===c)return a.RGBA;if(1024===c)return a.LUMINANCE;if(1025===c)return a.LUMINANCE_ALPHA;if(1026===c)return a.DEPTH_COMPONENT;if(1027===c)return a.DEPTH_STENCIL;if(100===c)return a.FUNC_ADD;if(101===c)return a.FUNC_SUBTRACT;if(102===c)return a.FUNC_REVERSE_SUBTRACT;if(200===c)return a.ZERO;if(201===c)return a.ONE;if(202===c)return a.SRC_COLOR;if(203===c)return a.ONE_MINUS_SRC_COLOR;if(204===c)return a.SRC_ALPHA;if(205===c)return a.ONE_MINUS_SRC_ALPHA;if(206===c)return a.DST_ALPHA;if(207===c)return a.ONE_MINUS_DST_ALPHA;if(208===c)return a.DST_COLOR;if(209===c)return a.ONE_MINUS_DST_COLOR;if(210===c)return a.SRC_ALPHA_SATURATE;if(33776===c||33777===c||33778===c||33779===c)if(d=b.get("WEBGL_compressed_texture_s3tc"),null!==d){if(33776===c)return d.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===c)return d.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===c)return d.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===c)return d.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===c||35841===c||35842===c||35843===c)if(d=b.get("WEBGL_compressed_texture_pvrtc"),null!==d){if(35840===c)return d.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===c)return d.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===c)return d.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===c)return d.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===c&&(d=b.get("WEBGL_compressed_texture_etc1"),null!==d))return d.COMPRESSED_RGB_ETC1_WEBGL;if(37808===c||37809===c||37810===c||37811===c||37812===c||37813===c||37814===c||37815===c||37816===c||37817===c||37818===c||37819===c||37820===c||37821===c)if(d=b.get("WEBGL_compressed_texture_astc"),null!==d)return c;if(103===c||104===c)if(d=b.get("EXT_blend_minmax"),null!==d){if(103===c)return d.MIN_EXT;if(104===c)return d.MAX_EXT}return 1020===c&&(d=b.get("WEBGL_depth_texture"),null!==d)?d.UNSIGNED_INT_24_8_WEBGL:0}}}function ea(a,b,c,d){Qa.call(this);this.type="PerspectiveCamera";this.fov=void 0!==a?a:50;this.zoom=1;this.near=void 0!==c?c:.1;this.far=void 0!==d?d:2E3;this.focus=10;this.aspect=void 0!==b?b:1;this.view=null;this.filmGauge=35;this.filmOffset=0;this.updateProjectionMatrix()}function Ec(a){ea.call(this);this.cameras=a||[]}function $e(a){function b(){return null!==e&&!0===e.isPresenting}function c(){if(b()){var c=e.getEyeParameters("left"),f=c.renderWidth;c=c.renderHeight;z=a.getPixelRatio();u=a.getSize();a.setDrawingBufferSize(2*f,c,1);x.start()}else d.enabled&&(a.setDrawingBufferSize(u.width,u.height,z),x.stop())}var d=this,e=null,f=null,g=null,h=new F,l=new F;"undefined"!==typeof window&&"VRFrameData"in window&&(f=new window.VRFrameData,window.addEventListener("vrdisplaypresentchange",c,!1));var m=new F,v=new X,n=new p,r=new ea;r.bounds=new U(0,0,.5,1);r.layers.enable(1);var q=new ea;q.bounds=new U(.5,0,.5,1);q.layers.enable(2);var k=new Ec([r,q]);k.layers.enable(1);k.layers.enable(2);var u,z;this.enabled=!1;this.userHeight=1.6;this.getDevice=function(){return e};this.setDevice=function(a){void 0!==a&&(e=a);x.setContext(a)};this.setPoseTarget=function(a){void 0!==a&&(g=a)};this.getCamera=function(a){if(null===e)return a;e.depthNear=a.near;e.depthFar=a.far;e.getFrameData(f);var b=e.stageParameters;b?h.fromArray(b.sittingToStandingTransform):h.makeTranslation(0,d.userHeight,0);b=f.pose;var c=null!==g?g:a;c.matrix.copy(h);c.matrix.decompose(c.position,c.quaternion,c.scale);null!==b.orientation&&(v.fromArray(b.orientation),c.quaternion.multiply(v));null!==b.position&&(v.setFromRotationMatrix(h),n.fromArray(b.position),n.applyQuaternion(v),c.position.add(n));c.updateMatrixWorld();if(!1===e.isPresenting)return a;r.near=a.near;q.near=a.near;r.far=a.far;q.far=a.far;k.matrixWorld.copy(a.matrixWorld);k.matrixWorldInverse.copy(a.matrixWorldInverse);r.matrixWorldInverse.fromArray(f.leftViewMatrix);q.matrixWorldInverse.fromArray(f.rightViewMatrix);l.getInverse(h);r.matrixWorldInverse.multiply(l);q.matrixWorldInverse.multiply(l);a=c.parent;null!==a&&(m.getInverse(a.matrixWorld),r.matrixWorldInverse.multiply(m),q.matrixWorldInverse.multiply(m));r.matrixWorld.getInverse(r.matrixWorldInverse);q.matrixWorld.getInverse(q.matrixWorldInverse);r.projectionMatrix.fromArray(f.leftProjectionMatrix);q.projectionMatrix.fromArray(f.rightProjectionMatrix);k.projectionMatrix.copy(r.projectionMatrix);a=e.getLayers();a.length&&(a=a[0],null!==a.leftBounds&&4===a.leftBounds.length&&r.bounds.fromArray(a.leftBounds),null!==a.rightBounds&&4===a.rightBounds.length&&q.bounds.fromArray(a.rightBounds));return k};this.getStandingMatrix=function(){return h};this.isPresenting=b;var x=new Td;this.setAnimationLoop=function(a){x.setAnimationLoop(a)};this.submitFrame=function(){b()&&e.submitFrame()};this.dispose=function(){"undefined"!==typeof window&&window.removeEventListener("vrdisplaypresentchange",c)}}function Lg(a){function b(){return null!==f&&null!==g}function c(a,b){null===b?a.matrixWorld.copy(a.matrix):a.matrixWorld.multiplyMatrices(b.matrixWorld,a.matrix);a.matrixWorldInverse.getInverse(a.matrixWorld)}var d=a.context,e=null,f=null,g=null,h=null,l=new ea;l.layers.enable(1);l.viewport=new U;var m=new ea;m.layers.enable(2);m.viewport=new U;var v=new Ec([l,m]);v.layers.enable(1);v.layers.enable(2);this.enabled=!1;this.getDevice=function(){return e};this.setDevice=function(a){void 0!==a&&(e=a);d.setCompatibleXRDevice(a)};this.setSession=function(b,c){f=b;null!==f&&(f.addEventListener("end",function(){a.setFramebuffer(null);r.stop()}),f.baseLayer=new XRWebGLLayer(f,d),f.requestFrameOfReference(c.frameOfReferenceType).then(function(b){g=b;a.setFramebuffer(f.baseLayer.framebuffer);r.setContext(f);r.start()}))};this.getCamera=function(a){if(b()){var d=a.parent,e=v.cameras;c(v,d);for(var f=0;f<e.length;f++){c(e[f],d)}a.matrixWorld.copy(v.matrixWorld);a=a.children;f=0;for(d=a.length;f<d;f++){a[f].updateMatrixWorld(!0)}return v}return a};this.isPresenting=b;var n=null,r=new Td;r.setAnimationLoop(function(a,b){h=b.getDevicePose(g);a=f.baseLayer;b=b.views;for(var c=0;c<b.length;c++){var d=b[c],e=a.getViewport(d),l=h.getViewMatrix(d),m=v.cameras[c];m.matrix.fromArray(l).getInverse(m.matrix);m.projectionMatrix.fromArray(d.projectionMatrix);m.viewport.set(e.x,e.y,e.width,e.height);0===c&&(v.matrix.copy(m.matrix),v.projectionMatrix.copy(m.projectionMatrix))}n&&n()});this.setAnimationLoop=function(a){n=a};this.getStandingMatrix=function(){console.warn("THREE.WebXRManager: getStandingMatrix() is no longer needed.");return new THREE.Matrix4};this.submitFrame=function(){}}function Zd(a){function b(){la=new Nf(D);la.get("WEBGL_depth_texture");la.get("OES_texture_float");la.get("OES_texture_float_linear");la.get("OES_texture_half_float");la.get("OES_texture_half_float_linear");la.get("OES_standard_derivatives");la.get("OES_element_index_uint");la.get("ANGLE_instanced_arrays");ha=new Ze(D,la);Ra=new Lf(D,la,a);Z=new Jg(D,la,ha);Z.scissor(T.copy(N).multiplyScalar(Y));Z.viewport(S.copy(ba).multiplyScalar(Y));gb=new Qf(D);Ba=new yg;hb=new Kg(D,la,Z,Ba,Ra,ha,gb);ra=new Ef(D);sa=new Of(D,ra,gb);oa=new Tf(sa,gb);va=new Sf(D);na=new xg(A,la,Ra);ta=new Cg;pa=new Hg;ma=new Jf(A,Z,oa,C);wa=new Kf(D,la,gb);ya=new Pf(D,la,gb);za=new Ig(A,D,Z,hb,Ra);gb.programs=na.programs;A.context=D;A.capabilities=Ra;A.extensions=la;A.properties=Ba;A.renderLists=ta;A.state=Z;A.info=gb}function c(a){a.preventDefault();console.log("THREE.WebGLRenderer: Context Lost.");B=!0}function d(){console.log("THREE.WebGLRenderer: Context Restored.");B=!1;b()}function e(a){a=a.target;a.removeEventListener("dispose",e);f(a);Ba.remove(a)}function f(a){var b=Ba.get(a).program;a.program=void 0;void 0!==b&&na.releaseProgram(b)}function g(a,b,c){a.render(function(a){A.renderBufferImmediate(a,b,c)})}function h(a,b,c){if(!1!==a.visible){if(a.layers.test(b.layers))if(a.isLight)y.pushLight(a),a.castShadow&&y.pushShadow(a);else if(a.isSprite)a.frustumCulled&&!ea.intersectsSprite(a)||y.pushSprite(a);else if(a.isImmediateRenderObject)c&&Rb.setFromMatrixPosition(a.matrixWorld).applyMatrix4(fa),E.push(a,null,a.material,Rb.z,null);else if(a.isMesh||a.isLine||a.isPoints)if(a.isSkinnedMesh&&a.skeleton.update(),!a.frustumCulled||ea.intersectsObject(a)){c&&Rb.setFromMatrixPosition(a.matrixWorld).applyMatrix4(fa);var d=oa.update(a),e=a.material;if(Array.isArray(e))for(var f=d.groups,g=0,l=f.length;g<l;g++){var m=f[g],n=e[m.materialIndex];n&&n.visible&&E.push(a,d,n,Rb.z,m)}else e.visible&&E.push(a,d,e,Rb.z,null)}a=a.children;g=0;for(l=a.length;g<l;g++){h(a[g],b,c)}}}function l(a,b,c,d){for(var e=0,f=a.length;e<f;e++){var g=a[e],h=g.object,l=g.geometry,n=void 0===d?g.material:d;g=g.group;if(c.isArrayCamera){W=c;for(var v=c.cameras,r=0,k=v.length,q;r<k;r++){q=v[r];if(h.layers.test(q.layers)){if("viewport"in q)Z.viewport(S.copy(q.viewport));else{var t=q.bounds;Z.viewport(S.set(t.x*Ya,t.y*R,t.z*Ya,t.w*R).multiplyScalar(Y))}m(h,b,q,l,n,g)}}}else W=null,m(h,b,c,l,n,g)}}function m(a,b,c,d,e,f){a.onBeforeRender(A,b,c,d,e,f);y=pa.get(b,W||c);a.modelViewMatrix.multiplyMatrices(c.matrixWorldInverse,a.matrixWorld);a.normalMatrix.getNormalMatrix(a.modelViewMatrix);if(a.isImmediateRenderObject){var h=a.isMesh&&0>a.matrixWorld.determinant();Z.setMaterial(e,h);h=n(c,b.fog,e,a);O="";g(a,h,e)}else A.renderBufferDirect(c,b.fog,d,e,a,f);a.onAfterRender(A,b,c,d,e,f);y=pa.get(b,W||c)}function v(a,b,c){var d=Ba.get(a),g=y.state.lights;c=na.getParameters(a,g.state,y.state.shadowsArray,b,X.numPlanes,X.numIntersection,c);var h=na.getProgramCode(a,c),l=d.program,m=!0;if(void 0===l)a.addEventListener("dispose",e);else if(l.code!==h)f(a);else{if(d.lightsHash!==g.state.hash)Ba.update(a,"lightsHash",g.state.hash);else if(void 0!==c.shaderID)return;m=!1}m&&(c.shaderID?(l=tb[c.shaderID],d.shader={name:a.type,uniforms:Ca.clone(l.uniforms),vertexShader:l.vertexShader,fragmentShader:l.fragmentShader}):d.shader={name:a.type,uniforms:a.uniforms,vertexShader:a.vertexShader,fragmentShader:a.fragmentShader},a.onBeforeCompile(d.shader,A),l=na.acquireProgram(a,d.shader,c,h),d.program=l,a.program=l);c=l.getAttributes();if(a.morphTargets)for(h=a.numSupportedMorphTargets=0;h<A.maxMorphTargets;h++){0<=c["morphTarget"+h]&&a.numSupportedMorphTargets++}if(a.morphNormals)for(h=a.numSupportedMorphNormals=0;h<A.maxMorphNormals;h++){0<=c["morphNormal"+h]&&a.numSupportedMorphNormals++}c=d.shader.uniforms;if(!a.isShaderMaterial&&!a.isRawShaderMaterial||!0===a.clipping)d.numClippingPlanes=X.numPlanes,d.numIntersection=X.numIntersection,c.clippingPlanes=X.uniform;d.fog=b;d.lightsHash=g.state.hash;a.lights&&(c.ambientLightColor.value=g.state.ambient,c.directionalLights.value=g.state.directional,c.spotLights.value=g.state.spot,c.rectAreaLights.value=g.state.rectArea,c.pointLights.value=g.state.point,c.hemisphereLights.value=g.state.hemi,c.directionalShadowMap.value=g.state.directionalShadowMap,c.directionalShadowMatrix.value=g.state.directionalShadowMatrix,c.spotShadowMap.value=g.state.spotShadowMap,c.spotShadowMatrix.value=g.state.spotShadowMatrix,c.pointShadowMap.value=g.state.pointShadowMap,c.pointShadowMatrix.value=g.state.pointShadowMatrix);a=d.program.getUniforms();a=db.seqWithValue(a.seq,c);d.uniformsList=a}function n(a,b,c,d){ca=0;var e=Ba.get(c),f=y.state.lights;ja&&(qa||a!==L)&&X.setState(c.clippingPlanes,c.clipIntersection,c.clipShadows,a,e,a===L&&c.id===J);!1===c.needsUpdate&&(void 0===e.program?c.needsUpdate=!0:c.fog&&e.fog!==b?c.needsUpdate=!0:c.lights&&e.lightsHash!==f.state.hash?c.needsUpdate=!0:void 0===e.numClippingPlanes||e.numClippingPlanes===X.numPlanes&&e.numIntersection===X.numIntersection||(c.needsUpdate=!0));c.needsUpdate&&(v(c,b,d),c.needsUpdate=!1);var g=!1,h=!1,l=!1;f=e.program;var m=f.getUniforms(),n=e.shader.uniforms;Z.useProgram(f.program)&&(l=h=g=!0);c.id!==J&&(J=c.id,h=!0);if(g||a!==L){m.setValue(D,"projectionMatrix",a.projectionMatrix);Ra.logarithmicDepthBuffer&&m.setValue(D,"logDepthBufFC",2/(_Mathlog(a.far+1)/_MathLN));L!==(W||a)&&(L=W||a,l=h=!0);if(c.isShaderMaterial||c.isMeshPhongMaterial||c.isMeshStandardMaterial||c.envMap)g=m.map.cameraPosition,void 0!==g&&g.setValue(D,Rb.setFromMatrixPosition(a.matrixWorld));(c.isMeshPhongMaterial||c.isMeshLambertMaterial||c.isMeshBasicMaterial||c.isMeshStandardMaterial||c.isShaderMaterial||c.skinning)&&m.setValue(D,"viewMatrix",a.matrixWorldInverse)}if(c.skinning&&(m.setOptional(D,d,"bindMatrix"),m.setOptional(D,d,"bindMatrixInverse"),a=d.skeleton))if(g=a.bones,Ra.floatVertexTextures){if(void 0===a.boneTexture){g=_Mathsqrt(4*g.length);g=P.ceilPowerOfTwo(g);g=_Mathmax(g,4);var k=new Float32Array(4*(g*g));k.set(a.boneMatrices);var t=new lb(k,g,g,1023,1015);t.needsUpdate=!0;a.boneMatrices=k;a.boneTexture=t;a.boneTextureSize=g}m.setValue(D,"boneTexture",a.boneTexture);m.setValue(D,"boneTextureSize",a.boneTextureSize)}else m.setOptional(D,a,"boneMatrices");h&&(m.setValue(D,"toneMappingExposure",A.toneMappingExposure),m.setValue(D,"toneMappingWhitePoint",A.toneMappingWhitePoint),c.lights&&(h=l,n.ambientLightColor.needsUpdate=h,n.directionalLights.needsUpdate=h,n.pointLights.needsUpdate=h,n.spotLights.needsUpdate=h,n.rectAreaLights.needsUpdate=h,n.hemisphereLights.needsUpdate=h),b&&c.fog&&(n.fogColor.value=b.color,b.isFog?(n.fogNear.value=b.near,n.fogFar.value=b.far):b.isFogExp2&&(n.fogDensity.value=b.density)),c.isMeshBasicMaterial?r(n,c):c.isMeshLambertMaterial?(r(n,c),c.emissiveMap&&(n.emissiveMap.value=c.emissiveMap)):c.isMeshPhongMaterial?(r(n,c),c.isMeshToonMaterial?(q(n,c),c.gradientMap&&(n.gradientMap.value=c.gradientMap)):q(n,c)):c.isMeshStandardMaterial?(r(n,c),c.isMeshPhysicalMaterial&&(n.clearCoat.value=c.clearCoat,n.clearCoatRoughness.value=c.clearCoatRoughness),n.roughness.value=c.roughness,n.metalness.value=c.metalness,c.roughnessMap&&(n.roughnessMap.value=c.roughnessMap),c.metalnessMap&&(n.metalnessMap.value=c.metalnessMap),c.emissiveMap&&(n.emissiveMap.value=c.emissiveMap),c.bumpMap&&(n.bumpMap.value=c.bumpMap,n.bumpScale.value=c.bumpScale,1===c.side&&(n.bumpScale.value*=-1)),c.normalMap&&(n.normalMap.value=c.normalMap,n.normalScale.value.copy(c.normalScale),1===c.side&&n.normalScale.value.negate()),c.displacementMap&&(n.displacementMap.value=c.displacementMap,n.displacementScale.value=c.displacementScale,n.displacementBias.value=c.displacementBias),c.envMap&&(n.envMapIntensity.value=c.envMapIntensity)):c.isMeshDepthMaterial?(r(n,c),c.displacementMap&&(n.displacementMap.value=c.displacementMap,n.displacementScale.value=c.displacementScale,n.displacementBias.value=c.displacementBias)):c.isMeshDistanceMaterial?(r(n,c),c.displacementMap&&(n.displacementMap.value=c.displacementMap,n.displacementScale.value=c.displacementScale,n.displacementBias.value=c.displacementBias),n.referencePosition.value.copy(c.referencePosition),n.nearDistance.value=c.nearDistance,n.farDistance.value=c.farDistance):c.isMeshNormalMaterial?(r(n,c),c.bumpMap&&(n.bumpMap.value=c.bumpMap,n.bumpScale.value=c.bumpScale,1===c.side&&(n.bumpScale.value*=-1)),c.normalMap&&(n.normalMap.value=c.normalMap,n.normalScale.value.copy(c.normalScale),1===c.side&&n.normalScale.value.negate()),c.displacementMap&&(n.displacementMap.value=c.displacementMap,n.displacementScale.value=c.displacementScale,n.displacementBias.value=c.displacementBias)):c.isLineBasicMaterial?(n.diffuse.value=c.color,n.opacity.value=c.opacity,c.isLineDashedMaterial&&(n.dashSize.value=c.dashSize,n.totalSize.value=c.dashSize+c.gapSize,n.scale.value=c.scale)):c.isPointsMaterial?(n.diffuse.value=c.color,n.opacity.value=c.opacity,n.size.value=c.size*Y,n.scale.value=.5*R,n.map.value=c.map,null!==c.map&&(!0===c.map.matrixAutoUpdate&&c.map.updateMatrix(),n.uvTransform.value.copy(c.map.matrix))):c.isShadowMaterial&&(n.color.value=c.color,n.opacity.value=c.opacity),void 0!==n.ltc_1&&(n.ltc_1.value=M.LTC_1),void 0!==n.ltc_2&&(n.ltc_2.value=M.LTC_2),db.upload(D,e.uniformsList,n,A));c.isShaderMaterial&&!0===c.uniformsNeedUpdate&&(db.upload(D,e.uniformsList,n,A),c.uniformsNeedUpdate=!1);m.setValue(D,"modelViewMatrix",d.modelViewMatrix);m.setValue(D,"normalMatrix",d.normalMatrix);m.setValue(D,"modelMatrix",d.matrixWorld);return f}function r(a,b){a.opacity.value=b.opacity;b.color&&(a.diffuse.value=b.color);b.emissive&&a.emissive.value.copy(b.emissive).multiplyScalar(b.emissiveIntensity);b.map&&(a.map.value=b.map);b.alphaMap&&(a.alphaMap.value=b.alphaMap);b.specularMap&&(a.specularMap.value=b.specularMap);b.envMap&&(a.envMap.value=b.envMap,a.flipEnvMap.value=b.envMap&&b.envMap.isCubeTexture?-1:1,a.reflectivity.value=b.reflectivity,a.refractionRatio.value=b.refractionRatio,a.maxMipLevel.value=Ba.get(b.envMap).__maxMipLevel);b.lightMap&&(a.lightMap.value=b.lightMap,a.lightMapIntensity.value=b.lightMapIntensity);b.aoMap&&(a.aoMap.value=b.aoMap,a.aoMapIntensity.value=b.aoMapIntensity);if(b.map)var c=b.map;else b.specularMap?c=b.specularMap:b.displacementMap?c=b.displacementMap:b.normalMap?c=b.normalMap:b.bumpMap?c=b.bumpMap:b.roughnessMap?c=b.roughnessMap:b.metalnessMap?c=b.metalnessMap:b.alphaMap?c=b.alphaMap:b.emissiveMap&&(c=b.emissiveMap);void 0!==c&&(c.isWebGLRenderTarget&&(c=c.texture),!0===c.matrixAutoUpdate&&c.updateMatrix(),a.uvTransform.value.copy(c.matrix))}function q(a,b){a.specular.value=b.specular;a.shininess.value=_Mathmax(b.shininess,1E-4);b.emissiveMap&&(a.emissiveMap.value=b.emissiveMap);b.bumpMap&&(a.bumpMap.value=b.bumpMap,a.bumpScale.value=b.bumpScale,1===b.side&&(a.bumpScale.value*=-1));b.normalMap&&(a.normalMap.value=b.normalMap,a.normalScale.value.copy(b.normalScale),1===b.side&&a.normalScale.value.negate());b.displacementMap&&(a.displacementMap.value=b.displacementMap,a.displacementScale.value=b.displacementScale,a.displacementBias.value=b.displacementBias)}console.log("THREE.WebGLRenderer","93");a=a||{};var k=void 0!==a.canvas?a.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),u=void 0!==a.context?a.context:null,z=void 0!==a.alpha?a.alpha:!1,x=void 0!==a.depth?a.depth:!0,w=void 0!==a.stencil?a.stencil:!0,H=void 0!==a.antialias?a.antialias:!1,C=void 0!==a.premultipliedAlpha?a.premultipliedAlpha:!0,V=void 0!==a.preserveDrawingBuffer?a.preserveDrawingBuffer:!1,Q=void 0!==a.powerPreference?a.powerPreference:"default",E=null,y=null;this.domElement=k;this.context=null;this.sortObjects=this.autoClearStencil=this.autoClearDepth=this.autoClearColor=this.autoClear=!0;this.clippingPlanes=[];this.localClippingEnabled=!1;this.gammaFactor=2;this.physicallyCorrectLights=this.gammaOutput=this.gammaInput=!1;this.toneMappingWhitePoint=this.toneMappingExposure=this.toneMapping=1;this.maxMorphTargets=8;this.maxMorphNormals=4;var A=this,B=!1,I=null,G=null,K=null,J=-1,O="",L=null,W=null,S=new U,T=new U,aa=null,ca=0,Ya=k.width,R=k.height,Y=1,ba=new U(0,0,Ya,R),N=new U(0,0,Ya,R),da=!1,ea=new qd,X=new Mf,ja=!1,qa=!1,fa=new F,Rb=new p;try{z={alpha:z,depth:x,stencil:w,antialias:H,premultipliedAlpha:C,preserveDrawingBuffer:V,powerPreference:Q};k.addEventListener("webglcontextlost",c,!1);k.addEventListener("webglcontextrestored",d,!1);var D=u||k.getContext("webgl",z)||k.getContext("experimental-webgl",z);if(null===D){if(null!==k.getContext("webgl"))throw Error("Error creating WebGL context with your selected attributes.");throw Error("Error creating WebGL context.")}void 0===D.getShaderPrecisionFormat&&(D.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Mg){console.error("THREE.WebGLRenderer: "+Mg.message)}var la,Ra,Z,gb,Ba,hb,ra,sa,oa,na,ta,pa,ma,va,wa,ya,za,ha;b();var ka="xr"in navigator?new Lg(A):new $e(A);this.vr=ka;var Aa=new Ye(A,oa,Ra.maxTextureSize);this.shadowMap=Aa;this.getContext=function(){return D};this.getContextAttributes=function(){return D.getContextAttributes()};this.forceContextLoss=function(){var a=la.get("WEBGL_lose_context");a&&a.loseContext()};this.forceContextRestore=function(){var a=la.get("WEBGL_lose_context");a&&a.restoreContext()};this.getPixelRatio=function(){return Y};this.setPixelRatio=function(a){void 0!==a&&(Y=a,this.setSize(Ya,R,!1))};this.getSize=function(){return{width:Ya,height:R}};this.setSize=function(a,b,c){ka.isPresenting()?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(Ya=a,R=b,k.width=a*Y,k.height=b*Y,!1!==c&&(k.style.width=a+"px",k.style.height=b+"px"),this.setViewport(0,0,a,b))};this.getDrawingBufferSize=function(){return{width:Ya*Y,height:R*Y}};this.setDrawingBufferSize=function(a,b,c){Ya=a;R=b;Y=c;k.width=a*c;k.height=b*c;this.setViewport(0,0,a,b)};this.getCurrentViewport=function(){return S};this.setViewport=function(a,b,c,d){ba.set(a,R-b-d,c,d);Z.viewport(S.copy(ba).multiplyScalar(Y))};this.setScissor=function(a,b,c,d){N.set(a,R-b-d,c,d);Z.scissor(T.copy(N).multiplyScalar(Y))};this.setScissorTest=function(a){Z.setScissorTest(da=a)};this.getClearColor=function(){return ma.getClearColor()};this.setClearColor=function(){ma.setClearColor.apply(ma,arguments)};this.getClearAlpha=function(){return ma.getClearAlpha()};this.setClearAlpha=function(){ma.setClearAlpha.apply(ma,arguments)};this.clear=function(a,b,c){var d=0;if(void 0===a||a)d|=D.COLOR_BUFFER_BIT;if(void 0===b||b)d|=D.DEPTH_BUFFER_BIT;if(void 0===c||c)d|=D.STENCIL_BUFFER_BIT;D.clear(d)};this.clearColor=function(){this.clear(!0,!1,!1)};this.clearDepth=function(){this.clear(!1,!0,!1)};this.clearStencil=function(){this.clear(!1,!1,!0)};this.clearTarget=function(a,b,c,d){this.setRenderTarget(a);this.clear(b,c,d)};this.dispose=function(){k.removeEventListener("webglcontextlost",c,!1);k.removeEventListener("webglcontextrestored",d,!1);ta.dispose();pa.dispose();Ba.dispose();oa.dispose();ka.dispose();ua.stop()};this.renderBufferImmediate=function(a,b,c){Z.initAttributes();var d=Ba.get(a);a.hasPositions&&!d.position&&(d.position=D.createBuffer());a.hasNormals&&!d.normal&&(d.normal=D.createBuffer());a.hasUvs&&!d.uv&&(d.uv=D.createBuffer());a.hasColors&&!d.color&&(d.color=D.createBuffer());b=b.getAttributes();a.hasPositions&&(D.bindBuffer(D.ARRAY_BUFFER,d.position),D.bufferData(D.ARRAY_BUFFER,a.positionArray,D.DYNAMIC_DRAW),Z.enableAttribute(b.position),D.vertexAttribPointer(b.position,3,D.FLOAT,!1,0,0));if(a.hasNormals){D.bindBuffer(D.ARRAY_BUFFER,d.normal);if(!c.isMeshPhongMaterial&&!c.isMeshStandardMaterial&&!c.isMeshNormalMaterial&&!0===c.flatShading)for(var e=0,f=3*a.count;e<f;e+=9){var g=a.normalArray,h=(g[e+0]+g[e+3]+g[e+6])/3,l=(g[e+1]+g[e+4]+g[e+7])/3,m=(g[e+2]+g[e+5]+g[e+8])/3;g[e+0]=h;g[e+1]=l;g[e+2]=m;g[e+3]=h;g[e+4]=l;g[e+5]=m;g[e+6]=h;g[e+7]=l;g[e+8]=m}D.bufferData(D.ARRAY_BUFFER,a.normalArray,D.DYNAMIC_DRAW);Z.enableAttribute(b.normal);D.vertexAttribPointer(b.normal,3,D.FLOAT,!1,0,0)}a.hasUvs&&c.map&&(D.bindBuffer(D.ARRAY_BUFFER,d.uv),D.bufferData(D.ARRAY_BUFFER,a.uvArray,D.DYNAMIC_DRAW),Z.enableAttribute(b.uv),D.vertexAttribPointer(b.uv,2,D.FLOAT,!1,0,0));a.hasColors&&0!==c.vertexColors&&(D.bindBuffer(D.ARRAY_BUFFER,d.color),D.bufferData(D.ARRAY_BUFFER,a.colorArray,D.DYNAMIC_DRAW),Z.enableAttribute(b.color),D.vertexAttribPointer(b.color,3,D.FLOAT,!1,0,0));Z.disableUnusedAttributes();D.drawArrays(D.TRIANGLES,0,a.count);a.count=0};this.renderBufferDirect=function(a,b,c,d,e,f){var g=e.isMesh&&0>e.matrixWorld.determinant();Z.setMaterial(d,g);var h=n(a,b,d,e);a=c.id+"_"+h.id+"_"+(!0===d.wireframe);var l=!1;a!==O&&(O=a,l=!0);e.morphTargetInfluences&&(va.update(e,c,d,h),l=!0);g=c.index;var m=c.attributes.position;b=1;!0===d.wireframe&&(g=sa.getWireframeAttribute(c),b=2);a=wa;if(null!==g){var v=ra.get(g);a=ya;a.setIndex(v)}if(l){if(c&&c.isInstancedBufferGeometry&&null===la.get("ANGLE_instanced_arrays"))console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");else{Z.initAttributes();l=c.attributes;h=h.getAttributes();var r=d.defaultAttributeValues;for(C in h){var k=h[C];if(0<=k){var q=l[C];if(void 0!==q){var t=q.normalized,u=q.itemSize,p=ra.get(q);if(void 0!==p){var z=p.buffer,w=p.type;p=p.bytesPerElement;if(q.isInterleavedBufferAttribute){var x=q.data,H=x.stride;q=q.offset;x&&x.isInstancedInterleavedBuffer?(Z.enableAttributeAndDivisor(k,x.meshPerAttribute),void 0===c.maxInstancedCount&&(c.maxInstancedCount=x.meshPerAttribute*x.count)):Z.enableAttribute(k);D.bindBuffer(D.ARRAY_BUFFER,z);D.vertexAttribPointer(k,u,w,t,H*p,q*p)}else q.isInstancedBufferAttribute?(Z.enableAttributeAndDivisor(k,q.meshPerAttribute),void 0===c.maxInstancedCount&&(c.maxInstancedCount=q.meshPerAttribute*q.count)):Z.enableAttribute(k),D.bindBuffer(D.ARRAY_BUFFER,z),D.vertexAttribPointer(k,u,w,t,0,0)}}else if(void 0!==r&&(t=r[C],void 0!==t))switch(t.length){case 2:D.vertexAttrib2fv(k,t);break;case 3:D.vertexAttrib3fv(k,t);break;case 4:D.vertexAttrib4fv(k,t);break;default:D.vertexAttrib1fv(k,t);}}}Z.disableUnusedAttributes()}null!==g&&D.bindBuffer(D.ELEMENT_ARRAY_BUFFER,v.buffer)}v=1/0;null!==g?v=g.count:void 0!==m&&(v=m.count);g=c.drawRange.start*b;m=null!==f?f.start*b:0;var C=_Mathmax(g,m);f=_Mathmax(0,_Mathmin(v,g+c.drawRange.count*b,m+(null!==f?f.count*b:1/0))-1-C+1);if(0!==f){if(e.isMesh){if(!0===d.wireframe)Z.setLineWidth(d.wireframeLinewidth*(null===G?Y:1)),a.setMode(D.LINES);else switch(e.drawMode){case 0:a.setMode(D.TRIANGLES);break;case 1:a.setMode(D.TRIANGLE_STRIP);break;case 2:a.setMode(D.TRIANGLE_FAN);}}else e.isLine?(d=d.linewidth,void 0===d&&(d=1),Z.setLineWidth(d*(null===G?Y:1)),e.isLineSegments?a.setMode(D.LINES):e.isLineLoop?a.setMode(D.LINE_LOOP):a.setMode(D.LINE_STRIP)):e.isPoints&&a.setMode(D.POINTS);c&&c.isInstancedBufferGeometry?0<c.maxInstancedCount&&a.renderInstances(c,C,f):a.render(C,f)}};this.compile=function(a,b){y=pa.get(a,b);y.init();a.traverse(function(a){a.isLight&&(y.pushLight(a),a.castShadow&&y.pushShadow(a))});y.setupLights(b);a.traverse(function(b){if(b.material)if(Array.isArray(b.material))for(var c=0;c<b.material.length;c++){v(b.material[c],a.fog,b)}else v(b.material,a.fog,b)})};var xa=null,ua=new Td;ua.setAnimationLoop(function(){ka.isPresenting()||xa&&xa()});ua.setContext(window);this.setAnimationLoop=function(a){xa=a;ka.setAnimationLoop(a);ua.start()};this.render=function(a,b,c,d){if(!b||!b.isCamera)console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");else if(!B){O="";J=-1;L=null;!0===a.autoUpdate&&a.updateMatrixWorld();null===b.parent&&b.updateMatrixWorld();ka.enabled&&(b=ka.getCamera(b));y=pa.get(a,b);y.init();a.onBeforeRender(A,a,b,c);fa.multiplyMatrices(b.projectionMatrix,b.matrixWorldInverse);ea.setFromMatrix(fa);qa=this.localClippingEnabled;ja=X.init(this.clippingPlanes,qa,b);E=ta.get(a,b);E.init();h(a,b,A.sortObjects);!0===A.sortObjects&&E.sort();ja&&X.beginShadows();Aa.render(y.state.shadowsArray,a,b);y.setupLights(b);ja&&X.endShadows();this.info.autoReset&&this.info.reset();void 0===c&&(c=null);this.setRenderTarget(c);ma.render(E,a,b,d);d=E.opaque;var e=E.transparent;if(a.overrideMaterial){var f=a.overrideMaterial;d.length&&l(d,a,b,f);e.length&&l(e,a,b,f)}else d.length&&l(d,a,b),e.length&&l(e,a,b);za.render(y.state.spritesArray,a,b);c&&hb.updateRenderTargetMipmap(c);Z.buffers.depth.setTest(!0);Z.buffers.depth.setMask(!0);Z.buffers.color.setMask(!0);Z.setPolygonOffset(!1);a.onAfterRender(A,a,b);ka.enabled&&ka.submitFrame();y=E=null}};this.allocTextureUnit=function(){var a=ca;a>=Ra.maxTextures&&console.warn("THREE.WebGLRenderer: Trying to use "+a+" texture units while this GPU supports only "+Ra.maxTextures);ca+=1;return a};this.setTexture2D=function(){var a=!1;return function(b,c){b&&b.isWebGLRenderTarget&&(a||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),a=!0),b=b.texture);hb.setTexture2D(b,c)}}();this.setTexture=function(){var a=!1;return function(b,c){a||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),a=!0);hb.setTexture2D(b,c)}}();this.setTextureCube=function(){var a=!1;return function(b,c){b&&b.isWebGLRenderTargetCube&&(a||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),a=!0),b=b.texture);b&&b.isCubeTexture||Array.isArray(b.image)&&6===b.image.length?hb.setTextureCube(b,c):hb.setTextureCubeDynamic(b,c)}}();this.setFramebuffer=function(a){I=a};this.getRenderTarget=function(){return G};this.setRenderTarget=function(a){(G=a)&&void 0===Ba.get(a).__webglFramebuffer&&hb.setupRenderTarget(a);var b=I,c=!1;a?(b=Ba.get(a).__webglFramebuffer,a.isWebGLRenderTargetCube&&(b=b[a.activeCubeFace],c=!0),S.copy(a.viewport),T.copy(a.scissor),aa=a.scissorTest):(S.copy(ba).multiplyScalar(Y),T.copy(N).multiplyScalar(Y),aa=da);K!==b&&(D.bindFramebuffer(D.FRAMEBUFFER,b),K=b);Z.viewport(S);Z.scissor(T);Z.setScissorTest(aa);c&&(c=Ba.get(a.texture),D.framebufferTexture2D(D.FRAMEBUFFER,D.COLOR_ATTACHMENT0,D.TEXTURE_CUBE_MAP_POSITIVE_X+a.activeCubeFace,c.__webglTexture,a.activeMipMapLevel))};this.readRenderTargetPixels=function(a,b,c,d,e,f){if(a&&a.isWebGLRenderTarget){var g=Ba.get(a).__webglFramebuffer;if(g){var h=!1;g!==K&&(D.bindFramebuffer(D.FRAMEBUFFER,g),h=!0);try{var l=a.texture,m=l.format,n=l.type;1023!==m&&ha.convert(m)!==D.getParameter(D.IMPLEMENTATION_COLOR_READ_FORMAT)?console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format."):1009===n||ha.convert(n)===D.getParameter(D.IMPLEMENTATION_COLOR_READ_TYPE)||1015===n&&(la.get("OES_texture_float")||la.get("WEBGL_color_buffer_float"))||1016===n&&la.get("EXT_color_buffer_half_float")?D.checkFramebufferStatus(D.FRAMEBUFFER)===D.FRAMEBUFFER_COMPLETE?0<=b&&b<=a.width-d&&0<=c&&c<=a.height-e&&D.readPixels(b,c,d,e,ha.convert(m),ha.convert(n),f):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete."):console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.")}finally{h&&D.bindFramebuffer(D.FRAMEBUFFER,K)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")};this.copyFramebufferToTexture=function(a,b,c){var d=b.image.width,e=b.image.height,f=ha.convert(b.format);this.setTexture2D(b,0);D.copyTexImage2D(D.TEXTURE_2D,c||0,f,a.x,a.y,d,e,0)};this.copyTextureToTexture=function(a,b,c,d){var e=b.image.width,f=b.image.height,g=ha.convert(c.format),h=ha.convert(c.type);this.setTexture2D(c,0);b.isDataTexture?D.texSubImage2D(D.TEXTURE_2D,d||0,a.x,a.y,e,f,g,h,b.image.data):D.texSubImage2D(D.TEXTURE_2D,d||0,a.x,a.y,g,h,b.image)}}function Sb(a,b){this.name="";this.color=new K(a);this.density=void 0!==b?b:25e-5}function Tb(a,b,c){this.name="";this.color=new K(a);this.near=void 0!==b?b:1;this.far=void 0!==c?c:1E3}function sd(){B.call(this);this.type="Scene";this.overrideMaterial=this.fog=this.background=null;this.autoUpdate=!0}function ib(a){L.call(this);this.type="SpriteMaterial";this.color=new K(16777215);this.map=null;this.rotation=0;this.lights=this.fog=!1;this.setValues(a)}function Fc(a){B.call(this);this.type="Sprite";this.material=void 0!==a?a:new ib;this.center=new y(.5,.5)}function Gc(){B.call(this);this.type="LOD";Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function Hc(a,b){a=a||[];this.bones=a.slice(0);this.boneMatrices=new Float32Array(16*this.bones.length);if(void 0===b)this.calculateInverses();else if(this.bones.length===b.length)this.boneInverses=b.slice(0);else for(console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[],a=0,b=this.bones.length;a<b;a++){this.boneInverses.push(new F)}}function td(){B.call(this);this.type="Bone"}function ud(a,b){pa.call(this,a,b);this.type="SkinnedMesh";this.bindMode="attached";this.bindMatrix=new F;this.bindMatrixInverse=new F;a=this.initBones();a=new Hc(a);this.bind(a,this.matrixWorld);this.normalizeSkinWeights()}function T(a){L.call(this);this.type="LineBasicMaterial";this.color=new K(16777215);this.linewidth=1;this.linejoin=this.linecap="round";this.lights=!1;this.setValues(a)}function ma(a,b,c){if(1===c)return console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new aa(a,b);B.call(this);this.type="Line";this.geometry=void 0!==a?a:new G;this.material=void 0!==b?b:new T({color:16777215*Math.random()})}function aa(a,b){ma.call(this,a,b);this.type="LineSegments"}function vd(a,b){ma.call(this,a,b);this.type="LineLoop"}function Ia(a){L.call(this);this.type="PointsMaterial";this.color=new K(16777215);this.map=null;this.size=1;this.sizeAttenuation=!0;this.lights=this.morphTargets=!1;this.setValues(a)}function Ub(a,b){B.call(this);this.type="Points";this.geometry=void 0!==a?a:new G;this.material=void 0!==b?b:new Ia({color:16777215*Math.random()})}function wd(){B.call(this);this.type="Group"}function $d(a,b,c,d,e,f,g,h,l){ca.call(this,a,b,c,d,e,f,g,h,l);this.generateMipmaps=!1}function Vb(a,b,c,d,e,f,g,h,l,m,v,n){ca.call(this,null,f,g,h,l,m,d,e,v,n);this.image={width:b,height:c};this.mipmaps=a;this.generateMipmaps=this.flipY=!1}function Ic(a,b,c,d,e,f,g,h,l,m){m=void 0!==m?m:1026;if(1026!==m&&1027!==m)throw Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===c&&1026===m&&(c=1012);void 0===c&&1027===m&&(c=1020);ca.call(this,null,d,e,f,g,h,m,c,l);this.image={width:a,height:b};this.magFilter=void 0!==g?g:1003;this.minFilter=void 0!==h?h:1003;this.generateMipmaps=this.flipY=!1}function Wb(a){G.call(this);this.type="WireframeGeometry";var b=[],c,d,e,f=[0,0],g={},h=["a","b","c"];if(a&&a.isGeometry){var l=a.faces,m=0;for(d=l.length;m<d;m++){var v=l[m];for(c=0;3>c;c++){var n=v[h[c]],r=v[h[(c+1)%3]];f[0]=_Mathmin(n,r);f[1]=_Mathmax(n,r);n=f[0]+","+f[1];void 0===g[n]&&(g[n]={index1:f[0],index2:f[1]})}}for(n in g){m=g[n],h=a.vertices[m.index1],b.push(h.x,h.y,h.z),h=a.vertices[m.index2],b.push(h.x,h.y,h.z)}}else if(a&&a.isBufferGeometry)if(h=new p,null!==a.index){l=a.attributes.position;v=a.index;var k=a.groups;0===k.length&&(k=[{start:0,count:v.count,materialIndex:0}]);a=0;for(e=k.length;a<e;++a){for(m=k[a],c=m.start,d=m.count,m=c,d=c+d;m<d;m+=3){for(c=0;3>c;c++){n=v.getX(m+c),r=v.getX(m+(c+1)%3),f[0]=_Mathmin(n,r),f[1]=_Mathmax(n,r),n=f[0]+","+f[1],void 0===g[n]&&(g[n]={index1:f[0],index2:f[1]})}}}for(n in g){m=g[n],h.fromBufferAttribute(l,m.index1),b.push(h.x,h.y,h.z),h.fromBufferAttribute(l,m.index2),b.push(h.x,h.y,h.z)}}else for(l=a.attributes.position,m=0,d=l.count/3;m<d;m++){for(c=0;3>c;c++){g=3*m+c,h.fromBufferAttribute(l,g),b.push(h.x,h.y,h.z),g=3*m+(c+1)%3,h.fromBufferAttribute(l,g),b.push(h.x,h.y,h.z)}}this.addAttribute("position",new A(b,3))}function Jc(a,b,c){J.call(this);this.type="ParametricGeometry";this.parameters={func:a,slices:b,stacks:c};this.fromBufferGeometry(new Xb(a,b,c));this.mergeVertices()}function Xb(a,b,c){G.call(this);this.type="ParametricBufferGeometry";this.parameters={func:a,slices:b,stacks:c};var d=[],e=[],f=[],g=[],h=new p,l=new p,m=new p,v=new p,n=new p,r,k;3>a.length&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");var t=b+1;for(r=0;r<=c;r++){var u=r/c;for(k=0;k<=b;k++){var z=k/b;a(z,u,l);e.push(l.x,l.y,l.z);0<=z-1E-5?(a(z-1E-5,u,m),v.subVectors(l,m)):(a(z+1E-5,u,m),v.subVectors(m,l));0<=u-1E-5?(a(z,u-1E-5,m),n.subVectors(l,m)):(a(z,u+1E-5,m),n.subVectors(m,l));h.crossVectors(v,n).normalize();f.push(h.x,h.y,h.z);g.push(z,u)}}for(r=0;r<c;r++){for(k=0;k<b;k++){a=r*t+k+1,h=(r+1)*t+k+1,l=(r+1)*t+k,d.push(r*t+k,a,l),d.push(a,h,l)}}this.setIndex(d);this.addAttribute("position",new A(e,3));this.addAttribute("normal",new A(f,3));this.addAttribute("uv",new A(g,2))}function Kc(a,b,c,d){J.call(this);this.type="PolyhedronGeometry";this.parameters={vertices:a,indices:b,radius:c,detail:d};this.fromBufferGeometry(new va(a,b,c,d));this.mergeVertices()}function va(a,b,c,d){function e(a){h.push(a.x,a.y,a.z)}function f(b,c){b*=3;c.x=a[b+0];c.y=a[b+1];c.z=a[b+2]}function g(a,b,c,d){0>d&&1===a.x&&(l[b]=a.x-1);0===c.x&&0===c.z&&(l[b]=d/2/_MathPI+.5)}G.call(this);this.type="PolyhedronBufferGeometry";this.parameters={vertices:a,indices:b,radius:c,detail:d};c=c||1;d=d||0;var h=[],l=[];(function(a){for(var c=new p,d=new p,g=new p,h=0;h<b.length;h+=3){f(b[h+0],c);f(b[h+1],d);f(b[h+2],g);var l,m,k=c,w=g,H=_Mathpow(2,a),C=[];for(m=0;m<=H;m++){C[m]=[];var y=k.clone().lerp(w,m/H),Q=d.clone().lerp(w,m/H),E=H-m;for(l=0;l<=E;l++){C[m][l]=0===l&&m===H?y:y.clone().lerp(Q,l/E)}}for(m=0;m<H;m++){for(l=0;l<2*(H-m)-1;l++){k=_Mathfloor(l/2),0===l%2?(e(C[m][k+1]),e(C[m+1][k]),e(C[m][k])):(e(C[m][k+1]),e(C[m+1][k+1]),e(C[m+1][k]))}}}})(d);(function(a){for(var b=new p,c=0;c<h.length;c+=3){b.x=h[c+0],b.y=h[c+1],b.z=h[c+2],b.normalize().multiplyScalar(a),h[c+0]=b.x,h[c+1]=b.y,h[c+2]=b.z}})(c);(function(){for(var a=new p,b=0;b<h.length;b+=3){a.x=h[b+0],a.y=h[b+1],a.z=h[b+2],l.push(_Mathatan(a.z,-a.x)/2/_MathPI+.5,1-(_Mathatan(-a.y,_Mathsqrt(a.x*a.x+a.z*a.z))/_MathPI+.5))}a=new p;b=new p;for(var c=new p,d=new p,e=new y,f=new y,k=new y,z=0,x=0;z<h.length;z+=9,x+=6){a.set(h[z+0],h[z+1],h[z+2]);b.set(h[z+3],h[z+4],h[z+5]);c.set(h[z+6],h[z+7],h[z+8]);e.set(l[x+0],l[x+1]);f.set(l[x+2],l[x+3]);k.set(l[x+4],l[x+5]);d.copy(a).add(b).add(c).divideScalar(3);var w=_Mathatan(d.z,-d.x);g(e,x+0,a,w);g(f,x+2,b,w);g(k,x+4,c,w)}for(a=0;a<l.length;a+=6){b=l[a+0],c=l[a+2],d=l[a+4],e=_Mathmin(b,c,d),.9<_Mathmax(b,c,d)&&.1>e&&(.2>b&&(l[a+0]+=1),.2>c&&(l[a+2]+=1),.2>d&&(l[a+4]+=1))}})();this.addAttribute("position",new A(h,3));this.addAttribute("normal",new A(h.slice(),3));this.addAttribute("uv",new A(l,2));0===d?this.computeVertexNormals():this.normalizeNormals()}function Lc(a,b){J.call(this);this.type="TetrahedronGeometry";this.parameters={radius:a,detail:b};this.fromBufferGeometry(new Yb(a,b));this.mergeVertices()}function Yb(a,b){va.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],a,b);this.type="TetrahedronBufferGeometry";this.parameters={radius:a,detail:b}}function Mc(a,b){J.call(this);this.type="OctahedronGeometry";this.parameters={radius:a,detail:b};this.fromBufferGeometry(new ub(a,b));this.mergeVertices()}function ub(a,b){va.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],a,b);this.type="OctahedronBufferGeometry";this.parameters={radius:a,detail:b}}function Nc(a,b){J.call(this);this.type="IcosahedronGeometry";this.parameters={radius:a,detail:b};this.fromBufferGeometry(new Zb(a,b));this.mergeVertices()}function Zb(a,b){var c=(1+2.23606797749979)/2;va.call(this,[-1,c,0,1,c,0,-1,-c,0,1,-c,0,0,-1,c,0,1,c,0,-1,-c,0,1,-c,c,0,-1,c,0,1,-c,0,-1,-c,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],a,b);this.type="IcosahedronBufferGeometry";this.parameters={radius:a,detail:b}}function Oc(a,b){J.call(this);this.type="DodecahedronGeometry";this.parameters={radius:a,detail:b};this.fromBufferGeometry(new $b(a,b));this.mergeVertices()}function $b(a,b){var c=(1+2.23606797749979)/2,d=1/c;va.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-d,-c,0,-d,c,0,d,-c,0,d,c,-d,-c,0,-d,c,0,d,-c,0,d,c,0,-c,0,-d,c,0,-d,-c,0,d,c,0,d],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],a,b);this.type="DodecahedronBufferGeometry";this.parameters={radius:a,detail:b}}function Pc(a,b,c,d,e,f){J.call(this);this.type="TubeGeometry";this.parameters={path:a,tubularSegments:b,radius:c,radialSegments:d,closed:e};void 0!==f&&console.warn("THREE.TubeGeometry: taper has been removed.");a=new ac(a,b,c,d,e);this.tangents=a.tangents;this.normals=a.normals;this.binormals=a.binormals;this.fromBufferGeometry(a);this.mergeVertices()}function ac(a,b,c,d,e){function f(e){v=a.getPointAt(e/b,v);var f=g.normals[e];e=g.binormals[e];for(k=0;k<=d;k++){var m=2*(k/d*_MathPI),n=_Mathsin(m);m=-_Mathcos(m);l.x=m*f.x+n*e.x;l.y=m*f.y+n*e.y;l.z=m*f.z+n*e.z;l.normalize();t.push(l.x,l.y,l.z);h.x=v.x+c*l.x;h.y=v.y+c*l.y;h.z=v.z+c*l.z;q.push(h.x,h.y,h.z)}}G.call(this);this.type="TubeBufferGeometry";this.parameters={path:a,tubularSegments:b,radius:c,radialSegments:d,closed:e};b=b||64;c=c||1;d=d||8;e=e||!1;var g=a.computeFrenetFrames(b,e);this.tangents=g.tangents;this.normals=g.normals;this.binormals=g.binormals;var h=new p,l=new p,m=new y,v=new p,n,k,q=[],t=[],u=[],z=[];for(n=0;n<b;n++){f(n)}f(!1===e?b:0);for(n=0;n<=b;n++){for(k=0;k<=d;k++){m.x=n/b,m.y=k/d,u.push(m.x,m.y)}}(function(){for(k=1;k<=b;k++){for(n=1;n<=d;n++){var a=(d+1)*k+(n-1),c=(d+1)*k+n,e=(d+1)*(k-1)+n;z.push((d+1)*(k-1)+(n-1),a,e);z.push(a,c,e)}}})();this.setIndex(z);this.addAttribute("position",new A(q,3));this.addAttribute("normal",new A(t,3));this.addAttribute("uv",new A(u,2))}function Qc(a,b,c,d,e,f,g){J.call(this);this.type="TorusKnotGeometry";this.parameters={radius:a,tube:b,tubularSegments:c,radialSegments:d,p:e,q:f};void 0!==g&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead.");this.fromBufferGeometry(new bc(a,b,c,d,e,f));this.mergeVertices()}function bc(a,b,c,d,e,f){function g(a,b,c,d,e){var f=_Mathsin(a);b=c/b*a;c=_Mathcos(b);e.x=.5*(d*(2+c))*_Mathcos(a);e.y=.5*(d*(2+c)*f);e.z=.5*(d*_Mathsin(b))}G.call(this);this.type="TorusKnotBufferGeometry";this.parameters={radius:a,tube:b,tubularSegments:c,radialSegments:d,p:e,q:f};a=a||1;b=b||.4;c=_Mathfloor(c)||64;d=_Mathfloor(d)||8;e=e||2;f=f||3;var h=[],l=[],m=[],v=[],n,k=new p,q=new p,t=new p,u=new p,z=new p,x=new p,w=new p;for(n=0;n<=c;++n){var H=2*(n/c*e*_MathPI);g(H,e,f,a,t);g(H+.01,e,f,a,u);x.subVectors(u,t);w.addVectors(u,t);z.crossVectors(x,w);w.crossVectors(z,x);z.normalize();w.normalize();for(H=0;H<=d;++H){var C=2*(H/d*_MathPI),y=-b*_Mathcos(C);C=b*_Mathsin(C);k.x=t.x+(y*w.x+C*z.x);k.y=t.y+(y*w.y+C*z.y);k.z=t.z+(y*w.z+C*z.z);l.push(k.x,k.y,k.z);q.subVectors(k,t).normalize();m.push(q.x,q.y,q.z);v.push(n/c);v.push(H/d)}}for(H=1;H<=c;H++){for(n=1;n<=d;n++){a=(d+1)*H+(n-1),b=(d+1)*H+n,e=(d+1)*(H-1)+n,h.push((d+1)*(H-1)+(n-1),a,e),h.push(a,b,e)}}this.setIndex(h);this.addAttribute("position",new A(l,3));this.addAttribute("normal",new A(m,3));this.addAttribute("uv",new A(v,2))}function Rc(a,b,c,d,e){J.call(this);this.type="TorusGeometry";this.parameters={radius:a,tube:b,radialSegments:c,tubularSegments:d,arc:e};this.fromBufferGeometry(new cc(a,b,c,d,e));this.mergeVertices()}function cc(a,b,c,d,e){G.call(this);this.type="TorusBufferGeometry";this.parameters={radius:a,tube:b,radialSegments:c,tubularSegments:d,arc:e};a=a||1;b=b||.4;c=_Mathfloor(c)||8;d=_Mathfloor(d)||6;e=e||2*_MathPI;var f=[],g=[],h=[],l=[],m=new p,v=new p,n=new p,k,q;for(k=0;k<=c;k++){for(q=0;q<=d;q++){var t=q/d*e,u=2*(k/c*_MathPI);v.x=(a+b*_Mathcos(u))*_Mathcos(t);v.y=(a+b*_Mathcos(u))*_Mathsin(t);v.z=b*_Mathsin(u);g.push(v.x,v.y,v.z);m.x=a*_Mathcos(t);m.y=a*_Mathsin(t);n.subVectors(v,m).normalize();h.push(n.x,n.y,n.z);l.push(q/d);l.push(k/c)}}for(k=1;k<=c;k++){for(q=1;q<=d;q++){a=(d+1)*(k-1)+q-1,b=(d+1)*(k-1)+q,e=(d+1)*k+q,f.push((d+1)*k+q-1,a,e),f.push(a,b,e)}}this.setIndex(f);this.addAttribute("position",new A(g,3));this.addAttribute("normal",new A(h,3));this.addAttribute("uv",new A(l,2))}function af(a,b,c,d,e){for(var f,g=0,h=b,l=c-d;h<c;h+=d){g+=(a[l]-a[h])*(a[h+1]+a[l+1]),l=h}if(e===0<g)for(e=b;e<c;e+=d){f=bf(e,a[e],a[e+1],f)}else for(e=c-d;e>=b;e-=d){f=bf(e,a[e],a[e+1],f)}f&&vb(f,f.next)&&(Sc(f),f=f.next);return f}function Tc(a,b){if(!a)return a;b||(b=a);do{var c=!1;if(a.steiner||!vb(a,a.next)&&0!==na(a.prev,a,a.next))a=a.next;else{Sc(a);a=b=a.prev;if(a===a.next)break;c=!0}}while(c||a!==b);return b}function Uc(a,b,c,d,e,f,g){if(a){if(!g&&f){var h=a,l=h;do{null===l.z&&(l.z=ae(l.x,l.y,d,e,f)),l.prevZ=l.prev,l=l.nextZ=l.next}while(l!==h);l.prevZ.nextZ=null;l.prevZ=null;h=l;var m,v,n,k,q=1;do{l=h;var t=h=null;for(v=0;l;){v++;var p=l;for(m=n=0;m<q&&(n++,p=p.nextZ,p);m++){}for(k=q;0<n||0<k&&p;){0!==n&&(0===k||!p||l.z<=p.z)?(m=l,l=l.nextZ,n--):(m=p,p=p.nextZ,k--),t?t.nextZ=m:h=m,m.prevZ=t,t=m}l=p}t.nextZ=null;q*=2}while(1<v)}for(h=a;a.prev!==a.next;){l=a.prev;p=a.next;if(f)a:{t=a;k=d;var z=e,x=f;v=t.prev;n=t;q=t.next;if(0<=na(v,n,q))t=!1;else{var w=v.x>n.x?v.x>q.x?v.x:q.x:n.x>q.x?n.x:q.x,H=v.y>n.y?v.y>q.y?v.y:q.y:n.y>q.y?n.y:q.y;m=ae(v.x<n.x?v.x<q.x?v.x:q.x:n.x<q.x?n.x:q.x,v.y<n.y?v.y<q.y?v.y:q.y:n.y<q.y?n.y:q.y,k,z,x);k=ae(w,H,k,z,x);for(z=t.nextZ;z&&z.z<=k;){if(z!==t.prev&&z!==t.next&&xd(v.x,v.y,n.x,n.y,q.x,q.y,z.x,z.y)&&0<=na(z.prev,z,z.next)){t=!1;break a}z=z.nextZ}for(z=t.prevZ;z&&z.z>=m;){if(z!==t.prev&&z!==t.next&&xd(v.x,v.y,n.x,n.y,q.x,q.y,z.x,z.y)&&0<=na(z.prev,z,z.next)){t=!1;break a}z=z.prevZ}t=!0}}else a:if(t=a,v=t.prev,n=t,q=t.next,0<=na(v,n,q))t=!1;else{for(m=t.next.next;m!==t.prev;){if(xd(v.x,v.y,n.x,n.y,q.x,q.y,m.x,m.y)&&0<=na(m.prev,m,m.next)){t=!1;break a}m=m.next}t=!0}if(t)b.push(l.i/c),b.push(a.i/c),b.push(p.i/c),Sc(a),h=a=p.next;else if(a=p,a===h){if(!g)Uc(Tc(a),b,c,d,e,f,1);else if(1===g){g=b;h=c;l=a;do{p=l.prev,t=l.next.next,!vb(p,t)&&cf(p,l,l.next,t)&&Vc(p,t)&&Vc(t,p)&&(g.push(p.i/h),g.push(l.i/h),g.push(t.i/h),Sc(l),Sc(l.next),l=a=t),l=l.next}while(l!==a);a=l;Uc(a,b,c,d,e,f,2)}else if(2===g)a:{g=a;do{for(h=g.next.next;h!==g.prev;){if(l=g.i!==h.i){l=g;p=h;if(t=l.next.i!==p.i&&l.prev.i!==p.i){b:{t=l;do{if(t.i!==l.i&&t.next.i!==l.i&&t.i!==p.i&&t.next.i!==p.i&&cf(t,t.next,l,p)){t=!0;break b}t=t.next}while(t!==l);t=!1}t=!t}if(t=t&&Vc(l,p)&&Vc(p,l)){t=l;v=!1;n=(l.x+p.x)/2;p=(l.y+p.y)/2;do{t.y>p!==t.next.y>p&&t.next.y!==t.y&&n<(t.next.x-t.x)*(p-t.y)/(t.next.y-t.y)+t.x&&(v=!v),t=t.next}while(t!==l);t=v}l=t}if(l){a=df(g,h);g=Tc(g,g.next);a=Tc(a,a.next);Uc(g,b,c,d,e,f);Uc(a,b,c,d,e,f);break a}h=h.next}g=g.next}while(g!==a)}break}}}}function Ng(a,b){return a.x-b.x}function Og(a,b){var c=b,d=a.x,e=a.y,f=-Infinity;do{if(e<=c.y&&e>=c.next.y&&c.next.y!==c.y){var g=c.x+(e-c.y)*(c.next.x-c.x)/(c.next.y-c.y);if(g<=d&&g>f){f=g;if(g===d){if(e===c.y)return c;if(e===c.next.y)return c.next}var h=c.x<c.next.x?c:c.next}}c=c.next}while(c!==b);if(!h)return null;if(d===f)return h.prev;b=h;g=h.x;var l=h.y,m=1/0;for(c=h.next;c!==b;){if(d>=c.x&&c.x>=g&&d!==c.x&&xd(e<l?d:f,e,g,l,e<l?f:d,e,c.x,c.y)){var v=_Mathabs(e-c.y)/(d-c.x);(v<m||v===m&&c.x>h.x)&&Vc(c,a)&&(h=c,m=v)}c=c.next}return h}function ae(a,b,c,d,e){a=32767*(a-c)*e;b=32767*(b-d)*e;a=16711935&(a|a<<8);a=252645135&(a|a<<4);a=858993459&(a|a<<2);b=16711935&(b|b<<8);b=252645135&(b|b<<4);b=858993459&(b|b<<2);return 1431655765&(a|a<<1)|(1431655765&(b|b<<1))<<1}function Pg(a){var b=a,c=a;do{b.x<c.x&&(c=b),b=b.next}while(b!==a);return c}function xd(a,b,c,d,e,f,g,h){return 0<=(e-g)*(b-h)-(a-g)*(f-h)&&0<=(a-g)*(d-h)-(c-g)*(b-h)&&0<=(c-g)*(f-h)-(e-g)*(d-h)}function na(a,b,c){return(b.y-a.y)*(c.x-b.x)-(b.x-a.x)*(c.y-b.y)}function vb(a,b){return a.x===b.x&&a.y===b.y}function cf(a,b,c,d){return vb(a,b)&&vb(c,d)||vb(a,d)&&vb(c,b)?!0:0<na(a,b,c)!==0<na(a,b,d)&&0<na(c,d,a)!==0<na(c,d,b)}function Vc(a,b){return 0>na(a.prev,a,a.next)?0<=na(a,b,a.next)&&0<=na(a,a.prev,b):0>na(a,b,a.prev)||0>na(a,a.next,b)}function df(a,b){var c=new be(a.i,a.x,a.y),d=new be(b.i,b.x,b.y),e=a.next,f=b.prev;a.next=b;b.prev=a;c.next=e;e.prev=c;d.next=c;c.prev=d;f.next=d;d.prev=f;return d}function bf(a,b,c,d){a=new be(a,b,c);d?(a.next=d.next,a.prev=d,d.next.prev=a,d.next=a):(a.prev=a,a.next=a);return a}function Sc(a){a.next.prev=a.prev;a.prev.next=a.next;a.prevZ&&(a.prevZ.nextZ=a.nextZ);a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function be(a,b,c){this.i=a;this.x=b;this.y=c;this.nextZ=this.prevZ=this.z=this.next=this.prev=null;this.steiner=!1}function ef(a){var b=a.length;2<b&&a[b-1].equals(a[0])&&a.pop()}function ff(a,b){for(var c=0;c<b.length;c++){a.push(b[c].x),a.push(b[c].y)}}function wb(a,b){J.call(this);this.type="ExtrudeGeometry";this.parameters={shapes:a,options:b};this.fromBufferGeometry(new Sa(a,b));this.mergeVertices()}function Sa(a,b){function c(a){function c(a,b,c){b||console.error("THREE.ExtrudeGeometry: vec does not exist");return b.clone().multiplyScalar(c).add(a)}function g(a,b,c){var d=a.x-b.x,e=a.y-b.y,f=c.x-a.x,g=c.y-a.y,h=d*d+e*e;if(_Mathabs(d*g-e*f)>_NumberEPSILON){var l=_Mathsqrt(h),m=_Mathsqrt(f*f+g*g);h=b.x-e/l;b=b.y+d/l;g=((c.x-g/m-h)*g-(c.y+f/m-b)*f)/(d*g-e*f);f=h+d*g-a.x;d=b+e*g-a.y;e=f*f+d*d;if(2>=e)return new y(f,d);e=_Mathsqrt(e/2)}else a=!1,d>_NumberEPSILON?f>_NumberEPSILON&&(a=!0):d<-_NumberEPSILON?f<-_NumberEPSILON&&(a=!0):_Mathsign(e)===_Mathsign(g)&&(a=!0),a?(f=-e,e=_Mathsqrt(h)):(f=d,d=e,e=_Mathsqrt(h/2));return new y(f/e,d/e)}function h(a,b){for(N=a.length;0<=--N;){var c=N,f=N-1;0>f&&(f=a.length-1);var g,h=w+2*E;for(g=0;g<h;g++){var l=X*g,m=X*(g+1),n=b+f+l,k=b+f+m;m=b+c+m;t(b+c+l);t(n);t(m);t(n);t(k);t(m);l=e.length/3;l=B.generateSideWallUV(d,e,l-6,l-3,l-2,l-1);u(l[0]);u(l[1]);u(l[3]);u(l[1]);u(l[2]);u(l[3])}}}function l(a,b,c){z.push(a);z.push(b);z.push(c)}function k(a,b,c){t(a);t(b);t(c);a=e.length/3;a=B.generateTopUV(d,e,a-3,a-2,a-1);u(a[0]);u(a[1]);u(a[2])}function t(a){e.push(z[3*a]);e.push(z[3*a+1]);e.push(z[3*a+2])}function u(a){f.push(a.x);f.push(a.y)}var z=[],x=void 0!==b.curveSegments?b.curveSegments:12,w=void 0!==b.steps?b.steps:1,H=void 0!==b.depth?b.depth:100,C=void 0!==b.bevelEnabled?b.bevelEnabled:!0,V=void 0!==b.bevelThickness?b.bevelThickness:6,Q=void 0!==b.bevelSize?b.bevelSize:V-2,E=void 0!==b.bevelSegments?b.bevelSegments:3,A=b.extrudePath,B=void 0!==b.UVGenerator?b.UVGenerator:Qg;void 0!==b.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),H=b.amount);var F=!1;if(A){var G=A.getSpacedPoints(w);F=!0;C=!1;var I=A.computeFrenetFrames(w,!1),K=new p,M=new p,J=new p}C||(Q=V=E=0);var O;x=a.extractPoints(x);a=x.shape;var L=x.holes;if(!Za.isClockWise(a)){a=a.reverse();var S=0;for(O=L.length;S<O;S++){var P=L[S];Za.isClockWise(P)&&(L[S]=P.reverse())}}var W=Za.triangulateShape(a,L),T=a;S=0;for(O=L.length;S<O;S++){P=L[S],a=a.concat(P)}var R,X=a.length,Y,aa=W.length;x=[];var N=0,da=T.length,U=da-1;for(R=N+1;N<da;N++,U++,R++){U===da&&(U=0),R===da&&(R=0),x[N]=g(T[N],T[U],T[R])}A=[];var ca=x.concat();S=0;for(O=L.length;S<O;S++){P=L[S];var ba=[];N=0;da=P.length;U=da-1;for(R=N+1;N<da;N++,U++,R++){U===da&&(U=0),R===da&&(R=0),ba[N]=g(P[N],P[U],P[R])}A.push(ba);ca=ca.concat(ba)}for(U=0;U<E;U++){da=U/E;var ea=V*_Mathcos(da*_MathPI/2);R=Q*_Mathsin(da*_MathPI/2);N=0;for(da=T.length;N<da;N++){var fa=c(T[N],x[N],R);l(fa.x,fa.y,-ea)}S=0;for(O=L.length;S<O;S++){for(P=L[S],ba=A[S],N=0,da=P.length;N<da;N++){fa=c(P[N],ba[N],R),l(fa.x,fa.y,-ea)}}}R=Q;for(N=0;N<X;N++){fa=C?c(a[N],ca[N],R):a[N],F?(M.copy(I.normals[0]).multiplyScalar(fa.x),K.copy(I.binormals[0]).multiplyScalar(fa.y),J.copy(G[0]).add(M).add(K),l(J.x,J.y,J.z)):l(fa.x,fa.y,0)}for(da=1;da<=w;da++){for(N=0;N<X;N++){fa=C?c(a[N],ca[N],R):a[N],F?(M.copy(I.normals[da]).multiplyScalar(fa.x),K.copy(I.binormals[da]).multiplyScalar(fa.y),J.copy(G[da]).add(M).add(K),l(J.x,J.y,J.z)):l(fa.x,fa.y,H/w*da)}}for(U=E-1;0<=U;U--){da=U/E;ea=V*_Mathcos(da*_MathPI/2);R=Q*_Mathsin(da*_MathPI/2);N=0;for(da=T.length;N<da;N++){fa=c(T[N],x[N],R),l(fa.x,fa.y,H+ea)}S=0;for(O=L.length;S<O;S++){for(P=L[S],ba=A[S],N=0,da=P.length;N<da;N++){fa=c(P[N],ba[N],R),F?l(fa.x,fa.y+G[w-1].y,G[w-1].x+ea):l(fa.x,fa.y,H+ea)}}}(function(){var a=e.length/3;if(C){var b=0*X;for(N=0;N<aa;N++){Y=W[N],k(Y[2]+b,Y[1]+b,Y[0]+b)}b=X*(w+2*E);for(N=0;N<aa;N++){Y=W[N],k(Y[0]+b,Y[1]+b,Y[2]+b)}}else{for(N=0;N<aa;N++){Y=W[N],k(Y[2],Y[1],Y[0])}for(N=0;N<aa;N++){Y=W[N],k(Y[0]+X*w,Y[1]+X*w,Y[2]+X*w)}}d.addGroup(a,e.length/3-a,0)})();(function(){var a=e.length/3,b=0;h(T,b);b+=T.length;S=0;for(O=L.length;S<O;S++){P=L[S],h(P,b),b+=P.length}d.addGroup(a,e.length/3-a,1)})()}G.call(this);this.type="ExtrudeBufferGeometry";this.parameters={shapes:a,options:b};a=Array.isArray(a)?a:[a];for(var d=this,e=[],f=[],g=0,h=a.length;g<h;g++){c(a[g])}this.addAttribute("position",new A(e,3));this.addAttribute("uv",new A(f,2));this.computeVertexNormals()}function gf(a,b,c){c.shapes=[];if(Array.isArray(a))for(var d=0,e=a.length;d<e;d++){c.shapes.push(a[d].uuid)}else c.shapes.push(a.uuid);void 0!==b.extrudePath&&(c.options.extrudePath=b.extrudePath.toJSON());return c}function Wc(a,b){J.call(this);this.type="TextGeometry";this.parameters={text:a,parameters:b};this.fromBufferGeometry(new dc(a,b));this.mergeVertices()}function dc(a,b){b=b||{};var c=b.font;if(!c||!c.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new J;a=c.generateShapes(a,b.size,b.curveSegments);b.depth=void 0!==b.height?b.height:50;void 0===b.bevelThickness&&(b.bevelThickness=10);void 0===b.bevelSize&&(b.bevelSize=8);void 0===b.bevelEnabled&&(b.bevelEnabled=!1);Sa.call(this,a,b);this.type="TextBufferGeometry"}function Xc(a,b,c,d,e,f,g){J.call(this);this.type="SphereGeometry";this.parameters={radius:a,widthSegments:b,heightSegments:c,phiStart:d,phiLength:e,thetaStart:f,thetaLength:g};this.fromBufferGeometry(new xb(a,b,c,d,e,f,g));this.mergeVertices()}function xb(a,b,c,d,e,f,g){G.call(this);this.type="SphereBufferGeometry";this.parameters={radius:a,widthSegments:b,heightSegments:c,phiStart:d,phiLength:e,thetaStart:f,thetaLength:g};a=a||1;b=_Mathmax(3,_Mathfloor(b)||8);c=_Mathmax(2,_Mathfloor(c)||6);d=void 0!==d?d:0;e=void 0!==e?e:2*_MathPI;f=void 0!==f?f:0;g=void 0!==g?g:_MathPI;var h=f+g,l,m,k=0,n=[],r=new p,q=new p,t=[],u=[],z=[],x=[];for(m=0;m<=c;m++){var w=[],H=m/c;for(l=0;l<=b;l++){var C=l/b;r.x=-a*_Mathcos(d+C*e)*_Mathsin(f+H*g);r.y=a*_Mathcos(f+H*g);r.z=a*_Mathsin(d+C*e)*_Mathsin(f+H*g);u.push(r.x,r.y,r.z);q.set(r.x,r.y,r.z).normalize();z.push(q.x,q.y,q.z);x.push(C,1-H);w.push(k++)}n.push(w)}for(m=0;m<c;m++){for(l=0;l<b;l++){a=n[m][l+1],d=n[m][l],e=n[m+1][l],g=n[m+1][l+1],(0!==m||0<f)&&t.push(a,d,g),(m!==c-1||h<_MathPI)&&t.push(d,e,g)}}this.setIndex(t);this.addAttribute("position",new A(u,3));this.addAttribute("normal",new A(z,3));this.addAttribute("uv",new A(x,2))}function Yc(a,b,c,d,e,f){J.call(this);this.type="RingGeometry";this.parameters={innerRadius:a,outerRadius:b,thetaSegments:c,phiSegments:d,thetaStart:e,thetaLength:f};this.fromBufferGeometry(new ec(a,b,c,d,e,f));this.mergeVertices()}function ec(a,b,c,d,e,f){G.call(this);this.type="RingBufferGeometry";this.parameters={innerRadius:a,outerRadius:b,thetaSegments:c,phiSegments:d,thetaStart:e,thetaLength:f};a=a||.5;b=b||1;e=void 0!==e?e:0;f=void 0!==f?f:2*_MathPI;c=void 0!==c?_Mathmax(3,c):8;d=void 0!==d?_Mathmax(1,d):1;var g=[],h=[],l=[],m=[],k=a,n=(b-a)/d,r=new p,q=new y,t,u;for(t=0;t<=d;t++){for(u=0;u<=c;u++){a=e+u/c*f,r.x=k*_Mathcos(a),r.y=k*_Mathsin(a),h.push(r.x,r.y,r.z),l.push(0,0,1),q.x=(r.x/b+1)/2,q.y=(r.y/b+1)/2,m.push(q.x,q.y)}k+=n}for(t=0;t<d;t++){for(b=t*(c+1),u=0;u<c;u++){a=u+b,e=a+c+1,f=a+c+2,k=a+1,g.push(a,e,k),g.push(e,f,k)}}this.setIndex(g);this.addAttribute("position",new A(h,3));this.addAttribute("normal",new A(l,3));this.addAttribute("uv",new A(m,2))}function Zc(a,b,c,d){J.call(this);this.type="LatheGeometry";this.parameters={points:a,segments:b,phiStart:c,phiLength:d};this.fromBufferGeometry(new fc(a,b,c,d));this.mergeVertices()}function fc(a,b,c,d){G.call(this);this.type="LatheBufferGeometry";this.parameters={points:a,segments:b,phiStart:c,phiLength:d};b=_Mathfloor(b)||12;c=c||0;d=d||2*_MathPI;d=P.clamp(d,0,2*_MathPI);var e=[],f=[],g=[],h=1/b,l=new p,m=new y,k;for(k=0;k<=b;k++){var n=c+k*h*d,r=_Mathsin(n),q=_Mathcos(n);for(n=0;n<=a.length-1;n++){l.x=a[n].x*r,l.y=a[n].y,l.z=a[n].x*q,f.push(l.x,l.y,l.z),m.x=k/b,m.y=n/(a.length-1),g.push(m.x,m.y)}}for(k=0;k<b;k++){for(n=0;n<a.length-1;n++){c=n+k*a.length,h=c+a.length,l=c+a.length+1,m=c+1,e.push(c,h,m),e.push(h,l,m)}}this.setIndex(e);this.addAttribute("position",new A(f,3));this.addAttribute("uv",new A(g,2));this.computeVertexNormals();if(d===2*_MathPI)for(d=this.attributes.normal.array,e=new p,f=new p,g=new p,c=3*(b*a.length),n=k=0;k<a.length;k++,n+=3){e.x=d[n+0],e.y=d[n+1],e.z=d[n+2],f.x=d[c+n+0],f.y=d[c+n+1],f.z=d[c+n+2],g.addVectors(e,f).normalize(),d[n+0]=d[c+n+0]=g.x,d[n+1]=d[c+n+1]=g.y,d[n+2]=d[c+n+2]=g.z}}function yb(a,b){J.call(this);this.type="ShapeGeometry";"object"===babelHelpers.typeof(b)&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),b=b.curveSegments);this.parameters={shapes:a,curveSegments:b};this.fromBufferGeometry(new zb(a,b));this.mergeVertices()}function zb(a,b){function c(a){var c,h=e.length/3;a=a.extractPoints(b);var m=a.shape,k=a.holes;if(!1===Za.isClockWise(m))for(m=m.reverse(),a=0,c=k.length;a<c;a++){var v=k[a];!0===Za.isClockWise(v)&&(k[a]=v.reverse())}var p=Za.triangulateShape(m,k);a=0;for(c=k.length;a<c;a++){v=k[a],m=m.concat(v)}a=0;for(c=m.length;a<c;a++){v=m[a],e.push(v.x,v.y,0),f.push(0,0,1),g.push(v.x,v.y)}a=0;for(c=p.length;a<c;a++){m=p[a],d.push(m[0]+h,m[1]+h,m[2]+h),l+=3}}G.call(this);this.type="ShapeBufferGeometry";this.parameters={shapes:a,curveSegments:b};b=b||12;var d=[],e=[],f=[],g=[],h=0,l=0;if(!1===Array.isArray(a))c(a);else for(var m=0;m<a.length;m++){c(a[m]),this.addGroup(h,l,m),h+=l,l=0}this.setIndex(d);this.addAttribute("position",new A(e,3));this.addAttribute("normal",new A(f,3));this.addAttribute("uv",new A(g,2))}function hf(a,b){b.shapes=[];if(Array.isArray(a))for(var c=0,d=a.length;c<d;c++){b.shapes.push(a[c].uuid)}else b.shapes.push(a.uuid);return b}function gc(a,b){G.call(this);this.type="EdgesGeometry";this.parameters={thresholdAngle:b};var c=[];b=_Mathcos(P.DEG2RAD*(void 0!==b?b:1));var d=[0,0],e={},f=["a","b","c"];if(a.isBufferGeometry){var g=new J;g.fromBufferGeometry(a)}else g=a.clone();g.mergeVertices();g.computeFaceNormals();a=g.vertices;g=g.faces;for(var h=0,l=g.length;h<l;h++){for(var m=g[h],k=0;3>k;k++){var n=m[f[k]],r=m[f[(k+1)%3]];d[0]=_Mathmin(n,r);d[1]=_Mathmax(n,r);n=d[0]+","+d[1];void 0===e[n]?e[n]={index1:d[0],index2:d[1],face1:h,face2:void 0}:e[n].face2=h}}for(n in e){if(d=e[n],void 0===d.face2||g[d.face1].normal.dot(g[d.face2].normal)<=b)f=a[d.index1],c.push(f.x,f.y,f.z),f=a[d.index2],c.push(f.x,f.y,f.z)}this.addAttribute("position",new A(c,3))}function Ab(a,b,c,d,e,f,g,h){J.call(this);this.type="CylinderGeometry";this.parameters={radiusTop:a,radiusBottom:b,height:c,radialSegments:d,heightSegments:e,openEnded:f,thetaStart:g,thetaLength:h};this.fromBufferGeometry(new $a(a,b,c,d,e,f,g,h));this.mergeVertices()}function $a(a,b,c,d,e,f,g,h){function l(c){var e,f=new y,l=new p,v=0,u=!0===c?a:b,w=!0===c?1:-1,A=t;for(e=1;e<=d;e++){n.push(0,z*w,0),r.push(0,w,0),q.push(.5,.5),t++}var B=t;for(e=0;e<=d;e++){var F=e/d*h+g,G=_Mathcos(F);F=_Mathsin(F);l.x=u*F;l.y=z*w;l.z=u*G;n.push(l.x,l.y,l.z);r.push(0,w,0);f.x=.5*G+.5;f.y=.5*F*w+.5;q.push(f.x,f.y);t++}for(e=0;e<d;e++){f=A+e,l=B+e,!0===c?k.push(l,l+1,f):k.push(l+1,l,f),v+=3}m.addGroup(x,v,!0===c?1:2);x+=v}G.call(this);this.type="CylinderBufferGeometry";this.parameters={radiusTop:a,radiusBottom:b,height:c,radialSegments:d,heightSegments:e,openEnded:f,thetaStart:g,thetaLength:h};var m=this;a=void 0!==a?a:1;b=void 0!==b?b:1;c=c||1;d=_Mathfloor(d)||8;e=_Mathfloor(e)||1;f=void 0!==f?f:!1;g=void 0!==g?g:0;h=void 0!==h?h:2*_MathPI;var k=[],n=[],r=[],q=[],t=0,u=[],z=c/2,x=0;(function(){var f,l,v=new p,y=new p,A=0,E=(b-a)/c;for(l=0;l<=e;l++){var F=[],B=l/e,G=B*(b-a)+a;for(f=0;f<=d;f++){var I=f/d,K=I*h+g,J=_Mathsin(K);K=_Mathcos(K);y.x=G*J;y.y=-B*c+z;y.z=G*K;n.push(y.x,y.y,y.z);v.set(J,E,K).normalize();r.push(v.x,v.y,v.z);q.push(I,1-B);F.push(t++)}u.push(F)}for(f=0;f<d;f++){for(l=0;l<e;l++){v=u[l+1][f],y=u[l+1][f+1],E=u[l][f+1],k.push(u[l][f],v,E),k.push(v,y,E),A+=6}}m.addGroup(x,A,0);x+=A})();!1===f&&(0<a&&l(!0),0<b&&l(!1));this.setIndex(k);this.addAttribute("position",new A(n,3));this.addAttribute("normal",new A(r,3));this.addAttribute("uv",new A(q,2))}function $c(a,b,c,d,e,f,g){Ab.call(this,0,a,b,c,d,e,f,g);this.type="ConeGeometry";this.parameters={radius:a,height:b,radialSegments:c,heightSegments:d,openEnded:e,thetaStart:f,thetaLength:g}}function ad(a,b,c,d,e,f,g){$a.call(this,0,a,b,c,d,e,f,g);this.type="ConeBufferGeometry";this.parameters={radius:a,height:b,radialSegments:c,heightSegments:d,openEnded:e,thetaStart:f,thetaLength:g}}function bd(a,b,c,d){J.call(this);this.type="CircleGeometry";this.parameters={radius:a,segments:b,thetaStart:c,thetaLength:d};this.fromBufferGeometry(new hc(a,b,c,d));this.mergeVertices()}function hc(a,b,c,d){G.call(this);this.type="CircleBufferGeometry";this.parameters={radius:a,segments:b,thetaStart:c,thetaLength:d};a=a||1;b=void 0!==b?_Mathmax(3,b):8;c=void 0!==c?c:0;d=void 0!==d?d:2*_MathPI;var e=[],f=[],g=[],h=[],l,m=new p,k=new y;f.push(0,0,0);g.push(0,0,1);h.push(.5,.5);var n=0;for(l=3;n<=b;n++,l+=3){var r=c+n/b*d;m.x=a*_Mathcos(r);m.y=a*_Mathsin(r);f.push(m.x,m.y,m.z);g.push(0,0,1);k.x=(f[l]/a+1)/2;k.y=(f[l+1]/a+1)/2;h.push(k.x,k.y)}for(l=1;l<=b;l++){e.push(l,l+1,0)}this.setIndex(e);this.addAttribute("position",new A(f,3));this.addAttribute("normal",new A(g,3));this.addAttribute("uv",new A(h,2))}function Bb(a){L.call(this);this.type="ShadowMaterial";this.color=new K(0);this.transparent=!0;this.setValues(a)}function ic(a){Ea.call(this,a);this.type="RawShaderMaterial"}function Ta(a){L.call(this);this.defines={STANDARD:""};this.type="MeshStandardMaterial";this.color=new K(16777215);this.metalness=this.roughness=.5;this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new K(0);this.emissiveIntensity=1;this.bumpMap=this.emissiveMap=null;this.bumpScale=1;this.normalMap=null;this.normalScale=new y(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.envMap=this.alphaMap=this.metalnessMap=this.roughnessMap=null;this.envMapIntensity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(a)}function Cb(a){Ta.call(this);this.defines={PHYSICAL:""};this.type="MeshPhysicalMaterial";this.reflectivity=.5;this.clearCoatRoughness=this.clearCoat=0;this.setValues(a)}function Ja(a){L.call(this);this.type="MeshPhongMaterial";this.color=new K(16777215);this.specular=new K(1118481);this.shininess=30;this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new K(0);this.emissiveIntensity=1;this.bumpMap=this.emissiveMap=null;this.bumpScale=1;this.normalMap=null;this.normalScale=new y(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.envMap=this.alphaMap=this.specularMap=null;this.combine=0;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(a)}function Db(a){Ja.call(this);this.defines={TOON:""};this.type="MeshToonMaterial";this.gradientMap=null;this.setValues(a)}function Eb(a){L.call(this);this.type="MeshNormalMaterial";this.bumpMap=null;this.bumpScale=1;this.normalMap=null;this.normalScale=new y(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.wireframe=!1;this.wireframeLinewidth=1;this.morphNormals=this.morphTargets=this.skinning=this.lights=this.fog=!1;this.setValues(a)}function Fb(a){L.call(this);this.type="MeshLambertMaterial";this.color=new K(16777215);this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new K(0);this.emissiveIntensity=1;this.envMap=this.alphaMap=this.specularMap=this.emissiveMap=null;this.combine=0;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(a)}function Gb(a){T.call(this);this.type="LineDashedMaterial";this.scale=1;this.dashSize=3;this.gapSize=1;this.setValues(a)}function ce(a,b,c){var d=this,e=!1,f=0,g=0,h;this.onStart=void 0;this.onLoad=a;this.onProgress=b;this.onError=c;this.itemStart=function(a){g++;if(!1===e&&void 0!==d.onStart)d.onStart(a,f,g);e=!0};this.itemEnd=function(a){f++;if(void 0!==d.onProgress)d.onProgress(a,f,g);if(f===g&&(e=!1,void 0!==d.onLoad))d.onLoad()};this.itemError=function(a){if(void 0!==d.onError)d.onError(a)};this.resolveURL=function(a){return h?h(a):a};this.setURLModifier=function(a){h=a;return this}}function Ka(a){this.manager=void 0!==a?a:wa}function jf(a){this.manager=void 0!==a?a:wa;this._parser=null}function de(a){this.manager=void 0!==a?a:wa;this._parser=null}function cd(a){this.manager=void 0!==a?a:wa}function ee(a){this.manager=void 0!==a?a:wa}function yd(a){this.manager=void 0!==a?a:wa}function I(){this.type="Curve";this.arcLengthDivisions=200}function xa(a,b,c,d,e,f,g,h){I.call(this);this.type="EllipseCurve";this.aX=a||0;this.aY=b||0;this.xRadius=c||1;this.yRadius=d||1;this.aStartAngle=e||0;this.aEndAngle=f||2*_MathPI;this.aClockwise=g||!1;this.aRotation=h||0}function jc(a,b,c,d,e,f){xa.call(this,a,b,c,c,d,e,f);this.type="ArcCurve"}function fe(){var a=0,b=0,c=0,d=0;return{initCatmullRom:function initCatmullRom(e,f,g,h,l){e=l*(g-e);h=l*(h-f);a=f;b=e;c=-3*f+3*g-2*e-h;d=2*f-2*g+e+h},initNonuniformCatmullRom:function initNonuniformCatmullRom(e,f,g,h,l,m,k){e=((f-e)/l-(g-e)/(l+m)+(g-f)/m)*m;h=((g-f)/m-(h-f)/(m+k)+(h-g)/k)*m;a=f;b=e;c=-3*f+3*g-2*e-h;d=2*f-2*g+e+h},calc:function calc(e){var f=e*e;return a+b*e+c*f+d*f*e}}}function ra(a,b,c,d){I.call(this);this.type="CatmullRomCurve3";this.points=a||[];this.closed=b||!1;this.curveType=c||"centripetal";this.tension=d||.5}function kf(a,b,c,d,e){b=.5*(d-b);e=.5*(e-c);var f=a*a;return(2*c-2*d+b+e)*a*f+(-3*c+3*d-2*b-e)*f+b*a+c}function dd(a,b,c,d){var e=1-a;return e*e*b+2*(1-a)*a*c+a*a*d}function ed(a,b,c,d,e){var f=1-a,g=1-a;return f*f*f*b+3*g*g*a*c+3*(1-a)*a*a*d+a*a*a*e}function La(a,b,c,d){I.call(this);this.type="CubicBezierCurve";this.v0=a||new y;this.v1=b||new y;this.v2=c||new y;this.v3=d||new y}function Ua(a,b,c,d){I.call(this);this.type="CubicBezierCurve3";this.v0=a||new p;this.v1=b||new p;this.v2=c||new p;this.v3=d||new p}function ya(a,b){I.call(this);this.type="LineCurve";this.v1=a||new y;this.v2=b||new y}function Ma(a,b){I.call(this);this.type="LineCurve3";this.v1=a||new p;this.v2=b||new p}function Na(a,b,c){I.call(this);this.type="QuadraticBezierCurve";this.v0=a||new y;this.v1=b||new y;this.v2=c||new y}function Va(a,b,c){I.call(this);this.type="QuadraticBezierCurve3";this.v0=a||new p;this.v1=b||new p;this.v2=c||new p}function Oa(a){I.call(this);this.type="SplineCurve";this.points=a||[]}function ab(){I.call(this);this.type="CurvePath";this.curves=[];this.autoClose=!1}function Pa(a){ab.call(this);this.type="Path";this.currentPoint=new y;a&&this.setFromPoints(a)}function jb(a){Pa.call(this,a);this.uuid=P.generateUUID();this.type="Shape";this.holes=[]}function ba(a,b){B.call(this);this.type="Light";this.color=new K(a);this.intensity=void 0!==b?b:1;this.receiveShadow=void 0}function zd(a,b,c){ba.call(this,a,c);this.type="HemisphereLight";this.castShadow=void 0;this.position.copy(B.DefaultUp);this.updateMatrix();this.groundColor=new K(b)}function Hb(a){this.camera=a;this.bias=0;this.radius=1;this.mapSize=new y(512,512);this.map=null;this.matrix=new F}function Ad(){Hb.call(this,new ea(50,1,.5,500))}function Bd(a,b,c,d,e,f){ba.call(this,a,b);this.type="SpotLight";this.position.copy(B.DefaultUp);this.updateMatrix();this.target=new B;Object.defineProperty(this,"power",{get:function get(){return this.intensity*_MathPI},set:function set(a){this.intensity=a/_MathPI}});this.distance=void 0!==c?c:0;this.angle=void 0!==d?d:_MathPI/3;this.penumbra=void 0!==e?e:0;this.decay=void 0!==f?f:1;this.shadow=new Ad}function Cd(a,b,c,d){ba.call(this,a,b);this.type="PointLight";Object.defineProperty(this,"power",{get:function get(){return 4*this.intensity*_MathPI},set:function set(a){this.intensity=a/(4*_MathPI)}});this.distance=void 0!==c?c:0;this.decay=void 0!==d?d:1;this.shadow=new Hb(new ea(90,1,.5,500))}function Dd(){Hb.call(this,new Mb(-5,5,5,-5,.5,500))}function Ed(a,b){ba.call(this,a,b);this.type="DirectionalLight";this.position.copy(B.DefaultUp);this.updateMatrix();this.target=new B;this.shadow=new Dd}function Fd(a,b){ba.call(this,a,b);this.type="AmbientLight";this.castShadow=void 0}function Gd(a,b,c,d){ba.call(this,a,b);this.type="RectAreaLight";this.width=void 0!==c?c:10;this.height=void 0!==d?d:10}function Hd(a,b,c,d){ja.call(this,a,b,c,d)}function Id(a,b,c){ja.call(this,a,b,c)}function ua(a,b,c,d){this.parameterPositions=a;this._cachedIndex=0;this.resultBuffer=void 0!==d?d:new b.constructor(c);this.sampleValues=b;this.valueSize=c}function Jd(a,b,c,d){ua.call(this,a,b,c,d)}function fd(a,b,c,d){ja.call(this,a,b,c,d)}function Kd(a,b,c,d){ja.call(this,a,b,c,d)}function kc(a,b,c,d){ja.call(this,a,b,c,d)}function Ld(a,b,c,d){ua.call(this,a,b,c,d);this._offsetNext=this._weightNext=this._offsetPrev=this._weightPrev=-0}function gd(a,b,c,d){ua.call(this,a,b,c,d)}function Md(a,b,c,d){ua.call(this,a,b,c,d)}function ja(a,b,c,d){if(void 0===a)throw Error("THREE.KeyframeTrack: track name is undefined");if(void 0===b||0===b.length)throw Error("THREE.KeyframeTrack: no keyframes in track named "+a);this.name=a;this.times=sa.convertArray(b,this.TimeBufferType);this.values=sa.convertArray(c,this.ValueBufferType);this.setInterpolation(d||this.DefaultInterpolation);this.validate();this.optimize()}function lc(a,b,c,d){ja.call(this,a,b,c,d)}function Fa(a,b,c){this.name=a;this.tracks=c;this.duration=void 0!==b?b:-1;this.uuid=P.generateUUID();0>this.duration&&this.resetDuration();this.optimize()}function Nd(a){this.manager=void 0!==a?a:wa;this.textures={}}function ge(a){this.manager=void 0!==a?a:wa}function mc(){}function he(a){"boolean"===typeof a&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),a=void 0);this.manager=void 0!==a?a:wa;this.withCredentials=!1}function lf(a){this.manager=void 0!==a?a:wa;this.texturePath=""}function ie(a){"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported.");"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported.");this.manager=void 0!==a?a:wa;this.options=void 0}function je(){this.type="ShapePath";this.color=new K;this.subPaths=[];this.currentPath=null}function ke(a){this.type="Font";this.data=a}function mf(a){this.manager=void 0!==a?a:wa}function le(a){this.manager=void 0!==a?a:wa}function nf(){this.type="StereoCamera";this.aspect=1;this.eyeSep=.064;this.cameraL=new ea;this.cameraL.layers.enable(1);this.cameraL.matrixAutoUpdate=!1;this.cameraR=new ea;this.cameraR.layers.enable(2);this.cameraR.matrixAutoUpdate=!1}function hd(a,b,c){B.call(this);this.type="CubeCamera";var d=new ea(90,1,a,b);d.up.set(0,-1,0);d.lookAt(new p(1,0,0));this.add(d);var e=new ea(90,1,a,b);e.up.set(0,-1,0);e.lookAt(new p(-1,0,0));this.add(e);var f=new ea(90,1,a,b);f.up.set(0,0,1);f.lookAt(new p(0,1,0));this.add(f);var g=new ea(90,1,a,b);g.up.set(0,0,-1);g.lookAt(new p(0,-1,0));this.add(g);var h=new ea(90,1,a,b);h.up.set(0,-1,0);h.lookAt(new p(0,0,1));this.add(h);var l=new ea(90,1,a,b);l.up.set(0,-1,0);l.lookAt(new p(0,0,-1));this.add(l);this.renderTarget=new Lb(c,c,{format:1022,magFilter:1006,minFilter:1006});this.renderTarget.texture.name="CubeCamera";this.update=function(a,b){null===this.parent&&this.updateMatrixWorld();var c=this.renderTarget,m=c.texture.generateMipmaps;c.texture.generateMipmaps=!1;c.activeCubeFace=0;a.render(b,d,c);c.activeCubeFace=1;a.render(b,e,c);c.activeCubeFace=2;a.render(b,f,c);c.activeCubeFace=3;a.render(b,g,c);c.activeCubeFace=4;a.render(b,h,c);c.texture.generateMipmaps=m;c.activeCubeFace=5;a.render(b,l,c);a.setRenderTarget(null)};this.clear=function(a,b,c,d){for(var e=this.renderTarget,f=0;6>f;f++){e.activeCubeFace=f,a.setRenderTarget(e),a.clear(b,c,d)}a.setRenderTarget(null)}}function me(){B.call(this);this.type="AudioListener";this.context=ne.getContext();this.gain=this.context.createGain();this.gain.connect(this.context.destination);this.filter=null}function nc(a){B.call(this);this.type="Audio";this.context=a.context;this.gain=this.context.createGain();this.gain.connect(a.getInput());this.autoplay=!1;this.buffer=null;this.loop=!1;this.offset=this.startTime=0;this.playbackRate=1;this.isPlaying=!1;this.hasPlaybackControl=!0;this.sourceType="empty";this.filters=[]}function oe(a){nc.call(this,a);this.panner=this.context.createPanner();this.panner.connect(this.gain)}function pe(a,b){this.analyser=a.context.createAnalyser();this.analyser.fftSize=void 0!==b?b:2048;this.data=new Uint8Array(this.analyser.frequencyBinCount);a.getOutput().connect(this.analyser)}function qe(a,b,c){this.binding=a;this.valueSize=c;a=Float64Array;switch(b){case"quaternion":b=this._slerp;break;case"string":case"bool":a=Array;b=this._select;break;default:b=this._lerp;}this.buffer=new a(4*c);this._mixBufferRegion=b;this.referenceCount=this.useCount=this.cumulativeWeight=0}function of(a,b,c){c=c||oa.parseTrackName(b);this._targetGroup=a;this._bindings=a.subscribe_(b,c)}function oa(a,b,c){this.path=b;this.parsedPath=c||oa.parseTrackName(b);this.node=oa.findNode(a,this.parsedPath.nodeName)||a;this.rootNode=a}function pf(){this.uuid=P.generateUUID();this._objects=Array.prototype.slice.call(arguments);this.nCachedObjects_=0;var a={};this._indicesByUUID=a;for(var b=0,c=arguments.length;b!==c;++b){a[arguments[b].uuid]=b}this._paths=[];this._parsedPaths=[];this._bindings=[];this._bindingsIndicesByPath={};var d=this;this.stats={objects:{get total(){return d._objects.length},get inUse(){return this.total-d.nCachedObjects_}},get bindingsPerObject(){return d._bindings.length}}}function qf(a,b,c){this._mixer=a;this._clip=b;this._localRoot=c||null;a=b.tracks;b=a.length;c=Array(b);for(var d={endingStart:2400,endingEnd:2400},e=0,f;e!==b;++e){f=a[e].createInterpolant(null);c[e]=f;f.settings=d}this._interpolantSettings=d;this._interpolants=c;this._propertyBindings=Array(b);this._weightInterpolant=this._timeScaleInterpolant=this._byClipCacheIndex=this._cacheIndex=null;this.loop=2201;this._loopCount=-1;this._startTime=null;this.time=0;this._effectiveWeight=this.weight=this._effectiveTimeScale=this.timeScale=1;this.repetitions=1/0;this.paused=!1;this.enabled=!0;this.clampWhenFinished=!1;this.zeroSlopeAtEnd=this.zeroSlopeAtStart=!0}function re(a){this._root=a;this._initMemoryManager();this.time=this._accuIndex=0;this.timeScale=1}function Od(a,b){"string"===typeof a&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),a=b);this.value=a}function se(){G.call(this);this.type="InstancedBufferGeometry";this.maxInstancedCount=void 0}function te(a,b,c,d){this.data=a;this.itemSize=b;this.offset=c;this.normalized=!0===d}function oc(a,b){this.array=a;this.stride=b;this.count=void 0!==a?a.length/b:0;this.dynamic=!1;this.updateRange={offset:0,count:-1};this.version=0}function ue(a,b,c){oc.call(this,a,b);this.meshPerAttribute=c||1}function ve(a,b,c){O.call(this,a,b);this.meshPerAttribute=c||1}function rf(a,b,c,d){this.ray=new sb(a,b);this.near=c||0;this.far=d||1/0;this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}};Object.defineProperties(this.params,{PointCloud:{get:function get(){console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points.");return this.Points}}})}function sf(a,b){return a.distance-b.distance}function we(a,b,c,d){if(!1!==a.visible&&(a.raycast(b,c),!0===d)){a=a.children;d=0;for(var e=a.length;d<e;d++){we(a[d],b,c,!0)}}}function tf(a){this.autoStart=void 0!==a?a:!0;this.elapsedTime=this.oldTime=this.startTime=0;this.running=!1}function uf(a,b,c){this.radius=void 0!==a?a:1;this.phi=void 0!==b?b:0;this.theta=void 0!==c?c:0;return this}function vf(a,b,c){this.radius=void 0!==a?a:1;this.theta=void 0!==b?b:0;this.y=void 0!==c?c:0;return this}function xe(a,b){this.min=void 0!==a?a:new y(1/0,1/0);this.max=void 0!==b?b:new y(-Infinity,-Infinity)}function id(a){B.call(this);this.material=a;this.render=function(){}}function jd(a,b,c,d){this.object=a;this.size=void 0!==b?b:1;a=void 0!==c?c:16711680;d=void 0!==d?d:1;b=0;(c=this.object.geometry)&&c.isGeometry?b=3*c.faces.length:c&&c.isBufferGeometry&&(b=c.attributes.normal.count);c=new G;b=new A(6*b,3);c.addAttribute("position",b);aa.call(this,c,new T({color:a,linewidth:d}));this.matrixAutoUpdate=!1;this.update()}function pc(a,b){B.call(this);this.light=a;this.light.updateMatrixWorld();this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;this.color=b;a=new G;b=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(var c=0,d=1;32>c;c++,d++){var e=2*(c/32*_MathPI),f=2*(d/32*_MathPI);b.push(_Mathcos(e),_Mathsin(e),1,_Mathcos(f),_Mathsin(f),1)}a.addAttribute("position",new A(b,3));b=new T({fog:!1});this.cone=new aa(a,b);this.add(this.cone);this.update()}function wf(a){var b=[];a&&a.isBone&&b.push(a);for(var c=0;c<a.children.length;c++){b.push.apply(b,wf(a.children[c]))}return b}function qc(a){for(var b=wf(a),c=new G,d=[],e=[],f=new K(0,0,1),g=new K(0,1,0),h=0,l;h<b.length;h++){l=b[h];l.parent&&l.parent.isBone&&(d.push(0,0,0),d.push(0,0,0),e.push(f.r,f.g,f.b),e.push(g.r,g.g,g.b))}c.addAttribute("position",new A(d,3));c.addAttribute("color",new A(e,3));d=new T({vertexColors:2,depthTest:!1,depthWrite:!1,transparent:!0});aa.call(this,c,d);this.root=a;this.bones=b;this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1}function rc(a,b,c){this.light=a;this.light.updateMatrixWorld();this.color=c;a=new xb(b,4,2);b=new ka({wireframe:!0,fog:!1});pa.call(this,a,b);this.matrix=this.light.matrixWorld;this.matrixAutoUpdate=!1;this.update()}function sc(a,b){B.call(this);this.light=a;this.light.updateMatrixWorld();this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;this.color=b;a=new T({fog:!1});b=new G;b.addAttribute("position",new O(new Float32Array(15),3));this.line=new ma(b,a);this.add(this.line);this.update()}function tc(a,b,c){B.call(this);this.light=a;this.light.updateMatrixWorld();this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;this.color=c;a=new ub(b);a.rotateY(.5*_MathPI);this.material=new ka({wireframe:!0,fog:!1});void 0===this.color&&(this.material.vertexColors=2);b=a.getAttribute("position");b=new Float32Array(3*b.count);a.addAttribute("color",new O(b,3));this.add(new pa(a,this.material));this.update()}function kd(a,b,c,d){a=a||10;b=b||10;c=new K(void 0!==c?c:4473924);d=new K(void 0!==d?d:8947848);var e=b/2,f=a/b,g=a/2;a=[];for(var h=[],l=0,m=0,k=-g;l<=b;l++,k+=f){a.push(-g,0,k,g,0,k);a.push(k,0,-g,k,0,g);var n=l===e?c:d;n.toArray(h,m);m+=3;n.toArray(h,m);m+=3;n.toArray(h,m);m+=3;n.toArray(h,m);m+=3}b=new G;b.addAttribute("position",new A(a,3));b.addAttribute("color",new A(h,3));c=new T({vertexColors:2});aa.call(this,b,c)}function Pd(a,b,c,d,e,f){a=a||10;b=b||16;c=c||8;d=d||64;e=new K(void 0!==e?e:4473924);f=new K(void 0!==f?f:8947848);var g=[],h=[],l;for(l=0;l<=b;l++){var m=2*(l/b)*_MathPI,k=_Mathsin(m)*a;m=_Mathcos(m)*a;g.push(0,0,0);g.push(k,0,m);var n=1&l?e:f;h.push(n.r,n.g,n.b);h.push(n.r,n.g,n.b)}for(l=0;l<=c;l++){n=1&l?e:f;var r=a-a/c*l;for(b=0;b<d;b++){m=2*(b/d)*_MathPI,k=_Mathsin(m)*r,m=_Mathcos(m)*r,g.push(k,0,m),h.push(n.r,n.g,n.b),m=2*((b+1)/d)*_MathPI,k=_Mathsin(m)*r,m=_Mathcos(m)*r,g.push(k,0,m),h.push(n.r,n.g,n.b)}}a=new G;a.addAttribute("position",new A(g,3));a.addAttribute("color",new A(h,3));g=new T({vertexColors:2});aa.call(this,a,g)}function ld(a,b,c,d){this.object=a;this.size=void 0!==b?b:1;a=void 0!==c?c:16776960;d=void 0!==d?d:1;b=0;(c=this.object.geometry)&&c.isGeometry?b=c.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");c=new G;b=new A(6*b,3);c.addAttribute("position",b);aa.call(this,c,new T({color:a,linewidth:d}));this.matrixAutoUpdate=!1;this.update()}function uc(a,b,c){B.call(this);this.light=a;this.light.updateMatrixWorld();this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;this.color=c;void 0===b&&(b=1);a=new G;a.addAttribute("position",new A([-b,b,0,b,b,0,b,-b,0,-b,-b,0,-b,b,0],3));b=new T({fog:!1});this.lightPlane=new ma(a,b);this.add(this.lightPlane);a=new G;a.addAttribute("position",new A([0,0,0,0,0,1],3));this.targetLine=new ma(a,b);this.add(this.targetLine);this.update()}function md(a){function b(a,b,d){c(a,d);c(b,d)}function c(a,b){f.push(0,0,0);g.push(b.r,b.g,b.b);void 0===h[a]&&(h[a]=[]);h[a].push(f.length/3-1)}var d=new G,e=new T({color:16777215,vertexColors:1}),f=[],g=[],h={},l=new K(16755200),m=new K(16711680),k=new K(43775),n=new K(16777215),r=new K(3355443);b("n1","n2",l);b("n2","n4",l);b("n4","n3",l);b("n3","n1",l);b("f1","f2",l);b("f2","f4",l);b("f4","f3",l);b("f3","f1",l);b("n1","f1",l);b("n2","f2",l);b("n3","f3",l);b("n4","f4",l);b("p","n1",m);b("p","n2",m);b("p","n3",m);b("p","n4",m);b("u1","u2",k);b("u2","u3",k);b("u3","u1",k);b("c","t",n);b("p","c",r);b("cn1","cn2",r);b("cn3","cn4",r);b("cf1","cf2",r);b("cf3","cf4",r);d.addAttribute("position",new A(f,3));d.addAttribute("color",new A(g,3));aa.call(this,d,e);this.camera=a;this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix();this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;this.pointMap=h;this.update()}function Ib(a,b){this.object=a;void 0===b&&(b=16776960);a=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);var c=new Float32Array(24),d=new G;d.setIndex(new O(a,1));d.addAttribute("position",new O(c,3));aa.call(this,d,new T({color:b}));this.matrixAutoUpdate=!1;this.update()}function nd(a,b){this.type="Box3Helper";this.box=a;a=void 0!==b?b:16776960;b=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);var c=new G;c.setIndex(new O(b,1));c.addAttribute("position",new A([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3));aa.call(this,c,new T({color:a}));this.geometry.computeBoundingSphere()}function od(a,b,c){this.type="PlaneHelper";this.plane=a;this.size=void 0===b?1:b;a=void 0!==c?c:16776960;b=new G;b.addAttribute("position",new A([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3));b.computeBoundingSphere();ma.call(this,b,new T({color:a}));b=new G;b.addAttribute("position",new A([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3));b.computeBoundingSphere();this.add(new pa(b,new ka({color:a,opacity:.2,transparent:!0,depthWrite:!1})))}function Jb(a,b,c,d,e,f){B.call(this);void 0===d&&(d=16776960);void 0===c&&(c=1);void 0===e&&(e=.2*c);void 0===f&&(f=.2*e);void 0===Qd&&(Qd=new G,Qd.addAttribute("position",new A([0,0,0,0,1,0],3)),ye=new $a(0,.5,1,5,1),ye.translate(0,-.5,0));this.position.copy(b);this.line=new ma(Qd,new T({color:d}));this.line.matrixAutoUpdate=!1;this.add(this.line);this.cone=new pa(ye,new ka({color:d}));this.cone.matrixAutoUpdate=!1;this.add(this.cone);this.setDirection(a);this.setLength(c,e,f)}function pd(a){a=a||1;var b=[0,0,0,a,0,0,0,0,0,0,a,0,0,0,0,0,0,a];a=new G;a.addAttribute("position",new A(b,3));a.addAttribute("color",new A([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));b=new T({vertexColors:2});aa.call(this,a,b)}function xf(a){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead.");ra.call(this,a);this.type="catmullrom";this.closed=!0}function yf(a){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead.");ra.call(this,a);this.type="catmullrom"}function ze(a){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead.");ra.call(this,a);this.type="catmullrom"}void 0===_NumberEPSILON&&(_NumberEPSILON=2.220446049250313e-16);void 0===_NumberisInteger&&(_NumberisInteger=function(a){return"number"===typeof a&&isFinite(a)&&_Mathfloor(a)===a});void 0===_Mathsign&&(_Mathsign=function(a){return 0>a?-1:0<a?1:+a});!1==="name"in Function.prototype&&Object.defineProperty(Function.prototype,"name",{get:function get(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}});void 0===Object.assign&&function(){Object.assign=function(a){if(void 0===a||null===a)throw new TypeError("Cannot convert undefined or null to object");for(var b=Object(a),c=1,d;c<arguments.length;c++){d=arguments[c];if(void 0!==d&&null!==d)for(var e in d){Object.prototype.hasOwnProperty.call(d,e)&&(b[e]=d[e])}}return b}}();Object.assign(ha.prototype,{addEventListener:function addEventListener(a,b){void 0===this._listeners&&(this._listeners={});var c=this._listeners;void 0===c[a]&&(c[a]=[]);-1===c[a].indexOf(b)&&c[a].push(b)},hasEventListener:function hasEventListener(a,b){if(void 0===this._listeners)return!1;var c=this._listeners;return void 0!==c[a]&&-1!==c[a].indexOf(b)},removeEventListener:function removeEventListener(a,b){void 0!==this._listeners&&(a=this._listeners[a],void 0!==a&&(b=a.indexOf(b),-1!==b&&a.splice(b,1)))},dispatchEvent:function dispatchEvent(a){if(void 0!==this._listeners){var b=this._listeners[a.type];if(void 0!==b){a.target=this;b=b.slice(0);for(var c=0,d=b.length;c<d;c++){b[c].call(this,a)}}}}});var P={DEG2RAD:_MathPI/180,RAD2DEG:180/_MathPI,generateUUID:function(){for(var a=[],b=0;256>b;b++){a[b]=(16>b?"0":"")+b.toString(16)}return function(){var b=0|4294967295*Math.random(),d=0|4294967295*Math.random(),e=0|4294967295*Math.random(),f=0|4294967295*Math.random();return(a[255&b]+a[255&b>>8]+a[255&b>>16]+a[255&b>>24]+"-"+a[255&d]+a[255&d>>8]+"-"+a[64|15&d>>16]+a[255&d>>24]+"-"+a[128|63&e]+a[255&e>>8]+"-"+a[255&e>>16]+a[255&e>>24]+a[255&f]+a[255&f>>8]+a[255&f>>16]+a[255&f>>24]).toUpperCase()}}(),clamp:function clamp(a,b,c){return _Mathmax(b,_Mathmin(c,a))},euclideanModulo:function euclideanModulo(a,b){return(a%b+b)%b},mapLinear:function mapLinear(a,b,c,d,e){return d+(a-b)*(e-d)/(c-b)},lerp:function lerp(a,b,c){return(1-c)*a+c*b},smoothstep:function smoothstep(a,b,c){if(a<=b)return 0;if(a>=c)return 1;a=(a-b)/(c-b);return a*a*(3-2*a)},smootherstep:function smootherstep(a,b,c){if(a<=b)return 0;if(a>=c)return 1;a=(a-b)/(c-b);return a*a*a*(a*(6*a-15)+10)},randInt:function randInt(a,b){return a+_Mathfloor(Math.random()*(b-a+1))},randFloat:function randFloat(a,b){return a+Math.random()*(b-a)},randFloatSpread:function randFloatSpread(a){return a*(.5-Math.random())},degToRad:function degToRad(a){return a*P.DEG2RAD},radToDeg:function radToDeg(a){return a*P.RAD2DEG},isPowerOfTwo:function isPowerOfTwo(a){return 0===(a&a-1)&&0!==a},ceilPowerOfTwo:function ceilPowerOfTwo(a){return _Mathpow(2,_Mathceil(_Mathlog(a)/_MathLN))},floorPowerOfTwo:function floorPowerOfTwo(a){return _Mathpow(2,_Mathfloor(_Mathlog(a)/_MathLN))}};Object.defineProperties(y.prototype,{width:{get:function get(){return this.x},set:function set(a){this.x=a}},height:{get:function get(){return this.y},set:function set(a){this.y=a}}});Object.assign(y.prototype,{isVector2:!0,set:function set(a,b){this.x=a;this.y=b;return this},setScalar:function setScalar(a){this.y=this.x=a;return this},setX:function setX(a){this.x=a;return this},setY:function setY(a){this.y=a;return this},setComponent:function setComponent(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;default:throw Error("index is out of range: "+a);}return this},getComponent:function getComponent(a){switch(a){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+a);}},clone:function clone(){return new this.constructor(this.x,this.y)},copy:function copy(a){this.x=a.x;this.y=a.y;return this},add:function add(a,b){if(void 0!==b)return console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;return this},addScalar:function addScalar(a){this.x+=a;this.y+=a;return this},addVectors:function addVectors(a,b){this.x=a.x+b.x;this.y=a.y+b.y;return this},addScaledVector:function addScaledVector(a,b){this.x+=a.x*b;this.y+=a.y*b;return this},sub:function sub(a,b){if(void 0!==b)return console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,b);this.x-=a.x;this.y-=a.y;return this},subScalar:function subScalar(a){this.x-=a;this.y-=a;return this},subVectors:function subVectors(a,b){this.x=a.x-b.x;this.y=a.y-b.y;return this},multiply:function multiply(a){this.x*=a.x;this.y*=a.y;return this},multiplyScalar:function multiplyScalar(a){this.x*=a;this.y*=a;return this},divide:function divide(a){this.x/=a.x;this.y/=a.y;return this},divideScalar:function divideScalar(a){return this.multiplyScalar(1/a)},applyMatrix3:function applyMatrix3(a){var b=this.x,c=this.y;a=a.elements;this.x=a[0]*b+a[3]*c+a[6];this.y=a[1]*b+a[4]*c+a[7];return this},min:function min(a){this.x=_Mathmin(this.x,a.x);this.y=_Mathmin(this.y,a.y);return this},max:function max(a){this.x=_Mathmax(this.x,a.x);this.y=_Mathmax(this.y,a.y);return this},clamp:function clamp(a,b){this.x=_Mathmax(a.x,_Mathmin(b.x,this.x));this.y=_Mathmax(a.y,_Mathmin(b.y,this.y));return this},clampScalar:function(){var a=new y,b=new y;return function(c,d){a.set(c,c);b.set(d,d);return this.clamp(a,b)}}(),clampLength:function clampLength(a,b){var c=this.length();return this.divideScalar(c||1).multiplyScalar(_Mathmax(a,_Mathmin(b,c)))},floor:function floor(){this.x=_Mathfloor(this.x);this.y=_Mathfloor(this.y);return this},ceil:function ceil(){this.x=_Mathceil(this.x);this.y=_Mathceil(this.y);return this},round:function round(){this.x=_Mathround(this.x);this.y=_Mathround(this.y);return this},roundToZero:function roundToZero(){this.x=0>this.x?_Mathceil(this.x):_Mathfloor(this.x);this.y=0>this.y?_Mathceil(this.y):_Mathfloor(this.y);return this},negate:function negate(){this.x=-this.x;this.y=-this.y;return this},dot:function dot(a){return this.x*a.x+this.y*a.y},lengthSq:function lengthSq(){return this.x*this.x+this.y*this.y},length:function length(){return _Mathsqrt(this.x*this.x+this.y*this.y)},manhattanLength:function manhattanLength(){return _Mathabs(this.x)+_Mathabs(this.y)},normalize:function normalize(){return this.divideScalar(this.length()||1)},angle:function angle(){var a=_Mathatan(this.y,this.x);0>a&&(a+=2*_MathPI);return a},distanceTo:function distanceTo(a){return _Mathsqrt(this.distanceToSquared(a))},distanceToSquared:function distanceToSquared(a){var b=this.x-a.x;a=this.y-a.y;return b*b+a*a},manhattanDistanceTo:function manhattanDistanceTo(a){return _Mathabs(this.x-a.x)+_Mathabs(this.y-a.y)},setLength:function setLength(a){return this.normalize().multiplyScalar(a)},lerp:function lerp(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;return this},lerpVectors:function lerpVectors(a,b,c){return this.subVectors(b,a).multiplyScalar(c).add(a)},equals:function equals(a){return a.x===this.x&&a.y===this.y},fromArray:function fromArray(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];return this},toArray:function toArray(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.x;a[b+1]=this.y;return a},fromBufferAttribute:function fromBufferAttribute(a,b,c){void 0!==c&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute().");this.x=a.getX(b);this.y=a.getY(b);return this},rotateAround:function rotateAround(a,b){var c=_Mathcos(b);b=_Mathsin(b);var d=this.x-a.x,e=this.y-a.y;this.x=d*c-e*b+a.x;this.y=d*b+e*c+a.y;return this}});Object.assign(F.prototype,{isMatrix4:!0,set:function set(a,b,c,d,e,f,g,h,l,m,k,n,r,q,t,p){var v=this.elements;v[0]=a;v[4]=b;v[8]=c;v[12]=d;v[1]=e;v[5]=f;v[9]=g;v[13]=h;v[2]=l;v[6]=m;v[10]=k;v[14]=n;v[3]=r;v[7]=q;v[11]=t;v[15]=p;return this},identity:function identity(){this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return this},clone:function clone(){return new F().fromArray(this.elements)},copy:function copy(a){var b=this.elements;a=a.elements;b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return this},copyPosition:function copyPosition(a){var b=this.elements;a=a.elements;b[12]=a[12];b[13]=a[13];b[14]=a[14];return this},extractBasis:function extractBasis(a,b,c){a.setFromMatrixColumn(this,0);b.setFromMatrixColumn(this,1);c.setFromMatrixColumn(this,2);return this},makeBasis:function makeBasis(a,b,c){this.set(a.x,b.x,c.x,0,a.y,b.y,c.y,0,a.z,b.z,c.z,0,0,0,0,1);return this},extractRotation:function(){var a=new p;return function(b){var c=this.elements,d=b.elements,e=1/a.setFromMatrixColumn(b,0).length(),f=1/a.setFromMatrixColumn(b,1).length();b=1/a.setFromMatrixColumn(b,2).length();c[0]=d[0]*e;c[1]=d[1]*e;c[2]=d[2]*e;c[3]=0;c[4]=d[4]*f;c[5]=d[5]*f;c[6]=d[6]*f;c[7]=0;c[8]=d[8]*b;c[9]=d[9]*b;c[10]=d[10]*b;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return this}}(),makeRotationFromEuler:function makeRotationFromEuler(a){a&&a.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var b=this.elements,c=a.x,d=a.y,e=a.z,f=_Mathcos(c);c=_Mathsin(c);var g=_Mathcos(d);d=_Mathsin(d);var h=_Mathcos(e);e=_Mathsin(e);if("XYZ"===a.order){a=f*h;var l=f*e,m=c*h,k=c*e;b[0]=g*h;b[4]=-g*e;b[8]=d;b[1]=l+m*d;b[5]=a-k*d;b[9]=-c*g;b[2]=k-a*d;b[6]=m+l*d;b[10]=f*g}else"YXZ"===a.order?(a=g*h,l=g*e,m=d*h,k=d*e,b[0]=a+k*c,b[4]=m*c-l,b[8]=f*d,b[1]=f*e,b[5]=f*h,b[9]=-c,b[2]=l*c-m,b[6]=k+a*c,b[10]=f*g):"ZXY"===a.order?(a=g*h,l=g*e,m=d*h,k=d*e,b[0]=a-k*c,b[4]=-f*e,b[8]=m+l*c,b[1]=l+m*c,b[5]=f*h,b[9]=k-a*c,b[2]=-f*d,b[6]=c,b[10]=f*g):"ZYX"===a.order?(a=f*h,l=f*e,m=c*h,k=c*e,b[0]=g*h,b[4]=m*d-l,b[8]=a*d+k,b[1]=g*e,b[5]=k*d+a,b[9]=l*d-m,b[2]=-d,b[6]=c*g,b[10]=f*g):"YZX"===a.order?(a=f*g,l=f*d,m=c*g,k=c*d,b[0]=g*h,b[4]=k-a*e,b[8]=m*e+l,b[1]=e,b[5]=f*h,b[9]=-c*h,b[2]=-d*h,b[6]=l*e+m,b[10]=a-k*e):"XZY"===a.order&&(a=f*g,l=f*d,m=c*g,k=c*d,b[0]=g*h,b[4]=-e,b[8]=d*h,b[1]=a*e+k,b[5]=f*h,b[9]=l*e-m,b[2]=m*e-l,b[6]=c*h,b[10]=k*e+a);b[3]=0;b[7]=0;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return this},makeRotationFromQuaternion:function(){var a=new p(0,0,0),b=new p(1,1,1);return function(c){return this.compose(a,c,b)}}(),lookAt:function(){var a=new p,b=new p,c=new p;return function(d,e,f){var g=this.elements;c.subVectors(d,e);0===c.lengthSq()&&(c.z=1);c.normalize();a.crossVectors(f,c);0===a.lengthSq()&&(1===_Mathabs(f.z)?c.x+=1E-4:c.z+=1E-4,c.normalize(),a.crossVectors(f,c));a.normalize();b.crossVectors(c,a);g[0]=a.x;g[4]=b.x;g[8]=c.x;g[1]=a.y;g[5]=b.y;g[9]=c.y;g[2]=a.z;g[6]=b.z;g[10]=c.z;return this}}(),multiply:function multiply(a,b){return void 0!==b?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(a,b)):this.multiplyMatrices(this,a)},premultiply:function premultiply(a){return this.multiplyMatrices(a,this)},multiplyMatrices:function multiplyMatrices(a,b){var c=a.elements,d=b.elements;b=this.elements;a=c[0];var e=c[4],f=c[8],g=c[12],h=c[1],l=c[5],m=c[9],k=c[13],n=c[2],r=c[6],q=c[10],t=c[14],p=c[3],z=c[7],x=c[11];c=c[15];var w=d[0],y=d[4],C=d[8],A=d[12],Q=d[1],E=d[5],F=d[9],B=d[13],G=d[2],I=d[6],K=d[10],J=d[14],L=d[3],M=d[7],O=d[11];d=d[15];b[0]=a*w+e*Q+f*G+g*L;b[4]=a*y+e*E+f*I+g*M;b[8]=a*C+e*F+f*K+g*O;b[12]=a*A+e*B+f*J+g*d;b[1]=h*w+l*Q+m*G+k*L;b[5]=h*y+l*E+m*I+k*M;b[9]=h*C+l*F+m*K+k*O;b[13]=h*A+l*B+m*J+k*d;b[2]=n*w+r*Q+q*G+t*L;b[6]=n*y+r*E+q*I+t*M;b[10]=n*C+r*F+q*K+t*O;b[14]=n*A+r*B+q*J+t*d;b[3]=p*w+z*Q+x*G+c*L;b[7]=p*y+z*E+x*I+c*M;b[11]=p*C+z*F+x*K+c*O;b[15]=p*A+z*B+x*J+c*d;return this},multiplyScalar:function multiplyScalar(a){var b=this.elements;b[0]*=a;b[4]*=a;b[8]*=a;b[12]*=a;b[1]*=a;b[5]*=a;b[9]*=a;b[13]*=a;b[2]*=a;b[6]*=a;b[10]*=a;b[14]*=a;b[3]*=a;b[7]*=a;b[11]*=a;b[15]*=a;return this},applyToBufferAttribute:function(){var a=new p;return function(b){for(var c=0,d=b.count;c<d;c++){a.x=b.getX(c),a.y=b.getY(c),a.z=b.getZ(c),a.applyMatrix4(this),b.setXYZ(c,a.x,a.y,a.z)}return b}}(),determinant:function determinant(){var a=this.elements,b=a[0],c=a[4],d=a[8],e=a[12],f=a[1],g=a[5],h=a[9],l=a[13],m=a[2],k=a[6],n=a[10],r=a[14];return a[3]*(+e*h*k-d*l*k-e*g*n+c*l*n+d*g*r-c*h*r)+a[7]*(+b*h*r-b*l*n+e*f*n-d*f*r+d*l*m-e*h*m)+a[11]*(+b*l*k-b*g*r-e*f*k+c*f*r+e*g*m-c*l*m)+a[15]*(-d*g*m-b*h*k+b*g*n+d*f*k-c*f*n+c*h*m)},transpose:function transpose(){var a=this.elements,b=a[1];a[1]=a[4];a[4]=b;b=a[2];a[2]=a[8];a[8]=b;b=a[6];a[6]=a[9];a[9]=b;b=a[3];a[3]=a[12];a[12]=b;b=a[7];a[7]=a[13];a[13]=b;b=a[11];a[11]=a[14];a[14]=b;return this},setPosition:function setPosition(a){var b=this.elements;b[12]=a.x;b[13]=a.y;b[14]=a.z;return this},getInverse:function getInverse(a,b){var c=this.elements,d=a.elements;a=d[0];var e=d[1],f=d[2],g=d[3],h=d[4],l=d[5],m=d[6],k=d[7],n=d[8],r=d[9],q=d[10],t=d[11],p=d[12],z=d[13],x=d[14];d=d[15];var w=r*x*k-z*q*k+z*m*t-l*x*t-r*m*d+l*q*d,y=p*q*k-n*x*k-p*m*t+h*x*t+n*m*d-h*q*d,C=n*z*k-p*r*k+p*l*t-h*z*t-n*l*d+h*r*d,A=p*r*m-n*z*m-p*l*q+h*z*q+n*l*x-h*r*x,Q=a*w+e*y+f*C+g*A;if(0===Q){if(!0===b)throw Error("THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0");console.warn("THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0");return this.identity()}b=1/Q;c[0]=w*b;c[1]=(z*q*g-r*x*g-z*f*t+e*x*t+r*f*d-e*q*d)*b;c[2]=(l*x*g-z*m*g+z*f*k-e*x*k-l*f*d+e*m*d)*b;c[3]=(r*m*g-l*q*g-r*f*k+e*q*k+l*f*t-e*m*t)*b;c[4]=y*b;c[5]=(n*x*g-p*q*g+p*f*t-a*x*t-n*f*d+a*q*d)*b;c[6]=(p*m*g-h*x*g-p*f*k+a*x*k+h*f*d-a*m*d)*b;c[7]=(h*q*g-n*m*g+n*f*k-a*q*k-h*f*t+a*m*t)*b;c[8]=C*b;c[9]=(p*r*g-n*z*g-p*e*t+a*z*t+n*e*d-a*r*d)*b;c[10]=(h*z*g-p*l*g+p*e*k-a*z*k-h*e*d+a*l*d)*b;c[11]=(n*l*g-h*r*g-n*e*k+a*r*k+h*e*t-a*l*t)*b;c[12]=A*b;c[13]=(n*z*f-p*r*f+p*e*q-a*z*q-n*e*x+a*r*x)*b;c[14]=(p*l*f-h*z*f-p*e*m+a*z*m+h*e*x-a*l*x)*b;c[15]=(h*r*f-n*l*f+n*e*m-a*r*m-h*e*q+a*l*q)*b;return this},scale:function scale(a){var b=this.elements,c=a.x,d=a.y;a=a.z;b[0]*=c;b[4]*=d;b[8]*=a;b[1]*=c;b[5]*=d;b[9]*=a;b[2]*=c;b[6]*=d;b[10]*=a;b[3]*=c;b[7]*=d;b[11]*=a;return this},getMaxScaleOnAxis:function getMaxScaleOnAxis(){var a=this.elements;return _Mathsqrt(_Mathmax(a[0]*a[0]+a[1]*a[1]+a[2]*a[2],a[4]*a[4]+a[5]*a[5]+a[6]*a[6],a[8]*a[8]+a[9]*a[9]+a[10]*a[10]))},makeTranslation:function makeTranslation(a,b,c){this.set(1,0,0,a,0,1,0,b,0,0,1,c,0,0,0,1);return this},makeRotationX:function makeRotationX(a){var b=_Mathcos(a);a=_Mathsin(a);this.set(1,0,0,0,0,b,-a,0,0,a,b,0,0,0,0,1);return this},makeRotationY:function makeRotationY(a){var b=_Mathcos(a);a=_Mathsin(a);this.set(b,0,a,0,0,1,0,0,-a,0,b,0,0,0,0,1);return this},makeRotationZ:function makeRotationZ(a){var b=_Mathcos(a);a=_Mathsin(a);this.set(b,-a,0,0,a,b,0,0,0,0,1,0,0,0,0,1);return this},makeRotationAxis:function makeRotationAxis(a,b){var c=_Mathcos(b);b=_Mathsin(b);var d=1-c,e=a.x,f=a.y;a=a.z;var g=d*e,h=d*f;this.set(g*e+c,g*f-b*a,g*a+b*f,0,g*f+b*a,h*f+c,h*a-b*e,0,g*a-b*f,h*a+b*e,d*a*a+c,0,0,0,0,1);return this},makeScale:function makeScale(a,b,c){this.set(a,0,0,0,0,b,0,0,0,0,c,0,0,0,0,1);return this},makeShear:function makeShear(a,b,c){this.set(1,b,c,0,a,1,c,0,a,b,1,0,0,0,0,1);return this},compose:function compose(a,b,c){var d=this.elements,e=b._x,f=b._y,g=b._z,h=b._w,l=e+e,m=f+f,k=g+g;b=e*l;var n=e*m;e*=k;var r=f*m;f*=k;g*=k;l*=h;m*=h;h*=k;k=c.x;var q=c.y;c=c.z;d[0]=(1-(r+g))*k;d[1]=(n+h)*k;d[2]=(e-m)*k;d[3]=0;d[4]=(n-h)*q;d[5]=(1-(b+g))*q;d[6]=(f+l)*q;d[7]=0;d[8]=(e+m)*c;d[9]=(f-l)*c;d[10]=(1-(b+r))*c;d[11]=0;d[12]=a.x;d[13]=a.y;d[14]=a.z;d[15]=1;return this},decompose:function(){var a=new p,b=new F;return function(c,d,e){var f=this.elements,g=a.set(f[0],f[1],f[2]).length(),h=a.set(f[4],f[5],f[6]).length(),l=a.set(f[8],f[9],f[10]).length();0>this.determinant()&&(g=-g);c.x=f[12];c.y=f[13];c.z=f[14];b.copy(this);c=1/g;f=1/h;var m=1/l;b.elements[0]*=c;b.elements[1]*=c;b.elements[2]*=c;b.elements[4]*=f;b.elements[5]*=f;b.elements[6]*=f;b.elements[8]*=m;b.elements[9]*=m;b.elements[10]*=m;d.setFromRotationMatrix(b);e.x=g;e.y=h;e.z=l;return this}}(),makePerspective:function makePerspective(a,b,c,d,e,f){void 0===f&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var g=this.elements;g[0]=2*e/(b-a);g[4]=0;g[8]=(b+a)/(b-a);g[12]=0;g[1]=0;g[5]=2*e/(c-d);g[9]=(c+d)/(c-d);g[13]=0;g[2]=0;g[6]=0;g[10]=-(f+e)/(f-e);g[14]=-2*f*e/(f-e);g[3]=0;g[7]=0;g[11]=-1;g[15]=0;return this},makeOrthographic:function makeOrthographic(a,b,c,d,e,f){var g=this.elements,h=1/(b-a),l=1/(c-d),m=1/(f-e);g[0]=2*h;g[4]=0;g[8]=0;g[12]=-((b+a)*h);g[1]=0;g[5]=2*l;g[9]=0;g[13]=-((c+d)*l);g[2]=0;g[6]=0;g[10]=-2*m;g[14]=-((f+e)*m);g[3]=0;g[7]=0;g[11]=0;g[15]=1;return this},equals:function equals(a){var b=this.elements;a=a.elements;for(var c=0;16>c;c++){if(b[c]!==a[c])return!1}return!0},fromArray:function fromArray(a,b){void 0===b&&(b=0);for(var c=0;16>c;c++){this.elements[c]=a[c+b]}return this},toArray:function toArray(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);var c=this.elements;a[b]=c[0];a[b+1]=c[1];a[b+2]=c[2];a[b+3]=c[3];a[b+4]=c[4];a[b+5]=c[5];a[b+6]=c[6];a[b+7]=c[7];a[b+8]=c[8];a[b+9]=c[9];a[b+10]=c[10];a[b+11]=c[11];a[b+12]=c[12];a[b+13]=c[13];a[b+14]=c[14];a[b+15]=c[15];return a}});Object.assign(X,{slerp:function slerp(a,b,c,d){return c.copy(a).slerp(b,d)},slerpFlat:function slerpFlat(a,b,c,d,e,f,g){var h=c[d+0],l=c[d+1],m=c[d+2];c=c[d+3];d=e[f+0];var k=e[f+1],n=e[f+2];e=e[f+3];if(c!==e||h!==d||l!==k||m!==n){f=1-g;var r=h*d+l*k+m*n+c*e,q=0<=r?1:-1,p=1-r*r;p>_NumberEPSILON&&(p=_Mathsqrt(p),r=_Mathatan(p,r*q),f=_Mathsin(f*r)/p,g=_Mathsin(g*r)/p);q*=g;h=h*f+d*q;l=l*f+k*q;m=m*f+n*q;c=c*f+e*q;f===1-g&&(g=1/_Mathsqrt(h*h+l*l+m*m+c*c),h*=g,l*=g,m*=g,c*=g)}a[b]=h;a[b+1]=l;a[b+2]=m;a[b+3]=c}});Object.defineProperties(X.prototype,{x:{get:function get(){return this._x},set:function set(a){this._x=a;this.onChangeCallback()}},y:{get:function get(){return this._y},set:function set(a){this._y=a;this.onChangeCallback()}},z:{get:function get(){return this._z},set:function set(a){this._z=a;this.onChangeCallback()}},w:{get:function get(){return this._w},set:function set(a){this._w=a;this.onChangeCallback()}}});Object.assign(X.prototype,{set:function set(a,b,c,d){this._x=a;this._y=b;this._z=c;this._w=d;this.onChangeCallback();return this},clone:function clone(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function copy(a){this._x=a.x;this._y=a.y;this._z=a.z;this._w=a.w;this.onChangeCallback();return this},setFromEuler:function setFromEuler(a,b){if(!a||!a.isEuler)throw Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var c=a._x,d=a._y,e=a._z;a=a.order;var f=_Mathcos,g=_Mathsin,h=f(c/2),l=f(d/2);f=f(e/2);c=g(c/2);d=g(d/2);e=g(e/2);"XYZ"===a?(this._x=c*l*f+h*d*e,this._y=h*d*f-c*l*e,this._z=h*l*e+c*d*f,this._w=h*l*f-c*d*e):"YXZ"===a?(this._x=c*l*f+h*d*e,this._y=h*d*f-c*l*e,this._z=h*l*e-c*d*f,this._w=h*l*f+c*d*e):"ZXY"===a?(this._x=c*l*f-h*d*e,this._y=h*d*f+c*l*e,this._z=h*l*e+c*d*f,this._w=h*l*f-c*d*e):"ZYX"===a?(this._x=c*l*f-h*d*e,this._y=h*d*f+c*l*e,this._z=h*l*e-c*d*f,this._w=h*l*f+c*d*e):"YZX"===a?(this._x=c*l*f+h*d*e,this._y=h*d*f+c*l*e,this._z=h*l*e-c*d*f,this._w=h*l*f-c*d*e):"XZY"===a&&(this._x=c*l*f-h*d*e,this._y=h*d*f-c*l*e,this._z=h*l*e+c*d*f,this._w=h*l*f+c*d*e);if(!1!==b)this.onChangeCallback();return this},setFromAxisAngle:function setFromAxisAngle(a,b){b/=2;var c=_Mathsin(b);this._x=a.x*c;this._y=a.y*c;this._z=a.z*c;this._w=_Mathcos(b);this.onChangeCallback();return this},setFromRotationMatrix:function setFromRotationMatrix(a){var b=a.elements,c=b[0];a=b[4];var d=b[8],e=b[1],f=b[5],g=b[9],h=b[2],l=b[6];b=b[10];var m=c+f+b;0<m?(c=.5/_Mathsqrt(m+1),this._w=.25/c,this._x=(l-g)*c,this._y=(d-h)*c,this._z=(e-a)*c):c>f&&c>b?(c=2*_Mathsqrt(1+c-f-b),this._w=(l-g)/c,this._x=.25*c,this._y=(a+e)/c,this._z=(d+h)/c):f>b?(c=2*_Mathsqrt(1+f-c-b),this._w=(d-h)/c,this._x=(a+e)/c,this._y=.25*c,this._z=(g+l)/c):(c=2*_Mathsqrt(1+b-c-f),this._w=(e-a)/c,this._x=(d+h)/c,this._y=(g+l)/c,this._z=.25*c);this.onChangeCallback();return this},setFromUnitVectors:function(){var a=new p,b;return function(c,d){void 0===a&&(a=new p);b=c.dot(d)+1;1E-6>b?(b=0,_Mathabs(c.x)>_Mathabs(c.z)?a.set(-c.y,c.x,0):a.set(0,-c.z,c.y)):a.crossVectors(c,d);this._x=a.x;this._y=a.y;this._z=a.z;this._w=b;return this.normalize()}}(),inverse:function inverse(){return this.conjugate()},conjugate:function conjugate(){this._x*=-1;this._y*=-1;this._z*=-1;this.onChangeCallback();return this},dot:function dot(a){return this._x*a._x+this._y*a._y+this._z*a._z+this._w*a._w},lengthSq:function lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function length(){return _Mathsqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function normalize(){var a=this.length();0===a?(this._z=this._y=this._x=0,this._w=1):(a=1/a,this._x*=a,this._y*=a,this._z*=a,this._w*=a);this.onChangeCallback();return this},multiply:function multiply(a,b){return void 0!==b?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(a,b)):this.multiplyQuaternions(this,a)},premultiply:function premultiply(a){return this.multiplyQuaternions(a,this)},multiplyQuaternions:function multiplyQuaternions(a,b){var c=a._x,d=a._y,e=a._z;a=a._w;var f=b._x,g=b._y,h=b._z;b=b._w;this._x=c*b+a*f+d*h-e*g;this._y=d*b+a*g+e*f-c*h;this._z=e*b+a*h+c*g-d*f;this._w=a*b-c*f-d*g-e*h;this.onChangeCallback();return this},slerp:function slerp(a,b){if(0===b)return this;if(1===b)return this.copy(a);var c=this._x,d=this._y,e=this._z,f=this._w,g=f*a._w+c*a._x+d*a._y+e*a._z;0>g?(this._w=-a._w,this._x=-a._x,this._y=-a._y,this._z=-a._z,g=-g):this.copy(a);if(1<=g)return this._w=f,this._x=c,this._y=d,this._z=e,this;a=_Mathsqrt(1-g*g);if(.001>_Mathabs(a))return this._w=.5*(f+this._w),this._x=.5*(c+this._x),this._y=.5*(d+this._y),this._z=.5*(e+this._z),this;var h=_Mathatan(a,g);g=_Mathsin((1-b)*h)/a;b=_Mathsin(b*h)/a;this._w=f*g+this._w*b;this._x=c*g+this._x*b;this._y=d*g+this._y*b;this._z=e*g+this._z*b;this.onChangeCallback();return this},equals:function equals(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._w===this._w},fromArray:function fromArray(a,b){void 0===b&&(b=0);this._x=a[b];this._y=a[b+1];this._z=a[b+2];this._w=a[b+3];this.onChangeCallback();return this},toArray:function toArray(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this._x;a[b+1]=this._y;a[b+2]=this._z;a[b+3]=this._w;return a},onChange:function onChange(a){this.onChangeCallback=a;return this},onChangeCallback:function onChangeCallback(){}});Object.assign(p.prototype,{isVector3:!0,set:function set(a,b,c){this.x=a;this.y=b;this.z=c;return this},setScalar:function setScalar(a){this.z=this.y=this.x=a;return this},setX:function setX(a){this.x=a;return this},setY:function setY(a){this.y=a;return this},setZ:function setZ(a){this.z=a;return this},setComponent:function setComponent(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;default:throw Error("index is out of range: "+a);}return this},getComponent:function getComponent(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+a);}},clone:function clone(){return new this.constructor(this.x,this.y,this.z)},copy:function copy(a){this.x=a.x;this.y=a.y;this.z=a.z;return this},add:function add(a,b){if(void 0!==b)return console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;this.z+=a.z;return this},addScalar:function addScalar(a){this.x+=a;this.y+=a;this.z+=a;return this},addVectors:function addVectors(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;return this},addScaledVector:function addScaledVector(a,b){this.x+=a.x*b;this.y+=a.y*b;this.z+=a.z*b;return this},sub:function sub(a,b){if(void 0!==b)return console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,b);this.x-=a.x;this.y-=a.y;this.z-=a.z;return this},subScalar:function subScalar(a){this.x-=a;this.y-=a;this.z-=a;return this},subVectors:function subVectors(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;return this},multiply:function multiply(a,b){if(void 0!==b)return console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(a,b);this.x*=a.x;this.y*=a.y;this.z*=a.z;return this},multiplyScalar:function multiplyScalar(a){this.x*=a;this.y*=a;this.z*=a;return this},multiplyVectors:function multiplyVectors(a,b){this.x=a.x*b.x;this.y=a.y*b.y;this.z=a.z*b.z;return this},applyEuler:function(){var a=new X;return function(b){b&&b.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.");return this.applyQuaternion(a.setFromEuler(b))}}(),applyAxisAngle:function(){var a=new X;return function(b,c){return this.applyQuaternion(a.setFromAxisAngle(b,c))}}(),applyMatrix3:function applyMatrix3(a){var b=this.x,c=this.y,d=this.z;a=a.elements;this.x=a[0]*b+a[3]*c+a[6]*d;this.y=a[1]*b+a[4]*c+a[7]*d;this.z=a[2]*b+a[5]*c+a[8]*d;return this},applyMatrix4:function applyMatrix4(a){var b=this.x,c=this.y,d=this.z;a=a.elements;var e=1/(a[3]*b+a[7]*c+a[11]*d+a[15]);this.x=(a[0]*b+a[4]*c+a[8]*d+a[12])*e;this.y=(a[1]*b+a[5]*c+a[9]*d+a[13])*e;this.z=(a[2]*b+a[6]*c+a[10]*d+a[14])*e;return this},applyQuaternion:function applyQuaternion(a){var b=this.x,c=this.y,d=this.z,e=a.x,f=a.y,g=a.z;a=a.w;var h=a*b+f*d-g*c,l=a*c+g*b-e*d,m=a*d+e*c-f*b;b=-e*b-f*c-g*d;this.x=h*a+b*-e+l*-g-m*-f;this.y=l*a+b*-f+m*-e-h*-g;this.z=m*a+b*-g+h*-f-l*-e;return this},project:function(){var a=new F;return function(b){a.multiplyMatrices(b.projectionMatrix,a.getInverse(b.matrixWorld));return this.applyMatrix4(a)}}(),unproject:function(){var a=new F;return function(b){a.multiplyMatrices(b.matrixWorld,a.getInverse(b.projectionMatrix));return this.applyMatrix4(a)}}(),transformDirection:function transformDirection(a){var b=this.x,c=this.y,d=this.z;a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*d;this.y=a[1]*b+a[5]*c+a[9]*d;this.z=a[2]*b+a[6]*c+a[10]*d;return this.normalize()},divide:function divide(a){this.x/=a.x;this.y/=a.y;this.z/=a.z;return this},divideScalar:function divideScalar(a){return this.multiplyScalar(1/a)},min:function min(a){this.x=_Mathmin(this.x,a.x);this.y=_Mathmin(this.y,a.y);this.z=_Mathmin(this.z,a.z);return this},max:function max(a){this.x=_Mathmax(this.x,a.x);this.y=_Mathmax(this.y,a.y);this.z=_Mathmax(this.z,a.z);return this},clamp:function clamp(a,b){this.x=_Mathmax(a.x,_Mathmin(b.x,this.x));this.y=_Mathmax(a.y,_Mathmin(b.y,this.y));this.z=_Mathmax(a.z,_Mathmin(b.z,this.z));return this},clampScalar:function(){var a=new p,b=new p;return function(c,d){a.set(c,c,c);b.set(d,d,d);return this.clamp(a,b)}}(),clampLength:function clampLength(a,b){var c=this.length();return this.divideScalar(c||1).multiplyScalar(_Mathmax(a,_Mathmin(b,c)))},floor:function floor(){this.x=_Mathfloor(this.x);this.y=_Mathfloor(this.y);this.z=_Mathfloor(this.z);return this},ceil:function ceil(){this.x=_Mathceil(this.x);this.y=_Mathceil(this.y);this.z=_Mathceil(this.z);return this},round:function round(){this.x=_Mathround(this.x);this.y=_Mathround(this.y);this.z=_Mathround(this.z);return this},roundToZero:function roundToZero(){this.x=0>this.x?_Mathceil(this.x):_Mathfloor(this.x);this.y=0>this.y?_Mathceil(this.y):_Mathfloor(this.y);this.z=0>this.z?_Mathceil(this.z):_Mathfloor(this.z);return this},negate:function negate(){this.x=-this.x;this.y=-this.y;this.z=-this.z;return this},dot:function dot(a){return this.x*a.x+this.y*a.y+this.z*a.z},lengthSq:function lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function length(){return _Mathsqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function manhattanLength(){return _Mathabs(this.x)+_Mathabs(this.y)+_Mathabs(this.z)},normalize:function normalize(){return this.divideScalar(this.length()||1)},setLength:function setLength(a){return this.normalize().multiplyScalar(a)},lerp:function lerp(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-this.z)*b;return this},lerpVectors:function lerpVectors(a,b,c){return this.subVectors(b,a).multiplyScalar(c).add(a)},cross:function cross(a,b){return void 0!==b?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(a,b)):this.crossVectors(this,a)},crossVectors:function crossVectors(a,b){var c=a.x,d=a.y;a=a.z;var e=b.x,f=b.y;b=b.z;this.x=d*b-a*f;this.y=a*e-c*b;this.z=c*f-d*e;return this},projectOnVector:function projectOnVector(a){var b=a.dot(this)/a.lengthSq();return this.copy(a).multiplyScalar(b)},projectOnPlane:function(){var a=new p;return function(b){a.copy(this).projectOnVector(b);return this.sub(a)}}(),reflect:function(){var a=new p;return function(b){return this.sub(a.copy(b).multiplyScalar(2*this.dot(b)))}}(),angleTo:function angleTo(a){a=this.dot(a)/_Mathsqrt(this.lengthSq()*a.lengthSq());return _Mathacos(P.clamp(a,-1,1))},distanceTo:function distanceTo(a){return _Mathsqrt(this.distanceToSquared(a))},distanceToSquared:function distanceToSquared(a){var b=this.x-a.x,c=this.y-a.y;a=this.z-a.z;return b*b+c*c+a*a},manhattanDistanceTo:function manhattanDistanceTo(a){return _Mathabs(this.x-a.x)+_Mathabs(this.y-a.y)+_Mathabs(this.z-a.z)},setFromSpherical:function setFromSpherical(a){var b=_Mathsin(a.phi)*a.radius;this.x=b*_Mathsin(a.theta);this.y=_Mathcos(a.phi)*a.radius;this.z=b*_Mathcos(a.theta);return this},setFromCylindrical:function setFromCylindrical(a){this.x=a.radius*_Mathsin(a.theta);this.y=a.y;this.z=a.radius*_Mathcos(a.theta);return this},setFromMatrixPosition:function setFromMatrixPosition(a){a=a.elements;this.x=a[12];this.y=a[13];this.z=a[14];return this},setFromMatrixScale:function setFromMatrixScale(a){var b=this.setFromMatrixColumn(a,0).length(),c=this.setFromMatrixColumn(a,1).length();a=this.setFromMatrixColumn(a,2).length();this.x=b;this.y=c;this.z=a;return this},setFromMatrixColumn:function setFromMatrixColumn(a,b){return this.fromArray(a.elements,4*b)},equals:function equals(a){return a.x===this.x&&a.y===this.y&&a.z===this.z},fromArray:function fromArray(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];this.z=a[b+2];return this},toArray:function toArray(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.x;a[b+1]=this.y;a[b+2]=this.z;return a},fromBufferAttribute:function fromBufferAttribute(a,b,c){void 0!==c&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute().");this.x=a.getX(b);this.y=a.getY(b);this.z=a.getZ(b);return this}});Object.assign(ta.prototype,{isMatrix3:!0,set:function set(a,b,c,d,e,f,g,h,l){var m=this.elements;m[0]=a;m[1]=d;m[2]=g;m[3]=b;m[4]=e;m[5]=h;m[6]=c;m[7]=f;m[8]=l;return this},identity:function identity(){this.set(1,0,0,0,1,0,0,0,1);return this},clone:function clone(){return new this.constructor().fromArray(this.elements)},copy:function copy(a){var b=this.elements;a=a.elements;b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];return this},setFromMatrix4:function setFromMatrix4(a){a=a.elements;this.set(a[0],a[4],a[8],a[1],a[5],a[9],a[2],a[6],a[10]);return this},applyToBufferAttribute:function(){var a=new p;return function(b){for(var c=0,d=b.count;c<d;c++){a.x=b.getX(c),a.y=b.getY(c),a.z=b.getZ(c),a.applyMatrix3(this),b.setXYZ(c,a.x,a.y,a.z)}return b}}(),multiply:function multiply(a){return this.multiplyMatrices(this,a)},premultiply:function premultiply(a){return this.multiplyMatrices(a,this)},multiplyMatrices:function multiplyMatrices(a,b){var c=a.elements,d=b.elements;b=this.elements;a=c[0];var e=c[3],f=c[6],g=c[1],h=c[4],l=c[7],m=c[2],k=c[5];c=c[8];var n=d[0],r=d[3],q=d[6],p=d[1],u=d[4],z=d[7],x=d[2],w=d[5];d=d[8];b[0]=a*n+e*p+f*x;b[3]=a*r+e*u+f*w;b[6]=a*q+e*z+f*d;b[1]=g*n+h*p+l*x;b[4]=g*r+h*u+l*w;b[7]=g*q+h*z+l*d;b[2]=m*n+k*p+c*x;b[5]=m*r+k*u+c*w;b[8]=m*q+k*z+c*d;return this},multiplyScalar:function multiplyScalar(a){var b=this.elements;b[0]*=a;b[3]*=a;b[6]*=a;b[1]*=a;b[4]*=a;b[7]*=a;b[2]*=a;b[5]*=a;b[8]*=a;return this},determinant:function determinant(){var a=this.elements,b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],l=a[7];a=a[8];return b*f*a-b*g*l-c*e*a+c*g*h+d*e*l-d*f*h},getInverse:function getInverse(a,b){a&&a.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var c=a.elements;a=this.elements;var d=c[0],e=c[1],f=c[2],g=c[3],h=c[4],l=c[5],m=c[6],k=c[7];c=c[8];var n=c*h-l*k,r=l*m-c*g,q=k*g-h*m,p=d*n+e*r+f*q;if(0===p){if(!0===b)throw Error("THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0");console.warn("THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0");return this.identity()}b=1/p;a[0]=n*b;a[1]=(f*k-c*e)*b;a[2]=(l*e-f*h)*b;a[3]=r*b;a[4]=(c*d-f*m)*b;a[5]=(f*g-l*d)*b;a[6]=q*b;a[7]=(e*m-k*d)*b;a[8]=(h*d-e*g)*b;return this},transpose:function transpose(){var a=this.elements,b=a[1];a[1]=a[3];a[3]=b;b=a[2];a[2]=a[6];a[6]=b;b=a[5];a[5]=a[7];a[7]=b;return this},getNormalMatrix:function getNormalMatrix(a){return this.setFromMatrix4(a).getInverse(this).transpose()},transposeIntoArray:function transposeIntoArray(a){var b=this.elements;a[0]=b[0];a[1]=b[3];a[2]=b[6];a[3]=b[1];a[4]=b[4];a[5]=b[7];a[6]=b[2];a[7]=b[5];a[8]=b[8];return this},setUvTransform:function setUvTransform(a,b,c,d,e,f,g){var h=_Mathcos(e);e=_Mathsin(e);this.set(c*h,c*e,-c*(h*f+e*g)+f+a,-d*e,d*h,-d*(-e*f+h*g)+g+b,0,0,1)},scale:function scale(a,b){var c=this.elements;c[0]*=a;c[3]*=a;c[6]*=a;c[1]*=b;c[4]*=b;c[7]*=b;return this},rotate:function rotate(a){var b=_Mathcos(a);a=_Mathsin(a);var c=this.elements,d=c[0],e=c[3],f=c[6],g=c[1],h=c[4],l=c[7];c[0]=b*d+a*g;c[3]=b*e+a*h;c[6]=b*f+a*l;c[1]=-a*d+b*g;c[4]=-a*e+b*h;c[7]=-a*f+b*l;return this},translate:function translate(a,b){var c=this.elements;c[0]+=a*c[2];c[3]+=a*c[5];c[6]+=a*c[8];c[1]+=b*c[2];c[4]+=b*c[5];c[7]+=b*c[8];return this},equals:function equals(a){var b=this.elements;a=a.elements;for(var c=0;9>c;c++){if(b[c]!==a[c])return!1}return!0},fromArray:function fromArray(a,b){void 0===b&&(b=0);for(var c=0;9>c;c++){this.elements[c]=a[c+b]}return this},toArray:function toArray(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);var c=this.elements;a[b]=c[0];a[b+1]=c[1];a[b+2]=c[2];a[b+3]=c[3];a[b+4]=c[4];a[b+5]=c[5];a[b+6]=c[6];a[b+7]=c[7];a[b+8]=c[8];return a}});var Df=0;ca.DEFAULT_IMAGE=void 0;ca.DEFAULT_MAPPING=300;ca.prototype=Object.assign(Object.create(ha.prototype),{constructor:ca,isTexture:!0,updateMatrix:function updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function clone(){return new this.constructor().copy(this)},copy:function copy(a){this.name=a.name;this.image=a.image;this.mipmaps=a.mipmaps.slice(0);this.mapping=a.mapping;this.wrapS=a.wrapS;this.wrapT=a.wrapT;this.magFilter=a.magFilter;this.minFilter=a.minFilter;this.anisotropy=a.anisotropy;this.format=a.format;this.type=a.type;this.offset.copy(a.offset);this.repeat.copy(a.repeat);this.center.copy(a.center);this.rotation=a.rotation;this.matrixAutoUpdate=a.matrixAutoUpdate;this.matrix.copy(a.matrix);this.generateMipmaps=a.generateMipmaps;this.premultiplyAlpha=a.premultiplyAlpha;this.flipY=a.flipY;this.unpackAlignment=a.unpackAlignment;this.encoding=a.encoding;return this},toJSON:function toJSON(a){var b=void 0===a||"string"===typeof a;if(!b&&void 0!==a.textures[this.uuid])return a.textures[this.uuid];var c={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var d=this.image;void 0===d.uuid&&(d.uuid=P.generateUUID());if(!b&&void 0===a.images[d.uuid]){var e=a.images,f=d.uuid,g=d.uuid;if(babelHelpers.instanceof(d,HTMLCanvasElement))var h=d;else{h=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");h.width=d.width;h.height=d.height;var l=h.getContext("2d");babelHelpers.instanceof(d,ImageData)?l.putImageData(d,0,0):l.drawImage(d,0,0,d.width,d.height)}h=2048<h.width||2048<h.height?h.toDataURL("image/jpeg",.6):h.toDataURL("image/png");e[f]={uuid:g,url:h}}c.image=d.uuid}b||(a.textures[this.uuid]=c);return c},dispose:function dispose(){this.dispatchEvent({type:"dispose"})},transformUv:function transformUv(a){if(300===this.mapping){a.applyMatrix3(this.matrix);if(0>a.x||1<a.x)switch(this.wrapS){case 1E3:a.x-=_Mathfloor(a.x);break;case 1001:a.x=0>a.x?0:1;break;case 1002:a.x=1===_Mathabs(_Mathfloor(a.x)%2)?_Mathceil(a.x)-a.x:a.x-_Mathfloor(a.x);}if(0>a.y||1<a.y)switch(this.wrapT){case 1E3:a.y-=_Mathfloor(a.y);break;case 1001:a.y=0>a.y?0:1;break;case 1002:a.y=1===_Mathabs(_Mathfloor(a.y)%2)?_Mathceil(a.y)-a.y:a.y-_Mathfloor(a.y);}this.flipY&&(a.y=1-a.y)}}});Object.defineProperty(ca.prototype,"needsUpdate",{set:function set(a){!0===a&&this.version++}});Object.assign(U.prototype,{isVector4:!0,set:function set(a,b,c,d){this.x=a;this.y=b;this.z=c;this.w=d;return this},setScalar:function setScalar(a){this.w=this.z=this.y=this.x=a;return this},setX:function setX(a){this.x=a;return this},setY:function setY(a){this.y=a;return this},setZ:function setZ(a){this.z=a;return this},setW:function setW(a){this.w=a;return this},setComponent:function setComponent(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;case 3:this.w=b;break;default:throw Error("index is out of range: "+a);}return this},getComponent:function getComponent(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+a);}},clone:function clone(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function copy(a){this.x=a.x;this.y=a.y;this.z=a.z;this.w=void 0!==a.w?a.w:1;return this},add:function add(a,b){if(void 0!==b)return console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;this.z+=a.z;this.w+=a.w;return this},addScalar:function addScalar(a){this.x+=a;this.y+=a;this.z+=a;this.w+=a;return this},addVectors:function addVectors(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;this.w=a.w+b.w;return this},addScaledVector:function addScaledVector(a,b){this.x+=a.x*b;this.y+=a.y*b;this.z+=a.z*b;this.w+=a.w*b;return this},sub:function sub(a,b){if(void 0!==b)return console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,b);this.x-=a.x;this.y-=a.y;this.z-=a.z;this.w-=a.w;return this},subScalar:function subScalar(a){this.x-=a;this.y-=a;this.z-=a;this.w-=a;return this},subVectors:function subVectors(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;this.w=a.w-b.w;return this},multiplyScalar:function multiplyScalar(a){this.x*=a;this.y*=a;this.z*=a;this.w*=a;return this},applyMatrix4:function applyMatrix4(a){var b=this.x,c=this.y,d=this.z,e=this.w;a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*d+a[12]*e;this.y=a[1]*b+a[5]*c+a[9]*d+a[13]*e;this.z=a[2]*b+a[6]*c+a[10]*d+a[14]*e;this.w=a[3]*b+a[7]*c+a[11]*d+a[15]*e;return this},divideScalar:function divideScalar(a){return this.multiplyScalar(1/a)},setAxisAngleFromQuaternion:function setAxisAngleFromQuaternion(a){this.w=2*_Mathacos(a.w);var b=_Mathsqrt(1-a.w*a.w);1E-4>b?(this.x=1,this.z=this.y=0):(this.x=a.x/b,this.y=a.y/b,this.z=a.z/b);return this},setAxisAngleFromRotationMatrix:function setAxisAngleFromRotationMatrix(a){a=a.elements;var b=a[0],c=a[4],d=a[8],e=a[1],f=a[5],g=a[9],h=a[2],l=a[6],m=a[10];if(.01>_Mathabs(c-e)&&.01>_Mathabs(d-h)&&.01>_Mathabs(g-l)){if(.1>_Mathabs(c+e)&&.1>_Mathabs(d+h)&&.1>_Mathabs(g+l)&&.1>_Mathabs(b+f+m-3))return this.set(1,0,0,0),this;a=_MathPI;b=(b+1)/2;f=(f+1)/2;m=(m+1)/2;c=(c+e)/4;d=(d+h)/4;g=(g+l)/4;b>f&&b>m?.01>b?(l=0,c=h=.707106781):(l=_Mathsqrt(b),h=c/l,c=d/l):f>m?.01>f?(l=.707106781,h=0,c=.707106781):(h=_Mathsqrt(f),l=c/h,c=g/h):.01>m?(h=l=.707106781,c=0):(c=_Mathsqrt(m),l=d/c,h=g/c);this.set(l,h,c,a);return this}a=_Mathsqrt((l-g)*(l-g)+(d-h)*(d-h)+(e-c)*(e-c));.001>_Mathabs(a)&&(a=1);this.x=(l-g)/a;this.y=(d-h)/a;this.z=(e-c)/a;this.w=_Mathacos((b+f+m-1)/2);return this},min:function min(a){this.x=_Mathmin(this.x,a.x);this.y=_Mathmin(this.y,a.y);this.z=_Mathmin(this.z,a.z);this.w=_Mathmin(this.w,a.w);return this},max:function max(a){this.x=_Mathmax(this.x,a.x);this.y=_Mathmax(this.y,a.y);this.z=_Mathmax(this.z,a.z);this.w=_Mathmax(this.w,a.w);return this},clamp:function clamp(a,b){this.x=_Mathmax(a.x,_Mathmin(b.x,this.x));this.y=_Mathmax(a.y,_Mathmin(b.y,this.y));this.z=_Mathmax(a.z,_Mathmin(b.z,this.z));this.w=_Mathmax(a.w,_Mathmin(b.w,this.w));return this},clampScalar:function(){var a,b;return function(c,d){void 0===a&&(a=new U,b=new U);a.set(c,c,c,c);b.set(d,d,d,d);return this.clamp(a,b)}}(),clampLength:function clampLength(a,b){var c=this.length();return this.divideScalar(c||1).multiplyScalar(_Mathmax(a,_Mathmin(b,c)))},floor:function floor(){this.x=_Mathfloor(this.x);this.y=_Mathfloor(this.y);this.z=_Mathfloor(this.z);this.w=_Mathfloor(this.w);return this},ceil:function ceil(){this.x=_Mathceil(this.x);this.y=_Mathceil(this.y);this.z=_Mathceil(this.z);this.w=_Mathceil(this.w);return this},round:function round(){this.x=_Mathround(this.x);this.y=_Mathround(this.y);this.z=_Mathround(this.z);this.w=_Mathround(this.w);return this},roundToZero:function roundToZero(){this.x=0>this.x?_Mathceil(this.x):_Mathfloor(this.x);this.y=0>this.y?_Mathceil(this.y):_Mathfloor(this.y);this.z=0>this.z?_Mathceil(this.z):_Mathfloor(this.z);this.w=0>this.w?_Mathceil(this.w):_Mathfloor(this.w);return this},negate:function negate(){this.x=-this.x;this.y=-this.y;this.z=-this.z;this.w=-this.w;return this},dot:function dot(a){return this.x*a.x+this.y*a.y+this.z*a.z+this.w*a.w},lengthSq:function lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function length(){return _Mathsqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function manhattanLength(){return _Mathabs(this.x)+_Mathabs(this.y)+_Mathabs(this.z)+_Mathabs(this.w)},normalize:function normalize(){return this.divideScalar(this.length()||1)},setLength:function setLength(a){return this.normalize().multiplyScalar(a)},lerp:function lerp(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-this.z)*b;this.w+=(a.w-this.w)*b;return this},lerpVectors:function lerpVectors(a,b,c){return this.subVectors(b,a).multiplyScalar(c).add(a)},equals:function equals(a){return a.x===this.x&&a.y===this.y&&a.z===this.z&&a.w===this.w},fromArray:function fromArray(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];this.z=a[b+2];this.w=a[b+3];return this},toArray:function toArray(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.x;a[b+1]=this.y;a[b+2]=this.z;a[b+3]=this.w;return a},fromBufferAttribute:function fromBufferAttribute(a,b,c){void 0!==c&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute().");this.x=a.getX(b);this.y=a.getY(b);this.z=a.getZ(b);this.w=a.getW(b);return this}});kb.prototype=Object.assign(Object.create(ha.prototype),{constructor:kb,isWebGLRenderTarget:!0,setSize:function setSize(a,b){if(this.width!==a||this.height!==b)this.width=a,this.height=b,this.dispose();this.viewport.set(0,0,a,b);this.scissor.set(0,0,a,b)},clone:function clone(){return new this.constructor().copy(this)},copy:function copy(a){this.width=a.width;this.height=a.height;this.viewport.copy(a.viewport);this.texture=a.texture.clone();this.depthBuffer=a.depthBuffer;this.stencilBuffer=a.stencilBuffer;this.depthTexture=a.depthTexture;return this},dispose:function dispose(){this.dispatchEvent({type:"dispose"})}});Lb.prototype=Object.create(kb.prototype);Lb.prototype.constructor=Lb;Lb.prototype.isWebGLRenderTargetCube=!0;lb.prototype=Object.create(ca.prototype);lb.prototype.constructor=lb;lb.prototype.isDataTexture=!0;Object.assign(Wa.prototype,{isBox3:!0,set:function set(a,b){this.min.copy(a);this.max.copy(b);return this},setFromArray:function setFromArray(a){for(var b=1/0,c=1/0,d=1/0,e=-Infinity,f=-Infinity,g=-Infinity,h=0,l=a.length;h<l;h+=3){var m=a[h],k=a[h+1],n=a[h+2];m<b&&(b=m);k<c&&(c=k);n<d&&(d=n);m>e&&(e=m);k>f&&(f=k);n>g&&(g=n)}this.min.set(b,c,d);this.max.set(e,f,g);return this},setFromBufferAttribute:function setFromBufferAttribute(a){for(var b=1/0,c=1/0,d=1/0,e=-Infinity,f=-Infinity,g=-Infinity,h=0,l=a.count;h<l;h++){var m=a.getX(h),k=a.getY(h),n=a.getZ(h);m<b&&(b=m);k<c&&(c=k);n<d&&(d=n);m>e&&(e=m);k>f&&(f=k);n>g&&(g=n)}this.min.set(b,c,d);this.max.set(e,f,g);return this},setFromPoints:function setFromPoints(a){this.makeEmpty();for(var b=0,c=a.length;b<c;b++){this.expandByPoint(a[b])}return this},setFromCenterAndSize:function(){var a=new p;return function(b,c){c=a.copy(c).multiplyScalar(.5);this.min.copy(b).sub(c);this.max.copy(b).add(c);return this}}(),setFromObject:function setFromObject(a){this.makeEmpty();return this.expandByObject(a)},clone:function clone(){return new this.constructor().copy(this)},copy:function copy(a){this.min.copy(a.min);this.max.copy(a.max);return this},makeEmpty:function makeEmpty(){this.min.x=this.min.y=this.min.z=1/0;this.max.x=this.max.y=this.max.z=-Infinity;return this},isEmpty:function isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function getCenter(a){void 0===a&&(console.warn("THREE.Box3: .getCenter() target is now required"),a=new p);return this.isEmpty()?a.set(0,0,0):a.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function getSize(a){void 0===a&&(console.warn("THREE.Box3: .getSize() target is now required"),a=new p);return this.isEmpty()?a.set(0,0,0):a.subVectors(this.max,this.min)},expandByPoint:function expandByPoint(a){this.min.min(a);this.max.max(a);return this},expandByVector:function expandByVector(a){this.min.sub(a);this.max.add(a);return this},expandByScalar:function expandByScalar(a){this.min.addScalar(-a);this.max.addScalar(a);return this},expandByObject:function(){function a(a){var f=a.geometry;if(void 0!==f)if(f.isGeometry)for(f=f.vertices,c=0,d=f.length;c<d;c++){e.copy(f[c]),e.applyMatrix4(a.matrixWorld),b.expandByPoint(e)}else if(f.isBufferGeometry&&(f=f.attributes.position,void 0!==f))for(c=0,d=f.count;c<d;c++){e.fromBufferAttribute(f,c).applyMatrix4(a.matrixWorld),b.expandByPoint(e)}}var b,c,d,e=new p;return function(c){b=this;c.updateMatrixWorld(!0);c.traverse(a);return this}}(),containsPoint:function containsPoint(a){return a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y||a.z<this.min.z||a.z>this.max.z?!1:!0},containsBox:function containsBox(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y&&this.min.z<=a.min.z&&a.max.z<=this.max.z},getParameter:function getParameter(a,b){void 0===b&&(console.warn("THREE.Box3: .getParameter() target is now required"),b=new p);return b.set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y),(a.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function intersectsBox(a){return a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y||a.max.z<this.min.z||a.min.z>this.max.z?!1:!0},intersectsSphere:function(){var a=new p;return function(b){this.clampPoint(b.center,a);return a.distanceToSquared(b.center)<=b.radius*b.radius}}(),intersectsPlane:function intersectsPlane(a){if(0<a.normal.x){var b=a.normal.x*this.min.x,c=a.normal.x*this.max.x}else b=a.normal.x*this.max.x,c=a.normal.x*this.min.x;0<a.normal.y?(b+=a.normal.y*this.min.y,c+=a.normal.y*this.max.y):(b+=a.normal.y*this.max.y,c+=a.normal.y*this.min.y);0<a.normal.z?(b+=a.normal.z*this.min.z,c+=a.normal.z*this.max.z):(b+=a.normal.z*this.max.z,c+=a.normal.z*this.min.z);return b<=a.constant&&c>=a.constant},intersectsTriangle:function(){function a(a){var e,f=0;for(e=a.length-3;f<=e;f+=3){h.fromArray(a,f);var g=m.x*_Mathabs(h.x)+m.y*_Mathabs(h.y)+m.z*_Mathabs(h.z),l=b.dot(h),k=c.dot(h),n=d.dot(h);if(_Mathmax(-_Mathmax(l,k,n),_Mathmin(l,k,n))>g)return!1}return!0}var b=new p,c=new p,d=new p,e=new p,f=new p,g=new p,h=new p,l=new p,m=new p,k=new p;return function(h){if(this.isEmpty())return!1;this.getCenter(l);m.subVectors(this.max,l);b.subVectors(h.a,l);c.subVectors(h.b,l);d.subVectors(h.c,l);e.subVectors(c,b);f.subVectors(d,c);g.subVectors(b,d);h=[0,-e.z,e.y,0,-f.z,f.y,0,-g.z,g.y,e.z,0,-e.x,f.z,0,-f.x,g.z,0,-g.x,-e.y,e.x,0,-f.y,f.x,0,-g.y,g.x,0];if(!a(h))return!1;h=[1,0,0,0,1,0,0,0,1];if(!a(h))return!1;k.crossVectors(e,f);h=[k.x,k.y,k.z];return a(h)}}(),clampPoint:function clampPoint(a,b){void 0===b&&(console.warn("THREE.Box3: .clampPoint() target is now required"),b=new p);return b.copy(a).clamp(this.min,this.max)},distanceToPoint:function(){var a=new p;return function(b){return a.copy(b).clamp(this.min,this.max).sub(b).length()}}(),getBoundingSphere:function(){var a=new p;return function(b){void 0===b&&(console.warn("THREE.Box3: .getBoundingSphere() target is now required"),b=new Ga);this.getCenter(b.center);b.radius=.5*this.getSize(a).length();return b}}(),intersect:function intersect(a){this.min.max(a.min);this.max.min(a.max);this.isEmpty()&&this.makeEmpty();return this},union:function union(a){this.min.min(a.min);this.max.max(a.max);return this},applyMatrix4:function applyMatrix4(a){if(this.isEmpty())return this;a=a.elements;var b=a[0]*this.min.x,c=a[1]*this.min.x,d=a[2]*this.min.x,e=a[0]*this.max.x,f=a[1]*this.max.x,g=a[2]*this.max.x,h=a[4]*this.min.y,l=a[5]*this.min.y,m=a[6]*this.min.y,k=a[4]*this.max.y,n=a[5]*this.max.y,r=a[6]*this.max.y,q=a[8]*this.min.z,p=a[9]*this.min.z,u=a[10]*this.min.z,z=a[8]*this.max.z,x=a[9]*this.max.z,w=a[10]*this.max.z;this.min.x=_Mathmin(b,e)+_Mathmin(h,k)+_Mathmin(q,z)+a[12];this.min.y=_Mathmin(c,f)+_Mathmin(l,n)+_Mathmin(p,x)+a[13];this.min.z=_Mathmin(d,g)+_Mathmin(m,r)+_Mathmin(u,w)+a[14];this.max.x=_Mathmax(b,e)+_Mathmax(h,k)+_Mathmax(q,z)+a[12];this.max.y=_Mathmax(c,f)+_Mathmax(l,n)+_Mathmax(p,x)+a[13];this.max.z=_Mathmax(d,g)+_Mathmax(m,r)+_Mathmax(u,w)+a[14];return this},translate:function translate(a){this.min.add(a);this.max.add(a);return this},equals:function equals(a){return a.min.equals(this.min)&&a.max.equals(this.max)}});Object.assign(Ga.prototype,{set:function set(a,b){this.center.copy(a);this.radius=b;return this},setFromPoints:function(){var a=new Wa;return function(b,c){var d=this.center;void 0!==c?d.copy(c):a.setFromPoints(b).getCenter(d);for(var e=c=0,f=b.length;e<f;e++){c=_Mathmax(c,d.distanceToSquared(b[e]))}this.radius=_Mathsqrt(c);return this}}(),clone:function clone(){return new this.constructor().copy(this)},copy:function copy(a){this.center.copy(a.center);this.radius=a.radius;return this},empty:function empty(){return 0>=this.radius},containsPoint:function containsPoint(a){return a.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function distanceToPoint(a){return a.distanceTo(this.center)-this.radius},intersectsSphere:function intersectsSphere(a){var b=this.radius+a.radius;return a.center.distanceToSquared(this.center)<=b*b},intersectsBox:function intersectsBox(a){return a.intersectsSphere(this)},intersectsPlane:function intersectsPlane(a){return _Mathabs(a.distanceToPoint(this.center))<=this.radius},clampPoint:function clampPoint(a,b){var c=this.center.distanceToSquared(a);void 0===b&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),b=new p);b.copy(a);c>this.radius*this.radius&&(b.sub(this.center).normalize(),b.multiplyScalar(this.radius).add(this.center));return b},getBoundingBox:function getBoundingBox(a){void 0===a&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),a=new Wa);a.set(this.center,this.center);a.expandByScalar(this.radius);return a},applyMatrix4:function applyMatrix4(a){this.center.applyMatrix4(a);this.radius*=a.getMaxScaleOnAxis();return this},translate:function translate(a){this.center.add(a);return this},equals:function equals(a){return a.center.equals(this.center)&&a.radius===this.radius}});Object.assign(Ha.prototype,{set:function set(a,b){this.normal.copy(a);this.constant=b;return this},setComponents:function setComponents(a,b,c,d){this.normal.set(a,b,c);this.constant=d;return this},setFromNormalAndCoplanarPoint:function setFromNormalAndCoplanarPoint(a,b){this.normal.copy(a);this.constant=-b.dot(this.normal);return this},setFromCoplanarPoints:function(){var a=new p,b=new p;return function(c,d,e){d=a.subVectors(e,d).cross(b.subVectors(c,d)).normalize();this.setFromNormalAndCoplanarPoint(d,c);return this}}(),clone:function clone(){return new this.constructor().copy(this)},copy:function copy(a){this.normal.copy(a.normal);this.constant=a.constant;return this},normalize:function normalize(){var a=1/this.normal.length();this.normal.multiplyScalar(a);this.constant*=a;return this},negate:function negate(){this.constant*=-1;this.normal.negate();return this},distanceToPoint:function distanceToPoint(a){return this.normal.dot(a)+this.constant},distanceToSphere:function distanceToSphere(a){return this.distanceToPoint(a.center)-a.radius},projectPoint:function projectPoint(a,b){void 0===b&&(console.warn("THREE.Plane: .projectPoint() target is now required"),b=new p);return b.copy(this.normal).multiplyScalar(-this.distanceToPoint(a)).add(a)},intersectLine:function(){var a=new p;return function(b,c){void 0===c&&(console.warn("THREE.Plane: .intersectLine() target is now required"),c=new p);var d=b.delta(a),e=this.normal.dot(d);if(0===e){if(0===this.distanceToPoint(b.start))return c.copy(b.start)}else if(e=-(b.start.dot(this.normal)+this.constant)/e,!(0>e||1<e))return c.copy(d).multiplyScalar(e).add(b.start)}}(),intersectsLine:function intersectsLine(a){var b=this.distanceToPoint(a.start);a=this.distanceToPoint(a.end);return 0>b&&0<a||0>a&&0<b},intersectsBox:function intersectsBox(a){return a.intersectsPlane(this)},intersectsSphere:function intersectsSphere(a){return a.intersectsPlane(this)},coplanarPoint:function coplanarPoint(a){void 0===a&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),a=new p);return a.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var a=new p,b=new ta;return function(c,d){d=d||b.getNormalMatrix(c);c=this.coplanarPoint(a).applyMatrix4(c);d=this.normal.applyMatrix3(d).normalize();this.constant=-c.dot(d);return this}}(),translate:function translate(a){this.constant-=a.dot(this.normal);return this},equals:function equals(a){return a.normal.equals(this.normal)&&a.constant===this.constant}});Object.assign(qd.prototype,{set:function set(a,b,c,d,e,f){var g=this.planes;g[0].copy(a);g[1].copy(b);g[2].copy(c);g[3].copy(d);g[4].copy(e);g[5].copy(f);return this},clone:function clone(){return new this.constructor().copy(this)},copy:function copy(a){for(var b=this.planes,c=0;6>c;c++){b[c].copy(a.planes[c])}return this},setFromMatrix:function setFromMatrix(a){var b=this.planes,c=a.elements;a=c[0];var d=c[1],e=c[2],f=c[3],g=c[4],h=c[5],l=c[6],m=c[7],k=c[8],n=c[9],r=c[10],q=c[11],p=c[12],u=c[13],z=c[14];c=c[15];b[0].setComponents(f-a,m-g,q-k,c-p).normalize();b[1].setComponents(f+a,m+g,q+k,c+p).normalize();b[2].setComponents(f+d,m+h,q+n,c+u).normalize();b[3].setComponents(f-d,m-h,q-n,c-u).normalize();b[4].setComponents(f-e,m-l,q-r,c-z).normalize();b[5].setComponents(f+e,m+l,q+r,c+z).normalize();return this},intersectsObject:function(){var a=new Ga;return function(b){var c=b.geometry;null===c.boundingSphere&&c.computeBoundingSphere();a.copy(c.boundingSphere).applyMatrix4(b.matrixWorld);return this.intersectsSphere(a)}}(),intersectsSprite:function(){var a=new Ga;return function(b){a.center.set(0,0,0);a.radius=.7071067811865476;a.applyMatrix4(b.matrixWorld);return this.intersectsSphere(a)}}(),intersectsSphere:function intersectsSphere(a){var b=this.planes,c=a.center;a=-a.radius;for(var d=0;6>d;d++){if(b[d].distanceToPoint(c)<a)return!1}return!0},intersectsBox:function(){var a=new p,b=new p;return function(c){for(var d=this.planes,e=0,f;6>e;e++){f=d[e];a.x=0<f.normal.x?c.min.x:c.max.x;b.x=0<f.normal.x?c.max.x:c.min.x;a.y=0<f.normal.y?c.min.y:c.max.y;b.y=0<f.normal.y?c.max.y:c.min.y;a.z=0<f.normal.z?c.min.z:c.max.z;b.z=0<f.normal.z?c.max.z:c.min.z;var g=f.distanceToPoint(a);f=f.distanceToPoint(b);if(0>g&&0>f)return!1}return!0}}(),containsPoint:function containsPoint(a){for(var b=this.planes,c=0;6>c;c++){if(0>b[c].distanceToPoint(a))return!1}return!0}});var W={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"\nvec3 transformed = vec3( position );\n",beginnormal_vertex:"\nvec3 objectNormal = vec3( normal );\n",bsdfs:"float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t}\n\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif\n",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\n",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n",defaultnormal_vertex:"vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n",encodings_fragment:"  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM            = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat D      = max( maxRange / maxRGB, 1.0 );\n\tD            = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n\tXp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract(Le);\n\tvResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n\treturn vec4( max(vRGB, 0.0), 1.0 );\n}\n",envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n",envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n",fog_vertex:"\n#ifdef USE_FOG\nfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n  varying float fogDepth;\n#endif\n",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif\n",gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif\n",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n",lights_pars_begin:"uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n",lights_pars_maps:"#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos - halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos + halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos + halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos - halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearCoatRadiance = vec3( 0.0 );\n#endif\n",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), maxMipLevel );\n\t#ifndef STANDARD\n\t\tclearCoatRadiance += getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), maxMipLevel );\n\t#endif\n#endif\n",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\tgl_Position.z *= gl_Position.w;\n\t#endif\n#endif\n",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n",map_particle_fragment:"#ifdef USE_MAP\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform mat3 uvTransform;\n\tuniform sampler2D map;\n#endif\n",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif\n",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n#endif\n",normal_fragment_maps:"#ifdef USE_NORMALMAP\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\t\tmat3 tsn = mat3( S, T, N );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy *= normalScale;\n\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif\n",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",project_vertex:"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;\n",dithering_fragment:"#if defined( DITHERING )\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif\n",dithering_pars_fragment:"#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif\n",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif\n",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif\n",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",tonemapping_pars_fragment:"#ifndef saturate\n\t#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\n",uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif\n",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n",cube_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}\n",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}\n",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}\n",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",equirect_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}\n",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}\n",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}\n",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}\n",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <fog_fragment>\n}\n",shadow_vert:"#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n"},Ca={merge:function merge(a){for(var b={},c=0;c<a.length;c++){var d=this.clone(a[c]),e;for(e in d){b[e]=d[e]}}return b},clone:function clone(a){var b={},c;for(c in a){b[c]={};for(var d in a[c]){var e=a[c][d];e&&(e.isColor||e.isMatrix3||e.isMatrix4||e.isVector2||e.isVector3||e.isVector4||e.isTexture)?b[c][d]=e.clone():Array.isArray(e)?b[c][d]=e.slice():b[c][d]=e}}return b}},Rg={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Object.assign(K.prototype,{isColor:!0,r:1,g:1,b:1,set:function set(a){a&&a.isColor?this.copy(a):"number"===typeof a?this.setHex(a):"string"===typeof a&&this.setStyle(a);return this},setScalar:function setScalar(a){this.b=this.g=this.r=a;return this},setHex:function setHex(a){a=_Mathfloor(a);this.r=(255&a>>16)/255;this.g=(255&a>>8)/255;this.b=(255&a)/255;return this},setRGB:function setRGB(a,b,c){this.r=a;this.g=b;this.b=c;return this},setHSL:function(){function a(a,c,d){0>d&&(d+=1);1<d&&--d;return d<1/6?a+6*(c-a)*d:.5>d?c:d<2/3?a+6*(c-a)*(2/3-d):a}return function(b,c,d){b=P.euclideanModulo(b,1);c=P.clamp(c,0,1);d=P.clamp(d,0,1);0===c?this.r=this.g=this.b=d:(c=.5>=d?d*(1+c):d+c-d*c,d=2*d-c,this.r=a(d,c,b+1/3),this.g=a(d,c,b),this.b=a(d,c,b-1/3));return this}}(),setStyle:function setStyle(a){function b(b){void 0!==b&&1>parseFloat(b)&&console.warn("THREE.Color: Alpha component of "+a+" will be ignored.")}var c;if(c=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(a)){var d=c[2];switch(c[1]){case"rgb":case"rgba":if(c=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(d))return this.r=_Mathmin(255,parseInt(c[1],10))/255,this.g=_Mathmin(255,parseInt(c[2],10))/255,this.b=_Mathmin(255,parseInt(c[3],10))/255,b(c[5]),this;if(c=/^(\d+)%\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(d))return this.r=_Mathmin(100,parseInt(c[1],10))/100,this.g=_Mathmin(100,parseInt(c[2],10))/100,this.b=_Mathmin(100,parseInt(c[3],10))/100,b(c[5]),this;break;case"hsl":case"hsla":if(c=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(d)){d=parseFloat(c[1])/360;var e=parseInt(c[2],10)/100,f=parseInt(c[3],10)/100;b(c[5]);return this.setHSL(d,e,f)}}}else if(c=/^#([A-Fa-f0-9]+)$/.exec(a)){c=c[1];d=c.length;if(3===d)return this.r=parseInt(c.charAt(0)+c.charAt(0),16)/255,this.g=parseInt(c.charAt(1)+c.charAt(1),16)/255,this.b=parseInt(c.charAt(2)+c.charAt(2),16)/255,this;if(6===d)return this.r=parseInt(c.charAt(0)+c.charAt(1),16)/255,this.g=parseInt(c.charAt(2)+c.charAt(3),16)/255,this.b=parseInt(c.charAt(4)+c.charAt(5),16)/255,this}a&&0<a.length&&(c=Rg[a],void 0!==c?this.setHex(c):console.warn("THREE.Color: Unknown color "+a));return this},clone:function clone(){return new this.constructor(this.r,this.g,this.b)},copy:function copy(a){this.r=a.r;this.g=a.g;this.b=a.b;return this},copyGammaToLinear:function copyGammaToLinear(a,b){void 0===b&&(b=2);this.r=_Mathpow(a.r,b);this.g=_Mathpow(a.g,b);this.b=_Mathpow(a.b,b);return this},copyLinearToGamma:function copyLinearToGamma(a,b){void 0===b&&(b=2);b=0<b?1/b:1;this.r=_Mathpow(a.r,b);this.g=_Mathpow(a.g,b);this.b=_Mathpow(a.b,b);return this},convertGammaToLinear:function convertGammaToLinear(a){this.copyGammaToLinear(this,a);return this},convertLinearToGamma:function convertLinearToGamma(a){this.copyLinearToGamma(this,a);return this},getHex:function getHex(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function getHSL(a){void 0===a&&(console.warn("THREE.Color: .getHSL() target is now required"),a={h:0,s:0,l:0});var b=this.r,c=this.g,d=this.b,e=_Mathmax(b,c,d),f=_Mathmin(b,c,d),g,h=(f+e)/2;if(f===e)f=g=0;else{var l=e-f;f=.5>=h?l/(e+f):l/(2-e-f);switch(e){case b:g=(c-d)/l+(c<d?6:0);break;case c:g=(d-b)/l+2;break;case d:g=(b-c)/l+4;}g/=6}a.h=g;a.s=f;a.l=h;return a},getStyle:function getStyle(){return"rgb("+(0|255*this.r)+","+(0|255*this.g)+","+(0|255*this.b)+")"},offsetHSL:function(){var a={};return function(b,c,d){this.getHSL(a);a.h+=b;a.s+=c;a.l+=d;this.setHSL(a.h,a.s,a.l);return this}}(),add:function add(a){this.r+=a.r;this.g+=a.g;this.b+=a.b;return this},addColors:function addColors(a,b){this.r=a.r+b.r;this.g=a.g+b.g;this.b=a.b+b.b;return this},addScalar:function addScalar(a){this.r+=a;this.g+=a;this.b+=a;return this},sub:function sub(a){this.r=_Mathmax(0,this.r-a.r);this.g=_Mathmax(0,this.g-a.g);this.b=_Mathmax(0,this.b-a.b);return this},multiply:function multiply(a){this.r*=a.r;this.g*=a.g;this.b*=a.b;return this},multiplyScalar:function multiplyScalar(a){this.r*=a;this.g*=a;this.b*=a;return this},lerp:function lerp(a,b){this.r+=(a.r-this.r)*b;this.g+=(a.g-this.g)*b;this.b+=(a.b-this.b)*b;return this},equals:function equals(a){return a.r===this.r&&a.g===this.g&&a.b===this.b},fromArray:function fromArray(a,b){void 0===b&&(b=0);this.r=a[b];this.g=a[b+1];this.b=a[b+2];return this},toArray:function toArray(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.r;a[b+1]=this.g;a[b+2]=this.b;return a},toJSON:function toJSON(){return this.getHex()}});var M={common:{diffuse:{value:new K(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new ta},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new y(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2E3},fogColor:{value:new K(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new K(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new ta}}},tb={basic:{uniforms:Ca.merge([M.common,M.specularmap,M.envmap,M.aomap,M.lightmap,M.fog]),vertexShader:W.meshbasic_vert,fragmentShader:W.meshbasic_frag},lambert:{uniforms:Ca.merge([M.common,M.specularmap,M.envmap,M.aomap,M.lightmap,M.emissivemap,M.fog,M.lights,{emissive:{value:new K(0)}}]),vertexShader:W.meshlambert_vert,fragmentShader:W.meshlambert_frag},phong:{uniforms:Ca.merge([M.common,M.specularmap,M.envmap,M.aomap,M.lightmap,M.emissivemap,M.bumpmap,M.normalmap,M.displacementmap,M.gradientmap,M.fog,M.lights,{emissive:{value:new K(0)},specular:{value:new K(1118481)},shininess:{value:30}}]),vertexShader:W.meshphong_vert,fragmentShader:W.meshphong_frag},standard:{uniforms:Ca.merge([M.common,M.envmap,M.aomap,M.lightmap,M.emissivemap,M.bumpmap,M.normalmap,M.displacementmap,M.roughnessmap,M.metalnessmap,M.fog,M.lights,{emissive:{value:new K(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:W.meshphysical_vert,fragmentShader:W.meshphysical_frag},points:{uniforms:Ca.merge([M.points,M.fog]),vertexShader:W.points_vert,fragmentShader:W.points_frag},dashed:{uniforms:Ca.merge([M.common,M.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:W.linedashed_vert,fragmentShader:W.linedashed_frag},depth:{uniforms:Ca.merge([M.common,M.displacementmap]),vertexShader:W.depth_vert,fragmentShader:W.depth_frag},normal:{uniforms:Ca.merge([M.common,M.bumpmap,M.normalmap,M.displacementmap,{opacity:{value:1}}]),vertexShader:W.normal_vert,fragmentShader:W.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:W.cube_vert,fragmentShader:W.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:W.equirect_vert,fragmentShader:W.equirect_frag},distanceRGBA:{uniforms:Ca.merge([M.common,M.displacementmap,{referencePosition:{value:new p},nearDistance:{value:1},farDistance:{value:1E3}}]),vertexShader:W.distanceRGBA_vert,fragmentShader:W.distanceRGBA_frag},shadow:{uniforms:Ca.merge([M.lights,M.fog,{color:{value:new K(0)},opacity:{value:1}}]),vertexShader:W.shadow_vert,fragmentShader:W.shadow_frag}};tb.physical={uniforms:Ca.merge([tb.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:W.meshphysical_vert,fragmentShader:W.meshphysical_frag};mb.RotationOrders="XYZ YZX ZXY XZY YXZ ZYX".split(" ");mb.DefaultOrder="XYZ";Object.defineProperties(mb.prototype,{x:{get:function get(){return this._x},set:function set(a){this._x=a;this.onChangeCallback()}},y:{get:function get(){return this._y},set:function set(a){this._y=a;this.onChangeCallback()}},z:{get:function get(){return this._z},set:function set(a){this._z=a;this.onChangeCallback()}},order:{get:function get(){return this._order},set:function set(a){this._order=a;this.onChangeCallback()}}});Object.assign(mb.prototype,{isEuler:!0,set:function set(a,b,c,d){this._x=a;this._y=b;this._z=c;this._order=d||this._order;this.onChangeCallback();return this},clone:function clone(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function copy(a){this._x=a._x;this._y=a._y;this._z=a._z;this._order=a._order;this.onChangeCallback();return this},setFromRotationMatrix:function setFromRotationMatrix(a,b,c){var _Mathasin=Math.asin,d=P.clamp,e=a.elements;a=e[0];var f=e[4],g=e[8],h=e[1],l=e[5],m=e[9],k=e[2],n=e[6];e=e[10];b=b||this._order;"XYZ"===b?(this._y=_Mathasin(d(g,-1,1)),.99999>_Mathabs(g)?(this._x=_Mathatan(-m,e),this._z=_Mathatan(-f,a)):(this._x=_Mathatan(n,l),this._z=0)):"YXZ"===b?(this._x=_Mathasin(-d(m,-1,1)),.99999>_Mathabs(m)?(this._y=_Mathatan(g,e),this._z=_Mathatan(h,l)):(this._y=_Mathatan(-k,a),this._z=0)):"ZXY"===b?(this._x=_Mathasin(d(n,-1,1)),.99999>_Mathabs(n)?(this._y=_Mathatan(-k,e),this._z=_Mathatan(-f,l)):(this._y=0,this._z=_Mathatan(h,a))):"ZYX"===b?(this._y=_Mathasin(-d(k,-1,1)),.99999>_Mathabs(k)?(this._x=_Mathatan(n,e),this._z=_Mathatan(h,a)):(this._x=0,this._z=_Mathatan(-f,l))):"YZX"===b?(this._z=_Mathasin(d(h,-1,1)),.99999>_Mathabs(h)?(this._x=_Mathatan(-m,l),this._y=_Mathatan(-k,a)):(this._x=0,this._y=_Mathatan(g,e))):"XZY"===b?(this._z=_Mathasin(-d(f,-1,1)),.99999>_Mathabs(f)?(this._x=_Mathatan(n,l),this._y=_Mathatan(g,a)):(this._x=_Mathatan(-m,e),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+b);this._order=b;if(!1!==c)this.onChangeCallback();return this},setFromQuaternion:function(){var a=new F;return function(b,c,d){a.makeRotationFromQuaternion(b);return this.setFromRotationMatrix(a,c,d)}}(),setFromVector3:function setFromVector3(a,b){return this.set(a.x,a.y,a.z,b||this._order)},reorder:function(){var a=new X;return function(b){a.setFromEuler(this);return this.setFromQuaternion(a,b)}}(),equals:function equals(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._order===this._order},fromArray:function fromArray(a){this._x=a[0];this._y=a[1];this._z=a[2];void 0!==a[3]&&(this._order=a[3]);this.onChangeCallback();return this},toArray:function toArray(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this._x;a[b+1]=this._y;a[b+2]=this._z;a[b+3]=this._order;return a},toVector3:function toVector3(a){return a?a.set(this._x,this._y,this._z):new p(this._x,this._y,this._z)},onChange:function onChange(a){this.onChangeCallback=a;return this},onChangeCallback:function onChangeCallback(){}});Object.assign(Ud.prototype,{set:function set(a){this.mask=0|1<<a},enable:function enable(a){this.mask=0|(this.mask|1<<a)},toggle:function toggle(a){this.mask^=0|1<<a},disable:function disable(a){this.mask&=~(0|1<<a)},test:function test(a){return 0!==(this.mask&a.mask)}});var Ff=0;B.DefaultUp=new p(0,1,0);B.DefaultMatrixAutoUpdate=!0;B.prototype=Object.assign(Object.create(ha.prototype),{constructor:B,isObject3D:!0,onBeforeRender:function onBeforeRender(){},onAfterRender:function onAfterRender(){},applyMatrix:function applyMatrix(a){this.matrix.multiplyMatrices(a,this.matrix);this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function applyQuaternion(a){this.quaternion.premultiply(a);return this},setRotationFromAxisAngle:function setRotationFromAxisAngle(a,b){this.quaternion.setFromAxisAngle(a,b)},setRotationFromEuler:function setRotationFromEuler(a){this.quaternion.setFromEuler(a,!0)},setRotationFromMatrix:function setRotationFromMatrix(a){this.quaternion.setFromRotationMatrix(a)},setRotationFromQuaternion:function setRotationFromQuaternion(a){this.quaternion.copy(a)},rotateOnAxis:function(){var a=new X;return function(b,c){a.setFromAxisAngle(b,c);this.quaternion.multiply(a);return this}}(),rotateOnWorldAxis:function(){var a=new X;return function(b,c){a.setFromAxisAngle(b,c);this.quaternion.premultiply(a);return this}}(),rotateX:function(){var a=new p(1,0,0);return function(b){return this.rotateOnAxis(a,b)}}(),rotateY:function(){var a=new p(0,1,0);return function(b){return this.rotateOnAxis(a,b)}}(),rotateZ:function(){var a=new p(0,0,1);return function(b){return this.rotateOnAxis(a,b)}}(),translateOnAxis:function(){var a=new p;return function(b,c){a.copy(b).applyQuaternion(this.quaternion);this.position.add(a.multiplyScalar(c));return this}}(),translateX:function(){var a=new p(1,0,0);return function(b){return this.translateOnAxis(a,b)}}(),translateY:function(){var a=new p(0,1,0);return function(b){return this.translateOnAxis(a,b)}}(),translateZ:function(){var a=new p(0,0,1);return function(b){return this.translateOnAxis(a,b)}}(),localToWorld:function localToWorld(a){return a.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var a=new F;return function(b){return b.applyMatrix4(a.getInverse(this.matrixWorld))}}(),lookAt:function(){var a=new F,b=new p;return function(c,d,e){c.isVector3?b.copy(c):b.set(c,d,e);this.isCamera?a.lookAt(this.position,b,this.up):a.lookAt(b,this.position,this.up);this.quaternion.setFromRotationMatrix(a)}}(),add:function add(a){if(1<arguments.length){for(var b=0;b<arguments.length;b++){this.add(arguments[b])}return this}if(a===this)return console.error("THREE.Object3D.add: object can't be added as a child of itself.",a),this;a&&a.isObject3D?(null!==a.parent&&a.parent.remove(a),a.parent=this,a.dispatchEvent({type:"added"}),this.children.push(a)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",a);return this},remove:function remove(a){if(1<arguments.length){for(var b=0;b<arguments.length;b++){this.remove(arguments[b])}return this}b=this.children.indexOf(a);-1!==b&&(a.parent=null,a.dispatchEvent({type:"removed"}),this.children.splice(b,1));return this},getObjectById:function getObjectById(a){return this.getObjectByProperty("id",a)},getObjectByName:function getObjectByName(a){return this.getObjectByProperty("name",a)},getObjectByProperty:function getObjectByProperty(a,b){if(this[a]===b)return this;for(var c=0,d=this.children.length,e;c<d;c++){e=this.children[c].getObjectByProperty(a,b);if(void 0!==e)return e}},getWorldPosition:function getWorldPosition(a){void 0===a&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),a=new p);this.updateMatrixWorld(!0);return a.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var a=new p,b=new p;return function(c){void 0===c&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),c=new X);this.updateMatrixWorld(!0);this.matrixWorld.decompose(a,c,b);return c}}(),getWorldScale:function(){var a=new p,b=new X;return function(c){void 0===c&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),c=new p);this.updateMatrixWorld(!0);this.matrixWorld.decompose(a,b,c);return c}}(),getWorldDirection:function(){var a=new X;return function(b){void 0===b&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),b=new p);this.getWorldQuaternion(a);return b.set(0,0,1).applyQuaternion(a)}}(),raycast:function raycast(){},traverse:function traverse(a){a(this);for(var b=this.children,c=0,d=b.length;c<d;c++){b[c].traverse(a)}},traverseVisible:function traverseVisible(a){if(!1!==this.visible){a(this);for(var b=this.children,c=0,d=b.length;c<d;c++){b[c].traverseVisible(a)}}},traverseAncestors:function traverseAncestors(a){var b=this.parent;null!==b&&(a(b),b.traverseAncestors(a))},updateMatrix:function updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale);this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function updateMatrixWorld(a){this.matrixAutoUpdate&&this.updateMatrix();if(this.matrixWorldNeedsUpdate||a)null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,a=!0;for(var b=this.children,c=0,d=b.length;c<d;c++){b[c].updateMatrixWorld(a)}},toJSON:function toJSON(a){function b(b,c){void 0===b[c.uuid]&&(b[c.uuid]=c.toJSON(a));return c.uuid}function c(a){var b=[],c;for(c in a){var d=a[c];delete d.metadata;b.push(d)}return b}var d=void 0===a||"string"===typeof a,e={};d&&(a={geometries:{},materials:{},textures:{},images:{},shapes:{}},e.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var f={uuid:this.uuid,type:this.type};""!==this.name&&(f.name=this.name);!0===this.castShadow&&(f.castShadow=!0);!0===this.receiveShadow&&(f.receiveShadow=!0);!1===this.visible&&(f.visible=!1);!1===this.frustumCulled&&(f.frustumCulled=!1);0!==this.renderOrder&&(f.renderOrder=this.renderOrder);"{}"!==JSON.stringify(this.userData)&&(f.userData=this.userData);f.matrix=this.matrix.toArray();!1===this.matrixAutoUpdate&&(f.matrixAutoUpdate=!1);if(void 0!==this.geometry){f.geometry=b(a.geometries,this.geometry);var g=this.geometry.parameters;if(void 0!==g&&void 0!==g.shapes)if(g=g.shapes,Array.isArray(g))for(var h=0,l=g.length;h<l;h++){b(a.shapes,g[h])}else b(a.shapes,g)}if(void 0!==this.material)if(Array.isArray(this.material)){g=[];h=0;for(l=this.material.length;h<l;h++){g.push(b(a.materials,this.material[h]))}f.material=g}else f.material=b(a.materials,this.material);if(0<this.children.length)for(f.children=[],h=0;h<this.children.length;h++){f.children.push(this.children[h].toJSON(a).object)}if(d){d=c(a.geometries);h=c(a.materials);l=c(a.textures);var m=c(a.images);g=c(a.shapes);0<d.length&&(e.geometries=d);0<h.length&&(e.materials=h);0<l.length&&(e.textures=l);0<m.length&&(e.images=m);0<g.length&&(e.shapes=g)}e.object=f;return e},clone:function clone(a){return new this.constructor().copy(this,a)},copy:function copy(a,b){void 0===b&&(b=!0);this.name=a.name;this.up.copy(a.up);this.position.copy(a.position);this.quaternion.copy(a.quaternion);this.scale.copy(a.scale);this.matrix.copy(a.matrix);this.matrixWorld.copy(a.matrixWorld);this.matrixAutoUpdate=a.matrixAutoUpdate;this.matrixWorldNeedsUpdate=a.matrixWorldNeedsUpdate;this.layers.mask=a.layers.mask;this.visible=a.visible;this.castShadow=a.castShadow;this.receiveShadow=a.receiveShadow;this.frustumCulled=a.frustumCulled;this.renderOrder=a.renderOrder;this.userData=JSON.parse(JSON.stringify(a.userData));if(!0===b)for(b=0;b<a.children.length;b++){this.add(a.children[b].clone())}return this}});Qa.prototype=Object.assign(Object.create(B.prototype),{constructor:Qa,isCamera:!0,copy:function copy(a,b){B.prototype.copy.call(this,a,b);this.matrixWorldInverse.copy(a.matrixWorldInverse);this.projectionMatrix.copy(a.projectionMatrix);return this},getWorldDirection:function(){var a=new X;return function(b){void 0===b&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),b=new p);this.getWorldQuaternion(a);return b.set(0,0,-1).applyQuaternion(a)}}(),updateMatrixWorld:function updateMatrixWorld(a){B.prototype.updateMatrixWorld.call(this,a);this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function clone(){return new this.constructor().copy(this)}});Mb.prototype=Object.assign(Object.create(Qa.prototype),{constructor:Mb,isOrthographicCamera:!0,copy:function copy(a,b){Qa.prototype.copy.call(this,a,b);this.left=a.left;this.right=a.right;this.top=a.top;this.bottom=a.bottom;this.near=a.near;this.far=a.far;this.zoom=a.zoom;this.view=null===a.view?null:Object.assign({},a.view);return this},setViewOffset:function setViewOffset(a,b,c,d,e,f){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1});this.view.enabled=!0;this.view.fullWidth=a;this.view.fullHeight=b;this.view.offsetX=c;this.view.offsetY=d;this.view.width=e;this.view.height=f;this.updateProjectionMatrix()},clearViewOffset:function clearViewOffset(){null!==this.view&&(this.view.enabled=!1);this.updateProjectionMatrix()},updateProjectionMatrix:function updateProjectionMatrix(){var a=(this.right-this.left)/(2*this.zoom),b=(this.top-this.bottom)/(2*this.zoom),c=(this.right+this.left)/2,d=(this.top+this.bottom)/2,e=c-a;c+=a;a=d+b;b=d-b;if(null!==this.view&&this.view.enabled){c=this.zoom/(this.view.width/this.view.fullWidth);b=this.zoom/(this.view.height/this.view.fullHeight);var f=(this.right-this.left)/this.view.width;d=(this.top-this.bottom)/this.view.height;e+=this.view.offsetX/c*f;c=e+this.view.width/c*f;a-=this.view.offsetY/b*d;b=a-this.view.height/b*d}this.projectionMatrix.makeOrthographic(e,c,a,b,this.near,this.far)},toJSON:function toJSON(a){a=B.prototype.toJSON.call(this,a);a.object.zoom=this.zoom;a.object.left=this.left;a.object.right=this.right;a.object.top=this.top;a.object.bottom=this.bottom;a.object.near=this.near;a.object.far=this.far;null!==this.view&&(a.object.view=Object.assign({},this.view));return a}});Object.assign(Xa.prototype,{clone:function clone(){return new this.constructor().copy(this)},copy:function copy(a){this.a=a.a;this.b=a.b;this.c=a.c;this.normal.copy(a.normal);this.color.copy(a.color);this.materialIndex=a.materialIndex;for(var b=0,c=a.vertexNormals.length;b<c;b++){this.vertexNormals[b]=a.vertexNormals[b].clone()}b=0;for(c=a.vertexColors.length;b<c;b++){this.vertexColors[b]=a.vertexColors[b].clone()}return this}});var Gf=0;J.prototype=Object.assign(Object.create(ha.prototype),{constructor:J,isGeometry:!0,applyMatrix:function applyMatrix(a){for(var b=new ta().getNormalMatrix(a),c=0,d=this.vertices.length;c<d;c++){this.vertices[c].applyMatrix4(a)}c=0;for(d=this.faces.length;c<d;c++){a=this.faces[c];a.normal.applyMatrix3(b).normalize();for(var e=0,f=a.vertexNormals.length;e<f;e++){a.vertexNormals[e].applyMatrix3(b).normalize()}}null!==this.boundingBox&&this.computeBoundingBox();null!==this.boundingSphere&&this.computeBoundingSphere();this.normalsNeedUpdate=this.verticesNeedUpdate=!0;return this},rotateX:function(){var a=new F;return function(b){a.makeRotationX(b);this.applyMatrix(a);return this}}(),rotateY:function(){var a=new F;return function(b){a.makeRotationY(b);this.applyMatrix(a);return this}}(),rotateZ:function(){var a=new F;return function(b){a.makeRotationZ(b);this.applyMatrix(a);return this}}(),translate:function(){var a=new F;return function(b,c,d){a.makeTranslation(b,c,d);this.applyMatrix(a);return this}}(),scale:function(){var a=new F;return function(b,c,d){a.makeScale(b,c,d);this.applyMatrix(a);return this}}(),lookAt:function(){var a=new B;return function(b){a.lookAt(b);a.updateMatrix();this.applyMatrix(a.matrix)}}(),fromBufferGeometry:function fromBufferGeometry(a){function b(a,b,d,e){var f=void 0!==g?[k[a].clone(),k[b].clone(),k[d].clone()]:[],q=void 0!==h?[c.colors[a].clone(),c.colors[b].clone(),c.colors[d].clone()]:[];e=new Xa(a,b,d,f,q,e);c.faces.push(e);void 0!==l&&c.faceVertexUvs[0].push([n[a].clone(),n[b].clone(),n[d].clone()]);void 0!==m&&c.faceVertexUvs[1].push([r[a].clone(),r[b].clone(),r[d].clone()])}var c=this,d=null!==a.index?a.index.array:void 0,e=a.attributes,f=e.position.array,g=void 0!==e.normal?e.normal.array:void 0,h=void 0!==e.color?e.color.array:void 0,l=void 0!==e.uv?e.uv.array:void 0,m=void 0!==e.uv2?e.uv2.array:void 0;void 0!==m&&(this.faceVertexUvs[1]=[]);for(var k=[],n=[],r=[],q=e=0;e<f.length;e+=3,q+=2){c.vertices.push(new p(f[e],f[e+1],f[e+2])),void 0!==g&&k.push(new p(g[e],g[e+1],g[e+2])),void 0!==h&&c.colors.push(new K(h[e],h[e+1],h[e+2])),void 0!==l&&n.push(new y(l[q],l[q+1])),void 0!==m&&r.push(new y(m[q],m[q+1]))}var t=a.groups;if(0<t.length)for(e=0;e<t.length;e++){f=t[e];var u=f.start,z=f.count;q=u;for(u+=z;q<u;q+=3){void 0!==d?b(d[q],d[q+1],d[q+2],f.materialIndex):b(q,q+1,q+2,f.materialIndex)}}else if(void 0!==d)for(e=0;e<d.length;e+=3){b(d[e],d[e+1],d[e+2])}else for(e=0;e<f.length/3;e+=3){b(e,e+1,e+2)}this.computeFaceNormals();null!==a.boundingBox&&(this.boundingBox=a.boundingBox.clone());null!==a.boundingSphere&&(this.boundingSphere=a.boundingSphere.clone());return this},center:function(){var a=new p;return function(){this.computeBoundingBox();this.boundingBox.getCenter(a).negate();this.translate(a.x,a.y,a.z);return this}}(),normalize:function normalize(){this.computeBoundingSphere();var a=this.boundingSphere.center,b=this.boundingSphere.radius;b=0===b?1:1/b;var c=new F;c.set(b,0,0,-b*a.x,0,b,0,-b*a.y,0,0,b,-b*a.z,0,0,0,1);this.applyMatrix(c);return this},computeFaceNormals:function computeFaceNormals(){for(var a=new p,b=new p,c=0,d=this.faces.length;c<d;c++){var e=this.faces[c],f=this.vertices[e.a],g=this.vertices[e.b];a.subVectors(this.vertices[e.c],g);b.subVectors(f,g);a.cross(b);a.normalize();e.normal.copy(a)}},computeVertexNormals:function computeVertexNormals(a){void 0===a&&(a=!0);var b,c=Array(this.vertices.length),d=0;for(b=this.vertices.length;d<b;d++){c[d]=new p}if(a){var e=new p,f=new p;a=0;for(d=this.faces.length;a<d;a++){b=this.faces[a];var g=this.vertices[b.a],h=this.vertices[b.b],l=this.vertices[b.c];e.subVectors(l,h);f.subVectors(g,h);e.cross(f);c[b.a].add(e);c[b.b].add(e);c[b.c].add(e)}}else for(this.computeFaceNormals(),a=0,d=this.faces.length;a<d;a++){b=this.faces[a],c[b.a].add(b.normal),c[b.b].add(b.normal),c[b.c].add(b.normal)}d=0;for(b=this.vertices.length;d<b;d++){c[d].normalize()}a=0;for(d=this.faces.length;a<d;a++){b=this.faces[a],g=b.vertexNormals,3===g.length?(g[0].copy(c[b.a]),g[1].copy(c[b.b]),g[2].copy(c[b.c])):(g[0]=c[b.a].clone(),g[1]=c[b.b].clone(),g[2]=c[b.c].clone())}0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function computeFlatVertexNormals(){var a;this.computeFaceNormals();var b=0;for(a=this.faces.length;b<a;b++){var c=this.faces[b],d=c.vertexNormals;3===d.length?(d[0].copy(c.normal),d[1].copy(c.normal),d[2].copy(c.normal)):(d[0]=c.normal.clone(),d[1]=c.normal.clone(),d[2]=c.normal.clone())}0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function computeMorphNormals(){var a,b,c=0;for(b=this.faces.length;c<b;c++){var d=this.faces[c];d.__originalFaceNormal?d.__originalFaceNormal.copy(d.normal):d.__originalFaceNormal=d.normal.clone();d.__originalVertexNormals||(d.__originalVertexNormals=[]);var e=0;for(a=d.vertexNormals.length;e<a;e++){d.__originalVertexNormals[e]?d.__originalVertexNormals[e].copy(d.vertexNormals[e]):d.__originalVertexNormals[e]=d.vertexNormals[e].clone()}}var f=new J;f.faces=this.faces;e=0;for(a=this.morphTargets.length;e<a;e++){if(!this.morphNormals[e]){this.morphNormals[e]={};this.morphNormals[e].faceNormals=[];this.morphNormals[e].vertexNormals=[];d=this.morphNormals[e].faceNormals;var g=this.morphNormals[e].vertexNormals;c=0;for(b=this.faces.length;c<b;c++){var h=new p,l={a:new p,b:new p,c:new p};d.push(h);g.push(l)}}g=this.morphNormals[e];f.vertices=this.morphTargets[e].vertices;f.computeFaceNormals();f.computeVertexNormals();c=0;for(b=this.faces.length;c<b;c++){d=this.faces[c],h=g.faceNormals[c],l=g.vertexNormals[c],h.copy(d.normal),l.a.copy(d.vertexNormals[0]),l.b.copy(d.vertexNormals[1]),l.c.copy(d.vertexNormals[2])}}c=0;for(b=this.faces.length;c<b;c++){d=this.faces[c],d.normal=d.__originalFaceNormal,d.vertexNormals=d.__originalVertexNormals}},computeBoundingBox:function computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Wa);this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Ga);this.boundingSphere.setFromPoints(this.vertices)},merge:function merge(a,b,c){if(a&&a.isGeometry){var d,e=this.vertices.length,f=this.vertices,g=a.vertices,h=this.faces,l=a.faces,m=this.faceVertexUvs[0],k=a.faceVertexUvs[0],n=this.colors,r=a.colors;void 0===c&&(c=0);void 0!==b&&(d=new ta().getNormalMatrix(b));a=0;for(var q=g.length,p;a<q;a++){p=g[a].clone();void 0!==b&&p.applyMatrix4(b);f.push(p)}a=0;for(q=r.length;a<q;a++){n.push(r[a].clone())}a=0;for(q=l.length;a<q;a++){g=l[a];var u=g.vertexNormals;r=g.vertexColors;n=new Xa(g.a+e,g.b+e,g.c+e);n.normal.copy(g.normal);void 0!==d&&n.normal.applyMatrix3(d).normalize();b=0;for(f=u.length;b<f;b++){p=u[b].clone(),void 0!==d&&p.applyMatrix3(d).normalize(),n.vertexNormals.push(p)}n.color.copy(g.color);b=0;for(f=r.length;b<f;b++){p=r[b],n.vertexColors.push(p.clone())}n.materialIndex=g.materialIndex+c;h.push(n)}a=0;for(q=k.length;a<q;a++){if(c=k[a],d=[],void 0!==c){b=0;for(f=c.length;b<f;b++){d.push(c[b].clone())}m.push(d)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",a)},mergeMesh:function mergeMesh(a){a&&a.isMesh?(a.matrixAutoUpdate&&a.updateMatrix(),this.merge(a.geometry,a.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",a)},mergeVertices:function mergeVertices(){var a={},b=[],c=[],d=10000,e,f=0;for(e=this.vertices.length;f<e;f++){var g=this.vertices[f];g=_Mathround(g.x*d)+"_"+_Mathround(g.y*d)+"_"+_Mathround(g.z*d);void 0===a[g]?(a[g]=f,b.push(this.vertices[f]),c[f]=b.length-1):c[f]=c[a[g]]}a=[];f=0;for(e=this.faces.length;f<e;f++){for(d=this.faces[f],d.a=c[d.a],d.b=c[d.b],d.c=c[d.c],d=[d.a,d.b,d.c],g=0;3>g;g++){if(d[g]===d[(g+1)%3]){a.push(f);break}}}for(f=a.length-1;0<=f;f--){for(d=a[f],this.faces.splice(d,1),c=0,e=this.faceVertexUvs.length;c<e;c++){this.faceVertexUvs[c].splice(d,1)}}f=this.vertices.length-b.length;this.vertices=b;return f},setFromPoints:function setFromPoints(a){this.vertices=[];for(var b=0,c=a.length,d;b<c;b++){d=a[b];this.vertices.push(new p(d.x,d.y,d.z||0))}return this},sortFacesByMaterialIndex:function sortFacesByMaterialIndex(){for(var a=this.faces,b=a.length,c=0;c<b;c++){a[c]._id=c}a.sort(function(a,b){return a.materialIndex-b.materialIndex});var d=this.faceVertexUvs[0],e=this.faceVertexUvs[1],f,g;d&&d.length===b&&(f=[]);e&&e.length===b&&(g=[]);for(c=0;c<b;c++){var h=a[c]._id;f&&f.push(d[h]);g&&g.push(e[h])}f&&(this.faceVertexUvs[0]=f);g&&(this.faceVertexUvs[1]=g)},toJSON:function toJSON(){function a(a,b,c){return c?a|1<<b:a&~(1<<b)}function b(a){var b=a.x.toString()+a.y.toString()+a.z.toString();if(void 0!==m[b])return m[b];m[b]=l.length/3;l.push(a.x,a.y,a.z);return m[b]}function c(a){var b=a.r.toString()+a.g.toString()+a.b.toString();if(void 0!==n[b])return n[b];n[b]=k.length;k.push(a.getHex());return n[b]}function d(a){var b=a.x.toString()+a.y.toString();if(void 0!==p[b])return p[b];p[b]=r.length/2;r.push(a.x,a.y);return p[b]}var e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"},uuid:this.uuid,type:this.type};""!==this.name&&(e.name=this.name);if(void 0!==this.parameters){var f=this.parameters,g;for(g in f){void 0!==f[g]&&(e[g]=f[g])}return e}f=[];for(g=0;g<this.vertices.length;g++){var h=this.vertices[g];f.push(h.x,h.y,h.z)}h=[];var l=[],m={},k=[],n={},r=[],p={};for(g=0;g<this.faces.length;g++){var t=this.faces[g],u=void 0!==this.faceVertexUvs[0][g],z=0<t.normal.length(),x=0<t.vertexNormals.length,w=1!==t.color.r||1!==t.color.g||1!==t.color.b,y=0<t.vertexColors.length,C=0;C=a(C,0,0);C=a(C,1,!0);C=a(C,2,!1);C=a(C,3,u);C=a(C,4,z);C=a(C,5,x);C=a(C,6,w);C=a(C,7,y);h.push(C);h.push(t.a,t.b,t.c);h.push(t.materialIndex);u&&(u=this.faceVertexUvs[0][g],h.push(d(u[0]),d(u[1]),d(u[2])));z&&h.push(b(t.normal));x&&(z=t.vertexNormals,h.push(b(z[0]),b(z[1]),b(z[2])));w&&h.push(c(t.color));y&&(t=t.vertexColors,h.push(c(t[0]),c(t[1]),c(t[2])))}e.data={};e.data.vertices=f;e.data.normals=l;0<k.length&&(e.data.colors=k);0<r.length&&(e.data.uvs=[r]);e.data.faces=h;return e},clone:function clone(){return new J().copy(this)},copy:function copy(a){var b,c,d;this.vertices=[];this.colors=[];this.faces=[];this.faceVertexUvs=[[]];this.morphTargets=[];this.morphNormals=[];this.skinWeights=[];this.skinIndices=[];this.lineDistances=[];this.boundingSphere=this.boundingBox=null;this.name=a.name;var e=a.vertices,f=0;for(b=e.length;f<b;f++){this.vertices.push(e[f].clone())}e=a.colors;f=0;for(b=e.length;f<b;f++){this.colors.push(e[f].clone())}e=a.faces;f=0;for(b=e.length;f<b;f++){this.faces.push(e[f].clone())}f=0;for(b=a.faceVertexUvs.length;f<b;f++){var g=a.faceVertexUvs[f];void 0===this.faceVertexUvs[f]&&(this.faceVertexUvs[f]=[]);e=0;for(c=g.length;e<c;e++){var h=g[e],l=[],m=0;for(d=h.length;m<d;m++){l.push(h[m].clone())}this.faceVertexUvs[f].push(l)}}m=a.morphTargets;f=0;for(b=m.length;f<b;f++){d={};d.name=m[f].name;if(void 0!==m[f].vertices)for(d.vertices=[],e=0,c=m[f].vertices.length;e<c;e++){d.vertices.push(m[f].vertices[e].clone())}if(void 0!==m[f].normals)for(d.normals=[],e=0,c=m[f].normals.length;e<c;e++){d.normals.push(m[f].normals[e].clone())}this.morphTargets.push(d)}m=a.morphNormals;f=0;for(b=m.length;f<b;f++){d={};if(void 0!==m[f].vertexNormals)for(d.vertexNormals=[],e=0,c=m[f].vertexNormals.length;e<c;e++){g=m[f].vertexNormals[e],h={},h.a=g.a.clone(),h.b=g.b.clone(),h.c=g.c.clone(),d.vertexNormals.push(h)}if(void 0!==m[f].faceNormals)for(d.faceNormals=[],e=0,c=m[f].faceNormals.length;e<c;e++){d.faceNormals.push(m[f].faceNormals[e].clone())}this.morphNormals.push(d)}e=a.skinWeights;f=0;for(b=e.length;f<b;f++){this.skinWeights.push(e[f].clone())}e=a.skinIndices;f=0;for(b=e.length;f<b;f++){this.skinIndices.push(e[f].clone())}e=a.lineDistances;f=0;for(b=e.length;f<b;f++){this.lineDistances.push(e[f])}f=a.boundingBox;null!==f&&(this.boundingBox=f.clone());f=a.boundingSphere;null!==f&&(this.boundingSphere=f.clone());this.elementsNeedUpdate=a.elementsNeedUpdate;this.verticesNeedUpdate=a.verticesNeedUpdate;this.uvsNeedUpdate=a.uvsNeedUpdate;this.normalsNeedUpdate=a.normalsNeedUpdate;this.colorsNeedUpdate=a.colorsNeedUpdate;this.lineDistancesNeedUpdate=a.lineDistancesNeedUpdate;this.groupsNeedUpdate=a.groupsNeedUpdate;return this},dispose:function dispose(){this.dispatchEvent({type:"dispose"})}});Object.defineProperty(O.prototype,"needsUpdate",{set:function set(a){!0===a&&this.version++}});Object.assign(O.prototype,{isBufferAttribute:!0,onUploadCallback:function onUploadCallback(){},setArray:function setArray(a){if(Array.isArray(a))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==a?a.length/this.itemSize:0;this.array=a;return this},setDynamic:function setDynamic(a){this.dynamic=a;return this},copy:function copy(a){this.name=a.name;this.array=new a.array.constructor(a.array);this.itemSize=a.itemSize;this.count=a.count;this.normalized=a.normalized;this.dynamic=a.dynamic;return this},copyAt:function copyAt(a,b,c){a*=this.itemSize;c*=b.itemSize;for(var d=0,e=this.itemSize;d<e;d++){this.array[a+d]=b.array[c+d]}return this},copyArray:function copyArray(a){this.array.set(a);return this},copyColorsArray:function copyColorsArray(a){for(var b=this.array,c=0,d=0,e=a.length,f;d<e;d++){f=a[d];void 0===f&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",d),f=new K);b[c++]=f.r;b[c++]=f.g;b[c++]=f.b}return this},copyVector2sArray:function copyVector2sArray(a){for(var b=this.array,c=0,d=0,e=a.length,f;d<e;d++){f=a[d];void 0===f&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",d),f=new y);b[c++]=f.x;b[c++]=f.y}return this},copyVector3sArray:function copyVector3sArray(a){for(var b=this.array,c=0,d=0,e=a.length,f;d<e;d++){f=a[d];void 0===f&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",d),f=new p);b[c++]=f.x;b[c++]=f.y;b[c++]=f.z}return this},copyVector4sArray:function copyVector4sArray(a){for(var b=this.array,c=0,d=0,e=a.length,f;d<e;d++){f=a[d];void 0===f&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",d),f=new U);b[c++]=f.x;b[c++]=f.y;b[c++]=f.z;b[c++]=f.w}return this},set:function set(a,b){void 0===b&&(b=0);this.array.set(a,b);return this},getX:function getX(a){return this.array[a*this.itemSize]},setX:function setX(a,b){this.array[a*this.itemSize]=b;return this},getY:function getY(a){return this.array[a*this.itemSize+1]},setY:function setY(a,b){this.array[a*this.itemSize+1]=b;return this},getZ:function getZ(a){return this.array[a*this.itemSize+2]},setZ:function setZ(a,b){this.array[a*this.itemSize+2]=b;return this},getW:function getW(a){return this.array[a*this.itemSize+3]},setW:function setW(a,b){this.array[a*this.itemSize+3]=b;return this},setXY:function setXY(a,b,c){a*=this.itemSize;this.array[a+0]=b;this.array[a+1]=c;return this},setXYZ:function setXYZ(a,b,c,d){a*=this.itemSize;this.array[a+0]=b;this.array[a+1]=c;this.array[a+2]=d;return this},setXYZW:function setXYZW(a,b,c,d,e){a*=this.itemSize;this.array[a+0]=b;this.array[a+1]=c;this.array[a+2]=d;this.array[a+3]=e;return this},onUpload:function onUpload(a){this.onUploadCallback=a;return this},clone:function clone(){return new this.constructor(this.array,this.itemSize).copy(this)}});vc.prototype=Object.create(O.prototype);vc.prototype.constructor=vc;wc.prototype=Object.create(O.prototype);wc.prototype.constructor=wc;xc.prototype=Object.create(O.prototype);xc.prototype.constructor=xc;yc.prototype=Object.create(O.prototype);yc.prototype.constructor=yc;nb.prototype=Object.create(O.prototype);nb.prototype.constructor=nb;zc.prototype=Object.create(O.prototype);zc.prototype.constructor=zc;ob.prototype=Object.create(O.prototype);ob.prototype.constructor=ob;A.prototype=Object.create(O.prototype);A.prototype.constructor=A;Ac.prototype=Object.create(O.prototype);Ac.prototype.constructor=Ac;Object.assign(Ee.prototype,{computeGroups:function computeGroups(a){var b=[],c;a=a.faces;for(var d=0,e;d<a.length;d++){e=a[d];if(e.materialIndex!==c){c=e.materialIndex;void 0!==f&&(f.count=3*d-f.start,b.push(f));var f={start:3*d,materialIndex:c}}}void 0!==f&&(f.count=3*d-f.start,b.push(f));this.groups=b},fromGeometry:function fromGeometry(a){var b=a.faces,c=a.vertices,d=a.faceVertexUvs,e=d[0]&&0<d[0].length,f=d[1]&&0<d[1].length,g=a.morphTargets,h=g.length;if(0<h){for(var l=[],m=0;m<h;m++){l[m]=[]}this.morphTargets.position=l}var k=a.morphNormals,n=k.length;if(0<n){var p=[];for(m=0;m<n;m++){p[m]=[]}this.morphTargets.normal=p}var q=a.skinIndices,t=a.skinWeights,u=q.length===c.length,z=t.length===c.length;0===b.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(m=0;m<b.length;m++){var x=b[m];this.vertices.push(c[x.a],c[x.b],c[x.c]);var w=x.vertexNormals;3===w.length?this.normals.push(w[0],w[1],w[2]):(w=x.normal,this.normals.push(w,w,w));w=x.vertexColors;3===w.length?this.colors.push(w[0],w[1],w[2]):(w=x.color,this.colors.push(w,w,w));!0===e&&(w=d[0][m],void 0!==w?this.uvs.push(w[0],w[1],w[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",m),this.uvs.push(new y,new y,new y)));!0===f&&(w=d[1][m],void 0!==w?this.uvs2.push(w[0],w[1],w[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",m),this.uvs2.push(new y,new y,new y)));for(w=0;w<h;w++){var A=g[w].vertices;l[w].push(A[x.a],A[x.b],A[x.c])}for(w=0;w<n;w++){A=k[w].vertexNormals[m],p[w].push(A.a,A.b,A.c)}u&&this.skinIndices.push(q[x.a],q[x.b],q[x.c]);z&&this.skinWeights.push(t[x.a],t[x.b],t[x.c])}this.computeGroups(a);this.verticesNeedUpdate=a.verticesNeedUpdate;this.normalsNeedUpdate=a.normalsNeedUpdate;this.colorsNeedUpdate=a.colorsNeedUpdate;this.uvsNeedUpdate=a.uvsNeedUpdate;this.groupsNeedUpdate=a.groupsNeedUpdate;return this}});var Hf=1;G.prototype=Object.assign(Object.create(ha.prototype),{constructor:G,isBufferGeometry:!0,getIndex:function getIndex(){return this.index},setIndex:function setIndex(a){Array.isArray(a)?this.index=new(65535<Fe(a)?ob:nb)(a,1):this.index=a},addAttribute:function addAttribute(a,b,c){if(!(b&&b.isBufferAttribute||b&&b.isInterleavedBufferAttribute))return console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.addAttribute(a,new O(b,c));if("index"===a)return console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(b),this;this.attributes[a]=b;return this},getAttribute:function getAttribute(a){return this.attributes[a]},removeAttribute:function removeAttribute(a){delete this.attributes[a];return this},addGroup:function addGroup(a,b,c){this.groups.push({start:a,count:b,materialIndex:void 0!==c?c:0})},clearGroups:function clearGroups(){this.groups=[]},setDrawRange:function setDrawRange(a,b){this.drawRange.start=a;this.drawRange.count=b},applyMatrix:function applyMatrix(a){var b=this.attributes.position;void 0!==b&&(a.applyToBufferAttribute(b),b.needsUpdate=!0);b=this.attributes.normal;void 0!==b&&(new ta().getNormalMatrix(a).applyToBufferAttribute(b),b.needsUpdate=!0);null!==this.boundingBox&&this.computeBoundingBox();null!==this.boundingSphere&&this.computeBoundingSphere();return this},rotateX:function(){var a=new F;return function(b){a.makeRotationX(b);this.applyMatrix(a);return this}}(),rotateY:function(){var a=new F;return function(b){a.makeRotationY(b);this.applyMatrix(a);return this}}(),rotateZ:function(){var a=new F;return function(b){a.makeRotationZ(b);this.applyMatrix(a);return this}}(),translate:function(){var a=new F;return function(b,c,d){a.makeTranslation(b,c,d);this.applyMatrix(a);return this}}(),scale:function(){var a=new F;return function(b,c,d){a.makeScale(b,c,d);this.applyMatrix(a);return this}}(),lookAt:function(){var a=new B;return function(b){a.lookAt(b);a.updateMatrix();this.applyMatrix(a.matrix)}}(),center:function(){var a=new p;return function(){this.computeBoundingBox();this.boundingBox.getCenter(a).negate();this.translate(a.x,a.y,a.z);return this}}(),setFromObject:function setFromObject(a){var b=a.geometry;if(a.isPoints||a.isLine){a=new A(3*b.vertices.length,3);var c=new A(3*b.colors.length,3);this.addAttribute("position",a.copyVector3sArray(b.vertices));this.addAttribute("color",c.copyColorsArray(b.colors));b.lineDistances&&b.lineDistances.length===b.vertices.length&&(a=new A(b.lineDistances.length,1),this.addAttribute("lineDistance",a.copyArray(b.lineDistances)));null!==b.boundingSphere&&(this.boundingSphere=b.boundingSphere.clone());null!==b.boundingBox&&(this.boundingBox=b.boundingBox.clone())}else a.isMesh&&b&&b.isGeometry&&this.fromGeometry(b);return this},setFromPoints:function setFromPoints(a){for(var b=[],c=0,d=a.length,e;c<d;c++){e=a[c];b.push(e.x,e.y,e.z||0)}this.addAttribute("position",new A(b,3));return this},updateFromObject:function updateFromObject(a){var b=a.geometry;if(a.isMesh){var c=b.__directGeometry;!0===b.elementsNeedUpdate&&(c=void 0,b.elementsNeedUpdate=!1);if(void 0===c)return this.fromGeometry(b);c.verticesNeedUpdate=b.verticesNeedUpdate;c.normalsNeedUpdate=b.normalsNeedUpdate;c.colorsNeedUpdate=b.colorsNeedUpdate;c.uvsNeedUpdate=b.uvsNeedUpdate;c.groupsNeedUpdate=b.groupsNeedUpdate;b.verticesNeedUpdate=!1;b.normalsNeedUpdate=!1;b.colorsNeedUpdate=!1;b.uvsNeedUpdate=!1;b.groupsNeedUpdate=!1;b=c}!0===b.verticesNeedUpdate&&(c=this.attributes.position,void 0!==c&&(c.copyVector3sArray(b.vertices),c.needsUpdate=!0),b.verticesNeedUpdate=!1);!0===b.normalsNeedUpdate&&(c=this.attributes.normal,void 0!==c&&(c.copyVector3sArray(b.normals),c.needsUpdate=!0),b.normalsNeedUpdate=!1);!0===b.colorsNeedUpdate&&(c=this.attributes.color,void 0!==c&&(c.copyColorsArray(b.colors),c.needsUpdate=!0),b.colorsNeedUpdate=!1);b.uvsNeedUpdate&&(c=this.attributes.uv,void 0!==c&&(c.copyVector2sArray(b.uvs),c.needsUpdate=!0),b.uvsNeedUpdate=!1);b.lineDistancesNeedUpdate&&(c=this.attributes.lineDistance,void 0!==c&&(c.copyArray(b.lineDistances),c.needsUpdate=!0),b.lineDistancesNeedUpdate=!1);b.groupsNeedUpdate&&(b.computeGroups(a.geometry),this.groups=b.groups,b.groupsNeedUpdate=!1);return this},fromGeometry:function fromGeometry(a){a.__directGeometry=new Ee().fromGeometry(a);return this.fromDirectGeometry(a.__directGeometry)},fromDirectGeometry:function fromDirectGeometry(a){var b=new Float32Array(3*a.vertices.length);this.addAttribute("position",new O(b,3).copyVector3sArray(a.vertices));0<a.normals.length&&(b=new Float32Array(3*a.normals.length),this.addAttribute("normal",new O(b,3).copyVector3sArray(a.normals)));0<a.colors.length&&(b=new Float32Array(3*a.colors.length),this.addAttribute("color",new O(b,3).copyColorsArray(a.colors)));0<a.uvs.length&&(b=new Float32Array(2*a.uvs.length),this.addAttribute("uv",new O(b,2).copyVector2sArray(a.uvs)));0<a.uvs2.length&&(b=new Float32Array(2*a.uvs2.length),this.addAttribute("uv2",new O(b,2).copyVector2sArray(a.uvs2)));this.groups=a.groups;for(var c in a.morphTargets){b=[];for(var d=a.morphTargets[c],e=0,f=d.length;e<f;e++){var g=d[e],h=new A(3*g.length,3);b.push(h.copyVector3sArray(g))}this.morphAttributes[c]=b}0<a.skinIndices.length&&(c=new A(4*a.skinIndices.length,4),this.addAttribute("skinIndex",c.copyVector4sArray(a.skinIndices)));0<a.skinWeights.length&&(c=new A(4*a.skinWeights.length,4),this.addAttribute("skinWeight",c.copyVector4sArray(a.skinWeights)));null!==a.boundingSphere&&(this.boundingSphere=a.boundingSphere.clone());null!==a.boundingBox&&(this.boundingBox=a.boundingBox.clone());return this},computeBoundingBox:function computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Wa);var a=this.attributes.position;void 0!==a?this.boundingBox.setFromBufferAttribute(a):this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error("THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The \"position\" attribute is likely to have NaN values.",this)},computeBoundingSphere:function(){var a=new Wa,b=new p;return function(){null===this.boundingSphere&&(this.boundingSphere=new Ga);var c=this.attributes.position;if(c){var d=this.boundingSphere.center;a.setFromBufferAttribute(c);a.getCenter(d);for(var e=0,f=0,g=c.count;f<g;f++){b.x=c.getX(f),b.y=c.getY(f),b.z=c.getZ(f),e=_Mathmax(e,d.distanceToSquared(b))}this.boundingSphere.radius=_Mathsqrt(e);isNaN(this.boundingSphere.radius)&&console.error("THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The \"position\" attribute is likely to have NaN values.",this)}}}(),computeFaceNormals:function computeFaceNormals(){},computeVertexNormals:function computeVertexNormals(){var a=this.index,b=this.attributes,c=this.groups;if(b.position){var d=b.position.array;if(void 0===b.normal)this.addAttribute("normal",new O(new Float32Array(d.length),3));else for(var e=b.normal.array,f=0,g=e.length;f<g;f++){e[f]=0}e=b.normal.array;var h=new p,l=new p,m=new p,k=new p,n=new p;if(a){a=a.array;0===c.length&&this.addGroup(0,a.length);for(var r=0,q=c.length;r<q;++r){f=c[r];g=f.start;var t=f.count;f=g;for(g+=t;f<g;f+=3){t=3*a[f+0];var u=3*a[f+1],z=3*a[f+2];h.fromArray(d,t);l.fromArray(d,u);m.fromArray(d,z);k.subVectors(m,l);n.subVectors(h,l);k.cross(n);e[t]+=k.x;e[t+1]+=k.y;e[t+2]+=k.z;e[u]+=k.x;e[u+1]+=k.y;e[u+2]+=k.z;e[z]+=k.x;e[z+1]+=k.y;e[z+2]+=k.z}}}else for(f=0,g=d.length;f<g;f+=9){h.fromArray(d,f),l.fromArray(d,f+3),m.fromArray(d,f+6),k.subVectors(m,l),n.subVectors(h,l),k.cross(n),e[f]=k.x,e[f+1]=k.y,e[f+2]=k.z,e[f+3]=k.x,e[f+4]=k.y,e[f+5]=k.z,e[f+6]=k.x,e[f+7]=k.y,e[f+8]=k.z}this.normalizeNormals();b.normal.needsUpdate=!0}},merge:function merge(a,b){if(a&&a.isBufferGeometry){void 0===b&&(b=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var c=this.attributes,d;for(d in c){if(void 0!==a.attributes[d]){var e=c[d].array,f=a.attributes[d],g=f.array,h=0;for(f=f.itemSize*b;h<g.length;h++,f++){e[f]=g[h]}}}return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",a)},normalizeNormals:function(){var a=new p;return function(){for(var b=this.attributes.normal,c=0,d=b.count;c<d;c++){a.x=b.getX(c),a.y=b.getY(c),a.z=b.getZ(c),a.normalize(),b.setXYZ(c,a.x,a.y,a.z)}}}(),toNonIndexed:function toNonIndexed(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var a=new G,b=this.index.array,c=this.attributes,d;for(d in c){var e=c[d],f=e.array,g=e.itemSize,h=new f.constructor(b.length*g),l=0;e=0;for(var m=b.length,k;e<m;e++){k=b[e]*g;for(var n=0;n<g;n++){h[l++]=f[k++]}}a.addAttribute(d,new O(h,g))}b=this.groups;e=0;for(m=b.length;e<m;e++){c=b[e],a.addGroup(c.start,c.count,c.materialIndex)}return a},toJSON:function toJSON(){var a={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"},uuid:this.uuid,type:this.type};""!==this.name&&(a.name=this.name);0<Object.keys(this.userData).length&&(a.userData=this.userData);if(void 0!==this.parameters){var b=this.parameters;for(e in b){void 0!==b[e]&&(a[e]=b[e])}return a}a.data={attributes:{}};var c=this.index;null!==c&&(b=Array.prototype.slice.call(c.array),a.data.index={type:c.array.constructor.name,array:b});c=this.attributes;for(e in c){var d=c[e];b=Array.prototype.slice.call(d.array);a.data.attributes[e]={itemSize:d.itemSize,type:d.array.constructor.name,array:b,normalized:d.normalized}}var e=this.groups;0<e.length&&(a.data.groups=JSON.parse(JSON.stringify(e)));e=this.boundingSphere;null!==e&&(a.data.boundingSphere={center:e.center.toArray(),radius:e.radius});return a},clone:function clone(){return new G().copy(this)},copy:function copy(a){var b;this.index=null;this.attributes={};this.morphAttributes={};this.groups=[];this.boundingSphere=this.boundingBox=null;this.name=a.name;var c=a.index;null!==c&&this.setIndex(c.clone());c=a.attributes;for(g in c){this.addAttribute(g,c[g].clone())}var d=a.morphAttributes;for(g in d){var e=[],f=d[g];c=0;for(b=f.length;c<b;c++){e.push(f[c].clone())}this.morphAttributes[g]=e}var g=a.groups;c=0;for(b=g.length;c<b;c++){d=g[c],this.addGroup(d.start,d.count,d.materialIndex)}g=a.boundingBox;null!==g&&(this.boundingBox=g.clone());g=a.boundingSphere;null!==g&&(this.boundingSphere=g.clone());this.drawRange.start=a.drawRange.start;this.drawRange.count=a.drawRange.count;this.userData=a.userData;return this},dispose:function dispose(){this.dispatchEvent({type:"dispose"})}});Nb.prototype=Object.create(J.prototype);Nb.prototype.constructor=Nb;pb.prototype=Object.create(G.prototype);pb.prototype.constructor=pb;Cc.prototype=Object.create(J.prototype);Cc.prototype.constructor=Cc;rb.prototype=Object.create(G.prototype);rb.prototype.constructor=rb;var If=0;L.prototype=Object.assign(Object.create(ha.prototype),{constructor:L,isMaterial:!0,onBeforeCompile:function onBeforeCompile(){},setValues:function setValues(a){if(void 0!==a)for(var b in a){var c=a[b];if(void 0===c)console.warn("THREE.Material: '"+b+"' parameter is undefined.");else if("shading"===b)console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===c?!0:!1;else{var d=this[b];void 0===d?console.warn("THREE."+this.type+": '"+b+"' is not a property of this material."):d&&d.isColor?d.set(c):d&&d.isVector3&&c&&c.isVector3?d.copy(c):this[b]="overdraw"===b?+c:c}}},toJSON:function toJSON(a){function b(a){var b=[],c;for(c in a){var d=a[c];delete d.metadata;b.push(d)}return b}var c=void 0===a||"string"===typeof a;c&&(a={textures:{},images:{}});var d={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"},uuid:this.uuid,type:this.type};""!==this.name&&(d.name=this.name);this.color&&this.color.isColor&&(d.color=this.color.getHex());void 0!==this.roughness&&(d.roughness=this.roughness);void 0!==this.metalness&&(d.metalness=this.metalness);this.emissive&&this.emissive.isColor&&(d.emissive=this.emissive.getHex());1!==this.emissiveIntensity&&(d.emissiveIntensity=this.emissiveIntensity);this.specular&&this.specular.isColor&&(d.specular=this.specular.getHex());void 0!==this.shininess&&(d.shininess=this.shininess);void 0!==this.clearCoat&&(d.clearCoat=this.clearCoat);void 0!==this.clearCoatRoughness&&(d.clearCoatRoughness=this.clearCoatRoughness);this.map&&this.map.isTexture&&(d.map=this.map.toJSON(a).uuid);this.alphaMap&&this.alphaMap.isTexture&&(d.alphaMap=this.alphaMap.toJSON(a).uuid);this.lightMap&&this.lightMap.isTexture&&(d.lightMap=this.lightMap.toJSON(a).uuid);this.aoMap&&this.aoMap.isTexture&&(d.aoMap=this.aoMap.toJSON(a).uuid,d.aoMapIntensity=this.aoMapIntensity);this.bumpMap&&this.bumpMap.isTexture&&(d.bumpMap=this.bumpMap.toJSON(a).uuid,d.bumpScale=this.bumpScale);this.normalMap&&this.normalMap.isTexture&&(d.normalMap=this.normalMap.toJSON(a).uuid,d.normalScale=this.normalScale.toArray());this.displacementMap&&this.displacementMap.isTexture&&(d.displacementMap=this.displacementMap.toJSON(a).uuid,d.displacementScale=this.displacementScale,d.displacementBias=this.displacementBias);this.roughnessMap&&this.roughnessMap.isTexture&&(d.roughnessMap=this.roughnessMap.toJSON(a).uuid);this.metalnessMap&&this.metalnessMap.isTexture&&(d.metalnessMap=this.metalnessMap.toJSON(a).uuid);this.emissiveMap&&this.emissiveMap.isTexture&&(d.emissiveMap=this.emissiveMap.toJSON(a).uuid);this.specularMap&&this.specularMap.isTexture&&(d.specularMap=this.specularMap.toJSON(a).uuid);this.envMap&&this.envMap.isTexture&&(d.envMap=this.envMap.toJSON(a).uuid,d.reflectivity=this.reflectivity);this.gradientMap&&this.gradientMap.isTexture&&(d.gradientMap=this.gradientMap.toJSON(a).uuid);void 0!==this.size&&(d.size=this.size);void 0!==this.sizeAttenuation&&(d.sizeAttenuation=this.sizeAttenuation);1!==this.blending&&(d.blending=this.blending);!0===this.flatShading&&(d.flatShading=this.flatShading);0!==this.side&&(d.side=this.side);0!==this.vertexColors&&(d.vertexColors=this.vertexColors);1>this.opacity&&(d.opacity=this.opacity);!0===this.transparent&&(d.transparent=this.transparent);d.depthFunc=this.depthFunc;d.depthTest=this.depthTest;d.depthWrite=this.depthWrite;0!==this.rotation&&(d.rotation=this.rotation);1!==this.linewidth&&(d.linewidth=this.linewidth);void 0!==this.dashSize&&(d.dashSize=this.dashSize);void 0!==this.gapSize&&(d.gapSize=this.gapSize);void 0!==this.scale&&(d.scale=this.scale);!0===this.dithering&&(d.dithering=!0);0<this.alphaTest&&(d.alphaTest=this.alphaTest);!0===this.premultipliedAlpha&&(d.premultipliedAlpha=this.premultipliedAlpha);!0===this.wireframe&&(d.wireframe=this.wireframe);1<this.wireframeLinewidth&&(d.wireframeLinewidth=this.wireframeLinewidth);"round"!==this.wireframeLinecap&&(d.wireframeLinecap=this.wireframeLinecap);"round"!==this.wireframeLinejoin&&(d.wireframeLinejoin=this.wireframeLinejoin);!0===this.morphTargets&&(d.morphTargets=!0);!0===this.skinning&&(d.skinning=!0);!1===this.visible&&(d.visible=!1);"{}"!==JSON.stringify(this.userData)&&(d.userData=this.userData);c&&(c=b(a.textures),a=b(a.images),0<c.length&&(d.textures=c),0<a.length&&(d.images=a));return d},clone:function clone(){return new this.constructor().copy(this)},copy:function copy(a){this.name=a.name;this.fog=a.fog;this.lights=a.lights;this.blending=a.blending;this.side=a.side;this.flatShading=a.flatShading;this.vertexColors=a.vertexColors;this.opacity=a.opacity;this.transparent=a.transparent;this.blendSrc=a.blendSrc;this.blendDst=a.blendDst;this.blendEquation=a.blendEquation;this.blendSrcAlpha=a.blendSrcAlpha;this.blendDstAlpha=a.blendDstAlpha;this.blendEquationAlpha=a.blendEquationAlpha;this.depthFunc=a.depthFunc;this.depthTest=a.depthTest;this.depthWrite=a.depthWrite;this.colorWrite=a.colorWrite;this.precision=a.precision;this.polygonOffset=a.polygonOffset;this.polygonOffsetFactor=a.polygonOffsetFactor;this.polygonOffsetUnits=a.polygonOffsetUnits;this.dithering=a.dithering;this.alphaTest=a.alphaTest;this.premultipliedAlpha=a.premultipliedAlpha;this.overdraw=a.overdraw;this.visible=a.visible;this.userData=JSON.parse(JSON.stringify(a.userData));this.clipShadows=a.clipShadows;this.clipIntersection=a.clipIntersection;var b=a.clippingPlanes,c=null;if(null!==b){var d=b.length;c=Array(d);for(var e=0;e!==d;++e){c[e]=b[e].clone()}}this.clippingPlanes=c;this.shadowSide=a.shadowSide;return this},dispose:function dispose(){this.dispatchEvent({type:"dispose"})}});ka.prototype=Object.create(L.prototype);ka.prototype.constructor=ka;ka.prototype.isMeshBasicMaterial=!0;ka.prototype.copy=function(a){L.prototype.copy.call(this,a);this.color.copy(a.color);this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.specularMap=a.specularMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.combine=a.combine;this.reflectivity=a.reflectivity;this.refractionRatio=a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.skinning=a.skinning;this.morphTargets=a.morphTargets;return this};Ea.prototype=Object.create(L.prototype);Ea.prototype.constructor=Ea;Ea.prototype.isShaderMaterial=!0;Ea.prototype.copy=function(a){L.prototype.copy.call(this,a);this.fragmentShader=a.fragmentShader;this.vertexShader=a.vertexShader;this.uniforms=Ca.clone(a.uniforms);this.defines=Object.assign({},a.defines);this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.lights=a.lights;this.clipping=a.clipping;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;this.extensions=a.extensions;return this};Ea.prototype.toJSON=function(a){a=L.prototype.toJSON.call(this,a);a.uniforms=this.uniforms;a.vertexShader=this.vertexShader;a.fragmentShader=this.fragmentShader;return a};Object.assign(sb.prototype,{set:function set(a,b){this.origin.copy(a);this.direction.copy(b);return this},clone:function clone(){return new this.constructor().copy(this)},copy:function copy(a){this.origin.copy(a.origin);this.direction.copy(a.direction);return this},at:function at(a,b){void 0===b&&(console.warn("THREE.Ray: .at() target is now required"),b=new p);return b.copy(this.direction).multiplyScalar(a).add(this.origin)},lookAt:function lookAt(a){this.direction.copy(a).sub(this.origin).normalize();return this},recast:function(){var a=new p;return function(b){this.origin.copy(this.at(b,a));return this}}(),closestPointToPoint:function closestPointToPoint(a,b){void 0===b&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),b=new p);b.subVectors(a,this.origin);a=b.dot(this.direction);return 0>a?b.copy(this.origin):b.copy(this.direction).multiplyScalar(a).add(this.origin)},distanceToPoint:function distanceToPoint(a){return _Mathsqrt(this.distanceSqToPoint(a))},distanceSqToPoint:function(){var a=new p;return function(b){var c=a.subVectors(b,this.origin).dot(this.direction);if(0>c)return this.origin.distanceToSquared(b);a.copy(this.direction).multiplyScalar(c).add(this.origin);return a.distanceToSquared(b)}}(),distanceSqToSegment:function(){var a=new p,b=new p,c=new p;return function(d,e,f,g){a.copy(d).add(e).multiplyScalar(.5);b.copy(e).sub(d).normalize();c.copy(this.origin).sub(a);var h=.5*d.distanceTo(e),l=-this.direction.dot(b),m=c.dot(this.direction),k=-c.dot(b),n=c.lengthSq(),p=_Mathabs(1-l*l);if(0<p){d=l*k-m;e=l*m-k;var q=h*p;0<=d?e>=-q?e<=q?(h=1/p,d*=h,e*=h,l=d*(d+l*e+2*m)+e*(l*d+e+2*k)+n):(e=h,d=_Mathmax(0,-(l*e+m)),l=-d*d+e*(e+2*k)+n):(e=-h,d=_Mathmax(0,-(l*e+m)),l=-d*d+e*(e+2*k)+n):e<=-q?(d=_Mathmax(0,-(-l*h+m)),e=0<d?-h:_Mathmin(_Mathmax(-h,-k),h),l=-d*d+e*(e+2*k)+n):e<=q?(d=0,e=_Mathmin(_Mathmax(-h,-k),h),l=e*(e+2*k)+n):(d=_Mathmax(0,-(l*h+m)),e=0<d?h:_Mathmin(_Mathmax(-h,-k),h),l=-d*d+e*(e+2*k)+n)}else e=0<l?-h:h,d=_Mathmax(0,-(l*e+m)),l=-d*d+e*(e+2*k)+n;f&&f.copy(this.direction).multiplyScalar(d).add(this.origin);g&&g.copy(b).multiplyScalar(e).add(a);return l}}(),intersectSphere:function(){var a=new p;return function(b,c){a.subVectors(b.center,this.origin);var d=a.dot(this.direction),e=a.dot(a)-d*d;b=b.radius*b.radius;if(e>b)return null;b=_Mathsqrt(b-e);e=d-b;d+=b;return 0>e&&0>d?null:0>e?this.at(d,c):this.at(e,c)}}(),intersectsSphere:function intersectsSphere(a){return this.distanceToPoint(a.center)<=a.radius},distanceToPlane:function distanceToPlane(a){var b=a.normal.dot(this.direction);if(0===b)return 0===a.distanceToPoint(this.origin)?0:null;a=-(this.origin.dot(a.normal)+a.constant)/b;return 0<=a?a:null},intersectPlane:function intersectPlane(a,b){a=this.distanceToPlane(a);return null===a?null:this.at(a,b)},intersectsPlane:function intersectsPlane(a){var b=a.distanceToPoint(this.origin);return 0===b||0>a.normal.dot(this.direction)*b?!0:!1},intersectBox:function intersectBox(a,b){var c=1/this.direction.x,d=1/this.direction.y,e=1/this.direction.z,f=this.origin;if(0<=c){var g=(a.min.x-f.x)*c;c*=a.max.x-f.x}else g=(a.max.x-f.x)*c,c*=a.min.x-f.x;if(0<=d){var h=(a.min.y-f.y)*d;d*=a.max.y-f.y}else h=(a.max.y-f.y)*d,d*=a.min.y-f.y;if(g>d||h>c)return null;if(h>g||g!==g)g=h;if(d<c||c!==c)c=d;0<=e?(h=(a.min.z-f.z)*e,a=(a.max.z-f.z)*e):(h=(a.max.z-f.z)*e,a=(a.min.z-f.z)*e);if(g>a||h>c)return null;if(h>g||g!==g)g=h;if(a<c||c!==c)c=a;return 0>c?null:this.at(0<=g?g:c,b)},intersectsBox:function(){var a=new p;return function(b){return null!==this.intersectBox(b,a)}}(),intersectTriangle:function(){var a=new p,b=new p,c=new p,d=new p;return function(e,f,g,h,l){b.subVectors(f,e);c.subVectors(g,e);d.crossVectors(b,c);f=this.direction.dot(d);if(0<f){if(h)return null;h=1}else if(0>f)h=-1,f=-f;else return null;a.subVectors(this.origin,e);e=h*this.direction.dot(c.crossVectors(a,c));if(0>e)return null;g=h*this.direction.dot(b.cross(a));if(0>g||e+g>f)return null;e=-h*a.dot(d);return 0>e?null:this.at(e/f,l)}}(),applyMatrix4:function applyMatrix4(a){this.origin.applyMatrix4(a);this.direction.transformDirection(a);return this},equals:function equals(a){return a.origin.equals(this.origin)&&a.direction.equals(this.direction)}});Object.assign(Ob.prototype,{set:function set(a,b){this.start.copy(a);this.end.copy(b);return this},clone:function clone(){return new this.constructor().copy(this)},copy:function copy(a){this.start.copy(a.start);this.end.copy(a.end);return this},getCenter:function getCenter(a){void 0===a&&(console.warn("THREE.Line3: .getCenter() target is now required"),a=new p);return a.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function delta(a){void 0===a&&(console.warn("THREE.Line3: .delta() target is now required"),a=new p);return a.subVectors(this.end,this.start)},distanceSq:function distanceSq(){return this.start.distanceToSquared(this.end)},distance:function distance(){return this.start.distanceTo(this.end)},at:function at(a,b){void 0===b&&(console.warn("THREE.Line3: .at() target is now required"),b=new p);return this.delta(b).multiplyScalar(a).add(this.start)},closestPointToPointParameter:function(){var a=new p,b=new p;return function(c,d){a.subVectors(c,this.start);b.subVectors(this.end,this.start);c=b.dot(b);c=b.dot(a)/c;d&&(c=P.clamp(c,0,1));return c}}(),closestPointToPoint:function closestPointToPoint(a,b,c){a=this.closestPointToPointParameter(a,b);void 0===c&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),c=new p);return this.delta(c).multiplyScalar(a).add(this.start)},applyMatrix4:function applyMatrix4(a){this.start.applyMatrix4(a);this.end.applyMatrix4(a);return this},equals:function equals(a){return a.start.equals(this.start)&&a.end.equals(this.end)}});Object.assign(Aa,{getNormal:function(){var a=new p;return function(b,c,d,e){void 0===e&&(console.warn("THREE.Triangle: .getNormal() target is now required"),e=new p);e.subVectors(d,c);a.subVectors(b,c);e.cross(a);b=e.lengthSq();return 0<b?e.multiplyScalar(1/_Mathsqrt(b)):e.set(0,0,0)}}(),getBarycoord:function(){var a=new p,b=new p,c=new p;return function(d,e,f,g,h){a.subVectors(g,e);b.subVectors(f,e);c.subVectors(d,e);d=a.dot(a);e=a.dot(b);f=a.dot(c);var l=b.dot(b);g=b.dot(c);var m=d*l-e*e;void 0===h&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),h=new p);if(0===m)return h.set(-2,-1,-1);m=1/m;l=(l*f-e*g)*m;d=(d*g-e*f)*m;return h.set(1-l-d,d,l)}}(),containsPoint:function(){var a=new p;return function(b,c,d,e){Aa.getBarycoord(b,c,d,e,a);return 0<=a.x&&0<=a.y&&1>=a.x+a.y}}()});Object.assign(Aa.prototype,{set:function set(a,b,c){this.a.copy(a);this.b.copy(b);this.c.copy(c);return this},setFromPointsAndIndices:function setFromPointsAndIndices(a,b,c,d){this.a.copy(a[b]);this.b.copy(a[c]);this.c.copy(a[d]);return this},clone:function clone(){return new this.constructor().copy(this)},copy:function copy(a){this.a.copy(a.a);this.b.copy(a.b);this.c.copy(a.c);return this},getArea:function(){var a=new p,b=new p;return function(){a.subVectors(this.c,this.b);b.subVectors(this.a,this.b);return .5*a.cross(b).length()}}(),getMidpoint:function getMidpoint(a){void 0===a&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),a=new p);return a.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function getNormal(a){return Aa.getNormal(this.a,this.b,this.c,a)},getPlane:function getPlane(a){void 0===a&&(console.warn("THREE.Triangle: .getPlane() target is now required"),a=new p);return a.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function getBarycoord(a,b){return Aa.getBarycoord(a,this.a,this.b,this.c,b)},containsPoint:function containsPoint(a){return Aa.containsPoint(a,this.a,this.b,this.c)},intersectsBox:function intersectsBox(a){return a.intersectsTriangle(this)},closestPointToPoint:function(){var a=new Ha,b=[new Ob,new Ob,new Ob],c=new p,d=new p;return function(e,f){void 0===f&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),f=new p);var g=1/0;a.setFromCoplanarPoints(this.a,this.b,this.c);a.projectPoint(e,c);if(!0===this.containsPoint(c))f.copy(c);else for(b[0].set(this.a,this.b),b[1].set(this.b,this.c),b[2].set(this.c,this.a),e=0;e<b.length;e++){b[e].closestPointToPoint(c,!0,d);var h=c.distanceToSquared(d);h<g&&(g=h,f.copy(d))}return f}}(),equals:function equals(a){return a.a.equals(this.a)&&a.b.equals(this.b)&&a.c.equals(this.c)}});pa.prototype=Object.assign(Object.create(B.prototype),{constructor:pa,isMesh:!0,setDrawMode:function setDrawMode(a){this.drawMode=a},copy:function copy(a){B.prototype.copy.call(this,a);this.drawMode=a.drawMode;void 0!==a.morphTargetInfluences&&(this.morphTargetInfluences=a.morphTargetInfluences.slice());void 0!==a.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},a.morphTargetDictionary));return this},updateMorphTargets:function updateMorphTargets(){var a=this.geometry;if(a.isBufferGeometry){a=a.morphAttributes;var b=Object.keys(a);if(0<b.length){var c=a[b[0]];if(void 0!==c)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},a=0,b=c.length;a<b;a++){var d=c[a].name||a+"";this.morphTargetInfluences.push(0);this.morphTargetDictionary[d]=a}}}else if(c=a.morphTargets,void 0!==c&&0<c.length)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},a=0,b=c.length;a<b;a++){d=c[a].name||a+"",this.morphTargetInfluences.push(0),this.morphTargetDictionary[d]=a}},raycast:function(){function a(a,b,c,d,e,f,g){Aa.getBarycoord(a,b,c,d,u);e.multiplyScalar(u.x);f.multiplyScalar(u.y);g.multiplyScalar(u.z);e.add(f).add(g);return e.clone()}function b(a,b,c,d,e,f,g,h){if(null===(1===b.side?d.intersectTriangle(g,f,e,!0,h):d.intersectTriangle(e,f,g,2!==b.side,h)))return null;x.copy(h);x.applyMatrix4(a.matrixWorld);b=c.ray.origin.distanceTo(x);return b<c.near||b>c.far?null:{distance:b,point:x.clone(),object:a}}function c(c,d,e,f,m,k,n,p){g.fromBufferAttribute(f,k);h.fromBufferAttribute(f,n);l.fromBufferAttribute(f,p);if(c=b(c,c.material,d,e,g,h,l,z))m&&(r.fromBufferAttribute(m,k),q.fromBufferAttribute(m,n),t.fromBufferAttribute(m,p),c.uv=a(z,g,h,l,r,q,t)),m=new Xa(k,n,p),Aa.getNormal(g,h,l,m.normal),c.face=m;return c}var d=new F,e=new sb,f=new Ga,g=new p,h=new p,l=new p,m=new p,k=new p,n=new p,r=new y,q=new y,t=new y,u=new p,z=new p,x=new p;return function(p,v){var u=this.geometry,w=this.material,x=this.matrixWorld;if(void 0!==w&&(null===u.boundingSphere&&u.computeBoundingSphere(),f.copy(u.boundingSphere),f.applyMatrix4(x),!1!==p.ray.intersectsSphere(f)&&(d.getInverse(x),e.copy(p.ray).applyMatrix4(d),null===u.boundingBox||!1!==e.intersectsBox(u.boundingBox)))){var y;if(u.isBufferGeometry){w=u.index;var A=u.attributes.position;u=u.attributes.uv;var H;if(null!==w)for(x=0,H=w.count;x<H;x+=3){var F=w.getX(x),B=w.getX(x+1),G=w.getX(x+2);if(y=c(this,p,e,A,u,F,B,G))y.faceIndex=_Mathfloor(x/3),v.push(y)}else if(void 0!==A)for(x=0,H=A.count;x<H;x+=3){if(F=x,B=x+1,G=x+2,y=c(this,p,e,A,u,F,B,G))y.faceIndex=_Mathfloor(x/3),v.push(y)}}else if(u.isGeometry){x=Array.isArray(w);H=u.vertices;F=u.faces;B=u.faceVertexUvs[0];0<B.length&&(A=B);for(var I=0,K=F.length,J;I<K;I++){J=F[I];y=x?w[J.materialIndex]:w;if(void 0!==y){B=H[J.a];G=H[J.b];var L=H[J.c];if(!0===y.morphTargets){var M=u.morphTargets,O=this.morphTargetInfluences;g.set(0,0,0);h.set(0,0,0);l.set(0,0,0);for(var P=0,R=M.length,T;P<R;P++){T=O[P];if(0!==T){var U=M[P].vertices;g.addScaledVector(m.subVectors(U[J.a],B),T);h.addScaledVector(k.subVectors(U[J.b],G),T);l.addScaledVector(n.subVectors(U[J.c],L),T)}}g.add(B);h.add(G);l.add(L);B=g;G=h;L=l}if(y=b(this,y,p,e,B,G,L,z))A&&A[I]&&(M=A[I],r.copy(M[0]),q.copy(M[1]),t.copy(M[2]),y.uv=a(z,B,G,L,r,q,t)),y.face=J,y.faceIndex=I,v.push(y)}}}}}}(),clone:function clone(){return new this.constructor(this.geometry,this.material).copy(this)}});cb.prototype=Object.create(ca.prototype);cb.prototype.constructor=cb;cb.prototype.isCubeTexture=!0;Object.defineProperty(cb.prototype,"images",{get:function get(){return this.image},set:function set(a){this.image=a}});var Me=new ca,Ne=new cb,Ge=[],Ie=[],Le=new Float32Array(16),Ke=new Float32Array(9),Je=new Float32Array(4);Re.prototype.updateCache=function(a){var b=this.cache;babelHelpers.instanceof(a,Float32Array)&&b.length!==a.length&&(this.cache=new Float32Array(a.length));qa(b,a)};Se.prototype.setValue=function(a,b){for(var c=this.seq,d=0,e=c.length,f;d!==e;++d){f=c[d];f.setValue(a,b[f.id])}};var Wd=/([\w\d_]+)(\])?(\[|\.)?/g;db.prototype.setValue=function(a,b,c){b=this.map[b];void 0!==b&&b.setValue(a,c,this.renderer)};db.prototype.setOptional=function(a,b,c){b=b[c];void 0!==b&&this.setValue(a,c,b)};db.upload=function(a,b,c,d){for(var e=0,f=b.length;e!==f;++e){var g=b[e],h=c[g.id];!1!==h.needsUpdate&&g.setValue(a,h.value,d)}};db.seqWithValue=function(a,b){for(var c=[],d=0,e=a.length,f;d!==e;++d){f=a[d];f.id in b&&c.push(f)}return c};var wg=0,Fg=0;eb.prototype=Object.create(L.prototype);eb.prototype.constructor=eb;eb.prototype.isMeshDepthMaterial=!0;eb.prototype.copy=function(a){L.prototype.copy.call(this,a);this.depthPacking=a.depthPacking;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.map=a.map;this.alphaMap=a.alphaMap;this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;return this};fb.prototype=Object.create(L.prototype);fb.prototype.constructor=fb;fb.prototype.isMeshDistanceMaterial=!0;fb.prototype.copy=function(a){L.prototype.copy.call(this,a);this.referencePosition.copy(a.referencePosition);this.nearDistance=a.nearDistance;this.farDistance=a.farDistance;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.map=a.map;this.alphaMap=a.alphaMap;this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;return this};Qb.prototype=Object.create(ca.prototype);Qb.prototype.constructor=Qb;Qb.prototype.isCanvasTexture=!0;ea.prototype=Object.assign(Object.create(Qa.prototype),{constructor:ea,isPerspectiveCamera:!0,copy:function copy(a,b){Qa.prototype.copy.call(this,a,b);this.fov=a.fov;this.zoom=a.zoom;this.near=a.near;this.far=a.far;this.focus=a.focus;this.aspect=a.aspect;this.view=null===a.view?null:Object.assign({},a.view);this.filmGauge=a.filmGauge;this.filmOffset=a.filmOffset;return this},setFocalLength:function setFocalLength(a){a=.5*this.getFilmHeight()/a;this.fov=2*P.RAD2DEG*_Mathatan2(a);this.updateProjectionMatrix()},getFocalLength:function getFocalLength(){var a=_Mathtan(.5*P.DEG2RAD*this.fov);return .5*this.getFilmHeight()/a},getEffectiveFOV:function getEffectiveFOV(){return 2*P.RAD2DEG*_Mathatan2(_Mathtan(.5*P.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function getFilmWidth(){return this.filmGauge*_Mathmin(this.aspect,1)},getFilmHeight:function getFilmHeight(){return this.filmGauge/_Mathmax(this.aspect,1)},setViewOffset:function setViewOffset(a,b,c,d,e,f){this.aspect=a/b;null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1});this.view.enabled=!0;this.view.fullWidth=a;this.view.fullHeight=b;this.view.offsetX=c;this.view.offsetY=d;this.view.width=e;this.view.height=f;this.updateProjectionMatrix()},clearViewOffset:function clearViewOffset(){null!==this.view&&(this.view.enabled=!1);this.updateProjectionMatrix()},updateProjectionMatrix:function updateProjectionMatrix(){var a=this.near,b=a*_Mathtan(.5*P.DEG2RAD*this.fov)/this.zoom,c=2*b,d=this.aspect*c,e=-.5*d,f=this.view;if(null!==this.view&&this.view.enabled){var g=f.fullWidth,h=f.fullHeight;e+=f.offsetX*d/g;b-=f.offsetY*c/h;d*=f.width/g;c*=f.height/h}f=this.filmOffset;0!==f&&(e+=a*f/this.getFilmWidth());this.projectionMatrix.makePerspective(e,e+d,b,b-c,a,this.far)},toJSON:function toJSON(a){a=B.prototype.toJSON.call(this,a);a.object.fov=this.fov;a.object.zoom=this.zoom;a.object.near=this.near;a.object.far=this.far;a.object.focus=this.focus;a.object.aspect=this.aspect;null!==this.view&&(a.object.view=Object.assign({},this.view));a.object.filmGauge=this.filmGauge;a.object.filmOffset=this.filmOffset;return a}});Ec.prototype=Object.assign(Object.create(ea.prototype),{constructor:Ec,isArrayCamera:!0});Sb.prototype.isFogExp2=!0;Sb.prototype.clone=function(){return new Sb(this.color,this.density)};Sb.prototype.toJSON=function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}};Tb.prototype.isFog=!0;Tb.prototype.clone=function(){return new Tb(this.color,this.near,this.far)};Tb.prototype.toJSON=function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}};sd.prototype=Object.assign(Object.create(B.prototype),{constructor:sd,copy:function copy(a,b){B.prototype.copy.call(this,a,b);null!==a.background&&(this.background=a.background.clone());null!==a.fog&&(this.fog=a.fog.clone());null!==a.overrideMaterial&&(this.overrideMaterial=a.overrideMaterial.clone());this.autoUpdate=a.autoUpdate;this.matrixAutoUpdate=a.matrixAutoUpdate;return this},toJSON:function toJSON(a){var b=B.prototype.toJSON.call(this,a);null!==this.background&&(b.object.background=this.background.toJSON(a));null!==this.fog&&(b.object.fog=this.fog.toJSON());return b}});ib.prototype=Object.create(L.prototype);ib.prototype.constructor=ib;ib.prototype.isSpriteMaterial=!0;ib.prototype.copy=function(a){L.prototype.copy.call(this,a);this.color.copy(a.color);this.map=a.map;this.rotation=a.rotation;return this};Fc.prototype=Object.assign(Object.create(B.prototype),{constructor:Fc,isSprite:!0,raycast:function(){var a=new p,b=new p,c=new p;return function(d,e){b.setFromMatrixPosition(this.matrixWorld);d.ray.closestPointToPoint(b,a);c.setFromMatrixScale(this.matrixWorld);var f=c.x*c.y/4;b.distanceToSquared(a)>f||(f=d.ray.origin.distanceTo(a),f<d.near||f>d.far||e.push({distance:f,point:a.clone(),face:null,object:this}))}}(),clone:function clone(){return new this.constructor(this.material).copy(this)},copy:function copy(a){B.prototype.copy.call(this,a);void 0!==a.center&&this.center.copy(a.center);return this}});Gc.prototype=Object.assign(Object.create(B.prototype),{constructor:Gc,copy:function copy(a){B.prototype.copy.call(this,a,!1);a=a.levels;for(var b=0,c=a.length,d;b<c;b++){d=a[b];this.addLevel(d.object.clone(),d.distance)}return this},addLevel:function addLevel(a,b){void 0===b&&(b=0);b=_Mathabs(b);for(var c=this.levels,d=0;d<c.length&&!(b<c[d].distance);d++){}c.splice(d,0,{distance:b,object:a});this.add(a)},getObjectForDistance:function getObjectForDistance(a){for(var b=this.levels,c=1,d=b.length;c<d&&!(a<b[c].distance);c++){}return b[c-1].object},raycast:function(){var a=new p;return function(b,c){a.setFromMatrixPosition(this.matrixWorld);var d=b.ray.origin.distanceTo(a);this.getObjectForDistance(d).raycast(b,c)}}(),update:function(){var a=new p,b=new p;return function(c){var d=this.levels;if(1<d.length){a.setFromMatrixPosition(c.matrixWorld);b.setFromMatrixPosition(this.matrixWorld);c=a.distanceTo(b);d[0].object.visible=!0;for(var e=1,f=d.length;e<f;e++){if(c>=d[e].distance)d[e-1].object.visible=!1,d[e].object.visible=!0;else break}for(;e<f;e++){d[e].object.visible=!1}}}}(),toJSON:function toJSON(a){a=B.prototype.toJSON.call(this,a);a.object.levels=[];for(var b=this.levels,c=0,d=b.length,e;c<d;c++){e=b[c];a.object.levels.push({object:e.object.uuid,distance:e.distance})}return a}});Object.assign(Hc.prototype,{calculateInverses:function calculateInverses(){this.boneInverses=[];for(var a=0,b=this.bones.length,c;a<b;a++){c=new F;this.bones[a]&&c.getInverse(this.bones[a].matrixWorld);this.boneInverses.push(c)}},pose:function pose(){var a,b,c=0;for(b=this.bones.length;c<b;c++){(a=this.bones[c])&&a.matrixWorld.getInverse(this.boneInverses[c])}c=0;for(b=this.bones.length;c<b;c++){if(a=this.bones[c])a.parent&&a.parent.isBone?(a.matrix.getInverse(a.parent.matrixWorld),a.matrix.multiply(a.matrixWorld)):a.matrix.copy(a.matrixWorld),a.matrix.decompose(a.position,a.quaternion,a.scale)}},update:function(){var a=new F,b=new F;return function(){for(var c=this.bones,d=this.boneInverses,e=this.boneMatrices,f=this.boneTexture,g=0,h=c.length;g<h;g++){a.multiplyMatrices(c[g]?c[g].matrixWorld:b,d[g]),a.toArray(e,16*g)}void 0!==f&&(f.needsUpdate=!0)}}(),clone:function clone(){return new Hc(this.bones,this.boneInverses)},getBoneByName:function getBoneByName(a){for(var b=0,c=this.bones.length,d;b<c;b++){d=this.bones[b];if(d.name===a)return d}}});td.prototype=Object.assign(Object.create(B.prototype),{constructor:td,isBone:!0});ud.prototype=Object.assign(Object.create(pa.prototype),{constructor:ud,isSkinnedMesh:!0,initBones:function initBones(){var a=[],b;if(this.geometry&&void 0!==this.geometry.bones){var c=0;for(b=this.geometry.bones.length;c<b;c++){var d=this.geometry.bones[c],e=new td;a.push(e);e.name=d.name;e.position.fromArray(d.pos);e.quaternion.fromArray(d.rotq);void 0!==d.scl&&e.scale.fromArray(d.scl)}c=0;for(b=this.geometry.bones.length;c<b;c++){d=this.geometry.bones[c],-1!==d.parent&&null!==d.parent&&void 0!==a[d.parent]?a[d.parent].add(a[c]):this.add(a[c])}}this.updateMatrixWorld(!0);return a},bind:function bind(a,b){this.skeleton=a;void 0===b&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),b=this.matrixWorld);this.bindMatrix.copy(b);this.bindMatrixInverse.getInverse(b)},pose:function pose(){this.skeleton.pose()},normalizeSkinWeights:function normalizeSkinWeights(){var a;if(this.geometry&&this.geometry.isGeometry)for(a=0;a<this.geometry.skinWeights.length;a++){var b=this.geometry.skinWeights[a],c=1/b.manhattanLength();1/0!==c?b.multiplyScalar(c):b.set(1,0,0,0)}else if(this.geometry&&this.geometry.isBufferGeometry){b=new U;var d=this.geometry.attributes.skinWeight;for(a=0;a<d.count;a++){b.x=d.getX(a),b.y=d.getY(a),b.z=d.getZ(a),b.w=d.getW(a),c=1/b.manhattanLength(),1/0!==c?b.multiplyScalar(c):b.set(1,0,0,0),d.setXYZW(a,b.x,b.y,b.z,b.w)}}},updateMatrixWorld:function updateMatrixWorld(a){pa.prototype.updateMatrixWorld.call(this,a);"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function clone(){return new this.constructor(this.geometry,this.material).copy(this)}});T.prototype=Object.create(L.prototype);T.prototype.constructor=T;T.prototype.isLineBasicMaterial=!0;T.prototype.copy=function(a){L.prototype.copy.call(this,a);this.color.copy(a.color);this.linewidth=a.linewidth;this.linecap=a.linecap;this.linejoin=a.linejoin;return this};ma.prototype=Object.assign(Object.create(B.prototype),{constructor:ma,isLine:!0,computeLineDistances:function(){var a=new p,b=new p;return function(){var c=this.geometry;if(c.isBufferGeometry){if(null===c.index){for(var d=c.attributes.position,e=[0],f=1,g=d.count;f<g;f++){a.fromBufferAttribute(d,f-1),b.fromBufferAttribute(d,f),e[f]=e[f-1],e[f]+=a.distanceTo(b)}c.addAttribute("lineDistance",new A(e,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");}else if(c.isGeometry)for(d=c.vertices,e=c.lineDistances,e[0]=0,f=1,g=d.length;f<g;f++){e[f]=e[f-1],e[f]+=d[f-1].distanceTo(d[f])}return this}}(),raycast:function(){var a=new F,b=new sb,c=new Ga;return function(d,e){var f=d.linePrecision;f*=f;var g=this.geometry,h=this.matrixWorld;null===g.boundingSphere&&g.computeBoundingSphere();c.copy(g.boundingSphere);c.applyMatrix4(h);if(!1!==d.ray.intersectsSphere(c)){a.getInverse(h);b.copy(d.ray).applyMatrix4(a);var l=new p,m=new p;h=new p;var k=new p,n=this&&this.isLineSegments?2:1;if(g.isBufferGeometry){var r=g.index,q=g.attributes.position.array;if(null!==r){r=r.array;g=0;for(var t=r.length-1,u;g<t;g+=n){u=r[g+1];l.fromArray(q,3*r[g]);m.fromArray(q,3*u);u=b.distanceSqToSegment(l,m,k,h);u>f||(k.applyMatrix4(this.matrixWorld),u=d.ray.origin.distanceTo(k),u<d.near||u>d.far||e.push({distance:u,point:h.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this}))}}else for(g=0,t=q.length/3-1;g<t;g+=n){l.fromArray(q,3*g),m.fromArray(q,3*g+3),u=b.distanceSqToSegment(l,m,k,h),u>f||(k.applyMatrix4(this.matrixWorld),u=d.ray.origin.distanceTo(k),u<d.near||u>d.far||e.push({distance:u,point:h.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this}))}}else if(g.isGeometry)for(l=g.vertices,m=l.length,g=0;g<m-1;g+=n){u=b.distanceSqToSegment(l[g],l[g+1],k,h),u>f||(k.applyMatrix4(this.matrixWorld),u=d.ray.origin.distanceTo(k),u<d.near||u>d.far||e.push({distance:u,point:h.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this}))}}}}(),clone:function clone(){return new this.constructor(this.geometry,this.material).copy(this)}});aa.prototype=Object.assign(Object.create(ma.prototype),{constructor:aa,isLineSegments:!0,computeLineDistances:function(){var a=new p,b=new p;return function(){var c=this.geometry;if(c.isBufferGeometry){if(null===c.index){for(var d=c.attributes.position,e=[],f=0,g=d.count;f<g;f+=2){a.fromBufferAttribute(d,f),b.fromBufferAttribute(d,f+1),e[f]=0===f?0:e[f-1],e[f+1]=e[f]+a.distanceTo(b)}c.addAttribute("lineDistance",new A(e,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");}else if(c.isGeometry)for(d=c.vertices,e=c.lineDistances,f=0,g=d.length;f<g;f+=2){a.copy(d[f]),b.copy(d[f+1]),e[f]=0===f?0:e[f-1],e[f+1]=e[f]+a.distanceTo(b)}return this}}()});vd.prototype=Object.assign(Object.create(ma.prototype),{constructor:vd,isLineLoop:!0});Ia.prototype=Object.create(L.prototype);Ia.prototype.constructor=Ia;Ia.prototype.isPointsMaterial=!0;Ia.prototype.copy=function(a){L.prototype.copy.call(this,a);this.color.copy(a.color);this.map=a.map;this.size=a.size;this.sizeAttenuation=a.sizeAttenuation;this.morphTargets=a.morphTargets;return this};Ub.prototype=Object.assign(Object.create(B.prototype),{constructor:Ub,isPoints:!0,raycast:function(){var a=new F,b=new sb,c=new Ga;return function(d,e){function f(a,c){var f=b.distanceSqToPoint(a);f<k&&(b.closestPointToPoint(a,n),n.applyMatrix4(l),a=d.ray.origin.distanceTo(n),a<d.near||a>d.far||e.push({distance:a,distanceToRay:_Mathsqrt(f),point:n.clone(),index:c,face:null,object:g}))}var g=this,h=this.geometry,l=this.matrixWorld,m=d.params.Points.threshold;null===h.boundingSphere&&h.computeBoundingSphere();c.copy(h.boundingSphere);c.applyMatrix4(l);c.radius+=m;if(!1!==d.ray.intersectsSphere(c)){a.getInverse(l);b.copy(d.ray).applyMatrix4(a);m/=(this.scale.x+this.scale.y+this.scale.z)/3;var k=m*m;m=new p;var n=new p;if(h.isBufferGeometry){var r=h.index;h=h.attributes.position.array;if(null!==r){var q=r.array;r=0;for(var t=q.length,u;r<t;r++){u=q[r];m.fromArray(h,3*u);f(m,u)}}else for(r=0,q=h.length/3;r<q;r++){m.fromArray(h,3*r),f(m,r)}}else for(m=h.vertices,r=0,q=m.length;r<q;r++){f(m[r],r)}}}}(),clone:function clone(){return new this.constructor(this.geometry,this.material).copy(this)}});wd.prototype=Object.assign(Object.create(B.prototype),{constructor:wd,isGroup:!0});$d.prototype=Object.assign(Object.create(ca.prototype),{constructor:$d,isVideoTexture:!0,update:function update(){var a=this.image;a.readyState>=a.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}});Vb.prototype=Object.create(ca.prototype);Vb.prototype.constructor=Vb;Vb.prototype.isCompressedTexture=!0;Ic.prototype=Object.create(ca.prototype);Ic.prototype.constructor=Ic;Ic.prototype.isDepthTexture=!0;Wb.prototype=Object.create(G.prototype);Wb.prototype.constructor=Wb;Jc.prototype=Object.create(J.prototype);Jc.prototype.constructor=Jc;Xb.prototype=Object.create(G.prototype);Xb.prototype.constructor=Xb;Kc.prototype=Object.create(J.prototype);Kc.prototype.constructor=Kc;va.prototype=Object.create(G.prototype);va.prototype.constructor=va;Lc.prototype=Object.create(J.prototype);Lc.prototype.constructor=Lc;Yb.prototype=Object.create(va.prototype);Yb.prototype.constructor=Yb;Mc.prototype=Object.create(J.prototype);Mc.prototype.constructor=Mc;ub.prototype=Object.create(va.prototype);ub.prototype.constructor=ub;Nc.prototype=Object.create(J.prototype);Nc.prototype.constructor=Nc;Zb.prototype=Object.create(va.prototype);Zb.prototype.constructor=Zb;Oc.prototype=Object.create(J.prototype);Oc.prototype.constructor=Oc;$b.prototype=Object.create(va.prototype);$b.prototype.constructor=$b;Pc.prototype=Object.create(J.prototype);Pc.prototype.constructor=Pc;ac.prototype=Object.create(G.prototype);ac.prototype.constructor=ac;Qc.prototype=Object.create(J.prototype);Qc.prototype.constructor=Qc;bc.prototype=Object.create(G.prototype);bc.prototype.constructor=bc;Rc.prototype=Object.create(J.prototype);Rc.prototype.constructor=Rc;cc.prototype=Object.create(G.prototype);cc.prototype.constructor=cc;var Sg={triangulate:function triangulate(a,b,c){c=c||2;var d=b&&b.length,e=d?b[0]*c:a.length,f=af(a,0,e,c,!0),g=[];if(!f)return g;var h;if(d){var l=c;d=[];var m,k=0;for(m=b.length;k<m;k++){var n=b[k]*l,p=k<m-1?b[k+1]*l:a.length;n=af(a,n,p,l,!1);n===n.next&&(n.steiner=!0);d.push(Pg(n))}d.sort(Ng);for(k=0;k<d.length;k++){b=d[k];l=f;if(l=Og(b,l))b=df(l,b),Tc(b,b.next);f=Tc(f,f.next)}}if(a.length>80*c){var q=h=a[0],t=d=a[1];for(l=c;l<e;l+=c){k=a[l],b=a[l+1],k<q&&(q=k),b<t&&(t=b),k>h&&(h=k),b>d&&(d=b)}h=_Mathmax(h-q,d-t);h=0!==h?1/h:0}Uc(f,g,c,q,t,h);return g}},Za={area:function area(a){for(var b=a.length,c=0,d=b-1,e=0;e<b;d=e++){c+=a[d].x*a[e].y-a[e].x*a[d].y}return .5*c},isClockWise:function isClockWise(a){return 0>Za.area(a)},triangulateShape:function triangulateShape(a,b){var c=[],d=[],e=[];ef(a);ff(c,a);var f=a.length;b.forEach(ef);for(a=0;a<b.length;a++){d.push(f),f+=b[a].length,ff(c,b[a])}b=Sg.triangulate(c,d);for(a=0;a<b.length;a+=3){e.push(b.slice(a,a+3))}return e}};wb.prototype=Object.create(J.prototype);wb.prototype.constructor=wb;wb.prototype.toJSON=function(){var a=J.prototype.toJSON.call(this);return gf(this.parameters.shapes,this.parameters.options,a)};Sa.prototype=Object.create(G.prototype);Sa.prototype.constructor=Sa;Sa.prototype.toJSON=function(){var a=G.prototype.toJSON.call(this);return gf(this.parameters.shapes,this.parameters.options,a)};var Qg={generateTopUV:function generateTopUV(a,b,c,d,e){a=b[3*d];d=b[3*d+1];var f=b[3*e];e=b[3*e+1];return[new y(b[3*c],b[3*c+1]),new y(a,d),new y(f,e)]},generateSideWallUV:function generateSideWallUV(a,b,c,d,e,f){a=b[3*c];var g=b[3*c+1];c=b[3*c+2];var h=b[3*d],l=b[3*d+1];d=b[3*d+2];var m=b[3*e],k=b[3*e+1];e=b[3*e+2];var n=b[3*f],p=b[3*f+1];b=b[3*f+2];return .01>_Mathabs(g-l)?[new y(a,1-c),new y(h,1-d),new y(m,1-e),new y(n,1-b)]:[new y(g,1-c),new y(l,1-d),new y(k,1-e),new y(p,1-b)]}};Wc.prototype=Object.create(J.prototype);Wc.prototype.constructor=Wc;dc.prototype=Object.create(Sa.prototype);dc.prototype.constructor=dc;Xc.prototype=Object.create(J.prototype);Xc.prototype.constructor=Xc;xb.prototype=Object.create(G.prototype);xb.prototype.constructor=xb;Yc.prototype=Object.create(J.prototype);Yc.prototype.constructor=Yc;ec.prototype=Object.create(G.prototype);ec.prototype.constructor=ec;Zc.prototype=Object.create(J.prototype);Zc.prototype.constructor=Zc;fc.prototype=Object.create(G.prototype);fc.prototype.constructor=fc;yb.prototype=Object.create(J.prototype);yb.prototype.constructor=yb;yb.prototype.toJSON=function(){var a=J.prototype.toJSON.call(this);return hf(this.parameters.shapes,a)};zb.prototype=Object.create(G.prototype);zb.prototype.constructor=zb;zb.prototype.toJSON=function(){var a=G.prototype.toJSON.call(this);return hf(this.parameters.shapes,a)};gc.prototype=Object.create(G.prototype);gc.prototype.constructor=gc;Ab.prototype=Object.create(J.prototype);Ab.prototype.constructor=Ab;$a.prototype=Object.create(G.prototype);$a.prototype.constructor=$a;$c.prototype=Object.create(Ab.prototype);$c.prototype.constructor=$c;ad.prototype=Object.create($a.prototype);ad.prototype.constructor=ad;bd.prototype=Object.create(J.prototype);bd.prototype.constructor=bd;hc.prototype=Object.create(G.prototype);hc.prototype.constructor=hc;var za=Object.freeze({WireframeGeometry:Wb,ParametricGeometry:Jc,ParametricBufferGeometry:Xb,TetrahedronGeometry:Lc,TetrahedronBufferGeometry:Yb,OctahedronGeometry:Mc,OctahedronBufferGeometry:ub,IcosahedronGeometry:Nc,IcosahedronBufferGeometry:Zb,DodecahedronGeometry:Oc,DodecahedronBufferGeometry:$b,PolyhedronGeometry:Kc,PolyhedronBufferGeometry:va,TubeGeometry:Pc,TubeBufferGeometry:ac,TorusKnotGeometry:Qc,TorusKnotBufferGeometry:bc,TorusGeometry:Rc,TorusBufferGeometry:cc,TextGeometry:Wc,TextBufferGeometry:dc,SphereGeometry:Xc,SphereBufferGeometry:xb,RingGeometry:Yc,RingBufferGeometry:ec,PlaneGeometry:Cc,PlaneBufferGeometry:rb,LatheGeometry:Zc,LatheBufferGeometry:fc,ShapeGeometry:yb,ShapeBufferGeometry:zb,ExtrudeGeometry:wb,ExtrudeBufferGeometry:Sa,EdgesGeometry:gc,ConeGeometry:$c,ConeBufferGeometry:ad,CylinderGeometry:Ab,CylinderBufferGeometry:$a,CircleGeometry:bd,CircleBufferGeometry:hc,BoxGeometry:Nb,BoxBufferGeometry:pb});Bb.prototype=Object.create(L.prototype);Bb.prototype.constructor=Bb;Bb.prototype.isShadowMaterial=!0;Bb.prototype.copy=function(a){L.prototype.copy.call(this,a);this.color.copy(a.color);return this};ic.prototype=Object.create(Ea.prototype);ic.prototype.constructor=ic;ic.prototype.isRawShaderMaterial=!0;Ta.prototype=Object.create(L.prototype);Ta.prototype.constructor=Ta;Ta.prototype.isMeshStandardMaterial=!0;Ta.prototype.copy=function(a){L.prototype.copy.call(this,a);this.defines={STANDARD:""};this.color.copy(a.color);this.roughness=a.roughness;this.metalness=a.metalness;this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.emissive.copy(a.emissive);this.emissiveMap=a.emissiveMap;this.emissiveIntensity=a.emissiveIntensity;this.bumpMap=a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=a.normalMap;this.normalScale.copy(a.normalScale);this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;this.roughnessMap=a.roughnessMap;this.metalnessMap=a.metalnessMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.envMapIntensity=a.envMapIntensity;this.refractionRatio=a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;return this};Cb.prototype=Object.create(Ta.prototype);Cb.prototype.constructor=Cb;Cb.prototype.isMeshPhysicalMaterial=!0;Cb.prototype.copy=function(a){Ta.prototype.copy.call(this,a);this.defines={PHYSICAL:""};this.reflectivity=a.reflectivity;this.clearCoat=a.clearCoat;this.clearCoatRoughness=a.clearCoatRoughness;return this};Ja.prototype=Object.create(L.prototype);Ja.prototype.constructor=Ja;Ja.prototype.isMeshPhongMaterial=!0;Ja.prototype.copy=function(a){L.prototype.copy.call(this,a);this.color.copy(a.color);this.specular.copy(a.specular);this.shininess=a.shininess;this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.emissive.copy(a.emissive);this.emissiveMap=a.emissiveMap;this.emissiveIntensity=a.emissiveIntensity;this.bumpMap=a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=a.normalMap;this.normalScale.copy(a.normalScale);this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;this.specularMap=a.specularMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.combine=a.combine;this.reflectivity=a.reflectivity;this.refractionRatio=a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;return this};Db.prototype=Object.create(Ja.prototype);Db.prototype.constructor=Db;Db.prototype.isMeshToonMaterial=!0;Db.prototype.copy=function(a){Ja.prototype.copy.call(this,a);this.gradientMap=a.gradientMap;return this};Eb.prototype=Object.create(L.prototype);Eb.prototype.constructor=Eb;Eb.prototype.isMeshNormalMaterial=!0;Eb.prototype.copy=function(a){L.prototype.copy.call(this,a);this.bumpMap=a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=a.normalMap;this.normalScale.copy(a.normalScale);this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;return this};Fb.prototype=Object.create(L.prototype);Fb.prototype.constructor=Fb;Fb.prototype.isMeshLambertMaterial=!0;Fb.prototype.copy=function(a){L.prototype.copy.call(this,a);this.color.copy(a.color);this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.emissive.copy(a.emissive);this.emissiveMap=a.emissiveMap;this.emissiveIntensity=a.emissiveIntensity;this.specularMap=a.specularMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.combine=a.combine;this.reflectivity=a.reflectivity;this.refractionRatio=a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;return this};Gb.prototype=Object.create(T.prototype);Gb.prototype.constructor=Gb;Gb.prototype.isLineDashedMaterial=!0;Gb.prototype.copy=function(a){T.prototype.copy.call(this,a);this.scale=a.scale;this.dashSize=a.dashSize;this.gapSize=a.gapSize;return this};var Tg=Object.freeze({ShadowMaterial:Bb,SpriteMaterial:ib,RawShaderMaterial:ic,ShaderMaterial:Ea,PointsMaterial:Ia,MeshPhysicalMaterial:Cb,MeshStandardMaterial:Ta,MeshPhongMaterial:Ja,MeshToonMaterial:Db,MeshNormalMaterial:Eb,MeshLambertMaterial:Fb,MeshDepthMaterial:eb,MeshDistanceMaterial:fb,MeshBasicMaterial:ka,LineDashedMaterial:Gb,LineBasicMaterial:T,Material:L}),Kb={enabled:!1,files:{},add:function add(a,b){!1!==this.enabled&&(this.files[a]=b)},get:function get(a){if(!1!==this.enabled)return this.files[a]},remove:function remove(a){delete this.files[a]},clear:function clear(){this.files={}}},wa=new ce,bb={};Object.assign(Ka.prototype,{load:function load(a,b,c,d){void 0===a&&(a="");void 0!==this.path&&(a=this.path+a);a=this.manager.resolveURL(a);var e=this,f=Kb.get(a);if(void 0!==f)return e.manager.itemStart(a),setTimeout(function(){b&&b(f);e.manager.itemEnd(a)},0),f;if(void 0!==bb[a])bb[a].push({onLoad:b,onProgress:c,onError:d});else{var g=a.match(/^data:(.*?)(;base64)?,(.*)$/);if(g){c=g[1];var h=!!g[2];g=g[3];g=window.decodeURIComponent(g);h&&(g=window.atob(g));try{var l=(this.responseType||"").toLowerCase();switch(l){case"arraybuffer":case"blob":var m=new Uint8Array(g.length);for(h=0;h<g.length;h++){m[h]=g.charCodeAt(h)}var k="blob"===l?new Blob([m.buffer],{type:c}):m.buffer;break;case"document":k=new DOMParser().parseFromString(g,c);break;case"json":k=JSON.parse(g);break;default:k=g;}window.setTimeout(function(){b&&b(k);e.manager.itemEnd(a)},0)}catch(r){window.setTimeout(function(){d&&d(r);e.manager.itemEnd(a);e.manager.itemError(a)},0)}}else{bb[a]=[];bb[a].push({onLoad:b,onProgress:c,onError:d});var n=new XMLHttpRequest;n.open("GET",a,!0);n.addEventListener("load",function(b){var c=this.response;Kb.add(a,c);var d=bb[a];delete bb[a];if(200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received.");for(var f=0,g=d.length,h;f<g;f++){h=d[f];if(h.onLoad)h.onLoad(c)}e.manager.itemEnd(a)}else{f=0;for(g=d.length;f<g;f++){if(h=d[f],h.onError)h.onError(b)}e.manager.itemEnd(a);e.manager.itemError(a)}},!1);n.addEventListener("progress",function(b){for(var c=bb[a],d=0,e=c.length,f;d<e;d++){f=c[d];if(f.onProgress)f.onProgress(b)}},!1);n.addEventListener("error",function(b){var c=bb[a];delete bb[a];for(var d=0,f=c.length,g;d<f;d++){g=c[d];if(g.onError)g.onError(b)}e.manager.itemEnd(a);e.manager.itemError(a)},!1);void 0!==this.responseType&&(n.responseType=this.responseType);void 0!==this.withCredentials&&(n.withCredentials=this.withCredentials);n.overrideMimeType&&n.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain");for(h in this.requestHeader){n.setRequestHeader(h,this.requestHeader[h])}n.send(null)}e.manager.itemStart(a);return n}},setPath:function setPath(a){this.path=a;return this},setResponseType:function setResponseType(a){this.responseType=a;return this},setWithCredentials:function setWithCredentials(a){this.withCredentials=a;return this},setMimeType:function setMimeType(a){this.mimeType=a;return this},setRequestHeader:function setRequestHeader(a){this.requestHeader=a;return this}});Object.assign(jf.prototype,{load:function load(a,b,c,d){function e(e){l.load(a[e],function(a){a=f._parser(a,!0);g[e]={width:a.width,height:a.height,format:a.format,mipmaps:a.mipmaps};m+=1;6===m&&(1===a.mipmapCount&&(h.minFilter=1006),h.format=a.format,h.needsUpdate=!0,b&&b(h))},c,d)}var f=this,g=[],h=new Vb;h.image=g;var l=new Ka(this.manager);l.setPath(this.path);l.setResponseType("arraybuffer");if(Array.isArray(a))for(var m=0,k=0,n=a.length;k<n;++k){e(k)}else l.load(a,function(a){a=f._parser(a,!0);if(a.isCubemap)for(var c=a.mipmaps.length/a.mipmapCount,d=0;d<c;d++){g[d]={mipmaps:[]};for(var e=0;e<a.mipmapCount;e++){g[d].mipmaps.push(a.mipmaps[d*a.mipmapCount+e]),g[d].format=a.format,g[d].width=a.width,g[d].height=a.height}}else h.image.width=a.width,h.image.height=a.height,h.mipmaps=a.mipmaps;1===a.mipmapCount&&(h.minFilter=1006);h.format=a.format;h.needsUpdate=!0;b&&b(h)},c,d);return h},setPath:function setPath(a){this.path=a;return this}});Object.assign(de.prototype,{load:function load(a,b,c,d){var e=this,f=new lb,g=new Ka(this.manager);g.setResponseType("arraybuffer");g.load(a,function(a){if(a=e._parser(a))void 0!==a.image?f.image=a.image:void 0!==a.data&&(f.image.width=a.width,f.image.height=a.height,f.image.data=a.data),f.wrapS=void 0!==a.wrapS?a.wrapS:1001,f.wrapT=void 0!==a.wrapT?a.wrapT:1001,f.magFilter=void 0!==a.magFilter?a.magFilter:1006,f.minFilter=void 0!==a.minFilter?a.minFilter:1008,f.anisotropy=void 0!==a.anisotropy?a.anisotropy:1,void 0!==a.format&&(f.format=a.format),void 0!==a.type&&(f.type=a.type),void 0!==a.mipmaps&&(f.mipmaps=a.mipmaps),1===a.mipmapCount&&(f.minFilter=1006),f.needsUpdate=!0,b&&b(f,a)},c,d);return f}});Object.assign(cd.prototype,{crossOrigin:"Anonymous",load:function load(a,b,c,d){function e(){l.removeEventListener("load",e,!1);l.removeEventListener("error",f,!1);Kb.add(a,this);b&&b(this);g.manager.itemEnd(a)}function f(b){l.removeEventListener("load",e,!1);l.removeEventListener("error",f,!1);d&&d(b);g.manager.itemEnd(a);g.manager.itemError(a)}void 0===a&&(a="");void 0!==this.path&&(a=this.path+a);a=this.manager.resolveURL(a);var g=this,h=Kb.get(a);if(void 0!==h)return g.manager.itemStart(a),setTimeout(function(){b&&b(h);g.manager.itemEnd(a)},0),h;var l=document.createElementNS("http://www.w3.org/1999/xhtml","img");l.addEventListener("load",e,!1);l.addEventListener("error",f,!1);"data:"!==a.substr(0,5)&&void 0!==this.crossOrigin&&(l.crossOrigin=this.crossOrigin);g.manager.itemStart(a);l.src=a;return l},setCrossOrigin:function setCrossOrigin(a){this.crossOrigin=a;return this},setPath:function setPath(a){this.path=a;return this}});Object.assign(ee.prototype,{crossOrigin:"Anonymous",load:function load(a,b,c,d){function e(c){g.load(a[c],function(a){f.images[c]=a;h++;6===h&&(f.needsUpdate=!0,b&&b(f))},void 0,d)}var f=new cb,g=new cd(this.manager);g.setCrossOrigin(this.crossOrigin);g.setPath(this.path);var h=0;for(c=0;c<a.length;++c){e(c)}return f},setCrossOrigin:function setCrossOrigin(a){this.crossOrigin=a;return this},setPath:function setPath(a){this.path=a;return this}});Object.assign(yd.prototype,{crossOrigin:"Anonymous",load:function load(a,b,c,d){var e=new ca,f=new cd(this.manager);f.setCrossOrigin(this.crossOrigin);f.setPath(this.path);f.load(a,function(c){e.image=c;c=0<a.search(/\.(jpg|jpeg)$/)||0===a.search(/^data:image\/jpeg/);e.format=c?1022:1023;e.needsUpdate=!0;void 0!==b&&b(e)},c,d);return e},setCrossOrigin:function setCrossOrigin(a){this.crossOrigin=a;return this},setPath:function setPath(a){this.path=a;return this}});Object.assign(I.prototype,{getPoint:function getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.");return null},getPointAt:function getPointAt(a,b){a=this.getUtoTmapping(a);return this.getPoint(a,b)},getPoints:function getPoints(a){void 0===a&&(a=5);for(var b=[],c=0;c<=a;c++){b.push(this.getPoint(c/a))}return b},getSpacedPoints:function getSpacedPoints(a){void 0===a&&(a=5);for(var b=[],c=0;c<=a;c++){b.push(this.getPointAt(c/a))}return b},getLength:function getLength(){var a=this.getLengths();return a[a.length-1]},getLengths:function getLengths(a){void 0===a&&(a=this.arcLengthDivisions);if(this.cacheArcLengths&&this.cacheArcLengths.length===a+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var b=[],c=this.getPoint(0),d,e=0;b.push(0);for(d=1;d<=a;d++){var f=this.getPoint(d/a);e+=f.distanceTo(c);b.push(e);c=f}return this.cacheArcLengths=b},updateArcLengths:function updateArcLengths(){this.needsUpdate=!0;this.getLengths()},getUtoTmapping:function getUtoTmapping(a,b){var c=this.getLengths(),d=c.length;b=b?b:a*c[d-1];for(var e=0,f=d-1,g;e<=f;){if(a=_Mathfloor(e+(f-e)/2),g=c[a]-b,0>g)e=a+1;else if(0<g)f=a-1;else{f=a;break}}a=f;if(c[a]===b)return a/(d-1);e=c[a];return(a+(b-e)/(c[a+1]-e))/(d-1)},getTangent:function getTangent(a){var b=a-1E-4;a+=1E-4;0>b&&(b=0);1<a&&(a=1);b=this.getPoint(b);return this.getPoint(a).clone().sub(b).normalize()},getTangentAt:function getTangentAt(a){a=this.getUtoTmapping(a);return this.getTangent(a)},computeFrenetFrames:function computeFrenetFrames(a,b){var c=new p,d=[],e=[],f=[],g=new p,h=new F,l;for(l=0;l<=a;l++){var m=l/a;d[l]=this.getTangentAt(m);d[l].normalize()}e[0]=new p;f[0]=new p;l=Number.MAX_VALUE;m=_Mathabs(d[0].x);var k=_Mathabs(d[0].y),n=_Mathabs(d[0].z);m<=l&&(l=m,c.set(1,0,0));k<=l&&(l=k,c.set(0,1,0));n<=l&&c.set(0,0,1);g.crossVectors(d[0],c).normalize();e[0].crossVectors(d[0],g);f[0].crossVectors(d[0],e[0]);for(l=1;l<=a;l++){e[l]=e[l-1].clone(),f[l]=f[l-1].clone(),g.crossVectors(d[l-1],d[l]),g.length()>_NumberEPSILON&&(g.normalize(),c=_Mathacos(P.clamp(d[l-1].dot(d[l]),-1,1)),e[l].applyMatrix4(h.makeRotationAxis(g,c))),f[l].crossVectors(d[l],e[l])}if(!0===b)for(c=_Mathacos(P.clamp(e[0].dot(e[a]),-1,1)),c/=a,0<d[0].dot(g.crossVectors(e[0],e[a]))&&(c=-c),l=1;l<=a;l++){e[l].applyMatrix4(h.makeRotationAxis(d[l],c*l)),f[l].crossVectors(d[l],e[l])}return{tangents:d,normals:e,binormals:f}},clone:function clone(){return new this.constructor().copy(this)},copy:function copy(a){this.arcLengthDivisions=a.arcLengthDivisions;return this},toJSON:function toJSON(){var a={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"},arcLengthDivisions:this.arcLengthDivisions,type:this.type};return a},fromJSON:function fromJSON(a){this.arcLengthDivisions=a.arcLengthDivisions;return this}});xa.prototype=Object.create(I.prototype);xa.prototype.constructor=xa;xa.prototype.isEllipseCurve=!0;xa.prototype.getPoint=function(a,b){b=b||new y;for(var c=2*_MathPI,d=this.aEndAngle-this.aStartAngle,e=_Mathabs(d)<_NumberEPSILON;0>d;){d+=c}for(;d>c;){d-=c}d<_NumberEPSILON&&(d=e?0:c);!0!==this.aClockwise||e||(d=d===c?-c:d-c);c=this.aStartAngle+a*d;a=this.aX+this.xRadius*_Mathcos(c);var f=this.aY+this.yRadius*_Mathsin(c);0!==this.aRotation&&(c=_Mathcos(this.aRotation),d=_Mathsin(this.aRotation),e=a-this.aX,f-=this.aY,a=e*c-f*d+this.aX,f=e*d+f*c+this.aY);return b.set(a,f)};xa.prototype.copy=function(a){I.prototype.copy.call(this,a);this.aX=a.aX;this.aY=a.aY;this.xRadius=a.xRadius;this.yRadius=a.yRadius;this.aStartAngle=a.aStartAngle;this.aEndAngle=a.aEndAngle;this.aClockwise=a.aClockwise;this.aRotation=a.aRotation;return this};xa.prototype.toJSON=function(){var a=I.prototype.toJSON.call(this);a.aX=this.aX;a.aY=this.aY;a.xRadius=this.xRadius;a.yRadius=this.yRadius;a.aStartAngle=this.aStartAngle;a.aEndAngle=this.aEndAngle;a.aClockwise=this.aClockwise;a.aRotation=this.aRotation;return a};xa.prototype.fromJSON=function(a){I.prototype.fromJSON.call(this,a);this.aX=a.aX;this.aY=a.aY;this.xRadius=a.xRadius;this.yRadius=a.yRadius;this.aStartAngle=a.aStartAngle;this.aEndAngle=a.aEndAngle;this.aClockwise=a.aClockwise;this.aRotation=a.aRotation;return this};jc.prototype=Object.create(xa.prototype);jc.prototype.constructor=jc;jc.prototype.isArcCurve=!0;var Rd=new p,Ae=new fe,Be=new fe,Ce=new fe;ra.prototype=Object.create(I.prototype);ra.prototype.constructor=ra;ra.prototype.isCatmullRomCurve3=!0;ra.prototype.getPoint=function(a,b){b=b||new p;var c=this.points,d=c.length;a*=d-(this.closed?0:1);var e=_Mathfloor(a);a-=e;this.closed?e+=0<e?0:(_Mathfloor(_Mathabs(e)/d)+1)*d:0===a&&e===d-1&&(e=d-2,a=1);if(this.closed||0<e)var f=c[(e-1)%d];else Rd.subVectors(c[0],c[1]).add(c[0]),f=Rd;var g=c[e%d],h=c[(e+1)%d];this.closed||e+2<d?c=c[(e+2)%d]:(Rd.subVectors(c[d-1],c[d-2]).add(c[d-1]),c=Rd);if("centripetal"===this.curveType||"chordal"===this.curveType){var l="chordal"===this.curveType?.5:.25;d=_Mathpow(f.distanceToSquared(g),l);e=_Mathpow(g.distanceToSquared(h),l);l=_Mathpow(h.distanceToSquared(c),l);1E-4>e&&(e=1);1E-4>d&&(d=e);1E-4>l&&(l=e);Ae.initNonuniformCatmullRom(f.x,g.x,h.x,c.x,d,e,l);Be.initNonuniformCatmullRom(f.y,g.y,h.y,c.y,d,e,l);Ce.initNonuniformCatmullRom(f.z,g.z,h.z,c.z,d,e,l)}else"catmullrom"===this.curveType&&(Ae.initCatmullRom(f.x,g.x,h.x,c.x,this.tension),Be.initCatmullRom(f.y,g.y,h.y,c.y,this.tension),Ce.initCatmullRom(f.z,g.z,h.z,c.z,this.tension));b.set(Ae.calc(a),Be.calc(a),Ce.calc(a));return b};ra.prototype.copy=function(a){I.prototype.copy.call(this,a);this.points=[];for(var b=0,c=a.points.length;b<c;b++){this.points.push(a.points[b].clone())}this.closed=a.closed;this.curveType=a.curveType;this.tension=a.tension;return this};ra.prototype.toJSON=function(){var a=I.prototype.toJSON.call(this);a.points=[];for(var b=0,c=this.points.length;b<c;b++){a.points.push(this.points[b].toArray())}a.closed=this.closed;a.curveType=this.curveType;a.tension=this.tension;return a};ra.prototype.fromJSON=function(a){I.prototype.fromJSON.call(this,a);this.points=[];for(var b=0,c=a.points.length,d;b<c;b++){d=a.points[b];this.points.push(new p().fromArray(d))}this.closed=a.closed;this.curveType=a.curveType;this.tension=a.tension;return this};La.prototype=Object.create(I.prototype);La.prototype.constructor=La;La.prototype.isCubicBezierCurve=!0;La.prototype.getPoint=function(a,b){b=b||new y;var c=this.v0,d=this.v1,e=this.v2,f=this.v3;b.set(ed(a,c.x,d.x,e.x,f.x),ed(a,c.y,d.y,e.y,f.y));return b};La.prototype.copy=function(a){I.prototype.copy.call(this,a);this.v0.copy(a.v0);this.v1.copy(a.v1);this.v2.copy(a.v2);this.v3.copy(a.v3);return this};La.prototype.toJSON=function(){var a=I.prototype.toJSON.call(this);a.v0=this.v0.toArray();a.v1=this.v1.toArray();a.v2=this.v2.toArray();a.v3=this.v3.toArray();return a};La.prototype.fromJSON=function(a){I.prototype.fromJSON.call(this,a);this.v0.fromArray(a.v0);this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);this.v3.fromArray(a.v3);return this};Ua.prototype=Object.create(I.prototype);Ua.prototype.constructor=Ua;Ua.prototype.isCubicBezierCurve3=!0;Ua.prototype.getPoint=function(a,b){b=b||new p;var c=this.v0,d=this.v1,e=this.v2,f=this.v3;b.set(ed(a,c.x,d.x,e.x,f.x),ed(a,c.y,d.y,e.y,f.y),ed(a,c.z,d.z,e.z,f.z));return b};Ua.prototype.copy=function(a){I.prototype.copy.call(this,a);this.v0.copy(a.v0);this.v1.copy(a.v1);this.v2.copy(a.v2);this.v3.copy(a.v3);return this};Ua.prototype.toJSON=function(){var a=I.prototype.toJSON.call(this);a.v0=this.v0.toArray();a.v1=this.v1.toArray();a.v2=this.v2.toArray();a.v3=this.v3.toArray();return a};Ua.prototype.fromJSON=function(a){I.prototype.fromJSON.call(this,a);this.v0.fromArray(a.v0);this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);this.v3.fromArray(a.v3);return this};ya.prototype=Object.create(I.prototype);ya.prototype.constructor=ya;ya.prototype.isLineCurve=!0;ya.prototype.getPoint=function(a,b){b=b||new y;1===a?b.copy(this.v2):(b.copy(this.v2).sub(this.v1),b.multiplyScalar(a).add(this.v1));return b};ya.prototype.getPointAt=function(a,b){return this.getPoint(a,b)};ya.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()};ya.prototype.copy=function(a){I.prototype.copy.call(this,a);this.v1.copy(a.v1);this.v2.copy(a.v2);return this};ya.prototype.toJSON=function(){var a=I.prototype.toJSON.call(this);a.v1=this.v1.toArray();a.v2=this.v2.toArray();return a};ya.prototype.fromJSON=function(a){I.prototype.fromJSON.call(this,a);this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);return this};Ma.prototype=Object.create(I.prototype);Ma.prototype.constructor=Ma;Ma.prototype.isLineCurve3=!0;Ma.prototype.getPoint=function(a,b){b=b||new p;1===a?b.copy(this.v2):(b.copy(this.v2).sub(this.v1),b.multiplyScalar(a).add(this.v1));return b};Ma.prototype.getPointAt=function(a,b){return this.getPoint(a,b)};Ma.prototype.copy=function(a){I.prototype.copy.call(this,a);this.v1.copy(a.v1);this.v2.copy(a.v2);return this};Ma.prototype.toJSON=function(){var a=I.prototype.toJSON.call(this);a.v1=this.v1.toArray();a.v2=this.v2.toArray();return a};Ma.prototype.fromJSON=function(a){I.prototype.fromJSON.call(this,a);this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);return this};Na.prototype=Object.create(I.prototype);Na.prototype.constructor=Na;Na.prototype.isQuadraticBezierCurve=!0;Na.prototype.getPoint=function(a,b){b=b||new y;var c=this.v0,d=this.v1,e=this.v2;b.set(dd(a,c.x,d.x,e.x),dd(a,c.y,d.y,e.y));return b};Na.prototype.copy=function(a){I.prototype.copy.call(this,a);this.v0.copy(a.v0);this.v1.copy(a.v1);this.v2.copy(a.v2);return this};Na.prototype.toJSON=function(){var a=I.prototype.toJSON.call(this);a.v0=this.v0.toArray();a.v1=this.v1.toArray();a.v2=this.v2.toArray();return a};Na.prototype.fromJSON=function(a){I.prototype.fromJSON.call(this,a);this.v0.fromArray(a.v0);this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);return this};Va.prototype=Object.create(I.prototype);Va.prototype.constructor=Va;Va.prototype.isQuadraticBezierCurve3=!0;Va.prototype.getPoint=function(a,b){b=b||new p;var c=this.v0,d=this.v1,e=this.v2;b.set(dd(a,c.x,d.x,e.x),dd(a,c.y,d.y,e.y),dd(a,c.z,d.z,e.z));return b};Va.prototype.copy=function(a){I.prototype.copy.call(this,a);this.v0.copy(a.v0);this.v1.copy(a.v1);this.v2.copy(a.v2);return this};Va.prototype.toJSON=function(){var a=I.prototype.toJSON.call(this);a.v0=this.v0.toArray();a.v1=this.v1.toArray();a.v2=this.v2.toArray();return a};Va.prototype.fromJSON=function(a){I.prototype.fromJSON.call(this,a);this.v0.fromArray(a.v0);this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);return this};Oa.prototype=Object.create(I.prototype);Oa.prototype.constructor=Oa;Oa.prototype.isSplineCurve=!0;Oa.prototype.getPoint=function(a,b){b=b||new y;var c=this.points,d=(c.length-1)*a;a=_Mathfloor(d);d-=a;var e=c[0===a?a:a-1],f=c[a],g=c[a>c.length-2?c.length-1:a+1];c=c[a>c.length-3?c.length-1:a+2];b.set(kf(d,e.x,f.x,g.x,c.x),kf(d,e.y,f.y,g.y,c.y));return b};Oa.prototype.copy=function(a){I.prototype.copy.call(this,a);this.points=[];for(var b=0,c=a.points.length;b<c;b++){this.points.push(a.points[b].clone())}return this};Oa.prototype.toJSON=function(){var a=I.prototype.toJSON.call(this);a.points=[];for(var b=0,c=this.points.length;b<c;b++){a.points.push(this.points[b].toArray())}return a};Oa.prototype.fromJSON=function(a){I.prototype.fromJSON.call(this,a);this.points=[];for(var b=0,c=a.points.length,d;b<c;b++){d=a.points[b];this.points.push(new y().fromArray(d))}return this};var zf=Object.freeze({ArcCurve:jc,CatmullRomCurve3:ra,CubicBezierCurve:La,CubicBezierCurve3:Ua,EllipseCurve:xa,LineCurve:ya,LineCurve3:Ma,QuadraticBezierCurve:Na,QuadraticBezierCurve3:Va,SplineCurve:Oa});ab.prototype=Object.assign(Object.create(I.prototype),{constructor:ab,add:function add(a){this.curves.push(a)},closePath:function closePath(){var a=this.curves[0].getPoint(0),b=this.curves[this.curves.length-1].getPoint(1);a.equals(b)||this.curves.push(new ya(b,a))},getPoint:function getPoint(a){var b=a*this.getLength(),c=this.getCurveLengths();for(a=0;a<c.length;){if(c[a]>=b)return b=c[a]-b,a=this.curves[a],c=a.getLength(),a.getPointAt(0===c?0:1-b/c);a++}return null},getLength:function getLength(){var a=this.getCurveLengths();return a[a.length-1]},updateArcLengths:function updateArcLengths(){this.needsUpdate=!0;this.cacheLengths=null;this.getCurveLengths()},getCurveLengths:function getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var a=[],b=0,c=0,d=this.curves.length;c<d;c++){b+=this.curves[c].getLength(),a.push(b)}return this.cacheLengths=a},getSpacedPoints:function getSpacedPoints(a){void 0===a&&(a=40);for(var b=[],c=0;c<=a;c++){b.push(this.getPoint(c/a))}this.autoClose&&b.push(b[0]);return b},getPoints:function getPoints(a){a=a||12;for(var b=[],c,d=0,e=this.curves,f;d<e.length;d++){f=e[d];f=f.getPoints(f&&f.isEllipseCurve?2*a:f&&f.isLineCurve?1:f&&f.isSplineCurve?a*f.points.length:a);for(var g=0,h;g<f.length;g++){h=f[g];c&&c.equals(h)||(b.push(h),c=h)}}this.autoClose&&1<b.length&&!b[b.length-1].equals(b[0])&&b.push(b[0]);return b},copy:function copy(a){I.prototype.copy.call(this,a);this.curves=[];for(var b=0,c=a.curves.length;b<c;b++){this.curves.push(a.curves[b].clone())}this.autoClose=a.autoClose;return this},toJSON:function toJSON(){var a=I.prototype.toJSON.call(this);a.autoClose=this.autoClose;a.curves=[];for(var b=0,c=this.curves.length;b<c;b++){a.curves.push(this.curves[b].toJSON())}return a},fromJSON:function fromJSON(a){I.prototype.fromJSON.call(this,a);this.autoClose=a.autoClose;this.curves=[];for(var b=0,c=a.curves.length,d;b<c;b++){d=a.curves[b];this.curves.push(new zf[d.type]().fromJSON(d))}return this}});Pa.prototype=Object.assign(Object.create(ab.prototype),{constructor:Pa,setFromPoints:function setFromPoints(a){this.moveTo(a[0].x,a[0].y);for(var b=1,c=a.length;b<c;b++){this.lineTo(a[b].x,a[b].y)}},moveTo:function moveTo(a,b){this.currentPoint.set(a,b)},lineTo:function lineTo(a,b){var c=new ya(this.currentPoint.clone(),new y(a,b));this.curves.push(c);this.currentPoint.set(a,b)},quadraticCurveTo:function quadraticCurveTo(a,b,c,d){a=new Na(this.currentPoint.clone(),new y(a,b),new y(c,d));this.curves.push(a);this.currentPoint.set(c,d)},bezierCurveTo:function bezierCurveTo(a,b,c,d,e,f){a=new La(this.currentPoint.clone(),new y(a,b),new y(c,d),new y(e,f));this.curves.push(a);this.currentPoint.set(e,f)},splineThru:function splineThru(a){var b=[this.currentPoint.clone()].concat(a);b=new Oa(b);this.curves.push(b);this.currentPoint.copy(a[a.length-1])},arc:function arc(a,b,c,d,e,f){this.absarc(a+this.currentPoint.x,b+this.currentPoint.y,c,d,e,f)},absarc:function absarc(a,b,c,d,e,f){this.absellipse(a,b,c,c,d,e,f)},ellipse:function ellipse(a,b,c,d,e,f,g,h){this.absellipse(a+this.currentPoint.x,b+this.currentPoint.y,c,d,e,f,g,h)},absellipse:function absellipse(a,b,c,d,e,f,g,h){a=new xa(a,b,c,d,e,f,g,h);0<this.curves.length&&(b=a.getPoint(0),b.equals(this.currentPoint)||this.lineTo(b.x,b.y));this.curves.push(a);a=a.getPoint(1);this.currentPoint.copy(a)},copy:function copy(a){ab.prototype.copy.call(this,a);this.currentPoint.copy(a.currentPoint);return this},toJSON:function toJSON(){var a=ab.prototype.toJSON.call(this);a.currentPoint=this.currentPoint.toArray();return a},fromJSON:function fromJSON(a){ab.prototype.fromJSON.call(this,a);this.currentPoint.fromArray(a.currentPoint);return this}});jb.prototype=Object.assign(Object.create(Pa.prototype),{constructor:jb,getPointsHoles:function getPointsHoles(a){for(var b=[],c=0,d=this.holes.length;c<d;c++){b[c]=this.holes[c].getPoints(a)}return b},extractPoints:function extractPoints(a){return{shape:this.getPoints(a),holes:this.getPointsHoles(a)}},copy:function copy(a){Pa.prototype.copy.call(this,a);this.holes=[];for(var b=0,c=a.holes.length;b<c;b++){this.holes.push(a.holes[b].clone())}return this},toJSON:function toJSON(){var a=Pa.prototype.toJSON.call(this);a.uuid=this.uuid;a.holes=[];for(var b=0,c=this.holes.length;b<c;b++){a.holes.push(this.holes[b].toJSON())}return a},fromJSON:function fromJSON(a){Pa.prototype.fromJSON.call(this,a);this.uuid=a.uuid;this.holes=[];for(var b=0,c=a.holes.length,d;b<c;b++){d=a.holes[b];this.holes.push(new Pa().fromJSON(d))}return this}});ba.prototype=Object.assign(Object.create(B.prototype),{constructor:ba,isLight:!0,copy:function copy(a){B.prototype.copy.call(this,a);this.color.copy(a.color);this.intensity=a.intensity;return this},toJSON:function toJSON(a){a=B.prototype.toJSON.call(this,a);a.object.color=this.color.getHex();a.object.intensity=this.intensity;void 0!==this.groundColor&&(a.object.groundColor=this.groundColor.getHex());void 0!==this.distance&&(a.object.distance=this.distance);void 0!==this.angle&&(a.object.angle=this.angle);void 0!==this.decay&&(a.object.decay=this.decay);void 0!==this.penumbra&&(a.object.penumbra=this.penumbra);void 0!==this.shadow&&(a.object.shadow=this.shadow.toJSON());return a}});zd.prototype=Object.assign(Object.create(ba.prototype),{constructor:zd,isHemisphereLight:!0,copy:function copy(a){ba.prototype.copy.call(this,a);this.groundColor.copy(a.groundColor);return this}});Object.assign(Hb.prototype,{copy:function copy(a){this.camera=a.camera.clone();this.bias=a.bias;this.radius=a.radius;this.mapSize.copy(a.mapSize);return this},clone:function clone(){return new this.constructor().copy(this)},toJSON:function toJSON(){var a={};0!==this.bias&&(a.bias=this.bias);1!==this.radius&&(a.radius=this.radius);if(512!==this.mapSize.x||512!==this.mapSize.y)a.mapSize=this.mapSize.toArray();a.camera=this.camera.toJSON(!1).object;delete a.camera.matrix;return a}});Ad.prototype=Object.assign(Object.create(Hb.prototype),{constructor:Ad,isSpotLightShadow:!0,update:function update(a){var b=this.camera,c=2*P.RAD2DEG*a.angle,d=this.mapSize.width/this.mapSize.height;a=a.distance||b.far;if(c!==b.fov||d!==b.aspect||a!==b.far)b.fov=c,b.aspect=d,b.far=a,b.updateProjectionMatrix()}});Bd.prototype=Object.assign(Object.create(ba.prototype),{constructor:Bd,isSpotLight:!0,copy:function copy(a){ba.prototype.copy.call(this,a);this.distance=a.distance;this.angle=a.angle;this.penumbra=a.penumbra;this.decay=a.decay;this.target=a.target.clone();this.shadow=a.shadow.clone();return this}});Cd.prototype=Object.assign(Object.create(ba.prototype),{constructor:Cd,isPointLight:!0,copy:function copy(a){ba.prototype.copy.call(this,a);this.distance=a.distance;this.decay=a.decay;this.shadow=a.shadow.clone();return this}});Dd.prototype=Object.assign(Object.create(Hb.prototype),{constructor:Dd});Ed.prototype=Object.assign(Object.create(ba.prototype),{constructor:Ed,isDirectionalLight:!0,copy:function copy(a){ba.prototype.copy.call(this,a);this.target=a.target.clone();this.shadow=a.shadow.clone();return this}});Fd.prototype=Object.assign(Object.create(ba.prototype),{constructor:Fd,isAmbientLight:!0});Gd.prototype=Object.assign(Object.create(ba.prototype),{constructor:Gd,isRectAreaLight:!0,copy:function copy(a){ba.prototype.copy.call(this,a);this.width=a.width;this.height=a.height;return this},toJSON:function toJSON(a){a=ba.prototype.toJSON.call(this,a);a.object.width=this.width;a.object.height=this.height;return a}});Hd.prototype=Object.assign(Object.create(ja.prototype),{constructor:Hd,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});Id.prototype=Object.assign(Object.create(ja.prototype),{constructor:Id,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});Object.assign(ua.prototype,{evaluate:function evaluate(a){var b=this.parameterPositions,c=this._cachedIndex,d=b[c],e=b[c-1];a:{b:{c:{d:if(!(a<d)){for(var f=c+2;;){if(void 0===d){if(a<e)break d;this._cachedIndex=c=b.length;return this.afterEnd_(c-1,a,e)}if(c===f)break;e=d;d=b[++c];if(a<d)break b}d=b.length;break c}if(a>=e)break a;else{f=b[1];a<f&&(c=2,e=f);for(f=c-2;;){if(void 0===e)return this._cachedIndex=0,this.beforeStart_(0,a,d);if(c===f)break;d=e;e=b[--c-1];if(a>=e)break b}d=c;c=0}}for(;c<d;){e=c+d>>>1,a<b[e]?d=e:c=e+1}d=b[c];e=b[c-1];if(void 0===e)return this._cachedIndex=0,this.beforeStart_(0,a,d);if(void 0===d)return this._cachedIndex=c=b.length,this.afterEnd_(c-1,e,a)}this._cachedIndex=c;this.intervalChanged_(c,e,d)}return this.interpolate_(c,e,a,d)},settings:null,DefaultSettings_:{},getSettings_:function getSettings_(){return this.settings||this.DefaultSettings_},copySampleValue_:function copySampleValue_(a){var b=this.resultBuffer,c=this.sampleValues,d=this.valueSize;a*=d;for(var e=0;e!==d;++e){b[e]=c[a+e]}return b},interpolate_:function interpolate_(){throw Error("call to abstract method")},intervalChanged_:function intervalChanged_(){}});Object.assign(ua.prototype,{beforeStart_:ua.prototype.copySampleValue_,afterEnd_:ua.prototype.copySampleValue_});Jd.prototype=Object.assign(Object.create(ua.prototype),{constructor:Jd,interpolate_:function interpolate_(a,b,c,d){var e=this.resultBuffer,f=this.sampleValues,g=this.valueSize;a*=g;b=(c-b)/(d-b);for(c=a+g;a!==c;a+=4){X.slerpFlat(e,0,f,a-g,f,a,b)}return e}});fd.prototype=Object.assign(Object.create(ja.prototype),{constructor:fd,ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function InterpolantFactoryMethodLinear(a){return new Jd(this.times,this.values,this.getValueSize(),a)},InterpolantFactoryMethodSmooth:void 0});Kd.prototype=Object.assign(Object.create(ja.prototype),{constructor:Kd,ValueTypeName:"color"});kc.prototype=Object.assign(Object.create(ja.prototype),{constructor:kc,ValueTypeName:"number"});Ld.prototype=Object.assign(Object.create(ua.prototype),{constructor:Ld,DefaultSettings_:{endingStart:2400,endingEnd:2400},intervalChanged_:function intervalChanged_(a,b,c){var d=this.parameterPositions,e=a-2,f=a+1,g=d[e],h=d[f];if(void 0===g)switch(this.getSettings_().endingStart){case 2401:e=a;g=2*b-c;break;case 2402:e=d.length-2;g=b+d[e]-d[e+1];break;default:e=a,g=c;}if(void 0===h)switch(this.getSettings_().endingEnd){case 2401:f=a;h=2*c-b;break;case 2402:f=1;h=c+d[1]-d[0];break;default:f=a-1,h=b;}a=.5*(c-b);d=this.valueSize;this._weightPrev=a/(b-g);this._weightNext=a/(h-c);this._offsetPrev=e*d;this._offsetNext=f*d},interpolate_:function interpolate_(a,b,c,d){var e=this.resultBuffer,f=this.sampleValues,g=this.valueSize;a*=g;var h=a-g,l=this._offsetPrev,m=this._offsetNext,k=this._weightPrev,n=this._weightNext,p=(c-b)/(d-b);c=p*p;d=c*p;b=-k*d+2*k*c-k*p;k=(1+k)*d+(-1.5-2*k)*c+(-.5+k)*p+1;p=(-1-n)*d+(1.5+n)*c+.5*p;n=n*d-n*c;for(c=0;c!==g;++c){e[c]=b*f[l+c]+k*f[h+c]+p*f[a+c]+n*f[m+c]}return e}});gd.prototype=Object.assign(Object.create(ua.prototype),{constructor:gd,interpolate_:function interpolate_(a,b,c,d){var e=this.resultBuffer,f=this.sampleValues,g=this.valueSize;a*=g;var h=a-g;b=(c-b)/(d-b);c=1-b;for(d=0;d!==g;++d){e[d]=f[h+d]*c+f[a+d]*b}return e}});Md.prototype=Object.assign(Object.create(ua.prototype),{constructor:Md,interpolate_:function interpolate_(a){return this.copySampleValue_(a-1)}});var sa={arraySlice:function arraySlice(a,b,c){return sa.isTypedArray(a)?new a.constructor(a.subarray(b,void 0!==c?c:a.length)):a.slice(b,c)},convertArray:function convertArray(a,b,c){return!a||!c&&a.constructor===b?a:"number"===typeof b.BYTES_PER_ELEMENT?new b(a):Array.prototype.slice.call(a)},isTypedArray:function isTypedArray(a){return ArrayBuffer.isView(a)&&!babelHelpers.instanceof(a,DataView)},getKeyframeOrder:function getKeyframeOrder(a){for(var b=a.length,c=Array(b),d=0;d!==b;++d){c[d]=d}c.sort(function(b,c){return a[b]-a[c]});return c},sortedArray:function sortedArray(a,b,c){for(var d=a.length,e=new a.constructor(d),f=0,g=0;g!==d;++f){for(var h=c[f]*b,l=0;l!==b;++l){e[g++]=a[h+l]}}return e},flattenJSON:function flattenJSON(a,b,c,d){for(var e=1,f=a[0];void 0!==f&&void 0===f[d];){f=a[e++]}if(void 0!==f){var g=f[d];if(void 0!==g)if(Array.isArray(g)){do{g=f[d],void 0!==g&&(b.push(f.time),c.push.apply(c,g)),f=a[e++]}while(void 0!==f)}else if(void 0!==g.toArray){do{g=f[d],void 0!==g&&(b.push(f.time),g.toArray(c,c.length)),f=a[e++]}while(void 0!==f)}else{do{g=f[d],void 0!==g&&(b.push(f.time),c.push(g)),f=a[e++]}while(void 0!==f)}}}};Object.assign(ja,{parse:function parse(a){if(void 0===a.type)throw Error("THREE.KeyframeTrack: track type undefined, can not parse");var b=ja._getTrackTypeForValueTypeName(a.type);if(void 0===a.times){var c=[],d=[];sa.flattenJSON(a.keys,c,d,"value");a.times=c;a.values=d}return void 0!==b.parse?b.parse(a):new b(a.name,a.times,a.values,a.interpolation)},toJSON:function toJSON(a){var b=a.constructor;if(void 0!==b.toJSON)b=b.toJSON(a);else{b={name:a.name,times:sa.convertArray(a.times,Array),values:sa.convertArray(a.values,Array)};var c=a.getInterpolation();c!==a.DefaultInterpolation&&(b.interpolation=c)}b.type=a.ValueTypeName;return b},_getTrackTypeForValueTypeName:function _getTrackTypeForValueTypeName(a){switch(a.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return kc;case"vector":case"vector2":case"vector3":case"vector4":return lc;case"color":return Kd;case"quaternion":return fd;case"bool":case"boolean":return Id;case"string":return Hd;}throw Error("THREE.KeyframeTrack: Unsupported typeName: "+a)}});Object.assign(ja.prototype,{constructor:ja,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function InterpolantFactoryMethodDiscrete(a){return new Md(this.times,this.values,this.getValueSize(),a)},InterpolantFactoryMethodLinear:function InterpolantFactoryMethodLinear(a){return new gd(this.times,this.values,this.getValueSize(),a)},InterpolantFactoryMethodSmooth:function InterpolantFactoryMethodSmooth(a){return new Ld(this.times,this.values,this.getValueSize(),a)},setInterpolation:function setInterpolation(a){switch(a){case 2300:var b=this.InterpolantFactoryMethodDiscrete;break;case 2301:b=this.InterpolantFactoryMethodLinear;break;case 2302:b=this.InterpolantFactoryMethodSmooth;}if(void 0===b){b="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant)if(a!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw Error(b);console.warn("THREE.KeyframeTrack:",b)}else this.createInterpolant=b},getInterpolation:function getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302;}},getValueSize:function getValueSize(){return this.values.length/this.times.length},shift:function shift(a){if(0!==a)for(var b=this.times,c=0,d=b.length;c!==d;++c){b[c]+=a}return this},scale:function scale(a){if(1!==a)for(var b=this.times,c=0,d=b.length;c!==d;++c){b[c]*=a}return this},trim:function trim(a,b){for(var c=this.times,d=c.length,e=0,f=d-1;e!==d&&c[e]<a;){++e}for(;-1!==f&&c[f]>b;){--f}++f;if(0!==e||f!==d)e>=f&&(f=_Mathmax(f,1),e=f-1),a=this.getValueSize(),this.times=sa.arraySlice(c,e,f),this.values=sa.arraySlice(this.values,e*a,f*a);return this},validate:function validate(){var a=!0,b=this.getValueSize();0!==b-_Mathfloor(b)&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),a=!1);var c=this.times;b=this.values;var d=c.length;0===d&&(console.error("THREE.KeyframeTrack: Track is empty.",this),a=!1);for(var e=null,f=0,g;f!==d;f++){g=c[f];if("number"===typeof g&&isNaN(g)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,f,g);a=!1;break}if(null!==e&&e>g){console.error("THREE.KeyframeTrack: Out of order keys.",this,f,g,e);a=!1;break}e=g}if(void 0!==b&&sa.isTypedArray(b))for(f=0,c=b.length;f!==c;++f){if(d=b[f],isNaN(d)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,f,d);a=!1;break}}return a},optimize:function optimize(){for(var a=this.times,b=this.values,c=this.getValueSize(),d=2302===this.getInterpolation(),e=1,f=a.length-1,g=1;g<f;++g){var h=!1,l=a[g];if(l!==a[g+1]&&(1!==g||l!==l[0]))if(d)h=!0;else{var m=g*c,k=m-c,n=m+c;for(l=0;l!==c;++l){var p=b[m+l];if(p!==b[k+l]||p!==b[n+l]){h=!0;break}}}if(h){if(g!==e)for(a[e]=a[g],h=g*c,m=e*c,l=0;l!==c;++l){b[m+l]=b[h+l]}++e}}if(0<f){a[e]=a[f];h=f*c;m=e*c;for(l=0;l!==c;++l){b[m+l]=b[h+l]}++e}e!==a.length&&(this.times=sa.arraySlice(a,0,e),this.values=sa.arraySlice(b,0,e*c));return this}});lc.prototype=Object.assign(Object.create(ja.prototype),{constructor:lc,ValueTypeName:"vector"});Object.assign(Fa,{parse:function parse(a){for(var b=[],c=a.tracks,d=1/(a.fps||1),e=0,f=c.length;e!==f;++e){b.push(ja.parse(c[e]).scale(d))}return new Fa(a.name,a.duration,b)},toJSON:function toJSON(a){var b=[],c=a.tracks;a={name:a.name,duration:a.duration,tracks:b,uuid:a.uuid};for(var d=0,e=c.length;d!==e;++d){b.push(ja.toJSON(c[d]))}return a},CreateFromMorphTargetSequence:function CreateFromMorphTargetSequence(a,b,c,d){for(var e=b.length,f=[],g=0;g<e;g++){var h=[],l=[];h.push((g+e-1)%e,g,(g+1)%e);l.push(0,1,0);var m=sa.getKeyframeOrder(h);h=sa.sortedArray(h,1,m);l=sa.sortedArray(l,1,m);d||0!==h[0]||(h.push(e),l.push(l[0]));f.push(new kc(".morphTargetInfluences["+b[g].name+"]",h,l).scale(1/c))}return new Fa(a,-1,f)},findByName:function findByName(a,b){var c=a;Array.isArray(a)||(c=a.geometry&&a.geometry.animations||a.animations);for(a=0;a<c.length;a++){if(c[a].name===b)return c[a]}return null},CreateClipsFromMorphTargetSequences:function CreateClipsFromMorphTargetSequences(a,b,c){for(var d={},e=/^([\w-]*?)([\d]+)$/,f=0,g=a.length;f<g;f++){var h=a[f],l=h.name.match(e);if(l&&1<l.length){var m=l[1];(l=d[m])||(d[m]=l=[]);l.push(h)}}a=[];for(m in d){a.push(Fa.CreateFromMorphTargetSequence(m,d[m],b,c))}return a},parseAnimation:function parseAnimation(a,b){if(!a)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;var c=function(a,b,_c,d,e){if(0!==_c.length){var f=[],g=[];sa.flattenJSON(_c,f,g,d);0!==f.length&&e.push(new a(b,f,g))}},d=[],e=a.name||"default",f=a.length||-1,g=a.fps||30;a=a.hierarchy||[];for(var h=0,l;h<a.length;h++){l=a[h].keys;if(l&&0!==l.length)if(l[0].morphTargets){f={};for(var m=0;m<l.length;m++){if(l[m].morphTargets)for(var k=0;k<l[m].morphTargets.length;k++){f[l[m].morphTargets[k]]=-1}}for(var n in f){var p=[],q=[];for(k=0;k!==l[m].morphTargets.length;++k){var t=l[m];p.push(t.time);q.push(t.morphTarget===n?1:0)}d.push(new kc(".morphTargetInfluence["+n+"]",p,q))}f=f.length*(g||1)}else m=".bones["+b[h].name+"]",c(lc,m+".position",l,"pos",d),c(fd,m+".quaternion",l,"rot",d),c(lc,m+".scale",l,"scl",d)}return 0===d.length?null:new Fa(e,f,d)}});Object.assign(Fa.prototype,{resetDuration:function resetDuration(){for(var a=0,b=0,c=this.tracks.length,d;b!==c;++b){d=this.tracks[b];a=_Mathmax(a,d.times[d.times.length-1])}this.duration=a},trim:function trim(){for(var a=0;a<this.tracks.length;a++){this.tracks[a].trim(0,this.duration)}return this},optimize:function optimize(){for(var a=0;a<this.tracks.length;a++){this.tracks[a].optimize()}return this}});Object.assign(Nd.prototype,{load:function load(a,b,c,d){var e=this;new Ka(e.manager).load(a,function(a){b(e.parse(JSON.parse(a)))},c,d)},setTextures:function setTextures(a){this.textures=a},parse:function parse(a){function b(a){void 0===c[a]&&console.warn("THREE.MaterialLoader: Undefined texture",a);return c[a]}var c=this.textures,d=new Tg[a.type];void 0!==a.uuid&&(d.uuid=a.uuid);void 0!==a.name&&(d.name=a.name);void 0!==a.color&&d.color.setHex(a.color);void 0!==a.roughness&&(d.roughness=a.roughness);void 0!==a.metalness&&(d.metalness=a.metalness);void 0!==a.emissive&&d.emissive.setHex(a.emissive);void 0!==a.specular&&d.specular.setHex(a.specular);void 0!==a.shininess&&(d.shininess=a.shininess);void 0!==a.clearCoat&&(d.clearCoat=a.clearCoat);void 0!==a.clearCoatRoughness&&(d.clearCoatRoughness=a.clearCoatRoughness);void 0!==a.uniforms&&(d.uniforms=a.uniforms);void 0!==a.vertexShader&&(d.vertexShader=a.vertexShader);void 0!==a.fragmentShader&&(d.fragmentShader=a.fragmentShader);void 0!==a.vertexColors&&(d.vertexColors=a.vertexColors);void 0!==a.fog&&(d.fog=a.fog);void 0!==a.flatShading&&(d.flatShading=a.flatShading);void 0!==a.blending&&(d.blending=a.blending);void 0!==a.side&&(d.side=a.side);void 0!==a.opacity&&(d.opacity=a.opacity);void 0!==a.transparent&&(d.transparent=a.transparent);void 0!==a.alphaTest&&(d.alphaTest=a.alphaTest);void 0!==a.depthTest&&(d.depthTest=a.depthTest);void 0!==a.depthWrite&&(d.depthWrite=a.depthWrite);void 0!==a.colorWrite&&(d.colorWrite=a.colorWrite);void 0!==a.wireframe&&(d.wireframe=a.wireframe);void 0!==a.wireframeLinewidth&&(d.wireframeLinewidth=a.wireframeLinewidth);void 0!==a.wireframeLinecap&&(d.wireframeLinecap=a.wireframeLinecap);void 0!==a.wireframeLinejoin&&(d.wireframeLinejoin=a.wireframeLinejoin);void 0!==a.rotation&&(d.rotation=a.rotation);1!==a.linewidth&&(d.linewidth=a.linewidth);void 0!==a.dashSize&&(d.dashSize=a.dashSize);void 0!==a.gapSize&&(d.gapSize=a.gapSize);void 0!==a.scale&&(d.scale=a.scale);void 0!==a.polygonOffset&&(d.polygonOffset=a.polygonOffset);void 0!==a.polygonOffsetFactor&&(d.polygonOffsetFactor=a.polygonOffsetFactor);void 0!==a.polygonOffsetUnits&&(d.polygonOffsetUnits=a.polygonOffsetUnits);void 0!==a.skinning&&(d.skinning=a.skinning);void 0!==a.morphTargets&&(d.morphTargets=a.morphTargets);void 0!==a.dithering&&(d.dithering=a.dithering);void 0!==a.visible&&(d.visible=a.visible);void 0!==a.userData&&(d.userData=a.userData);void 0!==a.shading&&(d.flatShading=1===a.shading);void 0!==a.size&&(d.size=a.size);void 0!==a.sizeAttenuation&&(d.sizeAttenuation=a.sizeAttenuation);void 0!==a.map&&(d.map=b(a.map));void 0!==a.alphaMap&&(d.alphaMap=b(a.alphaMap),d.transparent=!0);void 0!==a.bumpMap&&(d.bumpMap=b(a.bumpMap));void 0!==a.bumpScale&&(d.bumpScale=a.bumpScale);void 0!==a.normalMap&&(d.normalMap=b(a.normalMap));if(void 0!==a.normalScale){var e=a.normalScale;!1===Array.isArray(e)&&(e=[e,e]);d.normalScale=new y().fromArray(e)}void 0!==a.displacementMap&&(d.displacementMap=b(a.displacementMap));void 0!==a.displacementScale&&(d.displacementScale=a.displacementScale);void 0!==a.displacementBias&&(d.displacementBias=a.displacementBias);void 0!==a.roughnessMap&&(d.roughnessMap=b(a.roughnessMap));void 0!==a.metalnessMap&&(d.metalnessMap=b(a.metalnessMap));void 0!==a.emissiveMap&&(d.emissiveMap=b(a.emissiveMap));void 0!==a.emissiveIntensity&&(d.emissiveIntensity=a.emissiveIntensity);void 0!==a.specularMap&&(d.specularMap=b(a.specularMap));void 0!==a.envMap&&(d.envMap=b(a.envMap));void 0!==a.reflectivity&&(d.reflectivity=a.reflectivity);void 0!==a.lightMap&&(d.lightMap=b(a.lightMap));void 0!==a.lightMapIntensity&&(d.lightMapIntensity=a.lightMapIntensity);void 0!==a.aoMap&&(d.aoMap=b(a.aoMap));void 0!==a.aoMapIntensity&&(d.aoMapIntensity=a.aoMapIntensity);void 0!==a.gradientMap&&(d.gradientMap=b(a.gradientMap));return d}});Object.assign(ge.prototype,{load:function load(a,b,c,d){var e=this;new Ka(e.manager).load(a,function(a){b(e.parse(JSON.parse(a)))},c,d)},parse:function parse(a){var b=new G,c=a.data.index;void 0!==c&&(c=new Af[c.type](c.array),b.setIndex(new O(c,1)));var d=a.data.attributes;for(f in d){var e=d[f];c=new Af[e.type](e.array);b.addAttribute(f,new O(c,e.itemSize,e.normalized))}var f=a.data.groups||a.data.drawcalls||a.data.offsets;if(void 0!==f)for(c=0,d=f.length;c!==d;++c){e=f[c],b.addGroup(e.start,e.count,e.materialIndex)}a=a.data.boundingSphere;void 0!==a&&(f=new p,void 0!==a.center&&f.fromArray(a.center),b.boundingSphere=new Ga(f,a.radius));return b}});var Af={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!==typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};mc.Handlers={handlers:[],add:function add(a,b){this.handlers.push(a,b)},get:function get(a){for(var b=this.handlers,c=0,d=b.length,e;c<d;c+=2){e=b[c+1];if(b[c].test(a))return e}return null}};Object.assign(mc.prototype,{crossOrigin:void 0,onLoadStart:function onLoadStart(){},onLoadProgress:function onLoadProgress(){},onLoadComplete:function onLoadComplete(){},initMaterials:function initMaterials(a,b,c){for(var d=[],e=0;e<a.length;++e){d[e]=this.createMaterial(a[e],b,c)}return d},createMaterial:function(){var a={NoBlending:0,NormalBlending:1,AdditiveBlending:2,SubtractiveBlending:3,MultiplyBlending:4,CustomBlending:5},b=new K,c=new yd,d=new Nd;return function(e,f,g){function h(a,b,d,e,h){a=f+a;var k=mc.Handlers.get(a);null!==k?a=k.load(a):(c.setCrossOrigin(g),a=c.load(a));void 0!==b&&(a.repeat.fromArray(b),1!==b[0]&&(a.wrapS=1E3),1!==b[1]&&(a.wrapT=1E3));void 0!==d&&a.offset.fromArray(d);void 0!==e&&("repeat"===e[0]&&(a.wrapS=1E3),"mirror"===e[0]&&(a.wrapS=1002),"repeat"===e[1]&&(a.wrapT=1E3),"mirror"===e[1]&&(a.wrapT=1002));void 0!==h&&(a.anisotropy=h);b=P.generateUUID();l[b]=a;return b}var l={},k={uuid:P.generateUUID(),type:"MeshLambertMaterial"},p;for(p in e){var n=e[p];switch(p){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":k.name=n;break;case"blending":k.blending=a[n];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",p,"is no longer supported.");break;case"colorDiffuse":k.color=b.fromArray(n).getHex();break;case"colorSpecular":k.specular=b.fromArray(n).getHex();break;case"colorEmissive":k.emissive=b.fromArray(n).getHex();break;case"specularCoef":k.shininess=n;break;case"shading":"basic"===n.toLowerCase()&&(k.type="MeshBasicMaterial");"phong"===n.toLowerCase()&&(k.type="MeshPhongMaterial");"standard"===n.toLowerCase()&&(k.type="MeshStandardMaterial");break;case"mapDiffuse":k.map=h(n,e.mapDiffuseRepeat,e.mapDiffuseOffset,e.mapDiffuseWrap,e.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":k.emissiveMap=h(n,e.mapEmissiveRepeat,e.mapEmissiveOffset,e.mapEmissiveWrap,e.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":k.lightMap=h(n,e.mapLightRepeat,e.mapLightOffset,e.mapLightWrap,e.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":k.aoMap=h(n,e.mapAORepeat,e.mapAOOffset,e.mapAOWrap,e.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":k.bumpMap=h(n,e.mapBumpRepeat,e.mapBumpOffset,e.mapBumpWrap,e.mapBumpAnisotropy);break;case"mapBumpScale":k.bumpScale=n;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":k.normalMap=h(n,e.mapNormalRepeat,e.mapNormalOffset,e.mapNormalWrap,e.mapNormalAnisotropy);break;case"mapNormalFactor":k.normalScale=n;break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":k.specularMap=h(n,e.mapSpecularRepeat,e.mapSpecularOffset,e.mapSpecularWrap,e.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":k.metalnessMap=h(n,e.mapMetalnessRepeat,e.mapMetalnessOffset,e.mapMetalnessWrap,e.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":k.roughnessMap=h(n,e.mapRoughnessRepeat,e.mapRoughnessOffset,e.mapRoughnessWrap,e.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":k.alphaMap=h(n,e.mapAlphaRepeat,e.mapAlphaOffset,e.mapAlphaWrap,e.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":k.side=1;break;case"doubleSided":k.side=2;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity");k.opacity=n;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":k[p]=n;break;case"vertexColors":!0===n&&(k.vertexColors=2);"face"===n&&(k.vertexColors=1);break;default:console.error("THREE.Loader.createMaterial: Unsupported",p,n);}}"MeshBasicMaterial"===k.type&&delete k.emissive;"MeshPhongMaterial"!==k.type&&delete k.specular;1>k.opacity&&(k.transparent=!0);d.setTextures(l);return d.parse(k)}}()});var De={decodeText:function decodeText(a){if("undefined"!==typeof TextDecoder)return new TextDecoder().decode(a);for(var b="",c=0,d=a.length;c<d;c++){b+=String.fromCharCode(a[c])}return decodeURIComponent(escape(b))},extractUrlBase:function extractUrlBase(a){var b=a.lastIndexOf("/");return-1===b?"./":a.substr(0,b+1)}};Object.assign(he.prototype,{load:function load(a,b,c,d){var e=this,f=this.texturePath&&"string"===typeof this.texturePath?this.texturePath:De.extractUrlBase(a),g=new Ka(this.manager);g.setWithCredentials(this.withCredentials);g.load(a,function(c){c=JSON.parse(c);var d=c.metadata;if(void 0!==d&&(d=d.type,void 0!==d&&"object"===d.toLowerCase())){console.error("THREE.JSONLoader: "+a+" should be loaded with THREE.ObjectLoader instead.");return}c=e.parse(c,f);b(c.geometry,c.materials)},c,d)},setTexturePath:function setTexturePath(a){this.texturePath=a},parse:function(){return function(a,b){void 0!==a.data&&(a=a.data);a.scale=void 0!==a.scale?1/a.scale:1;var c=new J,d=a,e,f,g,h=d.faces,l=d.vertices,k=d.normals,v=d.colors,n=d.scale,r=0;if(void 0!==d.uvs){for(e=0;e<d.uvs.length;e++){d.uvs[e].length&&r++}for(e=0;e<r;e++){c.faceVertexUvs[e]=[]}}var q=0;for(g=l.length;q<g;){e=new p,e.x=l[q++]*n,e.y=l[q++]*n,e.z=l[q++]*n,c.vertices.push(e)}q=0;for(g=h.length;q<g;){l=h[q++];var t=1&l,u=2&l;e=8&l;var z=16&l,x=32&l;n=64&l;l&=128;if(t){t=new Xa;t.a=h[q];t.b=h[q+1];t.c=h[q+3];var w=new Xa;w.a=h[q+1];w.b=h[q+2];w.c=h[q+3];q+=4;u&&(u=h[q++],t.materialIndex=u,w.materialIndex=u);u=c.faces.length;if(e)for(e=0;e<r;e++){var A=d.uvs[e];c.faceVertexUvs[e][u]=[];c.faceVertexUvs[e][u+1]=[];for(f=0;4>f;f++){var C=h[q++],B=A[2*C];C=A[2*C+1];B=new y(B,C);2!==f&&c.faceVertexUvs[e][u].push(B);0!==f&&c.faceVertexUvs[e][u+1].push(B)}}z&&(z=3*h[q++],t.normal.set(k[z++],k[z++],k[z]),w.normal.copy(t.normal));if(x)for(e=0;4>e;e++){z=3*h[q++],x=new p(k[z++],k[z++],k[z]),2!==e&&t.vertexNormals.push(x),0!==e&&w.vertexNormals.push(x)}n&&(n=h[q++],n=v[n],t.color.setHex(n),w.color.setHex(n));if(l)for(e=0;4>e;e++){n=h[q++],n=v[n],2!==e&&t.vertexColors.push(new K(n)),0!==e&&w.vertexColors.push(new K(n))}c.faces.push(t);c.faces.push(w)}else{t=new Xa;t.a=h[q++];t.b=h[q++];t.c=h[q++];u&&(u=h[q++],t.materialIndex=u);u=c.faces.length;if(e)for(e=0;e<r;e++){for(A=d.uvs[e],c.faceVertexUvs[e][u]=[],f=0;3>f;f++){C=h[q++],B=A[2*C],C=A[2*C+1],B=new y(B,C),c.faceVertexUvs[e][u].push(B)}}z&&(z=3*h[q++],t.normal.set(k[z++],k[z++],k[z]));if(x)for(e=0;3>e;e++){z=3*h[q++],x=new p(k[z++],k[z++],k[z]),t.vertexNormals.push(x)}n&&(n=h[q++],t.color.setHex(v[n]));if(l)for(e=0;3>e;e++){n=h[q++],t.vertexColors.push(new K(v[n]))}c.faces.push(t)}}d=a;q=void 0!==d.influencesPerVertex?d.influencesPerVertex:2;if(d.skinWeights)for(g=0,h=d.skinWeights.length;g<h;g+=q){c.skinWeights.push(new U(d.skinWeights[g],1<q?d.skinWeights[g+1]:0,2<q?d.skinWeights[g+2]:0,3<q?d.skinWeights[g+3]:0))}if(d.skinIndices)for(g=0,h=d.skinIndices.length;g<h;g+=q){c.skinIndices.push(new U(d.skinIndices[g],1<q?d.skinIndices[g+1]:0,2<q?d.skinIndices[g+2]:0,3<q?d.skinIndices[g+3]:0))}c.bones=d.bones;c.bones&&0<c.bones.length&&(c.skinWeights.length!==c.skinIndices.length||c.skinIndices.length!==c.vertices.length)&&console.warn("When skinning, number of vertices ("+c.vertices.length+"), skinIndices ("+c.skinIndices.length+"), and skinWeights ("+c.skinWeights.length+") should match.");g=a;h=g.scale;if(void 0!==g.morphTargets)for(d=0,q=g.morphTargets.length;d<q;d++){for(c.morphTargets[d]={},c.morphTargets[d].name=g.morphTargets[d].name,c.morphTargets[d].vertices=[],k=c.morphTargets[d].vertices,v=g.morphTargets[d].vertices,r=0,l=v.length;r<l;r+=3){n=new p,n.x=v[r]*h,n.y=v[r+1]*h,n.z=v[r+2]*h,k.push(n)}}if(void 0!==g.morphColors&&0<g.morphColors.length)for(console.warn("THREE.JSONLoader: \"morphColors\" no longer supported. Using them as face colors."),h=c.faces,g=g.morphColors[0].colors,d=0,q=h.length;d<q;d++){h[d].color.fromArray(g,3*d)}g=a;d=[];q=[];void 0!==g.animation&&q.push(g.animation);void 0!==g.animations&&(g.animations.length?q=q.concat(g.animations):q.push(g.animations));for(g=0;g<q.length;g++){(h=Fa.parseAnimation(q[g],c.bones))&&d.push(h)}c.morphTargets&&(q=Fa.CreateClipsFromMorphTargetSequences(c.morphTargets,10),d=d.concat(q));0<d.length&&(c.animations=d);c.computeFaceNormals();c.computeBoundingSphere();if(void 0===a.materials||0===a.materials.length)return{geometry:c};a=mc.prototype.initMaterials(a.materials,b,this.crossOrigin);return{geometry:c,materials:a}}}()});Object.assign(lf.prototype,{load:function load(a,b,c,d){""===this.texturePath&&(this.texturePath=a.substring(0,a.lastIndexOf("/")+1));var e=this;new Ka(e.manager).load(a,function(c){var f=null;try{f=JSON.parse(c)}catch(h){void 0!==d&&d(h);console.error("THREE:ObjectLoader: Can't parse "+a+".",h.message);return}c=f.metadata;void 0===c||void 0===c.type||"geometry"===c.type.toLowerCase()?console.error("THREE.ObjectLoader: Can't load "+a+". Use THREE.JSONLoader instead."):e.parse(f,b)},c,d)},setTexturePath:function setTexturePath(a){this.texturePath=a;return this},setCrossOrigin:function setCrossOrigin(a){this.crossOrigin=a;return this},parse:function parse(a,b){var c=this.parseShape(a.shapes);c=this.parseGeometries(a.geometries,c);var d=this.parseImages(a.images,function(){void 0!==b&&b(e)});d=this.parseTextures(a.textures,d);d=this.parseMaterials(a.materials,d);var e=this.parseObject(a.object,c,d);a.animations&&(e.animations=this.parseAnimations(a.animations));void 0!==a.images&&0!==a.images.length||void 0===b||b(e);return e},parseShape:function parseShape(a){var b={};if(void 0!==a)for(var c=0,d=a.length,e;c<d;c++){e=new jb().fromJSON(a[c]);b[e.uuid]=e}return b},parseGeometries:function parseGeometries(a,b){var c={};if(void 0!==a)for(var d=new he,e=new ge,f=0,g=a.length,h;f<g;f++){h=a[f];switch(h.type){case"PlaneGeometry":case"PlaneBufferGeometry":var l=new za[h.type](h.width,h.height,h.widthSegments,h.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":l=new za[h.type](h.width,h.height,h.depth,h.widthSegments,h.heightSegments,h.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":l=new za[h.type](h.radius,h.segments,h.thetaStart,h.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":l=new za[h.type](h.radiusTop,h.radiusBottom,h.height,h.radialSegments,h.heightSegments,h.openEnded,h.thetaStart,h.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":l=new za[h.type](h.radius,h.height,h.radialSegments,h.heightSegments,h.openEnded,h.thetaStart,h.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":l=new za[h.type](h.radius,h.widthSegments,h.heightSegments,h.phiStart,h.phiLength,h.thetaStart,h.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":l=new za[h.type](h.radius,h.detail);break;case"RingGeometry":case"RingBufferGeometry":l=new za[h.type](h.innerRadius,h.outerRadius,h.thetaSegments,h.phiSegments,h.thetaStart,h.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":l=new za[h.type](h.radius,h.tube,h.radialSegments,h.tubularSegments,h.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":l=new za[h.type](h.radius,h.tube,h.tubularSegments,h.radialSegments,h.p,h.q);break;case"LatheGeometry":case"LatheBufferGeometry":l=new za[h.type](h.points,h.segments,h.phiStart,h.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":l=new za[h.type](h.vertices,h.indices,h.radius,h.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":l=[];for(var k=0,p=h.shapes.length,n;k<p;k++){n=b[h.shapes[k]];l.push(n)}l=new za[h.type](l,h.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":l=[];k=0;for(p=h.shapes.length;k<p;k++){n=b[h.shapes[k]],l.push(n)}k=h.options.extrudePath;void 0!==k&&(h.options.extrudePath=new zf[k.type]().fromJSON(k));l=new za[h.type](l,h.options);break;case"BufferGeometry":l=e.parse(h);break;case"Geometry":l=d.parse(h,this.texturePath).geometry;break;default:console.warn("THREE.ObjectLoader: Unsupported geometry type \""+h.type+"\"");continue;}l.uuid=h.uuid;void 0!==h.name&&(l.name=h.name);!0===l.isBufferGeometry&&void 0!==h.userData&&(l.userData=h.userData);c[h.uuid]=l}return c},parseMaterials:function parseMaterials(a,b){var c={};if(void 0!==a){var d=new Nd;d.setTextures(b);b=0;for(var e=a.length,f;b<e;b++){f=a[b];if("MultiMaterial"===f.type){for(var g=[],h=0;h<f.materials.length;h++){g.push(d.parse(f.materials[h]))}c[f.uuid]=g}else c[f.uuid]=d.parse(f)}}return c},parseAnimations:function parseAnimations(a){for(var b=[],c=0;c<a.length;c++){var d=a[c],e=Fa.parse(d);void 0!==d.uuid&&(e.uuid=d.uuid);b.push(e)}return b},parseImages:function parseImages(a,b){function c(a){d.manager.itemStart(a);return f.load(a,function(){d.manager.itemEnd(a)},void 0,function(){d.manager.itemEnd(a);d.manager.itemError(a)})}var d=this,e={};if(void 0!==a&&0<a.length){b=new ce(b);var f=new cd(b);f.setCrossOrigin(this.crossOrigin);b=0;for(var g=a.length;b<g;b++){var h=a[b],l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(h.url)?h.url:d.texturePath+h.url;e[h.uuid]=c(l)}}return e},parseTextures:function parseTextures(a,b){function c(a,b){if("number"===typeof a)return a;console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",a);return b[a]}var d={};if(void 0!==a)for(var e=0,f=a.length,g;e<f;e++){g=a[e];void 0===g.image&&console.warn("THREE.ObjectLoader: No \"image\" specified for",g.uuid);void 0===b[g.image]&&console.warn("THREE.ObjectLoader: Undefined image",g.image);var h=new ca(b[g.image]);h.needsUpdate=!0;h.uuid=g.uuid;void 0!==g.name&&(h.name=g.name);void 0!==g.mapping&&(h.mapping=c(g.mapping,Ug));void 0!==g.offset&&h.offset.fromArray(g.offset);void 0!==g.repeat&&h.repeat.fromArray(g.repeat);void 0!==g.center&&h.center.fromArray(g.center);void 0!==g.rotation&&(h.rotation=g.rotation);void 0!==g.wrap&&(h.wrapS=c(g.wrap[0],Bf),h.wrapT=c(g.wrap[1],Bf));void 0!==g.format&&(h.format=g.format);void 0!==g.minFilter&&(h.minFilter=c(g.minFilter,Cf));void 0!==g.magFilter&&(h.magFilter=c(g.magFilter,Cf));void 0!==g.anisotropy&&(h.anisotropy=g.anisotropy);void 0!==g.flipY&&(h.flipY=g.flipY);d[g.uuid]=h}return d},parseObject:function parseObject(a,b,c){function d(a){void 0===b[a]&&console.warn("THREE.ObjectLoader: Undefined geometry",a);return b[a]}function e(a){if(void 0!==a){if(Array.isArray(a)){for(var b=[],d=0,e=a.length,f;d<e;d++){f=a[d];void 0===c[f]&&console.warn("THREE.ObjectLoader: Undefined material",f);b.push(c[f])}return b}void 0===c[a]&&console.warn("THREE.ObjectLoader: Undefined material",a);return c[a]}}switch(a.type){case"Scene":var f=new sd;void 0!==a.background&&_NumberisInteger(a.background)&&(f.background=new K(a.background));void 0!==a.fog&&("Fog"===a.fog.type?f.fog=new Tb(a.fog.color,a.fog.near,a.fog.far):"FogExp2"===a.fog.type&&(f.fog=new Sb(a.fog.color,a.fog.density)));break;case"PerspectiveCamera":f=new ea(a.fov,a.aspect,a.near,a.far);void 0!==a.focus&&(f.focus=a.focus);void 0!==a.zoom&&(f.zoom=a.zoom);void 0!==a.filmGauge&&(f.filmGauge=a.filmGauge);void 0!==a.filmOffset&&(f.filmOffset=a.filmOffset);void 0!==a.view&&(f.view=Object.assign({},a.view));break;case"OrthographicCamera":f=new Mb(a.left,a.right,a.top,a.bottom,a.near,a.far);void 0!==a.zoom&&(f.zoom=a.zoom);void 0!==a.view&&(f.view=Object.assign({},a.view));break;case"AmbientLight":f=new Fd(a.color,a.intensity);break;case"DirectionalLight":f=new Ed(a.color,a.intensity);break;case"PointLight":f=new Cd(a.color,a.intensity,a.distance,a.decay);break;case"RectAreaLight":f=new Gd(a.color,a.intensity,a.width,a.height);break;case"SpotLight":f=new Bd(a.color,a.intensity,a.distance,a.angle,a.penumbra,a.decay);break;case"HemisphereLight":f=new zd(a.color,a.groundColor,a.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":f=d(a.geometry);var g=e(a.material);f=f.bones&&0<f.bones.length?new ud(f,g):new pa(f,g);break;case"LOD":f=new Gc;break;case"Line":f=new ma(d(a.geometry),e(a.material),a.mode);break;case"LineLoop":f=new vd(d(a.geometry),e(a.material));break;case"LineSegments":f=new aa(d(a.geometry),e(a.material));break;case"PointCloud":case"Points":f=new Ub(d(a.geometry),e(a.material));break;case"Sprite":f=new Fc(e(a.material));break;case"Group":f=new wd;break;default:f=new B;}f.uuid=a.uuid;void 0!==a.name&&(f.name=a.name);void 0!==a.matrix?(f.matrix.fromArray(a.matrix),void 0!==a.matrixAutoUpdate&&(f.matrixAutoUpdate=a.matrixAutoUpdate),f.matrixAutoUpdate&&f.matrix.decompose(f.position,f.quaternion,f.scale)):(void 0!==a.position&&f.position.fromArray(a.position),void 0!==a.rotation&&f.rotation.fromArray(a.rotation),void 0!==a.quaternion&&f.quaternion.fromArray(a.quaternion),void 0!==a.scale&&f.scale.fromArray(a.scale));void 0!==a.castShadow&&(f.castShadow=a.castShadow);void 0!==a.receiveShadow&&(f.receiveShadow=a.receiveShadow);a.shadow&&(void 0!==a.shadow.bias&&(f.shadow.bias=a.shadow.bias),void 0!==a.shadow.radius&&(f.shadow.radius=a.shadow.radius),void 0!==a.shadow.mapSize&&f.shadow.mapSize.fromArray(a.shadow.mapSize),void 0!==a.shadow.camera&&(f.shadow.camera=this.parseObject(a.shadow.camera)));void 0!==a.visible&&(f.visible=a.visible);void 0!==a.frustumCulled&&(f.frustumCulled=a.frustumCulled);void 0!==a.renderOrder&&(f.renderOrder=a.renderOrder);void 0!==a.userData&&(f.userData=a.userData);if(void 0!==a.children){g=a.children;for(var h=0;h<g.length;h++){f.add(this.parseObject(g[h],b,c))}}if("LOD"===a.type)for(a=a.levels,g=0;g<a.length;g++){h=a[g];var l=f.getObjectByProperty("uuid",h.object);void 0!==l&&f.addLevel(l,h.distance)}return f}});var Ug={UVMapping:300,CubeReflectionMapping:301,CubeRefractionMapping:302,EquirectangularReflectionMapping:303,EquirectangularRefractionMapping:304,SphericalReflectionMapping:305,CubeUVReflectionMapping:306,CubeUVRefractionMapping:307},Bf={RepeatWrapping:1E3,ClampToEdgeWrapping:1001,MirroredRepeatWrapping:1002},Cf={NearestFilter:1003,NearestMipMapNearestFilter:1004,NearestMipMapLinearFilter:1005,LinearFilter:1006,LinearMipMapNearestFilter:1007,LinearMipMapLinearFilter:1008};ie.prototype={constructor:ie,setOptions:function setOptions(a){this.options=a;return this},load:function load(a,b,c,d){void 0===a&&(a="");void 0!==this.path&&(a=this.path+a);a=this.manager.resolveURL(a);var e=this,f=Kb.get(a);if(void 0!==f)return e.manager.itemStart(a),setTimeout(function(){b&&b(f);e.manager.itemEnd(a)},0),f;fetch(a).then(function(a){return a.blob()}).then(function(a){return createImageBitmap(a,e.options)}).then(function(c){Kb.add(a,c);b&&b(c);e.manager.itemEnd(a)}).catch(function(b){d&&d(b);e.manager.itemEnd(a);e.manager.itemError(a)})},setCrossOrigin:function setCrossOrigin(){return this},setPath:function setPath(a){this.path=a;return this}};Object.assign(je.prototype,{moveTo:function moveTo(a,b){this.currentPath=new Pa;this.subPaths.push(this.currentPath);this.currentPath.moveTo(a,b)},lineTo:function lineTo(a,b){this.currentPath.lineTo(a,b)},quadraticCurveTo:function quadraticCurveTo(a,b,c,d){this.currentPath.quadraticCurveTo(a,b,c,d)},bezierCurveTo:function bezierCurveTo(a,b,c,d,e,f){this.currentPath.bezierCurveTo(a,b,c,d,e,f)},splineThru:function splineThru(a){this.currentPath.splineThru(a)},toShapes:function toShapes(a,b){function c(a){for(var b=[],c=0,d=a.length;c<d;c++){var e=a[c],f=new jb;f.curves=e.curves;b.push(f)}return b}function d(a,b){for(var c=b.length,d=!1,e=c-1,f=0;f<c;e=f++){var g=b[e],h=b[f],l=h.x-g.x,k=h.y-g.y;if(_Mathabs(k)>_NumberEPSILON){if(0>k&&(g=b[f],l=-l,h=b[e],k=-k),!(a.y<g.y||a.y>h.y))if(a.y===g.y){if(a.x===g.x)return!0}else{e=k*(a.x-g.x)-l*(a.y-g.y);if(0===e)return!0;0>e||(d=!d)}}else if(a.y===g.y&&(h.x<=a.x&&a.x<=g.x||g.x<=a.x&&a.x<=h.x))return!0}return d}var e=Za.isClockWise,f=this.subPaths;if(0===f.length)return[];if(!0===b)return c(f);b=[];if(1===f.length){var g=f[0],h=new jb;h.curves=g.curves;b.push(h);return b}var l=!e(f[0].getPoints());l=a?!l:l;h=[];var k=[],p=[],n=0;k[n]=void 0;p[n]=[];for(var r=0,q=f.length;r<q;r++){g=f[r];var t=g.getPoints(),u=e(t);(u=a?!u:u)?(!l&&k[n]&&n++,k[n]={s:new jb,p:t},k[n].s.curves=g.curves,l&&n++,p[n]=[]):p[n].push({h:g,p:t[0]})}if(!k[0])return c(f);if(1<k.length){r=!1;a=[];e=0;for(f=k.length;e<f;e++){h[e]=[]}e=0;for(f=k.length;e<f;e++){for(g=p[e],u=0;u<g.length;u++){l=g[u];n=!0;for(t=0;t<k.length;t++){d(l.p,k[t].p)&&(e!==t&&a.push({froms:e,tos:t,hole:u}),n?(n=!1,h[t].push(l)):r=!0)}n&&h[e].push(l)}}0<a.length&&(r||(p=h))}r=0;for(e=k.length;r<e;r++){for(h=k[r].s,b.push(h),a=p[r],f=0,g=a.length;f<g;f++){h.holes.push(a[f].h)}}return b}});Object.assign(ke.prototype,{isFont:!0,generateShapes:function generateShapes(a,b,c){void 0===b&&(b=100);c=[];var d=b;b=this.data;var e=Array.from?Array.from(a):(a+"").split("");d/=b.resolution;var f=(b.boundingBox.yMax-b.boundingBox.yMin+b.underlineThickness)*d;a=[];for(var g=0,h=0,l=0,k;l<e.length;l++){k=e[l];if("\n"===k)g=0,h-=f;else{var p=d,n=g,r=h;if(k=b.glyphs[k]||b.glyphs["?"]){var q=new je;if(k.o)for(var t=k._cachedOutline||(k._cachedOutline=k.o.split(" ")),u=0,y=t.length;u<y;){switch(t[u++]){case"m":var x=t[u++]*p+n,w=t[u++]*p+r;q.moveTo(x,w);break;case"l":x=t[u++]*p+n;w=t[u++]*p+r;q.lineTo(x,w);break;case"q":var A=t[u++]*p+n,C=t[u++]*p+r,B=t[u++]*p+n,F=t[u++]*p+r;q.quadraticCurveTo(B,F,A,C);break;case"b":A=t[u++]*p+n,C=t[u++]*p+r,B=t[u++]*p+n,F=t[u++]*p+r,x=t[u++]*p+n,w=t[u++]*p+r,q.bezierCurveTo(B,F,x,w,A,C);}}p={offsetX:k.ha*p,path:q}}else p=void 0;g+=p.offsetX;a.push(p.path)}}b=0;for(e=a.length;b<e;b++){Array.prototype.push.apply(c,a[b].toShapes())}return c}});Object.assign(mf.prototype,{load:function load(a,b,c,d){var e=this,f=new Ka(this.manager);f.setPath(this.path);f.load(a,function(a){try{var c=JSON.parse(a)}catch(l){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),c=JSON.parse(a.substring(65,a.length-2))}a=e.parse(c);b&&b(a)},c,d)},parse:function parse(a){return new ke(a)},setPath:function setPath(a){this.path=a;return this}});var Sd,ne={getContext:function getContext(){void 0===Sd&&(Sd=new(window.AudioContext||window.webkitAudioContext));return Sd},setContext:function setContext(a){Sd=a}};Object.assign(le.prototype,{load:function load(a,b,c,d){var e=new Ka(this.manager);e.setResponseType("arraybuffer");e.load(a,function(a){ne.getContext().decodeAudioData(a,function(a){b(a)})},c,d)}});Object.assign(nf.prototype,{update:function(){var a,b,c,d,e,f,g,h,l=new F,k=new F;return function(m){if(a!==this||b!==m.focus||c!==m.fov||d!==m.aspect*this.aspect||e!==m.near||f!==m.far||g!==m.zoom||h!==this.eyeSep){a=this;b=m.focus;c=m.fov;d=m.aspect*this.aspect;e=m.near;f=m.far;g=m.zoom;var n=m.projectionMatrix.clone();h=this.eyeSep/2;var p=h*e/b,q=e*_Mathtan(.5*(P.DEG2RAD*c))/g;k.elements[12]=-h;l.elements[12]=h;var t=-q*d+p,v=q*d+p;n.elements[0]=2*e/(v-t);n.elements[8]=(v+t)/(v-t);this.cameraL.projectionMatrix.copy(n);t=-q*d-p;v=q*d-p;n.elements[0]=2*e/(v-t);n.elements[8]=(v+t)/(v-t);this.cameraR.projectionMatrix.copy(n)}this.cameraL.matrixWorld.copy(m.matrixWorld).multiply(k);this.cameraR.matrixWorld.copy(m.matrixWorld).multiply(l)}}()});hd.prototype=Object.create(B.prototype);hd.prototype.constructor=hd;me.prototype=Object.assign(Object.create(B.prototype),{constructor:me,getInput:function getInput(){return this.gain},removeFilter:function removeFilter(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null)},getFilter:function getFilter(){return this.filter},setFilter:function setFilter(a){null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination);this.filter=a;this.gain.connect(this.filter);this.filter.connect(this.context.destination)},getMasterVolume:function getMasterVolume(){return this.gain.gain.value},setMasterVolume:function setMasterVolume(a){this.gain.gain.setTargetAtTime(a,this.context.currentTime,.01)},updateMatrixWorld:function(){var a=new p,b=new X,c=new p,d=new p;return function(e){B.prototype.updateMatrixWorld.call(this,e);e=this.context.listener;var f=this.up;this.matrixWorld.decompose(a,b,c);d.set(0,0,-1).applyQuaternion(b);e.positionX?(e.positionX.setValueAtTime(a.x,this.context.currentTime),e.positionY.setValueAtTime(a.y,this.context.currentTime),e.positionZ.setValueAtTime(a.z,this.context.currentTime),e.forwardX.setValueAtTime(d.x,this.context.currentTime),e.forwardY.setValueAtTime(d.y,this.context.currentTime),e.forwardZ.setValueAtTime(d.z,this.context.currentTime),e.upX.setValueAtTime(f.x,this.context.currentTime),e.upY.setValueAtTime(f.y,this.context.currentTime),e.upZ.setValueAtTime(f.z,this.context.currentTime)):(e.setPosition(a.x,a.y,a.z),e.setOrientation(d.x,d.y,d.z,f.x,f.y,f.z))}}()});nc.prototype=Object.assign(Object.create(B.prototype),{constructor:nc,getOutput:function getOutput(){return this.gain},setNodeSource:function setNodeSource(a){this.hasPlaybackControl=!1;this.sourceType="audioNode";this.source=a;this.connect();return this},setMediaElementSource:function setMediaElementSource(a){this.hasPlaybackControl=!1;this.sourceType="mediaNode";this.source=this.context.createMediaElementSource(a);this.connect();return this},setBuffer:function setBuffer(a){this.buffer=a;this.sourceType="buffer";this.autoplay&&this.play();return this},play:function play(){if(!0===this.isPlaying)console.warn("THREE.Audio: Audio is already playing.");else if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else{var a=this.context.createBufferSource();a.buffer=this.buffer;a.loop=this.loop;a.onended=this.onEnded.bind(this);a.playbackRate.setValueAtTime(this.playbackRate,this.startTime);this.startTime=this.context.currentTime;a.start(this.startTime,this.offset);this.isPlaying=!0;this.source=a;return this.connect()}},pause:function pause(){if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else return!0===this.isPlaying&&(this.source.stop(),this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate,this.isPlaying=!1),this},stop:function stop(){if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else return this.source.stop(),this.offset=0,this.isPlaying=!1,this},connect:function connect(){if(0<this.filters.length){this.source.connect(this.filters[0]);for(var a=1,b=this.filters.length;a<b;a++){this.filters[a-1].connect(this.filters[a])}this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function disconnect(){if(0<this.filters.length){this.source.disconnect(this.filters[0]);for(var a=1,b=this.filters.length;a<b;a++){this.filters[a-1].disconnect(this.filters[a])}this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function getFilters(){return this.filters},setFilters:function setFilters(a){a||(a=[]);!0===this.isPlaying?(this.disconnect(),this.filters=a,this.connect()):this.filters=a;return this},getFilter:function getFilter(){return this.getFilters()[0]},setFilter:function setFilter(a){return this.setFilters(a?[a]:[])},setPlaybackRate:function setPlaybackRate(a){if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else return this.playbackRate=a,!0===this.isPlaying&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime),this},getPlaybackRate:function getPlaybackRate(){return this.playbackRate},onEnded:function onEnded(){this.isPlaying=!1},getLoop:function getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function setLoop(a){if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else return this.loop=a,!0===this.isPlaying&&(this.source.loop=this.loop),this},getVolume:function getVolume(){return this.gain.gain.value},setVolume:function setVolume(a){this.gain.gain.setTargetAtTime(a,this.context.currentTime,.01);return this}});oe.prototype=Object.assign(Object.create(nc.prototype),{constructor:oe,getOutput:function getOutput(){return this.panner},getRefDistance:function getRefDistance(){return this.panner.refDistance},setRefDistance:function setRefDistance(a){this.panner.refDistance=a},getRolloffFactor:function getRolloffFactor(){return this.panner.rolloffFactor},setRolloffFactor:function setRolloffFactor(a){this.panner.rolloffFactor=a},getDistanceModel:function getDistanceModel(){return this.panner.distanceModel},setDistanceModel:function setDistanceModel(a){this.panner.distanceModel=a},getMaxDistance:function getMaxDistance(){return this.panner.maxDistance},setMaxDistance:function setMaxDistance(a){this.panner.maxDistance=a},updateMatrixWorld:function(){var a=new p;return function(b){B.prototype.updateMatrixWorld.call(this,b);a.setFromMatrixPosition(this.matrixWorld);this.panner.setPosition(a.x,a.y,a.z)}}()});Object.assign(pe.prototype,{getFrequencyData:function getFrequencyData(){this.analyser.getByteFrequencyData(this.data);return this.data},getAverageFrequency:function getAverageFrequency(){for(var a=0,b=this.getFrequencyData(),c=0;c<b.length;c++){a+=b[c]}return a/b.length}});Object.assign(qe.prototype,{accumulate:function accumulate(a,b){var c=this.buffer,d=this.valueSize;a=a*d+d;var e=this.cumulativeWeight;if(0===e){for(e=0;e!==d;++e){c[a+e]=c[e]}e=b}else e+=b,this._mixBufferRegion(c,a,0,b/e,d);this.cumulativeWeight=e},apply:function apply(a){var b=this.valueSize,c=this.buffer;a=a*b+b;var d=this.cumulativeWeight,e=this.binding;this.cumulativeWeight=0;1>d&&this._mixBufferRegion(c,a,3*b,1-d,b);d=b;for(;d!==b+b;++d){if(c[d]!==c[d+b]){e.setValue(c,a);break}}},saveOriginalState:function saveOriginalState(){var a=this.buffer,b=this.valueSize,c=3*b;this.binding.getValue(a,c);for(var d=b;d!==c;++d){a[d]=a[c+d%b]}this.cumulativeWeight=0},restoreOriginalState:function restoreOriginalState(){this.binding.setValue(this.buffer,3*this.valueSize)},_select:function _select(a,b,c,d,e){if(.5<=d)for(d=0;d!==e;++d){a[b+d]=a[c+d]}},_slerp:function _slerp(a,b,c,d){X.slerpFlat(a,b,a,b,a,c,d)},_lerp:function _lerp(a,b,c,d,e){for(var g=0,h;g!==e;++g){h=b+g;a[h]=a[h]*(1-d)+a[c+g]*d}}});Object.assign(of.prototype,{getValue:function getValue(a,b){this.bind();var c=this._bindings[this._targetGroup.nCachedObjects_];void 0!==c&&c.getValue(a,b)},setValue:function setValue(a,b){for(var c=this._bindings,d=this._targetGroup.nCachedObjects_,e=c.length;d!==e;++d){c[d].setValue(a,b)}},bind:function bind(){for(var a=this._bindings,b=this._targetGroup.nCachedObjects_,c=a.length;b!==c;++b){a[b].bind()}},unbind:function unbind(){for(var a=this._bindings,b=this._targetGroup.nCachedObjects_,c=a.length;b!==c;++b){a[b].unbind()}}});Object.assign(oa,{Composite:of,create:function create(a,b,c){return a&&a.isAnimationObjectGroup?new oa.Composite(a,b,c):new oa(a,b,c)},sanitizeNodeName:function(){var a=/[\[\]\.:\/]/g;return function(b){return b.replace(/\s/g,"_").replace(a,"")}}(),parseTrackName:function(){var a="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",b=/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]");a=/(WCOD+)?/.source.replace("WCOD",a);var c=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]"),d=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC","[^\\[\\]\\.:\\/]"),e=new RegExp("^"+b+a+c+d+"$"),f=["material","materials","bones"];return function(a){var b=e.exec(a);if(!b)throw Error("PropertyBinding: Cannot parse trackName: "+a);b={nodeName:b[2],objectName:b[3],objectIndex:b[4],propertyName:b[5],propertyIndex:b[6]};var c=b.nodeName&&b.nodeName.lastIndexOf(".");if(void 0!==c&&-1!==c){var d=b.nodeName.substring(c+1);-1!==f.indexOf(d)&&(b.nodeName=b.nodeName.substring(0,c),b.objectName=d)}if(null===b.propertyName||0===b.propertyName.length)throw Error("PropertyBinding: can not parse propertyName from trackName: "+a);return b}}(),findNode:function findNode(a,b){if(!b||""===b||"root"===b||"."===b||-1===b||b===a.name||b===a.uuid)return a;if(a.skeleton){var c=a.skeleton.getBoneByName(b);if(void 0!==c)return c}if(a.children){var d=function(a){for(var c=0,e;c<a.length;c++){e=a[c];if(e.name===b||e.uuid===b||(e=d(e.children)))return e}return null};if(a=d(a.children))return a}return null}});Object.assign(oa.prototype,{_getValue_unavailable:function _getValue_unavailable(){},_setValue_unavailable:function _setValue_unavailable(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(a,b){a[b]=this.node[this.propertyName]},function(a,b){for(var c=this.resolvedProperty,d=0,e=c.length;d!==e;++d){a[b++]=c[d]}},function(a,b){a[b]=this.resolvedProperty[this.propertyIndex]},function(a,b){this.resolvedProperty.toArray(a,b)}],SetterByBindingTypeAndVersioning:[[function(a,b){this.targetObject[this.propertyName]=a[b]},function(a,b){this.targetObject[this.propertyName]=a[b];this.targetObject.needsUpdate=!0},function(a,b){this.targetObject[this.propertyName]=a[b];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(a,b){for(var c=this.resolvedProperty,d=0,e=c.length;d!==e;++d){c[d]=a[b++]}},function(a,b){for(var c=this.resolvedProperty,d=0,e=c.length;d!==e;++d){c[d]=a[b++]}this.targetObject.needsUpdate=!0},function(a,b){for(var c=this.resolvedProperty,d=0,e=c.length;d!==e;++d){c[d]=a[b++]}this.targetObject.matrixWorldNeedsUpdate=!0}],[function(a,b){this.resolvedProperty[this.propertyIndex]=a[b]},function(a,b){this.resolvedProperty[this.propertyIndex]=a[b];this.targetObject.needsUpdate=!0},function(a,b){this.resolvedProperty[this.propertyIndex]=a[b];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(a,b){this.resolvedProperty.fromArray(a,b)},function(a,b){this.resolvedProperty.fromArray(a,b);this.targetObject.needsUpdate=!0},function(a,b){this.resolvedProperty.fromArray(a,b);this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function getValue(a,b){this.bind();this.getValue(a,b)},setValue:function setValue(a,b){this.bind();this.setValue(a,b)},bind:function bind(){var a=this.node,b=this.parsedPath,c=b.objectName,d=b.propertyName,e=b.propertyIndex;a||(this.node=a=oa.findNode(this.rootNode,b.nodeName)||this.rootNode);this.getValue=this._getValue_unavailable;this.setValue=this._setValue_unavailable;if(a){if(c){var f=b.objectIndex;switch(c){case"materials":if(!a.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!a.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}a=a.material.materials;break;case"bones":if(!a.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}a=a.skeleton.bones;for(c=0;c<a.length;c++){if(a[c].name===f){f=c;break}}break;default:if(void 0===a[c]){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}a=a[c];}if(void 0!==f){if(void 0===a[f]){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,a);return}a=a[f]}}f=a[d];if(void 0===f)console.error("THREE.PropertyBinding: Trying to update property for track: "+b.nodeName+"."+d+" but it wasn't found.",a);else{b=this.Versioning.None;void 0!==a.needsUpdate?(b=this.Versioning.NeedsUpdate,this.targetObject=a):void 0!==a.matrixWorldNeedsUpdate&&(b=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=a);c=this.BindingType.Direct;if(void 0!==e){if("morphTargetInfluences"===d){if(!a.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(a.geometry.isBufferGeometry){if(!a.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}for(c=0;c<this.node.geometry.morphAttributes.position.length;c++){if(a.geometry.morphAttributes.position[c].name===e){e=c;break}}}else{if(!a.geometry.morphTargets){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);return}for(c=0;c<this.node.geometry.morphTargets.length;c++){if(a.geometry.morphTargets[c].name===e){e=c;break}}}}c=this.BindingType.ArrayElement;this.resolvedProperty=f;this.propertyIndex=e}else void 0!==f.fromArray&&void 0!==f.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=f):Array.isArray(f)?(c=this.BindingType.EntireArray,this.resolvedProperty=f):this.propertyName=d;this.getValue=this.GetterByBindingType[c];this.setValue=this.SetterByBindingTypeAndVersioning[c][b]}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function unbind(){this.node=null;this.getValue=this._getValue_unbound;this.setValue=this._setValue_unbound}});Object.assign(oa.prototype,{_getValue_unbound:oa.prototype.getValue,_setValue_unbound:oa.prototype.setValue});Object.assign(pf.prototype,{isAnimationObjectGroup:!0,add:function add(){for(var a=this._objects,b=a.length,c=this.nCachedObjects_,d=this._indicesByUUID,e=this._paths,f=this._parsedPaths,g=this._bindings,h=g.length,l=void 0,k=0,p=arguments.length;k!==p;++k){var n=arguments[k],r=n.uuid,q=d[r];if(void 0===q){q=b++;d[r]=q;a.push(n);r=0;for(var t=h;r!==t;++r){g[r].push(new oa(n,e[r],f[r]))}}else if(q<c){l=a[q];var u=--c;t=a[u];d[t.uuid]=q;a[q]=t;d[r]=u;a[u]=n;r=0;for(t=h;r!==t;++r){var y=g[r],x=y[q];y[q]=y[u];void 0===x&&(x=new oa(n,e[r],f[r]));y[u]=x}}else a[q]!==l&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c},remove:function remove(){for(var a=this._objects,b=this.nCachedObjects_,c=this._indicesByUUID,d=this._bindings,e=d.length,f=0,g=arguments.length;f!==g;++f){var h=arguments[f],l=h.uuid,k=c[l];if(void 0!==k&&k>=b){var p=b++,n=a[p];c[n.uuid]=k;a[k]=n;c[l]=p;a[p]=h;h=0;for(l=e;h!==l;++h){n=d[h];var r=n[k];n[k]=n[p];n[p]=r}}}this.nCachedObjects_=b},uncache:function uncache(){for(var a=this._objects,b=a.length,c=this.nCachedObjects_,d=this._indicesByUUID,e=this._bindings,f=e.length,g=0,h=arguments.length;g!==h;++g){var l=arguments[g].uuid,k=d[l];if(void 0!==k)if(delete d[l],k<c){l=--c;var p=a[l],n=--b,r=a[n];d[p.uuid]=k;a[k]=p;d[r.uuid]=l;a[l]=r;a.pop();p=0;for(r=f;p!==r;++p){var q=e[p],t=q[n];q[k]=q[l];q[l]=t;q.pop()}}else for(n=--b,r=a[n],d[r.uuid]=k,a[k]=r,a.pop(),p=0,r=f;p!==r;++p){q=e[p],q[k]=q[n],q.pop()}}this.nCachedObjects_=c},subscribe_:function subscribe_(a,b){var c=this._bindingsIndicesByPath,d=c[a],e=this._bindings;if(void 0!==d)return e[d];var f=this._paths,g=this._parsedPaths,h=this._objects,l=this.nCachedObjects_,k=Array(h.length);d=e.length;c[a]=d;f.push(a);g.push(b);e.push(k);c=l;for(d=h.length;c!==d;++c){k[c]=new oa(h[c],a,b)}return k},unsubscribe_:function unsubscribe_(a){var b=this._bindingsIndicesByPath,c=b[a];if(void 0!==c){var d=this._paths,e=this._parsedPaths,f=this._bindings,g=f.length-1,h=f[g];b[a[g]]=c;f[c]=h;f.pop();e[c]=e[g];e.pop();d[c]=d[g];d.pop()}}});Object.assign(qf.prototype,{play:function play(){this._mixer._activateAction(this);return this},stop:function stop(){this._mixer._deactivateAction(this);return this.reset()},reset:function reset(){this.paused=!1;this.enabled=!0;this.time=0;this._loopCount=-1;this._startTime=null;return this.stopFading().stopWarping()},isRunning:function isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function isScheduled(){return this._mixer._isActiveAction(this)},startAt:function startAt(a){this._startTime=a;return this},setLoop:function setLoop(a,b){this.loop=a;this.repetitions=b;return this},setEffectiveWeight:function setEffectiveWeight(a){this.weight=a;this._effectiveWeight=this.enabled?a:0;return this.stopFading()},getEffectiveWeight:function getEffectiveWeight(){return this._effectiveWeight},fadeIn:function fadeIn(a){return this._scheduleFading(a,0,1)},fadeOut:function fadeOut(a){return this._scheduleFading(a,1,0)},crossFadeFrom:function crossFadeFrom(a,b,c){a.fadeOut(b);this.fadeIn(b);if(c){c=this._clip.duration;var d=a._clip.duration,e=c/d;a.warp(1,d/c,b);this.warp(e,1,b)}return this},crossFadeTo:function crossFadeTo(a,b,c){return a.crossFadeFrom(this,b,c)},stopFading:function stopFading(){var a=this._weightInterpolant;null!==a&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(a));return this},setEffectiveTimeScale:function setEffectiveTimeScale(a){this.timeScale=a;this._effectiveTimeScale=this.paused?0:a;return this.stopWarping()},getEffectiveTimeScale:function getEffectiveTimeScale(){return this._effectiveTimeScale},setDuration:function setDuration(a){this.timeScale=this._clip.duration/a;return this.stopWarping()},syncWith:function syncWith(a){this.time=a.time;this.timeScale=a.timeScale;return this.stopWarping()},halt:function halt(a){return this.warp(this._effectiveTimeScale,0,a)},warp:function warp(a,b,c){var d=this._mixer,e=d.time,f=this._timeScaleInterpolant,g=this.timeScale;null===f&&(this._timeScaleInterpolant=f=d._lendControlInterpolant());d=f.parameterPositions;f=f.sampleValues;d[0]=e;d[1]=e+c;f[0]=a/g;f[1]=b/g;return this},stopWarping:function stopWarping(){var a=this._timeScaleInterpolant;null!==a&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(a));return this},getMixer:function getMixer(){return this._mixer},getClip:function getClip(){return this._clip},getRoot:function getRoot(){return this._localRoot||this._mixer._root},_update:function _update(a,b,c,d){if(this.enabled){var e=this._startTime;if(null!==e){b=(a-e)*c;if(0>b||0===c)return;this._startTime=null;b*=c}b*=this._updateTimeScale(a);c=this._updateTime(b);a=this._updateWeight(a);if(0<a){b=this._interpolants;e=this._propertyBindings;for(var f=0,g=b.length;f!==g;++f){b[f].evaluate(c),e[f].accumulate(d,a)}}}else this._updateWeight(a)},_updateWeight:function _updateWeight(a){var b=0;if(this.enabled){b=this.weight;var c=this._weightInterpolant;if(null!==c){var d=c.evaluate(a)[0];b*=d;a>c.parameterPositions[1]&&(this.stopFading(),0===d&&(this.enabled=!1))}}return this._effectiveWeight=b},_updateTimeScale:function _updateTimeScale(a){var b=0;if(!this.paused){b=this.timeScale;var c=this._timeScaleInterpolant;if(null!==c){var d=c.evaluate(a)[0];b*=d;a>c.parameterPositions[1]&&(this.stopWarping(),0===b?this.paused=!0:this.timeScale=b)}}return this._effectiveTimeScale=b},_updateTime:function _updateTime(a){var b=this.time+a;if(0===a)return b;var c=this._clip.duration,d=this.loop,e=this._loopCount;if(2200===d)a:{if(-1===e&&(this._loopCount=0,this._setEndings(!0,!0,!1)),b>=c)b=c;else if(0>b)b=0;else break a;this.clampWhenFinished?this.paused=!0:this.enabled=!1;this._mixer.dispatchEvent({type:"finished",action:this,direction:0>a?-1:1})}else{d=2202===d;-1===e&&(0<=a?(e=0,this._setEndings(!0,0===this.repetitions,d)):this._setEndings(0===this.repetitions,!0,d));if(b>=c||0>b){var f=_Mathfloor(b/c);b-=c*f;e+=_Mathabs(f);var g=this.repetitions-e;0>=g?(this.clampWhenFinished?this.paused=!0:this.enabled=!1,b=0<a?c:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:0<a?1:-1})):(1===g?(a=0>a,this._setEndings(a,!a,d)):this._setEndings(!1,!1,d),this._loopCount=e,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:f}))}if(d&&1===(1&e))return this.time=b,c-b}return this.time=b},_setEndings:function _setEndings(a,b,c){var d=this._interpolantSettings;c?(d.endingStart=2401,d.endingEnd=2401):(d.endingStart=a?this.zeroSlopeAtStart?2401:2400:2402,d.endingEnd=b?this.zeroSlopeAtEnd?2401:2400:2402)},_scheduleFading:function _scheduleFading(a,b,c){var d=this._mixer,e=d.time,f=this._weightInterpolant;null===f&&(this._weightInterpolant=f=d._lendControlInterpolant());d=f.parameterPositions;f=f.sampleValues;d[0]=e;f[0]=b;d[1]=e+a;f[1]=c;return this}});re.prototype=Object.assign(Object.create(ha.prototype),{constructor:re,_bindAction:function _bindAction(a,b){var c=a._localRoot||this._root,d=a._clip.tracks,e=d.length,f=a._propertyBindings;a=a._interpolants;var g=c.uuid,h=this._bindingsByRootAndName,l=h[g];void 0===l&&(l={},h[g]=l);for(h=0;h!==e;++h){var k=d[h],p=k.name,n=l[p];if(void 0===n){n=f[h];if(void 0!==n){null===n._cacheIndex&&(++n.referenceCount,this._addInactiveBinding(n,g,p));continue}n=new qe(oa.create(c,p,b&&b._propertyBindings[h].binding.parsedPath),k.ValueTypeName,k.getValueSize());++n.referenceCount;this._addInactiveBinding(n,g,p)}f[h]=n;a[h].resultBuffer=n.buffer}},_activateAction:function _activateAction(a){if(!this._isActiveAction(a)){if(null===a._cacheIndex){var b=(a._localRoot||this._root).uuid,c=a._clip.uuid,d=this._actionsByClip[c];this._bindAction(a,d&&d.knownActions[0]);this._addInactiveAction(a,c,b)}b=a._propertyBindings;c=0;for(d=b.length;c!==d;++c){var e=b[c];0===e.useCount++&&(this._lendBinding(e),e.saveOriginalState())}this._lendAction(a)}},_deactivateAction:function _deactivateAction(a){if(this._isActiveAction(a)){for(var b=a._propertyBindings,c=0,d=b.length,e;c!==d;++c){e=b[c];0===--e.useCount&&(e.restoreOriginalState(),this._takeBackBinding(e))}this._takeBackAction(a)}},_initMemoryManager:function _initMemoryManager(){this._actions=[];this._nActiveActions=0;this._actionsByClip={};this._bindings=[];this._nActiveBindings=0;this._bindingsByRootAndName={};this._controlInterpolants=[];this._nActiveControlInterpolants=0;var a=this;this.stats={actions:{get total(){return a._actions.length},get inUse(){return a._nActiveActions}},bindings:{get total(){return a._bindings.length},get inUse(){return a._nActiveBindings}},controlInterpolants:{get total(){return a._controlInterpolants.length},get inUse(){return a._nActiveControlInterpolants}}}},_isActiveAction:function _isActiveAction(a){a=a._cacheIndex;return null!==a&&a<this._nActiveActions},_addInactiveAction:function _addInactiveAction(a,b,c){var d=this._actions,e=this._actionsByClip,f=e[b];void 0===f?(f={knownActions:[a],actionByRoot:{}},a._byClipCacheIndex=0,e[b]=f):(b=f.knownActions,a._byClipCacheIndex=b.length,b.push(a));a._cacheIndex=d.length;d.push(a);f.actionByRoot[c]=a},_removeInactiveAction:function _removeInactiveAction(a){var b=this._actions,c=b[b.length-1],d=a._cacheIndex;c._cacheIndex=d;b[d]=c;b.pop();a._cacheIndex=null;b=a._clip.uuid;c=this._actionsByClip;d=c[b];var e=d.knownActions,f=e[e.length-1],g=a._byClipCacheIndex;f._byClipCacheIndex=g;e[g]=f;e.pop();a._byClipCacheIndex=null;delete d.actionByRoot[(a._localRoot||this._root).uuid];0===e.length&&delete c[b];this._removeInactiveBindingsForAction(a)},_removeInactiveBindingsForAction:function _removeInactiveBindingsForAction(a){a=a._propertyBindings;for(var b=0,c=a.length,d;b!==c;++b){d=a[b];0===--d.referenceCount&&this._removeInactiveBinding(d)}},_lendAction:function _lendAction(a){var b=this._actions,c=a._cacheIndex,d=this._nActiveActions++,e=b[d];a._cacheIndex=d;b[d]=a;e._cacheIndex=c;b[c]=e},_takeBackAction:function _takeBackAction(a){var b=this._actions,c=a._cacheIndex,d=--this._nActiveActions,e=b[d];a._cacheIndex=d;b[d]=a;e._cacheIndex=c;b[c]=e},_addInactiveBinding:function _addInactiveBinding(a,b,c){var d=this._bindingsByRootAndName,e=d[b],f=this._bindings;void 0===e&&(e={},d[b]=e);e[c]=a;a._cacheIndex=f.length;f.push(a)},_removeInactiveBinding:function _removeInactiveBinding(a){var b=this._bindings,c=a.binding,d=c.rootNode.uuid;c=c.path;var e=this._bindingsByRootAndName,f=e[d],g=b[b.length-1];a=a._cacheIndex;g._cacheIndex=a;b[a]=g;b.pop();delete f[c];a:{for(var h in f){break a}delete e[d]}},_lendBinding:function _lendBinding(a){var b=this._bindings,c=a._cacheIndex,d=this._nActiveBindings++,e=b[d];a._cacheIndex=d;b[d]=a;e._cacheIndex=c;b[c]=e},_takeBackBinding:function _takeBackBinding(a){var b=this._bindings,c=a._cacheIndex,d=--this._nActiveBindings,e=b[d];a._cacheIndex=d;b[d]=a;e._cacheIndex=c;b[c]=e},_lendControlInterpolant:function _lendControlInterpolant(){var a=this._controlInterpolants,b=this._nActiveControlInterpolants++,c=a[b];void 0===c&&(c=new gd(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),c.__cacheIndex=b,a[b]=c);return c},_takeBackControlInterpolant:function _takeBackControlInterpolant(a){var b=this._controlInterpolants,c=a.__cacheIndex,d=--this._nActiveControlInterpolants,e=b[d];a.__cacheIndex=d;b[d]=a;e.__cacheIndex=c;b[c]=e},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function clipAction(a,b){var c=b||this._root,d=c.uuid;c="string"===typeof a?Fa.findByName(c,a):a;a=null!==c?c.uuid:a;var e=this._actionsByClip[a],f=null;if(void 0!==e){f=e.actionByRoot[d];if(void 0!==f)return f;f=e.knownActions[0];null===c&&(c=f._clip)}if(null===c)return null;b=new qf(this,c,b);this._bindAction(b,f);this._addInactiveAction(b,a,d);return b},existingAction:function existingAction(a,b){var c=b||this._root;b=c.uuid;c="string"===typeof a?Fa.findByName(c,a):a;a=this._actionsByClip[c?c.uuid:a];return void 0!==a?a.actionByRoot[b]||null:null},stopAllAction:function stopAllAction(){for(var a=this._actions,b=this._nActiveActions,c=this._bindings,d=this._nActiveBindings,e=this._nActiveBindings=this._nActiveActions=0;e!==b;++e){a[e].reset()}for(e=0;e!==d;++e){c[e].useCount=0}return this},update:function update(a){a*=this.timeScale;for(var b=this._actions,c=this._nActiveActions,d=this.time+=a,e=_Mathsign(a),f=this._accuIndex^=1,g=0;g!==c;++g){b[g]._update(d,a,e,f)}a=this._bindings;b=this._nActiveBindings;for(g=0;g!==b;++g){a[g].apply(f)}return this},getRoot:function getRoot(){return this._root},uncacheClip:function uncacheClip(a){var b=this._actions;a=a.uuid;var c=this._actionsByClip,d=c[a];if(void 0!==d){d=d.knownActions;for(var e=0,f=d.length,g;e!==f;++e){g=d[e];this._deactivateAction(g);var h=g._cacheIndex,l=b[b.length-1];g._cacheIndex=null;g._byClipCacheIndex=null;l._cacheIndex=h;b[h]=l;b.pop();this._removeInactiveBindingsForAction(g)}delete c[a]}},uncacheRoot:function uncacheRoot(a){a=a.uuid;var b=this._actionsByClip;for(d in b){var c=b[d].actionByRoot[a];void 0!==c&&(this._deactivateAction(c),this._removeInactiveAction(c))}var d=this._bindingsByRootAndName[a];if(void 0!==d)for(var e in d){a=d[e],a.restoreOriginalState(),this._removeInactiveBinding(a)}},uncacheAction:function uncacheAction(a,b){a=this.existingAction(a,b);null!==a&&(this._deactivateAction(a),this._removeInactiveAction(a))}});Od.prototype.clone=function(){return new Od(void 0===this.value.clone?this.value:this.value.clone())};se.prototype=Object.assign(Object.create(G.prototype),{constructor:se,isInstancedBufferGeometry:!0,copy:function copy(a){G.prototype.copy.call(this,a);this.maxInstancedCount=a.maxInstancedCount;return this},clone:function clone(){return new this.constructor().copy(this)}});Object.defineProperties(te.prototype,{count:{get:function get(){return this.data.count}},array:{get:function get(){return this.data.array}}});Object.assign(te.prototype,{isInterleavedBufferAttribute:!0,setX:function setX(a,b){this.data.array[a*this.data.stride+this.offset]=b;return this},setY:function setY(a,b){this.data.array[a*this.data.stride+this.offset+1]=b;return this},setZ:function setZ(a,b){this.data.array[a*this.data.stride+this.offset+2]=b;return this},setW:function setW(a,b){this.data.array[a*this.data.stride+this.offset+3]=b;return this},getX:function getX(a){return this.data.array[a*this.data.stride+this.offset]},getY:function getY(a){return this.data.array[a*this.data.stride+this.offset+1]},getZ:function getZ(a){return this.data.array[a*this.data.stride+this.offset+2]},getW:function getW(a){return this.data.array[a*this.data.stride+this.offset+3]},setXY:function setXY(a,b,c){a=a*this.data.stride+this.offset;this.data.array[a+0]=b;this.data.array[a+1]=c;return this},setXYZ:function setXYZ(a,b,c,d){a=a*this.data.stride+this.offset;this.data.array[a+0]=b;this.data.array[a+1]=c;this.data.array[a+2]=d;return this},setXYZW:function setXYZW(a,b,c,d,e){a=a*this.data.stride+this.offset;this.data.array[a+0]=b;this.data.array[a+1]=c;this.data.array[a+2]=d;this.data.array[a+3]=e;return this}});Object.defineProperty(oc.prototype,"needsUpdate",{set:function set(a){!0===a&&this.version++}});Object.assign(oc.prototype,{isInterleavedBuffer:!0,onUploadCallback:function onUploadCallback(){},setArray:function setArray(a){if(Array.isArray(a))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==a?a.length/this.stride:0;this.array=a;return this},setDynamic:function setDynamic(a){this.dynamic=a;return this},copy:function copy(a){this.array=new a.array.constructor(a.array);this.count=a.count;this.stride=a.stride;this.dynamic=a.dynamic;return this},copyAt:function copyAt(a,b,c){a*=this.stride;c*=b.stride;for(var d=0,e=this.stride;d<e;d++){this.array[a+d]=b.array[c+d]}return this},set:function set(a,b){void 0===b&&(b=0);this.array.set(a,b);return this},clone:function clone(){return new this.constructor().copy(this)},onUpload:function onUpload(a){this.onUploadCallback=a;return this}});ue.prototype=Object.assign(Object.create(oc.prototype),{constructor:ue,isInstancedInterleavedBuffer:!0,copy:function copy(a){oc.prototype.copy.call(this,a);this.meshPerAttribute=a.meshPerAttribute;return this}});ve.prototype=Object.assign(Object.create(O.prototype),{constructor:ve,isInstancedBufferAttribute:!0,copy:function copy(a){O.prototype.copy.call(this,a);this.meshPerAttribute=a.meshPerAttribute;return this}});Object.assign(rf.prototype,{linePrecision:1,set:function set(a,b){this.ray.set(a,b)},setFromCamera:function setFromCamera(a,b){b&&b.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(b.matrixWorld),this.ray.direction.set(a.x,a.y,.5).unproject(b).sub(this.ray.origin).normalize()):b&&b.isOrthographicCamera?(this.ray.origin.set(a.x,a.y,(b.near+b.far)/(b.near-b.far)).unproject(b),this.ray.direction.set(0,0,-1).transformDirection(b.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function intersectObject(a,b,c){c=c||[];we(a,this,c,b);c.sort(sf);return c},intersectObjects:function intersectObjects(a,b,c){c=c||[];if(!1===Array.isArray(a))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),c;for(var d=0,e=a.length;d<e;d++){we(a[d],this,c,b)}c.sort(sf);return c}});Object.assign(tf.prototype,{start:function start(){this.oldTime=this.startTime=("undefined"===typeof performance?Date:performance).now();this.elapsedTime=0;this.running=!0},stop:function stop(){this.getElapsedTime();this.autoStart=this.running=!1},getElapsedTime:function getElapsedTime(){this.getDelta();return this.elapsedTime},getDelta:function getDelta(){var a=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var b=("undefined"===typeof performance?Date:performance).now();a=(b-this.oldTime)/1E3;this.oldTime=b;this.elapsedTime+=a}return a}});Object.assign(uf.prototype,{set:function set(a,b,c){this.radius=a;this.phi=b;this.theta=c;return this},clone:function clone(){return new this.constructor().copy(this)},copy:function copy(a){this.radius=a.radius;this.phi=a.phi;this.theta=a.theta;return this},makeSafe:function makeSafe(){this.phi=_Mathmax(1E-6,_Mathmin(_MathPI-1E-6,this.phi));return this},setFromVector3:function setFromVector3(a){this.radius=a.length();0===this.radius?this.phi=this.theta=0:(this.theta=_Mathatan(a.x,a.z),this.phi=_Mathacos(P.clamp(a.y/this.radius,-1,1)));return this}});Object.assign(vf.prototype,{set:function set(a,b,c){this.radius=a;this.theta=b;this.y=c;return this},clone:function clone(){return new this.constructor().copy(this)},copy:function copy(a){this.radius=a.radius;this.theta=a.theta;this.y=a.y;return this},setFromVector3:function setFromVector3(a){this.radius=_Mathsqrt(a.x*a.x+a.z*a.z);this.theta=_Mathatan(a.x,a.z);this.y=a.y;return this}});Object.assign(xe.prototype,{set:function set(a,b){this.min.copy(a);this.max.copy(b);return this},setFromPoints:function setFromPoints(a){this.makeEmpty();for(var b=0,c=a.length;b<c;b++){this.expandByPoint(a[b])}return this},setFromCenterAndSize:function(){var a=new y;return function(b,c){c=a.copy(c).multiplyScalar(.5);this.min.copy(b).sub(c);this.max.copy(b).add(c);return this}}(),clone:function clone(){return new this.constructor().copy(this)},copy:function copy(a){this.min.copy(a.min);this.max.copy(a.max);return this},makeEmpty:function makeEmpty(){this.min.x=this.min.y=1/0;this.max.x=this.max.y=-Infinity;return this},isEmpty:function isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function getCenter(a){void 0===a&&(console.warn("THREE.Box2: .getCenter() target is now required"),a=new y);return this.isEmpty()?a.set(0,0):a.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function getSize(a){void 0===a&&(console.warn("THREE.Box2: .getSize() target is now required"),a=new y);return this.isEmpty()?a.set(0,0):a.subVectors(this.max,this.min)},expandByPoint:function expandByPoint(a){this.min.min(a);this.max.max(a);return this},expandByVector:function expandByVector(a){this.min.sub(a);this.max.add(a);return this},expandByScalar:function expandByScalar(a){this.min.addScalar(-a);this.max.addScalar(a);return this},containsPoint:function containsPoint(a){return a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y?!1:!0},containsBox:function containsBox(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y},getParameter:function getParameter(a,b){void 0===b&&(console.warn("THREE.Box2: .getParameter() target is now required"),b=new y);return b.set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function intersectsBox(a){return a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y?!1:!0},clampPoint:function clampPoint(a,b){void 0===b&&(console.warn("THREE.Box2: .clampPoint() target is now required"),b=new y);return b.copy(a).clamp(this.min,this.max)},distanceToPoint:function(){var a=new y;return function(b){return a.copy(b).clamp(this.min,this.max).sub(b).length()}}(),intersect:function intersect(a){this.min.max(a.min);this.max.min(a.max);return this},union:function union(a){this.min.min(a.min);this.max.max(a.max);return this},translate:function translate(a){this.min.add(a);this.max.add(a);return this},equals:function equals(a){return a.min.equals(this.min)&&a.max.equals(this.max)}});id.prototype=Object.create(B.prototype);id.prototype.constructor=id;id.prototype.isImmediateRenderObject=!0;jd.prototype=Object.create(aa.prototype);jd.prototype.constructor=jd;jd.prototype.update=function(){var a=new p,b=new p,c=new ta;return function(){var d=["a","b","c"];this.object.updateMatrixWorld(!0);c.getNormalMatrix(this.object.matrixWorld);var e=this.object.matrixWorld,f=this.geometry.attributes.position,g=this.object.geometry;if(g&&g.isGeometry)for(var h=g.vertices,l=g.faces,k=g=0,p=l.length;k<p;k++){for(var n=l[k],r=0,q=n.vertexNormals.length,t;r<q;r++){t=n.vertexNormals[r];a.copy(h[n[d[r]]]).applyMatrix4(e);b.copy(t).applyMatrix3(c).normalize().multiplyScalar(this.size).add(a);f.setXYZ(g,a.x,a.y,a.z);g+=1;f.setXYZ(g,b.x,b.y,b.z);g+=1}}else if(g&&g.isBufferGeometry)for(d=g.attributes.position,h=g.attributes.normal,r=g=0,q=d.count;r<q;r++){a.set(d.getX(r),d.getY(r),d.getZ(r)).applyMatrix4(e),b.set(h.getX(r),h.getY(r),h.getZ(r)),b.applyMatrix3(c).normalize().multiplyScalar(this.size).add(a),f.setXYZ(g,a.x,a.y,a.z),g+=1,f.setXYZ(g,b.x,b.y,b.z),g+=1}f.needsUpdate=!0}}();pc.prototype=Object.create(B.prototype);pc.prototype.constructor=pc;pc.prototype.dispose=function(){this.cone.geometry.dispose();this.cone.material.dispose()};pc.prototype.update=function(){var a=new p,b=new p;return function(){this.light.updateMatrixWorld();var c=this.light.distance?this.light.distance:1E3,d=c*_Mathtan(this.light.angle);this.cone.scale.set(d,d,c);a.setFromMatrixPosition(this.light.matrixWorld);b.setFromMatrixPosition(this.light.target.matrixWorld);this.cone.lookAt(b.sub(a));void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}();qc.prototype=Object.create(aa.prototype);qc.prototype.constructor=qc;qc.prototype.updateMatrixWorld=function(){var a=new p,b=new F,c=new F;return function(d){var e=this.bones,f=this.geometry,g=f.getAttribute("position");c.getInverse(this.root.matrixWorld);for(var h=0,k=0,m;h<e.length;h++){m=e[h];m.parent&&m.parent.isBone&&(b.multiplyMatrices(c,m.matrixWorld),a.setFromMatrixPosition(b),g.setXYZ(k,a.x,a.y,a.z),b.multiplyMatrices(c,m.parent.matrixWorld),a.setFromMatrixPosition(b),g.setXYZ(k+1,a.x,a.y,a.z),k+=2)}f.getAttribute("position").needsUpdate=!0;B.prototype.updateMatrixWorld.call(this,d)}}();rc.prototype=Object.create(pa.prototype);rc.prototype.constructor=rc;rc.prototype.dispose=function(){this.geometry.dispose();this.material.dispose()};rc.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)};sc.prototype=Object.create(B.prototype);sc.prototype.constructor=sc;sc.prototype.dispose=function(){this.children[0].geometry.dispose();this.children[0].material.dispose()};sc.prototype.update=function(){var a=.5*this.light.width,b=.5*this.light.height,c=this.line.geometry.attributes.position,d=c.array;d[0]=a;d[1]=-b;d[2]=0;d[3]=a;d[4]=b;d[5]=0;d[6]=-a;d[7]=b;d[8]=0;d[9]=-a;d[10]=-b;d[11]=0;d[12]=a;d[13]=-b;d[14]=0;c.needsUpdate=!0;void 0!==this.color?this.line.material.color.set(this.color):this.line.material.color.copy(this.light.color)};tc.prototype=Object.create(B.prototype);tc.prototype.constructor=tc;tc.prototype.dispose=function(){this.children[0].geometry.dispose();this.children[0].material.dispose()};tc.prototype.update=function(){var a=new p,b=new K,c=new K;return function(){var d=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var e=d.geometry.getAttribute("color");b.copy(this.light.color);c.copy(this.light.groundColor);for(var f=0,g=e.count,h;f<g;f++){h=f<g/2?b:c;e.setXYZ(f,h.r,h.g,h.b)}e.needsUpdate=!0}d.lookAt(a.setFromMatrixPosition(this.light.matrixWorld).negate())}}();kd.prototype=Object.create(aa.prototype);kd.prototype.constructor=kd;Pd.prototype=Object.create(aa.prototype);Pd.prototype.constructor=Pd;ld.prototype=Object.create(aa.prototype);ld.prototype.constructor=ld;ld.prototype.update=function(){var a=new p,b=new p,c=new ta;return function(){this.object.updateMatrixWorld(!0);c.getNormalMatrix(this.object.matrixWorld);var d=this.object.matrixWorld,e=this.geometry.attributes.position,f=this.object.geometry,g=f.vertices;f=f.faces;for(var h=0,k=0,m=f.length;k<m;k++){var p=f[k],n=p.normal;a.copy(g[p.a]).add(g[p.b]).add(g[p.c]).divideScalar(3).applyMatrix4(d);b.copy(n).applyMatrix3(c).normalize().multiplyScalar(this.size).add(a);e.setXYZ(h,a.x,a.y,a.z);h+=1;e.setXYZ(h,b.x,b.y,b.z);h+=1}e.needsUpdate=!0}}();uc.prototype=Object.create(B.prototype);uc.prototype.constructor=uc;uc.prototype.dispose=function(){this.lightPlane.geometry.dispose();this.lightPlane.material.dispose();this.targetLine.geometry.dispose();this.targetLine.material.dispose()};uc.prototype.update=function(){var a=new p,b=new p,c=new p;return function(){a.setFromMatrixPosition(this.light.matrixWorld);b.setFromMatrixPosition(this.light.target.matrixWorld);c.subVectors(b,a);this.lightPlane.lookAt(c);void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color));this.targetLine.lookAt(c);this.targetLine.scale.z=c.length()}}();md.prototype=Object.create(aa.prototype);md.prototype.constructor=md;md.prototype.update=function(){function a(a,g,h,k){d.set(g,h,k).unproject(e);a=c[a];if(void 0!==a)for(g=b.getAttribute("position"),h=0,k=a.length;h<k;h++){g.setXYZ(a[h],d.x,d.y,d.z)}}var b,c,d=new p,e=new Qa;return function(){b=this.geometry;c=this.pointMap;e.projectionMatrix.copy(this.camera.projectionMatrix);a("c",0,0,-1);a("t",0,0,1);a("n1",-1,-1,-1);a("n2",1,-1,-1);a("n3",-1,1,-1);a("n4",1,1,-1);a("f1",-1,-1,1);a("f2",1,-1,1);a("f3",-1,1,1);a("f4",1,1,1);a("u1",.7,1.1,-1);a("u2",-.7,1.1,-1);a("u3",0,2,-1);a("cf1",-1,0,1);a("cf2",1,0,1);a("cf3",0,-1,1);a("cf4",0,1,1);a("cn1",-1,0,-1);a("cn2",1,0,-1);a("cn3",0,-1,-1);a("cn4",0,1,-1);b.getAttribute("position").needsUpdate=!0}}();Ib.prototype=Object.create(aa.prototype);Ib.prototype.constructor=Ib;Ib.prototype.update=function(){var a=new Wa;return function(b){void 0!==b&&console.warn("THREE.BoxHelper: .update() has no longer arguments.");void 0!==this.object&&a.setFromObject(this.object);if(!a.isEmpty()){b=a.min;var c=a.max,d=this.geometry.attributes.position,e=d.array;e[0]=c.x;e[1]=c.y;e[2]=c.z;e[3]=b.x;e[4]=c.y;e[5]=c.z;e[6]=b.x;e[7]=b.y;e[8]=c.z;e[9]=c.x;e[10]=b.y;e[11]=c.z;e[12]=c.x;e[13]=c.y;e[14]=b.z;e[15]=b.x;e[16]=c.y;e[17]=b.z;e[18]=b.x;e[19]=b.y;e[20]=b.z;e[21]=c.x;e[22]=b.y;e[23]=b.z;d.needsUpdate=!0;this.geometry.computeBoundingSphere()}}}();Ib.prototype.setFromObject=function(a){this.object=a;this.update();return this};nd.prototype=Object.create(aa.prototype);nd.prototype.constructor=nd;nd.prototype.updateMatrixWorld=function(a){var b=this.box;b.isEmpty()||(b.getCenter(this.position),b.getSize(this.scale),this.scale.multiplyScalar(.5),B.prototype.updateMatrixWorld.call(this,a))};od.prototype=Object.create(ma.prototype);od.prototype.constructor=od;od.prototype.updateMatrixWorld=function(a){var b=-this.plane.constant;1e-8>_Mathabs(b)&&(b=1e-8);this.scale.set(.5*this.size,.5*this.size,b);this.children[0].material.side=0>b?1:0;this.lookAt(this.plane.normal);B.prototype.updateMatrixWorld.call(this,a)};var Qd,ye;Jb.prototype=Object.create(B.prototype);Jb.prototype.constructor=Jb;Jb.prototype.setDirection=function(){var a=new p,b;return function(c){.99999<c.y?this.quaternion.set(0,0,0,1):-.99999>c.y?this.quaternion.set(1,0,0,0):(a.set(c.z,0,-c.x).normalize(),b=_Mathacos(c.y),this.quaternion.setFromAxisAngle(a,b))}}();Jb.prototype.setLength=function(a,b,c){void 0===b&&(b=.2*a);void 0===c&&(c=.2*b);this.line.scale.set(1,_Mathmax(0,a-b),1);this.line.updateMatrix();this.cone.scale.set(c,b,c);this.cone.position.y=a;this.cone.updateMatrix()};Jb.prototype.setColor=function(a){this.line.material.color.copy(a);this.cone.material.color.copy(a)};pd.prototype=Object.create(aa.prototype);pd.prototype.constructor=pd;I.create=function(a,b){console.log("THREE.Curve.create() has been deprecated");a.prototype=Object.create(I.prototype);a.prototype.constructor=a;a.prototype.getPoint=b;return a};Object.assign(ab.prototype,{createPointsGeometry:function createPointsGeometry(a){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");a=this.getPoints(a);return this.createGeometry(a)},createSpacedPointsGeometry:function createSpacedPointsGeometry(a){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");a=this.getSpacedPoints(a);return this.createGeometry(a)},createGeometry:function createGeometry(a){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var b=new J,c=0,d=a.length,e;c<d;c++){e=a[c];b.vertices.push(new p(e.x,e.y,e.z||0))}return b}});Object.assign(Pa.prototype,{fromPoints:function fromPoints(a){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints().");this.setFromPoints(a)}});xf.prototype=Object.create(ra.prototype);yf.prototype=Object.create(ra.prototype);ze.prototype=Object.create(ra.prototype);Object.assign(ze.prototype,{initFromArray:function initFromArray(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function getControlPointsArray(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function reparametrizeByArcLength(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}});kd.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};qc.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};Object.assign(mc.prototype,{extractUrlBase:function extractUrlBase(a){console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead.");return De.extractUrlBase(a)}});Object.assign(xe.prototype,{center:function center(a){console.warn("THREE.Box2: .center() has been renamed to .getCenter().");return this.getCenter(a)},empty:function empty(){console.warn("THREE.Box2: .empty() has been renamed to .isEmpty().");return this.isEmpty()},isIntersectionBox:function isIntersectionBox(a){console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(a)},size:function size(a){console.warn("THREE.Box2: .size() has been renamed to .getSize().");return this.getSize(a)}});Object.assign(Wa.prototype,{center:function center(a){console.warn("THREE.Box3: .center() has been renamed to .getCenter().");return this.getCenter(a)},empty:function empty(){console.warn("THREE.Box3: .empty() has been renamed to .isEmpty().");return this.isEmpty()},isIntersectionBox:function isIntersectionBox(a){console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(a)},isIntersectionSphere:function isIntersectionSphere(a){console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere().");return this.intersectsSphere(a)},size:function size(a){console.warn("THREE.Box3: .size() has been renamed to .getSize().");return this.getSize(a)}});Ob.prototype.center=function(a){console.warn("THREE.Line3: .center() has been renamed to .getCenter().");return this.getCenter(a)};Object.assign(P,{random16:function random16(){console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead.");return Math.random()},nearestPowerOfTwo:function nearestPowerOfTwo(a){console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo().");return P.floorPowerOfTwo(a)},nextPowerOfTwo:function nextPowerOfTwo(a){console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo().");return P.ceilPowerOfTwo(a)}});Object.assign(ta.prototype,{flattenToArrayOffset:function flattenToArrayOffset(a,b){console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.");return this.toArray(a,b)},multiplyVector3:function multiplyVector3(a){console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.");return a.applyMatrix3(this)},multiplyVector3Array:function multiplyVector3Array(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function applyToBuffer(a){console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead.");return this.applyToBufferAttribute(a)},applyToVector3Array:function applyToVector3Array(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}});Object.assign(F.prototype,{extractPosition:function extractPosition(a){console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition().");return this.copyPosition(a)},flattenToArrayOffset:function flattenToArrayOffset(a,b){console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.");return this.toArray(a,b)},getPosition:function(){var a;return function(){void 0===a&&(a=new p);console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.");return a.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function setRotationFromQuaternion(a){console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().");return this.makeRotationFromQuaternion(a)},multiplyToArray:function multiplyToArray(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function multiplyVector3(a){console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead.");return a.applyMatrix4(this)},multiplyVector4:function multiplyVector4(a){console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.");return a.applyMatrix4(this)},multiplyVector3Array:function multiplyVector3Array(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function rotateAxis(a){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.");a.transformDirection(this)},crossVector:function crossVector(a){console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.");return a.applyMatrix4(this)},translate:function translate(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function rotateX(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function rotateY(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function rotateZ(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function rotateByAxis(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function applyToBuffer(a){console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead.");return this.applyToBufferAttribute(a)},applyToVector3Array:function applyToVector3Array(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function makeFrustum(a,b,c,d,e,f){console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead.");return this.makePerspective(a,b,d,c,e,f)}});Ha.prototype.isIntersectionLine=function(a){console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine().");return this.intersectsLine(a)};X.prototype.multiplyVector3=function(a){console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.");return a.applyQuaternion(this)};Object.assign(sb.prototype,{isIntersectionBox:function isIntersectionBox(a){console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(a)},isIntersectionPlane:function isIntersectionPlane(a){console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane().");return this.intersectsPlane(a)},isIntersectionSphere:function isIntersectionSphere(a){console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere().");return this.intersectsSphere(a)}});Object.assign(Aa.prototype,{area:function area(){console.warn("THREE.Triangle: .area() has been renamed to .getArea().");return this.getArea()},barycoordFromPoint:function barycoordFromPoint(a,b){console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord().");return this.getBarycoord(a,b)},midpoint:function midpoint(a){console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint().");return this.getMidpoint(a)},normal:function normal(a){console.warn("THREE.Triangle: .normal() has been renamed to .getNormal().");return this.getNormal(a)},plane:function plane(a){console.warn("THREE.Triangle: .plane() has been renamed to .getPlane().");return this.getPlane(a)}});Object.assign(Aa,{barycoordFromPoint:function barycoordFromPoint(a,b,c,d,e){console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord().");return Aa.getBarycoord(a,b,c,d,e)},normal:function normal(a,b,c,d){console.warn("THREE.Triangle: .normal() has been renamed to .getNormal().");return Aa.getNormal(a,b,c,d)}});Object.assign(jb.prototype,{extractAllPoints:function extractAllPoints(a){console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead.");return this.extractPoints(a)},extrude:function extrude(a){console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead.");return new wb(this,a)},makeGeometry:function makeGeometry(a){console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead.");return new yb(this,a)}});Object.assign(y.prototype,{fromAttribute:function fromAttribute(a,b,c){console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute().");return this.fromBufferAttribute(a,b,c)},distanceToManhattan:function distanceToManhattan(a){console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo().");return this.manhattanDistanceTo(a)},lengthManhattan:function lengthManhattan(){console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength().");return this.manhattanLength()}});Object.assign(p.prototype,{setEulerFromRotationMatrix:function setEulerFromRotationMatrix(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function setEulerFromQuaternion(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function getPositionFromMatrix(a){console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().");return this.setFromMatrixPosition(a)},getScaleFromMatrix:function getScaleFromMatrix(a){console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().");return this.setFromMatrixScale(a)},getColumnFromMatrix:function getColumnFromMatrix(a,b){console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().");return this.setFromMatrixColumn(b,a)},applyProjection:function applyProjection(a){console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead.");return this.applyMatrix4(a)},fromAttribute:function fromAttribute(a,b,c){console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute().");return this.fromBufferAttribute(a,b,c)},distanceToManhattan:function distanceToManhattan(a){console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo().");return this.manhattanDistanceTo(a)},lengthManhattan:function lengthManhattan(){console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength().");return this.manhattanLength()}});Object.assign(U.prototype,{fromAttribute:function fromAttribute(a,b,c){console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute().");return this.fromBufferAttribute(a,b,c)},lengthManhattan:function lengthManhattan(){console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength().");return this.manhattanLength()}});Object.assign(J.prototype,{computeTangents:function computeTangents(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function computeLineDistances(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}});Object.assign(B.prototype,{getChildByName:function getChildByName(a){console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().");return this.getObjectByName(a)},renderDepth:function renderDepth(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function translate(a,b){console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.");return this.translateOnAxis(b,a)},getWorldRotation:function getWorldRotation(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")}});Object.defineProperties(B.prototype,{eulerOrder:{get:function get(){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order.");return this.rotation.order},set:function set(a){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order.");this.rotation.order=a}},useQuaternion:{get:function get(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function set(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});Object.defineProperties(Gc.prototype,{objects:{get:function get(){console.warn("THREE.LOD: .objects has been renamed to .levels.");return this.levels}}});Object.defineProperty(Hc.prototype,"useVertexTexture",{get:function get(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function set(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}});Object.defineProperty(I.prototype,"__arcLengthDivisions",{get:function get(){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.");return this.arcLengthDivisions},set:function set(a){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.");this.arcLengthDivisions=a}});ea.prototype.setLens=function(a,b){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup.");void 0!==b&&(this.filmGauge=b);this.setFocalLength(a)};Object.defineProperties(ba.prototype,{onlyShadow:{set:function set(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function set(a){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov.");this.shadow.camera.fov=a}},shadowCameraLeft:{set:function set(a){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left.");this.shadow.camera.left=a}},shadowCameraRight:{set:function set(a){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right.");this.shadow.camera.right=a}},shadowCameraTop:{set:function set(a){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top.");this.shadow.camera.top=a}},shadowCameraBottom:{set:function set(a){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom.");this.shadow.camera.bottom=a}},shadowCameraNear:{set:function set(a){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near.");this.shadow.camera.near=a}},shadowCameraFar:{set:function set(a){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far.");this.shadow.camera.far=a}},shadowCameraVisible:{set:function set(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function set(a){console.warn("THREE.Light: .shadowBias is now .shadow.bias.");this.shadow.bias=a}},shadowDarkness:{set:function set(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function set(a){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width.");this.shadow.mapSize.width=a}},shadowMapHeight:{set:function set(a){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height.");this.shadow.mapSize.height=a}}});Object.defineProperties(O.prototype,{length:{get:function get(){console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead.");return this.array.length}},copyIndicesArray:function copyIndicesArray(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")}});Object.assign(G.prototype,{addIndex:function addIndex(a){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex().");this.setIndex(a)},addDrawCall:function addDrawCall(a,b,c){void 0!==c&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset.");console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup().");this.addGroup(a,b)},clearDrawCalls:function clearDrawCalls(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups().");this.clearGroups()},computeTangents:function computeTangents(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function computeOffsets(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}});Object.defineProperties(G.prototype,{drawcalls:{get:function get(){console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups.");return this.groups}},offsets:{get:function get(){console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups.");return this.groups}}});Object.assign(Sa.prototype,{getArrays:function getArrays(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function addShapeList(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function addShape(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}});Object.defineProperties(Od.prototype,{dynamic:{set:function set(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function value(){console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead.");return this}}});Object.defineProperties(L.prototype,{wrapAround:{get:function get(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function set(){console.warn("THREE.Material: .wrapAround has been removed.")}},wrapRGB:{get:function get(){console.warn("THREE.Material: .wrapRGB has been removed.");return new K}},shading:{get:function get(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function set(a){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.");this.flatShading=1===a}}});Object.defineProperties(Ja.prototype,{metal:{get:function get(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead.");return!1},set:function set(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}});Object.defineProperties(Ea.prototype,{derivatives:{get:function get(){console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives.");return this.extensions.derivatives},set:function set(a){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives.");this.extensions.derivatives=a}}});Object.assign(Zd.prototype,{animate:function animate(a){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop().");this.setAnimationLoop(a)},getCurrentRenderTarget:function getCurrentRenderTarget(){console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget().");return this.getRenderTarget()},getMaxAnisotropy:function getMaxAnisotropy(){console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy().");return this.capabilities.getMaxAnisotropy()},getPrecision:function getPrecision(){console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision.");return this.capabilities.precision},resetGLState:function resetGLState(){console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset().");return this.state.reset()},supportsFloatTextures:function supportsFloatTextures(){console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' ).");return this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function supportsHalfFloatTextures(){console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' ).");return this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function supportsStandardDerivatives(){console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' ).");return this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function supportsCompressedTextureS3TC(){console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' ).");return this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function supportsCompressedTexturePVRTC(){console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' ).");return this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function supportsBlendMinMax(){console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' ).");return this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function supportsVertexTextures(){console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures.");return this.capabilities.vertexTextures},supportsInstancedArrays:function supportsInstancedArrays(){console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' ).");return this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function enableScissorTest(a){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest().");this.setScissorTest(a)},initMaterial:function initMaterial(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function addPrePlugin(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function addPostPlugin(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function updateShadowMap(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function setFaceCulling(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")}});Object.defineProperties(Zd.prototype,{shadowMapEnabled:{get:function get(){return this.shadowMap.enabled},set:function set(a){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled.");this.shadowMap.enabled=a}},shadowMapType:{get:function get(){return this.shadowMap.type},set:function set(a){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type.");this.shadowMap.type=a}},shadowMapCullFace:{get:function get(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function set(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}}});Object.defineProperties(Ye.prototype,{cullFace:{get:function get(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function set(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function get(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function set(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function get(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function set(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}});Object.defineProperties(kb.prototype,{wrapS:{get:function get(){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.");return this.texture.wrapS},set:function set(a){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.");this.texture.wrapS=a}},wrapT:{get:function get(){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.");return this.texture.wrapT},set:function set(a){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.");this.texture.wrapT=a}},magFilter:{get:function get(){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.");return this.texture.magFilter},set:function set(a){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.");this.texture.magFilter=a}},minFilter:{get:function get(){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.");return this.texture.minFilter},set:function set(a){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.");this.texture.minFilter=a}},anisotropy:{get:function get(){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.");return this.texture.anisotropy},set:function set(a){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.");this.texture.anisotropy=a}},offset:{get:function get(){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset.");return this.texture.offset},set:function set(a){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset.");this.texture.offset=a}},repeat:{get:function get(){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat.");return this.texture.repeat},set:function set(a){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat.");this.texture.repeat=a}},format:{get:function get(){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format.");return this.texture.format},set:function set(a){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format.");this.texture.format=a}},type:{get:function get(){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type.");return this.texture.type},set:function set(a){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type.");this.texture.type=a}},generateMipmaps:{get:function get(){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.");return this.texture.generateMipmaps},set:function set(a){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.");this.texture.generateMipmaps=a}}});Object.defineProperties($e.prototype,{standing:{set:function set(){console.warn("THREE.WebVRManager: .standing has been removed.")}}});nc.prototype.load=function(a){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var b=this;new le().load(a,function(a){b.setBuffer(a)});return this};pe.prototype.getData=function(){console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData().");return this.getFrequencyData()};hd.prototype.updateCubeMap=function(a,b){console.warn("THREE.CubeCamera: .updateCubeMap() is now .update().");return this.update(a,b)};k.WebGLRenderTargetCube=Lb;k.WebGLRenderTarget=kb;k.WebGLRenderer=Zd;k.ShaderLib=tb;k.UniformsLib=M;k.UniformsUtils=Ca;k.ShaderChunk=W;k.FogExp2=Sb;k.Fog=Tb;k.Scene=sd;k.Sprite=Fc;k.LOD=Gc;k.SkinnedMesh=ud;k.Skeleton=Hc;k.Bone=td;k.Mesh=pa;k.LineSegments=aa;k.LineLoop=vd;k.Line=ma;k.Points=Ub;k.Group=wd;k.VideoTexture=$d;k.DataTexture=lb;k.CompressedTexture=Vb;k.CubeTexture=cb;k.CanvasTexture=Qb;k.DepthTexture=Ic;k.Texture=ca;k.CompressedTextureLoader=jf;k.DataTextureLoader=de;k.CubeTextureLoader=ee;k.TextureLoader=yd;k.ObjectLoader=lf;k.MaterialLoader=Nd;k.BufferGeometryLoader=ge;k.DefaultLoadingManager=wa;k.LoadingManager=ce;k.JSONLoader=he;k.ImageLoader=cd;k.ImageBitmapLoader=ie;k.FontLoader=mf;k.FileLoader=Ka;k.Loader=mc;k.LoaderUtils=De;k.Cache=Kb;k.AudioLoader=le;k.SpotLightShadow=Ad;k.SpotLight=Bd;k.PointLight=Cd;k.RectAreaLight=Gd;k.HemisphereLight=zd;k.DirectionalLightShadow=Dd;k.DirectionalLight=Ed;k.AmbientLight=Fd;k.LightShadow=Hb;k.Light=ba;k.StereoCamera=nf;k.PerspectiveCamera=ea;k.OrthographicCamera=Mb;k.CubeCamera=hd;k.ArrayCamera=Ec;k.Camera=Qa;k.AudioListener=me;k.PositionalAudio=oe;k.AudioContext=ne;k.AudioAnalyser=pe;k.Audio=nc;k.VectorKeyframeTrack=lc;k.StringKeyframeTrack=Hd;k.QuaternionKeyframeTrack=fd;k.NumberKeyframeTrack=kc;k.ColorKeyframeTrack=Kd;k.BooleanKeyframeTrack=Id;k.PropertyMixer=qe;k.PropertyBinding=oa;k.KeyframeTrack=ja;k.AnimationUtils=sa;k.AnimationObjectGroup=pf;k.AnimationMixer=re;k.AnimationClip=Fa;k.Uniform=Od;k.InstancedBufferGeometry=se;k.BufferGeometry=G;k.Geometry=J;k.InterleavedBufferAttribute=te;k.InstancedInterleavedBuffer=ue;k.InterleavedBuffer=oc;k.InstancedBufferAttribute=ve;k.Face3=Xa;k.Object3D=B;k.Raycaster=rf;k.Layers=Ud;k.EventDispatcher=ha;k.Clock=tf;k.QuaternionLinearInterpolant=Jd;k.LinearInterpolant=gd;k.DiscreteInterpolant=Md;k.CubicInterpolant=Ld;k.Interpolant=ua;k.Triangle=Aa;k.Math=P;k.Spherical=uf;k.Cylindrical=vf;k.Plane=Ha;k.Frustum=qd;k.Sphere=Ga;k.Ray=sb;k.Matrix4=F;k.Matrix3=ta;k.Box3=Wa;k.Box2=xe;k.Line3=Ob;k.Euler=mb;k.Vector4=U;k.Vector3=p;k.Vector2=y;k.Quaternion=X;k.Color=K;k.ImmediateRenderObject=id;k.VertexNormalsHelper=jd;k.SpotLightHelper=pc;k.SkeletonHelper=qc;k.PointLightHelper=rc;k.RectAreaLightHelper=sc;k.HemisphereLightHelper=tc;k.GridHelper=kd;k.PolarGridHelper=Pd;k.FaceNormalsHelper=ld;k.DirectionalLightHelper=uc;k.CameraHelper=md;k.BoxHelper=Ib;k.Box3Helper=nd;k.PlaneHelper=od;k.ArrowHelper=Jb;k.AxesHelper=pd;k.Shape=jb;k.Path=Pa;k.ShapePath=je;k.Font=ke;k.CurvePath=ab;k.Curve=I;k.ShapeUtils=Za;k.WebGLUtils=Ze;k.WireframeGeometry=Wb;k.ParametricGeometry=Jc;k.ParametricBufferGeometry=Xb;k.TetrahedronGeometry=Lc;k.TetrahedronBufferGeometry=Yb;k.OctahedronGeometry=Mc;k.OctahedronBufferGeometry=ub;k.IcosahedronGeometry=Nc;k.IcosahedronBufferGeometry=Zb;k.DodecahedronGeometry=Oc;k.DodecahedronBufferGeometry=$b;k.PolyhedronGeometry=Kc;k.PolyhedronBufferGeometry=va;k.TubeGeometry=Pc;k.TubeBufferGeometry=ac;k.TorusKnotGeometry=Qc;k.TorusKnotBufferGeometry=bc;k.TorusGeometry=Rc;k.TorusBufferGeometry=cc;k.TextGeometry=Wc;k.TextBufferGeometry=dc;k.SphereGeometry=Xc;k.SphereBufferGeometry=xb;k.RingGeometry=Yc;k.RingBufferGeometry=ec;k.PlaneGeometry=Cc;k.PlaneBufferGeometry=rb;k.LatheGeometry=Zc;k.LatheBufferGeometry=fc;k.ShapeGeometry=yb;k.ShapeBufferGeometry=zb;k.ExtrudeGeometry=wb;k.ExtrudeBufferGeometry=Sa;k.EdgesGeometry=gc;k.ConeGeometry=$c;k.ConeBufferGeometry=ad;k.CylinderGeometry=Ab;k.CylinderBufferGeometry=$a;k.CircleGeometry=bd;k.CircleBufferGeometry=hc;k.BoxGeometry=Nb;k.BoxBufferGeometry=pb;k.ShadowMaterial=Bb;k.SpriteMaterial=ib;k.RawShaderMaterial=ic;k.ShaderMaterial=Ea;k.PointsMaterial=Ia;k.MeshPhysicalMaterial=Cb;k.MeshStandardMaterial=Ta;k.MeshPhongMaterial=Ja;k.MeshToonMaterial=Db;k.MeshNormalMaterial=Eb;k.MeshLambertMaterial=Fb;k.MeshDepthMaterial=eb;k.MeshDistanceMaterial=fb;k.MeshBasicMaterial=ka;k.LineDashedMaterial=Gb;k.LineBasicMaterial=T;k.Material=L;k.Float64BufferAttribute=Ac;k.Float32BufferAttribute=A;k.Uint32BufferAttribute=ob;k.Int32BufferAttribute=zc;k.Uint16BufferAttribute=nb;k.Int16BufferAttribute=yc;k.Uint8ClampedBufferAttribute=xc;k.Uint8BufferAttribute=wc;k.Int8BufferAttribute=vc;k.BufferAttribute=O;k.ArcCurve=jc;k.CatmullRomCurve3=ra;k.CubicBezierCurve=La;k.CubicBezierCurve3=Ua;k.EllipseCurve=xa;k.LineCurve=ya;k.LineCurve3=Ma;k.QuadraticBezierCurve=Na;k.QuadraticBezierCurve3=Va;k.SplineCurve=Oa;k.REVISION="93";k.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2};k.CullFaceNone=0;k.CullFaceBack=1;k.CullFaceFront=2;k.CullFaceFrontBack=3;k.FrontFaceDirectionCW=0;k.FrontFaceDirectionCCW=1;k.BasicShadowMap=0;k.PCFShadowMap=1;k.PCFSoftShadowMap=2;k.FrontSide=0;k.BackSide=1;k.DoubleSide=2;k.FlatShading=1;k.SmoothShading=2;k.NoColors=0;k.FaceColors=1;k.VertexColors=2;k.NoBlending=0;k.NormalBlending=1;k.AdditiveBlending=2;k.SubtractiveBlending=3;k.MultiplyBlending=4;k.CustomBlending=5;k.AddEquation=100;k.SubtractEquation=101;k.ReverseSubtractEquation=102;k.MinEquation=103;k.MaxEquation=104;k.ZeroFactor=200;k.OneFactor=201;k.SrcColorFactor=202;k.OneMinusSrcColorFactor=203;k.SrcAlphaFactor=204;k.OneMinusSrcAlphaFactor=205;k.DstAlphaFactor=206;k.OneMinusDstAlphaFactor=207;k.DstColorFactor=208;k.OneMinusDstColorFactor=209;k.SrcAlphaSaturateFactor=210;k.NeverDepth=0;k.AlwaysDepth=1;k.LessDepth=2;k.LessEqualDepth=3;k.EqualDepth=4;k.GreaterEqualDepth=5;k.GreaterDepth=6;k.NotEqualDepth=7;k.MultiplyOperation=0;k.MixOperation=1;k.AddOperation=2;k.NoToneMapping=0;k.LinearToneMapping=1;k.ReinhardToneMapping=2;k.Uncharted2ToneMapping=3;k.CineonToneMapping=4;k.UVMapping=300;k.CubeReflectionMapping=301;k.CubeRefractionMapping=302;k.EquirectangularReflectionMapping=303;k.EquirectangularRefractionMapping=304;k.SphericalReflectionMapping=305;k.CubeUVReflectionMapping=306;k.CubeUVRefractionMapping=307;k.RepeatWrapping=1E3;k.ClampToEdgeWrapping=1001;k.MirroredRepeatWrapping=1002;k.NearestFilter=1003;k.NearestMipMapNearestFilter=1004;k.NearestMipMapLinearFilter=1005;k.LinearFilter=1006;k.LinearMipMapNearestFilter=1007;k.LinearMipMapLinearFilter=1008;k.UnsignedByteType=1009;k.ByteType=1010;k.ShortType=1011;k.UnsignedShortType=1012;k.IntType=1013;k.UnsignedIntType=1014;k.FloatType=1015;k.HalfFloatType=1016;k.UnsignedShort4444Type=1017;k.UnsignedShort5551Type=1018;k.UnsignedShort565Type=1019;k.UnsignedInt248Type=1020;k.AlphaFormat=1021;k.RGBFormat=1022;k.RGBAFormat=1023;k.LuminanceFormat=1024;k.LuminanceAlphaFormat=1025;k.RGBEFormat=1023;k.DepthFormat=1026;k.DepthStencilFormat=1027;k.RGB_S3TC_DXT1_Format=33776;k.RGBA_S3TC_DXT1_Format=33777;k.RGBA_S3TC_DXT3_Format=33778;k.RGBA_S3TC_DXT5_Format=33779;k.RGB_PVRTC_4BPPV1_Format=35840;k.RGB_PVRTC_2BPPV1_Format=35841;k.RGBA_PVRTC_4BPPV1_Format=35842;k.RGBA_PVRTC_2BPPV1_Format=35843;k.RGB_ETC1_Format=36196;k.RGBA_ASTC_4x4_Format=37808;k.RGBA_ASTC_5x4_Format=37809;k.RGBA_ASTC_5x5_Format=37810;k.RGBA_ASTC_6x5_Format=37811;k.RGBA_ASTC_6x6_Format=37812;k.RGBA_ASTC_8x5_Format=37813;k.RGBA_ASTC_8x6_Format=37814;k.RGBA_ASTC_8x8_Format=37815;k.RGBA_ASTC_10x5_Format=37816;k.RGBA_ASTC_10x6_Format=37817;k.RGBA_ASTC_10x8_Format=37818;k.RGBA_ASTC_10x10_Format=37819;k.RGBA_ASTC_12x10_Format=37820;k.RGBA_ASTC_12x12_Format=37821;k.LoopOnce=2200;k.LoopRepeat=2201;k.LoopPingPong=2202;k.InterpolateDiscrete=2300;k.InterpolateLinear=2301;k.InterpolateSmooth=2302;k.ZeroCurvatureEnding=2400;k.ZeroSlopeEnding=2401;k.WrapAroundEnding=2402;k.TrianglesDrawMode=0;k.TriangleStripDrawMode=1;k.TriangleFanDrawMode=2;k.LinearEncoding=3E3;k.sRGBEncoding=3001;k.GammaEncoding=3007;k.RGBEEncoding=3002;k.LogLuvEncoding=3003;k.RGBM7Encoding=3004;k.RGBM16Encoding=3005;k.RGBDEncoding=3006;k.BasicDepthPacking=3200;k.RGBADepthPacking=3201;k.CubeGeometry=Nb;k.Face4=function(a,b,c,d,e,f,g){console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead.");return new Xa(a,b,c,e,f,g)};k.LineStrip=0;k.LinePieces=1;k.MeshFaceMaterial=function(a){console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead.");return a};k.MultiMaterial=function(a){void 0===a&&(a=[]);console.warn("THREE.MultiMaterial has been removed. Use an Array instead.");a.isMultiMaterial=!0;a.materials=a;a.clone=function(){return a.slice()};return a};k.PointCloud=function(a,b){console.warn("THREE.PointCloud has been renamed to THREE.Points.");return new Ub(a,b)};k.Particle=function(a){console.warn("THREE.Particle has been renamed to THREE.Sprite.");return new Fc(a)};k.ParticleSystem=function(a,b){console.warn("THREE.ParticleSystem has been renamed to THREE.Points.");return new Ub(a,b)};k.PointCloudMaterial=function(a){console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial.");return new Ia(a)};k.ParticleBasicMaterial=function(a){console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial.");return new Ia(a)};k.ParticleSystemMaterial=function(a){console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial.");return new Ia(a)};k.Vertex=function(a,b,c){console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead.");return new p(a,b,c)};k.DynamicBufferAttribute=function(a,b){console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead.");return new O(a,b).setDynamic(!0)};k.Int8Attribute=function(a,b){console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead.");return new vc(a,b)};k.Uint8Attribute=function(a,b){console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead.");return new wc(a,b)};k.Uint8ClampedAttribute=function(a,b){console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead.");return new xc(a,b)};k.Int16Attribute=function(a,b){console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead.");return new yc(a,b)};k.Uint16Attribute=function(a,b){console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead.");return new nb(a,b)};k.Int32Attribute=function(a,b){console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead.");return new zc(a,b)};k.Uint32Attribute=function(a,b){console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead.");return new ob(a,b)};k.Float32Attribute=function(a,b){console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead.");return new A(a,b)};k.Float64Attribute=function(a,b){console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead.");return new Ac(a,b)};k.ClosedSplineCurve3=xf;k.SplineCurve3=yf;k.Spline=ze;k.AxisHelper=function(a){console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper.");return new pd(a)};k.BoundingBoxHelper=function(a,b){console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead.");return new Ib(a,b)};k.EdgesHelper=function(a,b){console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead.");return new aa(new gc(a.geometry),new T({color:void 0!==b?b:16777215}))};k.WireframeHelper=function(a,b){console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead.");return new aa(new Wb(a.geometry),new T({color:void 0!==b?b:16777215}))};k.XHRLoader=function(a){console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader.");return new Ka(a)};k.BinaryTextureLoader=function(a){console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader.");return new de(a)};k.GeometryUtils={merge:function merge(a,b,c){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");if(b.isMesh){b.matrixAutoUpdate&&b.updateMatrix();var d=b.matrix;b=b.geometry}a.merge(b,d,c)},center:function center(a){console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead.");return a.center()}};k.ImageUtils={crossOrigin:void 0,loadTexture:function loadTexture(a,b,c,d){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var e=new yd;e.setCrossOrigin(this.crossOrigin);a=e.load(a,c,void 0,d);b&&(a.mapping=b);return a},loadTextureCube:function loadTextureCube(a,b,c,d){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var e=new ee;e.setCrossOrigin(this.crossOrigin);a=e.load(a,c,void 0,d);b&&(a.mapping=b);return a},loadCompressedTexture:function loadCompressedTexture(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function loadCompressedTextureCube(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")}};k.Projector=function(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js.");this.projectVector=function(a,b){console.warn("THREE.Projector: .projectVector() is now vector.project().");a.project(b)};this.unprojectVector=function(a,b){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject().");a.unproject(b)};this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}};k.CanvasRenderer=function(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js");this.domElement=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");this.clear=function(){};this.render=function(){};this.setClearColor=function(){};this.setSize=function(){}};k.SceneUtils={createMultiMaterialObject:function createMultiMaterialObject(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},detach:function detach(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},attach:function attach(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")}};k.LensFlare=function(){console.error("THREE.LensFlare has been moved to /examples/js/objects/Lensflare.js")};Object.defineProperty(k,"__esModule",{value:!0})});</script><script>THREE.STLLoader=function(manager){this.manager=manager!==void 0?manager:THREE.DefaultLoadingManager};THREE.STLLoader.prototype={constructor:THREE.STLLoader,load:function load(url,onLoad,onProgress,onError){var scope=this,loader=new THREE.FileLoader(scope.manager);loader.setResponseType("arraybuffer");loader.load(url,function(text){try{onLoad(scope.parse(text))}catch(exception){if(onError){onError(exception)}}},onProgress,onError)},parse:function parse(data){var binData=function(buffer){if("string"===typeof buffer){for(var array_buffer=new Uint8Array(buffer.length),i=0;i<buffer.length;i++){array_buffer[i]=255&buffer.charCodeAt(i)}return array_buffer.buffer||array_buffer}else{return buffer}}(data);return function(data){var expect,face_size,n_faces,reader;reader=new DataView(data);face_size=3*(32/8)+3*(3*(32/8))+16/8;n_faces=reader.getUint32(80,!0);expect=80+32/8+n_faces*face_size;if(expect===reader.byteLength){return!0}for(var solid=[115,111,108,105,100],i=0;5>i;i++){if(solid[i]!=reader.getUint8(i,!1))return!0}return!1}(binData)?function(data){for(var reader=new DataView(data),faces=reader.getUint32(80,!0),r,g,b,hasColors=!1,colors,defaultR,defaultG,defaultB,alpha,index=0;index<80-10;index++){if(1129270351==reader.getUint32(index,!1)&&82==reader.getUint8(index+4)&&61==reader.getUint8(index+5)){hasColors=!0;colors=[];defaultR=reader.getUint8(index+6)/255;defaultG=reader.getUint8(index+7)/255;defaultB=reader.getUint8(index+8)/255;alpha=reader.getUint8(index+9)/255}}for(var geometry=new THREE.BufferGeometry,vertices=[],normals=[],face=0;face<faces;face++){var start=84+face*(4*12+2),normalX=reader.getFloat32(start,!0),normalY=reader.getFloat32(start+4,!0),normalZ=reader.getFloat32(start+8,!0);if(hasColors){var packedColor=reader.getUint16(start+48,!0);if(0===(32768&packedColor)){r=(31&packedColor)/31;g=(31&packedColor>>5)/31;b=(31&packedColor>>10)/31}else{r=defaultR;g=defaultG;b=defaultB}}for(var i=1,vertexstart;3>=i;i++){vertexstart=start+12*i;vertices.push(reader.getFloat32(vertexstart,!0));vertices.push(reader.getFloat32(vertexstart+4,!0));vertices.push(reader.getFloat32(vertexstart+8,!0));normals.push(normalX,normalY,normalZ);if(hasColors){colors.push(r,g,b)}}}geometry.addAttribute("position",new THREE.BufferAttribute(new Float32Array(vertices),3));geometry.addAttribute("normal",new THREE.BufferAttribute(new Float32Array(normals),3));if(hasColors){geometry.addAttribute("color",new THREE.BufferAttribute(new Float32Array(colors),3));geometry.hasColors=!0;geometry.alpha=alpha}return geometry}(binData):function(data){var geometry=new THREE.BufferGeometry,patternFace=/facet([\s\S]*?)endfacet/g,faceCounter=0,patternFloat=/[\s]+([+-]?(?:\d*)(?:\.\d*)?(?:[eE][+-]?\d+)?)/.source,patternVertex=new RegExp("vertex"+patternFloat+patternFloat+patternFloat,"g"),patternNormal=new RegExp("normal"+patternFloat+patternFloat+patternFloat,"g"),vertices=[],normals=[],normal=new THREE.Vector3,result;while(null!==(result=patternFace.exec(data))){var vertexCountPerFace=0,normalCountPerFace=0,text=result[0];while(null!==(result=patternNormal.exec(text))){normal.x=parseFloat(result[1]);normal.y=parseFloat(result[2]);normal.z=parseFloat(result[3]);normalCountPerFace++}while(null!==(result=patternVertex.exec(text))){vertices.push(parseFloat(result[1]),parseFloat(result[2]),parseFloat(result[3]));normals.push(normal.x,normal.y,normal.z);vertexCountPerFace++}if(1!==normalCountPerFace){console.error("THREE.STLLoader: Something isn't right with the normal of face number "+faceCounter)}if(3!==vertexCountPerFace){console.error("THREE.STLLoader: Something isn't right with the vertices of face number "+faceCounter)}faceCounter++}geometry.addAttribute("position",new THREE.Float32BufferAttribute(vertices,3));geometry.addAttribute("normal",new THREE.Float32BufferAttribute(normals,3));return geometry}(function(buffer){if("string"!==typeof buffer){return THREE.LoaderUtils.decodeText(new Uint8Array(buffer))}return buffer}(data))}};</script><script>THREE.VTKLoader=function(manager){this.manager=manager!==void 0?manager:THREE.DefaultLoadingManager};Object.assign(THREE.VTKLoader.prototype,THREE.EventDispatcher.prototype,{load:function load(url,onLoad,onProgress,onError){var scope=this,loader=new THREE.FileLoader(scope.manager);loader.setResponseType("arraybuffer");loader.load(url,function(text){onLoad(scope.parse(text))},onProgress,onError)},parse:function parse(data){var _StringfromCharCode=String.fromCharCode;function parseASCII(data){var indices=[],positions=[],colors=[],normals=[],result,pat3Floats=/(\-?\d+\.?[\d\-\+e]*)\s+(\-?\d+\.?[\d\-\+e]*)\s+(\-?\d+\.?[\d\-\+e]*)/g,patConnectivity=/^(\d+)\s+([\s\d]*)/,patPOINTS=/^POINTS /,patPOLYGONS=/^POLYGONS /,patTRIANGLE_STRIPS=/^TRIANGLE_STRIPS /,patPOINT_DATA=/^POINT_DATA[ ]+(\d+)/,patCELL_DATA=/^CELL_DATA[ ]+(\d+)/,patCOLOR_SCALARS=/^COLOR_SCALARS[ ]+(\w+)[ ]+3/,patNORMALS=/^NORMALS[ ]+(\w+)[ ]+(\w+)/,inPointsSection=!1,inPolygonsSection=!1,inTriangleStripSection=!1,inPointDataSection=!1,inCellDataSection=!1,inColorSection=!1,inNormalsSection=!1,lines=data.split("\n");for(var i in lines){var line=lines[i];if(inPointsSection){while(null!==(result=pat3Floats.exec(line))){var x=parseFloat(result[1]),y=parseFloat(result[2]),z=parseFloat(result[3]);positions.push(x,y,z)}}else if(inPolygonsSection){if(null!==(result=patConnectivity.exec(line))){var numVertices=parseInt(result[1]),inds=result[2].split(/\s+/);if(3<=numVertices){for(var i0=parseInt(inds[0]),i1,i2,k=1,j=0;j<numVertices-2;++j){i1=parseInt(inds[k]);i2=parseInt(inds[k+1]);indices.push(i0,i1,i2);k++}}}}else if(inTriangleStripSection){if(null!==(result=patConnectivity.exec(line))){var numVertices=parseInt(result[1]),inds=result[2].split(/\s+/);if(3<=numVertices){for(var i0,i1,i2,j=0;j<numVertices-2;j++){if(1===j%2){i0=parseInt(inds[j]);i1=parseInt(inds[j+2]);i2=parseInt(inds[j+1]);indices.push(i0,i1,i2)}else{i0=parseInt(inds[j]);i1=parseInt(inds[j+1]);i2=parseInt(inds[j+2]);indices.push(i0,i1,i2)}}}}}else if(inPointDataSection||inCellDataSection){if(inColorSection){while(null!==(result=pat3Floats.exec(line))){var r=parseFloat(result[1]),g=parseFloat(result[2]),b=parseFloat(result[3]);colors.push(r,g,b)}}else if(inNormalsSection){while(null!==(result=pat3Floats.exec(line))){var nx=parseFloat(result[1]),ny=parseFloat(result[2]),nz=parseFloat(result[3]);normals.push(nx,ny,nz)}}}if(null!==patPOLYGONS.exec(line)){inPolygonsSection=!0;inPointsSection=!1;inTriangleStripSection=!1}else if(null!==patPOINTS.exec(line)){inPolygonsSection=!1;inPointsSection=!0;inTriangleStripSection=!1}else if(null!==patTRIANGLE_STRIPS.exec(line)){inPolygonsSection=!1;inPointsSection=!1;inTriangleStripSection=!0}else if(null!==patPOINT_DATA.exec(line)){inPointDataSection=!0;inPointsSection=!1;inPolygonsSection=!1;inTriangleStripSection=!1}else if(null!==patCELL_DATA.exec(line)){inCellDataSection=!0;inPointsSection=!1;inPolygonsSection=!1;inTriangleStripSection=!1}else if(null!==patCOLOR_SCALARS.exec(line)){inColorSection=!0;inNormalsSection=!1;inPointsSection=!1;inPolygonsSection=!1;inTriangleStripSection=!1}else if(null!==patNORMALS.exec(line)){inNormalsSection=!0;inColorSection=!1;inPointsSection=!1;inPolygonsSection=!1;inTriangleStripSection=!1}}var geometry,stagger="point";if(colors.length===indices.length){stagger="cell"}if("point"===stagger){geometry=new THREE.BufferGeometry;geometry.setIndex(new THREE.BufferAttribute(new Uint32Array(indices),1));geometry.addAttribute("position",new THREE.BufferAttribute(new Float32Array(positions),3));if(colors.length===positions.length){geometry.addAttribute("color",new THREE.BufferAttribute(new Float32Array(colors),3))}if(normals.length===positions.length){geometry.addAttribute("normal",new THREE.BufferAttribute(new Float32Array(normals),3))}}else{geometry=new THREE.Geometry;for(var numTriangles=indices.length/3,numPoints=positions.length/3,face,ia,ib,ic,x,y,z,r,g,b,j=0;j<numPoints;++j){x=positions[3*j+0];y=positions[3*j+1];z=positions[3*j+2];geometry.vertices.push(new THREE.Vector3(x,y,z))}for(var i=0;i<numTriangles;++i){ia=indices[3*i+0];ib=indices[3*i+1];ic=indices[3*i+2];geometry.faces.push(new THREE.Face3(ia,ib,ic))}if(colors.length===3*numTriangles){for(var i=0;i<numTriangles;++i){face=geometry.faces[i];r=colors[3*i+0];g=colors[3*i+1];b=colors[3*i+2];face.color=new THREE.Color().setRGB(r,g,b)}}}return geometry}function parseBinary(data){var count,pointIndex,i,numberOfPoints,s,buffer=new Uint8Array(data),dataView=new DataView(data),points=[],normals=[],indices=[],vtk=[],index=0;function findString(buffer,start){var index=start,c=buffer[index],s=[];while(10!==c){s.push(_StringfromCharCode(c));index++;c=buffer[index]}return{start:start,end:index,next:index+1,parsedString:s.join("")}}var state,line;while(!0){state=findString(buffer,index);line=state.parsedString;if(0===line.indexOf("POINTS")){vtk.push(line);numberOfPoints=parseInt(line.split(" ")[1],10);count=3*(4*numberOfPoints);points=new Float32Array(3*numberOfPoints);pointIndex=state.next;for(i=0;i<numberOfPoints;i++){points[3*i]=dataView.getFloat32(pointIndex,!1);points[3*i+1]=dataView.getFloat32(pointIndex+4,!1);points[3*i+2]=dataView.getFloat32(pointIndex+8,!1);pointIndex=pointIndex+12}state.next=state.next+count+1}else if(0===line.indexOf("TRIANGLE_STRIPS")){var numberOfStrips=parseInt(line.split(" ")[1],10),size=parseInt(line.split(" ")[2],10);count=4*size;indices=new Uint32Array(3*size-9*numberOfStrips);var indicesIndex=0;pointIndex=state.next;for(i=0;i<numberOfStrips;i++){var indexCount=dataView.getInt32(pointIndex,!1),strip=[];pointIndex+=4;for(s=0;s<indexCount;s++){strip.push(dataView.getInt32(pointIndex,!1));pointIndex+=4}for(var j=0;j<indexCount-2;j++){if(j%2){indices[indicesIndex++]=strip[j];indices[indicesIndex++]=strip[j+2];indices[indicesIndex++]=strip[j+1]}else{indices[indicesIndex++]=strip[j];indices[indicesIndex++]=strip[j+1];indices[indicesIndex++]=strip[j+2]}}}state.next=state.next+count+1}else if(0===line.indexOf("POLYGONS")){var numberOfStrips=parseInt(line.split(" ")[1],10),size=parseInt(line.split(" ")[2],10);count=4*size;indices=new Uint32Array(3*size-9*numberOfStrips);var indicesIndex=0;pointIndex=state.next;for(i=0;i<numberOfStrips;i++){var indexCount=dataView.getInt32(pointIndex,!1),strip=[];pointIndex+=4;for(s=0;s<indexCount;s++){strip.push(dataView.getInt32(pointIndex,!1));pointIndex+=4}for(var j=1;j<indexCount-1;j++){indices[indicesIndex++]=strip[0];indices[indicesIndex++]=strip[j];indices[indicesIndex++]=strip[j+1]}}state.next=state.next+count+1}else if(0===line.indexOf("POINT_DATA")){numberOfPoints=parseInt(line.split(" ")[1],10);state=findString(buffer,state.next);count=3*(4*numberOfPoints);normals=new Float32Array(3*numberOfPoints);pointIndex=state.next;for(i=0;i<numberOfPoints;i++){normals[3*i]=dataView.getFloat32(pointIndex,!1);normals[3*i+1]=dataView.getFloat32(pointIndex+4,!1);normals[3*i+2]=dataView.getFloat32(pointIndex+8,!1);pointIndex+=12}state.next=state.next+count}index=state.next;if(index>=buffer.byteLength){break}}var geometry=new THREE.BufferGeometry;geometry.setIndex(new THREE.BufferAttribute(indices,1));geometry.addAttribute("position",new THREE.BufferAttribute(points,3));if(normals.length===points.length){geometry.addAttribute("normal",new THREE.BufferAttribute(normals,3))}return geometry}function Float32Concat(first,second){var firstLength=first.length,result=new Float32Array(firstLength+second.length);result.set(first);result.set(second,firstLength);return result}function Int32Concat(first,second){var firstLength=first.length,result=new Int32Array(firstLength+second.length);result.set(first);result.set(second,firstLength);return result}function parseXML(stringFile){function xmlToJson(xml){var obj={};if(1===xml.nodeType){if(xml.attributes){if(0<xml.attributes.length){obj.attributes={};for(var j=0,attribute;j<xml.attributes.length;j++){attribute=xml.attributes.item(j);obj.attributes[attribute.nodeName]=attribute.nodeValue.trim()}}}}else if(3===xml.nodeType){obj=xml.nodeValue.trim()}if(xml.hasChildNodes()){for(var i=0;i<xml.childNodes.length;i++){var item=xml.childNodes.item(i),nodeName=item.nodeName;if("undefined"===typeof obj[nodeName]){var tmp=xmlToJson(item);if(""!==tmp)obj[nodeName]=tmp}else{if("undefined"===typeof obj[nodeName].push){var old=obj[nodeName];obj[nodeName]=[old]}var tmp=xmlToJson(item);if(""!==tmp)obj[nodeName].push(tmp)}}}return obj}function Base64toByteArray(b64){var Arr="undefined"!==typeof Uint8Array?Uint8Array:Array,i,lookup=[],revLookup=[],code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",len=code.length;for(i=0;i<len;i++){lookup[i]=code[i]}for(i=0;i<len;++i){revLookup[code.charCodeAt(i)]=i}revLookup["-".charCodeAt(0)]=62;revLookup["_".charCodeAt(0)]=63;var j,l,tmp,placeHolders,arr,len=b64.length;if(0<len%4){throw new Error("Invalid string. Length must be a multiple of 4")}placeHolders="="===b64[len-2]?2:"="===b64[len-1]?1:0;arr=new Arr(3*len/4-placeHolders);l=0<placeHolders?len-4:len;var L=0;for(i=0,j=0;i<l;i+=4,j+=3){tmp=revLookup[b64.charCodeAt(i)]<<18|revLookup[b64.charCodeAt(i+1)]<<12|revLookup[b64.charCodeAt(i+2)]<<6|revLookup[b64.charCodeAt(i+3)];arr[L++]=(16711680&tmp)>>16;arr[L++]=(65280&tmp)>>8;arr[L++]=255&tmp}if(2===placeHolders){tmp=revLookup[b64.charCodeAt(i)]<<2|revLookup[b64.charCodeAt(i+1)]>>4;arr[L++]=255&tmp}else if(1===placeHolders){tmp=revLookup[b64.charCodeAt(i)]<<10|revLookup[b64.charCodeAt(i+1)]<<4|revLookup[b64.charCodeAt(i+2)]>>2;arr[L++]=255&tmp>>8;arr[L++]=255&tmp}return arr}function parseDataArray(ele,compressed){var numBytes=0;if("UInt64"===json.attributes.header_type){numBytes=8}else if("UInt32"===json.attributes.header_type){numBytes=4}if("binary"===ele.attributes.format&&compressed){var rawData,content,byteData,blocks,cSizeStart,headerSize,padding,dataOffsets,currentOffset;if("Float32"===ele.attributes.type){var txt=new Float32Array}else if("Int64"===ele.attributes.type){var txt=new Int32Array}rawData=ele["#text"];byteData=Base64toByteArray(rawData);blocks=byteData[0];for(var i=1;i<numBytes-1;i++){blocks=blocks|byteData[i]<<i*numBytes}headerSize=(blocks+3)*numBytes;padding=0<headerSize%3?3-headerSize%3:0;headerSize=headerSize+padding;dataOffsets=[];currentOffset=headerSize;dataOffsets.push(currentOffset);cSizeStart=3*numBytes;for(var i=0,currentBlockSize;i<blocks;i++){currentBlockSize=byteData[i*numBytes+cSizeStart];for(var j=1;j<numBytes-1;j++){currentBlockSize=currentBlockSize|byteData[i*numBytes+cSizeStart+j]<<8*j}currentOffset=currentOffset+currentBlockSize;dataOffsets.push(currentOffset)}for(var i=0,inflate;i<dataOffsets.length-1;i++){inflate=new Zlib.Inflate(byteData.slice(dataOffsets[i],dataOffsets[i+1]),{resize:!0,verify:!0});content=inflate.decompress();content=content.buffer;if("Float32"===ele.attributes.type){content=new Float32Array(content);txt=Float32Concat(txt,content)}else if("Int64"===ele.attributes.type){content=new Int32Array(content);txt=Int32Concat(txt,content)}}delete ele["#text"];if("Float32"===ele.attributes.type){if("binary"===ele.attributes.format){if(!compressed){txt=txt.filter(function(el,idx){if(0!==idx)return!0})}}}else if("Int64"===ele.attributes.type){if("binary"===ele.attributes.format){if(!compressed){txt=txt.filter(function(el,idx){if(0!==idx)return!0})}txt=txt.filter(function(el,idx){if(1!==idx%2)return!0})}}}else{if("binary"===ele.attributes.format&&!compressed){var content=Base64toByteArray(ele["#text"]);content=content.slice(numBytes).buffer}else{if(ele["#text"]){var content=ele["#text"].split(/\s+/).filter(function(el){if(""!==el)return el})}else{var content=new Int32Array(0).buffer}}delete ele["#text"];if("Float32"===ele.attributes.type){var txt=new Float32Array(content)}else if("Int32"===ele.attributes.type){var txt=new Int32Array(content)}else if("Int64"===ele.attributes.type){var txt=new Int32Array(content);if("binary"===ele.attributes.format){txt=txt.filter(function(el,idx){if(1!==idx%2)return!0})}}}return txt}var dom=null;if(window.DOMParser){try{dom=new DOMParser().parseFromString(stringFile,"text/xml")}catch(e){dom=null}}else if(window.ActiveXObject){try{dom=new ActiveXObject("Microsoft.XMLDOM");dom.async=!1;if(!dom.loadXML()){throw new Error(dom.parseError.reason+dom.parseError.srcText)}}catch(e){dom=null}}else{throw new Error("Cannot parse xml string!")}var doc=dom.documentElement,json=xmlToJson(doc),points=[],normals=[],indices=[];if(json.PolyData){var piece=json.PolyData.Piece,compressed=json.attributes.hasOwnProperty("compressor"),sections=["PointData","Points","Strips","Polys"],sectionIndex=0,numberOfSections=sections.length;while(sectionIndex<numberOfSections){var section=piece[sections[sectionIndex]];if(section&&section.DataArray){if("[object Array]"===Object.prototype.toString.call(section.DataArray)){var arr=section.DataArray}else{var arr=[section.DataArray]}var dataArrayIndex=0,numberOfDataArrays=arr.length;while(dataArrayIndex<numberOfDataArrays){if("#text"in arr[dataArrayIndex]&&0<arr[dataArrayIndex]["#text"].length){arr[dataArrayIndex].text=parseDataArray(arr[dataArrayIndex],compressed)}dataArrayIndex++}switch(sections[sectionIndex]){case"PointData":var numberOfPoints=parseInt(piece.attributes.NumberOfPoints),normalsName=section.attributes.Normals;if(0<numberOfPoints){for(var i=0,len=arr.length;i<len;i++){if(normalsName===arr[i].attributes.Name){var components=arr[i].attributes.NumberOfComponents;normals=new Float32Array(numberOfPoints*components);normals.set(arr[i].text,0)}}}break;case"Points":var numberOfPoints=parseInt(piece.attributes.NumberOfPoints);if(0<numberOfPoints){var components=section.DataArray.attributes.NumberOfComponents;points=new Float32Array(numberOfPoints*components);points.set(section.DataArray.text,0)}break;case"Strips":var numberOfStrips=parseInt(piece.attributes.NumberOfStrips);if(0<numberOfStrips){var connectivity=new Int32Array(section.DataArray[0].text.length),offset=new Int32Array(section.DataArray[1].text.length);connectivity.set(section.DataArray[0].text,0);offset.set(section.DataArray[1].text,0);var size=numberOfStrips+connectivity.length;indices=new Uint32Array(3*size-9*numberOfStrips);for(var indicesIndex=0,i=0,len=numberOfStrips,strip;i<len;i++){strip=[];for(var s=0,len1=offset[i],len0=0;s<len1-len0;s++){strip.push(connectivity[s]);if(0<i)len0=offset[i-1]}for(var j=0,len1=offset[i],len0=0;j<len1-len0-2;j++){if(j%2){indices[indicesIndex++]=strip[j];indices[indicesIndex++]=strip[j+2];indices[indicesIndex++]=strip[j+1]}else{indices[indicesIndex++]=strip[j];indices[indicesIndex++]=strip[j+1];indices[indicesIndex++]=strip[j+2]}if(0<i)len0=offset[i-1]}}}break;case"Polys":var numberOfPolys=parseInt(piece.attributes.NumberOfPolys);if(0<numberOfPolys){var connectivity=new Int32Array(section.DataArray[0].text.length),offset=new Int32Array(section.DataArray[1].text.length);connectivity.set(section.DataArray[0].text,0);offset.set(section.DataArray[1].text,0);var size=numberOfPolys+connectivity.length;indices=new Uint32Array(3*size-9*numberOfPolys);var indicesIndex=0,connectivityIndex=0,i=0,len=numberOfPolys,len0=0;while(i<len){var poly=[],s=0,len1=offset[i];while(s<len1-len0){poly.push(connectivity[connectivityIndex++]);s++}var j=1;while(j<len1-len0-1){indices[indicesIndex++]=poly[0];indices[indicesIndex++]=poly[j];indices[indicesIndex++]=poly[j+1];j++}i++;len0=offset[i-1]}}break;default:break;}}sectionIndex++}var geometry=new THREE.BufferGeometry;geometry.setIndex(new THREE.BufferAttribute(indices,1));geometry.addAttribute("position",new THREE.BufferAttribute(points,3));if(normals.length===points.length){geometry.addAttribute("normal",new THREE.BufferAttribute(normals,3))}return geometry}}function getStringFile(data){var stringFile="",charArray=new Uint8Array(data),i=0,len=charArray.length;while(len--){stringFile+=_StringfromCharCode(charArray[i++])}return stringFile}var meta=THREE.LoaderUtils.decodeText(new Uint8Array(data,0,250)).split("\n");if(-1!==meta[0].indexOf("xml")){return parseXML(getStringFile(data))}else if(meta[2].includes("ASCII")){return parseASCII(getStringFile(data))}else{return parseBinary(data)}}});</script><script>!function(t,e){"object"==("undefined"===typeof exports?"undefined":babelHelpers.typeof(exports))&&"object"==("undefined"===typeof module?"undefined":babelHelpers.typeof(module))?module.exports=e():"function"==typeof define&&define.amd?define("AMI",[],e):"object"==("undefined"===typeof exports?"undefined":babelHelpers.typeof(exports))?exports.AMI=e():t.AMI=e()}(this,function(){var _NumberisNaN=Number.isNaN,_NumberNEGATIVE_INFINITY=Number.NEGATIVE_INFINITY,_NumberPOSITIVE_INFINITY=Number.POSITIVE_INFINITY,_StringfromCharCode=String.fromCharCode,_NumberMAX_VALUE=Number.MAX_VALUE,_Mathacos=Math.acos,_Mathround=Math.round,_Mathceil=Math.ceil,_Mathatan=Math.atan2,_MathPI=Math.PI,_Mathpow=Math.pow,_Mathsqrt=Math.sqrt,_MathLN=Math.LN2,_Mathlog=Math.log,_Mathmax=Math.max,_Mathmin=Math.min,_Mathabs=Math.abs,_Mathfloor=Math.floor;return function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=84)}([function(t,e,n){"use strict";var _Mathtan=Math.tan,_Mathatan2=Math.atan,_NumberisInteger=Number.isInteger,_Mathsign=Math.sign,_NumberEPSILON=Number.EPSILON,_Mathsin=Math.sin,_Mathcos=Math.cos;function i(){}function r(t,e){this.x=t||0,this.y=e||0}function o(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],0<arguments.length&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function a(t,e,n,i){this._x=t||0,this._y=e||0,this._z=n||0,this._w=void 0!==i?i:1}function s(t,e,n){this.x=t||0,this.y=e||0,this.z=n||0}function l(){this.elements=[1,0,0,0,1,0,0,0,1],0<arguments.length&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}function c(t,e,n,i,o,a,s,h,u,p){Object.defineProperty(this,"id",{value:Ts++}),this.uuid=Ms.generateUUID(),this.name="",this.image=void 0!==t?t:c.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==e?e:c.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:ma,this.wrapT=void 0!==i?i:ma,this.magFilter=void 0!==o?o:ba,this.minFilter=void 0!==a?a:xa,this.anisotropy=void 0!==u?u:1,this.format=void 0!==s?s:Na,this.type=void 0!==h?h:Sa,this.offset=new r(0,0),this.repeat=new r(1,1),this.center=new r(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new l,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==p?p:_s,this.version=0,this.onUpdate=null}function h(t,e,n,i){this.x=t||0,this.y=e||0,this.z=n||0,this.w=void 0!==i?i:1}function u(t,e,n){this.width=t,this.height=e,this.scissor=new h(0,0,t,e),this.scissorTest=!1,this.viewport=new h(0,0,t,e),void 0===(n=n||{}).minFilter&&(n.minFilter=ba),this.texture=new c(void 0,void 0,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function p(t,e,n){u.call(this,t,e,n),this.activeCubeFace=0,this.activeMipMapLevel=0}function d(t,e,n,i,r,o,a,s,l,h,u,p){c.call(this,null,o,a,s,l,h,i,r,u,p),this.image={data:t,width:e,height:n},this.magFilter=void 0!==l?l:ga,this.minFilter=void 0!==h?h:ga,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}function f(t,e){this.min=void 0!==t?t:new s(1/0,1/0,1/0),this.max=void 0!==e?e:new s(-1/0,-1/0,-1/0)}function m(t,e){this.center=void 0!==t?t:new s,this.radius=void 0!==e?e:0}function _(t,e){this.normal=void 0!==t?t:new s(1,0,0),this.constant=void 0!==e?e:0}function g(t,e,n,i,r,o){this.planes=[void 0!==t?t:new _,void 0!==e?e:new _,void 0!==n?n:new _,void 0!==i?i:new _,void 0!==r?r:new _,void 0!==o?o:new _]}function y(t,e,n){return void 0===e&&void 0===n?this.set(t):this.setRGB(t,e,n)}function v(t){function e(e,n){var i=e.array,r=e.dynamic?t.DYNAMIC_DRAW:t.STATIC_DRAW,o=t.createBuffer();t.bindBuffer(n,o),t.bufferData(n,i,r),e.onUploadCallback();var a=t.FLOAT;return babelHelpers.instanceof(i,Float32Array)?a=t.FLOAT:babelHelpers.instanceof(i,Float64Array)?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):babelHelpers.instanceof(i,Uint16Array)?a=t.UNSIGNED_SHORT:babelHelpers.instanceof(i,Int16Array)?a=t.SHORT:babelHelpers.instanceof(i,Uint32Array)?a=t.UNSIGNED_INT:babelHelpers.instanceof(i,Int32Array)?a=t.INT:babelHelpers.instanceof(i,Int8Array)?a=t.BYTE:babelHelpers.instanceof(i,Uint8Array)&&(a=t.UNSIGNED_BYTE),{buffer:o,type:a,bytesPerElement:i.BYTES_PER_ELEMENT,version:e.version}}function n(e,n,i){var r=n.array,o=n.updateRange;t.bindBuffer(i,e),!1===n.dynamic?t.bufferData(i,r,t.STATIC_DRAW):-1===o.count?t.bufferSubData(i,0,r):0===o.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(t.bufferSubData(i,o.offset*r.BYTES_PER_ELEMENT,r.subarray(o.offset,o.offset+o.count)),o.count=-1)}var i=new WeakMap;return{get:function get(t){return t.isInterleavedBufferAttribute&&(t=t.data),i.get(t)},remove:function remove(e){e.isInterleavedBufferAttribute&&(e=e.data);var n=i.get(e);n&&(t.deleteBuffer(n.buffer),i.delete(e))},update:function update(t,r){t.isInterleavedBufferAttribute&&(t=t.data);var o=i.get(t);void 0===o?i.set(t,e(t,r)):o.version<t.version&&(n(o.buffer,t,r),o.version=t.version)}}}function b(t,e,n,i){this._x=t||0,this._y=e||0,this._z=n||0,this._order=i||b.DefaultOrder}function w(){this.mask=1}function x(){Object.defineProperty(this,"id",{value:Rs++}),this.uuid=Ms.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=x.DefaultUp.clone();var t=new s,e=new b,n=new a,i=new s(1,1,1);e.onChange(function(){n.setFromEuler(e,!1)}),n.onChange(function(){e.setFromQuaternion(n,void 0,!1)}),Object.defineProperties(this,{position:{enumerable:!0,value:t},rotation:{enumerable:!0,value:e},quaternion:{enumerable:!0,value:n},scale:{enumerable:!0,value:i},modelViewMatrix:{value:new o},normalMatrix:{value:new l}}),this.matrix=new o,this.matrixWorld=new o,this.matrixAutoUpdate=x.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new w,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function S(){x.call(this),this.type="Camera",this.matrixWorldInverse=new o,this.projectionMatrix=new o}function E(t,e,n,i,r,o){S.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=n,this.bottom=i,this.near=void 0!==r?r:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix()}function M(t,e,n,i,r,o){this.a=t,this.b=e,this.c=n,this.normal=i&&i.isVector3?i:new s,this.vertexNormals=Array.isArray(i)?i:[],this.color=r&&r.isColor?r:new y,this.vertexColors=Array.isArray(r)?r:[],this.materialIndex=void 0!==o?o:0}function T(){Object.defineProperty(this,"id",{value:Os+=2}),this.uuid=Ms.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function A(t,e,n){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===n,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function P(t,e,n){A.call(this,new Int8Array(t),e,n)}function C(t,e,n){A.call(this,new Uint8Array(t),e,n)}function I(t,e,n){A.call(this,new Uint8ClampedArray(t),e,n)}function L(t,e,n){A.call(this,new Int16Array(t),e,n)}function R(t,e,n){A.call(this,new Uint16Array(t),e,n)}function O(t,e,n){A.call(this,new Int32Array(t),e,n)}function k(t,e,n){A.call(this,new Uint32Array(t),e,n)}function D(t,e,n){A.call(this,new Float32Array(t),e,n)}function F(t,e,n){A.call(this,new Float64Array(t),e,n)}function N(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function U(t){if(0===t.length)return-1/0;for(var e=t[0],n=1,i=t.length;n<i;++n){t[n]>e&&(e=t[n])}return e}function B(){Object.defineProperty(this,"id",{value:ks+=2}),this.uuid=Ms.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0}}function z(t,e,n,i,r,o){T.call(this),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:i,heightSegments:r,depthSegments:o},this.fromBufferGeometry(new G(t,e,n,i,r,o)),this.mergeVertices()}function G(t,e,n,i,r,o){function a(t,e,n,i,r,o,a,m,_,g,y){var v,b,T=_+1,P=0,C=0,I=new s;for(b=0;b<g+1;b++){var L=b*(a/g)-a/2;for(v=0;v<T;v++){var R=v*(o/_)-o/2;I[t]=R*i,I[e]=L*r,I[n]=m/2,h.push(I.x,I.y,I.z),I[t]=0,I[e]=0,I[n]=0<m?1:-1,u.push(I.x,I.y,I.z),p.push(v/_),p.push(1-b/g),P+=1}}for(b=0;b<g;b++){for(v=0;v<_;v++){var O=d+v+T*b,k=d+v+T*(b+1),D=d+(v+1)+T*(b+1),F=d+(v+1)+T*b;c.push(O,k,F),c.push(k,D,F),C+=6}}l.addGroup(f,C,y),f+=C,d+=P}B.call(this),this.type="BoxBufferGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:i,heightSegments:r,depthSegments:o};var l=this;t=t||1,e=e||1,n=n||1,i=_Mathfloor(i)||1,r=_Mathfloor(r)||1;var c=[],h=[],u=[],p=[],d=0,f=0;a("z","y","x",-1,-1,n,e,t,o=_Mathfloor(o)||1,r,0),a("z","y","x",1,-1,n,e,-t,o,r,1),a("x","z","y",1,1,t,n,e,i,o,2),a("x","z","y",1,-1,t,n,-e,i,o,3),a("x","y","z",1,-1,t,e,n,i,r,4),a("x","y","z",-1,-1,t,e,-n,i,r,5),this.setIndex(c),this.addAttribute("position",new D(h,3)),this.addAttribute("normal",new D(u,3)),this.addAttribute("uv",new D(p,2))}function H(t,e,n,i){T.call(this),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:i},this.fromBufferGeometry(new j(t,e,n,i)),this.mergeVertices()}function j(t,e,n,i){B.call(this),this.type="PlaneBufferGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:i};var r,o,a=(t=t||1)/2,s=(e=e||1)/2,l=_Mathfloor(n)||1,c=_Mathfloor(i)||1,h=l+1,p=t/l,d=e/c,f=[],m=[],_=[],g=[];for(o=0;o<c+1;o++){var y=o*d-s;for(r=0;r<h;r++){var v=r*p-a;m.push(v,-y,0),_.push(0,0,1),g.push(r/l),g.push(1-o/c)}}for(o=0;o<c;o++){for(r=0;r<l;r++){var b=r+h*o,w=r+h*(o+1),x=r+1+h*(o+1),S=r+1+h*o;f.push(b,w,S),f.push(w,x,S)}}this.setIndex(f),this.addAttribute("position",new D(m,3)),this.addAttribute("normal",new D(_,3)),this.addAttribute("uv",new D(g,2))}function V(){Object.defineProperty(this,"id",{value:Ds++}),this.uuid=Ms.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=Eo,this.side=go,this.flatShading=!1,this.vertexColors=bo,this.opacity=1,this.transparent=!1,this.blendSrc=Uo,this.blendDst=Bo,this.blendEquation=Co,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Yo,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.overdraw=0,this.visible=!0,this.userData={},this.needsUpdate=!0}function W(t){V.call(this),this.type="MeshBasicMaterial",this.color=new y(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=$o,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(t)}function q(t){V.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==t&&(void 0!==t.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))}function X(t,e){this.origin=void 0!==t?t:new s,this.direction=void 0!==e?e:new s}function Y(t,e){this.start=void 0!==t?t:new s,this.end=void 0!==e?e:new s}function Z(t,e,n){this.a=void 0!==t?t:new s,this.b=void 0!==e?e:new s,this.c=void 0!==n?n:new s}function J(t,e){x.call(this),this.type="Mesh",this.geometry=void 0!==t?t:new B,this.material=void 0!==e?e:new W({color:16777215*Math.random()}),this.drawMode=ds,this.updateMorphTargets()}function K(t,e,n,i){function r(t,n){e.buffers.color.setClear(t.r,t.g,t.b,n,i)}var o,a,s,l=new y(0),c=0;return{getClearColor:function getClearColor(){return l},setClearColor:function setClearColor(t,e){l.set(t),r(l,c=void 0!==e?e:1)},getClearAlpha:function getClearAlpha(){return c},setClearAlpha:function setClearAlpha(t){r(l,c=t)},render:function render(e,i,h,u){var p=i.background;null===p?r(l,c):p&&p.isColor&&(r(p,1),u=!0),(t.autoClear||u)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),p&&p.isCubeTexture?(void 0===s&&((s=new J(new G(1,1,1),new q({uniforms:Ls.cube.uniforms,vertexShader:Ls.cube.vertexShader,fragmentShader:Ls.cube.fragmentShader,side:yo,depthTest:!0,depthWrite:!1,fog:!1}))).geometry.removeAttribute("normal"),s.geometry.removeAttribute("uv"),s.onBeforeRender=function(t,e,n){this.matrixWorld.copyPosition(n.matrixWorld)},n.update(s.geometry)),s.material.uniforms.tCube.value=p,e.push(s,s.geometry,s.material,0,null)):p&&p.isTexture&&(void 0===o&&(o=new E(-1,1,1,-1,0,1),a=new J(new j(2,2),new W({depthTest:!1,depthWrite:!1,fog:!1})),n.update(a.geometry)),a.material.map=p,t.renderBufferDirect(o,null,a.geometry,a.material,a,null))}}}function Q(t,e,n){var i;this.setMode=function(t){i=t},this.render=function(e,r){t.drawArrays(i,e,r),n.update(r,i)},this.renderInstances=function(t,r,o){var a=e.get("ANGLE_instanced_arrays");if(null!==a){var s=t.attributes.position;s.isInterleavedBufferAttribute?(o=s.data.count,a.drawArraysInstancedANGLE(i,0,o,t.maxInstancedCount)):a.drawArraysInstancedANGLE(i,r,o,t.maxInstancedCount),n.update(o,i,t.maxInstancedCount)}else console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.")}}function $(t,e,n){function i(e){if("highp"===e){if(0<t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision&&0<t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision)return"highp";e="mediump"}return"mediump"===e&&0<t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision&&0<t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision?"mediump":"lowp"}var r,o=void 0!==n.precision?n.precision:"highp",a=i(o);a!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",a,"instead."),o=a);var s=!0===n.logarithmicDepthBuffer,l=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),c=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),h=t.getParameter(t.MAX_TEXTURE_SIZE),u=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),p=t.getParameter(t.MAX_VERTEX_ATTRIBS),d=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),f=t.getParameter(t.MAX_VARYING_VECTORS),m=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),_=0<c,g=!!e.get("OES_texture_float");return{getMaxAnisotropy:function getMaxAnisotropy(){if(void 0!==r)return r;var n=e.get("EXT_texture_filter_anisotropic");return r=null!==n?t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:i,precision:o,logarithmicDepthBuffer:s,maxTextures:l,maxVertexTextures:c,maxTextureSize:h,maxCubemapSize:u,maxAttributes:p,maxVertexUniforms:d,maxVaryings:f,maxFragmentUniforms:m,vertexTextures:_,floatFragmentTextures:g,floatVertexTextures:_&&g}}function tt(){function t(){h.value!==i&&(h.value=i,h.needsUpdate=0<r),n.numPlanes=r,n.numIntersection=0}function e(t,e,i,r){var o=null!==t?t.length:0,a=null;if(0!==o){if(a=h.value,!0!==r||null===a){var l=i+4*o,u=e.matrixWorldInverse;c.getNormalMatrix(u),(null===a||a.length<l)&&(a=new Float32Array(l));for(var p=0,d=i;p!==o;++p,d+=4){s.copy(t[p]).applyMatrix4(u,c),s.normal.toArray(a,d),a[d+3]=s.constant}}h.value=a,h.needsUpdate=!0}return n.numPlanes=o,a}var n=this,i=null,r=0,o=!1,a=!1,s=new _,c=new l,h={value:null,needsUpdate:!1};this.uniform=h,this.numPlanes=0,this.numIntersection=0,this.init=function(t,n,a){var s=0!==t.length||n||0!==r||o;return o=n,i=e(t,a,0),r=t.length,s},this.beginShadows=function(){a=!0,e(null)},this.endShadows=function(){a=!1,t()},this.setState=function(n,s,l,c,u,p){if(!o||null===n||0===n.length||a&&!l)a?e(null):t();else{var d=a?0:r,f=4*d,m=u.clippingState||null;h.value=m,m=e(n,c,f,p);for(var _=0;_!==f;++_){m[_]=i[_]}u.clippingState=m,this.numIntersection=s?this.numPlanes:0,this.numPlanes+=d}}}function et(t){var e={};return{get:function get(n){if(void 0!==e[n])return e[n];var i;switch(n){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=t.getExtension(n);}return null===i&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),e[n]=i,i}}}function nt(t,e,n){function i(t){var a=t.target,s=r[a.id];null!==s.index&&e.remove(s.index);for(var l in s.attributes){e.remove(s.attributes[l])}a.removeEventListener("dispose",i),delete r[a.id];var c=o[a.id];c&&(e.remove(c),delete o[a.id]),(c=o[s.id])&&(e.remove(c),delete o[s.id]),n.memory.geometries--}var r={},o={};return{get:function get(t,e){var o=r[e.id];return o||(e.addEventListener("dispose",i),e.isBufferGeometry?o=e:e.isGeometry&&(void 0===e._bufferGeometry&&(e._bufferGeometry=new B().setFromObject(t)),o=e._bufferGeometry),r[e.id]=o,n.memory.geometries++,o)},update:function update(n){var i=n.index,r=n.attributes;null!==i&&e.update(i,t.ELEMENT_ARRAY_BUFFER);for(var o in r){e.update(r[o],t.ARRAY_BUFFER)}var a=n.morphAttributes;for(var o in a){for(var s=a[o],l=0,c=s.length;l<c;l++){e.update(s[l],t.ARRAY_BUFFER)}}},getWireframeAttribute:function getWireframeAttribute(n){var i=o[n.id];if(i)return i;var r=[],a=n.index,s=n.attributes;if(null!==a)for(var l=0,c=(d=a.array).length;l<c;l+=3){var h=d[l+0],u=d[l+1],p=d[l+2];r.push(h,u,u,p,p,h)}else for(var d=s.position.array,l=0,c=d.length/3-1;l<c;l+=3){var h=l+0,u=l+1,p=l+2;r.push(h,u,u,p,p,h)}return i=new(65535<U(r)?k:R)(r,1),e.update(i,t.ELEMENT_ARRAY_BUFFER),o[n.id]=i,i}}}function it(t,e,n){var i,r,o;this.setMode=function(t){i=t},this.setIndex=function(t){r=t.type,o=t.bytesPerElement},this.render=function(e,a){t.drawElements(i,a,r,e*o),n.update(a,i)},this.renderInstances=function(t,a,s){var l=e.get("ANGLE_instanced_arrays");null!==l?(l.drawElementsInstancedANGLE(i,s,r,a*o,t.maxInstancedCount),n.update(s,i,t.maxInstancedCount)):console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.")}}function rt(t){var e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function reset(){e.frame++,e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function update(n,i,r){switch(r=r||1,e.calls++,i){case t.TRIANGLES:e.triangles+=r*(n/3);break;case t.TRIANGLE_STRIP:case t.TRIANGLE_FAN:e.triangles+=r*(n-2);break;case t.LINES:e.lines+=r*(n/2);break;case t.LINE_STRIP:e.lines+=r*(n-1);break;case t.LINE_LOOP:e.lines+=r*n;break;case t.POINTS:e.points+=r*n;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",i);}}}}function ot(t,e){return _Mathabs(e[1])-_Mathabs(t[1])}function at(t){var e={},n=new Float32Array(8);return{update:function update(i,r,o,a){var s=i.morphTargetInfluences,l=s.length,c=e[r.id];if(void 0===c){for(c=[],p=0;p<l;p++){c[p]=[p,0]}e[r.id]=c}for(var h=o.morphTargets&&r.morphAttributes.position,u=o.morphNormals&&r.morphAttributes.normal,p=0;p<l;p++){0!==(d=c[p])[1]&&(h&&r.removeAttribute("morphTarget"+p),u&&r.removeAttribute("morphNormal"+p))}for(p=0;p<l;p++){(d=c[p])[0]=p,d[1]=s[p]}c.sort(ot);for(p=0;8>p;p++){var d=c[p];if(d){var f=d[0],m=d[1];if(m){h&&r.addAttribute("morphTarget"+p,h[f]),u&&r.addAttribute("morphNormal"+p,u[f]),n[p]=m;continue}}n[p]=0}a.getUniforms().setValue(t,"morphTargetInfluences",n)}}}function st(t,e){var n={};return{update:function update(i){var r=e.render.frame,o=i.geometry,a=t.get(i,o);return n[a.id]!==r&&(o.isGeometry&&a.updateFromObject(i),t.update(a),n[a.id]=r),a},dispose:function dispose(){n={}}}}function lt(t,e,n,i,r,o,a,s,l,h){t=void 0!==t?t:[],e=void 0!==e?e:sa,c.call(this,t,e,n,i,r,o,a,s,l,h),this.flipY=!1}function ct(){this.seq=[],this.map={}}function ht(t,e,n){var i=t[0];if(0>=i||0<i)return t;var r=e*n,o=Us[r];if(void 0===o&&(o=new Float32Array(r),Us[r]=o),0!==e){i.toArray(o,0);for(var a=1,s=0;a!==e;++a){s+=n,t[a].toArray(o,s)}}return o}function ut(t,e){var n=Bs[e];void 0===n&&(n=new Int32Array(e),Bs[e]=n);for(var i=0;i!==e;++i){n[i]=t.allocTextureUnit()}return n}function pt(t,e){t.uniform1f(this.addr,e)}function dt(t,e){t.uniform1i(this.addr,e)}function ft(t,e){void 0===e.x?t.uniform2fv(this.addr,e):t.uniform2f(this.addr,e.x,e.y)}function mt(t,e){void 0!==e.x?t.uniform3f(this.addr,e.x,e.y,e.z):void 0!==e.r?t.uniform3f(this.addr,e.r,e.g,e.b):t.uniform3fv(this.addr,e)}function _t(t,e){void 0===e.x?t.uniform4fv(this.addr,e):t.uniform4f(this.addr,e.x,e.y,e.z,e.w)}function gt(t,e){t.uniformMatrix2fv(this.addr,!1,e.elements||e)}function yt(t,e){void 0===e.elements?t.uniformMatrix3fv(this.addr,!1,e):(Gs.set(e.elements),t.uniformMatrix3fv(this.addr,!1,Gs))}function vt(t,e){void 0===e.elements?t.uniformMatrix4fv(this.addr,!1,e):(zs.set(e.elements),t.uniformMatrix4fv(this.addr,!1,zs))}function bt(t,e,n){var i=n.allocTextureUnit();t.uniform1i(this.addr,i),n.setTexture2D(e||Fs,i)}function wt(t,e,n){var i=n.allocTextureUnit();t.uniform1i(this.addr,i),n.setTextureCube(e||Ns,i)}function xt(t,e){t.uniform2iv(this.addr,e)}function St(t,e){t.uniform3iv(this.addr,e)}function Et(t,e){t.uniform4iv(this.addr,e)}function Mt(t){switch(t){case 5126:return pt;case 35664:return ft;case 35665:return mt;case 35666:return _t;case 35674:return gt;case 35675:return yt;case 35676:return vt;case 35678:case 36198:return bt;case 35680:return wt;case 5124:case 35670:return dt;case 35667:case 35671:return xt;case 35668:case 35672:return St;case 35669:case 35673:return Et;}}function Tt(t,e){t.uniform1fv(this.addr,e)}function At(t,e){t.uniform1iv(this.addr,e)}function Pt(t,e){t.uniform2fv(this.addr,ht(e,this.size,2))}function Ct(t,e){t.uniform3fv(this.addr,ht(e,this.size,3))}function It(t,e){t.uniform4fv(this.addr,ht(e,this.size,4))}function Lt(t,e){t.uniformMatrix2fv(this.addr,!1,ht(e,this.size,4))}function Rt(t,e){t.uniformMatrix3fv(this.addr,!1,ht(e,this.size,9))}function Ot(t,e){t.uniformMatrix4fv(this.addr,!1,ht(e,this.size,16))}function kt(t,e,n){var i=e.length,r=ut(n,i);t.uniform1iv(this.addr,r);for(var o=0;o!==i;++o){n.setTexture2D(e[o]||Fs,r[o])}}function Dt(t,e,n){var i=e.length,r=ut(n,i);t.uniform1iv(this.addr,r);for(var o=0;o!==i;++o){n.setTextureCube(e[o]||Ns,r[o])}}function Ft(t){switch(t){case 5126:return Tt;case 35664:return Pt;case 35665:return Ct;case 35666:return It;case 35674:return Lt;case 35675:return Rt;case 35676:return Ot;case 35678:return kt;case 35680:return Dt;case 5124:case 35670:return At;case 35667:case 35671:return xt;case 35668:case 35672:return St;case 35669:case 35673:return Et;}}function Nt(t,e,n){this.id=t,this.addr=n,this.setValue=Mt(e.type)}function Ut(t,e,n){this.id=t,this.addr=n,this.size=e.size,this.setValue=Ft(e.type)}function Bt(t){this.id=t,ct.call(this)}function zt(t,e){t.seq.push(e),t.map[e.id]=e}function Gt(t,e,n){var i=t.name,r=i.length;for(Hs.lastIndex=0;;){var o=Hs.exec(i),a=Hs.lastIndex,s=o[1],l="]"===o[2],c=o[3];if(l&&(s|=0),void 0===c||"["===c&&a+2===r){zt(n,void 0===c?new Nt(s,t,e):new Ut(s,t,e));break}var h=n.map[s];void 0===h&&zt(n,h=new Bt(s)),n=h}}function Ht(t,e,n){ct.call(this),this.renderer=n;for(var i=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),r=0,o;r<i;++r){o=t.getActiveUniform(e,r);Gt(o,t.getUniformLocation(e,o.name),this)}}function jt(t){for(var e=t.split("\n"),n=0;n<e.length;n++){e[n]=n+1+": "+e[n]}return e.join("\n")}function Vt(t,e,n){var i=t.createShader(e);return t.shaderSource(i,n),t.compileShader(i),!1===t.getShaderParameter(i,t.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==t.getShaderInfoLog(i)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",e===t.VERTEX_SHADER?"vertex":"fragment",t.getShaderInfoLog(i),jt(n)),i}function Wt(t){switch(t){case _s:return["Linear","( value )"];case gs:return["sRGB","( value )"];case vs:return["RGBE","( value )"];case bs:return["RGBM","( value, 7.0 )"];case ws:return["RGBM","( value, 16.0 )"];case xs:return["RGBD","( value, 256.0 )"];case ys:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+t);}}function qt(t,e){var n=Wt(e);return"vec4 "+t+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function Xt(t,e){var n=Wt(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function Yt(t,e){var n;switch(e){case ia:n="Linear";break;case ra:n="Reinhard";break;case oa:n="Uncharted2";break;case aa:n="OptimizedCineon";break;default:throw new Error("unsupported toneMapping: "+e);}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Zt(t,e,n){return[(t=t||{}).derivatives||e.envMapCubeUV||e.bumpMap||e.normalMap||e.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(t.fragDepth||e.logarithmicDepthBuffer)&&n.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",t.drawBuffers&&n.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(t.shaderTextureLOD||e.envMap)&&n.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Qt).join("\n")}function Jt(t){var e=[];for(var n in t){var i=t[n];!1!==i&&e.push("#define "+n+" "+i)}return e.join("\n")}function Kt(t,e){for(var n={},i=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),r=0,o;r<i;r++){o=t.getActiveAttrib(e,r).name;n[o]=t.getAttribLocation(e,o)}return n}function Qt(t){return""!==t}function $t(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights)}function te(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}function ee(t){var e=/^[ \t]*#include +<([\w\d.]+)>/gm;return t.replace(e,function(t,e){var n=As[e];if(void 0===n)throw new Error("Can not resolve #include <"+e+">");return ee(n)})}function ne(t){var e=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g;return t.replace(e,function(t,e,n,i){for(var r="",o=parseInt(e);o<parseInt(n);o++){r+=i.replace(/\[ i \]/g,"[ "+o+" ]")}return r})}function ie(t,e,n,i,r,o){var a=t.context,s=i.defines,l=r.vertexShader,c=r.fragmentShader,h="SHADOWMAP_TYPE_BASIC";o.shadowMapType===mo?h="SHADOWMAP_TYPE_PCF":o.shadowMapType===_o&&(h="SHADOWMAP_TYPE_PCF_SOFT");var u="ENVMAP_TYPE_CUBE",p="ENVMAP_MODE_REFLECTION",d="ENVMAP_BLENDING_MULTIPLY";if(o.envMap){switch(i.envMap.mapping){case sa:case la:u="ENVMAP_TYPE_CUBE";break;case pa:case da:u="ENVMAP_TYPE_CUBE_UV";break;case ca:case ha:u="ENVMAP_TYPE_EQUIREC";break;case ua:u="ENVMAP_TYPE_SPHERE";}switch(i.envMap.mapping){case la:case ha:p="ENVMAP_MODE_REFRACTION";}switch(i.combine){case $o:d="ENVMAP_BLENDING_MULTIPLY";break;case ta:d="ENVMAP_BLENDING_MIX";break;case ea:d="ENVMAP_BLENDING_ADD";}}var f,m,_=0<t.gammaFactor?t.gammaFactor:1,g=Zt(i.extensions,o,e),y=Jt(s),v=a.createProgram();i.isRawShaderMaterial?(0<(f=[y].filter(Qt).join("\n")).length&&(f+="\n"),0<(m=[g,y].filter(Qt).join("\n")).length&&(m+="\n")):(f=["precision "+o.precision+" float;","precision "+o.precision+" int;","#define SHADER_NAME "+r.name,y,o.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+_,"#define MAX_BONES "+o.maxBones,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+p:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.displacementMap&&o.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexColors?"#define USE_COLOR":"",o.flatShading?"#define FLAT_SHADED":"",o.skinning?"#define USE_SKINNING":"",o.useVertexTexture?"#define BONE_TEXTURE":"",o.morphTargets?"#define USE_MORPHTARGETS":"",o.morphNormals&&!1===o.flatShading?"#define USE_MORPHNORMALS":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+h:"",o.sizeAttenuation?"#define USE_SIZEATTENUATION":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&e.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Qt).join("\n"),m=[g,"precision "+o.precision+" float;","precision "+o.precision+" int;","#define SHADER_NAME "+r.name,y,o.alphaTest?"#define ALPHATEST "+o.alphaTest:"","#define GAMMA_FACTOR "+_,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+u:"",o.envMap?"#define "+p:"",o.envMap?"#define "+d:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexColors?"#define USE_COLOR":"",o.gradientMap?"#define USE_GRADIENTMAP":"",o.flatShading?"#define FLAT_SHADED":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+h:"",o.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",o.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&e.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",o.envMap&&e.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",o.toneMapping!==na?"#define TONE_MAPPING":"",o.toneMapping!==na?As.tonemapping_pars_fragment:"",o.toneMapping!==na?Yt("toneMapping",o.toneMapping):"",o.dithering?"#define DITHERING":"",o.outputEncoding||o.mapEncoding||o.envMapEncoding||o.emissiveMapEncoding?As.encodings_pars_fragment:"",o.mapEncoding?qt("mapTexelToLinear",o.mapEncoding):"",o.envMapEncoding?qt("envMapTexelToLinear",o.envMapEncoding):"",o.emissiveMapEncoding?qt("emissiveMapTexelToLinear",o.emissiveMapEncoding):"",o.outputEncoding?Xt("linearToOutputTexel",o.outputEncoding):"",o.depthPacking?"#define DEPTH_PACKING "+i.depthPacking:"","\n"].filter(Qt).join("\n")),l=te(l=$t(l=ee(l),o),o),c=te(c=$t(c=ee(c),o),o);var b=f+(l=ne(l)),w=m+(c=ne(c)),x=Vt(a,a.VERTEX_SHADER,b),S=Vt(a,a.FRAGMENT_SHADER,w);a.attachShader(v,x),a.attachShader(v,S),void 0!==i.index0AttributeName?a.bindAttribLocation(v,0,i.index0AttributeName):!0===o.morphTargets&&a.bindAttribLocation(v,0,"position"),a.linkProgram(v);var E=a.getProgramInfoLog(v).trim(),M=a.getShaderInfoLog(x).trim(),T=a.getShaderInfoLog(S).trim(),A=!0,P=!0;!1===a.getProgramParameter(v,a.LINK_STATUS)?(A=!1,console.error("THREE.WebGLProgram: shader error: ",a.getError(),"gl.VALIDATE_STATUS",a.getProgramParameter(v,a.VALIDATE_STATUS),"gl.getProgramInfoLog",E,M,T)):""!==E?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",E):""!==M&&""!==T||(P=!1),P&&(this.diagnostics={runnable:A,material:i,programLog:E,vertexShader:{log:M,prefix:f},fragmentShader:{log:T,prefix:m}}),a.deleteShader(x),a.deleteShader(S);var C;this.getUniforms=function(){return void 0===C&&(C=new Ht(a,v,t)),C};var I;return this.getAttributes=function(){return void 0===I&&(I=Kt(a,v)),I},this.destroy=function(){a.deleteProgram(v),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function get(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function get(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.name=r.name,this.id=js++,this.code=n,this.usedTimes=1,this.program=v,this.vertexShader=x,this.fragmentShader=S,this}function re(t,e,n){function i(t){var e=t.skeleton.bones;if(n.floatVertexTextures)return 1024;var i=n.maxVertexUniforms,r=_Mathfloor((i-20)/4),o=_Mathmin(r,e.length);return o<e.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+e.length+" bones. This GPU supports "+o+"."),0):o}function r(t,e){var n;return t?t.isTexture?n=t.encoding:t.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),n=t.texture.encoding):n=_s,n===_s&&e&&(n=ys),n}var o=[],a={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow"},s=["precision","supportsVertexTextures","map","mapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering"];this.getParameters=function(e,o,s,l,c,h,u){var p=a[e.type],d=u.isSkinnedMesh?i(u):0,f=n.precision;null!==e.precision&&(f=n.getMaxPrecision(e.precision))!==e.precision&&console.warn("THREE.WebGLProgram.getParameters:",e.precision,"not supported, using",f,"instead.");var m=t.getRenderTarget();return{shaderID:p,precision:f,supportsVertexTextures:n.vertexTextures,outputEncoding:r(m?m.texture:null,t.gammaOutput),map:!!e.map,mapEncoding:r(e.map,t.gammaInput),envMap:!!e.envMap,envMapMode:e.envMap&&e.envMap.mapping,envMapEncoding:r(e.envMap,t.gammaInput),envMapCubeUV:!!e.envMap&&(e.envMap.mapping===pa||e.envMap.mapping===da),lightMap:!!e.lightMap,aoMap:!!e.aoMap,emissiveMap:!!e.emissiveMap,emissiveMapEncoding:r(e.emissiveMap,t.gammaInput),bumpMap:!!e.bumpMap,normalMap:!!e.normalMap,displacementMap:!!e.displacementMap,roughnessMap:!!e.roughnessMap,metalnessMap:!!e.metalnessMap,specularMap:!!e.specularMap,alphaMap:!!e.alphaMap,gradientMap:!!e.gradientMap,combine:e.combine,vertexColors:e.vertexColors,fog:!!l,useFog:e.fog,fogExp:l&&l.isFogExp2,flatShading:e.flatShading,sizeAttenuation:e.sizeAttenuation,logarithmicDepthBuffer:n.logarithmicDepthBuffer,skinning:e.skinning&&0<d,maxBones:d,useVertexTexture:n.floatVertexTextures,morphTargets:e.morphTargets,morphNormals:e.morphNormals,maxMorphTargets:t.maxMorphTargets,maxMorphNormals:t.maxMorphNormals,numDirLights:o.directional.length,numPointLights:o.point.length,numSpotLights:o.spot.length,numRectAreaLights:o.rectArea.length,numHemiLights:o.hemi.length,numClippingPlanes:c,numClipIntersection:h,dithering:e.dithering,shadowMapEnabled:t.shadowMap.enabled&&u.receiveShadow&&0<s.length,shadowMapType:t.shadowMap.type,toneMapping:t.toneMapping,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:e.premultipliedAlpha,alphaTest:e.alphaTest,doubleSided:e.side===vo,flipSided:e.side===yo,depthPacking:void 0!==e.depthPacking&&e.depthPacking}},this.getProgramCode=function(e,n){var i=[];if(n.shaderID?i.push(n.shaderID):(i.push(e.fragmentShader),i.push(e.vertexShader)),void 0!==e.defines)for(var r in e.defines){i.push(r),i.push(e.defines[r])}for(var o=0;o<s.length;o++){i.push(n[s[o]])}return i.push(e.onBeforeCompile.toString()),i.push(t.gammaOutput),i.join()},this.acquireProgram=function(n,i,r,a){for(var s,l=0,c=o.length,h;l<c;l++){h=o[l];if(h.code===a){++(s=h).usedTimes;break}}return void 0===s&&(s=new ie(t,e,a,n,i,r),o.push(s)),s},this.releaseProgram=function(t){if(0==--t.usedTimes){var e=o.indexOf(t);o[e]=o[o.length-1],o.pop(),t.destroy()}},this.programs=o}function oe(){var t=new WeakMap;return{get:function get(e){var n=t.get(e);return void 0===n&&(n={},t.set(e,n)),n},remove:function remove(e){t.delete(e)},update:function update(e,n,i){t.get(e)[n]=i},dispose:function dispose(){t=new WeakMap}}}function ae(t,e){return t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.program&&e.program&&t.program!==e.program?t.program.id-e.program.id:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function se(t,e){return t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function le(){var t=[],e=0,n=[],i=[];return{opaque:n,transparent:i,init:function init(){e=0,n.length=0,i.length=0},push:function push(r,o,a,s,l){var c=t[e];void 0===c?(c={id:r.id,object:r,geometry:o,material:a,program:a.program,renderOrder:r.renderOrder,z:s,group:l},t[e]=c):(c.id=r.id,c.object=r,c.geometry=o,c.material=a,c.program=a.program,c.renderOrder=r.renderOrder,c.z=s,c.group=l),(!0===a.transparent?i:n).push(c),e++},sort:function sort(){1<n.length&&n.sort(ae),1<i.length&&i.sort(se)}}}function ce(){var t={};return{get:function get(e,n){var i=e.id+","+n.id,r=t[i];return void 0===r&&(r=new le,t[i]=r),r},dispose:function dispose(){t={}}}}function he(){var t={};return{get:function get(e){if(void 0!==t[e.id])return t[e.id];var n;switch(e.type){case"DirectionalLight":n={direction:new s,color:new y,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new r};break;case"SpotLight":n={position:new s,direction:new s,color:new y,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new r};break;case"PointLight":n={position:new s,color:new y,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new r,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":n={direction:new s,skyColor:new y,groundColor:new y};break;case"RectAreaLight":n={color:new y,position:new s,halfWidth:new s,halfHeight:new s};}return t[e.id]=n,n}}}function ue(){var t=new he,e={id:Vs++,hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},n=new s,i=new o,r=new o;return{setup:function setup(o,a,s){for(var l=0,c=0,h=0,u=0,p=0,d=0,f=0,m=0,_=s.matrixWorldInverse,g=0,y=o.length;g<y;g++){var v=o[g],b=v.color,w=v.intensity,x=v.distance,S=v.shadow&&v.shadow.map?v.shadow.map.texture:null;if(v.isAmbientLight)l+=b.r*w,c+=b.g*w,h+=b.b*w;else if(v.isDirectionalLight)(M=t.get(v)).color.copy(v.color).multiplyScalar(v.intensity),M.direction.setFromMatrixPosition(v.matrixWorld),n.setFromMatrixPosition(v.target.matrixWorld),M.direction.sub(n),M.direction.transformDirection(_),M.shadow=v.castShadow,v.castShadow&&(E=v.shadow,M.shadowBias=E.bias,M.shadowRadius=E.radius,M.shadowMapSize=E.mapSize),e.directionalShadowMap[u]=S,e.directionalShadowMatrix[u]=v.shadow.matrix,e.directional[u]=M,u++;else if(v.isSpotLight)(M=t.get(v)).position.setFromMatrixPosition(v.matrixWorld),M.position.applyMatrix4(_),M.color.copy(b).multiplyScalar(w),M.distance=x,M.direction.setFromMatrixPosition(v.matrixWorld),n.setFromMatrixPosition(v.target.matrixWorld),M.direction.sub(n),M.direction.transformDirection(_),M.coneCos=_Mathcos(v.angle),M.penumbraCos=_Mathcos(v.angle*(1-v.penumbra)),M.decay=0===v.distance?0:v.decay,M.shadow=v.castShadow,v.castShadow&&(E=v.shadow,M.shadowBias=E.bias,M.shadowRadius=E.radius,M.shadowMapSize=E.mapSize),e.spotShadowMap[d]=S,e.spotShadowMatrix[d]=v.shadow.matrix,e.spot[d]=M,d++;else if(v.isRectAreaLight)(M=t.get(v)).color.copy(b).multiplyScalar(w),M.position.setFromMatrixPosition(v.matrixWorld),M.position.applyMatrix4(_),r.identity(),i.copy(v.matrixWorld),i.premultiply(_),r.extractRotation(i),M.halfWidth.set(.5*v.width,0,0),M.halfHeight.set(0,.5*v.height,0),M.halfWidth.applyMatrix4(r),M.halfHeight.applyMatrix4(r),e.rectArea[f]=M,f++;else if(v.isPointLight){if((M=t.get(v)).position.setFromMatrixPosition(v.matrixWorld),M.position.applyMatrix4(_),M.color.copy(v.color).multiplyScalar(v.intensity),M.distance=v.distance,M.decay=0===v.distance?0:v.decay,M.shadow=v.castShadow,v.castShadow){var E=v.shadow;M.shadowBias=E.bias,M.shadowRadius=E.radius,M.shadowMapSize=E.mapSize,M.shadowCameraNear=E.camera.near,M.shadowCameraFar=E.camera.far}e.pointShadowMap[p]=S,e.pointShadowMatrix[p]=v.shadow.matrix,e.point[p]=M,p++}else if(v.isHemisphereLight){var M=t.get(v);M.direction.setFromMatrixPosition(v.matrixWorld),M.direction.transformDirection(_),M.direction.normalize(),M.skyColor.copy(v.color).multiplyScalar(w),M.groundColor.copy(v.groundColor).multiplyScalar(w),e.hemi[m]=M,m++}}e.ambient[0]=l,e.ambient[1]=c,e.ambient[2]=h,e.directional.length=u,e.spot.length=d,e.rectArea.length=f,e.point.length=p,e.hemi.length=m,e.hash=e.id+","+u+","+p+","+d+","+f+","+m+","+a.length},state:e}}function pe(){var t=new ue,e=[],n=[],i=[];return{init:function init(){e.length=0,n.length=0,i.length=0},state:{lightsArray:e,shadowsArray:n,spritesArray:i,lights:t},setupLights:function setupLights(i){t.setup(e,n,i)},pushLight:function pushLight(t){e.push(t)},pushShadow:function pushShadow(t){n.push(t)},pushSprite:function pushSprite(t){i.push(t)}}}function de(){var t={};return{get:function get(e,n){var i=e.id+","+n.id,r=t[i];return void 0===r&&(r=new pe,t[i]=r),r},dispose:function dispose(){t={}}}}function fe(t){V.call(this),this.type="MeshDepthMaterial",this.depthPacking=Ss,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(t)}function me(t){V.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new s,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.lights=!1,this.setValues(t)}function _e(t,e,n){function i(e,n,i,r,o,a){var s=e.geometry,l=null,c=b,h=e.customDepthMaterial;if(i&&(c=w,h=e.customDistanceMaterial),h)l=h;else{var u=!1;n.morphTargets&&(s&&s.isBufferGeometry?u=s.morphAttributes&&s.morphAttributes.position&&0<s.morphAttributes.position.length:s&&s.isGeometry&&(u=s.morphTargets&&0<s.morphTargets.length)),e.isSkinnedMesh&&!1===n.skinning&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",e);var p=e.isSkinnedMesh&&n.skinning,d=0;u&&(d|=_),p&&(d|=y),l=c[d]}if(t.localClippingEnabled&&!0===n.clipShadows&&0!==n.clippingPlanes.length){var f=l.uuid,m=n.uuid,g=x[f];void 0===g&&(g={},x[f]=g);var v=g[m];void 0===v&&(v=l.clone(),g[m]=v),l=v}return l.visible=n.visible,l.wireframe=n.wireframe,l.side=null!=n.shadowSide?n.shadowSide:S[n.side],l.clipShadows=n.clipShadows,l.clippingPlanes=n.clippingPlanes,l.clipIntersection=n.clipIntersection,l.wireframeLinewidth=n.wireframeLinewidth,l.linewidth=n.linewidth,i&&l.isMeshDistanceMaterial&&(l.referencePosition.copy(r),l.nearDistance=o,l.farDistance=a),l}function a(n,r,o,s){if(!1!==n.visible){if(n.layers.test(r.layers)&&(n.isMesh||n.isLine||n.isPoints)&&n.castShadow&&(!n.frustumCulled||l.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);var c=e.update(n),h=n.material;if(Array.isArray(h))for(var u=c.groups,p=0,d=u.length;p<d;p++){var f=u[p],_=h[f.materialIndex];if(_&&_.visible){g=i(n,_,s,m,o.near,o.far);t.renderBufferDirect(o,null,c,g,n,f)}}else if(h.visible){var g=i(n,h,s,m,o.near,o.far);t.renderBufferDirect(o,null,c,g,n,null)}}for(var y=n.children,v=0,b=y.length;v<b;v++){a(y[v],r,o,s)}}}for(var l=new g,c=new o,p=new r,d=new r(n,n),f=new s,m=new s,_=1,y=2,b=[,,,,],w=[,,,,],x={},S={0:yo,1:go,2:vo},E=[new s(1,0,0),new s(-1,0,0),new s(0,0,1),new s(0,0,-1),new s(0,1,0),new s(0,-1,0)],M=[new s(0,1,0),new s(0,1,0),new s(0,1,0),new s(0,1,0),new s(0,0,1),new s(0,0,-1)],T=[new h,new h,new h,new h,new h,new h],A=0;A!==1+(_|y);++A){var P=0!=(A&_),C=0!=(A&y),I=new fe({depthPacking:Es,morphTargets:P,skinning:C});b[A]=I;var L=new me({morphTargets:P,skinning:C});w[A]=L}var R=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=mo,this.render=function(e,n,i){if(!1!==R.enabled&&(!1!==R.autoUpdate||!1!==R.needsUpdate)&&0!==e.length){var r=t.context,o=t.state;o.disable(r.BLEND),o.buffers.color.setClear(1,1,1,1),o.buffers.depth.setTest(!0),o.setScissorTest(!1);for(var s,h=0,_=e.length;h<_;h++){var g=e[h],y=g.shadow,v=g&&g.isPointLight;if(void 0!==y){var b=y.camera;if(p.copy(y.mapSize),p.min(d),v){var w=p.x,x=p.y;T[0].set(2*w,x,w,x),T[1].set(0,x,w,x),T[2].set(3*w,x,w,x),T[3].set(w,x,w,x),T[4].set(3*w,0,w,x),T[5].set(w,0,w,x),p.x*=4,p.y*=2}if(null===y.map){y.map=new u(p.x,p.y,{minFilter:ga,magFilter:ga,format:Na}),y.map.texture.name=g.name+".shadowMap",b.updateProjectionMatrix()}y.isSpotLightShadow&&y.update(g);var A=y.map,P=y.matrix;m.setFromMatrixPosition(g.matrixWorld),b.position.copy(m),v?(s=6,P.makeTranslation(-m.x,-m.y,-m.z)):(s=1,f.setFromMatrixPosition(g.target.matrixWorld),b.lookAt(f),b.updateMatrixWorld(),P.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),P.multiply(b.projectionMatrix),P.multiply(b.matrixWorldInverse)),t.setRenderTarget(A),t.clear();for(var C=0;C<s;C++){if(v){f.copy(b.position),f.add(E[C]),b.up.copy(M[C]),b.lookAt(f),b.updateMatrixWorld();var I=T[C];o.viewport(I)}c.multiplyMatrices(b.projectionMatrix,b.matrixWorldInverse),l.setFromMatrix(c),a(n,i,b,v)}}else console.warn("THREE.WebGLShadowMap:",g,"has no shadow.")}R.needsUpdate=!1}}}function ge(t,e,n,i,r,o,a,s,l){c.call(this,t,e,n,i,r,o,a,s,l),this.needsUpdate=!0}function ye(t,e,n,i,r){function o(){var t=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),n=new Uint16Array([0,1,2,0,2,3]);h=e.createBuffer(),u=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,h),e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,u),e.bufferData(e.ELEMENT_ARRAY_BUFFER,n,e.STATIC_DRAW),p=l(),d={position:e.getAttribLocation(p,"position"),uv:e.getAttribLocation(p,"uv")},f={uvOffset:e.getUniformLocation(p,"uvOffset"),uvScale:e.getUniformLocation(p,"uvScale"),rotation:e.getUniformLocation(p,"rotation"),center:e.getUniformLocation(p,"center"),scale:e.getUniformLocation(p,"scale"),color:e.getUniformLocation(p,"color"),map:e.getUniformLocation(p,"map"),opacity:e.getUniformLocation(p,"opacity"),modelViewMatrix:e.getUniformLocation(p,"modelViewMatrix"),projectionMatrix:e.getUniformLocation(p,"projectionMatrix"),fogType:e.getUniformLocation(p,"fogType"),fogDensity:e.getUniformLocation(p,"fogDensity"),fogNear:e.getUniformLocation(p,"fogNear"),fogFar:e.getUniformLocation(p,"fogFar"),fogColor:e.getUniformLocation(p,"fogColor"),fogDepth:e.getUniformLocation(p,"fogDepth"),alphaTest:e.getUniformLocation(p,"alphaTest")};var i=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");i.width=8,i.height=8;var r=i.getContext("2d");r.fillStyle="white",r.fillRect(0,0,8,8),m=new ge(i)}function l(){var t=e.createProgram(),n=e.createShader(e.VERTEX_SHADER),i=e.createShader(e.FRAGMENT_SHADER);return e.shaderSource(n,["precision "+r.precision+" float;","#define SHADER_NAME SpriteMaterial","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 center;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float fogDepth;","void main() {","\tvUV = uvOffset + uv * uvScale;","\tvec2 alignedPosition = ( position - center ) * scale;","\tvec2 rotatedPosition;","\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","\tvec4 mvPosition;","\tmvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","\tmvPosition.xy += rotatedPosition;","\tgl_Position = projectionMatrix * mvPosition;","\tfogDepth = - mvPosition.z;","}"].join("\n")),e.shaderSource(i,["precision "+r.precision+" float;","#define SHADER_NAME SpriteMaterial","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","varying float fogDepth;","void main() {","\tvec4 texture = texture2D( map, vUV );","\tgl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","\tif ( gl_FragColor.a < alphaTest ) discard;","\tif ( fogType > 0 ) {","\t\tfloat fogFactor = 0.0;","\t\tif ( fogType == 1 ) {","\t\t\tfogFactor = smoothstep( fogNear, fogFar, fogDepth );","\t\t} else {","\t\t\tconst float LOG2 = 1.442695;","\t\t\tfogFactor = exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 );","\t\t\tfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","\t\t}","\t\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );","\t}","}"].join("\n")),e.compileShader(n),e.compileShader(i),e.attachShader(t,n),e.attachShader(t,i),e.linkProgram(t),t}function c(t,e){return t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:e.id-t.id}var h,u,p,d,f,m,_=new s,g=new a,y=new s;this.render=function(r,a,s){if(0!==r.length){void 0===p&&o(),n.useProgram(p),n.initAttributes(),n.enableAttribute(d.position),n.enableAttribute(d.uv),n.disableUnusedAttributes(),n.disable(e.CULL_FACE),n.enable(e.BLEND),e.bindBuffer(e.ARRAY_BUFFER,h),e.vertexAttribPointer(d.position,2,e.FLOAT,!1,16,0),e.vertexAttribPointer(d.uv,2,e.FLOAT,!1,16,8),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,u),e.uniformMatrix4fv(f.projectionMatrix,!1,s.projectionMatrix.elements),n.activeTexture(e.TEXTURE0),e.uniform1i(f.map,0);var l=0,v=0,b=a.fog;b?(e.uniform3f(f.fogColor,b.color.r,b.color.g,b.color.b),b.isFog?(e.uniform1f(f.fogNear,b.near),e.uniform1f(f.fogFar,b.far),e.uniform1i(f.fogType,1),l=1,v=1):b.isFogExp2&&(e.uniform1f(f.fogDensity,b.density),e.uniform1i(f.fogType,2),l=2,v=2)):(e.uniform1i(f.fogType,0),l=0,v=0);for(var w=0,x=r.length;w<x;w++){(M=r[w]).modelViewMatrix.multiplyMatrices(s.matrixWorldInverse,M.matrixWorld),M.z=-M.modelViewMatrix.elements[14]}r.sort(c);for(var S=[],E=[],w=0,x=r.length;w<x;w++){var M=r[w],T=M.material;if(!1!==T.visible){M.onBeforeRender(t,a,s,void 0,T,void 0),e.uniform1f(f.alphaTest,T.alphaTest),e.uniformMatrix4fv(f.modelViewMatrix,!1,M.modelViewMatrix.elements),M.matrixWorld.decompose(_,g,y),S[0]=y.x,S[1]=y.y,E[0]=M.center.x-.5,E[1]=M.center.y-.5;var A=0;a.fog&&T.fog&&(A=v),l!==A&&(e.uniform1i(f.fogType,A),l=A),null!==T.map?(e.uniform2f(f.uvOffset,T.map.offset.x,T.map.offset.y),e.uniform2f(f.uvScale,T.map.repeat.x,T.map.repeat.y)):(e.uniform2f(f.uvOffset,0,0),e.uniform2f(f.uvScale,1,1)),e.uniform1f(f.opacity,T.opacity),e.uniform3f(f.color,T.color.r,T.color.g,T.color.b),e.uniform1f(f.rotation,T.rotation),e.uniform2fv(f.center,E),e.uniform2fv(f.scale,S),n.setBlending(T.blending,T.blendEquation,T.blendSrc,T.blendDst,T.blendEquationAlpha,T.blendSrcAlpha,T.blendDstAlpha,T.premultipliedAlpha),n.buffers.depth.setTest(T.depthTest),n.buffers.depth.setMask(T.depthWrite),n.buffers.color.setMask(T.colorWrite),i.setTexture2D(T.map||m,0),e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0),M.onAfterRender(t,a,s,void 0,T,void 0)}}n.enable(e.CULL_FACE),n.reset()}}}function ve(t,e,n){function i(e,n,i){var r=new Uint8Array(4),o=t.createTexture();t.bindTexture(e,o),t.texParameteri(e,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(e,t.TEXTURE_MAG_FILTER,t.NEAREST);for(var a=0;a<i;a++){t.texImage2D(n+a,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,r)}return o}function r(e){!0!==v[e]&&(t.enable(e),v[e]=!0)}function o(e){!1!==v[e]&&(t.disable(e),v[e]=!1)}function a(e,i,a,s,l,c,h,u){if(e!==So?r(t.BLEND):o(t.BLEND),e!==Po){if(e!==x||u!==C)switch(e){case Mo:u?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ONE,t.ONE,t.ONE,t.ONE)):(t.blendEquation(t.FUNC_ADD),t.blendFunc(t.SRC_ALPHA,t.ONE));break;case To:u?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ZERO,t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ONE_MINUS_SRC_ALPHA)):(t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ZERO,t.ONE_MINUS_SRC_COLOR));break;case Ao:u?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA)):(t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ZERO,t.SRC_COLOR));break;default:u?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA)):(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA));}S=null,E=null,M=null,T=null,A=null,P=null}else l=l||i,c=c||a,h=h||s,i===S&&l===T||(t.blendEquationSeparate(n.convert(i),n.convert(l)),S=i,T=l),a===E&&s===M&&c===A&&h===P||(t.blendFuncSeparate(n.convert(a),n.convert(s),n.convert(c),n.convert(h)),E=a,M=s,A=c,P=h);x=e,C=u}function s(e){I!==e&&(e?t.frontFace(t.CW):t.frontFace(t.CCW),I=e)}function l(e){e!==uo?(r(t.CULL_FACE),e!==L&&(e===po?t.cullFace(t.BACK):e===fo?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):o(t.CULL_FACE),L=e}function c(e,n,i){e?(r(t.POLYGON_OFFSET_FILL),O===n&&k===i||(t.polygonOffset(n,i),O=n,k=i)):o(t.POLYGON_OFFSET_FILL)}function u(e){void 0===e&&(e=t.TEXTURE0+D-1),B!==e&&(t.activeTexture(e),B=e)}var p=new function(){var e=!1,n=new h,i=null,r=new h(0,0,0,0);return{setMask:function setMask(n){i===n||e||(t.colorMask(n,n,n,n),i=n)},setLocked:function setLocked(t){e=t},setClear:function setClear(e,i,o,a,s){!0===s&&(e*=a,i*=a,o*=a),n.set(e,i,o,a),!1===r.equals(n)&&(t.clearColor(e,i,o,a),r.copy(n))},reset:function reset(){e=!1,i=null,r.set(-1,0,0,0)}}},d=new function(){var e=!1,n=null,i=null,a=null;return{setTest:function setTest(e){e?r(t.DEPTH_TEST):o(t.DEPTH_TEST)},setMask:function setMask(i){n===i||e||(t.depthMask(i),n=i)},setFunc:function setFunc(e){if(i!==e){if(e)switch(e){case Wo:t.depthFunc(t.NEVER);break;case qo:t.depthFunc(t.ALWAYS);break;case Xo:t.depthFunc(t.LESS);break;case Yo:t.depthFunc(t.LEQUAL);break;case Zo:t.depthFunc(t.EQUAL);break;case Jo:t.depthFunc(t.GEQUAL);break;case Ko:t.depthFunc(t.GREATER);break;case Qo:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL);}else t.depthFunc(t.LEQUAL);i=e}},setLocked:function setLocked(t){e=t},setClear:function setClear(e){a!==e&&(t.clearDepth(e),a=e)},reset:function reset(){e=!1,n=null,i=null,a=null}}},f=new function(){var e=!1,n=null,i=null,a=null,s=null,l=null,c=null,h=null,u=null;return{setTest:function setTest(e){e?r(t.STENCIL_TEST):o(t.STENCIL_TEST)},setMask:function setMask(i){n===i||e||(t.stencilMask(i),n=i)},setFunc:function setFunc(e,n,r){i===e&&a===n&&s===r||(t.stencilFunc(e,n,r),i=e,a=n,s=r)},setOp:function setOp(e,n,i){l===e&&c===n&&h===i||(t.stencilOp(e,n,i),l=e,c=n,h=i)},setLocked:function setLocked(t){e=t},setClear:function setClear(e){u!==e&&(t.clearStencil(e),u=e)},reset:function reset(){e=!1,n=null,i=null,a=null,s=null,l=null,c=null,h=null,u=null}}},m=t.getParameter(t.MAX_VERTEX_ATTRIBS),_=new Uint8Array(m),g=new Uint8Array(m),y=new Uint8Array(m),v={},b=null,w=null,x=null,S=null,E=null,M=null,T=null,A=null,P=null,C=!1,I=null,L=null,R=null,O=null,k=null,D=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS),F=!1,N=0,U=t.getParameter(t.VERSION);-1!==U.indexOf("WebGL")?(N=parseFloat(/^WebGL\ ([0-9])/.exec(U)[1]),F=1<=N):-1!==U.indexOf("OpenGL ES")&&(N=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(U)[1]),F=2<=N);var B=null,z={},G=new h,H=new h,j={};return j[t.TEXTURE_2D]=i(t.TEXTURE_2D,t.TEXTURE_2D,1),j[t.TEXTURE_CUBE_MAP]=i(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),p.setClear(0,0,0,1),d.setClear(1),f.setClear(0),r(t.DEPTH_TEST),d.setFunc(Yo),s(!1),l(po),r(t.CULL_FACE),r(t.BLEND),a(Eo),{buffers:{color:p,depth:d,stencil:f},initAttributes:function initAttributes(){for(var t=0,e=_.length;t<e;t++){_[t]=0}},enableAttribute:function enableAttribute(n){_[n]=1,0===g[n]&&(t.enableVertexAttribArray(n),g[n]=1),0!==y[n]&&(e.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(n,0),y[n]=0)},enableAttributeAndDivisor:function enableAttributeAndDivisor(n,i){_[n]=1,0===g[n]&&(t.enableVertexAttribArray(n),g[n]=1),y[n]!==i&&(e.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(n,i),y[n]=i)},disableUnusedAttributes:function disableUnusedAttributes(){for(var e=0,n=g.length;e!==n;++e){g[e]!==_[e]&&(t.disableVertexAttribArray(e),g[e]=0)}},enable:r,disable:o,getCompressedTextureFormats:function getCompressedTextureFormats(){if(null===b&&(b=[],e.get("WEBGL_compressed_texture_pvrtc")||e.get("WEBGL_compressed_texture_s3tc")||e.get("WEBGL_compressed_texture_etc1")||e.get("WEBGL_compressed_texture_astc")))for(var n=t.getParameter(t.COMPRESSED_TEXTURE_FORMATS),i=0;i<n.length;i++){b.push(n[i])}return b},useProgram:function useProgram(e){return w!==e&&(t.useProgram(e),w=e,!0)},setBlending:a,setMaterial:function setMaterial(e,n){e.side===vo?o(t.CULL_FACE):r(t.CULL_FACE);var i=e.side===yo;n&&(i=!i),s(i),!0===e.transparent?a(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha):a(So),d.setFunc(e.depthFunc),d.setTest(e.depthTest),d.setMask(e.depthWrite),p.setMask(e.colorWrite),c(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits)},setFlipSided:s,setCullFace:l,setLineWidth:function setLineWidth(e){e!==R&&(F&&t.lineWidth(e),R=e)},setPolygonOffset:c,setScissorTest:function setScissorTest(e){e?r(t.SCISSOR_TEST):o(t.SCISSOR_TEST)},activeTexture:u,bindTexture:function bindTexture(e,n){null===B&&u();var i=z[B];void 0===i&&(i={type:void 0,texture:void 0},z[B]=i),i.type===e&&i.texture===n||(t.bindTexture(e,n||j[e]),i.type=e,i.texture=n)},compressedTexImage2D:function compressedTexImage2D(){try{t.compressedTexImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function texImage2D(){try{t.texImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function scissor(e){!1===G.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),G.copy(e))},viewport:function viewport(e){!1===H.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),H.copy(e))},reset:function reset(){for(var e=0;e<g.length;e++){1===g[e]&&(t.disableVertexAttribArray(e),g[e]=0)}v={},b=null,B=null,z={},w=null,x=null,I=null,L=null,p.reset(),d.reset(),f.reset()}}}function be(t,e,n,i,r,o,a){function s(t,e){if(t.width>e||t.height>e){if("data"in t)return void console.warn("THREE.WebGLRenderer: image in DataTexture is too big ("+t.width+"x"+t.height+").");var n=e/_Mathmax(t.width,t.height),i=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return i.width=_Mathfloor(t.width*n),i.height=_Mathfloor(t.height*n),i.getContext("2d").drawImage(t,0,0,t.width,t.height,0,0,i.width,i.height),console.warn("THREE.WebGLRenderer: image is too big ("+t.width+"x"+t.height+"). Resized to "+i.width+"x"+i.height,t),i}return t}function l(t){return Ms.isPowerOfTwo(t.width)&&Ms.isPowerOfTwo(t.height)}function c(t){return babelHelpers.instanceof(t,HTMLImageElement)||babelHelpers.instanceof(t,HTMLCanvasElement)||babelHelpers.instanceof(t,ImageBitmap)?(void 0===T&&(T=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),T.width=Ms.floorPowerOfTwo(t.width),T.height=Ms.floorPowerOfTwo(t.height),T.getContext("2d").drawImage(t,0,0,T.width,T.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+t.width+"x"+t.height+"). Resized to "+T.width+"x"+T.height,t),T):t}function h(t){return t.wrapS!==ma||t.wrapT!==ma||t.minFilter!==ga&&t.minFilter!==ba}function u(t,e){return t.generateMipmaps&&e&&t.minFilter!==ga&&t.minFilter!==ba}function p(e,n,r,o){t.generateMipmap(e),i.get(n).__maxMipLevel=_Mathlog(_Mathmax(r,o))*Math.LOG2E}function d(e){return e===ga||e===ya||e===va?t.NEAREST:t.LINEAR}function f(t){var e=t.target;e.removeEventListener("dispose",f),_(e),e.isVideoTexture&&delete P[e.id],a.memory.textures--}function m(t){var e=t.target;e.removeEventListener("dispose",m),g(e),a.memory.textures--}function _(e){var n=i.get(e);if(e.image&&n.__image__webglTextureCube)t.deleteTexture(n.__image__webglTextureCube);else{if(void 0===n.__webglInit)return;t.deleteTexture(n.__webglTexture)}i.remove(e)}function g(e){var n=i.get(e),r=i.get(e.texture);if(e){if(void 0!==r.__webglTexture&&t.deleteTexture(r.__webglTexture),e.depthTexture&&e.depthTexture.dispose(),e.isWebGLRenderTargetCube)for(var o=0;6>o;o++){t.deleteFramebuffer(n.__webglFramebuffer[o]),n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer[o])}else t.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer);i.remove(e.texture),i.remove(e)}}function y(e,r){var o=i.get(e);if(e.isVideoTexture&&M(e),0<e.version&&o.__version!==e.version){var a=e.image;if(void 0===a)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",e);else{if(!1!==a.complete)return void b(o,e,r);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",e)}}n.activeTexture(t.TEXTURE0+r),n.bindTexture(t.TEXTURE_2D,o.__webglTexture)}function v(n,a,s){var l;if(s?(t.texParameteri(n,t.TEXTURE_WRAP_S,o.convert(a.wrapS)),t.texParameteri(n,t.TEXTURE_WRAP_T,o.convert(a.wrapT)),t.texParameteri(n,t.TEXTURE_MAG_FILTER,o.convert(a.magFilter)),t.texParameteri(n,t.TEXTURE_MIN_FILTER,o.convert(a.minFilter))):(t.texParameteri(n,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(n,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),a.wrapS===ma&&a.wrapT===ma||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",a),t.texParameteri(n,t.TEXTURE_MAG_FILTER,d(a.magFilter)),t.texParameteri(n,t.TEXTURE_MIN_FILTER,d(a.minFilter)),a.minFilter!==ga&&a.minFilter!==ba&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",a)),l=e.get("EXT_texture_filter_anisotropic")){if(a.type===Ca&&null===e.get("OES_texture_float_linear"))return;if(a.type===Ia&&null===e.get("OES_texture_half_float_linear"))return;(1<a.anisotropy||i.get(a).__currentAnisotropy)&&(t.texParameterf(n,l.TEXTURE_MAX_ANISOTROPY_EXT,_Mathmin(a.anisotropy,r.getMaxAnisotropy())),i.get(a).__currentAnisotropy=a.anisotropy)}}function b(e,i,d){void 0===e.__webglInit&&(e.__webglInit=!0,i.addEventListener("dispose",f),e.__webglTexture=t.createTexture(),a.memory.textures++),n.activeTexture(t.TEXTURE0+d),n.bindTexture(t.TEXTURE_2D,e.__webglTexture),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,i.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,i.unpackAlignment);var m=s(i.image,r.maxTextureSize);h(i)&&!1===l(m)&&(m=c(m));var _=l(m),g=o.convert(i.format),y=o.convert(i.type);v(t.TEXTURE_2D,i,_);var b,w=i.mipmaps;if(i.isDepthTexture){var x=t.DEPTH_COMPONENT;if(i.type===Ca){if(!A)throw new Error("Float Depth Texture only supported in WebGL2.0");x=t.DEPTH_COMPONENT32F}else A&&(x=t.DEPTH_COMPONENT16);i.format===za&&x===t.DEPTH_COMPONENT&&i.type!==Ta&&i.type!==Pa&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),i.type=Ta,y=o.convert(i.type)),i.format===Ga&&(x=t.DEPTH_STENCIL,i.type!==ka&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),i.type=ka,y=o.convert(i.type))),n.texImage2D(t.TEXTURE_2D,0,x,m.width,m.height,0,g,y,null)}else if(i.isDataTexture){if(0<w.length&&_){for(var S=0,E=w.length;S<E;S++){b=w[S],n.texImage2D(t.TEXTURE_2D,S,g,b.width,b.height,0,g,y,b.data)}i.generateMipmaps=!1,e.__maxMipLevel=w.length-1}else n.texImage2D(t.TEXTURE_2D,0,g,m.width,m.height,0,g,y,m.data),e.__maxMipLevel=0;}else if(i.isCompressedTexture){for(var S=0,E=w.length;S<E;S++){b=w[S],i.format!==Na&&i.format!==Fa?-1<n.getCompressedTextureFormats().indexOf(g)?n.compressedTexImage2D(t.TEXTURE_2D,S,g,b.width,b.height,0,b.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(t.TEXTURE_2D,S,g,b.width,b.height,0,g,y,b.data)}e.__maxMipLevel=w.length-1}else if(0<w.length&&_){for(var S=0,E=w.length;S<E;S++){b=w[S],n.texImage2D(t.TEXTURE_2D,S,g,g,y,b)}i.generateMipmaps=!1,e.__maxMipLevel=w.length-1}else n.texImage2D(t.TEXTURE_2D,0,g,g,y,m),e.__maxMipLevel=0;u(i,_)&&p(t.TEXTURE_2D,i,m.width,m.height),e.__version=i.version,i.onUpdate&&i.onUpdate(i)}function w(e,r,a,s){var l=o.convert(r.texture.format),c=o.convert(r.texture.type);n.texImage2D(s,0,l,r.width,r.height,0,l,c,null),t.bindFramebuffer(t.FRAMEBUFFER,e),t.framebufferTexture2D(t.FRAMEBUFFER,a,s,i.get(r.texture).__webglTexture,0),t.bindFramebuffer(t.FRAMEBUFFER,null)}function x(e,n){t.bindRenderbuffer(t.RENDERBUFFER,e),n.depthBuffer&&!n.stencilBuffer?(t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,n.width,n.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,e)):n.depthBuffer&&n.stencilBuffer?(t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,n.width,n.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,e)):t.renderbufferStorage(t.RENDERBUFFER,t.RGBA4,n.width,n.height),t.bindRenderbuffer(t.RENDERBUFFER,null)}function S(e,n){if(n&&n.isWebGLRenderTargetCube)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(t.FRAMEBUFFER,e),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");i.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),y(n.depthTexture,0);var r=i.get(n.depthTexture).__webglTexture;if(n.depthTexture.format===za)t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,r,0);else{if(n.depthTexture.format!==Ga)throw new Error("Unknown depthTexture format");t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,r,0)}}function E(e){var n=i.get(e),r=!0===e.isWebGLRenderTargetCube;if(e.depthTexture){if(r)throw new Error("target.depthTexture not supported in Cube render targets");S(n.__webglFramebuffer,e)}else if(r){n.__webglDepthbuffer=[];for(var o=0;6>o;o++){t.bindFramebuffer(t.FRAMEBUFFER,n.__webglFramebuffer[o]),n.__webglDepthbuffer[o]=t.createRenderbuffer(),x(n.__webglDepthbuffer[o],e)}}else t.bindFramebuffer(t.FRAMEBUFFER,n.__webglFramebuffer),n.__webglDepthbuffer=t.createRenderbuffer(),x(n.__webglDepthbuffer,e);t.bindFramebuffer(t.FRAMEBUFFER,null)}function M(t){var e=t.id,n=a.render.frame;P[e]!==n&&(P[e]=n,t.update())}var T,A="undefined"!=typeof WebGL2RenderingContext&&babelHelpers.instanceof(t,WebGL2RenderingContext),P={};this.setTexture2D=y,this.setTextureCube=function(e,c){var h=i.get(e);if(6===e.image.length)if(0<e.version&&h.__version!==e.version){h.__image__webglTextureCube||(e.addEventListener("dispose",f),h.__image__webglTextureCube=t.createTexture(),a.memory.textures++),n.activeTexture(t.TEXTURE0+c),n.bindTexture(t.TEXTURE_CUBE_MAP,h.__image__webglTextureCube),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e.flipY);for(var d=e&&e.isCompressedTexture,m=e.image[0]&&e.image[0].isDataTexture,_=[],g=0;6>g;g++){_[g]=d||m?m?e.image[g].image:e.image[g]:s(e.image[g],r.maxCubemapSize)}var y=_[0],b=l(y),w=o.convert(e.format),x=o.convert(e.type);for(v(t.TEXTURE_CUBE_MAP,e,b),g=0;6>g;g++){if(d)for(var S,E=_[g].mipmaps,M=0,T=E.length;M<T;M++){S=E[M],e.format!==Na&&e.format!==Fa?-1<n.getCompressedTextureFormats().indexOf(w)?n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+g,M,w,S.width,S.height,0,S.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+g,M,w,S.width,S.height,0,w,x,S.data)}else m?n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+g,0,w,_[g].width,_[g].height,0,w,x,_[g].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+g,0,w,w,x,_[g])}h.__maxMipLevel=d?E.length-1:0,u(e,b)&&p(t.TEXTURE_CUBE_MAP,e,y.width,y.height),h.__version=e.version,e.onUpdate&&e.onUpdate(e)}else n.activeTexture(t.TEXTURE0+c),n.bindTexture(t.TEXTURE_CUBE_MAP,h.__image__webglTextureCube)},this.setTextureCubeDynamic=function(e,r){n.activeTexture(t.TEXTURE0+r),n.bindTexture(t.TEXTURE_CUBE_MAP,i.get(e).__webglTexture)},this.setupRenderTarget=function(e){var r=i.get(e),o=i.get(e.texture);e.addEventListener("dispose",m),o.__webglTexture=t.createTexture(),a.memory.textures++;var s=!0===e.isWebGLRenderTargetCube,c=l(e);if(s)for(r.__webglFramebuffer=[],h=0;6>h;h++){r.__webglFramebuffer[h]=t.createFramebuffer()}else r.__webglFramebuffer=t.createFramebuffer();if(s){n.bindTexture(t.TEXTURE_CUBE_MAP,o.__webglTexture),v(t.TEXTURE_CUBE_MAP,e.texture,c);for(var h=0;6>h;h++){w(r.__webglFramebuffer[h],e,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+h)}u(e.texture,c)&&p(t.TEXTURE_CUBE_MAP,e.texture,e.width,e.height),n.bindTexture(t.TEXTURE_CUBE_MAP,null)}else n.bindTexture(t.TEXTURE_2D,o.__webglTexture),v(t.TEXTURE_2D,e.texture,c),w(r.__webglFramebuffer,e,t.COLOR_ATTACHMENT0,t.TEXTURE_2D),u(e.texture,c)&&p(t.TEXTURE_2D,e.texture,e.width,e.height),n.bindTexture(t.TEXTURE_2D,null);e.depthBuffer&&E(e)},this.updateRenderTargetMipmap=function(e){var r=e.texture;if(u(r,l(e))){var o=e.isWebGLRenderTargetCube?t.TEXTURE_CUBE_MAP:t.TEXTURE_2D,a=i.get(r).__webglTexture;n.bindTexture(o,a),p(o,r,e.width,e.height),n.bindTexture(o,null)}}}function we(t,e){return{convert:function convert(n){var i;if(n===fa)return t.REPEAT;if(n===ma)return t.CLAMP_TO_EDGE;if(n===_a)return t.MIRRORED_REPEAT;if(n===ga)return t.NEAREST;if(n===ya)return t.NEAREST_MIPMAP_NEAREST;if(n===va)return t.NEAREST_MIPMAP_LINEAR;if(n===ba)return t.LINEAR;if(n===wa)return t.LINEAR_MIPMAP_NEAREST;if(n===xa)return t.LINEAR_MIPMAP_LINEAR;if(n===Sa)return t.UNSIGNED_BYTE;if(n===La)return t.UNSIGNED_SHORT_4_4_4_4;if(n===Ra)return t.UNSIGNED_SHORT_5_5_5_1;if(n===Oa)return t.UNSIGNED_SHORT_5_6_5;if(n===Ea)return t.BYTE;if(n===Ma)return t.SHORT;if(n===Ta)return t.UNSIGNED_SHORT;if(n===Aa)return t.INT;if(n===Pa)return t.UNSIGNED_INT;if(n===Ca)return t.FLOAT;if(n===Ia&&null!==(i=e.get("OES_texture_half_float")))return i.HALF_FLOAT_OES;if(n===Da)return t.ALPHA;if(n===Fa)return t.RGB;if(n===Na)return t.RGBA;if(n===Ua)return t.LUMINANCE;if(n===Ba)return t.LUMINANCE_ALPHA;if(n===za)return t.DEPTH_COMPONENT;if(n===Ga)return t.DEPTH_STENCIL;if(n===Co)return t.FUNC_ADD;if(n===Io)return t.FUNC_SUBTRACT;if(n===Lo)return t.FUNC_REVERSE_SUBTRACT;if(n===ko)return t.ZERO;if(n===Do)return t.ONE;if(n===Fo)return t.SRC_COLOR;if(n===No)return t.ONE_MINUS_SRC_COLOR;if(n===Uo)return t.SRC_ALPHA;if(n===Bo)return t.ONE_MINUS_SRC_ALPHA;if(n===zo)return t.DST_ALPHA;if(n===Go)return t.ONE_MINUS_DST_ALPHA;if(n===Ho)return t.DST_COLOR;if(n===jo)return t.ONE_MINUS_DST_COLOR;if(n===Vo)return t.SRC_ALPHA_SATURATE;if((n===Ha||n===ja||n===Va||n===Wa)&&null!==(i=e.get("WEBGL_compressed_texture_s3tc"))){if(n===Ha)return i.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===ja)return i.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===Va)return i.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===Wa)return i.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((n===qa||n===Xa||n===Ya||n===Za)&&null!==(i=e.get("WEBGL_compressed_texture_pvrtc"))){if(n===qa)return i.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===Xa)return i.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===Ya)return i.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===Za)return i.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===Ja&&null!==(i=e.get("WEBGL_compressed_texture_etc1")))return i.COMPRESSED_RGB_ETC1_WEBGL;if((n===Ka||n===Qa||n===$a||n===ts||n===es||n===ns||n===is||n===rs||n===os||n===as||n===ss||n===ls||n===cs||n===hs)&&null!==(i=e.get("WEBGL_compressed_texture_astc")))return n;if((n===Ro||n===Oo)&&null!==(i=e.get("EXT_blend_minmax"))){if(n===Ro)return i.MIN_EXT;if(n===Oo)return i.MAX_EXT}return n===ka&&null!==(i=e.get("WEBGL_depth_texture"))?i.UNSIGNED_INT_24_8_WEBGL:0}}}function xe(t,e,n,i){S.call(this),this.type="PerspectiveCamera",this.fov=void 0!==t?t:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==i?i:2e3,this.focus=10,this.aspect=void 0!==e?e:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function Se(t){xe.call(this),this.cameras=t||[]}function Ee(t){function e(){return null!==r&&!0===r.isPresenting}function n(){if(e()){var n=r.getEyeParameters("left"),o=n.renderWidth,a=n.renderHeight;b=t.getPixelRatio(),v=t.getSize(),t.setDrawingBufferSize(2*o,a,1)}else i.enabled&&t.setDrawingBufferSize(v.width,v.height,b)}var i=this,r=null,l=null,c=null,u=new o,p=new o;"undefined"!=typeof window&&"VRFrameData"in window&&(l=new window.VRFrameData,window.addEventListener("vrdisplaypresentchange",n,!1));var d=new o,f=new a,m=new s,_=new xe;_.bounds=new h(0,0,.5,1),_.layers.enable(1);var g=new xe;g.bounds=new h(.5,0,.5,1),g.layers.enable(2);var y=new Se([_,g]);y.layers.enable(1),y.layers.enable(2);var v,b;this.enabled=!1,this.userHeight=1.6,this.getDevice=function(){return r},this.setDevice=function(t){void 0!==t&&(r=t)},this.setPoseTarget=function(t){void 0!==t&&(c=t)},this.getCamera=function(t){if(null===r)return t;r.depthNear=t.near,r.depthFar=t.far,r.getFrameData(l);var e=r.stageParameters;e?u.fromArray(e.sittingToStandingTransform):u.makeTranslation(0,i.userHeight,0);var n=l.pose,o=null!==c?c:t;if(o.matrix.copy(u),o.matrix.decompose(o.position,o.quaternion,o.scale),null!==n.orientation&&(f.fromArray(n.orientation),o.quaternion.multiply(f)),null!==n.position&&(f.setFromRotationMatrix(u),m.fromArray(n.position),m.applyQuaternion(f),o.position.add(m)),o.updateMatrixWorld(),!1===r.isPresenting)return t;_.near=t.near,g.near=t.near,_.far=t.far,g.far=t.far,y.matrixWorld.copy(t.matrixWorld),y.matrixWorldInverse.copy(t.matrixWorldInverse),_.matrixWorldInverse.fromArray(l.leftViewMatrix),g.matrixWorldInverse.fromArray(l.rightViewMatrix),p.getInverse(u),_.matrixWorldInverse.multiply(p),g.matrixWorldInverse.multiply(p);var a=o.parent;null!==a&&(d.getInverse(a.matrixWorld),_.matrixWorldInverse.multiply(d),g.matrixWorldInverse.multiply(d)),_.matrixWorld.getInverse(_.matrixWorldInverse),g.matrixWorld.getInverse(g.matrixWorldInverse),_.projectionMatrix.fromArray(l.leftProjectionMatrix),g.projectionMatrix.fromArray(l.rightProjectionMatrix),y.projectionMatrix.copy(_.projectionMatrix);var s=r.getLayers();if(s.length){var h=s[0];null!==h.leftBounds&&4===h.leftBounds.length&&_.bounds.fromArray(h.leftBounds),null!==h.rightBounds&&4===h.rightBounds.length&&g.bounds.fromArray(h.rightBounds)}return y},this.getStandingMatrix=function(){return u},this.submitFrame=function(){e()&&r.submitFrame()},this.dispose=function(){"undefined"!=typeof window&&window.removeEventListener("vrdisplaypresentchange",n)}}function Me(t){function e(){return null===ct?wt:1}function n(){(Rt=new et(J)).get("WEBGL_depth_texture"),Rt.get("OES_texture_float"),Rt.get("OES_texture_float_linear"),Rt.get("OES_texture_half_float"),Rt.get("OES_texture_half_float_linear"),Rt.get("OES_standard_derivatives"),Rt.get("OES_element_index_uint"),Rt.get("ANGLE_instanced_arrays"),Jt=new we(J,Rt),Ot=new $(J,Rt,t),(kt=new ve(J,Rt,Jt)).scissor(_t.copy(St).multiplyScalar(wt)),kt.viewport(mt.copy(xt).multiplyScalar(wt)),Dt=new rt(J),Ft=new oe,Nt=new be(J,Rt,kt,Ft,Ot,Jt,Dt),Ut=new v(J),Bt=new nt(J,Ut,Dt),zt=new st(Bt,Dt),qt=new at(J),Gt=new re(ot,Rt,Ot),jt=new ce,Vt=new de,Wt=new K(ot,kt,Bt,W),Xt=new Q(J,Rt,Dt),Yt=new it(J,Rt,Dt),Zt=new ye(ot,J,kt,Nt,Ot),Dt.programs=Gt.programs,ot.context=J,ot.capabilities=Ot,ot.extensions=Rt,ot.properties=Ft,ot.renderLists=jt,ot.state=kt,ot.info=Dt}function i(t){t.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),lt=!0}function r(){console.log("THREE.WebGLRenderer: Context Restored."),lt=!1,n()}function a(t){var e=t.target;e.removeEventListener("dispose",a),l(e)}function l(t){c(t),Ft.remove(t)}function c(t){var e=Ft.get(t).program;t.program=void 0,void 0!==e&&Gt.releaseProgram(e)}function u(t,e,n){t.render(function(t){ot.renderBufferImmediate(t,e,n)})}function p(t,e,n){if(n&&n.isInstancedBufferGeometry&&null===Rt.get("ANGLE_instanced_arrays"))console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");else{kt.initAttributes();var i=n.attributes,r=e.getAttributes(),o=t.defaultAttributeValues;for(var a in r){var s=r[a];if(0<=s){var l=i[a];if(void 0!==l){var c=l.normalized,h=l.itemSize,u=Ut.get(l);if(void 0===u)continue;var p=u.buffer,d=u.type,f=u.bytesPerElement;if(l.isInterleavedBufferAttribute){var m=l.data,_=m.stride,g=l.offset;m&&m.isInstancedInterleavedBuffer?(kt.enableAttributeAndDivisor(s,m.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=m.meshPerAttribute*m.count)):kt.enableAttribute(s),J.bindBuffer(J.ARRAY_BUFFER,p),J.vertexAttribPointer(s,h,d,c,_*f,g*f)}else l.isInstancedBufferAttribute?(kt.enableAttributeAndDivisor(s,l.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=l.meshPerAttribute*l.count)):kt.enableAttribute(s),J.bindBuffer(J.ARRAY_BUFFER,p),J.vertexAttribPointer(s,h,d,c,0,0)}else if(void 0!==o){var y=o[a];if(void 0!==y)switch(y.length){case 2:J.vertexAttrib2fv(s,y);break;case 3:J.vertexAttrib3fv(s,y);break;case 4:J.vertexAttrib4fv(s,y);break;default:J.vertexAttrib1fv(s,y);}}}}kt.disableUnusedAttributes()}}function f(){$t||(_(),$t=!0)}function m(){$t=!1}function _(){var t=Kt.getDevice();t&&t.isPresenting?t.requestAnimationFrame(y):window.requestAnimationFrame(y)}function y(t){!1!==$t&&(te(t),_())}function b(t,e,n){if(!1!==t.visible){if(t.layers.test(e.layers))if(t.isLight)Z.pushLight(t),t.castShadow&&Z.pushShadow(t);else if(t.isSprite)t.frustumCulled&&!Mt.intersectsSprite(t)||Z.pushSprite(t);else if(t.isImmediateRenderObject)n&&It.setFromMatrixPosition(t.matrixWorld).applyMatrix4(Ct),Y.push(t,null,t.material,It.z,null);else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.update(),!t.frustumCulled||Mt.intersectsObject(t))){n&&It.setFromMatrixPosition(t.matrixWorld).applyMatrix4(Ct);var i=zt.update(t),r=t.material;if(Array.isArray(r))for(var o=i.groups,a=0,s=o.length;a<s;a++){var l=o[a],c=r[l.materialIndex];c&&c.visible&&Y.push(t,i,c,It.z,l)}else r.visible&&Y.push(t,i,r,It.z,null)}for(var h=t.children,a=0,s=h.length;a<s;a++){b(h[a],e,n)}}}function w(t,e,n,i){for(var r=0,o=t.length;r<o;r++){var a=t[r],s=a.object,l=a.geometry,c=void 0===i?a.material:i,h=a.group;if(n.isArrayCamera){ft=n;for(var u=n.cameras,p=0,d=u.length,f;p<d;p++){f=u[p];if(s.layers.test(f.layers)){var m=f.bounds,_=m.x*vt,g=m.y*bt,y=m.z*vt,v=m.w*bt;kt.viewport(mt.set(_,g,y,v).multiplyScalar(wt)),x(s,e,f,l,c,h)}}}else ft=null,x(s,e,n,l,c,h)}}function x(t,e,n,i,r,o){if(t.onBeforeRender(ot,e,n,i,r,o),Z=Vt.get(e,ft||n),t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),t.isImmediateRenderObject){var a=t.isMesh&&0>t.matrixWorld.determinant();kt.setMaterial(r,a);var s=E(n,e.fog,r,t);pt="",u(t,s,r)}else ot.renderBufferDirect(n,e.fog,i,r,t,o);t.onAfterRender(ot,e,n,i,r,o),Z=Vt.get(e,ft||n)}function S(t,e,n){var i=Ft.get(t),r=Z.state.lights,o=Z.state.shadowsArray,s=Gt.getParameters(t,r.state,o,e,Tt.numPlanes,Tt.numIntersection,n),l=Gt.getProgramCode(t,s),h=i.program,u=!0;if(void 0===h)t.addEventListener("dispose",a);else if(h.code!==l)c(t);else if(i.lightsHash!==r.state.hash)Ft.update(t,"lightsHash",r.state.hash),u=!1;else{if(void 0!==s.shaderID)return;u=!1}if(u){if(s.shaderID){var p=Ls[s.shaderID];i.shader={name:t.type,uniforms:Ps.clone(p.uniforms),vertexShader:p.vertexShader,fragmentShader:p.fragmentShader}}else i.shader={name:t.type,uniforms:t.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader};t.onBeforeCompile(i.shader,ot),h=Gt.acquireProgram(t,i.shader,s,l),i.program=h,t.program=h}var d=h.getAttributes();if(t.morphTargets){t.numSupportedMorphTargets=0;for(f=0;f<ot.maxMorphTargets;f++){0<=d["morphTarget"+f]&&t.numSupportedMorphTargets++}}if(t.morphNormals){t.numSupportedMorphNormals=0;for(var f=0;f<ot.maxMorphNormals;f++){0<=d["morphNormal"+f]&&t.numSupportedMorphNormals++}}var m=i.shader.uniforms;(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(i.numClippingPlanes=Tt.numPlanes,i.numIntersection=Tt.numIntersection,m.clippingPlanes=Tt.uniform),i.fog=e,i.lightsHash=r.state.hash,t.lights&&(m.ambientLightColor.value=r.state.ambient,m.directionalLights.value=r.state.directional,m.spotLights.value=r.state.spot,m.rectAreaLights.value=r.state.rectArea,m.pointLights.value=r.state.point,m.hemisphereLights.value=r.state.hemi,m.directionalShadowMap.value=r.state.directionalShadowMap,m.directionalShadowMatrix.value=r.state.directionalShadowMatrix,m.spotShadowMap.value=r.state.spotShadowMap,m.spotShadowMatrix.value=r.state.spotShadowMatrix,m.pointShadowMap.value=r.state.pointShadowMap,m.pointShadowMatrix.value=r.state.pointShadowMatrix);var _=i.program.getUniforms(),g=Ht.seqWithValue(_.seq,m);i.uniformsList=g}function E(t,e,n,i){yt=0;var r=Ft.get(n),o=Z.state.lights;if(At&&(Pt||t!==dt)){var a=t===dt&&n.id===ut;Tt.setState(n.clippingPlanes,n.clipIntersection,n.clipShadows,t,r,a)}!1===n.needsUpdate&&(void 0===r.program?n.needsUpdate=!0:n.fog&&r.fog!==e?n.needsUpdate=!0:n.lights&&r.lightsHash!==o.state.hash?n.needsUpdate=!0:void 0===r.numClippingPlanes||r.numClippingPlanes===Tt.numPlanes&&r.numIntersection===Tt.numIntersection||(n.needsUpdate=!0)),n.needsUpdate&&(S(n,e,i),n.needsUpdate=!1);var s=!1,l=!1,c=!1,h=r.program,u=h.getUniforms(),p=r.shader.uniforms;if(kt.useProgram(h.program)&&(s=!0,l=!0,c=!0),n.id!==ut&&(ut=n.id,l=!0),s||t!==dt){if(u.setValue(J,"projectionMatrix",t.projectionMatrix),Ot.logarithmicDepthBuffer&&u.setValue(J,"logDepthBufFC",2/(_Mathlog(t.far+1)/_MathLN)),dt!==(ft||t)&&(dt=ft||t,l=!0,c=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshStandardMaterial||n.envMap){var f=u.map.cameraPosition;void 0!==f&&f.setValue(J,It.setFromMatrixPosition(t.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.skinning)&&u.setValue(J,"viewMatrix",t.matrixWorldInverse)}if(n.skinning){u.setOptional(J,i,"bindMatrix"),u.setOptional(J,i,"bindMatrixInverse");var m=i.skeleton;if(m){var _=m.bones;if(Ot.floatVertexTextures){if(void 0===m.boneTexture){var g=_Mathsqrt(4*_.length);g=Ms.ceilPowerOfTwo(g),g=_Mathmax(g,4);var y=new Float32Array(4*(g*g));y.set(m.boneMatrices);var v=new d(y,g,g,Na,Ca);v.needsUpdate=!0,m.boneMatrices=y,m.boneTexture=v,m.boneTextureSize=g}u.setValue(J,"boneTexture",m.boneTexture),u.setValue(J,"boneTextureSize",m.boneTextureSize)}else u.setOptional(J,m,"boneMatrices")}}return l&&(u.setValue(J,"toneMappingExposure",ot.toneMappingExposure),u.setValue(J,"toneMappingWhitePoint",ot.toneMappingWhitePoint),n.lights&&U(p,c),e&&n.fog&&C(p,e),n.isMeshBasicMaterial?M(p,n):n.isMeshLambertMaterial?(M(p,n),I(p,n)):n.isMeshPhongMaterial?(M(p,n),n.isMeshToonMaterial?R(p,n):L(p,n)):n.isMeshStandardMaterial?(M(p,n),n.isMeshPhysicalMaterial?k(p,n):O(p,n)):n.isMeshDepthMaterial?(M(p,n),D(p,n)):n.isMeshDistanceMaterial?(M(p,n),F(p,n)):n.isMeshNormalMaterial?(M(p,n),N(p,n)):n.isLineBasicMaterial?(T(p,n),n.isLineDashedMaterial&&A(p,n)):n.isPointsMaterial?P(p,n):n.isShadowMaterial&&(p.color.value=n.color,p.opacity.value=n.opacity),void 0!==p.ltc_1&&(p.ltc_1.value=Is.LTC_1),void 0!==p.ltc_2&&(p.ltc_2.value=Is.LTC_2),Ht.upload(J,r.uniformsList,p,ot)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(Ht.upload(J,r.uniformsList,p,ot),n.uniformsNeedUpdate=!1),u.setValue(J,"modelViewMatrix",i.modelViewMatrix),u.setValue(J,"normalMatrix",i.normalMatrix),u.setValue(J,"modelMatrix",i.matrixWorld),h}function M(t,e){t.opacity.value=e.opacity,e.color&&(t.diffuse.value=e.color),e.emissive&&t.emissive.value.copy(e.emissive).multiplyScalar(e.emissiveIntensity),e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.specularMap&&(t.specularMap.value=e.specularMap),e.envMap&&(t.envMap.value=e.envMap,t.flipEnvMap.value=e.envMap&&e.envMap.isCubeTexture?-1:1,t.reflectivity.value=e.reflectivity,t.refractionRatio.value=e.refractionRatio,t.maxMipLevel.value=Ft.get(e.envMap).__maxMipLevel),e.lightMap&&(t.lightMap.value=e.lightMap,t.lightMapIntensity.value=e.lightMapIntensity),e.aoMap&&(t.aoMap.value=e.aoMap,t.aoMapIntensity.value=e.aoMapIntensity);var n;e.map?n=e.map:e.specularMap?n=e.specularMap:e.displacementMap?n=e.displacementMap:e.normalMap?n=e.normalMap:e.bumpMap?n=e.bumpMap:e.roughnessMap?n=e.roughnessMap:e.metalnessMap?n=e.metalnessMap:e.alphaMap?n=e.alphaMap:e.emissiveMap&&(n=e.emissiveMap),void 0!==n&&(n.isWebGLRenderTarget&&(n=n.texture),!0===n.matrixAutoUpdate&&n.updateMatrix(),t.uvTransform.value.copy(n.matrix))}function T(t,e){t.diffuse.value=e.color,t.opacity.value=e.opacity}function A(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}function P(t,e){t.diffuse.value=e.color,t.opacity.value=e.opacity,t.size.value=e.size*wt,t.scale.value=.5*bt,t.map.value=e.map,null!==e.map&&(!0===e.map.matrixAutoUpdate&&e.map.updateMatrix(),t.uvTransform.value.copy(e.map.matrix))}function C(t,e){t.fogColor.value=e.color,e.isFog?(t.fogNear.value=e.near,t.fogFar.value=e.far):e.isFogExp2&&(t.fogDensity.value=e.density)}function I(t,e){e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap)}function L(t,e){t.specular.value=e.specular,t.shininess.value=_Mathmax(e.shininess,1e-4),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale)),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function R(t,e){L(t,e),e.gradientMap&&(t.gradientMap.value=e.gradientMap)}function O(t,e){t.roughness.value=e.roughness,t.metalness.value=e.metalness,e.roughnessMap&&(t.roughnessMap.value=e.roughnessMap),e.metalnessMap&&(t.metalnessMap.value=e.metalnessMap),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale)),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),e.envMap&&(t.envMapIntensity.value=e.envMapIntensity)}function k(t,e){t.clearCoat.value=e.clearCoat,t.clearCoatRoughness.value=e.clearCoatRoughness,O(t,e)}function D(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function F(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),t.referencePosition.value.copy(e.referencePosition),t.nearDistance.value=e.nearDistance,t.farDistance.value=e.farDistance}function N(t,e){e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale)),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function U(t,e){t.ambientLightColor.needsUpdate=e,t.directionalLights.needsUpdate=e,t.pointLights.needsUpdate=e,t.spotLights.needsUpdate=e,t.rectAreaLights.needsUpdate=e,t.hemisphereLights.needsUpdate=e}console.log("THREE.WebGLRenderer",ho);var B=void 0!==(t=t||{}).canvas?t.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),z=void 0!==t.context?t.context:null,G=void 0!==t.alpha&&t.alpha,H=void 0===t.depth||t.depth,j=void 0===t.stencil||t.stencil,V=void 0!==t.antialias&&t.antialias,W=void 0===t.premultipliedAlpha||t.premultipliedAlpha,q=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,X=void 0!==t.powerPreference?t.powerPreference:"default",Y=null,Z=null;this.domElement=B,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=ia,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var J,ot=this,lt=!1,ct=null,ht=null,ut=-1,pt="",dt=null,ft=null,mt=new h,_t=new h,gt=null,yt=0,vt=B.width,bt=B.height,wt=1,xt=new h(0,0,vt,bt),St=new h(0,0,vt,bt),Et=!1,Mt=new g,Tt=new tt,At=!1,Pt=!1,Ct=new o,It=new s;try{var Lt={alpha:G,depth:H,stencil:j,antialias:V,premultipliedAlpha:W,preserveDrawingBuffer:q,powerPreference:X};if(B.addEventListener("webglcontextlost",i,!1),B.addEventListener("webglcontextrestored",r,!1),null===(J=z||B.getContext("webgl",Lt)||B.getContext("experimental-webgl",Lt)))throw null!==B.getContext("webgl")?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");void 0===J.getShaderPrecisionFormat&&(J.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(t){console.error("THREE.WebGLRenderer: "+t.message)}var Rt,Ot,kt,Dt,Ft,Nt,Ut,Bt,zt,Gt,jt,Vt,Wt,qt,Xt,Yt,Zt,Jt;n();var Kt=new Ee(ot);this.vr=Kt;var Qt=new _e(ot,zt,Ot.maxTextureSize);this.shadowMap=Qt,this.getContext=function(){return J},this.getContextAttributes=function(){return J.getContextAttributes()},this.forceContextLoss=function(){var t=Rt.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){var t=Rt.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return wt},this.setPixelRatio=function(t){void 0!==t&&(wt=t,this.setSize(vt,bt,!1))},this.getSize=function(){return{width:vt,height:bt}},this.setSize=function(t,e,n){var i=Kt.getDevice();i&&i.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(vt=t,bt=e,B.width=t*wt,B.height=e*wt,!1!==n&&(B.style.width=t+"px",B.style.height=e+"px"),this.setViewport(0,0,t,e))},this.getDrawingBufferSize=function(){return{width:vt*wt,height:bt*wt}},this.setDrawingBufferSize=function(t,e,n){vt=t,bt=e,wt=n,B.width=t*n,B.height=e*n,this.setViewport(0,0,t,e)},this.getCurrentViewport=function(){return mt},this.setViewport=function(t,e,n,i){xt.set(t,bt-e-i,n,i),kt.viewport(mt.copy(xt).multiplyScalar(wt))},this.setScissor=function(t,e,n,i){St.set(t,bt-e-i,n,i),kt.scissor(_t.copy(St).multiplyScalar(wt))},this.setScissorTest=function(t){kt.setScissorTest(Et=t)},this.getClearColor=function(){return Wt.getClearColor()},this.setClearColor=function(){Wt.setClearColor.apply(Wt,arguments)},this.getClearAlpha=function(){return Wt.getClearAlpha()},this.setClearAlpha=function(){Wt.setClearAlpha.apply(Wt,arguments)},this.clear=function(t,e,n){var i=0;(void 0===t||t)&&(i|=J.COLOR_BUFFER_BIT),(void 0===e||e)&&(i|=J.DEPTH_BUFFER_BIT),(void 0===n||n)&&(i|=J.STENCIL_BUFFER_BIT),J.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(t,e,n,i){this.setRenderTarget(t),this.clear(e,n,i)},this.dispose=function(){B.removeEventListener("webglcontextlost",i,!1),B.removeEventListener("webglcontextrestored",r,!1),jt.dispose(),Vt.dispose(),Ft.dispose(),zt.dispose(),Kt.dispose(),m()},this.renderBufferImmediate=function(t,e,n){kt.initAttributes();var i=Ft.get(t);t.hasPositions&&!i.position&&(i.position=J.createBuffer()),t.hasNormals&&!i.normal&&(i.normal=J.createBuffer()),t.hasUvs&&!i.uv&&(i.uv=J.createBuffer()),t.hasColors&&!i.color&&(i.color=J.createBuffer());var r=e.getAttributes();if(t.hasPositions&&(J.bindBuffer(J.ARRAY_BUFFER,i.position),J.bufferData(J.ARRAY_BUFFER,t.positionArray,J.DYNAMIC_DRAW),kt.enableAttribute(r.position),J.vertexAttribPointer(r.position,3,J.FLOAT,!1,0,0)),t.hasNormals){if(J.bindBuffer(J.ARRAY_BUFFER,i.normal),!n.isMeshPhongMaterial&&!n.isMeshStandardMaterial&&!n.isMeshNormalMaterial&&!0===n.flatShading)for(var o=0,a=3*t.count;o<a;o+=9){var s=t.normalArray,l=(s[o+0]+s[o+3]+s[o+6])/3,c=(s[o+1]+s[o+4]+s[o+7])/3,h=(s[o+2]+s[o+5]+s[o+8])/3;s[o+0]=l,s[o+1]=c,s[o+2]=h,s[o+3]=l,s[o+4]=c,s[o+5]=h,s[o+6]=l,s[o+7]=c,s[o+8]=h}J.bufferData(J.ARRAY_BUFFER,t.normalArray,J.DYNAMIC_DRAW),kt.enableAttribute(r.normal),J.vertexAttribPointer(r.normal,3,J.FLOAT,!1,0,0)}t.hasUvs&&n.map&&(J.bindBuffer(J.ARRAY_BUFFER,i.uv),J.bufferData(J.ARRAY_BUFFER,t.uvArray,J.DYNAMIC_DRAW),kt.enableAttribute(r.uv),J.vertexAttribPointer(r.uv,2,J.FLOAT,!1,0,0)),t.hasColors&&n.vertexColors!==bo&&(J.bindBuffer(J.ARRAY_BUFFER,i.color),J.bufferData(J.ARRAY_BUFFER,t.colorArray,J.DYNAMIC_DRAW),kt.enableAttribute(r.color),J.vertexAttribPointer(r.color,3,J.FLOAT,!1,0,0)),kt.disableUnusedAttributes(),J.drawArrays(J.TRIANGLES,0,t.count),t.count=0},this.renderBufferDirect=function(t,n,i,r,o,a){var s=o.isMesh&&0>o.matrixWorld.determinant();kt.setMaterial(r,s);var l=E(t,n,r,o),c=i.id+"_"+l.id+"_"+(!0===r.wireframe),h=!1;c!==pt&&(pt=c,h=!0),o.morphTargetInfluences&&(qt.update(o,i,r,l),h=!0);var u=i.index,d=i.attributes.position,f=1;!0===r.wireframe&&(u=Bt.getWireframeAttribute(i),f=2);var m,_=Xt;null!==u&&(m=Ut.get(u),(_=Yt).setIndex(m)),h&&(p(r,l,i),null!==u&&J.bindBuffer(J.ELEMENT_ARRAY_BUFFER,m.buffer));var g=1/0;null!==u?g=u.count:void 0!==d&&(g=d.count);var y=i.drawRange.start*f,v=i.drawRange.count*f,b=null!==a?a.start*f:0,w=null!==a?a.count*f:1/0,x=_Mathmax(y,b),S=_Mathmin(g,y+v,b+w)-1,M=_Mathmax(0,S-x+1);if(0!==M){if(o.isMesh){if(!0===r.wireframe)kt.setLineWidth(r.wireframeLinewidth*e()),_.setMode(J.LINES);else switch(o.drawMode){case ds:_.setMode(J.TRIANGLES);break;case fs:_.setMode(J.TRIANGLE_STRIP);break;case ms:_.setMode(J.TRIANGLE_FAN);}}else if(o.isLine){var T=r.linewidth;void 0===T&&(T=1),kt.setLineWidth(T*e()),o.isLineSegments?_.setMode(J.LINES):o.isLineLoop?_.setMode(J.LINE_LOOP):_.setMode(J.LINE_STRIP)}else o.isPoints&&_.setMode(J.POINTS);i&&i.isInstancedBufferGeometry?0<i.maxInstancedCount&&_.renderInstances(i,x,M):_.render(x,M)}},this.compile=function(t,e){(Z=Vt.get(t,e)).init(),t.traverse(function(t){t.isLight&&(Z.pushLight(t),t.castShadow&&Z.pushShadow(t))}),Z.setupLights(e),t.traverse(function(e){if(e.material)if(Array.isArray(e.material))for(var n=0;n<e.material.length;n++){S(e.material[n],t.fog,e)}else S(e.material,t.fog,e)})};var $t=!1,te=null;this.animate=function(t){null!==(te=t)?f():m()},this.render=function(t,e,n,i){if(e&&e.isCamera){if(!lt){pt="",ut=-1,dt=null,!0===t.autoUpdate&&t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),Kt.enabled&&(e=Kt.getCamera(e)),(Z=Vt.get(t,e)).init(),t.onBeforeRender(ot,t,e,n),Ct.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),Mt.setFromMatrix(Ct),Pt=this.localClippingEnabled,At=Tt.init(this.clippingPlanes,Pt,e),(Y=jt.get(t,e)).init(),b(t,e,ot.sortObjects),!0===ot.sortObjects&&Y.sort(),At&&Tt.beginShadows();var r=Z.state.shadowsArray;Qt.render(r,t,e),Z.setupLights(e),At&&Tt.endShadows(),this.info.autoReset&&this.info.reset(),void 0===n&&(n=null),this.setRenderTarget(n),Wt.render(Y,t,e,i);var o=Y.opaque,a=Y.transparent;if(t.overrideMaterial){var s=t.overrideMaterial;o.length&&w(o,t,e,s),a.length&&w(a,t,e,s)}else o.length&&w(o,t,e),a.length&&w(a,t,e);var l=Z.state.spritesArray;Zt.render(l,t,e),n&&Nt.updateRenderTargetMipmap(n),kt.buffers.depth.setTest(!0),kt.buffers.depth.setMask(!0),kt.buffers.color.setMask(!0),kt.setPolygonOffset(!1),t.onAfterRender(ot,t,e),Kt.enabled&&Kt.submitFrame(),Y=null,Z=null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.allocTextureUnit=function(){var t=yt;return t>=Ot.maxTextures&&console.warn("THREE.WebGLRenderer: Trying to use "+t+" texture units while this GPU supports only "+Ot.maxTextures),yt+=1,t},this.setTexture2D=function(){var t=!1;return function(e,n){e&&e.isWebGLRenderTarget&&(t||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),t=!0),e=e.texture),Nt.setTexture2D(e,n)}}(),this.setTexture=function(){var t=!1;return function(e,n){t||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),t=!0),Nt.setTexture2D(e,n)}}(),this.setTextureCube=function(){var t=!1;return function(e,n){e&&e.isWebGLRenderTargetCube&&(t||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),t=!0),e=e.texture),e&&e.isCubeTexture||Array.isArray(e.image)&&6===e.image.length?Nt.setTextureCube(e,n):Nt.setTextureCubeDynamic(e,n)}}(),this.getRenderTarget=function(){return ct},this.setRenderTarget=function(t){ct=t,t&&void 0===Ft.get(t).__webglFramebuffer&&Nt.setupRenderTarget(t);var e=null,n=!1;if(t){var i=Ft.get(t).__webglFramebuffer;t.isWebGLRenderTargetCube?(e=i[t.activeCubeFace],n=!0):e=i,mt.copy(t.viewport),_t.copy(t.scissor),gt=t.scissorTest}else mt.copy(xt).multiplyScalar(wt),_t.copy(St).multiplyScalar(wt),gt=Et;if(ht!==e&&(J.bindFramebuffer(J.FRAMEBUFFER,e),ht=e),kt.viewport(mt),kt.scissor(_t),kt.setScissorTest(gt),n){var r=Ft.get(t.texture);J.framebufferTexture2D(J.FRAMEBUFFER,J.COLOR_ATTACHMENT0,J.TEXTURE_CUBE_MAP_POSITIVE_X+t.activeCubeFace,r.__webglTexture,t.activeMipMapLevel)}},this.readRenderTargetPixels=function(t,e,n,i,r,o){if(t&&t.isWebGLRenderTarget){var a=Ft.get(t).__webglFramebuffer;if(a){var s=!1;a!==ht&&(J.bindFramebuffer(J.FRAMEBUFFER,a),s=!0);try{var l=t.texture,c=l.format,h=l.type;if(c!==Na&&Jt.convert(c)!==J.getParameter(J.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(h===Sa||Jt.convert(h)===J.getParameter(J.IMPLEMENTATION_COLOR_READ_TYPE)||h===Ca&&(Rt.get("OES_texture_float")||Rt.get("WEBGL_color_buffer_float"))||h===Ia&&Rt.get("EXT_color_buffer_half_float")))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");J.checkFramebufferStatus(J.FRAMEBUFFER)===J.FRAMEBUFFER_COMPLETE?0<=e&&e<=t.width-i&&0<=n&&n<=t.height-r&&J.readPixels(e,n,i,r,Jt.convert(c),Jt.convert(h),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{s&&J.bindFramebuffer(J.FRAMEBUFFER,ht)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(t,e,n){var i=e.image.width,r=e.image.height,o=Jt.convert(e.format);this.setTexture2D(e,0),J.copyTexImage2D(J.TEXTURE_2D,n||0,o,t.x,t.y,i,r,0)},this.copyTextureToTexture=function(t,e,n,i){var r=e.image.width,o=e.image.height,a=Jt.convert(n.format),s=Jt.convert(n.type),l=e.isDataTexture?e.image.data:e.image;this.setTexture2D(n,0),J.texSubImage2D(J.TEXTURE_2D,i||0,t.x,t.y,r,o,a,s,l)}}function Te(t,e){this.name="",this.color=new y(t),this.density=void 0!==e?e:25e-5}function Ae(t,e,n){this.name="",this.color=new y(t),this.near=void 0!==e?e:1,this.far=void 0!==n?n:1e3}function Pe(){x.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}function Ce(t){V.call(this),this.type="SpriteMaterial",this.color=new y(16777215),this.map=null,this.rotation=0,this.fog=!1,this.lights=!1,this.setValues(t)}function Ie(t){x.call(this),this.type="Sprite",this.material=void 0!==t?t:new Ce,this.center=new r(.5,.5)}function Le(){x.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function Re(t,e){if(t=t||[],this.bones=t.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),void 0===e)this.calculateInverses();else if(this.bones.length===e.length)this.boneInverses=e.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var n=0,i=this.bones.length;n<i;n++){this.boneInverses.push(new o)}}}function Oe(){x.call(this),this.type="Bone"}function ke(t,e){J.call(this,t,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new o,this.bindMatrixInverse=new o;var n=new Re(this.initBones());this.bind(n,this.matrixWorld),this.normalizeSkinWeights()}function De(t){V.call(this),this.type="LineBasicMaterial",this.color=new y(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(t)}function Fe(t,e,n){if(1===n)return console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new Ne(t,e);x.call(this),this.type="Line",this.geometry=void 0!==t?t:new B,this.material=void 0!==e?e:new De({color:16777215*Math.random()})}function Ne(t,e){Fe.call(this,t,e),this.type="LineSegments"}function Ue(t,e){Fe.call(this,t,e),this.type="LineLoop"}function Be(t){V.call(this),this.type="PointsMaterial",this.color=new y(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.lights=!1,this.setValues(t)}function ze(t,e){x.call(this),this.type="Points",this.geometry=void 0!==t?t:new B,this.material=void 0!==e?e:new Be({color:16777215*Math.random()})}function Ge(){x.call(this),this.type="Group"}function He(t,e,n,i,r,o,a,s,l){c.call(this,t,e,n,i,r,o,a,s,l),this.generateMipmaps=!1}function je(t,e,n,i,r,o,a,s,l,h,u,p){c.call(this,null,o,a,s,l,h,i,r,u,p),this.image={width:e,height:n},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}function Ve(t,e,n,i,r,o,a,s,l,h){if((h=void 0!==h?h:za)!==za&&h!==Ga)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&h===za&&(n=Ta),void 0===n&&h===Ga&&(n=ka),c.call(this,null,i,r,o,a,s,h,n,l),this.image={width:t,height:e},this.magFilter=void 0!==a?a:ga,this.minFilter=void 0!==s?s:ga,this.flipY=!1,this.generateMipmaps=!1}function We(t){B.call(this),this.type="WireframeGeometry";var e,n,i,r,o,a,l,c,h,u,p=[],d=[0,0],f={},m=["a","b","c"];if(t&&t.isGeometry){var _=t.faces;for(e=0,i=_.length;e<i;e++){var g=_[e];for(n=0;3>n;n++){l=g[m[n]],c=g[m[(n+1)%3]],d[0]=_Mathmin(l,c),d[1]=_Mathmax(l,c),void 0===f[h=d[0]+","+d[1]]&&(f[h]={index1:d[0],index2:d[1]})}}for(h in f){a=f[h],u=t.vertices[a.index1],p.push(u.x,u.y,u.z),u=t.vertices[a.index2],p.push(u.x,u.y,u.z)}}else if(t&&t.isBufferGeometry){var y,v,b,w,x,S,E;if(u=new s,null!==t.index){for(y=t.attributes.position,v=t.index,0===(b=t.groups).length&&(b=[{start:0,count:v.count,materialIndex:0}]),r=0,o=b.length;r<o;++r){for(e=x=(w=b[r]).start,i=x+w.count;e<i;e+=3){for(n=0;3>n;n++){l=v.getX(e+n),c=v.getX(e+(n+1)%3),d[0]=_Mathmin(l,c),d[1]=_Mathmax(l,c),void 0===f[h=d[0]+","+d[1]]&&(f[h]={index1:d[0],index2:d[1]})}}}for(h in f){a=f[h],u.fromBufferAttribute(y,a.index1),p.push(u.x,u.y,u.z),u.fromBufferAttribute(y,a.index2),p.push(u.x,u.y,u.z)}}else for(e=0,i=(y=t.attributes.position).count/3;e<i;e++){for(n=0;3>n;n++){S=3*e+n,u.fromBufferAttribute(y,S),p.push(u.x,u.y,u.z),E=3*e+(n+1)%3,u.fromBufferAttribute(y,E),p.push(u.x,u.y,u.z)}}}this.addAttribute("position",new D(p,3))}function qe(t,e,n){T.call(this),this.type="ParametricGeometry",this.parameters={func:t,slices:e,stacks:n},this.fromBufferGeometry(new Xe(t,e,n)),this.mergeVertices()}function Xe(t,e,n){B.call(this),this.type="ParametricBufferGeometry",this.parameters={func:t,slices:e,stacks:n};var i,r,o=[],a=[],l=[],c=[],h=new s,u=new s,p=new s,d=new s,f=new s,m=e+1;for(i=0;i<=n;i++){var _=i/n;for(r=0;r<=e;r++){var g=r/e;t(g,_,u),a.push(u.x,u.y,u.z),0<=g-1e-5?(t(g-1e-5,_,p),d.subVectors(u,p)):(t(g+1e-5,_,p),d.subVectors(p,u)),0<=_-1e-5?(t(g,_-1e-5,p),f.subVectors(u,p)):(t(g,_+1e-5,p),f.subVectors(p,u)),h.crossVectors(d,f).normalize(),l.push(h.x,h.y,h.z),c.push(g,_)}}for(i=0;i<n;i++){for(r=0;r<e;r++){var y=i*m+r,v=i*m+r+1,b=(i+1)*m+r+1,w=(i+1)*m+r;o.push(y,v,w),o.push(v,b,w)}}this.setIndex(o),this.addAttribute("position",new D(a,3)),this.addAttribute("normal",new D(l,3)),this.addAttribute("uv",new D(c,2))}function Ye(t,e,n,i){T.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:i},this.fromBufferGeometry(new Ze(t,e,n,i)),this.mergeVertices()}function Ze(t,e,n,i){function o(t,e,n,i){var r,o,a=_Mathpow(2,i),s=[];for(r=0;r<=a;r++){s[r]=[];var c=t.clone().lerp(n,r/a),h=e.clone().lerp(n,r/a),u=a-r;for(o=0;o<=u;o++){s[r][o]=0===o&&r===a?c:c.clone().lerp(h,o/u)}}for(r=0;r<a;r++){for(o=0;o<2*(a-r)-1;o++){var p=_Mathfloor(o/2);0==o%2?(l(s[r][p+1]),l(s[r+1][p]),l(s[r][p])):(l(s[r][p+1]),l(s[r+1][p+1]),l(s[r+1][p]))}}}function a(){for(var t=0;t<m.length;t+=6){var e=m[t+0],n=m[t+2],i=m[t+4],r=_Mathmax(e,n,i),o=_Mathmin(e,n,i);.9<r&&.1>o&&(.2>e&&(m[t+0]+=1),.2>n&&(m[t+2]+=1),.2>i&&(m[t+4]+=1))}}function l(t){f.push(t.x,t.y,t.z)}function c(e,n){var i=3*e;n.x=t[i+0],n.y=t[i+1],n.z=t[i+2]}function h(){for(var t=new s,e=new s,n=new s,i=new s,o=new r,a=new r,l=new r,c=0,h=0;c<f.length;c+=9,h+=6){t.set(f[c+0],f[c+1],f[c+2]),e.set(f[c+3],f[c+4],f[c+5]),n.set(f[c+6],f[c+7],f[c+8]),o.set(m[h+0],m[h+1]),a.set(m[h+2],m[h+3]),l.set(m[h+4],m[h+5]),i.copy(t).add(e).add(n).divideScalar(3);var d=p(i);u(o,h+0,t,d),u(a,h+2,e,d),u(l,h+4,n,d)}}function u(t,e,n,i){0>i&&1===t.x&&(m[e]=t.x-1),0===n.x&&0===n.z&&(m[e]=i/2/_MathPI+.5)}function p(t){return _Mathatan(t.z,-t.x)}function d(t){return _Mathatan(-t.y,_Mathsqrt(t.x*t.x+t.z*t.z))}B.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:i},n=n||1;var f=[],m=[];!function(t){for(var n=new s,i=new s,r=new s,a=0;a<e.length;a+=3){c(e[a+0],n),c(e[a+1],i),c(e[a+2],r),o(n,i,r,t)}}(i=i||0),function(t){for(var e=new s,n=0;n<f.length;n+=3){e.x=f[n+0],e.y=f[n+1],e.z=f[n+2],e.normalize().multiplyScalar(t),f[n+0]=e.x,f[n+1]=e.y,f[n+2]=e.z}}(n),function(){for(var t=new s,e=0;e<f.length;e+=3){t.x=f[e+0],t.y=f[e+1],t.z=f[e+2];var n=p(t)/2/_MathPI+.5,i=d(t)/_MathPI+.5;m.push(n,1-i)}h(),a()}(),this.addAttribute("position",new D(f,3)),this.addAttribute("normal",new D(f.slice(),3)),this.addAttribute("uv",new D(m,2)),0===i?this.computeVertexNormals():this.normalizeNormals()}function Je(t,e){T.call(this),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Ke(t,e)),this.mergeVertices()}function Ke(t,e){Ze.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],t,e),this.type="TetrahedronBufferGeometry",this.parameters={radius:t,detail:e}}function Qe(t,e){T.call(this),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new $e(t,e)),this.mergeVertices()}function $e(t,e){Ze.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],t,e),this.type="OctahedronBufferGeometry",this.parameters={radius:t,detail:e}}function tn(t,e){T.call(this),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new en(t,e)),this.mergeVertices()}function en(t,e){var n=(1+2.23606797749979)/2;Ze.call(this,[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],t,e),this.type="IcosahedronBufferGeometry",this.parameters={radius:t,detail:e}}function nn(t,e){T.call(this),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new rn(t,e)),this.mergeVertices()}function rn(t,e){var n=(1+2.23606797749979)/2,i=1/n;Ze.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],t,e),this.type="DodecahedronBufferGeometry",this.parameters={radius:t,detail:e}}function on(t,e,n,i,r,o){T.call(this),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:i,closed:r},void 0!==o&&console.warn("THREE.TubeGeometry: taper has been removed.");var a=new an(t,e,n,i,r);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals,this.fromBufferGeometry(a),this.mergeVertices()}function an(t,e,n,i,o){function a(r){_=t.getPointAt(r/e,_);var o=h.normals[r],a=h.binormals[r];for(p=0;p<=i;p++){var s=2*(p/i*_MathPI),l=_Mathsin(s),c=-_Mathcos(s);f.x=c*o.x+l*a.x,f.y=c*o.y+l*a.y,f.z=c*o.z+l*a.z,f.normalize(),y.push(f.x,f.y,f.z),d.x=_.x+n*f.x,d.y=_.y+n*f.y,d.z=_.z+n*f.z,g.push(d.x,d.y,d.z)}}function l(){for(p=1;p<=e;p++){for(u=1;u<=i;u++){var t=(i+1)*(p-1)+(u-1),n=(i+1)*p+(u-1),r=(i+1)*p+u,o=(i+1)*(p-1)+u;b.push(t,n,o),b.push(n,r,o)}}}function c(){for(u=0;u<=e;u++){for(p=0;p<=i;p++){m.x=u/e,m.y=p/i,v.push(m.x,m.y)}}}B.call(this),this.type="TubeBufferGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:i,closed:o},e=e||64,n=n||1,i=i||8,o=o||!1;var h=t.computeFrenetFrames(e,o);this.tangents=h.tangents,this.normals=h.normals,this.binormals=h.binormals;var u,p,d=new s,f=new s,m=new r,_=new s,g=[],y=[],v=[],b=[];!function(){for(u=0;u<e;u++){a(u)}a(!1===o?e:0),c(),l()}(),this.setIndex(b),this.addAttribute("position",new D(g,3)),this.addAttribute("normal",new D(y,3)),this.addAttribute("uv",new D(v,2))}function sn(t,e,n,i,r,o,a){T.call(this),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:i,p:r,q:o},void 0!==a&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new ln(t,e,n,i,r,o)),this.mergeVertices()}function ln(t,e,n,i,r,o){function a(t,e,n,i,r){var o=_Mathcos(t),a=_Mathsin(t),s=n/e*t,l=_Mathcos(s);r.x=.5*(i*(2+l))*o,r.y=.5*(i*(2+l)*a),r.z=.5*(i*_Mathsin(s))}B.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:i,p:r,q:o},t=t||1,e=e||.4,n=_Mathfloor(n)||64,i=_Mathfloor(i)||8,r=r||2,o=o||3;var l,c,h=[],u=[],p=[],d=[],f=new s,m=new s,_=new s,g=new s,y=new s,v=new s,b=new s;for(l=0;l<=n;++l){var w=2*(l/n*r*_MathPI);for(a(w,r,o,t,_),a(w+.01,r,o,t,g),v.subVectors(g,_),b.addVectors(g,_),y.crossVectors(v,b),b.crossVectors(y,v),y.normalize(),b.normalize(),c=0;c<=i;++c){var x=2*(c/i*_MathPI),S=-e*_Mathcos(x),E=e*_Mathsin(x);f.x=_.x+(S*b.x+E*y.x),f.y=_.y+(S*b.y+E*y.y),f.z=_.z+(S*b.z+E*y.z),u.push(f.x,f.y,f.z),m.subVectors(f,_).normalize(),p.push(m.x,m.y,m.z),d.push(l/n),d.push(c/i)}}for(c=1;c<=n;c++){for(l=1;l<=i;l++){var M=(i+1)*(c-1)+(l-1),T=(i+1)*c+(l-1),A=(i+1)*c+l,P=(i+1)*(c-1)+l;h.push(M,T,P),h.push(T,A,P)}}this.setIndex(h),this.addAttribute("position",new D(u,3)),this.addAttribute("normal",new D(p,3)),this.addAttribute("uv",new D(d,2))}function cn(t,e,n,i,r){T.call(this),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:i,arc:r},this.fromBufferGeometry(new hn(t,e,n,i,r)),this.mergeVertices()}function hn(t,e,n,i,r){B.call(this),this.type="TorusBufferGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:i,arc:r},t=t||1,e=e||.4,n=_Mathfloor(n)||8,i=_Mathfloor(i)||6,r=r||2*_MathPI;var o,a,l=[],c=[],h=[],u=[],p=new s,d=new s,f=new s;for(o=0;o<=n;o++){for(a=0;a<=i;a++){var m=a/i*r,_=2*(o/n*_MathPI);d.x=(t+e*_Mathcos(_))*_Mathcos(m),d.y=(t+e*_Mathcos(_))*_Mathsin(m),d.z=e*_Mathsin(_),c.push(d.x,d.y,d.z),p.x=t*_Mathcos(m),p.y=t*_Mathsin(m),f.subVectors(d,p).normalize(),h.push(f.x,f.y,f.z),u.push(a/i),u.push(o/n)}}for(o=1;o<=n;o++){for(a=1;a<=i;a++){var g=(i+1)*o+a-1,y=(i+1)*(o-1)+a-1,v=(i+1)*(o-1)+a,b=(i+1)*o+a;l.push(g,y,b),l.push(y,v,b)}}this.setIndex(l),this.addAttribute("position",new D(c,3)),this.addAttribute("normal",new D(h,3)),this.addAttribute("uv",new D(u,2))}function un(t,e,n,i,r){var o,a;if(r===0<Un(t,e,n,i))for(o=e;o<n;o+=i){a=Dn(o,t[o],t[o+1],a)}else for(o=n-i;o>=e;o-=i){a=Dn(o,t[o],t[o+1],a)}return a&&Cn(a,a.next)&&(Fn(a),a=a.next),a}function pn(t,e){if(!t)return t;e||(e=t);var n,i=t;do{if(n=!1,i.steiner||!Cn(i,i.next)&&0!==Pn(i.prev,i,i.next))i=i.next;else{if(Fn(i),(i=e=i.prev)===i.next)break;n=!0}}while(n||i!==e);return e}function dn(t,e,n,i,r,o,a){if(t){!a&&o&&xn(t,i,r,o);for(var s,l,c=t;t.prev!==t.next;){if(s=t.prev,l=t.next,o?mn(t,i,r,o):fn(t))e.push(s.i/n),e.push(t.i/n),e.push(l.i/n),Fn(t),t=l.next,c=l.next;else if((t=l)===c){a?1===a?dn(t=_n(t,e,n),e,n,i,r,o,2):2===a&&gn(t,e,n,i,r,o):dn(pn(t),e,n,i,r,o,1);break}}}}function fn(t){var e=t.prev,n=t,i=t.next;if(0<=Pn(e,n,i))return!1;for(var r=t.next.next;r!==t.prev;){if(Tn(e.x,e.y,n.x,n.y,i.x,i.y,r.x,r.y)&&0<=Pn(r.prev,r,r.next))return!1;r=r.next}return!0}function mn(t,e,n,i){var r=t.prev,o=t,a=t.next;if(0<=Pn(r,o,a))return!1;for(var s=r.x<o.x?r.x<a.x?r.x:a.x:o.x<a.x?o.x:a.x,l=r.y<o.y?r.y<a.y?r.y:a.y:o.y<a.y?o.y:a.y,c=r.x>o.x?r.x>a.x?r.x:a.x:o.x>a.x?o.x:a.x,h=r.y>o.y?r.y>a.y?r.y:a.y:o.y>a.y?o.y:a.y,u=En(s,l,e,n,i),p=En(c,h,e,n,i),d=t.nextZ;d&&d.z<=p;){if(d!==t.prev&&d!==t.next&&Tn(r.x,r.y,o.x,o.y,a.x,a.y,d.x,d.y)&&0<=Pn(d.prev,d,d.next))return!1;d=d.nextZ}for(d=t.prevZ;d&&d.z>=u;){if(d!==t.prev&&d!==t.next&&Tn(r.x,r.y,o.x,o.y,a.x,a.y,d.x,d.y)&&0<=Pn(d.prev,d,d.next))return!1;d=d.prevZ}return!0}function _n(t,e,n){var i=t;do{var r=i.prev,o=i.next.next;!Cn(r,o)&&In(r,i,i.next,o)&&Rn(r,o)&&Rn(o,r)&&(e.push(r.i/n),e.push(i.i/n),e.push(o.i/n),Fn(i),Fn(i.next),i=t=o),i=i.next}while(i!==t);return i}function gn(t,e,n,i,r,o){var a=t;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&An(a,s)){var l=kn(a,s);return a=pn(a,a.next),l=pn(l,l.next),dn(a,e,n,i,r,o),void dn(l,e,n,i,r,o)}s=s.next}a=a.next}while(a!==t)}function yn(t,e,n,i){var r,o,a,s=[];for(r=0,o=e.length;r<o;r++){(a=un(t,e[r]*i,r<o-1?e[r+1]*i:t.length,i,!1))===a.next&&(a.steiner=!0),s.push(Mn(a))}for(s.sort(vn),r=0;r<s.length;r++){bn(s[r],n),n=pn(n,n.next)}return n}function vn(t,e){return t.x-e.x}function bn(t,e){if(e=wn(t,e)){var n=kn(e,t);pn(n,n.next)}}function wn(t,e){var n,i=e,r=t.x,o=t.y,a=-1/0;do{if(o<=i.y&&o>=i.next.y&&i.next.y!==i.y){var s=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(s<=r&&s>a){if(a=s,s===r){if(o===i.y)return i;if(o===i.next.y)return i.next}n=i.x<i.next.x?i:i.next}}i=i.next}while(i!==e);if(!n)return null;if(r===a)return n.prev;var l,c=n,h=n.x,u=n.y,p=1/0;for(i=n.next;i!==c;){r>=i.x&&i.x>=h&&r!==i.x&&Tn(o<u?r:a,o,h,u,o<u?a:r,o,i.x,i.y)&&((l=_Mathabs(o-i.y)/(r-i.x))<p||l===p&&i.x>n.x)&&Rn(i,t)&&(n=i,p=l),i=i.next}return n}function xn(t,e,n,i){var r=t;do{null===r.z&&(r.z=En(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,Sn(r)}function Sn(t){var e,n,i,r,o,a,s,l,c=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,i=n,s=0,e=0;e<c&&(s++,i=i.nextZ);e++){}for(l=c;0<s||0<l&&i;){0!==s&&(0===l||!i||n.z<=i.z)?(r=n,n=n.nextZ,s--):(r=i,i=i.nextZ,l--),o?o.nextZ=r:t=r,r.prevZ=o,o=r}n=i}o.nextZ=null,c*=2}while(1<a);return t}function En(t,e,n,i,r){return t=32767*(t-n)*r,e=32767*(e-i)*r,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1}function Mn(t){var e=t,n=t;do{e.x<n.x&&(n=e),e=e.next}while(e!==t);return n}function Tn(t,e,n,i,r,o,a,s){return 0<=(r-a)*(e-s)-(t-a)*(o-s)&&0<=(t-a)*(i-s)-(n-a)*(e-s)&&0<=(n-a)*(o-s)-(r-a)*(i-s)}function An(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!Ln(t,e)&&Rn(t,e)&&Rn(e,t)&&On(t,e)}function Pn(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Cn(t,e){return t.x===e.x&&t.y===e.y}function In(t,e,n,i){return!!(Cn(t,e)&&Cn(n,i)||Cn(t,i)&&Cn(n,e))||0<Pn(t,e,n)!=0<Pn(t,e,i)&&0<Pn(n,i,t)!=0<Pn(n,i,e)}function Ln(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&In(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function Rn(t,e){return 0>Pn(t.prev,t,t.next)?0<=Pn(t,e,t.next)&&0<=Pn(t,t.prev,e):0>Pn(t,e,t.prev)||0>Pn(t,t.next,e)}function On(t,e){var n=t,i=!1,r=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&r<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==t);return i}function kn(t,e){var n=new Nn(t.i,t.x,t.y),i=new Nn(e.i,e.x,e.y),r=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,o.next=i,i.prev=o,i}function Dn(t,e,n,i){var r=new Nn(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Fn(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Nn(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Un(t,e,n,i){for(var r=0,o=e,a=n-i;o<n;o+=i){r+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o}return r}function Bn(t){var e=t.length;2<e&&t[e-1].equals(t[0])&&t.pop()}function zn(t,e){for(var n=0;n<e.length;n++){t.push(e[n].x),t.push(e[n].y)}}function Gn(t,e){T.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},this.fromBufferGeometry(new Hn(t,e)),this.mergeVertices()}function Hn(t,e){B.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:t,options:e};for(var n=this,i=[],o=[],a=0,l=(t=Array.isArray(t)?t:[t]).length;a<l;a++){!function(t){function a(t,e,n){return e||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().multiplyScalar(n).add(t)}function l(t,e,n){var i,o,a,s=t.x-e.x,l=t.y-e.y,c=n.x-t.x,h=n.y-t.y,u=s*s+l*l;if(_Mathabs(s*h-l*c)>_NumberEPSILON){var d=_Mathsqrt(u),f=_Mathsqrt(c*c+h*h),m=e.x-l/d,_=e.y+s/d,g=((n.x-h/f-m)*h-(n.y+c/f-_)*c)/(s*h-l*c),y=(i=m+s*g-t.x)*i+(o=_+l*g-t.y)*o;if(2>=y)return new r(i,o);a=_Mathsqrt(y/2)}else{var v=!1;s>_NumberEPSILON?c>_NumberEPSILON&&(v=!0):s<-_NumberEPSILON?c<-_NumberEPSILON&&(v=!0):_Mathsign(l)===_Mathsign(h)&&(v=!0),v?(i=-l,o=s,a=_Mathsqrt(u)):(i=s,o=l,a=_Mathsqrt(u/2))}return new r(i/a,o/a)}function c(t,e){var n,i;for(Y=t.length;0<=--Y;){n=Y,0>(i=Y-1)&&(i=t.length-1);var r=0,o=x+2*A;for(r=0;r<o;r++){var a=W*r,s=W*(r+1);p(e+n+a,e+i+a,e+i+s,e+n+s)}}}function h(t,e,n){b.push(t),b.push(e),b.push(n)}function u(t,e,r){d(t),d(e),d(r);var o=i.length/3,a=C.generateTopUV(n,i,o-3,o-2,o-1);f(a[0]),f(a[1]),f(a[2])}function p(t,e,r,o){d(t),d(e),d(o),d(e),d(r),d(o);var a=i.length/3,s=C.generateSideWallUV(n,i,a-6,a-3,a-2,a-1);f(s[0]),f(s[1]),f(s[3]),f(s[1]),f(s[2]),f(s[3])}function d(t){i.push(b[3*t+0]),i.push(b[3*t+1]),i.push(b[3*t+2])}function f(t){o.push(t.x),o.push(t.y)}var m,_,g,y,v,b=[],w=void 0!==e.curveSegments?e.curveSegments:12,x=void 0!==e.steps?e.steps:1,S=void 0!==e.amount?e.amount:100,E=void 0===e.bevelEnabled||e.bevelEnabled,M=void 0!==e.bevelThickness?e.bevelThickness:6,T=void 0!==e.bevelSize?e.bevelSize:M-2,A=void 0!==e.bevelSegments?e.bevelSegments:3,P=e.extrudePath,C=void 0!==e.UVGenerator?e.UVGenerator:Xs,I=!1;P&&(m=P.getSpacedPoints(x),I=!0,E=!1,_=P.computeFrenetFrames(x,!1),g=new s,y=new s,v=new s),E||(A=0,M=0,T=0);var L,R,O,k=t.extractPoints(w),D=k.shape,F=k.holes;if(!qs.isClockWise(D))for(D=D.reverse(),R=0,O=F.length;R<O;R++){L=F[R],qs.isClockWise(L)&&(F[R]=L.reverse())}var N=qs.triangulateShape(D,F),U=D;for(R=0,O=F.length;R<O;R++){L=F[R],D=D.concat(L)}for(var B,z,G,H,j,V,W=D.length,q=N.length,X=[],Y=0,Z=U.length,J=Z-1,K=Y+1;Y<Z;Y++,J++,K++){J===Z&&(J=0),K===Z&&(K=0),X[Y]=l(U[Y],U[J],U[K])}var Q,$=[],tt=X.concat();for(R=0,O=F.length;R<O;R++){for(L=F[R],Q=[],Y=0,J=(Z=L.length)-1,K=Y+1;Y<Z;Y++,J++,K++){J===Z&&(J=0),K===Z&&(K=0),Q[Y]=l(L[Y],L[J],L[K])}$.push(Q),tt=tt.concat(Q)}for(B=0;B<A;B++){for(G=B/A,H=M*_Mathcos(G*_MathPI/2),z=T*_Mathsin(G*_MathPI/2),Y=0,Z=U.length;Y<Z;Y++){h((j=a(U[Y],X[Y],z)).x,j.y,-H)}for(R=0,O=F.length;R<O;R++){for(L=F[R],Q=$[R],Y=0,Z=L.length;Y<Z;Y++){h((j=a(L[Y],Q[Y],z)).x,j.y,-H)}}}for(z=T,Y=0;Y<W;Y++){j=E?a(D[Y],tt[Y],z):D[Y],I?(y.copy(_.normals[0]).multiplyScalar(j.x),g.copy(_.binormals[0]).multiplyScalar(j.y),v.copy(m[0]).add(y).add(g),h(v.x,v.y,v.z)):h(j.x,j.y,0)}var et;for(et=1;et<=x;et++){for(Y=0;Y<W;Y++){j=E?a(D[Y],tt[Y],z):D[Y],I?(y.copy(_.normals[et]).multiplyScalar(j.x),g.copy(_.binormals[et]).multiplyScalar(j.y),v.copy(m[et]).add(y).add(g),h(v.x,v.y,v.z)):h(j.x,j.y,S/x*et)}}for(B=A-1;0<=B;B--){for(G=B/A,H=M*_Mathcos(G*_MathPI/2),z=T*_Mathsin(G*_MathPI/2),Y=0,Z=U.length;Y<Z;Y++){h((j=a(U[Y],X[Y],z)).x,j.y,S+H)}for(R=0,O=F.length;R<O;R++){for(L=F[R],Q=$[R],Y=0,Z=L.length;Y<Z;Y++){j=a(L[Y],Q[Y],z),I?h(j.x,j.y+m[x-1].y,m[x-1].x+H):h(j.x,j.y,S+H)}}}!function(){var t=i.length/3;if(E){var e=0,r=W*e;for(Y=0;Y<q;Y++){u((V=N[Y])[2]+r,V[1]+r,V[0]+r)}for(r=W*(e=x+2*A),Y=0;Y<q;Y++){u((V=N[Y])[0]+r,V[1]+r,V[2]+r)}}else{for(Y=0;Y<q;Y++){u((V=N[Y])[2],V[1],V[0])}for(Y=0;Y<q;Y++){u((V=N[Y])[0]+W*x,V[1]+W*x,V[2]+W*x)}}n.addGroup(t,i.length/3-t,0)}(),function(){var t=i.length/3,e=0;for(c(U,e),e+=U.length,R=0,O=F.length;R<O;R++){c(L=F[R],e),e+=L.length}n.addGroup(t,i.length/3-t,1)}()}(t[a])}this.addAttribute("position",new D(i,3)),this.addAttribute("uv",new D(o,2)),this.computeVertexNormals()}function jn(t,e){T.call(this),this.type="TextGeometry",this.parameters={text:t,parameters:e},this.fromBufferGeometry(new Vn(t,e)),this.mergeVertices()}function Vn(t,e){var n=(e=e||{}).font;if(!n||!n.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new T;var i=n.generateShapes(t,e.size,e.curveSegments);e.amount=void 0!==e.height?e.height:50,void 0===e.bevelThickness&&(e.bevelThickness=10),void 0===e.bevelSize&&(e.bevelSize=8),void 0===e.bevelEnabled&&(e.bevelEnabled=!1),Hn.call(this,i,e),this.type="TextBufferGeometry"}function Wn(t,e,n,i,r,o,a){T.call(this),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:i,phiLength:r,thetaStart:o,thetaLength:a},this.fromBufferGeometry(new qn(t,e,n,i,r,o,a)),this.mergeVertices()}function qn(t,e,n,i,r,o,a){B.call(this),this.type="SphereBufferGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:i,phiLength:r,thetaStart:o,thetaLength:a},t=t||1,e=_Mathmax(3,_Mathfloor(e)||8),n=_Mathmax(2,_Mathfloor(n)||6),i=void 0!==i?i:0,r=void 0!==r?r:2*_MathPI;var l,c,h=(o=void 0!==o?o:0)+(a=void 0!==a?a:_MathPI),u=0,p=[],d=new s,f=new s,m=[],_=[],g=[],y=[];for(c=0;c<=n;c++){var v=[],b=c/n;for(l=0;l<=e;l++){var w=l/e;d.x=-t*_Mathcos(i+w*r)*_Mathsin(o+b*a),d.y=t*_Mathcos(o+b*a),d.z=t*_Mathsin(i+w*r)*_Mathsin(o+b*a),_.push(d.x,d.y,d.z),f.set(d.x,d.y,d.z).normalize(),g.push(f.x,f.y,f.z),y.push(w,1-b),v.push(u++)}p.push(v)}for(c=0;c<n;c++){for(l=0;l<e;l++){var x=p[c][l+1],S=p[c][l],E=p[c+1][l],M=p[c+1][l+1];(0!==c||0<o)&&m.push(x,S,M),(c!==n-1||h<_MathPI)&&m.push(S,E,M)}}this.setIndex(m),this.addAttribute("position",new D(_,3)),this.addAttribute("normal",new D(g,3)),this.addAttribute("uv",new D(y,2))}function Xn(t,e,n,i,r,o){T.call(this),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:o},this.fromBufferGeometry(new Yn(t,e,n,i,r,o)),this.mergeVertices()}function Yn(t,e,n,i,o,a){B.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:i,thetaStart:o,thetaLength:a},t=t||.5,e=e||1,o=void 0!==o?o:0,a=void 0!==a?a:2*_MathPI,n=void 0!==n?_Mathmax(3,n):8;var l,c,h,u=[],p=[],d=[],f=[],m=t,_=(e-t)/(i=void 0!==i?_Mathmax(1,i):1),g=new s,y=new r;for(c=0;c<=i;c++){for(h=0;h<=n;h++){l=o+h/n*a,g.x=m*_Mathcos(l),g.y=m*_Mathsin(l),p.push(g.x,g.y,g.z),d.push(0,0,1),y.x=(g.x/e+1)/2,y.y=(g.y/e+1)/2,f.push(y.x,y.y)}m+=_}for(c=0;c<i;c++){var v=c*(n+1);for(h=0;h<n;h++){var b=l=h+v,w=l+n+1,x=l+n+2,S=l+1;u.push(b,w,S),u.push(w,x,S)}}this.setIndex(u),this.addAttribute("position",new D(p,3)),this.addAttribute("normal",new D(d,3)),this.addAttribute("uv",new D(f,2))}function Zn(t,e,n,i){T.call(this),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:i},this.fromBufferGeometry(new Jn(t,e,n,i)),this.mergeVertices()}function Jn(t,e,n,i){B.call(this),this.type="LatheBufferGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:i},e=_Mathfloor(e)||12,n=n||0,i=i||2*_MathPI,i=Ms.clamp(i,0,2*_MathPI);var o,a,l,c=[],h=[],u=[],p=1/e,d=new s,f=new r;for(a=0;a<=e;a++){var m=n+a*p*i,_=_Mathsin(m),g=_Mathcos(m);for(l=0;l<=t.length-1;l++){d.x=t[l].x*_,d.y=t[l].y,d.z=t[l].x*g,h.push(d.x,d.y,d.z),f.x=a/e,f.y=l/(t.length-1),u.push(f.x,f.y)}}for(a=0;a<e;a++){for(l=0;l<t.length-1;l++){var y=o=l+a*t.length,v=o+t.length,b=o+t.length+1,w=o+1;c.push(y,v,w),c.push(v,b,w)}}if(this.setIndex(c),this.addAttribute("position",new D(h,3)),this.addAttribute("uv",new D(u,2)),this.computeVertexNormals(),i===2*_MathPI){var x=this.attributes.normal.array,S=new s,E=new s,M=new s;for(o=3*(e*t.length),a=0,l=0;a<t.length;a++,l+=3){S.x=x[l+0],S.y=x[l+1],S.z=x[l+2],E.x=x[o+l+0],E.y=x[o+l+1],E.z=x[o+l+2],M.addVectors(S,E).normalize(),x[l+0]=x[o+l+0]=M.x,x[l+1]=x[o+l+1]=M.y,x[l+2]=x[o+l+2]=M.z}}}function Kn(t,e){T.call(this),this.type="ShapeGeometry","object"==babelHelpers.typeof(e)&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),e=e.curveSegments),this.parameters={shapes:t,curveSegments:e},this.fromBufferGeometry(new Qn(t,e)),this.mergeVertices()}function Qn(t,e){function n(t){var n,s,c,h=r.length/3,u=t.extractPoints(e),p=u.shape,d=u.holes;if(!1===qs.isClockWise(p))for(p=p.reverse(),n=0,s=d.length;n<s;n++){c=d[n],!0===qs.isClockWise(c)&&(d[n]=c.reverse())}var f=qs.triangulateShape(p,d);for(n=0,s=d.length;n<s;n++){c=d[n],p=p.concat(c)}for(n=0,s=p.length;n<s;n++){var m=p[n];r.push(m.x,m.y,0),o.push(0,0,1),a.push(m.x,m.y)}for(n=0,s=f.length;n<s;n++){var _=f[n],g=_[0]+h,y=_[1]+h,v=_[2]+h;i.push(g,y,v),l+=3}}B.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:t,curveSegments:e},e=e||12;var i=[],r=[],o=[],a=[],s=0,l=0;if(!1===Array.isArray(t))n(t);else for(var c=0;c<t.length;c++){n(t[c]),this.addGroup(s,l,c),s+=l,l=0}this.setIndex(i),this.addAttribute("position",new D(r,3)),this.addAttribute("normal",new D(o,3)),this.addAttribute("uv",new D(a,2))}function $n(t,e){if(e.shapes=[],Array.isArray(t))for(var n=0,i=t.length,r;n<i;n++){r=t[n];e.shapes.push(r.uuid)}else e.shapes.push(t.uuid);return e}function ti(t,e){B.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:e},e=void 0!==e?e:1;var n,i,r,o,a=[],s=_Mathcos(Ms.DEG2RAD*e),l=[0,0],c={},h=["a","b","c"];t.isBufferGeometry?(o=new T).fromBufferGeometry(t):o=t.clone(),o.mergeVertices(),o.computeFaceNormals();for(var u=o.vertices,p=o.faces,d=0,f=p.length;d<f;d++){for(var m=p[d],_=0;3>_;_++){n=m[h[_]],i=m[h[(_+1)%3]],l[0]=_Mathmin(n,i),l[1]=_Mathmax(n,i),void 0===c[r=l[0]+","+l[1]]?c[r]={index1:l[0],index2:l[1],face1:d,face2:void 0}:c[r].face2=d}}for(r in c){var g=c[r];if(void 0===g.face2||p[g.face1].normal.dot(p[g.face2].normal)<=s){var y=u[g.index1];a.push(y.x,y.y,y.z),y=u[g.index2],a.push(y.x,y.y,y.z)}}this.addAttribute("position",new D(a,3))}function ei(t,e,n,i,r,o,a,s){T.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:i,heightSegments:r,openEnded:o,thetaStart:a,thetaLength:s},this.fromBufferGeometry(new ni(t,e,n,i,r,o,a,s)),this.mergeVertices()}function ni(t,e,n,i,o,a,l,c){function h(n){var o,a,h,g=new r,b=new s,w=0,x=!0===n?t:e,S=!0===n?1:-1;for(a=_,o=1;o<=i;o++){d.push(0,y*S,0),f.push(0,S,0),m.push(.5,.5),_++}for(h=_,o=0;o<=i;o++){var E=o/i*c+l,M=_Mathcos(E),T=_Mathsin(E);b.x=x*T,b.y=y*S,b.z=x*M,d.push(b.x,b.y,b.z),f.push(0,S,0),g.x=.5*M+.5,g.y=.5*T*S+.5,m.push(g.x,g.y),_++}for(o=0;o<i;o++){var A=a+o,P=h+o;!0===n?p.push(P,P+1,A):p.push(P+1,P,A),w+=3}u.addGroup(v,w,!0===n?1:2),v+=w}B.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:i,heightSegments:o,openEnded:a,thetaStart:l,thetaLength:c};var u=this;t=void 0!==t?t:1,e=void 0!==e?e:1,n=n||1,i=_Mathfloor(i)||8,o=_Mathfloor(o)||1,a=void 0!==a&&a,l=void 0!==l?l:0,c=void 0!==c?c:2*_MathPI;var p=[],d=[],f=[],m=[],_=0,g=[],y=n/2,v=0;!function(){var r,a,h=new s,b=new s,w=0,x=(e-t)/n;for(a=0;a<=o;a++){var S=[],E=a/o,M=E*(e-t)+t;for(r=0;r<=i;r++){var T=r/i,A=T*c+l,P=_Mathsin(A),C=_Mathcos(A);b.x=M*P,b.y=-E*n+y,b.z=M*C,d.push(b.x,b.y,b.z),h.set(P,x,C).normalize(),f.push(h.x,h.y,h.z),m.push(T,1-E),S.push(_++)}g.push(S)}for(r=0;r<i;r++){for(a=0;a<o;a++){var I=g[a][r],L=g[a+1][r],R=g[a+1][r+1],O=g[a][r+1];p.push(I,L,O),p.push(L,R,O),w+=6}}u.addGroup(v,w,0),v+=w}(),!1===a&&(0<t&&h(!0),0<e&&h(!1)),this.setIndex(p),this.addAttribute("position",new D(d,3)),this.addAttribute("normal",new D(f,3)),this.addAttribute("uv",new D(m,2))}function ii(t,e,n,i,r,o,a){ei.call(this,0,t,e,n,i,r,o,a),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:o,thetaLength:a}}function ri(t,e,n,i,r,o,a){ni.call(this,0,t,e,n,i,r,o,a),this.type="ConeBufferGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:o,thetaLength:a}}function oi(t,e,n,i){T.call(this),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:i},this.fromBufferGeometry(new ai(t,e,n,i)),this.mergeVertices()}function ai(t,e,n,i){B.call(this),this.type="CircleBufferGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:i},t=t||1,e=void 0!==e?_Mathmax(3,e):8,n=void 0!==n?n:0,i=void 0!==i?i:2*_MathPI;var o,a,l=[],c=[],h=[],u=[],p=new s,d=new r;for(c.push(0,0,0),h.push(0,0,1),u.push(.5,.5),a=0,o=3;a<=e;a++,o+=3){var f=n+a/e*i;p.x=t*_Mathcos(f),p.y=t*_Mathsin(f),c.push(p.x,p.y,p.z),h.push(0,0,1),d.x=(c[o]/t+1)/2,d.y=(c[o+1]/t+1)/2,u.push(d.x,d.y)}for(o=1;o<=e;o++){l.push(o,o+1,0)}this.setIndex(l),this.addAttribute("position",new D(c,3)),this.addAttribute("normal",new D(h,3)),this.addAttribute("uv",new D(u,2))}function si(t){V.call(this),this.type="ShadowMaterial",this.color=new y(0),this.transparent=!0,this.setValues(t)}function li(t){q.call(this,t),this.type="RawShaderMaterial"}function ci(t){V.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new y(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new y(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new r(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function hi(t){ci.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(t)}function ui(t){V.call(this),this.type="MeshPhongMaterial",this.color=new y(16777215),this.specular=new y(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new y(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new r(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=$o,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function pi(t){ui.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(t)}function di(t){V.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new r(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function fi(t){V.call(this),this.type="MeshLambertMaterial",this.color=new y(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new y(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=$o,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function mi(t){De.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}function _i(t,e,n){var i=this,r=!1,o=0,a=0,s;this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(t){a++,!1===r&&void 0!==i.onStart&&i.onStart(t,o,a),r=!0},this.itemEnd=function(t){o++,void 0!==i.onProgress&&i.onProgress(t,o,a),o===a&&(r=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(t){void 0!==i.onError&&i.onError(t)},this.resolveURL=function(t){return s?s(t):t},this.setURLModifier=function(t){return s=t,this}}function gi(t){this.manager=void 0!==t?t:Ks}function vi(t){this.manager=void 0!==t?t:Ks}function wi(t){this.manager=void 0!==t?t:Ks}function xi(){this.type="Curve",this.arcLengthDivisions=200}function Si(t,e,n,i,r,o,a,s){xi.call(this),this.type="EllipseCurve",this.aX=t||0,this.aY=e||0,this.xRadius=n||1,this.yRadius=i||1,this.aStartAngle=r||0,this.aEndAngle=o||2*_MathPI,this.aClockwise=a||!1,this.aRotation=s||0}function Ei(t,e,n,i,r,o){Si.call(this,t,e,n,n,i,r,o),this.type="ArcCurve"}function Mi(){function t(t,o,a,s){e=t,n=a,i=-3*t+3*o-2*a-s,r=2*t-2*o+a+s}var e=0,n=0,i=0,r=0;return{initCatmullRom:function initCatmullRom(e,n,i,r,o){t(n,i,o*(i-e),o*(r-n))},initNonuniformCatmullRom:function initNonuniformCatmullRom(e,n,i,r,o,a,s){var l=(n-e)/o-(i-e)/(o+a)+(i-n)/a,c=(i-n)/a-(r-n)/(a+s)+(r-i)/s;t(n,i,l*=a,c*=a)},calc:function calc(t){var o=t*t;return e+n*t+i*o+r*(o*t)}}}function Ti(t,e,n,i){xi.call(this),this.type="CatmullRomCurve3",this.points=t||[],this.closed=e||!1,this.curveType=n||"centripetal",this.tension=i||.5}function Ai(t,e,n,i,r){var o=.5*(i-e),a=.5*(r-n),s=t*t;return(2*n-2*i+o+a)*(t*s)+(-3*n+3*i-2*o-a)*s+o*t+n}function Pi(t,e){var n=1-t;return n*n*e}function Ci(t,e){return 2*(1-t)*t*e}function Ii(t,e){return t*t*e}function Li(t,e,n,i){return Pi(t,e)+Ci(t,n)+Ii(t,i)}function Ri(t,e){var n=1-t;return n*n*n*e}function Oi(t,e){var n=1-t;return 3*n*n*t*e}function ki(t,e){return 3*(1-t)*t*t*e}function Di(t,e){return t*t*t*e}function Fi(t,e,n,i,r){return Ri(t,e)+Oi(t,n)+ki(t,i)+Di(t,r)}function Ni(t,e,n,i){xi.call(this),this.type="CubicBezierCurve",this.v0=t||new r,this.v1=e||new r,this.v2=n||new r,this.v3=i||new r}function Ui(t,e,n,i){xi.call(this),this.type="CubicBezierCurve3",this.v0=t||new s,this.v1=e||new s,this.v2=n||new s,this.v3=i||new s}function Bi(t,e){xi.call(this),this.type="LineCurve",this.v1=t||new r,this.v2=e||new r}function zi(t,e){xi.call(this),this.type="LineCurve3",this.v1=t||new s,this.v2=e||new s}function Gi(t,e,n){xi.call(this),this.type="QuadraticBezierCurve",this.v0=t||new r,this.v1=e||new r,this.v2=n||new r}function Hi(t,e,n){xi.call(this),this.type="QuadraticBezierCurve3",this.v0=t||new s,this.v1=e||new s,this.v2=n||new s}function ji(t){xi.call(this),this.type="SplineCurve",this.points=t||[]}function Vi(){xi.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function Wi(t){Vi.call(this),this.type="Path",this.currentPoint=new r,t&&this.setFromPoints(t)}function qi(t){Wi.call(this,t),this.uuid=Ms.generateUUID(),this.type="Shape",this.holes=[]}function Xi(t,e){x.call(this),this.type="Light",this.color=new y(t),this.intensity=void 0!==e?e:1,this.receiveShadow=void 0}function Yi(t,e,n){Xi.call(this,t,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(x.DefaultUp),this.updateMatrix(),this.groundColor=new y(e)}function Zi(t){this.camera=t,this.bias=0,this.radius=1,this.mapSize=new r(512,512),this.map=null,this.matrix=new o}function Ji(){Zi.call(this,new xe(50,1,.5,500))}function Ki(t,e,n,i,r,o){Xi.call(this,t,e),this.type="SpotLight",this.position.copy(x.DefaultUp),this.updateMatrix(),this.target=new x,Object.defineProperty(this,"power",{get:function get(){return this.intensity*_MathPI},set:function set(t){this.intensity=t/_MathPI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==i?i:_MathPI/3,this.penumbra=void 0!==r?r:0,this.decay=void 0!==o?o:1,this.shadow=new Ji}function Qi(t,e,n,i){Xi.call(this,t,e),this.type="PointLight",Object.defineProperty(this,"power",{get:function get(){return 4*this.intensity*_MathPI},set:function set(t){this.intensity=t/(4*_MathPI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==i?i:1,this.shadow=new Zi(new xe(90,1,.5,500))}function $i(){Zi.call(this,new E(-5,5,5,-5,.5,500))}function tr(t,e){Xi.call(this,t,e),this.type="DirectionalLight",this.position.copy(x.DefaultUp),this.updateMatrix(),this.target=new x,this.shadow=new $i}function er(t,e){Xi.call(this,t,e),this.type="AmbientLight",this.castShadow=void 0}function nr(t,e,n,i){Xi.call(this,t,e),this.type="RectAreaLight",this.width=void 0!==n?n:10,this.height=void 0!==i?i:10}function ir(t,e,n,i){dr.call(this,t,e,n,i)}function rr(t,e,n){dr.call(this,t,e,n)}function or(t,e,n,i){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new e.constructor(n),this.sampleValues=e,this.valueSize=n}function ar(t,e,n,i){or.call(this,t,e,n,i)}function sr(t,e,n,i){dr.call(this,t,e,n,i)}function lr(t,e,n,i){dr.call(this,t,e,n,i)}function cr(t,e,n,i){dr.call(this,t,e,n,i)}function hr(t,e,n,i){or.call(this,t,e,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function ur(t,e,n,i){or.call(this,t,e,n,i)}function pr(t,e,n,i){or.call(this,t,e,n,i)}function dr(t,e,n,i){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=rl.convertArray(e,this.TimeBufferType),this.values=rl.convertArray(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation),this.validate(),this.optimize()}function fr(t,e,n,i){dr.call(this,t,e,n,i)}function mr(t,e,n){this.name=t,this.tracks=n,this.duration=void 0!==e?e:-1,this.uuid=Ms.generateUUID(),0>this.duration&&this.resetDuration(),this.optimize()}function _r(t){this.manager=void 0!==t?t:Ks,this.textures={}}function gr(t){this.manager=void 0!==t?t:Ks}function yr(){}function vr(t){"boolean"==typeof t&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),t=void 0),this.manager=void 0!==t?t:Ks,this.withCredentials=!1}function br(t){"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.manager=void 0!==t?t:Ks,this.options=void 0}function wr(){this.type="ShapePath",this.color=new y,this.subPaths=[],this.currentPath=null}function xr(t){this.type="Font",this.data=t}function Sr(t,e,n,i){for(var r=(t+"").split(""),o=e/i.resolution,a=(i.boundingBox.yMax-i.boundingBox.yMin+i.underlineThickness)*o,s=[],l=0,c=0,h=0,u;h<r.length;h++){u=r[h];if("\n"===u)l=0,c-=a;else{var p=Er(u,n,o,l,c,i);l+=p.offsetX,s.push(p.path)}}return s}function Er(t,e,n,i,r,o){var a=o.glyphs[t]||o.glyphs["?"];if(a){var s,l,c,h,u,p,d,f,m=new wr;if(a.o)for(var _=a._cachedOutline||(a._cachedOutline=a.o.split(" ")),g=0,y=_.length;g<y;){switch(_[g++]){case"m":s=_[g++]*n+i,l=_[g++]*n+r,m.moveTo(s,l);break;case"l":s=_[g++]*n+i,l=_[g++]*n+r,m.lineTo(s,l);break;case"q":c=_[g++]*n+i,h=_[g++]*n+r,u=_[g++]*n+i,p=_[g++]*n+r,m.quadraticCurveTo(u,p,c,h);break;case"b":c=_[g++]*n+i,h=_[g++]*n+r,u=_[g++]*n+i,p=_[g++]*n+r,d=_[g++]*n+i,f=_[g++]*n+r,m.bezierCurveTo(u,p,d,f,c,h);}}return{offsetX:a.ha*n,path:m}}}function Mr(t){this.manager=void 0!==t?t:Ks}function Tr(t,e,n){x.call(this),this.type="CubeCamera";var i=new xe(90,1,t,e);i.up.set(0,-1,0),i.lookAt(new s(1,0,0)),this.add(i);var r=new xe(90,1,t,e);r.up.set(0,-1,0),r.lookAt(new s(-1,0,0)),this.add(r);var o=new xe(90,1,t,e);o.up.set(0,0,1),o.lookAt(new s(0,1,0)),this.add(o);var a=new xe(90,1,t,e);a.up.set(0,0,-1),a.lookAt(new s(0,-1,0)),this.add(a);var l=new xe(90,1,t,e);l.up.set(0,-1,0),l.lookAt(new s(0,0,1)),this.add(l);var c=new xe(90,1,t,e);c.up.set(0,-1,0),c.lookAt(new s(0,0,-1)),this.add(c);this.renderTarget=new p(n,n,{format:Fa,magFilter:ba,minFilter:ba}),this.renderTarget.texture.name="CubeCamera",this.update=function(t,e){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget,s=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,n.activeCubeFace=0,t.render(e,i,n),n.activeCubeFace=1,t.render(e,r,n),n.activeCubeFace=2,t.render(e,o,n),n.activeCubeFace=3,t.render(e,a,n),n.activeCubeFace=4,t.render(e,l,n),n.texture.generateMipmaps=s,n.activeCubeFace=5,t.render(e,c,n),t.setRenderTarget(null)},this.clear=function(t,e,n,i){for(var r=this.renderTarget,o=0;6>o;o++){r.activeCubeFace=o,t.setRenderTarget(r),t.clear(e,n,i)}t.setRenderTarget(null)}}function Ar(){x.call(this),this.type="AudioListener",this.context=ul.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null}function Pr(t){x.call(this),this.type="Audio",this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.loop=!1,this.startTime=0,this.offset=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function Cr(t){Pr.call(this,t),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function Ir(t,e){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=void 0!==e?e:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}function Lr(t,e,n){this.binding=t,this.valueSize=n;var i,r=Float64Array;switch(e){case"quaternion":i=this._slerp;break;case"string":case"bool":r=Array,i=this._select;break;default:i=this._lerp;}this.buffer=new r(4*n),this._mixBufferRegion=i,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}function Rr(t,e,n){var i=n||Or.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,i)}function Or(t,e,n){this.path=e,this.parsedPath=n||Or.parseTrackName(e),this.node=Or.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t}function kr(t,e,n){this._mixer=t,this._clip=e,this._localRoot=n||null;for(var i=e.tracks,r=i.length,o=Array(r),a={endingStart:ps,endingEnd:ps},s=0,l;s!==r;++s){l=i[s].createInterpolant(null);o[s]=l,l.settings=a}this._interpolantSettings=a,this._interpolants=o,this._propertyBindings=Array(r),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=us,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function Dr(t){this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function Fr(t){"string"==typeof t&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=arguments[1]),this.value=t}function Nr(){B.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function Ur(t,e,n,i){this.data=t,this.itemSize=e,this.offset=n,this.normalized=!0===i}function Br(t,e){this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function zr(t,e,n){Br.call(this,t,e),this.meshPerAttribute=n||1}function Gr(t,e,n){A.call(this,t,e),this.meshPerAttribute=n||1}function Hr(t,e){return t.distance-e.distance}function jr(t,e,n,i){if(!1!==t.visible&&(t.raycast(e,n),!0===i))for(var r=t.children,o=0,a=r.length;o<a;o++){jr(r[o],e,n,!0)}}function Vr(t,e){this.min=void 0!==t?t:new r(1/0,1/0),this.max=void 0!==e?e:new r(-1/0,-1/0)}function Wr(t){x.call(this),this.material=t,this.render=function(){}}function qr(t,e,n,i){this.object=t,this.size=void 0!==e?e:1;var r=void 0!==n?n:16711680,o=void 0!==i?i:1,a=0,s=this.object.geometry;s&&s.isGeometry?a=3*s.faces.length:s&&s.isBufferGeometry&&(a=s.attributes.normal.count);var l=new B,c=new D(3*(2*a),3);l.addAttribute("position",c),Ne.call(this,l,new De({color:r,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function Xr(t,e){x.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=e;for(var n=new B,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],r=0,o=1;32>r;r++,o++){var a=2*(r/32*_MathPI),s=2*(o/32*_MathPI);i.push(_Mathcos(a),_Mathsin(a),1,_Mathcos(s),_Mathsin(s),1)}n.addAttribute("position",new D(i,3));var l=new De({fog:!1});this.cone=new Ne(n,l),this.add(this.cone),this.update()}function Yr(t){var e=[];t&&t.isBone&&e.push(t);for(var n=0;n<t.children.length;n++){e.push.apply(e,Yr(t.children[n]))}return e}function Zr(t){for(var e=Yr(t),n=new B,i=[],r=[],o=new y(0,0,1),a=new y(0,1,0),s=0,l;s<e.length;s++){l=e[s];l.parent&&l.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),r.push(o.r,o.g,o.b),r.push(a.r,a.g,a.b))}n.addAttribute("position",new D(i,3)),n.addAttribute("color",new D(r,3));var c=new De({vertexColors:xo,depthTest:!1,depthWrite:!1,transparent:!0});Ne.call(this,n,c),this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}function Jr(t,e,n){this.light=t,this.light.updateMatrixWorld(),this.color=n;var i=new qn(e,4,2),r=new W({wireframe:!0,fog:!1});J.call(this,i,r),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function Kr(t,e){x.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=e;var n=new De({fog:!1}),i=new B;i.addAttribute("position",new A(new Float32Array(15),3)),this.line=new Fe(i,n),this.add(this.line),this.update()}function Qr(t,e,n){x.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;var i=new $e(e);i.rotateY(.5*_MathPI),this.material=new W({wireframe:!0,fog:!1}),void 0===this.color&&(this.material.vertexColors=xo);var r=i.getAttribute("position"),o=new Float32Array(3*r.count);i.addAttribute("color",new A(o,3)),this.add(new J(i,this.material)),this.update()}function $r(t,e,n,i){t=t||10,e=e||10,n=new y(void 0!==n?n:4473924),i=new y(void 0!==i?i:8947848);for(var r=e/2,o=t/e,a=t/2,s=[],l=[],c=0,h=0,u=-a;c<=e;c++,u+=o){s.push(-a,0,u,a,0,u),s.push(u,0,-a,u,0,a);var p=c===r?n:i;p.toArray(l,h),h+=3,p.toArray(l,h),h+=3,p.toArray(l,h),h+=3,p.toArray(l,h),h+=3}var d=new B;d.addAttribute("position",new D(s,3)),d.addAttribute("color",new D(l,3));var f=new De({vertexColors:xo});Ne.call(this,d,f)}function to(t,e,n,i,r,o){t=t||10,e=e||16,n=n||8,i=i||64,r=new y(void 0!==r?r:4473924),o=new y(void 0!==o?o:8947848);var a,s,l,c,h,u,p,d=[],f=[];for(c=0;c<=e;c++){l=c/e*(2*_MathPI),a=_Mathsin(l)*t,s=_Mathcos(l)*t,d.push(0,0,0),d.push(a,0,s),p=1&c?r:o,f.push(p.r,p.g,p.b),f.push(p.r,p.g,p.b)}for(c=0;c<=n;c++){for(p=1&c?r:o,u=t-t/n*c,h=0;h<i;h++){l=h/i*(2*_MathPI),a=_Mathsin(l)*u,s=_Mathcos(l)*u,d.push(a,0,s),f.push(p.r,p.g,p.b),l=(h+1)/i*(2*_MathPI),a=_Mathsin(l)*u,s=_Mathcos(l)*u,d.push(a,0,s),f.push(p.r,p.g,p.b)}}var m=new B;m.addAttribute("position",new D(d,3)),m.addAttribute("color",new D(f,3));var _=new De({vertexColors:xo});Ne.call(this,m,_)}function eo(t,e,n,i){this.object=t,this.size=void 0!==e?e:1;var r=void 0!==n?n:16776960,o=void 0!==i?i:1,a=0,s=this.object.geometry;s&&s.isGeometry?a=s.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var l=new B,c=new D(3*(2*a),3);l.addAttribute("position",c),Ne.call(this,l,new De({color:r,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function no(t,e,n){x.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===e&&(e=1);var i=new B;i.addAttribute("position",new D([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));var r=new De({fog:!1});this.lightPlane=new Fe(i,r),this.add(this.lightPlane),(i=new B).addAttribute("position",new D([0,0,0,0,0,1],3)),this.targetLine=new Fe(i,r),this.add(this.targetLine),this.update()}function io(t){function e(t,e,i){n(t,i),n(e,i)}function n(t,e){o.push(0,0,0),a.push(e.r,e.g,e.b),void 0===s[t]&&(s[t]=[]),s[t].push(o.length/3-1)}var i=new B,r=new De({color:16777215,vertexColors:wo}),o=[],a=[],s={},l=new y(16755200),c=new y(16711680),h=new y(43775),u=new y(16777215),p=new y(3355443);e("n1","n2",l),e("n2","n4",l),e("n4","n3",l),e("n3","n1",l),e("f1","f2",l),e("f2","f4",l),e("f4","f3",l),e("f3","f1",l),e("n1","f1",l),e("n2","f2",l),e("n3","f3",l),e("n4","f4",l),e("p","n1",c),e("p","n2",c),e("p","n3",c),e("p","n4",c),e("u1","u2",h),e("u2","u3",h),e("u3","u1",h),e("c","t",u),e("p","c",p),e("cn1","cn2",p),e("cn3","cn4",p),e("cf1","cf2",p),e("cf3","cf4",p),i.addAttribute("position",new D(o,3)),i.addAttribute("color",new D(a,3)),Ne.call(this,i,r),this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update()}function ro(t,e){this.object=t,void 0===e&&(e=16776960);var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),r=new B;r.setIndex(new A(n,1)),r.addAttribute("position",new A(i,3)),Ne.call(this,r,new De({color:e})),this.matrixAutoUpdate=!1,this.update()}function oo(t,e){this.type="Box3Helper",this.box=t;var n=void 0!==e?e:16776960,i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),o=new B;o.setIndex(new A(i,1)),o.addAttribute("position",new D([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),Ne.call(this,o,new De({color:n})),this.geometry.computeBoundingSphere()}function ao(t,e,n){this.type="PlaneHelper",this.plane=t,this.size=void 0===e?1:e;var i=void 0!==n?n:16776960,o=new B;o.addAttribute("position",new D([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),o.computeBoundingSphere(),Fe.call(this,o,new De({color:i}));var s=new B;s.addAttribute("position",new D([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),s.computeBoundingSphere(),this.add(new J(s,new W({color:i,opacity:.2,transparent:!0,depthWrite:!1})))}function so(t,e,n,i,r,o){x.call(this),void 0===i&&(i=16776960),void 0===n&&(n=1),void 0===r&&(r=.2*n),void 0===o&&(o=.2*r),void 0===pl&&((pl=new B).addAttribute("position",new D([0,0,0,0,1,0],3)),(dl=new ni(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(e),this.line=new Fe(pl,new De({color:i})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new J(dl,new W({color:i})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(n,r,o)}function lo(t){var e=[0,0,0,t=t||1,0,0,0,0,0,0,t,0,0,0,0,0,0,t],i=new B;i.addAttribute("position",new D(e,3)),i.addAttribute("color",new D([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));var r=new De({vertexColors:xo});Ne.call(this,i,r)}function co(t){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),Ti.call(this,t),this.type="catmullrom"}n.d(e,"b",function(){return i}),n.d(e,"c",function(){return o}),n.d(e,"g",function(){return h}),n.d(e,"f",function(){return s}),n.d(e,"e",function(){return r}),n.d(e,"d",function(){return a}),n.d(e,"a",function(){return y}),void 0===_NumberEPSILON&&(_NumberEPSILON=2.220446049250313e-16),void 0===_NumberisInteger&&(_NumberisInteger=function(t){return"number"==typeof t&&isFinite(t)&&_Mathfloor(t)===t}),void 0===_Mathsign&&(_Mathsign=function(t){return 0>t?-1:0<t?1:+t}),!1=="name"in Function.prototype&&Object.defineProperty(Function.prototype,"name",{get:function get(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(t){if(void 0===t||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1,i;n<arguments.length;n++){i=arguments[n];if(void 0!==i&&null!==i)for(var r in i){Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}}return e}),Object.assign(i.prototype,{addEventListener:function addEventListener(t,e){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)},hasEventListener:function hasEventListener(t,e){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)},removeEventListener:function removeEventListener(t,e){if(void 0!==this._listeners){var n=this._listeners[t];if(void 0!==n){var i=n.indexOf(e);-1!==i&&n.splice(i,1)}}},dispatchEvent:function dispatchEvent(t){if(void 0!==this._listeners){var e=this._listeners[t.type];if(void 0!==e){t.target=this;for(var n=e.slice(0),i=0,r=n.length;i<r;i++){n[i].call(this,t)}}}}});var ho="92",uo=0,po=1,fo=2,mo=1,_o=2,go=0,yo=1,vo=2,bo=0,wo=1,xo=2,So=0,Eo=1,Mo=2,To=3,Ao=4,Po=5,Co=100,Io=101,Lo=102,Ro=103,Oo=104,ko=200,Do=201,Fo=202,No=203,Uo=204,Bo=205,zo=206,Go=207,Ho=208,jo=209,Vo=210,Wo=0,qo=1,Xo=2,Yo=3,Zo=4,Jo=5,Ko=6,Qo=7,$o=0,ta=1,ea=2,na=0,ia=1,ra=2,oa=3,aa=4,sa=301,la=302,ca=303,ha=304,ua=305,pa=306,da=307,fa=1e3,ma=1001,_a=1002,ga=1003,ya=1004,va=1005,ba=1006,wa=1007,xa=1008,Sa=1009,Ea=1010,Ma=1011,Ta=1012,Aa=1013,Pa=1014,Ca=1015,Ia=1016,La=1017,Ra=1018,Oa=1019,ka=1020,Da=1021,Fa=1022,Na=1023,Ua=1024,Ba=1025,za=1026,Ga=1027,Ha=33776,ja=33777,Va=33778,Wa=33779,qa=35840,Xa=35841,Ya=35842,Za=35843,Ja=36196,Ka=37808,Qa=37809,$a=37810,ts=37811,es=37812,ns=37813,is=37814,rs=37815,os=37816,as=37817,ss=37818,ls=37819,cs=37820,hs=37821,us=2201,ps=2400,ds=0,fs=1,ms=2,_s=3e3,gs=3001,ys=3007,vs=3002,bs=3004,ws=3005,xs=3006,Ss=3200,Es=3201,Ms={DEG2RAD:_MathPI/180,RAD2DEG:180/_MathPI,generateUUID:function(){for(var t=[],e=0;256>e;e++){t[e]=(16>e?"0":"")+e.toString(16)}return function(){var e=0|4294967295*Math.random(),n=0|4294967295*Math.random(),i=0|4294967295*Math.random(),r=0|4294967295*Math.random();return(t[255&e]+t[255&e>>8]+t[255&e>>16]+t[255&e>>24]+"-"+t[255&n]+t[255&n>>8]+"-"+t[64|15&n>>16]+t[255&n>>24]+"-"+t[128|63&i]+t[255&i>>8]+"-"+t[255&i>>16]+t[255&i>>24]+t[255&r]+t[255&r>>8]+t[255&r>>16]+t[255&r>>24]).toUpperCase()}}(),clamp:function clamp(t,e,n){return _Mathmax(e,_Mathmin(n,t))},euclideanModulo:function euclideanModulo(t,e){return(t%e+e)%e},mapLinear:function mapLinear(t,e,n,i,r){return i+(t-e)*(r-i)/(n-e)},lerp:function lerp(t,e,n){return(1-n)*t+n*e},smoothstep:function smoothstep(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*(3-2*t)},smootherstep:function smootherstep(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*t*(t*(6*t-15)+10)},randInt:function randInt(t,e){return t+_Mathfloor(Math.random()*(e-t+1))},randFloat:function randFloat(t,e){return t+Math.random()*(e-t)},randFloatSpread:function randFloatSpread(t){return t*(.5-Math.random())},degToRad:function degToRad(t){return t*Ms.DEG2RAD},radToDeg:function radToDeg(t){return t*Ms.RAD2DEG},isPowerOfTwo:function isPowerOfTwo(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function ceilPowerOfTwo(t){return _Mathpow(2,_Mathceil(_Mathlog(t)/_MathLN))},floorPowerOfTwo:function floorPowerOfTwo(t){return _Mathpow(2,_Mathfloor(_Mathlog(t)/_MathLN))}};Object.defineProperties(r.prototype,{width:{get:function get(){return this.x},set:function set(t){this.x=t}},height:{get:function get(){return this.y},set:function set(t){this.y=t}}}),Object.assign(r.prototype,{isVector2:!0,set:function set(t,e){return this.x=t,this.y=e,this},setScalar:function setScalar(t){return this.x=t,this.y=t,this},setX:function setX(t){return this.x=t,this},setY:function setY(t){return this.y=t,this},setComponent:function setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t);}return this},getComponent:function getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t);}},clone:function clone(){return new this.constructor(this.x,this.y)},copy:function copy(t){return this.x=t.x,this.y=t.y,this},add:function add(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)},addScalar:function addScalar(t){return this.x+=t,this.y+=t,this},addVectors:function addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},addScaledVector:function addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this},sub:function sub(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)},subScalar:function subScalar(t){return this.x-=t,this.y-=t,this},subVectors:function subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},multiply:function multiply(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function multiplyScalar(t){return this.x*=t,this.y*=t,this},divide:function divide(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function divideScalar(t){return this.multiplyScalar(1/t)},applyMatrix3:function applyMatrix3(t){var e=this.x,n=this.y,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6],this.y=i[1]*e+i[4]*n+i[7],this},min:function min(t){return this.x=_Mathmin(this.x,t.x),this.y=_Mathmin(this.y,t.y),this},max:function max(t){return this.x=_Mathmax(this.x,t.x),this.y=_Mathmax(this.y,t.y),this},clamp:function clamp(t,e){return this.x=_Mathmax(t.x,_Mathmin(e.x,this.x)),this.y=_Mathmax(t.y,_Mathmin(e.y,this.y)),this},clampScalar:function(){var t=new r,e=new r;return function(n,i){return t.set(n,n),e.set(i,i),this.clamp(t,e)}}(),clampLength:function clampLength(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(_Mathmax(t,_Mathmin(e,n)))},floor:function floor(){return this.x=_Mathfloor(this.x),this.y=_Mathfloor(this.y),this},ceil:function ceil(){return this.x=_Mathceil(this.x),this.y=_Mathceil(this.y),this},round:function round(){return this.x=_Mathround(this.x),this.y=_Mathround(this.y),this},roundToZero:function roundToZero(){return this.x=0>this.x?_Mathceil(this.x):_Mathfloor(this.x),this.y=0>this.y?_Mathceil(this.y):_Mathfloor(this.y),this},negate:function negate(){return this.x=-this.x,this.y=-this.y,this},dot:function dot(t){return this.x*t.x+this.y*t.y},lengthSq:function lengthSq(){return this.x*this.x+this.y*this.y},length:function length(){return _Mathsqrt(this.x*this.x+this.y*this.y)},manhattanLength:function manhattanLength(){return _Mathabs(this.x)+_Mathabs(this.y)},normalize:function normalize(){return this.divideScalar(this.length()||1)},angle:function angle(){var t=_Mathatan(this.y,this.x);return 0>t&&(t+=2*_MathPI),t},distanceTo:function distanceTo(t){return _Mathsqrt(this.distanceToSquared(t))},distanceToSquared:function distanceToSquared(t){var e=this.x-t.x,n=this.y-t.y;return e*e+n*n},manhattanDistanceTo:function manhattanDistanceTo(t){return _Mathabs(this.x-t.x)+_Mathabs(this.y-t.y)},setLength:function setLength(t){return this.normalize().multiplyScalar(t)},lerp:function lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},lerpVectors:function lerpVectors(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},equals:function equals(t){return t.x===this.x&&t.y===this.y},fromArray:function fromArray(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this},toArray:function toArray(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t},fromBufferAttribute:function fromBufferAttribute(t,e,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this},rotateAround:function rotateAround(t,e){var n=_Mathcos(e),i=_Mathsin(e),r=this.x-t.x,o=this.y-t.y;return this.x=r*n-o*i+t.x,this.y=r*i+o*n+t.y,this}}),Object.assign(o.prototype,{isMatrix4:!0,set:function set(t,e,n,i,r,o,a,s,l,c,h,u,p,d,f,m){var _=this.elements;return _[0]=t,_[4]=e,_[8]=n,_[12]=i,_[1]=r,_[5]=o,_[9]=a,_[13]=s,_[2]=l,_[6]=c,_[10]=h,_[14]=u,_[3]=p,_[7]=d,_[11]=f,_[15]=m,this},identity:function identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function clone(){return new o().fromArray(this.elements)},copy:function copy(t){var e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this},copyPosition:function copyPosition(t){var e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this},extractBasis:function extractBasis(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function makeBasis(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this},extractRotation:function(){var t=new s;return function(e){var n=this.elements,i=e.elements,r=1/t.setFromMatrixColumn(e,0).length(),o=1/t.setFromMatrixColumn(e,1).length(),a=1/t.setFromMatrixColumn(e,2).length();return n[0]=i[0]*r,n[1]=i[1]*r,n[2]=i[2]*r,n[4]=i[4]*o,n[5]=i[5]*o,n[6]=i[6]*o,n[8]=i[8]*a,n[9]=i[9]*a,n[10]=i[10]*a,this}}(),makeRotationFromEuler:function makeRotationFromEuler(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var e=this.elements,n=t.x,i=t.y,r=t.z,o=_Mathcos(n),a=_Mathsin(n),s=_Mathcos(i),l=_Mathsin(i),c=_Mathcos(r),h=_Mathsin(r);if("XYZ"===t.order){var u=o*c,p=o*h,d=a*c,f=a*h;e[0]=s*c,e[4]=-s*h,e[8]=l,e[1]=p+d*l,e[5]=u-f*l,e[9]=-a*s,e[2]=f-u*l,e[6]=d+p*l,e[10]=o*s}else if("YXZ"===t.order){var m=s*c,_=s*h,g=l*c,y=l*h;e[0]=m+y*a,e[4]=g*a-_,e[8]=o*l,e[1]=o*h,e[5]=o*c,e[9]=-a,e[2]=_*a-g,e[6]=y+m*a,e[10]=o*s}else if("ZXY"===t.order){var m=s*c,_=s*h,g=l*c,y=l*h;e[0]=m-y*a,e[4]=-o*h,e[8]=g+_*a,e[1]=_+g*a,e[5]=o*c,e[9]=y-m*a,e[2]=-o*l,e[6]=a,e[10]=o*s}else if("ZYX"===t.order){var u=o*c,p=o*h,d=a*c,f=a*h;e[0]=s*c,e[4]=d*l-p,e[8]=u*l+f,e[1]=s*h,e[5]=f*l+u,e[9]=p*l-d,e[2]=-l,e[6]=a*s,e[10]=o*s}else if("YZX"===t.order){var v=o*s,b=o*l,w=a*s,x=a*l;e[0]=s*c,e[4]=x-v*h,e[8]=w*h+b,e[1]=h,e[5]=o*c,e[9]=-a*c,e[2]=-l*c,e[6]=b*h+w,e[10]=v-x*h}else if("XZY"===t.order){var v=o*s,b=o*l,w=a*s,x=a*l;e[0]=s*c,e[4]=-h,e[8]=l*c,e[1]=v*h+x,e[5]=o*c,e[9]=b*h-w,e[2]=w*h-b,e[6]=a*c,e[10]=x*h+v}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromQuaternion:function makeRotationFromQuaternion(t){var e=this.elements,n=t._x,i=t._y,r=t._z,o=t._w,a=n+n,s=i+i,l=r+r,c=n*a,h=n*s,u=n*l,p=i*s,d=i*l,f=r*l,m=o*a,_=o*s,g=o*l;return e[0]=1-(p+f),e[4]=h-g,e[8]=u+_,e[1]=h+g,e[5]=1-(c+f),e[9]=d-m,e[2]=u-_,e[6]=d+m,e[10]=1-(c+p),e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},lookAt:function(){var t=new s,e=new s,n=new s;return function(i,r,o){var a=this.elements;return n.subVectors(i,r),0===n.lengthSq()&&(n.z=1),n.normalize(),t.crossVectors(o,n),0===t.lengthSq()&&(1===_Mathabs(o.z)?n.x+=1e-4:n.z+=1e-4,n.normalize(),t.crossVectors(o,n)),t.normalize(),e.crossVectors(n,t),a[0]=t.x,a[4]=e.x,a[8]=n.x,a[1]=t.y,a[5]=e.y,a[9]=n.y,a[2]=t.z,a[6]=e.z,a[10]=n.z,this}}(),multiply:function multiply(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)},premultiply:function premultiply(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function multiplyMatrices(t,e){var n=t.elements,i=e.elements,r=this.elements,o=n[0],a=n[4],s=n[8],l=n[12],c=n[1],h=n[5],u=n[9],p=n[13],d=n[2],f=n[6],m=n[10],_=n[14],g=n[3],y=n[7],v=n[11],b=n[15],w=i[0],x=i[4],S=i[8],E=i[12],M=i[1],T=i[5],A=i[9],P=i[13],C=i[2],I=i[6],L=i[10],R=i[14],O=i[3],k=i[7],D=i[11],F=i[15];return r[0]=o*w+a*M+s*C+l*O,r[4]=o*x+a*T+s*I+l*k,r[8]=o*S+a*A+s*L+l*D,r[12]=o*E+a*P+s*R+l*F,r[1]=c*w+h*M+u*C+p*O,r[5]=c*x+h*T+u*I+p*k,r[9]=c*S+h*A+u*L+p*D,r[13]=c*E+h*P+u*R+p*F,r[2]=d*w+f*M+m*C+_*O,r[6]=d*x+f*T+m*I+_*k,r[10]=d*S+f*A+m*L+_*D,r[14]=d*E+f*P+m*R+_*F,r[3]=g*w+y*M+v*C+b*O,r[7]=g*x+y*T+v*I+b*k,r[11]=g*S+y*A+v*L+b*D,r[15]=g*E+y*P+v*R+b*F,this},multiplyScalar:function multiplyScalar(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},applyToBufferAttribute:function(){var t=new s;return function(e){for(var n=0,i=e.count;n<i;n++){t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.applyMatrix4(this),e.setXYZ(n,t.x,t.y,t.z)}return e}}(),determinant:function determinant(){var t=this.elements,e=t[0],n=t[4],i=t[8],r=t[12],o=t[1],a=t[5],s=t[9],l=t[13],c=t[2],h=t[6],u=t[10],p=t[14];return t[3]*(+r*s*h-i*l*h-r*a*u+n*l*u+i*a*p-n*s*p)+t[7]*(+e*s*p-e*l*u+r*o*u-i*o*p+i*l*c-r*s*c)+t[11]*(+e*l*h-e*a*p-r*o*h+n*o*p+r*a*c-n*l*c)+t[15]*(-i*a*c-e*s*h+e*a*u+i*o*h-n*o*u+n*s*c)},transpose:function transpose(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},setPosition:function setPosition(t){var e=this.elements;return e[12]=t.x,e[13]=t.y,e[14]=t.z,this},getInverse:function getInverse(t,e){var n=this.elements,i=t.elements,r=i[0],o=i[1],a=i[2],s=i[3],l=i[4],c=i[5],h=i[6],u=i[7],p=i[8],d=i[9],f=i[10],m=i[11],_=i[12],g=i[13],y=i[14],v=i[15],b=d*y*u-g*f*u+g*h*m-c*y*m-d*h*v+c*f*v,w=_*f*u-p*y*u-_*h*m+l*y*m+p*h*v-l*f*v,x=p*g*u-_*d*u+_*c*m-l*g*m-p*c*v+l*d*v,S=_*d*h-p*g*h-_*c*f+l*g*f+p*c*y-l*d*y,E=r*b+o*w+a*x+s*S;if(0===E){var M="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(!0===e)throw new Error(M);return console.warn(M),this.identity()}var T=1/E;return n[0]=b*T,n[1]=(g*f*s-d*y*s-g*a*m+o*y*m+d*a*v-o*f*v)*T,n[2]=(c*y*s-g*h*s+g*a*u-o*y*u-c*a*v+o*h*v)*T,n[3]=(d*h*s-c*f*s-d*a*u+o*f*u+c*a*m-o*h*m)*T,n[4]=w*T,n[5]=(p*y*s-_*f*s+_*a*m-r*y*m-p*a*v+r*f*v)*T,n[6]=(_*h*s-l*y*s-_*a*u+r*y*u+l*a*v-r*h*v)*T,n[7]=(l*f*s-p*h*s+p*a*u-r*f*u-l*a*m+r*h*m)*T,n[8]=x*T,n[9]=(_*d*s-p*g*s-_*o*m+r*g*m+p*o*v-r*d*v)*T,n[10]=(l*g*s-_*c*s+_*o*u-r*g*u-l*o*v+r*c*v)*T,n[11]=(p*c*s-l*d*s-p*o*u+r*d*u+l*o*m-r*c*m)*T,n[12]=S*T,n[13]=(p*g*a-_*d*a+_*o*f-r*g*f-p*o*y+r*d*y)*T,n[14]=(_*c*a-l*g*a-_*o*h+r*g*h+l*o*y-r*c*y)*T,n[15]=(l*d*a-p*c*a+p*o*h-r*d*h-l*o*f+r*c*f)*T,this},scale:function scale(t){var e=this.elements,n=t.x,i=t.y,r=t.z;return e[0]*=n,e[4]*=i,e[8]*=r,e[1]*=n,e[5]*=i,e[9]*=r,e[2]*=n,e[6]*=i,e[10]*=r,e[3]*=n,e[7]*=i,e[11]*=r,this},getMaxScaleOnAxis:function getMaxScaleOnAxis(){var t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],i=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return _Mathsqrt(_Mathmax(e,n,i))},makeTranslation:function makeTranslation(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this},makeRotationX:function makeRotationX(t){var e=_Mathcos(t),n=_Mathsin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this},makeRotationY:function makeRotationY(t){var e=_Mathcos(t),n=_Mathsin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this},makeRotationZ:function makeRotationZ(t){var e=_Mathcos(t),n=_Mathsin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function makeRotationAxis(t,e){var n=_Mathcos(e),i=_Mathsin(e),r=1-n,o=t.x,a=t.y,s=t.z,l=r*o,c=r*a;return this.set(l*o+n,l*a-i*s,l*s+i*a,0,l*a+i*s,c*a+n,c*s-i*o,0,l*s-i*a,c*s+i*o,r*s*s+n,0,0,0,0,1),this},makeScale:function makeScale(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this},makeShear:function makeShear(t,e,n){return this.set(1,e,n,0,t,1,n,0,t,e,1,0,0,0,0,1),this},compose:function compose(t,e,n){return this.makeRotationFromQuaternion(e),this.scale(n),this.setPosition(t),this},decompose:function(){var t=new s,e=new o;return function(n,i,r){var o=this.elements,a=t.set(o[0],o[1],o[2]).length(),s=t.set(o[4],o[5],o[6]).length(),l=t.set(o[8],o[9],o[10]).length();0>this.determinant()&&(a=-a),n.x=o[12],n.y=o[13],n.z=o[14],e.copy(this);var c=1/a,h=1/s,u=1/l;return e.elements[0]*=c,e.elements[1]*=c,e.elements[2]*=c,e.elements[4]*=h,e.elements[5]*=h,e.elements[6]*=h,e.elements[8]*=u,e.elements[9]*=u,e.elements[10]*=u,i.setFromRotationMatrix(e),r.x=a,r.y=s,r.z=l,this}}(),makePerspective:function makePerspective(t,e,n,i,r,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var a=this.elements;return a[0]=2*r/(e-t),a[4]=0,a[8]=(e+t)/(e-t),a[12]=0,a[1]=0,a[5]=2*r/(n-i),a[9]=(n+i)/(n-i),a[13]=0,a[2]=0,a[6]=0,a[10]=-(o+r)/(o-r),a[14]=-2*o*r/(o-r),a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makeOrthographic:function makeOrthographic(t,e,n,i,r,o){var a=this.elements,s=1/(e-t),l=1/(n-i),c=1/(o-r);return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-((e+t)*s),a[1]=0,a[5]=2*l,a[9]=0,a[13]=-((n+i)*l),a[2]=0,a[6]=0,a[10]=-2*c,a[14]=-((o+r)*c),a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},equals:function equals(t){for(var e=this.elements,n=t.elements,i=0;16>i;i++){if(e[i]!==n[i])return!1}return!0},fromArray:function fromArray(t,e){void 0===e&&(e=0);for(var n=0;16>n;n++){this.elements[n]=t[n+e]}return this},toArray:function toArray(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}),Object.assign(a,{slerp:function slerp(t,e,n,i){return n.copy(t).slerp(e,i)},slerpFlat:function slerpFlat(t,e,n,i,r,o,a){var s=n[i+0],l=n[i+1],c=n[i+2],h=n[i+3],u=r[o+0],p=r[o+1],d=r[o+2],f=r[o+3];if(h!==f||s!==u||l!==p||c!==d){var m=1-a,_=s*u+l*p+c*d+h*f,g=0<=_?1:-1,y=1-_*_;if(y>_NumberEPSILON){var v=_Mathsqrt(y),b=_Mathatan(v,_*g);m=_Mathsin(m*b)/v,a=_Mathsin(a*b)/v}var w=a*g;if(s=s*m+u*w,l=l*m+p*w,c=c*m+d*w,h=h*m+f*w,m===1-a){var x=1/_Mathsqrt(s*s+l*l+c*c+h*h);s*=x,l*=x,c*=x,h*=x}}t[e]=s,t[e+1]=l,t[e+2]=c,t[e+3]=h}}),Object.defineProperties(a.prototype,{x:{get:function get(){return this._x},set:function set(t){this._x=t,this.onChangeCallback()}},y:{get:function get(){return this._y},set:function set(t){this._y=t,this.onChangeCallback()}},z:{get:function get(){return this._z},set:function set(t){this._z=t,this.onChangeCallback()}},w:{get:function get(){return this._w},set:function set(t){this._w=t,this.onChangeCallback()}}}),Object.assign(a.prototype,{set:function set(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._w=i,this.onChangeCallback(),this},clone:function clone(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this.onChangeCallback(),this},setFromEuler:function setFromEuler(t,e){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=t._x,i=t._y,r=t._z,o=t.order,a=_Mathcos,s=_Mathsin,l=a(n/2),c=a(i/2),h=a(r/2),u=s(n/2),p=s(i/2),d=s(r/2);return"XYZ"===o?(this._x=u*c*h+l*p*d,this._y=l*p*h-u*c*d,this._z=l*c*d+u*p*h,this._w=l*c*h-u*p*d):"YXZ"===o?(this._x=u*c*h+l*p*d,this._y=l*p*h-u*c*d,this._z=l*c*d-u*p*h,this._w=l*c*h+u*p*d):"ZXY"===o?(this._x=u*c*h-l*p*d,this._y=l*p*h+u*c*d,this._z=l*c*d+u*p*h,this._w=l*c*h-u*p*d):"ZYX"===o?(this._x=u*c*h-l*p*d,this._y=l*p*h+u*c*d,this._z=l*c*d-u*p*h,this._w=l*c*h+u*p*d):"YZX"===o?(this._x=u*c*h+l*p*d,this._y=l*p*h+u*c*d,this._z=l*c*d-u*p*h,this._w=l*c*h-u*p*d):"XZY"===o&&(this._x=u*c*h-l*p*d,this._y=l*p*h-u*c*d,this._z=l*c*d+u*p*h,this._w=l*c*h+u*p*d),!1!==e&&this.onChangeCallback(),this},setFromAxisAngle:function setFromAxisAngle(t,e){var n=e/2,i=_Mathsin(n);return this._x=t.x*i,this._y=t.y*i,this._z=t.z*i,this._w=_Mathcos(n),this.onChangeCallback(),this},setFromRotationMatrix:function setFromRotationMatrix(t){var e,n=t.elements,i=n[0],r=n[4],o=n[8],a=n[1],s=n[5],l=n[9],c=n[2],h=n[6],u=n[10],p=i+s+u;return 0<p?(e=.5/_Mathsqrt(p+1),this._w=.25/e,this._x=(h-l)*e,this._y=(o-c)*e,this._z=(a-r)*e):i>s&&i>u?(e=2*_Mathsqrt(1+i-s-u),this._w=(h-l)/e,this._x=.25*e,this._y=(r+a)/e,this._z=(o+c)/e):s>u?(e=2*_Mathsqrt(1+s-i-u),this._w=(o-c)/e,this._x=(r+a)/e,this._y=.25*e,this._z=(l+h)/e):(e=2*_Mathsqrt(1+u-i-s),this._w=(a-r)/e,this._x=(o+c)/e,this._y=(l+h)/e,this._z=.25*e),this.onChangeCallback(),this},setFromUnitVectors:function(){var t,e=new s;return function(n,i){return void 0===e&&(e=new s),1e-6>(t=n.dot(i)+1)?(t=0,_Mathabs(n.x)>_Mathabs(n.z)?e.set(-n.y,n.x,0):e.set(0,-n.z,n.y)):e.crossVectors(n,i),this._x=e.x,this._y=e.y,this._z=e.z,this._w=t,this.normalize()}}(),inverse:function inverse(){return this.conjugate()},conjugate:function conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function length(){return _Mathsqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function normalize(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this.onChangeCallback(),this},multiply:function multiply(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)},premultiply:function premultiply(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function multiplyQuaternions(t,e){var n=t._x,i=t._y,r=t._z,o=t._w,a=e._x,s=e._y,l=e._z,c=e._w;return this._x=n*c+o*a+i*l-r*s,this._y=i*c+o*s+r*a-n*l,this._z=r*c+o*l+n*s-i*a,this._w=o*c-n*a-i*s-r*l,this.onChangeCallback(),this},slerp:function slerp(t,e){if(0===e)return this;if(1===e)return this.copy(t);var n=this._x,i=this._y,r=this._z,o=this._w,a=o*t._w+n*t._x+i*t._y+r*t._z;if(0>a?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),1<=a)return this._w=o,this._x=n,this._y=i,this._z=r,this;var s=_Mathsqrt(1-a*a);if(.001>_Mathabs(s))return this._w=.5*(o+this._w),this._x=.5*(n+this._x),this._y=.5*(i+this._y),this._z=.5*(r+this._z),this;var l=_Mathatan(s,a),c=_Mathsin((1-e)*l)/s,h=_Mathsin(e*l)/s;return this._w=o*c+this._w*h,this._x=n*c+this._x*h,this._y=i*c+this._y*h,this._z=r*c+this._z*h,this.onChangeCallback(),this},equals:function equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function fromArray(t,e){return void 0===e&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this.onChangeCallback(),this},toArray:function toArray(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t},onChange:function onChange(t){return this.onChangeCallback=t,this},onChangeCallback:function onChangeCallback(){}}),Object.assign(s.prototype,{isVector3:!0,set:function set(t,e,n){return this.x=t,this.y=e,this.z=n,this},setScalar:function setScalar(t){return this.x=t,this.y=t,this.z=t,this},setX:function setX(t){return this.x=t,this},setY:function setY(t){return this.y=t,this},setZ:function setZ(t){return this.z=t,this},setComponent:function setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t);}return this},getComponent:function getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t);}},clone:function clone(){return new this.constructor(this.x,this.y,this.z)},copy:function copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function add(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addScaledVector:function addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},sub:function sub(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function multiply(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyEuler:function(){var t=new a;return function(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(t.setFromEuler(e))}}(),applyAxisAngle:function(){var t=new a;return function(e,n){return this.applyQuaternion(t.setFromAxisAngle(e,n))}}(),applyMatrix3:function applyMatrix3(t){var e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6]*i,this.y=r[1]*e+r[4]*n+r[7]*i,this.z=r[2]*e+r[5]*n+r[8]*i,this},applyMatrix4:function applyMatrix4(t){var e=this.x,n=this.y,i=this.z,r=t.elements,o=1/(r[3]*e+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*e+r[4]*n+r[8]*i+r[12])*o,this.y=(r[1]*e+r[5]*n+r[9]*i+r[13])*o,this.z=(r[2]*e+r[6]*n+r[10]*i+r[14])*o,this},applyQuaternion:function applyQuaternion(t){var e=this.x,n=this.y,i=this.z,r=t.x,o=t.y,a=t.z,s=t.w,l=s*e+o*i-a*n,c=s*n+a*e-r*i,h=s*i+r*n-o*e,u=-r*e-o*n-a*i;return this.x=l*s+u*-r+c*-a-h*-o,this.y=c*s+u*-o+h*-r-l*-a,this.z=h*s+u*-a+l*-o-c*-r,this},project:function(){var t=new o;return function(e){return t.multiplyMatrices(e.projectionMatrix,t.getInverse(e.matrixWorld)),this.applyMatrix4(t)}}(),unproject:function(){var t=new o;return function(e){return t.multiplyMatrices(e.matrixWorld,t.getInverse(e.projectionMatrix)),this.applyMatrix4(t)}}(),transformDirection:function transformDirection(t){var e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[4]*n+r[8]*i,this.y=r[1]*e+r[5]*n+r[9]*i,this.z=r[2]*e+r[6]*n+r[10]*i,this.normalize()},divide:function divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function divideScalar(t){return this.multiplyScalar(1/t)},min:function min(t){return this.x=_Mathmin(this.x,t.x),this.y=_Mathmin(this.y,t.y),this.z=_Mathmin(this.z,t.z),this},max:function max(t){return this.x=_Mathmax(this.x,t.x),this.y=_Mathmax(this.y,t.y),this.z=_Mathmax(this.z,t.z),this},clamp:function clamp(t,e){return this.x=_Mathmax(t.x,_Mathmin(e.x,this.x)),this.y=_Mathmax(t.y,_Mathmin(e.y,this.y)),this.z=_Mathmax(t.z,_Mathmin(e.z,this.z)),this},clampScalar:function(){var t=new s,e=new s;return function(n,i){return t.set(n,n,n),e.set(i,i,i),this.clamp(t,e)}}(),clampLength:function clampLength(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(_Mathmax(t,_Mathmin(e,n)))},floor:function floor(){return this.x=_Mathfloor(this.x),this.y=_Mathfloor(this.y),this.z=_Mathfloor(this.z),this},ceil:function ceil(){return this.x=_Mathceil(this.x),this.y=_Mathceil(this.y),this.z=_Mathceil(this.z),this},round:function round(){return this.x=_Mathround(this.x),this.y=_Mathround(this.y),this.z=_Mathround(this.z),this},roundToZero:function roundToZero(){return this.x=0>this.x?_Mathceil(this.x):_Mathfloor(this.x),this.y=0>this.y?_Mathceil(this.y):_Mathfloor(this.y),this.z=0>this.z?_Mathceil(this.z):_Mathfloor(this.z),this},negate:function negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function dot(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function length(){return _Mathsqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function manhattanLength(){return _Mathabs(this.x)+_Mathabs(this.y)+_Mathabs(this.z)},normalize:function normalize(){return this.divideScalar(this.length()||1)},setLength:function setLength(t){return this.normalize().multiplyScalar(t)},lerp:function lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},lerpVectors:function lerpVectors(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},cross:function cross(t,e){return void 0!==e?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)},crossVectors:function crossVectors(t,e){var n=t.x,i=t.y,r=t.z,o=e.x,a=e.y,s=e.z;return this.x=i*s-r*a,this.y=r*o-n*s,this.z=n*a-i*o,this},projectOnVector:function projectOnVector(t){var e=t.dot(this)/t.lengthSq();return this.copy(t).multiplyScalar(e)},projectOnPlane:function(){var t=new s;return function(e){return t.copy(this).projectOnVector(e),this.sub(t)}}(),reflect:function(){var t=new s;return function(e){return this.sub(t.copy(e).multiplyScalar(2*this.dot(e)))}}(),angleTo:function angleTo(t){var e=this.dot(t)/_Mathsqrt(this.lengthSq()*t.lengthSq());return _Mathacos(Ms.clamp(e,-1,1))},distanceTo:function distanceTo(t){return _Mathsqrt(this.distanceToSquared(t))},distanceToSquared:function distanceToSquared(t){var e=this.x-t.x,n=this.y-t.y,i=this.z-t.z;return e*e+n*n+i*i},manhattanDistanceTo:function manhattanDistanceTo(t){return _Mathabs(this.x-t.x)+_Mathabs(this.y-t.y)+_Mathabs(this.z-t.z)},setFromSpherical:function setFromSpherical(t){var e=_Mathsin(t.phi)*t.radius;return this.x=e*_Mathsin(t.theta),this.y=_Mathcos(t.phi)*t.radius,this.z=e*_Mathcos(t.theta),this},setFromCylindrical:function setFromCylindrical(t){return this.x=t.radius*_Mathsin(t.theta),this.y=t.y,this.z=t.radius*_Mathcos(t.theta),this},setFromMatrixPosition:function setFromMatrixPosition(t){var e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this},setFromMatrixScale:function setFromMatrixScale(t){var e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),i=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=i,this},setFromMatrixColumn:function setFromMatrixColumn(t,e){return this.fromArray(t.elements,4*e)},equals:function equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function fromArray(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},toArray:function toArray(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},fromBufferAttribute:function fromBufferAttribute(t,e,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}}),Object.assign(l.prototype,{isMatrix3:!0,set:function set(t,e,n,i,r,o,a,s,l){var c=this.elements;return c[0]=t,c[1]=i,c[2]=a,c[3]=e,c[4]=r,c[5]=s,c[6]=n,c[7]=o,c[8]=l,this},identity:function identity(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function clone(){return new this.constructor().fromArray(this.elements)},copy:function copy(t){var e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this},setFromMatrix4:function setFromMatrix4(t){var e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this},applyToBufferAttribute:function(){var t=new s;return function(e){for(var n=0,i=e.count;n<i;n++){t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.applyMatrix3(this),e.setXYZ(n,t.x,t.y,t.z)}return e}}(),multiply:function multiply(t){return this.multiplyMatrices(this,t)},premultiply:function premultiply(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function multiplyMatrices(t,e){var n=t.elements,i=e.elements,r=this.elements,o=n[0],a=n[3],s=n[6],l=n[1],c=n[4],h=n[7],u=n[2],p=n[5],d=n[8],f=i[0],m=i[3],_=i[6],g=i[1],y=i[4],v=i[7],b=i[2],w=i[5],x=i[8];return r[0]=o*f+a*g+s*b,r[3]=o*m+a*y+s*w,r[6]=o*_+a*v+s*x,r[1]=l*f+c*g+h*b,r[4]=l*m+c*y+h*w,r[7]=l*_+c*v+h*x,r[2]=u*f+p*g+d*b,r[5]=u*m+p*y+d*w,r[8]=u*_+p*v+d*x,this},multiplyScalar:function multiplyScalar(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},determinant:function determinant(){var t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],o=t[4],a=t[5],s=t[6],l=t[7],c=t[8];return e*o*c-e*a*l-n*r*c+n*a*s+i*r*l-i*o*s},getInverse:function getInverse(t,e){t&&t.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var n=t.elements,i=this.elements,r=n[0],o=n[1],a=n[2],s=n[3],l=n[4],c=n[5],h=n[6],u=n[7],p=n[8],d=p*l-c*u,f=c*h-p*s,m=u*s-l*h,_=r*d+o*f+a*m;if(0===_){var g="THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";if(!0===e)throw new Error(g);return console.warn(g),this.identity()}var y=1/_;return i[0]=d*y,i[1]=(a*u-p*o)*y,i[2]=(c*o-a*l)*y,i[3]=f*y,i[4]=(p*r-a*h)*y,i[5]=(a*s-c*r)*y,i[6]=m*y,i[7]=(o*h-u*r)*y,i[8]=(l*r-o*s)*y,this},transpose:function transpose(){var t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},getNormalMatrix:function getNormalMatrix(t){return this.setFromMatrix4(t).getInverse(this).transpose()},transposeIntoArray:function transposeIntoArray(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this},setUvTransform:function setUvTransform(t,e,n,i,r,o,a){var s=_Mathcos(r),l=_Mathsin(r);this.set(n*s,n*l,-n*(s*o+l*a)+o+t,-i*l,i*s,-i*(-l*o+s*a)+a+e,0,0,1)},scale:function scale(t,e){var n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=e,n[4]*=e,n[7]*=e,this},rotate:function rotate(t){var e=_Mathcos(t),n=_Mathsin(t),i=this.elements,r=i[0],o=i[3],a=i[6],s=i[1],l=i[4],c=i[7];return i[0]=e*r+n*s,i[3]=e*o+n*l,i[6]=e*a+n*c,i[1]=-n*r+e*s,i[4]=-n*o+e*l,i[7]=-n*a+e*c,this},translate:function translate(t,e){var n=this.elements;return n[0]+=t*n[2],n[3]+=t*n[5],n[6]+=t*n[8],n[1]+=e*n[2],n[4]+=e*n[5],n[7]+=e*n[8],this},equals:function equals(t){for(var e=this.elements,n=t.elements,i=0;9>i;i++){if(e[i]!==n[i])return!1}return!0},fromArray:function fromArray(t,e){void 0===e&&(e=0);for(var n=0;9>n;n++){this.elements[n]=t[n+e]}return this},toArray:function toArray(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}});var Ts=0;c.DEFAULT_IMAGE=void 0,c.DEFAULT_MAPPING=300,c.prototype=Object.assign(Object.create(i.prototype),{constructor:c,isTexture:!0,updateMatrix:function updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function clone(){return new this.constructor().copy(this)},copy:function copy(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this},toJSON:function toJSON(t){var e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var i=this.image;void 0===i.uuid&&(i.uuid=Ms.generateUUID()),e||void 0!==t.images[i.uuid]||(t.images[i.uuid]={uuid:i.uuid,url:function(t){var e;if(babelHelpers.instanceof(t,HTMLCanvasElement))e=t;else{(e=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")).width=t.width,e.height=t.height;var n=e.getContext("2d");babelHelpers.instanceof(t,ImageData)?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height)}return 2048<e.width||2048<e.height?e.toDataURL("image/jpeg",.6):e.toDataURL("image/png")}(i)}),n.image=i.uuid}return e||(t.textures[this.uuid]=n),n},dispose:function dispose(){this.dispatchEvent({type:"dispose"})},transformUv:function transformUv(t){if(300===this.mapping){if(t.applyMatrix3(this.matrix),0>t.x||1<t.x)switch(this.wrapS){case fa:t.x=t.x-_Mathfloor(t.x);break;case ma:t.x=0>t.x?0:1;break;case _a:1===_Mathabs(_Mathfloor(t.x)%2)?t.x=_Mathceil(t.x)-t.x:t.x=t.x-_Mathfloor(t.x);}if(0>t.y||1<t.y)switch(this.wrapT){case fa:t.y=t.y-_Mathfloor(t.y);break;case ma:t.y=0>t.y?0:1;break;case _a:1===_Mathabs(_Mathfloor(t.y)%2)?t.y=_Mathceil(t.y)-t.y:t.y=t.y-_Mathfloor(t.y);}this.flipY&&(t.y=1-t.y)}}}),Object.defineProperty(c.prototype,"needsUpdate",{set:function set(t){!0===t&&this.version++}}),Object.assign(h.prototype,{isVector4:!0,set:function set(t,e,n,i){return this.x=t,this.y=e,this.z=n,this.w=i,this},setScalar:function setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this},setX:function setX(t){return this.x=t,this},setY:function setY(t){return this.y=t,this},setZ:function setZ(t){return this.z=t,this},setW:function setW(t){return this.w=t,this},setComponent:function setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t);}return this},getComponent:function getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t);}},clone:function clone(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},add:function add(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this},addScaledVector:function addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this},sub:function sub(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subScalar:function subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},subVectors:function subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this},multiplyScalar:function multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},applyMatrix4:function applyMatrix4(t){var e=this.x,n=this.y,i=this.z,r=this.w,o=t.elements;return this.x=o[0]*e+o[4]*n+o[8]*i+o[12]*r,this.y=o[1]*e+o[5]*n+o[9]*i+o[13]*r,this.z=o[2]*e+o[6]*n+o[10]*i+o[14]*r,this.w=o[3]*e+o[7]*n+o[11]*i+o[15]*r,this},divideScalar:function divideScalar(t){return this.multiplyScalar(1/t)},setAxisAngleFromQuaternion:function setAxisAngleFromQuaternion(t){this.w=2*_Mathacos(t.w);var e=_Mathsqrt(1-t.w*t.w);return 1e-4>e?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this},setAxisAngleFromRotationMatrix:function setAxisAngleFromRotationMatrix(t){var e,n,i,r,o=t.elements,a=o[0],s=o[4],l=o[8],c=o[1],h=o[5],u=o[9],p=o[2],d=o[6],f=o[10];if(.01>_Mathabs(s-c)&&.01>_Mathabs(l-p)&&.01>_Mathabs(u-d)){if(.1>_Mathabs(s+c)&&.1>_Mathabs(l+p)&&.1>_Mathabs(u+d)&&.1>_Mathabs(a+h+f-3))return this.set(1,0,0,0),this;e=_MathPI;var m=(a+1)/2,_=(h+1)/2,g=(f+1)/2,y=(s+c)/4,v=(l+p)/4,b=(u+d)/4;return m>_&&m>g?.01>m?(n=0,i=.707106781,r=.707106781):(i=y/(n=_Mathsqrt(m)),r=v/n):_>g?.01>_?(n=.707106781,i=0,r=.707106781):(n=y/(i=_Mathsqrt(_)),r=b/i):.01>g?(n=.707106781,i=.707106781,r=0):(n=v/(r=_Mathsqrt(g)),i=b/r),this.set(n,i,r,e),this}var w=_Mathsqrt((d-u)*(d-u)+(l-p)*(l-p)+(c-s)*(c-s));return .001>_Mathabs(w)&&(w=1),this.x=(d-u)/w,this.y=(l-p)/w,this.z=(c-s)/w,this.w=_Mathacos((a+h+f-1)/2),this},min:function min(t){return this.x=_Mathmin(this.x,t.x),this.y=_Mathmin(this.y,t.y),this.z=_Mathmin(this.z,t.z),this.w=_Mathmin(this.w,t.w),this},max:function max(t){return this.x=_Mathmax(this.x,t.x),this.y=_Mathmax(this.y,t.y),this.z=_Mathmax(this.z,t.z),this.w=_Mathmax(this.w,t.w),this},clamp:function clamp(t,e){return this.x=_Mathmax(t.x,_Mathmin(e.x,this.x)),this.y=_Mathmax(t.y,_Mathmin(e.y,this.y)),this.z=_Mathmax(t.z,_Mathmin(e.z,this.z)),this.w=_Mathmax(t.w,_Mathmin(e.w,this.w)),this},clampScalar:function(){var t,e;return function(n,i){return void 0===t&&(t=new h,e=new h),t.set(n,n,n,n),e.set(i,i,i,i),this.clamp(t,e)}}(),clampLength:function clampLength(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(_Mathmax(t,_Mathmin(e,n)))},floor:function floor(){return this.x=_Mathfloor(this.x),this.y=_Mathfloor(this.y),this.z=_Mathfloor(this.z),this.w=_Mathfloor(this.w),this},ceil:function ceil(){return this.x=_Mathceil(this.x),this.y=_Mathceil(this.y),this.z=_Mathceil(this.z),this.w=_Mathceil(this.w),this},round:function round(){return this.x=_Mathround(this.x),this.y=_Mathround(this.y),this.z=_Mathround(this.z),this.w=_Mathround(this.w),this},roundToZero:function roundToZero(){return this.x=0>this.x?_Mathceil(this.x):_Mathfloor(this.x),this.y=0>this.y?_Mathceil(this.y):_Mathfloor(this.y),this.z=0>this.z?_Mathceil(this.z):_Mathfloor(this.z),this.w=0>this.w?_Mathceil(this.w):_Mathfloor(this.w),this},negate:function negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function length(){return _Mathsqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function manhattanLength(){return _Mathabs(this.x)+_Mathabs(this.y)+_Mathabs(this.z)+_Mathabs(this.w)},normalize:function normalize(){return this.divideScalar(this.length()||1)},setLength:function setLength(t){return this.normalize().multiplyScalar(t)},lerp:function lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this},lerpVectors:function lerpVectors(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},equals:function equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function fromArray(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this},toArray:function toArray(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t},fromBufferAttribute:function fromBufferAttribute(t,e,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}}),u.prototype=Object.assign(Object.create(i.prototype),{constructor:u,isWebGLRenderTarget:!0,setSize:function setSize(t,e){this.width===t&&this.height===e||(this.width=t,this.height=e,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)},clone:function clone(){return new this.constructor().copy(this)},copy:function copy(t){return this.width=t.width,this.height=t.height,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this},dispose:function dispose(){this.dispatchEvent({type:"dispose"})}}),p.prototype=Object.create(u.prototype),p.prototype.constructor=p,p.prototype.isWebGLRenderTargetCube=!0,d.prototype=Object.create(c.prototype),d.prototype.constructor=d,d.prototype.isDataTexture=!0,Object.assign(f.prototype,{isBox3:!0,set:function set(t,e){return this.min.copy(t),this.max.copy(e),this},setFromArray:function setFromArray(t){for(var e=1/0,n=1/0,i=1/0,r=-1/0,o=-1/0,a=-1/0,s=0,l=t.length;s<l;s+=3){var c=t[s],h=t[s+1],u=t[s+2];c<e&&(e=c),h<n&&(n=h),u<i&&(i=u),c>r&&(r=c),h>o&&(o=h),u>a&&(a=u)}return this.min.set(e,n,i),this.max.set(r,o,a),this},setFromBufferAttribute:function setFromBufferAttribute(t){for(var e=1/0,n=1/0,i=1/0,r=-1/0,o=-1/0,a=-1/0,s=0,l=t.count;s<l;s++){var c=t.getX(s),h=t.getY(s),u=t.getZ(s);c<e&&(e=c),h<n&&(n=h),u<i&&(i=u),c>r&&(r=c),h>o&&(o=h),u>a&&(a=u)}return this.min.set(e,n,i),this.max.set(r,o,a),this},setFromPoints:function setFromPoints(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++){this.expandByPoint(t[e])}return this},setFromCenterAndSize:function(){var t=new s;return function(e,n){var i=t.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}}(),setFromObject:function setFromObject(t){return this.makeEmpty(),this.expandByObject(t)},clone:function clone(){return new this.constructor().copy(this)},copy:function copy(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function getCenter(t){return void 0===t&&(console.warn("THREE.Box3: .getCenter() target is now required"),t=new s),this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function getSize(t){return void 0===t&&(console.warn("THREE.Box3: .getSize() target is now required"),t=new s),this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},expandByPoint:function expandByPoint(t){return this.min.min(t),this.max.max(t),this},expandByVector:function expandByVector(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this},expandByObject:function(){function t(t){var o=t.geometry;if(void 0!==o)if(o.isGeometry){var a=o.vertices;for(n=0,i=a.length;n<i;n++){r.copy(a[n]),r.applyMatrix4(t.matrixWorld),e.expandByPoint(r)}}else if(o.isBufferGeometry){var s=o.attributes.position;if(void 0!==s)for(n=0,i=s.count;n<i;n++){r.fromBufferAttribute(s,n).applyMatrix4(t.matrixWorld),e.expandByPoint(r)}}}var e,n,i,r=new s;return function(n){return e=this,n.updateMatrixWorld(!0),n.traverse(t),this}}(),containsPoint:function containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)},containsBox:function containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z},getParameter:function getParameter(t,e){return void 0===e&&(console.warn("THREE.Box3: .getParameter() target is now required"),e=new s),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)},intersectsSphere:function(){var t=new s;return function(e){return this.clampPoint(e.center,t),t.distanceToSquared(e.center)<=e.radius*e.radius}}(),intersectsPlane:function intersectsPlane(t){var e,n;return 0<t.normal.x?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),0<t.normal.y?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),0<t.normal.z?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=t.constant&&n>=t.constant},intersectsTriangle:function(){function t(t){var r,o;for(r=0,o=t.length-3;r<=o;r+=3){l.fromArray(t,r);var a=h.x*_Mathabs(l.x)+h.y*_Mathabs(l.y)+h.z*_Mathabs(l.z),s=e.dot(l),c=n.dot(l),u=i.dot(l);if(_Mathmax(-_Mathmax(s,c,u),_Mathmin(s,c,u))>a)return!1}return!0}var e=new s,n=new s,i=new s,r=new s,o=new s,a=new s,l=new s,c=new s,h=new s,u=new s;return function(s){if(this.isEmpty())return!1;this.getCenter(c),h.subVectors(this.max,c),e.subVectors(s.a,c),n.subVectors(s.b,c),i.subVectors(s.c,c),r.subVectors(n,e),o.subVectors(i,n),a.subVectors(e,i);var l=[0,-r.z,r.y,0,-o.z,o.y,0,-a.z,a.y,r.z,0,-r.x,o.z,0,-o.x,a.z,0,-a.x,-r.y,r.x,0,-o.y,o.x,0,-a.y,a.x,0];return!!t(l)&&(l=[1,0,0,0,1,0,0,0,1],!!t(l)&&(u.crossVectors(r,o),l=[u.x,u.y,u.z],t(l)))}}(),clampPoint:function clampPoint(t,e){return void 0===e&&(console.warn("THREE.Box3: .clampPoint() target is now required"),e=new s),e.copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new s;return function(e){return t.copy(e).clamp(this.min,this.max).sub(e).length()}}(),getBoundingSphere:function(){var t=new s;return function(e){return void 0===e&&(console.warn("THREE.Box3: .getBoundingSphere() target is now required"),e=new m),this.getCenter(e.center),e.radius=.5*this.getSize(t).length(),e}}(),intersect:function intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this},union:function union(t){return this.min.min(t.min),this.max.max(t.max),this},applyMatrix4:function(){var t=[new s,new s,new s,new s,new s,new s,new s,new s];return function(e){return this.isEmpty()?this:(t[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),t[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),t[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),t[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),t[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),t[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),t[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),t[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(t),this)}}(),translate:function translate(t){return this.min.add(t),this.max.add(t),this},equals:function equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}),Object.assign(m.prototype,{set:function set(t,e){return this.center.copy(t),this.radius=e,this},setFromPoints:function(){var t=new f;return function(e,n){var i=this.center;void 0!==n?i.copy(n):t.setFromPoints(e).getCenter(i);for(var r=0,o=0,a=e.length;o<a;o++){r=_Mathmax(r,i.distanceToSquared(e[o]))}return this.radius=_Mathsqrt(r),this}}(),clone:function clone(){return new this.constructor().copy(this)},copy:function copy(t){return this.center.copy(t.center),this.radius=t.radius,this},empty:function empty(){return 0>=this.radius},containsPoint:function containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function distanceToPoint(t){return t.distanceTo(this.center)-this.radius},intersectsSphere:function intersectsSphere(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e},intersectsBox:function intersectsBox(t){return t.intersectsSphere(this)},intersectsPlane:function intersectsPlane(t){return _Mathabs(t.distanceToPoint(this.center))<=this.radius},clampPoint:function clampPoint(t,e){var n=this.center.distanceToSquared(t);return void 0===e&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),e=new s),e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e},getBoundingBox:function getBoundingBox(t){return void 0===t&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),t=new f),t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this},translate:function translate(t){return this.center.add(t),this},equals:function equals(t){return t.center.equals(this.center)&&t.radius===this.radius}}),Object.assign(_.prototype,{set:function set(t,e){return this.normal.copy(t),this.constant=e,this},setComponents:function setComponents(t,e,n,i){return this.normal.set(t,e,n),this.constant=i,this},setFromNormalAndCoplanarPoint:function setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this},setFromCoplanarPoints:function(){var t=new s,e=new s;return function(n,i,r){var o=t.subVectors(r,i).cross(e.subVectors(n,i)).normalize();return this.setFromNormalAndCoplanarPoint(o,n),this}}(),clone:function clone(){return new this.constructor().copy(this)},copy:function copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this},normalize:function normalize(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},negate:function negate(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function distanceToPoint(t){return this.normal.dot(t)+this.constant},distanceToSphere:function distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function projectPoint(t,e){return void 0===e&&(console.warn("THREE.Plane: .projectPoint() target is now required"),e=new s),e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)},intersectLine:function(){var t=new s;return function(e,n){void 0===n&&(console.warn("THREE.Plane: .intersectLine() target is now required"),n=new s);var i=e.delta(t),r=this.normal.dot(i);if(0!==r){var o=-(e.start.dot(this.normal)+this.constant)/r;if(!(0>o||1<o))return n.copy(i).multiplyScalar(o).add(e.start)}else if(0===this.distanceToPoint(e.start))return n.copy(e.start)}}(),intersectsLine:function intersectsLine(t){var e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return 0>e&&0<n||0>n&&0<e},intersectsBox:function intersectsBox(t){return t.intersectsPlane(this)},intersectsSphere:function intersectsSphere(t){return t.intersectsPlane(this)},coplanarPoint:function coplanarPoint(t){return void 0===t&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),t=new s),t.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var t=new s,e=new l;return function(n,i){var r=i||e.getNormalMatrix(n),o=this.coplanarPoint(t).applyMatrix4(n),a=this.normal.applyMatrix3(r).normalize();return this.constant=-o.dot(a),this}}(),translate:function translate(t){return this.constant-=t.dot(this.normal),this},equals:function equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}}),Object.assign(g.prototype,{set:function set(t,e,n,i,r,o){var a=this.planes;return a[0].copy(t),a[1].copy(e),a[2].copy(n),a[3].copy(i),a[4].copy(r),a[5].copy(o),this},clone:function clone(){return new this.constructor().copy(this)},copy:function copy(t){for(var e=this.planes,n=0;6>n;n++){e[n].copy(t.planes[n])}return this},setFromMatrix:function setFromMatrix(t){var e=this.planes,n=t.elements,i=n[0],r=n[1],o=n[2],a=n[3],s=n[4],l=n[5],c=n[6],h=n[7],u=n[8],p=n[9],d=n[10],f=n[11],m=n[12],_=n[13],g=n[14],y=n[15];return e[0].setComponents(a-i,h-s,f-u,y-m).normalize(),e[1].setComponents(a+i,h+s,f+u,y+m).normalize(),e[2].setComponents(a+r,h+l,f+p,y+_).normalize(),e[3].setComponents(a-r,h-l,f-p,y-_).normalize(),e[4].setComponents(a-o,h-c,f-d,y-g).normalize(),e[5].setComponents(a+o,h+c,f+d,y+g).normalize(),this},intersectsObject:function(){var t=new m;return function(e){var n=e.geometry;return null===n.boundingSphere&&n.computeBoundingSphere(),t.copy(n.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(t)}}(),intersectsSprite:function(){var t=new m;return function(e){return t.center.set(0,0,0),t.radius=.7071067811865476,t.applyMatrix4(e.matrixWorld),this.intersectsSphere(t)}}(),intersectsSphere:function intersectsSphere(t){for(var e=this.planes,n=t.center,i=-t.radius,r=0;6>r;r++){if(e[r].distanceToPoint(n)<i)return!1}return!0},intersectsBox:function(){var t=new s,e=new s;return function(n){for(var i=this.planes,r=0,o;6>r;r++){o=i[r];t.x=0<o.normal.x?n.min.x:n.max.x,e.x=0<o.normal.x?n.max.x:n.min.x,t.y=0<o.normal.y?n.min.y:n.max.y,e.y=0<o.normal.y?n.max.y:n.min.y,t.z=0<o.normal.z?n.min.z:n.max.z,e.z=0<o.normal.z?n.max.z:n.min.z;var a=o.distanceToPoint(t),s=o.distanceToPoint(e);if(0>a&&0>s)return!1}return!0}}(),containsPoint:function containsPoint(t){for(var e=this.planes,n=0;6>n;n++){if(0>e[n].distanceToPoint(t))return!1}return!0}});var As={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"\nvec3 transformed = vec3( position );\n",beginnormal_vertex:"\nvec3 objectNormal = vec3( normal );\n",bsdfs:"float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t}\n\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif\n",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\n",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n",defaultnormal_vertex:"vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n",encodings_fragment:"  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM            = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat D      = max( maxRange / maxRGB, 1.0 );\n\tD            = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n\tXp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract(Le);\n\tvResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n\treturn vec4( max(vRGB, 0.0), 1.0 );\n}\n",envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n",envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n",fog_vertex:"\n#ifdef USE_FOG\nfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n  varying float fogDepth;\n#endif\n",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif\n",gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif\n",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n",lights_pars_begin:"uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n",lights_pars_maps:"#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos - halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos + halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos + halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos - halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearCoatRadiance = vec3( 0.0 );\n#endif\n",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), maxMipLevel );\n\t#ifndef STANDARD\n\t\tclearCoatRadiance += getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), maxMipLevel );\n\t#endif\n#endif\n",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\tgl_Position.z *= gl_Position.w;\n\t#endif\n#endif\n",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n",map_particle_fragment:"#ifdef USE_MAP\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform mat3 uvTransform;\n\tuniform sampler2D map;\n#endif\n",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif\n",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n#endif\n",normal_fragment_maps:"#ifdef USE_NORMALMAP\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\t\tscale *= float( gl_FrontFacing ) * 2.0 - 1.0;\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif\n",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",project_vertex:"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;\n",dithering_fragment:"#if defined( DITHERING )\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif\n",dithering_pars_fragment:"#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif\n",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif\n",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif\n",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",tonemapping_pars_fragment:"#ifndef saturate\n\t#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\n",uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif\n",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n",cube_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}\n",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}\n",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}\n",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",equirect_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}\n",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}\n",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}\n",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <fog_fragment>\n}\n",shadow_vert:"#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n"},Ps={merge:function merge(t){for(var e={},n=0,i;n<t.length;n++){i=this.clone(t[n]);for(var r in i){e[r]=i[r]}}return e},clone:function clone(t){var e={};for(var n in t){e[n]={};for(var i in t[n]){var r=t[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture)?e[n][i]=r.clone():Array.isArray(r)?e[n][i]=r.slice():e[n][i]=r}}return e}},Cs={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Object.assign(y.prototype,{isColor:!0,r:1,g:1,b:1,set:function set(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this},setScalar:function setScalar(t){return this.r=t,this.g=t,this.b=t,this},setHex:function setHex(t){return t=_Mathfloor(t),this.r=(255&t>>16)/255,this.g=(255&t>>8)/255,this.b=(255&t)/255,this},setRGB:function setRGB(t,e,n){return this.r=t,this.g=e,this.b=n,this},setHSL:function(){function t(t,e,n){return 0>n&&(n+=1),1<n&&(n-=1),n<1/6?t+6*(e-t)*n:.5>n?e:n<2/3?t+6*(e-t)*(2/3-n):t}return function(e,n,i){if(e=Ms.euclideanModulo(e,1),n=Ms.clamp(n,0,1),i=Ms.clamp(i,0,1),0===n)this.r=this.g=this.b=i;else{var r=.5>=i?i*(1+n):i+n-i*n,o=2*i-r;this.r=t(o,r,e+1/3),this.g=t(o,r,e),this.b=t(o,r,e-1/3)}return this}}(),setStyle:function setStyle(t){function e(e){void 0!==e&&1>parseFloat(e)&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){var i,r=n[1],o=n[2];switch(r){case"rgb":case"rgba":if(i=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=_Mathmin(255,parseInt(i[1],10))/255,this.g=_Mathmin(255,parseInt(i[2],10))/255,this.b=_Mathmin(255,parseInt(i[3],10))/255,e(i[5]),this;if(i=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=_Mathmin(100,parseInt(i[1],10))/100,this.g=_Mathmin(100,parseInt(i[2],10))/100,this.b=_Mathmin(100,parseInt(i[3],10))/100,e(i[5]),this;break;case"hsl":case"hsla":if(i=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o)){var a=parseFloat(i[1])/360,s=parseInt(i[2],10)/100,l=parseInt(i[3],10)/100;return e(i[5]),this.setHSL(a,s,l)}}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(t)){var c=(h=n[1]).length;if(3===c)return this.r=parseInt(h.charAt(0)+h.charAt(0),16)/255,this.g=parseInt(h.charAt(1)+h.charAt(1),16)/255,this.b=parseInt(h.charAt(2)+h.charAt(2),16)/255,this;if(6===c)return this.r=parseInt(h.charAt(0)+h.charAt(1),16)/255,this.g=parseInt(h.charAt(2)+h.charAt(3),16)/255,this.b=parseInt(h.charAt(4)+h.charAt(5),16)/255,this}if(t&&0<t.length){var h=Cs[t];void 0!==h?this.setHex(h):console.warn("THREE.Color: Unknown color "+t)}return this},clone:function clone(){return new this.constructor(this.r,this.g,this.b)},copy:function copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},copyGammaToLinear:function copyGammaToLinear(t,e){return void 0===e&&(e=2),this.r=_Mathpow(t.r,e),this.g=_Mathpow(t.g,e),this.b=_Mathpow(t.b,e),this},copyLinearToGamma:function copyLinearToGamma(t,e){void 0===e&&(e=2);var n=0<e?1/e:1;return this.r=_Mathpow(t.r,n),this.g=_Mathpow(t.g,n),this.b=_Mathpow(t.b,n),this},convertGammaToLinear:function convertGammaToLinear(){var t=this.r,e=this.g,n=this.b;return this.r=t*t,this.g=e*e,this.b=n*n,this},convertLinearToGamma:function convertLinearToGamma(){return this.r=_Mathsqrt(this.r),this.g=_Mathsqrt(this.g),this.b=_Mathsqrt(this.b),this},getHex:function getHex(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function getHSL(t){void 0===t&&(console.warn("THREE.Color: .getHSL() target is now required"),t={h:0,s:0,l:0});var e,n,i=this.r,r=this.g,o=this.b,a=_Mathmax(i,r,o),s=_Mathmin(i,r,o),l=(s+a)/2;if(s===a)e=0,n=0;else{var c=a-s;switch(n=.5>=l?c/(a+s):c/(2-a-s),a){case i:e=(r-o)/c+(r<o?6:0);break;case r:e=(o-i)/c+2;break;case o:e=(i-r)/c+4;}e/=6}return t.h=e,t.s=n,t.l=l,t},getStyle:function getStyle(){return"rgb("+(0|255*this.r)+","+(0|255*this.g)+","+(0|255*this.b)+")"},offsetHSL:function(){var t={};return function(e,n,i){return this.getHSL(t),t.h+=e,t.s+=n,t.l+=i,this.setHSL(t.h,t.s,t.l),this}}(),add:function add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this},addScalar:function addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this},sub:function sub(t){return this.r=_Mathmax(0,this.r-t.r),this.g=_Mathmax(0,this.g-t.g),this.b=_Mathmax(0,this.b-t.b),this},multiply:function multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this},lerp:function lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this},equals:function equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},fromArray:function fromArray(t,e){return void 0===e&&(e=0),this.r=t[e],this.g=t[e+1],this.b=t[e+2],this},toArray:function toArray(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t},toJSON:function toJSON(){return this.getHex()}});var Is={common:{diffuse:{value:new y(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new l},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new r(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new y(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new y(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new l}}},Ls={basic:{uniforms:Ps.merge([Is.common,Is.specularmap,Is.envmap,Is.aomap,Is.lightmap,Is.fog]),vertexShader:As.meshbasic_vert,fragmentShader:As.meshbasic_frag},lambert:{uniforms:Ps.merge([Is.common,Is.specularmap,Is.envmap,Is.aomap,Is.lightmap,Is.emissivemap,Is.fog,Is.lights,{emissive:{value:new y(0)}}]),vertexShader:As.meshlambert_vert,fragmentShader:As.meshlambert_frag},phong:{uniforms:Ps.merge([Is.common,Is.specularmap,Is.envmap,Is.aomap,Is.lightmap,Is.emissivemap,Is.bumpmap,Is.normalmap,Is.displacementmap,Is.gradientmap,Is.fog,Is.lights,{emissive:{value:new y(0)},specular:{value:new y(1118481)},shininess:{value:30}}]),vertexShader:As.meshphong_vert,fragmentShader:As.meshphong_frag},standard:{uniforms:Ps.merge([Is.common,Is.envmap,Is.aomap,Is.lightmap,Is.emissivemap,Is.bumpmap,Is.normalmap,Is.displacementmap,Is.roughnessmap,Is.metalnessmap,Is.fog,Is.lights,{emissive:{value:new y(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:As.meshphysical_vert,fragmentShader:As.meshphysical_frag},points:{uniforms:Ps.merge([Is.points,Is.fog]),vertexShader:As.points_vert,fragmentShader:As.points_frag},dashed:{uniforms:Ps.merge([Is.common,Is.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:As.linedashed_vert,fragmentShader:As.linedashed_frag},depth:{uniforms:Ps.merge([Is.common,Is.displacementmap]),vertexShader:As.depth_vert,fragmentShader:As.depth_frag},normal:{uniforms:Ps.merge([Is.common,Is.bumpmap,Is.normalmap,Is.displacementmap,{opacity:{value:1}}]),vertexShader:As.normal_vert,fragmentShader:As.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:As.cube_vert,fragmentShader:As.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:As.equirect_vert,fragmentShader:As.equirect_frag},distanceRGBA:{uniforms:Ps.merge([Is.common,Is.displacementmap,{referencePosition:{value:new s},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:As.distanceRGBA_vert,fragmentShader:As.distanceRGBA_frag},shadow:{uniforms:Ps.merge([Is.lights,Is.fog,{color:{value:new y(0)},opacity:{value:1}}]),vertexShader:As.shadow_vert,fragmentShader:As.shadow_frag}};Ls.physical={uniforms:Ps.merge([Ls.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:As.meshphysical_vert,fragmentShader:As.meshphysical_frag},b.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],b.DefaultOrder="XYZ",Object.defineProperties(b.prototype,{x:{get:function get(){return this._x},set:function set(t){this._x=t,this.onChangeCallback()}},y:{get:function get(){return this._y},set:function set(t){this._y=t,this.onChangeCallback()}},z:{get:function get(){return this._z},set:function set(t){this._z=t,this.onChangeCallback()}},order:{get:function get(){return this._order},set:function set(t){this._order=t,this.onChangeCallback()}}}),Object.assign(b.prototype,{isEuler:!0,set:function set(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._order=i||this._order,this.onChangeCallback(),this},clone:function clone(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this.onChangeCallback(),this},setFromRotationMatrix:function setFromRotationMatrix(t,e,n){var _Mathasin=Math.asin,i=Ms.clamp,r=t.elements,o=r[0],a=r[4],s=r[8],l=r[1],c=r[5],h=r[9],u=r[2],p=r[6],d=r[10];return"XYZ"===(e=e||this._order)?(this._y=_Mathasin(i(s,-1,1)),.99999>_Mathabs(s)?(this._x=_Mathatan(-h,d),this._z=_Mathatan(-a,o)):(this._x=_Mathatan(p,c),this._z=0)):"YXZ"===e?(this._x=_Mathasin(-i(h,-1,1)),.99999>_Mathabs(h)?(this._y=_Mathatan(s,d),this._z=_Mathatan(l,c)):(this._y=_Mathatan(-u,o),this._z=0)):"ZXY"===e?(this._x=_Mathasin(i(p,-1,1)),.99999>_Mathabs(p)?(this._y=_Mathatan(-u,d),this._z=_Mathatan(-a,c)):(this._y=0,this._z=_Mathatan(l,o))):"ZYX"===e?(this._y=_Mathasin(-i(u,-1,1)),.99999>_Mathabs(u)?(this._x=_Mathatan(p,d),this._z=_Mathatan(l,o)):(this._x=0,this._z=_Mathatan(-a,c))):"YZX"===e?(this._z=_Mathasin(i(l,-1,1)),.99999>_Mathabs(l)?(this._x=_Mathatan(-h,c),this._y=_Mathatan(-u,o)):(this._x=0,this._y=_Mathatan(s,d))):"XZY"===e?(this._z=_Mathasin(-i(a,-1,1)),.99999>_Mathabs(a)?(this._x=_Mathatan(p,c),this._y=_Mathatan(s,o)):(this._x=_Mathatan(-h,d),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+e),this._order=e,!1!==n&&this.onChangeCallback(),this},setFromQuaternion:function(){var t=new o;return function(e,n,i){return t.makeRotationFromQuaternion(e),this.setFromRotationMatrix(t,n,i)}}(),setFromVector3:function setFromVector3(t,e){return this.set(t.x,t.y,t.z,e||this._order)},reorder:function(){var t=new a;return function(e){return t.setFromEuler(this),this.setFromQuaternion(t,e)}}(),equals:function equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this.onChangeCallback(),this},toArray:function toArray(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t},toVector3:function toVector3(t){return t?t.set(this._x,this._y,this._z):new s(this._x,this._y,this._z)},onChange:function onChange(t){return this.onChangeCallback=t,this},onChangeCallback:function onChangeCallback(){}}),Object.assign(w.prototype,{set:function set(t){this.mask=0|1<<t},enable:function enable(t){this.mask|=0|1<<t},toggle:function toggle(t){this.mask^=0|1<<t},disable:function disable(t){this.mask&=~(0|1<<t)},test:function test(t){return 0!=(this.mask&t.mask)}});var Rs=0;x.DefaultUp=new s(0,1,0),x.DefaultMatrixAutoUpdate=!0,x.prototype=Object.assign(Object.create(i.prototype),{constructor:x,isObject3D:!0,onBeforeRender:function onBeforeRender(){},onAfterRender:function onAfterRender(){},applyMatrix:function applyMatrix(t){this.matrix.multiplyMatrices(t,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function applyQuaternion(t){return this.quaternion.premultiply(t),this},setRotationFromAxisAngle:function setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function setRotationFromQuaternion(t){this.quaternion.copy(t)},rotateOnAxis:function(){var t=new a;return function(e,n){return t.setFromAxisAngle(e,n),this.quaternion.multiply(t),this}}(),rotateOnWorldAxis:function(){var t=new a;return function(e,n){return t.setFromAxisAngle(e,n),this.quaternion.premultiply(t),this}}(),rotateX:function(){var t=new s(1,0,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateY:function(){var t=new s(0,1,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateZ:function(){var t=new s(0,0,1);return function(e){return this.rotateOnAxis(t,e)}}(),translateOnAxis:function(){var t=new s;return function(e,n){return t.copy(e).applyQuaternion(this.quaternion),this.position.add(t.multiplyScalar(n)),this}}(),translateX:function(){var t=new s(1,0,0);return function(e){return this.translateOnAxis(t,e)}}(),translateY:function(){var t=new s(0,1,0);return function(e){return this.translateOnAxis(t,e)}}(),translateZ:function(){var t=new s(0,0,1);return function(e){return this.translateOnAxis(t,e)}}(),localToWorld:function localToWorld(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var t=new o;return function(e){return e.applyMatrix4(t.getInverse(this.matrixWorld))}}(),lookAt:function(){var t=new o,e=new s;return function(n,i,r){n.isVector3?e.copy(n):e.set(n,i,r),this.isCamera?t.lookAt(this.position,e,this.up):t.lookAt(e,this.position,this.up),this.quaternion.setFromRotationMatrix(t)}}(),add:function add(t){if(1<arguments.length){for(var e=0;e<arguments.length;e++){this.add(arguments[e])}return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,t.dispatchEvent({type:"added"}),this.children.push(t)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)},remove:function remove(t){if(1<arguments.length){for(var e=0;e<arguments.length;e++){this.remove(arguments[e])}return this}var n=this.children.indexOf(t);return-1!==n&&(t.parent=null,t.dispatchEvent({type:"removed"}),this.children.splice(n,1)),this},getObjectById:function getObjectById(t){return this.getObjectByProperty("id",t)},getObjectByName:function getObjectByName(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function getObjectByProperty(t,e){if(this[t]===e)return this;for(var n=0,i=this.children.length,r;n<i;n++){r=this.children[n].getObjectByProperty(t,e);if(void 0!==r)return r}},getWorldPosition:function getWorldPosition(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),t=new s),this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var t=new s,e=new s;return function(n){return void 0===n&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),n=new a),this.updateMatrixWorld(!0),this.matrixWorld.decompose(t,n,e),n}}(),getWorldScale:function(){var t=new s,e=new a;return function(n){return void 0===n&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),n=new s),this.updateMatrixWorld(!0),this.matrixWorld.decompose(t,e,n),n}}(),getWorldDirection:function(){var t=new a;return function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),e=new s),this.getWorldQuaternion(t),e.set(0,0,1).applyQuaternion(t)}}(),raycast:function raycast(){},traverse:function traverse(t){t(this);for(var e=this.children,n=0,i=e.length;n<i;n++){e[n].traverse(t)}},traverseVisible:function traverseVisible(t){if(!1!==this.visible){t(this);for(var e=this.children,n=0,i=e.length;n<i;n++){e[n].traverseVisible(t)}}},traverseAncestors:function traverseAncestors(t){var e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))},updateMatrix:function updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var e=this.children,n=0,i=e.length;n<i;n++){e[n].updateMatrixWorld(t)}},toJSON:function toJSON(t){function e(e,n){return void 0===e[n.uuid]&&(e[n.uuid]=n.toJSON(t)),n.uuid}function n(t){var e=[];for(var n in t){var i=t[n];delete i.metadata,e.push(i)}return e}var i=void 0===t||"string"==typeof t,r={};i&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var o={};if(o.uuid=this.uuid,o.type=this.type,""!==this.name&&(o.name=this.name),!0===this.castShadow&&(o.castShadow=!0),!0===this.receiveShadow&&(o.receiveShadow=!0),!1===this.visible&&(o.visible=!1),!1===this.frustumCulled&&(o.frustumCulled=!1),0!==this.renderOrder&&(o.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(o.userData=this.userData),o.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(o.matrixAutoUpdate=!1),void 0!==this.geometry){o.geometry=e(t.geometries,this.geometry);var a=this.geometry.parameters;if(void 0!==a&&void 0!==a.shapes){m=a.shapes;if(Array.isArray(m))for(var s=0,l=m.length,c;s<l;s++){c=m[s];e(t.shapes,c)}else e(t.shapes,m)}}if(void 0!==this.material)if(Array.isArray(this.material)){for(var h=[],s=0,l=this.material.length;s<l;s++){h.push(e(t.materials,this.material[s]))}o.material=h}else o.material=e(t.materials,this.material);if(0<this.children.length){o.children=[];for(s=0;s<this.children.length;s++){o.children.push(this.children[s].toJSON(t).object)}}if(i){var u=n(t.geometries),p=n(t.materials),d=n(t.textures),f=n(t.images),m=n(t.shapes);0<u.length&&(r.geometries=u),0<p.length&&(r.materials=p),0<d.length&&(r.textures=d),0<f.length&&(r.images=f),0<m.length&&(r.shapes=m)}return r.object=o,r},clone:function clone(t){return new this.constructor().copy(this,t)},copy:function copy(t,e){if(void 0===e&&(e=!0),this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(var n=0,i;n<t.children.length;n++){i=t.children[n];this.add(i.clone())}return this}}),S.prototype=Object.assign(Object.create(x.prototype),{constructor:S,isCamera:!0,copy:function copy(t,e){return x.prototype.copy.call(this,t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this},getWorldDirection:function(){var t=new a;return function(e){return void 0===e&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),e=new s),this.getWorldQuaternion(t),e.set(0,0,-1).applyQuaternion(t)}}(),updateMatrixWorld:function updateMatrixWorld(t){x.prototype.updateMatrixWorld.call(this,t),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function clone(){return new this.constructor().copy(this)}}),E.prototype=Object.assign(Object.create(S.prototype),{constructor:E,isOrthographicCamera:!0,copy:function copy(t,e){return S.prototype.copy.call(this,t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this},setViewOffset:function setViewOffset(t,e,n,i,r,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function updateProjectionMatrix(){var t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2,r=n-t,o=n+t,a=i+e,s=i-e;if(null!==this.view&&this.view.enabled){var l=this.zoom/(this.view.width/this.view.fullWidth),c=this.zoom/(this.view.height/this.view.fullHeight),h=(this.right-this.left)/this.view.width,u=(this.top-this.bottom)/this.view.height;o=(r+=h*(this.view.offsetX/l))+h*(this.view.width/l),s=(a-=u*(this.view.offsetY/c))-u*(this.view.height/c)}this.projectionMatrix.makeOrthographic(r,o,a,s,this.near,this.far)},toJSON:function toJSON(t){var e=x.prototype.toJSON.call(this,t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}),Object.assign(M.prototype,{clone:function clone(){return new this.constructor().copy(this)},copy:function copy(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(var e=0,n=t.vertexNormals.length;e<n;e++){this.vertexNormals[e]=t.vertexNormals[e].clone()}for(var e=0,n=t.vertexColors.length;e<n;e++){this.vertexColors[e]=t.vertexColors[e].clone()}return this}});var Os=0;T.prototype=Object.assign(Object.create(i.prototype),{constructor:T,isGeometry:!0,applyMatrix:function applyMatrix(t){for(var e=new l().getNormalMatrix(t),n=0,i=this.vertices.length;n<i;n++){this.vertices[n].applyMatrix4(t)}for(var n=0,i=this.faces.length,r;n<i;n++){r=this.faces[n];r.normal.applyMatrix3(e).normalize();for(var o=0,a=r.vertexNormals.length;o<a;o++){r.vertexNormals[o].applyMatrix3(e).normalize()}}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var t=new o;return function(e){return t.makeRotationX(e),this.applyMatrix(t),this}}(),rotateY:function(){var t=new o;return function(e){return t.makeRotationY(e),this.applyMatrix(t),this}}(),rotateZ:function(){var t=new o;return function(e){return t.makeRotationZ(e),this.applyMatrix(t),this}}(),translate:function(){var t=new o;return function(e,n,i){return t.makeTranslation(e,n,i),this.applyMatrix(t),this}}(),scale:function(){var t=new o;return function(e,n,i){return t.makeScale(e,n,i),this.applyMatrix(t),this}}(),lookAt:function(){var t=new x;return function(e){t.lookAt(e),t.updateMatrix(),this.applyMatrix(t.matrix)}}(),fromBufferGeometry:function fromBufferGeometry(t){function e(t,e,i,r){var o=new M(t,e,i,void 0!==l?[p[t].clone(),p[e].clone(),p[i].clone()]:[],void 0!==c?[n.colors[t].clone(),n.colors[e].clone(),n.colors[i].clone()]:[],r);n.faces.push(o),void 0!==h&&n.faceVertexUvs[0].push([d[t].clone(),d[e].clone(),d[i].clone()]),void 0!==u&&n.faceVertexUvs[1].push([f[t].clone(),f[e].clone(),f[i].clone()])}var n=this,i=null!==t.index?t.index.array:void 0,o=t.attributes,a=o.position.array,l=void 0!==o.normal?o.normal.array:void 0,c=void 0!==o.color?o.color.array:void 0,h=void 0!==o.uv?o.uv.array:void 0,u=void 0!==o.uv2?o.uv2.array:void 0;void 0!==u&&(this.faceVertexUvs[1]=[]);for(var p=[],d=[],f=[],m=0,_=0;m<a.length;m+=3,_+=2){n.vertices.push(new s(a[m],a[m+1],a[m+2])),void 0!==l&&p.push(new s(l[m],l[m+1],l[m+2])),void 0!==c&&n.colors.push(new y(c[m],c[m+1],c[m+2])),void 0!==h&&d.push(new r(h[_],h[_+1])),void 0!==u&&f.push(new r(u[_],u[_+1]))}var g=t.groups;if(0<g.length)for(m=0;m<g.length;m++){for(var v=g[m],b=v.start,_=b,w=b+v.count;_<w;_+=3){void 0!==i?e(i[_],i[_+1],i[_+2],v.materialIndex):e(_,_+1,_+2,v.materialIndex)}}else if(void 0!==i)for(m=0;m<i.length;m+=3){e(i[m],i[m+1],i[m+2])}else for(m=0;m<a.length/3;m+=3){e(m,m+1,m+2)}return this.computeFaceNormals(),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this},center:function(){var t=new s;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(t).negate(),this.translate(t.x,t.y,t.z),this}}(),normalize:function normalize(){this.computeBoundingSphere();var t=this.boundingSphere.center,e=this.boundingSphere.radius,n=0===e?1:1/e,i=new o;return i.set(n,0,0,-n*t.x,0,n,0,-n*t.y,0,0,n,-n*t.z,0,0,0,1),this.applyMatrix(i),this},computeFaceNormals:function computeFaceNormals(){for(var t=new s,e=new s,n=0,i=this.faces.length;n<i;n++){var r=this.faces[n],o=this.vertices[r.a],a=this.vertices[r.b],l=this.vertices[r.c];t.subVectors(l,a),e.subVectors(o,a),t.cross(e),t.normalize(),r.normal.copy(t)}},computeVertexNormals:function computeVertexNormals(t){void 0===t&&(t=!0);var e,n,i,r,o,a;for(a=Array(this.vertices.length),e=0,n=this.vertices.length;e<n;e++){a[e]=new s}if(t){var l,c,h,u=new s,p=new s;for(i=0,r=this.faces.length;i<r;i++){o=this.faces[i],l=this.vertices[o.a],c=this.vertices[o.b],h=this.vertices[o.c],u.subVectors(h,c),p.subVectors(l,c),u.cross(p),a[o.a].add(u),a[o.b].add(u),a[o.c].add(u)}}else for(this.computeFaceNormals(),i=0,r=this.faces.length;i<r;i++){a[(o=this.faces[i]).a].add(o.normal),a[o.b].add(o.normal),a[o.c].add(o.normal)}for(e=0,n=this.vertices.length;e<n;e++){a[e].normalize()}for(i=0,r=this.faces.length;i<r;i++){var d=(o=this.faces[i]).vertexNormals;3===d.length?(d[0].copy(a[o.a]),d[1].copy(a[o.b]),d[2].copy(a[o.c])):(d[0]=a[o.a].clone(),d[1]=a[o.b].clone(),d[2]=a[o.c].clone())}0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function computeFlatVertexNormals(){var t,e,n;for(this.computeFaceNormals(),t=0,e=this.faces.length;t<e;t++){var i=(n=this.faces[t]).vertexNormals;3===i.length?(i[0].copy(n.normal),i[1].copy(n.normal),i[2].copy(n.normal)):(i[0]=n.normal.clone(),i[1]=n.normal.clone(),i[2]=n.normal.clone())}0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function computeMorphNormals(){var t,e,n,i,r;for(n=0,i=this.faces.length;n<i;n++){for((r=this.faces[n]).__originalFaceNormal?r.__originalFaceNormal.copy(r.normal):r.__originalFaceNormal=r.normal.clone(),r.__originalVertexNormals||(r.__originalVertexNormals=[]),t=0,e=r.vertexNormals.length;t<e;t++){r.__originalVertexNormals[t]?r.__originalVertexNormals[t].copy(r.vertexNormals[t]):r.__originalVertexNormals[t]=r.vertexNormals[t].clone()}}var o=new T;for(o.faces=this.faces,t=0,e=this.morphTargets.length;t<e;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];var a=this.morphNormals[t].faceNormals,l=this.morphNormals[t].vertexNormals;for(n=0,i=this.faces.length;n<i;n++){h=new s,u={a:new s,b:new s,c:new s},a.push(h),l.push(u)}}var c=this.morphNormals[t];o.vertices=this.morphTargets[t].vertices,o.computeFaceNormals(),o.computeVertexNormals();var h,u;for(n=0,i=this.faces.length;n<i;n++){r=this.faces[n],h=c.faceNormals[n],u=c.vertexNormals[n],h.copy(r.normal),u.a.copy(r.vertexNormals[0]),u.b.copy(r.vertexNormals[1]),u.c.copy(r.vertexNormals[2])}}for(n=0,i=this.faces.length;n<i;n++){(r=this.faces[n]).normal=r.__originalFaceNormal,r.vertexNormals=r.__originalVertexNormals}},computeBoundingBox:function computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new f),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new m),this.boundingSphere.setFromPoints(this.vertices)},merge:function merge(t,e,n){if(t&&t.isGeometry){var i,r=this.vertices.length,o=this.vertices,a=t.vertices,s=this.faces,c=t.faces,h=this.faceVertexUvs[0],u=t.faceVertexUvs[0],p=this.colors,d=t.colors;void 0===n&&(n=0),void 0!==e&&(i=new l().getNormalMatrix(e));for(var f=0,m=a.length,_;f<m;f++){_=a[f].clone();void 0!==e&&_.applyMatrix4(e),o.push(_)}for(var f=0,m=d.length;f<m;f++){p.push(d[f].clone())}for(f=0,m=c.length;f<m;f++){var g,y,v,b=c[f],w=b.vertexNormals,x=b.vertexColors;(g=new M(b.a+r,b.b+r,b.c+r)).normal.copy(b.normal),void 0!==i&&g.normal.applyMatrix3(i).normalize();for(var S=0,E=w.length;S<E;S++){y=w[S].clone(),void 0!==i&&y.applyMatrix3(i).normalize(),g.vertexNormals.push(y)}g.color.copy(b.color);for(var S=0,E=x.length;S<E;S++){v=x[S],g.vertexColors.push(v.clone())}g.materialIndex=b.materialIndex+n,s.push(g)}for(f=0,m=u.length;f<m;f++){var T=u[f],A=[];if(void 0!==T){for(var S=0,E=T.length;S<E;S++){A.push(T[S].clone())}h.push(A)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",t)},mergeMesh:function mergeMesh(t){t&&t.isMesh?(t.matrixAutoUpdate&&t.updateMatrix(),this.merge(t.geometry,t.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",t)},mergeVertices:function mergeVertices(){var t,e,n,i,r,o,a,s,l={},c=[],h=[],u=10000;for(n=0,i=this.vertices.length;n<i;n++){t=this.vertices[n],void 0===l[e=_Mathround(t.x*u)+"_"+_Mathround(t.y*u)+"_"+_Mathround(t.z*u)]?(l[e]=n,c.push(this.vertices[n]),h[n]=c.length-1):h[n]=h[l[e]]}var p=[];for(n=0,i=this.faces.length;n<i;n++){(r=this.faces[n]).a=h[r.a],r.b=h[r.b],r.c=h[r.c],o=[r.a,r.b,r.c];for(var d=0;3>d;d++){if(o[d]===o[(d+1)%3]){p.push(n);break}}}for(n=p.length-1;0<=n;n--){var f=p[n];for(this.faces.splice(f,1),a=0,s=this.faceVertexUvs.length;a<s;a++){this.faceVertexUvs[a].splice(f,1)}}var m=this.vertices.length-c.length;return this.vertices=c,m},setFromPoints:function setFromPoints(t){this.vertices=[];for(var e=0,n=t.length,i;e<n;e++){i=t[e];this.vertices.push(new s(i.x,i.y,i.z||0))}return this},sortFacesByMaterialIndex:function sortFacesByMaterialIndex(){for(var t=this.faces,e=t.length,n=0;n<e;n++){t[n]._id=n}t.sort(function(t,e){return t.materialIndex-e.materialIndex});var i,r,o=this.faceVertexUvs[0],a=this.faceVertexUvs[1];o&&o.length===e&&(i=[]),a&&a.length===e&&(r=[]);for(n=0;n<e;n++){var s=t[n]._id;i&&i.push(o[s]),r&&r.push(a[s])}i&&(this.faceVertexUvs[0]=i),r&&(this.faceVertexUvs[1]=r)},toJSON:function toJSON(){function t(t,e,n){return n?t|1<<e:t&~(1<<e)}function e(t){var e=t.x.toString()+t.y.toString()+t.z.toString();return void 0!==p[e]?p[e]:(p[e]=u.length/3,u.push(t.x,t.y,t.z),p[e])}function n(t){var e=t.r.toString()+t.g.toString()+t.b.toString();return void 0!==f[e]?f[e]:(f[e]=d.length,d.push(t.getHex()),f[e])}function i(t){var e=t.x.toString()+t.y.toString();return void 0!==_[e]?_[e]:(_[e]=m.length/2,m.push(t.x,t.y),_[e])}var r={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),void 0!==this.parameters){var o=this.parameters;for(var a in o){void 0!==o[a]&&(r[a]=o[a])}return r}for(var s=[],l=0,c;l<this.vertices.length;l++){c=this.vertices[l];s.push(c.x,c.y,c.z)}for(var h=[],u=[],p={},d=[],f={},m=[],_={},l=0;l<this.faces.length;l++){var g=this.faces[l],y=void 0!==this.faceVertexUvs[0][l],v=0<g.normal.length(),b=0<g.vertexNormals.length,w=1!==g.color.r||1!==g.color.g||1!==g.color.b,x=0<g.vertexColors.length,S=0;if(S=t(S,0,0),S=t(S,1,!0),S=t(S,2,!1),S=t(S,3,y),S=t(S,4,v),S=t(S,5,b),S=t(S,6,w),S=t(S,7,x),h.push(S),h.push(g.a,g.b,g.c),h.push(g.materialIndex),y){var E=this.faceVertexUvs[0][l];h.push(i(E[0]),i(E[1]),i(E[2]))}if(v&&h.push(e(g.normal)),b){var M=g.vertexNormals;h.push(e(M[0]),e(M[1]),e(M[2]))}if(w&&h.push(n(g.color)),x){var T=g.vertexColors;h.push(n(T[0]),n(T[1]),n(T[2]))}}return r.data={},r.data.vertices=s,r.data.normals=u,0<d.length&&(r.data.colors=d),0<m.length&&(r.data.uvs=[m]),r.data.faces=h,r},clone:function clone(){return new T().copy(this)},copy:function copy(t){var e,n,i,r,o,a;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;var s=t.vertices;for(e=0,n=s.length;e<n;e++){this.vertices.push(s[e].clone())}var l=t.colors;for(e=0,n=l.length;e<n;e++){this.colors.push(l[e].clone())}var c=t.faces;for(e=0,n=c.length;e<n;e++){this.faces.push(c[e].clone())}for(e=0,n=t.faceVertexUvs.length;e<n;e++){var h=t.faceVertexUvs[e];for(void 0===this.faceVertexUvs[e]&&(this.faceVertexUvs[e]=[]),i=0,r=h.length;i<r;i++){var u=h[i],p=[];for(o=0,a=u.length;o<a;o++){var d=u[o];p.push(d.clone())}this.faceVertexUvs[e].push(p)}}var f=t.morphTargets;for(e=0,n=f.length;e<n;e++){var m={};if(m.name=f[e].name,void 0!==f[e].vertices)for(m.vertices=[],i=0,r=f[e].vertices.length;i<r;i++){m.vertices.push(f[e].vertices[i].clone())}if(void 0!==f[e].normals)for(m.normals=[],i=0,r=f[e].normals.length;i<r;i++){m.normals.push(f[e].normals[i].clone())}this.morphTargets.push(m)}var _=t.morphNormals;for(e=0,n=_.length;e<n;e++){var g={};if(void 0!==_[e].vertexNormals)for(g.vertexNormals=[],i=0,r=_[e].vertexNormals.length;i<r;i++){var y=_[e].vertexNormals[i],v={};v.a=y.a.clone(),v.b=y.b.clone(),v.c=y.c.clone(),g.vertexNormals.push(v)}if(void 0!==_[e].faceNormals)for(g.faceNormals=[],i=0,r=_[e].faceNormals.length;i<r;i++){g.faceNormals.push(_[e].faceNormals[i].clone())}this.morphNormals.push(g)}var b=t.skinWeights;for(e=0,n=b.length;e<n;e++){this.skinWeights.push(b[e].clone())}var w=t.skinIndices;for(e=0,n=w.length;e<n;e++){this.skinIndices.push(w[e].clone())}var x=t.lineDistances;for(e=0,n=x.length;e<n;e++){this.lineDistances.push(x[e])}var S=t.boundingBox;null!==S&&(this.boundingBox=S.clone());var E=t.boundingSphere;return null!==E&&(this.boundingSphere=E.clone()),this.elementsNeedUpdate=t.elementsNeedUpdate,this.verticesNeedUpdate=t.verticesNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.lineDistancesNeedUpdate=t.lineDistancesNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this},dispose:function dispose(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(A.prototype,"needsUpdate",{set:function set(t){!0===t&&this.version++}}),Object.assign(A.prototype,{isBufferAttribute:!0,onUploadCallback:function onUploadCallback(){},setArray:function setArray(t){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==t?t.length/this.itemSize:0,this.array=t,this},setDynamic:function setDynamic(t){return this.dynamic=t,this},copy:function copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.dynamic=t.dynamic,this},copyAt:function copyAt(t,e,n){t*=this.itemSize,n*=e.itemSize;for(var i=0,r=this.itemSize;i<r;i++){this.array[t+i]=e.array[n+i]}return this},copyArray:function copyArray(t){return this.array.set(t),this},copyColorsArray:function copyColorsArray(t){for(var e=this.array,n=0,i=0,r=t.length,o;i<r;i++){o=t[i];void 0===o&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),o=new y),e[n++]=o.r,e[n++]=o.g,e[n++]=o.b}return this},copyVector2sArray:function copyVector2sArray(t){for(var e=this.array,n=0,i=0,o=t.length,a;i<o;i++){a=t[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),a=new r),e[n++]=a.x,e[n++]=a.y}return this},copyVector3sArray:function copyVector3sArray(t){for(var e=this.array,n=0,i=0,r=t.length,o;i<r;i++){o=t[i];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),o=new s),e[n++]=o.x,e[n++]=o.y,e[n++]=o.z}return this},copyVector4sArray:function copyVector4sArray(t){for(var e=this.array,n=0,i=0,r=t.length,o;i<r;i++){o=t[i];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),o=new h),e[n++]=o.x,e[n++]=o.y,e[n++]=o.z,e[n++]=o.w}return this},set:function set(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},getX:function getX(t){return this.array[t*this.itemSize]},setX:function setX(t,e){return this.array[t*this.itemSize]=e,this},getY:function getY(t){return this.array[t*this.itemSize+1]},setY:function setY(t,e){return this.array[t*this.itemSize+1]=e,this},getZ:function getZ(t){return this.array[t*this.itemSize+2]},setZ:function setZ(t,e){return this.array[t*this.itemSize+2]=e,this},getW:function getW(t){return this.array[t*this.itemSize+3]},setW:function setW(t,e){return this.array[t*this.itemSize+3]=e,this},setXY:function setXY(t,e,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this},setXYZ:function setXYZ(t,e,n,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this},setXYZW:function setXYZW(t,e,n,i,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this.array[t+3]=r,this},onUpload:function onUpload(t){return this.onUploadCallback=t,this},clone:function clone(){return new this.constructor(this.array,this.itemSize).copy(this)}}),P.prototype=Object.create(A.prototype),P.prototype.constructor=P,C.prototype=Object.create(A.prototype),C.prototype.constructor=C,I.prototype=Object.create(A.prototype),I.prototype.constructor=I,L.prototype=Object.create(A.prototype),L.prototype.constructor=L,R.prototype=Object.create(A.prototype),R.prototype.constructor=R,O.prototype=Object.create(A.prototype),O.prototype.constructor=O,k.prototype=Object.create(A.prototype),k.prototype.constructor=k,D.prototype=Object.create(A.prototype),D.prototype.constructor=D,F.prototype=Object.create(A.prototype),F.prototype.constructor=F,Object.assign(N.prototype,{computeGroups:function computeGroups(t){for(var e,n=[],i=void 0,r=t.faces,o=0,a;o<r.length;o++){a=r[o];a.materialIndex!==i&&(i=a.materialIndex,void 0!==e&&(e.count=3*o-e.start,n.push(e)),e={start:3*o,materialIndex:i})}void 0!==e&&(e.count=3*o-e.start,n.push(e)),this.groups=n},fromGeometry:function fromGeometry(t){var e,n=t.faces,i=t.vertices,o=t.faceVertexUvs,a=o[0]&&0<o[0].length,s=o[1]&&0<o[1].length,l=t.morphTargets,c=l.length;if(0<c){e=[];for(g=0;g<c;g++){e[g]=[]}this.morphTargets.position=e}var h,u=t.morphNormals,p=u.length;if(0<p){h=[];for(g=0;g<p;g++){h[g]=[]}this.morphTargets.normal=h}for(var d=t.skinIndices,f=t.skinWeights,m=d.length===i.length,_=f.length===i.length,g=0,y;g<n.length;g++){y=n[g];this.vertices.push(i[y.a],i[y.b],i[y.c]);var v=y.vertexNormals;if(3===v.length)this.normals.push(v[0],v[1],v[2]);else{var b=y.normal;this.normals.push(b,b,b)}var w=y.vertexColors;if(3===w.length)this.colors.push(w[0],w[1],w[2]);else{var x=y.color;this.colors.push(x,x,x)}if(!0===a&&(void 0!==(S=o[0][g])?this.uvs.push(S[0],S[1],S[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",g),this.uvs.push(new r,new r,new r))),!0===s){var S=o[1][g];void 0!==S?this.uvs2.push(S[0],S[1],S[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",g),this.uvs2.push(new r,new r,new r))}for(M=0;M<c;M++){var E=l[M].vertices;e[M].push(E[y.a],E[y.b],E[y.c])}for(var M=0,T;M<p;M++){T=u[M].vertexNormals[g];h[M].push(T.a,T.b,T.c)}m&&this.skinIndices.push(d[y.a],d[y.b],d[y.c]),_&&this.skinWeights.push(f[y.a],f[y.b],f[y.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this}});var ks=1;B.prototype=Object.assign(Object.create(i.prototype),{constructor:B,isBufferGeometry:!0,getIndex:function getIndex(){return this.index},setIndex:function setIndex(t){Array.isArray(t)?this.index=new(65535<U(t)?k:R)(t,1):this.index=t},addAttribute:function addAttribute(t,e){return e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute?"index"===t?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),void this.setIndex(e)):(this.attributes[t]=e,this):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),void this.addAttribute(t,new A(arguments[1],arguments[2])))},getAttribute:function getAttribute(t){return this.attributes[t]},removeAttribute:function removeAttribute(t){return delete this.attributes[t],this},addGroup:function addGroup(t,e,n){this.groups.push({start:t,count:e,materialIndex:void 0!==n?n:0})},clearGroups:function clearGroups(){this.groups=[]},setDrawRange:function setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e},applyMatrix:function applyMatrix(t){var e=this.attributes.position;void 0!==e&&(t.applyToBufferAttribute(e),e.needsUpdate=!0);var n=this.attributes.normal;return void 0!==n&&(new l().getNormalMatrix(t).applyToBufferAttribute(n),n.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var t=new o;return function(e){return t.makeRotationX(e),this.applyMatrix(t),this}}(),rotateY:function(){var t=new o;return function(e){return t.makeRotationY(e),this.applyMatrix(t),this}}(),rotateZ:function(){var t=new o;return function(e){return t.makeRotationZ(e),this.applyMatrix(t),this}}(),translate:function(){var t=new o;return function(e,n,i){return t.makeTranslation(e,n,i),this.applyMatrix(t),this}}(),scale:function(){var t=new o;return function(e,n,i){return t.makeScale(e,n,i),this.applyMatrix(t),this}}(),lookAt:function(){var t=new x;return function(e){t.lookAt(e),t.updateMatrix(),this.applyMatrix(t.matrix)}}(),center:function(){var t=new s;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(t).negate(),this.translate(t.x,t.y,t.z),this}}(),setFromObject:function setFromObject(t){var e=t.geometry;if(t.isPoints||t.isLine){var n=new D(3*e.vertices.length,3),i=new D(3*e.colors.length,3);if(this.addAttribute("position",n.copyVector3sArray(e.vertices)),this.addAttribute("color",i.copyColorsArray(e.colors)),e.lineDistances&&e.lineDistances.length===e.vertices.length){var r=new D(e.lineDistances.length,1);this.addAttribute("lineDistance",r.copyArray(e.lineDistances))}null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone())}else t.isMesh&&e&&e.isGeometry&&this.fromGeometry(e);return this},setFromPoints:function setFromPoints(t){for(var e=[],n=0,i=t.length,r;n<i;n++){r=t[n];e.push(r.x,r.y,r.z||0)}return this.addAttribute("position",new D(e,3)),this},updateFromObject:function updateFromObject(t){var e=t.geometry;if(t.isMesh){var n=e.__directGeometry;if(!0===e.elementsNeedUpdate&&(n=void 0,e.elementsNeedUpdate=!1),void 0===n)return this.fromGeometry(e);n.verticesNeedUpdate=e.verticesNeedUpdate,n.normalsNeedUpdate=e.normalsNeedUpdate,n.colorsNeedUpdate=e.colorsNeedUpdate,n.uvsNeedUpdate=e.uvsNeedUpdate,n.groupsNeedUpdate=e.groupsNeedUpdate,e.verticesNeedUpdate=!1,e.normalsNeedUpdate=!1,e.colorsNeedUpdate=!1,e.uvsNeedUpdate=!1,e.groupsNeedUpdate=!1,e=n}var i;return!0===e.verticesNeedUpdate&&(void 0!==(i=this.attributes.position)&&(i.copyVector3sArray(e.vertices),i.needsUpdate=!0),e.verticesNeedUpdate=!1),!0===e.normalsNeedUpdate&&(void 0!==(i=this.attributes.normal)&&(i.copyVector3sArray(e.normals),i.needsUpdate=!0),e.normalsNeedUpdate=!1),!0===e.colorsNeedUpdate&&(void 0!==(i=this.attributes.color)&&(i.copyColorsArray(e.colors),i.needsUpdate=!0),e.colorsNeedUpdate=!1),e.uvsNeedUpdate&&(void 0!==(i=this.attributes.uv)&&(i.copyVector2sArray(e.uvs),i.needsUpdate=!0),e.uvsNeedUpdate=!1),e.lineDistancesNeedUpdate&&(void 0!==(i=this.attributes.lineDistance)&&(i.copyArray(e.lineDistances),i.needsUpdate=!0),e.lineDistancesNeedUpdate=!1),e.groupsNeedUpdate&&(e.computeGroups(t.geometry),this.groups=e.groups,e.groupsNeedUpdate=!1),this},fromGeometry:function fromGeometry(t){return t.__directGeometry=new N().fromGeometry(t),this.fromDirectGeometry(t.__directGeometry)},fromDirectGeometry:function fromDirectGeometry(t){var e=new Float32Array(3*t.vertices.length);if(this.addAttribute("position",new A(e,3).copyVector3sArray(t.vertices)),0<t.normals.length){var n=new Float32Array(3*t.normals.length);this.addAttribute("normal",new A(n,3).copyVector3sArray(t.normals))}if(0<t.colors.length){var i=new Float32Array(3*t.colors.length);this.addAttribute("color",new A(i,3).copyColorsArray(t.colors))}if(0<t.uvs.length){var r=new Float32Array(2*t.uvs.length);this.addAttribute("uv",new A(r,2).copyVector2sArray(t.uvs))}if(0<t.uvs2.length){var o=new Float32Array(2*t.uvs2.length);this.addAttribute("uv2",new A(o,2).copyVector2sArray(t.uvs2))}this.groups=t.groups;for(var a in t.morphTargets){for(var s=[],l=t.morphTargets[a],c=0,h=l.length;c<h;c++){var u=l[c],p=new D(3*u.length,3);s.push(p.copyVector3sArray(u))}this.morphAttributes[a]=s}if(0<t.skinIndices.length){var d=new D(4*t.skinIndices.length,4);this.addAttribute("skinIndex",d.copyVector4sArray(t.skinIndices))}if(0<t.skinWeights.length){var f=new D(4*t.skinWeights.length,4);this.addAttribute("skinWeight",f.copyVector4sArray(t.skinWeights))}return null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:function computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new f);var t=this.attributes.position;void 0!==t?this.boundingBox.setFromBufferAttribute(t):this.boundingBox.makeEmpty(),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error("THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The \"position\" attribute is likely to have NaN values.",this)},computeBoundingSphere:function(){var t=new f,e=new s;return function(){null===this.boundingSphere&&(this.boundingSphere=new m);var n=this.attributes.position;if(n){var i=this.boundingSphere.center;t.setFromBufferAttribute(n),t.getCenter(i);for(var r=0,o=0,a=n.count;o<a;o++){e.x=n.getX(o),e.y=n.getY(o),e.z=n.getZ(o),r=_Mathmax(r,i.distanceToSquared(e))}this.boundingSphere.radius=_Mathsqrt(r),isNaN(this.boundingSphere.radius)&&console.error("THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The \"position\" attribute is likely to have NaN values.",this)}}}(),computeFaceNormals:function computeFaceNormals(){},computeVertexNormals:function computeVertexNormals(){var t=this.index,e=this.attributes,n=this.groups;if(e.position){var i=e.position.array;if(void 0===e.normal)this.addAttribute("normal",new A(new Float32Array(i.length),3));else for(var r=e.normal.array,o=0,a=r.length;o<a;o++){r[o]=0}var l,c,h,u=e.normal.array,p=new s,d=new s,f=new s,m=new s,_=new s;if(t){var g=t.array;0===n.length&&this.addGroup(0,g.length);for(var y=0,v=n.length;y<v;++y){for(var b=n[y],w=b.start,o=w,a=w+b.count;o<a;o+=3){l=3*g[o+0],c=3*g[o+1],h=3*g[o+2],p.fromArray(i,l),d.fromArray(i,c),f.fromArray(i,h),m.subVectors(f,d),_.subVectors(p,d),m.cross(_),u[l]+=m.x,u[l+1]+=m.y,u[l+2]+=m.z,u[c]+=m.x,u[c+1]+=m.y,u[c+2]+=m.z,u[h]+=m.x,u[h+1]+=m.y,u[h+2]+=m.z}}}else for(var o=0,a=i.length;o<a;o+=9){p.fromArray(i,o),d.fromArray(i,o+3),f.fromArray(i,o+6),m.subVectors(f,d),_.subVectors(p,d),m.cross(_),u[o]=m.x,u[o+1]=m.y,u[o+2]=m.z,u[o+3]=m.x,u[o+4]=m.y,u[o+5]=m.z,u[o+6]=m.x,u[o+7]=m.y,u[o+8]=m.z}this.normalizeNormals(),e.normal.needsUpdate=!0}},merge:function merge(t,e){if(t&&t.isBufferGeometry){void 0===e&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n=this.attributes;for(var i in n){if(void 0!==t.attributes[i])for(var r=n[i].array,o=t.attributes[i],a=o.array,s=0,l=o.itemSize*e;s<a.length;s++,l++){r[l]=a[s]}}return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t)},normalizeNormals:function(){var t=new s;return function(){for(var e=this.attributes.normal,n=0,i=e.count;n<i;n++){t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.normalize(),e.setXYZ(n,t.x,t.y,t.z)}}}(),toNonIndexed:function toNonIndexed(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var t=new B,e=this.index.array,n=this.attributes;for(var i in n){for(var r=n[i],o=r.array,a=r.itemSize,s=new o.constructor(e.length*a),l=0,c=0,h=0,u=e.length;h<u;h++){l=e[h]*a;for(var p=0;p<a;p++){s[c++]=o[l++]}}t.addAttribute(i,new A(s,a))}for(var d=this.groups,h=0,u=d.length,f;h<u;h++){f=d[h];t.addGroup(f.start,f.count,f.materialIndex)}return t},toJSON:function toJSON(){var t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),void 0!==this.parameters){var e=this.parameters;for(var n in e){void 0!==e[n]&&(t[n]=e[n])}return t}t.data={attributes:{}};var i=this.index;if(null!==i){a=Array.prototype.slice.call(i.array);t.data.index={type:i.array.constructor.name,array:a}}var r=this.attributes;for(var n in r){var o=r[n],a=Array.prototype.slice.call(o.array);t.data.attributes[n]={itemSize:o.itemSize,type:o.array.constructor.name,array:a,normalized:o.normalized}}var s=this.groups;0<s.length&&(t.data.groups=JSON.parse(JSON.stringify(s)));var l=this.boundingSphere;return null!==l&&(t.data.boundingSphere={center:l.center.toArray(),radius:l.radius}),t},clone:function clone(){return new B().copy(this)},copy:function copy(t){var e,n,i;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;var r=t.index;null!==r&&this.setIndex(r.clone());var o=t.attributes;for(e in o){var a=o[e];this.addAttribute(e,a.clone())}var s=t.morphAttributes;for(e in s){var l=[],c=s[e];for(n=0,i=c.length;n<i;n++){l.push(c[n].clone())}this.morphAttributes[e]=l}var h=t.groups;for(n=0,i=h.length;n<i;n++){var u=h[n];this.addGroup(u.start,u.count,u.materialIndex)}var p=t.boundingBox;null!==p&&(this.boundingBox=p.clone());var d=t.boundingSphere;return null!==d&&(this.boundingSphere=d.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this},dispose:function dispose(){this.dispatchEvent({type:"dispose"})}}),(z.prototype=Object.create(T.prototype)).constructor=z,G.prototype=Object.create(B.prototype),G.prototype.constructor=G,(H.prototype=Object.create(T.prototype)).constructor=H,j.prototype=Object.create(B.prototype),j.prototype.constructor=j;var Ds=0;V.prototype=Object.assign(Object.create(i.prototype),{constructor:V,isMaterial:!0,onBeforeCompile:function onBeforeCompile(){},setValues:function setValues(t){if(void 0!==t)for(var e in t){var n=t[e];if(void 0!==n){if("shading"!==e){var i=this[e];void 0!==i?i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[e]="overdraw"===e?+n:n:console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===n;}else console.warn("THREE.Material: '"+e+"' parameter is undefined.")}},toJSON:function toJSON(t){function e(t){var e=[];for(var n in t){var i=t[n];delete i.metadata,e.push(i)}return e}var n=void 0===t||"string"==typeof t;n&&(t={textures:{},images:{}});var i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),1!==this.emissiveIntensity&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearCoat&&(i.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(i.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(t).uuid),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(t).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(t).uuid,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(t).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(t).uuid,i.reflectivity=this.reflectivity),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.size&&(i.size=this.size),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Eo&&(i.blending=this.blending),!0===this.flatShading&&(i.flatShading=this.flatShading),this.side!==go&&(i.side=this.side),this.vertexColors!==bo&&(i.vertexColors=this.vertexColors),1>this.opacity&&(i.opacity=this.opacity),!0===this.transparent&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,0!==this.rotation&&(i.rotation=this.rotation),1!==this.linewidth&&(i.linewidth=this.linewidth),void 0!==this.dashSize&&(i.dashSize=this.dashSize),void 0!==this.gapSize&&(i.gapSize=this.gapSize),void 0!==this.scale&&(i.scale=this.scale),!0===this.dithering&&(i.dithering=!0),0<this.alphaTest&&(i.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(i.wireframe=this.wireframe),1<this.wireframeLinewidth&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(i.morphTargets=!0),!0===this.skinning&&(i.skinning=!0),!1===this.visible&&(i.visible=!1),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),n){var r=e(t.textures),o=e(t.images);0<r.length&&(i.textures=r),0<o.length&&(i.images=o)}return i},clone:function clone(){return new this.constructor().copy(this)},copy:function copy(t){this.name=t.name,this.fog=t.fog,this.lights=t.lights,this.blending=t.blending,this.side=t.side,this.flatShading=t.flatShading,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.premultipliedAlpha=t.premultipliedAlpha,this.overdraw=t.overdraw,this.visible=t.visible,this.userData=JSON.parse(JSON.stringify(t.userData)),this.clipShadows=t.clipShadows,this.clipIntersection=t.clipIntersection;var e=t.clippingPlanes,n=null;if(null!==e){var i=e.length;n=Array(i);for(var r=0;r!==i;++r){n[r]=e[r].clone()}}return this.clippingPlanes=n,this.shadowSide=t.shadowSide,this},dispose:function dispose(){this.dispatchEvent({type:"dispose"})}}),W.prototype=Object.create(V.prototype),W.prototype.constructor=W,W.prototype.isMeshBasicMaterial=!0,W.prototype.copy=function(t){return V.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this},q.prototype=Object.create(V.prototype),q.prototype.constructor=q,q.prototype.isShaderMaterial=!0,q.prototype.copy=function(t){return V.prototype.copy.call(this,t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=Ps.clone(t.uniforms),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.extensions=t.extensions,this},q.prototype.toJSON=function(t){var e=V.prototype.toJSON.call(this,t);return e.uniforms=this.uniforms,e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e},Object.assign(X.prototype,{set:function set(t,e){return this.origin.copy(t),this.direction.copy(e),this},clone:function clone(){return new this.constructor().copy(this)},copy:function copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this},at:function(t,e){return void 0===e&&(console.warn("THREE.Ray: .at() target is now required"),e=new s),e.copy(this.direction).multiplyScalar(t).add(this.origin)},lookAt:function lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this},recast:function(){var t=new s;return function(e){return this.origin.copy(this.at(e,t)),this}}(),closestPointToPoint:function closestPointToPoint(t,e){void 0===e&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),e=new s),e.subVectors(t,this.origin);var n=e.dot(this.direction);return 0>n?e.copy(this.origin):e.copy(this.direction).multiplyScalar(n).add(this.origin)},distanceToPoint:function distanceToPoint(t){return _Mathsqrt(this.distanceSqToPoint(t))},distanceSqToPoint:function(){var t=new s;return function(e){var n=t.subVectors(e,this.origin).dot(this.direction);return 0>n?this.origin.distanceToSquared(e):(t.copy(this.direction).multiplyScalar(n).add(this.origin),t.distanceToSquared(e))}}(),distanceSqToSegment:function(){var t=new s,e=new s,n=new s;return function(i,r,o,a){t.copy(i).add(r).multiplyScalar(.5),e.copy(r).sub(i).normalize(),n.copy(this.origin).sub(t);var s,l,c,h,u=.5*i.distanceTo(r),p=-this.direction.dot(e),d=n.dot(this.direction),f=-n.dot(e),m=n.lengthSq(),_=_Mathabs(1-p*p);if(0<_){if(s=p*f-d,l=p*d-f,h=u*_,0<=s){if(l>=-h){if(l<=h){var g=1/_;c=(s*=g)*(s+p*(l*=g)+2*d)+l*(p*s+l+2*f)+m}else l=u,c=-(s=_Mathmax(0,-(p*l+d)))*s+l*(l+2*f)+m;}else l=-u,c=-(s=_Mathmax(0,-(p*l+d)))*s+l*(l+2*f)+m;}else l<=-h?c=-(s=_Mathmax(0,-(-p*u+d)))*s+(l=0<s?-u:_Mathmin(_Mathmax(-u,-f),u))*(l+2*f)+m:l<=h?(s=0,c=(l=_Mathmin(_Mathmax(-u,-f),u))*(l+2*f)+m):c=-(s=_Mathmax(0,-(p*u+d)))*s+(l=0<s?u:_Mathmin(_Mathmax(-u,-f),u))*(l+2*f)+m;}else l=0<p?-u:u,c=-(s=_Mathmax(0,-(p*l+d)))*s+l*(l+2*f)+m;return o&&o.copy(this.direction).multiplyScalar(s).add(this.origin),a&&a.copy(e).multiplyScalar(l).add(t),c}}(),intersectSphere:function(){var t=new s;return function(e,n){t.subVectors(e.center,this.origin);var i=t.dot(this.direction),r=t.dot(t)-i*i,o=e.radius*e.radius;if(r>o)return null;var a=_Mathsqrt(o-r),s=i-a,l=i+a;return 0>s&&0>l?null:0>s?this.at(l,n):this.at(s,n)}}(),intersectsSphere:function intersectsSphere(t){return this.distanceToPoint(t.center)<=t.radius},distanceToPlane:function distanceToPlane(t){var e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(t.normal)+t.constant)/e;return 0<=n?n:null},intersectPlane:function intersectPlane(t,e){var n=this.distanceToPlane(t);return null===n?null:this.at(n,e)},intersectsPlane:function intersectsPlane(t){var e=t.distanceToPoint(this.origin);return 0===e||0>t.normal.dot(this.direction)*e},intersectBox:function intersectBox(t,e){var n,i,r,o,a,s,l=1/this.direction.x,c=1/this.direction.y,h=1/this.direction.z,u=this.origin;return 0<=l?(n=(t.min.x-u.x)*l,i=(t.max.x-u.x)*l):(n=(t.max.x-u.x)*l,i=(t.min.x-u.x)*l),0<=c?(r=(t.min.y-u.y)*c,o=(t.max.y-u.y)*c):(r=(t.max.y-u.y)*c,o=(t.min.y-u.y)*c),n>o||r>i?null:((r>n||n!==n)&&(n=r),(o<i||i!==i)&&(i=o),0<=h?(a=(t.min.z-u.z)*h,s=(t.max.z-u.z)*h):(a=(t.max.z-u.z)*h,s=(t.min.z-u.z)*h),n>s||a>i?null:((a>n||n!==n)&&(n=a),(s<i||i!==i)&&(i=s),0>i?null:this.at(0<=n?n:i,e)))},intersectsBox:function(){var t=new s;return function(e){return null!==this.intersectBox(e,t)}}(),intersectTriangle:function(){var t=new s,e=new s,n=new s,i=new s;return function(r,o,a,s,l){e.subVectors(o,r),n.subVectors(a,r),i.crossVectors(e,n);var c,h=this.direction.dot(i);if(0<h){if(s)return null;c=1}else{if(!(0>h))return null;c=-1,h=-h}t.subVectors(this.origin,r);var u=c*this.direction.dot(n.crossVectors(t,n));if(0>u)return null;var p=c*this.direction.dot(e.cross(t));if(0>p)return null;if(u+p>h)return null;var d=-c*t.dot(i);return 0>d?null:this.at(d/h,l)}}(),applyMatrix4:function applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this},equals:function equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}}),Object.assign(Y.prototype,{set:function set(t,e){return this.start.copy(t),this.end.copy(e),this},clone:function clone(){return new this.constructor().copy(this)},copy:function copy(t){return this.start.copy(t.start),this.end.copy(t.end),this},getCenter:function getCenter(t){return void 0===t&&(console.warn("THREE.Line3: .getCenter() target is now required"),t=new s),t.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function delta(t){return void 0===t&&(console.warn("THREE.Line3: .delta() target is now required"),t=new s),t.subVectors(this.end,this.start)},distanceSq:function distanceSq(){return this.start.distanceToSquared(this.end)},distance:function distance(){return this.start.distanceTo(this.end)},at:function(t,e){return void 0===e&&(console.warn("THREE.Line3: .at() target is now required"),e=new s),this.delta(e).multiplyScalar(t).add(this.start)},closestPointToPointParameter:function(){var t=new s,e=new s;return function(n,i){t.subVectors(n,this.start),e.subVectors(this.end,this.start);var r=e.dot(e),o=e.dot(t)/r;return i&&(o=Ms.clamp(o,0,1)),o}}(),closestPointToPoint:function closestPointToPoint(t,e,n){var i=this.closestPointToPointParameter(t,e);return void 0===n&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),n=new s),this.delta(n).multiplyScalar(i).add(this.start)},applyMatrix4:function applyMatrix4(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this},equals:function equals(t){return t.start.equals(this.start)&&t.end.equals(this.end)}}),Object.assign(Z,{getNormal:function(){var t=new s;return function(e,n,i,r){void 0===r&&(console.warn("THREE.Triangle: .getNormal() target is now required"),r=new s),r.subVectors(i,n),t.subVectors(e,n),r.cross(t);var o=r.lengthSq();return 0<o?r.multiplyScalar(1/_Mathsqrt(o)):r.set(0,0,0)}}(),getBarycoord:function(){var t=new s,e=new s,n=new s;return function(i,r,o,a,l){t.subVectors(a,r),e.subVectors(o,r),n.subVectors(i,r);var c=t.dot(t),h=t.dot(e),u=t.dot(n),p=e.dot(e),d=e.dot(n),f=c*p-h*h;if(void 0===l&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),l=new s),0===f)return l.set(-2,-1,-1);var m=1/f,_=(p*u-h*d)*m,g=(c*d-h*u)*m;return l.set(1-_-g,g,_)}}(),containsPoint:function(){var t=new s;return function(e,n,i,r){return Z.getBarycoord(e,n,i,r,t),0<=t.x&&0<=t.y&&1>=t.x+t.y}}()}),Object.assign(Z.prototype,{set:function set(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this},setFromPointsAndIndices:function setFromPointsAndIndices(t,e,n,i){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[i]),this},clone:function clone(){return new this.constructor().copy(this)},copy:function copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this},getArea:function(){var t=new s,e=new s;return function(){return t.subVectors(this.c,this.b),e.subVectors(this.a,this.b),.5*t.cross(e).length()}}(),getMidpoint:function getMidpoint(t){return void 0===t&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),t=new s),t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function getNormal(t){return Z.getNormal(this.a,this.b,this.c,t)},getPlane:function getPlane(t){return void 0===t&&(console.warn("THREE.Triangle: .getPlane() target is now required"),t=new s),t.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function getBarycoord(t,e){return Z.getBarycoord(t,this.a,this.b,this.c,e)},containsPoint:function containsPoint(t){return Z.containsPoint(t,this.a,this.b,this.c)},intersectsBox:function intersectsBox(t){return t.intersectsTriangle(this)},closestPointToPoint:function(){var t=new _,e=[new Y,new Y,new Y],n=new s,i=new s;return function(r,o){void 0===o&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),o=new s);var a=1/0;if(t.setFromCoplanarPoints(this.a,this.b,this.c),t.projectPoint(r,n),!0===this.containsPoint(n))o.copy(n);else{e[0].set(this.a,this.b),e[1].set(this.b,this.c),e[2].set(this.c,this.a);for(var l=0;l<e.length;l++){e[l].closestPointToPoint(n,!0,i);var c=n.distanceToSquared(i);c<a&&(a=c,o.copy(i))}}return o}}(),equals:function equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}),J.prototype=Object.assign(Object.create(x.prototype),{constructor:J,isMesh:!0,setDrawMode:function setDrawMode(t){this.drawMode=t},copy:function copy(t){return x.prototype.copy.call(this,t),this.drawMode=t.drawMode,void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this},updateMorphTargets:function updateMorphTargets(){var t,e,n,i=this.geometry;if(i.isBufferGeometry){var r=i.morphAttributes,o=Object.keys(r);if(0<o.length){var a=r[o[0]];if(void 0!==a)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,e=a.length;t<e;t++){n=a[t].name||t+"",this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}}else{var s=i.morphTargets;if(void 0!==s&&0<s.length)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,e=s.length;t<e;t++){n=s[t].name||t+"",this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}},raycast:function(){function t(t,e,n,i,r,o,a){return Z.getBarycoord(t,e,n,i,v),r.multiplyScalar(v.x),o.multiplyScalar(v.y),a.multiplyScalar(v.z),r.add(o).add(a),r.clone()}function e(t,e,n,i,r,o,a,s){if(null===(e.side===yo?i.intersectTriangle(a,o,r,!0,s):i.intersectTriangle(r,o,a,e.side!==vo,s)))return null;w.copy(s),w.applyMatrix4(t.matrixWorld);var l=n.ray.origin.distanceTo(w);return l<n.near||l>n.far?null:{distance:l,point:w.clone(),object:t}}function n(n,i,r,o,a,s,l,p){c.fromBufferAttribute(o,s),h.fromBufferAttribute(o,l),u.fromBufferAttribute(o,p);var d=e(n,n.material,i,r,c,h,u,b);if(d){a&&(_.fromBufferAttribute(a,s),g.fromBufferAttribute(a,l),y.fromBufferAttribute(a,p),d.uv=t(b,c,h,u,_,g,y));var f=new M(s,l,p);Z.getNormal(c,h,u,f.normal),d.face=f,d.faceIndex=s}return d}var i=new o,a=new X,l=new m,c=new s,h=new s,u=new s,p=new s,d=new s,f=new s,_=new r,g=new r,y=new r,v=new s,b=new s,w=new s;return function(r,o){var s=this.geometry,m=this.material,v=this.matrixWorld;if(void 0!==m&&(null===s.boundingSphere&&s.computeBoundingSphere(),l.copy(s.boundingSphere),l.applyMatrix4(v),!1!==r.ray.intersectsSphere(l)&&(i.getInverse(v),a.copy(r.ray).applyMatrix4(i),null===s.boundingBox||!1!==a.intersectsBox(s.boundingBox)))){var w;if(s.isBufferGeometry){var x,S,E,M,T,A=s.index,P=s.attributes.position,C=s.attributes.uv;if(null!==A)for(M=0,T=A.count;M<T;M+=3){x=A.getX(M),S=A.getX(M+1),E=A.getX(M+2),(w=n(this,r,a,P,C,x,S,E))&&(w.faceIndex=_Mathfloor(M/3),o.push(w))}else if(void 0!==P)for(M=0,T=P.count;M<T;M+=3){(w=n(this,r,a,P,C,x=M,S=M+1,E=M+2))&&o.push(w)}}else if(s.isGeometry){var I,L,R,O,k=Array.isArray(m),D=s.vertices,F=s.faces,N=s.faceVertexUvs[0];0<N.length&&(O=N);for(var U=0,B=F.length;U<B;U++){var z=F[U],G=k?m[z.materialIndex]:m;if(void 0!==G){if(I=D[z.a],L=D[z.b],R=D[z.c],!0===G.morphTargets){var H=s.morphTargets,j=this.morphTargetInfluences;c.set(0,0,0),h.set(0,0,0),u.set(0,0,0);for(var V=0,W=H.length,q;V<W;V++){q=j[V];if(0!==q){var X=H[V].vertices;c.addScaledVector(p.subVectors(X[z.a],I),q),h.addScaledVector(d.subVectors(X[z.b],L),q),u.addScaledVector(f.subVectors(X[z.c],R),q)}}c.add(I),h.add(L),u.add(R),I=c,L=h,R=u}if(w=e(this,G,r,a,I,L,R,b)){if(O&&O[U]){var Y=O[U];_.copy(Y[0]),g.copy(Y[1]),y.copy(Y[2]),w.uv=t(b,I,L,R,_,g,y)}w.face=z,w.faceIndex=U,o.push(w)}}}}}}}(),clone:function clone(){return new this.constructor(this.geometry,this.material).copy(this)}}),(lt.prototype=Object.create(c.prototype)).constructor=lt,lt.prototype.isCubeTexture=!0,Object.defineProperty(lt.prototype,"images",{get:function get(){return this.image},set:function set(t){this.image=t}});var Fs=new c,Ns=new lt,Us=[],Bs=[],zs=new Float32Array(16),Gs=new Float32Array(9);Bt.prototype.setValue=function(t,e){for(var n=this.seq,i=0,r=n.length,o;i!==r;++i){o=n[i];o.setValue(t,e[o.id])}};var Hs=/([\w\d_]+)(\])?(\[|\.)?/g;Ht.prototype.setValue=function(t,e,n){var i=this.map[e];void 0!==i&&i.setValue(t,n,this.renderer)},Ht.prototype.setOptional=function(t,e,n){var i=e[n];void 0!==i&&this.setValue(t,n,i)},Ht.upload=function(t,e,n,i){for(var r=0,o=e.length;r!==o;++r){var a=e[r],s=n[a.id];!1!==s.needsUpdate&&a.setValue(t,s.value,i)}},Ht.seqWithValue=function(t,e){for(var n=[],i=0,r=t.length,o;i!==r;++i){o=t[i];o.id in e&&n.push(o)}return n};var js=0,Vs=0;fe.prototype=Object.create(V.prototype),fe.prototype.constructor=fe,fe.prototype.isMeshDepthMaterial=!0,fe.prototype.copy=function(t){return V.prototype.copy.call(this,t),this.depthPacking=t.depthPacking,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this},me.prototype=Object.create(V.prototype),me.prototype.constructor=me,me.prototype.isMeshDistanceMaterial=!0,me.prototype.copy=function(t){return V.prototype.copy.call(this,t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this},ge.prototype=Object.create(c.prototype),ge.prototype.constructor=ge,xe.prototype=Object.assign(Object.create(S.prototype),{constructor:xe,isPerspectiveCamera:!0,copy:function copy(t,e){return S.prototype.copy.call(this,t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this},setFocalLength:function setFocalLength(t){var e=.5*this.getFilmHeight()/t;this.fov=2*Ms.RAD2DEG*_Mathatan2(e),this.updateProjectionMatrix()},getFocalLength:function getFocalLength(){var t=_Mathtan(.5*Ms.DEG2RAD*this.fov);return .5*this.getFilmHeight()/t},getEffectiveFOV:function getEffectiveFOV(){return 2*Ms.RAD2DEG*_Mathatan2(_Mathtan(.5*Ms.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function getFilmWidth(){return this.filmGauge*_Mathmin(this.aspect,1)},getFilmHeight:function getFilmHeight(){return this.filmGauge/_Mathmax(this.aspect,1)},setViewOffset:function setViewOffset(t,e,n,i,r,o){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function updateProjectionMatrix(){var t=this.near,e=t*_Mathtan(.5*Ms.DEG2RAD*this.fov)/this.zoom,n=2*e,i=this.aspect*n,r=-.5*i,o=this.view;if(null!==this.view&&this.view.enabled){var a=o.fullWidth,s=o.fullHeight;r+=o.offsetX*i/a,e-=o.offsetY*n/s,i*=o.width/a,n*=o.height/s}var l=this.filmOffset;0!==l&&(r+=t*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,e,e-n,t,this.far)},toJSON:function toJSON(t){var e=x.prototype.toJSON.call(this,t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}),Se.prototype=Object.assign(Object.create(xe.prototype),{constructor:Se,isArrayCamera:!0}),Te.prototype.isFogExp2=!0,Te.prototype.clone=function(){return new Te(this.color.getHex(),this.density)},Te.prototype.toJSON=function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}},Ae.prototype.isFog=!0,Ae.prototype.clone=function(){return new Ae(this.color.getHex(),this.near,this.far)},Ae.prototype.toJSON=function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}},Pe.prototype=Object.assign(Object.create(x.prototype),{constructor:Pe,copy:function copy(t,e){return x.prototype.copy.call(this,t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this},toJSON:function toJSON(t){var e=x.prototype.toJSON.call(this,t);return null!==this.background&&(e.object.background=this.background.toJSON(t)),null!==this.fog&&(e.object.fog=this.fog.toJSON()),e}}),Ce.prototype=Object.create(V.prototype),Ce.prototype.constructor=Ce,Ce.prototype.isSpriteMaterial=!0,Ce.prototype.copy=function(t){return V.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.rotation=t.rotation,this},Ie.prototype=Object.assign(Object.create(x.prototype),{constructor:Ie,isSprite:!0,raycast:function(){var t=new s,e=new s,n=new s;return function(i,r){e.setFromMatrixPosition(this.matrixWorld),i.ray.closestPointToPoint(e,t),n.setFromMatrixScale(this.matrixWorld);var o=n.x*n.y/4;if(!(e.distanceToSquared(t)>o)){var a=i.ray.origin.distanceTo(t);a<i.near||a>i.far||r.push({distance:a,point:t.clone(),face:null,object:this})}}}(),clone:function clone(){return new this.constructor(this.material).copy(this)},copy:function copy(t){return x.prototype.copy.call(this,t),void 0!==t.center&&this.center.copy(t.center),this}}),Le.prototype=Object.assign(Object.create(x.prototype),{constructor:Le,copy:function copy(t){x.prototype.copy.call(this,t,!1);for(var e=t.levels,n=0,i=e.length,r;n<i;n++){r=e[n];this.addLevel(r.object.clone(),r.distance)}return this},addLevel:function addLevel(t,e){void 0===e&&(e=0),e=_Mathabs(e);for(var n=this.levels,i=0;i<n.length&&!(e<n[i].distance);i++){}n.splice(i,0,{distance:e,object:t}),this.add(t)},getObjectForDistance:function getObjectForDistance(t){for(var e=this.levels,n=1,i=e.length;n<i&&!(t<e[n].distance);n++){}return e[n-1].object},raycast:function(){var t=new s;return function(e,n){t.setFromMatrixPosition(this.matrixWorld);var i=e.ray.origin.distanceTo(t);this.getObjectForDistance(i).raycast(e,n)}}(),update:function(){var t=new s,e=new s;return function(n){var i=this.levels;if(1<i.length){t.setFromMatrixPosition(n.matrixWorld),e.setFromMatrixPosition(this.matrixWorld);var r=t.distanceTo(e);i[0].object.visible=!0;for(var o=1,a=i.length;o<a&&r>=i[o].distance;o++){i[o-1].object.visible=!1,i[o].object.visible=!0}for(;o<a;o++){i[o].object.visible=!1}}}}(),toJSON:function toJSON(t){var e=x.prototype.toJSON.call(this,t);e.object.levels=[];for(var n=this.levels,i=0,r=n.length,o;i<r;i++){o=n[i];e.object.levels.push({object:o.object.uuid,distance:o.distance})}return e}}),Object.assign(Re.prototype,{calculateInverses:function calculateInverses(){this.boneInverses=[];for(var t=0,e=this.bones.length,n;t<e;t++){n=new o;this.bones[t]&&n.getInverse(this.bones[t].matrixWorld),this.boneInverses.push(n)}},pose:function pose(){var t,e,n;for(e=0,n=this.bones.length;e<n;e++){(t=this.bones[e])&&t.matrixWorld.getInverse(this.boneInverses[e])}for(e=0,n=this.bones.length;e<n;e++){(t=this.bones[e])&&(t.parent&&t.parent.isBone?(t.matrix.getInverse(t.parent.matrixWorld),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))}},update:function(){var t=new o,e=new o;return function(){for(var n=this.bones,i=this.boneInverses,r=this.boneMatrices,o=this.boneTexture,a=0,s=n.length,l;a<s;a++){l=n[a]?n[a].matrixWorld:e;t.multiplyMatrices(l,i[a]),t.toArray(r,16*a)}void 0!==o&&(o.needsUpdate=!0)}}(),clone:function clone(){return new Re(this.bones,this.boneInverses)},getBoneByName:function getBoneByName(t){for(var e=0,n=this.bones.length,i;e<n;e++){i=this.bones[e];if(i.name===t)return i}}}),Oe.prototype=Object.assign(Object.create(x.prototype),{constructor:Oe,isBone:!0}),ke.prototype=Object.assign(Object.create(J.prototype),{constructor:ke,isSkinnedMesh:!0,initBones:function initBones(){var t,e,n,i,r=[];if(this.geometry&&void 0!==this.geometry.bones){for(n=0,i=this.geometry.bones.length;n<i;n++){e=this.geometry.bones[n],t=new Oe,r.push(t),t.name=e.name,t.position.fromArray(e.pos),t.quaternion.fromArray(e.rotq),void 0!==e.scl&&t.scale.fromArray(e.scl)}for(n=0,i=this.geometry.bones.length;n<i;n++){-1!==(e=this.geometry.bones[n]).parent&&null!==e.parent&&void 0!==r[e.parent]?r[e.parent].add(r[n]):this.add(r[n])}}return this.updateMatrixWorld(!0),r},bind:function bind(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.getInverse(e)},pose:function pose(){this.skeleton.pose()},normalizeSkinWeights:function normalizeSkinWeights(){var t,e;if(this.geometry&&this.geometry.isGeometry)for(e=0;e<this.geometry.skinWeights.length;e++){var n=this.geometry.skinWeights[e];(t=1/n.manhattanLength())!==1/0?n.multiplyScalar(t):n.set(1,0,0,0)}else if(this.geometry&&this.geometry.isBufferGeometry){var i=new h,r=this.geometry.attributes.skinWeight;for(e=0;e<r.count;e++){i.x=r.getX(e),i.y=r.getY(e),i.z=r.getZ(e),i.w=r.getW(e),(t=1/i.manhattanLength())!==1/0?i.multiplyScalar(t):i.set(1,0,0,0),r.setXYZW(e,i.x,i.y,i.z,i.w)}}},updateMatrixWorld:function updateMatrixWorld(t){J.prototype.updateMatrixWorld.call(this,t),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function clone(){return new this.constructor(this.geometry,this.material).copy(this)}}),De.prototype=Object.create(V.prototype),De.prototype.constructor=De,De.prototype.isLineBasicMaterial=!0,De.prototype.copy=function(t){return V.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this},Fe.prototype=Object.assign(Object.create(x.prototype),{constructor:Fe,isLine:!0,computeLineDistances:function(){var t=new s,e=new s;return function(){var n=this.geometry;if(n.isBufferGeometry){if(null===n.index){for(var i=n.attributes.position,r=[0],o=1,a=i.count;o<a;o++){t.fromBufferAttribute(i,o-1),e.fromBufferAttribute(i,o),r[o]=r[o-1],r[o]+=t.distanceTo(e)}n.addAttribute("lineDistance",new D(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");}else if(n.isGeometry){var s=n.vertices;(r=n.lineDistances)[0]=0;for(var o=1,a=s.length;o<a;o++){r[o]=r[o-1],r[o]+=s[o-1].distanceTo(s[o])}}return this}}(),raycast:function(){var t=new o,e=new X,n=new m;return function(i,r){var o=i.linePrecision,a=o*o,l=this.geometry,c=this.matrixWorld;if(null===l.boundingSphere&&l.computeBoundingSphere(),n.copy(l.boundingSphere),n.applyMatrix4(c),!1!==i.ray.intersectsSphere(n)){t.getInverse(c),e.copy(i.ray).applyMatrix4(t);var h=new s,u=new s,p=new s,d=new s,f=this&&this.isLineSegments?2:1;if(l.isBufferGeometry){var m=l.index,_=l.attributes.position.array;if(null!==m)for(var g=m.array,y=0,v=g.length-1;y<v;y+=f){var b=g[y],w=g[y+1];h.fromArray(_,3*b),u.fromArray(_,3*w),(E=e.distanceSqToSegment(h,u,d,p))>a||(d.applyMatrix4(this.matrixWorld),(M=i.ray.origin.distanceTo(d))<i.near||M>i.far||r.push({distance:M,point:p.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this}))}else for(var y=0,v=_.length/3-1;y<v;y+=f){h.fromArray(_,3*y),u.fromArray(_,3*y+3),(E=e.distanceSqToSegment(h,u,d,p))>a||(d.applyMatrix4(this.matrixWorld),(M=i.ray.origin.distanceTo(d))<i.near||M>i.far||r.push({distance:M,point:p.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this}))}}else if(l.isGeometry)for(var x=l.vertices,S=x.length,y=0,E;y<S-1;y+=f){E=e.distanceSqToSegment(x[y],x[y+1],d,p);if(!(E>a)){d.applyMatrix4(this.matrixWorld);var M=i.ray.origin.distanceTo(d);M<i.near||M>i.far||r.push({distance:M,point:p.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}}}}(),clone:function clone(){return new this.constructor(this.geometry,this.material).copy(this)}}),Ne.prototype=Object.assign(Object.create(Fe.prototype),{constructor:Ne,isLineSegments:!0,computeLineDistances:function(){var t=new s,e=new s;return function(){var n=this.geometry;if(n.isBufferGeometry){if(null===n.index){for(var i=n.attributes.position,r=[],o=0,a=i.count;o<a;o+=2){t.fromBufferAttribute(i,o),e.fromBufferAttribute(i,o+1),r[o]=0===o?0:r[o-1],r[o+1]=r[o]+t.distanceTo(e)}n.addAttribute("lineDistance",new D(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");}else if(n.isGeometry)for(var s=n.vertices,r=n.lineDistances,o=0,a=s.length;o<a;o+=2){t.copy(s[o]),e.copy(s[o+1]),r[o]=0===o?0:r[o-1],r[o+1]=r[o]+t.distanceTo(e)}return this}}()}),Ue.prototype=Object.assign(Object.create(Fe.prototype),{constructor:Ue,isLineLoop:!0}),Be.prototype=Object.create(V.prototype),Be.prototype.constructor=Be,Be.prototype.isPointsMaterial=!0,Be.prototype.copy=function(t){return V.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this},ze.prototype=Object.assign(Object.create(x.prototype),{constructor:ze,isPoints:!0,raycast:function(){var t=new o,e=new X,n=new m;return function(i,r){function o(t,n){var o=e.distanceSqToPoint(t);if(o<p){e.closestPointToPoint(t,f),f.applyMatrix4(c);var s=i.ray.origin.distanceTo(f);if(s<i.near||s>i.far)return;r.push({distance:s,distanceToRay:_Mathsqrt(o),point:f.clone(),index:n,face:null,object:a})}}var a=this,l=this.geometry,c=this.matrixWorld,h=i.params.Points.threshold;if(null===l.boundingSphere&&l.computeBoundingSphere(),n.copy(l.boundingSphere),n.applyMatrix4(c),n.radius+=h,!1!==i.ray.intersectsSphere(n)){t.getInverse(c),e.copy(i.ray).applyMatrix4(t);var u=h/((this.scale.x+this.scale.y+this.scale.z)/3),p=u*u,d=new s,f=new s;if(l.isBufferGeometry){var m=l.index,_=l.attributes.position.array;if(null!==m)for(var g=m.array,y=0,v=g.length,b;y<v;y++){b=g[y];d.fromArray(_,3*b),o(d,b)}else for(var y=0,w=_.length/3;y<w;y++){d.fromArray(_,3*y),o(d,y)}}else for(var x=l.vertices,y=0,w=x.length;y<w;y++){o(x[y],y)}}}}(),clone:function clone(){return new this.constructor(this.geometry,this.material).copy(this)}}),Ge.prototype=Object.assign(Object.create(x.prototype),{constructor:Ge,isGroup:!0}),He.prototype=Object.assign(Object.create(c.prototype),{constructor:He,isVideoTexture:!0,update:function update(){var t=this.image;t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),(je.prototype=Object.create(c.prototype)).constructor=je,je.prototype.isCompressedTexture=!0,(Ve.prototype=Object.create(c.prototype)).constructor=Ve,Ve.prototype.isDepthTexture=!0,We.prototype=Object.create(B.prototype),We.prototype.constructor=We,(qe.prototype=Object.create(T.prototype)).constructor=qe,(Xe.prototype=Object.create(B.prototype)).constructor=Xe,(Ye.prototype=Object.create(T.prototype)).constructor=Ye,Ze.prototype=Object.create(B.prototype),Ze.prototype.constructor=Ze,(Je.prototype=Object.create(T.prototype)).constructor=Je,(Ke.prototype=Object.create(Ze.prototype)).constructor=Ke,(Qe.prototype=Object.create(T.prototype)).constructor=Qe,$e.prototype=Object.create(Ze.prototype),$e.prototype.constructor=$e,(tn.prototype=Object.create(T.prototype)).constructor=tn,(en.prototype=Object.create(Ze.prototype)).constructor=en,(nn.prototype=Object.create(T.prototype)).constructor=nn,(rn.prototype=Object.create(Ze.prototype)).constructor=rn,(on.prototype=Object.create(T.prototype)).constructor=on,(an.prototype=Object.create(B.prototype)).constructor=an,(sn.prototype=Object.create(T.prototype)).constructor=sn,(ln.prototype=Object.create(B.prototype)).constructor=ln,(cn.prototype=Object.create(T.prototype)).constructor=cn,(hn.prototype=Object.create(B.prototype)).constructor=hn;var Ws={triangulate:function triangulate(t,e,n){n=n||2;var i=e&&e.length,r=i?e[0]*n:t.length,o=un(t,0,r,n,!0),a=[];if(!o)return a;var s,l,c,h,u,p,d;if(i&&(o=yn(t,e,o,n)),t.length>80*n){s=c=t[0],l=h=t[1];for(var f=n;f<r;f+=n){u=t[f],p=t[f+1],u<s&&(s=u),p<l&&(l=p),u>c&&(c=u),p>h&&(h=p)}d=0!==(d=_Mathmax(c-s,h-l))?1/d:0}return dn(o,a,n,s,l,d),a}},qs={area:function area(t){for(var e=t.length,n=0,i=e-1,r=0;r<e;i=r++){n+=t[i].x*t[r].y-t[r].x*t[i].y}return .5*n},isClockWise:function isClockWise(t){return 0>qs.area(t)},triangulateShape:function triangulateShape(t,e){var n=[],i=[],r=[];Bn(t),zn(n,t);var o=t.length;e.forEach(Bn);for(s=0;s<e.length;s++){i.push(o),o+=e[s].length,zn(n,e[s])}for(var a=Ws.triangulate(n,i),s=0;s<a.length;s+=3){r.push(a.slice(s,s+3))}return r}};(Gn.prototype=Object.create(T.prototype)).constructor=Gn,Hn.prototype=Object.create(B.prototype),Hn.prototype.constructor=Hn;var Xs={generateTopUV:function generateTopUV(t,e,n,i,o){var a=e[3*n],s=e[3*n+1],l=e[3*i],c=e[3*i+1],h=e[3*o],u=e[3*o+1];return[new r(a,s),new r(l,c),new r(h,u)]},generateSideWallUV:function generateSideWallUV(t,e,n,i,o,a){var s=e[3*n],l=e[3*n+1],c=e[3*n+2],h=e[3*i],u=e[3*i+1],p=e[3*i+2],d=e[3*o],f=e[3*o+1],m=e[3*o+2],_=e[3*a],g=e[3*a+1],y=e[3*a+2];return .01>_Mathabs(l-u)?[new r(s,1-c),new r(h,1-p),new r(d,1-m),new r(_,1-y)]:[new r(l,1-c),new r(u,1-p),new r(f,1-m),new r(g,1-y)]}};(jn.prototype=Object.create(T.prototype)).constructor=jn,(Vn.prototype=Object.create(Hn.prototype)).constructor=Vn,(Wn.prototype=Object.create(T.prototype)).constructor=Wn,qn.prototype=Object.create(B.prototype),qn.prototype.constructor=qn,(Xn.prototype=Object.create(T.prototype)).constructor=Xn,(Yn.prototype=Object.create(B.prototype)).constructor=Yn,(Zn.prototype=Object.create(T.prototype)).constructor=Zn,(Jn.prototype=Object.create(B.prototype)).constructor=Jn,(Kn.prototype=Object.create(T.prototype)).constructor=Kn,Kn.prototype.toJSON=function(){var t=T.prototype.toJSON.call(this);return $n(this.parameters.shapes,t)},(Qn.prototype=Object.create(B.prototype)).constructor=Qn,Qn.prototype.toJSON=function(){var t=B.prototype.toJSON.call(this);return $n(this.parameters.shapes,t)},ti.prototype=Object.create(B.prototype),ti.prototype.constructor=ti,ei.prototype=Object.create(T.prototype),ei.prototype.constructor=ei,ni.prototype=Object.create(B.prototype),ni.prototype.constructor=ni,(ii.prototype=Object.create(ei.prototype)).constructor=ii,(ri.prototype=Object.create(ni.prototype)).constructor=ri,(oi.prototype=Object.create(T.prototype)).constructor=oi,(ai.prototype=Object.create(B.prototype)).constructor=ai;var Ys=Object.freeze({WireframeGeometry:We,ParametricGeometry:qe,ParametricBufferGeometry:Xe,TetrahedronGeometry:Je,TetrahedronBufferGeometry:Ke,OctahedronGeometry:Qe,OctahedronBufferGeometry:$e,IcosahedronGeometry:tn,IcosahedronBufferGeometry:en,DodecahedronGeometry:nn,DodecahedronBufferGeometry:rn,PolyhedronGeometry:Ye,PolyhedronBufferGeometry:Ze,TubeGeometry:on,TubeBufferGeometry:an,TorusKnotGeometry:sn,TorusKnotBufferGeometry:ln,TorusGeometry:cn,TorusBufferGeometry:hn,TextGeometry:jn,TextBufferGeometry:Vn,SphereGeometry:Wn,SphereBufferGeometry:qn,RingGeometry:Xn,RingBufferGeometry:Yn,PlaneGeometry:H,PlaneBufferGeometry:j,LatheGeometry:Zn,LatheBufferGeometry:Jn,ShapeGeometry:Kn,ShapeBufferGeometry:Qn,ExtrudeGeometry:Gn,ExtrudeBufferGeometry:Hn,EdgesGeometry:ti,ConeGeometry:ii,ConeBufferGeometry:ri,CylinderGeometry:ei,CylinderBufferGeometry:ni,CircleGeometry:oi,CircleBufferGeometry:ai,BoxGeometry:z,BoxBufferGeometry:G});(si.prototype=Object.create(V.prototype)).constructor=si,si.prototype.isShadowMaterial=!0,si.prototype.copy=function(t){return V.prototype.copy.call(this,t),this.color.copy(t.color),this},(li.prototype=Object.create(q.prototype)).constructor=li,li.prototype.isRawShaderMaterial=!0,ci.prototype=Object.create(V.prototype),ci.prototype.constructor=ci,ci.prototype.isMeshStandardMaterial=!0,ci.prototype.copy=function(t){return V.prototype.copy.call(this,t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},(hi.prototype=Object.create(ci.prototype)).constructor=hi,hi.prototype.isMeshPhysicalMaterial=!0,hi.prototype.copy=function(t){return ci.prototype.copy.call(this,t),this.defines={PHYSICAL:""},this.reflectivity=t.reflectivity,this.clearCoat=t.clearCoat,this.clearCoatRoughness=t.clearCoatRoughness,this},ui.prototype=Object.create(V.prototype),ui.prototype.constructor=ui,ui.prototype.isMeshPhongMaterial=!0,ui.prototype.copy=function(t){return V.prototype.copy.call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},(pi.prototype=Object.create(ui.prototype)).constructor=pi,pi.prototype.isMeshToonMaterial=!0,pi.prototype.copy=function(t){return ui.prototype.copy.call(this,t),this.gradientMap=t.gradientMap,this},(di.prototype=Object.create(V.prototype)).constructor=di,di.prototype.isMeshNormalMaterial=!0,di.prototype.copy=function(t){return V.prototype.copy.call(this,t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},(fi.prototype=Object.create(V.prototype)).constructor=fi,fi.prototype.isMeshLambertMaterial=!0,fi.prototype.copy=function(t){return V.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},(mi.prototype=Object.create(De.prototype)).constructor=mi,mi.prototype.isLineDashedMaterial=!0,mi.prototype.copy=function(t){return De.prototype.copy.call(this,t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this};var Zs=Object.freeze({ShadowMaterial:si,SpriteMaterial:Ce,RawShaderMaterial:li,ShaderMaterial:q,PointsMaterial:Be,MeshPhysicalMaterial:hi,MeshStandardMaterial:ci,MeshPhongMaterial:ui,MeshToonMaterial:pi,MeshNormalMaterial:di,MeshLambertMaterial:fi,MeshDepthMaterial:fe,MeshDistanceMaterial:me,MeshBasicMaterial:W,LineDashedMaterial:mi,LineBasicMaterial:De,Material:V}),Js={enabled:!1,files:{},add:function add(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function get(t){if(!1!==this.enabled)return this.files[t]},remove:function remove(t){delete this.files[t]},clear:function clear(){this.files={}}},Ks=new _i,Qs={};Object.assign(gi.prototype,{load:function load(t,e,n,i){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var r=this,o=Js.get(t);if(void 0!==o)return r.manager.itemStart(t),setTimeout(function(){e&&e(o),r.manager.itemEnd(t)},0),o;if(void 0===Qs[t]){var a=/^data:(.*?)(;base64)?,(.*)$/,s=t.match(a);if(s){var l=s[1],c=!!s[2],h=s[3];h=window.decodeURIComponent(h),c&&(h=window.atob(h));try{var u,p=(this.responseType||"").toLowerCase();switch(p){case"arraybuffer":case"blob":for(var d=new Uint8Array(h.length),f=0;f<h.length;f++){d[f]=h.charCodeAt(f)}u="blob"===p?new Blob([d.buffer],{type:l}):d.buffer;break;case"document":var m=new DOMParser;u=m.parseFromString(h,l);break;case"json":u=JSON.parse(h);break;default:u=h;}window.setTimeout(function(){e&&e(u),r.manager.itemEnd(t)},0)}catch(e){window.setTimeout(function(){i&&i(e),r.manager.itemEnd(t),r.manager.itemError(t)},0)}}else{Qs[t]=[],Qs[t].push({onLoad:e,onProgress:n,onError:i});var _=new XMLHttpRequest;_.open("GET",t,!0),_.addEventListener("load",function(e){var n=this.response;Js.add(t,n);var i=Qs[t];if(delete Qs[t],200===this.status){for(var o=0,a=i.length;o<a;o++){(s=i[o]).onLoad&&s.onLoad(n)}r.manager.itemEnd(t)}else if(0===this.status){console.warn("THREE.FileLoader: HTTP Status 0 received.");for(var o=0,a=i.length;o<a;o++){(s=i[o]).onLoad&&s.onLoad(n)}r.manager.itemEnd(t)}else{for(var o=0,a=i.length,s;o<a;o++){s=i[o];s.onError&&s.onError(e)}r.manager.itemEnd(t),r.manager.itemError(t)}},!1),_.addEventListener("progress",function(e){for(var n=Qs[t],i=0,r=n.length,o;i<r;i++){o=n[i];o.onProgress&&o.onProgress(e)}},!1),_.addEventListener("error",function(e){var n=Qs[t];delete Qs[t];for(var i=0,o=n.length,a;i<o;i++){a=n[i];a.onError&&a.onError(e)}r.manager.itemEnd(t),r.manager.itemError(t)},!1),void 0!==this.responseType&&(_.responseType=this.responseType),void 0!==this.withCredentials&&(_.withCredentials=this.withCredentials),_.overrideMimeType&&_.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain");for(var g in this.requestHeader){_.setRequestHeader(g,this.requestHeader[g])}_.send(null)}return r.manager.itemStart(t),_}Qs[t].push({onLoad:e,onProgress:n,onError:i})},setPath:function setPath(t){return this.path=t,this},setResponseType:function setResponseType(t){return this.responseType=t,this},setWithCredentials:function setWithCredentials(t){return this.withCredentials=t,this},setMimeType:function setMimeType(t){return this.mimeType=t,this},setRequestHeader:function setRequestHeader(t){return this.requestHeader=t,this}}),Object.assign(function(t){this.manager=void 0!==t?t:Ks,this._parser=null}.prototype,{load:function load(t,e,n,i){var r=this,o=[],a=new je;a.image=o;var s=new gi(this.manager);if(s.setPath(this.path),s.setResponseType("arraybuffer"),Array.isArray(t))for(var l=0,c=0,h=t.length;c<h;++c){!function(c){s.load(t[c],function(t){var n=r._parser(t,!0);o[c]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},6===(l+=1)&&(1===n.mipmapCount&&(a.minFilter=ba),a.format=n.format,a.needsUpdate=!0,e&&e(a))},n,i)}(c)}else s.load(t,function(t){var n=r._parser(t,!0);if(n.isCubemap)for(var i=n.mipmaps.length/n.mipmapCount,s=0;s<i;s++){o[s]={mipmaps:[]};for(var l=0;l<n.mipmapCount;l++){o[s].mipmaps.push(n.mipmaps[s*n.mipmapCount+l]),o[s].format=n.format,o[s].width=n.width,o[s].height=n.height}}else a.image.width=n.width,a.image.height=n.height,a.mipmaps=n.mipmaps;1===n.mipmapCount&&(a.minFilter=ba),a.format=n.format,a.needsUpdate=!0,e&&e(a)},n,i);return a},setPath:function setPath(t){return this.path=t,this}}),Object.assign(function(t){this.manager=void 0!==t?t:Ks,this._parser=null}.prototype,{load:function load(t,e,n,i){var r=this,o=new d,a=new gi(this.manager);return a.setResponseType("arraybuffer"),a.load(t,function(t){var n=r._parser(t);n&&(void 0!==n.image?o.image=n.image:void 0!==n.data&&(o.image.width=n.width,o.image.height=n.height,o.image.data=n.data),o.wrapS=void 0!==n.wrapS?n.wrapS:ma,o.wrapT=void 0!==n.wrapT?n.wrapT:ma,o.magFilter=void 0!==n.magFilter?n.magFilter:ba,o.minFilter=void 0!==n.minFilter?n.minFilter:xa,o.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.format&&(o.format=n.format),void 0!==n.type&&(o.type=n.type),void 0!==n.mipmaps&&(o.mipmaps=n.mipmaps),1===n.mipmapCount&&(o.minFilter=ba),o.needsUpdate=!0,e&&e(o,n))},n,i),o}}),Object.assign(vi.prototype,{crossOrigin:"Anonymous",load:function load(t,e,n,i){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var r=this,o=Js.get(t);if(void 0!==o)return r.manager.itemStart(t),setTimeout(function(){e&&e(o),r.manager.itemEnd(t)},0),o;var a=document.createElementNS("http://www.w3.org/1999/xhtml","img");return a.addEventListener("load",function(){Js.add(t,this),e&&e(this),r.manager.itemEnd(t)},!1),a.addEventListener("error",function(e){i&&i(e),r.manager.itemEnd(t),r.manager.itemError(t)},!1),"data:"!==t.substr(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),r.manager.itemStart(t),a.src=t,a},setCrossOrigin:function setCrossOrigin(t){return this.crossOrigin=t,this},setPath:function setPath(t){return this.path=t,this}}),Object.assign(function(t){this.manager=void 0!==t?t:Ks}.prototype,{crossOrigin:"Anonymous",load:function load(t,e,n,i){var r=new lt,o=new vi(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);for(var a=0,s=0;s<t.length;++s){!function(n){o.load(t[n],function(t){r.images[n]=t,6==++a&&(r.needsUpdate=!0,e&&e(r))},void 0,i)}(s)}return r},setCrossOrigin:function setCrossOrigin(t){return this.crossOrigin=t,this},setPath:function setPath(t){return this.path=t,this}}),Object.assign(wi.prototype,{crossOrigin:"Anonymous",load:function load(t,e,n,i){var r=new c,o=new vi(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(t,function(n){r.image=n;var i=0<t.search(/\.(jpg|jpeg)$/)||0===t.search(/^data\:image\/jpeg/);r.format=i?Fa:Na,r.needsUpdate=!0,void 0!==e&&e(r)},n,i),r},setCrossOrigin:function setCrossOrigin(t){return this.crossOrigin=t,this},setPath:function setPath(t){return this.path=t,this}}),Object.assign(xi.prototype,{getPoint:function getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function getPointAt(t,e){var n=this.getUtoTmapping(t);return this.getPoint(n,e)},getPoints:function getPoints(t){void 0===t&&(t=5);for(var e=[],n=0;n<=t;n++){e.push(this.getPoint(n/t))}return e},getSpacedPoints:function getSpacedPoints(t){void 0===t&&(t=5);for(var e=[],n=0;n<=t;n++){e.push(this.getPointAt(n/t))}return e},getLength:function getLength(){var t=this.getLengths();return t[t.length-1]},getLengths:function getLengths(t){if(void 0===t&&(t=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,n,i=[],r=this.getPoint(0),o=0;for(i.push(0),n=1;n<=t;n++){o+=(e=this.getPoint(n/t)).distanceTo(r),i.push(o),r=e}return this.cacheArcLengths=i,i},updateArcLengths:function updateArcLengths(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function getUtoTmapping(t,e){var n,i=this.getLengths(),r=0,o=i.length;n=e||t*i[o-1];for(var a,s=0,l=o-1;s<=l;){if(r=_Mathfloor(s+(l-s)/2),0>(a=i[r]-n))s=r+1;else{if(!(0<a)){l=r;break}l=r-1}}if(r=l,i[r]===n)return r/(o-1);var c=i[r];return(r+(n-c)/(i[r+1]-c))/(o-1)},getTangent:function getTangent(t){var e=t-1e-4,n=t+1e-4;0>e&&(e=0),1<n&&(n=1);var i=this.getPoint(e);return this.getPoint(n).clone().sub(i).normalize()},getTangentAt:function getTangentAt(t){var e=this.getUtoTmapping(t);return this.getTangent(e)},computeFrenetFrames:function computeFrenetFrames(t,e){var n,i,r,a=new s,l=[],c=[],h=[],u=new s,p=new o;for(n=0;n<=t;n++){i=n/t,l[n]=this.getTangentAt(i),l[n].normalize()}c[0]=new s,h[0]=new s;var d=_NumberMAX_VALUE,f=_Mathabs(l[0].x),m=_Mathabs(l[0].y),_=_Mathabs(l[0].z);for(f<=d&&(d=f,a.set(1,0,0)),m<=d&&(d=m,a.set(0,1,0)),_<=d&&a.set(0,0,1),u.crossVectors(l[0],a).normalize(),c[0].crossVectors(l[0],u),h[0].crossVectors(l[0],c[0]),n=1;n<=t;n++){c[n]=c[n-1].clone(),h[n]=h[n-1].clone(),u.crossVectors(l[n-1],l[n]),u.length()>_NumberEPSILON&&(u.normalize(),r=_Mathacos(Ms.clamp(l[n-1].dot(l[n]),-1,1)),c[n].applyMatrix4(p.makeRotationAxis(u,r))),h[n].crossVectors(l[n],c[n])}if(!0===e)for(r=_Mathacos(Ms.clamp(c[0].dot(c[t]),-1,1)),r/=t,0<l[0].dot(u.crossVectors(c[0],c[t]))&&(r=-r),n=1;n<=t;n++){c[n].applyMatrix4(p.makeRotationAxis(l[n],r*n)),h[n].crossVectors(l[n],c[n])}return{tangents:l,normals:c,binormals:h}},clone:function clone(){return new this.constructor().copy(this)},copy:function copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this},toJSON:function toJSON(){var t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t},fromJSON:function fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}),Si.prototype=Object.create(xi.prototype),Si.prototype.constructor=Si,Si.prototype.isEllipseCurve=!0,Si.prototype.getPoint=function(t,e){for(var n=e||new r,i=2*_MathPI,o=this.aEndAngle-this.aStartAngle,a=_Mathabs(o)<_NumberEPSILON;0>o;){o+=i}for(;o>i;){o-=i}o<_NumberEPSILON&&(o=a?0:i),!0!==this.aClockwise||a||(o===i?o=-i:o-=i);var s=this.aStartAngle+t*o,l=this.aX+this.xRadius*_Mathcos(s),c=this.aY+this.yRadius*_Mathsin(s);if(0!==this.aRotation){var h=_Mathcos(this.aRotation),u=_Mathsin(this.aRotation),p=l-this.aX,d=c-this.aY;l=p*h-d*u+this.aX,c=p*u+d*h+this.aY}return n.set(l,c)},Si.prototype.copy=function(t){return xi.prototype.copy.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},Si.prototype.toJSON=function(){var t=xi.prototype.toJSON.call(this);return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t},Si.prototype.fromJSON=function(t){return xi.prototype.fromJSON.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},(Ei.prototype=Object.create(Si.prototype)).constructor=Ei,Ei.prototype.isArcCurve=!0;var $s=new s,tl=new Mi,el=new Mi,nl=new Mi;Ti.prototype=Object.create(xi.prototype),Ti.prototype.constructor=Ti,Ti.prototype.isCatmullRomCurve3=!0,Ti.prototype.getPoint=function(t,e){var n=e||new s,i=this.points,r=i.length,o=(r-(this.closed?0:1))*t,a=_Mathfloor(o),l=o-a;this.closed?a+=0<a?0:(_Mathfloor(_Mathabs(a)/r)+1)*r:0===l&&a===r-1&&(a=r-2,l=1);var c,h,u,p;if(this.closed||0<a?c=i[(a-1)%r]:($s.subVectors(i[0],i[1]).add(i[0]),c=$s),h=i[a%r],u=i[(a+1)%r],this.closed||a+2<r?p=i[(a+2)%r]:($s.subVectors(i[r-1],i[r-2]).add(i[r-1]),p=$s),"centripetal"===this.curveType||"chordal"===this.curveType){var d="chordal"===this.curveType?.5:.25,f=_Mathpow(c.distanceToSquared(h),d),m=_Mathpow(h.distanceToSquared(u),d),_=_Mathpow(u.distanceToSquared(p),d);1e-4>m&&(m=1),1e-4>f&&(f=m),1e-4>_&&(_=m),tl.initNonuniformCatmullRom(c.x,h.x,u.x,p.x,f,m,_),el.initNonuniformCatmullRom(c.y,h.y,u.y,p.y,f,m,_),nl.initNonuniformCatmullRom(c.z,h.z,u.z,p.z,f,m,_)}else"catmullrom"===this.curveType&&(tl.initCatmullRom(c.x,h.x,u.x,p.x,this.tension),el.initCatmullRom(c.y,h.y,u.y,p.y,this.tension),nl.initCatmullRom(c.z,h.z,u.z,p.z,this.tension));return n.set(tl.calc(l),el.calc(l),nl.calc(l)),n},Ti.prototype.copy=function(t){xi.prototype.copy.call(this,t),this.points=[];for(var e=0,n=t.points.length,i;e<n;e++){i=t.points[e];this.points.push(i.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},Ti.prototype.toJSON=function(){var t=xi.prototype.toJSON.call(this);t.points=[];for(var e=0,n=this.points.length,i;e<n;e++){i=this.points[e];t.points.push(i.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t},Ti.prototype.fromJSON=function(t){xi.prototype.fromJSON.call(this,t),this.points=[];for(var e=0,n=t.points.length,i;e<n;e++){i=t.points[e];this.points.push(new s().fromArray(i))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},(Ni.prototype=Object.create(xi.prototype)).constructor=Ni,Ni.prototype.isCubicBezierCurve=!0,Ni.prototype.getPoint=function(t,e){var n=e||new r,i=this.v0,o=this.v1,a=this.v2,s=this.v3;return n.set(Fi(t,i.x,o.x,a.x,s.x),Fi(t,i.y,o.y,a.y,s.y)),n},Ni.prototype.copy=function(t){return xi.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},Ni.prototype.toJSON=function(){var t=xi.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},Ni.prototype.fromJSON=function(t){return xi.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},(Ui.prototype=Object.create(xi.prototype)).constructor=Ui,Ui.prototype.isCubicBezierCurve3=!0,Ui.prototype.getPoint=function(t,e){var n=e||new s,i=this.v0,r=this.v1,o=this.v2,a=this.v3;return n.set(Fi(t,i.x,r.x,o.x,a.x),Fi(t,i.y,r.y,o.y,a.y),Fi(t,i.z,r.z,o.z,a.z)),n},Ui.prototype.copy=function(t){return xi.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},Ui.prototype.toJSON=function(){var t=xi.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},Ui.prototype.fromJSON=function(t){return xi.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},(Bi.prototype=Object.create(xi.prototype)).constructor=Bi,Bi.prototype.isLineCurve=!0,Bi.prototype.getPoint=function(t,e){var n=e||new r;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n},Bi.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},Bi.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()},Bi.prototype.copy=function(t){return xi.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},Bi.prototype.toJSON=function(){var t=xi.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},Bi.prototype.fromJSON=function(t){return xi.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},(zi.prototype=Object.create(xi.prototype)).constructor=zi,zi.prototype.isLineCurve3=!0,zi.prototype.getPoint=function(t,e){var n=e||new s;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n},zi.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},zi.prototype.copy=function(t){return xi.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},zi.prototype.toJSON=function(){var t=xi.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},zi.prototype.fromJSON=function(t){return xi.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},(Gi.prototype=Object.create(xi.prototype)).constructor=Gi,Gi.prototype.isQuadraticBezierCurve=!0,Gi.prototype.getPoint=function(t,e){var n=e||new r,i=this.v0,o=this.v1,a=this.v2;return n.set(Li(t,i.x,o.x,a.x),Li(t,i.y,o.y,a.y)),n},Gi.prototype.copy=function(t){return xi.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},Gi.prototype.toJSON=function(){var t=xi.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},Gi.prototype.fromJSON=function(t){return xi.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},(Hi.prototype=Object.create(xi.prototype)).constructor=Hi,Hi.prototype.isQuadraticBezierCurve3=!0,Hi.prototype.getPoint=function(t,e){var n=e||new s,i=this.v0,r=this.v1,o=this.v2;return n.set(Li(t,i.x,r.x,o.x),Li(t,i.y,r.y,o.y),Li(t,i.z,r.z,o.z)),n},Hi.prototype.copy=function(t){return xi.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},Hi.prototype.toJSON=function(){var t=xi.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},Hi.prototype.fromJSON=function(t){return xi.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},(ji.prototype=Object.create(xi.prototype)).constructor=ji,ji.prototype.isSplineCurve=!0,ji.prototype.getPoint=function(t,e){var n=e||new r,i=this.points,o=(i.length-1)*t,a=_Mathfloor(o),s=o-a,l=i[0===a?a:a-1],c=i[a],h=i[a>i.length-2?i.length-1:a+1],u=i[a>i.length-3?i.length-1:a+2];return n.set(Ai(s,l.x,c.x,h.x,u.x),Ai(s,l.y,c.y,h.y,u.y)),n},ji.prototype.copy=function(t){xi.prototype.copy.call(this,t),this.points=[];for(var e=0,n=t.points.length,i;e<n;e++){i=t.points[e];this.points.push(i.clone())}return this},ji.prototype.toJSON=function(){var t=xi.prototype.toJSON.call(this);t.points=[];for(var e=0,n=this.points.length,i;e<n;e++){i=this.points[e];t.points.push(i.toArray())}return t},ji.prototype.fromJSON=function(t){xi.prototype.fromJSON.call(this,t),this.points=[];for(var e=0,n=t.points.length,i;e<n;e++){i=t.points[e];this.points.push(new r().fromArray(i))}return this};var il=Object.freeze({ArcCurve:Ei,CatmullRomCurve3:Ti,CubicBezierCurve:Ni,CubicBezierCurve3:Ui,EllipseCurve:Si,LineCurve:Bi,LineCurve3:zi,QuadraticBezierCurve:Gi,QuadraticBezierCurve3:Hi,SplineCurve:ji});Vi.prototype=Object.assign(Object.create(xi.prototype),{constructor:Vi,add:function add(t){this.curves.push(t)},closePath:function closePath(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new Bi(e,t))},getPoint:function getPoint(t){for(var e=t*this.getLength(),n=this.getCurveLengths(),i=0;i<n.length;){if(n[i]>=e){var r=n[i]-e,o=this.curves[i],a=o.getLength(),s=0===a?0:1-r/a;return o.getPointAt(s)}i++}return null},getLength:function getLength(){var t=this.getCurveLengths();return t[t.length-1]},updateArcLengths:function updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],e=0,n=0,i=this.curves.length;n<i;n++){e+=this.curves[n].getLength(),t.push(e)}return this.cacheLengths=t,t},getSpacedPoints:function getSpacedPoints(t){void 0===t&&(t=40);for(var e=[],n=0;n<=t;n++){e.push(this.getPoint(n/t))}return this.autoClose&&e.push(e[0]),e},getPoints:function getPoints(t){t=t||12;for(var e,n=[],i=0,r=this.curves;i<r.length;i++){for(var o=r[i],a=o&&o.isEllipseCurve?2*t:o&&o.isLineCurve?1:o&&o.isSplineCurve?t*o.points.length:t,s=o.getPoints(a),l=0,c;l<s.length;l++){c=s[l];e&&e.equals(c)||(n.push(c),e=c)}}return this.autoClose&&1<n.length&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n},copy:function copy(t){xi.prototype.copy.call(this,t),this.curves=[];for(var e=0,n=t.curves.length,i;e<n;e++){i=t.curves[e];this.curves.push(i.clone())}return this.autoClose=t.autoClose,this},toJSON:function toJSON(){var t=xi.prototype.toJSON.call(this);t.autoClose=this.autoClose,t.curves=[];for(var e=0,n=this.curves.length,i;e<n;e++){i=this.curves[e];t.curves.push(i.toJSON())}return t},fromJSON:function fromJSON(t){xi.prototype.fromJSON.call(this,t),this.autoClose=t.autoClose,this.curves=[];for(var e=0,n=t.curves.length,i;e<n;e++){i=t.curves[e];this.curves.push(new il[i.type]().fromJSON(i))}return this}}),Wi.prototype=Object.assign(Object.create(Vi.prototype),{constructor:Wi,setFromPoints:function setFromPoints(t){this.moveTo(t[0].x,t[0].y);for(var e=1,n=t.length;e<n;e++){this.lineTo(t[e].x,t[e].y)}},moveTo:function moveTo(t,e){this.currentPoint.set(t,e)},lineTo:function lineTo(t,e){var n=new Bi(this.currentPoint.clone(),new r(t,e));this.curves.push(n),this.currentPoint.set(t,e)},quadraticCurveTo:function quadraticCurveTo(t,e,n,i){var o=new Gi(this.currentPoint.clone(),new r(t,e),new r(n,i));this.curves.push(o),this.currentPoint.set(n,i)},bezierCurveTo:function bezierCurveTo(t,e,n,i,o,a){var s=new Ni(this.currentPoint.clone(),new r(t,e),new r(n,i),new r(o,a));this.curves.push(s),this.currentPoint.set(o,a)},splineThru:function splineThru(t){var e=new ji([this.currentPoint.clone()].concat(t));this.curves.push(e),this.currentPoint.copy(t[t.length-1])},arc:function arc(t,e,n,i,r,o){var a=this.currentPoint.x,s=this.currentPoint.y;this.absarc(t+a,e+s,n,i,r,o)},absarc:function absarc(t,e,n,i,r,o){this.absellipse(t,e,n,n,i,r,o)},ellipse:function ellipse(t,e,n,i,r,o,a,s){var l=this.currentPoint.x,c=this.currentPoint.y;this.absellipse(t+l,e+c,n,i,r,o,a,s)},absellipse:function absellipse(t,e,n,i,r,o,a,s){var l=new Si(t,e,n,i,r,o,a,s);if(0<this.curves.length){var c=l.getPoint(0);c.equals(this.currentPoint)||this.lineTo(c.x,c.y)}this.curves.push(l);var h=l.getPoint(1);this.currentPoint.copy(h)},copy:function copy(t){return Vi.prototype.copy.call(this,t),this.currentPoint.copy(t.currentPoint),this},toJSON:function toJSON(){var t=Vi.prototype.toJSON.call(this);return t.currentPoint=this.currentPoint.toArray(),t},fromJSON:function fromJSON(t){return Vi.prototype.fromJSON.call(this,t),this.currentPoint.fromArray(t.currentPoint),this}}),qi.prototype=Object.assign(Object.create(Wi.prototype),{constructor:qi,getPointsHoles:function getPointsHoles(t){for(var e=[],n=0,i=this.holes.length;n<i;n++){e[n]=this.holes[n].getPoints(t)}return e},extractPoints:function extractPoints(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}},copy:function copy(t){Wi.prototype.copy.call(this,t),this.holes=[];for(var e=0,n=t.holes.length,i;e<n;e++){i=t.holes[e];this.holes.push(i.clone())}return this},toJSON:function toJSON(){var t=Wi.prototype.toJSON.call(this);t.uuid=this.uuid,t.holes=[];for(var e=0,n=this.holes.length,i;e<n;e++){i=this.holes[e];t.holes.push(i.toJSON())}return t},fromJSON:function fromJSON(t){Wi.prototype.fromJSON.call(this,t),this.uuid=t.uuid,this.holes=[];for(var e=0,n=t.holes.length,i;e<n;e++){i=t.holes[e];this.holes.push(new Wi().fromJSON(i))}return this}}),Xi.prototype=Object.assign(Object.create(x.prototype),{constructor:Xi,isLight:!0,copy:function copy(t){return x.prototype.copy.call(this,t),this.color.copy(t.color),this.intensity=t.intensity,this},toJSON:function toJSON(t){var e=x.prototype.toJSON.call(this,t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}),Yi.prototype=Object.assign(Object.create(Xi.prototype),{constructor:Yi,isHemisphereLight:!0,copy:function copy(t){return Xi.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}),Object.assign(Zi.prototype,{copy:function copy(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this},clone:function clone(){return new this.constructor().copy(this)},toJSON:function toJSON(){var t={};return 0!==this.bias&&(t.bias=this.bias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}),Ji.prototype=Object.assign(Object.create(Zi.prototype),{constructor:Ji,isSpotLightShadow:!0,update:function update(t){var e=this.camera,n=2*Ms.RAD2DEG*t.angle,i=this.mapSize.width/this.mapSize.height,r=t.distance||e.far;n===e.fov&&i===e.aspect&&r===e.far||(e.fov=n,e.aspect=i,e.far=r,e.updateProjectionMatrix())}}),Ki.prototype=Object.assign(Object.create(Xi.prototype),{constructor:Ki,isSpotLight:!0,copy:function copy(t){return Xi.prototype.copy.call(this,t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),Qi.prototype=Object.assign(Object.create(Xi.prototype),{constructor:Qi,isPointLight:!0,copy:function copy(t){return Xi.prototype.copy.call(this,t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}),$i.prototype=Object.assign(Object.create(Zi.prototype),{constructor:$i}),tr.prototype=Object.assign(Object.create(Xi.prototype),{constructor:tr,isDirectionalLight:!0,copy:function copy(t){return Xi.prototype.copy.call(this,t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),er.prototype=Object.assign(Object.create(Xi.prototype),{constructor:er,isAmbientLight:!0}),nr.prototype=Object.assign(Object.create(Xi.prototype),{constructor:nr,isRectAreaLight:!0,copy:function copy(t){return Xi.prototype.copy.call(this,t),this.width=t.width,this.height=t.height,this},toJSON:function toJSON(t){var e=Xi.prototype.toJSON.call(this,t);return e.object.width=this.width,e.object.height=this.height,e}}),ir.prototype=Object.assign(Object.create(dr.prototype),{constructor:ir,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),rr.prototype=Object.assign(Object.create(dr.prototype),{constructor:rr,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Object.assign(or.prototype,{evaluate:function evaluate(t){var e=this.parameterPositions,n=this._cachedIndex,i=e[n],r=e[n-1];t:{e:{var o;n:{i:if(!(t<i)){for(s=n+2;;){if(void 0===i){if(t<r)break i;return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,t,r)}if(n===s)break;if(r=i,i=e[++n],t<i)break e}o=e.length;break n}if(t>=r)break t;var a=e[1];t<a&&(n=2,r=a);for(var s=n-2;;){if(void 0===r)return this._cachedIndex=0,this.beforeStart_(0,t,i);if(n===s)break;if(i=r,r=e[--n-1],t>=r)break e}o=n,n=0}for(;n<o;){var l=n+o>>>1;t<e[l]?o=l:n=l+1}if(i=e[n],void 0===(r=e[n-1]))return this._cachedIndex=0,this.beforeStart_(0,t,i);if(void 0===i)return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,r,t)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,t,i)},settings:null,DefaultSettings_:{},getSettings_:function getSettings_(){return this.settings||this.DefaultSettings_},copySampleValue_:function copySampleValue_(t){for(var e=this.resultBuffer,n=this.sampleValues,i=this.valueSize,o=0;o!==i;++o){e[o]=n[t*i+o]}return e},interpolate_:function interpolate_(){throw new Error("call to abstract method")},intervalChanged_:function intervalChanged_(){}}),Object.assign(or.prototype,{beforeStart_:or.prototype.copySampleValue_,afterEnd_:or.prototype.copySampleValue_}),ar.prototype=Object.assign(Object.create(or.prototype),{constructor:ar,interpolate_:function interpolate_(t,e,n,i){for(var r=this.resultBuffer,o=this.sampleValues,s=this.valueSize,l=t*s,h=l+s;l!==h;l+=4){a.slerpFlat(r,0,o,l-s,o,l,(n-e)/(i-e))}return r}}),sr.prototype=Object.assign(Object.create(dr.prototype),{constructor:sr,ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function InterpolantFactoryMethodLinear(t){return new ar(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:void 0}),lr.prototype=Object.assign(Object.create(dr.prototype),{constructor:lr,ValueTypeName:"color"}),cr.prototype=Object.assign(Object.create(dr.prototype),{constructor:cr,ValueTypeName:"number"}),hr.prototype=Object.assign(Object.create(or.prototype),{constructor:hr,DefaultSettings_:{endingStart:ps,endingEnd:ps},intervalChanged_:function intervalChanged_(t,e,n){var i=this.parameterPositions,r=t-2,o=t+1,a=i[r],s=i[o];if(void 0===a)switch(this.getSettings_().endingStart){case 2401:r=t,a=2*e-n;break;case 2402:a=e+i[r=i.length-2]-i[r+1];break;default:r=t,a=n;}if(void 0===s)switch(this.getSettings_().endingEnd){case 2401:o=t,s=2*n-e;break;case 2402:o=1,s=n+i[1]-i[0];break;default:o=t-1,s=e;}var l=.5*(n-e),c=this.valueSize;this._weightPrev=l/(e-a),this._weightNext=l/(s-n),this._offsetPrev=r*c,this._offsetNext=o*c},interpolate_:function interpolate_(t,e,n,i){for(var r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=t*a,c=this._offsetPrev,h=this._offsetNext,u=this._weightPrev,p=this._weightNext,d=(n-e)/(i-e),f=d*d,m=f*d,b=0;b!==a;++b){r[b]=(-u*m+2*u*f-u*d)*o[c+b]+((1+u)*m+(-1.5-2*u)*f+(-.5+u)*d+1)*o[s-a+b]+((-1-p)*m+(1.5+p)*f+.5*d)*o[s+b]+(p*m-p*f)*o[h+b]}return r}}),ur.prototype=Object.assign(Object.create(or.prototype),{constructor:ur,interpolate_:function interpolate_(t,e,n,i){for(var r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=t*a,c=(n-e)/(i-e),u=0;u!==a;++u){r[u]=o[s-a+u]*(1-c)+o[s+u]*c}return r}}),pr.prototype=Object.assign(Object.create(or.prototype),{constructor:pr,interpolate_:function interpolate_(t){return this.copySampleValue_(t-1)}});var rl={arraySlice:function arraySlice(t,e,n){return rl.isTypedArray(t)?new t.constructor(t.subarray(e,void 0!==n?n:t.length)):t.slice(e,n)},convertArray:function convertArray(t,e,n){return!t||!n&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)},isTypedArray:function isTypedArray(t){return ArrayBuffer.isView(t)&&!babelHelpers.instanceof(t,DataView)},getKeyframeOrder:function getKeyframeOrder(t){for(var e=t.length,n=Array(e),i=0;i!==e;++i){n[i]=i}return n.sort(function(e,n){return t[e]-t[n]}),n},sortedArray:function sortedArray(t,e,n){for(var i=t.length,r=new t.constructor(i),o=0,a=0;a!==i;++o){for(var s=n[o]*e,l=0;l!==e;++l){r[a++]=t[s+l]}}return r},flattenJSON:function flattenJSON(t,e,n,i){for(var r=1,o=t[0];void 0!==o&&void 0===o[i];){o=t[r++]}if(void 0!==o){var a=o[i];if(void 0!==a)if(Array.isArray(a))do{void 0!==(a=o[i])&&(e.push(o.time),n.push.apply(n,a)),o=t[r++]}while(void 0!==o);else if(void 0!==a.toArray)do{void 0!==(a=o[i])&&(e.push(o.time),a.toArray(n,n.length)),o=t[r++]}while(void 0!==o);else do{void 0!==(a=o[i])&&(e.push(o.time),n.push(a)),o=t[r++]}while(void 0!==o)}}};Object.assign(dr,{parse:function parse(t){if(void 0===t.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var e=dr._getTrackTypeForValueTypeName(t.type);if(void 0===t.times){var n=[],i=[];rl.flattenJSON(t.keys,n,i,"value"),t.times=n,t.values=i}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)},toJSON:function toJSON(t){var e,n=t.constructor;if(void 0!==n.toJSON)e=n.toJSON(t);else{e={name:t.name,times:rl.convertArray(t.times,Array),values:rl.convertArray(t.values,Array)};var i=t.getInterpolation();i!==t.DefaultInterpolation&&(e.interpolation=i)}return e.type=t.ValueTypeName,e},_getTrackTypeForValueTypeName:function _getTrackTypeForValueTypeName(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return cr;case"vector":case"vector2":case"vector3":case"vector4":return fr;case"color":return lr;case"quaternion":return sr;case"bool":case"boolean":return rr;case"string":return ir;}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}}),Object.assign(dr.prototype,{constructor:dr,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function InterpolantFactoryMethodDiscrete(t){return new pr(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodLinear:function InterpolantFactoryMethodLinear(t){return new ur(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:function InterpolantFactoryMethodSmooth(t){return new hr(this.times,this.values,this.getValueSize(),t)},setInterpolation:function setInterpolation(t){var e;switch(t){case 2300:e=this.InterpolantFactoryMethodDiscrete;break;case 2301:e=this.InterpolantFactoryMethodLinear;break;case 2302:e=this.InterpolantFactoryMethodSmooth;}if(void 0!==e)this.createInterpolant=e;else{var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}console.warn("THREE.KeyframeTrack:",n)}},getInterpolation:function getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302;}},getValueSize:function getValueSize(){return this.values.length/this.times.length},shift:function shift(t){if(0!==t)for(var e=this.times,n=0,i=e.length;n!==i;++n){e[n]+=t}return this},scale:function scale(t){if(1!==t)for(var e=this.times,n=0,i=e.length;n!==i;++n){e[n]*=t}return this},trim:function trim(t,e){for(var n=this.times,i=n.length,r=0,o=i-1;r!==i&&n[r]<t;){++r}for(;-1!==o&&n[o]>e;){--o}if(++o,0!==r||o!==i){r>=o&&(o=_Mathmax(o,1),r=o-1);var a=this.getValueSize();this.times=rl.arraySlice(n,r,o),this.values=rl.arraySlice(this.values,r*a,o*a)}return this},validate:function validate(){var t=!0,e=this.getValueSize();0!=e-_Mathfloor(e)&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);var n=this.times,i=this.values,r=n.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);for(var o=null,a=0,s;a!==r;a++){s=n[a];if("number"==typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,s),t=!1;break}if(null!==o&&o>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,s,o),t=!1;break}o=s}if(void 0!==i&&rl.isTypedArray(i))for(var a=0,l=i.length,c;a!==l;++a){c=i[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),t=!1;break}}return t},optimize:function optimize(){for(var t=this.times,e=this.values,n=this.getValueSize(),i=2302===this.getInterpolation(),r=1,o=t.length-1,a=1;a<o;++a){var s=!1,l=t[a];if(l!==t[a+1]&&(1!==a||l!==l[0]))if(i)s=!0;else for(var c=a*n,p=0,d;p!==n;++p){d=e[c+p];if(d!==e[c-n+p]||d!==e[c+n+p]){s=!0;break}}if(s){if(a!==r){t[r]=t[a];for(var f=a*n,m=r*n,p=0;p!==n;++p){e[m+p]=e[f+p]}}++r}}if(0<o){t[r]=t[o];for(var f=o*n,m=r*n,p=0;p!==n;++p){e[m+p]=e[f+p]}++r}return r!==t.length&&(this.times=rl.arraySlice(t,0,r),this.values=rl.arraySlice(e,0,r*n)),this}}),fr.prototype=Object.assign(Object.create(dr.prototype),{constructor:fr,ValueTypeName:"vector"}),Object.assign(mr,{parse:function parse(t){for(var e=[],n=t.tracks,i=1/(t.fps||1),r=0,o=n.length;r!==o;++r){e.push(dr.parse(n[r]).scale(i))}return new mr(t.name,t.duration,e)},toJSON:function toJSON(t){for(var e=[],n=t.tracks,i={name:t.name,duration:t.duration,tracks:e},r=0,o=n.length;r!==o;++r){e.push(dr.toJSON(n[r]))}return i},CreateFromMorphTargetSequence:function CreateFromMorphTargetSequence(t,e,n,i){for(var r=e.length,o=[],a=0;a<r;a++){var s=[],l=[];s.push((a+r-1)%r,a,(a+1)%r),l.push(0,1,0);var c=rl.getKeyframeOrder(s);s=rl.sortedArray(s,1,c),l=rl.sortedArray(l,1,c),i||0!==s[0]||(s.push(r),l.push(l[0])),o.push(new cr(".morphTargetInfluences["+e[a].name+"]",s,l).scale(1/n))}return new mr(t,-1,o)},findByName:function findByName(t,e){var n=t;if(!Array.isArray(t)){var i=t;n=i.geometry&&i.geometry.animations||i.animations}for(var r=0;r<n.length;r++){if(n[r].name===e)return n[r]}return null},CreateClipsFromMorphTargetSequences:function CreateClipsFromMorphTargetSequences(t,e,n){for(var i={},r=/^([\w-]*?)([\d]+)$/,o=0,a=t.length;o<a;o++){var s=t[o],l=s.name.match(r);if(l&&1<l.length){var c=i[u=l[1]];c||(i[u]=c=[]),c.push(s)}}var h=[];for(var u in i){h.push(mr.CreateFromMorphTargetSequence(u,i[u],e,n))}return h},parseAnimation:function parseAnimation(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(t,e,_n2,i,r){if(0!==_n2.length){var o=[],a=[];rl.flattenJSON(_n2,o,a,i),0!==o.length&&r.push(new t(e,o,a))}},i=[],r=t.name||"default",o=t.length||-1,a=t.fps||30,s=t.hierarchy||[],l=0,c;l<s.length;l++){c=s[l].keys;if(c&&0!==c.length)if(c[0].morphTargets){for(var h={},u=0;u<c.length;u++){if(c[u].morphTargets)for(m=0;m<c[u].morphTargets.length;m++){h[c[u].morphTargets[m]]=-1}}for(var p in h){for(var d=[],f=[],m=0,_;m!==c[u].morphTargets.length;++m){_=c[u];d.push(_.time),f.push(_.morphTarget===p?1:0)}i.push(new cr(".morphTargetInfluence["+p+"]",d,f))}o=h.length*(a||1)}else{var g=".bones["+e[l].name+"]";n(fr,g+".position",c,"pos",i),n(sr,g+".quaternion",c,"rot",i),n(fr,g+".scale",c,"scl",i)}}return 0===i.length?null:new mr(r,o,i)}}),Object.assign(mr.prototype,{resetDuration:function resetDuration(){for(var t=0,e=0,n=this.tracks.length,i;e!==n;++e){i=this.tracks[e];t=_Mathmax(t,i.times[i.times.length-1])}this.duration=t},trim:function trim(){for(var t=0;t<this.tracks.length;t++){this.tracks[t].trim(0,this.duration)}return this},optimize:function optimize(){for(var t=0;t<this.tracks.length;t++){this.tracks[t].optimize()}return this}}),Object.assign(_r.prototype,{load:function load(t,e,n,i){var r=this;new gi(r.manager).load(t,function(t){e(r.parse(JSON.parse(t)))},n,i)},setTextures:function setTextures(t){this.textures=t},parse:function parse(t){function e(t){return void 0===n[t]&&console.warn("THREE.MaterialLoader: Undefined texture",t),n[t]}var n=this.textures,i=new Zs[t.type];if(void 0!==t.uuid&&(i.uuid=t.uuid),void 0!==t.name&&(i.name=t.name),void 0!==t.color&&i.color.setHex(t.color),void 0!==t.roughness&&(i.roughness=t.roughness),void 0!==t.metalness&&(i.metalness=t.metalness),void 0!==t.emissive&&i.emissive.setHex(t.emissive),void 0!==t.specular&&i.specular.setHex(t.specular),void 0!==t.shininess&&(i.shininess=t.shininess),void 0!==t.clearCoat&&(i.clearCoat=t.clearCoat),void 0!==t.clearCoatRoughness&&(i.clearCoatRoughness=t.clearCoatRoughness),void 0!==t.uniforms&&(i.uniforms=t.uniforms),void 0!==t.vertexShader&&(i.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(i.fragmentShader=t.fragmentShader),void 0!==t.vertexColors&&(i.vertexColors=t.vertexColors),void 0!==t.fog&&(i.fog=t.fog),void 0!==t.flatShading&&(i.flatShading=t.flatShading),void 0!==t.blending&&(i.blending=t.blending),void 0!==t.side&&(i.side=t.side),void 0!==t.opacity&&(i.opacity=t.opacity),void 0!==t.transparent&&(i.transparent=t.transparent),void 0!==t.alphaTest&&(i.alphaTest=t.alphaTest),void 0!==t.depthTest&&(i.depthTest=t.depthTest),void 0!==t.depthWrite&&(i.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(i.colorWrite=t.colorWrite),void 0!==t.wireframe&&(i.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(i.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(i.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(i.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.rotation&&(i.rotation=t.rotation),1!==t.linewidth&&(i.linewidth=t.linewidth),void 0!==t.dashSize&&(i.dashSize=t.dashSize),void 0!==t.gapSize&&(i.gapSize=t.gapSize),void 0!==t.scale&&(i.scale=t.scale),void 0!==t.polygonOffset&&(i.polygonOffset=t.polygonOffset),void 0!==t.polygonOffsetFactor&&(i.polygonOffsetFactor=t.polygonOffsetFactor),void 0!==t.polygonOffsetUnits&&(i.polygonOffsetUnits=t.polygonOffsetUnits),void 0!==t.skinning&&(i.skinning=t.skinning),void 0!==t.morphTargets&&(i.morphTargets=t.morphTargets),void 0!==t.dithering&&(i.dithering=t.dithering),void 0!==t.visible&&(i.visible=t.visible),void 0!==t.userData&&(i.userData=t.userData),void 0!==t.shading&&(i.flatShading=1===t.shading),void 0!==t.size&&(i.size=t.size),void 0!==t.sizeAttenuation&&(i.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(i.map=e(t.map)),void 0!==t.alphaMap&&(i.alphaMap=e(t.alphaMap),i.transparent=!0),void 0!==t.bumpMap&&(i.bumpMap=e(t.bumpMap)),void 0!==t.bumpScale&&(i.bumpScale=t.bumpScale),void 0!==t.normalMap&&(i.normalMap=e(t.normalMap)),void 0!==t.normalScale){var o=t.normalScale;!1===Array.isArray(o)&&(o=[o,o]),i.normalScale=new r().fromArray(o)}return void 0!==t.displacementMap&&(i.displacementMap=e(t.displacementMap)),void 0!==t.displacementScale&&(i.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(i.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(i.roughnessMap=e(t.roughnessMap)),void 0!==t.metalnessMap&&(i.metalnessMap=e(t.metalnessMap)),void 0!==t.emissiveMap&&(i.emissiveMap=e(t.emissiveMap)),void 0!==t.emissiveIntensity&&(i.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(i.specularMap=e(t.specularMap)),void 0!==t.envMap&&(i.envMap=e(t.envMap)),void 0!==t.reflectivity&&(i.reflectivity=t.reflectivity),void 0!==t.lightMap&&(i.lightMap=e(t.lightMap)),void 0!==t.lightMapIntensity&&(i.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(i.aoMap=e(t.aoMap)),void 0!==t.aoMapIntensity&&(i.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(i.gradientMap=e(t.gradientMap)),i}}),Object.assign(gr.prototype,{load:function load(t,e,n,i){var r=this;new gi(r.manager).load(t,function(t){e(r.parse(JSON.parse(t)))},n,i)},parse:function parse(t){var e=new B,n=t.data.index;if(void 0!==n){a=new ol[n.type](n.array);e.setIndex(new A(a,1))}var i=t.data.attributes;for(var r in i){var o=i[r],a=new ol[o.type](o.array);e.addAttribute(r,new A(a,o.itemSize,o.normalized))}var l=t.data.groups||t.data.drawcalls||t.data.offsets;if(void 0!==l)for(var c=0,h=l.length,u;c!==h;++c){u=l[c];e.addGroup(u.start,u.count,u.materialIndex)}var p=t.data.boundingSphere;if(void 0!==p){var d=new s;void 0!==p.center&&d.fromArray(p.center),e.boundingSphere=new m(d,p.radius)}return e}});var ol={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};yr.Handlers={handlers:[],add:function add(t,e){this.handlers.push(t,e)},get:function get(t){for(var e=this.handlers,n=0,i=e.length;n<i;n+=2){var r=e[n],o=e[n+1];if(r.test(t))return o}return null}},Object.assign(yr.prototype,{crossOrigin:void 0,onLoadStart:function onLoadStart(){},onLoadProgress:function onLoadProgress(){},onLoadComplete:function onLoadComplete(){},initMaterials:function initMaterials(t,e,n){for(var i=[],r=0;r<t.length;++r){i[r]=this.createMaterial(t[r],e,n)}return i},createMaterial:function(){var t={NoBlending:So,NormalBlending:Eo,AdditiveBlending:Mo,SubtractiveBlending:To,MultiplyBlending:Ao,CustomBlending:Po},e=new y,n=new wi,i=new _r;return function(r,o,a){function s(t,e,i,r,s){var c,h=o+t,u=yr.Handlers.get(h);null!==u?c=u.load(h):(n.setCrossOrigin(a),c=n.load(h)),void 0!==e&&(c.repeat.fromArray(e),1!==e[0]&&(c.wrapS=fa),1!==e[1]&&(c.wrapT=fa)),void 0!==i&&c.offset.fromArray(i),void 0!==r&&("repeat"===r[0]&&(c.wrapS=fa),"mirror"===r[0]&&(c.wrapS=_a),"repeat"===r[1]&&(c.wrapT=fa),"mirror"===r[1]&&(c.wrapT=_a)),void 0!==s&&(c.anisotropy=s);var p=Ms.generateUUID();return l[p]=c,p}var l={},c={uuid:Ms.generateUUID(),type:"MeshLambertMaterial"};for(var h in r){var u=r[h];switch(h){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":c.name=u;break;case"blending":c.blending=t[u];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",h,"is no longer supported.");break;case"colorDiffuse":c.color=e.fromArray(u).getHex();break;case"colorSpecular":c.specular=e.fromArray(u).getHex();break;case"colorEmissive":c.emissive=e.fromArray(u).getHex();break;case"specularCoef":c.shininess=u;break;case"shading":"basic"===u.toLowerCase()&&(c.type="MeshBasicMaterial"),"phong"===u.toLowerCase()&&(c.type="MeshPhongMaterial"),"standard"===u.toLowerCase()&&(c.type="MeshStandardMaterial");break;case"mapDiffuse":c.map=s(u,r.mapDiffuseRepeat,r.mapDiffuseOffset,r.mapDiffuseWrap,r.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":c.emissiveMap=s(u,r.mapEmissiveRepeat,r.mapEmissiveOffset,r.mapEmissiveWrap,r.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":c.lightMap=s(u,r.mapLightRepeat,r.mapLightOffset,r.mapLightWrap,r.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":c.aoMap=s(u,r.mapAORepeat,r.mapAOOffset,r.mapAOWrap,r.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":c.bumpMap=s(u,r.mapBumpRepeat,r.mapBumpOffset,r.mapBumpWrap,r.mapBumpAnisotropy);break;case"mapBumpScale":c.bumpScale=u;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":c.normalMap=s(u,r.mapNormalRepeat,r.mapNormalOffset,r.mapNormalWrap,r.mapNormalAnisotropy);break;case"mapNormalFactor":c.normalScale=u;break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":c.specularMap=s(u,r.mapSpecularRepeat,r.mapSpecularOffset,r.mapSpecularWrap,r.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":c.metalnessMap=s(u,r.mapMetalnessRepeat,r.mapMetalnessOffset,r.mapMetalnessWrap,r.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":c.roughnessMap=s(u,r.mapRoughnessRepeat,r.mapRoughnessOffset,r.mapRoughnessWrap,r.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":c.alphaMap=s(u,r.mapAlphaRepeat,r.mapAlphaOffset,r.mapAlphaWrap,r.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":c.side=yo;break;case"doubleSided":c.side=vo;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),c.opacity=u;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":c[h]=u;break;case"vertexColors":!0===u&&(c.vertexColors=xo),"face"===u&&(c.vertexColors=wo);break;default:console.error("THREE.Loader.createMaterial: Unsupported",h,u);}}return"MeshBasicMaterial"===c.type&&delete c.emissive,"MeshPhongMaterial"!==c.type&&delete c.specular,1>c.opacity&&(c.transparent=!0),i.setTextures(l),i.parse(c)}}()});var al={decodeText:function decodeText(t){if("undefined"!=typeof TextDecoder)return new TextDecoder().decode(t);for(var e="",n=0,i=t.length;n<i;n++){e+=_StringfromCharCode(t[n])}return decodeURIComponent(escape(e))},extractUrlBase:function extractUrlBase(t){var e=t.lastIndexOf("/");return-1===e?"./":t.substr(0,e+1)}};Object.assign(vr.prototype,{load:function load(t,e,n,i){var r=this,o=this.texturePath&&"string"==typeof this.texturePath?this.texturePath:al.extractUrlBase(t),a=new gi(this.manager);a.setWithCredentials(this.withCredentials),a.load(t,function(n){var i=JSON.parse(n),a=i.metadata;if(void 0!==a){var s=a.type;if(void 0!==s&&"object"===s.toLowerCase())return void console.error("THREE.JSONLoader: "+t+" should be loaded with THREE.ObjectLoader instead.")}var l=r.parse(i,o);e(l.geometry,l.materials)},n,i)},setTexturePath:function setTexturePath(t){this.texturePath=t},parse:function(){function t(t,e){function n(t,e){return t&1<<e}var i,o,a,l,c,h,u,p,d,f,m,_,g,v,b,w,x,S,E,T,A,P,C,I,L,R=t.faces,O=t.vertices,k=t.normals,D=t.colors,F=t.scale,N=0;if(void 0!==t.uvs){for(i=0;i<t.uvs.length;i++){t.uvs[i].length&&N++}for(i=0;i<N;i++){e.faceVertexUvs[i]=[]}}for(l=0,c=O.length;l<c;){(S=new s).x=O[l++]*F,S.y=O[l++]*F,S.z=O[l++]*F,e.vertices.push(S)}for(l=0,c=R.length;l<c;){if(f=R[l++],m=n(f,0),_=n(f,1),g=n(f,3),v=n(f,4),b=n(f,5),w=n(f,6),x=n(f,7),m){if(T=new M,T.a=R[l],T.b=R[l+1],T.c=R[l+3],A=new M,A.a=R[l+1],A.b=R[l+2],A.c=R[l+3],l+=4,_&&(d=R[l++],T.materialIndex=d,A.materialIndex=d),a=e.faces.length,g)for(i=0;i<N;i++){for(I=t.uvs[i],e.faceVertexUvs[i][a]=[],e.faceVertexUvs[i][a+1]=[],o=0;4>o;o++){L=new r(I[2*(p=R[l++])],I[2*p+1]),2!==o&&e.faceVertexUvs[i][a].push(L),0!==o&&e.faceVertexUvs[i][a+1].push(L)}}if(v&&(u=3*R[l++],T.normal.set(k[u++],k[u++],k[u]),A.normal.copy(T.normal)),b)for(i=0;4>i;i++){u=3*R[l++],C=new s(k[u++],k[u++],k[u]),2!==i&&T.vertexNormals.push(C),0!==i&&A.vertexNormals.push(C)}if(w&&(P=D[h=R[l++]],T.color.setHex(P),A.color.setHex(P)),x)for(i=0;4>i;i++){P=D[h=R[l++]],2!==i&&T.vertexColors.push(new y(P)),0!==i&&A.vertexColors.push(new y(P))}e.faces.push(T),e.faces.push(A)}else{if(E=new M,E.a=R[l++],E.b=R[l++],E.c=R[l++],_&&(d=R[l++],E.materialIndex=d),a=e.faces.length,g)for(i=0;i<N;i++){for(I=t.uvs[i],e.faceVertexUvs[i][a]=[],o=0;3>o;o++){L=new r(I[2*(p=R[l++])],I[2*p+1]),e.faceVertexUvs[i][a].push(L)}}if(v&&(u=3*R[l++],E.normal.set(k[u++],k[u++],k[u])),b)for(i=0;3>i;i++){u=3*R[l++],C=new s(k[u++],k[u++],k[u]),E.vertexNormals.push(C)}if(w&&(h=R[l++],E.color.setHex(D[h])),x)for(i=0;3>i;i++){h=R[l++],E.vertexColors.push(new y(D[h]))}e.faces.push(E)}}}function e(t,e){var n=void 0!==t.influencesPerVertex?t.influencesPerVertex:2;if(t.skinWeights)for(var i=0,r=t.skinWeights.length;i<r;i+=n){var o=t.skinWeights[i],a=1<n?t.skinWeights[i+1]:0,s=2<n?t.skinWeights[i+2]:0,l=3<n?t.skinWeights[i+3]:0;e.skinWeights.push(new h(o,a,s,l))}if(t.skinIndices)for(var i=0,r=t.skinIndices.length;i<r;i+=n){var c=t.skinIndices[i],u=1<n?t.skinIndices[i+1]:0,p=2<n?t.skinIndices[i+2]:0,d=3<n?t.skinIndices[i+3]:0;e.skinIndices.push(new h(c,u,p,d))}e.bones=t.bones,e.bones&&0<e.bones.length&&(e.skinWeights.length!==e.skinIndices.length||e.skinIndices.length!==e.vertices.length)&&console.warn("When skinning, number of vertices ("+e.vertices.length+"), skinIndices ("+e.skinIndices.length+"), and skinWeights ("+e.skinWeights.length+") should match.")}function n(t,e){var n=t.scale;if(void 0!==t.morphTargets)for(var i=0,r=t.morphTargets.length;i<r;i++){e.morphTargets[i]={},e.morphTargets[i].name=t.morphTargets[i].name,e.morphTargets[i].vertices=[];for(var o=e.morphTargets[i].vertices,a=t.morphTargets[i].vertices,l=0,c=a.length,h;l<c;l+=3){h=new s;h.x=a[l]*n,h.y=a[l+1]*n,h.z=a[l+2]*n,o.push(h)}}if(void 0!==t.morphColors&&0<t.morphColors.length){console.warn("THREE.JSONLoader: \"morphColors\" no longer supported. Using them as face colors.");for(var u=e.faces,p=t.morphColors[0].colors,i=0,r=u.length;i<r;i++){u[i].color.fromArray(p,3*i)}}}function i(t,e){var n=[],i=[];void 0!==t.animation&&i.push(t.animation),void 0!==t.animations&&(t.animations.length?i=i.concat(t.animations):i.push(t.animations));for(var r=0,o;r<i.length;r++){o=mr.parseAnimation(i[r],e.bones);o&&n.push(o)}if(e.morphTargets){var a=mr.CreateClipsFromMorphTargetSequences(e.morphTargets,10);n=n.concat(a)}0<n.length&&(e.animations=n)}return function(r,o){void 0!==r.data&&(r=r.data),void 0!==r.scale?r.scale=1/r.scale:r.scale=1;var a=new T;return t(r,a),e(r,a),n(r,a),i(r,a),a.computeFaceNormals(),a.computeBoundingSphere(),void 0===r.materials||0===r.materials.length?{geometry:a}:{geometry:a,materials:yr.prototype.initMaterials(r.materials,o,this.crossOrigin)}}}()}),Object.assign(function(t){this.manager=void 0!==t?t:Ks,this.texturePath=""}.prototype,{load:function load(t,e,n,i){""===this.texturePath&&(this.texturePath=t.substring(0,t.lastIndexOf("/")+1));var r=this;new gi(r.manager).load(t,function(n){var o=null;try{o=JSON.parse(n)}catch(e){return void 0!==i&&i(e),void console.error("THREE:ObjectLoader: Can't parse "+t+".",e.message)}var a=o.metadata;void 0!==a&&void 0!==a.type&&"geometry"!==a.type.toLowerCase()?r.parse(o,e):console.error("THREE.ObjectLoader: Can't load "+t+". Use THREE.JSONLoader instead.")},n,i)},setTexturePath:function setTexturePath(t){this.texturePath=t},setCrossOrigin:function setCrossOrigin(t){this.crossOrigin=t},parse:function parse(t,e){var n=this.parseShape(t.shapes),i=this.parseGeometries(t.geometries,n),r=this.parseImages(t.images,function(){void 0!==e&&e(s)}),o=this.parseTextures(t.textures,r),a=this.parseMaterials(t.materials,o),s=this.parseObject(t.object,i,a);return t.animations&&(s.animations=this.parseAnimations(t.animations)),void 0!==t.images&&0!==t.images.length||void 0!==e&&e(s),s},parseShape:function parseShape(t){var e={};if(void 0!==t)for(var n=0,i=t.length,r;n<i;n++){r=new qi().fromJSON(t[n]);e[r.uuid]=r}return e},parseGeometries:function parseGeometries(t,e){var n={};if(void 0!==t)for(var i=new vr,r=new gr,o=0,a=t.length;o<a;o++){var s,l=t[o];switch(l.type){case"PlaneGeometry":case"PlaneBufferGeometry":s=new Ys[l.type](l.width,l.height,l.widthSegments,l.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":s=new Ys[l.type](l.width,l.height,l.depth,l.widthSegments,l.heightSegments,l.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":s=new Ys[l.type](l.radius,l.segments,l.thetaStart,l.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":s=new Ys[l.type](l.radiusTop,l.radiusBottom,l.height,l.radialSegments,l.heightSegments,l.openEnded,l.thetaStart,l.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":s=new Ys[l.type](l.radius,l.height,l.radialSegments,l.heightSegments,l.openEnded,l.thetaStart,l.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":s=new Ys[l.type](l.radius,l.widthSegments,l.heightSegments,l.phiStart,l.phiLength,l.thetaStart,l.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":s=new Ys[l.type](l.radius,l.detail);break;case"RingGeometry":case"RingBufferGeometry":s=new Ys[l.type](l.innerRadius,l.outerRadius,l.thetaSegments,l.phiSegments,l.thetaStart,l.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":s=new Ys[l.type](l.radius,l.tube,l.radialSegments,l.tubularSegments,l.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":s=new Ys[l.type](l.radius,l.tube,l.tubularSegments,l.radialSegments,l.p,l.q);break;case"LatheGeometry":case"LatheBufferGeometry":s=new Ys[l.type](l.points,l.segments,l.phiStart,l.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":s=new Ys[l.type](l.vertices,l.indices,l.radius,l.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var c=[],h=0,u=l.shapes.length,p;h<u;h++){p=e[l.shapes[h]];c.push(p)}s=new Ys[l.type](c,l.curveSegments);break;case"BufferGeometry":s=r.parse(l);break;case"Geometry":s=i.parse(l,this.texturePath).geometry;break;default:console.warn("THREE.ObjectLoader: Unsupported geometry type \""+l.type+"\"");continue;}s.uuid=l.uuid,void 0!==l.name&&(s.name=l.name),n[l.uuid]=s}return n},parseMaterials:function parseMaterials(t,e){var n={};if(void 0!==t){var i=new _r;i.setTextures(e);for(var r=0,o=t.length,a;r<o;r++){a=t[r];if("MultiMaterial"===a.type){for(var s=[],l=0;l<a.materials.length;l++){s.push(i.parse(a.materials[l]))}n[a.uuid]=s}else n[a.uuid]=i.parse(a)}}return n},parseAnimations:function parseAnimations(t){for(var e=[],n=0,i;n<t.length;n++){i=mr.parse(t[n]);e.push(i)}return e},parseImages:function parseImages(t,e){var n=this,i={};if(void 0!==t&&0<t.length){var r=new vi(new _i(e));r.setCrossOrigin(this.crossOrigin);for(var o=0,a=t.length;o<a;o++){var s=t[o],l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(s.url)?s.url:n.texturePath+s.url;i[s.uuid]=function(t){return n.manager.itemStart(t),r.load(t,function(){n.manager.itemEnd(t)},void 0,function(){n.manager.itemEnd(t),n.manager.itemError(t)})}(l)}}return i},parseTextures:function parseTextures(t,e){function n(t,e){return"number"==typeof t?t:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",t),e[t])}var i={};if(void 0!==t)for(var r=0,o=t.length,a;r<o;r++){a=t[r];void 0===a.image&&console.warn("THREE.ObjectLoader: No \"image\" specified for",a.uuid),void 0===e[a.image]&&console.warn("THREE.ObjectLoader: Undefined image",a.image);var s=new c(e[a.image]);s.needsUpdate=!0,s.uuid=a.uuid,void 0!==a.name&&(s.name=a.name),void 0!==a.mapping&&(s.mapping=n(a.mapping,sl)),void 0!==a.offset&&s.offset.fromArray(a.offset),void 0!==a.repeat&&s.repeat.fromArray(a.repeat),void 0!==a.center&&s.center.fromArray(a.center),void 0!==a.rotation&&(s.rotation=a.rotation),void 0!==a.wrap&&(s.wrapS=n(a.wrap[0],ll),s.wrapT=n(a.wrap[1],ll)),void 0!==a.format&&(s.format=a.format),void 0!==a.minFilter&&(s.minFilter=n(a.minFilter,cl)),void 0!==a.magFilter&&(s.magFilter=n(a.magFilter,cl)),void 0!==a.anisotropy&&(s.anisotropy=a.anisotropy),void 0!==a.flipY&&(s.flipY=a.flipY),i[a.uuid]=s}return i},parseObject:function parseObject(t,e,n){function i(t){return void 0===e[t]&&console.warn("THREE.ObjectLoader: Undefined geometry",t),e[t]}function r(t){if(void 0!==t){if(Array.isArray(t)){for(var e=[],i=0,r=t.length,o;i<r;i++){o=t[i];void 0===n[o]&&console.warn("THREE.ObjectLoader: Undefined material",o),e.push(n[o])}return e}return void 0===n[t]&&console.warn("THREE.ObjectLoader: Undefined material",t),n[t]}}var o;switch(t.type){case"Scene":o=new Pe,void 0!==t.background&&_NumberisInteger(t.background)&&(o.background=new y(t.background)),void 0!==t.fog&&("Fog"===t.fog.type?o.fog=new Ae(t.fog.color,t.fog.near,t.fog.far):"FogExp2"===t.fog.type&&(o.fog=new Te(t.fog.color,t.fog.density)));break;case"PerspectiveCamera":o=new xe(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(o.focus=t.focus),void 0!==t.zoom&&(o.zoom=t.zoom),void 0!==t.filmGauge&&(o.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(o.filmOffset=t.filmOffset),void 0!==t.view&&(o.view=Object.assign({},t.view));break;case"OrthographicCamera":o=new E(t.left,t.right,t.top,t.bottom,t.near,t.far),void 0!==t.zoom&&(o.zoom=t.zoom),void 0!==t.view&&(o.view=Object.assign({},t.view));break;case"AmbientLight":o=new er(t.color,t.intensity);break;case"DirectionalLight":o=new tr(t.color,t.intensity);break;case"PointLight":o=new Qi(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":o=new nr(t.color,t.intensity,t.width,t.height);break;case"SpotLight":o=new Ki(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":o=new Yi(t.color,t.groundColor,t.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var a=i(t.geometry),s=r(t.material);o=a.bones&&0<a.bones.length?new ke(a,s):new J(a,s);break;case"LOD":o=new Le;break;case"Line":o=new Fe(i(t.geometry),r(t.material),t.mode);break;case"LineLoop":o=new Ue(i(t.geometry),r(t.material));break;case"LineSegments":o=new Ne(i(t.geometry),r(t.material));break;case"PointCloud":case"Points":o=new ze(i(t.geometry),r(t.material));break;case"Sprite":o=new Ie(r(t.material));break;case"Group":o=new Ge;break;default:o=new x;}if(o.uuid=t.uuid,void 0!==t.name&&(o.name=t.name),void 0!==t.matrix?(o.matrix.fromArray(t.matrix),void 0!==t.matrixAutoUpdate&&(o.matrixAutoUpdate=t.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(void 0!==t.position&&o.position.fromArray(t.position),void 0!==t.rotation&&o.rotation.fromArray(t.rotation),void 0!==t.quaternion&&o.quaternion.fromArray(t.quaternion),void 0!==t.scale&&o.scale.fromArray(t.scale)),void 0!==t.castShadow&&(o.castShadow=t.castShadow),void 0!==t.receiveShadow&&(o.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.bias&&(o.shadow.bias=t.shadow.bias),void 0!==t.shadow.radius&&(o.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&o.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(o.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(o.visible=t.visible),void 0!==t.frustumCulled&&(o.frustumCulled=t.frustumCulled),void 0!==t.renderOrder&&(o.renderOrder=t.renderOrder),void 0!==t.userData&&(o.userData=t.userData),void 0!==t.children)for(var l=t.children,c=0;c<l.length;c++){o.add(this.parseObject(l[c],e,n))}if("LOD"===t.type)for(var h=t.levels,u=0;u<h.length;u++){var p=h[u],d=o.getObjectByProperty("uuid",p.object);void 0!==d&&o.addLevel(d,p.distance)}return o}});var sl={UVMapping:300,CubeReflectionMapping:sa,CubeRefractionMapping:la,EquirectangularReflectionMapping:ca,EquirectangularRefractionMapping:ha,SphericalReflectionMapping:ua,CubeUVReflectionMapping:pa,CubeUVRefractionMapping:da},ll={RepeatWrapping:fa,ClampToEdgeWrapping:ma,MirroredRepeatWrapping:_a},cl={NearestFilter:ga,NearestMipMapNearestFilter:ya,NearestMipMapLinearFilter:va,LinearFilter:ba,LinearMipMapNearestFilter:wa,LinearMipMapLinearFilter:xa};br.prototype={constructor:br,setOptions:function setOptions(t){return this.options=t,this},load:function load(t,e,n,i){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t);var r=this,o=Js.get(t);if(void 0!==o)return r.manager.itemStart(t),setTimeout(function(){e&&e(o),r.manager.itemEnd(t)},0),o;fetch(t).then(function(t){return t.blob()}).then(function(t){return createImageBitmap(t,r.options)}).then(function(n){Js.add(t,n),e&&e(n),r.manager.itemEnd(t)}).catch(function(e){i&&i(e),r.manager.itemEnd(t),r.manager.itemError(t)})},setCrossOrigin:function setCrossOrigin(){return this},setPath:function setPath(t){return this.path=t,this}},Object.assign(wr.prototype,{moveTo:function moveTo(t,e){this.currentPath=new Wi,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e)},lineTo:function lineTo(t,e){this.currentPath.lineTo(t,e)},quadraticCurveTo:function quadraticCurveTo(t,e,n,i){this.currentPath.quadraticCurveTo(t,e,n,i)},bezierCurveTo:function bezierCurveTo(t,e,n,i,r,o){this.currentPath.bezierCurveTo(t,e,n,i,r,o)},splineThru:function splineThru(t){this.currentPath.splineThru(t)},toShapes:function toShapes(t,e){function n(t){for(var e=[],n=0,i=t.length;n<i;n++){var r=t[n],o=new qi;o.curves=r.curves,e.push(o)}return e}var i=qs.isClockWise,r=this.subPaths;if(0===r.length)return[];if(!0===e)return n(r);var o,a,s,l=[];if(1===r.length)return a=r[0],s=new qi,s.curves=a.curves,l.push(s),l;var c=!i(r[0].getPoints());c=t?!c:c;var h,u=[],p=[],d=[],f=0;p[f]=void 0,d[f]=[];for(var m=0,_=r.length;m<_;m++){o=i(h=(a=r[m]).getPoints()),(o=t?!o:o)?(!c&&p[f]&&f++,p[f]={s:new qi,p:h},p[f].s.curves=a.curves,c&&f++,d[f]=[]):d[f].push({h:a,p:h[0]})}if(!p[0])return n(r);if(1<p.length){for(var g=!1,y=[],v=0,b=p.length;v<b;v++){u[v]=[]}for(var v=0,b=p.length;v<b;v++){for(var w=d[v],x=0;x<w.length;x++){for(var S=w[x],E=!0,M=0;M<p.length;M++){(function(t,e){for(var n=e.length,i=!1,r=n-1,o=0;o<n;r=o++){var a=e[r],s=e[o],l=s.x-a.x,c=s.y-a.y;if(_Mathabs(c)>_NumberEPSILON){if(0>c&&(a=e[o],l=-l,s=e[r],c=-c),t.y<a.y||t.y>s.y)continue;if(t.y===a.y){if(t.x===a.x)return!0}else{var h=c*(t.x-a.x)-l*(t.y-a.y);if(0===h)return!0;if(0>h)continue;i=!i}}else{if(t.y!==a.y)continue;if(s.x<=t.x&&t.x<=a.x||a.x<=t.x&&t.x<=s.x)return!0}}return i})(S.p,p[M].p)&&(v!==M&&y.push({froms:v,tos:M,hole:x}),E?(E=!1,u[M].push(S)):g=!0)}E&&u[v].push(S)}}0<y.length&&(g||(d=u))}for(var T,m=0,A=p.length;m<A;m++){s=p[m].s,l.push(s);for(var P=0,C=(T=d[m]).length;P<C;P++){s.holes.push(T[P].h)}}return l}}),Object.assign(xr.prototype,{isFont:!0,generateShapes:function generateShapes(t,e,n){void 0===e&&(e=100),void 0===n&&(n=4);for(var i=[],r=Sr(t,e,n,this.data),o=0,a=r.length;o<a;o++){Array.prototype.push.apply(i,r[o].toShapes())}return i}}),Object.assign(function(t){this.manager=void 0!==t?t:Ks}.prototype,{load:function load(t,e,n,i){var r=this,o=new gi(this.manager);o.setPath(this.path),o.load(t,function(t){var n;try{n=JSON.parse(t)}catch(e){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(t.substring(65,t.length-2))}var i=r.parse(n);e&&e(i)},n,i)},parse:function parse(t){return new xr(t)},setPath:function setPath(t){return this.path=t,this}});var hl,ul={getContext:function getContext(){return void 0===hl&&(hl=new(window.AudioContext||window.webkitAudioContext)),hl},setContext:function setContext(t){hl=t}};Object.assign(Mr.prototype,{load:function load(t,e,n,i){var r=new gi(this.manager);r.setResponseType("arraybuffer"),r.load(t,function(t){ul.getContext().decodeAudioData(t,function(t){e(t)})},n,i)}}),Object.assign(function(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new xe,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new xe,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}.prototype,{update:function(){var t,e,n,i,r,a,s,l,c=new o,h=new o;return function(o){if(t!==this||e!==o.focus||n!==o.fov||i!==o.aspect*this.aspect||r!==o.near||a!==o.far||s!==o.zoom||l!==this.eyeSep){t=this,e=o.focus,n=o.fov,i=o.aspect*this.aspect,r=o.near,a=o.far,s=o.zoom;var u,p,d=o.projectionMatrix.clone(),f=(l=this.eyeSep/2)*r/e,m=r*_Mathtan(.5*(Ms.DEG2RAD*n))/s;h.elements[12]=-l,c.elements[12]=l,u=-m*i+f,p=m*i+f,d.elements[0]=2*r/(p-u),d.elements[8]=(p+u)/(p-u),this.cameraL.projectionMatrix.copy(d),u=-m*i-f,p=m*i-f,d.elements[0]=2*r/(p-u),d.elements[8]=(p+u)/(p-u),this.cameraR.projectionMatrix.copy(d)}this.cameraL.matrixWorld.copy(o.matrixWorld).multiply(h),this.cameraR.matrixWorld.copy(o.matrixWorld).multiply(c)}}()}),(Tr.prototype=Object.create(x.prototype)).constructor=Tr,Ar.prototype=Object.assign(Object.create(x.prototype),{constructor:Ar,getInput:function getInput(){return this.gain},removeFilter:function removeFilter(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null)},getFilter:function getFilter(){return this.filter},setFilter:function setFilter(t){null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination)},getMasterVolume:function getMasterVolume(){return this.gain.gain.value},setMasterVolume:function setMasterVolume(t){this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01)},updateMatrixWorld:function(){var t=new s,e=new a,n=new s,i=new s;return function(r){x.prototype.updateMatrixWorld.call(this,r);var o=this.context.listener,a=this.up;this.matrixWorld.decompose(t,e,n),i.set(0,0,-1).applyQuaternion(e),o.positionX?(o.positionX.setValueAtTime(t.x,this.context.currentTime),o.positionY.setValueAtTime(t.y,this.context.currentTime),o.positionZ.setValueAtTime(t.z,this.context.currentTime),o.forwardX.setValueAtTime(i.x,this.context.currentTime),o.forwardY.setValueAtTime(i.y,this.context.currentTime),o.forwardZ.setValueAtTime(i.z,this.context.currentTime),o.upX.setValueAtTime(a.x,this.context.currentTime),o.upY.setValueAtTime(a.y,this.context.currentTime),o.upZ.setValueAtTime(a.z,this.context.currentTime)):(o.setPosition(t.x,t.y,t.z),o.setOrientation(i.x,i.y,i.z,a.x,a.y,a.z))}}()}),Pr.prototype=Object.assign(Object.create(x.prototype),{constructor:Pr,getOutput:function getOutput(){return this.gain},setNodeSource:function setNodeSource(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this},setBuffer:function setBuffer(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function play(){if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){var t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.onended=this.onEnded.bind(this),t.playbackRate.setValueAtTime(this.playbackRate,this.startTime),this.startTime=this.context.currentTime,t.start(this.startTime,this.offset),this.isPlaying=!0,this.source=t,this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")},pause:function pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this.source.stop(),this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")},stop:function stop(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.offset=0,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},connect:function connect(){if(0<this.filters.length){this.source.connect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++){this.filters[t-1].connect(this.filters[t])}this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function disconnect(){if(0<this.filters.length){this.source.disconnect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++){this.filters[t-1].disconnect(this.filters[t])}this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function getFilters(){return this.filters},setFilters:function setFilters(t){return t||(t=[]),!0===this.isPlaying?(this.disconnect(),this.filters=t,this.connect()):this.filters=t,this},getFilter:function getFilter(){return this.getFilters()[0]},setFilter:function setFilter(t){return this.setFilters(t?[t]:[])},setPlaybackRate:function setPlaybackRate(t){if(!1!==this.hasPlaybackControl)return this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime),this;console.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function getPlaybackRate(){return this.playbackRate},onEnded:function onEnded(){this.isPlaying=!1},getLoop:function getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function setLoop(t){if(!1!==this.hasPlaybackControl)return this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},getVolume:function getVolume(){return this.gain.gain.value},setVolume:function setVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}}),Cr.prototype=Object.assign(Object.create(Pr.prototype),{constructor:Cr,getOutput:function getOutput(){return this.panner},getRefDistance:function getRefDistance(){return this.panner.refDistance},setRefDistance:function setRefDistance(t){this.panner.refDistance=t},getRolloffFactor:function getRolloffFactor(){return this.panner.rolloffFactor},setRolloffFactor:function setRolloffFactor(t){this.panner.rolloffFactor=t},getDistanceModel:function getDistanceModel(){return this.panner.distanceModel},setDistanceModel:function setDistanceModel(t){this.panner.distanceModel=t},getMaxDistance:function getMaxDistance(){return this.panner.maxDistance},setMaxDistance:function setMaxDistance(t){this.panner.maxDistance=t},updateMatrixWorld:function(){var t=new s;return function(e){x.prototype.updateMatrixWorld.call(this,e),t.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(t.x,t.y,t.z)}}()}),Object.assign(Ir.prototype,{getFrequencyData:function getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function getAverageFrequency(){for(var t=0,e=this.getFrequencyData(),n=0;n<e.length;n++){t+=e[n]}return t/e.length}}),Object.assign(Lr.prototype,{accumulate:function accumulate(t,e){var n=this.buffer,i=this.valueSize,r=t*i+i,o=this.cumulativeWeight;if(0===o){for(var a=0;a!==i;++a){n[r+a]=n[a]}o=e}else{var s=e/(o+=e);this._mixBufferRegion(n,r,0,s,i)}this.cumulativeWeight=o},apply:function apply(t){var e=this.valueSize,n=this.buffer,i=t*e+e,r=this.cumulativeWeight,o=this.binding;if(this.cumulativeWeight=0,1>r){this._mixBufferRegion(n,i,3*e,1-r,e)}for(var s=e;s!==e+e;++s){if(n[s]!==n[s+e]){o.setValue(n,i);break}}},saveOriginalState:function saveOriginalState(){var t=this.binding,e=this.buffer,n=this.valueSize,i=3*n;t.getValue(e,i);for(var r=n;r!==i;++r){e[r]=e[i+r%n]}this.cumulativeWeight=0},restoreOriginalState:function restoreOriginalState(){var t=3*this.valueSize;this.binding.setValue(this.buffer,t)},_select:function _select(t,e,n,i,r){if(.5<=i)for(var o=0;o!==r;++o){t[e+o]=t[n+o]}},_slerp:function _slerp(t,e,n,i){a.slerpFlat(t,e,t,e,t,n,i)},_lerp:function _lerp(t,e,n,i,r){for(var a=0,s;a!==r;++a){s=e+a;t[s]=t[s]*(1-i)+t[n+a]*i}}});Object.assign(Rr.prototype,{getValue:function getValue(t,e){this.bind();var n=this._targetGroup.nCachedObjects_,i=this._bindings[n];void 0!==i&&i.getValue(t,e)},setValue:function setValue(t,e){for(var n=this._bindings,i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i){n[i].setValue(t,e)}},bind:function bind(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e){t[e].bind()}},unbind:function unbind(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e){t[e].unbind()}}}),Object.assign(Or,{Composite:Rr,create:function create(t,e,n){return t&&t.isAnimationObjectGroup?new Or.Composite(t,e,n):new Or(t,e,n)},sanitizeNodeName:function(){var t=/[\[\]\.:\/]/g;return function(e){return e.replace(/\s/g,"_").replace(t,"")}}(),parseTrackName:function(){var t="[^\\[\\]\\.:\\/]",e="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",n=/((?:WC+[\/:])*)/.source.replace("WC",t),i=/(WCOD+)?/.source.replace("WCOD",e),r=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",t),o=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",t),a=new RegExp("^"+n+i+r+o+"$"),s=["material","materials","bones"];return function(t){var e=a.exec(t);if(!e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);var n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){var r=n.nodeName.substring(i+1);-1!==s.indexOf(r)&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=r)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n}}(),findNode:function findNode(t,e){if(!e||""===e||"root"===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){var n=t.skeleton.getBoneByName(e);if(void 0!==n)return n}if(t.children){var i=function(t){for(var n=0,r;n<t.length;n++){r=t[n];if(r.name===e||r.uuid===e)return r;var o=i(r.children);if(o)return o}return null},r=i(t.children);if(r)return r}return null}}),Object.assign(Or.prototype,{_getValue_unavailable:function _getValue_unavailable(){},_setValue_unavailable:function _setValue_unavailable(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(t,e){t[e]=this.node[this.propertyName]},function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i){t[e++]=n[i]}},function(t,e){t[e]=this.resolvedProperty[this.propertyIndex]},function(t,e){this.resolvedProperty.toArray(t,e)}],SetterByBindingTypeAndVersioning:[[function(t,e){this.targetObject[this.propertyName]=t[e]},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i){n[i]=t[e++]}},function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i){n[i]=t[e++]}this.targetObject.needsUpdate=!0},function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i){n[i]=t[e++]}this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty[this.propertyIndex]=t[e]},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty.fromArray(t,e)},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function getValue(t,e){this.bind(),this.getValue(t,e)},setValue:function setValue(t,e){this.bind(),this.setValue(t,e)},bind:function bind(){var t=this.node,e=this.parsedPath,n=e.objectName,i=e.propertyName,r=e.propertyIndex;if(t||(t=Or.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,t){if(n){var o=e.objectIndex;switch(n){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(c=0;c<t.length;c++){if(t[c].name===o){o=c;break}}break;default:if(void 0===t[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[n];}if(void 0!==o){if(void 0===t[o])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[o]}}var a=t[i];if(void 0!==a){var s=this.Versioning.None;void 0!==t.needsUpdate?(s=this.Versioning.NeedsUpdate,this.targetObject=t):void 0!==t.matrixWorldNeedsUpdate&&(s=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=t);var l=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===i){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(t.geometry.isBufferGeometry){if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);for(c=0;c<this.node.geometry.morphAttributes.position.length;c++){if(t.geometry.morphAttributes.position[c].name===r){r=c;break}}}else{if(!t.geometry.morphTargets)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);for(var c=0;c<this.node.geometry.morphTargets.length;c++){if(t.geometry.morphTargets[c].name===r){r=c;break}}}}l=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=r}else void 0!==a.fromArray&&void 0!==a.toArray?(l=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(l=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][s]}else{var h=e.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+h+"."+i+" but it wasn't found.",t)}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(Or.prototype,{_getValue_unbound:Or.prototype.getValue,_setValue_unbound:Or.prototype.setValue}),Object.assign(function(){this.uuid=Ms.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var e=0,n=arguments.length;e!==n;++e){t[arguments[e].uuid]=e}this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var i=this;this.stats={objects:{get total(){return i._objects.length},get inUse(){return this.total-i.nCachedObjects_}},get bindingsPerObject(){return i._bindings.length}}}.prototype,{isAnimationObjectGroup:!0,add:function add(){for(var t=this._objects,e=t.length,n=this.nCachedObjects_,i=this._indicesByUUID,r=this._paths,o=this._parsedPaths,a=this._bindings,s=a.length,l=void 0,c=0,h=arguments.length;c!==h;++c){var u=arguments[c],p=u.uuid,d=i[p];if(void 0===d){d=e++,i[p]=d,t.push(u);for(var f=0,m=s;f!==m;++f){a[f].push(new Or(u,r[f],o[f]))}}else if(d<n){l=t[d];var _=--n,g=t[_];i[g.uuid]=d,t[d]=g,i[p]=_,t[_]=u;for(var f=0,m=s;f!==m;++f){var y=a[f],v=y[_],b=y[d];y[d]=v,void 0===b&&(b=new Or(u,r[f],o[f])),y[_]=b}}else t[d]!==l&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=n},remove:function remove(){for(var t=this._objects,e=this.nCachedObjects_,n=this._indicesByUUID,i=this._bindings,r=i.length,o=0,a=arguments.length;o!==a;++o){var s=arguments[o],l=s.uuid,c=n[l];if(void 0!==c&&c>=e){var h=e++,u=t[h];n[u.uuid]=c,t[c]=u,n[l]=h,t[h]=s;for(var p=0;p!==r;++p){var f=i[p],m=f[h],_=f[c];f[c]=m,f[h]=_}}}this.nCachedObjects_=e},uncache:function uncache(){for(var t=this._objects,e=t.length,n=this.nCachedObjects_,i=this._indicesByUUID,r=this._bindings,o=r.length,a=0,s=arguments.length;a!==s;++a){var l=arguments[a].uuid,c=i[l];if(void 0!==c)if(delete i[l],c<n){var h=--n,u=t[h],p=t[g=--e];i[u.uuid]=c,t[c]=u,i[p.uuid]=h,t[h]=p,t.pop();for(var d=0,f=o;d!==f;++d){var m=(y=r[d])[h],_=y[g];y[c]=m,y[h]=_,y.pop()}}else{var g=--e;i[(p=t[g]).uuid]=c,t[c]=p,t.pop();for(var d=0,f=o,y;d!==f;++d){y=r[d];y[c]=y[g],y.pop()}}}this.nCachedObjects_=n},subscribe_:function subscribe_(t,e){var n=this._bindingsIndicesByPath,i=n[t],r=this._bindings;if(void 0!==i)return r[i];var o=this._paths,a=this._parsedPaths,s=this._objects,l=s.length,c=this.nCachedObjects_,h=Array(l);i=r.length,n[t]=i,o.push(t),a.push(e),r.push(h);for(var u=c,p=s.length,d;u!==p;++u){d=s[u];h[u]=new Or(d,t,e)}return h},unsubscribe_:function unsubscribe_(t){var e=this._bindingsIndicesByPath,n=e[t];if(void 0!==n){var i=this._paths,r=this._parsedPaths,o=this._bindings,a=o.length-1,s=o[a];e[t[a]]=n,o[n]=s,o.pop(),r[n]=r[a],r.pop(),i[n]=i[a],i.pop()}}}),Object.assign(kr.prototype,{play:function play(){return this._mixer._activateAction(this),this},stop:function stop(){return this._mixer._deactivateAction(this),this.reset()},reset:function reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function isScheduled(){return this._mixer._isActiveAction(this)},startAt:function startAt(t){return this._startTime=t,this},setLoop:function setLoop(t,e){return this.loop=t,this.repetitions=e,this},setEffectiveWeight:function setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()},getEffectiveWeight:function getEffectiveWeight(){return this._effectiveWeight},fadeIn:function fadeIn(t){return this._scheduleFading(t,0,1)},fadeOut:function fadeOut(t){return this._scheduleFading(t,1,0)},crossFadeFrom:function crossFadeFrom(t,e,n){if(t.fadeOut(e),this.fadeIn(e),n){var i=this._clip.duration,r=t._clip.duration;t.warp(1,r/i,e),this.warp(i/r,1,e)}return this},crossFadeTo:function crossFadeTo(t,e,n){return t.crossFadeFrom(this,e,n)},stopFading:function stopFading(){var t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},setEffectiveTimeScale:function setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()},getEffectiveTimeScale:function getEffectiveTimeScale(){return this._effectiveTimeScale},setDuration:function setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()},syncWith:function syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()},halt:function halt(t){return this.warp(this._effectiveTimeScale,0,t)},warp:function warp(t,e,n){var i=this._mixer,r=i.time,o=this._timeScaleInterpolant,a=this.timeScale;null===o&&(o=i._lendControlInterpolant(),this._timeScaleInterpolant=o);var s=o.parameterPositions,l=o.sampleValues;return s[0]=r,s[1]=r+n,l[0]=t/a,l[1]=e/a,this},stopWarping:function stopWarping(){var t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},getMixer:function getMixer(){return this._mixer},getClip:function getClip(){return this._clip},getRoot:function getRoot(){return this._localRoot||this._mixer._root},_update:function _update(t,e,n,i){if(this.enabled){var r=this._startTime;if(null!==r){var o=(t-r)*n;if(0>o||0===n)return;this._startTime=null,e=n*o}e*=this._updateTimeScale(t);var a=this._updateTime(e),s=this._updateWeight(t);if(0<s)for(var l=this._interpolants,c=this._propertyBindings,h=0,u=l.length;h!==u;++h){l[h].evaluate(a),c[h].accumulate(i,s)}}else this._updateWeight(t)},_updateWeight:function _updateWeight(t){var e=0;if(this.enabled){e=this.weight;var n=this._weightInterpolant;if(null!==n){var i=n.evaluate(t)[0];e*=i,t>n.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=e,e},_updateTimeScale:function _updateTimeScale(t){var e=0;if(!this.paused){e=this.timeScale;var n=this._timeScaleInterpolant;null!==n&&(e*=n.evaluate(t)[0],t>n.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e))}return this._effectiveTimeScale=e,e},_updateTime:function _updateTime(t){var e=this.time+t;if(0===t)return e;var n=this._clip.duration,i=this.loop,r=this._loopCount;if(2200===i){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(e>=n)e=n;else{if(!(0>e))break t;e=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:0>t?-1:1})}}else{var o=2202===i;if(-1===r&&(0<=t?(r=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),e>=n||0>e){var a=_Mathfloor(e/n);e-=n*a,r+=_Mathabs(a);var s=this.repetitions-r;if(0>=s)this.clampWhenFinished?this.paused=!0:this.enabled=!1,e=0<t?n:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:0<t?1:-1});else{if(1===s){var l=0>t;this._setEndings(l,!l,o)}else this._setEndings(!1,!1,o);this._loopCount=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}if(o&&1==(1&r))return this.time=e,n-e}return this.time=e,e},_setEndings:function _setEndings(t,e,n){var i=this._interpolantSettings;n?(i.endingStart=2401,i.endingEnd=2401):(i.endingStart=t?this.zeroSlopeAtStart?2401:ps:2402,i.endingEnd=e?this.zeroSlopeAtEnd?2401:ps:2402)},_scheduleFading:function _scheduleFading(t,e,n){var i=this._mixer,r=i.time,o=this._weightInterpolant;null===o&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);var a=o.parameterPositions,s=o.sampleValues;return a[0]=r,s[0]=e,a[1]=r+t,s[1]=n,this}}),Dr.prototype=Object.assign(Object.create(i.prototype),{constructor:Dr,_bindAction:function _bindAction(t,e){var n=t._localRoot||this._root,i=t._clip.tracks,r=i.length,o=t._propertyBindings,a=t._interpolants,s=n.uuid,l=this._bindingsByRootAndName,c=l[s];void 0===c&&(c={},l[s]=c);for(var h=0;h!==r;++h){var u=i[h],p=u.name,d=c[p];if(void 0!==d)o[h]=d;else{if(void 0!==(d=o[h])){null===d._cacheIndex&&(++d.referenceCount,this._addInactiveBinding(d,s,p));continue}var f=e&&e._propertyBindings[h].binding.parsedPath;++(d=new Lr(Or.create(n,p,f),u.ValueTypeName,u.getValueSize())).referenceCount,this._addInactiveBinding(d,s,p),o[h]=d}a[h].resultBuffer=d.buffer}},_activateAction:function _activateAction(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){var e=(t._localRoot||this._root).uuid,n=t._clip.uuid,i=this._actionsByClip[n];this._bindAction(t,i&&i.knownActions[0]),this._addInactiveAction(t,n,e)}for(var r=t._propertyBindings,o=0,a=r.length,s;o!==a;++o){s=r[o];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(t)}},_deactivateAction:function _deactivateAction(t){if(this._isActiveAction(t)){for(var e=t._propertyBindings,n=0,i=e.length,r;n!==i;++n){r=e[n];0==--r.useCount&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(t)}},_initMemoryManager:function _initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}},_isActiveAction:function _isActiveAction(t){var e=t._cacheIndex;return null!==e&&e<this._nActiveActions},_addInactiveAction:function _addInactiveAction(t,e,n){var i=this._actions,r=this._actionsByClip,o=r[e];if(void 0===o)o={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,r[e]=o;else{var a=o.knownActions;t._byClipCacheIndex=a.length,a.push(t)}t._cacheIndex=i.length,i.push(t),o.actionByRoot[n]=t},_removeInactiveAction:function _removeInactiveAction(t){var e=this._actions,n=e[e.length-1],i=t._cacheIndex;n._cacheIndex=i,e[i]=n,e.pop(),t._cacheIndex=null;var r=t._clip.uuid,o=this._actionsByClip,a=o[r],s=a.knownActions,l=s[s.length-1],c=t._byClipCacheIndex;l._byClipCacheIndex=c,s[c]=l,s.pop(),t._byClipCacheIndex=null,delete a.actionByRoot[(t._localRoot||this._root).uuid],0===s.length&&delete o[r],this._removeInactiveBindingsForAction(t)},_removeInactiveBindingsForAction:function _removeInactiveBindingsForAction(t){for(var e=t._propertyBindings,n=0,i=e.length,r;n!==i;++n){r=e[n];0==--r.referenceCount&&this._removeInactiveBinding(r)}},_lendAction:function _lendAction(t){var e=this._actions,n=t._cacheIndex,i=this._nActiveActions++,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r},_takeBackAction:function _takeBackAction(t){var e=this._actions,n=t._cacheIndex,i=--this._nActiveActions,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r},_addInactiveBinding:function _addInactiveBinding(t,e,n){var i=this._bindingsByRootAndName,r=i[e],o=this._bindings;void 0===r&&(r={},i[e]=r),r[n]=t,t._cacheIndex=o.length,o.push(t)},_removeInactiveBinding:function _removeInactiveBinding(t){var e=this._bindings,n=t.binding,i=n.rootNode.uuid,r=n.path,o=this._bindingsByRootAndName,a=o[i],s=e[e.length-1],l=t._cacheIndex;s._cacheIndex=l,e[l]=s,e.pop(),delete a[r];t:{for(var c in a){break t}delete o[i]}},_lendBinding:function _lendBinding(t){var e=this._bindings,n=t._cacheIndex,i=this._nActiveBindings++,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r},_takeBackBinding:function _takeBackBinding(t){var e=this._bindings,n=t._cacheIndex,i=--this._nActiveBindings,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r},_lendControlInterpolant:function _lendControlInterpolant(){var t=this._controlInterpolants,e=this._nActiveControlInterpolants++,n=t[e];return void 0===n&&((n=new ur(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=e,t[e]=n),n},_takeBackControlInterpolant:function _takeBackControlInterpolant(t){var e=this._controlInterpolants,n=t.__cacheIndex,i=--this._nActiveControlInterpolants,r=e[i];t.__cacheIndex=i,e[i]=t,r.__cacheIndex=n,e[n]=r},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function clipAction(t,e){var n=e||this._root,i=n.uuid,r="string"==typeof t?mr.findByName(n,t):t,o=null!==r?r.uuid:t,a=this._actionsByClip[o],s=null;if(void 0!==a){var l=a.actionByRoot[i];if(void 0!==l)return l;s=a.knownActions[0],null===r&&(r=s._clip)}if(null===r)return null;var c=new kr(this,r,e);return this._bindAction(c,s),this._addInactiveAction(c,o,i),c},existingAction:function existingAction(t,e){var n=e||this._root,i=n.uuid,r="string"==typeof t?mr.findByName(n,t):t,o=r?r.uuid:t,a=this._actionsByClip[o];return void 0!==a?a.actionByRoot[i]||null:null},stopAllAction:function stopAllAction(){var t=this._actions,e=this._nActiveActions,n=this._bindings,i=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(r=0;r!==e;++r){t[r].reset()}for(var r=0;r!==i;++r){n[r].useCount=0}return this},update:function update(t){t*=this.timeScale;for(var e=this._actions,n=this._nActiveActions,i=this.time+=t,r=_Mathsign(t),o=this._accuIndex^=1,a=0;a!==n;++a){e[a]._update(i,t,r,o)}for(var s=this._bindings,l=this._nActiveBindings,a=0;a!==l;++a){s[a].apply(o)}return this},getRoot:function getRoot(){return this._root},uncacheClip:function uncacheClip(t){var e=this._actions,n=t.uuid,i=this._actionsByClip,r=i[n];if(void 0!==r){for(var o=r.knownActions,a=0,s=o.length,l;a!==s;++a){l=o[a];this._deactivateAction(l);var c=l._cacheIndex,h=e[e.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,h._cacheIndex=c,e[c]=h,e.pop(),this._removeInactiveBindingsForAction(l)}delete i[n]}},uncacheRoot:function uncacheRoot(t){var e=t.uuid,n=this._actionsByClip;for(var i in n){var r=n[i].actionByRoot[e];void 0!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}var o=this._bindingsByRootAndName[e];if(void 0!==o)for(var a in o){var s=o[a];s.restoreOriginalState(),this._removeInactiveBinding(s)}},uncacheAction:function uncacheAction(t,e){var n=this.existingAction(t,e);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}),Fr.prototype.clone=function(){return new Fr(void 0===this.value.clone?this.value:this.value.clone())},Nr.prototype=Object.assign(Object.create(B.prototype),{constructor:Nr,isInstancedBufferGeometry:!0,copy:function copy(t){return B.prototype.copy.call(this,t),this.maxInstancedCount=t.maxInstancedCount,this},clone:function clone(){return new this.constructor().copy(this)}}),Object.defineProperties(Ur.prototype,{count:{get:function get(){return this.data.count}},array:{get:function get(){return this.data.array}}}),Object.assign(Ur.prototype,{isInterleavedBufferAttribute:!0,setX:function setX(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this},setY:function setY(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this},setZ:function setZ(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this},setW:function setW(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this},getX:function getX(t){return this.data.array[t*this.data.stride+this.offset]},getY:function getY(t){return this.data.array[t*this.data.stride+this.offset+1]},getZ:function getZ(t){return this.data.array[t*this.data.stride+this.offset+2]},getW:function getW(t){return this.data.array[t*this.data.stride+this.offset+3]},setXY:function setXY(t,e,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this},setXYZ:function setXYZ(t,e,n,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this},setXYZW:function setXYZW(t,e,n,i,r){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this.data.array[t+3]=r,this}}),Object.defineProperty(Br.prototype,"needsUpdate",{set:function set(t){!0===t&&this.version++}}),Object.assign(Br.prototype,{isInterleavedBuffer:!0,onUploadCallback:function onUploadCallback(){},setArray:function setArray(t){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==t?t.length/this.stride:0,this.array=t,this},setDynamic:function setDynamic(t){return this.dynamic=t,this},copy:function copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.dynamic=t.dynamic,this},copyAt:function copyAt(t,e,n){t*=this.stride,n*=e.stride;for(var i=0,r=this.stride;i<r;i++){this.array[t+i]=e.array[n+i]}return this},set:function set(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},clone:function clone(){return new this.constructor().copy(this)},onUpload:function onUpload(t){return this.onUploadCallback=t,this}}),zr.prototype=Object.assign(Object.create(Br.prototype),{constructor:zr,isInstancedInterleavedBuffer:!0,copy:function copy(t){return Br.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this}}),Gr.prototype=Object.assign(Object.create(A.prototype),{constructor:Gr,isInstancedBufferAttribute:!0,copy:function copy(t){return A.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this}}),Object.assign(function(t,e,n,i){this.ray=new X(t,e),this.near=n||0,this.far=i||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function get(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}.prototype,{linePrecision:1,set:function set(t,e){this.ray.set(t,e)},setFromCamera:function setFromCamera(t,e){e&&e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize()):e&&e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function intersectObject(t,e,n){var i=n||[];return jr(t,this,i,e),i.sort(Hr),i},intersectObjects:function intersectObjects(t,e,n){var i=n||[];if(!1===Array.isArray(t))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),i;for(var r=0,o=t.length;r<o;r++){jr(t[r],this,i,e)}return i.sort(Hr),i}}),Object.assign(function(t){this.autoStart=void 0===t||t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}.prototype,{start:function start(){this.startTime=("undefined"==typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function getElapsedTime(){return this.getDelta(),this.elapsedTime},getDelta:function getDelta(){var t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var e=("undefined"==typeof performance?Date:performance).now();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}}),Object.assign(function(t,e,n){return this.radius=void 0!==t?t:1,this.phi=void 0!==e?e:0,this.theta=void 0!==n?n:0,this}.prototype,{set:function set(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this},clone:function clone(){return new this.constructor().copy(this)},copy:function copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this},makeSafe:function makeSafe(){return this.phi=_Mathmax(1e-6,_Mathmin(_MathPI-1e-6,this.phi)),this},setFromVector3:function setFromVector3(t){return this.radius=t.length(),0===this.radius?(this.theta=0,this.phi=0):(this.theta=_Mathatan(t.x,t.z),this.phi=_Mathacos(Ms.clamp(t.y/this.radius,-1,1))),this}}),Object.assign(function(t,e,n){return this.radius=void 0!==t?t:1,this.theta=void 0!==e?e:0,this.y=void 0!==n?n:0,this}.prototype,{set:function set(t,e,n){return this.radius=t,this.theta=e,this.y=n,this},clone:function clone(){return new this.constructor().copy(this)},copy:function copy(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this},setFromVector3:function setFromVector3(t){return this.radius=_Mathsqrt(t.x*t.x+t.z*t.z),this.theta=_Mathatan(t.x,t.z),this.y=t.y,this}}),Object.assign(Vr.prototype,{set:function set(t,e){return this.min.copy(t),this.max.copy(e),this},setFromPoints:function setFromPoints(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++){this.expandByPoint(t[e])}return this},setFromCenterAndSize:function(){var t=new r;return function(e,n){var i=t.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}}(),clone:function clone(){return new this.constructor().copy(this)},copy:function copy(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function getCenter(t){return void 0===t&&(console.warn("THREE.Box2: .getCenter() target is now required"),t=new r),this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function getSize(t){return void 0===t&&(console.warn("THREE.Box2: .getSize() target is now required"),t=new r),this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)},expandByPoint:function expandByPoint(t){return this.min.min(t),this.max.max(t),this},expandByVector:function expandByVector(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)},containsBox:function containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y},getParameter:function getParameter(t,e){return void 0===e&&(console.warn("THREE.Box2: .getParameter() target is now required"),e=new r),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)},clampPoint:function clampPoint(t,e){return void 0===e&&(console.warn("THREE.Box2: .clampPoint() target is now required"),e=new r),e.copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new r;return function(e){return t.copy(e).clamp(this.min,this.max).sub(e).length()}}(),intersect:function intersect(t){return this.min.max(t.min),this.max.min(t.max),this},union:function union(t){return this.min.min(t.min),this.max.max(t.max),this},translate:function translate(t){return this.min.add(t),this.max.add(t),this},equals:function equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}),(Wr.prototype=Object.create(x.prototype)).constructor=Wr,Wr.prototype.isImmediateRenderObject=!0,(qr.prototype=Object.create(Ne.prototype)).constructor=qr,qr.prototype.update=function(){var t=new s,e=new s,n=new l;return function(){var i=["a","b","c"];this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);var r=this.object.matrixWorld,o=this.geometry.attributes.position,a=this.object.geometry;if(a&&a.isGeometry)for(var s=a.vertices,l=a.faces,c=0,h=0,u=l.length;h<u;h++){for(var p=l[h],d=0,f=p.vertexNormals.length;d<f;d++){var m=s[p[i[d]]],_=p.vertexNormals[d];t.copy(m).applyMatrix4(r),e.copy(_).applyMatrix3(n).normalize().multiplyScalar(this.size).add(t),o.setXYZ(c,t.x,t.y,t.z),c+=1,o.setXYZ(c,e.x,e.y,e.z),c+=1}}else if(a&&a.isBufferGeometry)for(var g=a.attributes.position,y=a.attributes.normal,c=0,d=0,f=g.count;d<f;d++){t.set(g.getX(d),g.getY(d),g.getZ(d)).applyMatrix4(r),e.set(y.getX(d),y.getY(d),y.getZ(d)),e.applyMatrix3(n).normalize().multiplyScalar(this.size).add(t),o.setXYZ(c,t.x,t.y,t.z),c+=1,o.setXYZ(c,e.x,e.y,e.z),c+=1}o.needsUpdate=!0}}(),(Xr.prototype=Object.create(x.prototype)).constructor=Xr,Xr.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},Xr.prototype.update=function(){var t=new s,e=new s;return function(){this.light.updateMatrixWorld();var n=this.light.distance?this.light.distance:1e3,i=n*_Mathtan(this.light.angle);this.cone.scale.set(i,i,n),t.setFromMatrixPosition(this.light.matrixWorld),e.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(e.sub(t)),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}(),(Zr.prototype=Object.create(Ne.prototype)).constructor=Zr,Zr.prototype.updateMatrixWorld=function(){var t=new s,e=new o,n=new o;return function(i){var r=this.bones,o=this.geometry,a=o.getAttribute("position");n.getInverse(this.root.matrixWorld);for(var s=0,l=0,c;s<r.length;s++){c=r[s];c.parent&&c.parent.isBone&&(e.multiplyMatrices(n,c.matrixWorld),t.setFromMatrixPosition(e),a.setXYZ(l,t.x,t.y,t.z),e.multiplyMatrices(n,c.parent.matrixWorld),t.setFromMatrixPosition(e),a.setXYZ(l+1,t.x,t.y,t.z),l+=2)}o.getAttribute("position").needsUpdate=!0,x.prototype.updateMatrixWorld.call(this,i)}}(),(Jr.prototype=Object.create(J.prototype)).constructor=Jr,Jr.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},Jr.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)},(Kr.prototype=Object.create(x.prototype)).constructor=Kr,Kr.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},Kr.prototype.update=function(){var t=.5*this.light.width,e=.5*this.light.height,n=this.line.geometry.attributes.position,i=n.array;i[0]=t,i[1]=-e,i[2]=0,i[3]=t,i[4]=e,i[5]=0,i[6]=-t,i[7]=e,i[8]=0,i[9]=-t,i[10]=-e,i[11]=0,i[12]=t,i[13]=-e,i[14]=0,n.needsUpdate=!0,void 0!==this.color?this.line.material.color.set(this.color):this.line.material.color.copy(this.light.color)},(Qr.prototype=Object.create(x.prototype)).constructor=Qr,Qr.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},Qr.prototype.update=function(){var t=new s,e=new y,n=new y;return function(){var i=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var r=i.geometry.getAttribute("color");e.copy(this.light.color),n.copy(this.light.groundColor);for(var o=0,a=r.count,s;o<a;o++){s=o<a/2?e:n;r.setXYZ(o,s.r,s.g,s.b)}r.needsUpdate=!0}i.lookAt(t.setFromMatrixPosition(this.light.matrixWorld).negate())}}(),($r.prototype=Object.create(Ne.prototype)).constructor=$r,(to.prototype=Object.create(Ne.prototype)).constructor=to,(eo.prototype=Object.create(Ne.prototype)).constructor=eo,eo.prototype.update=function(){var t=new s,e=new s,n=new l;return function(){this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);for(var i=this.object.matrixWorld,r=this.geometry.attributes.position,o=this.object.geometry,a=o.vertices,s=o.faces,l=0,c=0,h=s.length;c<h;c++){var u=s[c],p=u.normal;t.copy(a[u.a]).add(a[u.b]).add(a[u.c]).divideScalar(3).applyMatrix4(i),e.copy(p).applyMatrix3(n).normalize().multiplyScalar(this.size).add(t),r.setXYZ(l,t.x,t.y,t.z),l+=1,r.setXYZ(l,e.x,e.y,e.z),l+=1}r.needsUpdate=!0}}(),(no.prototype=Object.create(x.prototype)).constructor=no,no.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},no.prototype.update=function(){var t=new s,e=new s,n=new s;return function(){t.setFromMatrixPosition(this.light.matrixWorld),e.setFromMatrixPosition(this.light.target.matrixWorld),n.subVectors(e,t),this.lightPlane.lookAt(n),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(n),this.targetLine.scale.z=n.length()}}(),(io.prototype=Object.create(Ne.prototype)).constructor=io,io.prototype.update=function(){function t(t,o,a,s){i.set(o,a,s).unproject(r);var l=n[t];if(void 0!==l)for(var c=e.getAttribute("position"),h=0,u=l.length;h<u;h++){c.setXYZ(l[h],i.x,i.y,i.z)}}var e,n,i=new s,r=new S;return function(){e=this.geometry,n=this.pointMap;r.projectionMatrix.copy(this.camera.projectionMatrix),t("c",0,0,-1),t("t",0,0,1),t("n1",-1,-1,-1),t("n2",1,-1,-1),t("n3",-1,1,-1),t("n4",1,1,-1),t("f1",-1,-1,1),t("f2",1,-1,1),t("f3",-1,1,1),t("f4",1,1,1),t("u1",.7,1.1,-1),t("u2",-.7,1.1,-1),t("u3",0,2,-1),t("cf1",-1,0,1),t("cf2",1,0,1),t("cf3",0,-1,1),t("cf4",0,1,1),t("cn1",-1,0,-1),t("cn2",1,0,-1),t("cn3",0,-1,-1),t("cn4",0,1,-1),e.getAttribute("position").needsUpdate=!0}}(),ro.prototype=Object.create(Ne.prototype),ro.prototype.constructor=ro,ro.prototype.update=function(){var t=new f;return function(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&t.setFromObject(this.object),!t.isEmpty()){var n=t.min,i=t.max,r=this.geometry.attributes.position,o=r.array;o[0]=i.x,o[1]=i.y,o[2]=i.z,o[3]=n.x,o[4]=i.y,o[5]=i.z,o[6]=n.x,o[7]=n.y,o[8]=i.z,o[9]=i.x,o[10]=n.y,o[11]=i.z,o[12]=i.x,o[13]=i.y,o[14]=n.z,o[15]=n.x,o[16]=i.y,o[17]=n.z,o[18]=n.x,o[19]=n.y,o[20]=n.z,o[21]=i.x,o[22]=n.y,o[23]=n.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}(),ro.prototype.setFromObject=function(t){return this.object=t,this.update(),this},(oo.prototype=Object.create(Ne.prototype)).constructor=oo,oo.prototype.updateMatrixWorld=function(t){var e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5),x.prototype.updateMatrixWorld.call(this,t))},(ao.prototype=Object.create(Fe.prototype)).constructor=ao,ao.prototype.updateMatrixWorld=function(t){var e=-this.plane.constant;1e-8>_Mathabs(e)&&(e=1e-8),this.scale.set(.5*this.size,.5*this.size,e),this.lookAt(this.plane.normal),x.prototype.updateMatrixWorld.call(this,t)};var pl,dl;(so.prototype=Object.create(x.prototype)).constructor=so,so.prototype.setDirection=function(){var t,e=new s;return function(n){.99999<n.y?this.quaternion.set(0,0,0,1):-.99999>n.y?this.quaternion.set(1,0,0,0):(e.set(n.z,0,-n.x).normalize(),t=_Mathacos(n.y),this.quaternion.setFromAxisAngle(e,t))}}(),so.prototype.setLength=function(t,e,n){void 0===e&&(e=.2*t),void 0===n&&(n=.2*e),this.line.scale.set(1,_Mathmax(0,t-e),1),this.line.updateMatrix(),this.cone.scale.set(n,e,n),this.cone.position.y=t,this.cone.updateMatrix()},so.prototype.setColor=function(t){this.line.material.color.copy(t),this.cone.material.color.copy(t)},lo.prototype=Object.create(Ne.prototype),lo.prototype.constructor=lo;xi.create=function(t,e){return console.log("THREE.Curve.create() has been deprecated"),t.prototype=Object.create(xi.prototype),t.prototype.constructor=t,t.prototype.getPoint=e,t},Object.assign(Vi.prototype,{createPointsGeometry:function createPointsGeometry(t){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var e=this.getPoints(t);return this.createGeometry(e)},createSpacedPointsGeometry:function createSpacedPointsGeometry(t){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var e=this.getSpacedPoints(t);return this.createGeometry(e)},createGeometry:function createGeometry(t){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var e=new T,n=0,i=t.length,r;n<i;n++){r=t[n];e.vertices.push(new s(r.x,r.y,r.z||0))}return e}}),Object.assign(Wi.prototype,{fromPoints:function fromPoints(t){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(t)}}),function(t){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Ti.call(this,t),this.type="catmullrom",this.closed=!0}.prototype=Object.create(Ti.prototype),function(t){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Ti.call(this,t),this.type="catmullrom"}.prototype=Object.create(Ti.prototype),co.prototype=Object.create(Ti.prototype),Object.assign(co.prototype,{initFromArray:function initFromArray(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function getControlPointsArray(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function reparametrizeByArcLength(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),$r.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Zr.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(yr.prototype,{extractUrlBase:function extractUrlBase(t){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),al.extractUrlBase(t)}}),Object.assign(Vr.prototype,{center:function center(t){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function empty(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function isIntersectionBox(t){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},size:function size(t){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(t)}}),Object.assign(f.prototype,{center:function center(t){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function empty(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function isIntersectionBox(t){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionSphere:function isIntersectionSphere(t){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},size:function size(t){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(t)}}),Y.prototype.center=function(t){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(t)},Object.assign(Ms,{random16:function random16(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function nearestPowerOfTwo(t){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),Ms.floorPowerOfTwo(t)},nextPowerOfTwo:function nextPowerOfTwo(t){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),Ms.ceilPowerOfTwo(t)}}),Object.assign(l.prototype,{flattenToArrayOffset:function flattenToArrayOffset(t,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},multiplyVector3:function multiplyVector3(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},multiplyVector3Array:function multiplyVector3Array(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function applyToBuffer(t){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(t)},applyToVector3Array:function applyToVector3Array(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(o.prototype,{extractPosition:function extractPosition(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},flattenToArrayOffset:function flattenToArrayOffset(t,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},getPosition:function(){var t;return function(){return void 0===t&&(t=new s),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),t.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function setRotationFromQuaternion(t){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)},multiplyToArray:function multiplyToArray(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function multiplyVector3(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector4:function multiplyVector4(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector3Array:function multiplyVector3Array(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function rotateAxis(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},crossVector:function crossVector(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},translate:function translate(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function rotateX(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function rotateY(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function rotateZ(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function rotateByAxis(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function applyToBuffer(t){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(t)},applyToVector3Array:function applyToVector3Array(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function makeFrustum(t,e,n,i,r,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(t,e,i,n,r,o)}}),_.prototype.isIntersectionLine=function(t){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(t)},a.prototype.multiplyVector3=function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)},Object.assign(X.prototype,{isIntersectionBox:function isIntersectionBox(t){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionPlane:function isIntersectionPlane(t){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(t)},isIntersectionSphere:function isIntersectionSphere(t){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)}}),Object.assign(Z.prototype,{area:function area(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function barycoordFromPoint(t,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(t,e)},midpoint:function midpoint(t){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(t)},normal:function normal(t){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(t)},plane:function plane(t){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(t)}}),Object.assign(Z,{barycoordFromPoint:function barycoordFromPoint(t,e,n,i,r){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Z.getBarycoord(t,e,n,i,r)},normal:function normal(t,e,n,i){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Z.getNormal(t,e,n,i)}}),Object.assign(qi.prototype,{extractAllPoints:function extractAllPoints(t){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(t)},extrude:function extrude(t){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Gn(this,t)},makeGeometry:function makeGeometry(t){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Kn(this,t)}}),Object.assign(r.prototype,{fromAttribute:function fromAttribute(t,e,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},distanceToManhattan:function distanceToManhattan(t){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function lengthManhattan(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(s.prototype,{setEulerFromRotationMatrix:function setEulerFromRotationMatrix(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function setEulerFromQuaternion(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function getPositionFromMatrix(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},getScaleFromMatrix:function getScaleFromMatrix(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},getColumnFromMatrix:function getColumnFromMatrix(t,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,t)},applyProjection:function applyProjection(t){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(t)},fromAttribute:function fromAttribute(t,e,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},distanceToManhattan:function distanceToManhattan(t){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function lengthManhattan(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(h.prototype,{fromAttribute:function fromAttribute(t,e,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},lengthManhattan:function lengthManhattan(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(T.prototype,{computeTangents:function computeTangents(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function computeLineDistances(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}}),Object.assign(x.prototype,{getChildByName:function getChildByName(t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t)},renderDepth:function renderDepth(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function translate(t,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,t)},getWorldRotation:function getWorldRotation(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")}}),Object.defineProperties(x.prototype,{eulerOrder:{get:function get(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function set(t){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=t}},useQuaternion:{get:function get(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function set(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(Le.prototype,{objects:{get:function get(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(Re.prototype,"useVertexTexture",{get:function get(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function set(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),Object.defineProperty(xi.prototype,"__arcLengthDivisions",{get:function get(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function set(t){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=t}}),xe.prototype.setLens=function(t,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==e&&(this.filmGauge=e),this.setFocalLength(t)},Object.defineProperties(Xi.prototype,{onlyShadow:{set:function set(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function set(t){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=t}},shadowCameraLeft:{set:function set(t){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=t}},shadowCameraRight:{set:function set(t){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=t}},shadowCameraTop:{set:function set(t){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=t}},shadowCameraBottom:{set:function set(t){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=t}},shadowCameraNear:{set:function set(t){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=t}},shadowCameraFar:{set:function set(t){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=t}},shadowCameraVisible:{set:function set(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function set(t){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=t}},shadowDarkness:{set:function set(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function set(t){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=t}},shadowMapHeight:{set:function set(t){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=t}}}),Object.defineProperties(A.prototype,{length:{get:function get(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},copyIndicesArray:function copyIndicesArray(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")}}),Object.assign(B.prototype,{addIndex:function addIndex(t){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(t)},addDrawCall:function addDrawCall(t,e,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(t,e)},clearDrawCalls:function clearDrawCalls(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function computeTangents(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function computeOffsets(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(B.prototype,{drawcalls:{get:function get(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function get(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.assign(Hn.prototype,{getArrays:function getArrays(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function addShapeList(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function addShape(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Object.defineProperties(Fr.prototype,{dynamic:{set:function set(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function value(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(V.prototype,{wrapAround:{get:function get(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function set(){console.warn("THREE.Material: .wrapAround has been removed.")}},wrapRGB:{get:function get(){return console.warn("THREE.Material: .wrapRGB has been removed."),new y}},shading:{get:function get(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function set(t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===t}}}),Object.defineProperties(ui.prototype,{metal:{get:function get(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function set(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(q.prototype,{derivatives:{get:function get(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function set(t){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=t}}}),Object.assign(Me.prototype,{getCurrentRenderTarget:function getCurrentRenderTarget(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function getMaxAnisotropy(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function getPrecision(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function resetGLState(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function supportsFloatTextures(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function supportsHalfFloatTextures(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function supportsStandardDerivatives(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function supportsCompressedTextureS3TC(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function supportsCompressedTexturePVRTC(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function supportsBlendMinMax(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function supportsVertexTextures(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function supportsInstancedArrays(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function enableScissorTest(t){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(t)},initMaterial:function initMaterial(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function addPrePlugin(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function addPostPlugin(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function updateShadowMap(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function setFaceCulling(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")}}),Object.defineProperties(Me.prototype,{shadowMapEnabled:{get:function get(){return this.shadowMap.enabled},set:function set(t){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=t}},shadowMapType:{get:function get(){return this.shadowMap.type},set:function set(t){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=t}},shadowMapCullFace:{get:function get(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function set(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(_e.prototype,{cullFace:{get:function get(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function set(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function get(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function set(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function get(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function set(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(u.prototype,{wrapS:{get:function get(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function set(t){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=t}},wrapT:{get:function get(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function set(t){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=t}},magFilter:{get:function get(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function set(t){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=t}},minFilter:{get:function get(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function set(t){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=t}},anisotropy:{get:function get(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function set(t){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=t}},offset:{get:function get(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function set(t){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=t}},repeat:{get:function get(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function set(t){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=t}},format:{get:function get(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function set(t){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=t}},type:{get:function get(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function set(t){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=t}},generateMipmaps:{get:function get(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function set(t){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=t}}}),Object.defineProperties(Ee.prototype,{standing:{set:function set(){console.warn("THREE.WebVRManager: .standing has been removed.")}}}),Pr.prototype.load=function(t){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var e=this;return new Mr().load(t,function(t){e.setBuffer(t)}),this},Ir.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},Tr.prototype.updateCubeMap=function(t,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(t,e)}},function(t){var n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==("undefined"===typeof window?"undefined":babelHelpers.typeof(window))&&(n=window)}t.exports=n},function(t,e){"use strict";var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;e.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1),n;e.length;){n=e.shift();if(n){if("object"!=babelHelpers.typeof(n))throw new TypeError(n+"must be non-object");for(var i in n){n.hasOwnProperty(i)&&(t[i]=n[i])}}}return t},e.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var r={arraySet:function arraySet(t,e,n,i,r){if(e.subarray&&t.subarray)t.set(e.subarray(n,n+i),r);else for(var o=0;o<i;o++){t[r+o]=e[n+o]}},flattenChunks:function flattenChunks(t){var e,n,i,r,o,a;for(i=0,e=0,n=t.length;e<n;e++){i+=t[e].length}for(a=new Uint8Array(i),r=0,e=0,n=t.length;e<n;e++){o=t[e],a.set(o,r),r+=o.length}return a}},o={arraySet:function arraySet(t,e,n,i,r){for(var o=0;o<i;o++){t[r+o]=e[n+o]}},flattenChunks:function flattenChunks(t){return[].concat.apply([],t)}};e.setTyped=function(t){t?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,r)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,o))},e.setTyped(i)},function(t,e,n){"use strict";function i(t,e){if(!babelHelpers.instanceof(t,e))throw new TypeError("Cannot call a class as a function")}var r=n(15),o=n(0),a="function"==typeof Symbol&&"symbol"==babelHelpers.typeof(Symbol.iterator)?function(t){return babelHelpers.typeof(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":babelHelpers.typeof(t)},s=n(88),l=function(){function t(){i(this,t)}return t.bbox=function(t,e){return r.a.vector3(t)&&r.a.vector3(e)?0<=e.x&&0<=e.y&&0<=e.z?{min:t.clone().sub(e),max:t.clone().add(e)}:(window.console.log("halfDimensions must be >= 0."),window.console.log(e),!1):(window.console.log("Invalid center or plane halfDimensions."),!1)},t.minMax=function(){for(var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],e=[65535,-32768],n=t.length,i=0,r;i<n;i++){r=t[i];e[0]=_Mathmin(e[0],r),e[1]=_Mathmax(e[1],r)}return e},t.isElement=function(t){try{return babelHelpers.instanceof(t,HTMLElement)}catch(e){return"object"===(void 0===t?"undefined":a(t))&&1===t.nodeType&&"object"===a(t.style)&&"object"===a(t.ownerDocument)}},t.isString=function(t){return"string"==typeof t||babelHelpers.instanceof(t,String)},t.parseUrl=function(t){var e={filename:"",extension:"",pathname:"",query:""},n=s.parse(t);return e.pathname=n.pathname,e.query=n.query,e.query&&(e.filename=e.query.split("&").reduce(function(t,e){var n=e.split("=");return 0<n.length&&"filename"==n[0]&&(t=n[1]),t})),e.filename||(e.filename=e.pathname.split("/").pop()),1>=e.filename.split(".").length?e.extension="dicom":e.extension=e.filename.split(".").pop(),isNaN(e.extension)||(e.extension="dicom"),e.query&&e.query.includes("contentType=application%2Fdicom")&&(e.extension="dicom"),e},t.ijk2LPS=function(t,e,n,i,r){var a=5<arguments.length&&void 0!==arguments[5]?arguments[5]:new o.c,s=new o.c;return s.set(t.x*i.y,e.x*i.x,n.x*i.z,r.x,t.y*i.y,e.y*i.x,n.y*i.z,r.y,t.z*i.y,e.z*i.x,n.z*i.z,r.z,0,0,0,1),s.premultiply(a),s},t.aabb2LPS=function(t,e,n,i){var r=new o.c;return r.set(t.x,e.x,n.x,i.x,t.y,e.y,n.y,i.y,t.z,e.z,n.z,i.z,0,0,0,1),r},t.worldToData=function(t,e){var n=new o.f().copy(e).applyMatrix4(t);return n.addScalar(.5).floor(),n},t.value=function(t,e){window.console.warn("value is deprecated, please use getPixelData instead"),this.getPixelData(t,e)},t.getPixelData=function(t,e){return 0<=e.z&&e.z<t._frame.length?t._frame[e.z].getPixelData(e.x,e.y):null},t.setPixelData=function(t,e,n){if(!(0<=e.z&&e.z<t._frame.length))return null;t._frame[e.z].setPixelData(e.x,e.y,n)},t.rescaleSlopeIntercept=function(t,e,n){return t*e+n},t}();e.a=l},function(t){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function r(t){if(h===setTimeout)return setTimeout(t,0);if((h===n||!h)&&setTimeout)return h=setTimeout,setTimeout(t,0);try{return h(t,0)}catch(e){try{return h.call(null,t,0)}catch(e){return h.call(this,t,0)}}}function o(t){if(u===clearTimeout)return clearTimeout(t);if((u===i||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(t);try{return u(t)}catch(e){try{return u.call(null,t)}catch(e){return u.call(this,t)}}}function a(){m&&d&&(m=!1,d.length?f=d.concat(f):_=-1,f.length&&s())}function s(){if(!m){var t=r(a);m=!0;for(var e=f.length;e;){for(d=f,f=[];++_<e;){d&&d[_].run()}_=-1,e=f.length}d=null,m=!1,o(t)}}function l(t,e){this.fun=t,this.array=e}function c(){}var h,u,p=t.exports={};!function(){try{h="function"==typeof setTimeout?setTimeout:n}catch(t){h=n}try{u="function"==typeof clearTimeout?clearTimeout:i}catch(t){u=i}}();var d,f=[],m=!1,_=-1;p.nextTick=function(t){var e=Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++){e[n-1]=arguments[n]}f.push(new l(t,e)),1!==f.length||m||r(s)},l.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=c,p.addListener=c,p.once=c,p.off=c,p.removeListener=c,p.removeAllListeners=c,p.emit=c,p.prependListener=c,p.prependOnceListener=c,p.listeners=function(){return[]},p.binding=function(){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},function(t,e){"use strict";function i(t,e){if(!babelHelpers.instanceof(t,e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=babelHelpers.typeof(e)&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+babelHelpers.typeof(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var n=0,i;n<e.length;n++){i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=function(t){function e(n){i(this,e);var o=r(this,t.call(this));return o._enabled=!0,o._selected=!1,o._hovered=!1,o._active=!1,o._colors={default:"#00B0FF",active:"#FFEB3B",hover:"#F50057",select:"#76FF03"},o._color=o._colors.default,o._dragged=!1,o._displayed=!0,o._container=n,o}return o(e,t),e.prototype.initOffsets=function(){var t=this._container.getBoundingClientRect(),e=document.body,n=document.documentElement,i=window.pageYOffset||n.scrollTop||e.scrollTop,r=window.pageXOffset||n.scrollLeft||e.scrollLeft,o=n.clientTop||e.clientTop||0,a=n.clientLeft||e.clientLeft||0,s=t.top+i-o,l=t.left+r-a;this._offsets={top:_Mathround(s),left:_Mathround(l)}},e.prototype.offsetChanged=function(){this.initOffsets(),this.update()},e.prototype.getMouseOffsets=function(t,e){return{x:2*((t.clientX-this._offsets.left)/e.offsetWidth)-1,y:2*(-(t.clientY-this._offsets.top)/e.offsetHeight)+1,screenX:t.clientX-this._offsets.left,screenY:t.clientY-this._offsets.top}},e.prototype.update=function(){window.console.log("update() should be overloaded!")},e.prototype.free=function(){this._container=null},e.prototype.updateColor=function(){this._active?this._color=this._colors.active:this._hovered?this._color=this._colors.hover:this._selected?this._color=this._colors.select:this._color=this._colors.default},a(e,[{key:"enabled",get:function get(){return this._enabled},set:function set(t){this._enabled=t,this.update()}},{key:"selected",get:function get(){return this._selected},set:function set(t){this._selected=t,this.update()}},{key:"hovered",get:function get(){return this._hovered},set:function set(t){this._hovered=t,this.update()}},{key:"dragged",get:function get(){return this._dragged},set:function set(t){this._dragged=t,this.update()}},{key:"displayed",get:function get(){return this._displayed},set:function set(t){this._displayed=t,this.update()}},{key:"active",get:function get(){return this._active},set:function set(t){this._active=t,this.update()}},{key:"color",get:function get(){return this._color},set:function set(t){this._color=t,this.update()}}]),e}(THREE.Object3D);e.a=s},function(t,e,n){"use strict";(function(t){function i(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function r(t,e){if(i()<e)throw new RangeError("Invalid typed array length");return o.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=o.prototype:(null===t&&(t=new o(e)),t.length=e),t}function o(t,e,n){if(!(o.TYPED_ARRAY_SUPPORT||babelHelpers.instanceof(this,o)))return new o(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return c(this,t)}return a(this,t,e,n)}function a(t,e,n,i){if("number"==typeof e)throw new TypeError("\"value\" argument must not be a number");return"undefined"!=typeof ArrayBuffer&&babelHelpers.instanceof(e,ArrayBuffer)?p(t,e,n,i):"string"==typeof e?h(t,e,n):d(t,e)}function s(t){if("number"!=typeof t)throw new TypeError("\"size\" argument must be a number");if(0>t)throw new RangeError("\"size\" argument must not be negative")}function l(t,e,n,i){return s(e),0>=e?r(t,e):void 0!==n?"string"==typeof i?r(t,e).fill(n,i):r(t,e).fill(n):r(t,e)}function c(t,e){if(s(e),t=r(t,0>e?0:0|f(e)),!o.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n){t[n]=0}return t}function h(t,e,n){if("string"==typeof n&&""!==n||(n="utf8"),!o.isEncoding(n))throw new TypeError("\"encoding\" must be a valid string encoding");var i=0|m(e,n),a=(t=r(t,i)).write(e,n);return a!==i&&(t=t.slice(0,a)),t}function u(t,e){var n=0>e.length?0:0|f(e.length);t=r(t,n);for(var i=0;i<n;i+=1){t[i]=255&e[i]}return t}function p(t,e,n,i){if(e.byteLength,0>n||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(i||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===i?new Uint8Array(e):void 0===i?new Uint8Array(e,n):new Uint8Array(e,n,i),o.TYPED_ARRAY_SUPPORT?(t=e).__proto__=o.prototype:t=u(t,e),t}function d(t,e){if(o.isBuffer(e)){var n=0|f(e.length);return 0===(t=r(t,n)).length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!=typeof ArrayBuffer&&babelHelpers.instanceof(e.buffer,ArrayBuffer)||"length"in e)return"number"!=typeof e.length||Y(e.length)?r(t,0):u(t,e);if("Buffer"===e.type&&K(e.data))return u(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function f(t){if(t>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|t}function m(t,e){if(o.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||babelHelpers.instanceof(t,ArrayBuffer)))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var i=!1;;){switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return j(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return q(t).length;default:if(i)return j(t).length;e=(""+e).toLowerCase(),i=!0;}}}function _(t,e,n){var i=!1;if((void 0===e||0>e)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),0>=n)return"";if(n>>>=0,e>>>=0,n<=e)return"";for(t||(t="utf8");;){switch(t){case"hex":return L(this,e,n);case"utf8":case"utf-8":return A(this,e,n);case"ascii":return C(this,e,n);case"latin1":case"binary":return I(this,e,n);case"base64":return T(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,e,n);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0;}}}function g(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function y(t,e,n,i,r){if(0===t.length)return-1;if("string"==typeof n?(i=n,n=0):2147483647<n?n=2147483647:-2147483648>n&&(n=-2147483648),n=+n,isNaN(n)&&(n=r?0:t.length-1),0>n&&(n=t.length+n),n>=t.length){if(r)return-1;n=t.length-1}else if(0>n){if(!r)return-1;n=0}if("string"==typeof e&&(e=o.from(e,i)),o.isBuffer(e))return 0===e.length?-1:v(t,e,n,i,r);if("number"==typeof e)return e&=255,o.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):v(t,[e],n,i,r);throw new TypeError("val must be string, number or Buffer")}function v(t,e,n,i,r){function o(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}var a=1,s=t.length,l=e.length;if(void 0!==i&&("ucs2"===(i=(i+"").toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(2>t.length||2>e.length)return-1;a=2,s/=2,l/=2,n/=2}var c;if(r){var h=-1;for(c=n;c<s;c++){if(o(t,c)===o(e,-1===h?0:c-h)){if(-1===h&&(h=c),c-h+1===l)return h*a}else-1!==h&&(c-=c-h),h=-1}}else for(n+l>s&&(n=s-l),c=n;0<=c;c--){for(var u=!0,p=0;p<l;p++){if(o(t,c+p)!==o(e,p)){u=!1;break}}if(u)return c}return-1}function b(t,e,n,i){n=+n||0;var r=t.length-n;i?(i=+i)>r&&(i=r):i=r;var o=e.length;if(0!=o%2)throw new TypeError("Invalid hex string");i>o/2&&(i=o/2);for(var a=0,s;a<i;++a){s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[n+a]=s}return a}function w(t,e,n,i){return X(j(e,t.length-n),t,n,i)}function x(t,e,n,i){return X(V(e),t,n,i)}function S(t,e,n,i){return x(t,e,n,i)}function E(t,e,n,i){return X(q(e),t,n,i)}function M(t,e,n,i){return X(W(e,t.length-n),t,n,i)}function T(t,e,n){return 0===e&&n===t.length?Z.fromByteArray(t):Z.fromByteArray(t.slice(e,n))}function A(t,e,n){n=_Mathmin(t.length,n);for(var i=[],r=e;r<n;){var o=t[r],a=null,s=239<o?4:223<o?3:191<o?2:1;if(r+s<=n){var l,c,h,u;switch(s){case 1:128>o&&(a=o);break;case 2:128==(192&(l=t[r+1]))&&127<(u=(31&o)<<6|63&l)&&(a=u);break;case 3:l=t[r+1],c=t[r+2],128==(192&l)&&128==(192&c)&&2047<(u=(15&o)<<12|(63&l)<<6|63&c)&&(55296>u||57343<u)&&(a=u);break;case 4:l=t[r+1],c=t[r+2],h=t[r+3],128==(192&l)&&128==(192&c)&&128==(192&h)&&65535<(u=(15&o)<<18|(63&l)<<12|(63&c)<<6|63&h)&&1114112>u&&(a=u);}}null===a?(a=65533,s=1):65535<a&&(a-=65536,i.push(55296|1023&a>>>10),a=56320|1023&a),i.push(a),r+=s}return P(i)}function P(t){var e=t.length;if(e<=Q)return _StringfromCharCode.apply(String,t);for(var n="",i=0;i<e;){n+=_StringfromCharCode.apply(String,t.slice(i,i+=Q))}return n}function C(t,e,n){var i="";n=_Mathmin(t.length,n);for(var r=e;r<n;++r){i+=_StringfromCharCode(127&t[r])}return i}function I(t,e,n){var i="";n=_Mathmin(t.length,n);for(var r=e;r<n;++r){i+=_StringfromCharCode(t[r])}return i}function L(t,e,n){var i=t.length;(!e||0>e)&&(e=0),(!n||0>n||n>i)&&(n=i);for(var r="",o=e;o<n;++o){r+=H(t[o])}return r}function R(t,e,n){for(var i=t.slice(e,n),r="",o=0;o<i.length;o+=2){r+=_StringfromCharCode(i[o]+256*i[o+1])}return r}function O(t,e,n){if(0!=t%1||0>t)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function k(t,e,n,i,r,a){if(!o.isBuffer(t))throw new TypeError("\"buffer\" argument must be a Buffer instance");if(e>r||e<a)throw new RangeError("\"value\" argument is out of bounds");if(n+i>t.length)throw new RangeError("Index out of range")}function D(t,e,n,i){0>e&&(e=65535+e+1);for(var r=0,o=_Mathmin(t.length-n,2);r<o;++r){t[n+r]=(e&255<<8*(i?r:1-r))>>>8*(i?r:1-r)}}function F(t,e,n,i){0>e&&(e=4294967295+e+1);for(var r=0,o=_Mathmin(t.length-n,4);r<o;++r){t[n+r]=255&e>>>8*(i?r:3-r)}}function N(t,e,n,i){if(n+i>t.length)throw new RangeError("Index out of range");if(0>n)throw new RangeError("Index out of range")}function U(t,e,n,i,r){return r||N(t,e,n,4,34028234663852886e22,-34028234663852886e22),J.write(t,e,n,i,23,4),n+4}function B(t,e,n,i,r){return r||N(t,e,n,8,17976931348623157e292,-17976931348623157e292),J.write(t,e,n,i,52,8),n+8}function z(t){if(2>(t=G(t).replace($,"")).length)return"";for(;0!=t.length%4;){t+="="}return t}function G(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function H(t){return 16>t?"0"+t.toString(16):t.toString(16)}function j(t,e){e=e||1/0;for(var n,i=t.length,r=null,o=[],a=0;a<i;++a){if(55295<(n=t.charCodeAt(a))&&57344>n){if(!r){if(56319<n){-1<(e-=3)&&o.push(239,191,189);continue}if(a+1===i){-1<(e-=3)&&o.push(239,191,189);continue}r=n;continue}if(56320>n){-1<(e-=3)&&o.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&-1<(e-=3)&&o.push(239,191,189);if(r=null,128>n){if(0>(e-=1))break;o.push(n)}else if(2048>n){if(0>(e-=2))break;o.push(192|n>>6,128|63&n)}else if(65536>n){if(0>(e-=3))break;o.push(224|n>>12,128|63&n>>6,128|63&n)}else{if(!(1114112>n))throw new Error("Invalid code point");if(0>(e-=4))break;o.push(240|n>>18,128|63&n>>12,128|63&n>>6,128|63&n)}}return o}function V(t){for(var e=[],n=0;n<t.length;++n){e.push(255&t.charCodeAt(n))}return e}function W(t,e){for(var n,i,r,o=[],a=0;a<t.length&&!(0>(e-=2));++a){i=(n=t.charCodeAt(a))>>8,r=n%256,o.push(r),o.push(i)}return o}function q(t){return Z.toByteArray(z(t))}function X(t,e,n,i){for(var r=0;r<i&&!(r+n>=e.length||r>=t.length);++r){e[r+n]=t[r]}return r}function Y(t){return t!==t}var Z=n(133),J=n(134),K=n(135);e.Buffer=o,e.SlowBuffer=function(t){return+t!=t&&(t=0),o.alloc(+t)},e.INSPECT_MAX_BYTES=50,o.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function foo(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=i(),o.poolSize=8192,o._augment=function(t){return t.__proto__=o.prototype,t},o.from=function(t,e,n){return a(null,t,e,n)},o.TYPED_ARRAY_SUPPORT&&(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0})),o.alloc=function(t,e,n){return l(null,t,e,n)},o.allocUnsafe=function(t){return c(null,t)},o.allocUnsafeSlow=function(t){return c(null,t)},o.isBuffer=function(t){return!(null==t||!t._isBuffer)},o.compare=function(t,e){if(!o.isBuffer(t)||!o.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,i=e.length,r=0,a=_Mathmin(n,i);r<a;++r){if(t[r]!==e[r]){n=t[r],i=e[r];break}}return n<i?-1:i<n?1:0},o.isEncoding=function(t){switch((t+"").toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1;}},o.concat=function(t,e){if(!K(t))throw new TypeError("\"list\" argument must be an Array of Buffers");if(0===t.length)return o.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n){e+=t[n].length}var i=o.allocUnsafe(e),r=0;for(n=0;n<t.length;++n){var a=t[n];if(!o.isBuffer(a))throw new TypeError("\"list\" argument must be an Array of Buffers");a.copy(i,r),r+=a.length}return i},o.byteLength=m,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var t=this.length;if(0!=t%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2){g(this,e,e+1)}return this},o.prototype.swap32=function(){var t=this.length;if(0!=t%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4){g(this,e,e+3),g(this,e+1,e+2)}return this},o.prototype.swap64=function(){var t=this.length;if(0!=t%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8){g(this,e,e+7),g(this,e+1,e+6),g(this,e+2,e+5),g(this,e+3,e+4)}return this},o.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?A(this,0,t):_.apply(this,arguments)},o.prototype.equals=function(t){if(!o.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===o.compare(this,t)},o.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return 0<this.length&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},o.prototype.compare=function(t,e,n,i,r){if(!o.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===i&&(i=0),void 0===r&&(r=this.length),0>e||n>t.length||0>i||r>this.length)throw new RangeError("out of range index");if(i>=r&&e>=n)return 0;if(i>=r)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,i>>>=0,r>>>=0,this===t)return 0;for(var a=r-i,s=n-e,l=_Mathmin(a,s),c=this.slice(i,r),h=t.slice(e,n),u=0;u<l;++u){if(c[u]!==h[u]){a=c[u],s=h[u];break}}return a<s?-1:s<a?1:0},o.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},o.prototype.indexOf=function(t,e,n){return y(this,t,e,n,!0)},o.prototype.lastIndexOf=function(t,e,n){return y(this,t,e,n,!1)},o.prototype.write=function(t,e,n,i){if(void 0===e)i="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)i=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}var r=this.length-e;if((void 0===n||n>r)&&(n=r),0<t.length&&(0>n||0>e)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var o=!1;;){switch(i){case"hex":return b(this,t,e,n);case"utf8":case"utf-8":return w(this,t,e,n);case"ascii":return x(this,t,e,n);case"latin1":case"binary":return S(this,t,e,n);case"base64":return E(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0;}}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Q=4096;o.prototype.slice=function(t,e){var n=this.length;t=~~t,e=void 0===e?n:~~e,0>t?0>(t+=n)&&(t=0):t>n&&(t=n),0>e?0>(e+=n)&&(e=0):e>n&&(e=n),e<t&&(e=t);var i;if(o.TYPED_ARRAY_SUPPORT)(i=this.subarray(t,e)).__proto__=o.prototype;else{var r=e-t;i=new o(r,void 0);for(var a=0;a<r;++a){i[a]=this[a+t]}}return i},o.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||O(t,e,this.length);for(var i=this[t],r=1,o=0;++o<e&&(r*=256);){i+=this[t+o]*r}return i},o.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||O(t,e,this.length);for(var i=this[t+--e],r=1;0<e&&(r*=256);){i+=this[t+--e]*r}return i},o.prototype.readUInt8=function(t,e){return e||O(t,1,this.length),this[t]},o.prototype.readUInt16LE=function(t,e){return e||O(t,2,this.length),this[t]|this[t+1]<<8},o.prototype.readUInt16BE=function(t,e){return e||O(t,2,this.length),this[t]<<8|this[t+1]},o.prototype.readUInt32LE=function(t,e){return e||O(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},o.prototype.readUInt32BE=function(t,e){return e||O(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},o.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||O(t,e,this.length);for(var i=this[t],r=1,o=0;++o<e&&(r*=256);){i+=this[t+o]*r}return r*=128,i>=r&&(i-=_Mathpow(2,8*e)),i},o.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||O(t,e,this.length);for(var i=e,r=1,o=this[t+--i];0<i&&(r*=256);){o+=this[t+--i]*r}return r*=128,o>=r&&(o-=_Mathpow(2,8*e)),o},o.prototype.readInt8=function(t,e){return e||O(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},o.prototype.readInt16LE=function(t,e){e||O(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt16BE=function(t,e){e||O(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt32LE=function(t,e){return e||O(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},o.prototype.readInt32BE=function(t,e){return e||O(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},o.prototype.readFloatLE=function(t,e){return e||O(t,4,this.length),J.read(this,t,!0,23,4)},o.prototype.readFloatBE=function(t,e){return e||O(t,4,this.length),J.read(this,t,!1,23,4)},o.prototype.readDoubleLE=function(t,e){return e||O(t,8,this.length),J.read(this,t,!0,52,8)},o.prototype.readDoubleBE=function(t,e){return e||O(t,8,this.length),J.read(this,t,!1,52,8)},o.prototype.writeUIntLE=function(t,e,n,i){t=+t,e|=0,n|=0,i||k(this,t,e,n,_Mathpow(2,8*n)-1,0);var r=1,o=0;for(this[e]=255&t;++o<n&&(r*=256);){this[e+o]=255&t/r}return e+n},o.prototype.writeUIntBE=function(t,e,n,i){t=+t,e|=0,n|=0,i||k(this,t,e,n,_Mathpow(2,8*n)-1,0);var r=n-1,o=1;for(this[e+r]=255&t;0<=--r&&(o*=256);){this[e+r]=255&t/o}return e+n},o.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||k(this,t,e,1,255,0),o.TYPED_ARRAY_SUPPORT||(t=_Mathfloor(t)),this[e]=255&t,e+1},o.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||k(this,t,e,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):D(this,t,e,!0),e+2},o.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||k(this,t,e,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):D(this,t,e,!1),e+2},o.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||k(this,t,e,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):F(this,t,e,!0),e+4},o.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||k(this,t,e,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):F(this,t,e,!1),e+4},o.prototype.writeIntLE=function(t,e,n,i){if(t=+t,e|=0,!i){var r=_Mathpow(2,8*n-1);k(this,t,e,n,r-1,-r)}var o=0,a=1,s=0;for(this[e]=255&t;++o<n&&(a*=256);){0>t&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=255&(t/a>>0)-s}return e+n},o.prototype.writeIntBE=function(t,e,n,i){if(t=+t,e|=0,!i){var r=_Mathpow(2,8*n-1);k(this,t,e,n,r-1,-r)}var o=n-1,a=1,s=0;for(this[e+o]=255&t;0<=--o&&(a*=256);){0>t&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=255&(t/a>>0)-s}return e+n},o.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||k(this,t,e,1,127,-128),o.TYPED_ARRAY_SUPPORT||(t=_Mathfloor(t)),0>t&&(t=255+t+1),this[e]=255&t,e+1},o.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||k(this,t,e,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):D(this,t,e,!0),e+2},o.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||k(this,t,e,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):D(this,t,e,!1),e+2},o.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||k(this,t,e,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):F(this,t,e,!0),e+4},o.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||k(this,t,e,4,2147483647,-2147483648),0>t&&(t=4294967295+t+1),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):F(this,t,e,!1),e+4},o.prototype.writeFloatLE=function(t,e,n){return U(this,t,e,!0,n)},o.prototype.writeFloatBE=function(t,e,n){return U(this,t,e,!1,n)},o.prototype.writeDoubleLE=function(t,e,n){return B(this,t,e,!0,n)},o.prototype.writeDoubleBE=function(t,e,n){return B(this,t,e,!1,n)},o.prototype.copy=function(t,e,n,i){if(n||(n=0),i||0===i||(i=this.length),e>=t.length&&(e=t.length),e||(e=0),0<i&&i<n&&(i=n),i===n)return 0;if(0===t.length||0===this.length)return 0;if(0>e)throw new RangeError("targetStart out of bounds");if(0>n||n>=this.length)throw new RangeError("sourceStart out of bounds");if(0>i)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-n&&(i=t.length-e+n);var r,a=i-n;if(this===t&&n<e&&e<i)for(r=a-1;0<=r;--r){t[r+e]=this[r+n]}else if(1e3>a||!o.TYPED_ARRAY_SUPPORT)for(r=0;r<a;++r){t[r+e]=this[r+n]}else Uint8Array.prototype.set.call(t,this.subarray(n,n+a),e);return a},o.prototype.fill=function(t,e,n,i){if("string"==typeof t){if("string"==typeof e?(i=e,e=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),1===t.length){var r=t.charCodeAt(0);256>r&&(t=r)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!o.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof t&&(t&=255);if(0>e||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0);var a;if("number"==typeof t)for(a=e;a<n;++a){this[a]=t}else{var s=o.isBuffer(t)?t:j(new o(t,i).toString()),l=s.length;for(a=0;a<n-e;++a){this[a+e]=s[a%l]}}return this};var $=/[^+\/0-9A-Za-z-_]/g}).call(e,n(1))},function(t,e,n){"use strict";function i(t){if(!babelHelpers.instanceof(this,i))return new i(t);c.call(this,t),h.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",r)}function r(){this.allowHalfOpen||this._writableState.ended||a(o,this)}function o(t){t.end()}var a=n(16),s=Object.keys||function(t){var e=[];for(var n in t){e.push(n)}return e};t.exports=i;var l=n(13);l.inherits=n(14);var c=n(62),h=n(65);l.inherits(i,c);for(var u=s(h.prototype),p=0,d;p<u.length;p++){d=u[p];i.prototype[d]||(i.prototype[d]=h.prototype[d])}Object.defineProperty(i.prototype,"destroyed",{get:function get(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function set(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),i.prototype._destroy=function(t,e){this.push(null),this.end(),a(e,t)}},function(t){"use strict";var i=i||{};i.lossless=i.lossless||{},i.lossless.DataStream=i.lossless.DataStream||function(t,e,n){this.buffer=new DataView(t,e,n),this.index=0},i.lossless.DataStream.prototype.get16=function(){var t=this.buffer.getUint16(this.index,!1);return this.index+=2,t},i.lossless.DataStream.prototype.get8=function(){var t=this.buffer.getUint8(this.index);return this.index+=1,t},"undefined"!==typeof t&&t.exports&&(t.exports=i.lossless.DataStream)},function(t,e,n){"use strict";function i(t,e){if(!babelHelpers.instanceof(t,e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=babelHelpers.typeof(e)&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+babelHelpers.typeof(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(5),s=n(10),l=n(0),c=function(){function t(t,e){for(var n=0,i;n<e.length;n++){i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),h=function(t){function e(n,o,a,s){i(this,e);var c=r(this,t.call(this,s));return c._targetMesh=n,c._controls=o,c._camera=a,c._plane={position:new l.f,direction:new l.f},c._offset=new l.f,c._raycaster=new THREE.Raycaster,c._tracking=!1,c._mouse=new l.e,c._lastEvent=null,c._worldPosition=new l.f,c._screenPosition=new l.e,c._material=null,c._geometry=null,c._mesh=null,c._meshDisplayed=!0,c._meshHovered=!1,c._meshStyle="sphere",c._dom=null,c._domDisplayed=!0,c._domHovered=!1,c._domStyle="circle",null!==c._targetMesh&&c._worldPosition.copy(c._targetMesh.position),c._screenPosition=c.worldToScreen(c._worldPosition,c._camera,c._container),c.create(),c.initOffsets(),c.onMove=c.onMove.bind(c),c.onHover=c.onHover.bind(c),c.onEndControl=c.onEndControl.bind(c),c.addEventListeners(),c}return o(e,t),e.prototype.addEventListeners=function(){this._dom.addEventListener("mouseenter",this.onHover),this._dom.addEventListener("mouseleave",this.onHover),this._container.addEventListener("mousewheel",this.onMove),this._container.addEventListener("DOMMouseScroll",this.onMove),this._controls.addEventListener("end",this.onEndControl)},e.prototype.removeEventListeners=function(){this._dom.removeEventListener("mouseenter",this.onHover),this._dom.removeEventListener("mouseleave",this.onHover),this._container.removeEventListener("mousewheel",this.onMove),this._container.removeEventListener("DOMMouseScroll",this.onMove),this._controls.removeEventListener("end",this.onEndControl)},e.prototype.create=function(){this.createMesh(),this.createDOM()},e.prototype.onStart=function(t){this._lastEvent=t,t.preventDefault();var e=this.getMouseOffsets(t,this._container);if(this._mouse.set(e.x,e.y),this._raycaster.setFromCamera(this._mouse,this._camera),this._raycaster.ray.position=this._raycaster.ray.origin,this._hovered){if(this._active=!0,this._controls.enabled=!1,this._targetMesh){var n=this._raycaster.intersectObject(this._targetMesh);0<n.length&&this._offset.copy(n[0].point).sub(this._worldPosition)}else{this._plane.position.copy(this._worldPosition),this._plane.direction.copy(this._camera.getWorldDirection());var i=s.a.rayPlane(this._raycaster.ray,this._plane);null!==i&&this._offset.copy(i).sub(this._plane.position)}this.update()}},e.prototype.onEnd=function(t){this._lastEvent=t,t.preventDefault(),!0!==this._tracking&&(!this._dragged&&this._active&&(this._selected=!this._selected),this._active=!1,this._dragged=!1,this._controls.enabled=!0,this.update())},e.prototype.onEndControl=function(){var t=this;this._lastEvent&&window.requestAnimationFrame(function(){t.onMove(t._lastEvent)})},e.prototype.onMove=function(t){this._lastEvent=t,t.preventDefault();var e=this.getMouseOffsets(t,this._container);if(this._mouse.set(e.x,e.y),this._raycaster.setFromCamera(this._mouse,this._camera),this._raycaster.ray.position=this._raycaster.ray.origin,this._active){if(this._dragged=!0,null!==this._targetMesh){var n=this._raycaster.intersectObject(this._targetMesh);0<n.length&&this._worldPosition.copy(n[0].point.sub(this._offset))}else{0===this._plane.direction.length()&&(this._plane.position.copy(this._worldPosition),this._plane.direction.copy(this._camera.getWorldDirection()));var i=s.a.rayPlane(this._raycaster.ray,this._plane);null!==i&&this._worldPosition.copy(i.sub(this._offset))}}else this.onHover(null);this.update()},e.prototype.onHover=function(t){t&&(this._lastEvent=t,t.preventDefault(),this.hoverDom(t)),this.hoverMesh(),this._hovered=this._meshHovered||this._domHovered,this._container.style.cursor=this._hovered?"pointer":"default"},e.prototype.update=function(){this.updateColor(),this._screenPosition=this.worldToScreen(this._worldPosition,this._camera,this._container),this.updateMeshColor(),this.updateMeshPosition(),this.updateDOMColor(),this.updateDOMPosition()},e.prototype.updateMeshColor=function(){this._material&&this._material.color.set(this._color)},e.prototype.updateMeshPosition=function(){this._mesh&&(this._mesh.position.x=this._worldPosition.x,this._mesh.position.y=this._worldPosition.y,this._mesh.position.z=this._worldPosition.z)},e.prototype.hoverMesh=function(){var t=this._raycaster.intersectObject(this._mesh);this._meshHovered=0<t.length},e.prototype.hoverDom=function(t){this._domHovered="mouseenter"===t.type},e.prototype.worldToScreen=function(t,e,n){var i=t.clone();return i.project(e),i.x=_Mathround((i.x+1)*n.offsetWidth/2),i.y=_Mathround((1-i.y)*n.offsetHeight/2),i.z=0,i},e.prototype.createMesh=function(){this._geometry=new THREE.SphereGeometry(1,16,16),this._material=new THREE.MeshBasicMaterial({wireframe:!0,wireframeLinewidth:2}),this._mesh=new THREE.Mesh(this._geometry,this._material),this._mesh.position.x=this._worldPosition.x,this._mesh.position.y=this._worldPosition.y,this._mesh.position.z=this._worldPosition.z,this._mesh.visible=!0,this.updateMeshColor(),this.add(this._mesh)},e.prototype.createDOM=function(){this._dom=document.createElement("div"),this._dom.setAttribute("id",this.uuid),this._dom.setAttribute("class","AMI Widget Handle"),this._dom.style.border="2px solid",this._dom.style.backgroundColor="#F9F9F9",this._dom.style.color="#F9F9F9",this._dom.style.position="absolute",this._dom.style.width="12px",this._dom.style.height="12px",this._dom.style.margin="-6px",this._dom.style.borderRadius="50%",this._dom.style.transformOrigin="0 100%";var t=this._screenPosition.y-this._container.offsetHeight;this._dom.style.transform="translate3D("+this._screenPosition.x+"px, "+t+"px, 0)",this.updateDOMColor(),this._container.appendChild(this._dom)},e.prototype.updateDOMPosition=function(){if(this._dom){var t=this._screenPosition.y-this._container.offsetHeight;this._dom.style.transform="translate3D("+this._screenPosition.x+"px, "+t+"px, 0)"}},e.prototype.updateDOMColor=function(){this._dom.style.borderColor=""+this._color},e.prototype.free=function(){this._container.removeChild(this._dom),this.removeEventListeners(),t.prototype.free.call(this)},e.prototype.hideDOM=function(){this._dom.style.display="none"},e.prototype.showDOM=function(){this._dom.style.display=""},e.prototype.hideMesh=function(){this.visible=!1},e.prototype.showMesh=function(){this.visible=!0},e.prototype.show=function(){this.showDOM(),this.showMesh()},e.prototype.hide=function(){this.hideDOM(),this.hideMesh()},c(e,[{key:"worldPosition",set:function set(t){this._worldPosition.copy(t),this.update()},get:function get(){return this._worldPosition}},{key:"screenPosition",set:function set(t){this._screenPosition=t},get:function get(){return this._screenPosition}},{key:"active",get:function get(){return this._active},set:function set(t){this._active=t,this._controls.enabled=!this._active,this.update()}},{key:"tracking",get:function get(){return this._tracking},set:function set(t){this._tracking=t,this.update()}}]),e}(a.a);e.a=h},function(t,e,n){"use strict";function i(t,e){if(!babelHelpers.instanceof(t,e))throw new TypeError("Cannot call a class as a function")}var r=n(3),o=n(15),a=n(0),s=function(){function t(){i(this,t)}return t.aabbPlane=function(t,e){var n=[];if(!this.validateAabb(t)||!this.validatePlane(e))return window.console.log("Invalid aabb or plane provided."),!1;var i=new a.c;i.getInverse(t.toAABB);var o=e.direction.clone().applyMatrix4(t.toAABB),s=new a.f(0,0,0).applyMatrix4(t.toAABB),l=this.posdir(e.position.clone().applyMatrix4(t.toAABB),new a.f(o.x-s.x,o.y-s.y,o.z-s.z).normalize()),c=r.a.bbox(t.center,t.halfDimensions),h=new a.f(new a.f(1,0,0),new a.f(0,1,0),new a.f(0,0,1)),u=this.posdir(new a.f(t.center.x-t.halfDimensions.x,t.center.y-t.halfDimensions.y,t.center.z-t.halfDimensions.z),h.x);this.rayPlaneInBBox(u,l,c,n),u.direction=h.y,this.rayPlaneInBBox(u,l,c,n),u.direction=h.z,this.rayPlaneInBBox(u,l,c,n);var p=this.posdir(new a.f(t.center.x+t.halfDimensions.x,t.center.y+t.halfDimensions.y,t.center.z+t.halfDimensions.z),h.x);this.rayPlaneInBBox(p,l,c,n),p.direction=h.y,this.rayPlaneInBBox(p,l,c,n),p.direction=h.z,this.rayPlaneInBBox(p,l,c,n);var d=this.posdir(new a.f(t.center.x+t.halfDimensions.x,t.center.y-t.halfDimensions.y,t.center.z-t.halfDimensions.z),h.y);this.rayPlaneInBBox(d,l,c,n),d.direction=h.z,this.rayPlaneInBBox(d,l,c,n);var f=this.posdir(new a.f(t.center.x-t.halfDimensions.x,t.center.y+t.halfDimensions.y,t.center.z-t.halfDimensions.z),h.x);this.rayPlaneInBBox(f,l,c,n),f.direction=h.z,this.rayPlaneInBBox(f,l,c,n);var m=this.posdir(new a.f(t.center.x-t.halfDimensions.x,t.center.y-t.halfDimensions.y,t.center.z+t.halfDimensions.z),h.x);return this.rayPlaneInBBox(m,l,c,n),m.direction=h.y,this.rayPlaneInBBox(m,l,c,n),n.map(function(t){return t.applyMatrix4(i)}),n},t.rayPlane=function(t,e){if(0!==t.direction.dot(e.direction)){var n=(e.direction.x*(e.position.x-t.position.x)+e.direction.y*(e.position.y-t.position.y)+e.direction.z*(e.position.z-t.position.z))/(e.direction.x*t.direction.x+e.direction.y*t.direction.y+e.direction.z*t.direction.z);return new a.f(t.position.x+n*t.direction.x,t.position.y+n*t.direction.y,t.position.z+n*t.direction.z)}return null},t.rayBox=function(t,e){var n=[],i=r.a.bbox(e.center,e.halfDimensions),o=this.posdir(new a.f(i.min.x,e.center.y,e.center.z),new a.f(-1,0,0));return this.rayPlaneInBBox(t,o,i,n),o=this.posdir(new a.f(i.max.x,e.center.y,e.center.z),new a.f(1,0,0)),this.rayPlaneInBBox(t,o,i,n),o=this.posdir(new a.f(e.center.x,i.min.y,e.center.z),new a.f(0,-1,0)),this.rayPlaneInBBox(t,o,i,n),o=this.posdir(new a.f(e.center.x,i.max.y,e.center.z),new a.f(0,1,0)),this.rayPlaneInBBox(t,o,i,n),o=this.posdir(new a.f(e.center.x,e.center.y,i.min.z),new a.f(0,0,-1)),this.rayPlaneInBBox(t,o,i,n),o=this.posdir(new a.f(e.center.x,e.center.y,i.max.z),new a.f(0,0,1)),this.rayPlaneInBBox(t,o,i,n),n},t.rayPlaneInBBox=function(t,e,n,i){var r=this.rayPlane(t,e);r&&this.inBBox(r,n)&&(i.find(this.findIntersection(r))||i.push(r))},t.findIntersection=function(t){return function(e){return t.x===e.x&&t.y===e.y&&t.z===e.z}},t.inBBox=function(t,e){return!!(t&&t.x>=e.min.x-1e-4&&t.y>=e.min.y-1e-4&&t.z>=e.min.z-1e-4&&t.x<=e.max.x+1e-4&&t.y<=e.max.y+1e-4&&t.z<=e.max.z+1e-4)},t.posdir=function(t,e){return{position:t,direction:e}},t.validatePlane=function(t){return null===t?(window.console.log("Invalid plane."),window.console.log(t),!1):o.a.vector3(t.position)?!!o.a.vector3(t.direction)||(window.console.log("Invalid plane.direction."),window.console.log(t.direction),!1):(window.console.log("Invalid plane.position."),window.console.log(t.position),!1)},t.validateAabb=function(t){return null===t?(window.console.log("Invalid aabb."),window.console.log(t),!1):o.a.matrix4(t.toAABB)?o.a.vector3(t.center)?!!(o.a.vector3(t.halfDimensions)&&0<=t.halfDimensions.x&&0<=t.halfDimensions.y&&0<=t.halfDimensions.z)||(window.console.log("Invalid aabb.halfDimensions."),window.console.log(t.halfDimensions),!1):(window.console.log("Invalid aabb.center."),window.console.log(t.center),!1):(window.console.log("Invalid aabb.toAABB: "),window.console.log(t.toAABB),!1)},t}();e.a=s},function(t,e){"use strict";function i(t,e){if(!babelHelpers.instanceof(t,e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0,i;n<e.length;n++){i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=function(){function t(){i(this,t),this._name="shadersBase",this._base={_functions:{},_uniforms:{}},this._definition=""}return r(t,[{key:"name",get:function get(){return this._name},set:function set(t){this._name=t}}]),t}();e.a=o},function(t,e){"use strict";function i(t,e){if(!babelHelpers.instanceof(t,e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(){i(this,t),this._rightHanded=!0}return t.prototype.pixelRepresentation=function(){return 0},t.prototype.pixelPaddingValue=function(){0<arguments.length&&void 0!==arguments[0]&&arguments[0];return null},t.prototype.modality=function(){return"unknown"},t.prototype.segmentationType=function(){return"unknown"},t.prototype.segmentationSegments=function(){return[]},t.prototype.referencedSegmentNumber=function(){return-1},t.prototype.rightHanded=function(){return this._rightHanded},t.prototype.spacingBetweenSlices=function(){return null},t.prototype.numberOfChannels=function(){return 1},t.prototype.sliceThickness=function(){return null},t.prototype.dimensionIndexValues=function(){0<arguments.length&&void 0!==arguments[0]&&arguments[0];return null},t.prototype.instanceNumber=function(){return 0<arguments.length&&void 0!==arguments[0]?arguments[0]:0},t.prototype.windowCenter=function(){0<arguments.length&&void 0!==arguments[0]&&arguments[0];return null},t.prototype.windowWidth=function(){0<arguments.length&&void 0!==arguments[0]&&arguments[0];return null},t.prototype.rescaleSlope=function(){0<arguments.length&&void 0!==arguments[0]&&arguments[0];return 1},t.prototype.rescaleIntercept=function(){0<arguments.length&&void 0!==arguments[0]&&arguments[0];return 0},t.prototype.frameTime=function(){0<arguments.length&&void 0!==arguments[0]&&arguments[0];return null},t.prototype._decompressUncompressed=function(){},t.prototype._swap16=function(t){return(255&t)<<8|255&t>>8},t.prototype._swap32=function(t){return(255&t)<<24|(65280&t)<<8|65280&t>>8|255&t>>24},t.prototype.invert=function(){return!1},t.prototype.transferSyntaxUID=function(){return"no value provided"},t.prototype.studyDate=function(){return"no value provided"},t.prototype.studyDescription=function(){return"no value provided"},t.prototype.seriesDate=function(){return"no value provided"},t.prototype.seriesDescription=function(){return"no value provided"},t.prototype.patientID=function(){return"no value provided"},t.prototype.patientName=function(){return"no value provided"},t.prototype.patientAge=function(){return"no value provided"},t.prototype.patientBirthdate=function(){return"no value provided"},t.prototype.patientSex=function(){return"no value provided"},t.prototype.minMaxPixelData=function(){for(var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],e=[_NumberPOSITIVE_INFINITY,_NumberNEGATIVE_INFINITY],n=t.length,i=0,r;i<n;i++){r=t[i];e[0]=_Mathmin(e[0],r),e[1]=_Mathmax(e[1],r)}return e},t}();e.a=r},function(t,e,n){(function(t){function n(t){return Object.prototype.toString.call(t)}e.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===n(t)},e.isBoolean=function(t){return"boolean"==typeof t},e.isNull=function(t){return null===t},e.isNullOrUndefined=function(t){return null==t},e.isNumber=function(t){return"number"==typeof t},e.isString=function(t){return"string"==typeof t},e.isSymbol=function(t){return"symbol"==babelHelpers.typeof(t)},e.isUndefined=function(t){return void 0===t},e.isRegExp=function(t){return"[object RegExp]"===n(t)},e.isObject=function(t){return"object"==babelHelpers.typeof(t)&&null!==t},e.isDate=function(t){return"[object Date]"===n(t)},e.isError=function(t){return"[object Error]"===n(t)||babelHelpers.instanceof(t,Error)},e.isFunction=function(t){return"function"==typeof t},e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==babelHelpers.typeof(t)||void 0===t},e.isBuffer=t.isBuffer}).call(e,n(6).Buffer)},function(t){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e){"use strict";function i(t,e){if(!babelHelpers.instanceof(t,e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(){i(this,t)}return t.matrix4=function(t){return!(null===t||void 0===t||!t.hasOwnProperty("elements")||16!==t.elements.length||"function"!=typeof t.identity||"function"!=typeof t.copy||"function"!=typeof t.determinant)},t.vector3=function(t){return!(!(null!==t&&void 0!==t&&t.hasOwnProperty("x")&&t.hasOwnProperty("y")&&t.hasOwnProperty("z"))||t.hasOwnProperty("w"))},t.box=function(t){return!!(null!==t&&void 0!==t&&t.hasOwnProperty("center")&&this.vector3(t.center)&&t.hasOwnProperty("halfDimensions")&&this.vector3(t.halfDimensions)&&0<=t.halfDimensions.x&&0<=t.halfDimensions.y&&0<=t.halfDimensions.z)},t.ray=function(t){return!!(null!==t&&void 0!==t&&t.hasOwnProperty("position")&&this.vector3(t.position)&&t.hasOwnProperty("direction")&&this.vector3(t.direction))},t}();e.a=r},function(t,e,n){"use strict";(function(e){!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports=function(t,n,i,r){if("function"!=typeof t)throw new TypeError("\"callback\" argument must be a function");var o,a,s=arguments.length;switch(s){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick(function(){t.call(null,n)});case 3:return e.nextTick(function(){t.call(null,n,i)});case 4:return e.nextTick(function(){t.call(null,n,i,r)});default:for(o=Array(s-1),a=0;a<o.length;){o[a++]=arguments[a]}return e.nextTick(function(){t.apply(null,o)});}}:t.exports=e.nextTick}).call(e,n(4))},function(t,e){"use strict";var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;e.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1),n;e.length;){n=e.shift();if(n){if("object"!=babelHelpers.typeof(n))throw new TypeError(n+"must be non-object");for(var i in n){n.hasOwnProperty(i)&&(t[i]=n[i])}}}return t},e.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var r={arraySet:function arraySet(t,e,n,i,r){if(e.subarray&&t.subarray)t.set(e.subarray(n,n+i),r);else for(var o=0;o<i;o++){t[r+o]=e[n+o]}},flattenChunks:function flattenChunks(t){var e,n,i,r,o,a;for(i=0,e=0,n=t.length;e<n;e++){i+=t[e].length}for(a=new Uint8Array(i),r=0,e=0,n=t.length;e<n;e++){o=t[e],a.set(o,r),r+=o.length}return a}},o={arraySet:function arraySet(t,e,n,i,r){for(var o=0;o<i;o++){t[r+o]=e[n+o]}},flattenChunks:function flattenChunks(t){return[].concat.apply([],t)}};e.setTyped=function(t){t?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,r)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,o))},e.setTyped(i)},function(t){"use strict";var i=i||{};i.lossless=i.lossless||{},i.lossless.Utils=i.lossless.Utils||{},i.lossless.Utils.createArray=function(t){var e=Array(t||0),n=t;if(1<arguments.length)for(var r=Array.prototype.slice.call(arguments,1);n--;){e[t-1-n]=i.lossless.Utils.createArray.apply(this,r)}return e},i.lossless.Utils.makeCRCTable=function(){for(var t,e=[],n=0;256>n;n++){t=n;for(var i=0;8>i;i++){t=1&t?3988292384^t>>>1:t>>>1}e[n]=t}return e},i.lossless.Utils.crc32=function(t){for(var e=i.lossless.Utils.crcTable||(i.lossless.Utils.crcTable=i.lossless.Utils.makeCRCTable()),n=-1,r=0;r<t.byteLength;r++){n=n>>>8^e[255&(n^t.getUint8(r))]}return(-1^n)>>>0},"undefined"!==typeof t&&t.exports&&(t.exports=i.lossless.Utils)},function(t,e,n){"use strict";var i={};(0,n(2).assign)(i,n(113),n(116),n(56)),t.exports=i},function(t){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(t){return"function"==typeof t}function r(t){return"number"==typeof t}function o(t){return"object"==babelHelpers.typeof(t)&&null!==t}function a(t){return void 0===t}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if(!r(t)||0>t||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,n,r,s,l,c;if(this._events||(this._events={}),"error"===t&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(babelHelpers.instanceof(e=arguments[1],Error))throw e;var h=new Error("Uncaught, unspecified \"error\" event. ("+e+")");throw h.context=e,h}if(n=this._events[t],a(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s);}else if(o(n))for(s=Array.prototype.slice.call(arguments,1),r=(c=n.slice()).length,l=0;l<r;l++){c[l].apply(this,s)}return!0},n.prototype.addListener=function(t,e){var r;if(!i(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,i(e.listener)?e.listener:e),this._events[t]?o(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,o(this._events[t])&&!this._events[t].warned&&(r=a(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&0<r&&this._events[t].length>r&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){function n(){this.removeListener(t,n),r||(r=!0,e.apply(this,arguments))}if(!i(e))throw TypeError("listener must be a function");var r=!1;return n.listener=e,this.on(t,n),this},n.prototype.removeListener=function(t,e){var n,r,a,s;if(!i(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],a=n.length,r=-1,n===e||i(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(o(n)){for(s=a;0<s--;){if(n[s]===e||n[s].listener&&n[s].listener===e){r=s;break}}if(0>r)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events){"removeListener"!==e&&this.removeAllListeners(e)}return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],i(n))this.removeListener(t,n);else if(n)for(;n.length;){this.removeListener(t,n[n.length-1])}return delete this._events[t],this},n.prototype.listeners=function(t){return this._events&&this._events[t]?i(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(i(e))return 1;if(e)return e.length}return 0},n.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e){"use strict";function i(t,e){if(!babelHelpers.instanceof(t,e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(){i(this,t),this._id=-1}return t.prototype.mergeModels=function(t,e){if(!this._validateModelArray(t)||!this._validateModelArray(e))return window.console.log("invalid inputs provided."),!1;for(var n=0,i=e.length;n<i;n++){for(var r=0,o=t.length;r<o&&!t[r].merge(e[n]);r++){r===t.length-1&&t.push(e[n])}}return!0},t.prototype.merge=function(t){return!!this.validate(t)&&this._id===t._id},t.prototype.validate=function(t){return!(!t||null===t||"function"!=typeof t.merge)},t.prototype._validateModelArray=function(t){if(null===t||Array!==t.constructor)return window.console.log("invalid model array provided."),!1;for(var e=0;e<t.length;e++){if(!t[e]||null===t[e]||"function"!=typeof t[e].validate||!t[e].validate(t[e]))return!1}return!0},t}();e.a=r},function(t,e,n){"use strict";function i(t,e){if(!babelHelpers.instanceof(t,e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=babelHelpers.typeof(e)&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+babelHelpers.typeof(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=n(30),l=n(3),c=n(22),h=function(){function t(t,e){for(var n=0,i;n<e.length;n++){i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=n(122),p=function(t){function e(){i(this,e);var n=r(this,t.call(this));return n._uid=null,n._stackID=-1,n._frame=[],n._numberOfFrames=0,n._rows=0,n._columns=0,n._numberOfChannels=1,n._bitsAllocated=8,n._pixelType=0,n._pixelRepresentation=0,n._textureSize=4096,n._nbTextures=7,n._rawData=[],n._windowCenter=0,n._windowWidth=0,n._rescaleSlope=1,n._rescaleIntercept=0,n._minMax=[_NumberPOSITIVE_INFINITY,_NumberNEGATIVE_INFINITY],n._regMatrix=new a.c,n._ijk2LPS=null,n._lps2IJK=null,n._aabb2LPS=null,n._lps2AABB=null,n._dimensionsIJK=null,n._halfDimensionsIJK=null,n._spacing=new a.f(1,1,1),n._spacingBetweenSlices=0,n._sliceThickness=0,n._origin=null,n._rightHanded=!0,n._xCosine=new a.f(1,0,0),n._yCosine=new a.f(0,1,0),n._zCosine=new a.f(0,0,1),n._prepared=!1,n._packed=!1,n._packedPerPixel=1,n._modality="Modality not set",n._segmentationType=null,n._segmentationSegments=[],n._segmentationDefaultColor=[63,174,128],n._frameSegment=[],n._segmentationLUT=[],n._segmentationLUTO=[],n._invert=!1,n}return o(e,t),e.prototype.prepareSegmentation=function(){this._frameSegment=this._frame;var t=[];this.computeCosines(),this._frame.map(this._computeDistanceArrayMap.bind(null,this._zCosine)),this._frame.sort(this._sortDistanceArraySort);for(var e=-1,n=0;n<this._frame.length;n++){if(t[e]&&t[e]._dist==this._frame[n]._dist)for(var i=0;i<t[e]._rows*t[e]._columns;i++){t[e]._pixelData[i]+=this._frame[n].pixelData[i]*this._frame[n]._referencedSegmentNumber}else{t.push(this._frame[n]),e++;for(var r=0;r<t[e]._rows*t[e]._columns;r++){t[e]._pixelData[r]*=this._frame[n]._referencedSegmentNumber}}t[e].minMax=l.a.minMax(t[e]._pixelData)}for(var o={},a=0,c=0;c<this._segmentationSegments.length;c++){a=_Mathmax(a,parseInt(this._segmentationSegments[c].segmentNumber,10));var h=this._segmentationSegments[c].recommendedDisplayCIELab;o[this._segmentationSegments[c].segmentNumber]=null===h?this._segmentationDefaultColor:s.a.cielab2RGB.apply(s.a,h)}for(var u=0;u<=a;u++){var p=u/a,d=u?1:0,f=[0,0,0];o.hasOwnProperty(u.toString())&&(f=o[u.toString()]),f[0]/=255,f[1]/=255,f[2]/=255,this._segmentationLUT.push([p].concat(f)),this._segmentationLUTO.push([p,d])}this._frame=t},e.prototype.prepare=function(){"SEG"===this._modality&&this.prepareSegmentation(),this.computeNumberOfFrames(),this._rows=this._frame[0].rows,this._columns=this._frame[0].columns,this._dimensionsIJK=new a.f(this._columns,this._rows,this._numberOfFrames),this._halfDimensionsIJK=new a.f(this._dimensionsIJK.x/2,this._dimensionsIJK.y/2,this._dimensionsIJK.z/2),this._spacingBetweenSlices=this._frame[0].spacingBetweenSlices,this._sliceThickness=this._frame[0].sliceThickness,this.computeCosines(),1<this._numberOfFrames&&this.orderFrames(),this.computeSpacing(),this._frame[0].imagePosition||(this._frame[0].imagePosition=[0,0,0]),this._frame[0].imageOrientation||(this._frame[0].imageOrientation=[1,0,0,0,1,0]),this._origin=this._arrayToVector3(this._frame[0].imagePosition,0),this.computeIJK2LPS(),this.computeLPS2AABB();var t=_Mathfloor(this._frame.length/2),e=this._frame[t];this._rescaleSlope=e.rescaleSlope||1,this._rescaleIntercept=e.rescaleIntercept||0,this.computeMinMaxIntensities(),this._minMax[0]=l.a.rescaleSlopeIntercept(this._minMax[0],this._rescaleSlope,this._rescaleIntercept),this._minMax[1]=l.a.rescaleSlopeIntercept(this._minMax[1],this._rescaleSlope,this._rescaleIntercept),this._windowWidth=e.windowWidth||this._minMax[1]-this._minMax[0],this._windowCenter=e.windowCenter||this._minMax[0]+this._windowWidth/2,this._bitsAllocated=e.bitsAllocated,this._prepared=!0},e.prototype.packEchos=function(){for(var t=[],e=0;e<this._frame.length;e+=4){for(var n=this._frame[e],i=0;i<this._rows*this._columns;i++){for(var r=1;4>r;r++){n.pixelData[i]+=this._frame[e+r].pixelData[i]}n.pixelData[i]/=4}t.push(n)}this._frame=t,this._numberOfFrames=this._frame.length,this._dimensionsIJK=new a.f(this._columns,this._rows,this._numberOfFrames),this._halfDimensionsIJK=new a.f(this._dimensionsIJK.x/2,this._dimensionsIJK.y/2,this._dimensionsIJK.z/2)},e.prototype.computeNumberOfFrames=function(){if(!(this._frame&&0<this._frame.length))return window.console.warn("_frame doesn't contain anything...."),window.console.warn(this._frame),!1;this._numberOfFrames=this._frame.length},e.prototype.computeCosines=function(){if(this._frame&&this._frame[0]){var t=this._frame[0].cosines();this._xCosine=t[0],this._yCosine=t[1],this._zCosine=t[2]}},e.prototype.orderFrames=function(){this._frame[0].dimensionIndexValues?this._frame.sort(this._orderFrameOnDimensionIndicesArraySort):this._frame[0].imagePosition&&this._frame[0].imageOrientation&&this._frame[1]&&this._frame[1].imagePosition&&this._frame[1].imageOrientation&&this._frame[0].imagePosition.join()!==this._frame[1].imagePosition.join()?(this._frame.map(this._computeDistanceArrayMap.bind(null,this._zCosine)),this._frame.sort(this._sortDistanceArraySort)):null!==this._frame[0].instanceNumber&&this._frame[1]&&null!==this._frame[1].instanceNumber&&this._frame[0].instanceNumber!==this._frame[1].instanceNumber?this._frame.sort(this._sortInstanceNumberArraySort):this._frame[0].sopInstanceUID&&this._frame[1]&&this._frame[1].sopInstanceUID&&this._frame[0].sopInstanceUID!==this._frame[1].sopInstanceUID?this._frame.sort(this._sortSopInstanceUIDArraySort):window.console.warn("do not know how to order the frames...")},e.prototype.computeSpacing=function(){this.xySpacing(),this.zSpacing()},e.prototype.zSpacing=function(){1<this._numberOfFrames&&(this._frame[0].pixelSpacing&&this._frame[0].pixelSpacing[2]?this._spacing.z=this._frame[0].pixelSpacing[2]:(this._frame.map(this._computeDistanceArrayMap.bind(null,this._zCosine)),this._frame[1].dist!==this._frame[0].dist?(this._frame.sort(this._sortDistanceArraySort),this._spacing.z=this._frame[1].dist-this._frame[0].dist):this._spacingBetweenSlices?this._spacing.z=this._spacingBetweenSlices:this._frame[0].sliceThickness&&(this._spacing.z=this._frame[0].sliceThickness))),0===this._spacing.z&&(this._spacing.z=1)},e.prototype.xySpacing=function(){if(this._frame&&this._frame[0]){var t=this._frame[0].spacingXY();this._spacing.x=t[0],this._spacing.y=t[1]}},e.prototype.computeMinMaxIntensities=function(){for(var t=0,e;t<this._frame.length;t++){e=this._frame[t].minMax[0];_NumberisNaN(e)||(this._minMax[0]=_Mathmin(this._minMax[0],e));var n=this._frame[t].minMax[1];_NumberisNaN(n)||(this._minMax[1]=_Mathmax(this._minMax[1],n))}},e.prototype.computeIJK2LPS=function(){this._ijk2LPS=l.a.ijk2LPS(this._xCosine,this._yCosine,this._zCosine,this._spacing,this._origin,this._regMatrix),this._lps2IJK=new a.c,this._lps2IJK.getInverse(this._ijk2LPS)},e.prototype.computeLPS2AABB=function(){this._aabb2LPS=l.a.aabb2LPS(this._xCosine,this._yCosine,this._zCosine,this._origin),this._lps2AABB=new a.c,this._lps2AABB.getInverse(this._aabb2LPS)},e.prototype.merge=function(t){return!!(this._stackID===t.stackID&&1===this._numberOfFrames&&1===t._numberOfFrames&&this._frame[0].columns===t.frame[0].columns&&this._frame[0].rows===t.frame[0].rows&&this._xCosine.equals(t.xCosine)&&this._yCosine.equals(t.yCosine)&&this._zCosine.equals(t.zCosine))&&this.mergeModels(this._frame,t.frame)},e.prototype.pack=function(){var t=this._dimensionsIJK.x*this._dimensionsIJK.y*this._dimensionsIJK.z;(8===this._bitsAllocated&&1===this._numberOfChannels||1===this._bitsAllocated)&&(this._packedPerPixel=4),16===this._bitsAllocated&&1===this._numberOfChannels&&(this._packedPerPixel=2);var e=this._textureSize*this._textureSize,n=_Mathceil(t/(e*this._packedPerPixel)),i=0,r=this._packedPerPixel*e;r>t&&(r=t);for(var o=0,a;o<n;o++){a=this._packTo8Bits(this._numberOfChannels,this._frame,this._textureSize,i,r);this._textureType=a.textureType,this._rawData.push(a.data),i+=this._packedPerPixel*e,(r+=this._packedPerPixel*e)>t&&(r=t)}this._packed=!0},e.prototype._packTo8Bits=function(t,e,n,i,r){var o={textureType:null,data:null},a=e[0].bitsAllocated,s=e[0].pixelType,l=0;0>this._minMax[0]&&(l-=this._minMax[0]);var c=0,h=0,p=0,d=e[0].rows*e[0].columns;if(8===a&&1===t||1===a){for(var f=new Uint8Array(4*(n*n)),m=0,_=0,g=i;g<r;g++){p=g%d;var y=e[h=~~(g/d)].pixelData[p]+l;_NumberisNaN(y)||(f[4*m+_]=y),c++,m=_Mathfloor(c/4),_=c%4}o.textureType=THREE.RGBAFormat,o.data=f}else if(16===a&&1===t){for(var v=new Uint8Array(4*(n*n)),b=0,w=0,x=i;x<r;x++){p=x%d;var S=e[h=~~(x/d)].pixelData[p]+l;_NumberisNaN(S)||(v[4*b+2*w]=255&S,v[4*b+2*w+1]=255&S>>>8),c++,b=_Mathfloor(c/2),w=c%2}o.textureType=THREE.RGBAFormat,o.data=v}else if(32===a&&1===t&&0===s){for(var E=new Uint8Array(4*(n*n)),M=i;M<r;M++){p=M%d;var T=e[h=~~(M/d)].pixelData[p]+l;_NumberisNaN(T)||(E[4*c]=255&T,E[4*c+1]=255&T>>>8,E[4*c+2]=255&T>>>16,E[4*c+3]=255&T>>>24),c++}o.textureType=THREE.RGBAFormat,o.data=E}else if(32===a&&1===t&&1===s){for(var A=new Uint8Array(4*(n*n)),P=i;P<r;P++){p=P%d;var C=e[h=~~(P/d)].pixelData[p]+l;if(!_NumberisNaN(C)){var I=u(C).match(/.{1,8}/g);A[4*c]=parseInt(I[0],2),A[4*c+1]=parseInt(I[1],2),A[4*c+2]=parseInt(I[2],2),A[4*c+3]=parseInt(I[3],2)}c++}o.textureType=THREE.RGBAFormat,o.data=A}else if(8===a&&3===t){for(var L=new Uint8Array(3*(n*n)),R=i;R<r;R++){h=~~(R/d),p=R%d,L[3*c]=e[h].pixelData[3*p],L[3*c+1]=e[h].pixelData[3*p+1],L[3*c+2]=e[h].pixelData[3*p+2],c++}o.textureType=THREE.RGBFormat,o.data=L}return o},e.prototype.worldCenter=function(){return this._halfDimensionsIJK.clone().addScalar(-.5).applyMatrix4(this._ijk2LPS)},e.prototype.worldBoundingBox=function(){for(var t=[_NumberPOSITIVE_INFINITY,_NumberNEGATIVE_INFINITY,_NumberPOSITIVE_INFINITY,_NumberNEGATIVE_INFINITY,_NumberPOSITIVE_INFINITY,_NumberNEGATIVE_INFINITY],e=this._dimensionsIJK,n=0;n<=e.x;n+=e.x){for(var i=0;i<=e.y;i+=e.y){for(var r=0,o;r<=e.z;r+=e.z){o=new a.f(n,i,r).applyMatrix4(this._ijk2LPS);t=[_Mathmin(t[0],o.x),_Mathmax(t[1],o.x),_Mathmin(t[2],o.y),_Mathmax(t[3],o.y),_Mathmin(t[4],o.z),_Mathmax(t[5],o.z)]}}}return t},e.prototype.AABBox=function(){var t=new a.f().addScalar(-.5).applyMatrix4(this._ijk2LPS).applyMatrix4(this._lps2AABB),e=this._dimensionsIJK.clone().addScalar(-.5).applyMatrix4(this._ijk2LPS).applyMatrix4(this._lps2AABB);return new a.f(_Mathabs(t.x-e.x),_Mathabs(t.y-e.y),_Mathabs(t.z-e.z))},e.prototype.centerAABBox=function(){var t=this.worldCenter();return t.applyMatrix4(this._lps2AABB),t},e.indexInDimensions=function(t,e){return 0<=t.x&&0<=t.y&&0<=t.z&&t.x<e.x&&t.y<e.y&&t.z<e.z},e.prototype._arrayToVector3=function(t,e){return new a.f(t[e],t[e+1],t[e+2])},e.prototype._orderFrameOnDimensionIndicesArraySort=function(t,e){if("dimensionIndexValues"in t&&"[object Array]"===Object.prototype.toString.call(t.dimensionIndexValues)&&"dimensionIndexValues"in e&&"[object Array]"===Object.prototype.toString.call(e.dimensionIndexValues))for(var n=0;n<t.dimensionIndexValues.length;n++){if(parseInt(t.dimensionIndexValues[n],10)>parseInt(e.dimensionIndexValues[n],10))return 1;if(parseInt(t.dimensionIndexValues[n],10)<parseInt(e.dimensionIndexValues[n],10))return-1}else window.console.warn("One of the frames doesn't have a dimensionIndexValues array."),window.console.warn(t),window.console.warn(e);return 0},e.prototype._computeDistanceArrayMap=function(t,e){return e.dist=e.imagePosition[0]*t.x+e.imagePosition[1]*t.y+e.imagePosition[2]*t.z,e},e.prototype._sortDistanceArraySort=function(t,e){return t.dist-e.dist},e.prototype._sortInstanceNumberArraySort=function(t,e){return t.instanceNumber-e.instanceNumber},e.prototype._sortSopInstanceUIDArraySort=function(t,e){return t.sopInstanceUID-e.sopInstanceUID},e.value=function(t,e){return window.console.warn("models.stack.value is deprecated.\n       Please use core.utils.value instead."),l.a.value(t,e)},e.valueRescaleSlopeIntercept=function(t,e,n){return window.console.warn("models.stack.valueRescaleSlopeIntercept is deprecated.\n       Please use core.utils.rescaleSlopeIntercept instead."),l.a.rescaleSlopeIntercept(t,e,n)},e.worldToData=function(t,e){return window.console.warn("models.stack.worldToData is deprecated.\n       Please use core.utils.worldToData instead."),l.a.worldToData(t._lps2IJK,e)},h(e,[{key:"numberOfChannels",set:function set(t){this._numberOfChannels=t},get:function get(){return this._numberOfChannels}},{key:"frame",set:function set(t){this._frame=t},get:function get(){return this._frame}},{key:"prepared",set:function set(t){this._prepared=t},get:function get(){return this._prepared}},{key:"packed",set:function set(t){this._packed=t},get:function get(){return this._packed}},{key:"packedPerPixel",set:function set(t){this._packedPerPixel=t},get:function get(){return this._packedPerPixel}},{key:"dimensionsIJK",set:function set(t){this._dimensionsIJK=t},get:function get(){return this._dimensionsIJK}},{key:"halfDimensionsIJK",set:function set(t){this._halfDimensionsIJK=t},get:function get(){return this._halfDimensionsIJK}},{key:"regMatrix",set:function set(t){this._regMatrix=t},get:function get(){return this._regMatrix}},{key:"ijk2LPS",set:function set(t){this._ijk2LPS=t},get:function get(){return this._ijk2LPS}},{key:"lps2IJK",set:function set(t){this._lps2IJK=t},get:function get(){return this._lps2IJK}},{key:"lps2AABB",set:function set(t){this._lps2AABB=t},get:function get(){return this._lps2AABB}},{key:"textureSize",set:function set(t){this._textureSize=t},get:function get(){return this._textureSize}},{key:"textureType",set:function set(t){this._textureType=t},get:function get(){return this._textureType}},{key:"bitsAllocated",set:function set(t){this._bitsAllocated=t},get:function get(){return this._bitsAllocated}},{key:"rawData",set:function set(t){this._rawData=t},get:function get(){return this._rawData}},{key:"windowWidth",get:function get(){return this._windowWidth},set:function set(t){this._windowWidth=t}},{key:"windowCenter",get:function get(){return this._windowCenter},set:function set(t){this._windowCenter=t}},{key:"rescaleSlope",get:function get(){return this._rescaleSlope},set:function set(t){this._rescaleSlope=t}},{key:"rescaleIntercept",get:function get(){return this._rescaleIntercept},set:function set(t){this._rescaleIntercept=t}},{key:"xCosine",get:function get(){return this._xCosine},set:function set(t){this._xCosine=t}},{key:"yCosine",get:function get(){return this._yCosine},set:function set(t){this._yCosine=t}},{key:"zCosine",get:function get(){return this._zCosine},set:function set(t){this._zCosine=t}},{key:"minMax",get:function get(){return this._minMax},set:function set(t){this._minMax=t}},{key:"stackID",get:function get(){return this._stackID},set:function set(t){this._stackID=t}},{key:"pixelType",get:function get(){return this._pixelType},set:function set(t){this._pixelType=t}},{key:"pixelRepresentation",get:function get(){return this._pixelRepresentation},set:function set(t){this._pixelRepresentation=t}},{key:"invert",set:function set(t){this._invert=t},get:function get(){return this._invert}},{key:"modality",set:function set(t){this._modality=t},get:function get(){return this._modality}},{key:"rightHanded",get:function get(){return this._rightHanded},set:function set(t){this._rightHanded=t}},{key:"spacingBetweenSlices",get:function get(){return this._spacingBetweenSlices},set:function set(t){this._spacingBetweenSlices=t}},{key:"segmentationSegments",set:function set(t){this._segmentationSegments=t},get:function get(){return this._segmentationSegments}},{key:"segmentationType",set:function set(t){this._segmentationType=t},get:function get(){return this._segmentationType}},{key:"segmentationLUT",set:function set(t){this._segmentationLUT=t},get:function get(){return this._segmentationLUT}},{key:"segmentationLUTO",set:function set(t){this._segmentationLUTO=t},get:function get(){return this._segmentationLUTO}}]),e}(c.a);e.a=p},function(t){"use strict";t.exports=function(t){return"string"==typeof t}},function(t,e,n){"use strict";var i=n(127);t.exports=function(t){return i(t)&&0<=t}},function(t,e,n){"use strict";var i=n(24),r=n(25);t.exports=function(t,e){var n,a;if(!i(t))throw new TypeError("invalid input argument. First argument must be a string. Value: `"+t+"`.");if(!r(e))throw new TypeError("invalid input argument. Second argument must be a nonnegative integer. Value: `"+e+"`.");if(0===t.length||0===e)return"";if(t.length*e>9007199254740991)throw new RangeError("invalid input argument. Output string length exceeds maximum allowed string length.");for(n="",a=e;1==(1&a)&&(n+=t),0!=(a>>>=1);){t+=t}return n}},function(t,e,n){function i(t,e){for(var n in t){e[n]=t[n]}}function r(t,e,n){return a(t,e,n)}var o=n(6),a=o.Buffer;a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?t.exports=o:(i(o,e),e.Buffer=r),i(a,r),r.from=function(t,e,n){if("number"==typeof t)throw new TypeError("Argument must not be a number");return a(t,e,n)},r.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError("Argument must be a number");var i=a(t);return void 0!==e?"string"==typeof n?i.fill(e,n):i.fill(e):i.fill(0),i},r.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return a(t)},r.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return o.SlowBuffer(t)}},function(t){"use strict";var i=i||{};i.Utils=i.Utils||{},i.Utils.crcTable=null,i.Utils.GUNZIP_MAGIC_COOKIE1=31,i.Utils.GUNZIP_MAGIC_COOKIE2=139,i.Utils.getStringAt=function(t,e,n){var i,r,o="";for(i=e;i<n;i+=1){0!==(r=t.getUint8(i))&&(o+=_StringfromCharCode(r))}return o},i.Utils.getByteAt=function(t,e){return t.getInt8(e)},i.Utils.getShortAt=function(t,e,n){return t.getInt16(e,n)},i.Utils.getIntAt=function(t,e,n){return t.getInt32(e,n)},i.Utils.getFloatAt=function(t,e,n){return t.getFloat32(e,n)},i.Utils.getDoubleAt=function(t,e,n){return t.getFloat64(e,n)},i.Utils.getLongAt=function(t,e,n){var r,o=[],a=0;for(r=0;8>r;r+=1){o[r]=i.Utils.getByteAt(t,e+r,n)}for(r=o.length-1;0<=r;r--){a=256*a+o[r]}return a},i.Utils.toArrayBuffer=function(t){var e,n,i;for(e=new ArrayBuffer(t.length),n=new Uint8Array(e),i=0;i<t.length;i+=1){n[i]=t[i]}return e},i.Utils.isString=function(t){return"string"==typeof t||babelHelpers.instanceof(t,String)},i.Utils.formatNumber=function(t,e){var n=0;return n=i.Utils.isString(t)?+t:t,n=e?n.toPrecision(5):n.toPrecision(7),parseFloat(n)},i.Utils.makeCRCTable=function(){for(var t,e=[],n=0;256>n;n++){t=n;for(var i=0;8>i;i++){t=1&t?3988292384^t>>>1:t>>>1}e[n]=t}return e},i.Utils.crc32=function(t){for(var e=i.Utils.crcTable||(i.Utils.crcTable=i.Utils.makeCRCTable()),n=-1,r=0;r<t.byteLength;r++){n=n>>>8^e[255&(n^t.getUint8(r))]}return(-1^n)>>>0},"undefined"!==typeof t&&t.exports&&(t.exports=i.Utils)},function(t){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function get(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function get(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e){"use strict";function i(t,e){if(!babelHelpers.instanceof(t,e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(){i(this,t)}return t.cielab2XYZ=function(t,e,n){var i=(t+16)/116,r=e/500+i,o=i-n/200;return i=.008856<_Mathpow(i,3)?_Mathpow(i,3):(i-16/116)/7.787,r=.008856<_Mathpow(r,3)?_Mathpow(r,3):(r-16/116)/7.787,o=.008856<_Mathpow(o,3)?_Mathpow(o,3):(o-16/116)/7.787,[95.047*r,100*i,108.883*o]},t.xyz2RGB=function(t,e,n){var i=3.2406*(t/=100)+-1.5372*(e/=100)+-.4986*(n/=100),r=-.9689*t+1.8758*e+.0415*n,o=.0557*t+-.204*e+1.057*n;return .0031308<i?i=1.055*_Mathpow(i,1/2.4)-.055:i*=12.92,.0031308<r?r=1.055*_Mathpow(r,1/2.4)-.055:r*=12.92,.0031308<o?o=1.055*_Mathpow(o,1/2.4)-.055:o*=12.92,i*=255,r*=255,o*=255,[i,r,o]},t.cielab2RGB=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:50,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;if(!(0<=t&&100>=t))return null;var i=this.cielab2XYZ(t,e,n);return this.xyz2RGB.apply(this,i)},t}();e.a=r},function(t,e,n){"use strict";function i(t,e){if(!babelHelpers.instanceof(t,e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=babelHelpers.typeof(e)&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+babelHelpers.typeof(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(10),s=n(0),l=function(t){function e(n,o,l,c){var h=4<arguments.length&&void 0!==arguments[4]?arguments[4]:new s.c;i(this,e);var u={halfDimensions:n,center:o,toAABB:h},p={position:l,direction:c},d=a.a.aabbPlane(u,p);if(3>d.length)throw window.console.log("WARNING: Less than 3 intersections between AABB and Plane."),window.console.log("AABB"),window.console.log(u),window.console.log("Plane"),window.console.log(p),window.console.log("exiting..."),new Error("geometries.slice has less than 3 intersections, can not create a valid geometry.");var f=e.orderIntersections(d,c),m=e.shape(f),_=r(this,t.call(this,m));return _.type="SliceGeometry",_.vertices=f,_.verticesNeedUpdate=!0,_}return o(e,t),e.shape=function(t){var e=new THREE.Shape;e.moveTo(t[0].xy.x,t[0].xy.y);for(var n=1;n<t.length;n++){e.lineTo(t[n].xy.x,t[n].xy.y)}return e.lineTo(t[0].xy.x,t[0].xy.y),e},e.centerOfMass=function(t){for(var e=new s.f(0,0,0),n=0;n<t.length;n++){e.x+=t[n].x,e.y+=t[n].y,e.z+=t[n].z}return e.divideScalar(t.length),e},e.orderIntersections=function(t,n){for(var i=e.centerOfMass(t),r=new s.f(t[0].x-i.x,t[0].y-i.y,t[0].z-i.z).normalize(),o=new s.f(0,0,0).crossVectors(r,n).normalize(),a=[],l=0,c;l<t.length;l++){c=new s.f(t[l].x,t[l].y,t[l].z);c.direction=new s.f(t[l].x-i.x,t[l].y-i.y,t[l].z-i.z).normalize();var h=r.dot(c.direction),u=o.dot(c.direction);c.xy={x:h,y:u};var p=_Mathatan(u,h)*(180/_MathPI);c.angle=p,a.push(c)}a.sort(function(t,e){return t.angle-e.angle});for(var d=[a[0]],f=1;f<a.length;f++){1e-4<_Mathabs(a[f-1].angle-a[f].angle)&&d.push(a[f])}return d},e}(THREE.ShapeGeometry);e.a=l},function(t,e,n){"use strict";function i(t,e){if(!babelHelpers.instanceof(t,e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=babelHelpers.typeof(e)&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+babelHelpers.typeof(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=function(){function t(t,e){for(var n=0,i;n<e.length;n++){i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=function(t){function e(n){i(this,e);var o=r(this,t.call(this,1,1,1));return o._location=n,o.applyMatrix(new a.c().makeTranslation(o._location.x,o._location.y,o._location.z)),o.verticesNeedUpdate=!0,o}return o(e,t),e.prototype.resetVertices=function(){this.vertices[0].set(.5,.5,.5),this.vertices[1].set(.5,.5,-.5),this.vertices[2].set(.5,-.5,.5),this.vertices[3].set(.5,-.5,-.5),this.vertices[4].set(-.5,.5,-.5),this.vertices[5].set(-.5,.5,.5),this.vertices[6].set(-.5,-.5,-.5),this.vertices[7].set(-.5,-.5,.5)},s(e,[{key:"location",set:function set(t){this._location=t,this.vertices[0].set(.5,.5,.5),this.vertices[1].set(.5,.5,-.5),this.vertices[2].set(.5,-.5,.5),this.vertices[3].set(.5,-.5,-.5),this.vertices[4].set(-.5,.5,-.5),this.vertices[5].set(-.5,.5,.5),this.vertices[6].set(-.5,-.5,-.5),this.vertices[7].set(-.5,-.5,.5),this.applyMatrix(new a.c().makeTranslation(this._location.x,this._location.y,this._location.z)),this.verticesNeedUpdate=!0},get:function get(){return this._location}}]),e}(THREE.BoxGeometry);e.a=l},function(t,e){"use strict";function i(t,e){if(!babelHelpers.instanceof(t,e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=babelHelpers.typeof(e)&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+babelHelpers.typeof(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var n=0,i;n<e.length;n++){i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=function(t){function e(n){i(this,e);var o=r(this,t.call(this));return o._helpersSlice=n,o._visible=!0,o._color=16711680,o._material=null,o._geometry=null,o._mesh=null,o._create(),o}return o(e,t),e.prototype._create=function(){if(this._material||(this._material=new THREE.LineBasicMaterial({color:this._color,linewidth:1})),this._helpersSlice.geometry.vertices){this._geometry=new THREE.Geometry;for(var t=0;t<this._helpersSlice.geometry.vertices.length;t++){this._geometry.vertices.push(this._helpersSlice.geometry.vertices[t])}this._geometry.vertices.push(this._helpersSlice.geometry.vertices[0]),this._mesh=new THREE.Line(this._geometry,this._material),"IJK"===this._helpersSlice.aabbSpace&&this._mesh.applyMatrix(this._helpersSlice.stack.ijk2LPS),this._mesh.visible=this._visible,this.add(this._mesh)}},e.prototype._update=function(){this._mesh&&(this.remove(this._mesh),this._mesh.geometry.dispose(),this._mesh=null),this._create()},e.prototype.dispose=function(){this._mesh.material.dispose(),this._mesh.material=null,this._geometry.dispose(),this._geometry=null,this._material.dispose(),this._material=null},a(e,[{key:"helpersSlice",set:function set(t){this._helpersSlice=t,this._update()},get:function get(){return this._helpersSlice}},{key:"visible",set:function set(t){this._visible=t,this._mesh&&(this._mesh.visible=this._visible)},get:function get(){return this._visible}},{key:"color",set:function set(t){this._color=t,this._material&&this._material.color.set(this._color)},get:function get(){return this._color}}]),e}(THREE.Object3D);e.a=s},function(t,e,n){"use strict";function i(t,e){if(!babelHelpers.instanceof(t,e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=babelHelpers.typeof(e)&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+babelHelpers.typeof(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=function(){function t(t,e){for(var n=0,i;n<e.length;n++){i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=function(t){function e(n){i(this,e);var o=r(this,t.call(this));return o._stack=n,o._visible=!0,o._color=16777215,o._material=null,o._geometry=null,o._mesh=null,o._meshStack=null,o._create(),o}return o(e,t),e.prototype._create=function(){var t=this._stack.dimensionsIJK,e=this._stack.halfDimensionsIJK,n=new a.f(-.5,-.5,-.5),i=new THREE.BoxGeometry(t.x,t.y,t.z);i.applyMatrix(new a.c().makeTranslation(e.x+n.x,e.y+n.y,e.z+n.z)),this._geometry=i,this._material=new THREE.MeshBasicMaterial({wireframe:!0});var r=new THREE.Mesh(this._geometry,null);r.applyMatrix(this._stack.ijk2LPS),r.visible=this._visible,this._meshStack=r,this._mesh=new THREE.BoxHelper(this._meshStack,this._color),this._material=this._mesh.material,this.add(this._mesh)},e.prototype._update=function(){this._mesh&&(this.remove(this._mesh),this._mesh.geometry.dispose(),this._mesh.geometry=null,this._mesh.material.dispose(),this._mesh.material=null,this._mesh=null),this._create()},e.prototype.dispose=function(){this._mesh.material.dispose(),this._mesh.material=null,this._geometry.dispose(),this._geometry=null,this._material.dispose(),this._material=null},s(e,[{key:"visible",set:function set(t){this._visible=t,this._mesh&&(this._mesh.visible=this._visible)},get:function get(){return this._visible}},{key:"color",set:function set(t){this._color=t,this._material&&this._material.color.set(this._color)},get:function get(){return this._color}}]),e}(THREE.Object3D);e.a=l},function(t,e){"use strict";function i(t,e){if(!babelHelpers.instanceof(t,e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(){i(this,t)}return t.uniforms=function(){return{uCanvasWidth:{type:"f",value:0,typeGLSL:"float"},uCanvasHeight:{type:"f",value:0,typeGLSL:"float"},uWidth:{type:"f",value:1,typeGLSL:"float"},uOpacity:{type:"f",value:1,typeGLSL:"float"},uTextureFilled:{type:"t",value:[],typeGLSL:"sampler2D"}}},t}();e.a=r},function(t,e){"use strict";function i(t,e){if(!babelHelpers.instanceof(t,e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(){i(this,t)}return t.prototype.compute=function(){return"\nvarying vec4 vProjectedCoords;\n\n//\n// main\n//\nvoid main() {\n\n  vec4 vPos = modelMatrix * vec4(position, 1.0 );\n  mat4 vProjectionViewMatrix = projectionMatrix * viewMatrix;\n  vProjectedCoords =  projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0 );\n\n}\n        "},t}();e.a=r},function(t,e){"use strict";function i(t,e){if(!babelHelpers.instanceof(t,e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(e){i(this,t),this._uniforms=e,this._functions={},this._main=""}return t.prototype.functions=function(){""===this._main&&this.main();var t="";for(var e in this._functions){t+=this._functions[e]+"\n"}return t},t.prototype.uniforms=function(){var t="";for(var e in this._uniforms){var n=this._uniforms[e];t+="uniform "+n.typeGLSL+" "+e,n&&n.length&&(t+="["+n.length+"]"),t+=";\n"}return t},t.prototype.main=function(){this._main="\n\nfloat luma (vec3 rgb) {\n  return (rgb.r + rgb.g + rgb.b)/3.0;\n}\n\nconst float T = 0.04;\nconst float M = 1.0;\nconst float L = 0.002;\n\nvoid main(void) {\n\n  vec2 texCoord = vec2(((vProjectedCoords.x / vProjectedCoords.w) + 1.0 ) / 2.0,\n                ((vProjectedCoords.y / vProjectedCoords.w) + 1.0 ) / 2.0 );\n\n  float borderWidth = uWidth; // in px\n  float step_u = borderWidth * 1.0 / uCanvasWidth;\n  float step_v = borderWidth * 1.0 / uCanvasHeight;\n  vec4 centerPixel = texture2D(uTextureFilled, texCoord);\n\n  vec4 rightPixel  = texture2D(uTextureFilled, texCoord + vec2(step_u, 0.0));\n  vec4 bottomPixel = texture2D(uTextureFilled, texCoord + vec2(0.0, step_v));\n\n  // now manually compute the derivatives\n  float _dFdX = length(rightPixel - centerPixel) / step_u;\n  float _dFdY = length(bottomPixel - centerPixel) / step_v;\n\n  // gl_FragColor.r = _dFdX;\n  // gl_FragColor.g = _dFdY;\n  gl_FragColor.r = max(max(centerPixel.r, rightPixel.r), bottomPixel.r);\n  gl_FragColor.g = max(max(centerPixel.g, rightPixel.g), bottomPixel.g);\n  gl_FragColor.b = max(max(centerPixel.b, rightPixel.b), bottomPixel.b);\n  float maxDerivative = max(_dFdX, _dFdY);\n  float clampedDerivative = clamp(maxDerivative, 0., 1.);\n  gl_FragColor.a = uOpacity * clampedDerivative;\n\n  return;\n  // float h = 1./uCanvasHeight;\n  // float w = 1./uCanvasWidth;\n  // vec4 n[9];\n  // n[0] = texture2D(uTextureFilled, vProjectedTextCoords + vec2( -w, -h));\n  // n[1] = texture2D(uTextureFilled, vProjectedTextCoords + vec2(0.0, -h));\n  // n[2] = texture2D(uTextureFilled, vProjectedTextCoords + vec2(  w, -h));\n  // n[3] = texture2D(uTextureFilled, vProjectedTextCoords + vec2( -w, 0.0));\n  // n[4] = texture2D(uTextureFilled, vProjectedTextCoords);\n  // n[5] = texture2D(uTextureFilled, texCoord + vec2(  w, 0.0));\n  // n[6] = texture2D(uTextureFilled, texCoord + vec2( -w, h));\n  // n[7] = texture2D(uTextureFilled, texCoord + vec2(0.0, h));\n  // n[8] = texture2D(uTextureFilled, texCoord + vec2(  w, h));\n  // vec4 sobel_horizEdge = n[2] + (2.0*n[5]) + n[8] - (n[0] + (2.0*n[3]) + n[6]);\n  // vec4 sobel_vertEdge  = n[0] + (2.0*n[1]) + n[2] - (n[6] + (2.0*n[7]) + n[8]);\n  // vec3 sobel = sqrt((sobel_horizEdge.rgb * sobel_horizEdge.rgb) + (sobel_vertEdge.rgb * sobel_vertEdge.rgb));\n  // gl_FragColor = vec4( sobel, max(max(sobel.r, sobel.g), sobel.b) );\n\n  // return;\n}\n   "},t.prototype.compute=function(){return"\n// uniforms\n"+this.uniforms()+"\n\n// varying (should fetch it from vertex directly)\nvarying vec4      vProjectedCoords;\n\n// tailored functions\n"+this.functions()+"\n\n// main loop\n"+this._main+"\n      "},t}();e.a=r},function(t,e){"use strict";function i(t,e){if(!babelHelpers.instanceof(t,e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(){i(this,t)}return t.uniforms=function(){return{uCanvasWidth:{type:"f",value:0,typeGLSL:"float"},uCanvasHeight:{type:"f",value:0,typeGLSL:"float"},uSlice:{type:"v4",value:[0,0,0,0],typeGLSL:"vec4"},uPlane1:{type:"v4",value:[0,0,0,0],typeGLSL:"vec4"},uPlaneColor1:{type:"v3",value:[1,1,0],typeGLSL:"vec3"},uPlane2:{type:"v4",value:[0,0,0,0],typeGLSL:"vec4"},uPlaneColor2:{type:"v3",value:[1,1,0],typeGLSL:"vec3"},uPlane3:{type:"v4",value:[0,0,0,0],typeGLSL:"vec4"},uPlaneColor3:{type:"v3",value:[1,1,0],typeGLSL:"vec3"}}},t}();e.a=r},function(t,e){"use strict";function i(t,e){if(!babelHelpers.instanceof(t,e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(){i(this,t)}return t.prototype.compute=function(){return"\nvarying vec4 vPos;\nvarying mat4 vProjectionViewMatrix;\n\n//\n// main\n//\nvoid main() {\n\n  vPos = modelMatrix * vec4(position, 1.0 );\n  vProjectionViewMatrix = projectionMatrix * viewMatrix;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0 );\n\n}\n        "},t}();e.a=r},function(t,e){"use strict";function i(t,e){if(!babelHelpers.instanceof(t,e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(e){i(this,t),this._uniforms=e,this._functions={},this._main=""}return t.prototype.functions=function(){""===this._main&&this.main();var t="";for(var e in this._functions){t+=this._functions[e]+"\n"}return t},t.prototype.uniforms=function(){var t="";for(var e in this._uniforms){var n=this._uniforms[e];t+="uniform "+n.typeGLSL+" "+e,n&&n.length&&(t+="["+n.length+"]"),t+=";\n"}return t},t.prototype.main=function(){this._main="\nvoid intersectionProjection(\n  in vec4 plane,\n  in vec4 slice,\n  out vec3 intersectionProjection){\n\n      vec3 intersectionDirection = normalize(cross(plane.xyz, slice.xyz));\n      vec3 intersectionPoint = \n        cross(intersectionDirection,slice.xyz) * plane.w +\n        cross(plane.xyz, intersectionDirection) * slice.w;\n\n      intersectionProjection =\n        intersectionPoint.xyz +\n        (dot(vPos.xyz - intersectionPoint, intersectionDirection)\n          * intersectionDirection);\n\n}\n\nvoid main(void) {\n      vec4 c1 = vec4(0., 0., 0., 0.);\n      vec4 c2 = vec4(0., 0., 0., 0.);\n      vec4 c3 = vec4(0., 0., 0., 0.);\n\n      // localizer #1\n      // must be normalized!\n      if(length(uPlane1.xyz) > 0.5) {\n        vec3 projection1 = vec3(1.);\n        intersectionProjection(\n          uPlane1,\n          uSlice,\n          projection1\n        );\n\n        vec4 projInter1 = (vProjectionViewMatrix * vec4(projection1, 1.));\n        vec3 ndc1 = projInter1.xyz / projInter1.w;\n        vec2 screenSpace1 = (ndc1.xy * .5 + .5) * vec2(uCanvasWidth, uCanvasHeight);\n\n        float d1 = distance(gl_FragCoord.xy, screenSpace1.xy);\n        c1 = vec4(uPlaneColor1, 1. - smoothstep(.5, .7, d1));\n      }\n\n      // localizer #2\n      if(length(uPlane2.xyz) > 0.5) {\n        vec3 projection2 = vec3(1.);\n        intersectionProjection(\n          uPlane2,\n          uSlice,\n          projection2\n        );\n\n        vec4 projInter2 = (vProjectionViewMatrix * vec4(projection2, 1.));\n        vec3 ndc2 = projInter2.xyz / projInter2.w;\n        vec2 screenSpace2 = (ndc2.xy * .5 + .5) * vec2(uCanvasWidth, uCanvasHeight);\n\n        float d2 = distance(gl_FragCoord.xy, screenSpace2.xy);\n        c2 = vec4(uPlaneColor2, 1. - smoothstep(.5, .7, d2));\n      }\n\n      // localizer #3\n      if(length(uPlane3.xyz) > 0.5) {\n        vec3 projection3 = vec3(1.);\n        intersectionProjection(\n          uPlane3,\n          uSlice,\n          projection3\n        );\n\n        vec4 projInter3 = (vProjectionViewMatrix * vec4(projection3, 1.));\n        vec3 ndc3 = projInter3.xyz / projInter3.w;\n        vec2 screenSpace3 = (ndc3.xy * .5 + .5) * vec2(uCanvasWidth, uCanvasHeight);\n\n        float d3 = distance(gl_FragCoord.xy, screenSpace3.xy);\n        c3 = vec4(uPlaneColor3, 1. - smoothstep(.5, .7, d3));\n      }\n\n      // float uBorderDashLength = 10.0;\n      // float uBorderWidth = 2.0;\n      // float valueX = mod(gl_FragCoord.x, 2. * uBorderDashLength);\n      // float valueY = mod(gl_FragCoord.y, 2. * uBorderDashLength);\n      // if( valueX < uBorderDashLength || valueY < uBorderDashLength ){\n        vec3 colorMix = c1.xyz*c1.w + c2.xyz*c2.w + c3.xyz*c3.w;\n        gl_FragColor = vec4(colorMix, max(max(c1.w, c2.w),c3.w)*0.5);\n        return;\n      // }\n      \n      // gl_FragColor = vec4(0., 0., 0., 0.);\n      // return;\n}\n   "},t.prototype.compute=function(){return"\n// uniforms\n"+this.uniforms()+"\n\n// varying (should fetch it from vertex directly)\nvarying vec4 vPos;\nvarying mat4 vProjectionViewMatrix;\n\n// tailored functions\n"+this.functions()+"\n\n// main loop\n"+this._main+"\n      "},t}();e.a=r},function(t,e){"use strict";function i(t,e){if(!babelHelpers.instanceof(t,e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0,i;n<e.length;n++){i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=function(){function t(e){i(this,t),this._container=e,this._modes={load:{name:"load",color:"#FFF56F"},parse:{name:"parse",color:"#2196F3"}},this.requestAnimationFrameID=null,this._mode=null,this._value=null,this._total=null,this._totalFiles=null,this.init()}return t.prototype.free=function(){var t=this._container.getElementsByClassName("progress container");0<t.length&&t[0].parentNode.removeChild(t[0]),t=null,window.cancelAnimationFrame(this.requestAnimationFrameID)},t.prototype.init=function(){var t=this._domContainer();for(var e in this._modes){if(this._modes.hasOwnProperty(e)){var n=this._domBar(this._modes[e]);t.appendChild(n),n=null}}this._container.appendChild(t),t=null,this.updateUI()},t.prototype.update=function(t,e,n){3<arguments.length&&void 0!==arguments[3]&&arguments[3];this._mode=n,this._value=t,0===e?(this._total=t,this._value=Math.random()*t):this._total=e},t.prototype.updateUI=function(){var t=this;if(this.requestAnimationFrameID=requestAnimationFrame(function(){t.updateUI()}),!(this._modes.hasOwnProperty(this._mode)&&this._modes[this._mode].hasOwnProperty("name")&&this._modes[this._mode].hasOwnProperty("color")))return!1;var e=_Mathround(100*(this._value/this._total)),n=this._modes[this._mode].color,i=this._container.getElementsByClassName("progress "+this._modes[this._mode].name);0<i.length&&(i[0].style.borderColor=n,i[0].style.width=e+"%"),i=null},t.prototype._domContainer=function(){var t=document.createElement("div");return t.classList.add("progress"),t.classList.add("container"),t.style.width="100%",t.style.height="8px",t.style.position="absolute",t.style.backgroundColor="rgba(158, 158, 158, 0.5)",t.style.top="0",t.style.zIndex="1",t},t.prototype._domBar=function(t){if(!t.hasOwnProperty("name")||!t.hasOwnProperty("color"))return window.console.log("Invalid mode provided."),window.console.log(t),!1;var e=document.createElement("div");return e.classList.add(t.name),e.classList.add("progress"),e.style.border="2px solid "+t.color,e.style.width="0%",e},r(t,[{key:"totalFiles",set:function set(t){this._totalFiles=t},get:function get(){return this._totalFiles}}]),t}();e.a=o},function(t,e,n){"use strict";function i(t,e){if(!babelHelpers.instanceof(t,e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=babelHelpers.typeof(e)&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+babelHelpers.typeof(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(31),s=n(43),l=n(44),c=n(45),h=n(48),u=n(0),p=function(){function t(t,e){for(var n=0,i;n<e.length;n++){i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),d=function(t){function e(n){var o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:new u.f(0,0,0),h=3<arguments.length&&void 0!==arguments[3]?arguments[3]:new u.f(0,0,1),p=4<arguments.length&&void 0!==arguments[4]?arguments[4]:"IJK";i(this,e);var d=r(this,t.call(this));return d._stack=n,d._invert=d._stack.invert,d._lut="none",d._lutTexture=null,d._intensityAuto=!0,d._interpolation=1,d._index=o,d._windowWidth=null,d._windowCenter=null,d._rescaleSlope=null,d._rescaleIntercept=null,d._lowerThreshold=null,d._upperThreshold=null,d._canvasWidth=0,d._canvasHeight=0,d._borderColor=null,d._planePosition=a,d._planeDirection=h,d._aaBBspace=p,d._material=null,d._textures=[],d._shadersFragment=c.a,d._shadersVertex=l.a,d._uniforms=s.a.uniforms(),d._geometry=null,d._mesh=null,d._visible=!0,d._init(),d._create(),d}return o(e,t),e.prototype._init=function(){if(this._stack&&this._stack._prepared&&this._stack._packed)if("IJK"===this._aaBBspace)this._halfDimensions=this._stack.halfDimensionsIJK,this._center=new u.f(this._stack.halfDimensionsIJK.x-.5,this._stack.halfDimensionsIJK.y-.5,this._stack.halfDimensionsIJK.z-.5),this._toAABB=new u.c;else{var t=this._stack.AABBox();this._halfDimensions=t.clone().multiplyScalar(.5),this._center=this._stack.centerAABBox(),this._toAABB=this._stack.lps2AABB}},e.prototype._create=function(){if(this._stack&&this._stack.prepared&&this._stack.packed){try{this._geometry=new a.a(this._halfDimensions,this._center,this._planePosition,this._planeDirection,this._toAABB)}catch(t){return window.console.log(t),void window.console.log("invalid slice geometry - exiting...")}this._geometry.vertices&&(this._material||(this._uniforms.uTextureSize.value=this._stack.textureSize,this._uniforms.uDataDimensions.value=[this._stack.dimensionsIJK.x,this._stack.dimensionsIJK.y,this._stack.dimensionsIJK.z],this._uniforms.uWorldToData.value=this._stack.lps2IJK,this._uniforms.uNumberOfChannels.value=this._stack.numberOfChannels,this._uniforms.uPixelType.value=this._stack.pixelType,this._uniforms.uBitsAllocated.value=this._stack.bitsAllocated,this._uniforms.uPackedPerPixel.value=this._stack.packedPerPixel,this._prepareTexture(),this._uniforms.uTextureContainer.value=this._textures,this._createMaterial({side:THREE.DoubleSide})),this.updateIntensitySettings(),this.updateIntensitySettingsUniforms(),this._mesh=new THREE.Mesh(this._geometry,this._material),"IJK"===this._aaBBspace&&this._mesh.applyMatrix(this._stack.ijk2LPS),this._mesh.visible=this._visible,this.add(this._mesh))}},e.prototype.updateIntensitySettings=function(){this._intensityAuto?(this.updateIntensitySetting("windowCenter"),this.updateIntensitySetting("windowWidth"),this.updateIntensitySetting("rescaleSlope"),this.updateIntensitySetting("rescaleIntercept")):(null===this._windowCenter&&(this._windowCenter=this._stack.windowCenter),null===this._windowWidth&&(this._windowWidth=this._stack.windowWidth),null===this._rescaleSlope&&(this._rescaleSlope=this._stack.rescaleSlope),null===this._rescaleIntercept&&(this._rescaleIntercept=this._stack.rescaleIntercept)),null===this._upperThreshold&&(this._upperThreshold=this._stack._minMax[1]),null===this._lowerThreshold&&(this._lowerThreshold=this._stack._minMax[0])},e.prototype.updateIntensitySettingsUniforms=function(){var t=0;0>this._stack._minMax[0]&&(t-=this._stack._minMax[0]),this._uniforms.uRescaleSlopeIntercept.value=[this._rescaleSlope,this._rescaleIntercept],this._uniforms.uWindowCenterWidth.value=[t+this._windowCenter,this._windowWidth],this._uniforms.uLowerUpperThreshold.value=[t+this._lowerThreshold,t+this._upperThreshold],this._uniforms.uInvert.value=!0===this._invert?1:0,this._uniforms.uInterpolation.value=this._interpolation,"none"===this._lut?this._uniforms.uLut.value=0:(this._uniforms.uLut.value=1,this._uniforms.uTextureLUT.value=this._lutTexture)},e.prototype.updateIntensitySetting=function(t){this._stack.frame[this._index]&&this._stack.frame[this._index][t]?this["_"+t]=this._stack.frame[this._index][t]:this["_"+t]=this._stack[t]},e.prototype._update=function(){this._mesh&&(this.remove(this._mesh),this._mesh.geometry.dispose(),this._mesh.geometry=null,this._mesh=null),this._create()},e.prototype.dispose=function(){for(var t=0;t<this._textures.length;t++){this._textures[t].dispose(),this._textures[t]=null}this._textures=null,this._shadersFragment=null,this._shadersVertex=null,this._uniforms=null,this.remove(this._mesh),this._mesh.geometry.dispose(),this._mesh.geometry=null,this._mesh.material.dispose(),this._mesh.material=null,this._mesh=null,this._geometry.dispose(),this._geometry=null,this._material.vertexShader=null,this._material.fragmentShader=null,this._material.uniforms=null,this._material.dispose(),this._material=null,this._stack=null},e.prototype.cartesianEquation=function(){if(!this._geometry||!this._geometry.vertices||3>this._geometry.vertices.length)return new u.g;var t=this._geometry.vertices,e=this._stack.ijk2LPS,n=new u.f(t[0].x,t[0].y,t[0].z).applyMatrix4(e),i=new u.f(t[1].x,t[1].y,t[1].z).applyMatrix4(e),r=new u.f(t[2].x,t[2].y,t[2].z).applyMatrix4(e),o=new u.f,a=new u.f,s=o.subVectors(r,i).cross(a.subVectors(n,i)).normalize();return new u.g(s.x,s.y,s.z,-s.dot(n))},p(e,[{key:"stack",get:function get(){return this._stack},set:function set(t){this._stack=t}},{key:"windowWidth",get:function get(){return this._windowWidth},set:function set(t){this._windowWidth=t,this.updateIntensitySettingsUniforms()}},{key:"windowCenter",get:function get(){return this._windowCenter},set:function set(t){this._windowCenter=t,this.updateIntensitySettingsUniforms()}},{key:"upperThreshold",get:function get(){return this._upperThreshold},set:function set(t){this._upperThreshold=t,this.updateIntensitySettingsUniforms()}},{key:"lowerThreshold",get:function get(){return this._lowerThreshold},set:function set(t){this._lowerThreshold=t,this.updateIntensitySettingsUniforms()}},{key:"rescaleSlope",get:function get(){return this._rescaleSlope},set:function set(t){this._rescaleSlope=t,this.updateIntensitySettingsUniforms()}},{key:"rescaleIntercept",get:function get(){return this._rescaleIntercept},set:function set(t){this._rescaleIntercept=t,this.updateIntensitySettingsUniforms()}},{key:"invert",get:function get(){return this._invert},set:function set(t){this._invert=t,this.updateIntensitySettingsUniforms()}},{key:"lut",get:function get(){return this._lut},set:function set(t){this._lut=t}},{key:"lutTexture",get:function get(){return this._lutTexture},set:function set(t){this._lutTexture=t,this.updateIntensitySettingsUniforms()}},{key:"intensityAuto",get:function get(){return this._intensityAuto},set:function set(t){this._intensityAuto=t,this.updateIntensitySettings(),this.updateIntensitySettingsUniforms()}},{key:"interpolation",get:function get(){return this._interpolation},set:function set(t){this._interpolation=t,this.updateIntensitySettingsUniforms(),this._updateMaterial()}},{key:"index",get:function get(){return this._index},set:function set(t){this._index=t,this._update()}},{key:"planePosition",set:function set(t){this._planePosition=t,this._update()},get:function get(){return this._planePosition}},{key:"planeDirection",set:function set(t){this._planeDirection=t,this._update()},get:function get(){return this._planeDirection}},{key:"halfDimensions",set:function set(t){this._halfDimensions=t},get:function get(){return this._halfDimensions}},{key:"center",set:function set(t){this._center=t},get:function get(){return this._center}},{key:"aabbSpace",set:function set(t){this._aaBBspace=t,this._init()},get:function get(){return this._aaBBspace}},{key:"mesh",set:function set(t){this._mesh=t},get:function get(){return this._mesh}},{key:"geometry",set:function set(t){this._geometry=t},get:function get(){return this._geometry}},{key:"canvasWidth",set:function set(t){this._canvasWidth=t,this._uniforms.uCanvasWidth.value=this._canvasWidth},get:function get(){return this._canvasWidth}},{key:"canvasHeight",set:function set(t){this._canvasHeight=t,this._uniforms.uCanvasHeight.value=this._canvasHeight},get:function get(){return this._canvasHeight}},{key:"borderColor",set:function set(t){this._borderColor=t,this._uniforms.uBorderColor.value=new u.a(t)},get:function get(){return this._borderColor}}]),e}(Object(h.a)(THREE.Object3D));e.a=d},function(t,e,n){"use strict";function i(t,e){if(!babelHelpers.instanceof(t,e))throw new TypeError("Cannot call a class as a function")}var r=n(0),o=function(){function t(){i(this,t)}return t.uniforms=function(){return{uTextureSize:{type:"i",value:0,typeGLSL:"int"},uTextureContainer:{type:"tv",value:[],typeGLSL:"sampler2D",length:7},uDataDimensions:{type:"iv",value:[0,0,0],typeGLSL:"ivec3"},uWorldToData:{type:"m4",value:new r.c,typeGLSL:"mat4"},uWindowCenterWidth:{type:"fv1",value:[0,0],typeGLSL:"float",length:2},uLowerUpperThreshold:{type:"fv1",value:[0,0],typeGLSL:"float",length:2},uRescaleSlopeIntercept:{type:"fv1",value:[0,0],typeGLSL:"float",length:2},uNumberOfChannels:{type:"i",value:1,typeGLSL:"int"},uBitsAllocated:{type:"i",value:8,typeGLSL:"int"},uInvert:{type:"i",value:0,typeGLSL:"int"},uLut:{type:"i",value:0,typeGLSL:"int"},uTextureLUT:{type:"t",value:[],typeGLSL:"sampler2D"},uLutSegmentation:{type:"i",value:0,typeGLSL:"int"},uTextureLUTSegmentation:{type:"t",value:[],typeGLSL:"sampler2D"},uPixelType:{type:"i",value:0,typeGLSL:"int"},uPackedPerPixel:{type:"i",value:1,typeGLSL:"int"},uInterpolation:{type:"i",value:1,typeGLSL:"int"},uCanvasWidth:{type:"f",value:0,typeGLSL:"float"},uCanvasHeight:{type:"f",value:0,typeGLSL:"float"},uBorderColor:{type:"v3",value:[1,0,.5],typeGLSL:"vec3"},uBorderWidth:{type:"f",value:2,typeGLSL:"float"},uBorderMargin:{type:"f",value:2,typeGLSL:"float"},uBorderDashLength:{type:"f",value:10,typeGLSL:"float"}}},t}();e.a=o},function(t,e){"use strict";function i(t,e){if(!babelHelpers.instanceof(t,e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(){i(this,t)}return t.prototype.compute=function(){return"\nvarying vec4 vPos;\n\n//\n// main\n//\nvoid main() {\n\n  vPos = modelMatrix * vec4(position, 1.0 );\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0 );\n\n}\n        "},t}();e.a=r},function(t,e,n){"use strict";function i(t,e){if(!babelHelpers.instanceof(t,e))throw new TypeError("Cannot call a class as a function")}var r=n(46),o=function(){function t(e){i(this,t),this._uniforms=e,this._functions={},this._main=""}return t.prototype.functions=function(){""===this._main&&this.main();var t="";for(var e in this._functions){t+=this._functions[e]+"\n"}return t},t.prototype.uniforms=function(){var t="";for(var e in this._uniforms){var n=this._uniforms[e];t+="uniform "+n.typeGLSL+" "+e,n&&n.length&&(t+="["+n.length+"]"),t+=";\n"}return t},t.prototype.main=function(){this._main="\nvoid main(void) {\n\n  // draw border if slice is cropped\n  // float uBorderDashLength = 10.;\n\n  if( uCanvasWidth > 0. &&\n      ((gl_FragCoord.x > uBorderMargin && (gl_FragCoord.x - uBorderMargin) < uBorderWidth) ||\n       (gl_FragCoord.x < (uCanvasWidth - uBorderMargin) && (gl_FragCoord.x + uBorderMargin) > (uCanvasWidth - uBorderWidth) ))){\n    float valueY = mod(gl_FragCoord.y, 2. * uBorderDashLength);\n    if( valueY < uBorderDashLength && gl_FragCoord.y > uBorderMargin && gl_FragCoord.y < (uCanvasHeight - uBorderMargin) ){\n      gl_FragColor = vec4(uBorderColor, 1.);\n      return;\n    }\n  }\n\n  if( uCanvasHeight > 0. &&\n      ((gl_FragCoord.y > uBorderMargin && (gl_FragCoord.y - uBorderMargin) < uBorderWidth) ||\n       (gl_FragCoord.y < (uCanvasHeight - uBorderMargin) && (gl_FragCoord.y + uBorderMargin) > (uCanvasHeight - uBorderWidth) ))){\n    float valueX = mod(gl_FragCoord.x, 2. * uBorderDashLength);\n    if( valueX < uBorderDashLength && gl_FragCoord.x > uBorderMargin && gl_FragCoord.x < (uCanvasWidth - uBorderMargin) ){\n      gl_FragColor = vec4(uBorderColor, 1.);\n      return;\n    }\n  }\n\n  // get texture coordinates of current pixel\n  vec4 dataCoordinates = uWorldToData * vPos;\n  vec3 currentVoxel = dataCoordinates.xyz;\n  vec4 dataValue = vec4(0., 0., 0., 0.);\n  vec3 gradient = vec3(0., 0., 0.);\n  "+Object(r.a)(this,"currentVoxel","dataValue","gradient")+"\n\n  if(uNumberOfChannels == 1){\n    // rescale/slope\n    float realIntensity = dataValue.r * uRescaleSlopeIntercept[0] + uRescaleSlopeIntercept[1];\n  \n    // threshold\n    if (realIntensity < uLowerUpperThreshold[0] || realIntensity > uLowerUpperThreshold[1]) {\n      discard;\n    }\n  \n    // normalize\n    float windowMin = uWindowCenterWidth[0] - uWindowCenterWidth[1] * 0.5;\n    float normalizedIntensity =\n      ( realIntensity - windowMin ) / uWindowCenterWidth[1];\n    dataValue.r = dataValue.g = dataValue.b = normalizedIntensity;\n    dataValue.a = 1.;\n\n    // apply LUT\n    if(uLut == 1){\n      // should opacity be grabbed there?\n      dataValue = texture2D( uTextureLUT, vec2( normalizedIntensity , 1.0) );\n    }\n  \n    // apply segmentation\n    if(uLutSegmentation == 1){\n      // should opacity be grabbed there?\n      //\n      float textureWidth = 256.;\n      float textureHeight = 128.;\n      float min = 0.;\n      // start at 0!\n      int adjustedIntensity = int(floor(normalizedIntensity + 0.5));\n  \n      // Get row and column in the texture\n      int colIndex = int(mod(float(adjustedIntensity), textureWidth));\n      int rowIndex = int(floor(float(adjustedIntensity)/textureWidth));\n  \n      float texWidth = 1./textureWidth;\n      float texHeight = 1./textureHeight;\n    \n      // Map row and column to uv\n      vec2 uv = vec2(0,0);\n      uv.x = 0.5 * texWidth + (texWidth * float(colIndex));\n      uv.y = 1. - (0.5 * texHeight + float(rowIndex) * texHeight);\n  \n      dataValue = texture2D( uTextureLUTSegmentation, uv );\n    }\n  }\n\n  if(uInvert == 1){\n    dataValue = vec4(1.) - dataValue;\n    // how do we deal with that and opacity?\n    dataValue.a = 1.;\n  }\n\n  gl_FragColor = dataValue;\n}\n   "},t.prototype.compute=function(){return"\n// uniforms\n"+this.uniforms()+"\n\n// varying (should fetch it from vertex directly)\nvarying vec4      vPos;\n\n// tailored functions\n"+this.functions()+"\n\n// main loop\n"+this._main+"\n      "},t}();e.a=o},function(t,e,n){"use strict";var i=n(47),r=n(107);e.a=function(t,e,n,o){switch(t._uniforms.uInterpolation.value){case 0:return i.a.api(t,e,n);case 1:return r.a.api(t,e,n,o);default:return i.a.api(t,e,n);}}},function(t,e,n){"use strict";function i(t,e){if(!babelHelpers.instanceof(t,e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=babelHelpers.typeof(e)&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+babelHelpers.typeof(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(11),s=n(105),l=n(106),c=function(t){function e(){i(this,e);var n=r(this,t.call(this));return n.name="interpolationIdentity",n._currentVoxel="currentVoxel",n._dataValue="dataValue",n}return o(e,t),e.prototype.api=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._base,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this._currentVoxel,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this._dataValue;return this._base=t,this.compute(e,n)},e.prototype.compute=function(t,e){return this.computeDefinition(),this._base._functions[this._name]=this._definition,this._name+"("+t+", "+e+");"},e.prototype.computeDefinition=function(){this._definition="\nvoid "+this._name+"(in vec3 currentVoxel, out vec4 dataValue){\n  // lower bound\n  vec3 rcurrentVoxel = vec3(floor(currentVoxel.x + 0.5 ), floor(currentVoxel.y + 0.5 ), floor(currentVoxel.z + 0.5 ));\n  ivec3 voxel = ivec3(int(rcurrentVoxel.x), int(rcurrentVoxel.y), int(rcurrentVoxel.z));\n\n  vec4 tmp = vec4(0., 0., 0., 0.);\n  int offset = 0;\n\n  "+l.a.api(this._base,"voxel","tmp","offset")+"\n  "+s.a.api(this._base,"tmp","offset","dataValue")+"\n}\n    "},e}(a.a);e.a=new c},function(t,e){"use strict";function i(t,e){if(!babelHelpers.instanceof(t,e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=babelHelpers.typeof(e)&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+babelHelpers.typeof(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.a=function(t){return function(t){function e(){return i(this,e),r(this,t.apply(this,arguments))}return o(e,t),e.prototype._createMaterial=function(t){var e=new this._shadersFragment(this._uniforms),n=new this._shadersVertex,i={uniforms:this._uniforms,vertexShader:n.compute(),fragmentShader:e.compute()},r=Object.assign(t,i);this._material=new THREE.ShaderMaterial(r),this._material.needsUpdate=!0},e.prototype._updateMaterial=function(){var t=new this._shadersFragment(this._uniforms),e=new this._shadersVertex;this._material.vertexShader=e.compute(),this._material.fragmentShader=t.compute(),this._material.needsUpdate=!0},e.prototype._prepareTexture=function(){this._textures=[];for(var t=0,e;t<this._stack._rawData.length;t++){e=new THREE.DataTexture(this._stack.rawData[t],this._stack.textureSize,this._stack.textureSize,this._stack.textureType,THREE.UnsignedByteType,THREE.UVMapping,THREE.ClampToEdgeWrapping,THREE.ClampToEdgeWrapping,THREE.NearestFilter,THREE.NearestFilter);e.needsUpdate=!0,e.flipY=!0,this._textures.push(e)}},e}(t)}},function(t,e,n){"use strict";function i(t,e){if(!babelHelpers.instanceof(t,e))throw new TypeError("Cannot call a class as a function")}var r=n(0),o=function(){function t(){i(this,t)}return t.uniforms=function(){return{uTextureSize:{type:"i",value:0,typeGLSL:"int"},uTextureContainer:{type:"tv",value:[],typeGLSL:"sampler2D",length:7},uDataDimensions:{type:"iv",value:[0,0,0],typeGLSL:"ivec3"},uWorldToData:{type:"m4",value:new r.c,typeGLSL:"mat4"},uWindowCenterWidth:{type:"fv1",value:[0,0],typeGLSL:"float",length:2},uRescaleSlopeIntercept:{type:"fv1",value:[0,0],typeGLSL:"float",length:2},uNumberOfChannels:{type:"i",value:1,typeGLSL:"int"},uBitsAllocated:{type:"i",value:8,typeGLSL:"int"},uInvert:{type:"i",value:0,typeGLSL:"int"},uLut:{type:"i",value:0,typeGLSL:"int"},uTextureLUT:{type:"t",value:[],typeGLSL:"sampler2D"},uPixelType:{type:"i",value:0,typeGLSL:"int"},uPackedPerPixel:{type:"i",value:1,typeGLSL:"int"},uInterpolation:{type:"i",value:1,typeGLSL:"int"},uWorldBBox:{type:"fv1",value:[0,0,0,0,0,0],typeGLSL:"float",length:6},uSteps:{type:"i",value:256,typeGLSL:"int"},uAlphaCorrection:{type:"f",value:.5,typeGLSL:"float"},uFrequence:{type:"f",value:0,typeGLSL:"float"},uAmplitude:{type:"f",value:0,typeGLSL:"float"},uShading:{type:"i",value:1,typeGLSL:"int"},uAmbient:{type:"f",value:.1,typeGLSL:"float"},uAmbientColor:{type:"v3",value:[1,1,0],typeGLSL:"vec3"},uSampleColorToAmbient:{type:"i",value:1,typeGLSL:"int"},uSpecular:{type:"f",value:1,typeGLSL:"float"},uSpecularColor:{type:"v3",value:[1,1,1],typeGLSL:"vec3"},uDiffuse:{type:"f",value:.3,typeGLSL:"float"},uDiffuseColor:{type:"v3",value:[1,1,0],typeGLSL:"vec3"},uSampleColorToDiffuse:{type:"i",value:1,typeGLSL:"int"},uShininess:{type:"f",value:5,typeGLSL:"float"},uLightPosition:{type:"v3",value:[0,0,0],typeGLSL:"vec3"},uLightPositionInCamera:{type:"i",value:1,typeGLSL:"int"},uIntensity:{type:"v3",value:[.8,.8,.8],typeGLSL:"vec3"},uAlgorithm:{type:"i",value:0,typeGLSL:"int"}}},t}();e.a=o},function(t,e){"use strict";function i(t,e){if(!babelHelpers.instanceof(t,e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(){i(this,t)}return t.prototype.compute=function(){return"\nvarying vec4 vPos;\n\n//\n// main\n//\nvoid main() {\n\n  vPos = modelMatrix * vec4(position, 1.0 );\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0 );\n\n}\n        "},t}();e.a=r},function(t,e,n){"use strict";function i(t,e){if(!babelHelpers.instanceof(t,e))throw new TypeError("Cannot call a class as a function")}var r=n(46),o=n(110),a=function(){function t(e){i(this,t),this._uniforms=e,this._functions={},this._main=""}return t.prototype.functions=function(){""===this._main&&this.main();var t="";for(var e in this._functions){t+=this._functions[e]+"\n"}return t},t.prototype.uniforms=function(){var t="";for(var e in this._uniforms){var n=this._uniforms[e];t+="uniform "+n.typeGLSL+" "+e,n&&n.length&&(t+="["+n.length+"]"),t+=";\n"}return t},t.prototype.main=function(){this._main="\nvoid getIntensity(in vec3 dataCoordinates, out float intensity, out vec3 gradient){\n\n  vec4 dataValue = vec4(0., 0., 0., 0.);\n  "+Object(r.a)(this,"dataCoordinates","dataValue","gradient")+"\n\n  intensity = dataValue.r;\n\n  // rescale/slope\n  intensity = intensity*uRescaleSlopeIntercept[0] + uRescaleSlopeIntercept[1];\n  // window level\n  float windowMin = uWindowCenterWidth[0] - uWindowCenterWidth[1] * 0.5;\n  intensity = ( intensity - windowMin ) / uWindowCenterWidth[1];\n}\n\nmat4 inverse(mat4 m) {\n  float\n    a00 = m[0][0], a01 = m[0][1], a02 = m[0][2], a03 = m[0][3],\n    a10 = m[1][0], a11 = m[1][1], a12 = m[1][2], a13 = m[1][3],\n    a20 = m[2][0], a21 = m[2][1], a22 = m[2][2], a23 = m[2][3],\n    a30 = m[3][0], a31 = m[3][1], a32 = m[3][2], a33 = m[3][3],\n\n    b00 = a00 * a11 - a01 * a10,\n    b01 = a00 * a12 - a02 * a10,\n    b02 = a00 * a13 - a03 * a10,\n    b03 = a01 * a12 - a02 * a11,\n    b04 = a01 * a13 - a03 * a11,\n    b05 = a02 * a13 - a03 * a12,\n    b06 = a20 * a31 - a21 * a30,\n    b07 = a20 * a32 - a22 * a30,\n    b08 = a20 * a33 - a23 * a30,\n    b09 = a21 * a32 - a22 * a31,\n    b10 = a21 * a33 - a23 * a31,\n    b11 = a22 * a33 - a23 * a32,\n\n    det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  return mat4(\n    a11 * b11 - a12 * b10 + a13 * b09,\n    a02 * b10 - a01 * b11 - a03 * b09,\n    a31 * b05 - a32 * b04 + a33 * b03,\n    a22 * b04 - a21 * b05 - a23 * b03,\n    a12 * b08 - a10 * b11 - a13 * b07,\n    a00 * b11 - a02 * b08 + a03 * b07,\n    a32 * b02 - a30 * b05 - a33 * b01,\n    a20 * b05 - a22 * b02 + a23 * b01,\n    a10 * b10 - a11 * b08 + a13 * b06,\n    a01 * b08 - a00 * b10 - a03 * b06,\n    a30 * b04 - a31 * b02 + a33 * b00,\n    a21 * b02 - a20 * b04 - a23 * b00,\n    a11 * b07 - a10 * b09 - a12 * b06,\n    a00 * b09 - a01 * b07 + a02 * b06,\n    a31 * b01 - a30 * b03 - a32 * b00,\n    a20 * b03 - a21 * b01 + a22 * b00) / det;\n}\n\n/**\n * Adapted from original sources\n * \n * Original code: \n * http://jamie-wong.com/2016/07/15/ray-marching-signed-distance-functions/\n * https://www.shadertoy.com/view/lt33z7\n * \n * The vec3 returned is the RGB color of the light's contribution.\n *\n * k_a: Ambient color\n * k_d: Diffuse color\n * k_s: Specular color\n * alpha: Shininess coefficient\n * p: position of point being lit\n * eye: the position of the camera\n * lightPos: the position of the light\n * lightIntensity: color/intensity of the light\n *\n * See https://en.wikipedia.org/wiki/Phong_reflection_model#Description\n */\nvec3 phongShading(vec3 k_a, vec3 k_d, vec3 k_s, float shininess, vec3 p, vec3 eye,\n  vec3 lightPos, vec3 lightIntensity, vec3 normal) {\n  vec3 N = normal;\n  vec3 L = lightPos - p;\n  if (length(L) > 0.) {\n    L = L / length(L);\n  }\n  vec3 V = eye - p;\n  if (length(V) > 0.) {\n    V = V / length(V);\n  }\n  vec3 R = reflect(-L, N);\n  if (length(R) > 0.) {\n    R = R / length(R);\n  }\n\n  // https://en.wikipedia.org/wiki/Blinn%E2%80%93Phong_shading_model\n  vec3 h = L + V;\n  vec3 H = h;\n  if (length(h) > 0.) {\n    H = H / length(h);\n  }\n\n  float dotLN = dot(L, N);\n  float dotRV = dot(R, V);\n\n  if (dotLN < 0.) {\n    // Light not visible from this point on the surface\n    return k_a;\n  } \n\n  if (dotRV < 0.) {\n    // Light reflection in opposite direction as viewer, apply only diffuse\n    // component\n    return k_a + lightIntensity * (k_d * dotLN);\n  }\n\n  float specAngle = max(dot(H, normal), 0.0);\n  float specular = pow(dotRV, shininess); //pow(specAngle, shininess); // \n  return k_a + lightIntensity * (k_d * dotLN  + k_s * specular);\n}\n\n\nfloat PHI = 1.61803398874989484820459 * 00000.1; // Golden Ratio   \nfloat PI  = 3.14159265358979323846264 * 00000.1; // PI\nfloat SRT = 1.41421356237309504880169 * 10000.0; // Square Root of Two\n\n// Gold Noise function ?  Should use a texture\n//\nfloat gold_noise(in vec2 coordinate, in float seed)\n{\n    return fract(sin(dot(coordinate*seed, vec2(PHI, PI)))*SRT);\n}\n\nvoid main(void) {\n  const int maxSteps = 1024;\n\n  // the ray\n  vec3 rayOrigin = cameraPosition;\n  vec3 rayDirection = normalize(vPos.xyz - rayOrigin);\n\n  vec3 lightOrigin = uLightPositionInCamera == 1 ? cameraPosition : uLightPosition;\n\n  // the Axe-Aligned B-Box\n  vec3 AABBMin = vec3(uWorldBBox[0], uWorldBBox[2], uWorldBBox[4]);\n  vec3 AABBMax = vec3(uWorldBBox[1], uWorldBBox[3], uWorldBBox[5]);\n\n  // Intersection ray/bbox\n  float tNear, tFar;\n  bool intersect = false;\n  "+o.a.api(this,"rayOrigin","rayDirection","AABBMin","AABBMax","tNear","tFar","intersect")+"\n  if (tNear < 0.0) tNear = 0.0;\n\n  // init the ray marching\n  float tCurrent = tNear;\n  float tStep = (tFar - tNear) / float(uSteps);\n  vec4 accumulatedColor = vec4(0.0);\n  float accumulatedAlpha = 0.0;\n\n  // MIP volume rendering\n  float maxIntensity = 0.0;\n\n  mat4 dataToWorld = inverse(uWorldToData);\n\n  // rayOrigin -= rayDirection * 0.1; // gold_noise(vPos.xz, vPos.y) / 100.;  \n\n  for(int rayStep = 0; rayStep < maxSteps; rayStep++){\n    vec3 currentPosition = rayOrigin + rayDirection * tCurrent;\n    // some non-linear FUN\n    // some occlusion issue to be fixed\n    vec3 transformedPosition = currentPosition; //transformPoint(currentPosition, uAmplitude, uFrequence);\n    // world to data coordinates\n    // rounding trick\n    // first center of first voxel in data space is CENTERED on (0,0,0)\n    vec4 dataCoordinatesRaw = uWorldToData * vec4(transformedPosition, 1.0);\n    vec3 currentVoxel = vec3(dataCoordinatesRaw.x, dataCoordinatesRaw.y, dataCoordinatesRaw.z);\n    float intensity = 0.0;\n    vec3 gradient = vec3(0., 0., 0.);\n    getIntensity(currentVoxel, intensity, gradient);\n    // map gradient to world space and normalize before using\n    // we avoid to call \"normalize\" as it may be undefined if vector length == 0.\n    gradient = (vec3(dataToWorld * vec4(gradient, 0.)));\n    if (length(gradient) > 0.0) {\n      gradient = normalize(gradient);\n    }\n\n    vec4 colorSample;\n    float alphaSample;\n    if(uLut == 1){\n      vec4 colorFromLUT = texture2D( uTextureLUT, vec2( intensity, 1.0) );\n      // 256 colors\n      colorSample = colorFromLUT;\n      alphaSample = colorFromLUT.a;\n    }\n    else{\n      alphaSample = intensity;\n      colorSample.r = colorSample.g = colorSample.b = intensity;\n    }\n\n    // ray marching algorithm\n    // shading on\n    // interpolation on\n    if (uAlgorithm == 0 && uShading == 1 && uInterpolation != 0) {\n      //  && alphaSample > .3\n      vec3 ambientComponent = uSampleColorToAmbient == 1 ? colorSample.xyz : uAmbientColor;\n      ambientComponent *= uAmbient;\n      vec3 diffuseComponent = uSampleColorToDiffuse == 1 ? colorSample.xyz : uDiffuseColor;\n      diffuseComponent *= uDiffuse;\n      vec3 specularComponent = uSpecular * uSpecularColor;\n      float shininess = uShininess;\n      vec3 vIntensity = uIntensity;\n\n      colorSample.xyz += phongShading(\n        ambientComponent,\n        diffuseComponent,\n        specularComponent,\n        shininess,\n        currentPosition.xyz,\n        rayOrigin.xyz,\n        lightOrigin.xyz,\n        vIntensity,\n        gradient);\n    }\n\n    alphaSample = 1.0 - pow((1.0- alphaSample),tStep*uAlphaCorrection);\n    alphaSample *= (1.0 - accumulatedAlpha);\n\n    accumulatedColor += alphaSample * colorSample;\n    accumulatedAlpha += alphaSample;\n\n    tCurrent += tStep;\n\n    if (tCurrent > tFar || (uAlgorithm == 0 && accumulatedAlpha >= 1.0)) break;\n\n    if (uAlgorithm == 1 && (intensity >= maxIntensity)) {\n      maxIntensity = intensity;\n      accumulatedColor = colorSample;\n      accumulatedAlpha = 1.;\n    }\n  }\n\n  gl_FragColor = vec4(accumulatedColor.xyz, accumulatedAlpha);\n}\n   "},t.prototype.compute=function(){return"\n// uniforms\n"+this.uniforms()+"\n\n// varying (should fetch it from vertex directly)\nvarying vec4      vPos;\n\n// tailored functions\n"+this.functions()+"\n\n// main loop\n"+this._main+"\n      "},t}();e.a=a},function(t){"use strict";t.exports=function(t,e,n,i){for(var r=0|65535&t,o=0|65535&t>>>16,a=0;0!==n;){n-=a=2e3<n?2e3:n;do{o=0|o+(r=0|r+e[i++])}while(--a);r%=65521,o%=65521}return 0|(r|o<<16)}},function(t){"use strict";var i=function(){for(var t,e=[],n=0;256>n;n++){t=n;for(var i=0;8>i;i++){t=1&t?3988292384^t>>>1:t>>>1}e[n]=t}return e}();t.exports=function(t,e,n,r){t^=-1;for(var s=r;s<r+n;s++){t=t>>>8^i[255&(t^e[s])]}return-1^t}},function(t,e,n){"use strict";function i(t,e){if(65537>e&&(t.subarray&&a||!t.subarray&&o))return _StringfromCharCode.apply(null,r.shrinkBuf(t,e));for(var n="",i=0;i<e;i++){n+=_StringfromCharCode(t[i])}return n}var r=n(2),o=!0,a=!0;try{_StringfromCharCode.apply(null,[0])}catch(t){o=!1}try{_StringfromCharCode.apply(null,new Uint8Array(1))}catch(t){a=!1}for(var s=new r.Buf8(256),l=0;256>l;l++){s[l]=252<=l?6:248<=l?5:240<=l?4:224<=l?3:192<=l?2:1}s[254]=s[254]=1,e.string2buf=function(t){var e,n,i,o,a,s=t.length,l=0;for(o=0;o<s;o++){55296==(64512&(n=t.charCodeAt(o)))&&o+1<s&&56320==(64512&(i=t.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(i-56320),o++),l+=128>n?1:2048>n?2:65536>n?3:4}for(e=new r.Buf8(l),a=0,o=0;a<l;o++){55296==(64512&(n=t.charCodeAt(o)))&&o+1<s&&56320==(64512&(i=t.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(i-56320),o++),128>n?e[a++]=n:2048>n?(e[a++]=192|n>>>6,e[a++]=128|63&n):65536>n?(e[a++]=224|n>>>12,e[a++]=128|63&n>>>6,e[a++]=128|63&n):(e[a++]=240|n>>>18,e[a++]=128|63&n>>>12,e[a++]=128|63&n>>>6,e[a++]=128|63&n)}return e},e.buf2binstring=function(t){return i(t,t.length)},e.binstring2buf=function(t){for(var e=new r.Buf8(t.length),n=0,i=e.length;n<i;n++){e[n]=t.charCodeAt(n)}return e},e.buf2string=function(t,e){var n,r,o,a,l=e||t.length,c=Array(2*l);for(r=0,n=0;n<l;){if(128>(o=t[n++]))c[r++]=o;else if(4<(a=s[o]))c[r++]=65533,n+=a-1;else{for(o&=2===a?31:3===a?15:7;1<a&&n<l;){o=o<<6|63&t[n++],a--}1<a?c[r++]=65533:65536>o?c[r++]=o:(o-=65536,c[r++]=55296|1023&o>>10,c[r++]=56320|1023&o)}}return i(c,r)},e.utf8border=function(t,e){var n;for((e=e||t.length)>t.length&&(e=t.length),n=e-1;0<=n&&128==(192&t[n]);){n--}return 0>n?e:0===n?e:n+s[t[n]]>e?n:e}},function(t){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},function(t){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(t,e,n){"use strict";function i(t,e){if(!babelHelpers.instanceof(t,e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=babelHelpers.typeof(e)&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+babelHelpers.typeof(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(22),s=function(){function t(t,e){for(var n=0,i;n<e.length;n++){i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=function(t){function e(){i(this,e);var n=r(this,t.call(this));return n._concatenationUID=-1,n._seriesInstanceUID=-1,n._transferSyntaxUID="",n._seriesNumber=-1,n._seriesDescription="",n._seriesDate="",n._studyDescription="",n._studyDate="",n._accessionNumber=-1,n._modality="Modality not set",n._dimensionIndexSequence=[],n._numberOfFrames=0,n._numberOfChannels=1,n._patientID="",n._patientName="",n._patientAge="",n._patientBirthdate="",n._patientSex="",n._segmentationType=null,n._segmentationSegments=[],n._stack=[],n}return o(e,t),e.prototype.validate=function(e){return!!(t.prototype.validate.call(this,e)&&"function"==typeof e.mergeSeries&&e.hasOwnProperty("_seriesInstanceUID")&&e.hasOwnProperty("_numberOfFrames")&&e.hasOwnProperty("_numberOfChannels")&&e.hasOwnProperty("_stack")&&void 0!==e._stack&&Array===e._stack.constructor)},e.prototype.merge=function(t){return!!this.validate(t)&&this._seriesInstanceUID===t.seriesInstanceUID&&(t.stack[0]&&(0===this._stack[0]._numberOfFrames&&this._stack[0].computeNumberOfFrames(),this._stack[0].computeCosines(),0===t.stack[0]._numberOfFrames&&t.stack[0].computeNumberOfFrames(),t.stack[0].computeCosines()),this.mergeModels(this._stack,t.stack))},e.prototype.mergeSeries=function(t){var e=[this];return this.mergeModels(e,t),e},s(e,[{key:"seriesInstanceUID",set:function set(t){this._seriesInstanceUID=t},get:function get(){return this._seriesInstanceUID}},{key:"transferSyntaxUID",set:function set(t){this._transferSyntaxUID=t},get:function get(){return this._transferSyntaxUID}},{key:"transferSyntaxUIDLabel",get:function get(){switch(this._transferSyntaxUID){case"1.2.840.10008.1.2.4.90":return"JPEG 2000 Lossless";case"1.2.840.10008.1.2.4.91":return"JPEG 2000 Lossy";case"1.2.840.10008.1.2.4.57":return"JPEG Lossless, Nonhierarchical (Processes 14)";case"1.2.840.10008.1.2.4.70":return"JPEG Lossless, Nonhierarchical (Processes 14 [Selection 1])";case"1.2.840.10008.1.2.4.50":return"JPEG Baseline lossy process 1 (8 bit)";case"1.2.840.10008.1.2.4.51":return"JPEG Baseline lossy process 2 & 4 (12 bit)";case"1.2.840.10008.1.2":return"Implicit VR Little Endian";case"1.2.840.10008.1.2.1":return"Explicit VR Little Endian";case"1.2.840.10008.1.2.2":return"Explicit VR Big Endian";default:return"Unknown transfersyntax: "+this._transferSyntaxUID;}}},{key:"studyDate",set:function set(t){this._studyDate=t},get:function get(){return this._studyDate}},{key:"studyDescription",set:function set(t){this._studyDescription=t},get:function get(){return this._studyDescription}},{key:"seriesDate",set:function set(t){this._seriesDate=t},get:function get(){return this._seriesDate}},{key:"seriesDescription",set:function set(t){this._seriesDescription=t},get:function get(){return this._seriesDescription}},{key:"patientID",set:function set(t){this._patientID=t},get:function get(){return this._patientID}},{key:"patientName",set:function set(t){this._patientName=t},get:function get(){return this._patientName}},{key:"patientAge",set:function set(t){this._patientAge=t},get:function get(){return this._patientAge}},{key:"patientBirthdate",set:function set(t){this._patientBirthdate=t},get:function get(){return this._patientBirthdate}},{key:"patientSex",set:function set(t){this._patientSex=t},get:function get(){return this._patientSex}},{key:"numberOfFrames",set:function set(t){this._numberOfFrames=t},get:function get(){return this._numberOfFrames}},{key:"numberOfChannels",set:function set(t){this._numberOfChannels=t},get:function get(){return this._numberOfChannels}},{key:"stack",set:function set(t){this._stack=t},get:function get(){return this._stack}},{key:"modality",set:function set(t){this._modality=t},get:function get(){return this._modality}},{key:"segmentationType",set:function set(t){this._segmentationType=t},get:function get(){return this._segmentationType}},{key:"segmentationSegments",set:function set(t){this._segmentationSegments=t},get:function get(){return this._segmentationSegments}}]),e}(a.a);e.a=l},function(t){"use strict";t.exports=_Mathfloor},function(t){"use strict";t.exports=_Mathceil},function(t,e,n){"use strict";function i(t,e){if(!babelHelpers.instanceof(t,e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=babelHelpers.typeof(e)&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+babelHelpers.typeof(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(22),s=n(0),l=function(){function t(t,e){for(var n=0,i;n<e.length;n++){i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),c=function(t){function e(){i(this,e);var n=r(this,t.call(this));return n._sopInstanceUID=null,n._url=null,n._stackID=-1,n._invert=!1,n._frameTime=null,n._rows=0,n._columns=0,n._dimensionIndexValues=[],n._imagePosition=null,n._imageOrientation=null,n._rightHanded=!0,n._sliceThickness=1,n._spacingBetweenSlices=null,n._pixelPaddingValue=null,n._pixelRepresentation=0,n._pixelType=0,n._pixelSpacing=null,n._pixelAspectRatio=null,n._pixelData=null,n._instanceNumber=null,n._windowCenter=null,n._windowWidth=null,n._rescaleSlope=null,n._rescaleIntercept=null,n._bitsAllocated=8,n._numberOfChannels=1,n._minMax=null,n._dist=null,n._index=-1,n._referencedSegmentNumber=-1,n}return o(e,t),e.prototype.validate=function(e){return!!(t.prototype.validate.call(this,e)&&"function"==typeof e.cosines&&"function"==typeof e.spacingXY&&e.hasOwnProperty("_sopInstanceUID")&&e.hasOwnProperty("_dimensionIndexValues")&&e.hasOwnProperty("_imageOrientation")&&e.hasOwnProperty("_imagePosition"))},e.prototype.merge=function(t){return!!this.validate(t)&&!!(this._compareArrays(this._dimensionIndexValues,t.dimensionIndexValues)&&this._compareArrays(this._imageOrientation,t.imageOrientation)&&this._compareArrays(this._imagePosition,t.imagePosition)&&this._instanceNumber===t.instanceNumber&&this._sopInstanceUID===t.sopInstanceUID)},e.prototype.cosines=function(){var t=[new s.f(1,0,0),new s.f(0,1,0),new s.f(0,0,1)];if(this._imageOrientation&&6===this._imageOrientation.length){var e=new s.f(this._imageOrientation[0],this._imageOrientation[1],this._imageOrientation[2]),n=new s.f(this._imageOrientation[3],this._imageOrientation[4],this._imageOrientation[5]);0<e.length()&&0<n.length()&&(t[0]=e,t[1]=n,t[2]=new s.f(0,0,0).crossVectors(t[0],t[1]).normalize())}else window.console.log("No valid image orientation for frame"),window.console.log(this),window.console.log("Returning default orientation.");return this._rightHanded||t[2].negate(),t},e.prototype.spacingXY=function(){var t=[1,1];return this.pixelSpacing?(t[0]=this.pixelSpacing[0],t[1]=this.pixelSpacing[1]):this.pixelAspectRatio&&(t[0]=1,t[1]=1*this.pixelAspectRatio[1]/this.pixelAspectRatio[0]),t},e.prototype.getPixelData=function(t,e){return this.pixelData[t+this._columns*e]},e.prototype.setPixelData=function(t,e,n){this.pixelData[t+this._columns*e]=n},e.prototype.getImageDataUrl=function(){var t=document.createElement("canvas");t.width=this._columns,t.height=this._rows;var e=t.getContext("2d"),n=e.createImageData(t.width,t.height);return n.data.set(this._frameToCanvas()),e.putImageData(n,0,0),t.toDataURL()},e.prototype._frameToCanvas=function(){var t=this._columns*this._rows,e={invert:this._invert,min:this._minMax[0],padding:this._pixelPaddingValue},n=new Uint8Array(4*t);if(null!==e.padding){e.min=this._minMax[1];for(var i=0,r=this._pixelData.length;i<r;i++){this._pixelData[i]!==e.padding&&(e.min=_Mathmin(e.min,this._pixelData[i]))}}if(this._windowWidth&&null!==this._windowCenter){var o=this._rescaleIntercept||0,a=this._rescaleSlope||1;e.min=_Mathmax((this._windowCenter-this._windowWidth/2-o)/a,e.min),e.max=_Mathmin((this._windowCenter+this._windowWidth/2-o)/a,this._minMax[1])}else e.max=this._minMax[1];if(e.range=e.max-e.min||255,1===this._numberOfChannels)for(var s=0,l;s<t;s++){l=this._pixelTo8Bit(this._pixelData[s],e);n[4*s]=l,n[4*s+1]=l,n[4*s+2]=l,n[4*s+3]=255}else if(3===this._numberOfChannels)for(var c=0;c<t;c++){n[4*c]=this._pixelTo8Bit(this._pixelData[3*c],e),n[4*c+1]=this._pixelTo8Bit(this._pixelData[3*c+1],e),n[4*c+2]=this._pixelTo8Bit(this._pixelData[3*c+2],e),n[4*c+3]=255}return n},e.prototype._pixelTo8Bit=function(t,e){var n=t<=e.min||t===e.padding?0:255;return t>e.min&&t<e.max&&(n=_Mathround(255*(t-e.min)/e.range)),_NumberisNaN(n)?0:e.invert?255-n:n},e.prototype._compareArrays=function(t,e){return t===e||!(!t||!e||t.join()!==e.join())},l(e,[{key:"frameTime",get:function get(){return this._frameTime},set:function set(t){this._frameTime=t}},{key:"rows",get:function get(){return this._rows},set:function set(t){this._rows=t}},{key:"columns",get:function get(){return this._columns},set:function set(t){this._columns=t}},{key:"spacingBetweenSlices",get:function get(){return this._spacingBetweenSlices},set:function set(t){this._spacingBetweenSlices=t}},{key:"sliceThickness",get:function get(){return this._sliceThickness},set:function set(t){this._sliceThickness=t}},{key:"imagePosition",get:function get(){return this._imagePosition},set:function set(t){this._imagePosition=t}},{key:"imageOrientation",get:function get(){return this._imageOrientation},set:function set(t){this._imageOrientation=t}},{key:"windowWidth",get:function get(){return this._windowWidth},set:function set(t){this._windowWidth=t}},{key:"windowCenter",get:function get(){return this._windowCenter},set:function set(t){this._windowCenter=t}},{key:"rescaleSlope",get:function get(){return this._rescaleSlope},set:function set(t){this._rescaleSlope=t}},{key:"rescaleIntercept",get:function get(){return this._rescaleIntercept},set:function set(t){this._rescaleIntercept=t}},{key:"bitsAllocated",get:function get(){return this._bitsAllocated},set:function set(t){this._bitsAllocated=t}},{key:"dist",get:function get(){return this._dist},set:function set(t){this._dist=t}},{key:"pixelSpacing",get:function get(){return this._pixelSpacing},set:function set(t){this._pixelSpacing=t}},{key:"pixelAspectRatio",get:function get(){return this._pixelAspectRatio},set:function set(t){this._pixelAspectRatio=t}},{key:"minMax",get:function get(){return this._minMax},set:function set(t){this._minMax=t}},{key:"dimensionIndexValues",get:function get(){return this._dimensionIndexValues},set:function set(t){this._dimensionIndexValues=t}},{key:"instanceNumber",get:function get(){return this._instanceNumber},set:function set(t){this._instanceNumber=t}},{key:"pixelData",get:function get(){return this._pixelData},set:function set(t){this._pixelData=t}},{key:"sopInstanceUID",set:function set(t){this._sopInstanceUID=t},get:function get(){return this._sopInstanceUID}},{key:"pixelPaddingValue",get:function get(){return this._pixelPaddingValue},set:function set(t){this._pixelPaddingValue=t}},{key:"pixelRepresentation",get:function get(){return this._pixelRepresentation},set:function set(t){this._pixelRepresentation=t}},{key:"pixelType",get:function get(){return this._pixelType},set:function set(t){this._pixelType=t}},{key:"url",get:function get(){return this._url},set:function set(t){this._url=t}},{key:"referencedSegmentNumber",get:function get(){return this._referencedSegmentNumber},set:function set(t){this._referencedSegmentNumber=t}},{key:"rightHanded",get:function get(){return this._rightHanded},set:function set(t){this._rightHanded=t}},{key:"index",get:function get(){return this._index},set:function set(t){this._index=t}},{key:"invert",get:function get(){return this._invert},set:function set(t){this._invert=t}},{key:"numberOfChannels",get:function get(){return this._numberOfChannels},set:function set(t){this._numberOfChannels=t}}]),e}(a.a);e.a=c},function(t,e,n){"use strict";function i(t,e){if(!babelHelpers.instanceof(t,e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=babelHelpers.typeof(e)&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+babelHelpers.typeof(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(12),s=n(132),l=n(156),c=n(158),h=n(159),u=function(t){function e(n,o){i(this,e);var a=r(this,t.call(this));a._id=o,a._arrayBuffer=n.buffer;var l=new Uint8Array(a._arrayBuffer);a._dataSet=null;try{a._dataSet=s.parseDicom(l)}catch(t){throw window.console.log(t),new Error("parsers.dicom could not parse the file")}return a}return o(e,t),e.prototype.seriesInstanceUID=function(){return this._dataSet.string("x0020000e")},e.prototype.studyInstanceUID=function(){return this._dataSet.string("x0020000d")},e.prototype.modality=function(){return this._dataSet.string("x00080060")},e.prototype.segmentationType=function(){return this._dataSet.string("x00620001")},e.prototype.segmentationSegments=function(){var t=[],e=this._dataSet.elements.x00620002;if(!e)return t;for(var n=0;n<e.items.length;n++){var i=this._recommendedDisplayCIELab(e.items[n]),r=this._segmentationCode(e.items[n]),o=e.items[n].dataSet.uint16("x00620004"),a=e.items[n].dataSet.string("x00620005"),s=e.items[n].dataSet.string("x00620008");t.push({recommendedDisplayCIELab:i,segmentationCodeDesignator:r.segmentationCodeDesignator,segmentationCodeValue:r.segmentationCodeValue,segmentationCodeMeaning:r.segmentationCodeMeaning,segmentNumber:o,segmentLabel:a,segmentAlgorithmType:s})}return t},e.prototype._segmentationCode=function(t){var e="unknown",n="unknown",i="unknown",r=t.dataSet.elements.x00082218;return r&&r.items&&0<r.items.length&&(e=r.items[0].dataSet.string("x00080102"),n=r.items[0].dataSet.string("x00080100"),i=r.items[0].dataSet.string("x00080104")),{segmentationCodeDesignator:e,segmentationCodeValue:n,segmentationCodeMeaning:i}},e.prototype._recommendedDisplayCIELab=function(t){if(!t.dataSet.elements.x0062000d)return null;for(var e=t.dataSet.elements.x0062000d.dataOffset,n=t.dataSet.elements.x0062000d.length,i=t.dataSet.byteArray.slice(e,e+n),r=new Uint16Array(n/2),o=0;o<n/2;o++){r[o]=(i[2*o+1]<<8)+i[2*o]}return[100*(r[0]/65535),255*(r[1]/65535)-128,255*(r[2]/65535)-128]},e.prototype.sopInstanceUID=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=this._findStringEverywhere("x2005140f","x00080018",t);return e},e.prototype.transferSyntaxUID=function(){return this._dataSet.string("x00020010")},e.prototype.studyDate=function(){return this._dataSet.string("x00080020")},e.prototype.studyDescription=function(){return this._dataSet.string("x00081030")},e.prototype.seriesDate=function(){return this._dataSet.string("x00080021")},e.prototype.seriesDescription=function(){return this._dataSet.string("x0008103e")},e.prototype.patientName=function(){return this._dataSet.string("x00100010")},e.prototype.patientID=function(){return this._dataSet.string("x00100020")},e.prototype.patientBirthdate=function(){return this._dataSet.string("x00100030")},e.prototype.patientSex=function(){return this._dataSet.string("x00100040")},e.prototype.patientAge=function(){return this._dataSet.string("x00101010")},e.prototype.photometricInterpretation=function(){return this._dataSet.string("x00280004")},e.prototype.planarConfiguration=function(){var t=this._dataSet.uint16("x00280006");return void 0===t&&(t=null),t},e.prototype.samplesPerPixel=function(){return this._dataSet.uint16("x00280002")},e.prototype.numberOfFrames=function(){var t=this._dataSet.intString("x00280008");return void 0===t&&(t=null),t},e.prototype.numberOfChannels=function(){var t=1,e=this.photometricInterpretation();return"RGB"!==e&&"PALETTE COLOR"!==e&&"YBR_FULL"!==e&&"YBR_FULL_422"!==e&&"YBR_PARTIAL_422"!==e&&"YBR_PARTIAL_420"!==e&&"YBR_RCT"!==e||(t=3),t},e.prototype.invert=function(){return"MONOCHROME1"===this.photometricInterpretation()},e.prototype.imageOrientation=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=this._findStringEverywhere("x00209116","x00200037",t);return e&&(e=e.split("\\").map(Number)),e},e.prototype.referencedSegmentNumber=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=-1,n=this._findInGroupSequence("x52009230","x0062000a",t);return null!==n&&(e=n.uint16("x0062000b")),e},e.prototype.pixelAspectRatio=function(){var t=[this._dataSet.intString("x00280034",0),this._dataSet.intString("x00280034",1)];return void 0===t[0]&&(t=null),t},e.prototype.imagePosition=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=this._findStringEverywhere("x00209113","x00200032",t);return e&&(e=e.split("\\").map(Number)),e},e.prototype.instanceNumber=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=null,n=this._dataSet.elements.x52009230;return void 0!==n&&n.items[t].dataSet.elements.x2005140f?e=n.items[t].dataSet.elements.x2005140f.items[0].dataSet.intString("x00200013"):(e=this._dataSet.intString("x00200013"),void 0===e&&(e=null)),e},e.prototype.pixelSpacing=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=this._findStringEverywhere("x00289110","x00280030",t);return e&&(e=e.split("\\").map(Number)),e},e.prototype.frameTime=function(){0<arguments.length&&void 0!==arguments[0]&&arguments[0];var t=this._dataSet.uint16("x00280009",1),e=this._dataSet.intString("x00082144"),n;return"number"==typeof t&&(t=t.toString(16),n=this._dataSet.floatString("x0018"+t)),void 0===n&&"number"==typeof e&&(n=1e3/e),void 0===n&&(n=null),n},e.prototype.rows=function(){0<arguments.length&&void 0!==arguments[0]&&arguments[0];var t=this._dataSet.uint16("x00280010");return void 0===t&&(t=null),t},e.prototype.columns=function(){0<arguments.length&&void 0!==arguments[0]&&arguments[0];var t=this._dataSet.uint16("x00280011");return void 0===t&&(t=null),t},e.prototype.pixelType=function(){0<arguments.length&&void 0!==arguments[0]&&arguments[0];return 0},e.prototype.pixelRepresentation=function(){0<arguments.length&&void 0!==arguments[0]&&arguments[0];var t=this._dataSet.uint16("x00280103");return t},e.prototype.pixelPaddingValue=function(){0<arguments.length&&void 0!==arguments[0]&&arguments[0];var t=this._dataSet.int16("x00280120");return void 0===t&&(t=null),t},e.prototype.bitsAllocated=function(){0<arguments.length&&void 0!==arguments[0]&&arguments[0];var t=this._dataSet.uint16("x00280100");return t},e.prototype.highBit=function(){0<arguments.length&&void 0!==arguments[0]&&arguments[0];var t=this._dataSet.uint16("x00280102");return t},e.prototype.rescaleIntercept=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;return this._findFloatStringInFrameGroupSequence("x00289145","x00281052",t)},e.prototype.rescaleSlope=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;return this._findFloatStringInFrameGroupSequence("x00289145","x00281053",t)},e.prototype.windowCenter=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;return this._findFloatStringInFrameGroupSequence("x00289132","x00281050",t)},e.prototype.windowWidth=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;return this._findFloatStringInFrameGroupSequence("x00289132","x00281051",t)},e.prototype.sliceThickness=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;return this._findFloatStringInFrameGroupSequence("x00289110","x00180050",t)},e.prototype.spacingBetweenSlices=function(){0<arguments.length&&void 0!==arguments[0]&&arguments[0];var t=this._dataSet.intString("x00180088");return void 0===t&&(t=null),t},e.prototype.dimensionIndexValues=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=null,n=this._dataSet.elements.x52009230;if(void 0!==n){var i=n.items[t].dataSet.elements.x00209111;if(void 0!==i&&null!==i){var r=(i=i.items[0].dataSet).elements.x00209157;if(void 0!==r&&null!==r){var o=r.length/4;e=[];for(var a=0;a<o;a++){e.push(i.uint32("x00209157",a))}}}}return e},e.prototype.inStackPositionNumber=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=null,n=this._dataSet.elements.x52009230;return e=void 0!==n?n.items[t].dataSet.elements.x00209111.items[0].dataSet.uint32("x00209057"):null,e},e.prototype.stackID=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=null,n=this._dataSet.elements.x52009230;return e=void 0!==n?n.items[t].dataSet.elements.x00209111.items[0].dataSet.intString("x00209056"):null,e},e.prototype.extractPixelData=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=this._decodePixelData(t);return 1<this.numberOfChannels()?this._convertColorSpace(e):e},e.prototype._findInGroupSequence=function(t,e,n){var i=this._dataSet.elements[t];if(void 0!==i){var r=i.items[n].dataSet.elements[e];if(void 0!==r)return r.items[0].dataSet}return null},e.prototype._findStringInGroupSequence=function(t,e,n,i){var r=this._findInGroupSequence(t,e,i);return null!==r?r.string(n):null},e.prototype._findStringInFrameGroupSequence=function(t,e,n){return this._findStringInGroupSequence("x52009229",t,e,0)||this._findStringInGroupSequence("x52009230",t,e,n)},e.prototype._findStringEverywhere=function(t,e,n){var i=this._findStringInFrameGroupSequence(t,e,n);return null===i&&(i=this._dataSet.string(e)),void 0===i&&(i=null),i},e.prototype._findFloatStringInGroupSequence=function(t,e,n,i){var r=this._dataSet.floatString(n);return void 0===r?null!==(r=this._findInGroupSequence(t,e,i))?r.floatString(n):null:r},e.prototype._findFloatStringInFrameGroupSequence=function(t,e,n){return this._findFloatStringInGroupSequence("x52009229",t,e,0)||this._findFloatStringInGroupSequence("x52009230",t,e,n)},e.prototype._decodePixelData=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=this.transferSyntaxUID();if("1.2.840.10008.1.2.4.90"===e||"1.2.840.10008.1.2.4.91"===e)return this._decodeJ2K(t);if("1.2.840.10008.1.2.4.57"===e||"1.2.840.10008.1.2.4.70"===e)return this._decodeJPEGLossless(t);if("1.2.840.10008.1.2.4.50"===e||"1.2.840.10008.1.2.4.51"===e)return this._decodeJPEGBaseline(t);if("1.2.840.10008.1.2"===e||"1.2.840.10008.1.2.1"===e)return this._decodeUncompressed(t);if("1.2.840.10008.1.2.2"===e){var n=this._decodeUncompressed(t);return this._swapFrame(n)}throw{error:"no decoder for transfer syntax "+e}},e.prototype.framesAreFragmented=function(){return this._dataSet.intString("x00280008")!==this._dataSet.elements.x7fe00010.fragments.length},e.prototype.getEncapsulatedImageFrame=function(t){return this._dataSet.elements.x7fe00010&&this._dataSet.elements.x7fe00010.basicOffsetTable.length?s.readEncapsulatedImageFrame(this._dataSet,this._dataSet.elements.x7fe00010,t):this.framesAreFragmented()?s.readEncapsulatedImageFrame(this._dataSet,this._dataSet.elements.x7fe00010,t,s.createJPEGBasicOffsetTable(this._dataSet,this._dataSet.elements.x7fe00010)):s.readEncapsulatedPixelDataFromFragments(this._dataSet,this._dataSet.elements.x7fe00010,t)},e.prototype._decodeJ2K=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=this.getEncapsulatedImageFrame(t),n=new h;if(n.parse(e),1!==n.componentsCount)throw new Error("JPEG2000 decoder returned a componentCount of ${componentsCount}, when 1 is expected");if(1!==n.tiles.length)throw new Error("JPEG2000 decoder returned a tileCount of ${tileCount}, when 1 is expected");return n.tiles[0].items},e.prototype._decodeJPEGLossless=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=this.getEncapsulatedImageFrame(t),n=this.pixelRepresentation(t),i=8>=this.bitsAllocated(t)?1:2,r=new l.lossless.Decoder().decode(e.buffer,e.byteOffset,e.length,i);return 0===n?2===i?new Uint16Array(r.buffer):new Uint8Array(r.buffer):new Int16Array(r.buffer)},e.prototype._decodeJPEGBaseline=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=this.getEncapsulatedImageFrame(t),n=this.rows(t),i=this.columns(t),r=this.bitsAllocated(t),o=new c;return o.parse(e),8===r?o.getData(i,n):16===r?o.getData16(i,n):void 0},e.prototype._decodeUncompressed=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=this.pixelRepresentation(t),n=this.bitsAllocated(t),i=this._dataSet.elements.x7fe00010.dataOffset,r=this.numberOfChannels(),o=this.rows(t)*this.columns(t)*r,a=0,s=this._dataSet.byteArray.buffer;if(0===e&&8===n)return a=i+t*o,new Uint8Array(s,a,o);if(0===e&&16===n)return a=i+2*(t*o),new Uint16Array(s,a,o);if(1===e&&16===n)return a=i+2*(t*o),new Int16Array(s,a,o);if(0===e&&32===n)return a=i+4*(t*o),new Uint32Array(s,a,o);if(0===e&&1===n){var l=new ArrayBuffer(o),c=new Uint8Array(l);a=i+t*o;for(var h=0,u=t*o,d=_Mathfloor(u/8),f=u-8*d,m=_Mathceil((t*o+o)/8),_=new Uint8Array(s,i),g=d;g<=m;g++){for(;8>f;){switch(f){case 0:c[h]=1&_[g];break;case 1:c[h]=1&_[g]>>>1;break;case 2:c[h]=1&_[g]>>>2;break;case 3:c[h]=1&_[g]>>>3;break;case 4:c[h]=1&_[g]>>>4;break;case 5:c[h]=1&_[g]>>>5;break;case 6:c[h]=1&_[g]>>>6;break;case 7:c[h]=1&_[g]>>>7;}if(f++,++h>=o)return c}f=0}}},e.prototype._interpretAsRGB=function(t){return-1!==["RGB","YBR_RCT","YBR_ICT","YBR_FULL_422"].indexOf(t)},e.prototype._convertColorSpace=function(t){var e=null,n=this.photometricInterpretation(),i=this.planarConfiguration(),r=this._interpretAsRGB(n);if(r&&0===i)e=t;else if(r&&1===i){if(babelHelpers.instanceof(t,Int8Array))e=new Int8Array(t.length);else if(babelHelpers.instanceof(t,Uint8Array))e=new Uint8Array(t.length);else if(babelHelpers.instanceof(t,Int16Array))e=new Int16Array(t.length);else{if(!babelHelpers.instanceof(t,Uint16Array))throw new Error("unsuported typed array: "+t);e=new Uint16Array(t.length)}for(var o=t.length/3,a=0,s=0,l=o,c=2*o,h=0;h<o;h++){e[a++]=t[s++],e[a++]=t[l++],e[a++]=t[c++]}}else{if("YBR_FULL"!==n)throw new Error("photometric interpolation not supported: "+n);if(babelHelpers.instanceof(t,Int8Array))e=new Int8Array(t.length);else if(babelHelpers.instanceof(t,Uint8Array))e=new Uint8Array(t.length);else if(babelHelpers.instanceof(t,Int16Array))e=new Int16Array(t.length);else{if(!babelHelpers.instanceof(t,Uint16Array))throw new Error("unsuported typed array: "+t);e=new Uint16Array(t.length)}for(var u=t.length/3,p=0,d=0,f=0;f<u;f++){var m=t[p++],_=t[p++],g=t[p++];e[d++]=m+1.402*(g-128),e[d++]=m-.34414*(_-128)-.71414*(g-128),e[d++]=m+1.772*(_-128)}}return e},e.prototype._swapFrame=function(t){var e=this.bitsAllocated();if(16===e)for(var n=0;n<t.length;n++){t[n]=this._swap16(t[n])}else if(32===e)for(var i=0;i<t.length;i++){t[i]=this._swap32(t[i])}return t},e}(a.a);e.a=u},function(t,e,n){"use strict";(function(e,i){function r(t){return N.from(t)}function o(t){return N.isBuffer(t)||babelHelpers.instanceof(t,U)}function a(t,e,n){if("function"==typeof t.prependListener)return t.prependListener(e,n);t._events&&t._events[e]?k(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]:t.on(e,n)}function s(t,e){O=O||n(7),t=t||{},this.objectMode=!!t.objectMode,babelHelpers.instanceof(e,O)&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var i=t.highWaterMark,r=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r,this.highWaterMark=_Mathfloor(this.highWaterMark),this.buffer=new j,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(H||(H=n(66).StringDecoder),this.decoder=new H(t.encoding),this.encoding=t.encoding)}function l(t){if(O=O||n(7),!babelHelpers.instanceof(this,l))return new l(t);this._readableState=new s(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),F.call(this)}function c(t,e,n,i,o){var a=t._readableState;if(null===e)a.reading=!1,m(t,a);else{var s;o||(s=u(a,e)),s?t.emit("error",s):a.objectMode||e&&0<e.length?("string"==typeof e||a.objectMode||Object.getPrototypeOf(e)===N.prototype||(e=r(e)),i?a.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):h(t,a,e,!0):a.ended?t.emit("error",new Error("stream.push() after EOF")):(a.reading=!1,a.decoder&&!n?(e=a.decoder.write(e),a.objectMode||0!==e.length?h(t,a,e,!1):y(t,a)):h(t,a,e,!1))):i||(a.reading=!1)}return p(a)}function h(t,e,n,i){e.flowing&&0===e.length&&!e.sync?(t.emit("data",n),t.read(0)):(e.length+=e.objectMode?1:n.length,i?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&_(t)),y(t,e)}function u(t,e){var n;return o(e)||"string"==typeof e||void 0===e||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function p(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}function d(t){return t>=q?t=q:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function f(t,e){return 0>=t||0===e.length&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=d(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function m(t,e){if(!e.ended){if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,_(t)}}function _(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(G("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?R(g,t):g(t))}function g(t){G("emit readable"),t.emit("readable"),E(t)}function y(t,e){e.readingMore||(e.readingMore=!0,R(v,t,e))}function v(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(G("maybeReadMore read 0"),t.read(0),n!==e.length);){n=e.length}e.readingMore=!1}function b(t){return function(){var e=t._readableState;G("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&D(t,"data")&&(e.flowing=!0,E(t))}}function w(t){G("readable nexttick read 0"),t.read(0)}function x(t,e){e.resumeScheduled||(e.resumeScheduled=!0,R(S,t,e))}function S(t,e){e.reading||(G("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),E(t),e.flowing&&!e.reading&&t.read(0)}function E(t){var e=t._readableState;for(G("flow",e.flowing);e.flowing&&null!==t.read();){}}function M(t,e){if(0===e.length)return null;var n;return e.objectMode?n=e.buffer.shift():!t||t>=e.length?(n=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):n=T(t,e.buffer,e.decoder),n}function T(t,e,n){var i;return t<e.head.data.length?(i=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):i=t===e.head.data.length?e.shift():n?A(t,e):P(t,e),i}function A(t,e){var n=e.head,i=1,r=n.data;for(t-=r.length;n=n.next;){var o=n.data,a=t>o.length?o.length:t;if(a===o.length?r+=o:r+=o.slice(0,t),0===(t-=a)){a===o.length?(++i,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=o.slice(a));break}++i}return e.length-=i,r}function P(t,e){var n=N.allocUnsafe(t),i=e.head,r=1;for(i.data.copy(n),t-=i.data.length;i=i.next;){var o=i.data,a=t>o.length?o.length:t;if(o.copy(n,n.length-t,0,a),0===(t-=a)){a===o.length?(++r,i.next?e.head=i.next:e.head=e.tail=null):(e.head=i,i.data=o.slice(a));break}++r}return e.length-=r,n}function C(t){var e=t._readableState;if(0<e.length)throw new Error("\"endReadable()\" called on non-empty stream");e.endEmitted||(e.ended=!0,R(I,e,t))}function I(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function L(t,e){for(var n=0,i=t.length;n<i;n++){if(t[n]===e)return n}return-1}var R=n(16);t.exports=l;var O,k=n(139);l.ReadableState=s;n(21).EventEmitter;var D=function(t,e){return t.listeners(e).length},F=n(63),N=n(27).Buffer,U=e.Uint8Array||function(){},B=n(13);B.inherits=n(14);var z=n(140),G;G=z&&z.debuglog?z.debuglog("stream"):function(){};var H,j=n(141),V=n(64);B.inherits(l,F);var W=["error","close","destroy","pause","resume"];Object.defineProperty(l.prototype,"destroyed",{get:function get(){return void 0!==this._readableState&&this._readableState.destroyed},set:function set(t){this._readableState&&(this._readableState.destroyed=t)}}),l.prototype.destroy=V.destroy,l.prototype._undestroy=V.undestroy,l.prototype._destroy=function(t,e){this.push(null),e(t)},l.prototype.push=function(t,e){var n,i=this._readableState;return i.objectMode?n=!0:"string"==typeof t&&((e=e||i.defaultEncoding)!==i.encoding&&(t=N.from(t,e),e=""),n=!0),c(this,t,e,!1,n)},l.prototype.unshift=function(t){return c(this,t,null,!0,!1)},l.prototype.isPaused=function(){return!1===this._readableState.flowing},l.prototype.setEncoding=function(t){return H||(H=n(66).StringDecoder),this._readableState.decoder=new H(t),this._readableState.encoding=t,this};var q=8388608;l.prototype.read=function(t){G("read",t),t=parseInt(t,10);var e=this._readableState,n=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return G("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?C(this):_(this),null;if(0===(t=f(t,e))&&e.ended)return 0===e.length&&C(this),null;var i=e.needReadable;G("need readable",i),(0===e.length||e.length-t<e.highWaterMark)&&G("length less than watermark",i=!0),e.ended||e.reading?G("reading or ended",i=!1):i&&(G("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=f(n,e)));var r;return null===(r=0<t?M(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&C(this)),null!==r&&this.emit("data",r),r},l.prototype._read=function(){this.emit("error",new Error("_read() is not implemented"))},l.prototype.pipe=function(t,e){function n(t,e){G("onunpipe"),t===p&&e&&!1===e.hasUnpiped&&(e.hasUnpiped=!0,o())}function r(){G("onend"),t.end()}function o(){G("cleanup"),t.removeListener("close",c),t.removeListener("finish",h),t.removeListener("drain",m),t.removeListener("error",l),t.removeListener("unpipe",n),p.removeListener("end",r),p.removeListener("end",u),p.removeListener("data",s),_=!0,d.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&m()}function s(e){G("ondata"),g=!1,!1!==t.write(e)||g||((1===d.pipesCount&&d.pipes===t||1<d.pipesCount&&-1!==L(d.pipes,t))&&!_&&(G("false write response, pause",p._readableState.awaitDrain),p._readableState.awaitDrain++,g=!0),p.pause())}function l(e){G("onerror",e),u(),t.removeListener("error",l),0===D(t,"error")&&t.emit("error",e)}function c(){t.removeListener("finish",h),u()}function h(){G("onfinish"),t.removeListener("close",c),u()}function u(){G("unpipe"),p.unpipe(t)}var p=this,d=this._readableState;switch(d.pipesCount){case 0:d.pipes=t;break;case 1:d.pipes=[d.pipes,t];break;default:d.pipes.push(t);}d.pipesCount+=1,G("pipe count=%d opts=%j",d.pipesCount,e);var f=(!e||!1!==e.end)&&t!==i.stdout&&t!==i.stderr?r:u;d.endEmitted?R(f):p.once("end",f),t.on("unpipe",n);var m=b(p);t.on("drain",m);var _=!1,g=!1;return p.on("data",s),a(t,"error",l),t.once("close",c),t.once("finish",h),t.emit("pipe",p),d.flowing||(G("pipe resume"),p.resume()),t},l.prototype.unpipe=function(t){var e=this._readableState,n={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,n),this);if(!t){var i=e.pipes,r=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<r;o++){i[o].emit("unpipe",this,n)}return this}var a=L(e.pipes,t);return-1===a?this:(e.pipes.splice(a,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,n),this)},l.prototype.on=function(t,e){var n=F.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var i=this._readableState;i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.emittedReadable=!1,i.reading?i.length&&_(this):R(w,this))}return n},l.prototype.addListener=l.prototype.on,l.prototype.resume=function(){var t=this._readableState;return t.flowing||(G("resume"),t.flowing=!0,x(this,t)),this},l.prototype.pause=function(){return G("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(G("pause"),this._readableState.flowing=!1,this.emit("pause")),this},l.prototype.wrap=function(t){var e=this._readableState,n=!1,i=this;t.on("end",function(){if(G("wrapped end"),e.decoder&&!e.ended){var t=e.decoder.end();t&&t.length&&i.push(t)}i.push(null)}),t.on("data",function(r){G("wrapped data"),e.decoder&&(r=e.decoder.write(r)),(!e.objectMode||null!==r&&void 0!==r)&&(e.objectMode||r&&r.length)&&(i.push(r)||(n=!0,t.pause()))});for(var r in t){void 0===this[r]&&"function"==typeof t[r]&&(this[r]=function(e){return function(){return t[e].apply(t,arguments)}}(r))}for(var o=0;o<W.length;o++){t.on(W[o],i.emit.bind(i,W[o]))}return i._read=function(e){G("wrapped _read",e),n&&(n=!1,t.resume())},i},l._fromList=M}).call(e,n(1),n(4))},function(t,e,n){t.exports=n(21).EventEmitter},function(t,e,n){"use strict";function i(t,e){t.emit("error",e)}var r=n(16);t.exports={destroy:function destroy(t,e){var n=this,o=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;o||a?e?e(t):!t||this._writableState&&this._writableState.errorEmitted||r(i,this,t):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(t){!e&&t?(r(i,n,t),n._writableState&&(n._writableState.errorEmitted=!0)):e&&e(t)}))},undestroy:function undestroy(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(t,e,n){"use strict";(function(e,i,r){function o(t){var e=this;this.next=null,this.entry=null,this.finish=function(){A(e,t)}}function a(t){return k.from(t)}function s(t){return k.isBuffer(t)||babelHelpers.instanceof(t,D)}function l(){}function c(t,e){C=C||n(7),t=t||{},this.objectMode=!!t.objectMode,babelHelpers.instanceof(e,C)&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var i=t.highWaterMark,r=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r,this.highWaterMark=_Mathfloor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var a=!1===t.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){y(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function h(t){if(C=C||n(7),!(N.call(h,this)||babelHelpers.instanceof(this,C)))return new h(t);this._writableState=new c(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),O.call(this)}function u(t,e){var n=new Error("write after end");t.emit("error",n),P(e,n)}function p(t,e,n,i){var r=!0,o=!1;return null===n?o=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||e.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(t.emit("error",o),P(i,o),r=!1),r}function d(t,e,n){return t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=k.from(e,n)),e}function f(t,e,n,i,r,o){if(!n){var a=d(e,i,r);i!==a&&(n=!0,r="buffer",i=a)}var s=e.objectMode?1:i.length;e.length+=s;var l=e.length<e.highWaterMark;if(l||(e.needDrain=!0),e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest={chunk:i,encoding:r,isBuf:n,callback:o,next:null},c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else m(t,e,!1,s,i,r,o);return l}function m(t,e,n,i,r,o,a){e.writelen=i,e.writecb=a,e.writing=!0,e.sync=!0,n?t._writev(r,e.onwrite):t._write(r,o,e.onwrite),e.sync=!1}function _(t,e,n,i,r){--e.pendingcb,n?(P(r,i),P(M,t,e),t._writableState.errorEmitted=!0,t.emit("error",i)):(r(i),t._writableState.errorEmitted=!0,t.emit("error",i),M(t,e))}function g(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function y(t,e){var n=t._writableState,i=n.sync,r=n.writecb;if(g(n),e)_(t,n,i,e,r);else{var o=x(n);o||n.corked||n.bufferProcessing||!n.bufferedRequest||w(t,n),i?I(v,t,n,o,r):v(t,n,o,r)}}function v(t,e,n,i){n||b(t,e),e.pendingcb--,i(),M(t,e)}function b(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function w(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var i=e.bufferedRequestCount,r=Array(i),a=e.corkedRequestsFree;a.entry=n;for(var s=0,l=!0;n;){r[s]=n,n.isBuf||(l=!1),n=n.next,s+=1}r.allBuffers=l,m(t,e,!0,e.length,r,"",a.finish),e.pendingcb++,e.lastBufferedRequest=null,a.next?(e.corkedRequestsFree=a.next,a.next=null):e.corkedRequestsFree=new o(e)}else{for(;n;){var c=n.chunk,h=n.encoding,u=n.callback;if(m(t,e,!1,e.objectMode?1:c.length,c,h,u),n=n.next,e.writing)break}null===n&&(e.lastBufferedRequest=null)}e.bufferedRequestCount=0,e.bufferedRequest=n,e.bufferProcessing=!1}function x(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function S(t,e){t._final(function(n){e.pendingcb--,n&&t.emit("error",n),e.prefinished=!0,t.emit("prefinish"),M(t,e)})}function E(t,e){e.prefinished||e.finalCalled||("function"==typeof t._final?(e.pendingcb++,e.finalCalled=!0,P(S,t,e)):(e.prefinished=!0,t.emit("prefinish")))}function M(t,e){var n=x(e);return n&&(E(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),n}function T(t,e,n){e.ending=!0,M(t,e),n&&(e.finished?P(n):t.once("finish",n)),e.ended=!0,t.writable=!1}function A(t,e,n){var i=t.entry;for(t.entry=null;i;){var r=i.callback;e.pendingcb--,r(n),i=i.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}var P=n(16);t.exports=h;var C,I=!e.browser&&-1<["v0.10","v0.9."].indexOf(e.version.slice(0,5))?i:P;h.WritableState=c;var L=n(13);L.inherits=n(14);var R={deprecate:n(144)},O=n(63),k=n(27).Buffer,D=r.Uint8Array||function(){},F=n(64);L.inherits(h,O),c.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;){e.push(t),t=t.next}return e},function(){try{Object.defineProperty(c.prototype,"buffer",{get:R.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}();var N;"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(N=Function.prototype[Symbol.hasInstance],Object.defineProperty(h,Symbol.hasInstance,{value:function value(t){return!!N.call(this,t)||t&&babelHelpers.instanceof(t._writableState,c)}})):N=function(t){return babelHelpers.instanceof(t,this)},h.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},h.prototype.write=function(t,e,n){var i=this._writableState,r=!1,o=s(t)&&!i.objectMode;return o&&!k.isBuffer(t)&&(t=a(t)),"function"==typeof e&&(n=e,e=null),o?e="buffer":e||(e=i.defaultEncoding),"function"!=typeof n&&(n=l),i.ended?u(this,n):(o||p(this,i,t,n))&&(i.pendingcb++,r=f(this,i,o,t,e,n)),r},h.prototype.cork=function(){this._writableState.corked++},h.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||w(this,t))},h.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},h.prototype._write=function(t,e,n){n(new Error("_write() is not implemented"))},h.prototype._writev=null,h.prototype.end=function(t,e,n){var i=this._writableState;"function"==typeof t?(n=t,t=null,e=null):"function"==typeof e&&(n=e,e=null),null!==t&&void 0!==t&&this.write(t,e),i.corked&&(i.corked=1,this.uncork()),i.ending||i.finished||T(this,i,n)},Object.defineProperty(h.prototype,"destroyed",{get:function get(){return void 0!==this._writableState&&this._writableState.destroyed},set:function set(t){this._writableState&&(this._writableState.destroyed=t)}}),h.prototype.destroy=F.destroy,h.prototype._undestroy=F.undestroy,h.prototype._destroy=function(t,e){this.end(),e(t)}}).call(e,n(4),n(142).setImmediate,n(1))},function(t,e,n){function i(t){if(t&&!l(t))throw new Error("Unknown encoding: "+t)}function r(t){return t.toString(this.encoding)}function o(t){this.charReceived=t.length%2,this.charLength=this.charReceived?2:0}function a(t){this.charReceived=t.length%3,this.charLength=this.charReceived?3:0}var s=n(6).Buffer,l=s.isEncoding||function(t){switch(t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1;}},c=e.StringDecoder=function(t){switch(this.encoding=(t||"utf8").toLowerCase().replace(/[-_]/,""),i(t),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=o;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=a;break;default:return void(this.write=r);}this.charBuffer=new s(6),this.charReceived=0,this.charLength=0};c.prototype.write=function(t){for(var e="",n;this.charLength;){n=t.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:t.length;if(t.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";if(t=t.slice(n,t.length),!(55296<=(r=(e=this.charBuffer.slice(0,this.charLength).toString(this.encoding)).charCodeAt(e.length-1))&&56319>=r)){if(this.charReceived=this.charLength=0,0===t.length)return e;break}this.charLength+=this.surrogateSize,e=""}this.detectIncompleteChar(t);i=t.length;this.charLength&&(t.copy(this.charBuffer,0,t.length-this.charReceived,i),i-=this.charReceived);var i=(e+=t.toString(this.encoding,0,i)).length-1,r=e.charCodeAt(i);if(55296<=r&&56319>=r){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),t.copy(this.charBuffer,0,0,o),e.substring(0,i)}return e},c.prototype.detectIncompleteChar=function(t){for(var e=3<=t.length?3:t.length,n;0<e;e--){n=t[t.length-e];if(1==e&&6==n>>5){this.charLength=2;break}if(2>=e&&14==n>>4){this.charLength=3;break}if(3>=e&&30==n>>3){this.charLength=4;break}}this.charReceived=e},c.prototype.end=function(t){var e="";if(t&&t.length&&(e=this.write(t)),this.charReceived){var n=this.charReceived,i=this.charBuffer,r=this.encoding;e+=i.slice(0,n).toString(r)}return e}},function(t,e,n){"use strict";function i(t){this.afterTransform=function(e,n){return r(t,e,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function r(t,e,n){var i=t._transformState;i.transforming=!1;var r=i.writecb;if(!r)return t.emit("error",new Error("write callback called multiple times"));i.writechunk=null,i.writecb=null,null!==n&&void 0!==n&&t.push(n),r(e);var o=t._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&t._read(o.highWaterMark)}function o(t){if(!babelHelpers.instanceof(this,o))return new o(t);s.call(this,t),this._transformState=new i(this);var e=this;this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(t,n){a(e,t,n)}):a(e)})}function a(t,e,n){if(e)return t.emit("error",e);null!==n&&void 0!==n&&t.push(n);var i=t._writableState,r=t._transformState;if(i.length)throw new Error("Calling transform done when ws.length != 0");if(r.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}t.exports=o;var s=n(7),l=n(13);l.inherits=n(14),l.inherits(o,s),o.prototype.push=function(t,e){return this._transformState.needTransform=!1,s.prototype.push.call(this,t,e)},o.prototype._transform=function(){throw new Error("_transform() is not implemented")},o.prototype._write=function(t,e,n){var i=this._transformState;if(i.writecb=n,i.writechunk=t,i.writeencoding=e,!i.transforming){var r=this._readableState;(i.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}},o.prototype._read=function(){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},o.prototype._destroy=function(t,e){var n=this;s.prototype._destroy.call(this,t,function(t){e(t),n.emit("close")})}},function(t){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(t){"use strict";t.exports=function(t,e,n,i){for(var r=0|65535&t,o=0|65535&t>>>16,a=0;0!==n;){n-=a=2e3<n?2e3:n;do{o=0|o+(r=0|r+e[i++])}while(--a);r%=65521,o%=65521}return 0|(r|o<<16)}},function(t){"use strict";var i=function(){for(var t,e=[],n=0;256>n;n++){t=n;for(var i=0;8>i;i++){t=1&t?3988292384^t>>>1:t>>>1}e[n]=t}return e}();t.exports=function(t,e,n,r){t^=-1;for(var s=r;s<r+n;s++){t=t>>>8^i[255&(t^e[s])]}return-1^t}},function(t,e,n){(function(t,i){function r(t,n){var i={seen:[],stylize:a};return 3<=arguments.length&&(i.depth=arguments[2]),4<=arguments.length&&(i.colors=arguments[3]),m(n)?i.showHidden=n:n&&e._extend(i,n),v(i.showHidden)&&(i.showHidden=!1),v(i.depth)&&(i.depth=2),v(i.colors)&&(i.colors=!1),v(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=o),l(i,t,i.depth)}function o(t,e){var n=r.styles[e];return n?"\x1B["+r.colors[n][0]+"m"+t+"\x1B["+r.colors[n][1]+"m":t}function a(t){return t}function s(t){var e={};return t.forEach(function(t){e[t]=!0}),e}function l(t,n,i){if(t.customInspect&&n&&E(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var r=n.inspect(i,t);return y(r)||(r=l(t,r,i)),r}var o=c(t,n);if(o)return o;var a=Object.keys(n),m=s(a);if(t.showHidden&&(a=Object.getOwnPropertyNames(n)),S(n)&&(0<=a.indexOf("message")||0<=a.indexOf("description")))return h(n);if(0===a.length){if(E(n)){var _=n.name?": "+n.name:"";return t.stylize("[Function"+_+"]","special")}if(b(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(x(n))return t.stylize(Date.prototype.toString.call(n),"date");if(S(n))return h(n)}var g="",v=!1,w=["{","}"];if(f(n)&&(v=!0,w=["[","]"]),E(n)&&(g=" [Function"+(n.name?": "+n.name:"")+"]"),b(n)&&(g=" "+RegExp.prototype.toString.call(n)),x(n)&&(g=" "+Date.prototype.toUTCString.call(n)),S(n)&&(g=" "+h(n)),0===a.length&&(!v||0==n.length))return w[0]+g+w[1];if(0>i)return b(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special");t.seen.push(n);var M;return M=v?u(t,n,i,m,a):a.map(function(e){return p(t,n,i,m,e,v)}),t.seen.pop(),d(M,g,w)}function c(t,e){if(v(e))return t.stylize("undefined","undefined");if(y(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,"\"")+"'";return t.stylize(n,"string")}return g(e)?t.stylize(""+e,"number"):m(e)?t.stylize(""+e,"boolean"):_(e)?t.stylize("null","null"):void 0}function h(t){return"["+Error.prototype.toString.call(t)+"]"}function u(t,e,n,i,r){for(var o=[],a=0,s=e.length;a<s;++a){P(e,a+"")?o.push(p(t,e,n,i,a+"",!0)):o.push("")}return r.forEach(function(r){r.match(/^\d+$/)||o.push(p(t,e,n,i,r,!0))}),o}function p(t,e,n,i,r,o){var a,s,c;if((c=Object.getOwnPropertyDescriptor(e,r)||{value:e[r]}).get?s=c.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):c.set&&(s=t.stylize("[Setter]","special")),P(i,r)||(a="["+r+"]"),s||(0>t.seen.indexOf(c.value)?-1<(s=_(n)?l(t,c.value,null):l(t,c.value,n-1)).indexOf("\n")&&(s=o?s.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+s.split("\n").map(function(t){return"   "+t}).join("\n")):s=t.stylize("[Circular]","special")),v(a)){if(o&&r.match(/^\d+$/))return s;(a=JSON.stringify(""+r)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,"\"").replace(/(^"|"$)/g,"'"),a=t.stylize(a,"string"))}return a+": "+s}function d(t,e,n){var i=0;return 60<t.reduce(function(t,e){return i++,0<=e.indexOf("\n")&&i++,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0)?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}function f(t){return Array.isArray(t)}function m(t){return"boolean"==typeof t}function _(t){return null===t}function g(t){return"number"==typeof t}function y(t){return"string"==typeof t}function v(t){return void 0===t}function b(t){return w(t)&&"[object RegExp]"===M(t)}function w(t){return"object"==babelHelpers.typeof(t)&&null!==t}function x(t){return w(t)&&"[object Date]"===M(t)}function S(t){return w(t)&&("[object Error]"===M(t)||babelHelpers.instanceof(t,Error))}function E(t){return"function"==typeof t}function M(t){return Object.prototype.toString.call(t)}function T(t){return 10>t?"0"+t.toString(10):t.toString(10)}function A(){var t=new Date,e=[T(t.getHours()),T(t.getMinutes()),T(t.getSeconds())].join(":");return[t.getDate(),R[t.getMonth()],e].join(" ")}function P(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var C=/%[sdj%]/g;e.format=function(t){if(!y(t)){for(var e=[],n=0;n<arguments.length;n++){e.push(r(arguments[n]))}return e.join(" ")}for(var n=1,i=arguments,o=i.length,a=(t+"").replace(C,function(t){if("%%"===t)return"%";if(n>=o)return t;switch(t){case"%s":return i[n++]+"";case"%d":return+i[n++];case"%j":try{return JSON.stringify(i[n++])}catch(t){return"[Circular]"}default:return t;}}),s=i[n];n<o;s=i[++n]){_(s)||!w(s)?a+=" "+s:a+=" "+r(s)}return a},e.deprecate=function(n,r){if(v(t.process))return function(){return e.deprecate(n,r).apply(this,arguments)};if(!0===i.noDeprecation)return n;var o=!1;return function(){if(!o){if(i.throwDeprecation)throw new Error(r);i.traceDeprecation?console.trace(r):console.error(r),o=!0}return n.apply(this,arguments)}};var I,L={};e.debuglog=function(t){if(v(I)&&(I={NODE_ENV:"production"}.NODE_DEBUG||""),t=t.toUpperCase(),!L[t])if(new RegExp("\\b"+t+"\\b","i").test(I)){var n=i.pid;L[t]=function(){var i=e.format.apply(e,arguments);console.error("%s %d: %s",t,n,i)}}else L[t]=function(){};return L[t]},e.inspect=r,r.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},r.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=f,e.isBoolean=m,e.isNull=_,e.isNullOrUndefined=function(t){return null==t},e.isNumber=g,e.isString=y,e.isSymbol=function(t){return"symbol"==babelHelpers.typeof(t)},e.isUndefined=v,e.isRegExp=b,e.isObject=w,e.isDate=x,e.isError=S,e.isFunction=E,e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==babelHelpers.typeof(t)||void 0===t},e.isBuffer=n(154);var R=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];e.log=function(){console.log("%s - %s",A(),e.format.apply(e,arguments))},e.inherits=n(155),e._extend=function(t,e){if(!e||!w(e))return t;for(var n=Object.keys(e),i=n.length;i--;){t[n[i]]=e[n[i]]}return t}}).call(e,n(1),n(4))},function(t,e,n){"use strict";(function(e){function i(t,e){if(t===e)return 0;for(var n=t.length,i=e.length,r=0,o=_Mathmin(n,i);r<o;++r){if(t[r]!==e[r]){n=t[r],i=e[r];break}}return n<i?-1:i<n?1:0}function r(t){return e.Buffer&&"function"==typeof e.Buffer.isBuffer?e.Buffer.isBuffer(t):!(null==t||!t._isBuffer)}function o(t){return Object.prototype.toString.call(t)}function a(t){return!r(t)&&"function"==typeof e.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):!!t&&(babelHelpers.instanceof(t,DataView)||!!(t.buffer&&babelHelpers.instanceof(t.buffer,ArrayBuffer))))}function s(t){if(b.isFunction(t)){if(S)return t.name;var e=t.toString().match(M);return e&&e[1]}}function l(t,e){return"string"==typeof t?t.length<e?t:t.slice(0,e):t}function c(t){if(S||!b.isFunction(t))return b.inspect(t);var e=s(t);return"[Function"+(e?": "+e:"")+"]"}function h(t){return l(c(t.actual),128)+" "+t.operator+" "+l(c(t.expected),128)}function u(t,e,n,i,r){throw new E.AssertionError({message:n,actual:t,expected:e,operator:i,stackStartFunction:r})}function p(t,e){t||u(t,!0,e,"==",E.ok)}function d(t,e,n,s){if(t===e)return!0;if(r(t)&&r(e))return 0===i(t,e);if(b.isDate(t)&&b.isDate(e))return t.getTime()===e.getTime();if(b.isRegExp(t)&&b.isRegExp(e))return t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase;if(null!==t&&"object"==babelHelpers.typeof(t)||null!==e&&"object"==babelHelpers.typeof(e)){if(a(t)&&a(e)&&o(t)===o(e)&&!(babelHelpers.instanceof(t,Float32Array)||babelHelpers.instanceof(t,Float64Array)))return 0===i(new Uint8Array(t.buffer),new Uint8Array(e.buffer));if(r(t)!==r(e))return!1;var l=(s=s||{actual:[],expected:[]}).actual.indexOf(t);return-1!==l&&l===s.expected.indexOf(e)||(s.actual.push(t),s.expected.push(e),m(t,e,n,s))}return n?t===e:t==e}function f(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function m(t,e,n,i){if(null===t||void 0===t||null===e||void 0===e)return!1;if(b.isPrimitive(t)||b.isPrimitive(e))return t===e;if(n&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;var r=f(t),o=f(e);if(r&&!o||!r&&o)return!1;if(r)return t=x.call(t),e=x.call(e),d(t,e,n);var a,s,l=T(t),c=T(e);if(l.length!==c.length)return!1;for(l.sort(),c.sort(),s=l.length-1;0<=s;s--){if(l[s]!==c[s])return!1}for(s=l.length-1;0<=s;s--){if(a=l[s],!d(t[a],e[a],n,i))return!1}return!0}function _(t,e,n){d(t,e,!0)&&u(t,e,n,"notDeepStrictEqual",_)}function g(t,e){if(!t||!e)return!1;if("[object RegExp]"==Object.prototype.toString.call(e))return e.test(t);try{if(babelHelpers.instanceof(t,e))return!0}catch(t){}return!Error.isPrototypeOf(e)&&!0===e.call({},t)}function y(t){var e;try{t()}catch(t){e=t}return e}function v(t,e,n,i){var r;if("function"!=typeof e)throw new TypeError("\"block\" argument must be a function");"string"==typeof n&&(i=n,n=null),r=y(e),i=(n&&n.name?" ("+n.name+").":".")+(i?" "+i:"."),t&&!r&&u(r,n,"Missing expected exception"+i);var o="string"==typeof i,a=!t&&b.isError(r),s=!t&&r&&!n;if((a&&o&&g(r,n)||s)&&u(r,n,"Got unwanted exception"+i),t&&r&&n&&!g(r,n)||!t&&r)throw r}var b=n(71),w=Object.prototype.hasOwnProperty,x=Array.prototype.slice,S="foo"===function(){}.name,E=t.exports=p,M=/\s*function\s+([^\(\s]*)\s*/;E.AssertionError=function(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=h(this),this.generatedMessage=!0);var e=t.stackStartFunction||u;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var n=new Error;if(n.stack){var i=n.stack,r=s(e),o=i.indexOf("\n"+r);if(0<=o){var a=i.indexOf("\n",o+1);i=i.substring(a+1)}this.stack=i}}},b.inherits(E.AssertionError,Error),E.fail=u,E.ok=p,E.equal=function(t,e,n){t!=e&&u(t,e,n,"==",E.equal)},E.notEqual=function(t,e,n){t==e&&u(t,e,n,"!=",E.notEqual)},E.deepEqual=function(t,e,n){d(t,e,!1)||u(t,e,n,"deepEqual",E.deepEqual)},E.deepStrictEqual=function(t,e,n){d(t,e,!0)||u(t,e,n,"deepStrictEqual",E.deepStrictEqual)},E.notDeepEqual=function(t,e,n){d(t,e,!1)&&u(t,e,n,"notDeepEqual",E.notDeepEqual)},E.notDeepStrictEqual=_,E.strictEqual=function(t,e,n){t!==e&&u(t,e,n,"===",E.strictEqual)},E.notStrictEqual=function(t,e,n){t===e&&u(t,e,n,"!==",E.notStrictEqual)},E.throws=function(t,e,n){v(!0,t,e,n)},E.doesNotThrow=function(t,e,n){v(!1,t,e,n)},E.ifError=function(t){if(t)throw t};var T=Object.keys||function(t){var e=[];for(var n in t){w.call(t,n)&&e.push(n)}return e}}).call(e,n(1))},function(t){"use strict";var i=i||{};i.lossless=i.lossless||{},i.lossless.ComponentSpec=i.lossless.ComponentSpec||function(){this.hSamp=0,this.quantTableSel=0,this.vSamp=0},"undefined"!==typeof t&&t.exports&&(t.exports=i.lossless.ComponentSpec)},function(t,e,n){"use strict";var i=i||{};i.lossless=i.lossless||{},i.lossless.DataStream=i.lossless.DataStream||n(8),i.lossless.Utils=i.lossless.Utils||n(18),i.lossless.HuffmanTable=i.lossless.HuffmanTable||function(){this.l=i.lossless.Utils.createArray(4,2,16),this.th=[],this.v=i.lossless.Utils.createArray(4,2,16,200),this.tc=i.lossless.Utils.createArray(4,2),this.tc[0][0]=0,this.tc[1][0]=0,this.tc[2][0]=0,this.tc[3][0]=0,this.tc[0][1]=0,this.tc[1][1]=0,this.tc[2][1]=0,this.tc[3][1]=0,this.th[0]=0,this.th[1]=0,this.th[2]=0,this.th[3]=0},i.lossless.HuffmanTable.MSB=2147483648,i.lossless.HuffmanTable.prototype.read=function(t,e){var n,i,r,o,a,s,l=0;for(n=t.get16(),l+=2;l<n;){if(i=t.get8(),l+=1,3<(r=15&i))throw new Error("ERROR: Huffman table ID > 3");if(2<(o=i>>4))throw new Error("ERROR: Huffman table [Table class > 2 ]");for(this.th[r]=1,this.tc[r][o]=1,a=0;16>a;a+=1){this.l[r][o][a]=t.get8(),l+=1}for(a=0;16>a;a+=1){for(s=0;s<this.l[r][o][a];s+=1){if(l>n)throw new Error("ERROR: Huffman table format error [count>Lh]");this.v[r][o][a][s]=t.get8(),l+=1}}}if(l!==n)throw new Error("ERROR: Huffman table format error [count!=Lf]");for(a=0;4>a;a+=1){for(s=0;2>s;s+=1){0!==this.tc[a][s]&&this.buildHuffTable(e[a][s],this.l[a][s],this.v[a][s])}}return 1},i.lossless.HuffmanTable.prototype.buildHuffTable=function(t,e,n){var r,o,a,s,l;for(256,o=0,a=0;8>a;a+=1){for(s=0;s<e[a];s+=1){for(l=0;l<256>>a+1;l+=1){t[o]=n[a][s]|a+1<<8,o+=1}}}for(a=1;256>o;a+=1,o+=1){t[o]=a|i.lossless.HuffmanTable.MSB}for(r=1,o=0,a=8;16>a;a+=1){for(s=0;s<e[a];s+=1){for(l=0;l<256>>a-7;l+=1){t[256*r+o]=n[a][s]|a+1<<8,o+=1}if(256<=o){if(256<o)throw new Error("ERROR: Huffman table error(1)!");o=0,r+=1}}}},"undefined"!==typeof t&&t.exports&&(t.exports=i.lossless.HuffmanTable)},function(t,e,n){"use strict";var i=i||{};i.lossless=i.lossless||{},i.lossless.DataStream=i.lossless.DataStream||n(8),i.lossless.Utils=i.lossless.Utils||n(18),i.lossless.QuantizationTable=i.lossless.QuantizationTable||function(){this.precision=[],this.tq=[],this.quantTables=i.lossless.Utils.createArray(4,64),this.tq[0]=0,this.tq[1]=0,this.tq[2]=0,this.tq[3]=0},i.lossless.QuantizationTable.enhanceQuantizationTable=function(t,e){var n;for(n=0;8>n;n+=1){t[e[0+n]]*=90,t[e[32+n]]*=90,t[e[16+n]]*=118,t[e[48+n]]*=49,t[e[40+n]]*=71,t[e[8+n]]*=126,t[e[56+n]]*=25,t[e[24+n]]*=106}for(n=0;8>n;n+=1){t[e[0+8*n]]*=90,t[e[4+8*n]]*=90,t[e[2+8*n]]*=118,t[e[6+8*n]]*=49,t[e[5+8*n]]*=71,t[e[1+8*n]]*=126,t[e[7+8*n]]*=25,t[e[3+8*n]]*=106}for(n=0;64>n;n+=1){t[n]>>=6}},i.lossless.QuantizationTable.prototype.read=function(t,e){var n,r,o,a,s=0;for(n=t.get16(),s+=2;s<n;){if(r=t.get8(),s+=1,3<(o=15&r))throw new Error("ERROR: Quantization table ID > 3");if(this.precision[o]=r>>4,0===this.precision[o])this.precision[o]=8;else{if(1!==this.precision[o])throw new Error("ERROR: Quantization table precision error");this.precision[o]=16}if(this.tq[o]=1,8===this.precision[o]){for(a=0;64>a;a+=1){if(s>n)throw new Error("ERROR: Quantization table format error");this.quantTables[o][a]=t.get8(),s+=1}i.lossless.QuantizationTable.enhanceQuantizationTable(this.quantTables[o],e)}else{for(a=0;64>a;a+=1){if(s>n)throw new Error("ERROR: Quantization table format error");this.quantTables[o][a]=t.get16(),s+=2}i.lossless.QuantizationTable.enhanceQuantizationTable(this.quantTables[o],e)}}if(s!==n)throw new Error("ERROR: Quantization table error [count!=Lq]");return 1},"undefined"!==typeof t&&t.exports&&(t.exports=i.lossless.QuantizationTable)},function(t,e,n){"use strict";var i=i||{};i.lossless=i.lossless||{},i.lossless.DataStream=i.lossless.DataStream||n(8),i.lossless.ScanComponent=i.lossless.ScanComponent||n(77),i.lossless.ScanHeader=i.lossless.ScanHeader||function(){this.ah=0,this.al=0,this.numComp=0,this.selection=0,this.spectralEnd=0,this.components=[]},i.lossless.ScanHeader.prototype.read=function(t){var e,n,r,o=0;for(e=t.get16(),o+=2,this.numComp=t.get8(),o+=1,n=0;n<this.numComp;n+=1){if(this.components[n]=new i.lossless.ScanComponent,o>e)throw new Error("ERROR: scan header format error");this.components[n].scanCompSel=t.get8(),o+=1,r=t.get8(),o+=1,this.components[n].dcTabSel=r>>4,this.components[n].acTabSel=15&r}if(this.selection=t.get8(),o+=1,this.spectralEnd=t.get8(),o+=1,r=t.get8(),this.ah=r>>4,this.al=15&r,(o+=1)!==e)throw new Error("ERROR: scan header format error [count!=Ns]");return 1},"undefined"!==typeof t&&t.exports&&(t.exports=i.lossless.ScanHeader)},function(t){"use strict";var i=i||{};i.lossless=i.lossless||{},i.lossless.ScanComponent=i.lossless.ScanComponent||function(){this.acTabSel=0,this.dcTabSel=0,this.scanCompSel=0},"undefined"!==typeof t&&t.exports&&(t.exports=i.lossless.ScanComponent)},function(t,e,n){"use strict";var i=i||{};i.lossless=i.lossless||{},i.lossless.ComponentSpec=i.lossless.ComponentSpec||n(73),i.lossless.DataStream=i.lossless.DataStream||n(8),i.lossless.FrameHeader=i.lossless.FrameHeader||function(){this.components=[],this.dimX=0,this.dimY=0,this.numComp=0,this.precision=0},i.lossless.FrameHeader.prototype.read=function(t){var e,n,r,o,a=0;for(e=t.get16(),a+=2,this.precision=t.get8(),a+=1,this.dimY=t.get16(),a+=2,this.dimX=t.get16(),a+=2,this.numComp=t.get8(),a+=1,n=1;n<=this.numComp;n+=1){if(a>e)throw new Error("ERROR: frame format error");if(r=t.get8(),(a+=1)>=e)throw new Error("ERROR: frame format error [c>=Lf]");o=t.get8(),a+=1,this.components[r]||(this.components[r]=new i.lossless.ComponentSpec),this.components[r].hSamp=o>>4,this.components[r].vSamp=15&o,this.components[r].quantTableSel=t.get8(),a+=1}if(a!==e)throw new Error("ERROR: frame format error [Lf!=count]");return 1},"undefined"!==typeof t&&t.exports&&(t.exports=i.lossless.FrameHeader)},function(t,e,n){"use strict";function i(t,e){if(!babelHelpers.instanceof(t,e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=babelHelpers.typeof(e)&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+babelHelpers.typeof(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(12),s=n(161),l=function(t){function e(n,o){i(this,e);var a=r(this,t.call(this));if(a._id=o,a._arrayBuffer=n.buffer,a._url=n.url,a._dataSet=null,a._niftiHeader=null,a._niftiImage=null,a._ordered=!0,a._orderedData=null,a._qfac=1,!s.isNIFTI(a._arrayBuffer))throw new Error("parsers.nifti could not parse the file");return a._dataSet=s.readHeader(a._arrayBuffer),a._niftiImage=s.readImage(a._dataSet,a._arrayBuffer),a}return o(e,t),e.prototype.seriesInstanceUID=function(){return this._url},e.prototype.numberOfFrames=function(){return this._dataSet.dims[3]},e.prototype.numberOfChannels=function(){var t=1;return 5<=this._dataSet.dims[0]?(t=this._dataSet.dims[5],this._ordered=!1):128===this._dataSet.datatypeCode?t=3:2304===this._dataSet.datatypeCode&&(t=4),t},e.prototype.sopInstanceUID=function(){return 0<arguments.length&&void 0!==arguments[0]?arguments[0]:0},e.prototype.rows=function(){0<arguments.length&&void 0!==arguments[0]&&arguments[0];return this._dataSet.dims[2]},e.prototype.columns=function(){0<arguments.length&&void 0!==arguments[0]&&arguments[0];return this._dataSet.dims[1]},e.prototype.pixelType=function(){0<arguments.length&&void 0!==arguments[0]&&arguments[0];var t=0;return 16!==this._dataSet.datatypeCode&&64!==this._dataSet.datatypeCode&&1536!==this._dataSet.datatypeCode||(t=1),t},e.prototype.bitsAllocated=function(){0<arguments.length&&void 0!==arguments[0]&&arguments[0];return this._dataSet.numBitsPerVoxel},e.prototype.pixelSpacing=function(){0<arguments.length&&void 0!==arguments[0]&&arguments[0];return[this._dataSet.pixDims[1],this._dataSet.pixDims[2],this._dataSet.pixDims[3]]},e.prototype.sliceThickness=function(){return null},e.prototype.imageOrientation=function(){0<arguments.length&&void 0!==arguments[0]&&arguments[0];if(0<this._dataSet.qform_code){var t=0,e=this._dataSet.quatern_b,n=this._dataSet.quatern_c,i=this._dataSet.quatern_d;return 1e-7>(t=1-(e*e+n*n+i*i))?(e*=t=1/_Mathsqrt(e*e+n*n+i*i),n*=t,i*=t,t=0):t=_Mathsqrt(t),0>this._dataSet.pixDims[0]&&(this._rightHanded=!1),[-(t*t+e*e-n*n-i*i),-2*(e*n+t*i),2*(e*i-t*n),-2*(e*n-t*i),-(t*t+n*n-e*e-i*i),2*(n*i+t*e)]}if(0<this._dataSet.sform_code){var r=[-this._dataSet.affine[0][0],-this._dataSet.affine[0][1],this._dataSet.affine[0][2]],o=[-this._dataSet.affine[1][0],-this._dataSet.affine[1][1],this._dataSet.affine[0][2]];return[].concat(r,o)}return this._dataSet.qform_code,[1,0,0,0,1,0]},e.prototype.imagePosition=function(){0<arguments.length&&void 0!==arguments[0]&&arguments[0];return[-this._dataSet.qoffset_x,-this._dataSet.qoffset_y,this._dataSet.qoffset_z]},e.prototype.dimensionIndexValues=function(){0<arguments.length&&void 0!==arguments[0]&&arguments[0];return null},e.prototype.instanceNumber=function(){return 0<arguments.length&&void 0!==arguments[0]?arguments[0]:0},e.prototype.windowCenter=function(){0<arguments.length&&void 0!==arguments[0]&&arguments[0];return null},e.prototype.windowWidth=function(){0<arguments.length&&void 0!==arguments[0]&&arguments[0];return null},e.prototype.rescaleSlope=function(){0<arguments.length&&void 0!==arguments[0]&&arguments[0];return this._dataSet.scl_slope},e.prototype.rescaleIntercept=function(){0<arguments.length&&void 0!==arguments[0]&&arguments[0];return this._dataSet.scl_inter},e.prototype.extractPixelData=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;return this._decompressUncompressed(t)},e.prototype._decompressUncompressed=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=this.numberOfChannels(),n=this.rows(t)*this.columns(t)*e,i=t*n,r=this._niftiImage;if(this._ordered||null!==this._orderedData||this._reorderData(),null!==this._orderedData)return this._orderedData.slice(i,i+n);if(2===this._dataSet.datatypeCode)return new Uint8Array(r,i,n);if(256===this._dataSet.datatypeCode)return new Int8Array(r,i,n);if(512===this._dataSet.datatypeCode)return i*=2,new Uint16Array(r,i,n);if(4===this._dataSet.datatypeCode)return i*=2,new Int16Array(r,i,n);if(8===this._dataSet.datatypeCode)return i*=4,new Int32Array(r,i,n);if(16===this._dataSet.datatypeCode){i*=4;for(var o=new Float32Array(r,i,n),a=0;a<o.length;a++){o[a]!==1/0&&o[a]!==-1/0||(o[a]=0)}return o}window.console.warn("Unknown data type: datatypeCode : "+this._dataSet.datatypeCode)},e.prototype._reorderData=function(){var t=this.numberOfChannels(),e=this.rows()*this.columns()*t,n=this._niftiImage,i=e*this.numberOfFrames(),r=null;this._orderedData=null,2===this._dataSet.datatypeCode?(r=new Uint8Array(n,0,i),this._orderedData=new Uint8Array(r.length)):256===this._dataSet.datatypeCode?(r=new Int8Array(n,0,i),this._orderedData=new Int8Array(r.length)):512===this._dataSet.datatypeCode?(r=new Uint16Array(n,0,i),this._orderedData=new Uint16Array(r.length)):4===this._dataSet.datatypeCode?(r=new Int16Array(n,0,i),this._orderedData=new Int16Array(r.length)):16===this._dataSet.datatypeCode&&(r=new Float32Array(n,0,i),this._orderedData=new Float32Array(r.length));for(var o=r.length/3,a=0,s=0,l=o,c=2*o,h=0;h<o;h++){this._orderedData[a++]=r[s++],this._orderedData[a++]=r[l++],this._orderedData[a++]=r[c++]}this._ordered=!0},e}(a.a);e.a=l},function(t,e,n){"use strict";var i=i||{};i.Utils=i.Utils||n(28),i.NIFTI1=i.NIFTI1||function(){this.littleEndian=!1,this.dim_info=0,this.dims=[],this.intent_p1=0,this.intent_p2=0,this.intent_p3=0,this.intent_code=0,this.datatypeCode=0,this.numBitsPerVoxel=0,this.slice_start=0,this.slice_end=0,this.slice_code=0,this.pixDims=[],this.vox_offset=0,this.scl_slope=1,this.scl_inter=0,this.xyzt_units=0,this.cal_max=0,this.cal_min=0,this.slice_duration=0,this.toffset=0,this.description="",this.aux_file="",this.intent_name="",this.qform_code=0,this.sform_code=0,this.quatern_b=0,this.quatern_c=0,this.quatern_d=0,this.qoffset_x=0,this.qoffset_y=0,this.qoffset_z=0,this.affine=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],this.magic=0,this.isHDR=!1,this.extensionFlag=[0,0,0,0],this.extensionSize=0,this.extensionCode=0},i.NIFTI1.TYPE_NONE=0,i.NIFTI1.TYPE_BINARY=1,i.NIFTI1.TYPE_UINT8=2,i.NIFTI1.TYPE_INT16=4,i.NIFTI1.TYPE_INT32=8,i.NIFTI1.TYPE_FLOAT32=16,i.NIFTI1.TYPE_COMPLEX64=32,i.NIFTI1.TYPE_FLOAT64=64,i.NIFTI1.TYPE_RGB24=128,i.NIFTI1.TYPE_INT8=256,i.NIFTI1.TYPE_UINT16=512,i.NIFTI1.TYPE_UINT32=768,i.NIFTI1.TYPE_INT64=1024,i.NIFTI1.TYPE_UINT64=1280,i.NIFTI1.TYPE_FLOAT128=1536,i.NIFTI1.TYPE_COMPLEX128=1792,i.NIFTI1.TYPE_COMPLEX256=2048,i.NIFTI1.XFORM_UNKNOWN=0,i.NIFTI1.XFORM_SCANNER_ANAT=1,i.NIFTI1.XFORM_ALIGNED_ANAT=2,i.NIFTI1.XFORM_TALAIRACH=3,i.NIFTI1.XFORM_MNI_152=4,i.NIFTI1.SPATIAL_UNITS_MASK=7,i.NIFTI1.TEMPORAL_UNITS_MASK=56,i.NIFTI1.UNITS_UNKNOWN=0,i.NIFTI1.UNITS_METER=1,i.NIFTI1.UNITS_MM=2,i.NIFTI1.UNITS_MICRON=3,i.NIFTI1.UNITS_SEC=8,i.NIFTI1.UNITS_MSEC=16,i.NIFTI1.UNITS_USEC=24,i.NIFTI1.UNITS_HZ=32,i.NIFTI1.UNITS_PPM=40,i.NIFTI1.UNITS_RADS=48,i.NIFTI1.MAGIC_COOKIE=348,i.NIFTI1.MAGIC_NUMBER_LOCATION=344,i.NIFTI1.MAGIC_NUMBER=[110,43,49],i.NIFTI1.MAGIC_NUMBER2=[110,105,49],i.NIFTI1.EXTENSION_HEADER_SIZE=8,i.NIFTI1.prototype.readHeader=function(t){var e,n,r,o,a=new DataView(t),s=i.Utils.getIntAt(a,0,this.littleEndian);if(s!==i.NIFTI1.MAGIC_COOKIE&&(this.littleEndian=!0,s=i.Utils.getIntAt(a,0,this.littleEndian)),s!==i.NIFTI1.MAGIC_COOKIE)throw new Error("This does not appear to be a NIFTI file!");for(this.dim_info=i.Utils.getByteAt(a,39),e=0;8>e;e+=1){o=40+2*e,this.dims[e]=i.Utils.getShortAt(a,o,this.littleEndian)}for(this.intent_p1=i.Utils.getFloatAt(a,56,this.littleEndian),this.intent_p2=i.Utils.getFloatAt(a,60,this.littleEndian),this.intent_p3=i.Utils.getFloatAt(a,64,this.littleEndian),this.intent_code=i.Utils.getShortAt(a,68,this.littleEndian),this.datatypeCode=i.Utils.getShortAt(a,70,this.littleEndian),this.numBitsPerVoxel=i.Utils.getShortAt(a,72,this.littleEndian),this.slice_start=i.Utils.getShortAt(a,74,this.littleEndian),e=0;8>e;e+=1){o=76+4*e,this.pixDims[e]=i.Utils.getFloatAt(a,o,this.littleEndian)}for(this.vox_offset=i.Utils.getFloatAt(a,108,this.littleEndian),this.scl_slope=i.Utils.getFloatAt(a,112,this.littleEndian),this.scl_inter=i.Utils.getFloatAt(a,116,this.littleEndian),this.slice_end=i.Utils.getShortAt(a,120,this.littleEndian),this.slice_code=i.Utils.getByteAt(a,122),this.xyzt_units=i.Utils.getByteAt(a,123),this.cal_max=i.Utils.getFloatAt(a,124,this.littleEndian),this.cal_min=i.Utils.getFloatAt(a,128,this.littleEndian),this.slice_duration=i.Utils.getFloatAt(a,132,this.littleEndian),this.toffset=i.Utils.getFloatAt(a,136,this.littleEndian),this.description=i.Utils.getStringAt(a,148,228),this.aux_file=i.Utils.getStringAt(a,228,252),this.qform_code=i.Utils.getShortAt(a,252,this.littleEndian),this.sform_code=i.Utils.getShortAt(a,254,this.littleEndian),this.quatern_b=i.Utils.getFloatAt(a,256,this.littleEndian),this.quatern_c=i.Utils.getFloatAt(a,260,this.littleEndian),this.quatern_d=i.Utils.getFloatAt(a,264,this.littleEndian),this.qoffset_x=i.Utils.getFloatAt(a,268,this.littleEndian),this.qoffset_y=i.Utils.getFloatAt(a,272,this.littleEndian),this.qoffset_z=i.Utils.getFloatAt(a,276,this.littleEndian),n=0;3>n;n+=1){for(r=0;4>r;r+=1){o=280+4*(4*n+r),this.affine[n][r]=i.Utils.getFloatAt(a,o,this.littleEndian)}}this.affine[3][0]=0,this.affine[3][1]=0,this.affine[3][2]=0,this.affine[3][3]=1,this.intent_name=i.Utils.getStringAt(a,328,344),this.magic=i.Utils.getStringAt(a,344,348),this.isHDR=this.magic===i.NIFTI1.MAGIC_NUMBER2,a.byteLength>i.NIFTI1.MAGIC_COOKIE&&(this.extensionFlag[0]=i.Utils.getByteAt(a,348),this.extensionFlag[1]=i.Utils.getByteAt(a,349),this.extensionFlag[2]=i.Utils.getByteAt(a,350),this.extensionFlag[3]=i.Utils.getByteAt(a,351),this.extensionFlag[0]&&(this.extensionSize=this.getExtensionSize(a),this.extensionCode=this.getExtensionCode(a)))},i.NIFTI1.prototype.toFormattedString=function(){var t=i.Utils.formatNumber,e="";return e+="Dim Info = "+this.dim_info+"\n",e+="Image Dimensions (1-8): "+this.dims[0]+", "+this.dims[1]+", "+this.dims[2]+", "+this.dims[3]+", "+this.dims[4]+", "+this.dims[5]+", "+this.dims[6]+", "+this.dims[7]+"\n",e+="Intent Parameters (1-3): "+this.intent_p1+", "+this.intent_p2+", "+this.intent_p3+"\n",e+="Intent Code = "+this.intent_code+"\n",e+="Datatype = "+this.datatypeCode+" ("+this.getDatatypeCodeString(this.datatypeCode)+")\n",e+="Bits Per Voxel = "+this.numBitsPerVoxel+"\n",e+="Slice Start = "+this.slice_start+"\n",e+="Voxel Dimensions (1-8): "+t(this.pixDims[0])+", "+t(this.pixDims[1])+", "+t(this.pixDims[2])+", "+t(this.pixDims[3])+", "+t(this.pixDims[4])+", "+t(this.pixDims[5])+", "+t(this.pixDims[6])+", "+t(this.pixDims[7])+"\n",e+="Image Offset = "+this.vox_offset+"\n",e+="Data Scale:  Slope = "+t(this.scl_slope)+"  Intercept = "+t(this.scl_inter)+"\n",e+="Slice End = "+this.slice_end+"\n",e+="Slice Code = "+this.slice_code+"\n",e+="Units Code = "+this.xyzt_units+" ("+this.getUnitsCodeString(i.NIFTI1.SPATIAL_UNITS_MASK&this.xyzt_units)+", "+this.getUnitsCodeString(i.NIFTI1.TEMPORAL_UNITS_MASK&this.xyzt_units)+")\n",e+="Display Range:  Max = "+t(this.cal_max)+"  Min = "+t(this.cal_min)+"\n",e+="Slice Duration = "+this.slice_duration+"\n",e+="Time Axis Shift = "+this.toffset+"\n",e+="Description: \""+this.description+"\"\n",e+="Auxiliary File: \""+this.aux_file+"\"\n",e+="Q-Form Code = "+this.qform_code+" ("+this.getTransformCodeString(this.qform_code)+")\n",e+="S-Form Code = "+this.sform_code+" ("+this.getTransformCodeString(this.sform_code)+")\n",e+="Quaternion Parameters:  b = "+t(this.quatern_b)+"  c = "+t(this.quatern_c)+"  d = "+t(this.quatern_d)+"\n",e+="Quaternion Offsets:  x = "+this.qoffset_x+"  y = "+this.qoffset_y+"  z = "+this.qoffset_z+"\n",e+="S-Form Parameters X: "+t(this.affine[0][0])+", "+t(this.affine[0][1])+", "+t(this.affine[0][2])+", "+t(this.affine[0][3])+"\n",e+="S-Form Parameters Y: "+t(this.affine[1][0])+", "+t(this.affine[1][1])+", "+t(this.affine[1][2])+", "+t(this.affine[1][3])+"\n",e+="S-Form Parameters Z: "+t(this.affine[2][0])+", "+t(this.affine[2][1])+", "+t(this.affine[2][2])+", "+t(this.affine[2][3])+"\n",e+="Intent Name: \""+this.intent_name+"\"\n",this.extensionFlag[0]&&(e+="Extension: Size = "+this.extensionSize+"  Code = "+this.extensionCode+"\n"),e},i.NIFTI1.prototype.getDatatypeCodeString=function(t){return t===i.NIFTI1.TYPE_UINT8?"1-Byte Unsigned Integer":t===i.NIFTI1.TYPE_INT16?"2-Byte Signed Integer":t===i.NIFTI1.TYPE_INT32?"4-Byte Signed Integer":t===i.NIFTI1.TYPE_FLOAT32?"4-Byte Float":t===i.NIFTI1.TYPE_FLOAT64?"8-Byte Float":t===i.NIFTI1.TYPE_RGB24?"RGB":t===i.NIFTI1.TYPE_INT8?"1-Byte Signed Integer":t===i.NIFTI1.TYPE_UINT16?"2-Byte Unsigned Integer":t===i.NIFTI1.TYPE_UINT32?"4-Byte Unsigned Integer":t===i.NIFTI1.TYPE_INT64?"8-Byte Signed Integer":t===i.NIFTI1.TYPE_UINT64?"8-Byte Unsigned Integer":"Unknown"},i.NIFTI1.prototype.getTransformCodeString=function(t){return t===i.NIFTI1.XFORM_SCANNER_ANAT?"Scanner":t===i.NIFTI1.XFORM_ALIGNED_ANAT?"Aligned":t===i.NIFTI1.XFORM_TALAIRACH?"Talairach":t===i.NIFTI1.XFORM_MNI_152?"MNI":"Unknown"},i.NIFTI1.prototype.getUnitsCodeString=function(t){return t===i.NIFTI1.UNITS_METER?"Meters":t===i.NIFTI1.UNITS_MM?"Millimeters":t===i.NIFTI1.UNITS_MICRON?"Microns":t===i.NIFTI1.UNITS_SEC?"Seconds":t===i.NIFTI1.UNITS_MSEC?"Milliseconds":t===i.NIFTI1.UNITS_USEC?"Microseconds":t===i.NIFTI1.UNITS_HZ?"Hz":t===i.NIFTI1.UNITS_PPM?"PPM":t===i.NIFTI1.UNITS_RADS?"Rads":"Unknown"},i.NIFTI1.prototype.getQformMat=function(){return this.convertNiftiQFormToNiftiSForm(this.quatern_b,this.quatern_c,this.quatern_d,this.qoffset_x,this.qoffset_y,this.qoffset_z,this.pixDims[1],this.pixDims[2],this.pixDims[3],this.pixDims[0])},i.NIFTI1.prototype.convertNiftiQFormToNiftiSForm=function(t,e,n,i,r,o,a,s,l,c){var h,u,p,d,f=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],m=t,_=e,g=n;return f[3][0]=f[3][1]=f[3][2]=0,f[3][3]=1,1e-7>(h=1-(m*m+_*_+g*g))?(m*=h=1/_Mathsqrt(m*m+_*_+g*g),_*=h,g*=h,h=0):h=_Mathsqrt(h),u=0<a?a:1,p=0<s?s:1,d=0<l?l:1,0>c&&(d=-d),f[0][0]=(h*h+m*m-_*_-g*g)*u,f[0][1]=2*(m*_-h*g)*p,f[0][2]=2*(m*g+h*_)*d,f[1][0]=2*(m*_+h*g)*u,f[1][1]=(h*h+_*_-m*m-g*g)*p,f[1][2]=2*(_*g-h*m)*d,f[2][0]=2*(m*g-h*_)*u,f[2][1]=2*(_*g+h*m)*p,f[2][2]=(h*h+g*g-_*_-m*m)*d,f[0][3]=i,f[1][3]=r,f[2][3]=o,f},i.NIFTI1.prototype.convertNiftiSFormToNEMA=function(t){var e,n,i,r,o,a,s,l,c,h,u,p,d,f,m,_,g,y,v,b,w,x,S,E,M,T,A,P,C,I,L,R,O;if(f=0,T=[[0,0,0],[0,0,0],[0,0,0]],A=[[0,0,0],[0,0,0],[0,0,0]],e=t[0][0],n=t[0][1],i=t[0][2],r=t[1][0],o=t[1][1],a=t[1][2],s=t[2][0],l=t[2][1],c=t[2][2],0===(h=_Mathsqrt(e*e+r*r+s*s)))return null;if(e/=h,r/=h,s/=h,0===(h=_Mathsqrt(n*n+o*o+l*l)))return null;if(n/=h,o/=h,l/=h,h=e*n+r*o+s*l,1e-4<_Mathabs(h)){if(n-=h*e,o-=h*r,l-=h*s,0===(h=_Mathsqrt(n*n+o*o+l*l)))return null;n/=h,o/=h,l/=h}if(0===(h=_Mathsqrt(i*i+a*a+c*c))?(i=r*l-s*o,a=s*n-l*e,c=e*o-r*n):(i/=h,a/=h,c/=h),h=e*i+r*a+s*c,1e-4<_Mathabs(h)){if(i-=h*e,a-=h*r,c-=h*s,0===(h=_Mathsqrt(i*i+a*a+c*c)))return null;i/=h,a/=h,c/=h}if(h=n*i+o*a+l*c,1e-4<_Mathabs(h)){if(i-=h*n,a-=h*o,c-=h*l,0===(h=_Mathsqrt(i*i+a*a+c*c)))return null;i/=h,a/=h,c/=h}if(T[0][0]=e,T[0][1]=n,T[0][2]=i,T[1][0]=r,T[1][1]=o,T[1][2]=a,T[2][0]=s,T[2][1]=l,T[2][2]=c,0===(u=this.nifti_mat33_determ(T)))return null;for(M=-666,y=w=x=S=1,v=2,b=3,p=1;3>=p;p+=1){for(d=1;3>=d;d+=1){if(p!==d)for(f=1;3>=f;f+=1){if(p!==f&&d!==f)for(A[0][0]=A[0][1]=A[0][2]=A[1][0]=A[1][1]=A[1][2]=A[2][0]=A[2][1]=A[2][2]=0,m=-1;1>=m;m+=2){for(_=-1;1>=_;_+=2){for(g=-1;1>=g;g+=2){A[0][p-1]=m,A[1][d-1]=_,A[2][f-1]=g,0<this.nifti_mat33_determ(A)*u&&(h=(E=this.nifti_mat33_mul(A,T))[0][0]+E[1][1]+E[2][2])>M&&(M=h,y=p,v=d,b=f,w=m,x=_,S=g)}}}}}}switch(P=C=I=L=R=O=0,y*w){case 1:P="X",L="+";break;case-1:P="X",L="-";break;case 2:P="Y",L="+";break;case-2:P="Y",L="-";break;case 3:P="Z",L="+";break;case-3:P="Z",L="-";}switch(v*x){case 1:C="X",R="+";break;case-1:C="X",R="-";break;case 2:C="Y",R="+";break;case-2:C="Y",R="-";break;case 3:C="Z",R="+";break;case-3:C="Z",R="-";}switch(b*S){case 1:I="X",O="+";break;case-1:I="X",O="-";break;case 2:I="Y",O="+";break;case-2:I="Y",O="-";break;case 3:I="Z",O="+";break;case-3:I="Z",O="-";}return P+C+I+L+R+O},i.NIFTI1.prototype.nifti_mat33_mul=function(t,e){var n,i,r=[[0,0,0],[0,0,0],[0,0,0]];for(n=0;3>n;n+=1){for(i=0;3>i;i+=1){r[n][i]=t[n][0]*e[0][i]+t[n][1]*e[1][i]+t[n][2]*e[2][i]}}return r},i.NIFTI1.prototype.nifti_mat33_determ=function(t){var e,n,i,r,o,a,s,l,c;return e=t[0][0],n=t[0][1],i=t[0][2],r=t[1][0],o=t[1][1],a=t[1][2],s=t[2][0],l=t[2][1],c=t[2][2],e*o*c-e*l*a-r*n*c+r*l*i+s*n*a-s*o*i},i.NIFTI1.prototype.getExtensionLocation=function(){return i.NIFTI1.MAGIC_COOKIE+4},i.NIFTI1.prototype.getExtensionSize=function(t){return i.Utils.getIntAt(t,this.getExtensionLocation(),this.littleEndian)},i.NIFTI1.prototype.getExtensionCode=function(t){return i.Utils.getIntAt(t,this.getExtensionLocation()+4,this.littleEndian)},"undefined"!==typeof t&&t.exports&&(t.exports=i.NIFTI1)},function(t,e,n){"use strict";function i(t,e){if(!babelHelpers.instanceof(t,e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=babelHelpers.typeof(e)&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+babelHelpers.typeof(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(12),s=n(0),l=n(19),c=n(163),h=function(t){function e(n,o){i(this,e);var a=r(this,t.call(this));a._id=o,a._arrayBuffer=n.buffer,a._url=n.url,a._dataSet=null,a._unpackedData=null;try{a._dataSet=c.parse(a._arrayBuffer)}catch(t){window.console.log("ooops... :(")}return a}return o(e,t),e.prototype.rightHanded=function(){return this._dataSet.space.match(/^right-anterior-superior/)||this._dataSet.space.match(/^left-posterior-superior/)?this._rightHanded=!0:this._rightHanded=!1,this._rightHanded},e.prototype.seriesInstanceUID=function(){return this._url},e.prototype.numberOfFrames=function(){return this._dataSet.sizes[2]},e.prototype.numberOfChannels=function(){return 1},e.prototype.sopInstanceUID=function(){return 0<arguments.length&&void 0!==arguments[0]?arguments[0]:0},e.prototype.rows=function(){0<arguments.length&&void 0!==arguments[0]&&arguments[0];return this._dataSet.sizes[1]},e.prototype.columns=function(){0<arguments.length&&void 0!==arguments[0]&&arguments[0];return this._dataSet.sizes[0]},e.prototype.pixelType=function(){0<arguments.length&&void 0!==arguments[0]&&arguments[0];var t=0;return"float"===this._dataSet.type&&(t=1),t},e.prototype.bitsAllocated=function(){0<arguments.length&&void 0!==arguments[0]&&arguments[0];var t=1;return"int8"===this._dataSet.type||"uint8"===this._dataSet.type||"char"===this._dataSet.type?t=8:"int16"===this._dataSet.type||"uint16"===this._dataSet.type||"short"===this._dataSet.type?t=16:"int32"!==this._dataSet.type&&"uint32"!==this._dataSet.type&&"float"!==this._dataSet.type||(t=32),t},e.prototype.pixelSpacing=function(){0<arguments.length&&void 0!==arguments[0]&&arguments[0];var t=new s.f(this._dataSet.spaceDirections[0][0],this._dataSet.spaceDirections[0][1],this._dataSet.spaceDirections[0][2]),e=new s.f(this._dataSet.spaceDirections[1][0],this._dataSet.spaceDirections[1][1],this._dataSet.spaceDirections[1][2]),n=new s.f(this._dataSet.spaceDirections[2][0],this._dataSet.spaceDirections[2][1],this._dataSet.spaceDirections[2][2]);return[t.length(),e.length(),n.length()]},e.prototype.imageOrientation=function(){0<arguments.length&&void 0!==arguments[0]&&arguments[0];var t=this._dataSet.space.match(/right/)?-1:1,e=this._dataSet.space.match(/anterior/)?-1:1,n=new s.f(this._dataSet.spaceDirections[0][0]*t,this._dataSet.spaceDirections[0][1]*e,this._dataSet.spaceDirections[0][2]);n.normalize();var i=new s.f(this._dataSet.spaceDirections[1][0]*t,this._dataSet.spaceDirections[1][1]*e,this._dataSet.spaceDirections[1][2]);return i.normalize(),[n.x,n.y,n.z,i.x,i.y,i.z]},e.prototype.imagePosition=function(){0<arguments.length&&void 0!==arguments[0]&&arguments[0];return[this._dataSet.spaceOrigin[0],this._dataSet.spaceOrigin[1],this._dataSet.spaceOrigin[2]]},e.prototype.extractPixelData=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;return this._decompressUncompressed(t)},e.prototype._decompressUncompressed=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=this._dataSet.buffer,n=this.numberOfChannels(),i=this.rows(t)*this.columns(t)*n;this.rightHanded()||(t=this.numberOfFrames()-1-t);var r=t*i;if(null===this._unpackedData&&"gzip"===this._dataSet.encoding){var o=l.inflate(this._dataSet.buffer);this._unpackedData=o.buffer,e=this._unpackedData}else"gzip"===this._dataSet.encoding&&(e=this._unpackedData);return"int8"===this._dataSet.type||"char"===this._dataSet.type?new Int8Array(e,r,i):"uint8"===this._dataSet.type?new Uint8Array(e,r,i):"int16"===this._dataSet.type||"short"===this._dataSet.type?(r*=2,new Int16Array(e,r,i)):"uint16"===this._dataSet.type?(r*=2,new Uint16Array(e,r,i)):"int32"===this._dataSet.type?(r*=4,new Int32Array(e,r,i)):"uint32"===this._dataSet.type?(r*=4,new Uint32Array(e,r,i)):"float"===this._dataSet.type?(r*=4,new Float32Array(e,r,i)):void 0},e}(a.a);e.a=h},function(t,e,n){"use strict";function i(t,e){if(!babelHelpers.instanceof(t,e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=babelHelpers.typeof(e)&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+babelHelpers.typeof(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(12),s=n(0),l=function(t){function e(n,o){i(this,e);var a=r(this,t.call(this));if(a._id=o,a._url=n.url,a._buffer=null,a._bufferPos=0,a._dataPos=0,a._pixelData=null,a._version=1,a._width=0,a._height=0,a._depth=0,a._nframes=0,a._type=e.MRI_UCHAR,a._dof=0,a._goodRASFlag=0,a._spacingXYZ=[1,1,1],a._Xras=[-1,0,0],a._Yras=[0,0,-1],a._Zras=[0,1,0],a._Cras=[0,0,0],a._tr=0,a._flipAngle=0,a._te=0,a._ti=0,a._fov=0,a._tags=[],a._origin=[0,0,0],a._imageOrient=[0,0,0,0,0,0],a._buffer=n.buffer,a._version=a._readInt(),a._swapEndian=!1,1==a._version);else{if(16777216!=a._version)throw new Error("MGH/MGZ parser: Unknown Endian.  Version reports: "+a._version);a._swapEndian=!0,a._version=a._swap32(a._version)}a._width=a._readInt(),a._height=a._readInt(),a._depth=a._readInt(),a._nframes=a._readInt(),a._type=a._readInt(),a._dof=a._readInt(),a._goodRASFlag=a._readShort(),a._spacingXYZ=a._readFloat(3),a._Xras=a._readFloat(3),a._Yras=a._readFloat(3),a._Zras=a._readFloat(3),a._Cras=a._readFloat(3),a._bufferPos=284;var l=a._width*a._height*a._depth*a._nframes;a._width,a._height,a._depth;switch(a._type){case e.MRI_UCHAR:a._pixelData=a._readUChar(l);break;case e.MRI_INT:a._pixelData=a._readInt(l);break;case e.MRI_FLOAT:a._pixelData=a._readFloat(l);break;case e.MRI_SHORT:a._pixelData=a._readShort(l);break;default:throw Error("MGH/MGZ parser: Unknown _type.  _type reports: "+a._type);}a._tr=a._readFloat(1),a._flipAngle=a._readFloat(1),a._te=a._readFloat(1),a._ti=a._readFloat(1),a._fov=a._readFloat(1);for(var c=new TextDecoder,h=a._tagReadStart();void 0!=h[0];){var u=h[0],p=h[1],d=void 0;switch(u){case e.TAG_OLD_MGH_XFORM:case e.TAG_MGH_XFORM:d=a._readChar(p);break;default:d=a._readChar(p);}d=c.decode(d),a._tags.push({tagType:u,tagValue:d}),h=a._tagReadStart()}var f=new s.f().fromArray(a._Xras),m=new s.f().fromArray(a._Yras),_=new s.f().crossVectors(f,m),g=new s.f().fromArray(a._Zras);_.angleTo(g)>_MathPI/2&&(a._rightHanded=!1),a._imageOrient=[-a._Xras[0],-a._Xras[1],a._Xras[2],-a._Yras[0],-a._Yras[1],a._Yras[2]];for(var y=a._width/2,v=a._height/2,b=a._depth/2,w=0;3>w;++w){a._origin[w]=a._Cras[w]-(a._Xras[w]*a._spacingXYZ[0]*y+a._Yras[w]*a._spacingXYZ[1]*v+a._Zras[w]*a._spacingXYZ[2]*b)}return a._origin=[-a._origin[0],-a._origin[1],a._origin[2]],a}return o(e,t),e.prototype.seriesInstanceUID=function(){return this._url},e.prototype.numberOfFrames=function(){return this._depth},e.prototype.sopInstanceUID=function(){return 0<arguments.length&&void 0!==arguments[0]?arguments[0]:0},e.prototype.rows=function(){0<arguments.length&&void 0!==arguments[0]&&arguments[0];return this._width},e.prototype.columns=function(){0<arguments.length&&void 0!==arguments[0]&&arguments[0];return this._height},e.prototype.pixelType=function(){0<arguments.length&&void 0!==arguments[0]&&arguments[0];switch(this._type){case e.MRI_UCHAR:case e.MRI_INT:case e.MRI_SHORT:return 0;case e.MRI_FLOAT:return 1;default:throw Error("MGH/MGZ parser: Unknown _type.  _type reports: "+this._type);}},e.prototype.bitsAllocated=function(){0<arguments.length&&void 0!==arguments[0]&&arguments[0];switch(this._type){case e.MRI_UCHAR:return 8;case e.MRI_SHORT:return 16;case e.MRI_INT:case e.MRI_FLOAT:return 32;default:throw Error("MGH/MGZ parser: Unknown _type.  _type reports: "+this._type);}},e.prototype.pixelSpacing=function(){0<arguments.length&&void 0!==arguments[0]&&arguments[0];return this._spacingXYZ},e.prototype.imageOrientation=function(){0<arguments.length&&void 0!==arguments[0]&&arguments[0];return this._imageOrient},e.prototype.imagePosition=function(){0<arguments.length&&void 0!==arguments[0]&&arguments[0];return this._origin},e.prototype.extractPixelData=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=this._width*this._height;return this._pixelData.slice(t*e,(t+1)*e)},e.prototype._readInt=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,e=new DataView(this._buffer.slice(this._bufferPos,this._bufferPos+4*t));this._bufferPos+=4*t;var n;if(1==t)n=e.getInt32(0,this._swapEndian);else{n=new Int32Array(t);for(var i=0;i<t;i++){n[i]=e.getInt32(4*i,this._swapEndian)}}return n},e.prototype._readShort=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,e=new DataView(this._buffer.slice(this._bufferPos,this._bufferPos+2*t));this._bufferPos+=2*t;var n;if(1==t)n=e.getInt16(0,this._swapEndian);else{n=new Int16Array(t);for(var i=0;i<t;i++){n[i]=e.getInt16(2*i,this._swapEndian)}}return n},e.prototype._readLong=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,e=new DataView(this._buffer.slice(this._bufferPos,this._bufferPos+8*t));this._bufferPos+=8*t;for(var n=new Uint16Array(t),i=0;i<t;i++){var r=0,o=0;this._swapendian?r=4:o=4;var a=e.getInt32(8*i+r,this._swapEndian),s=e.getInt32(8*i+o,this._swapEndian);0!=a&&(console.log("Unable to read Int64 with high word: "+a+"low word: "+s),s=void 0),n[i]=s}return 0==t?void 0:1==t?n[0]:n},e.prototype._readChar=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,e=new DataView(this._buffer.slice(this._bufferPos,this._bufferPos+t));this._bufferPos+=t;var n;if(1==t)n=e.getInt8(0,this._swapEndian);else{n=new Int8Array(t);for(var i=0;i<t;i++){n[i]=e.getInt8(i,this._swapEndian)}}return n},e.prototype._readUChar=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,e=new DataView(this._buffer.slice(this._bufferPos,this._bufferPos+t));this._bufferPos+=t;var n;if(1==t)n=e.getUint8(0,this._swapEndian);else{n=new Uint8Array(t);for(var i=0;i<t;i++){n[i]=e.getUint8(i,this._swapEndian)}}return n},e.prototype._readFloat=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,e=new DataView(this._buffer.slice(this._bufferPos,this._bufferPos+4*t));this._bufferPos+=4*t;var n;if(1==t)n=e.getFloat32(0,this._swapEndian);else{n=new Float32Array(t);for(var i=0;i<t;i++){n[i]=e.getFloat32(4*i,this._swapEndian)}}return n},e.prototype._tagReadStart=function(){if(this._bufferPos>=this._buffer.byteLength)return[void 0,void 0];var t=this._readInt(),n;switch(t){case e.TAG_OLD_MGH_XFORM:n=this._readInt(),n-=1;break;case e.TAG_OLD_SURF_GEOM:case e.TAG_OLD_USEREALRAS:case e.TAG_OLD_COLORTABLE:n=0;break;default:n=this._readLong();}return void 0==n&&(t=void 0),[t,n]},e}(a.a);e.a=l,l.MRI_UCHAR=0,l.MRI_INT=1,l.MRI_LONG=2,l.MRI_FLOAT=3,l.MRI_SHORT=4,l.MRI_BITMAP=5,l.MRI_TENSOR=6,l.MRI_FLOAT_COMPLEX=7,l.MRI_DOUBLE_COMPLEX=8,l.MRI_RGB=9,l.TAG_OLD_COLORTABLE=1,l.TAG_OLD_USEREALRAS=2,l.TAG_CMDLINE=3,l.TAG_USEREALRAS=4,l.TAG_COLORTABLE=5,l.TAG_GCAMORPH_GEOM=10,l.TAG_GCAMORPH_TYPE=11,l.TAG_GCAMORPH_LABELS=12,l.TAG_OLD_SURF_GEOM=20,l.TAG_SURF_GEOM=21,l.TAG_OLD_MGH_XFORM=30,l.TAG_MGH_XFORM=31,l.TAG_GROUP_AVG_SURFACE_AREA=32,l.TAG_AUTO_ALIGN=33,l.TAG_SCALAR_DOUBLE=40,l.TAG_PEDIR=41,l.TAG_MRI_FRAME=42,l.TAG_FIELDSTRENGTH=43},function(t,e){"use strict";function i(t,e){if(!babelHelpers.instanceof(t,e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0,i;n<e.length;n++){i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=function(){function t(){i(this,t),this._id=-1,this._worldCoordinates=null,this._dataCoordinates=null,this._screenCoordinates=null,this._value=null}return r(t,[{key:"worldCoordinates",set:function set(t){this._worldCoordinates=t},get:function get(){return this._worldCoordinates}},{key:"dataCoordinates",set:function set(t){this._dataCoordinates=t},get:function get(){return this._dataCoordinates}},{key:"screenCoordinates",set:function set(t){this._screenCoordinates=t},get:function get(){return this._screenCoordinates}},{key:"value",set:function set(t){this._value=t},get:function get(){return this._value}},{key:"id",set:function set(t){this._id=t},get:function get(){return this._id}}]),t}();e.a=o},function(t,e,n){t.exports=n(85)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(86);n.d(e,"OrthographicCamera",function(){return i.a});var r=n(94);n.d(e,"TrackballControl",function(){return r.a}),n.d(e,"TrackballOrthoControl",function(){return r.b});var o=n(97);n.d(e,"ColorsCore",function(){return o.a}),n.d(e,"IntersectionsCore",function(){return o.b}),n.d(e,"UtilsCore",function(){return o.c}),n.d(e,"ValidatorsCore",function(){return o.d});var a=n(98);n.d(e,"SliceGeometry",function(){return a.a}),n.d(e,"VoxelGeometry",function(){return a.b});var s=n(99);n.d(e,"BorderHelper",function(){return s.a}),n.d(e,"BoundingBoxHelper",function(){return s.b}),n.d(e,"ContourHelper",function(){return s.c}),n.d(e,"LocalizerHelper",function(){return s.d}),n.d(e,"LutHelper",function(){return s.e}),n.d(e,"SegmentationLutHelper",function(){return s.h}),n.d(e,"ProgressBarHelper",function(){return s.g}),n.d(e,"ProgressBarEventBasedHelper",function(){return s.f}),n.d(e,"SliceHelper",function(){return s.i}),n.d(e,"StackHelper",function(){return s.j}),n.d(e,"VolumeRenderingHelper",function(){return s.k});var l=n(111);n.d(e,"VolumeLoader",function(){return l.a});var c=n(164);n.d(e,"FrameModel",function(){return c.a}),n.d(e,"StackModel",function(){return c.c}),n.d(e,"SeriesModel",function(){return c.b}),n.d(e,"VoxelModel",function(){return c.d});var h=n(165);n.d(e,"DicomParser",function(){return h.a}),n.d(e,"MghParser",function(){return h.b}),n.d(e,"NiftiParser",function(){return h.c}),n.d(e,"NrrdParser",function(){return h.d});var u=n(166);n.d(e,"SegmentationPreset",function(){return u.a});var p=n(169);n.d(e,"ContourUniformShader",function(){return p.b}),n.d(e,"ContourFragmentShader",function(){return p.a}),n.d(e,"ContourVertexShader",function(){return p.c}),n.d(e,"DataUniformShader",function(){return p.e}),n.d(e,"DataFragmentShader",function(){return p.d}),n.d(e,"DataVertexShader",function(){return p.f}),n.d(e,"VRUniformShader",function(){return p.n}),n.d(e,"VRFragmentShader",function(){return p.m}),n.d(e,"VRVertexShader",function(){return p.o}),n.d(e,"LayerUniformShader",function(){return p.h}),n.d(e,"LayerFragmentShader",function(){return p.g}),n.d(e,"LayerVertexShader",function(){return p.i}),n.d(e,"LocalizerUniformShader",function(){return p.k}),n.d(e,"LocalizerFragmentShader",function(){return p.j}),n.d(e,"LocalizerVertexShader",function(){return p.l});var d=n(173);n.d(e,"AnnotationWidget",function(){return d.b}),n.d(e,"BiRulerWidget",function(){return d.c}),n.d(e,"HandleWidget",function(){return d.d}),n.d(e,"RoiWidget",function(){return d.e}),n.d(e,"RulerWidget",function(){return d.f}),n.d(e,"VoxelProbeWidget",function(){return d.g}),n.d(e,"AngleWidget",function(){return d.a});var f=n(180);window.console.log("AMI "+f.version+" ( ThreeJS "+f.config.threeVersion+")")},function(t,e,n){"use strict";var i=n(87);n.d(e,"a",function(){return i.a})},function(t,e,n){"use strict";function i(t,e){if(!babelHelpers.instanceof(t,e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=babelHelpers.typeof(e)&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+babelHelpers.typeof(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(10),s=n(15),l=n(0),c=function(){function t(t,e){for(var n=0,i;n<e.length;n++){i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),h=function(t){function e(n,o,a,s,c,h){i(this,e);var u=r(this,t.call(this,n,o,a,s,c,h));return u._front=null,u._back=null,u._directions=[new l.f(1,0,0),new l.f(0,1,0),new l.f(0,0,1)],u._directionsLabel=["A","P","L","R","I","S"],u._orientation="default",u._convention="radio",u._stackOrientation=0,u._right=null,u._up=null,u._direction=null,u._controls=null,u._box=null,u._canvas={width:null,height:null},u._fromFront=!0,u._angle=0,u}return o(e,t),e.prototype.init=function(t,e,n,i,r,o){if(window.console.warn("cameras.orthographic.init(...) is deprecated.\n      Use .cosines, .controls, .box and .canvas instead."),!(s.a.vector3(t)&&s.a.vector3(e)&&s.a.vector3(n)&&s.a.box(r)&&i))return window.console.log("Invalid input provided."),!1;this._right=t,this._up=this._adjustTopDirection(t,e),this._direction=new l.f().crossVectors(this._right,this._up),this._controls=i,this._box=r,this._canvas=o;var c={position:this._box.center,direction:this._direction},h=this._orderIntersections(a.a.rayBox(c,this._box),this._direction);this._front=h[0],this._back=h[1],this.up.set(this._up.x,this._up.y,this._up.z),this._updateCanvas(),this._updatePositionAndTarget(this._front,this._back),this._updateMatrices(),this._updateDirections()},e.prototype.update=function(){if("default"===this._orientation)switch(this._getMaxIndex(this._directions[2])){case 0:this._orientation="sagittal";break;case 1:this._orientation="coronal";break;case 2:this._orientation="axial";break;default:this._orientation="free";}if("free"===this._orientation)this._right=this._directions[0],this._up=this._directions[1],this._direction=this._directions[2];else{var t=this.leftDirection(),e=this._directions[t],n=this.posteriorDirection(),i=this._directions[n],r=this.superiorDirection(),o=this._directions[r];if("radio"===this._convention)switch(this._orientation){case"axial":0<i.y&&i.negate(),0>o.z&&o.negate(),this._right=e,this._up=i,this._direction=o;break;case"coronal":0>o.z&&o.negate(),0>i.y&&i.negate(),this._right=e,this._up=o,this._direction=i;break;case"sagittal":0>o.z&&o.negate(),0<e.x&&e.negate(),this._right=i,this._up=o,this._direction=e;break;default:window.console.warn("\""+this._orientation+"\" orientation is not valid.\n                (choices: axial, coronal, sagittal)");}else if("neuro"===this._convention)switch(this._orientation){case"axial":0<i.y&&i.negate(),0<o.z&&o.negate(),this._right=e,this._up=i,this._direction=o;break;case"coronal":0>o.z&&o.negate(),0<i.y&&i.negate(),this._right=e,this._up=o,this._direction=i;break;case"sagittal":0>o.z&&o.negate(),0<e.x&&e.negate(),this._right=i,this._up=o,this._direction=e;break;default:window.console.warn("\""+this._orientation+"\" orientation is not valid.\n                (choices: axial, coronal, sagittal)");}else window.console.warn(this._convention+" is not valid (choices: radio, neuro)")}var s={position:this._box.center,direction:this._direction},l=this._orderIntersections(a.a.rayBox(s,this._box),this._direction);this._front=l[0],this._back=l[1],this.up.set(this._up.x,this._up.y,this._up.z),this._updateCanvas(),this._updatePositionAndTarget(this._front,this._back),this._updateMatrices(),this._updateDirections()},e.prototype.leftDirection=function(){return this._findMaxIndex(this._directions,0)},e.prototype.posteriorDirection=function(){return this._findMaxIndex(this._directions,1)},e.prototype.superiorDirection=function(){return this._findMaxIndex(this._directions,2)},e.prototype.invertRows=function(){this.up.multiplyScalar(-1),this.invertColumns(),this._updateDirections()},e.prototype.invertColumns=function(){this.center();var t=this._oppositePosition(this.position);this._updatePositionAndTarget(t,this.position.clone()),this._updateMatrices(),this._fromFront=!this._fromFront,this._angle%=360,this._angle=360-this._angle,this._updateDirections()},e.prototype.center=function(){this._fromFront?this._updatePositionAndTarget(this._front,this._back):this._updatePositionAndTarget(this._back,this._front),this._updateMatrices(),this._updateDirections()},e.prototype.rotate=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;this.center();var e=90,n=1;this._fromFront||(n=-1),null===t?(e*=-n,this._angle+=90):(e=360-n*(t-this._angle),this._angle=t),this._angle%=360;var i=new l.c().makeRotationAxis(this._direction,e*_MathPI/180);this.up.applyMatrix4(i),this._updateMatrices(),this._updateDirections()},e.prototype.fitBox=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1.5,n=1;switch(t){case 0:n=e*this._computeZoom(this._canvas.width,this._right);break;case 1:n=e*this._computeZoom(this._canvas.height,this._up);break;case 2:n=e*_Mathmin(this._computeZoom(this._canvas.width,this._right),this._computeZoom(this._canvas.height,this._up));}if(!n)return!1;this.zoom=n,this.center()},e.prototype._adjustTopDirection=function(t,e){var n=this._getMaxIndex(e);return(2===n&&0>e.getComponent(n)||1===n&&0<e.getComponent(n)||0===n&&0<e.getComponent(n))&&e.negate(),e},e.prototype._getMaxIndex=function(t){var e=_Mathabs(t.x),n=0;return _Mathabs(t.y)>e&&(e=_Mathabs(t.y),n=1),_Mathabs(t.z)>e&&(n=2),n},e.prototype._findMaxIndex=function(t,e){for(var n=this._getMaxIndices(t),i=0;i<n.length;i++){if(n[i]===e)return i}},e.prototype._getMaxIndices=function(t){var e=[];return e.push(this._getMaxIndex(t[0])),e.push(this._getMaxIndex(t[1])),e.push(this._getMaxIndex(t[2])),e},e.prototype._orderIntersections=function(t,e){return t[0].dot(e)<t[1].dot(e)?t:[t[1],t[0]]},e.prototype._updateCanvas=function(){this.left=-this._canvas.width/2,this.right=this._canvas.width/2,this.top=this._canvas.height/2,this.bottom=-this._canvas.height/2,this._updateMatrices(),this.controls.handleResize()},e.prototype._oppositePosition=function(t){var e=t.clone();e.sub(this._box.center);var n=new l.c().makeRotationAxis(this.up,Math.PI);return e.applyMatrix4(n),e.add(this._box.center),e},e.prototype._computeZoom=function(t,e){if(!(t&&0<t))return window.console.log("Invalid dimension provided."),window.console.log(t),!1;var n={position:this._box.center.clone(),direction:e},i=a.a.rayBox(n,this._box);return 2>i.length?(window.console.log("Can not adjust the camera ( < 2 intersections)."),window.console.log(n),window.console.log(this._box),!1):t/i[0].distanceTo(i[1])},e.prototype._updatePositionAndTarget=function(t,e){this.position.set(t.x,t.y,t.z),this.lookAt(e.x,e.y,e.z),this._controls.target.set(e.x,e.y,e.z)},e.prototype._updateMatrices=function(){this._controls.update(),this.updateProjectionMatrix(),this.updateMatrixWorld()},e.prototype._updateLabels=function(){this._directionsLabel=[this._vector2Label(this._up),this._vector2Label(this._up.clone().negate()),this._vector2Label(this._right),this._vector2Label(this._right.clone().negate()),this._vector2Label(this._direction),this._vector2Label(this._direction.clone().negate())]},e.prototype._vector2Label=function(t){for(var e=this._getMaxIndex(t),n=t.clone().divideScalar(_Mathabs(t.getComponent(e))),i="",r=0;3>r;r++){0===r&&(1<=n.getComponent(r)+.2?i+="L":-1>=n.getComponent(r)-.2&&(i+="R")),1===r&&(1<=n.getComponent(r)+.2?i+="P":-1>=n.getComponent(r)-.2&&(i+="A")),2===r&&(1<=n.getComponent(r)+.2?i+="S":-1>=n.getComponent(r)-.2&&(i+="I"))}return i},e.prototype._updateDirections=function(){this._up=this.up.clone();var t=new l.f(0,0,-1).applyMatrix4(this.matrixWorld);this._direction=t.sub(this.position).normalize(),this._right=new l.f().crossVectors(this._direction,this.up),this._updateLabels()},c(e,[{key:"controls",set:function set(t){this._controls=t},get:function get(){return this._controls}},{key:"box",set:function set(t){this._box=t},get:function get(){return this._box}},{key:"canvas",set:function set(t){this._canvas=t,this._updateCanvas()},get:function get(){return this._canvas}},{key:"angle",set:function set(t){this.rotate(t)},get:function get(){return this._angle}},{key:"directions",set:function set(t){this._directions=t},get:function get(){return this._directions}},{key:"convention",set:function set(t){this._convention=t},get:function get(){return this._convention}},{key:"orientation",set:function set(t){this._orientation=t},get:function get(){return this._orientation}},{key:"directionsLabel",set:function set(t){this._directionsLabel=t},get:function get(){return this._directionsLabel}},{key:"stackOrientation",set:function set(t){if(this._stackOrientation=t,0===this._stackOrientation)this._orientation="default";else{var e=this._getMaxIndex(this._directions[(this._stackOrientation+2)%3]);0===e?this._orientation="sagittal":1===e?this._orientation="coronal":2===e&&(this._orientation="axial")}},get:function get(){if("default"===this._orientation)this._stackOrientation=0;else{var t=this._getMaxIndex(this._direction);t===this._getMaxIndex(this._directions[2])?this._stackOrientation=0:t===this._getMaxIndex(this._directions[0])?this._stackOrientation=1:t===this._getMaxIndex(this._directions[1])&&(this._stackOrientation=2)}return this._stackOrientation}}]),e}(THREE.OrthographicCamera);e.a=h},function(t,e,n){"use strict";function i(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function r(t,e,n){if(t&&a.isObject(t)&&babelHelpers.instanceof(t,i))return t;var r=new i;return r.parse(t,e,n),r}var o=n(89),a=n(90);e.parse=r,e.resolve=function(t,e){return r(t,!1,!0).resolve(e)},e.resolveObject=function(t,e){return t?r(t,!1,!0).resolveObject(e):e},e.format=function(t){return a.isString(t)&&(t=r(t)),babelHelpers.instanceof(t,i)?t.format():i.prototype.format.call(t)},e.Url=i;var s=/^([a-z0-9.+-]+:)/i,l=/:[0-9]*$/,c=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,u=["{","}","|","\\","^","`"].concat(["<",">","\"","`"," ","\r","\n","\t"]),p=["'"].concat(u),d=["%","/","?",";","#"].concat(p),f=["/","?","#"],m=/^[+a-z0-9A-Z_-]{0,63}$/,_=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,g={javascript:!0,"javascript:":!0},y={javascript:!0,"javascript:":!0},v={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},b=n(91);i.prototype.parse=function(t,e,n){if(!a.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+babelHelpers.typeof(t));var i=t.indexOf("?"),r=-1!==i&&i<t.indexOf("#")?"?":"#",l=t.split(r),h=/\\/g;l[0]=l[0].replace(h,"/");var u=t=l.join(r);if(u=u.trim(),!n&&1===t.split("#").length){var w=c.exec(u);if(w)return this.path=u,this.href=u,this.pathname=w[1],w[2]?(this.search=w[2],this.query=e?b.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var x=s.exec(u);if(x){var S=(x=x[0]).toLowerCase();this.protocol=S,u=u.substr(x.length)}if(n||x||u.match(/^\/\/[^@\/]+@[^@\/]+/)){var E="//"===u.substr(0,2);!E||x&&y[x]||(u=u.substr(2),this.slashes=!0)}if(!y[x]&&(E||x&&!v[x])){for(var M=-1,T=0;T<f.length;T++){-1!==(C=u.indexOf(f[T]))&&(-1===M||C<M)&&(M=C)}var A,P;-1!==(P=-1===M?u.lastIndexOf("@"):u.lastIndexOf("@",M))&&(A=u.slice(0,P),u=u.slice(P+1),this.auth=decodeURIComponent(A)),M=-1;for(T=0;T<d.length;T++){var C=u.indexOf(d[T]);-1!==C&&(-1===M||C<M)&&(M=C)}-1===M&&(M=u.length),this.host=u.slice(0,M),u=u.slice(M),this.parseHost(),this.hostname=this.hostname||"";var I="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!I)for(var L=this.hostname.split(/\./),T=0,R=L.length,O;T<R;T++){O=L[T];if(O&&!O.match(m)){for(var k="",D=0,F=O.length;D<F;D++){127<O.charCodeAt(D)?k+="x":k+=O[D]}if(!k.match(m)){var N=L.slice(0,T),U=L.slice(T+1),B=O.match(_);B&&(N.push(B[1]),U.unshift(B[2])),U.length&&(u="/"+U.join(".")+u),this.hostname=N.join(".");break}}}255<this.hostname.length?this.hostname="":this.hostname=this.hostname.toLowerCase(),I||(this.hostname=o.toASCII(this.hostname));var z=this.port?":"+this.port:"",G=this.hostname||"";this.host=G+z,this.href+=this.host,I&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==u[0]&&(u="/"+u))}if(!g[S])for(var T=0,R=p.length,H;T<R;T++){H=p[T];if(-1!==u.indexOf(H)){var j=encodeURIComponent(H);j===H&&(j=escape(H)),u=u.split(H).join(j)}}var V=u.indexOf("#");-1!==V&&(this.hash=u.substr(V),u=u.slice(0,V));var W=u.indexOf("?");if(-1!==W?(this.search=u.substr(W),this.query=u.substr(W+1),e&&(this.query=b.parse(this.query)),u=u.slice(0,W)):e&&(this.search="",this.query={}),u&&(this.pathname=u),v[S]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var z=this.pathname||"",q=this.search||"";this.path=z+q}return this.href=this.format(),this},i.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",i=this.hash||"",r=!1,o="";this.host?r=t+this.host:this.hostname&&(r=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(r+=":"+this.port)),this.query&&a.isObject(this.query)&&Object.keys(this.query).length&&(o=b.stringify(this.query));var s=this.search||o&&"?"+o||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||v[e])&&!1!==r?(r="//"+(r||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):r||(r=""),i&&"#"!==i.charAt(0)&&(i="#"+i),s&&"?"!==s.charAt(0)&&(s="?"+s),n=n.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),s=s.replace("#","%23"),e+r+n+s+i},i.prototype.resolve=function(t){return this.resolveObject(r(t,!1,!0)).format()},i.prototype.resolveObject=function(t){if(a.isString(t)){var e=new i;e.parse(t,!1,!0),t=e}for(var n=new i,r=Object.keys(this),o=0,s;o<r.length;o++){s=r[o];n[s]=this[s]}if(n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var l=Object.keys(t),c=0,h;c<l.length;c++){h=l[c];"protocol"!==h&&(n[h]=t[h])}return v[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!v[t.protocol]){for(var u=Object.keys(t),p=0,d;p<u.length;p++){d=u[p];n[d]=t[d]}return n.href=n.format(),n}if(n.protocol=t.protocol,t.host||y[t.protocol])n.pathname=t.pathname;else{for(S=(t.pathname||"").split("/");S.length&&!(t.host=S.shift());){}t.host||(t.host=""),t.hostname||(t.hostname=""),""!==S[0]&&S.unshift(""),2>S.length&&S.unshift(""),n.pathname=S.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var f=n.pathname||"",m=n.search||"";n.path=f+m}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var _=n.pathname&&"/"===n.pathname.charAt(0),g=t.host||t.pathname&&"/"===t.pathname.charAt(0),b=g||_||n.host&&t.pathname,w=b,x=n.pathname&&n.pathname.split("/")||[],S=t.pathname&&t.pathname.split("/")||[],E=n.protocol&&!v[n.protocol];if(E&&(n.hostname="",n.port=null,n.host&&(""===x[0]?x[0]=n.host:x.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===S[0]?S[0]=t.host:S.unshift(t.host)),t.host=null),b=b&&(""===S[0]||""===x[0])),g)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,x=S;else if(S.length)x||(x=[]),x.pop(),x=x.concat(S),n.search=t.search,n.query=t.query;else if(!a.isNullOrUndefined(t.search))return E&&(n.hostname=n.host=x.shift(),(I=!!(n.host&&0<n.host.indexOf("@"))&&n.host.split("@"))&&(n.auth=I.shift(),n.host=n.hostname=I.shift())),n.search=t.search,n.query=t.query,a.isNull(n.pathname)&&a.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n;if(!x.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var M=x.slice(-1)[0],T=(n.host||t.host||1<x.length)&&("."===M||".."===M)||""===M,A=0,P=x.length;0<=P;P--){"."===(M=x[P])?x.splice(P,1):".."===M?(x.splice(P,1),A++):A&&(x.splice(P,1),A--)}if(!b&&!w)for(;A--;A){x.unshift("..")}!b||""===x[0]||x[0]&&"/"===x[0].charAt(0)||x.unshift(""),T&&"/"!==x.join("/").substr(-1)&&x.push("");var C=""===x[0]||x[0]&&"/"===x[0].charAt(0);if(E){n.hostname=n.host=C?"":x.length?x.shift():"";var I=!!(n.host&&0<n.host.indexOf("@"))&&n.host.split("@");I&&(n.auth=I.shift(),n.host=n.hostname=I.shift())}return(b=b||n.host&&x.length)&&!C&&x.unshift(""),x.length?n.pathname=x.join("/"):(n.pathname=null,n.path=null),a.isNull(n.pathname)&&a.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},i.prototype.parseHost=function(){var t=this.host,e=l.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e,n){(function(t,i){var r;!function(){function a(t){throw new RangeError(I[t])}function s(t,e){for(var n=t.length,i=[];n--;){i[n]=e(t[n])}return i}function l(t,e){var n=t.split("@"),i="";return 1<n.length&&(i=n[0]+"@",t=n[1]),i+s((t=t.replace(C,".")).split("."),e).join(".")}function c(t){for(var e,n,i=[],r=0,o=t.length;r<o;){55296<=(e=t.charCodeAt(r++))&&56319>=e&&r<o?56320==(64512&(n=t.charCodeAt(r++)))?i.push(((1023&e)<<10)+(1023&n)+65536):(i.push(e),r--):i.push(e)}return i}function h(t){return s(t,function(t){var e="";return 65535<t&&(e+=O(55296|1023&(t-=65536)>>>10),t=56320|1023&t),e+=O(t)}).join("")}function u(t){return 10>t-48?t-22:26>t-65?t-65:26>t-97?t-97:v}function p(t,e){return t+22+75*(26>t)-((0!=e)<<5)}function d(t,e,n){var i=0;for(t=n?R(t/S):t>>1,t+=R(t/e);t>L*w>>1;i+=v){t=R(t/L)}return R(i+(L+1)*t/(t+x))}function f(t){var e,n,i,r,o,s,l,c,p,f,m=[],_=t.length,g=0,x=M,S=E;for(0>(n=t.lastIndexOf(T))&&(n=0),i=0;i<n;++i){128<=t.charCodeAt(i)&&a("not-basic"),m.push(t.charCodeAt(i))}for(r=0<n?n+1:0;r<_;){for(o=g,s=1,l=v;r>=_&&a("invalid-input"),((c=u(t.charCodeAt(r++)))>=v||c>R((y-g)/s))&&a("overflow"),g+=c*s,p=l<=S?b:l>=S+w?w:l-S,!(c<p);l+=v){s>R(y/(f=v-p))&&a("overflow"),s*=f}S=d(g-o,e=m.length+1,0==o),R(g/e)>y-x&&a("overflow"),x+=R(g/e),g%=e,m.splice(g++,0,x)}return h(m)}function m(t){var e,n,i,r,o,s,l,h,u,f,m,_,g,x,S,A=[];for(_=(t=c(t)).length,e=M,n=0,o=E,s=0;s<_;++s){128>(m=t[s])&&A.push(O(m))}for(i=r=A.length,r&&A.push(T);i<_;){for(l=y,s=0;s<_;++s){(m=t[s])>=e&&m<l&&(l=m)}for(l-e>R((y-n)/(g=i+1))&&a("overflow"),n+=(l-e)*g,e=l,s=0;s<_;++s){if((m=t[s])<e&&++n>y&&a("overflow"),m==e){for(h=n,u=v;f=u<=o?b:u>=o+w?w:u-o,!(h<f);u+=v){S=h-f,x=v-f,A.push(O(p(f+S%x,0))),h=R(S/x)}A.push(O(p(h,0))),o=d(n,g,i==r),n=0,++i}}++n,++e}return A.join("")}"object"==babelHelpers.typeof(e)&&e&&e.nodeType,"object"==babelHelpers.typeof(t)&&t&&t.nodeType;var _="object"==babelHelpers.typeof(i)&&i,g,y=2147483647,v=36,b=1,w=26,x=38,S=700,E=72,M=128,T="-",A=/^xn--/,P=/[^\x20-\x7E]/,C=/[\x2E\u3002\uFF0E\uFF61]/g,I={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},L=v-b,R=_Mathfloor,O=_StringfromCharCode;g={version:"1.4.1",ucs2:{decode:c,encode:h},decode:f,encode:m,toASCII:function toASCII(t){return l(t,function(t){return P.test(t)?"xn--"+m(t):t})},toUnicode:function toUnicode(t){return l(t,function(t){return A.test(t)?f(t.slice(4).toLowerCase()):t})}},void 0!==(r=function(){return g}.call(e,n,e,t))&&(t.exports=r)}()}).call(e,n(29)(t),n(1))},function(t){"use strict";t.exports={isString:function isString(t){return"string"==typeof t},isObject:function isObject(t){return"object"==babelHelpers.typeof(t)&&null!==t},isNull:function isNull(t){return null===t},isNullOrUndefined:function isNullOrUndefined(t){return null==t}}},function(t,e,n){"use strict";e.decode=e.parse=n(92),e.encode=e.stringify=n(93)},function(t){"use strict";function i(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,n,o){e=e||"&",n=n||"=";var a={};if("string"!=typeof t||0===t.length)return a;var s=/\+/g;t=t.split(e);var l=1e3;o&&"number"==typeof o.maxKeys&&(l=o.maxKeys);var c=t.length;0<l&&c>l&&(c=l);for(var h=0;h<c;++h){var u,p,d,f,m=t[h].replace(s,"%20"),_=m.indexOf(n);0<=_?(u=m.substr(0,_),p=m.substr(_+1)):(u=m,p=""),d=decodeURIComponent(u),f=decodeURIComponent(p),i(a,d)?r(a[d])?a[d].push(f):a[d]=[a[d],f]:a[d]=f}return a};var r=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t){"use strict";function i(t,e){if(t.map)return t.map(e);for(var n=[],i=0;i<t.length;i++){n.push(e(t[i],i))}return n}var r=function(t){switch(babelHelpers.typeof(t)){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return"";}};t.exports=function(t,e,n,s){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"==babelHelpers.typeof(t)?i(a(t),function(a){var s=encodeURIComponent(r(a))+n;return o(t[a])?i(t[a],function(t){return s+encodeURIComponent(r(t))}).join(e):s+encodeURIComponent(r(t[a]))}).join(e):s?encodeURIComponent(r(s))+n+encodeURIComponent(r(t)):""};var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},a=Object.keys||function(t){var e=[];for(var n in t){Object.prototype.hasOwnProperty.call(t,n)&&e.push(n)}return e}},function(t,e,n){"use strict";var i=n(95),r=n(96);n.d(e,"a",function(){return i.a}),n.d(e,"b",function(){return r.a})},function(t,e,n){"use strict";function i(t,e){if(!babelHelpers.instanceof(t,e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=babelHelpers.typeof(e)&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+babelHelpers.typeof(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=function(t){function e(n,o){function s(t){!1!==y.enabled&&(window.removeEventListener("keydown",s),x=w,w===v.NONE&&(t.keyCode!==y.keys[v.ROTATE]||y.noRotate?t.keyCode!==y.keys[v.ZOOM]||y.noZoom?t.keyCode!==y.keys[v.PAN]||y.noPan||(w=v.PAN):w=v.ZOOM:w=v.ROTATE))}function l(){!1!==y.enabled&&(w=x,window.addEventListener("keydown",s,!1))}function c(t){!1!==y.enabled&&(t.preventDefault(),t.stopPropagation(),w===v.NONE&&(w=t.button),w!==v.ROTATE||y.noRotate?w!==v.ZOOM||y.noZoom?w!==v.PAN||y.noPan?w!==v.CUSTOM||y.noCustom||(k.copy(B(t.pageX,t.pageY)),D.copy(R)):(R.copy(B(t.pageX,t.pageY)),O.copy(R)):(P.copy(B(t.pageX,t.pageY)),C.copy(P)):(M.copy(z(t.pageX,t.pageY)),E.copy(M)),document.addEventListener("mousemove",h,!1),document.addEventListener("mouseup",u,!1),y.dispatchEvent(N))}function h(t){!1!==y.enabled&&(t.preventDefault(),t.stopPropagation(),w!==v.ROTATE||y.noRotate?w!==v.ZOOM||y.noZoom?w!==v.PAN||y.noPan?w!==v.CUSTOM||y.noCustom||D.copy(B(t.pageX,t.pageY)):O.copy(B(t.pageX,t.pageY)):C.copy(B(t.pageX,t.pageY)):(E.copy(M),M.copy(z(t.pageX,t.pageY))))}function u(t){!1!==y.enabled&&(t.preventDefault(),t.stopPropagation(),-1===y.forceState&&(w=v.NONE),document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",u),y.dispatchEvent(U))}function p(t){if(!1!==y.enabled){t.preventDefault(),t.stopPropagation();var e=0;t.wheelDelta?e=t.wheelDelta/40:t.detail&&(e=-t.detail/3),w!==v.CUSTOM?P.y+=.01*e:w===v.CUSTOM&&(k.y+=.01*e),y.dispatchEvent(N),y.dispatchEvent(U)}}function d(t){if(!1!==y.enabled){if(-1===y.forceState)switch(t.touches.length){case 1:w=v.TOUCH_ROTATE,M.copy(z(t.touches[0].pageX,t.touches[0].pageY)),E.copy(M);break;case 2:w=v.TOUCH_ZOOM;var e=t.touches[0].pageX-t.touches[1].pageX,n=t.touches[0].pageY-t.touches[1].pageY;L=I=_Mathsqrt(e*e+n*n);var i=(t.touches[0].pageX+t.touches[1].pageX)/2,r=(t.touches[0].pageY+t.touches[1].pageY)/2;R.copy(B(i,r)),O.copy(R);break;default:w=v.NONE;}else switch(w){case 0:w=v.TOUCH_ROTATE,M.copy(z(t.touches[0].pageX,t.touches[0].pageY)),E.copy(M);break;case 1:case 4:if(2<=t.touches.length){w=v.TOUCH_ZOOM;var e=t.touches[0].pageX-t.touches[1].pageX,n=t.touches[0].pageY-t.touches[1].pageY;L=I=_Mathsqrt(e*e+n*n)}else w=v.ZOOM,P.copy(B(t.touches[0].pageX,t.touches[0].pageY)),C.copy(P);break;case 2:case 5:if(2<=t.touches.length){w=v.TOUCH_PAN;var i=(t.touches[0].pageX+t.touches[1].pageX)/2,r=(t.touches[0].pageY+t.touches[1].pageY)/2;R.copy(B(i,r)),O.copy(R)}else w=v.PAN,R.copy(B(t.touches[0].pageX,t.touches[0].pageY)),O.copy(R);break;case 99:w=v.CUSTOM;var i=(t.touches[0].pageX+t.touches[1].pageX)/2,r=(t.touches[0].pageY+t.touches[1].pageY)/2;k.copy(B(i,r)),D.copy(k);break;default:w=v.NONE;}y.dispatchEvent(N)}}function f(t){if(!1!==y.enabled)if(t.preventDefault(),t.stopPropagation(),-1===y.forceState)switch(t.touches.length){case 1:E.copy(M),M.copy(z(t.touches[0].pageX,t.touches[0].pageY));break;case 2:var e=t.touches[0].pageX-t.touches[1].pageX,n=t.touches[0].pageY-t.touches[1].pageY;L=_Mathsqrt(e*e+n*n);var i=(t.touches[0].pageX+t.touches[1].pageX)/2,r=(t.touches[0].pageY+t.touches[1].pageY)/2;O.copy(B(i,r));break;default:w=v.NONE;}else switch(w){case 0:E.copy(M),M.copy(z(t.touches[0].pageX,t.touches[0].pageY));break;case 1:C.copy(B(t.touches[0].pageX,t.touches[0].pageY));break;case 2:O.copy(B(t.touches[0].pageX,t.touches[0].pageY));break;case 4:var e=t.touches[0].pageX-t.touches[1].pageX,n=t.touches[0].pageY-t.touches[1].pageY;L=_Mathsqrt(e*e+n*n);break;case 5:var i=(t.touches[0].pageX+t.touches[1].pageX)/2,r=(t.touches[0].pageY+t.touches[1].pageY)/2;O.copy(B(i,r));break;case 99:var i=(t.touches[0].pageX+t.touches[1].pageX)/2,r=(t.touches[0].pageY+t.touches[1].pageY)/2;D.copy(B(i,r));break;default:w=v.NONE;}}function m(t){if(!1!==y.enabled){if(-1===y.forceState){switch(t.touches.length){case 1:E.copy(M),M.copy(z(t.touches[0].pageX,t.touches[0].pageY));break;case 2:I=L=0;var e=(t.touches[0].pageX+t.touches[1].pageX)/2,n=(t.touches[0].pageY+t.touches[1].pageY)/2;O.copy(B(e,n)),R.copy(O);}w=v.NONE}else switch(w){case 0:E.copy(M),M.copy(z(t.touches[0].pageX,t.touches[0].pageY));break;case 1:case 2:break;case 4:I=L=0,w=v.ZOOM;break;case 5:if(2<=t.touches.length){var e=(t.touches[0].pageX+t.touches[1].pageX)/2,n=(t.touches[0].pageY+t.touches[1].pageY)/2;O.copy(B(e,n)),R.copy(O)}w=v.PAN;break;case 99:var e=(t.touches[0].pageX+t.touches[1].pageX)/2,n=(t.touches[0].pageY+t.touches[1].pageY)/2;D.copy(B(e,n)),k.copy(D);break;default:w=v.NONE;}y.dispatchEvent(U)}}function _(t){t.preventDefault()}i(this,e);var g=r(this,t.call(this)),y=g,v={NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM:4,TOUCH_PAN:5,CUSTOM:99};g.object=n,g.domElement=void 0!==o?o:document,g.enabled=!0,g.screen={left:0,top:0,width:0,height:0},g.rotateSpeed=1,g.zoomSpeed=1.2,g.panSpeed=.3,g.noRotate=!1,g.noZoom=!1,g.noPan=!1,g.noCustom=!1,g.forceState=-1,g.staticMoving=!1,g.dynamicDampingFactor=.2,g.minDistance=0,g.maxDistance=1/0,g.keys=[65,83,68],g.target=new a.f;var b=new a.f,w=v.NONE,x=v.NONE,S=new a.f,E=new a.e,M=new a.e,T=new a.f,A=0,P=new a.e,C=new a.e,I=0,L=0,R=new a.e,O=new a.e,k=new a.e,D=new a.e;g.target0=g.target.clone(),g.position0=g.object.position.clone(),g.up0=g.object.up.clone();var F={type:"change"},N={type:"start"},U={type:"end"};g.handleResize=function(){if(this.domElement===document)this.screen.left=0,this.screen.top=0,this.screen.width=window.innerWidth,this.screen.height=window.innerHeight;else{var t=this.domElement.getBoundingClientRect(),e=this.domElement.ownerDocument.documentElement;this.screen.left=t.left+window.pageXOffset-e.clientLeft,this.screen.top=t.top+window.pageYOffset-e.clientTop,this.screen.width=t.width,this.screen.height=t.height}},g.handleEvent=function(t){"function"==typeof this[t.type]&&this[t.type](t)};var B=function(){var t=new a.e;return function(e,n){return t.set((e-y.screen.left)/y.screen.width,(n-y.screen.top)/y.screen.height),t}}(),z=function(){var t=new a.e;return function(e,n){return t.set((e-.5*y.screen.width-y.screen.left)/(.5*y.screen.width),(y.screen.height+2*(y.screen.top-n))/y.screen.width),t}}();return g.rotateCamera=function(){var t=new a.f,e=new a.d,n=new a.f,i=new a.f,r=new a.f,o=new a.f,s;return function(){o.set(M.x-E.x,M.y-E.y,0),(s=o.length())?(S.copy(y.object.position).sub(y.target),n.copy(S).normalize(),i.copy(y.object.up).normalize(),r.crossVectors(i,n).normalize(),i.setLength(M.y-E.y),r.setLength(M.x-E.x),o.copy(i.add(r)),t.crossVectors(o,S).normalize(),s*=y.rotateSpeed,e.setFromAxisAngle(t,s),S.applyQuaternion(e),y.object.up.applyQuaternion(e),T.copy(t),A=s):!y.staticMoving&&A&&(A*=_Mathsqrt(1-y.dynamicDampingFactor),S.copy(y.object.position).sub(y.target),e.setFromAxisAngle(T,A),S.applyQuaternion(e),y.object.up.applyQuaternion(e)),E.copy(M)}}(),g.zoomCamera=function(){var t;w===v.TOUCH_ZOOM?(t=I/L,I=L,S.multiplyScalar(t)):1!==(t=1+(C.y-P.y)*y.zoomSpeed)&&0<t&&(S.multiplyScalar(t),y.staticMoving?P.copy(C):P.y+=(C.y-P.y)*this.dynamicDampingFactor)},g.panCamera=function(){var t=new a.e,e=new a.f,n=new a.f;return function(){t.copy(O).sub(R),t.lengthSq()&&(t.multiplyScalar(S.length()*y.panSpeed),n.copy(S).cross(y.object.up).setLength(t.x),n.add(e.copy(y.object.up).setLength(t.y)),y.object.position.add(n),y.target.add(n),y.staticMoving?R.copy(O):R.add(t.subVectors(O,R).multiplyScalar(y.dynamicDampingFactor)))}}(),g.checkDistances=function(){y.noZoom&&y.noPan||(S.lengthSq()>y.maxDistance*y.maxDistance&&y.object.position.addVectors(y.target,S.setLength(y.maxDistance)),S.lengthSq()<y.minDistance*y.minDistance&&y.object.position.addVectors(y.target,S.setLength(y.minDistance)))},g.update=function(){S.subVectors(y.object.position,y.target),y.noRotate||y.rotateCamera(),y.noZoom||y.zoomCamera(),y.noPan||y.panCamera(),y.noCustom||y.custom(k,D),y.object.position.addVectors(y.target,S),y.checkDistances(),y.object.lookAt(y.target),1e-6<b.distanceToSquared(y.object.position)&&(y.dispatchEvent(F),b.copy(y.object.position))},g.reset=function(){w=v.NONE,x=v.NONE,y.target.copy(y.target0),y.object.position.copy(y.position0),y.object.up.copy(y.up0),S.subVectors(y.object.position,y.target),y.object.lookAt(y.target),y.dispatchEvent(F),b.copy(y.object.position)},g.setState=function(t){y.forceState=t,x=t,w=t},g.custom=function(){},g.dispose=function(){this.domElement.removeEventListener("contextmenu",_,!1),this.domElement.removeEventListener("mousedown",c,!1),this.domElement.removeEventListener("mousewheel",p,!1),this.domElement.removeEventListener("touchstart",d,!1),this.domElement.removeEventListener("touchend",m,!1),this.domElement.removeEventListener("touchmove",f,!1),window.removeEventListener("keydown",s,!1),window.removeEventListener("keyup",l,!1)},g.domElement.addEventListener("contextmenu",_,!1),g.domElement.addEventListener("mousedown",c,!1),g.domElement.addEventListener("mousewheel",p,!1),g.domElement.addEventListener("touchstart",d,!1),g.domElement.addEventListener("touchend",m,!1),g.domElement.addEventListener("touchmove",f,!1),window.addEventListener("keydown",s,!1),window.addEventListener("keyup",l,!1),g.handleResize(),g.update(),g}return o(e,t),e}(a.b);e.a=s},function(t,e,n){"use strict";function i(t,e){if(!babelHelpers.instanceof(t,e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=babelHelpers.typeof(e)&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+babelHelpers.typeof(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=function(t){function e(n,o){function s(t){!1!==v.enabled&&(window.removeEventListener("keydown",s),S=x,x===b.NONE&&(t.keyCode!==v.keys[b.ROTATE]||v.noRotate?t.keyCode!==v.keys[b.ZOOM]||v.noZoom?t.keyCode!==v.keys[b.PAN]||v.noPan||(x=b.PAN):x=b.ZOOM:x=b.ROTATE))}function l(){!1!==v.enabled&&(x=S,window.addEventListener("keydown",s,!1))}function c(t){!1!==v.enabled&&(t.preventDefault(),t.stopPropagation(),x===b.NONE&&(x=t.button),(x!==b.ROTATE||v.noRotate)&&(x!==b.ZOOM||v.noZoom?x!==b.PAN||v.noPan||(C.copy(k(t.pageX,t.pageY)),I.copy(C)):(M.copy(k(t.pageX,t.pageY)),T.copy(M))),document.addEventListener("mousemove",h,!1),document.addEventListener("mouseup",u,!1),v.dispatchEvent(R))}function h(t){!1!==v.enabled&&(t.preventDefault(),t.stopPropagation(),(x!==b.ROTATE||v.noRotate)&&(x!==b.ZOOM||v.noZoom?x!==b.PAN||v.noPan||I.copy(k(t.pageX,t.pageY)):T.copy(k(t.pageX,t.pageY))))}function u(t){!1!==v.enabled&&(t.preventDefault(),t.stopPropagation(),x=b.NONE,document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",u),v.dispatchEvent(O))}function p(t){if(!1!==v.enabled){t.preventDefault(),t.stopPropagation();var e=0;t.wheelDelta?e=t.wheelDelta/40:t.detail&&(e=-t.detail/3),v.dispatchEvent({type:"OnScroll",delta:e}),v.dispatchEvent(R),v.dispatchEvent(O)}}function d(t){if(!1!==v.enabled){switch(t.touches.length){case 1:x=b.TOUCH_ROTATE;break;case 2:x=b.TOUCH_ZOOM_PAN;var e=t.touches[0].pageX-t.touches[1].pageX,n=t.touches[0].pageY-t.touches[1].pageY;P=A=_Mathsqrt(e*e+n*n);var i=(t.touches[0].pageX+t.touches[1].pageX)/2,r=(t.touches[0].pageY+t.touches[1].pageY)/2;C.copy(k(i,r)),I.copy(C);break;default:x=b.NONE;}v.dispatchEvent(R)}}function f(t){if(!1!==v.enabled)switch(t.preventDefault(),t.stopPropagation(),t.touches.length){case 1:break;case 2:var e=t.touches[0].pageX-t.touches[1].pageX,n=t.touches[0].pageY-t.touches[1].pageY;P=_Mathsqrt(e*e+n*n);var i=(t.touches[0].pageX+t.touches[1].pageX)/2,r=(t.touches[0].pageY+t.touches[1].pageY)/2;I.copy(k(i,r));break;default:x=b.NONE;}}function m(t){if(!1!==v.enabled){switch(t.touches.length){case 1:break;case 2:A=P=0;var e=(t.touches[0].pageX+t.touches[1].pageX)/2,n=(t.touches[0].pageY+t.touches[1].pageY)/2;I.copy(k(e,n)),C.copy(I);}x=b.NONE,v.dispatchEvent(O)}}function _(t){t.preventDefault()}var g=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{NONE:-1,ROTATE:1,ZOOM:2,PAN:0,SCROLL:4,TOUCH_ROTATE:4,TOUCH_ZOOM_PAN:5};i(this,e);var y=r(this,t.call(this)),v=y,b=g;y.object=n,y.domElement=void 0!==o?o:document,y.enabled=!0,y.screen={left:0,top:0,width:0,height:0},y.radius=0,y.zoomSpeed=1.2,y.noZoom=!1,y.noPan=!1,y.staticMoving=!1,y.dynamicDampingFactor=.2,y.keys=[65,83,68],y.target=new a.f;var w=!0,x=b.NONE,S=b.NONE,E=new a.f,M=new a.e,T=new a.e,A=0,P=0,C=new a.e,I=new a.e;y.target0=y.target.clone(),y.position0=y.object.position.clone(),y.up0=y.object.up.clone(),y.left0=y.object.left,y.right0=y.object.right,y.top0=y.object.top,y.bottom0=y.object.bottom;var L={type:"change"},R={type:"start"},O={type:"end"};y.handleResize=function(){if(this.domElement===document)this.screen.left=0,this.screen.top=0,this.screen.width=window.innerWidth,this.screen.height=window.innerHeight;else{var t=this.domElement.getBoundingClientRect(),e=this.domElement.ownerDocument.documentElement;this.screen.left=t.left+window.pageXOffset-e.clientLeft,this.screen.top=t.top+window.pageYOffset-e.clientTop,this.screen.width=t.width,this.screen.height=t.height}this.radius=.5*_Mathmin(this.screen.width,this.screen.height),this.left0=this.object.left,this.right0=this.object.right,this.top0=this.object.top,this.bottom0=this.object.bottom},y.handleEvent=function(t){"function"==typeof this[t.type]&&this[t.type](t)};var k=function(){var t=new a.e;return function(e,n){return t.set((e-v.screen.left)/v.screen.width,(n-v.screen.top)/v.screen.height),t}}();return y.zoomCamera=function(){if(x===b.TOUCH_ZOOM_PAN){t=P/A;A=P,v.object.zoom*=t,w=!0}else{var t=1+(T.y-M.y)*v.zoomSpeed;1e-6<_Mathabs(t-1)&&0<t&&(v.object.zoom/=t,v.staticMoving?M.copy(T):M.y+=(T.y-M.y)*this.dynamicDampingFactor,w=!0)}},y.panCamera=function(){var t=new a.e,e=new a.f,n=new a.f;return function(){if(t.copy(I).sub(C),t.lengthSq()){var i=(v.object.right-v.object.left)/v.object.zoom,r=(v.object.top-v.object.bottom)/v.object.zoom;t.x*=i,t.y*=r,n.copy(E).cross(v.object.up).setLength(t.x),n.add(e.copy(v.object.up).setLength(t.y)),v.object.position.add(n),v.target.add(n),v.staticMoving?C.copy(I):C.add(t.subVectors(I,C).multiplyScalar(v.dynamicDampingFactor)),w=!0}}}(),y.update=function(){E.subVectors(v.object.position,v.target),v.noZoom||(v.zoomCamera(),w&&v.object.updateProjectionMatrix()),v.noPan||v.panCamera(),v.object.position.addVectors(v.target,E),v.object.lookAt(v.target),w&&(v.dispatchEvent(L),w=!1)},y.reset=function(){x=b.NONE,S=b.NONE,v.target.copy(v.target0),v.object.position.copy(v.position0),v.object.up.copy(v.up0),E.subVectors(v.object.position,v.target),v.object.left=v.left0,v.object.right=v.right0,v.object.top=v.top0,v.object.bottom=v.bottom0,v.object.lookAt(v.target),v.dispatchEvent(L),w=!1},y.dispose=function(){this.domElement.removeEventListener("contextmenu",_,!1),this.domElement.removeEventListener("mousedown",c,!1),this.domElement.removeEventListener("mousewheel",p,!1),this.domElement.removeEventListener("MozMousePixelScroll",p,!1),this.domElement.removeEventListener("touchstart",d,!1),this.domElement.removeEventListener("touchend",m,!1),this.domElement.removeEventListener("touchmove",f,!1),window.removeEventListener("keydown",s,!1),window.removeEventListener("keyup",l,!1)},y.domElement.addEventListener("contextmenu",_,!1),y.domElement.addEventListener("mousedown",c,!1),y.domElement.addEventListener("mousewheel",p,!1),y.domElement.addEventListener("MozMousePixelScroll",p,!1),y.domElement.addEventListener("touchstart",d,!1),y.domElement.addEventListener("touchend",m,!1),y.domElement.addEventListener("touchmove",f,!1),window.addEventListener("keydown",s,!1),window.addEventListener("keyup",l,!1),y.handleResize(),y.update(),y}return o(e,t),e}(a.b);e.a=s},function(t,e,n){"use strict";var i=n(30),r=n(10),o=n(15),a=n(3);n.d(e,"a",function(){return i.a}),n.d(e,"b",function(){return r.a}),n.d(e,"c",function(){return a.a}),n.d(e,"d",function(){return o.a})},function(t,e,n){"use strict";var i=n(31),r=n(32);n.d(e,"a",function(){return i.a}),n.d(e,"b",function(){return r.a})},function(t,e,n){"use strict";var i=n(33),r=n(34),o=n(100),a=n(101),s=n(102),l=n(103),c=n(41),h=n(104),u=n(42),p=n(108),d=n(109);n.d(e,"a",function(){return i.a}),n.d(e,"b",function(){return r.a}),n.d(e,"c",function(){return o.a}),n.d(e,"d",function(){return a.a}),n.d(e,"e",function(){return s.a}),n.d(e,"h",function(){return l.a}),n.d(e,"g",function(){return c.a}),n.d(e,"f",function(){return h.a}),n.d(e,"i",function(){return u.a}),n.d(e,"j",function(){return p.a}),n.d(e,"k",function(){return d.a})},function(t,e,n){"use strict";function i(t,e){if(!babelHelpers.instanceof(t,e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=babelHelpers.typeof(e)&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+babelHelpers.typeof(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(35),s=n(36),l=n(37),c=function(){function t(t,e){for(var n=0,i;n<e.length;n++){i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),h=function(t){function e(n,o,c){i(this,e);var h=r(this,t.call(this));return h._stack=n,h._textureToFilter=c,h._contourWidth=1,h._contourOpacity=1,h._canvasWidth=0,h._canvasHeight=0,h._shadersFragment=l.a,h._shadersVertex=s.a,h._uniforms=a.a.uniforms(),h._material=null,h._geometry=o,h._create(),h}return o(e,t),e.prototype._create=function(){this._prepareMaterial(),this._mesh=new THREE.Mesh(this._geometry,this._material),this._mesh.applyMatrix(this._stack._ijk2LPS),this.add(this._mesh)},e.prototype._prepareMaterial=function(){if(!this._material){this._uniforms.uWidth.value=this._contourWidth,this._uniforms.uOpacity.value=this._contourOpacity,this._uniforms.uCanvasWidth.value=this._canvasWidth,this._uniforms.uCanvasHeight.value=this._canvasHeight;var t=new l.a(this._uniforms),e=new s.a;this._material=new THREE.ShaderMaterial({side:THREE.DoubleSide,uniforms:this._uniforms,vertexShader:e.compute(),fragmentShader:t.compute(),transparent:!0})}},e.prototype.update=function(){this._mesh&&(this.remove(this._mesh),this._mesh.geometry.dispose(),this._mesh.geometry=null,this._mesh=null),this._create()},e.prototype.dispose=function(){null!==this._textureToFilter&&(this._textureToFilter.dispose(),this._textureToFilter=null),this._shadersFragment=null,this._shadersVertex=null,this._uniforms=null,this.remove(this._mesh),this._mesh.geometry.dispose(),this._mesh.geometry=null,this._mesh.material.dispose(),this._mesh.material=null,this._mesh=null,this._geometry.dispose(),this._geometry=null,this._material.vertexShader=null,this._material.fragmentShader=null,this._material.uniforms=null,this._material.dispose(),this._material=null,this._stack=null},c(e,[{key:"geometry",get:function get(){return this._geometry},set:function set(t){this._mesh&&(this.remove(this._mesh),this._mesh.geometry.dispose(),this._mesh.geometry=null,this._mesh=null,this._geometry.dispose(),this._geometry=null),this._geometry=t,this._create()}},{key:"textureToFilter",get:function get(){return this._textureToFilter},set:function set(t){this._textureToFilter=t,this._uniforms.uTextureFilled.value=t,this._material.needsUpdate=!0}},{key:"contourOpacity",get:function get(){return this._contourOpacity},set:function set(t){this._contourOpacity=t,this._uniforms.uOpacity.value=this._contourOpacity}},{key:"contourWidth",get:function get(){return this._contourWidth},set:function set(t){this._contourWidth=t,this._uniforms.uWidth.value=this._contourWidth}},{key:"canvasWidth",get:function get(){return this._canvasWidth},set:function set(t){this._canvasWidth=t,this._uniforms.uCanvasWidth.value=this._canvasWidth}},{key:"canvasHeight",get:function get(){return this._canvasHeight},set:function set(t){this._canvasHeight=t,this._uniforms.uCanvasHeight.value=this._canvasHeight}}]),e}(THREE.Object3D);e.a=h},function(t,e,n){"use strict";function i(t,e){if(!babelHelpers.instanceof(t,e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=babelHelpers.typeof(e)&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+babelHelpers.typeof(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(38),s=n(39),l=n(40),c=function(){function t(t,e){for(var n=0,i;n<e.length;n++){i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),h=function(t){function e(n,o,c){i(this,e);var h=r(this,t.call(this));return h._stack=n,h._referencePlane=c,h._plane1=null,h._color1=null,h._plane2=null,h._color2=null,h._plane3=null,h._color3=null,h._canvasWidth=0,h._canvasHeight=0,h._shadersFragment=l.a,h._shadersVertex=s.a,h._uniforms=a.a.uniforms(),h._material=null,h._geometry=o,h._create(),h}return o(e,t),e.prototype._create=function(){this._prepareMaterial(),this._mesh=new THREE.Mesh(this._geometry,this._material),this._mesh.applyMatrix(this._stack._ijk2LPS),this.add(this._mesh)},e.prototype._prepareMaterial=function(){if(!this._material){this._uniforms.uSlice.value=this._referencePlane,this._plane1&&(this._uniforms.uPlane1.value=this._plane1,this._uniforms.uPlaneColor1.value=this._color1),this._plane2&&(this._uniforms.uPlane2.value=this._plane2,this._uniforms.uPlaneColor2.value=this._color2),this._plane3&&(this._uniforms.uPlane3.value=this._plane3,this._uniforms.uPlaneColor3.value=this._color3),this._uniforms.uCanvasWidth.value=this._canvasWidth,this._uniforms.uCanvasHeight.value=this._canvasHeight;var t=new l.a(this._uniforms),e=new s.a;this._material=new THREE.ShaderMaterial({side:THREE.DoubleSide,uniforms:this._uniforms,vertexShader:e.compute(),fragmentShader:t.compute()}),this._material.transparent=!0}},e.prototype.update=function(){this._mesh&&(this.remove(this._mesh),this._mesh.geometry.dispose(),this._mesh.geometry=null,this._mesh=null),this._create()},e.prototype.dispose=function(){this._referencePlane=null,this._plane1=null,this._color1=null,this._plane2=null,this._color2=null,this._plane3=null,this._color3=null,this._shadersFragment=null,this._shadersVertex=null,this._uniforms=null,this.remove(this._mesh),this._mesh.geometry.dispose(),this._mesh.geometry=null,this._mesh.material.dispose(),this._mesh.material=null,this._mesh=null,this._geometry.dispose(),this._geometry=null,this._material.vertexShader=null,this._material.fragmentShader=null,this._material.uniforms=null,this._material.dispose(),this._material=null,this._stack=null},c(e,[{key:"geometry",get:function get(){return this._geometry},set:function set(t){this._mesh&&(this.remove(this._mesh),this._mesh.geometry.dispose(),this._mesh.geometry=null,this._mesh=null,this._geometry.dispose(),this._geometry=null),this._geometry=t,this._create()}},{key:"referencePlane",get:function get(){return this._referencePlane},set:function set(t){this._referencePlane=t,this._uniforms.uSlice.value=this._referencePlane}},{key:"plane1",get:function get(){return this._plane1},set:function set(t){this._plane1=t,this._uniforms.uPlane1.value=this._plane1}},{key:"color1",get:function get(){return this._color1},set:function set(t){this._color1=t,this._uniforms.uPlaneColor1.value=this._color1}},{key:"plane2",get:function get(){return this._plane2},set:function set(t){this._plane2=t,this._uniforms.uPlane2.value=this._plane2}},{key:"color2",get:function get(){return this._color2},set:function set(t){this._color2=t,this._uniforms.uPlaneColor2.value=this._color2}},{key:"plane3",get:function get(){return this._plane3},set:function set(t){this._plane3=t,this._uniforms.uPlane3.value=this._plane3}},{key:"color3",get:function get(){return this._color3},set:function set(t){this._color3=t,this._uniforms.uPlaneColor3.value=this._color3}},{key:"canvasWidth",get:function get(){return this._canvasWidth},set:function set(t){this._canvasWidth=t,this._uniforms.uCanvasWidth.value=this._canvasWidth}},{key:"canvasHeight",get:function get(){return this._canvasHeight},set:function set(t){this._canvasHeight=t,this._uniforms.uCanvasHeight.value=this._canvasHeight}}]),e}(THREE.Object3D);e.a=h},function(t,e,n){"use strict";function i(t,e){if(!babelHelpers.instanceof(t,e))throw new TypeError("Cannot call a class as a function")}var r=n(3),o=function(){function t(t,e){for(var n=0,i;n<e.length;n++){i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function(){function t(e){var n,o,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"default",s=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"linear",l=3<arguments.length&&void 0!==arguments[3]?arguments[3]:[[0,0,0,0],[1,1,1,1]],c=4<arguments.length&&void 0!==arguments[4]?arguments[4]:[[0,0],[1,1]],h=5<arguments.length&&void 0!==arguments[5]&&arguments[5];i(this,t),r.a.isString(e)?this._dom=document.getElementById(e):this._dom=e,this._discrete=h,this._color=l,this._lut=a,this._luts=(n={},n[a]=l,n),this._opacity=c,this._lutO=s,this._lutsO=(o={},o[s]=c,o),this.initCanvas(),this.paintCanvas()}return t.prototype.initCanvas=function(){this._canvasContainer=this.initCanvasContainer(this._dom),this._canvasBg=this.createCanvas(),this._canvasContainer.appendChild(this._canvasBg),this._canvas=this.createCanvas(),this._canvasContainer.appendChild(this._canvas)},t.prototype.initCanvasContainer=function(t){var e=t;return e.style.border="1px solid #F9F9F9",e},t.prototype.createCanvas=function(){var t=document.createElement("canvas");return t.height=1,t.width=256,t.style.width="256px",t.style.height="16px",t},t.prototype.paintCanvas=function(){var t=this._canvas.getContext("2d");if(t.clearRect(0,0,this._canvas.width,this._canvas.height),t.globalCompositeOperation="source-over",this._discrete){t.lineWidth=2*this._canvas.height;for(var e=0;e<this._color.length;e++){var n=this._color[e][0],i=1;e<this._color.length-1&&(i=this._color[e+1][0]);var r=0;0<e&&(r=this._color[e-1][0]);var o=r+(n-r)/2,a=n+(i-n)/2,s=this._color[e],l=this._opacity[e]?this._opacity[e][1]:1;t.beginPath(),t.strokeStyle="rgba( "+_Mathround(255*s[1])+", "+_Mathround(255*s[2])+", "+_Mathround(255*s[3])+", "+l+")",t.moveTo(o*this._canvas.width,0),t.lineTo(a*this._canvas.width,0),t.stroke(),t.closePath()}}else{for(var c=t.createLinearGradient(0,0,this._canvas.width,0),h=0;h<this._color.length;h++){c.addColorStop(this._color[h][0],"rgba( "+_Mathround(255*this._color[h][1])+", "+_Mathround(255*this._color[h][2])+", "+_Mathround(255*this._color[h][3])+", 1)")}t.fillStyle=c,t.fillRect(0,0,this._canvas.width,this._canvas.height),t.globalCompositeOperation="destination-in";for(var u=t.createLinearGradient(0,0,this._canvas.width,0),p=0;p<this._opacity.length;p++){u.addColorStop(this._opacity[p][0],"rgba(255, 255, 255, "+this._opacity[p][1]+")")}t.fillStyle=u,t.fillRect(0,0,this._canvas.width,this._canvas.height)}},t.prototype.lutsAvailable=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"color",e=[],n=this._luts;"color"!==t&&(n=this._lutsO);for(var i in n){e.push(i)}return e},t.presetLuts=function(){return{default:[[0,0,0,0],[1,1,1,1]],spectrum:[[0,0,0,0],[.1,0,0,1],[.33,0,1,1],[.5,0,1,0],[.66,1,1,0],[.9,1,0,0],[1,1,1,1]],hot_and_cold:[[0,0,0,1],[.15,0,1,1],[.3,0,1,0],[.45,0,0,0],[.5,0,0,0],[.55,0,0,0],[.7,1,1,0],[.85,1,0,0],[1,1,1,1]],gold:[[0,0,0,0],[.13,.19,.03,0],[.25,.39,.12,0],[.38,.59,.26,0],[.5,.8,.46,.08],[.63,.99,.71,.21],[.75,.99,.88,.34],[.88,.99,.99,.48],[1,.9,.95,.61]],red:[[0,.75,0,0],[.5,1,.5,0],[.95,1,1,0],[1,1,1,1]],green:[[0,0,.75,0],[.5,.5,1,0],[.95,1,1,0],[1,1,1,1]],blue:[[0,0,0,1],[.5,0,.5,1],[.95,0,1,1],[1,1,1,1]],walking_dead:[[0,.1,1,1],[1,1,1,1]],random:[[0,0,0,0],[.27,.18,.18,.18],[.41,1,1,1],[.7,1,0,0],[1,1,1,1]],muscle_bone:[[0,0,0,0],[.00392156862745098,.00784313725490196,0,0],[.00784313725490196,.0196078431372549,0,0],[.011764705882352941,.03137254901960784,0,0],[.01568627450980392,.0392156862745098,0,.00392156862745098],[.0196078431372549,.050980392156862744,.00392156862745098,.00392156862745098],[.023529411764705882,.06274509803921569,.00392156862745098,.00392156862745098],[.027450980392156862,.07058823529411765,.00392156862745098,.00784313725490196],[.03137254901960784,.08235294117647059,.00392156862745098,.00784313725490196],[.03529411764705882,.09411764705882353,.00784313725490196,.00784313725490196],[.0392156862745098,.10196078431372549,.00784313725490196,.00784313725490196],[.043137254901960784,.11372549019607843,.00784313725490196,.011764705882352941],[.047058823529411764,.12549019607843137,.00784313725490196,.011764705882352941],[.050980392156862744,.13333333333333333,.011764705882352941,.011764705882352941],[.054901960784313725,.1450980392156863,.011764705882352941,.01568627450980392],[.058823529411764705,.1568627450980392,.011764705882352941,.01568627450980392],[.06274509803921569,.16470588235294117,.011764705882352941,.01568627450980392],[.06666666666666667,.17647058823529413,.011764705882352941,.0196078431372549],[.07058823529411765,.18823529411764706,.01568627450980392,.0196078431372549],[.07450980392156863,.2,.01568627450980392,.0196078431372549],[.0784313725490196,.20784313725490197,.01568627450980392,.0196078431372549],[.08235294117647059,.2196078431372549,.01568627450980392,.023529411764705882],[.08627450980392157,.23137254901960785,.0196078431372549,.023529411764705882],[.09019607843137255,.23921568627450981,.0196078431372549,.023529411764705882],[.09411764705882353,.25098039215686274,.0196078431372549,.027450980392156862],[.09803921568627451,.2627450980392157,.0196078431372549,.027450980392156862],[.10196078431372549,.27058823529411763,.023529411764705882,.027450980392156862],[.10588235294117647,.2823529411764706,.023529411764705882,.027450980392156862],[.10980392156862745,.29411764705882354,.023529411764705882,.03137254901960784],[.11372549019607843,.30196078431372547,.023529411764705882,.03137254901960784],[.11764705882352941,.3137254901960784,.023529411764705882,.03137254901960784],[.12156862745098039,.3254901960784314,.027450980392156862,.03529411764705882],[.12549019607843137,.3333333333333333,.027450980392156862,.03529411764705882],[.12941176470588237,.34509803921568627,.027450980392156862,.03529411764705882],[.13333333333333333,.3568627450980392,.027450980392156862,.0392156862745098],[.13725490196078433,.36470588235294116,.03137254901960784,.0392156862745098],[.1411764705882353,.3764705882352941,.03137254901960784,.0392156862745098],[.1450980392156863,.38823529411764707,.03137254901960784,.0392156862745098],[.14901960784313725,.4,.03137254901960784,.043137254901960784],[.15294117647058825,.40784313725490196,.03529411764705882,.043137254901960784],[.1568627450980392,.4196078431372549,.03529411764705882,.043137254901960784],[.1607843137254902,.43137254901960786,.03529411764705882,.047058823529411764],[.16470588235294117,.4392156862745098,.03529411764705882,.047058823529411764],[.16862745098039217,.45098039215686275,.03529411764705882,.047058823529411764],[.17254901960784313,.4627450980392157,.0392156862745098,.047058823529411764],[.17647058823529413,.47058823529411764,.0392156862745098,.050980392156862744],[.1803921568627451,.4823529411764706,.0392156862745098,.050980392156862744],[.1843137254901961,.49411764705882355,.0392156862745098,.050980392156862744],[.18823529411764706,.5019607843137255,.043137254901960784,.054901960784313725],[.19215686274509805,.5137254901960784,.043137254901960784,.054901960784313725],[.19607843137254902,.5254901960784314,.043137254901960784,.054901960784313725],[.2,.5333333333333333,.043137254901960784,.058823529411764705],[.20392156862745098,.5450980392156862,.047058823529411764,.058823529411764705],[.20784313725490197,.5568627450980392,.047058823529411764,.058823529411764705],[.21176470588235294,.5647058823529412,.047058823529411764,.058823529411764705],[.21568627450980393,.5764705882352941,.047058823529411764,.06274509803921569],[.2196078431372549,.5882352941176471,.047058823529411764,.06274509803921569],[.2235294117647059,.6,.050980392156862744,.06274509803921569],[.22745098039215686,.6078431372549019,.050980392156862744,.06666666666666667],[.23137254901960785,.6196078431372549,.050980392156862744,.06666666666666667],[.23529411764705882,.6313725490196078,.050980392156862744,.06666666666666667],[.23921568627450981,.6392156862745098,.054901960784313725,.06666666666666667],[.24313725490196078,.6509803921568628,.054901960784313725,.07058823529411765],[.24705882352941178,.6627450980392157,.054901960784313725,.07058823529411765],[.25098039215686274,.6705882352941176,.054901960784313725,.07058823529411765],[.2549019607843137,.6823529411764706,.058823529411764705,.07450980392156863],[.25882352941176473,.6941176470588235,.058823529411764705,.07450980392156863],[.2627450980392157,.7019607843137254,.058823529411764705,.07450980392156863],[.26666666666666666,.7137254901960784,.058823529411764705,.0784313725490196],[.27058823529411763,.7254901960784313,.058823529411764705,.0784313725490196],[.27450980392156865,.7333333333333333,.06274509803921569,.0784313725490196],[.2784313725490196,.7450980392156863,.06274509803921569,.0784313725490196],[.2823529411764706,.7568627450980392,.06274509803921569,.08235294117647059],[.28627450980392155,.7647058823529411,.06274509803921569,.08235294117647059],[.2901960784313726,.7764705882352941,.06666666666666667,.08235294117647059],[.29411764705882354,.788235294117647,.06666666666666667,.08627450980392157],[.2980392156862745,.8,.06666666666666667,.08627450980392157],[.30196078431372547,.807843137254902,.06666666666666667,.08627450980392157],[.3058823529411765,.8196078431372549,.07058823529411765,.08627450980392157],[.30980392156862746,.8313725490196079,.07058823529411765,.09019607843137255],[.3137254901960784,.8392156862745098,.07058823529411765,.09019607843137255],[.3176470588235294,.8509803921568627,.07058823529411765,.09019607843137255],[.3215686274509804,.8627450980392157,.07058823529411765,.09411764705882353],[.3254901960784314,.8705882352941177,.07450980392156863,.09411764705882353],[.32941176470588235,.8823529411764706,.07450980392156863,.09411764705882353],[.3333333333333333,.8941176470588236,.07450980392156863,.09803921568627451],[.33725490196078434,.9019607843137255,.07450980392156863,.09803921568627451],[.3411764705882353,.9137254901960784,.0784313725490196,.09803921568627451],[.34509803921568627,.9254901960784314,.0784313725490196,.09803921568627451],[.34901960784313724,.9333333333333333,.0784313725490196,.10196078431372549],[.35294117647058826,.9450980392156862,.0784313725490196,.10196078431372549],[.3568627450980392,.9568627450980393,.08235294117647059,.10196078431372549],[.3607843137254902,.9647058823529412,.08235294117647059,.10588235294117647],[.36470588235294116,.9764705882352941,.08235294117647059,.10588235294117647],[.3686274509803922,.9882352941176471,.08235294117647059,.10588235294117647],[.37254901960784315,1,.08235294117647059,.10588235294117647],[.3764705882352941,1,.09411764705882353,.10588235294117647],[.3803921568627451,1,.10588235294117647,.10588235294117647],[.3843137254901961,1,.11764705882352941,.10196078431372549],[.38823529411764707,1,.12941176470588237,.10196078431372549],[.39215686274509803,1,.1411764705882353,.10196078431372549],[.396078431372549,1,.15294117647058825,.09803921568627451],[.4,1,.16470588235294117,.09803921568627451],[.403921568627451,1,.17647058823529413,.09803921568627451],[.40784313725490196,1,.18823529411764706,.09411764705882353],[.4117647058823529,1,.2,.09411764705882353],[.41568627450980394,1,.21176470588235294,.09411764705882353],[.4196078431372549,1,.2235294117647059,.09019607843137255],[.4235294117647059,1,.23529411764705882,.09019607843137255],[.42745098039215684,1,.24705882352941178,.08627450980392157],[.43137254901960786,1,.25882352941176473,.08627450980392157],[.43529411764705883,1,.27058823529411763,.08627450980392157],[.4392156862745098,1,.2823529411764706,.08235294117647059],[.44313725490196076,1,.29411764705882354,.08235294117647059],[.4470588235294118,1,.3058823529411765,.08235294117647059],[.45098039215686275,1,.3176470588235294,.0784313725490196],[.4549019607843137,1,.32941176470588235,.0784313725490196],[.4588235294117647,1,.3411764705882353,.0784313725490196],[.4627450980392157,1,.35294117647058826,.07450980392156863],[.4666666666666667,1,.36470588235294116,.07450980392156863],[.47058823529411764,1,.3764705882352941,.07450980392156863],[.4745098039215686,1,.38823529411764707,.07058823529411765],[.47843137254901963,1,.4,.07058823529411765],[.4823529411764706,1,.4117647058823529,.07058823529411765],[.48627450980392156,1,.4235294117647059,.06666666666666667],[.49019607843137253,1,.43529411764705883,.06666666666666667],[.49411764705882355,1,.4470588235294118,.06274509803921569],[.4980392156862745,1,.4588235294117647,.06274509803921569],[.5019607843137255,1,.47058823529411764,.06274509803921569],[.5058823529411764,1,.4823529411764706,.058823529411764705],[.5098039215686274,1,.49411764705882355,.058823529411764705],[.5137254901960784,1,.5058823529411764,.058823529411764705],[.5176470588235295,1,.5137254901960784,.054901960784313725],[.5215686274509804,1,.5254901960784314,.054901960784313725],[.5254901960784314,1,.5372549019607843,.054901960784313725],[.5294117647058824,1,.5490196078431373,.050980392156862744],[.5333333333333333,1,.5607843137254902,.050980392156862744],[.5372549019607843,1,.5725490196078431,.050980392156862744],[.5411764705882353,1,.5843137254901961,.047058823529411764],[.5450980392156862,1,.596078431372549,.047058823529411764],[.5490196078431373,1,.6078431372549019,.043137254901960784],[.5529411764705883,1,.6196078431372549,.043137254901960784],[.5568627450980392,1,.6313725490196078,.043137254901960784],[.5607843137254902,1,.6431372549019608,.0392156862745098],[.5647058823529412,1,.6549019607843137,.0392156862745098],[.5686274509803921,1,.6666666666666666,.0392156862745098],[.5725490196078431,1,.6784313725490196,.03529411764705882],[.5764705882352941,1,.6901960784313725,.03529411764705882],[.5803921568627451,1,.6941176470588235,.0392156862745098],[.5843137254901961,1,.7019607843137254,.0392156862745098],[.5882352941176471,1,.7058823529411765,.043137254901960784],[.592156862745098,1,.7098039215686275,.043137254901960784],[.596078431372549,1,.7137254901960784,.047058823529411764],[.6,1,.7176470588235294,.047058823529411764],[.6039215686274509,1,.7254901960784313,.050980392156862744],[.6078431372549019,1,.7294117647058823,.050980392156862744],[.611764705882353,1,.7333333333333333,.054901960784313725],[.615686274509804,1,.7372549019607844,.058823529411764705],[.6196078431372549,1,.7411764705882353,.058823529411764705],[.6235294117647059,1,.7490196078431373,.06274509803921569],[.6274509803921569,1,.7529411764705882,.06274509803921569],[.6313725490196078,1,.7568627450980392,.06666666666666667],[.6352941176470588,1,.7607843137254902,.06666666666666667],[.6392156862745098,1,.7647058823529411,.07058823529411765],[.6431372549019608,1,.7725490196078432,.07058823529411765],[.6470588235294118,1,.7764705882352941,.07450980392156863],[.6509803921568628,1,.7803921568627451,.07450980392156863],[.6549019607843137,1,.7843137254901961,.0784313725490196],[.6588235294117647,1,.788235294117647,.08235294117647059],[.6627450980392157,1,.796078431372549,.08235294117647059],[.6666666666666666,1,.8,.08627450980392157],[.6705882352941176,1,.803921568627451,.08627450980392157],[.6745098039215687,1,.807843137254902,.09019607843137255],[.6784313725490196,1,.8117647058823529,.09019607843137255],[.6823529411764706,1,.8196078431372549,.09411764705882353],[.6862745098039216,1,.8235294117647058,.09411764705882353],[.6901960784313725,1,.8274509803921568,.09803921568627451],[.6941176470588235,1,.8313725490196079,.10196078431372549],[.6980392156862745,1,.8352941176470589,.10196078431372549],[.7019607843137254,1,.8431372549019608,.10588235294117647],[.7058823529411765,1,.8470588235294118,.10588235294117647],[.7098039215686275,1,.8509803921568627,.10980392156862745],[.7137254901960784,1,.8549019607843137,.10980392156862745],[.7176470588235294,1,.8627450980392157,.11372549019607843],[.7215686274509804,1,.8666666666666667,.11372549019607843],[.7254901960784313,1,.8705882352941177,.11764705882352941],[.7294117647058823,1,.8745098039215686,.12156862745098039],[.7333333333333333,1,.8784313725490196,.12156862745098039],[.7372549019607844,1,.8862745098039215,.12549019607843137],[.7411764705882353,1,.8901960784313725,.12549019607843137],[.7450980392156863,1,.8941176470588236,.12941176470588237],[.7490196078431373,1,.8980392156862745,.12941176470588237],[.7529411764705882,1,.9019607843137255,.13333333333333333],[.7568627450980392,1,.9098039215686274,.13333333333333333],[.7607843137254902,1,.9137254901960784,.13725490196078433],[.7647058823529411,1,.9176470588235294,.1411764705882353],[.7686274509803922,1,.9215686274509803,.1411764705882353],[.7725490196078432,1,.9254901960784314,.1450980392156863],[.7764705882352941,1,.9333333333333333,.1450980392156863],[.7803921568627451,1,.9372549019607843,.14901960784313725],[.7843137254901961,1,.9411764705882353,.14901960784313725],[.788235294117647,1,.9450980392156862,.15294117647058825],[.792156862745098,1,.9450980392156862,.16862745098039217],[.796078431372549,1,.9490196078431372,.1843137254901961],[.8,1,.9490196078431372,.2],[.803921568627451,1,.9490196078431372,.21568627450980393],[.807843137254902,1,.9490196078431372,.22745098039215686],[.8117647058823529,1,.9529411764705882,.24313725490196078],[.8156862745098039,1,.9529411764705882,.25882352941176473],[.8196078431372549,1,.9529411764705882,.27450980392156865],[.8235294117647058,1,.9529411764705882,.2901960784313726],[.8274509803921568,1,.9568627450980393,.3058823529411765],[.8313725490196079,1,.9568627450980393,.3215686274509804],[.8352941176470589,1,.9568627450980393,.33725490196078434],[.8392156862745098,1,.9568627450980393,.35294117647058826],[.8431372549019608,1,.9607843137254902,.3686274509803922],[.8470588235294118,1,.9607843137254902,.3843137254901961],[.8509803921568627,1,.9607843137254902,.4],[.8549019607843137,1,.9607843137254902,.4117647058823529],[.8588235294117647,1,.9647058823529412,.42745098039215684],[.8627450980392157,1,.9647058823529412,.44313725490196076],[.8666666666666667,1,.9647058823529412,.4588235294117647],[.8705882352941177,1,.9647058823529412,.4745098039215686],[.8745098039215686,1,.9686274509803922,.49019607843137253],[.8784313725490196,1,.9686274509803922,.5058823529411764],[.8823529411764706,1,.9686274509803922,.5215686274509804],[.8862745098039215,1,.9686274509803922,.5372549019607843],[.8901960784313725,1,.9725490196078431,.5529411764705883],[.8941176470588236,1,.9725490196078431,.5686274509803921],[.8980392156862745,1,.9725490196078431,.5843137254901961],[.9019607843137255,1,.9725490196078431,.6],[.9058823529411765,1,.9725490196078431,.611764705882353],[.9098039215686274,1,.9764705882352941,.6274509803921569],[.9137254901960784,1,.9764705882352941,.6431372549019608],[.9176470588235294,1,.9764705882352941,.6588235294117647],[.9215686274509803,1,.9764705882352941,.6745098039215687],[.9254901960784314,1,.9803921568627451,.6901960784313725],[.9294117647058824,1,.9803921568627451,.7058823529411765],[.9333333333333333,1,.9803921568627451,.7215686274509804],[.9372549019607843,1,.9803921568627451,.7372549019607844],[.9411764705882353,1,.984313725490196,.7529411764705882],[.9450980392156862,1,.984313725490196,.7686274509803922],[.9490196078431372,1,.984313725490196,.7843137254901961],[.9529411764705882,1,.984313725490196,.8],[.9568627450980393,1,.9882352941176471,.8117647058823529],[.9607843137254902,1,.9882352941176471,.8274509803921568],[.9647058823529412,1,.9882352941176471,.8431372549019608],[.9686274509803922,1,.9882352941176471,.8588235294117647],[.9725490196078431,1,.9921568627450981,.8745098039215686],[.9764705882352941,1,.9921568627450981,.8901960784313725],[.9803921568627451,1,.9921568627450981,.9058823529411765],[.984313725490196,1,.9921568627450981,.9215686274509803],[.9882352941176471,1,.996078431372549,.9372549019607843],[.9921568627450981,1,.996078431372549,.9529411764705882],[.996078431372549,1,.996078431372549,.9686274509803922],[1,1,.996078431372549,.984313725490196]]}},t.presetLutsO=function(){return{linear:[[0,0],[1,1]],lowpass:[[0,.8],[.2,.6],[.3,.1],[1,0]],bandpass:[[0,0],[.4,.8],[.6,.8],[1,0]],highpass:[[0,0],[.7,.1],[.8,.6],[1,.8]],flat:[[0,.7],[1,1]],random:[[0,0],[.38,0],[.55,1],[.72,1],[1,.05]],linear_full:[[0,0],[.00392156862745098,.00392156862745098],[.00784313725490196,.00784313725490196],[.011764705882352941,.011764705882352941],[.01568627450980392,.01568627450980392],[.0196078431372549,.0196078431372549],[.023529411764705882,.023529411764705882],[.027450980392156862,.027450980392156862],[.03137254901960784,.03137254901960784],[.03529411764705882,.03529411764705882],[.0392156862745098,.0392156862745098],[.043137254901960784,.043137254901960784],[.047058823529411764,.047058823529411764],[.050980392156862744,.050980392156862744],[.054901960784313725,.054901960784313725],[.058823529411764705,.058823529411764705],[.06274509803921569,.06274509803921569],[.06666666666666667,.06666666666666667],[.07058823529411765,.07058823529411765],[.07450980392156863,.07450980392156863],[.0784313725490196,.0784313725490196],[.08235294117647059,.08235294117647059],[.08627450980392157,.08627450980392157],[.09019607843137255,.09019607843137255],[.09411764705882353,.09411764705882353],[.09803921568627451,.09803921568627451],[.10196078431372549,.10196078431372549],[.10588235294117647,.10588235294117647],[.10980392156862745,.10980392156862745],[.11372549019607843,.11372549019607843],[.11764705882352941,.11764705882352941],[.12156862745098039,.12156862745098039],[.12549019607843137,.12549019607843137],[.12941176470588237,.12941176470588237],[.13333333333333333,.13333333333333333],[.13725490196078433,.13725490196078433],[.1411764705882353,.1411764705882353],[.1450980392156863,.1450980392156863],[.14901960784313725,.14901960784313725],[.15294117647058825,.15294117647058825],[.1568627450980392,.1568627450980392],[.1607843137254902,.1607843137254902],[.16470588235294117,.16470588235294117],[.16862745098039217,.16862745098039217],[.17254901960784313,.17254901960784313],[.17647058823529413,.17647058823529413],[.1803921568627451,.1803921568627451],[.1843137254901961,.1843137254901961],[.18823529411764706,.18823529411764706],[.19215686274509805,.19215686274509805],[.19607843137254902,.19607843137254902],[.2,.2],[.20392156862745098,.20392156862745098],[.20784313725490197,.20784313725490197],[.21176470588235294,.21176470588235294],[.21568627450980393,.21568627450980393],[.2196078431372549,.2196078431372549],[.2235294117647059,.2235294117647059],[.22745098039215686,.22745098039215686],[.23137254901960785,.23137254901960785],[.23529411764705882,.23529411764705882],[.23921568627450981,.23921568627450981],[.24313725490196078,.24313725490196078],[.24705882352941178,.24705882352941178],[.25098039215686274,.25098039215686274],[.2549019607843137,.2549019607843137],[.25882352941176473,.25882352941176473],[.2627450980392157,.2627450980392157],[.26666666666666666,.26666666666666666],[.27058823529411763,.27058823529411763],[.27450980392156865,.27450980392156865],[.2784313725490196,.2784313725490196],[.2823529411764706,.2823529411764706],[.28627450980392155,.28627450980392155],[.2901960784313726,.2901960784313726],[.29411764705882354,.29411764705882354],[.2980392156862745,.2980392156862745],[.30196078431372547,.30196078431372547],[.3058823529411765,.3058823529411765],[.30980392156862746,.30980392156862746],[.3137254901960784,.3137254901960784],[.3176470588235294,.3176470588235294],[.3215686274509804,.3215686274509804],[.3254901960784314,.3254901960784314],[.32941176470588235,.32941176470588235],[.3333333333333333,.3333333333333333],[.33725490196078434,.33725490196078434],[.3411764705882353,.3411764705882353],[.34509803921568627,.34509803921568627],[.34901960784313724,.34901960784313724],[.35294117647058826,.35294117647058826],[.3568627450980392,.3568627450980392],[.3607843137254902,.3607843137254902],[.36470588235294116,.36470588235294116],[.3686274509803922,.3686274509803922],[.37254901960784315,.37254901960784315],[.3764705882352941,.3764705882352941],[.3803921568627451,.3803921568627451],[.3843137254901961,.3843137254901961],[.38823529411764707,.38823529411764707],[.39215686274509803,.39215686274509803],[.396078431372549,.396078431372549],[.4,.4],[.403921568627451,.403921568627451],[.40784313725490196,.40784313725490196],[.4117647058823529,.4117647058823529],[.41568627450980394,.41568627450980394],[.4196078431372549,.4196078431372549],[.4235294117647059,.4235294117647059],[.42745098039215684,.42745098039215684],[.43137254901960786,.43137254901960786],[.43529411764705883,.43529411764705883],[.4392156862745098,.4392156862745098],[.44313725490196076,.44313725490196076],[.4470588235294118,.4470588235294118],[.45098039215686275,.45098039215686275],[.4549019607843137,.4549019607843137],[.4588235294117647,.4588235294117647],[.4627450980392157,.4627450980392157],[.4666666666666667,.4666666666666667],[.47058823529411764,.47058823529411764],[.4745098039215686,.4745098039215686],[.47843137254901963,.47843137254901963],[.4823529411764706,.4823529411764706],[.48627450980392156,.48627450980392156],[.49019607843137253,.49019607843137253],[.49411764705882355,.49411764705882355],[.4980392156862745,.4980392156862745],[.5019607843137255,.5019607843137255],[.5058823529411764,.5058823529411764],[.5098039215686274,.5098039215686274],[.5137254901960784,.5137254901960784],[.5176470588235295,.5176470588235295],[.5215686274509804,.5215686274509804],[.5254901960784314,.5254901960784314],[.5294117647058824,.5294117647058824],[.5333333333333333,.5333333333333333],[.5372549019607843,.5372549019607843],[.5411764705882353,.5411764705882353],[.5450980392156862,.5450980392156862],[.5490196078431373,.5490196078431373],[.5529411764705883,.5529411764705883],[.5568627450980392,.5568627450980392],[.5607843137254902,.5607843137254902],[.5647058823529412,.5647058823529412],[.5686274509803921,.5686274509803921],[.5725490196078431,.5725490196078431],[.5764705882352941,.5764705882352941],[.5803921568627451,.5803921568627451],[.5843137254901961,.5843137254901961],[.5882352941176471,.5882352941176471],[.592156862745098,.592156862745098],[.596078431372549,.596078431372549],[.6,.6],[.6039215686274509,.6039215686274509],[.6078431372549019,.6078431372549019],[.611764705882353,.611764705882353],[.615686274509804,.615686274509804],[.6196078431372549,.6196078431372549],[.6235294117647059,.6235294117647059],[.6274509803921569,.6274509803921569],[.6313725490196078,.6313725490196078],[.6352941176470588,.6352941176470588],[.6392156862745098,.6392156862745098],[.6431372549019608,.6431372549019608],[.6470588235294118,.6470588235294118],[.6509803921568628,.6509803921568628],[.6549019607843137,.6549019607843137],[.6588235294117647,.6588235294117647],[.6627450980392157,.6627450980392157],[.6666666666666666,.6666666666666666],[.6705882352941176,.6705882352941176],[.6745098039215687,.6745098039215687],[.6784313725490196,.6784313725490196],[.6823529411764706,.6823529411764706],[.6862745098039216,.6862745098039216],[.6901960784313725,.6901960784313725],[.6941176470588235,.6941176470588235],[.6980392156862745,.6980392156862745],[.7019607843137254,.7019607843137254],[.7058823529411765,.7058823529411765],[.7098039215686275,.7098039215686275],[.7137254901960784,.7137254901960784],[.7176470588235294,.7176470588235294],[.7215686274509804,.7215686274509804],[.7254901960784313,.7254901960784313],[.7294117647058823,.7294117647058823],[.7333333333333333,.7333333333333333],[.7372549019607844,.7372549019607844],[.7411764705882353,.7411764705882353],[.7450980392156863,.7450980392156863],[.7490196078431373,.7490196078431373],[.7529411764705882,.7529411764705882],[.7568627450980392,.7568627450980392],[.7607843137254902,.7607843137254902],[.7647058823529411,.7647058823529411],[.7686274509803922,.7686274509803922],[.7725490196078432,.7725490196078432],[.7764705882352941,.7764705882352941],[.7803921568627451,.7803921568627451],[.7843137254901961,.7843137254901961],[.788235294117647,.788235294117647],[.792156862745098,.792156862745098],[.796078431372549,.796078431372549],[.8,.8],[.803921568627451,.803921568627451],[.807843137254902,.807843137254902],[.8117647058823529,.8117647058823529],[.8156862745098039,.8156862745098039],[.8196078431372549,.8196078431372549],[.8235294117647058,.8235294117647058],[.8274509803921568,.8274509803921568],[.8313725490196079,.8313725490196079],[.8352941176470589,.8352941176470589],[.8392156862745098,.8392156862745098],[.8431372549019608,.8431372549019608],[.8470588235294118,.8470588235294118],[.8509803921568627,.8509803921568627],[.8549019607843137,.8549019607843137],[.8588235294117647,.8588235294117647],[.8627450980392157,.8627450980392157],[.8666666666666667,.8666666666666667],[.8705882352941177,.8705882352941177],[.8745098039215686,.8745098039215686],[.8784313725490196,.8784313725490196],[.8823529411764706,.8823529411764706],[.8862745098039215,.8862745098039215],[.8901960784313725,.8901960784313725],[.8941176470588236,.8941176470588236],[.8980392156862745,.8980392156862745],[.9019607843137255,.9019607843137255],[.9058823529411765,.9058823529411765],[.9098039215686274,.9098039215686274],[.9137254901960784,.9137254901960784],[.9176470588235294,.9176470588235294],[.9215686274509803,.9215686274509803],[.9254901960784314,.9254901960784314],[.9294117647058824,.9294117647058824],[.9333333333333333,.9333333333333333],[.9372549019607843,.9372549019607843],[.9411764705882353,.9411764705882353],[.9450980392156862,.9450980392156862],[.9490196078431372,.9490196078431372],[.9529411764705882,.9529411764705882],[.9568627450980393,.9568627450980393],[.9607843137254902,.9607843137254902],[.9647058823529412,.9647058823529412],[.9686274509803922,.9686274509803922],[.9725490196078431,.9725490196078431],[.9764705882352941,.9764705882352941],[.9803921568627451,.9803921568627451],[.984313725490196,.984313725490196],[.9882352941176471,.9882352941176471],[.9921568627450981,.9921568627450981],[.996078431372549,.996078431372549],[1,1]]}},o(t,[{key:"texture",get:function get(){var t=new THREE.Texture(this._canvas);return t.mapping=THREE.UVMapping,t.wrapS=t.wrapT=THREE.ClampToEdgeWrapping,t.magFilter=t.minFilter=THREE.NearestFilter,t.premultiplyAlpha=!0,t.needsUpdate=!0,t}},{key:"lut",set:function set(t){this._color=this._luts[t],this._lut=t,this.paintCanvas()},get:function get(){return this._lut}},{key:"luts",set:function set(t){this._luts=t},get:function get(){return this._luts}},{key:"lutO",set:function set(t){this._opacity=this._lutsO[t],this._lutO=t,this.paintCanvas()},get:function get(){return this._lutO}},{key:"lutsO",set:function set(t){this._lutsO=t},get:function get(){return this._lutsO}},{key:"discrete",set:function set(t){this._discrete=t,this.paintCanvas()},get:function get(){return this._discrete}}]),t}();e.a=a},function(t,e,n){"use strict";function i(t,e){if(!babelHelpers.instanceof(t,e))throw new TypeError("Cannot call a class as a function")}var r=n(3),o=function(){function t(t,e){for(var n=0,i;n<e.length;n++){i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a={0:{color:[0,0,0],opacity:0,label:"background"},1:{color:[255,0,0],opacity:1,label:"white matter"}},s=function(){function t(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:a;i(this,t),r.a.isString(e)?this._dom=document.getElementById(e):this._dom=e,this._segmentation=n,this.initCanvas(),this.paintCanvas()}return t.prototype.initCanvas=function(){this._canvasContainer=this.initCanvasContainer(this._dom),this._canvasBg=this.createCanvas(),this._canvasContainer.appendChild(this._canvasBg),this._canvas=this.createCanvas(),this._canvasContainer.appendChild(this._canvas)},t.prototype.initCanvasContainer=function(t){var e=t;return e.style.width="256 px",e.style.height="128 px",e.style.border="1px solid #F9F9F9",e},t.prototype.createCanvas=function(){var t=document.createElement("canvas");return t.height=128,t.width=256,t},t.prototype.paintCanvas=function(){var t=this._canvas.getContext("2d");t.clearRect(0,0,this._canvas.width,this._canvas.height),t.globalCompositeOperation="source-over",t.lineWidth=1;for(var e in this._segmentation){var n=e%this._canvas.width,i=_Mathfloor(e/this._canvas.width),r=void 0!==this._segmentation[e].opacity?this._segmentation[e].opacity:1,o=this._segmentation[e].color;t.fillStyle="rgba( "+_Mathround(o[0])+", "+_Mathround(o[1])+", "+_Mathround(o[2])+", "+r+")",t.fillRect(n,i,1,1)}},o(t,[{key:"texture",get:function get(){var t=new THREE.Texture(this._canvas);return t.mapping=THREE.UVMapping,t.wrapS=t.wrapT=THREE.ClampToEdgeWrapping,t.magFilter=t.minFilter=THREE.NearestFilter,t.premultiplyAlpha=!0,t.needsUpdate=!0,t}},{key:"segmentation",set:function set(t){this._segmentation=t,this.paintCanvas()},get:function get(){return this._segmentation}}]),t}();e.a=s},function(t,e,n){"use strict";function i(t,e){if(!babelHelpers.instanceof(t,e))throw new TypeError("Cannot call a class as a function")}var r=n(3),o=function(){function t(e,n){i(this,t),e&&this._isFunction(e.emit)?(r.a.isString(n)?this._dom=document.getElementById(n):this._dom=n,r.a.isElement(this._dom)?(this._emitter=e,this.initContainerDom(),this.initEventListenner(),this.loaded=0,this.totalFile=0):window.console.error("please give the id of container dom or directly a dom instance")):window.console.error("please give the this._emitter instance")}return t.prototype._isFunction=function(t){return"[object Function]"===Object.prototype.toString.call(t)},t.prototype.initEventListenner=function(){var t=this;this._emitter.on("load-start",function(e){var n=e.files.length;t.totalFile=n,t._domTotalFile.innerHTML=n}),this._emitter.on("fetch-start",function(e){var n=document.createElement("li"),i=document.createElement("div");i.innerHTML="file: "+e.file,i.style.color="#ffffff",n.append(i),n.className="fetch-file",n.id="file-"+e.file,n.style.marginBottom="7px",n.style.border="1px solid #ffffff;",n.style.width="60%";var r=document.createElement("div");r.id="file-fetch-"+e.file,r.style.width="0%",n.append(r),t._domProcessList.append(n)}),this._emitter.on("fetch-progress",function(t){var e="file-fetch-"+t.file,n=document.getElementById(e);n.style.width=100*(t.loaded/t.total)+"%",n.style.border="1px solid red"}),this._emitter.on("fetch-success",function(t){var e=document.getElementById("file-"+t.file),n=document.createElement("div");n.id="file-result-"+t.file,n.innerHTML="fetch-success",n.style.color="#ffffff",e.append(n)}),this._emitter.on("fetch-error",function(){}),this._emitter.on("fetch-abort",function(){}),this._emitter.on("fetch-end",function(){}),this._emitter.on("fetch-timeout",function(){}),this._emitter.on("parse-start",function(t){var e=document.getElementById("file-"+t.file),n=document.createElement("div");n.id="file-parse-"+t.file,n.style.width="0%",e.append(n)}),this._emitter.on("parsing",function(t){var e="file-parse-"+t.file,n=document.getElementById(e);n.style.width=100*(t.parsed/t.total)+"%",n.style.border="1px solid yellow"}),this._emitter.on("parse-success",function(e){t.loaded+=1,t._domCurrentFile.innerHTML=t.loaded,t._domCurrentProgress.style.width=100*(t.loaded/t.totalFile)+"%";var n=document.getElementById("file-"+e.file),i=document.createElement("div");i.id="file-result-"+e.file,i.innerHTML="parse-success",i.style.color="#ffffff",n.append(i)})},t.prototype.initContainerDom=function(){var t=document.createElement("div");t.innerHTML="\n      <div id=\"ami-progress-bar-container\" style=\"background-color: rgb(33, 33, 33); color: #ffffff;\">\n      <div>\n      <label for=\"progress-bar\" id=\"progress-label\" style=\"width: 60%; border: 1px solid #ffffff; text-align: center;\">\n      <span id=\"current-file-index\">0</span>\n      <span id=\"total-file\">0</span>\n      </label>\n      <div id=\"progress-bar\" style=\"width: 60%; border: 1px solid #ffffff; text-align: center;\">\n      <div id=\"current-progress\" style=\"border: 1px solid red; width: 0%;\"></div>\n      </div>\n      </div>\n      <ul id=\"process-list\" style=\"list-style-type: none; padding: 0; overflow-y: auto;\">\n      </ul>\n      </div>",this._dom.append(t),this._domCurrentFile=document.getElementById("current-file-index"),this._domTotalFile=document.getElementById("total-file"),this._domProcessList=document.getElementById("process-list"),this._domCurrentProgress=document.getElementById("current-progress")},t}();e.a=o},function(t,e,n){"use strict";function i(t,e){if(!babelHelpers.instanceof(t,e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=babelHelpers.typeof(e)&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+babelHelpers.typeof(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(t){function e(){i(this,e);var n=r(this,t.call(this));return n.name="unpack",n._packedData="packedData",n._offset="offset",n._unpackedData="unpackedData",n._base._uniforms={uNumberOfChannels:{value:1},uBitsAllocated:{value:16},uPixelType:{value:0}},n}return o(e,t),e.prototype.api=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._base,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this._packedData,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this._offset,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:this._unpackedData;return this._base=t,this.compute(e,n,i)},e.prototype.compute=function(t,e,n){return this.computeDefinition(),this._base._functions[this._name]=this._definition,this._name+"("+t+", "+e+", "+n+");"},e.prototype.computeDefinition=function(){var t="";if(1===this._base._uniforms.uNumberOfChannels.value)switch(this._base._uniforms.uBitsAllocated.value){case 1:case 8:t=this.upack8();break;case 16:t=this.upack16();break;case 32:t=this.upack32();break;default:t=this.upackIdentity();}else t=this.upackIdentity();this._definition="\nvoid "+this._name+"(in vec4 packedData, in int offset, out vec4 unpackedData){\n\n"+t+"\n\n}  \n    "},e.prototype.upack8=function(){return this._base._functions.uInt8=this.uInt8(),"\nuInt8(\n  step( abs( float(offset - 0) ), 0.0 ) * packedData.r +\n  step( abs( float(offset - 1) ), 0.0 ) * packedData.g +\n  step( abs( float(offset - 2) ), 0.0 ) * packedData.b +\n  step( abs( float(offset - 3) ), 0.0 ) * packedData.a\n  ,\n  unpackedData.x);\n    "},e.prototype.upack16=function(){return this._base._functions.uInt16=this.uInt16(),"\nuInt16(\n  packedData.r * float( 1 - offset) + packedData.b * float(offset),\n  packedData.g * float( 1 - offset) + packedData.a * float(offset),\n  unpackedData.x);\n    "},e.prototype.upack32=function(){return 0===this._base._uniforms.uPixelType.value?(this._base._functions.uInt32=this.uInt32(),"\nuInt32(\n  packedData.r,\n  packedData.g,\n  packedData.b,\n  packedData.a,\n  unpackedData.x);\n      "):(this._base._functions.uFloat32=this.uFloat32(),"\nuFloat32(\n  packedData.r,\n  packedData.g,\n  packedData.b,\n  packedData.a,\n  unpackedData.x);\n      ")},e.prototype.upackIdentity=function(){return"\nunpackedData = packedData;\n      "},e.prototype.uInt8=function(){return"\nvoid uInt8(in float r, out float value){\n  value = r * 255.;\n}\n    "},e.prototype.uInt16=function(){return"\nvoid uInt16(in float r, in float a, out float value){\n  value = r * 255. + a * 255. * 256.;\n}\n    "},e.prototype.uInt32=function(){return"\nvoid uInt32(in float r, in float g, in float b, in float a, out float value){\n  value = r * 255. + g * 255. * 256. + b * 255. * 256. * 256. + a * 255. * 256. * 256. * 256.;\n  // value = r * 255. + g * 65025. + b * 16581375. + a * 4228250625.;\n}\n    "},e.prototype.uFloat32=function(){return"\nvoid uFloat32(in float r, in float g, in float b, in float a, out float value){\n\n  // create arrays containing bits for rgba values\n  // value between 0 and 255\n  value = r * 255.;\n  int bytemeR[8];\n  bytemeR[0] = int(floor(value / 128.));\n  value -= float(bytemeR[0] * 128);\n  bytemeR[1] = int(floor(value / 64.));\n  value -= float(bytemeR[1] * 64);\n  bytemeR[2] = int(floor(value / 32.));\n  value -= float(bytemeR[2] * 32);\n  bytemeR[3] = int(floor(value / 16.));\n  value -= float(bytemeR[3] * 16);\n  bytemeR[4] = int(floor(value / 8.));\n  value -= float(bytemeR[4] * 8);\n  bytemeR[5] = int(floor(value / 4.));\n  value -= float(bytemeR[5] * 4);\n  bytemeR[6] = int(floor(value / 2.));\n  value -= float(bytemeR[6] * 2);\n  bytemeR[7] = int(floor(value));\n\n  value = g * 255.;\n  int bytemeG[8];\n  bytemeG[0] = int(floor(value / 128.));\n  value -= float(bytemeG[0] * 128);\n  bytemeG[1] = int(floor(value / 64.));\n  value -= float(bytemeG[1] * 64);\n  bytemeG[2] = int(floor(value / 32.));\n  value -= float(bytemeG[2] * 32);\n  bytemeG[3] = int(floor(value / 16.));\n  value -= float(bytemeG[3] * 16);\n  bytemeG[4] = int(floor(value / 8.));\n  value -= float(bytemeG[4] * 8);\n  bytemeG[5] = int(floor(value / 4.));\n  value -= float(bytemeG[5] * 4);\n  bytemeG[6] = int(floor(value / 2.));\n  value -= float(bytemeG[6] * 2);\n  bytemeG[7] = int(floor(value));\n\n  value = b * 255.;\n  int bytemeB[8];\n  bytemeB[0] = int(floor(value / 128.));\n  value -= float(bytemeB[0] * 128);\n  bytemeB[1] = int(floor(value / 64.));\n  value -= float(bytemeB[1] * 64);\n  bytemeB[2] = int(floor(value / 32.));\n  value -= float(bytemeB[2] * 32);\n  bytemeB[3] = int(floor(value / 16.));\n  value -= float(bytemeB[3] * 16);\n  bytemeB[4] = int(floor(value / 8.));\n  value -= float(bytemeB[4] * 8);\n  bytemeB[5] = int(floor(value / 4.));\n  value -= float(bytemeB[5] * 4);\n  bytemeB[6] = int(floor(value / 2.));\n  value -= float(bytemeB[6] * 2);\n  bytemeB[7] = int(floor(value));\n\n  value = a * 255.;\n  int bytemeA[8];\n  bytemeA[0] = int(floor(value / 128.));\n  value -= float(bytemeA[0] * 128);\n  bytemeA[1] = int(floor(value / 64.));\n  value -= float(bytemeA[1] * 64);\n  bytemeA[2] = int(floor(value / 32.));\n  value -= float(bytemeA[2] * 32);\n  bytemeA[3] = int(floor(value / 16.));\n  value -= float(bytemeA[3] * 16);\n  bytemeA[4] = int(floor(value / 8.));\n  value -= float(bytemeA[4] * 8);\n  bytemeA[5] = int(floor(value / 4.));\n  value -= float(bytemeA[5] * 4);\n  bytemeA[6] = int(floor(value / 2.));\n  value -= float(bytemeA[6] * 2);\n  bytemeA[7] = int(floor(value));\n\n  // compute float32 value from bit arrays\n\n  // sign\n  int issigned = 1 - 2 * bytemeR[0];\n  //   issigned = int(pow(-1., float(bytemeR[0])));\n\n  // exponent\n  int exponent = 0;\n\n  exponent += bytemeR[1] * int(pow(2., 7.));\n  exponent += bytemeR[2] * int(pow(2., 6.));\n  exponent += bytemeR[3] * int(pow(2., 5.));\n  exponent += bytemeR[4] * int(pow(2., 4.));\n  exponent += bytemeR[5] * int(pow(2., 3.));\n  exponent += bytemeR[6] * int(pow(2., 2.));\n  exponent += bytemeR[7] * int(pow(2., 1.));\n\n  exponent += bytemeG[0];\n\n\n  // fraction\n  float fraction = 0.;\n\n  fraction = float(bytemeG[1]) * pow(2., -1.);\n  fraction += float(bytemeG[2]) * pow(2., -2.);\n  fraction += float(bytemeG[3]) * pow(2., -3.);\n  fraction += float(bytemeG[4]) * pow(2., -4.);\n  fraction += float(bytemeG[5]) * pow(2., -5.);\n  fraction += float(bytemeG[6]) * pow(2., -6.);\n  fraction += float(bytemeG[7]) * pow(2., -7.);\n\n  fraction += float(bytemeB[0]) * pow(2., -8.);\n  fraction += float(bytemeB[1]) * pow(2., -9.);\n  fraction += float(bytemeB[2]) * pow(2., -10.);\n  fraction += float(bytemeB[3]) * pow(2., -11.);\n  fraction += float(bytemeB[4]) * pow(2., -12.);\n  fraction += float(bytemeB[5]) * pow(2., -13.);\n  fraction += float(bytemeB[6]) * pow(2., -14.);\n  fraction += float(bytemeB[7]) * pow(2., -15.);\n\n  fraction += float(bytemeA[0]) * pow(2., -16.);\n  fraction += float(bytemeA[1]) * pow(2., -17.);\n  fraction += float(bytemeA[2]) * pow(2., -18.);\n  fraction += float(bytemeA[3]) * pow(2., -19.);\n  fraction += float(bytemeA[4]) * pow(2., -20.);\n  fraction += float(bytemeA[5]) * pow(2., -21.);\n  fraction += float(bytemeA[6]) * pow(2., -22.);\n  fraction += float(bytemeA[7]) * pow(2., -23.);\n\n  value = float(issigned) * pow( 2., float(exponent - 127)) * (1. + fraction);\n}\n    "},e}(n(11).a);e.a=new a},function(t,e,n){"use strict";function i(t,e){if(!babelHelpers.instanceof(t,e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=babelHelpers.typeof(e)&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+babelHelpers.typeof(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(t){function e(){i(this,e);var n=r(this,t.call(this));return n.name="texture3d",n._dataCoordinates="dataCoordinates",n._dataValue="dataValue",n._offset="offset",n}return o(e,t),e.prototype.api=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._base,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this._dataCoordinates,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this._dataValue,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:this._offset;return this._base=t,this.compute(e,n,i)},e.prototype.compute=function(t,e,n){return this.computeDefinition(),this._base._functions[this._name]=this._definition,this._name+"("+t+", "+e+", "+n+");"},e.prototype.computeDefinition=function(){this._definition="\nvoid "+this._name+"(in ivec3 dataCoordinates, out vec4 dataValue, out int offset){\n    \n  int index = dataCoordinates.x\n            + dataCoordinates.y * uDataDimensions.x\n            + dataCoordinates.z * uDataDimensions.y * uDataDimensions.x;\n  int indexP = int(index/uPackedPerPixel);\n  offset = index - int(uPackedPerPixel)*indexP;\n\n  // Map data index to right sampler2D texture\n  int voxelsPerTexture = uTextureSize*uTextureSize;\n  int textureIndex = int(floor(float(indexP) / float(voxelsPerTexture)));\n  // modulo seems incorrect sometimes...\n  // int inTextureIndex = int(mod(float(index), float(textureSize*textureSize)));\n  int inTextureIndex = indexP - voxelsPerTexture*textureIndex;\n  float textureIndexF = float(textureIndex);\n\n  // Get row and column in the texture\n  int colIndex = int(mod(float(inTextureIndex), float(uTextureSize)));\n  int rowIndex = int(floor(float(inTextureIndex)/float(uTextureSize)));\n\n  // Map row and column to uv\n  vec2 uv = vec2(0,0);\n  uv.x = (0.5 + float(colIndex)) / float(uTextureSize);\n  uv.y = 1. - (0.5 + float(rowIndex)) / float(uTextureSize);\n\n  // get rid of if statements\n  dataValue = vec4(0.) +\n    step( abs( textureIndexF - 0.0 ), 0.0 ) * texture2D(uTextureContainer[0], uv) +\n    step( abs( textureIndexF - 1.0 ), 0.0 ) * texture2D(uTextureContainer[1], uv) +\n    step( abs( textureIndexF - 2.0 ), 0.0 ) * texture2D(uTextureContainer[2], uv) +\n    step( abs( textureIndexF - 3.0 ), 0.0 ) * texture2D(uTextureContainer[3], uv) +\n    step( abs( textureIndexF - 4.0 ), 0.0 ) * texture2D(uTextureContainer[4], uv) +\n    step( abs( textureIndexF - 5.0 ), 0.0 ) * texture2D(uTextureContainer[5], uv) +\n    step( abs( textureIndexF - 6.0 ), 0.0 ) * texture2D(uTextureContainer[6], uv);\n\n}\n    "},e}(n(11).a);e.a=new a},function(t,e,n){"use strict";function i(t,e){if(!babelHelpers.instanceof(t,e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=babelHelpers.typeof(e)&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+babelHelpers.typeof(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(11),s=n(47),l=function(t){function e(){i(this,e);var n=r(this,t.call(this));return n.name="interpolationTrilinear",n._currentVoxel="currentVoxel",n._dataValue="dataValue",n._gradient="gradient",n}return o(e,t),e.prototype.api=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._base,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this._currentVoxel,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this._dataValue,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:this._gradient;return this._base=t,this.compute(e,n,i)},e.prototype.compute=function(t,e,n){return this.computeDefinition(),this._base._functions[this._name]=this._definition,this._name+"("+t+", "+e+", "+n+");"},e.prototype.computeDefinition=function(){this._definition="\nvoid trilinearInterpolation(\n  in vec3 normalizedPosition,\n  out vec4 interpolatedValue,\n  in vec4 v000, in vec4 v100,\n  in vec4 v001, in vec4 v101,\n  in vec4 v010, in vec4 v110,\n  in vec4 v011, in vec4 v111) {\n  // https://en.wikipedia.org/wiki/Trilinear_interpolation\n  vec4 c00 = v000 * ( 1.0 - normalizedPosition.x ) + v100 * normalizedPosition.x;\n  vec4 c01 = v001 * ( 1.0 - normalizedPosition.x ) + v101 * normalizedPosition.x;\n  vec4 c10 = v010 * ( 1.0 - normalizedPosition.x ) + v110 * normalizedPosition.x;\n  vec4 c11 = v011 * ( 1.0 - normalizedPosition.x ) + v111 * normalizedPosition.x;\n\n  // c0 and c1\n  vec4 c0 = c00 * ( 1.0 - normalizedPosition.y) + c10 * normalizedPosition.y;\n  vec4 c1 = c01 * ( 1.0 - normalizedPosition.y) + c11 * normalizedPosition.y;\n\n  // c\n  vec4 c = c0 * ( 1.0 - normalizedPosition.z) + c1 * normalizedPosition.z;\n  interpolatedValue = c;\n}\n\nvoid "+this._name+"(in vec3 currentVoxel, out vec4 dataValue, out vec3 gradient){\n\n  vec3 lower_bound = floor(currentVoxel);\n  lower_bound = max(vec3(0.), lower_bound);\n  \n  vec3 higher_bound = lower_bound + vec3(1.);\n\n  vec3 normalizedPosition = (currentVoxel - lower_bound);\n  normalizedPosition =  max(vec3(0.), normalizedPosition);\n\n  vec4 interpolatedValue = vec4(0.);\n\n  //\n  // fetch values required for interpolation\n  //\n  vec4 v000 = vec4(0.0, 0.0, 0.0, 0.0);\n  vec3 c000 = vec3(lower_bound.x, lower_bound.y, lower_bound.z);\n  "+s.a.api(this._base,"c000","v000")+"\n\n  //\n  vec4 v100 = vec4(0.0, 0.0, 0.0, 0.0);\n  vec3 c100 = vec3(higher_bound.x, lower_bound.y, lower_bound.z);\n  "+s.a.api(this._base,"c100","v100")+"\n\n  //\n  vec4 v001 = vec4(0.0, 0.0, 0.0, 0.0);\n  vec3 c001 = vec3(lower_bound.x, lower_bound.y, higher_bound.z);\n  "+s.a.api(this._base,"c001","v001")+"\n\n  //\n  vec4 v101 = vec4(0.0, 0.0, 0.0, 0.0);\n  vec3 c101 = vec3(higher_bound.x, lower_bound.y, higher_bound.z);\n  "+s.a.api(this._base,"c101","v101")+"\n  \n  //\n  vec4 v010 = vec4(0.0, 0.0, 0.0, 0.0);\n  vec3 c010 = vec3(lower_bound.x, higher_bound.y, lower_bound.z);\n  "+s.a.api(this._base,"c010","v010")+"\n\n  vec4 v110 = vec4(0.0, 0.0, 0.0, 0.0);\n  vec3 c110 = vec3(higher_bound.x, higher_bound.y, lower_bound.z);\n  "+s.a.api(this._base,"c110","v110")+"\n\n  //\n  vec4 v011 = vec4(0.0, 0.0, 0.0, 0.0);\n  vec3 c011 = vec3(lower_bound.x, higher_bound.y, higher_bound.z);\n  "+s.a.api(this._base,"c011","v011")+"\n\n  vec4 v111 = vec4(0.0, 0.0, 0.0, 0.0);\n  vec3 c111 = vec3(higher_bound.x, higher_bound.y, higher_bound.z);\n  "+s.a.api(this._base,"c111","v111")+"\n\n  // compute interpolation at position\n  trilinearInterpolation(normalizedPosition, interpolatedValue ,v000, v100, v001, v101, v010,v110, v011,v111);\n  dataValue = interpolatedValue;\n\n  // compute gradient\n  float gradientStep = 0.005;\n\n  // x axis\n  vec3 g100 = vec3(1., 0., 0.);\n  vec3 ng100 = normalizedPosition + g100 * gradientStep;\n  ng100.x = min(1., ng100.x);\n\n  vec4 vg100 = vec4(0.);\n  trilinearInterpolation(ng100, vg100 ,v000, v100, v001, v101, v010,v110, v011,v111);\n\n  vec3 go100 = -g100;\n  vec3 ngo100 = normalizedPosition + go100 * gradientStep;\n  ngo100.x = max(0., ngo100.x);\n\n  vec4 vgo100 = vec4(0.);\n  trilinearInterpolation(ngo100, vgo100 ,v000, v100, v001, v101, v010,v110, v011,v111);\n\n  gradient.x = (g100.x * vg100.x + go100.x * vgo100.x);\n\n  // y axis\n  vec3 g010 = vec3(0., 1., 0.);\n  vec3 ng010 = normalizedPosition + g010 * gradientStep;\n  ng010.y = min(1., ng010.y);\n\n  vec4 vg010 = vec4(0.);\n  trilinearInterpolation(ng010, vg010 ,v000, v100, v001, v101, v010,v110, v011,v111);\n\n  vec3 go010 = -g010;\n  vec3 ngo010 = normalizedPosition + go010 * gradientStep;\n  ngo010.y = max(0., ngo010.y);\n\n  vec4 vgo010 = vec4(0.);\n  trilinearInterpolation(ngo010, vgo010 ,v000, v100, v001, v101, v010,v110, v011,v111);\n\n  gradient.y = (g010.y * vg010.x + go010.y * vgo010.x);\n\n  // z axis\n  vec3 g001 = vec3(0., 0., 1.);\n  vec3 ng001 = normalizedPosition + g001 * gradientStep;\n  ng001.z = min(1., ng001.z);\n\n  vec4 vg001 = vec4(0.);\n  trilinearInterpolation(ng001, vg001 ,v000, v100, v001, v101, v010,v110, v011,v111);\n\n  vec3 go001 = -g001;\n  vec3 ngo001 = normalizedPosition + go001 * gradientStep;\n  ngo001.z = max(0., ngo001.z);\n\n  vec4 vgo001 = vec4(0.);\n  trilinearInterpolation(ngo001, vgo001 ,v000, v100, v001, v101, v010,v110, v011,v111);\n\n  gradient.z = (g001.z * vg001.x + go001.z * vgo001.x);\n\n  // normalize gradient\n  // +0.0001  instead of if?\n  float gradientMagnitude = length(gradient);\n  if (gradientMagnitude > 0.0) {\n    gradient = -(1. / gradientMagnitude) * gradient;\n  }\n}\n    "},e}(a.a);e.a=new l},function(t,e,n){"use strict";function i(t,e){if(!babelHelpers.instanceof(t,e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=babelHelpers.typeof(e)&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+babelHelpers.typeof(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(33),s=n(34),l=n(42),c=n(0),h=function(){function t(t,e){for(var n=0,i;n<e.length;n++){i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=function(t){function e(n){i(this,e);var o=r(this,t.call(this));return o._stack=n,o._bBox=null,o._slice=null,o._border=null,o._dummy=null,o._orientation=0,o._index=0,o._uniforms=null,o._autoWindowLevel=!1,o._outOfBounds=!1,o._orientationMaxIndex=0,o._canvasWidth=0,o._canvasHeight=0,o._borderColor=null,o._create(),o}return o(e,t),e.prototype._create=function(){this._stack?(this._prepareStack(),this._prepareBBox(),this._prepareSlice(),this._prepareBorder()):window.console.log("no stack to be prepared...")},e.prototype._computeOrientationMaxIndex=function(){var t=this._stack.dimensionsIJK;switch(this._orientationMaxIndex=0,this._orientation){case 0:this._orientationMaxIndex=t.z-1;break;case 1:this._orientationMaxIndex=t.x-1;break;case 2:this._orientationMaxIndex=t.y-1;}},e.prototype._isIndexOutOfBounds=function(){this._computeOrientationMaxIndex(),this._index>=this._orientationMaxIndex||0>this._index?this._outOfBounds=!0:this._outOfBounds=!1},e.prototype._prepareStack=function(){this._stack.prepared||this._stack.prepare(),this._stack.packed||this._stack.pack()},e.prototype._prepareBBox=function(){this._bBox=new s.a(this._stack),this.add(this._bBox)},e.prototype._prepareBorder=function(){this._border=new a.a(this._slice),this.add(this._border)},e.prototype._prepareSlice=function(){var t=this._stack.halfDimensionsIJK;this._index=this._prepareSliceIndex(t);var e=this._prepareSlicePosition(t,this._index),n=this._prepareDirection(this._orientation);this._slice=new l.a(this._stack,this._index,e,n),this.add(this._slice)},e.prototype._prepareSliceIndex=function(t){var e=0;switch(this._orientation){case 0:e=_Mathfloor(t.z);break;case 1:e=_Mathfloor(t.x);break;case 2:e=_Mathfloor(t.y);}return e},e.prototype._prepareSlicePosition=function(t,e){var n=new c.f(0,0,0);switch(this._orientation){case 0:n=new c.f(_Mathfloor(t.x),_Mathfloor(t.y),e);break;case 1:n=new c.f(e,_Mathfloor(t.y),_Mathfloor(t.z));break;case 2:n=new c.f(_Mathfloor(t.x),e,_Mathfloor(t.z));}return n},e.prototype._prepareDirection=function(t){var e=new c.f(0,0,1);switch(t){case 0:e=new c.f(0,0,1);break;case 1:e=new c.f(1,0,0);break;case 2:e=new c.f(0,1,0);}return e},e.prototype.dispose=function(){this.remove(this._slice),this._slice.dispose(),this._slice=null,this._bBox.dispose(),this._bBox=null,this._border.dispose(),this._border=null},h(e,[{key:"stack",get:function get(){return this._stack},set:function set(t){this._stack=t}},{key:"bbox",get:function get(){return this._bBox}},{key:"slice",get:function get(){return this._slice}},{key:"border",get:function get(){return this._border}},{key:"index",get:function get(){return this._index},set:function set(t){this._index=t,this._slice.index=t;var e=this._stack.halfDimensionsIJK;this._slice.planePosition=this._prepareSlicePosition(e,this._index),this._border.helpersSlice=this._slice,this._isIndexOutOfBounds()}},{key:"orientation",set:function set(t){this._orientation=t,this._computeOrientationMaxIndex(),this._slice.planeDirection=this._prepareDirection(this._orientation),this._border.helpersSlice=this._slice},get:function get(){return this._orientation}},{key:"outOfBounds",set:function set(t){this._outOfBounds=t},get:function get(){return this._outOfBounds}},{key:"orientationMaxIndex",set:function set(t){this._orientationMaxIndex=t},get:function get(){return this._orientationMaxIndex}},{key:"canvasWidth",set:function set(t){this._canvasWidth=t,this._slice.canvasWidth=this._canvasWidth},get:function get(){return this._canvasWidth}},{key:"canvasHeight",set:function set(t){this._canvasHeight=t,this._slice.canvasHeight=this._canvasHeight},get:function get(){return this._canvasHeight}},{key:"borderColor",set:function set(t){this._borderColor=t,this._border.color=t,this._slice.borderColor=this._borderColor},get:function get(){return this._borderColor}}]),e}(THREE.Object3D);e.a=u},function(t,e,n){"use strict";function i(t,e){if(!babelHelpers.instanceof(t,e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=babelHelpers.typeof(e)&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+babelHelpers.typeof(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(49),s=n(50),l=n(51),c=n(48),h=n(0),u=function(){function t(t,e){for(var n=0,i;n<e.length;n++){i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),p=function(t){function e(n){i(this,e);var o=r(this,t.call(this));return o._stack=n,o._textures=[],o._shadersFragment=l.a,o._shadersVertex=s.a,o._uniforms=a.a.uniforms(),o._material=null,o._geometry=null,o._algorithm=0,o._alphaCorrection=.5,o._interpolation=1,o._shading=1,o._shininess=10,o._steps=256,o._offset=0,o._windowCenter=0,o._windowWidth=1,o._create(),o}return o(e,t),e.prototype._create=function(){this._prepareStack(),this._prepareTexture(),this._prepareMaterial(),this._prepareGeometry(),this._mesh=new THREE.Mesh(this._geometry,this._material),this.add(this._mesh)},e.prototype._prepareStack=function(){this._stack.prepared||this._stack.prepare(),this._stack.packed||this._stack.pack(),this._offset=_Mathmin(0,this._stack._minMax[0]),this._windowCenter=this._stack.windowCenter,this._windowWidth=.8*this._stack.windowWidth},e.prototype._prepareMaterial=function(){this._uniforms=a.a.uniforms(),this._uniforms.uWorldBBox.value=this._stack.worldBoundingBox(),this._uniforms.uTextureSize.value=this._stack.textureSize,this._uniforms.uTextureContainer.value=this._textures,this._uniforms.uWorldToData.value=this._stack.lps2IJK,this._uniforms.uNumberOfChannels.value=this._stack.numberOfChannels,this._uniforms.uPixelType.value=this._stack.pixelType,this._uniforms.uBitsAllocated.value=this._stack.bitsAllocated,this._uniforms.uPackedPerPixel.value=this._stack.packedPerPixel,this._uniforms.uWindowCenterWidth.value=[this._windowCenter-this._offset,this._windowWidth],this._uniforms.uRescaleSlopeIntercept.value=[this._stack.rescaleSlope,this._stack.rescaleIntercept],this._uniforms.uDataDimensions.value=[this._stack.dimensionsIJK.x,this._stack.dimensionsIJK.y,this._stack.dimensionsIJK.z],this._uniforms.uAlphaCorrection.value=this._alphaCorrection,this._uniforms.uInterpolation.value=this._interpolation,this._uniforms.uShading.value=this._shading,this._uniforms.uShininess.value=this._shininess,this._uniforms.uSteps.value=this._steps,this._uniforms.uAlgorithm.value=this._algorithm,this._createMaterial({side:THREE.BackSide,transparent:!0})},e.prototype._prepareGeometry=function(){var t=this._stack.worldBoundingBox(),e=this._stack.worldCenter();this._geometry=new THREE.BoxGeometry(t[1]-t[0],t[3]-t[2],t[5]-t[4]),this._geometry.applyMatrix(new h.c().makeTranslation(e.x,e.y,e.z))},e.prototype.dispose=function(){for(var t=0;t<this._textures.length;t++){this._textures[t].dispose(),this._textures[t]=null}this._textures=null,this._shadersFragment=null,this._shadersVertex=null,this._uniforms.uTextureContainer=null,this._uniforms.uTextureLUT=null,this._uniforms=null,this.remove(this._mesh),this._mesh.geometry.dispose(),this._mesh.geometry=null,this._mesh.material.dispose(),this._mesh.material=null,this._mesh=null,this._geometry.dispose(),this._geometry=null,this._material.vertexShader=null,this._material.fragmentShader=null,this._material.uniforms=null,this._material.dispose(),this._material=null,this._stack=null},u(e,[{key:"uniforms",get:function get(){return this._uniforms},set:function set(t){this._uniforms=t}},{key:"stack",get:function get(){return this._stack},set:function set(t){this._stack=t}},{key:"windowCenter",get:function get(){return this._windowCenter},set:function set(t){this._windowCenter=t,this._uniforms.uWindowCenterWidth.value[0]=this._windowCenter-this._offset}},{key:"windowWidth",get:function get(){return this._windowWidth},set:function set(t){this._windowWidth=_Mathmax(1,t),this._uniforms.uWindowCenterWidth.value[1]=this._windowWidth}},{key:"steps",get:function get(){return this._steps},set:function set(t){this._steps=t,this._uniforms.uSteps.value=this._steps}},{key:"alphaCorrection",get:function get(){return this._alphaCorrection},set:function set(t){this._alphaCorrection=t,this._uniforms.uAlphaCorrection.value=this._alphaCorrection}},{key:"interpolation",get:function get(){return this._interpolation},set:function set(t){this._interpolation=t,this._uniforms.uInterpolation.value=this._interpolation,this._updateMaterial()}},{key:"shading",get:function get(){return this._shading},set:function set(t){this._shading=t,this._uniforms.uShading.value=this._shading}},{key:"shininess",get:function get(){return this._shininess},set:function set(t){this._shininess=t,this._uniforms.uShininess.value=this._shininess}},{key:"algorithm",get:function get(){return this._algorithm},set:function set(t){this._algorithm=t,this._uniforms.uAlgorithm.value=this._algorithm}}]),e}(Object(c.a)(THREE.Object3D));e.a=p},function(t,e,n){"use strict";function i(t,e){if(!babelHelpers.instanceof(t,e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=babelHelpers.typeof(e)&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+babelHelpers.typeof(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(t){function e(){i(this,e);var n=r(this,t.call(this));return n.name="intersectBox",n._rayOrigin="rayOrigin",n._rayDirection="rayDirection",n._aabbMin="aabbMin",n._aabbMax="aabbMax",n._tNear="tNear",n._tFar="tFar",n._intersect="intersect",n}return o(e,t),e.prototype.api=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._base,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this._rayOrigin,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this._rayDirection,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:this._aabbMin,r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:this._aabbMax,o=5<arguments.length&&void 0!==arguments[5]?arguments[5]:this._tNear,a=6<arguments.length&&void 0!==arguments[6]?arguments[6]:this._tFar,s=7<arguments.length&&void 0!==arguments[7]?arguments[7]:this._intersect;return this._base=t,this.compute(e,n,i,r,o,a,s)},e.prototype.compute=function(t,e,n,i,r,o,a){return this.computeDefinition(),this._base._functions[this._name]=this._definition,this._name+"("+t+", "+e+", "+n+", "+i+", "+r+", "+o+", "+a+");"},e.prototype.computeDefinition=function(){this._definition="\nvoid "+this._name+"(vec3 rayOrigin, vec3 rayDirection, vec3 boxMin, vec3 boxMax, out float tNear, out float tFar, out bool intersect){\n  // compute intersection of ray with all six bbox planes\n  vec3 invRay = vec3(1.) / rayDirection;\n  vec3 tBot = invRay * (boxMin - rayOrigin);\n  vec3 tTop = invRay * (boxMax - rayOrigin);\n  // re-order intersections to find smallest and largest on each axis\n  vec3 tMin = min(tTop, tBot);\n  vec3 tMax = max(tTop, tBot);\n  // find the largest tMin and the smallest tMax\n  float largest_tMin = max(max(tMin.x, tMin.y), max(tMin.x, tMin.z));\n  float smallest_tMax = min(min(tMax.x, tMax.y), min(tMax.x, tMax.z));\n  tNear = largest_tMin;\n  tFar = smallest_tMax;\n  intersect = smallest_tMax > largest_tMin;\n}\n\n    "},e}(n(11).a);e.a=new a},function(t,e,n){"use strict";var i=n(112);n.d(e,"a",function(){return i.a})},function(t,e,n){"use strict";function i(t,e){if(!babelHelpers.instanceof(t,e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=babelHelpers.typeof(e)&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+babelHelpers.typeof(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(121),s=n(3),l=n(57),c=n(23),h=n(60),u=n(61),p=n(160),d=n(79),f=n(81),m=n(82),_=n(19),g=function(t){function e(){return i(this,e),r(this,t.apply(this,arguments))}return o(e,t),e.prototype.parse=function(t){var e=this;return this.emit("parse-start",{file:t.url,time:new Date}),this._progressBar&&this._progressBar.update(0,100,"parse",t.url),new Promise(function(n){window.setTimeout(function(){n(new Promise(function(n,i){var r=t;if(Array.isArray(r)||(r=[r]),r.forEach(function(t){e._preprocess(t)}),1===r.length)r=r[0];else{var o=r.filter(e._filterByExtension.bind(null,"MHD")),a=r.filter(e._filterByExtension.bind(null,"RAW"));2===r.length&&1===o.length&&1===a.length&&(r.url=o[0].url,r.extension=o[0].extension,r.mhdBuffer=o[0].buffer,r.rawBuffer=a[0].buffer)}var s=e._parser(r.extension);s||(e.emit("parse-error",{file:t.url,time:new Date,error:r.filename+"can not be parsed."}),i(r.filename+" can not be parsed."));var h=null;try{h=new s(r,0)}catch(n){window.console.log(n),e.emit("parse-error",{file:t.url,time:new Date,error:n}),i(n)}var u=new l.a;u.seriesInstanceUID=h.seriesInstanceUID(),u.transferSyntaxUID=h.transferSyntaxUID(),u.seriesDate=h.seriesDate(),u.seriesDescription=h.seriesDescription(),u.studyDate=h.studyDate(),u.studyDescription=h.studyDescription(),u.numberOfFrames=h.numberOfFrames(),u.numberOfFrames||(u.numberOfFrames=1),u.numberOfChannels=h.numberOfChannels(),u.modality=h.modality(),"SEG"===u.modality&&(u.segmentationType=h.segmentationType(),u.segmentationSegments=h.segmentationSegments()),u.patientID=h.patientID(),u.patientName=h.patientName(),u.patientAge=h.patientAge(),u.patientBirthdate=h.patientBirthdate(),u.patientSex=h.patientSex();var p=new c.a;p.numberOfChannels=h.numberOfChannels(),p.pixelRepresentation=h.pixelRepresentation(),p.pixelType=h.pixelType(),p.invert=h.invert(),p.spacingBetweenSlices=h.spacingBetweenSlices(),p.modality=u.modality,"SEG"===p.modality&&(p.segmentationType=u.segmentationType,p.segmentationSegments=u.segmentationSegments),u.stack.push(p),setTimeout(e.parseFrame(u,p,t.url,0,h,n,i),0)}))},10)})},e.prototype.parseFrame=function(t,e,n,i,r,o,a){var s=new h.a;s.sopInstanceUID=r.sopInstanceUID(i),s.url=n,s.index=i,s.invert=e.invert,s.frameTime=r.frameTime(i),s.rows=r.rows(i),s.columns=r.columns(i),s.numberOfChannels=e.numberOfChannels,s.pixelPaddingValue=r.pixelPaddingValue(i),s.pixelRepresentation=e.pixelRepresentation,s.pixelType=e.pixelType,s.pixelData=r.extractPixelData(i),s.pixelSpacing=r.pixelSpacing(i),s.spacingBetweenSlices=r.spacingBetweenSlices(i),s.sliceThickness=r.sliceThickness(i),s.imageOrientation=r.imageOrientation(i),s.rightHanded=r.rightHanded(),e.rightHanded=s.rightHanded,null===s.imageOrientation&&(s.imageOrientation=[1,0,0,0,1,0]),s.imagePosition=r.imagePosition(i),null===s.imagePosition&&(s.imagePosition=[0,0,i]),s.dimensionIndexValues=r.dimensionIndexValues(i),s.bitsAllocated=r.bitsAllocated(i),s.instanceNumber=r.instanceNumber(i),s.windowCenter=r.windowCenter(i),s.windowWidth=r.windowWidth(i),s.rescaleSlope=r.rescaleSlope(i),s.rescaleIntercept=r.rescaleIntercept(i),s.minMax=r.minMaxPixelData(s.pixelData),"SEG"===t.modality&&(s.referencedSegmentNumber=r.referencedSegmentNumber(i)),e.frame.push(s),this._parsed=i+1,this._totalParsed=t.numberOfFrames,this._progressBar&&this._progressBar.update(this._parsed,this._totalParsed,"parse",n),this.emit("parsing",{file:n,total:this._totalParsed,parsed:this._parsed,time:new Date}),this._parsed===this._totalParsed?(this.emit("parse-success",{file:n,total:this._totalParsed,parsed:this._parsed,time:new Date}),o(t)):setTimeout(this.parseFrame(t,e,n,this._parsed,r,o,a),0)},e.prototype._parser=function(t){var e=null;switch(t.toUpperCase()){case"NII":case"NII_":e=d.a;break;case"DCM":case"DICOM":case"IMA":case"":e=u.a;break;case"MHD":e=p.a;break;case"NRRD":e=f.a;break;case"MGH":case"MGZ":e=m.a;break;default:return window.console.log("unsupported extension: "+t),!1;}return e},e.prototype._preprocess=function(t){var e=s.a.parseUrl(t.url);if(t.filename=e.filename,t.extension=e.extension,t.pathname=e.pathname,t.query=e.query,"gz"===t.extension?(t.gzcompressed=!0,t.extension=t.filename.split(".gz").shift().split(".").pop()):"mgz"===t.extension?(t.gzcompressed=!0,t.extension="mgh"):"zraw"===t.extension?(t.gzcompressed=!0,t.extension="raw"):t.gzcompressed=!1,t.gzcompressed){var n=_.inflate(t.buffer);t.buffer=n.buffer}},e.prototype._filterByExtension=function(t,e){return e.extension.toUpperCase()===t.toUpperCase()},e}(a.a);e.a=g},function(t,e,n){"use strict";function i(t){if(!babelHelpers.instanceof(this,i))return new i(t);this.options=a.assign({level:p,method:f,chunkSize:16384,windowBits:15,memLevel:8,strategy:d,to:""},t||{});var e=this.options;e.raw&&0<e.windowBits?e.windowBits=-e.windowBits:e.gzip&&0<e.windowBits&&16>e.windowBits&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var n=o.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(n!==u)throw new Error(l[n]);if(e.header&&o.deflateSetHeader(this.strm,e.header),e.dictionary){var r;if(r="string"==typeof e.dictionary?s.string2buf(e.dictionary):"[object ArrayBuffer]"===h.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,(n=o.deflateSetDictionary(this.strm,r))!==u)throw new Error(l[n]);this._dict_set=!0}}function r(t,e){var n=new i(e);if(n.push(t,!0),n.err)throw n.msg;return n.result}var o=n(114),a=n(2),s=n(54),l=n(20),c=n(55),h=Object.prototype.toString,u=0,p=-1,d=0,f=8;i.prototype.push=function(t,e){var n,i,r=this.strm,l=this.options.chunkSize;if(this.ended)return!1;i=e===~~e?e:!0===e?4:0,"string"==typeof t?r.input=s.string2buf(t):"[object ArrayBuffer]"===h.call(t)?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;do{if(0===r.avail_out&&(r.output=new a.Buf8(l),r.next_out=0,r.avail_out=l),1!==(n=o.deflate(r,i))&&n!==u)return this.onEnd(n),this.ended=!0,!1;0!==r.avail_out&&(0!==r.avail_in||4!==i&&2!==i)||("string"===this.options.to?this.onData(s.buf2binstring(a.shrinkBuf(r.output,r.next_out))):this.onData(a.shrinkBuf(r.output,r.next_out)))}while((0<r.avail_in||0===r.avail_out)&&1!==n);return 4===i?(n=o.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===u):2!==i||(this.onEnd(u),r.avail_out=0,!0)},i.prototype.onData=function(t){this.chunks.push(t)},i.prototype.onEnd=function(t){t===u&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.Deflate=i,e.deflate=r,e.deflateRaw=function(t,e){return e=e||{},e.raw=!0,r(t,e)},e.gzip=function(t,e){return e=e||{},e.gzip=!0,r(t,e)}},function(t,e,n){"use strict";function i(t,e){return t.msg=P[e],e}function r(t){return(t<<1)-(4<t?9:0)}function o(t){for(var e=t.length;0<=--e;){t[e]=0}}function a(t){var e=t.state,n=e.pending;n>t.avail_out&&(n=t.avail_out),0!==n&&(E.arraySet(t.output,e.pending_buf,e.pending_out,n,t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,0===e.pending&&(e.pending_out=0))}function s(t,e){M._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,a(t.strm)}function l(t,e){t.pending_buf[t.pending++]=e}function c(t,e){t.pending_buf[t.pending++]=255&e>>>8,t.pending_buf[t.pending++]=255&e}function h(t,e,n,i){var r=t.avail_in;return r>i&&(r=i),0===r?0:(t.avail_in-=r,E.arraySet(e,t.input,t.next_in,r,n),1===t.state.wrap?t.adler=T(t.adler,e,r,n):2===t.state.wrap&&(t.adler=A(t.adler,e,r,n)),t.next_in+=r,t.total_in+=r,r)}function u(t,e){var n,i,r=t.max_chain_length,o=t.strstart,a=t.prev_length,s=t.nice_match,l=t.strstart>t.w_size-it?t.strstart-(t.w_size-it):0,c=t.window,h=t.w_mask,u=t.prev,p=t.strstart+nt,d=c[o+a-1],f=c[o+a];t.prev_length>=t.good_match&&(r>>=2),s>t.lookahead&&(s=t.lookahead);do{if(n=e,c[n+a]===f&&c[n+a-1]===d&&c[n]===c[o]&&c[++n]===c[o+1]){o+=2,n++;do{}while(c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&o<p);if(i=nt-(p-o),o=p-nt,i>a){if(t.match_start=e,a=i,i>=s)break;d=c[o+a-1],f=c[o+a]}}}while((e=u[e&h])>l&&0!=--r);return a<=t.lookahead?a:t.lookahead}function p(t){var e,n,i,r,o,a=t.w_size;do{if(r=t.window_size-t.lookahead-t.strstart,t.strstart>=a+(a-it)){E.arraySet(t.window,t.window,a,a,0),t.match_start-=a,t.strstart-=a,t.block_start-=a,e=n=t.hash_size;do{i=t.head[--e],t.head[e]=i>=a?i-a:0}while(--n);e=n=a;do{i=t.prev[--e],t.prev[e]=i>=a?i-a:0}while(--n);r+=a}if(0===t.strm.avail_in)break;if(n=h(t.strm,t.window,t.strstart+t.lookahead,r),t.lookahead+=n,t.lookahead+t.insert>=et)for(o=t.strstart-t.insert,t.ins_h=t.window[o],t.ins_h=(t.ins_h<<t.hash_shift^t.window[o+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[o+et-1])&t.hash_mask,t.prev[o&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=o,o++,t.insert--,!(t.lookahead+t.insert<et));){}}while(t.lookahead<it&&0!==t.strm.avail_in)}function d(t,e){for(var n,i;;){if(t.lookahead<it){if(p(t),t.lookahead<it&&e===C)return pt;if(0===t.lookahead)break}if(n=0,t.lookahead>=et&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+et-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==n&&t.strstart-n<=t.w_size-it&&(t.match_length=u(t,n)),t.match_length>=et){if(i=M._tr_tally(t,t.strstart-t.match_start,t.match_length-et),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=et){t.match_length--;do{t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+et-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;}else i=M._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(i&&(s(t,!1),0===t.strm.avail_out))return pt}return t.insert=t.strstart<et-1?t.strstart:et-1,e===R?(s(t,!0),0===t.strm.avail_out?ft:mt):t.last_lit&&(s(t,!1),0===t.strm.avail_out)?pt:dt}function f(t,e){for(var n,i,r;;){if(t.lookahead<it){if(p(t),t.lookahead<it&&e===C)return pt;if(0===t.lookahead)break}if(n=0,t.lookahead>=et&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+et-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=et-1,0!==n&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-it&&(t.match_length=u(t,n),5>=t.match_length&&(t.strategy===z||t.match_length===et&&4096<t.strstart-t.match_start)&&(t.match_length=et-1)),t.prev_length>=et&&t.match_length<=t.prev_length){r=t.strstart+t.lookahead-et,i=M._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-et),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=r&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+et-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=et-1,t.strstart++,i&&(s(t,!1),0===t.strm.avail_out))return pt}else if(t.match_available){if((i=M._tr_tally(t,0,t.window[t.strstart-1]))&&s(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return pt}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(i=M._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<et-1?t.strstart:et-1,e===R?(s(t,!0),0===t.strm.avail_out?ft:mt):t.last_lit&&(s(t,!1),0===t.strm.avail_out)?pt:dt}function m(t,e){for(var n,i,r,o,a=t.window;;){if(t.lookahead<=nt){if(p(t),t.lookahead<=nt&&e===C)return pt;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=et&&0<t.strstart&&(r=t.strstart-1,(i=a[r])===a[++r]&&i===a[++r]&&i===a[++r])){o=t.strstart+nt;do{}while(i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&r<o);t.match_length=nt-(o-r),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=et?(n=M._tr_tally(t,1,t.match_length-et),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=M._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(s(t,!1),0===t.strm.avail_out))return pt}return t.insert=0,e===R?(s(t,!0),0===t.strm.avail_out?ft:mt):t.last_lit&&(s(t,!1),0===t.strm.avail_out)?pt:dt}function _(t,e){for(var n;;){if(0===t.lookahead&&(p(t),0===t.lookahead)){if(e===C)return pt;break}if(t.match_length=0,n=M._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(s(t,!1),0===t.strm.avail_out))return pt}return t.insert=0,e===R?(s(t,!0),0===t.strm.avail_out?ft:mt):t.last_lit&&(s(t,!1),0===t.strm.avail_out)?pt:dt}function g(t,e,n,i,r){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=i,this.func=r}function y(t){t.window_size=2*t.w_size,o(t.head),t.max_lazy_match=S[t.level].max_lazy,t.good_match=S[t.level].good_length,t.nice_match=S[t.level].nice_length,t.max_chain_length=S[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=et-1,t.match_available=0,t.ins_h=0}function v(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=q,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new E.Buf16(2*$),this.dyn_dtree=new E.Buf16(2*(2*K+1)),this.bl_tree=new E.Buf16(2*(2*Q+1)),o(this.dyn_ltree),o(this.dyn_dtree),o(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new E.Buf16(tt+1),this.heap=new E.Buf16(2*J+1),o(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new E.Buf16(2*J+1),o(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function b(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=W,e=t.state,e.pending=0,e.pending_out=0,0>e.wrap&&(e.wrap=-e.wrap),e.status=e.wrap?ot:ht,t.adler=2===e.wrap?0:1,e.last_flush=C,M._tr_init(e),k):i(t,F)}function w(t){var e=b(t);return e===k&&y(t.state),e}function x(t,e,n,r,o,a){if(!t)return F;var s=1;if(e===B&&(e=6),0>r?(s=0,r=-r):15<r&&(s=2,r-=16),1>o||o>X||n!==q||8>r||15<r||0>e||9<e||0>a||a>j)return i(t,F);8===r&&(r=9);var l=new v;return t.state=l,l.strm=t,l.wrap=s,l.gzhead=null,l.w_bits=r,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=o+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+et-1)/et),l.window=new E.Buf8(2*l.w_size),l.head=new E.Buf16(l.hash_size),l.prev=new E.Buf16(l.w_size),l.lit_bufsize=1<<o+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new E.Buf8(l.pending_buf_size),l.d_buf=l.lit_bufsize>>1,l.l_buf=3*l.lit_bufsize,l.level=e,l.strategy=a,l.method=n,w(t)}var S,E=n(2),M=n(115),T=n(52),A=n(53),P=n(20),C=0,R=4,O=5,k=0,D=1,F=-2,U=-5,B=-1,z=1,G=2,j=4,W=2,q=8,X=9,J=286,K=30,Q=19,$=2*J+1,tt=15,et=3,nt=258,it=nt+et+1,ot=42,at=69,st=73,lt=91,ct=103,ht=113,ut=666,pt=1,dt=2,ft=3,mt=4;S=[new g(0,0,0,0,function(t,e){var n=65535;for(n>t.pending_buf_size-5&&(n=t.pending_buf_size-5);;){if(1>=t.lookahead){if(p(t),0===t.lookahead&&e===C)return pt;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var i=t.block_start+n;if((0===t.strstart||t.strstart>=i)&&(t.lookahead=t.strstart-i,t.strstart=i,s(t,!1),0===t.strm.avail_out))return pt;if(t.strstart-t.block_start>=t.w_size-it&&(s(t,!1),0===t.strm.avail_out))return pt}return t.insert=0,e===R?(s(t,!0),0===t.strm.avail_out?ft:mt):(t.strstart>t.block_start&&(s(t,!1),t.strm.avail_out),pt)}),new g(4,4,8,4,d),new g(4,5,16,8,d),new g(4,6,32,32,d),new g(4,4,16,16,f),new g(8,16,32,32,f),new g(8,16,128,128,f),new g(8,32,128,256,f),new g(32,128,258,1024,f),new g(32,258,258,4096,f)],e.deflateInit=function(t,e){return x(t,e,q,15,8,0)},e.deflateInit2=x,e.deflateReset=w,e.deflateResetKeep=b,e.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?F:(t.state.gzhead=e,k):F},e.deflate=function(t,e){var n,s,h,u;if(!t||!t.state||e>O||0>e)return t?i(t,F):F;if(s=t.state,!t.output||!t.input&&0!==t.avail_in||s.status===ut&&e!==R)return i(t,0===t.avail_out?U:F);if(s.strm=t,n=s.last_flush,s.last_flush=e,s.status===ot)if(2===s.wrap)t.adler=0,l(s,31),l(s,139),l(s,8),s.gzhead?(l(s,(s.gzhead.text?1:0)+(s.gzhead.hcrc?2:0)+(s.gzhead.extra?4:0)+(s.gzhead.name?8:0)+(s.gzhead.comment?16:0)),l(s,255&s.gzhead.time),l(s,255&s.gzhead.time>>8),l(s,255&s.gzhead.time>>16),l(s,255&s.gzhead.time>>24),l(s,9===s.level?2:s.strategy>=G||2>s.level?4:0),l(s,255&s.gzhead.os),s.gzhead.extra&&s.gzhead.extra.length&&(l(s,255&s.gzhead.extra.length),l(s,255&s.gzhead.extra.length>>8)),s.gzhead.hcrc&&(t.adler=A(t.adler,s.pending_buf,s.pending,0)),s.gzindex=0,s.status=at):(l(s,0),l(s,0),l(s,0),l(s,0),l(s,0),l(s,9===s.level?2:s.strategy>=G||2>s.level?4:0),l(s,3),s.status=ht);else{var p=q+(s.w_bits-8<<4)<<8;p|=(s.strategy>=G||2>s.level?0:6>s.level?1:6===s.level?2:3)<<6,0!==s.strstart&&(p|=32),p+=31-p%31,s.status=ht,c(s,p),0!==s.strstart&&(c(s,t.adler>>>16),c(s,65535&t.adler)),t.adler=1}if(s.status===at)if(s.gzhead.extra){for(h=s.pending;s.gzindex<(65535&s.gzhead.extra.length)&&(s.pending!==s.pending_buf_size||(s.gzhead.hcrc&&s.pending>h&&(t.adler=A(t.adler,s.pending_buf,s.pending-h,h)),a(t),h=s.pending,s.pending!==s.pending_buf_size));){l(s,255&s.gzhead.extra[s.gzindex]),s.gzindex++}s.gzhead.hcrc&&s.pending>h&&(t.adler=A(t.adler,s.pending_buf,s.pending-h,h)),s.gzindex===s.gzhead.extra.length&&(s.gzindex=0,s.status=st)}else s.status=st;if(s.status===st)if(s.gzhead.name){h=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>h&&(t.adler=A(t.adler,s.pending_buf,s.pending-h,h)),a(t),h=s.pending,s.pending===s.pending_buf_size)){u=1;break}u=s.gzindex<s.gzhead.name.length?255&s.gzhead.name.charCodeAt(s.gzindex++):0,l(s,u)}while(0!==u);s.gzhead.hcrc&&s.pending>h&&(t.adler=A(t.adler,s.pending_buf,s.pending-h,h)),0===u&&(s.gzindex=0,s.status=lt)}else s.status=lt;if(s.status===lt)if(s.gzhead.comment){h=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>h&&(t.adler=A(t.adler,s.pending_buf,s.pending-h,h)),a(t),h=s.pending,s.pending===s.pending_buf_size)){u=1;break}u=s.gzindex<s.gzhead.comment.length?255&s.gzhead.comment.charCodeAt(s.gzindex++):0,l(s,u)}while(0!==u);s.gzhead.hcrc&&s.pending>h&&(t.adler=A(t.adler,s.pending_buf,s.pending-h,h)),0===u&&(s.status=ct)}else s.status=ct;if(s.status===ct&&(s.gzhead.hcrc?(s.pending+2>s.pending_buf_size&&a(t),s.pending+2<=s.pending_buf_size&&(l(s,255&t.adler),l(s,255&t.adler>>8),t.adler=0,s.status=ht)):s.status=ht),0!==s.pending){if(a(t),0===t.avail_out)return s.last_flush=-1,k}else if(0===t.avail_in&&r(e)<=r(n)&&e!==R)return i(t,U);if(s.status===ut&&0!==t.avail_in)return i(t,U);if(0!==t.avail_in||0!==s.lookahead||e!==C&&s.status!==ut){var d=s.strategy===G?_(s,e):s.strategy===3?m(s,e):S[s.level].func(s,e);if(d!==ft&&d!==mt||(s.status=ut),d===pt||d===ft)return 0===t.avail_out&&(s.last_flush=-1),k;if(d===dt&&(e===1?M._tr_align(s):e!==O&&(M._tr_stored_block(s,0,0,!1),e===3&&(o(s.head),0===s.lookahead&&(s.strstart=0,s.block_start=0,s.insert=0))),a(t),0===t.avail_out))return s.last_flush=-1,k}return e!==R?k:0>=s.wrap?D:(2===s.wrap?(l(s,255&t.adler),l(s,255&t.adler>>8),l(s,255&t.adler>>16),l(s,255&t.adler>>24),l(s,255&t.total_in),l(s,255&t.total_in>>8),l(s,255&t.total_in>>16),l(s,255&t.total_in>>24)):(c(s,t.adler>>>16),c(s,65535&t.adler)),a(t),0<s.wrap&&(s.wrap=-s.wrap),0!==s.pending?k:D)},e.deflateEnd=function(t){var e;return t&&t.state?(e=t.state.status)!==ot&&e!==at&&e!==st&&e!==lt&&e!==ct&&e!==ht&&e!==ut?i(t,F):(t.state=null,e===ht?i(t,-3):k):F},e.deflateSetDictionary=function(t,e){var n,i,r,a,s,l,c,h,u=e.length;if(!t||!t.state)return F;if(n=t.state,2===(a=n.wrap)||1===a&&n.status!==ot||n.lookahead)return F;for(1===a&&(t.adler=T(t.adler,e,u,0)),n.wrap=0,u>=n.w_size&&(0===a&&(o(n.head),n.strstart=0,n.block_start=0,n.insert=0),h=new E.Buf8(n.w_size),E.arraySet(h,e,u-n.w_size,n.w_size,0),e=h,u=n.w_size),s=t.avail_in,l=t.next_in,c=t.input,t.avail_in=u,t.next_in=0,t.input=e,p(n);n.lookahead>=et;){i=n.strstart,r=n.lookahead-(et-1);do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[i+et-1])&n.hash_mask,n.prev[i&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=i,i++}while(--r);n.strstart=i,n.lookahead=et-1,p(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=et-1,n.match_available=0,t.next_in=l,t.input=c,t.avail_in=s,n.wrap=a,k},e.deflateInfo="pako deflate (from Nodeca project)"},function(t,e,n){"use strict";function i(t){for(var e=t.length;0<=--e;){t[e]=0}}function r(t,e,n,i,r){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=i,this.max_length=r,this.has_stree=t&&t.length}function o(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function a(t){return 256>t?et[t]:et[256+(t>>>7)]}function s(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=255&e>>>8}function l(t,e,n){t.bi_valid>j-n?(t.bi_buf|=65535&e<<t.bi_valid,s(t,t.bi_buf),t.bi_buf=e>>j-t.bi_valid,t.bi_valid+=n-j):(t.bi_buf|=65535&e<<t.bi_valid,t.bi_valid+=n)}function c(t,e,n){l(t,n[2*e],n[2*e+1])}function h(t,e){var n=0;do{n|=1&t,t>>>=1,n<<=1}while(0<--e);return n>>>1}function u(t){16===t.bi_valid?(s(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):8<=t.bi_valid&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}function p(t,e){var n,i,r,o,a,s,l=e.dyn_tree,c=e.max_code,h=e.stat_desc.static_tree,u=e.stat_desc.has_stree,p=e.stat_desc.extra_bits,d=e.stat_desc.extra_base,f=e.stat_desc.max_length,m=0;for(o=0;o<=H;o++){t.bl_count[o]=0}for(l[2*t.heap[t.heap_max]+1]=0,n=t.heap_max+1;n<G;n++){(o=l[2*l[2*(i=t.heap[n])+1]+1]+1)>f&&(o=f,m++),l[2*i+1]=o,i>c||(t.bl_count[o]++,a=0,i>=d&&(a=p[i-d]),s=l[2*i],t.opt_len+=s*(o+a),u&&(t.static_len+=s*(h[2*i+1]+a)))}if(0!==m){do{for(o=f-1;0===t.bl_count[o];){o--}t.bl_count[o]--,t.bl_count[o+1]+=2,t.bl_count[f]--,m-=2}while(0<m);for(o=f;0!==o;o--){for(i=t.bl_count[o];0!==i;){(r=t.heap[--n])>c||(l[2*r+1]!==o&&(t.opt_len+=(o-l[2*r+1])*l[2*r],l[2*r+1]=o),i--)}}}}function d(t,e,n){var i,r,o=Array(H+1),a=0;for(i=1;i<=H;i++){o[i]=a=a+n[i-1]<<1}for(r=0;r<=e;r++){var s=t[2*r+1];0!==s&&(t[2*r]=h(o[s]++,s))}}function f(){var t,e,n,i,o,a=Array(H+1);for(n=0,i=0;i<F-1;i++){for(it[i]=n,t=0;t<1<<Z[i];t++){nt[n++]=i}}for(nt[n-1]=i,o=0,i=0;16>i;i++){for(rt[i]=o,t=0;t<1<<J[i];t++){et[o++]=i}}for(o>>=7;i<B;i++){for(rt[i]=o<<7,t=0;t<1<<J[i]-7;t++){et[256+o++]=i}}for(e=0;e<=H;e++){a[e]=0}for(t=0;143>=t;){$[2*t+1]=8,t++,a[8]++}for(;255>=t;){$[2*t+1]=9,t++,a[9]++}for(;279>=t;){$[2*t+1]=7,t++,a[7]++}for(;287>=t;){$[2*t+1]=8,t++,a[8]++}for(d($,U+1,a),t=0;t<B;t++){tt[2*t+1]=5,tt[2*t]=h(t,5)}ot=new r($,Z,N+1,U,H),at=new r(tt,J,0,B,H),st=new r([],K,0,z,V)}function m(t){var e;for(e=0;e<U;e++){t.dyn_ltree[2*e]=0}for(e=0;e<B;e++){t.dyn_dtree[2*e]=0}for(e=0;e<z;e++){t.bl_tree[2*e]=0}t.dyn_ltree[2*W]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function _(t){8<t.bi_valid?s(t,t.bi_buf):0<t.bi_valid&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function g(t,e,n,i){_(t),i&&(s(t,n),s(t,~n)),P.arraySet(t.pending_buf,t.window,e,n,t.pending),t.pending+=n}function y(t,e,n,i){var r=2*e,o=2*n;return t[r]<t[o]||t[r]===t[o]&&i[e]<=i[n]}function v(t,e,n){for(var i=t.heap[n],r=n<<1;r<=t.heap_len&&(r<t.heap_len&&y(e,t.heap[r+1],t.heap[r],t.depth)&&r++,!y(e,i,t.heap[r],t.depth));){t.heap[n]=t.heap[r],n=r,r<<=1}t.heap[n]=i}function b(t,e,n){var i,r,o,s,h=0;if(0!==t.last_lit)do{i=t.pending_buf[t.d_buf+2*h]<<8|t.pending_buf[t.d_buf+2*h+1],r=t.pending_buf[t.l_buf+h],h++,0===i?c(t,r,e):(c(t,(o=nt[r])+N+1,e),0!==(s=Z[o])&&l(t,r-=it[o],s),c(t,o=a(--i),n),0!==(s=J[o])&&l(t,i-=rt[o],s))}while(h<t.last_lit);c(t,W,e)}function w(t,e){var n,i,r,o=e.dyn_tree,a=e.stat_desc.static_tree,s=e.stat_desc.has_stree,l=e.stat_desc.elems,c=-1;for(t.heap_len=0,t.heap_max=G,n=0;n<l;n++){0!==o[2*n]?(t.heap[++t.heap_len]=c=n,t.depth[n]=0):o[2*n+1]=0}for(;2>t.heap_len;){o[2*(r=t.heap[++t.heap_len]=2>c?++c:0)]=1,t.depth[r]=0,t.opt_len--,s&&(t.static_len-=a[2*r+1])}for(e.max_code=c,n=t.heap_len>>1;1<=n;n--){v(t,o,n)}r=l;do{n=t.heap[1],t.heap[1]=t.heap[t.heap_len--],v(t,o,1),i=t.heap[1],t.heap[--t.heap_max]=n,t.heap[--t.heap_max]=i,o[2*r]=o[2*n]+o[2*i],t.depth[r]=(t.depth[n]>=t.depth[i]?t.depth[n]:t.depth[i])+1,o[2*n+1]=o[2*i+1]=r,t.heap[1]=r++,v(t,o,1)}while(2<=t.heap_len);t.heap[--t.heap_max]=t.heap[1],p(t,e),d(o,c,t.bl_count)}function x(t,e,n){var i,r,o=-1,a=e[1],s=0,l=7,c=4;for(0===a&&(l=138,c=3),e[2*(n+1)+1]=65535,i=0;i<=n;i++){r=a,a=e[2*(i+1)+1],++s<l&&r===a||(s<c?t.bl_tree[2*r]+=s:0!==r?(r!==o&&t.bl_tree[2*r]++,t.bl_tree[2*q]++):10>=s?t.bl_tree[2*X]++:t.bl_tree[2*Y]++,s=0,o=r,0===a?(l=138,c=3):r===a?(l=6,c=3):(l=7,c=4))}}function S(t,e,n){var i,r,o=-1,a=e[1],s=0,h=7,u=4;for(0===a&&(h=138,u=3),i=0;i<=n;i++){if(r=a,a=e[2*(i+1)+1],!(++s<h&&r===a)){if(s<u)do{c(t,r,t.bl_tree)}while(0!=--s);else 0!==r?(r!==o&&(c(t,r,t.bl_tree),s--),c(t,q,t.bl_tree),l(t,s-3,2)):10>=s?(c(t,X,t.bl_tree),l(t,s-3,3)):(c(t,Y,t.bl_tree),l(t,s-11,7));s=0,o=r,0===a?(h=138,u=3):r===a?(h=6,u=3):(h=7,u=4)}}}function E(t){var e;for(x(t,t.dyn_ltree,t.l_desc.max_code),x(t,t.dyn_dtree,t.d_desc.max_code),w(t,t.bl_desc),e=z-1;3<=e&&0===t.bl_tree[2*Q[e]+1];e--){}return t.opt_len+=3*(e+1)+5+5+4,e}function M(t,e,n,i){var r;for(l(t,e-257,5),l(t,n-1,5),l(t,i-4,4),r=0;r<i;r++){l(t,t.bl_tree[2*Q[r]+1],3)}S(t,t.dyn_ltree,e-1),S(t,t.dyn_dtree,n-1)}function T(t){var e,n=4093624447;for(e=0;31>=e;e++,n>>>=1){if(1&n&&0!==t.dyn_ltree[2*e])return I}if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return L;for(e=32;e<N;e++){if(0!==t.dyn_ltree[2*e])return L}return I}function A(t,e,n,i){l(t,(O<<1)+(i?1:0),3),g(t,e,n,!0)}var P=n(2),I=0,L=1,O=0,k=1,F=29,N=256,U=N+1+F,B=30,z=19,G=2*U+1,H=15,j=16,V=7,W=256,q=16,X=17,Y=18,Z=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],J=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],K=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Q=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],$=Array(2*(U+2));i($);var tt=Array(2*B);i(tt);var et=Array(512);i(et);var nt=Array(256);i(nt);var it=Array(F);i(it);var rt=Array(B);i(rt);var ot,at,st,lt=!1;e._tr_init=function(t){lt||(f(),lt=!0),t.l_desc=new o(t.dyn_ltree,ot),t.d_desc=new o(t.dyn_dtree,at),t.bl_desc=new o(t.bl_tree,st),t.bi_buf=0,t.bi_valid=0,m(t)},e._tr_stored_block=A,e._tr_flush_block=function(t,e,n,i){var r,o,a=0;0<t.level?(t.strm.data_type===2&&(t.strm.data_type=T(t)),w(t,t.l_desc),w(t,t.d_desc),a=E(t),r=t.opt_len+3+7>>>3,(o=t.static_len+3+7>>>3)<=r&&(r=o)):r=o=n+5,n+4<=r&&-1!==e?A(t,e,n,i):t.strategy===4||o===r?(l(t,(k<<1)+(i?1:0),3),b(t,$,tt)):(l(t,(2<<1)+(i?1:0),3),M(t,t.l_desc.max_code+1,t.d_desc.max_code+1,a+1),b(t,t.dyn_ltree,t.dyn_dtree)),m(t),i&&_(t)},e._tr_tally=function(t,e,n){return t.pending_buf[t.d_buf+2*t.last_lit]=255&e>>>8,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&n,t.last_lit++,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(nt[n]+N+1)]++,t.dyn_dtree[2*a(e)]++),t.last_lit===t.lit_bufsize-1},e._tr_align=function(t){l(t,k<<1,3),c(t,W,$),u(t)}},function(t,e,n){"use strict";function i(t){if(!babelHelpers.instanceof(this,i))return new i(t);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&0<=e.windowBits&&16>e.windowBits&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(0<=e.windowBits&&16>e.windowBits)||t&&t.windowBits||(e.windowBits+=32),15<e.windowBits&&48>e.windowBits&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var n=o.inflateInit2(this.strm,e.windowBits);if(n!==l.Z_OK)throw new Error(c[n]);this.header=new u,o.inflateGetHeader(this.strm,this.header)}function r(t,e){var n=new i(e);if(n.push(t,!0),n.err)throw n.msg;return n.result}var o=n(117),a=n(2),s=n(54),l=n(56),c=n(20),h=n(55),u=n(120),p=Object.prototype.toString;i.prototype.push=function(t,e){var n,i,r,c,h,u,d=this.strm,f=this.options.chunkSize,m=this.options.dictionary,_=!1;if(this.ended)return!1;i=e===~~e?e:!0===e?l.Z_FINISH:l.Z_NO_FLUSH,"string"==typeof t?d.input=s.binstring2buf(t):"[object ArrayBuffer]"===p.call(t)?d.input=new Uint8Array(t):d.input=t,d.next_in=0,d.avail_in=d.input.length;do{if(0===d.avail_out&&(d.output=new a.Buf8(f),d.next_out=0,d.avail_out=f),(n=o.inflate(d,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&m&&(u="string"==typeof m?s.string2buf(m):"[object ArrayBuffer]"===p.call(m)?new Uint8Array(m):m,n=o.inflateSetDictionary(this.strm,u)),n===l.Z_BUF_ERROR&&!0===_&&(n=l.Z_OK,_=!1),n!==l.Z_STREAM_END&&n!==l.Z_OK)return this.onEnd(n),this.ended=!0,!1;d.next_out&&(0!==d.avail_out&&n!==l.Z_STREAM_END&&(0!==d.avail_in||i!==l.Z_FINISH&&i!==l.Z_SYNC_FLUSH)||("string"===this.options.to?(r=s.utf8border(d.output,d.next_out),c=d.next_out-r,h=s.buf2string(d.output,r),d.next_out=c,d.avail_out=f-c,c&&a.arraySet(d.output,d.output,r,c,0),this.onData(h)):this.onData(a.shrinkBuf(d.output,d.next_out)))),0===d.avail_in&&0===d.avail_out&&(_=!0)}while((0<d.avail_in||0===d.avail_out)&&n!==l.Z_STREAM_END);return n===l.Z_STREAM_END&&(i=l.Z_FINISH),i===l.Z_FINISH?(n=o.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===l.Z_OK):i!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),d.avail_out=0,!0)},i.prototype.onData=function(t){this.chunks.push(t)},i.prototype.onEnd=function(t){t===l.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.Inflate=i,e.inflate=r,e.inflateRaw=function(t,e){return e=e||{},e.raw=!0,r(t,e)},e.ungzip=r},function(t,e,n){"use strict";function i(t){return(255&t>>>24)+(65280&t>>>8)+((65280&t)<<8)+((255&t)<<24)}function r(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new d.Buf16(320),this.work=new d.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function o(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=R,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new d.Buf32(ht),e.distcode=e.distdyn=new d.Buf32(ut),e.sane=1,e.back=-1,E):A}function a(t){var e;return t&&t.state?(e=t.state,e.wsize=0,e.whave=0,e.wnext=0,o(t)):A}function s(t,e){var n,i;return t&&t.state?(i=t.state,0>e?(n=0,e=-e):(n=1+(e>>4),48>e&&(e&=15)),e&&(8>e||15<e)?A:(null!==i.window&&i.wbits!==e&&(i.window=null),i.wrap=n,i.wbits=e,a(t))):A}function l(t,e){var n,i;return t?(i=new r,t.state=i,i.window=null,(n=s(t,e))!==E&&(t.state=null),n):A}function c(t){if(dt){var e;for(u=new d.Buf32(512),p=new d.Buf32(32),e=0;144>e;){t.lens[e++]=8}for(;256>e;){t.lens[e++]=9}for(;280>e;){t.lens[e++]=7}for(;288>e;){t.lens[e++]=8}for(g(v,t.lens,0,288,u,0,t.work,{bits:9}),e=0;32>e;){t.lens[e++]=5}g(b,t.lens,0,32,p,0,t.work,{bits:5}),dt=!1}t.lencode=u,t.lenbits=9,t.distcode=p,t.distbits=5}function h(t,e,n,i){var r,o=t.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new d.Buf8(o.wsize)),i>=o.wsize?(d.arraySet(o.window,e,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):((r=o.wsize-o.wnext)>i&&(r=i),d.arraySet(o.window,e,n-i,r,o.wnext),(i-=r)?(d.arraySet(o.window,e,n-i,i,0),o.wnext=i,o.whave=o.wsize):(o.wnext+=r,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=r))),0}var u,p,d=n(2),f=n(52),m=n(53),_=n(118),g=n(119),v=1,b=2,w=4,S=6,E=0,A=-2,P=-3,C=-4,L=8,R=1,O=2,k=3,D=4,F=5,N=6,U=7,B=8,z=9,G=10,H=11,j=12,V=13,W=14,q=15,X=16,Y=17,Z=18,J=19,K=20,Q=21,$=22,tt=23,et=24,nt=25,it=26,rt=27,ot=28,at=29,st=30,lt=31,ht=852,ut=592,dt=!0;e.inflateReset=a,e.inflateReset2=s,e.inflateResetKeep=o,e.inflateInit=function(t){return l(t,15)},e.inflateInit2=l,e.inflate=function(t,e){var n,r,o,a,s,l,u,p,ht,ut,pt,dt,ft,mt,_t,gt,yt,vt,bt,wt,xt,St,Et,Mt,Tt=0,At=new d.Buf8(4),Pt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return A;(n=t.state).mode===j&&(n.mode=V),s=t.next_out,o=t.output,u=t.avail_out,a=t.next_in,r=t.input,l=t.avail_in,p=n.hold,ht=n.bits,ut=l,pt=u,St=E;t:for(;;){switch(n.mode){case R:if(0===n.wrap){n.mode=V;break}for(;16>ht;){if(0===l)break t;l--,p+=r[a++]<<ht,ht+=8}if(2&n.wrap&&35615===p){n.check=0,At[0]=255&p,At[1]=255&p>>>8,n.check=m(n.check,At,2,0),p=0,ht=0,n.mode=O;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&p)<<8)+(p>>8))%31){t.msg="incorrect header check",n.mode=st;break}if((15&p)!==L){t.msg="unknown compression method",n.mode=st;break}if(p>>>=4,ht-=4,xt=8+(15&p),0===n.wbits)n.wbits=xt;else if(xt>n.wbits){t.msg="invalid window size",n.mode=st;break}n.dmax=1<<xt,t.adler=n.check=1,n.mode=512&p?G:j,p=0,ht=0;break;case O:for(;16>ht;){if(0===l)break t;l--,p+=r[a++]<<ht,ht+=8}if(n.flags=p,(255&n.flags)!==L){t.msg="unknown compression method",n.mode=st;break}if(57344&n.flags){t.msg="unknown header flags set",n.mode=st;break}n.head&&(n.head.text=1&p>>8),512&n.flags&&(At[0]=255&p,At[1]=255&p>>>8,n.check=m(n.check,At,2,0)),p=0,ht=0,n.mode=k;case k:for(;32>ht;){if(0===l)break t;l--,p+=r[a++]<<ht,ht+=8}n.head&&(n.head.time=p),512&n.flags&&(At[0]=255&p,At[1]=255&p>>>8,At[2]=255&p>>>16,At[3]=255&p>>>24,n.check=m(n.check,At,4,0)),p=0,ht=0,n.mode=D;case D:for(;16>ht;){if(0===l)break t;l--,p+=r[a++]<<ht,ht+=8}n.head&&(n.head.xflags=255&p,n.head.os=p>>8),512&n.flags&&(At[0]=255&p,At[1]=255&p>>>8,n.check=m(n.check,At,2,0)),p=0,ht=0,n.mode=F;case F:if(1024&n.flags){for(;16>ht;){if(0===l)break t;l--,p+=r[a++]<<ht,ht+=8}n.length=p,n.head&&(n.head.extra_len=p),512&n.flags&&(At[0]=255&p,At[1]=255&p>>>8,n.check=m(n.check,At,2,0)),p=0,ht=0}else n.head&&(n.head.extra=null);n.mode=N;case N:if(1024&n.flags&&((dt=n.length)>l&&(dt=l),dt&&(n.head&&(xt=n.head.extra_len-n.length,n.head.extra||(n.head.extra=Array(n.head.extra_len)),d.arraySet(n.head.extra,r,a,dt,xt)),512&n.flags&&(n.check=m(n.check,r,dt,a)),l-=dt,a+=dt,n.length-=dt),n.length))break t;n.length=0,n.mode=U;case U:if(2048&n.flags){if(0===l)break t;dt=0;do{xt=r[a+dt++],n.head&&xt&&65536>n.length&&(n.head.name+=_StringfromCharCode(xt))}while(xt&&dt<l);if(512&n.flags&&(n.check=m(n.check,r,dt,a)),l-=dt,a+=dt,xt)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=B;case B:if(4096&n.flags){if(0===l)break t;dt=0;do{xt=r[a+dt++],n.head&&xt&&65536>n.length&&(n.head.comment+=_StringfromCharCode(xt))}while(xt&&dt<l);if(512&n.flags&&(n.check=m(n.check,r,dt,a)),l-=dt,a+=dt,xt)break t}else n.head&&(n.head.comment=null);n.mode=z;case z:if(512&n.flags){for(;16>ht;){if(0===l)break t;l--,p+=r[a++]<<ht,ht+=8}if(p!==(65535&n.check)){t.msg="header crc mismatch",n.mode=st;break}p=0,ht=0}n.head&&(n.head.hcrc=1&n.flags>>9,n.head.done=!0),t.adler=n.check=0,n.mode=j;break;case G:for(;32>ht;){if(0===l)break t;l--,p+=r[a++]<<ht,ht+=8}t.adler=n.check=i(p),p=0,ht=0,n.mode=H;case H:if(0===n.havedict)return t.next_out=s,t.avail_out=u,t.next_in=a,t.avail_in=l,n.hold=p,n.bits=ht,2;t.adler=n.check=1,n.mode=j;case j:if(e===5||e===S)break t;case V:if(n.last){p>>>=7&ht,ht-=7&ht,n.mode=rt;break}for(;3>ht;){if(0===l)break t;l--,p+=r[a++]<<ht,ht+=8}switch(n.last=1&p,p>>>=1,ht-=1,3&p){case 0:n.mode=W;break;case 1:if(c(n),n.mode=K,e===S){p>>>=2,ht-=2;break t}break;case 2:n.mode=Y;break;case 3:t.msg="invalid block type",n.mode=st;}p>>>=2,ht-=2;break;case W:for(p>>>=7&ht,ht-=7&ht;32>ht;){if(0===l)break t;l--,p+=r[a++]<<ht,ht+=8}if((65535&p)!=(65535^p>>>16)){t.msg="invalid stored block lengths",n.mode=st;break}if(n.length=65535&p,p=0,ht=0,n.mode=q,e===S)break t;case q:n.mode=X;case X:if(dt=n.length){if(dt>l&&(dt=l),dt>u&&(dt=u),0===dt)break t;d.arraySet(o,r,a,dt,s),l-=dt,a+=dt,u-=dt,s+=dt,n.length-=dt;break}n.mode=j;break;case Y:for(;14>ht;){if(0===l)break t;l--,p+=r[a++]<<ht,ht+=8}if(n.nlen=257+(31&p),p>>>=5,ht-=5,n.ndist=1+(31&p),p>>>=5,ht-=5,n.ncode=4+(15&p),p>>>=4,ht-=4,286<n.nlen||30<n.ndist){t.msg="too many length or distance symbols",n.mode=st;break}n.have=0,n.mode=Z;case Z:for(;n.have<n.ncode;){for(;3>ht;){if(0===l)break t;l--,p+=r[a++]<<ht,ht+=8}n.lens[Pt[n.have++]]=7&p,p>>>=3,ht-=3}for(;19>n.have;){n.lens[Pt[n.have++]]=0}if(n.lencode=n.lendyn,n.lenbits=7,Et={bits:n.lenbits},St=g(0,n.lens,0,19,n.lencode,0,n.work,Et),n.lenbits=Et.bits,St){t.msg="invalid code lengths set",n.mode=st;break}n.have=0,n.mode=J;case J:for(;n.have<n.nlen+n.ndist;){for(;Tt=n.lencode[p&(1<<n.lenbits)-1],_t=Tt>>>24,gt=255&Tt>>>16,yt=65535&Tt,!(_t<=ht);){if(0===l)break t;l--,p+=r[a++]<<ht,ht+=8}if(16>yt)p>>>=_t,ht-=_t,n.lens[n.have++]=yt;else{if(16===yt){for(Mt=_t+2;ht<Mt;){if(0===l)break t;l--,p+=r[a++]<<ht,ht+=8}if(p>>>=_t,ht-=_t,0===n.have){t.msg="invalid bit length repeat",n.mode=st;break}xt=n.lens[n.have-1],dt=3+(3&p),p>>>=2,ht-=2}else if(17===yt){for(Mt=_t+3;ht<Mt;){if(0===l)break t;l--,p+=r[a++]<<ht,ht+=8}ht-=_t,xt=0,dt=3+(7&(p>>>=_t)),p>>>=3,ht-=3}else{for(Mt=_t+7;ht<Mt;){if(0===l)break t;l--,p+=r[a++]<<ht,ht+=8}ht-=_t,xt=0,dt=11+(127&(p>>>=_t)),p>>>=7,ht-=7}if(n.have+dt>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=st;break}for(;dt--;){n.lens[n.have++]=xt}}}if(n.mode===st)break;if(0===n.lens[256]){t.msg="invalid code -- missing end-of-block",n.mode=st;break}if(n.lenbits=9,Et={bits:n.lenbits},St=g(v,n.lens,0,n.nlen,n.lencode,0,n.work,Et),n.lenbits=Et.bits,St){t.msg="invalid literal/lengths set",n.mode=st;break}if(n.distbits=6,n.distcode=n.distdyn,Et={bits:n.distbits},St=g(b,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,Et),n.distbits=Et.bits,St){t.msg="invalid distances set",n.mode=st;break}if(n.mode=K,e===S)break t;case K:n.mode=Q;case Q:if(6<=l&&258<=u){t.next_out=s,t.avail_out=u,t.next_in=a,t.avail_in=l,n.hold=p,n.bits=ht,_(t,pt),s=t.next_out,o=t.output,u=t.avail_out,a=t.next_in,r=t.input,l=t.avail_in,p=n.hold,ht=n.bits,n.mode===j&&(n.back=-1);break}for(n.back=0;Tt=n.lencode[p&(1<<n.lenbits)-1],_t=Tt>>>24,gt=255&Tt>>>16,yt=65535&Tt,!(_t<=ht);){if(0===l)break t;l--,p+=r[a++]<<ht,ht+=8}if(gt&&0==(240&gt)){for(vt=_t,bt=gt,wt=yt;Tt=n.lencode[wt+((p&(1<<vt+bt)-1)>>vt)],_t=Tt>>>24,gt=255&Tt>>>16,yt=65535&Tt,!(vt+_t<=ht);){if(0===l)break t;l--,p+=r[a++]<<ht,ht+=8}p>>>=vt,ht-=vt,n.back+=vt}if(p>>>=_t,ht-=_t,n.back+=_t,n.length=yt,0===gt){n.mode=it;break}if(32&gt){n.back=-1,n.mode=j;break}if(64&gt){t.msg="invalid literal/length code",n.mode=st;break}n.extra=15&gt,n.mode=$;case $:if(n.extra){for(Mt=n.extra;ht<Mt;){if(0===l)break t;l--,p+=r[a++]<<ht,ht+=8}n.length+=p&(1<<n.extra)-1,p>>>=n.extra,ht-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=tt;case tt:for(;Tt=n.distcode[p&(1<<n.distbits)-1],_t=Tt>>>24,gt=255&Tt>>>16,yt=65535&Tt,!(_t<=ht);){if(0===l)break t;l--,p+=r[a++]<<ht,ht+=8}if(0==(240&gt)){for(vt=_t,bt=gt,wt=yt;Tt=n.distcode[wt+((p&(1<<vt+bt)-1)>>vt)],_t=Tt>>>24,gt=255&Tt>>>16,yt=65535&Tt,!(vt+_t<=ht);){if(0===l)break t;l--,p+=r[a++]<<ht,ht+=8}p>>>=vt,ht-=vt,n.back+=vt}if(p>>>=_t,ht-=_t,n.back+=_t,64&gt){t.msg="invalid distance code",n.mode=st;break}n.offset=yt,n.extra=15&gt,n.mode=et;case et:if(n.extra){for(Mt=n.extra;ht<Mt;){if(0===l)break t;l--,p+=r[a++]<<ht,ht+=8}n.offset+=p&(1<<n.extra)-1,p>>>=n.extra,ht-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=st;break}n.mode=nt;case nt:if(0===u)break t;if(dt=pt-u,n.offset>dt){if((dt=n.offset-dt)>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=st;break}dt>n.wnext?(dt-=n.wnext,ft=n.wsize-dt):ft=n.wnext-dt,dt>n.length&&(dt=n.length),mt=n.window}else mt=o,ft=s-n.offset,dt=n.length;dt>u&&(dt=u),u-=dt,n.length-=dt;do{o[s++]=mt[ft++]}while(--dt);0===n.length&&(n.mode=Q);break;case it:if(0===u)break t;o[s++]=n.length,u--,n.mode=Q;break;case rt:if(n.wrap){for(;32>ht;){if(0===l)break t;l--,p|=r[a++]<<ht,ht+=8}if(pt-=u,t.total_out+=pt,n.total+=pt,pt&&(t.adler=n.check=n.flags?m(n.check,o,pt,s-pt):f(n.check,o,pt,s-pt)),pt=u,(n.flags?p:i(p))!==n.check){t.msg="incorrect data check",n.mode=st;break}p=0,ht=0}n.mode=ot;case ot:if(n.wrap&&n.flags){for(;32>ht;){if(0===l)break t;l--,p+=r[a++]<<ht,ht+=8}if(p!==(4294967295&n.total)){t.msg="incorrect length check",n.mode=st;break}p=0,ht=0}n.mode=at;case at:St=1;break t;case st:St=P;break t;case lt:return C;case 32:default:return A;}}return t.next_out=s,t.avail_out=u,t.next_in=a,t.avail_in=l,n.hold=p,n.bits=ht,(n.wsize||pt!==t.avail_out&&n.mode<st&&(n.mode<rt||e!==w))&&h(t,t.output,t.next_out,pt-t.avail_out)?(n.mode=lt,C):(ut-=t.avail_in,pt-=t.avail_out,t.total_in+=ut,t.total_out+=pt,n.total+=pt,n.wrap&&pt&&(t.adler=n.check=n.flags?m(n.check,o,pt,t.next_out-pt):f(n.check,o,pt,t.next_out-pt)),t.data_type=n.bits+(n.last?64:0)+(n.mode===j?128:0)+(n.mode===K||n.mode===q?256:0),(0===ut&&0===pt||e===w)&&St===E&&(St=-5),St)},e.inflateEnd=function(t){if(!t||!t.state)return A;var e=t.state;return e.window&&(e.window=null),t.state=null,E},e.inflateGetHeader=function(t,e){var n;return t&&t.state?0==(2&(n=t.state).wrap)?A:(n.head=e,e.done=!1,E):A},e.inflateSetDictionary=function(t,e){var n,i,r=e.length;return t&&t.state?0!==(n=t.state).wrap&&n.mode!==H?A:n.mode===H&&(i=1,(i=f(i,e,r,0))!==n.check)?P:h(t,e,r,r)?(n.mode=lt,C):(n.havedict=1,E):A},e.inflateInfo="pako inflate (from Nodeca project)"},function(t){"use strict";t.exports=function(t,e){var n,i,r,o,a,s,l,c,h,u,p,d,f,m,_,g,y,v,b,w,x,S,E,M,T;n=t.state,i=t.next_in,M=t.input,r=i+(t.avail_in-5),o=t.next_out,T=t.output,a=o-(e-t.avail_out),s=o+(t.avail_out-257),l=n.dmax,c=n.wsize,h=n.whave,u=n.wnext,p=n.window,d=n.hold,f=n.bits,m=n.lencode,_=n.distcode,g=(1<<n.lenbits)-1,y=(1<<n.distbits)-1;t:do{15>f&&(d+=M[i++]<<f,f+=8,d+=M[i++]<<f,f+=8),v=m[d&g];e:for(;;){if(b=v>>>24,d>>>=b,f-=b,0===(b=255&v>>>16))T[o++]=65535&v;else{if(!(16&b)){if(0==(64&b)){v=m[(65535&v)+(d&(1<<b)-1)];continue e}if(32&b){n.mode=12;break t}t.msg="invalid literal/length code",n.mode=30;break t}w=65535&v,(b&=15)&&(f<b&&(d+=M[i++]<<f,f+=8),w+=d&(1<<b)-1,d>>>=b,f-=b),15>f&&(d+=M[i++]<<f,f+=8,d+=M[i++]<<f,f+=8),v=_[d&y];n:for(;;){if(b=v>>>24,d>>>=b,f-=b,!(16&(b=255&v>>>16))){if(0==(64&b)){v=_[(65535&v)+(d&(1<<b)-1)];continue n}t.msg="invalid distance code",n.mode=30;break t}if(x=65535&v,b&=15,f<b&&(d+=M[i++]<<f,(f+=8)<b&&(d+=M[i++]<<f,f+=8)),(x+=d&(1<<b)-1)>l){t.msg="invalid distance too far back",n.mode=30;break t}if(d>>>=b,f-=b,b=o-a,x>b){if((b=x-b)>h&&n.sane){t.msg="invalid distance too far back",n.mode=30;break t}if(S=0,E=p,0===u){if(S+=c-b,b<w){w-=b;do{T[o++]=p[S++]}while(--b);S=o-x,E=T}}else if(u<b){if(S+=c+u-b,(b-=u)<w){w-=b;do{T[o++]=p[S++]}while(--b);if(S=0,u<w){w-=b=u;do{T[o++]=p[S++]}while(--b);S=o-x,E=T}}}else if(S+=u-b,b<w){w-=b;do{T[o++]=p[S++]}while(--b);S=o-x,E=T}for(;2<w;){T[o++]=E[S++],T[o++]=E[S++],T[o++]=E[S++],w-=3}w&&(T[o++]=E[S++],1<w&&(T[o++]=E[S++]))}else{S=o-x;do{T[o++]=T[S++],T[o++]=T[S++],T[o++]=T[S++],w-=3}while(2<w);w&&(T[o++]=T[S++],1<w&&(T[o++]=T[S++]))}break}}break}}while(i<r&&o<s);i-=w=f>>3,d&=(1<<(f-=w<<3))-1,t.next_in=i,t.next_out=o,t.avail_in=i<r?r-i+5:5-(i-r),t.avail_out=o<s?s-o+257:257-(o-s),n.hold=d,n.bits=f}},function(t,e,n){"use strict";var i=n(2),r=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(t,e,n,l,c,h,u,p){var d,f,m,_,g,y,v,b,w,x=p.bits,S=0,E=0,M=0,T=0,A=0,P=0,C=0,I=0,L=0,R=0,O=null,k=0,D=new i.Buf16(16),F=new i.Buf16(16),N=null,U=0;for(S=0;15>=S;S++){D[S]=0}for(E=0;E<l;E++){D[e[n+E]]++}for(A=x,T=15;1<=T&&0===D[T];T--){}if(A>T&&(A=T),0===T)return c[h++]=20971520,c[h++]=20971520,p.bits=1,0;for(M=1;M<T&&0===D[M];M++){}for(A<M&&(A=M),I=1,S=1;15>=S;S++){if(I<<=1,0>(I-=D[S]))return-1}if(0<I&&(0===t||1!==T))return-1;for(F[1]=0,S=1;15>S;S++){F[S+1]=F[S]+D[S]}for(E=0;E<l;E++){0!==e[n+E]&&(u[F[e[n+E]]++]=E)}if(0===t?(O=N=u,y=19):1===t?(O=r,k-=257,N=o,U-=257,y=256):(O=a,N=s,y=-1),R=0,E=0,S=M,g=h,P=A,C=0,m=-1,L=1<<A,_=L-1,1===t&&852<L||2===t&&592<L)return 1;for(;;){0,v=S-C,u[E]<y?(b=0,w=u[E]):u[E]>y?(b=N[U+u[E]],w=O[k+u[E]]):(b=96,w=0),d=1<<S-C,M=f=1<<P;do{c[g+(R>>C)+(f-=d)]=0|(v<<24|b<<16|w)}while(0!==f);for(d=1<<S-1;R&d;){d>>=1}if(0!==d?(R&=d-1,R+=d):R=0,E++,0==--D[S]){if(S===T)break;S=e[n+u[E]]}if(S>A&&(R&_)!==m){for(0===C&&(C=A),g+=M,I=1<<(P=S-C);P+C<T&&!(0>=(I-=D[P+C]));){P++,I<<=1}if(L+=1<<P,1===t&&852<L||2===t&&592<L)return 1;c[m=R&_]=0|(A<<24|P<<16|g-h)}}return 0!==R&&(c[g+R]=0|(S-C<<24|64<<16)),p.bits=A,0}},function(t){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},function(t,e,n){"use strict";function i(t,e){if(!babelHelpers.instanceof(t,e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=babelHelpers.typeof(e)&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+babelHelpers.typeof(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(41),s=n(21),l=n.n(s),c=function(){function t(t,e){for(var n=0,i;n<e.length;n++){i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),h=function(t){function e(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:a.a;i(this,e);var s=r(this,t.call(this));return s._loaded=-1,s._totalLoaded=-1,s._parsed=-1,s._totalParsed=-1,s._data=[],s._container=n,s._progressBar=null,s._container&&o&&(s._progressBar=new o(s._container)),s}return o(e,t),e.prototype.free=function(){this._data=[],this._container=null,this._progressBar&&(this._progressBar.free(),this._progressBar=null)},e.prototype.fetch=function(t,e){var n=this;return new Promise(function(i,r){var o=new XMLHttpRequest;o.open("GET",t),o.crossOrigin=!0,o.responseType="arraybuffer",o.onloadstart=function(){n.emit("fetch-start",{file:t,time:new Date})},o.onload=function(e){if(200===o.status||0===o.status){n._loaded=e.loaded,n._totalLoaded=e.total,n._progressBar&&n._progressBar.update(n._loaded,n._totalLoaded,"load",t);var a=o.response;n.emit("fetch-success",{file:t,time:new Date,totalLoaded:e.total}),i({url:t,buffer:a})}else r(o.statusText)},o.onerror=function(){n.emit("fetch-error",{file:t,time:new Date}),r(o.statusText)},o.onabort=function(){n.emit("fetch-abort",{file:t,time:new Date}),r(o.statusText||"Aborted")},o.ontimeout=function(){n.emit("fetch-timeout",{file:t,time:new Date}),r(o.statusText)},o.onprogress=function(e){n._loaded=e.loaded,n._totalLoaded=e.total,n.emit("fetch-progress",{file:t,total:e.total,loaded:e.loaded,time:new Date}),n._progressBar&&n._progressBar.update(n._loaded,n._totalLoaded,"load",t)},o.onloadend=function(){n.emit("fetch-end",{file:t,time:new Date})},babelHelpers.instanceof(e,Map)&&e.set(t,o),o.send()})},e.prototype.parse=function(t){return new Promise(function(e){e(t)})},e.prototype.loadSequenceGroup=function(t,e){var n=this,i=[];return t.forEach(function(t){i.push(n.fetch(t,e))}),Promise.all(i).then(function(t){return n.parse(t)}).then(function(t){return n._data.push(t),t}).catch(function(t){"Aborted"!==t&&(window.console.log("oops... something went wrong..."),window.console.log(t))})},e.prototype.loadSequence=function(t,e){var n=this;return this.fetch(t,e).then(function(t){return n.parse(t)}).then(function(t){return n._data.push(t),t}).catch(function(t){"Aborted"!==t&&(window.console.log("oops... something went wrong..."),window.console.log(t))})},e.prototype.load=function(t,e){var n=this;Array.isArray(t)||(t=[t]),this._progressBar&&(this._progressBar.totalFiles=t.length,this._progressBar.requests=e),this.emit("load-start",{files:t,time:new Date});var i=[];return t.forEach(function(t){Array.isArray(t)?i.push(n.loadSequenceGroup(t,e)):i.push(n.loadSequence(t,e))}),Promise.all(i)},c(e,[{key:"data",set:function set(t){this._data=t},get:function get(){return this._data}}]),e}(l.a);e.a=h},function(t,e,n){"use strict";var i=n(123),r=n(124),o=n(125),a=n(58),s=n(126),l=n(129),c=n(26),h=n(130),u=n(131),p=127;t.exports=function(t){var e,n,d,f,m,_,g;if(n=0>t||1/t===r?"1":"0",t===i||t===r)return f=c("1",8),d=c("0",23),n+f+d;if(t!==t)return f=c("1",8),d="1"+c("0",22),n+f+d;if(0===t)return f=c("0",8),d=c("0",23),n+f+d;if(t=o(t),m=a(t),_=t-m,m=h(m),_=u(_),m)f=m.length-1;else{for(g=0;g<_.length;g++){if("1"===_[g]){e=g+1;break}}f=-e}return d=m+_,0>f?(f<=-p&&(e=p-1),d=d.substring(e)):d=d.substring(1),f=h(f+p),f=l(f,8,"0"),d=s(d,23,"0").substring(0,23),n+f+d}},function(t){"use strict";var i=new Float32Array(1);new Uint32Array(i.buffer)[0]=2139095040,t.exports=i[0]},function(t){"use strict";var i=new Float32Array(1);new Uint32Array(i.buffer)[0]=4286578688,t.exports=i[0]},function(t){"use strict";t.exports=function(t){return 0>t?-t:0===t?0:t}},function(t,e,n){"use strict";var i=n(24),r=n(25),o=n(59),a=n(26);t.exports=function(t,e,n){var l,c;if(!i(t))throw new TypeError("invalid input argument. First argument must be a string. Value: `"+t+"`.");if(!r(e))throw new TypeError("invalid input argument. Second argument must be a nonnegative integer. Value: `"+e+"`.");if(2<arguments.length){if(c=n,!i(c))throw new TypeError("invalid input argument. Third argument must be a string. Value: `"+c+"`.");if(0===c.length)throw new RangeError("invalid input argument. Pad string must not be an empty string.")}else c=" ";if(e>9007199254740991)throw new RangeError("invalid input argument. Output string length exceeds maximum allowed string length.");return 0>=(l=(e-t.length)/c.length)?t:(l=o(l),t+a(c,l))}},function(t,e,n){"use strict";var i=n(128);t.exports=function(t){return i(t)&&0==t%1}},function(t){"use strict";t.exports=function(t){return("number"==typeof t||"[object Number]"===Object.prototype.toString.call(t))&&t.valueOf()===t.valueOf()}},function(t,e,n){"use strict";var i=n(24),r=n(25),o=n(59),a=n(26);t.exports=function(t,e,n){var l,c;if(!i(t))throw new TypeError("invalid input argument. First argument must be a string. Value: `"+t+"`.");if(!r(e))throw new TypeError("invalid input argument. Second argument must be a nonnegative integer. Value: `"+e+"`.");if(2<arguments.length){if(c=n,!i(c))throw new TypeError("invalid input argument. Third argument must be a string. Value: `"+c+"`.");if(0===c.length)throw new RangeError("invalid input argument. Pad string must not be an empty string.")}else c=" ";if(e>9007199254740991)throw new RangeError("invalid input argument. Output string length exceeds maximum allowed string length.");return 0>=(l=(e-t.length)/c.length)?t:(l=o(l),a(c,l)+t)}},function(t,e,n){"use strict";var i=n(58);t.exports=function(t){for(var e,n="";0<t;){n=(e=t/2)===(t=i(e))?"0"+n:"1"+n}return n}},function(t){"use strict";var i=149;t.exports=function(t){var e,n,o,a;if(e="",0===t)return e;for(a=i,o=0;o<i&&(1<=(n=2*t)?(t=n-1,e+="1",a===i&&(a=o)):(t=n,e+="0"),!(1===n||o-a>24));o++){}return e}},function(t,e,n){(function(t,i){var r,o,a;!function(n,i){void 0!==t&&t.exports?t.exports=i():(o=[],void 0!==(a="function"==typeof(r=i)?r.apply(e,o):r)&&(t.exports=a))}(0,function(){var e=function(e){return void 0===e&&(e={}),e.parseDicom=function(i,r){function o(t){if(void 0===t.elements.x00020010)throw"dicomParser.parseDicom: missing required meta header attribute 0002,0010";var n=t.elements.x00020010;return e.readFixedString(i,n.dataOffset,n.length)}function a(t){return"1.2.840.10008.1.2"!==t}function s(o,a){if("1.2.840.10008.1.2.1.99"===o){if(r&&r.inflater){var s=r.inflater(i,a);return new e.ByteStream(e.littleEndianByteArrayParser,s,0)}if(void 0!==t&&this.module!==t){var l=n(136),c=e.sharedCopy(i,a,i.length-a),h=l.inflateRawSync(c),u=e.alloc(i,h.length+a);return i.copy(u,0,0,a),h.copy(u,a),new e.ByteStream(e.littleEndianByteArrayParser,u,0)}if("undefined"!=typeof pako){var p=i.slice(a),d=pako.inflateRaw(p),f=e.alloc(i,d.length+a);return f.set(i.slice(0,a),0),f.set(d,a),new e.ByteStream(e.littleEndianByteArrayParser,f,0)}throw"dicomParser.parseDicom: no inflater available to handle deflate transfer syntax"}return"1.2.840.10008.1.2.2"===o?new e.ByteStream(e.bigEndianByteArrayParser,i,a):new e.ByteStream(e.littleEndianByteArrayParser,i,a)}function l(t,e){for(var n in t.elements){t.elements.hasOwnProperty(n)&&(e.elements[n]=t.elements[n])}return void 0!==t.warnings&&(e.warnings=t.warnings.concat(e.warnings)),e}function c(t){var n=o(t),i=a(n),l=s(n,t.position),h=new e.DataSet(l.byteArrayParser,l.byteArray,{});h.warnings=l.warnings;try{i?e.parseDicomDataSetExplicit(h,l,l.byteArray.length,r):e.parseDicomDataSetImplicit(h,l,l.byteArray.length,r)}catch(t){throw{exception:t,dataSet:h}}return h}if(void 0===i)throw"dicomParser.parseDicom: missing required parameter 'byteArray'";return function(){var t=e.readPart10Header(i,r);return l(t,c(t))}()},e}(e);return e=function(t){"use strict";return void 0===t&&(t={}),t.version="1.7.3",t}(e=function(t){"use strict";return void 0===t&&(t={}),t.sharedCopy=function(t,e,n){if(void 0!==i&&babelHelpers.instanceof(t,i))return t.slice(e,e+n);if(babelHelpers.instanceof(t,Uint8Array))return new Uint8Array(t.buffer,t.byteOffset+e,n);throw"dicomParser.from: unknown type for byteArray"},t}(e=function(t){"use strict";return void 0===t&&(t={}),t.readTag=function(t){if(void 0===t)throw"dicomParser.readTag: missing required parameter 'byteStream'";return"x"+("00000000"+(256*(256*t.readUint16())+t.readUint16()).toString(16)).substr(-8)},t}(e=function(t){"use strict";return void 0===t&&(t={}),t.readSequenceItem=function(e){if(void 0===e)throw"dicomParser.readSequenceItem: missing required parameter 'byteStream'";var n={tag:t.readTag(e),length:e.readUint32(),dataOffset:e.position};if("xfffee000"!==n.tag)throw"dicomParser.readSequenceItem: item tag (FFFE,E000) not found at offset "+e.position;return n},t}(e=function(t){"use strict";function e(e,n){for(var i={},r;e.position<e.byteArray.length;){r=t.readDicomElementImplicit(e,void 0,n);if(i[r.tag]=r,"xfffee00d"===r.tag)return new t.DataSet(e.byteArrayParser,e.byteArray,i)}return e.warnings.push("eof encountered before finding sequence item delimiter in sequence item of undefined length"),new t.DataSet(e.byteArrayParser,e.byteArray,i)}function n(n,i){var r=t.readSequenceItem(n);return 4294967295===r.length?(r.hadUndefinedLength=!0,r.dataSet=e(n,i),r.length=n.position-r.dataOffset):(r.dataSet=new t.DataSet(n.byteArrayParser,n.byteArray,{}),t.parseDicomDataSetImplicit(r.dataSet,n,n.position+r.length,{vrCallback:i})),r}function i(e,i,r){for(;e.position+4<=e.byteArray.length;){var o=t.readTag(e);if(e.seek(-4),"xfffee0dd"===o)return i.length=e.position-i.dataOffset,e.seek(8),i;var a=n(e,r);i.items.push(a)}e.warnings.push("eof encountered before finding sequence delimiter in sequence of undefined length"),i.length=e.byteArray.length-i.dataOffset}function r(t,e,i){for(var r=e.dataOffset+e.length,o;t.position<r;){o=n(t,i);e.items.push(o)}}return void 0===t&&(t={}),t.readSequenceItemsImplicit=function(t,e,n){if(void 0===t)throw"dicomParser.readSequenceItemsImplicit: missing required parameter 'byteStream'";if(void 0===e)throw"dicomParser.readSequenceItemsImplicit: missing required parameter 'element'";e.items=[],4294967295===e.length?i(t,e,n):r(t,e,n)},t}(e=function(t){"use strict";function e(e,n){for(var i={},r;e.position<e.byteArray.length;){r=t.readDicomElementExplicit(e,n);if(i[r.tag]=r,"xfffee00d"===r.tag)return new t.DataSet(e.byteArrayParser,e.byteArray,i)}return n.push("eof encountered before finding item delimiter tag while reading sequence item of undefined length"),new t.DataSet(e.byteArrayParser,e.byteArray,i)}function n(n,i){var r=t.readSequenceItem(n);return 4294967295===r.length?(r.hadUndefinedLength=!0,r.dataSet=e(n,i),r.length=n.position-r.dataOffset):(r.dataSet=new t.DataSet(n.byteArrayParser,n.byteArray,{}),t.parseDicomDataSetExplicit(r.dataSet,n,n.position+r.length)),r}function i(e,i,r){for(;e.position+4<=e.byteArray.length;){var o=t.readTag(e);if(e.seek(-4),"xfffee0dd"===o)return i.length=e.position-i.dataOffset,e.seek(8),i;var a=n(e,r);i.items.push(a)}r.push("eof encountered before finding sequence delimitation tag while reading sequence of undefined length"),i.length=e.position-i.dataOffset}function r(t,e,i){for(var r=e.dataOffset+e.length,o;t.position<r;){o=n(t,i);e.items.push(o)}}return void 0===t&&(t={}),t.readSequenceItemsExplicit=function(t,e,n){if(void 0===t)throw"dicomParser.readSequenceItemsExplicit: missing required parameter 'byteStream'";if(void 0===e)throw"dicomParser.readSequenceItemsExplicit: missing required parameter 'element'";e.items=[],4294967295===e.length?i(t,e,n):r(t,e,n)},t}(e=function(t){return void 0===t&&(t={}),t.readPart10Header=function(e){function i(){if(r.seek(128),"DICM"!==r.readFixedString(4))throw"dicomParser.readPart10Header: DICM prefix not found at location 132 - this is not a valid DICOM P10 file."}if(void 0===e)throw"dicomParser.readPart10Header: missing required parameter 'byteArray'";var r=new t.ByteStream(t.littleEndianByteArrayParser,e);return function(){i();for(var e=[],n={};r.position<r.byteArray.length;){var o=r.position,a=t.readDicomElementExplicit(r,e);if("x0002ffff"<a.tag){r.position=o;break}a.parser=t.littleEndianByteArrayParser,n[a.tag]=a}var s=new t.DataSet(r.byteArrayParser,r.byteArray,n);return s.warnings=r.warnings,s.position=r.position,s}()},t}(e=function(t){"use strict";function e(t,e,n){for(var i=0,r=e;r<e+n;r++){i+=t[r].length}return i}return void 0===t&&(t={}),t.readEncapsulatedPixelDataFromFragments=function(n,i,r,o,a){if(o=o||1,a=a||i.fragments,void 0===n)throw"dicomParser.readEncapsulatedPixelDataFromFragments: missing required parameter 'dataSet'";if(void 0===i)throw"dicomParser.readEncapsulatedPixelDataFromFragments: missing required parameter 'pixelDataElement'";if(void 0===r)throw"dicomParser.readEncapsulatedPixelDataFromFragments: missing required parameter 'startFragmentIndex'";if(void 0===o)throw"dicomParser.readEncapsulatedPixelDataFromFragments: missing required parameter 'numFragments'";if("x7fe00010"!==i.tag)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'pixelDataElement' refers to non pixel data tag (expected tag = x7fe00010'";if(!0!==i.encapsulatedPixelData)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(!0!==i.hadUndefinedLength)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(void 0===i.basicOffsetTable)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(void 0===i.fragments)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(0>=i.fragments.length)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(0>r)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'startFragmentIndex' must be >= 0";if(r>=i.fragments.length)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'startFragmentIndex' must be < number of fragments";if(1>o)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'numFragments' must be > 0";if(r+o>i.fragments.length)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'startFragment' + 'numFragments' < number of fragments";var s=new t.ByteStream(n.byteArrayParser,n.byteArray,i.dataOffset),l=t.readSequenceItem(s);if("xfffee000"!==l.tag)throw"dicomParser.readEncapsulatedPixelData: missing basic offset table xfffee000";s.seek(l.length);var c=s.position;if(1===o)return t.sharedCopy(s.byteArray,c+a[r].offset+8,a[r].length);for(var h=e(a,r,o),u=t.alloc(s.byteArray,h),p=0,d=r;d<r+o;d++){for(var f=c+a[d].offset+8,m=0;m<a[d].length;m++){u[p++]=s.byteArray[f++]}}return u},t}(e=function(t){"use strict";function e(t,e){for(var n=0;n<t.length;n++){if(t[n].offset===e)return n}}function n(t,e,n,i){if(t===e.length-1)return n.length-i;for(var r=e[t+1],o=i+1;o<n.length;o++){if(n[o].offset===r)return o-i}throw"dicomParser.calculateNumberOfFragmentsForFrame: could not find fragment with offset matching basic offset table"}return void 0===t&&(t={}),t.readEncapsulatedImageFrame=function(i,r,o,a,s){if(a=a||r.basicOffsetTable,s=s||r.fragments,void 0===i)throw"dicomParser.readEncapsulatedImageFrame: missing required parameter 'dataSet'";if(void 0===r)throw"dicomParser.readEncapsulatedImageFrame: missing required parameter 'pixelDataElement'";if(void 0===o)throw"dicomParser.readEncapsulatedImageFrame: missing required parameter 'frameIndex'";if(void 0===a)throw"dicomParser.readEncapsulatedImageFrame: parameter 'pixelDataElement' does not have basicOffsetTable";if("x7fe00010"!==r.tag)throw"dicomParser.readEncapsulatedImageFrame: parameter 'pixelDataElement' refers to non pixel data tag (expected tag = x7fe00010'";if(!0!==r.encapsulatedPixelData)throw"dicomParser.readEncapsulatedImageFrame: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(!0!==r.hadUndefinedLength)throw"dicomParser.readEncapsulatedImageFrame: parameter 'pixelDataElement' refers to pixel data element that does not have undefined length";if(void 0===r.fragments)throw"dicomParser.readEncapsulatedImageFrame: parameter 'pixelDataElement' refers to pixel data element that does not have fragments";if(0===a.length)throw"dicomParser.readEncapsulatedImageFrame: basicOffsetTable has zero entries";if(0>o)throw"dicomParser.readEncapsulatedImageFrame: parameter 'frameIndex' must be >= 0";if(o>=a.length)throw"dicomParser.readEncapsulatedImageFrame: parameter 'frameIndex' must be < basicOffsetTable.length";var l=e(s,a[o]);if(void 0===l)throw"dicomParser.readEncapsulatedImageFrame: unable to find fragment that matches basic offset table entry";var c=n(o,a,s,l);return t.readEncapsulatedPixelDataFromFragments(i,r,l,c,s)},t}(e=function(t){"use strict";function e(e,n,i){if(void 0!==i)return"SQ"===i(e.tag);if(n.position+4<=n.byteArray.length){var r=t.readTag(n);return n.seek(-4),"xfffee000"===r||"xfffee0dd"===r}return n.warnings.push("eof encountered before finding sequence item tag or sequence delimiter tag in peeking to determine VR"),!1}return void 0===t&&(t={}),t.readDicomElementImplicit=function(n,i,r){if(void 0===n)throw"dicomParser.readDicomElementImplicit: missing required parameter 'byteStream'";var o={tag:t.readTag(n),length:n.readUint32(),dataOffset:n.position};return 4294967295===o.length&&(o.hadUndefinedLength=!0),o.tag===i?o:e(o,n,r)?(t.readSequenceItemsImplicit(n,o),o):o.hadUndefinedLength?(t.findItemDelimitationItemAndSetElementLength(n,o),o):(n.seek(o.length),o)},t}(e=function(t){"use strict";function e(t){return"OB"===t||"OW"===t||"SQ"===t||"OF"===t||"UT"===t||"UN"===t?4:2}return void 0===t&&(t={}),t.readDicomElementExplicit=function(n,i,r){if(void 0===n)throw"dicomParser.readDicomElementExplicit: missing required parameter 'byteStream'";var o={tag:t.readTag(n),vr:n.readFixedString(2)};return 2===e(o.vr)?(o.length=n.readUint16(),o.dataOffset=n.position):(n.seek(2),o.length=n.readUint32(),o.dataOffset=n.position),4294967295===o.length&&(o.hadUndefinedLength=!0),o.tag===r?o:"SQ"===o.vr?(t.readSequenceItemsExplicit(n,o,i),o):4294967295===o.length?"x7fe00010"===o.tag?(t.findEndOfEncapsulatedElement(n,o,i),o):"UN"===o.vr?(t.findAndSetUNElementLength(n,o),o):(t.readSequenceItemsImplicit(n,o),o):(n.seek(o.length),o)},t}(e=function(t){"use strict";return void 0===t&&(t={}),t.parseDicomDataSetExplicit=function(e,n,i,r){if(i=void 0===i?n.byteArray.length:i,r=r||{},void 0===n)throw"dicomParser.parseDicomDataSetExplicit: missing required parameter 'byteStream'";if(i<n.position||i>n.byteArray.length)throw"dicomParser.parseDicomDataSetExplicit: invalid value for parameter 'maxPosition'";for(var o=e.elements,a;n.position<i;){a=t.readDicomElementExplicit(n,e.warnings,r.untilTag);if(o[a.tag]=a,a.tag===r.untilTag)return}if(n.position>i)throw"dicomParser:parseDicomDataSetExplicit: buffer overrun"},t.parseDicomDataSetImplicit=function(e,n,i,r){if(i=void 0===i?e.byteArray.length:i,r=r||{},void 0===n)throw"dicomParser.parseDicomDataSetImplicit: missing required parameter 'byteStream'";if(i<n.position||i>n.byteArray.length)throw"dicomParser.parseDicomDataSetImplicit: invalid value for parameter 'maxPosition'";for(var o=e.elements,a;n.position<i;){a=t.readDicomElementImplicit(n,r.untilTag,r.vrCallback);if(o[a.tag]=a,a.tag===r.untilTag)return}},t}(e=function(t){"use strict";return void 0===t&&(t={}),t.littleEndianByteArrayParser={readUint16:function readUint16(t,e){if(0>e)throw"littleEndianByteArrayParser.readUint16: position cannot be less than 0";if(e+2>t.length)throw"littleEndianByteArrayParser.readUint16: attempt to read past end of buffer";return t[e]+256*t[e+1]},readInt16:function readInt16(t,e){if(0>e)throw"littleEndianByteArrayParser.readInt16: position cannot be less than 0";if(e+2>t.length)throw"littleEndianByteArrayParser.readInt16: attempt to read past end of buffer";var n=t[e]+(t[e+1]<<8);return 32768&n&&(n=n-65535-1),n},readUint32:function readUint32(t,e){if(0>e)throw"littleEndianByteArrayParser.readUint32: position cannot be less than 0";if(e+4>t.length)throw"littleEndianByteArrayParser.readUint32: attempt to read past end of buffer";return t[e]+256*t[e+1]+256*(256*t[e+2])+256*(256*(256*t[e+3]))},readInt32:function readInt32(t,e){if(0>e)throw"littleEndianByteArrayParser.readInt32: position cannot be less than 0";if(e+4>t.length)throw"littleEndianByteArrayParser.readInt32: attempt to read past end of buffer";return t[e]+(t[e+1]<<8)+(t[e+2]<<16)+(t[e+3]<<24)},readFloat:function readFloat(t,e){if(0>e)throw"littleEndianByteArrayParser.readFloat: position cannot be less than 0";if(e+4>t.length)throw"littleEndianByteArrayParser.readFloat: attempt to read past end of buffer";var n=new Uint8Array(4);return n[0]=t[e],n[1]=t[e+1],n[2]=t[e+2],n[3]=t[e+3],new Float32Array(n.buffer)[0]},readDouble:function readDouble(t,e){if(0>e)throw"littleEndianByteArrayParser.readDouble: position cannot be less than 0";if(e+8>t.length)throw"littleEndianByteArrayParser.readDouble: attempt to read past end of buffer";var n=new Uint8Array(8);return n[0]=t[e],n[1]=t[e+1],n[2]=t[e+2],n[3]=t[e+3],n[4]=t[e+4],n[5]=t[e+5],n[6]=t[e+6],n[7]=t[e+7],new Float64Array(n.buffer)[0]}},t}(e=function(t){"use strict";return void 0===t&&(t={}),t.findItemDelimitationItemAndSetElementLength=function(t,e){if(void 0===t)throw"dicomParser.readDicomElementImplicit: missing required parameter 'byteStream'";for(var n=t.byteArray.length-8;t.position<=n;){if(65534===t.readUint16()&&57357===t.readUint16())return 0!==t.readUint32()&&t.warnings("encountered non zero length following item delimiter at position"+t.position-4+" while reading element of undefined length with tag ' + element.tag"),void(e.length=t.position-e.dataOffset)}e.length=t.byteArray.length-e.dataOffset,t.seek(t.byteArray.length-t.position)},t}(e=function(t){"use strict";return void 0===t&&(t={}),t.findEndOfEncapsulatedElement=function(e,n,i){if(void 0===e)throw"dicomParser.findEndOfEncapsulatedElement: missing required parameter 'byteStream'";if(void 0===n)throw"dicomParser.findEndOfEncapsulatedElement: missing required parameter 'element'";if(n.encapsulatedPixelData=!0,n.basicOffsetTable=[],n.fragments=[],"xfffee000"!==t.readTag(e))throw"dicomParser.findEndOfEncapsulatedElement: basic offset table not found";for(var r=e.readUint32()/4,o=0,a;o<r;o++){a=e.readUint32();n.basicOffsetTable.push(a)}for(var s=e.position;e.position<e.byteArray.length;){var l=t.readTag(e),c=e.readUint32();if("xfffee0dd"===l)return e.seek(c),void(n.length=e.position-n.dataOffset);if("xfffee000"!==l)return i&&i.push("unexpected tag "+l+" while searching for end of pixel data element with undefined length"),c>e.byteArray.length-e.position&&(c=e.byteArray.length-e.position),n.fragments.push({offset:e.position-s-8,position:e.position,length:c}),e.seek(c),void(n.length=e.position-n.dataOffset);n.fragments.push({offset:e.position-s-8,position:e.position,length:c}),e.seek(c)}i&&i.push("pixel data element "+n.tag+" missing sequence delimiter tag xfffee0dd")},t}(e=function(t){"use strict";return void 0===t&&(t={}),t.findAndSetUNElementLength=function(t,e){if(void 0===t)throw"dicomParser.findAndSetUNElementLength: missing required parameter 'byteStream'";for(var n=t.byteArray.length-8;t.position<=n;){if(65534===t.readUint16()){if(57565===t.readUint16()){return 0!==t.readUint32()&&t.warnings("encountered non zero length following item delimiter at position"+t.position-4+" while reading element of undefined length with tag ' + element.tag"),void(e.length=t.position-e.dataOffset)}}}e.length=t.byteArray.length-e.dataOffset,t.seek(t.byteArray.length-t.position)},t}(e=function(t){"use strict";function e(t,e){return void 0!==t.parser?t.parser:e}return void 0===t&&(t={}),t.DataSet=function(t,e,n){this.byteArrayParser=t,this.byteArray=e,this.elements=n},t.DataSet.prototype.uint16=function(t,n){var i=this.elements[t];if(n=void 0!==n?n:0,i&&0!==i.length)return e(i,this.byteArrayParser).readUint16(this.byteArray,i.dataOffset+2*n)},t.DataSet.prototype.int16=function(t,n){var i=this.elements[t];if(n=void 0!==n?n:0,i&&0!==i.length)return e(i,this.byteArrayParser).readInt16(this.byteArray,i.dataOffset+2*n)},t.DataSet.prototype.uint32=function(t,n){var i=this.elements[t];if(n=void 0!==n?n:0,i&&0!==i.length)return e(i,this.byteArrayParser).readUint32(this.byteArray,i.dataOffset+4*n)},t.DataSet.prototype.int32=function(t,n){var i=this.elements[t];if(n=void 0!==n?n:0,i&&0!==i.length)return e(i,this.byteArrayParser).readInt32(this.byteArray,i.dataOffset+4*n)},t.DataSet.prototype.float=function(t,n){var i=this.elements[t];if(n=void 0!==n?n:0,i&&0!==i.length)return e(i,this.byteArrayParser).readFloat(this.byteArray,i.dataOffset+4*n)},t.DataSet.prototype.double=function(t,n){var i=this.elements[t];if(n=void 0!==n?n:0,i&&0!==i.length)return e(i,this.byteArrayParser).readDouble(this.byteArray,i.dataOffset+8*n)},t.DataSet.prototype.numStringValues=function(e){var n=this.elements[e];if(n&&0<n.length){var i=t.readFixedString(this.byteArray,n.dataOffset,n.length).match(/\\/g);return null===i?1:i.length+1}},t.DataSet.prototype.string=function(e,n){var i=this.elements[e];if(i&&0<i.length){var r=t.readFixedString(this.byteArray,i.dataOffset,i.length);return 0<=n?r.split("\\")[n].trim():r.trim()}},t.DataSet.prototype.text=function(e,n){var i=this.elements[e];if(i&&0<i.length){var r=t.readFixedString(this.byteArray,i.dataOffset,i.length);return 0<=n?r.split("\\")[n].replace(/ +$/,""):r.replace(/ +$/,"")}},t.DataSet.prototype.floatString=function(t,e){var n=this.elements[t];if(n&&0<n.length){e=void 0!==e?e:0;var i=this.string(t,e);if(void 0!==i)return parseFloat(i)}},t.DataSet.prototype.intString=function(t,e){var n=this.elements[t];if(n&&0<n.length){e=void 0!==e?e:0;var i=this.string(t,e);if(void 0!==i)return parseInt(i)}},t}(e=function(t){"use strict";return void 0===t&&(t={}),t.ByteStream=function(t,e,n){if(void 0===t)throw"dicomParser.ByteStream: missing required parameter 'byteArrayParser'";if(void 0===e)throw"dicomParser.ByteStream: missing required parameter 'byteArray'";if(!1==babelHelpers.instanceof(e,Uint8Array)&&!1==babelHelpers.instanceof(e,i))throw"dicomParser.ByteStream: parameter byteArray is not of type Uint8Array or Buffer";if(0>n)throw"dicomParser.ByteStream: parameter 'position' cannot be less than 0";if(n>=e.length)throw"dicomParser.ByteStream: parameter 'position' cannot be greater than or equal to 'byteArray' length";this.byteArrayParser=t,this.byteArray=e,this.position=n||0,this.warnings=[]},t.ByteStream.prototype.seek=function(t){if(0>this.position+t)throw"dicomParser.ByteStream.prototype.seek: cannot seek to position < 0";this.position+=t},t.ByteStream.prototype.readByteStream=function(e){if(this.position+e>this.byteArray.length)throw"dicomParser.ByteStream.prototype.readByteStream: readByteStream - buffer overread";var n=t.sharedCopy(this.byteArray,this.position,e);return this.position+=e,new t.ByteStream(this.byteArrayParser,n)},t.ByteStream.prototype.readUint16=function(){var t=this.byteArrayParser.readUint16(this.byteArray,this.position);return this.position+=2,t},t.ByteStream.prototype.readUint32=function(){var t=this.byteArrayParser.readUint32(this.byteArray,this.position);return this.position+=4,t},t.ByteStream.prototype.readFixedString=function(e){var n=t.readFixedString(this.byteArray,this.position,e);return this.position+=e,n},t}(e=function(t){"use strict";return void 0===t&&(t={}),t.readFixedString=function(t,e,n){if(0>n)throw"dicomParser.readFixedString - length cannot be less than 0";if(e+n>t.length)throw"dicomParser.readFixedString: attempt to read past end of buffer";for(var i,r="",o=0;o<n;o++){if(0===(i=t[e+o]))return e+=n,r;r+=_StringfromCharCode(i)}return r},t}(e=function(t){"use strict";return void 0===t&&(t={}),t.bigEndianByteArrayParser={readUint16:function readUint16(t,e){if(0>e)throw"bigEndianByteArrayParser.readUint16: position cannot be less than 0";if(e+2>t.length)throw"bigEndianByteArrayParser.readUint16: attempt to read past end of buffer";return(t[e]<<8)+t[e+1]},readInt16:function readInt16(t,e){if(0>e)throw"bigEndianByteArrayParser.readInt16: position cannot be less than 0";if(e+2>t.length)throw"bigEndianByteArrayParser.readInt16: attempt to read past end of buffer";var n=(t[e]<<8)+t[e+1];return 32768&n&&(n=n-65535-1),n},readUint32:function readUint32(t,e){if(0>e)throw"bigEndianByteArrayParser.readUint32: position cannot be less than 0";if(e+4>t.length)throw"bigEndianByteArrayParser.readUint32: attempt to read past end of buffer";return 256*(256*(256*t[e]+t[e+1])+t[e+2])+t[e+3]},readInt32:function readInt32(t,e){if(0>e)throw"bigEndianByteArrayParser.readInt32: position cannot be less than 0";if(e+4>t.length)throw"bigEndianByteArrayParser.readInt32: attempt to read past end of buffer";return(t[e]<<24)+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3]},readFloat:function readFloat(t,e){if(0>e)throw"bigEndianByteArrayParser.readFloat: position cannot be less than 0";if(e+4>t.length)throw"bigEndianByteArrayParser.readFloat: attempt to read past end of buffer";var n=new Uint8Array(4);return n[3]=t[e],n[2]=t[e+1],n[1]=t[e+2],n[0]=t[e+3],new Float32Array(n.buffer)[0]},readDouble:function readDouble(t,e){if(0>e)throw"bigEndianByteArrayParser.readDouble: position cannot be less than 0";if(e+8>t.length)throw"bigEndianByteArrayParser.readDouble: attempt to read past end of buffer";var n=new Uint8Array(8);return n[7]=t[e],n[6]=t[e+1],n[5]=t[e+2],n[4]=t[e+3],n[3]=t[e+4],n[2]=t[e+5],n[1]=t[e+6],n[0]=t[e+7],new Float64Array(n.buffer)[0]}},t}(e=function(t){"use strict";return void 0===t&&(t={}),t.alloc=function(t,e){if(void 0!==i&&babelHelpers.instanceof(t,i))return i.alloc(e);if(babelHelpers.instanceof(t,Uint8Array))return new Uint8Array(e);throw"dicomParser.alloc: unknown type for byteArray"},t}(e=function(t){"use strict";void 0===t&&(t={});var e=!1;return t.readEncapsulatedPixelData=function(n,i,r){if(e||(e=!0,console&&console.log&&console.log("WARNING: dicomParser.readEncapsulatedPixelData() has been deprecated")),void 0===n)throw"dicomParser.readEncapsulatedPixelData: missing required parameter 'dataSet'";if(void 0===i)throw"dicomParser.readEncapsulatedPixelData: missing required parameter 'element'";if(void 0===r)throw"dicomParser.readEncapsulatedPixelData: missing required parameter 'frame'";if("x7fe00010"!==i.tag)throw"dicomParser.readEncapsulatedPixelData: parameter 'element' refers to non pixel data tag (expected tag = x7fe00010'";if(!0!==i.encapsulatedPixelData)throw"dicomParser.readEncapsulatedPixelData: parameter 'element' refers to pixel data element that does not have encapsulated pixel data";if(!0!==i.hadUndefinedLength)throw"dicomParser.readEncapsulatedPixelData: parameter 'element' refers to pixel data element that does not have encapsulated pixel data";if(void 0===i.basicOffsetTable)throw"dicomParser.readEncapsulatedPixelData: parameter 'element' refers to pixel data element that does not have encapsulated pixel data";if(void 0===i.fragments)throw"dicomParser.readEncapsulatedPixelData: parameter 'element' refers to pixel data element that does not have encapsulated pixel data";if(0>r)throw"dicomParser.readEncapsulatedPixelData: parameter 'frame' must be >= 0";return 0!==i.basicOffsetTable.length?t.readEncapsulatedImageFrame(n,i,r):t.readEncapsulatedPixelDataFromFragments(n,i,0,i.fragments.length)},t}(e=function(t){"use strict";void 0===t&&(t={});var e={AE:!0,AS:!0,AT:!1,CS:!0,DA:!0,DS:!0,DT:!0,FL:!1,FD:!1,IS:!0,LO:!0,LT:!0,OB:!1,OD:!1,OF:!1,OW:!1,PN:!0,SH:!0,SL:!1,SQ:!1,SS:!1,ST:!0,TM:!0,UI:!0,UL:!1,UN:void 0,UR:!0,US:!1,UT:!0};return t.isStringVr=function(t){return e[t]},t.isPrivateTag=function(t){return 1==parseInt(t[4])%2},t.parsePN=function(t){if(void 0!==t){var e=t.split("^");return{familyName:e[0],givenName:e[1],middleName:e[2],prefix:e[3],suffix:e[4]}}},t}(e=function(t){"use strict";return void 0===t&&(t={}),t.parseTM=function(t,e){if(2<=t.length){var n=parseInt(t.substring(0,2),10),i=4<=t.length?parseInt(t.substring(2,4),10):void 0,r=6<=t.length?parseInt(t.substring(4,6),10):void 0,o=8<=t.length?parseInt(t.substring(7,13),10):void 0;if(e&&(isNaN(n)||void 0!==i&&isNaN(i)||void 0!==r&&isNaN(r)||void 0!==o&&isNaN(o)||0>n||23<n||i&&(0>i||59<i)||r&&(0>r||59<r)||o&&(0>o||999999<o)))throw"invalid TM '"+t+"'";return{hours:n,minutes:i,seconds:r,fractionalSeconds:o}}if(e)throw"invalid TM '"+t+"'"},t}(e=function(t){"use strict";function e(t,e){switch(t){case 2:return 0==e%4&&e%100||0==e%400?29:28;case 9:case 4:case 6:case 11:return 30;default:return 31;}}function n(t,n,i){return!isNaN(i)&&0<n&&12>=n&&0<t&&t<=e(n,i)}return void 0===t&&(t={}),t.parseDA=function(t,e){if(t&&8===t.length){var i=parseInt(t.substring(0,4),10),r=parseInt(t.substring(4,6),10),o=parseInt(t.substring(6,8),10);if(e&&!0!==n(o,r,i))throw"invalid DA '"+t+"'";return{year:i,month:r,day:o}}if(e)throw"invalid DA '"+t+"'"},t}(e=function(t){"use strict";return void 0===t&&(t={}),t.explicitElementToString=function(e,n){function i(t,n){for(var i="",r=0;r<t;r++){0!==r&&(i+="/"),i+=n.call(e,a,r).toString()}return i}if(void 0===e||void 0===n)throw"dicomParser.explicitElementToString: missing required parameters";if(void 0===n.vr)throw"dicomParser.explicitElementToString: cannot convert implicit element to string";var r,o=n.vr,a=n.tag;if(!0===t.isStringVr(o))r=e.string(a);else{if("AT"==o){var s=e.uint32(a);if(void 0===s)return;return 0>s&&(s=4294967295+s+1),"x"+s.toString(16).toUpperCase()}"US"==o?r=i(n.length/2,e.uint16):"SS"===o?r=i(n.length/2,e.int16):"UL"==o?r=i(n.length/4,e.uint32):"SL"===o?r=i(n.length/4,e.int32):"FD"==o?r=i(n.length/8,e.double):"FL"==o&&(r=i(n.length/4,e.float))}return r},t}(e=function(t){"use strict";return void 0===t&&(t={}),t.explicitDataSetToJS=function(e,n){if(void 0===e)throw"dicomParser.explicitDataSetToJS: missing required parameter dataSet";n=n||{omitPrivateAttibutes:!0,maxElementLength:128};var i={};for(var r in e.elements){var o=e.elements[r];if(!0!==n.omitPrivateAttibutes||!t.isPrivateTag(r))if(o.items){for(var a=[],s=0;s<o.items.length;s++){a.push(t.explicitDataSetToJS(o.items[s].dataSet,n))}i[r]=a}else{var l;l=void 0,o.length<n.maxElementLength&&(l=t.explicitElementToString(e,o)),i[r]=void 0!==l?l:{dataOffset:o.dataOffset,length:o.length}}}return i},t}(e=function(t){"use strict";function e(t,e){return 255===t.byteArray[e]&&217===t.byteArray[e+1]}function n(t,n,i){var r=n.fragments[i];return!(!e(t,r.position+r.length-2)&&!e(t,r.position+r.length-3))}function i(t,e,i){for(var r=i;r<e.fragments.length;r++){if(n(t,e,r))return r}}return void 0===t&&(t={}),t.createJPEGBasicOffsetTable=function(t,e,n){if(void 0===t)throw"dicomParser.createJPEGBasicOffsetTable: missing required parameter dataSet";if(void 0===e)throw"dicomParser.createJPEGBasicOffsetTable: missing required parameter pixelDataElement";if("x7fe00010"!==e.tag)throw"dicomParser.createJPEGBasicOffsetTable: parameter 'pixelDataElement' refers to non pixel data tag (expected tag = x7fe00010'";if(!0!==e.encapsulatedPixelData)throw"dicomParser.createJPEGBasicOffsetTable: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(!0!==e.hadUndefinedLength)throw"dicomParser.createJPEGBasicOffsetTable: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(void 0===e.basicOffsetTable)throw"dicomParser.createJPEGBasicOffsetTable: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(void 0===e.fragments)throw"dicomParser.createJPEGBasicOffsetTable: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(0>=e.fragments.length)throw"dicomParser.createJPEGBasicOffsetTable: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(n&&0>=n.length)throw"dicomParser.createJPEGBasicOffsetTable: parameter 'fragments' must not be zero length";n=n||e.fragments;for(var r=[],o=0;;){r.push(e.fragments[o].offset);var a=i(t,e,o);if(void 0===a||a===e.fragments.length-1)return r;o=a+1}},t}(e))))))))))))))))))))))))))))})}).call(e,n(29)(t),n(6).Buffer)},function(t,e){"use strict";function i(t){var e=t.length;if(0<e%4)throw new Error("Invalid string. Length must be a multiple of 4");return"="===t[e-2]?2:"="===t[e-1]?1:0}function r(t){return a[63&t>>18]+a[63&t>>12]+a[63&t>>6]+a[63&t]}function o(t,e,n){for(var i,o=[],a=e;a<n;a+=3){i=(t[a]<<16)+(t[a+1]<<8)+t[a+2],o.push(r(i))}return o.join("")}e.byteLength=function(t){return 3*t.length/4-i(t)},e.toByteArray=function(t){var e,n,r,o,a,c=t.length;o=i(t),a=new l(3*c/4-o),n=0<o?c-4:c;var h=0;for(e=0;e<n;e+=4){r=s[t.charCodeAt(e)]<<18|s[t.charCodeAt(e+1)]<<12|s[t.charCodeAt(e+2)]<<6|s[t.charCodeAt(e+3)],a[h++]=255&r>>16,a[h++]=255&r>>8,a[h++]=255&r}return 2===o?(r=s[t.charCodeAt(e)]<<2|s[t.charCodeAt(e+1)]>>4,a[h++]=255&r):1===o&&(r=s[t.charCodeAt(e)]<<10|s[t.charCodeAt(e+1)]<<4|s[t.charCodeAt(e+2)]>>2,a[h++]=255&r>>8,a[h++]=255&r),a},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,r="",s=[],l=0,c=n-i;l<c;l+=16383){s.push(o(t,l,l+16383>c?c:l+16383))}return 1===i?(e=t[n-1],r+=a[e>>2],r+=a[63&e<<4],r+="=="):2===i&&(e=(t[n-2]<<8)+t[n-1],r+=a[e>>10],r+=a[63&e>>4],r+=a[63&e<<2],r+="="),s.push(r),s.join("")};for(var a=[],s=[],l="undefined"!=typeof Uint8Array?Uint8Array:Array,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=0,u=c.length;h<u;++h){a[h]=c[h],s[c.charCodeAt(h)]=h}s["-".charCodeAt(0)]=62,s["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,i,r){var o,a,s=8*r-i-1,l=(1<<s)-1,c=l>>1,h=-7,u=n?r-1:0,p=n?-1:1,d=t[e+u];for(u+=p,o=d&(1<<-h)-1,d>>=-h,h+=s;0<h;o=256*o+t[e+u],u+=p,h-=8){}for(a=o&(1<<-h)-1,o>>=-h,h+=i;0<h;a=256*a+t[e+u],u+=p,h-=8){}if(0===o)o=1-c;else{if(o===l)return a?NaN:1/0*(d?-1:1);a+=_Mathpow(2,i),o-=c}return(d?-1:1)*a*_Mathpow(2,o-i)},e.write=function(t,e,n,i,r,o){var a,s,l,c=8*o-r-1,h=(1<<c)-1,u=h>>1,p=23===r?5.960464477539063e-8-6.617444900424222e-24:0,d=i?0:o-1,f=i?1:-1,m=0>e||0===e&&0>1/e?1:0;for(e=_Mathabs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=h):(a=_Mathfloor(_Mathlog(e)/_MathLN),1>e*(l=_Mathpow(2,-a))&&(a--,l*=2),2<=(e+=1<=a+u?p/l:p*_Mathpow(2,1-u))*l&&(a++,l/=2),a+u>=h?(s=0,a=h):1<=a+u?(s=(e*l-1)*_Mathpow(2,r),a+=u):(s=e*_Mathpow(2,u-1)*_Mathpow(2,r),a=0));8<=r;t[n+d]=255&s,d+=f,s/=256,r-=8){}for(a=a<<r|s,c+=r;0<c;t[n+d]=255&a,d+=f,a/=256,c-=8){}t[n+d-f]|=128*m}},function(t){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){(function(t,i){function r(e,n,i){function r(){for(var t;null!==(t=e.read());){a.push(t),s+=t.length}e.once("readable",r)}function o(){var n=t.concat(a,s);a=[],i(null,n),e.close()}var a=[],s=0;e.on("error",function(t){e.removeListener("end",o),e.removeListener("readable",r),i(t)}),e.on("end",o),e.end(n),r()}function o(e,n){if("string"==typeof n&&(n=new t(n)),!t.isBuffer(n))throw new TypeError("Not a string or buffer");var i=m.Z_FINISH;return e._processChunk(n,i)}function a(t){if(!babelHelpers.instanceof(this,a))return new a(t);d.call(this,t,m.DEFLATE)}function s(t){if(!babelHelpers.instanceof(this,s))return new s(t);d.call(this,t,m.INFLATE)}function l(t){if(!babelHelpers.instanceof(this,l))return new l(t);d.call(this,t,m.GZIP)}function c(t){if(!babelHelpers.instanceof(this,c))return new c(t);d.call(this,t,m.GUNZIP)}function h(t){if(!babelHelpers.instanceof(this,h))return new h(t);d.call(this,t,m.DEFLATERAW)}function u(t){if(!babelHelpers.instanceof(this,u))return new u(t);d.call(this,t,m.INFLATERAW)}function p(t){if(!babelHelpers.instanceof(this,p))return new p(t);d.call(this,t,m.UNZIP)}function d(n,i){if(this._opts=n=n||{},this._chunkSize=n.chunkSize||e.Z_DEFAULT_CHUNK,f.call(this,n),n.flush&&n.flush!==m.Z_NO_FLUSH&&n.flush!==m.Z_PARTIAL_FLUSH&&n.flush!==m.Z_SYNC_FLUSH&&n.flush!==m.Z_FULL_FLUSH&&n.flush!==m.Z_FINISH&&n.flush!==m.Z_BLOCK)throw new Error("Invalid flush flag: "+n.flush);if(this._flushFlag=n.flush||m.Z_NO_FLUSH,n.chunkSize&&(n.chunkSize<e.Z_MIN_CHUNK||n.chunkSize>e.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+n.chunkSize);if(n.windowBits&&(n.windowBits<e.Z_MIN_WINDOWBITS||n.windowBits>e.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+n.windowBits);if(n.level&&(n.level<e.Z_MIN_LEVEL||n.level>e.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+n.level);if(n.memLevel&&(n.memLevel<e.Z_MIN_MEMLEVEL||n.memLevel>e.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+n.memLevel);if(n.strategy&&n.strategy!=e.Z_FILTERED&&n.strategy!=e.Z_HUFFMAN_ONLY&&n.strategy!=e.Z_RLE&&n.strategy!=e.Z_FIXED&&n.strategy!=e.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+n.strategy);if(n.dictionary&&!t.isBuffer(n.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._binding=new m.Zlib(i);var r=this;this._hadError=!1,this._binding.onerror=function(t,n){r._binding=null,r._hadError=!0;var i=new Error(t);i.errno=n,i.code=e.codes[n],r.emit("error",i)};var o=e.Z_DEFAULT_COMPRESSION;"number"==typeof n.level&&(o=n.level);var a=e.Z_DEFAULT_STRATEGY;"number"==typeof n.strategy&&(a=n.strategy),this._binding.init(n.windowBits||e.Z_DEFAULT_WINDOWBITS,o,n.memLevel||e.Z_DEFAULT_MEMLEVEL,a,n.dictionary),this._buffer=new t(this._chunkSize),this._offset=0,this._closed=!1,this._level=o,this._strategy=a,this.once("end",this.close)}var f=n(137),m=n(146),_=n(71),g=n(72).ok;m.Z_MIN_WINDOWBITS=8,m.Z_MAX_WINDOWBITS=15,m.Z_DEFAULT_WINDOWBITS=15,m.Z_MIN_CHUNK=64,m.Z_MAX_CHUNK=1/0,m.Z_DEFAULT_CHUNK=16384,m.Z_MIN_MEMLEVEL=1,m.Z_MAX_MEMLEVEL=9,m.Z_DEFAULT_MEMLEVEL=8,m.Z_MIN_LEVEL=-1,m.Z_MAX_LEVEL=9,m.Z_DEFAULT_LEVEL=m.Z_DEFAULT_COMPRESSION,Object.keys(m).forEach(function(t){t.match(/^Z/)&&(e[t]=m[t])}),e.codes={Z_OK:m.Z_OK,Z_STREAM_END:m.Z_STREAM_END,Z_NEED_DICT:m.Z_NEED_DICT,Z_ERRNO:m.Z_ERRNO,Z_STREAM_ERROR:m.Z_STREAM_ERROR,Z_DATA_ERROR:m.Z_DATA_ERROR,Z_MEM_ERROR:m.Z_MEM_ERROR,Z_BUF_ERROR:m.Z_BUF_ERROR,Z_VERSION_ERROR:m.Z_VERSION_ERROR},Object.keys(e.codes).forEach(function(t){e.codes[e.codes[t]]=t}),e.Deflate=a,e.Inflate=s,e.Gzip=l,e.Gunzip=c,e.DeflateRaw=h,e.InflateRaw=u,e.Unzip=p,e.createDeflate=function(t){return new a(t)},e.createInflate=function(t){return new s(t)},e.createDeflateRaw=function(t){return new h(t)},e.createInflateRaw=function(t){return new u(t)},e.createGzip=function(t){return new l(t)},e.createGunzip=function(t){return new c(t)},e.createUnzip=function(t){return new p(t)},e.deflate=function(t,e,n){return"function"==typeof e&&(n=e,e={}),r(new a(e),t,n)},e.deflateSync=function(t,e){return o(new a(e),t)},e.gzip=function(t,e,n){return"function"==typeof e&&(n=e,e={}),r(new l(e),t,n)},e.gzipSync=function(t,e){return o(new l(e),t)},e.deflateRaw=function(t,e,n){return"function"==typeof e&&(n=e,e={}),r(new h(e),t,n)},e.deflateRawSync=function(t,e){return o(new h(e),t)},e.unzip=function(t,e,n){return"function"==typeof e&&(n=e,e={}),r(new p(e),t,n)},e.unzipSync=function(t,e){return o(new p(e),t)},e.inflate=function(t,e,n){return"function"==typeof e&&(n=e,e={}),r(new s(e),t,n)},e.inflateSync=function(t,e){return o(new s(e),t)},e.gunzip=function(t,e,n){return"function"==typeof e&&(n=e,e={}),r(new c(e),t,n)},e.gunzipSync=function(t,e){return o(new c(e),t)},e.inflateRaw=function(t,e,n){return"function"==typeof e&&(n=e,e={}),r(new u(e),t,n)},e.inflateRawSync=function(t,e){return o(new u(e),t)},_.inherits(d,f),d.prototype.params=function(t,n,r){if(t<e.Z_MIN_LEVEL||t>e.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+t);if(n!=e.Z_FILTERED&&n!=e.Z_HUFFMAN_ONLY&&n!=e.Z_RLE&&n!=e.Z_FIXED&&n!=e.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+n);if(this._level!==t||this._strategy!==n){var o=this;this.flush(m.Z_SYNC_FLUSH,function(){o._binding.params(t,n),o._hadError||(o._level=t,o._strategy=n,r&&r())})}else i.nextTick(r)},d.prototype.reset=function(){return this._binding.reset()},d.prototype._flush=function(e){this._transform(new t(0),"",e)},d.prototype.flush=function(e,n){var r=this._writableState;if(("function"==typeof e||void 0===e&&!n)&&(n=e,e=m.Z_FULL_FLUSH),r.ended)n&&i.nextTick(n);else if(r.ending)n&&this.once("end",n);else if(r.needDrain){var o=this;this.once("drain",function(){o.flush(n)})}else this._flushFlag=e,this.write(new t(0),"",n)},d.prototype.close=function(t){if(t&&i.nextTick(t),!this._closed){this._closed=!0,this._binding.close();var e=this;i.nextTick(function(){e.emit("close")})}},d.prototype._transform=function(e,n,i){var r,o=this._writableState,a=(o.ending||o.ended)&&(!e||o.length===e.length);if(null===!e&&!t.isBuffer(e))return i(new Error("invalid input"));a?r=m.Z_FINISH:(r=this._flushFlag,e.length>=o.length&&(this._flushFlag=this._opts.flush||m.Z_NO_FLUSH));this._processChunk(e,r,i)},d.prototype._processChunk=function(e,n,i){function r(h,d){if(!l._hadError){var f=a-d;if(g(0<=f,"have should not go down"),0<f){var m=l._buffer.slice(l._offset,l._offset+f);l._offset+=f,c?l.push(m):(u.push(m),p+=m.length)}if((0===d||l._offset>=l._chunkSize)&&(a=l._chunkSize,l._offset=0,l._buffer=new t(l._chunkSize)),0===d){if(s+=o-h,o=h,!c)return!0;var _=l._binding.write(n,e,s,o,l._buffer,l._offset,l._chunkSize);return _.callback=r,void(_.buffer=e)}if(!c)return!1;i()}}var o=e&&e.length,a=this._chunkSize-this._offset,s=0,l=this,c="function"==typeof i;if(!c){var h,u=[],p=0;this.on("error",function(t){h=t});do{var d=this._binding.writeSync(n,e,s,o,this._buffer,this._offset,a)}while(!this._hadError&&r(d[0],d[1]));if(this._hadError)throw h;var f=t.concat(u,p);return this.close(),f}var m=this._binding.write(n,e,s,o,this._buffer,this._offset,a);m.buffer=e,m.callback=r},_.inherits(a,d),_.inherits(s,d),_.inherits(l,d),_.inherits(c,d),_.inherits(h,d),_.inherits(u,d),_.inherits(p,d)}).call(e,n(6).Buffer,n(4))},function(t,e,n){t.exports=n(138).Transform},function(t,e,n){(e=t.exports=n(62)).Stream=e,e.Readable=e,e.Writable=n(65),e.Duplex=n(7),e.Transform=n(67),e.PassThrough=n(145)},function(t){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(){},function(t,e,n){"use strict";function i(t,e){if(!babelHelpers.instanceof(t,e))throw new TypeError("Cannot call a class as a function")}function r(t,e,n){t.copy(e,n)}var o=n(27).Buffer;t.exports=function(){function t(){i(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(t){var e={data:t,next:null};0<this.length?this.tail.next=e:this.head=e,this.tail=e,++this.length},t.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},t.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,n=""+e.data;e=e.next;){n+=t+e.data}return n},t.prototype.concat=function(t){if(0===this.length)return o.alloc(0);if(1===this.length)return this.head.data;for(var e=o.allocUnsafe(t>>>0),n=this.head,i=0;n;){r(n.data,e,i),i+=n.data.length,n=n.next}return e},t}()},function(t,e,n){function i(t,e){this._id=t,this._clearFn=e}var r=Function.prototype.apply;e.setTimeout=function(){return new i(r.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new i(r.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;0<=e&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n(143),e.setImmediate=setImmediate,e.clearImmediate=clearImmediate},function(t,e,n){(function(t,e){!function(t,n){"use strict";function i(t){delete l[t]}function r(t){var e=t.callback,i=t.args;switch(i.length){case 0:e();break;case 1:e(i[0]);break;case 2:e(i[0],i[1]);break;case 3:e(i[0],i[1],i[2]);break;default:e.apply(n,i);}}function o(t){if(c)setTimeout(o,0,t);else{var e=l[t];if(e){c=!0;try{r(e)}finally{i(t),c=!1}}}}if(!t.setImmediate){var a,s=1,l={},c=!1,h=t.document,u=Object.getPrototypeOf&&Object.getPrototypeOf(t);u=u&&u.setTimeout?u:t,"[object process]"==={}.toString.call(t.process)?a=function(t){e.nextTick(function(){o(t)})}:function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?function(){var e="setImmediate$"+Math.random()+"$",n=function(_n3){_n3.source===t&&"string"==typeof _n3.data&&0===_n3.data.indexOf(e)&&o(+_n3.data.slice(e.length))};t.addEventListener?t.addEventListener("message",n,!1):t.attachEvent("onmessage",n),a=function(n){t.postMessage(e+n,"*")}}():t.MessageChannel?function(){var t=new MessageChannel;t.port1.onmessage=function(t){o(t.data)},a=function(e){t.port2.postMessage(e)}}():h&&"onreadystatechange"in h.createElement("script")?function(){var t=h.documentElement;a=function(e){var n=h.createElement("script");n.onreadystatechange=function(){o(e),n.onreadystatechange=null,t.removeChild(n),n=null},t.appendChild(n)}}():a=function(t){setTimeout(o,0,t)},u.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=Array(arguments.length-1),n=0;n<e.length;n++){e[n]=arguments[n+1]}var i={callback:t,args:e};return l[s]=i,a(s),s++},u.clearImmediate=i}}("undefined"==typeof self?void 0===t?this:t:self)}).call(e,n(1),n(4))},function(t,e,n){(function(e){function n(t){try{if(!e.localStorage)return!1}catch(t){return!1}var n=e.localStorage[t];return null!=n&&"true"===(n+"").toLowerCase()}t.exports=function(t,e){if(n("noDeprecation"))return t;var i=!1;return function(){if(!i){if(n("throwDeprecation"))throw new Error(e);n("traceDeprecation")?console.trace(e):console.warn(e),i=!0}return t.apply(this,arguments)}}}).call(e,n(1))},function(t,e,n){"use strict";function i(t){if(!babelHelpers.instanceof(this,i))return new i(t);r.call(this,t)}t.exports=i;var r=n(67),o=n(13);o.inherits=n(14),o.inherits(i,r),i.prototype._transform=function(t,e,n){n(null,t)}},function(t,e,n){(function(t,i){function r(t){if(t<e.DEFLATE||t>e.UNZIP)throw new TypeError("Bad argument");this.mode=t,this.init_done=!1,this.write_in_progress=!1,this.pending_close=!1,this.windowBits=0,this.level=0,this.memLevel=0,this.strategy=0,this.dictionary=null}function o(t,e){for(var n=0;n<t.length;n++){this[e+n]=t[n]}}var a=n(68),s=n(147),l=n(148),c=n(150),h=n(153);for(var u in h){e[u]=h[u]}e.NONE=0,e.DEFLATE=1,e.INFLATE=2,e.GZIP=3,e.GUNZIP=4,e.DEFLATERAW=5,e.INFLATERAW=6,e.UNZIP=7,r.prototype.init=function(t,n,i,r){switch(this.windowBits=t,this.level=n,this.memLevel=i,this.strategy=r,this.mode!==e.GZIP&&this.mode!==e.GUNZIP||(this.windowBits+=16),this.mode===e.UNZIP&&(this.windowBits+=32),this.mode!==e.DEFLATERAW&&this.mode!==e.INFLATERAW||(this.windowBits=-this.windowBits),this.strm=new s,this.mode){case e.DEFLATE:case e.GZIP:case e.DEFLATERAW:a=l.deflateInit2(this.strm,this.level,e.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case e.INFLATE:case e.GUNZIP:case e.INFLATERAW:case e.UNZIP:var a=c.inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode);}a===e.Z_OK?(this.write_in_progress=!1,this.init_done=!0):this._error(a)},r.prototype.params=function(){throw new Error("deflateParams Not supported")},r.prototype._writeCheck=function(){if(!this.init_done)throw new Error("write before init");if(this.mode===e.NONE)throw new Error("already finalized");if(this.write_in_progress)throw new Error("write already in progress");if(this.pending_close)throw new Error("close is pending")},r.prototype.write=function(e,n,i,r,o,a,s){this._writeCheck(),this.write_in_progress=!0;var l=this;return t.nextTick(function(){l.write_in_progress=!1;var t=l._write(e,n,i,r,o,a,s);l.callback(t[0],t[1]),l.pending_close&&l.close()}),this},r.prototype.writeSync=function(t,e,n,i,r,o,a){return this._writeCheck(),this._write(t,e,n,i,r,o,a)},r.prototype._write=function(t,n,r,a,s,h,u){if(this.write_in_progress=!0,t!==e.Z_NO_FLUSH&&t!==e.Z_PARTIAL_FLUSH&&t!==e.Z_SYNC_FLUSH&&t!==e.Z_FULL_FLUSH&&t!==e.Z_FINISH&&t!==e.Z_BLOCK)throw new Error("Invalid flush value");null==n&&(n=new i(0),a=0,r=0),s._set?s.set=s._set:s.set=o;var p=this.strm;switch(p.avail_in=a,p.input=n,p.next_in=r,p.avail_out=u,p.output=s,p.next_out=h,this.mode){case e.DEFLATE:case e.GZIP:case e.DEFLATERAW:d=l.deflate(p,t);break;case e.UNZIP:case e.INFLATE:case e.GUNZIP:case e.INFLATERAW:var d=c.inflate(p,t);break;default:throw new Error("Unknown mode "+this.mode);}return d!==e.Z_STREAM_END&&d!==e.Z_OK&&this._error(d),this.write_in_progress=!1,[p.avail_in,p.avail_out]},r.prototype.close=function(){this.write_in_progress?this.pending_close=!0:(this.pending_close=!1,this.mode===e.DEFLATE||this.mode===e.GZIP||this.mode===e.DEFLATERAW?l.deflateEnd(this.strm):c.inflateEnd(this.strm),this.mode=e.NONE)},r.prototype.reset=function(){switch(this.mode){case e.DEFLATE:case e.DEFLATERAW:t=l.deflateReset(this.strm);break;case e.INFLATE:case e.INFLATERAW:var t=c.inflateReset(this.strm);}t!==e.Z_OK&&this._error(t)},r.prototype._error=function(t){this.onerror(a[t]+": "+this.strm.msg,t),this.write_in_progress=!1,this.pending_close&&this.close()},e.Zlib=r}).call(e,n(4),n(6).Buffer)},function(t){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},function(t,e,n){"use strict";function i(t,e){return t.msg=P[e],e}function r(t){return(t<<1)-(4<t?9:0)}function o(t){for(var e=t.length;0<=--e;){t[e]=0}}function a(t){var e=t.state,n=e.pending;n>t.avail_out&&(n=t.avail_out),0!==n&&(E.arraySet(t.output,e.pending_buf,e.pending_out,n,t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,0===e.pending&&(e.pending_out=0))}function s(t,e){M._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,a(t.strm)}function l(t,e){t.pending_buf[t.pending++]=e}function c(t,e){t.pending_buf[t.pending++]=255&e>>>8,t.pending_buf[t.pending++]=255&e}function h(t,e,n,i){var r=t.avail_in;return r>i&&(r=i),0===r?0:(t.avail_in-=r,E.arraySet(e,t.input,t.next_in,r,n),1===t.state.wrap?t.adler=T(t.adler,e,r,n):2===t.state.wrap&&(t.adler=A(t.adler,e,r,n)),t.next_in+=r,t.total_in+=r,r)}function u(t,e){var n,i,r=t.max_chain_length,o=t.strstart,a=t.prev_length,s=t.nice_match,l=t.strstart>t.w_size-it?t.strstart-(t.w_size-it):0,c=t.window,h=t.w_mask,u=t.prev,p=t.strstart+nt,d=c[o+a-1],f=c[o+a];t.prev_length>=t.good_match&&(r>>=2),s>t.lookahead&&(s=t.lookahead);do{if(n=e,c[n+a]===f&&c[n+a-1]===d&&c[n]===c[o]&&c[++n]===c[o+1]){o+=2,n++;do{}while(c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&o<p);if(i=nt-(p-o),o=p-nt,i>a){if(t.match_start=e,a=i,i>=s)break;d=c[o+a-1],f=c[o+a]}}}while((e=u[e&h])>l&&0!=--r);return a<=t.lookahead?a:t.lookahead}function p(t){var e,n,i,r,o,a=t.w_size;do{if(r=t.window_size-t.lookahead-t.strstart,t.strstart>=a+(a-it)){E.arraySet(t.window,t.window,a,a,0),t.match_start-=a,t.strstart-=a,t.block_start-=a,e=n=t.hash_size;do{i=t.head[--e],t.head[e]=i>=a?i-a:0}while(--n);e=n=a;do{i=t.prev[--e],t.prev[e]=i>=a?i-a:0}while(--n);r+=a}if(0===t.strm.avail_in)break;if(n=h(t.strm,t.window,t.strstart+t.lookahead,r),t.lookahead+=n,t.lookahead+t.insert>=et)for(o=t.strstart-t.insert,t.ins_h=t.window[o],t.ins_h=(t.ins_h<<t.hash_shift^t.window[o+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[o+et-1])&t.hash_mask,t.prev[o&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=o,o++,t.insert--,!(t.lookahead+t.insert<et));){}}while(t.lookahead<it&&0!==t.strm.avail_in)}function d(t,e){for(var n,i;;){if(t.lookahead<it){if(p(t),t.lookahead<it&&e===C)return pt;if(0===t.lookahead)break}if(n=0,t.lookahead>=et&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+et-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==n&&t.strstart-n<=t.w_size-it&&(t.match_length=u(t,n)),t.match_length>=et){if(i=M._tr_tally(t,t.strstart-t.match_start,t.match_length-et),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=et){t.match_length--;do{t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+et-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;}else i=M._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(i&&(s(t,!1),0===t.strm.avail_out))return pt}return t.insert=t.strstart<et-1?t.strstart:et-1,e===R?(s(t,!0),0===t.strm.avail_out?ft:mt):t.last_lit&&(s(t,!1),0===t.strm.avail_out)?pt:dt}function f(t,e){for(var n,i,r;;){if(t.lookahead<it){if(p(t),t.lookahead<it&&e===C)return pt;if(0===t.lookahead)break}if(n=0,t.lookahead>=et&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+et-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=et-1,0!==n&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-it&&(t.match_length=u(t,n),5>=t.match_length&&(t.strategy===z||t.match_length===et&&4096<t.strstart-t.match_start)&&(t.match_length=et-1)),t.prev_length>=et&&t.match_length<=t.prev_length){r=t.strstart+t.lookahead-et,i=M._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-et),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=r&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+et-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=et-1,t.strstart++,i&&(s(t,!1),0===t.strm.avail_out))return pt}else if(t.match_available){if((i=M._tr_tally(t,0,t.window[t.strstart-1]))&&s(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return pt}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(i=M._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<et-1?t.strstart:et-1,e===R?(s(t,!0),0===t.strm.avail_out?ft:mt):t.last_lit&&(s(t,!1),0===t.strm.avail_out)?pt:dt}function m(t,e){for(var n,i,r,o,a=t.window;;){if(t.lookahead<=nt){if(p(t),t.lookahead<=nt&&e===C)return pt;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=et&&0<t.strstart&&(r=t.strstart-1,(i=a[r])===a[++r]&&i===a[++r]&&i===a[++r])){o=t.strstart+nt;do{}while(i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&r<o);t.match_length=nt-(o-r),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=et?(n=M._tr_tally(t,1,t.match_length-et),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=M._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(s(t,!1),0===t.strm.avail_out))return pt}return t.insert=0,e===R?(s(t,!0),0===t.strm.avail_out?ft:mt):t.last_lit&&(s(t,!1),0===t.strm.avail_out)?pt:dt}function _(t,e){for(var n;;){if(0===t.lookahead&&(p(t),0===t.lookahead)){if(e===C)return pt;break}if(t.match_length=0,n=M._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(s(t,!1),0===t.strm.avail_out))return pt}return t.insert=0,e===R?(s(t,!0),0===t.strm.avail_out?ft:mt):t.last_lit&&(s(t,!1),0===t.strm.avail_out)?pt:dt}function g(t,e,n,i,r){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=i,this.func=r}function y(t){t.window_size=2*t.w_size,o(t.head),t.max_lazy_match=S[t.level].max_lazy,t.good_match=S[t.level].good_length,t.nice_match=S[t.level].nice_length,t.max_chain_length=S[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=et-1,t.match_available=0,t.ins_h=0}function v(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=q,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new E.Buf16(2*$),this.dyn_dtree=new E.Buf16(2*(2*K+1)),this.bl_tree=new E.Buf16(2*(2*Q+1)),o(this.dyn_ltree),o(this.dyn_dtree),o(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new E.Buf16(tt+1),this.heap=new E.Buf16(2*J+1),o(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new E.Buf16(2*J+1),o(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function b(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=W,e=t.state,e.pending=0,e.pending_out=0,0>e.wrap&&(e.wrap=-e.wrap),e.status=e.wrap?ot:ht,t.adler=2===e.wrap?0:1,e.last_flush=C,M._tr_init(e),k):i(t,F)}function w(t){var e=b(t);return e===k&&y(t.state),e}function x(t,e,n,r,o,a){if(!t)return F;var s=1;if(e===B&&(e=6),0>r?(s=0,r=-r):15<r&&(s=2,r-=16),1>o||o>X||n!==q||8>r||15<r||0>e||9<e||0>a||a>j)return i(t,F);8===r&&(r=9);var l=new v;return t.state=l,l.strm=t,l.wrap=s,l.gzhead=null,l.w_bits=r,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=o+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+et-1)/et),l.window=new E.Buf8(2*l.w_size),l.head=new E.Buf16(l.hash_size),l.prev=new E.Buf16(l.w_size),l.lit_bufsize=1<<o+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new E.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=e,l.strategy=a,l.method=n,w(t)}var S,E=n(17),M=n(149),T=n(69),A=n(70),P=n(68),C=0,R=4,O=5,k=0,D=1,F=-2,U=-5,B=-1,z=1,G=2,j=4,W=2,q=8,X=9,J=286,K=30,Q=19,$=2*J+1,tt=15,et=3,nt=258,it=nt+et+1,ot=42,at=69,st=73,lt=91,ct=103,ht=113,ut=666,pt=1,dt=2,ft=3,mt=4;S=[new g(0,0,0,0,function(t,e){var n=65535;for(n>t.pending_buf_size-5&&(n=t.pending_buf_size-5);;){if(1>=t.lookahead){if(p(t),0===t.lookahead&&e===C)return pt;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var i=t.block_start+n;if((0===t.strstart||t.strstart>=i)&&(t.lookahead=t.strstart-i,t.strstart=i,s(t,!1),0===t.strm.avail_out))return pt;if(t.strstart-t.block_start>=t.w_size-it&&(s(t,!1),0===t.strm.avail_out))return pt}return t.insert=0,e===R?(s(t,!0),0===t.strm.avail_out?ft:mt):(t.strstart>t.block_start&&(s(t,!1),t.strm.avail_out),pt)}),new g(4,4,8,4,d),new g(4,5,16,8,d),new g(4,6,32,32,d),new g(4,4,16,16,f),new g(8,16,32,32,f),new g(8,16,128,128,f),new g(8,32,128,256,f),new g(32,128,258,1024,f),new g(32,258,258,4096,f)],e.deflateInit=function(t,e){return x(t,e,q,15,8,0)},e.deflateInit2=x,e.deflateReset=w,e.deflateResetKeep=b,e.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?F:(t.state.gzhead=e,k):F},e.deflate=function(t,e){var n,s,h,u;if(!t||!t.state||e>O||0>e)return t?i(t,F):F;if(s=t.state,!t.output||!t.input&&0!==t.avail_in||s.status===ut&&e!==R)return i(t,0===t.avail_out?U:F);if(s.strm=t,n=s.last_flush,s.last_flush=e,s.status===ot)if(2===s.wrap)t.adler=0,l(s,31),l(s,139),l(s,8),s.gzhead?(l(s,(s.gzhead.text?1:0)+(s.gzhead.hcrc?2:0)+(s.gzhead.extra?4:0)+(s.gzhead.name?8:0)+(s.gzhead.comment?16:0)),l(s,255&s.gzhead.time),l(s,255&s.gzhead.time>>8),l(s,255&s.gzhead.time>>16),l(s,255&s.gzhead.time>>24),l(s,9===s.level?2:s.strategy>=G||2>s.level?4:0),l(s,255&s.gzhead.os),s.gzhead.extra&&s.gzhead.extra.length&&(l(s,255&s.gzhead.extra.length),l(s,255&s.gzhead.extra.length>>8)),s.gzhead.hcrc&&(t.adler=A(t.adler,s.pending_buf,s.pending,0)),s.gzindex=0,s.status=at):(l(s,0),l(s,0),l(s,0),l(s,0),l(s,0),l(s,9===s.level?2:s.strategy>=G||2>s.level?4:0),l(s,3),s.status=ht);else{var p=q+(s.w_bits-8<<4)<<8;p|=(s.strategy>=G||2>s.level?0:6>s.level?1:6===s.level?2:3)<<6,0!==s.strstart&&(p|=32),p+=31-p%31,s.status=ht,c(s,p),0!==s.strstart&&(c(s,t.adler>>>16),c(s,65535&t.adler)),t.adler=1}if(s.status===at)if(s.gzhead.extra){for(h=s.pending;s.gzindex<(65535&s.gzhead.extra.length)&&(s.pending!==s.pending_buf_size||(s.gzhead.hcrc&&s.pending>h&&(t.adler=A(t.adler,s.pending_buf,s.pending-h,h)),a(t),h=s.pending,s.pending!==s.pending_buf_size));){l(s,255&s.gzhead.extra[s.gzindex]),s.gzindex++}s.gzhead.hcrc&&s.pending>h&&(t.adler=A(t.adler,s.pending_buf,s.pending-h,h)),s.gzindex===s.gzhead.extra.length&&(s.gzindex=0,s.status=st)}else s.status=st;if(s.status===st)if(s.gzhead.name){h=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>h&&(t.adler=A(t.adler,s.pending_buf,s.pending-h,h)),a(t),h=s.pending,s.pending===s.pending_buf_size)){u=1;break}u=s.gzindex<s.gzhead.name.length?255&s.gzhead.name.charCodeAt(s.gzindex++):0,l(s,u)}while(0!==u);s.gzhead.hcrc&&s.pending>h&&(t.adler=A(t.adler,s.pending_buf,s.pending-h,h)),0===u&&(s.gzindex=0,s.status=lt)}else s.status=lt;if(s.status===lt)if(s.gzhead.comment){h=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>h&&(t.adler=A(t.adler,s.pending_buf,s.pending-h,h)),a(t),h=s.pending,s.pending===s.pending_buf_size)){u=1;break}u=s.gzindex<s.gzhead.comment.length?255&s.gzhead.comment.charCodeAt(s.gzindex++):0,l(s,u)}while(0!==u);s.gzhead.hcrc&&s.pending>h&&(t.adler=A(t.adler,s.pending_buf,s.pending-h,h)),0===u&&(s.status=ct)}else s.status=ct;if(s.status===ct&&(s.gzhead.hcrc?(s.pending+2>s.pending_buf_size&&a(t),s.pending+2<=s.pending_buf_size&&(l(s,255&t.adler),l(s,255&t.adler>>8),t.adler=0,s.status=ht)):s.status=ht),0!==s.pending){if(a(t),0===t.avail_out)return s.last_flush=-1,k}else if(0===t.avail_in&&r(e)<=r(n)&&e!==R)return i(t,U);if(s.status===ut&&0!==t.avail_in)return i(t,U);if(0!==t.avail_in||0!==s.lookahead||e!==C&&s.status!==ut){var d=s.strategy===G?_(s,e):s.strategy===3?m(s,e):S[s.level].func(s,e);if(d!==ft&&d!==mt||(s.status=ut),d===pt||d===ft)return 0===t.avail_out&&(s.last_flush=-1),k;if(d===dt&&(e===1?M._tr_align(s):e!==O&&(M._tr_stored_block(s,0,0,!1),e===3&&(o(s.head),0===s.lookahead&&(s.strstart=0,s.block_start=0,s.insert=0))),a(t),0===t.avail_out))return s.last_flush=-1,k}return e!==R?k:0>=s.wrap?D:(2===s.wrap?(l(s,255&t.adler),l(s,255&t.adler>>8),l(s,255&t.adler>>16),l(s,255&t.adler>>24),l(s,255&t.total_in),l(s,255&t.total_in>>8),l(s,255&t.total_in>>16),l(s,255&t.total_in>>24)):(c(s,t.adler>>>16),c(s,65535&t.adler)),a(t),0<s.wrap&&(s.wrap=-s.wrap),0!==s.pending?k:D)},e.deflateEnd=function(t){var e;return t&&t.state?(e=t.state.status)!==ot&&e!==at&&e!==st&&e!==lt&&e!==ct&&e!==ht&&e!==ut?i(t,F):(t.state=null,e===ht?i(t,-3):k):F},e.deflateSetDictionary=function(t,e){var n,i,r,a,s,l,c,h,u=e.length;if(!t||!t.state)return F;if(n=t.state,2===(a=n.wrap)||1===a&&n.status!==ot||n.lookahead)return F;for(1===a&&(t.adler=T(t.adler,e,u,0)),n.wrap=0,u>=n.w_size&&(0===a&&(o(n.head),n.strstart=0,n.block_start=0,n.insert=0),h=new E.Buf8(n.w_size),E.arraySet(h,e,u-n.w_size,n.w_size,0),e=h,u=n.w_size),s=t.avail_in,l=t.next_in,c=t.input,t.avail_in=u,t.next_in=0,t.input=e,p(n);n.lookahead>=et;){i=n.strstart,r=n.lookahead-(et-1);do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[i+et-1])&n.hash_mask,n.prev[i&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=i,i++}while(--r);n.strstart=i,n.lookahead=et-1,p(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=et-1,n.match_available=0,t.next_in=l,t.input=c,t.avail_in=s,n.wrap=a,k},e.deflateInfo="pako deflate (from Nodeca project)"},function(t,e,n){"use strict";function i(t){for(var e=t.length;0<=--e;){t[e]=0}}function r(t,e,n,i,r){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=i,this.max_length=r,this.has_stree=t&&t.length}function o(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function a(t){return 256>t?et[t]:et[256+(t>>>7)]}function s(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=255&e>>>8}function l(t,e,n){t.bi_valid>j-n?(t.bi_buf|=65535&e<<t.bi_valid,s(t,t.bi_buf),t.bi_buf=e>>j-t.bi_valid,t.bi_valid+=n-j):(t.bi_buf|=65535&e<<t.bi_valid,t.bi_valid+=n)}function c(t,e,n){l(t,n[2*e],n[2*e+1])}function h(t,e){var n=0;do{n|=1&t,t>>>=1,n<<=1}while(0<--e);return n>>>1}function u(t){16===t.bi_valid?(s(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):8<=t.bi_valid&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}function p(t,e){var n,i,r,o,a,s,l=e.dyn_tree,c=e.max_code,h=e.stat_desc.static_tree,u=e.stat_desc.has_stree,p=e.stat_desc.extra_bits,d=e.stat_desc.extra_base,f=e.stat_desc.max_length,m=0;for(o=0;o<=H;o++){t.bl_count[o]=0}for(l[2*t.heap[t.heap_max]+1]=0,n=t.heap_max+1;n<G;n++){(o=l[2*l[2*(i=t.heap[n])+1]+1]+1)>f&&(o=f,m++),l[2*i+1]=o,i>c||(t.bl_count[o]++,a=0,i>=d&&(a=p[i-d]),s=l[2*i],t.opt_len+=s*(o+a),u&&(t.static_len+=s*(h[2*i+1]+a)))}if(0!==m){do{for(o=f-1;0===t.bl_count[o];){o--}t.bl_count[o]--,t.bl_count[o+1]+=2,t.bl_count[f]--,m-=2}while(0<m);for(o=f;0!==o;o--){for(i=t.bl_count[o];0!==i;){(r=t.heap[--n])>c||(l[2*r+1]!==o&&(t.opt_len+=(o-l[2*r+1])*l[2*r],l[2*r+1]=o),i--)}}}}function d(t,e,n){var i,r,o=Array(H+1),a=0;for(i=1;i<=H;i++){o[i]=a=a+n[i-1]<<1}for(r=0;r<=e;r++){var s=t[2*r+1];0!==s&&(t[2*r]=h(o[s]++,s))}}function f(){var t,e,n,i,o,a=Array(H+1);for(n=0,i=0;i<F-1;i++){for(it[i]=n,t=0;t<1<<Z[i];t++){nt[n++]=i}}for(nt[n-1]=i,o=0,i=0;16>i;i++){for(rt[i]=o,t=0;t<1<<J[i];t++){et[o++]=i}}for(o>>=7;i<B;i++){for(rt[i]=o<<7,t=0;t<1<<J[i]-7;t++){et[256+o++]=i}}for(e=0;e<=H;e++){a[e]=0}for(t=0;143>=t;){$[2*t+1]=8,t++,a[8]++}for(;255>=t;){$[2*t+1]=9,t++,a[9]++}for(;279>=t;){$[2*t+1]=7,t++,a[7]++}for(;287>=t;){$[2*t+1]=8,t++,a[8]++}for(d($,U+1,a),t=0;t<B;t++){tt[2*t+1]=5,tt[2*t]=h(t,5)}ot=new r($,Z,N+1,U,H),at=new r(tt,J,0,B,H),st=new r([],K,0,z,V)}function m(t){var e;for(e=0;e<U;e++){t.dyn_ltree[2*e]=0}for(e=0;e<B;e++){t.dyn_dtree[2*e]=0}for(e=0;e<z;e++){t.bl_tree[2*e]=0}t.dyn_ltree[2*W]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function _(t){8<t.bi_valid?s(t,t.bi_buf):0<t.bi_valid&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function g(t,e,n,i){_(t),i&&(s(t,n),s(t,~n)),P.arraySet(t.pending_buf,t.window,e,n,t.pending),t.pending+=n}function y(t,e,n,i){var r=2*e,o=2*n;return t[r]<t[o]||t[r]===t[o]&&i[e]<=i[n]}function v(t,e,n){for(var i=t.heap[n],r=n<<1;r<=t.heap_len&&(r<t.heap_len&&y(e,t.heap[r+1],t.heap[r],t.depth)&&r++,!y(e,i,t.heap[r],t.depth));){t.heap[n]=t.heap[r],n=r,r<<=1}t.heap[n]=i}function b(t,e,n){var i,r,o,s,h=0;if(0!==t.last_lit)do{i=t.pending_buf[t.d_buf+2*h]<<8|t.pending_buf[t.d_buf+2*h+1],r=t.pending_buf[t.l_buf+h],h++,0===i?c(t,r,e):(c(t,(o=nt[r])+N+1,e),0!==(s=Z[o])&&l(t,r-=it[o],s),c(t,o=a(--i),n),0!==(s=J[o])&&l(t,i-=rt[o],s))}while(h<t.last_lit);c(t,W,e)}function w(t,e){var n,i,r,o=e.dyn_tree,a=e.stat_desc.static_tree,s=e.stat_desc.has_stree,l=e.stat_desc.elems,c=-1;for(t.heap_len=0,t.heap_max=G,n=0;n<l;n++){0!==o[2*n]?(t.heap[++t.heap_len]=c=n,t.depth[n]=0):o[2*n+1]=0}for(;2>t.heap_len;){o[2*(r=t.heap[++t.heap_len]=2>c?++c:0)]=1,t.depth[r]=0,t.opt_len--,s&&(t.static_len-=a[2*r+1])}for(e.max_code=c,n=t.heap_len>>1;1<=n;n--){v(t,o,n)}r=l;do{n=t.heap[1],t.heap[1]=t.heap[t.heap_len--],v(t,o,1),i=t.heap[1],t.heap[--t.heap_max]=n,t.heap[--t.heap_max]=i,o[2*r]=o[2*n]+o[2*i],t.depth[r]=(t.depth[n]>=t.depth[i]?t.depth[n]:t.depth[i])+1,o[2*n+1]=o[2*i+1]=r,t.heap[1]=r++,v(t,o,1)}while(2<=t.heap_len);t.heap[--t.heap_max]=t.heap[1],p(t,e),d(o,c,t.bl_count)}function x(t,e,n){var i,r,o=-1,a=e[1],s=0,l=7,c=4;for(0===a&&(l=138,c=3),e[2*(n+1)+1]=65535,i=0;i<=n;i++){r=a,a=e[2*(i+1)+1],++s<l&&r===a||(s<c?t.bl_tree[2*r]+=s:0!==r?(r!==o&&t.bl_tree[2*r]++,t.bl_tree[2*q]++):10>=s?t.bl_tree[2*X]++:t.bl_tree[2*Y]++,s=0,o=r,0===a?(l=138,c=3):r===a?(l=6,c=3):(l=7,c=4))}}function S(t,e,n){var i,r,o=-1,a=e[1],s=0,h=7,u=4;for(0===a&&(h=138,u=3),i=0;i<=n;i++){if(r=a,a=e[2*(i+1)+1],!(++s<h&&r===a)){if(s<u)do{c(t,r,t.bl_tree)}while(0!=--s);else 0!==r?(r!==o&&(c(t,r,t.bl_tree),s--),c(t,q,t.bl_tree),l(t,s-3,2)):10>=s?(c(t,X,t.bl_tree),l(t,s-3,3)):(c(t,Y,t.bl_tree),l(t,s-11,7));s=0,o=r,0===a?(h=138,u=3):r===a?(h=6,u=3):(h=7,u=4)}}}function E(t){var e;for(x(t,t.dyn_ltree,t.l_desc.max_code),x(t,t.dyn_dtree,t.d_desc.max_code),w(t,t.bl_desc),e=z-1;3<=e&&0===t.bl_tree[2*Q[e]+1];e--){}return t.opt_len+=3*(e+1)+5+5+4,e}function M(t,e,n,i){var r;for(l(t,e-257,5),l(t,n-1,5),l(t,i-4,4),r=0;r<i;r++){l(t,t.bl_tree[2*Q[r]+1],3)}S(t,t.dyn_ltree,e-1),S(t,t.dyn_dtree,n-1)}function T(t){var e,n=4093624447;for(e=0;31>=e;e++,n>>>=1){if(1&n&&0!==t.dyn_ltree[2*e])return I}if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return L;for(e=32;e<N;e++){if(0!==t.dyn_ltree[2*e])return L}return I}function A(t,e,n,i){l(t,(O<<1)+(i?1:0),3),g(t,e,n,!0)}var P=n(17),I=0,L=1,O=0,k=1,F=29,N=256,U=N+1+F,B=30,z=19,G=2*U+1,H=15,j=16,V=7,W=256,q=16,X=17,Y=18,Z=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],J=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],K=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Q=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],$=Array(2*(U+2));i($);var tt=Array(2*B);i(tt);var et=Array(512);i(et);var nt=Array(256);i(nt);var it=Array(F);i(it);var rt=Array(B);i(rt);var ot,at,st,lt=!1;e._tr_init=function(t){lt||(f(),lt=!0),t.l_desc=new o(t.dyn_ltree,ot),t.d_desc=new o(t.dyn_dtree,at),t.bl_desc=new o(t.bl_tree,st),t.bi_buf=0,t.bi_valid=0,m(t)},e._tr_stored_block=A,e._tr_flush_block=function(t,e,n,i){var r,o,a=0;0<t.level?(t.strm.data_type===2&&(t.strm.data_type=T(t)),w(t,t.l_desc),w(t,t.d_desc),a=E(t),r=t.opt_len+3+7>>>3,(o=t.static_len+3+7>>>3)<=r&&(r=o)):r=o=n+5,n+4<=r&&-1!==e?A(t,e,n,i):t.strategy===4||o===r?(l(t,(k<<1)+(i?1:0),3),b(t,$,tt)):(l(t,(2<<1)+(i?1:0),3),M(t,t.l_desc.max_code+1,t.d_desc.max_code+1,a+1),b(t,t.dyn_ltree,t.dyn_dtree)),m(t),i&&_(t)},e._tr_tally=function(t,e,n){return t.pending_buf[t.d_buf+2*t.last_lit]=255&e>>>8,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&n,t.last_lit++,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(nt[n]+N+1)]++,t.dyn_dtree[2*a(e)]++),t.last_lit===t.lit_bufsize-1},e._tr_align=function(t){l(t,k<<1,3),c(t,W,$),u(t)}},function(t,e,n){"use strict";function i(t){return(255&t>>>24)+(65280&t>>>8)+((65280&t)<<8)+((255&t)<<24)}function r(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new d.Buf16(320),this.work=new d.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function o(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=R,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new d.Buf32(ht),e.distcode=e.distdyn=new d.Buf32(ut),e.sane=1,e.back=-1,E):A}function a(t){var e;return t&&t.state?(e=t.state,e.wsize=0,e.whave=0,e.wnext=0,o(t)):A}function s(t,e){var n,i;return t&&t.state?(i=t.state,0>e?(n=0,e=-e):(n=1+(e>>4),48>e&&(e&=15)),e&&(8>e||15<e)?A:(null!==i.window&&i.wbits!==e&&(i.window=null),i.wrap=n,i.wbits=e,a(t))):A}function l(t,e){var n,i;return t?(i=new r,t.state=i,i.window=null,(n=s(t,e))!==E&&(t.state=null),n):A}function c(t){if(dt){var e;for(u=new d.Buf32(512),p=new d.Buf32(32),e=0;144>e;){t.lens[e++]=8}for(;256>e;){t.lens[e++]=9}for(;280>e;){t.lens[e++]=7}for(;288>e;){t.lens[e++]=8}for(g(v,t.lens,0,288,u,0,t.work,{bits:9}),e=0;32>e;){t.lens[e++]=5}g(b,t.lens,0,32,p,0,t.work,{bits:5}),dt=!1}t.lencode=u,t.lenbits=9,t.distcode=p,t.distbits=5}function h(t,e,n,i){var r,o=t.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new d.Buf8(o.wsize)),i>=o.wsize?(d.arraySet(o.window,e,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):((r=o.wsize-o.wnext)>i&&(r=i),d.arraySet(o.window,e,n-i,r,o.wnext),(i-=r)?(d.arraySet(o.window,e,n-i,i,0),o.wnext=i,o.whave=o.wsize):(o.wnext+=r,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=r))),0}var u,p,d=n(17),f=n(69),m=n(70),_=n(151),g=n(152),v=1,b=2,w=4,S=6,E=0,A=-2,P=-3,C=-4,L=8,R=1,O=2,k=3,D=4,F=5,N=6,U=7,B=8,z=9,G=10,H=11,j=12,V=13,W=14,q=15,X=16,Y=17,Z=18,J=19,K=20,Q=21,$=22,tt=23,et=24,nt=25,it=26,rt=27,ot=28,at=29,st=30,lt=31,ht=852,ut=592,dt=!0;e.inflateReset=a,e.inflateReset2=s,e.inflateResetKeep=o,e.inflateInit=function(t){return l(t,15)},e.inflateInit2=l,e.inflate=function(t,e){var n,r,o,a,s,l,u,p,ht,ut,pt,dt,ft,mt,_t,gt,yt,vt,bt,wt,xt,St,Et,Mt,Tt=0,At=new d.Buf8(4),Pt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return A;(n=t.state).mode===j&&(n.mode=V),s=t.next_out,o=t.output,u=t.avail_out,a=t.next_in,r=t.input,l=t.avail_in,p=n.hold,ht=n.bits,ut=l,pt=u,St=E;t:for(;;){switch(n.mode){case R:if(0===n.wrap){n.mode=V;break}for(;16>ht;){if(0===l)break t;l--,p+=r[a++]<<ht,ht+=8}if(2&n.wrap&&35615===p){n.check=0,At[0]=255&p,At[1]=255&p>>>8,n.check=m(n.check,At,2,0),p=0,ht=0,n.mode=O;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&p)<<8)+(p>>8))%31){t.msg="incorrect header check",n.mode=st;break}if((15&p)!==L){t.msg="unknown compression method",n.mode=st;break}if(p>>>=4,ht-=4,xt=8+(15&p),0===n.wbits)n.wbits=xt;else if(xt>n.wbits){t.msg="invalid window size",n.mode=st;break}n.dmax=1<<xt,t.adler=n.check=1,n.mode=512&p?G:j,p=0,ht=0;break;case O:for(;16>ht;){if(0===l)break t;l--,p+=r[a++]<<ht,ht+=8}if(n.flags=p,(255&n.flags)!==L){t.msg="unknown compression method",n.mode=st;break}if(57344&n.flags){t.msg="unknown header flags set",n.mode=st;break}n.head&&(n.head.text=1&p>>8),512&n.flags&&(At[0]=255&p,At[1]=255&p>>>8,n.check=m(n.check,At,2,0)),p=0,ht=0,n.mode=k;case k:for(;32>ht;){if(0===l)break t;l--,p+=r[a++]<<ht,ht+=8}n.head&&(n.head.time=p),512&n.flags&&(At[0]=255&p,At[1]=255&p>>>8,At[2]=255&p>>>16,At[3]=255&p>>>24,n.check=m(n.check,At,4,0)),p=0,ht=0,n.mode=D;case D:for(;16>ht;){if(0===l)break t;l--,p+=r[a++]<<ht,ht+=8}n.head&&(n.head.xflags=255&p,n.head.os=p>>8),512&n.flags&&(At[0]=255&p,At[1]=255&p>>>8,n.check=m(n.check,At,2,0)),p=0,ht=0,n.mode=F;case F:if(1024&n.flags){for(;16>ht;){if(0===l)break t;l--,p+=r[a++]<<ht,ht+=8}n.length=p,n.head&&(n.head.extra_len=p),512&n.flags&&(At[0]=255&p,At[1]=255&p>>>8,n.check=m(n.check,At,2,0)),p=0,ht=0}else n.head&&(n.head.extra=null);n.mode=N;case N:if(1024&n.flags&&((dt=n.length)>l&&(dt=l),dt&&(n.head&&(xt=n.head.extra_len-n.length,n.head.extra||(n.head.extra=Array(n.head.extra_len)),d.arraySet(n.head.extra,r,a,dt,xt)),512&n.flags&&(n.check=m(n.check,r,dt,a)),l-=dt,a+=dt,n.length-=dt),n.length))break t;n.length=0,n.mode=U;case U:if(2048&n.flags){if(0===l)break t;dt=0;do{xt=r[a+dt++],n.head&&xt&&65536>n.length&&(n.head.name+=_StringfromCharCode(xt))}while(xt&&dt<l);if(512&n.flags&&(n.check=m(n.check,r,dt,a)),l-=dt,a+=dt,xt)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=B;case B:if(4096&n.flags){if(0===l)break t;dt=0;do{xt=r[a+dt++],n.head&&xt&&65536>n.length&&(n.head.comment+=_StringfromCharCode(xt))}while(xt&&dt<l);if(512&n.flags&&(n.check=m(n.check,r,dt,a)),l-=dt,a+=dt,xt)break t}else n.head&&(n.head.comment=null);n.mode=z;case z:if(512&n.flags){for(;16>ht;){if(0===l)break t;l--,p+=r[a++]<<ht,ht+=8}if(p!==(65535&n.check)){t.msg="header crc mismatch",n.mode=st;break}p=0,ht=0}n.head&&(n.head.hcrc=1&n.flags>>9,n.head.done=!0),t.adler=n.check=0,n.mode=j;break;case G:for(;32>ht;){if(0===l)break t;l--,p+=r[a++]<<ht,ht+=8}t.adler=n.check=i(p),p=0,ht=0,n.mode=H;case H:if(0===n.havedict)return t.next_out=s,t.avail_out=u,t.next_in=a,t.avail_in=l,n.hold=p,n.bits=ht,2;t.adler=n.check=1,n.mode=j;case j:if(e===5||e===S)break t;case V:if(n.last){p>>>=7&ht,ht-=7&ht,n.mode=rt;break}for(;3>ht;){if(0===l)break t;l--,p+=r[a++]<<ht,ht+=8}switch(n.last=1&p,p>>>=1,ht-=1,3&p){case 0:n.mode=W;break;case 1:if(c(n),n.mode=K,e===S){p>>>=2,ht-=2;break t}break;case 2:n.mode=Y;break;case 3:t.msg="invalid block type",n.mode=st;}p>>>=2,ht-=2;break;case W:for(p>>>=7&ht,ht-=7&ht;32>ht;){if(0===l)break t;l--,p+=r[a++]<<ht,ht+=8}if((65535&p)!=(65535^p>>>16)){t.msg="invalid stored block lengths",n.mode=st;break}if(n.length=65535&p,p=0,ht=0,n.mode=q,e===S)break t;case q:n.mode=X;case X:if(dt=n.length){if(dt>l&&(dt=l),dt>u&&(dt=u),0===dt)break t;d.arraySet(o,r,a,dt,s),l-=dt,a+=dt,u-=dt,s+=dt,n.length-=dt;break}n.mode=j;break;case Y:for(;14>ht;){if(0===l)break t;l--,p+=r[a++]<<ht,ht+=8}if(n.nlen=257+(31&p),p>>>=5,ht-=5,n.ndist=1+(31&p),p>>>=5,ht-=5,n.ncode=4+(15&p),p>>>=4,ht-=4,286<n.nlen||30<n.ndist){t.msg="too many length or distance symbols",n.mode=st;break}n.have=0,n.mode=Z;case Z:for(;n.have<n.ncode;){for(;3>ht;){if(0===l)break t;l--,p+=r[a++]<<ht,ht+=8}n.lens[Pt[n.have++]]=7&p,p>>>=3,ht-=3}for(;19>n.have;){n.lens[Pt[n.have++]]=0}if(n.lencode=n.lendyn,n.lenbits=7,Et={bits:n.lenbits},St=g(0,n.lens,0,19,n.lencode,0,n.work,Et),n.lenbits=Et.bits,St){t.msg="invalid code lengths set",n.mode=st;break}n.have=0,n.mode=J;case J:for(;n.have<n.nlen+n.ndist;){for(;Tt=n.lencode[p&(1<<n.lenbits)-1],_t=Tt>>>24,gt=255&Tt>>>16,yt=65535&Tt,!(_t<=ht);){if(0===l)break t;l--,p+=r[a++]<<ht,ht+=8}if(16>yt)p>>>=_t,ht-=_t,n.lens[n.have++]=yt;else{if(16===yt){for(Mt=_t+2;ht<Mt;){if(0===l)break t;l--,p+=r[a++]<<ht,ht+=8}if(p>>>=_t,ht-=_t,0===n.have){t.msg="invalid bit length repeat",n.mode=st;break}xt=n.lens[n.have-1],dt=3+(3&p),p>>>=2,ht-=2}else if(17===yt){for(Mt=_t+3;ht<Mt;){if(0===l)break t;l--,p+=r[a++]<<ht,ht+=8}ht-=_t,xt=0,dt=3+(7&(p>>>=_t)),p>>>=3,ht-=3}else{for(Mt=_t+7;ht<Mt;){if(0===l)break t;l--,p+=r[a++]<<ht,ht+=8}ht-=_t,xt=0,dt=11+(127&(p>>>=_t)),p>>>=7,ht-=7}if(n.have+dt>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=st;break}for(;dt--;){n.lens[n.have++]=xt}}}if(n.mode===st)break;if(0===n.lens[256]){t.msg="invalid code -- missing end-of-block",n.mode=st;break}if(n.lenbits=9,Et={bits:n.lenbits},St=g(v,n.lens,0,n.nlen,n.lencode,0,n.work,Et),n.lenbits=Et.bits,St){t.msg="invalid literal/lengths set",n.mode=st;break}if(n.distbits=6,n.distcode=n.distdyn,Et={bits:n.distbits},St=g(b,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,Et),n.distbits=Et.bits,St){t.msg="invalid distances set",n.mode=st;break}if(n.mode=K,e===S)break t;case K:n.mode=Q;case Q:if(6<=l&&258<=u){t.next_out=s,t.avail_out=u,t.next_in=a,t.avail_in=l,n.hold=p,n.bits=ht,_(t,pt),s=t.next_out,o=t.output,u=t.avail_out,a=t.next_in,r=t.input,l=t.avail_in,p=n.hold,ht=n.bits,n.mode===j&&(n.back=-1);break}for(n.back=0;Tt=n.lencode[p&(1<<n.lenbits)-1],_t=Tt>>>24,gt=255&Tt>>>16,yt=65535&Tt,!(_t<=ht);){if(0===l)break t;l--,p+=r[a++]<<ht,ht+=8}if(gt&&0==(240&gt)){for(vt=_t,bt=gt,wt=yt;Tt=n.lencode[wt+((p&(1<<vt+bt)-1)>>vt)],_t=Tt>>>24,gt=255&Tt>>>16,yt=65535&Tt,!(vt+_t<=ht);){if(0===l)break t;l--,p+=r[a++]<<ht,ht+=8}p>>>=vt,ht-=vt,n.back+=vt}if(p>>>=_t,ht-=_t,n.back+=_t,n.length=yt,0===gt){n.mode=it;break}if(32&gt){n.back=-1,n.mode=j;break}if(64&gt){t.msg="invalid literal/length code",n.mode=st;break}n.extra=15&gt,n.mode=$;case $:if(n.extra){for(Mt=n.extra;ht<Mt;){if(0===l)break t;l--,p+=r[a++]<<ht,ht+=8}n.length+=p&(1<<n.extra)-1,p>>>=n.extra,ht-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=tt;case tt:for(;Tt=n.distcode[p&(1<<n.distbits)-1],_t=Tt>>>24,gt=255&Tt>>>16,yt=65535&Tt,!(_t<=ht);){if(0===l)break t;l--,p+=r[a++]<<ht,ht+=8}if(0==(240&gt)){for(vt=_t,bt=gt,wt=yt;Tt=n.distcode[wt+((p&(1<<vt+bt)-1)>>vt)],_t=Tt>>>24,gt=255&Tt>>>16,yt=65535&Tt,!(vt+_t<=ht);){if(0===l)break t;l--,p+=r[a++]<<ht,ht+=8}p>>>=vt,ht-=vt,n.back+=vt}if(p>>>=_t,ht-=_t,n.back+=_t,64&gt){t.msg="invalid distance code",n.mode=st;break}n.offset=yt,n.extra=15&gt,n.mode=et;case et:if(n.extra){for(Mt=n.extra;ht<Mt;){if(0===l)break t;l--,p+=r[a++]<<ht,ht+=8}n.offset+=p&(1<<n.extra)-1,p>>>=n.extra,ht-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=st;break}n.mode=nt;case nt:if(0===u)break t;if(dt=pt-u,n.offset>dt){if((dt=n.offset-dt)>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=st;break}dt>n.wnext?(dt-=n.wnext,ft=n.wsize-dt):ft=n.wnext-dt,dt>n.length&&(dt=n.length),mt=n.window}else mt=o,ft=s-n.offset,dt=n.length;dt>u&&(dt=u),u-=dt,n.length-=dt;do{o[s++]=mt[ft++]}while(--dt);0===n.length&&(n.mode=Q);break;case it:if(0===u)break t;o[s++]=n.length,u--,n.mode=Q;break;case rt:if(n.wrap){for(;32>ht;){if(0===l)break t;l--,p|=r[a++]<<ht,ht+=8}if(pt-=u,t.total_out+=pt,n.total+=pt,pt&&(t.adler=n.check=n.flags?m(n.check,o,pt,s-pt):f(n.check,o,pt,s-pt)),pt=u,(n.flags?p:i(p))!==n.check){t.msg="incorrect data check",n.mode=st;break}p=0,ht=0}n.mode=ot;case ot:if(n.wrap&&n.flags){for(;32>ht;){if(0===l)break t;l--,p+=r[a++]<<ht,ht+=8}if(p!==(4294967295&n.total)){t.msg="incorrect length check",n.mode=st;break}p=0,ht=0}n.mode=at;case at:St=1;break t;case st:St=P;break t;case lt:return C;case 32:default:return A;}}return t.next_out=s,t.avail_out=u,t.next_in=a,t.avail_in=l,n.hold=p,n.bits=ht,(n.wsize||pt!==t.avail_out&&n.mode<st&&(n.mode<rt||e!==w))&&h(t,t.output,t.next_out,pt-t.avail_out)?(n.mode=lt,C):(ut-=t.avail_in,pt-=t.avail_out,t.total_in+=ut,t.total_out+=pt,n.total+=pt,n.wrap&&pt&&(t.adler=n.check=n.flags?m(n.check,o,pt,t.next_out-pt):f(n.check,o,pt,t.next_out-pt)),t.data_type=n.bits+(n.last?64:0)+(n.mode===j?128:0)+(n.mode===K||n.mode===q?256:0),(0===ut&&0===pt||e===w)&&St===E&&(St=-5),St)},e.inflateEnd=function(t){if(!t||!t.state)return A;var e=t.state;return e.window&&(e.window=null),t.state=null,E},e.inflateGetHeader=function(t,e){var n;return t&&t.state?0==(2&(n=t.state).wrap)?A:(n.head=e,e.done=!1,E):A},e.inflateSetDictionary=function(t,e){var n,i,r=e.length;return t&&t.state?0!==(n=t.state).wrap&&n.mode!==H?A:n.mode===H&&(i=1,(i=f(i,e,r,0))!==n.check)?P:h(t,e,r,r)?(n.mode=lt,C):(n.havedict=1,E):A},e.inflateInfo="pako inflate (from Nodeca project)"},function(t){"use strict";t.exports=function(t,e){var n,i,r,o,a,s,l,c,h,u,p,d,f,m,_,g,y,v,b,w,x,S,E,M,T;n=t.state,i=t.next_in,M=t.input,r=i+(t.avail_in-5),o=t.next_out,T=t.output,a=o-(e-t.avail_out),s=o+(t.avail_out-257),l=n.dmax,c=n.wsize,h=n.whave,u=n.wnext,p=n.window,d=n.hold,f=n.bits,m=n.lencode,_=n.distcode,g=(1<<n.lenbits)-1,y=(1<<n.distbits)-1;t:do{15>f&&(d+=M[i++]<<f,f+=8,d+=M[i++]<<f,f+=8),v=m[d&g];e:for(;;){if(b=v>>>24,d>>>=b,f-=b,0===(b=255&v>>>16))T[o++]=65535&v;else{if(!(16&b)){if(0==(64&b)){v=m[(65535&v)+(d&(1<<b)-1)];continue e}if(32&b){n.mode=12;break t}t.msg="invalid literal/length code",n.mode=30;break t}w=65535&v,(b&=15)&&(f<b&&(d+=M[i++]<<f,f+=8),w+=d&(1<<b)-1,d>>>=b,f-=b),15>f&&(d+=M[i++]<<f,f+=8,d+=M[i++]<<f,f+=8),v=_[d&y];n:for(;;){if(b=v>>>24,d>>>=b,f-=b,!(16&(b=255&v>>>16))){if(0==(64&b)){v=_[(65535&v)+(d&(1<<b)-1)];continue n}t.msg="invalid distance code",n.mode=30;break t}if(x=65535&v,b&=15,f<b&&(d+=M[i++]<<f,(f+=8)<b&&(d+=M[i++]<<f,f+=8)),(x+=d&(1<<b)-1)>l){t.msg="invalid distance too far back",n.mode=30;break t}if(d>>>=b,f-=b,b=o-a,x>b){if((b=x-b)>h&&n.sane){t.msg="invalid distance too far back",n.mode=30;break t}if(S=0,E=p,0===u){if(S+=c-b,b<w){w-=b;do{T[o++]=p[S++]}while(--b);S=o-x,E=T}}else if(u<b){if(S+=c+u-b,(b-=u)<w){w-=b;do{T[o++]=p[S++]}while(--b);if(S=0,u<w){w-=b=u;do{T[o++]=p[S++]}while(--b);S=o-x,E=T}}}else if(S+=u-b,b<w){w-=b;do{T[o++]=p[S++]}while(--b);S=o-x,E=T}for(;2<w;){T[o++]=E[S++],T[o++]=E[S++],T[o++]=E[S++],w-=3}w&&(T[o++]=E[S++],1<w&&(T[o++]=E[S++]))}else{S=o-x;do{T[o++]=T[S++],T[o++]=T[S++],T[o++]=T[S++],w-=3}while(2<w);w&&(T[o++]=T[S++],1<w&&(T[o++]=T[S++]))}break}}break}}while(i<r&&o<s);i-=w=f>>3,d&=(1<<(f-=w<<3))-1,t.next_in=i,t.next_out=o,t.avail_in=i<r?r-i+5:5-(i-r),t.avail_out=o<s?s-o+257:257-(o-s),n.hold=d,n.bits=f}},function(t,e,n){"use strict";var i=n(17),r=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(t,e,n,l,c,h,u,p){var d,f,m,_,g,y,v,b,w,x=p.bits,S=0,E=0,M=0,T=0,A=0,P=0,C=0,I=0,L=0,R=0,O=null,k=0,D=new i.Buf16(16),F=new i.Buf16(16),N=null,U=0;for(S=0;15>=S;S++){D[S]=0}for(E=0;E<l;E++){D[e[n+E]]++}for(A=x,T=15;1<=T&&0===D[T];T--){}if(A>T&&(A=T),0===T)return c[h++]=20971520,c[h++]=20971520,p.bits=1,0;for(M=1;M<T&&0===D[M];M++){}for(A<M&&(A=M),I=1,S=1;15>=S;S++){if(I<<=1,0>(I-=D[S]))return-1}if(0<I&&(0===t||1!==T))return-1;for(F[1]=0,S=1;15>S;S++){F[S+1]=F[S]+D[S]}for(E=0;E<l;E++){0!==e[n+E]&&(u[F[e[n+E]]++]=E)}if(0===t?(O=N=u,y=19):1===t?(O=r,k-=257,N=o,U-=257,y=256):(O=a,N=s,y=-1),R=0,E=0,S=M,g=h,P=A,C=0,m=-1,L=1<<A,_=L-1,1===t&&852<L||2===t&&592<L)return 1;for(;;){0,v=S-C,u[E]<y?(b=0,w=u[E]):u[E]>y?(b=N[U+u[E]],w=O[k+u[E]]):(b=96,w=0),d=1<<S-C,M=f=1<<P;do{c[g+(R>>C)+(f-=d)]=0|(v<<24|b<<16|w)}while(0!==f);for(d=1<<S-1;R&d;){d>>=1}if(0!==d?(R&=d-1,R+=d):R=0,E++,0==--D[S]){if(S===T)break;S=e[n+u[E]]}if(S>A&&(R&_)!==m){for(0===C&&(C=A),g+=M,I=1<<(P=S-C);P+C<T&&!(0>=(I-=D[P+C]));){P++,I<<=1}if(L+=1<<P,1===t&&852<L||2===t&&592<L)return 1;c[m=R&_]=0|(A<<24|P<<16|g-h)}}return 0!==R&&(c[g+R]=0|(S-C<<24|64<<16)),p.bits=A,0}},function(t){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(t){t.exports=function(t){return t&&"object"==babelHelpers.typeof(t)&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e,n){"use strict";var i=i||{};i.lossless=i.lossless||{},i.lossless.ComponentSpec=i.lossless.ComponentSpec||n(73),i.lossless.DataStream=i.lossless.DataStream||n(8),i.lossless.Decoder=i.lossless.Decoder||n(157),i.lossless.FrameHeader=i.lossless.FrameHeader||n(78),i.lossless.HuffmanTable=i.lossless.HuffmanTable||n(74),i.lossless.QuantizationTable=i.lossless.QuantizationTable||n(75),i.lossless.ScanComponent=i.lossless.ScanComponent||n(77),i.lossless.ScanHeader=i.lossless.ScanHeader||n(76),i.lossless.Utils=i.lossless.Utils||n(18),"undefined"!==typeof t&&t.exports&&(t.exports=i)},function(t,e,n){"use strict";var i=i||{};i.lossless=i.lossless||{},i.lossless.DataStream=i.lossless.DataStream||n(8),i.lossless.HuffmanTable=i.lossless.HuffmanTable||n(74),i.lossless.QuantizationTable=i.lossless.QuantizationTable||n(75),i.lossless.ScanHeader=i.lossless.ScanHeader||n(76),i.lossless.FrameHeader=i.lossless.FrameHeader||n(78),i.lossless.Utils=i.lossless.Utils||n(18),i.lossless.Decoder=i.lossless.Decoder||function(t,e){this.buffer=t,this.frame=new i.lossless.FrameHeader,this.huffTable=new i.lossless.HuffmanTable,this.quantTable=new i.lossless.QuantizationTable,this.scan=new i.lossless.ScanHeader,this.DU=i.lossless.Utils.createArray(10,4,64),this.HuffTab=i.lossless.Utils.createArray(4,2,12800),this.IDCT_Source=[],this.nBlock=[],this.acTab=i.lossless.Utils.createArray(10,1),this.dcTab=i.lossless.Utils.createArray(10,1),this.qTab=i.lossless.Utils.createArray(10,1),this.marker=0,this.markerIndex=0,this.numComp=0,this.restartInterval=0,this.selection=0,this.xDim=0,this.yDim=0,this.xLoc=0,this.yLoc=0,this.numBytes=0,this.outputData=null,this.restarting=!1,this.mask=0,void 0!==e&&(this.numBytes=e)},i.lossless.Decoder.IDCT_P=[0,5,40,16,45,2,7,42,21,56,8,61,18,47,1,4,41,23,58,13,32,24,37,10,63,17,44,3,6,43,20,57,15,34,29,48,53,26,39,9,60,19,46,22,59,12,33,31,50,55,25,36,11,62,14,35,28,49,52,27,38,30,51,54],i.lossless.Decoder.TABLE=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],i.lossless.Decoder.MAX_HUFFMAN_SUBTREE=50,i.lossless.Decoder.MSB=2147483648,i.lossless.Decoder.RESTART_MARKER_BEGIN=65488,i.lossless.Decoder.RESTART_MARKER_END=65495,i.lossless.Decoder.prototype.decompress=function(t,e,n){return this.decode(t,e,n).buffer},i.lossless.Decoder.prototype.decode=function(t,e,n,r){var o,a,s,l,c=0,h=[],u=[],p=[];if(void 0!==t&&(this.buffer=t),void 0!==r&&(this.numBytes=r),this.stream=new i.lossless.DataStream(this.buffer,e,n),this.buffer=null,this.xLoc=0,this.yLoc=0,65496!==(o=this.stream.get16()))throw new Error("Not a JPEG file");for(o=this.stream.get16();4092!=o>>4||65476===o;){switch(o){case 65476:this.huffTable.read(this.stream,this.HuffTab);break;case 65484:throw new Error("Program doesn't support arithmetic coding. (format throw new IOException)");case 65499:this.quantTable.read(this.stream,i.lossless.Decoder.TABLE);break;case 65501:this.restartInterval=this.readNumber();break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:this.readApp();break;case 65534:this.readComment();break;default:if(255!=o>>8)throw new Error("ERROR: format throw new IOException! (decode)");}o=this.stream.get16()}if(65472>o||65479<o)throw new Error("ERROR: could not handle arithmetic code!");this.frame.read(this.stream),o=this.stream.get16();do{for(;65498!==o;){switch(o){case 65476:this.huffTable.read(this.stream,this.HuffTab);break;case 65484:throw new Error("Program doesn't support arithmetic coding. (format throw new IOException)");case 65499:this.quantTable.read(this.stream,i.lossless.Decoder.TABLE);break;case 65501:this.restartInterval=this.readNumber();break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:this.readApp();break;case 65534:this.readComment();break;default:if(255!=o>>8)throw new Error("ERROR: format throw new IOException! (Parser.decode)");}o=this.stream.get16()}switch(this.precision=this.frame.precision,this.components=this.frame.components,this.numBytes||(this.numBytes=parseInt(_Mathceil(this.precision/8))),1==this.numBytes?this.mask=255:this.mask=65535,this.scan.read(this.stream),this.numComp=this.scan.numComp,this.selection=this.scan.selection,1===this.numBytes?3===this.numComp?(this.getter=this.getValueRGB,this.setter=this.setValueRGB,this.output=this.outputRGB):(this.getter=this.getValue8,this.setter=this.setValue8,this.output=this.outputSingle):(this.getter=this.getValue16,this.setter=this.setValue16,this.output=this.outputSingle),this.selection){case 2:this.selector=this.select2;break;case 3:this.selector=this.select3;break;case 4:this.selector=this.select4;break;case 5:this.selector=this.select5;break;case 6:this.selector=this.select6;break;case 7:this.selector=this.select7;break;default:this.selector=this.select1;}for(this.scanComps=this.scan.components,this.quantTables=this.quantTable.quantTables,a=0;a<this.numComp;a+=1){s=this.scanComps[a].scanCompSel,this.qTab[a]=this.quantTables[this.components[s].quantTableSel],this.nBlock[a]=this.components[s].vSamp*this.components[s].hSamp,this.dcTab[a]=this.HuffTab[this.scanComps[a].dcTabSel][0],this.acTab[a]=this.HuffTab[this.scanComps[a].acTabSel][1]}for(this.xDim=this.frame.dimX,this.yDim=this.frame.dimY,this.outputData=new DataView(new ArrayBuffer(this.xDim*this.yDim*this.numBytes*this.numComp)),c+=1;;){for(u[0]=0,p[0]=0,a=0;10>a;a+=1){h[a]=1<<this.precision-1}if(0===this.restartInterval){for(o=this.decodeUnit(h,u,p);0===o&&this.xLoc<this.xDim&&this.yLoc<this.yDim;){this.output(h),o=this.decodeUnit(h,u,p)}break}for(l=0;l<this.restartInterval&&(this.restarting=0==l,o=this.decodeUnit(h,u,p),this.output(h),0===o);l+=1){}if(0===o&&(0!==this.markerIndex?(o=65280|this.marker,this.markerIndex=0):o=this.stream.get16()),!(o>=i.lossless.Decoder.RESTART_MARKER_BEGIN&&o<=i.lossless.Decoder.RESTART_MARKER_END))break}65500===o&&1===c&&(this.readNumber(),o=this.stream.get16())}while(65497!==o&&this.xLoc<this.xDim&&this.yLoc<this.yDim&&0===c);return this.outputData},i.lossless.Decoder.prototype.decodeUnit=function(t,e,n){return 1==this.numComp?this.decodeSingle(t,e,n):3==this.numComp?this.decodeRGB(t,e,n):-1},i.lossless.Decoder.prototype.select1=function(t){return this.getPreviousX(t)},i.lossless.Decoder.prototype.select2=function(t){return this.getPreviousY(t)},i.lossless.Decoder.prototype.select3=function(t){return this.getPreviousXY(t)},i.lossless.Decoder.prototype.select4=function(t){return this.getPreviousX(t)+this.getPreviousY(t)-this.getPreviousXY(t)},i.lossless.Decoder.prototype.select5=function(t){return this.getPreviousX(t)+(this.getPreviousY(t)-this.getPreviousXY(t)>>1)},i.lossless.Decoder.prototype.select6=function(t){return this.getPreviousY(t)+(this.getPreviousX(t)-this.getPreviousXY(t)>>1)},i.lossless.Decoder.prototype.select7=function(t){return(this.getPreviousX(t)+this.getPreviousY(t))/2},i.lossless.Decoder.prototype.decodeRGB=function(t,e,n){var r,o,a,s,l,c,h,u;for(t[0]=this.selector(0),t[1]=this.selector(1),t[2]=this.selector(2),l=0;l<this.numComp;l+=1){for(s=this.qTab[l],o=this.acTab[l],a=this.dcTab[l],c=0;c<this.nBlock[l];c+=1){for(h=0;h<this.IDCT_Source.length;h+=1){this.IDCT_Source[h]=0}if(65280<=(r=this.getHuffmanValue(a,e,n)))return r;for(t[l]=this.IDCT_Source[0]=t[l]+this.getn(n,r,e,n),this.IDCT_Source[0]*=s[0],u=1;64>u;u+=1){if(65280<=(r=this.getHuffmanValue(o,e,n)))return r;if(u+=r>>4,0==(15&r)){if(0==r>>4)break}else this.IDCT_Source[i.lossless.Decoder.IDCT_P[u]]=this.getn(n,15&r,e,n)*s[u]}}}return 0},i.lossless.Decoder.prototype.decodeSingle=function(t,e,n){var r,o,a,s;for(this.restarting?(this.restarting=!1,t[0]=1<<this.frame.precision-1):t[0]=this.selector(),o=0;o<this.nBlock[0];o+=1){if(65280<=(r=this.getHuffmanValue(this.dcTab[0],e,n)))return r;if(a=this.getn(t,r,e,n),(s=a>>8)>=i.lossless.Decoder.RESTART_MARKER_BEGIN&&s<=i.lossless.Decoder.RESTART_MARKER_END)return s;t[0]+=a}return 0},i.lossless.Decoder.prototype.getHuffmanValue=function(t,e,n){var r,o;if(65535,8>n[0]?(e[0]<<=8,255===(o=this.stream.get8())&&(this.marker=this.stream.get8(),0!==this.marker&&(this.markerIndex=9)),e[0]|=o):n[0]-=8,0!=((r=t[e[0]>>n[0]])&i.lossless.Decoder.MSB)){if(0!==this.markerIndex)return this.markerIndex=0,65280|this.marker;e[0]&=65535>>16-n[0],e[0]<<=8,255===(o=this.stream.get8())&&(this.marker=this.stream.get8(),0!==this.marker&&(this.markerIndex=9)),e[0]|=o,r=t[256*(255&r)+(e[0]>>n[0])],n[0]+=8}if(n[0]+=8-(r>>8),0>n[0])throw new Error("index="+n[0]+" temp="+e[0]+" code="+r+" in HuffmanValue()");return n[0]<this.markerIndex?(this.markerIndex=0,65280|this.marker):(e[0]&=65535>>16-n[0],255&r)},i.lossless.Decoder.prototype.getn=function(t,e,n,i){var r,o;if(1,-1,65535,0===e)return 0;if(16===e)return 0<=t[0]?-32768:32768;if(i[0]-=e,0<=i[0]){if(i[0]<this.markerIndex&&!this.isLastPixel())return this.markerIndex=0,(65280|this.marker)<<8;r=n[0]>>i[0],n[0]&=65535>>16-i[0]}else{if(n[0]<<=8,255===(o=this.stream.get8())&&(this.marker=this.stream.get8(),0!==this.marker&&(this.markerIndex=9)),n[0]|=o,i[0]+=8,0>i[0]){if(0!==this.markerIndex)return this.markerIndex=0,(65280|this.marker)<<8;n[0]<<=8,255===(o=this.stream.get8())&&(this.marker=this.stream.get8(),0!==this.marker&&(this.markerIndex=9)),n[0]|=o,i[0]+=8}if(0>i[0])throw new Error("index="+i[0]+" in getn()");if(i[0]<this.markerIndex)return this.markerIndex=0,(65280|this.marker)<<8;r=n[0]>>i[0],n[0]&=65535>>16-i[0]}return r<1<<e-1&&(r+=1+(-1<<e)),r},i.lossless.Decoder.prototype.getPreviousX=function(t){return 0<this.xLoc?this.getter(this.yLoc*this.xDim+this.xLoc-1,t):0<this.yLoc?this.getPreviousY(t):1<<this.frame.precision-1},i.lossless.Decoder.prototype.getPreviousXY=function(t){return 0<this.xLoc&&0<this.yLoc?this.getter((this.yLoc-1)*this.xDim+this.xLoc-1,t):this.getPreviousY(t)},i.lossless.Decoder.prototype.getPreviousY=function(t){return 0<this.yLoc?this.getter((this.yLoc-1)*this.xDim+this.xLoc,t):this.getPreviousX(t)},i.lossless.Decoder.prototype.isLastPixel=function(){return this.xLoc===this.xDim-1&&this.yLoc===this.yDim-1},i.lossless.Decoder.prototype.outputSingle=function(t){this.xLoc<this.xDim&&this.yLoc<this.yDim&&(this.setter(this.yLoc*this.xDim+this.xLoc,this.mask&t[0]),this.xLoc+=1,this.xLoc>=this.xDim&&(this.yLoc+=1,this.xLoc=0))},i.lossless.Decoder.prototype.outputRGB=function(t){var e=this.yLoc*this.xDim+this.xLoc;this.xLoc<this.xDim&&this.yLoc<this.yDim&&(this.setter(e,t[0],0),this.setter(e,t[1],1),this.setter(e,t[2],2),this.xLoc+=1,this.xLoc>=this.xDim&&(this.yLoc+=1,this.xLoc=0))},i.lossless.Decoder.prototype.setValue16=function(t,e){this.outputData.setInt16(2*t,e,!0)},i.lossless.Decoder.prototype.getValue16=function(t){return this.outputData.getInt16(2*t,!0)},i.lossless.Decoder.prototype.setValue8=function(t,e){this.outputData.setInt8(t,e)},i.lossless.Decoder.prototype.getValue8=function(t){return this.outputData.getInt8(t)},i.lossless.Decoder.prototype.setValueRGB=function(t,e,n){this.outputData.setUint8(3*t+n,e)},i.lossless.Decoder.prototype.getValueRGB=function(t,e){return this.outputData.getUint8(3*t+e)},i.lossless.Decoder.prototype.readApp=function(){var t=0,e=this.stream.get16();for(t+=2;t<e;){this.stream.get8(),t+=1}return e},i.lossless.Decoder.prototype.readComment=function(){var t,e="",n=0;for(t=this.stream.get16(),n+=2;n<t;){e+=this.stream.get8(),n+=1}return e},i.lossless.Decoder.prototype.readNumber=function(){if(4!==this.stream.get16())throw new Error("ERROR: Define number format throw new IOException [Ld!=4]");return this.stream.get16()},"undefined"!==typeof t&&t.exports&&(t.exports=i.lossless.Decoder)},function(t){var n={Unkown:0,Grayscale:1,AdobeRGB:2,RGB:3,CYMK:4},i=function(){"use strict";function t(){}function e(t,e){for(var n,i,r=0,o=[],a=16;0<a&&!t[a-1];){a--}o.push({children:[],index:0});var s,l=o[0];for(n=0;n<a;n++){for(i=0;i<t[n];i++){for((l=o.pop()).children[l.index]=e[r];0<l.index;){l=o.pop()}for(l.index++,o.push(l);o.length<=n;){o.push(s={children:[],index:0}),l.children[l.index]=s.children,l=s}r++}n+1<a&&(o.push(s={children:[],index:0}),l.children[l.index]=s.children,l=s)}return o[0].children}function i(t,e,n){return 64*((t.blocksPerLine+1)*e+n)}function r(t,e,n,r,o,a,s,c,h){function u(){if(0<T)return T--,1&M>>T;if(255==(M=t[e++])){var n=t[e++];if(n)throw"unexpected marker: "+(M<<8|n).toString(16)}return T=7,M>>>7}function p(t){for(var e,n=t;null!==(e=u());){if("number"==typeof(n=n[e]))return n;if("object"!=babelHelpers.typeof(n))throw"invalid huffman sequence"}return null}function d(t){for(var e=0,n;0<t;){n=u();if(null===n)return;e=e<<1|n,t--}return e}function f(t){var e=d(t);return e>=1<<t-1?e:e+(-1<<t)+1}n.precision,n.samplesPerLine,n.scanLines;var m,_,g,y,v,b,w,x=n.mcusPerLine,S=n.progressive,E=(n.maxH,n.maxV,e),M=0,T=0,A=0,P=0,C=r.length;w=S?0===a?0===c?function(t,e){var n=p(t.huffmanTableDC),i=0===n?0:f(n)<<h;t.blockData[e]=t.pred+=i}:function(t,e){t.blockData[e]|=u()<<h}:0===c?function(t,e){if(0<A)A--;else for(var n=a;n<=s;){var r=p(t.huffmanTableAC),o=15&r,c=r>>4;if(0!==o){var u=l[n+=c];t.blockData[e+u]=f(o)*(1<<h),n++}else{if(15>c){A=d(c)+(1<<c)-1;break}n+=16}}}:function(t,e){for(var n=a,r=0,o;n<=s;){o=l[n];switch(P){case 0:var c=p(t.huffmanTableAC),_=15&c;if(r=c>>4,0===_)15>r?(A=d(r)+(1<<r),P=4):(r=16,P=1);else{if(1!==_)throw"invalid ACn encoding";m=f(_),P=r?2:3}continue;case 1:case 2:t.blockData[e+o]?t.blockData[e+o]+=u()<<h:0==--r&&(P=2==P?3:0);break;case 3:t.blockData[e+o]?t.blockData[e+o]+=u()<<h:(t.blockData[e+o]=m<<h,P=0);break;case 4:t.blockData[e+o]&&(t.blockData[e+o]+=u()<<h);}n++}4===P&&0==--A&&(P=0)}:function(t,e){var n=p(t.huffmanTableDC),i=0===n?0:f(n);t.blockData[e]=t.pred+=i;for(var r=1;64>r;){var o=p(t.huffmanTableAC),a=15&o,s=o>>4;if(0!==a){var c=l[r+=s];t.blockData[e+c]=f(a),r++}else{if(15>s)break;r+=16}}};var I,L,R=0;L=1==C?r[0].blocksPerLine*r[0].blocksPerColumn:x*n.mcusPerColumn,o||(o=L);for(var O,k;R<L;){for(g=0;g<C;g++){r[g].pred=0}if(A=0,1==C)for(_=r[0],b=0;b<o;b++){!function(t,e,n){e(t,i(t,0|n/t.blocksPerLine,n%t.blocksPerLine))}(_,w,R),R++}else for(b=0;b<o;b++){for(g=0;g<C;g++){for(O=(_=r[g]).h,k=_.v,y=0;y<k;y++){for(v=0;v<O;v++){!function(t,e,n,r,o){e(t,i(t,(0|n/x)*t.v+r,n%x*t.h+o))}(_,w,R,y,v)}}}R++}if(T=0,65280>=(I=t[e]<<8|t[e+1]))throw"marker was not found";if(!(65488<=I&&65495>=I))break;e+=2}return e-E}function o(t,e,n){var i,r,o,a,s,l,g,y,v,b,w=t.quantizationTable;for(b=0;64>b;b++){n[b]=t.blockData[e+b]*w[b]}for(b=0;8>b;++b){var x=8*b;0!==n[1+x]||0!==n[2+x]||0!==n[3+x]||0!==n[4+x]||0!==n[5+x]||0!==n[6+x]||0!==n[7+x]?(i=m*n[0+x]+128>>8,r=m*n[4+x]+128>>8,o=n[2+x],a=n[6+x],s=_*(n[1+x]-n[7+x])+128>>8,y=_*(n[1+x]+n[7+x])+128>>8,l=n[3+x]<<4,g=n[5+x]<<4,v=i-r+1>>1,i=i+r+1>>1,r=v,v=o*f+a*d+128>>8,o=o*d-a*f+128>>8,a=v,v=s-g+1>>1,s=s+g+1>>1,g=v,v=y+l+1>>1,l=y-l+1>>1,y=v,v=i-a+1>>1,i=i+a+1>>1,a=v,v=r-o+1>>1,r=r+o+1>>1,o=v,v=s*p+y*u+2048>>12,s=s*u-y*p+2048>>12,y=v,v=l*h+g*c+2048>>12,l=l*c-g*h+2048>>12,g=v,n[0+x]=i+y,n[7+x]=i-y,n[1+x]=r+g,n[6+x]=r-g,n[2+x]=o+l,n[5+x]=o-l,n[3+x]=a+s,n[4+x]=a-s):(v=m*n[0+x]+512>>10,n[0+x]=v,n[1+x]=v,n[2+x]=v,n[3+x]=v,n[4+x]=v,n[5+x]=v,n[6+x]=v,n[7+x]=v)}for(b=0;8>b;++b){var S=b;0!==n[8+S]||0!==n[16+S]||0!==n[24+S]||0!==n[32+S]||0!==n[40+S]||0!==n[48+S]||0!==n[56+S]?(i=m*n[0+S]+2048>>12,r=m*n[32+S]+2048>>12,o=n[16+S],a=n[48+S],s=_*(n[8+S]-n[56+S])+2048>>12,y=_*(n[8+S]+n[56+S])+2048>>12,l=n[24+S],g=n[40+S],v=i-r+1>>1,i=i+r+1>>1,r=v,v=o*f+a*d+2048>>12,o=o*d-a*f+2048>>12,a=v,v=s-g+1>>1,s=s+g+1>>1,g=v,v=y+l+1>>1,l=y-l+1>>1,y=v,v=i-a+1>>1,i=i+a+1>>1,a=v,v=r-o+1>>1,r=r+o+1>>1,o=v,v=s*p+y*u+2048>>12,s=s*u-y*p+2048>>12,y=v,v=l*h+g*c+2048>>12,l=l*c-g*h+2048>>12,g=v,n[0+S]=i+y,n[56+S]=i-y,n[8+S]=r+g,n[48+S]=r-g,n[16+S]=o+l,n[40+S]=o-l,n[24+S]=a+s,n[32+S]=a-s):(v=m*n[b+0]+8192>>14,n[0+S]=v,n[8+S]=v,n[16+S]=v,n[24+S]=v,n[32+S]=v,n[40+S]=v,n[48+S]=v,n[56+S]=v)}for(b=0;64>b;++b){var E=e+b,M=n[b];M=M<=-2056/t.bitConversion?0:M>=2024/t.bitConversion?255/t.bitConversion:M+2056/t.bitConversion>>4,t.blockData[E]=M}}function a(t,e){for(var n=e.blocksPerLine,r=e.blocksPerColumn,a=new Int32Array(64),s=0;s<r;s++){for(var l=0;l<n;l++){o(e,i(e,s,l),a)}}return e.blockData}function s(t){return 0>=t?0:255<=t?255:0|t}var l=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),c=4017,h=799,u=3406,p=2276,d=1567,f=3784,m=5793,_=2896;return t.prototype={load:function load(t){var e=function(t){this.parse(t),this.onload&&this.onload()}.bind(this);if(-1<t.indexOf("data:")){for(var n=t.indexOf("base64,")+7,i=atob(t.substring(n)),r=new Uint8Array(i.length),o=i.length-1;0<=o;o--){r[o]=i.charCodeAt(o)}e(i)}else{var a=new XMLHttpRequest;a.open("GET",t,!0),a.responseType="arraybuffer",a.onload=function(){var t=new Uint8Array(a.response);e(t)}.bind(this),a.send(null)}},parse:function parse(t){function i(){var e=t[c]<<8|t[c+1];return c+=2,e}var o,s,c=0,h=(t.length,null),u=null,p=[],d=[],f=[],m=i();if(65496!=m)throw"SOI not found";for(m=i();65497!=m;){var _,g;switch(m){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var y=function(){var e=i(),n=t.subarray(c,c+e-2);return c+=n.length,n}();65504===m&&74===y[0]&&70===y[1]&&73===y[2]&&70===y[3]&&0===y[4]&&(h={version:{major:y[5],minor:y[6]},densityUnits:y[7],xDensity:y[8]<<8|y[9],yDensity:y[10]<<8|y[11],thumbWidth:y[12],thumbHeight:y[13],thumbData:y.subarray(14,14+3*y[12]*y[13])}),65518===m&&65===y[0]&&100===y[1]&&111===y[2]&&98===y[3]&&101===y[4]&&0===y[5]&&(u={version:y[6],flags0:y[7]<<8|y[8],flags1:y[9]<<8|y[10],transformCode:y[11]});break;case 65499:for(var v=i()+c-2;c<v;){var b=t[c++],w=new Int32Array(64);if(0==b>>4)for(_=0;64>_;_++){w[l[_]]=t[c++]}else{if(1!=b>>4)throw"DQT: invalid table spec";for(_=0;64>_;_++){w[l[_]]=i()}}p[15&b]=w}break;case 65472:case 65473:case 65474:if(o)throw"Only single frame JPEGs supported";i(),(o={}).extended=65473===m,o.progressive=65474===m,o.precision=t[c++],o.scanLines=i(),o.samplesPerLine=i(),o.components=[],o.componentIds={};var x,S=t[c++],E=0,M=0;for(j=0;j<S;j++){x=t[c];var T=t[c+1]>>4,A=15&t[c+1];E<T&&(E=T),M<A&&(M=A);var P=t[c+2];g=o.components.push({h:T,v:A,quantizationTable:p[P],quantizationTableId:P,bitConversion:255/((1<<o.precision)-1)}),o.componentIds[x]=g-1,c+=3}o.maxH=E,o.maxV=M,function(t){for(var e=_Mathceil(t.samplesPerLine/8/t.maxH),n=_Mathceil(t.scanLines/8/t.maxV),i=0;i<t.components.length;i++){k=t.components[i];var r=_Mathceil(_Mathceil(t.samplesPerLine/8)*k.h/t.maxH),o=_Mathceil(_Mathceil(t.scanLines/8)*k.v/t.maxV),a=e*k.h,s=64*(n*k.v)*(a+1);k.blockData=new Int16Array(s),k.blocksPerLine=r,k.blocksPerColumn=o}t.mcusPerLine=e,t.mcusPerColumn=n}(o);break;case 65476:var C=i();for(j=2;j<C;){var I=t[c++],L=new Uint8Array(16),R=0;for(_=0;16>_;_++,c++){R+=L[_]=t[c]}var O=new Uint8Array(R);for(_=0;_<R;_++,c++){O[_]=t[c]}j+=17+R,(0==I>>4?f:d)[15&I]=e(L,O)}break;case 65501:i(),s=i();break;case 65498:i();var k,D=t[c++],F=[];for(j=0;j<D;j++){var N=o.componentIds[t[c++]];k=o.components[N];var U=t[c++];k.huffmanTableDC=f[U>>4],k.huffmanTableAC=d[15&U],F.push(k)}var B=t[c++],z=t[c++],G=t[c++],H=r(t,c,o,F,s,B,z,G>>4,15&G);c+=H;break;default:if(255==t[c-3]&&192<=t[c-2]&&254>=t[c-2]){c-=3;break}throw"unknown JPEG marker "+m.toString(16);}m=i()}switch(this.width=o.samplesPerLine,this.height=o.scanLines,this.jfif=h,this.adobe=u,this.components=[],o.components.length){case 1:this.colorspace=n.Grayscale;break;case 3:this.adobe?this.colorspace=n.AdobeRGB:this.colorspace=n.RGB;break;case 4:this.colorspace=n.CYMK;break;default:this.colorspace=n.Unknown;}for(var j=0;j<o.components.length;j++){(k=o.components[j]).quantizationTable||null===k.quantizationTableId||(k.quantizationTable=p[k.quantizationTableId]),this.components.push({output:a(0,k),scaleX:k.h/o.maxH,scaleY:k.v/o.maxV,blocksPerLine:k.blocksPerLine,blocksPerColumn:k.blocksPerColumn,bitConversion:k.bitConversion})}},getData16:function getData16(t,e){if(1!==this.components.length)throw"Unsupported color mode";var n,r,o,a,s,l,c=this.width/t,h=this.height/e,u=0,p=this.components.length,f=new Uint16Array(t*e*p),m=new Uint16Array(8*((this.components[0].blocksPerLine<<3)*this.components[0].blocksPerColumn));for(l=0;l<p;l++){for(var _,g,y=(n=this.components[l]).blocksPerLine,v=n.blocksPerColumn,b=y<<3,w=0,x=0;x<v;x++){for(var S=x<<3,E=0;E<y;E++){var M=i(n,x,E),u=0,T=E<<3;for(_=0;8>_;_++){w=(S+_)*b;for(g=0;8>g;g++){m[w+T+g]=n.output[M+u++]}}}}r=n.scaleX*c,o=n.scaleY*h,u=l;var A;for(s=0;s<e;s++){for(a=0;a<t;a++){A=(0|s*o)*b+(0|a*r),f[u]=m[A],u+=p}}}return f},getData:function getData(t,e){var n,r,o,a,l,c,h,u,p,d,f,m,_,g,y,v=this.width/t,b=this.height/e,w=0,x=this.components.length,S=t*e*x,E=new Uint8Array(S),M=new Uint8Array(8*((this.components[0].blocksPerLine<<3)*this.components[0].blocksPerColumn));for(c=0;c<x;c++){for(var T,A,P=(n=this.components[c]).blocksPerLine,C=n.blocksPerColumn,I=P<<3,L=0,R=0;R<C;R++){for(var O=R<<3,k=0;k<P;k++){var D=i(n,R,k),w=0,F=k<<3;for(T=0;8>T;T++){L=(O+T)*I;for(A=0;8>A;A++){M[L+F+A]=n.output[D+w++]*n.bitConversion}}}}r=n.scaleX*v,o=n.scaleY*b,w=c;var N;for(l=0;l<e;l++){for(a=0;a<t;a++){N=(0|l*o)*I+(0|a*r),E[w]=M[N],w+=x}}}switch(x){case 1:case 2:break;case 3:if(y=!0,this.adobe&&this.adobe.transformCode?y=!0:void 0!==this.colorTransform&&(y=!!this.colorTransform),y)for(c=0;c<S;c+=x){h=E[c],u=E[c+1],m=s(h-179.456+1.402*(p=E[c+2])),_=s(h+135.459-.344*u-.714*p),g=s(h-226.816+1.772*u),E[c]=m,E[c+1]=_,E[c+2]=g}break;case 4:if(!this.adobe)throw"Unsupported color mode (4 components)";if(y=!1,this.adobe&&this.adobe.transformCode?y=!0:void 0!==this.colorTransform&&(y=!!this.colorTransform),y)for(c=0;c<S;c+=x){h=E[c],u=E[c+1],d=s(434.456-h-1.402*(p=E[c+2])),f=s(119.541-h+.344*u+.714*p),h=s(481.816-h-1.772*u),E[c]=d,E[c+1]=f,E[c+2]=h}break;default:throw"Unsupported color mode";}return E}},t}();"undefined"!==typeof t&&t.exports&&(t.exports=i)},function(t){"use strict";function i(t){PDFJS.verbosity>=PDFJS.VERBOSITY_LEVELS.infos&&console.log("Info: "+t)}function r(t){PDFJS.verbosity>=PDFJS.VERBOSITY_LEVELS.warnings&&console.log("Warning: "+t)}function o(t){if(1<arguments.length){var e=["Error:"];e.push.apply(e,arguments),console.log.apply(console,e),t=[].join.call(arguments," ")}else console.log("Error: "+t);throw console.log(a()),y.notify(g.unknown),new Error(t)}function a(){try{throw new Error}catch(t){return t.stack?t.stack.split("\n").slice(2).join("\n"):""}}function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!1}),n}function l(t){for(var e=1,n=0;t>e;){e<<=1,n++}return n}function c(t,e){return t[e]<<8|t[e+1]}function h(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}function u(){var t=new Uint8Array(2);return t[0]=1,1===new Uint16Array(t.buffer)[0]}function p(){var t=document.createElement("canvas");return t.width=t.height=1,void 0!==t.getContext("2d").createImageData(1,1).data.buffer}function d(){var t={};return t.promise=new Promise(function(e,n){t.resolve=e,t.reject=n}),t}var f=function(){function t(){this.failOnCorruptedImage=!1}function e(t,e){t.x0=_Mathceil(e.XOsiz/t.XRsiz),t.x1=_Mathceil(e.Xsiz/t.XRsiz),t.y0=_Mathceil(e.YOsiz/t.YRsiz),t.y1=_Mathceil(e.Ysiz/t.YRsiz),t.width=t.x1-t.x0,t.height=t.y1-t.y0}function n(t,e){for(var n,i=t.SIZ,r=[],o=_Mathceil((i.Xsiz-i.XTOsiz)/i.XTsiz),a=_Mathceil((i.Ysiz-i.YTOsiz)/i.YTsiz),s=0;s<a;s++){for(var l=0;l<o;l++){(n={}).tx0=_Mathmax(i.XTOsiz+l*i.XTsiz,i.XOsiz),n.ty0=_Mathmax(i.YTOsiz+s*i.YTsiz,i.YOsiz),n.tx1=_Mathmin(i.XTOsiz+(l+1)*i.XTsiz,i.Xsiz),n.ty1=_Mathmin(i.YTOsiz+(s+1)*i.YTsiz,i.Ysiz),n.width=n.tx1-n.tx0,n.height=n.ty1-n.ty0,n.components=[],r.push(n)}}t.tiles=r;for(var c=0,h=i.Csiz;c<h;c++){for(var u=e[c],p=0,d=r.length,f;p<d;p++){f={};n=r[p],f.tcx0=_Mathceil(n.tx0/u.XRsiz),f.tcy0=_Mathceil(n.ty0/u.YRsiz),f.tcx1=_Mathceil(n.tx1/u.XRsiz),f.tcy1=_Mathceil(n.ty1/u.YRsiz),f.width=f.tcx1-f.tcx0,f.height=f.tcy1-f.tcy0,n.components[c]=f}}}function o(t,e,n){var i=e.codingStyleParameters,r={};return i.entropyCoderWithCustomPrecincts?(r.PPx=i.precinctsSizes[n].PPx,r.PPy=i.precinctsSizes[n].PPy):(r.PPx=15,r.PPy=15),r.xcb_=0<n?_Mathmin(i.xcb,r.PPx-1):_Mathmin(i.xcb,r.PPx),r.ycb_=0<n?_Mathmin(i.ycb,r.PPy-1):_Mathmin(i.ycb,r.PPy),r}function a(t,e,n){var i=1<<n.PPx,r=1<<n.PPy,o=0===e.resLevel,a=1<<n.PPx+(o?0:-1),s=1<<n.PPy+(o?0:-1),l=e.trx1>e.trx0?_Mathceil(e.trx1/i)-_Mathfloor(e.trx0/i):0,c=e.try1>e.try0?_Mathceil(e.try1/r)-_Mathfloor(e.try0/r):0;e.precinctParameters={precinctWidth:i,precinctHeight:r,numprecinctswide:l,numprecinctshigh:c,numprecincts:l*c,precinctWidthInSubband:a,precinctHeightInSubband:s}}function s(t,e,n){var i,r,o,a,s=n.xcb_,l=n.ycb_,c=1<<s,h=1<<l,u=e.tbx0>>s,p=e.tby0>>l,d=e.tbx1+c-1>>s,f=e.tby1+h-1>>l,m=e.resolution.precinctParameters,_=[],g=[];for(r=p;r<f;r++){for(i=u;i<d;i++){if((o={cbx:i,cby:r,tbx0:c*i,tby0:h*r,tbx1:c*(i+1),tby1:h*(r+1)}).tbx0_=_Mathmax(e.tbx0,o.tbx0),o.tby0_=_Mathmax(e.tby0,o.tby0),o.tbx1_=_Mathmin(e.tbx1,o.tbx1),o.tby1_=_Mathmin(e.tby1,o.tby1),a=_Mathfloor((o.tbx0_-e.tbx0)/m.precinctWidthInSubband)+_Mathfloor((o.tby0_-e.tby0)/m.precinctHeightInSubband)*m.numprecinctswide,o.precinctNumber=a,o.subbandType=e.type,o.Lblock=3,!(o.tbx1_<=o.tbx0_||o.tby1_<=o.tby0_)){_.push(o);var y=g[a];void 0!==y?(i<y.cbxMin?y.cbxMin=i:i>y.cbxMax&&(y.cbxMax=i),r<y.cbyMin?y.cbxMin=r:r>y.cbyMax&&(y.cbyMax=r)):g[a]=y={cbxMin:i,cbyMin:r,cbxMax:i,cbyMax:r},o.precinct=y}}}e.codeblockParameters={codeblockWidth:s,codeblockHeight:l,numcodeblockwide:d-u+1,numcodeblockhigh:f-p+1},e.codeblocks=_,e.precincts=g}function u(t,e,n){for(var i=[],r=t.subbands,o=0,a=r.length;o<a;o++){for(var s=r[o].codeblocks,l=0,c=s.length,h;l<c;l++){h=s[l];h.precinctNumber===e&&i.push(h)}}return{layerNumber:n,codeblocks:i}}function p(t){for(var e=t.SIZ,n=t.currentTile.index,i=t.tiles[n],r=i.codingStyleDefaultParameters.layersCount,o=e.Csiz,a=0,s=0;s<o;s++){a=_Mathmax(a,i.components[s].codingStyleParameters.decompositionLevelsCount)}var l=0,c=0,h=0,p=0;this.nextPacket=function(){for(;l<r;l++){for(;c<=a;c++){for(;h<o;h++){var t=i.components[h];if(!(c>t.codingStyleParameters.decompositionLevelsCount)){for(var e=t.resolutions[c],n=e.precinctParameters.numprecincts,s;p<n;){s=u(e,p,l);return p++,s}p=0}}h=0}c=0}}}function d(t){for(var e=t.SIZ,n=t.currentTile.index,i=t.tiles[n],r=i.codingStyleDefaultParameters.layersCount,o=e.Csiz,a=0,s=0;s<o;s++){a=_Mathmax(a,i.components[s].codingStyleParameters.decompositionLevelsCount)}var l=0,c=0,h=0,p=0;this.nextPacket=function(){for(;l<=a;l++){for(;c<r;c++){for(;h<o;h++){var t=i.components[h];if(!(l>t.codingStyleParameters.decompositionLevelsCount)){for(var e=t.resolutions[l],n=e.precinctParameters.numprecincts,s;p<n;){s=u(e,p,c);return p++,s}p=0}}h=0}c=0}}}function f(t){var e,n,i,r,o=t.SIZ,a=t.currentTile.index,s=t.tiles[a],l=s.codingStyleDefaultParameters.layersCount,c=o.Csiz,h=0;for(i=0;i<c;i++){var p=s.components[i];h=_Mathmax(h,p.codingStyleParameters.decompositionLevelsCount)}var d=new Int32Array(h+1);for(n=0;n<=h;++n){var f=0;for(i=0;i<c;++i){var m=s.components[i].resolutions;n<m.length&&(f=_Mathmax(f,m[n].precinctParameters.numprecincts))}d[n]=f}e=0,n=0,i=0,r=0,this.nextPacket=function(){for(;n<=h;n++){for(;r<d[n];r++){for(;i<c;i++){var t=s.components[i];if(!(n>t.codingStyleParameters.decompositionLevelsCount)){var o=t.resolutions[n],a=o.precinctParameters.numprecincts;if(!(r>=a)){for(;e<l;){var p=u(o,r,e);return e++,p}e=0}}}i=0}r=0}}}function _(t){var e=t.SIZ,n=t.currentTile.index,i=t.tiles[n],r=i.codingStyleDefaultParameters.layersCount,o=e.Csiz,a=v(i),s=a,l=0,c=0,h=0,p=0,d=0;this.nextPacket=function(){for(;d<s.maxNumHigh;d++){for(;p<s.maxNumWide;p++){for(;h<o;h++){for(var t=i.components[h],e=t.codingStyleParameters.decompositionLevelsCount;c<=e;c++){var n=t.resolutions[c],f=a.components[h].resolutions[c],m=y(p,d,f,s,n);if(null!==m){for(;l<r;){var _=u(n,m,l);return l++,_}l=0}}c=0}h=0}p=0}}}function g(t){var e=t.SIZ,n=t.currentTile.index,i=t.tiles[n],r=i.codingStyleDefaultParameters.layersCount,o=e.Csiz,a=v(i),s=0,l=0,c=0,h=0,p=0;this.nextPacket=function(){for(;c<o;++c){for(var t=i.components[c],e=a.components[c],n=t.codingStyleParameters.decompositionLevelsCount;p<e.maxNumHigh;p++){for(;h<e.maxNumWide;h++){for(;l<=n;l++){var d=t.resolutions[l],f=e.resolutions[l],m=y(h,p,f,e,d);if(null!==m){for(;s<r;){var _=u(d,m,s);return s++,_}s=0}}l=0}h=0}p=0}}}function y(t,e,n,i,r){var o=t*i.minWidth,a=e*i.minHeight;if(0!=o%n.width||0!=a%n.height)return null;var s=a/n.width*r.precinctParameters.numprecinctswide;return o/n.height+s}function v(t){for(var e=t.components.length,n=_NumberMAX_VALUE,i=_NumberMAX_VALUE,r=0,o=0,a=Array(e),s=0;s<e;s++){for(var l=t.components[s],c=l.codingStyleParameters.decompositionLevelsCount,h=Array(c+1),u=_NumberMAX_VALUE,p=_NumberMAX_VALUE,d=0,f=0,m=1,_=c;0<=_;--_){var g=l.resolutions[_],y=m*g.precinctParameters.precinctWidth,v=m*g.precinctParameters.precinctHeight;u=_Mathmin(u,y),p=_Mathmin(p,v),d=_Mathmax(d,g.precinctParameters.numprecinctswide),f=_Mathmax(f,g.precinctParameters.numprecinctshigh),h[_]={width:y,height:v},m<<=1}n=_Mathmin(n,u),i=_Mathmin(i,p),r=_Mathmax(r,d),o=_Mathmax(o,f),a[s]={resolutions:h,minWidth:u,minHeight:p,maxNumWide:d,maxNumHigh:f}}return{components:a,minWidth:n,minHeight:i,maxNumWide:r,maxNumHigh:o}}function b(t){for(var e=t.SIZ,n=t.currentTile.index,i=t.tiles[n],r=e.Csiz,l=0;l<r;l++){for(var c=i.components[l],h=c.codingStyleParameters.decompositionLevelsCount,u=[],m=[],y=0;y<=h;y++){var v=o(t,c,y),b={},w=1<<h-y;b.trx0=_Mathceil(c.tcx0/w),b.try0=_Mathceil(c.tcy0/w),b.trx1=_Mathceil(c.tcx1/w),b.try1=_Mathceil(c.tcy1/w),b.resLevel=y,a(t,b,v),u.push(b);var x;if(0===y)(x={}).type="LL",x.tbx0=_Mathceil(c.tcx0/w),x.tby0=_Mathceil(c.tcy0/w),x.tbx1=_Mathceil(c.tcx1/w),x.tby1=_Mathceil(c.tcy1/w),x.resolution=b,s(t,x,v),m.push(x),b.subbands=[x];else{var S=1<<h-y+1,E=[];(x={}).type="HL",x.tbx0=_Mathceil(c.tcx0/S-.5),x.tby0=_Mathceil(c.tcy0/S),x.tbx1=_Mathceil(c.tcx1/S-.5),x.tby1=_Mathceil(c.tcy1/S),x.resolution=b,s(t,x,v),m.push(x),E.push(x),(x={}).type="LH",x.tbx0=_Mathceil(c.tcx0/S),x.tby0=_Mathceil(c.tcy0/S-.5),x.tbx1=_Mathceil(c.tcx1/S),x.tby1=_Mathceil(c.tcy1/S-.5),x.resolution=b,s(t,x,v),m.push(x),E.push(x),(x={}).type="HH",x.tbx0=_Mathceil(c.tcx0/S-.5),x.tby0=_Mathceil(c.tcy0/S-.5),x.tbx1=_Mathceil(c.tcx1/S-.5),x.tby1=_Mathceil(c.tcy1/S-.5),x.resolution=b,s(t,x,v),m.push(x),E.push(x),b.subbands=E}}c.resolutions=u,c.subbands=m}var M=i.codingStyleDefaultParameters.progressionOrder;switch(M){case 0:i.packetsIterator=new p(t);break;case 1:i.packetsIterator=new d(t);break;case 2:i.packetsIterator=new f(t);break;case 3:i.packetsIterator=new _(t);break;case 4:i.packetsIterator=new g(t);break;default:throw new Error("JPX Error: Unsupported progression order "+M);}}function w(t,e,n,i){function r(t){for(;u<t;){if(n+h>=e.length)throw new Error("Unexpected EOF");var i=e[n+h];h++,p?(c=c<<7|i,u+=7,p=!1):(c=c<<8|i,u+=8),255===i&&(p=!0)}return u-=t,c>>>u&(1<<t)-1}function o(t){return 255===e[n+h-1]&&e[n+h]===t?(a(1),!0):255===e[n+h]&&e[n+h+1]===t&&(a(2),!0)}function a(t){h+=t}function s(){u=0,p&&(h++,p=!1)}for(var c,h=0,u=0,p=!1,d=t.currentTile.index,f=t.tiles[d],m=t.COD.sopMarkerUsed,_=t.COD.ephMarkerUsed,g=f.packetsIterator;h<i;){try{s(),m&&o(145)&&a(4);var y=g.nextPacket();if(void 0===y)return;if(!r(1))continue;for(var v,b=y.layerNumber,w=[],x=0,S=y.codeblocks.length;x<S;x++){var E=(v=y.codeblocks[x]).precinct,M=v.cbx-E.cbxMin,T=v.cby-E.cbyMin,C=!1,I=!1;if(void 0!==v.included)C=!!r(1);else{var L,R;if(void 0!==(E=v.precinct).inclusionTree)L=E.inclusionTree;else{var O=E.cbxMax-E.cbxMin+1,k=E.cbyMax-E.cbyMin+1;L=new P(O,k),R=new A(O,k),E.inclusionTree=L,E.zeroBitPlanesTree=R}for(L.reset(M,T,b);;){if(h>=e.length)return;if(L.isAboveThreshold())break;if(L.isKnown())L.nextLevel();else if(r(1)){if(L.setKnown(),L.isLeaf()){v.included=!0,C=I=!0;break}L.nextLevel()}else L.incrementValue()}}if(C){if(I){for((R=E.zeroBitPlanesTree).reset(M,T);;){if(h>=e.length)return;if(r(1)){if(!R.nextLevel())break}else R.incrementValue()}v.zeroBitPlanes=R.value}for(var D=function(){if(0===r(1))return 1;if(0===r(1))return 2;var t=r(2);return 3>t?t+3:31>(t=r(5))?t+6:(t=r(7))+37}();r(1);){v.Lblock++}var F=l(D),N=r((D<1<<F?F-1:F)+v.Lblock);w.push({codeblock:v,codingpasses:D,dataLength:N})}}for(s(),_&&o(146);0<w.length;){var U=w.shift();void 0===(v=U.codeblock).data&&(v.data=[]),v.data.push({data:e,start:n+h,end:n+h+U.dataLength,codingpasses:U.codingpasses}),h+=U.dataLength}}catch(t){return}}return h}function x(t,e,n,i,r,o,a,s){for(var l=i.tbx0,c=i.tby0,h=i.tbx1-i.tbx0,u=i.codeblocks,p="H"===i.type.charAt(0)?1:0,d="H"===i.type.charAt(1)?e:0,f=0,_=u.length;f<_;++f){var g=u[f],y=g.tbx1_-g.tbx0_,v=g.tby1_-g.tby0_;if(0!==y&&0!==v&&void 0!==g.data){var b,w;b=new C(y,v,g.subbandType,g.zeroBitPlanes,o),w=2;var x,S,E,M=g.data,T=0,A=0;for(x=0,S=M.length;x<S;x++){T+=(E=M[x]).end-E.start,A+=E.codingpasses}var P=new Int16Array(T),I=0;for(x=0,S=M.length;x<S;x++){var L=(E=M[x]).data.subarray(E.start,E.end);P.set(L,I),I+=L.length}var R=new m(P,0,T);for(b.setDecoder(R),x=0;x<A;x++){switch(w){case 0:b.runSignificancePropogationPass();break;case 1:b.runMagnitudeRefinementPass();break;case 2:b.runCleanupPass(),s&&b.checkSegmentationSymbol();}w=(w+1)%3}var O,k,D,F=g.tbx0_-l+(g.tby0_-c)*h,N=b.coefficentsSign,U=b.coefficentsMagnitude,B=b.bitsDecoded,z=a?0:.5;I=0;var G="LL"!==i.type;for(x=0;x<v;x++){var H=2*(0|F/h)*(e-h)+p+d;for(O=0;O<y;O++){if(0!==(k=U[I])){k=(k+z)*r,0!==N[I]&&(k=-k),D=B[I];var j=G?H+(F<<1):F;t[j]=a&&D>=o?k:k*(1<<o-D)}F++,I++}F+=h-y}}}}function S(t,e,n){for(var i=e.components[n],r=i.codingStyleParameters,o=i.quantizationParameters,a=r.decompositionLevelsCount,s=o.SPqcds,l=o.scalarExpounded,c=o.guardBits,h=r.segmentationSymbolUsed,u=t.components[n].precision,p=r.reversibleTransformation,d=p?new R:new L,f=[],m=0,_=0;_<=a;_++){for(var g=i.resolutions[_],y=g.trx1-g.trx0,v=g.try1-g.try0,b=new Float32Array(y*v),w=0,S=g.subbands.length;w<S;w++){var E,M;l?(E=s[m].mu,M=s[m].epsilon,m++):(E=s[0].mu,M=s[0].epsilon+(0<_?1-_:0));var A=g.subbands[w],P=T[A.type];x(b,y,v,A,p?1:_Mathpow(2,u+P-M)*(1+E/2048),c+M-1,p,h)}f.push({width:y,height:v,items:b})}var C=d.calculate(f,i.tcx0,i.tcy0);return{left:i.tcx0,top:i.tcy0,width:C.width,height:C.height,items:C.items}}function E(t){for(var e=t.SIZ,n=t.components,i=e.Csiz,r=[],o=0,a=t.tiles.length;o<a;o++){var s,l=t.tiles[o],c=[];for(s=0;s<i;s++){c[s]=S(t,l,s)}var h=c[0];if(N=n[0].isSigned)u=new Int16Array(h.items.length*i);else var u=new Uint16Array(h.items.length*i);var p,d,f,m,_,g,y,v,b,w,x,E,M,T,A,P={left:h.left,top:h.top,width:h.width,height:h.height,items:u},C=0;if(l.codingStyleDefaultParameters.multipleComponentTransform){var I=4===i,L=c[0].items,R=c[1].items,O=c[2].items,k=I?c[3].items:null;d=.5+(128<<(p=n[0].precision-8)),m=-(_=.5*(f=255*(1<<p)));var D=l.components[0],F=i-3;if(y=L.length,D.codingStyleParameters.reversibleTransformation)for(g=0;g<y;g++,C+=F){v=L[g]+d,b=R[g],x=(E=v-((w=O[g])+b>>2))+w,M=E+b,u[C++]=0>=x?0:x>=f?255:x>>p,u[C++]=0>=E?0:E>=f?255:E>>p,u[C++]=0>=M?0:M>=f?255:M>>p}else for(g=0;g<y;g++,C+=F){v=L[g]+d,b=R[g],x=v+1.402*(w=O[g]),E=v-.34413*b-.71414*w,M=v+1.772*b,u[C++]=0>=x?0:x>=f?255:x>>p,u[C++]=0>=E?0:E>=f?255:E>>p,u[C++]=0>=M?0:M>=f?255:M>>p}if(I)for(g=0,C=3;g<y;g++,C+=4){T=k[g],u[C]=T<=m?0:T>=_?255:T+d>>p}}else for(s=0;s<i;s++){if(8===n[s].precision){U=c[s].items;for(d=.5+(128<<(p=n[s].precision-8)),m=-(f=127.5*(1<<p)),C=s,g=0,y=U.length;g<y;g++){A=U[g],u[C]=A<=m?0:A>=f?255:A+d>>p,C+=i}}else{var N=n[s].isSigned,U=c[s].items;if(N)for(C=s,g=0,y=U.length;g<y;g++){u[C]=U[g],C+=i}else{d=.5+(128<<(p=n[s].precision-8));var B=_Mathpow(2,n[s].precision)-1;for(C=s,g=0,y=U.length;g<y;g++){A=U[g],u[C]=_Mathmax(_Mathmin(A+d,B),0),C+=i}}}}r.push(P)}return r}function M(t,e){for(var n=t.SIZ.Csiz,i=t.tiles[e],r=0;r<n;r++){var o=i.components[r],a=void 0!==t.currentTile.QCC[r]?t.currentTile.QCC[r]:t.currentTile.QCD;o.quantizationParameters=a;var s=void 0!==t.currentTile.COC[r]?t.currentTile.COC[r]:t.currentTile.COD;o.codingStyleParameters=s}i.codingStyleDefaultParameters=t.currentTile.COD}var T={LL:0,LH:1,HL:1,HH:2};t.prototype={parse:function parse(t){if(65359!==c(t,0))for(var e=0,n=t.length;e<n;){var o=8,a=h(t,e),s=h(t,e+4);if(e+=o,1===a&&(a=4294967296*h(t,e)+h(t,e+4),e+=8,o+=8),0===a&&(a=n-e+o),a<o)throw new Error("JPX Error: Invalid box field size");var l=a-o,u=!0;switch(s){case 1785737832:u=!1;break;case 1668246642:var p=t[e];t[e+1],t[e+2];if(1===p){var d=h(t,e+3);switch(d){case 16:case 17:case 18:break;default:r("Unknown colorspace "+d);}}else 2===p&&i("ICC profile not supported");break;case 1785737827:this.parseCodestream(t,e,e+l);break;case 1783636e3:218793738!==h(t,e)&&r("Invalid JP2 signature");break;case 1783634458:case 1718909296:case 1920099697:case 1919251232:case 1768449138:break;default:r("Unsupported header type "+s+" ("+_StringfromCharCode(255&s>>24,255&s>>16,255&s>>8,255&s)+")");}u&&(e+=l)}else this.parseCodestream(t,0,t.length)},parseImageProperties:function parseImageProperties(t){for(var e=t.getByte();0<=e;){if(65361===(e<<8|(e=t.getByte()))){t.skip(4);var n=t.getInt32()>>>0,i=t.getInt32()>>>0,r=t.getInt32()>>>0,o=t.getInt32()>>>0;t.skip(16);var a=t.getUint16();return this.width=n-r,this.height=i-o,this.componentsCount=a,void(this.bitsPerComponent=8)}}throw new Error("JPX Error: No size marker found in JPX stream")},parseCodestream:function parseCodestream(t,i,o){var a={};try{for(var s=!1,l=i,u;l+1<o;){u=c(t,l);l+=2;var p,d,f,m,_,g,y=0;switch(u){case 65359:a.mainHeader=!0;break;case 65497:break;case 65361:y=c(t,l);var v={};v.Xsiz=h(t,l+4),v.Ysiz=h(t,l+8),v.XOsiz=h(t,l+12),v.YOsiz=h(t,l+16),v.XTsiz=h(t,l+20),v.YTsiz=h(t,l+24),v.XTOsiz=h(t,l+28),v.YTOsiz=h(t,l+32);var x=c(t,l+36);v.Csiz=x;var S=[];p=l+38;for(var T=0,A;T<x;T++){A={precision:1+(127&t[p]),isSigned:!!(128&t[p]),XRsiz:t[p+1],YRsiz:t[p+1]};e(A,v),S.push(A)}a.SIZ=v,a.components=S,n(a,S),a.QCC=[],a.COC=[];break;case 65372:y=c(t,l);var P={};switch(p=l+2,31&(d=t[p++])){case 0:m=8,_=!0;break;case 1:m=16,_=!1;break;case 2:m=16,_=!0;break;default:throw new Error("JPX Error: Invalid SQcd value "+d);}for(P.noQuantization=8===m,P.scalarExpounded=_,P.guardBits=d>>5,f=[];p<y+l;){var C={};8===m?(C.epsilon=t[p++]>>3,C.mu=0):(C.epsilon=t[p]>>3,C.mu=(7&t[p])<<8|t[p+1],p+=2),f.push(C)}P.SPqcds=f,a.mainHeader?a.QCD=P:(a.currentTile.QCD=P,a.currentTile.QCC=[]);break;case 65373:y=c(t,l);var I={};p=l+2;var L;switch(257>a.SIZ.Csiz?L=t[p++]:(L=c(t,p),p+=2),31&(d=t[p++])){case 0:m=8,_=!0;break;case 1:m=16,_=!1;break;case 2:m=16,_=!0;break;default:throw new Error("JPX Error: Invalid SQcd value "+d);}for(I.noQuantization=8===m,I.scalarExpounded=_,I.guardBits=d>>5,f=[];p<y+l;){C={},8===m?(C.epsilon=t[p++]>>3,C.mu=0):(C.epsilon=t[p]>>3,C.mu=(7&t[p])<<8|t[p+1],p+=2),f.push(C)}I.SPqcds=f,a.mainHeader?a.QCC[L]=I:a.currentTile.QCC[L]=I;break;case 65362:y=c(t,l);var R={};p=l+2;var O=t[p++];R.entropyCoderWithCustomPrecincts=!!(1&O),R.sopMarkerUsed=!!(2&O),R.ephMarkerUsed=!!(4&O),R.progressionOrder=t[p++],R.layersCount=c(t,p),p+=2,R.multipleComponentTransform=t[p++],R.decompositionLevelsCount=t[p++],R.xcb=2+(15&t[p++]),R.ycb=2+(15&t[p++]);var k=t[p++];if(R.selectiveArithmeticCodingBypass=!!(1&k),R.resetContextProbabilities=!!(2&k),R.terminationOnEachCodingPass=!!(4&k),R.verticalyStripe=!!(8&k),R.predictableTermination=!!(16&k),R.segmentationSymbolUsed=!!(32&k),R.reversibleTransformation=t[p++],R.entropyCoderWithCustomPrecincts){for(var D=[],F;p<y+l;){F=t[p++];D.push({PPx:15&F,PPy:F>>4})}R.precinctsSizes=D}var N=[];if(R.selectiveArithmeticCodingBypass&&N.push("selectiveArithmeticCodingBypass"),R.resetContextProbabilities&&N.push("resetContextProbabilities"),R.terminationOnEachCodingPass&&N.push("terminationOnEachCodingPass"),R.verticalyStripe&&N.push("verticalyStripe"),R.predictableTermination&&N.push("predictableTermination"),0<N.length)throw s=!0,new Error("JPX Error: Unsupported COD options ("+N.join(", ")+")");a.mainHeader?a.COD=R:(a.currentTile.COD=R,a.currentTile.COC=[]);break;case 65424:y=c(t,l),(g={}).index=c(t,l+2),g.length=h(t,l+4),g.dataEnd=g.length+l-2,g.partIndex=t[l+8],g.partsCount=t[l+9],a.mainHeader=!1,0===g.partIndex&&(g.COD=a.COD,g.COC=a.COC.slice(0),g.QCD=a.QCD,g.QCC=a.QCC.slice(0)),a.currentTile=g;break;case 65427:0===(g=a.currentTile).partIndex&&(M(a,g.index),b(a)),w(a,t,l,y=g.dataEnd-l);break;case 65365:case 65367:case 65368:case 65380:y=c(t,l);break;case 65363:throw new Error("JPX Error: Codestream code 0xFF53 (COC) is not implemented");default:throw new Error("JPX Error: Unknown codestream code: "+u.toString(16));}l+=y}}catch(t){if(s||this.failOnCorruptedImage)throw t;r("Trying to recover from "+t.message)}this.tiles=E(a),this.width=a.SIZ.Xsiz-a.SIZ.XOsiz,this.height=a.SIZ.Ysiz-a.SIZ.YOsiz,this.componentsCount=a.SIZ.Csiz}};var A=function(){function t(t,e){var n=l(_Mathmax(t,e))+1;this.levels=[];for(var i=0,r;i<n;i++){r={width:t,height:e,items:[]};this.levels.push(r),t=_Mathceil(t/2),e=_Mathceil(e/2)}}return t.prototype={reset:function reset(t,e){for(var n,i=0,r=0,o;i<this.levels.length;){o=t+e*(n=this.levels[i]).width;if(void 0!==n.items[o]){r=n.items[o];break}n.index=o,t>>=1,e>>=1,i++}i--,(n=this.levels[i]).items[n.index]=r,this.currentLevel=i,delete this.value},incrementValue:function incrementValue(){var t=this.levels[this.currentLevel];t.items[t.index]++},nextLevel:function nextLevel(){var t=this.currentLevel,e=this.levels[t],n=e.items[e.index];return 0>--t?(this.value=n,!1):(this.currentLevel=t,e=this.levels[t],e.items[e.index]=n,!0)}},t}(),P=function(){function t(t,e){var n=l(_Mathmax(t,e))+1;this.levels=[];for(var i=0;i<n;i++){for(var r=new Uint8Array(t*e),o=new Uint8Array(t*e),a=0,s=r.length;a<s;a++){r[a]=0,o[a]=0}var c={width:t,height:e,items:r,status:o};this.levels.push(c),t=_Mathceil(t/2),e=_Mathceil(e/2)}}return t.prototype={reset:function reset(t,e,n){this.currentStopValue=n;for(var i=0;i<this.levels.length;){var r=this.levels[i],o=t+e*r.width;r.index=o,t>>=1,e>>=1,i++}this.currentLevel=this.levels.length-1,this.minValue=this.levels[this.currentLevel].items[0]},incrementValue:function incrementValue(){var t=this.levels[this.currentLevel];t.items[t.index]=t.items[t.index]+1,t.items[t.index]>this.minValue&&(this.minValue=t.items[t.index])},nextLevel:function nextLevel(){var t=this.currentLevel;if(0>--t)return!1;this.currentLevel=t;var e=this.levels[t];return e.items[e.index]<this.minValue?e.items[e.index]=this.minValue:e.items[e.index]>this.minValue&&(this.minValue=e.items[e.index]),!0},isLeaf:function isLeaf(){return 0===this.currentLevel},isAboveThreshold:function isAboveThreshold(){var t=this.currentLevel,e=this.levels[t];return e.items[e.index]>this.currentStopValue},isKnown:function isKnown(){var t=this.currentLevel,e=this.levels[t];return 0<e.status[e.index]},setKnown:function setKnown(){var t=this.currentLevel,e=this.levels[t];e.status[e.index]=1}},t}(),C=function(){function t(t,r,o,a,s){this.width=t,this.height=r,this.contextLabelTable="HH"===o?i:"HL"===o?n:e;var l=t*r;this.neighborsSignificance=new Uint8Array(l),this.coefficentsSign=new Uint8Array(l),this.coefficentsMagnitude=14<s?new Uint32Array(l):6<s?new Uint16Array(l):new Uint8Array(l),this.processingFlags=new Uint8Array(l);var c=new Uint8Array(l);if(0!==a)for(var h=0;h<l;h++){c[h]=a}this.bitsDecoded=c,this.reset()}var e=new Uint8Array([0,5,8,0,3,7,8,0,4,7,8,0,0,0,0,0,1,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8]),n=new Uint8Array([0,3,4,0,5,7,7,0,8,8,8,0,0,0,0,0,1,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8]),i=new Uint8Array([0,1,2,0,1,2,2,0,2,2,2,0,0,0,0,0,3,4,5,0,4,5,5,0,5,5,5,0,0,0,0,0,6,7,7,0,7,7,7,0,7,7,7,0,0,0,0,0,8,8,8,0,8,8,8,0,8,8,8,0,0,0,0,0,8,8,8,0,8,8,8,0,8,8,8]);return t.prototype={setDecoder:function setDecoder(t){this.decoder=t},reset:function reset(){this.contexts=new Int8Array(19),this.contexts[0]=8,this.contexts[17]=92,this.contexts[18]=6},setNeighborsSignificance:function setNeighborsSignificance(t,e,n){var i,r=this.neighborsSignificance,o=this.width,a=this.height,s=0<e,l=e+1<o;0<t&&(i=n-o,s&&(r[i-1]+=16),l&&(r[i+1]+=16),r[i]+=4),t+1<a&&(i=n+o,s&&(r[i-1]+=16),l&&(r[i+1]+=16),r[i]+=4),s&&(r[n-1]+=1),l&&(r[n+1]+=1),r[n]|=128},runSignificancePropogationPass:function runSignificancePropogationPass(){for(var t=this.decoder,e=this.width,n=this.height,i=this.coefficentsMagnitude,r=this.coefficentsSign,o=this.neighborsSignificance,a=this.processingFlags,s=this.contexts,l=this.contextLabelTable,c=this.bitsDecoded,h=0;h<n;h+=4){for(var u=0;u<e;u++){for(var p=h*e+u,d=0,f;4>d;d++,p+=e){f=h+d;if(f>=n)break;if(a[p]&=-2,!i[p]&&o[p]){var m=l[o[p]];if(t.readBit(s,m)){var _=this.decodeSignBit(f,u,p);r[p]=_,i[p]=1,this.setNeighborsSignificance(f,u,p),a[p]|=2}c[p]++,a[p]|=1}}}}},decodeSignBit:function decodeSignBit(t,e,n){var i,r,o,a,s,l,c=this.width,h=this.height,u=this.coefficentsMagnitude,p=this.coefficentsSign;a=0<e&&0!==u[n-1],e+1<c&&0!==u[n+1]?(o=p[n+1],i=a?1-o-(r=p[n-1]):1-o-o):i=a?1-(r=p[n-1])-r:0;var d=3*i;return a=0<t&&0!==u[n-c],t+1<h&&0!==u[n+c]?(o=p[n+c],i=a?1-o-(r=p[n-c])+d:1-o-o+d):i=a?1-(r=p[n-c])-r+d:d,0<=i?(s=9+i,l=this.decoder.readBit(this.contexts,s)):(s=9-i,l=1^this.decoder.readBit(this.contexts,s)),l},runMagnitudeRefinementPass:function runMagnitudeRefinementPass(){for(var t,e=this.decoder,n=this.width,i=this.height,r=this.coefficentsMagnitude,o=this.neighborsSignificance,a=this.contexts,s=this.bitsDecoded,l=this.processingFlags,c=n*i,u=0;u<c;u=t){t=_Mathmin(c,u+4*n);for(var p=0;p<n;p++){for(var d=u+p;d<t;d+=n){if(r[d]&&0==(1&l[d])){var f=16;0!=(2&l[d])&&(l[d]^=2,f=0===(127&o[d])?15:14);var m=e.readBit(a,f);r[d]=r[d]<<1|m,s[d]++,l[d]|=1}}}}},runCleanupPass:function runCleanupPass(){for(var t,e=this.decoder,n=this.width,i=this.height,r=this.neighborsSignificance,o=this.coefficentsMagnitude,a=this.coefficentsSign,s=this.contexts,l=this.contextLabelTable,c=this.bitsDecoded,h=this.processingFlags,u=n,p=2*n,d=3*n,f=0;f<i;f=t){t=_Mathmin(f+4,i);for(var m=f*n,_=f+3<i,g=0;g<n;g++){var y,v=m+g,b=0,w=v,x=f;if(_&&0===h[v]&&0===h[v+u]&&0===h[v+p]&&0===h[v+d]&&0===r[v]&&0===r[v+u]&&0===r[v+p]&&0===r[v+d]){if(!e.readBit(s,18)){c[v]++,c[v+u]++,c[v+p]++,c[v+d]++;continue}0!==(b=e.readBit(s,17)<<1|e.readBit(s,17))&&(x=f+b,w+=b*n),y=this.decodeSignBit(x,g,w),a[w]=y,o[w]=1,this.setNeighborsSignificance(x,g,w),h[w]|=2,w=v;for(var S=f;S<=x;S++,w+=n){c[w]++}b++}for(x=f+b;x<t;x++,w+=n){if(!o[w]&&0==(1&h[w])){var E=l[r[w]];1===e.readBit(s,E)&&(y=this.decodeSignBit(x,g,w),a[w]=y,o[w]=1,this.setNeighborsSignificance(x,g,w),h[w]|=2),c[w]++}}}}},checkSegmentationSymbol:function checkSegmentationSymbol(){var t=this.decoder,e=this.contexts;if(10!==(t.readBit(e,17)<<3|t.readBit(e,17)<<2|t.readBit(e,17)<<1|t.readBit(e,17)))throw new Error("JPX Error: Invalid segmentation symbol")}},t}(),I=function(){function t(){}return t.prototype.calculate=function(t,e,n){for(var i=t[0],r=1,o=t.length;r<o;r++){i=this.iterate(i,t[r],e,n)}return i},t.prototype.extend=function(t,e,n){var i=e-1,r=e+1,o=e+n-2,a=e+n;t[i--]=t[r++],t[a++]=t[o--],t[i--]=t[r++],t[a++]=t[o--],t[i--]=t[r++],t[a++]=t[o--],t[i]=t[r],t[a]=t[o]},t.prototype.iterate=function(t,e,n,i){var r,o,a,s,l,c,h=t.width,u=t.height,p=t.items,d=e.width,f=e.height,m=e.items;for(a=0,r=0;r<u;r++){for(s=2*r*d,o=0;o<h;o++,a++,s+=2){m[s]=p[a]}}p=t.items=null;var _=new Float32Array(d+8);if(1===d){if(0!=(1&n))for(c=0,a=0;c<f;c++,a+=d){m[a]*=.5}}else for(c=0,a=0;c<f;c++,a+=d){_.set(m.subarray(a,a+d),4),this.extend(_,4,d),this.filter(_,4,d),m.set(_.subarray(4,4+d),a)}var g=16,y=[];for(r=0;r<g;r++){y.push(new Float32Array(f+8))}var v,b=0;if(t=4+f,1===f){if(0!=(1&i))for(l=0;l<d;l++){m[l]*=.5}}else for(l=0;l<d;l++){if(0===b){for(g=_Mathmin(d-l,g),a=l,s=4;s<t;a+=d,s++){for(v=0;v<g;v++){y[v][s]=m[a+v]}}b=g}var w=y[--b];if(this.extend(w,4,f),this.filter(w,4,f),0===b)for(a=l-g+1,s=4;s<t;a+=d,s++){for(v=0;v<g;v++){m[a+v]=y[v][s]}}}return{width:d,height:f,items:m}},t}(),L=function(){function t(){I.call(this)}return t.prototype=Object.create(I.prototype),t.prototype.filter=function(t,e,n){var i,r,o,a,s=n>>1,l=-1.586134342059924,c=-.052980118572961,h=.882911075530934,u=.443506852043971,p=1.230174104914001;for(i=(e|=0)-3,r=s+4;r--;i+=2){t[i]*=.8128930661159609}for(o=u*t[(i=e-2)-1],r=s+3;r--&&(a=u*t[i+1],t[i]=p*t[i]-o-a,r--);i+=2){o=u*t[(i+=2)+1],t[i]=p*t[i]-o-a}for(o=h*t[(i=e-1)-1],r=s+2;r--&&(a=h*t[i+1],t[i]-=o+a,r--);i+=2){o=h*t[(i+=2)+1],t[i]-=o+a}for(o=c*t[(i=e)-1],r=s+1;r--&&(a=c*t[i+1],t[i]-=o+a,r--);i+=2){o=c*t[(i+=2)+1],t[i]-=o+a}if(0!==s)for(o=l*t[(i=e+1)-1],r=s;r--&&(a=l*t[i+1],t[i]-=o+a,r--);i+=2){o=l*t[(i+=2)+1],t[i]-=o+a}},t}(),R=function(){function t(){I.call(this)}return t.prototype=Object.create(I.prototype),t.prototype.filter=function(t,e,n){var i,r,o=n>>1;for(i=e|=0,r=o+1;r--;i+=2){t[i]-=t[i-1]+t[i+1]+2>>2}for(i=e+1,r=o;r--;i+=2){t[i]+=t[i-1]+t[i+1]>>1}},t}();return t}(),m=function(){function t(t,e,n){this.data=t,this.bp=e,this.dataEnd=n,this.chigh=t[e],this.clow=0,this.byteIn(),this.chigh=65535&this.chigh<<7|127&this.clow>>9,this.clow=65535&this.clow<<7,this.ct-=7,this.a=32768}var e=[{qe:22017,nmps:1,nlps:1,switchFlag:1},{qe:13313,nmps:2,nlps:6,switchFlag:0},{qe:6145,nmps:3,nlps:9,switchFlag:0},{qe:2753,nmps:4,nlps:12,switchFlag:0},{qe:1313,nmps:5,nlps:29,switchFlag:0},{qe:545,nmps:38,nlps:33,switchFlag:0},{qe:22017,nmps:7,nlps:6,switchFlag:1},{qe:21505,nmps:8,nlps:14,switchFlag:0},{qe:18433,nmps:9,nlps:14,switchFlag:0},{qe:14337,nmps:10,nlps:14,switchFlag:0},{qe:12289,nmps:11,nlps:17,switchFlag:0},{qe:9217,nmps:12,nlps:18,switchFlag:0},{qe:7169,nmps:13,nlps:20,switchFlag:0},{qe:5633,nmps:29,nlps:21,switchFlag:0},{qe:22017,nmps:15,nlps:14,switchFlag:1},{qe:21505,nmps:16,nlps:14,switchFlag:0},{qe:20737,nmps:17,nlps:15,switchFlag:0},{qe:18433,nmps:18,nlps:16,switchFlag:0},{qe:14337,nmps:19,nlps:17,switchFlag:0},{qe:13313,nmps:20,nlps:18,switchFlag:0},{qe:12289,nmps:21,nlps:19,switchFlag:0},{qe:10241,nmps:22,nlps:19,switchFlag:0},{qe:9217,nmps:23,nlps:20,switchFlag:0},{qe:8705,nmps:24,nlps:21,switchFlag:0},{qe:7169,nmps:25,nlps:22,switchFlag:0},{qe:6145,nmps:26,nlps:23,switchFlag:0},{qe:5633,nmps:27,nlps:24,switchFlag:0},{qe:5121,nmps:28,nlps:25,switchFlag:0},{qe:4609,nmps:29,nlps:26,switchFlag:0},{qe:4353,nmps:30,nlps:27,switchFlag:0},{qe:2753,nmps:31,nlps:28,switchFlag:0},{qe:2497,nmps:32,nlps:29,switchFlag:0},{qe:2209,nmps:33,nlps:30,switchFlag:0},{qe:1313,nmps:34,nlps:31,switchFlag:0},{qe:1089,nmps:35,nlps:32,switchFlag:0},{qe:673,nmps:36,nlps:33,switchFlag:0},{qe:545,nmps:37,nlps:34,switchFlag:0},{qe:321,nmps:38,nlps:35,switchFlag:0},{qe:273,nmps:39,nlps:36,switchFlag:0},{qe:133,nmps:40,nlps:37,switchFlag:0},{qe:73,nmps:41,nlps:38,switchFlag:0},{qe:37,nmps:42,nlps:39,switchFlag:0},{qe:21,nmps:43,nlps:40,switchFlag:0},{qe:9,nmps:44,nlps:41,switchFlag:0},{qe:5,nmps:45,nlps:42,switchFlag:0},{qe:1,nmps:45,nlps:43,switchFlag:0},{qe:22017,nmps:46,nlps:46,switchFlag:0}];return t.prototype={byteIn:function byteIn(){var t=this.data,e=this.bp;255===t[e]?143<t[e+1]?(this.clow+=65280,this.ct=8):(e++,this.clow+=t[e]<<9,this.ct=7,this.bp=e):(e++,this.clow+=e<this.dataEnd?t[e]<<8:65280,this.ct=8,this.bp=e),65535<this.clow&&(this.chigh+=this.clow>>16,this.clow&=65535)},readBit:function readBit(t,n){var i,r=t[n]>>1,o=1&t[n],a=e[r],s=a.qe,l=this.a-s;if(this.chigh<s)l<s?(l=s,i=o,r=a.nmps):(l=s,i=1^o,1===a.switchFlag&&(o=i),r=a.nlps);else{if(this.chigh-=s,0!=(32768&l))return this.a=l,o;l<s?(i=1^o,1===a.switchFlag&&(o=i),r=a.nlps):(i=o,r=a.nmps)}do{0===this.ct&&this.byteIn(),l<<=1,this.chigh=65535&this.chigh<<1|1&this.clow>>15,this.clow=65535&this.clow<<1,this.ct--}while(0==(32768&l));return this.a=l,t[n]=r<<1|o,i}},t}(),_="undefined"==typeof window?this:window;_.PDFJS||(_.PDFJS={}),_.PDFJS.pdfBug=!1,PDFJS.VERBOSITY_LEVELS={errors:0,warnings:1,infos:5};PDFJS.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};var g=PDFJS.UNSUPPORTED_FEATURES={unknown:"unknown",forms:"forms",javaScript:"javaScript",smask:"smask",shadingPattern:"shadingPattern",font:"font"},y=PDFJS.UnsupportedManager=function(){var t=[];return{listen:function listen(e){t.push(e)},notify:function notify(e){r("Unsupported feature \""+e+"\"");for(var n=0,i=t.length;n<i;n++){t[n](e)}}}}();PDFJS.isValidUrl=function(t,e){if(!t)return!1;var n=/^[a-z][a-z0-9+\-.]*(?=:)/i.exec(t);if(!n)return e;switch(n=n[0].toLowerCase()){case"http":case"https":case"ftp":case"mailto":case"tel":return!0;default:return!1;}},PDFJS.shadow=s;PDFJS.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};var v=function(){function t(t,e){this.name="PasswordException",this.message=t,this.code=e}return t.prototype=new Error,t.constructor=t,t}();PDFJS.PasswordException=v;var b=function(){function t(t,e){this.name="UnknownErrorException",this.message=t,this.details=e}return t.prototype=new Error,t.constructor=t,t}();PDFJS.UnknownErrorException=b;var w=function(){function t(t){this.name="InvalidPDFException",this.message=t}return t.prototype=new Error,t.constructor=t,t}();PDFJS.InvalidPDFException=w;var x=function(){function t(t){this.name="MissingPDFException",this.message=t}return t.prototype=new Error,t.constructor=t,t}();PDFJS.MissingPDFException=x;var S=function(){function t(t,e){this.name="UnexpectedResponseException",this.message=t,this.status=e}return t.prototype=new Error,t.constructor=t,t}();PDFJS.UnexpectedResponseException=S;(function(){function t(t){this.message=t}t.prototype=new Error,t.prototype.name="NotImplementedException",t.constructor=t})(),function(){function t(t,e){this.begin=t,this.end=e,this.message="Missing data ["+t+", "+e+")"}t.prototype=new Error,t.prototype.name="MissingDataException",t.constructor=t}(),function(){function t(t){this.message=t}t.prototype=new Error,t.prototype.name="XRefParseException",t.constructor=t}();Object.defineProperty(PDFJS,"isLittleEndian",{configurable:!0,get:function get(){return s(PDFJS,"isLittleEndian",u())}}),Object.defineProperty(PDFJS,"hasCanvasTypedArrays",{configurable:!0,get:function get(){return s(PDFJS,"hasCanvasTypedArrays",p())}});!function(){function t(t,e){this.buffer=t,this.byteLength=t.length,this.length=void 0===e?this.byteLength>>2:e,n(this.length)}function e(t){return{get:function get(){var e=this.buffer,n=t<<2;return(e[n]|e[n+1]<<8|e[n+2]<<16|e[n+3]<<24)>>>0},set:function set(e){var n=this.buffer,i=t<<2;n[i]=255&e,n[i+1]=255&e>>8,n[i+2]=255&e>>16,n[i+3]=255&e>>>24}}}function n(n){for(;i<n;){Object.defineProperty(t.prototype,i,e(i)),i++}}t.prototype=Object.create(null);var i=0}();var E=PDFJS.Util=function(){function t(){}var e=["rgb(",0,",",0,",",0,")"];return t.makeCssRgb=function(t,n,i){return e[1]=t,e[3]=n,e[5]=i,e.join("")},t.transform=function(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]},t.applyTransform=function(t,e){return[t[0]*e[0]+t[1]*e[2]+e[4],t[0]*e[1]+t[1]*e[3]+e[5]]},t.applyInverseTransform=function(t,e){var n=e[0]*e[3]-e[1]*e[2];return[(t[0]*e[3]-t[1]*e[2]+e[2]*e[5]-e[4]*e[3])/n,(-t[0]*e[1]+t[1]*e[0]+e[4]*e[1]-e[5]*e[0])/n]},t.getAxialAlignedBoundingBox=function(e,n){var i=t.applyTransform(e,n),r=t.applyTransform(e.slice(2,4),n),o=t.applyTransform([e[0],e[3]],n),a=t.applyTransform([e[2],e[1]],n);return[_Mathmin(i[0],r[0],o[0],a[0]),_Mathmin(i[1],r[1],o[1],a[1]),_Mathmax(i[0],r[0],o[0],a[0]),_Mathmax(i[1],r[1],o[1],a[1])]},t.inverseTransform=function(t){var e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]},t.apply3dTransform=function(t,e){return[t[0]*e[0]+t[1]*e[1]+t[2]*e[2],t[3]*e[0]+t[4]*e[1]+t[5]*e[2],t[6]*e[0]+t[7]*e[1]+t[8]*e[2]]},t.singularValueDecompose2dScale=function(t){var e=[t[0],t[2],t[1],t[3]],n=t[0]*e[0]+t[1]*e[2],i=t[0]*e[1]+t[1]*e[3],r=t[2]*e[0]+t[3]*e[2],o=t[2]*e[1]+t[3]*e[3],a=(n+o)/2,s=_Mathsqrt((n+o)*(n+o)-4*(n*o-r*i))/2;return[_Mathsqrt(a+s||1),_Mathsqrt(a-s||1)]},t.normalizeRect=function(t){var e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e},t.intersect=function(e,n){function i(t,e){return t-e}var r=[e[0],e[2],n[0],n[2]].sort(i),o=[e[1],e[3],n[1],n[3]].sort(i),a=[];return e=t.normalizeRect(e),n=t.normalizeRect(n),(r[0]===e[0]&&r[1]===n[0]||r[0]===n[0]&&r[1]===e[0])&&(a[0]=r[1],a[2]=r[2],(o[0]===e[1]&&o[1]===n[1]||o[0]===n[1]&&o[1]===e[1])&&(a[1]=o[1],a[3]=o[2],a))},t.sign=function(t){return 0>t?-1:1},t.appendToArray=function(t,e){Array.prototype.push.apply(t,e)},t.prependToArray=function(t,e){Array.prototype.unshift.apply(t,e)},t.extendObj=function(t,e){for(var n in e){t[n]=e[n]}},t.getInheritableProperty=function(t,e){for(;t&&!t.has(e);){t=t.get("Parent")}return t?t.get(e):null},t.inherit=function(t,e,n){t.prototype=Object.create(e.prototype),t.prototype.constructor=t;for(var i in n){t.prototype[i]=n[i]}},t.loadScript=function(t,e){var n=document.createElement("script"),i=!1;n.setAttribute("src",t),e&&(n.onload=function(){i||e(),i=!0}),document.getElementsByTagName("head")[0].appendChild(n)},t}();PDFJS.PageViewport=function(){function t(t,e,n,i,r,o){this.viewBox=t,this.scale=e,this.rotation=n,this.offsetX=i,this.offsetY=r;var a,s,l,c,h=(t[2]+t[0])/2,u=(t[3]+t[1])/2;switch(n%=360,n=0>n?n+360:n){case 180:a=-1,s=0,l=0,c=1;break;case 90:a=0,s=1,l=1,c=0;break;case 270:a=0,s=-1,l=-1,c=0;break;default:a=1,s=0,l=0,c=-1;}o&&(l=-l,c=-c);var p,d,f,m;0===a?(p=_Mathabs(u-t[1])*e+i,d=_Mathabs(h-t[0])*e+r,f=_Mathabs(t[3]-t[1])*e,m=_Mathabs(t[2]-t[0])*e):(p=_Mathabs(h-t[0])*e+i,d=_Mathabs(u-t[1])*e+r,f=_Mathabs(t[2]-t[0])*e,m=_Mathabs(t[3]-t[1])*e),this.transform=[a*e,s*e,l*e,c*e,p-a*e*h-l*e*u,d-s*e*h-c*e*u],this.width=f,this.height=m,this.fontScale=e}return t.prototype={clone:function clone(e){var n="scale"in(e=e||{})?e.scale:this.scale,i="rotation"in e?e.rotation:this.rotation;return new t(this.viewBox.slice(),n,i,this.offsetX,this.offsetY,e.dontFlip)},convertToViewportPoint:function convertToViewportPoint(t,e){return E.applyTransform([t,e],this.transform)},convertToViewportRectangle:function convertToViewportRectangle(t){var e=E.applyTransform([t[0],t[1]],this.transform),n=E.applyTransform([t[2],t[3]],this.transform);return[e[0],e[1],n[0],n[1]]},convertToPdfPoint:function convertToPdfPoint(t,e){return E.applyInverseTransform([t,e],this.transform)}},t}();PDFJS.createPromiseCapability=d,function(){function t(t){this._status=e,this._handlers=[];try{t.call(this,this._resolve.bind(this),this._reject.bind(this))}catch(t){this._reject(t)}}if(_.Promise)return"function"!=typeof _.Promise.all&&(_.Promise.all=function(t){var e,n,i=0,r=[],o=new _.Promise(function(t,i){e=t,n=i});return t.forEach(function(t,o){i++,t.then(function(t){r[o]=t,0===--i&&e(r)},n)}),0===i&&e(r),o}),"function"!=typeof _.Promise.resolve&&(_.Promise.resolve=function(t){return new _.Promise(function(e){e(t)})}),"function"!=typeof _.Promise.reject&&(_.Promise.reject=function(t){return new _.Promise(function(e,n){n(t)})}),void("function"!=typeof _.Promise.prototype.catch&&(_.Promise.prototype.catch=function(t){return _.Promise.prototype.then(void 0,t)}));var e=0,n=2,i={handlers:[],running:!1,unhandledRejections:[],pendingRejectionCheck:!1,scheduleHandlers:function scheduleHandlers(t){t._status!==e&&(this.handlers=this.handlers.concat(t._handlers),t._handlers=[],this.running||(this.running=!0,setTimeout(this.runHandlers.bind(this),0)))},runHandlers:function runHandlers(){for(var t=Date.now()+1;0<this.handlers.length;){var e=this.handlers.shift(),i=e.thisPromise._status,r=e.thisPromise._value;try{1===i?"function"==typeof e.onResolve&&(r=e.onResolve(r)):"function"==typeof e.onReject&&(r=e.onReject(r),i=1,e.thisPromise._unhandledRejection&&this.removeUnhandeledRejection(e.thisPromise))}catch(t){i=n,r=t}if(e.nextPromise._updateStatus(i,r),Date.now()>=t)break}0<this.handlers.length?setTimeout(this.runHandlers.bind(this),0):this.running=!1},addUnhandledRejection:function addUnhandledRejection(t){this.unhandledRejections.push({promise:t,time:Date.now()}),this.scheduleRejectionCheck()},removeUnhandeledRejection:function removeUnhandeledRejection(t){t._unhandledRejection=!1;for(var e=0;e<this.unhandledRejections.length;e++){this.unhandledRejections[e].promise===t&&(this.unhandledRejections.splice(e),e--)}},scheduleRejectionCheck:function scheduleRejectionCheck(){this.pendingRejectionCheck||(this.pendingRejectionCheck=!0,setTimeout(function(){this.pendingRejectionCheck=!1;for(var t=Date.now(),e=0;e<this.unhandledRejections.length;e++){if(500<t-this.unhandledRejections[e].time){var n=this.unhandledRejections[e].promise._value,i="Unhandled rejection: "+n;n.stack&&(i+="\n"+n.stack),r(i),this.unhandledRejections.splice(e),e--}}this.unhandledRejections.length&&this.scheduleRejectionCheck()}.bind(this),500))}};t.all=function(e){var i,r,o=new t(function(t,e){i=t,r=e}),a=e.length,s=[];if(0===a)return i(s),o;for(var l=0,c=e.length;l<c;++l){var h=e[l],u=function(t){return function(e){o._status!==n&&(s[t]=e,0===--a&&i(s))}}(l);t.isPromise(h)?h.then(u,function(t){o._status!==n&&(s=[],r(t))}):u(h)}return o},t.isPromise=function(t){return t&&"function"==typeof t.then},t.resolve=function(e){return new t(function(t){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.prototype={_status:null,_value:null,_handlers:null,_unhandledRejection:null,_updateStatus:function _updateStatus(e,r){1!==this._status&&this._status!==n&&(1===e&&t.isPromise(r)?r.then(this._updateStatus.bind(this,1),this._updateStatus.bind(this,n)):(this._status=e,this._value=r,e===n&&0===this._handlers.length&&(this._unhandledRejection=!0,i.addUnhandledRejection(this)),i.scheduleHandlers(this)))},_resolve:function _resolve(t){this._updateStatus(1,t)},_reject:function _reject(t){this._updateStatus(n,t)},then:function then(e,n){var r=new t(function(t,e){this.resolve=t,this.reject=e});return this._handlers.push({thisPromise:this,onResolve:e,onReject:n,nextPromise:r}),i.scheduleHandlers(this),r},catch:function _catch(t){return this.then(void 0,t)}},_.Promise=t}();!function(){function t(t,e,n){for(;t.length<n;){t+=e}return t}(function(){this.started={},this.times=[],this.enabled=!0}).prototype={time:function time(t){this.enabled&&(t in this.started&&r("Timer is already running for "+t),this.started[t]=Date.now())},timeEnd:function timeEnd(t){this.enabled&&(t in this.started||r("Timer has not been started for "+t),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t])},toString:function toString(){var e,n,i=this.times,r="",o=0;for(e=0,n=i.length;e<n;++e){var a=i[e].name;a.length>o&&(o=a.length)}for(e=0,n=i.length;e<n;++e){var s=i[e],l=s.end-s.start;r+=t(s.name," ",o)+" "+l+"ms\n"}return r}}}();PDFJS.createBlob=function(t,e){if("undefined"!=typeof Blob)return new Blob([t],{type:e});var n=new MozBlobBuilder;return n.append(t),n.getBlob(e)},PDFJS.createObjectURL=function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return function(e,n){if(!PDFJS.disableCreateObjectURL&&"undefined"!=typeof URL&&URL.createObjectURL){var i=PDFJS.createBlob(e,n);return URL.createObjectURL(i)}for(var r="data:"+n+";base64,",o=0,a=e.length;o<a;o+=3){var s=255&e[o],l=255&e[o+1],c=255&e[o+2],p=o+1<a?(15&l)<<2|c>>6:64,d=o+2<a?63&c:64;r+=t[s>>2]+t[(3&s)<<4|l>>4]+t[p]+t[d]}return r}}(),function(t,e){this.name=t,this.comObj=e,this.callbackIndex=1,this.postMessageTransfers=!0;var n=this.callbacksCapabilities={},i=this.actionHandler={};i.console_log=[function(t){console.log.apply(console,t)}],i.console_error=[function(t){console.error.apply(console,t)}],i._unsupported_feature=[function(t){y.notify(t)}],e.onmessage=function(t){var r=t.data;if(r.isReply){var a=r.callbackId;if(r.callbackId in n){var s=n[a];delete n[a],"error"in r?s.reject(r.error):s.resolve(r.data)}else o("Cannot resolve callback "+a)}else if(r.action in i){var l=i[r.action];r.callbackId?Promise.resolve().then(function(){return l[0].call(l[1],r.data)}).then(function(t){e.postMessage({isReply:!0,callbackId:r.callbackId,data:t})},function(t){e.postMessage({isReply:!0,callbackId:r.callbackId,error:t})}):l[0].call(l[1],r.data)}else o("Unknown action from worker: "+r.action)}}.prototype={on:function on(t,e,n){var i=this.actionHandler;i[t]&&o("There is already an actionName called \""+t+"\""),i[t]=[e,n]},send:function send(t,e,n){this.postMessage({action:t,data:e},n)},sendWithPromise:function sendWithPromise(t,e,n){var i=this.callbackIndex++,o=d();this.callbacksCapabilities[i]=o;try{this.postMessage({action:t,data:e,callbackId:i},n)}catch(t){o.reject(t)}return o.promise},postMessage:function postMessage(t,e){e&&this.postMessageTransfers?this.comObj.postMessage(t,e):this.comObj.postMessage(t)}},"undefined"!==typeof t&&t.exports&&(t.exports=f)},function(t,e,n){"use strict";function i(t,e){if(!babelHelpers.instanceof(t,e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=babelHelpers.typeof(e)&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+babelHelpers.typeof(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(12),s=n(0),l=function(t){function e(n,o){i(this,e);var a=r(this,t.call(this));a._id=o,a._url=n.url,a._header={},a._buffer=null;try{new TextDecoder().decode(n.mhdBuffer).split("\n").forEach(function(t){var e=t.split("=");2===e.length&&(a._header[e[0].trim()]=e[1].trim())}),a._header.DimSize=a._header.DimSize.split(" "),a._header.ElementSpacing=a._header.ElementSpacing.split(" "),a._header.TransformMatrix=a._header.TransformMatrix.split(" "),a._header.Offset=a._header.Offset.split(" "),a._buffer=n.rawBuffer}catch(t){window.console.log("ooops... :(")}return a}return o(e,t),e.prototype.rightHanded=function(){var t=this._header.AnatomicalOrientation;return this._rightHanded="RAS"===t||"RPI"===t||"LPS"===t||"LAI"===t,this._rightHanded},e.prototype.seriesInstanceUID=function(){return this._url},e.prototype.numberOfFrames=function(){return parseInt(this._header.DimSize[2],10)},e.prototype.sopInstanceUID=function(){return 0<arguments.length&&void 0!==arguments[0]?arguments[0]:0},e.prototype.rows=function(){0<arguments.length&&void 0!==arguments[0]&&arguments[0];return parseInt(this._header.DimSize[1],10)},e.prototype.columns=function(){0<arguments.length&&void 0!==arguments[0]&&arguments[0];return parseInt(this._header.DimSize[0],10)},e.prototype.pixelType=function(){0<arguments.length&&void 0!==arguments[0]&&arguments[0];return 0},e.prototype.bitsAllocated=function(){0<arguments.length&&void 0!==arguments[0]&&arguments[0];var t=1;return"MET_UCHAR"===this._header.ElementType||"MET_CHAR"===this._header.ElementType?t=8:"MET_USHORT"===this._header.ElementType||"MET_SHORT"===this._header.ElementType?t=16:"MET_UINT"!==this._header.ElementType&&"MET_INT"!==this._header.ElementType&&"MET_UFLOAT"!==this._header.ElementType&&"MET_FLOAT"!==this._header.ElementType||(t=32),t},e.prototype.pixelSpacing=function(){0<arguments.length&&void 0!==arguments[0]&&arguments[0];return[parseFloat(this._header.ElementSpacing[1],10),parseFloat(this._header.ElementSpacing[0],10),parseFloat(this._header.ElementSpacing[2],10)]},e.prototype.imageOrientation=function(){0<arguments.length&&void 0!==arguments[0]&&arguments[0];var t=this._header.AnatomicalOrientation.match(/L/)?-1:1,e=this._header.AnatomicalOrientation.match(/P/)?-1:1,n=new s.f(parseFloat(this._header.TransformMatrix[0])*t,parseFloat(this._header.TransformMatrix[1])*e,parseFloat(this._header.TransformMatrix[2]));n.normalize();var i=new s.f(parseFloat(this._header.TransformMatrix[3])*t,parseFloat(this._header.TransformMatrix[4])*e,parseFloat(this._header.TransformMatrix[5]));return i.normalize(),[n.x,n.y,n.z,i.x,i.y,i.z]},e.prototype.imagePosition=function(){0<arguments.length&&void 0!==arguments[0]&&arguments[0];return[parseFloat(this._header.Offset[0]),parseFloat(this._header.Offset[1]),parseFloat(this._header.Offset[2])]},e.prototype.extractPixelData=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;return this._decompressUncompressed(t)},e.prototype._decompressUncompressed=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=this._buffer,n=this.numberOfChannels(),i=this.rows(t)*this.columns(t)*n;this.rightHanded()||(t=this.numberOfFrames()-1-t);var r=t*i;return"MET_CHAR"===this._header.ElementType?new Int8Array(e,r,i):"MET_UCHAR"===this._header.ElementType?new Uint8Array(e,r,i):"MET_SHORT"===this._header.ElementType?(r*=2,new Int16Array(e,r,i)):"MET_USHORT"===this._header.ElementType?(r*=2,new Uint16Array(e,r,i)):"MET_INT"===this._header.ElementType?(r*=4,new Int32Array(e,r,i)):"MET_UINT"===this._header.ElementType?(r*=4,new Uint32Array(e,r,i)):"MET_FLOAT"===this._header.ElementType?(r*=4,new Float32Array(e,r,i)):void 0},e}(a.a);e.a=l},function(t,e,n){"use strict";var i=i||{};i.NIFTI1=i.NIFTI1||n(80),i.NIFTI2=i.NIFTI2||n(162),i.Utils=i.Utils||n(28);var r=r||n(19);i.isNIFTI1=function(t){var e,n,r,o;return e=new DataView(t),n=e.getUint8(i.NIFTI1.MAGIC_NUMBER_LOCATION),r=e.getUint8(i.NIFTI1.MAGIC_NUMBER_LOCATION+1),o=e.getUint8(i.NIFTI1.MAGIC_NUMBER_LOCATION+2),!(n!==i.NIFTI1.MAGIC_NUMBER[0]||r!==i.NIFTI1.MAGIC_NUMBER[1]||o!==i.NIFTI1.MAGIC_NUMBER[2])},i.isNIFTI2=function(t){var e,n,r,o;return e=new DataView(t),n=e.getUint8(i.NIFTI2.MAGIC_NUMBER_LOCATION),r=e.getUint8(i.NIFTI2.MAGIC_NUMBER_LOCATION+1),o=e.getUint8(i.NIFTI2.MAGIC_NUMBER_LOCATION+2),!(n!==i.NIFTI2.MAGIC_NUMBER[0]||r!==i.NIFTI2.MAGIC_NUMBER[1]||o!==i.NIFTI2.MAGIC_NUMBER[2])},i.isNIFTI=function(t){return i.isNIFTI1(t)||i.isNIFTI2(t)},i.isCompressed=function(t){var e,n,r;if(t){if(e=new DataView(t),n=e.getUint8(0),r=e.getUint8(1),n===i.Utils.GUNZIP_MAGIC_COOKIE1)return!0;if(r===i.Utils.GUNZIP_MAGIC_COOKIE2)return!0}return!1},i.decompress=function(t){return r.inflate(t).buffer},i.readHeader=function(t){var e=null;return i.isCompressed(t)&&(t=i.decompress(t)),i.isNIFTI1(t)?e=new i.NIFTI1:i.isNIFTI2(t)&&(e=new i.NIFTI2),e?e.readHeader(t):console.error("That file does not appear to be NIFTI!"),e},i.hasExtension=function(t){return 0!=t.extensionFlag[0]},i.readImage=function(t,e){var n=t.vox_offset,i=1,r=1;t.dims[4]&&(i=t.dims[4]),t.dims[5]&&(r=t.dims[5]);var o=t.dims[1]*t.dims[2]*t.dims[3]*i*r*(t.numBitsPerVoxel/8);return e.slice(n,n+o)},i.readExtension=function(t,e){var n=t.getExtensionLocation(),i=t.extensionSize;return e.slice(n,n+i)},i.readExtensionData=function(t,e){var n=t.getExtensionLocation(),i=t.extensionSize;return e.slice(n+8,n+i-8)},"undefined"!==typeof t&&t.exports&&(t.exports=i)},function(t,e,n){"use strict";var i=i||{};i.Utils=i.Utils||n(28),i.NIFTI1=i.NIFTI1||n(80),i.NIFTI2=i.NIFTI2||function(){this.littleEndian=!1,this.dim_info=0,this.dims=[],this.intent_p1=0,this.intent_p2=0,this.intent_p3=0,this.intent_code=0,this.datatypeCode=0,this.numBitsPerVoxel=0,this.slice_start=0,this.slice_end=0,this.slice_code=0,this.pixDims=[],this.vox_offset=0,this.scl_slope=1,this.scl_inter=0,this.xyzt_units=0,this.cal_max=0,this.cal_min=0,this.slice_duration=0,this.toffset=0,this.description="",this.aux_file="",this.intent_name="",this.qform_code=0,this.sform_code=0,this.quatern_b=0,this.quatern_c=0,this.quatern_d=0,this.qoffset_x=0,this.qoffset_y=0,this.qoffset_z=0,this.affine=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],this.magic=0,this.extensionFlag=[0,0,0,0]},i.NIFTI2.MAGIC_COOKIE=540,i.NIFTI2.MAGIC_NUMBER_LOCATION=4,i.NIFTI2.MAGIC_NUMBER=[110,43,50,0,13,10,26,10],i.NIFTI2.prototype.readHeader=function(t){var e,n,r,o,a=new DataView(t),s=i.Utils.getIntAt(a,0,this.littleEndian);if(s!==i.NIFTI2.MAGIC_COOKIE&&(this.littleEndian=!0,s=i.Utils.getIntAt(a,0,this.littleEndian)),s!==i.NIFTI2.MAGIC_COOKIE)throw new Error("This does not appear to be a NIFTI file!");for(this.datatypeCode=i.Utils.getShortAt(a,12,this.littleEndian),this.numBitsPerVoxel=i.Utils.getShortAt(a,14,this.littleEndian),e=0;8>e;e+=1){o=16+8*e,this.dims[e]=i.Utils.getLongAt(a,o,this.littleEndian)}for(this.intent_p1=i.Utils.getDoubleAt(a,80,this.littleEndian),this.intent_p2=i.Utils.getDoubleAt(a,88,this.littleEndian),this.intent_p3=i.Utils.getDoubleAt(a,96,this.littleEndian),e=0;8>e;e+=1){o=104+8*e,this.pixDims[e]=i.Utils.getDoubleAt(a,o,this.littleEndian)}for(this.vox_offset=i.Utils.getLongAt(a,168,this.littleEndian),this.scl_slope=i.Utils.getDoubleAt(a,176,this.littleEndian),this.scl_inter=i.Utils.getDoubleAt(a,184,this.littleEndian),this.cal_max=i.Utils.getDoubleAt(a,192,this.littleEndian),this.cal_min=i.Utils.getDoubleAt(a,200,this.littleEndian),this.slice_duration=i.Utils.getDoubleAt(a,208,this.littleEndian),this.toffset=i.Utils.getDoubleAt(a,216,this.littleEndian),this.slice_start=i.Utils.getLongAt(a,224,this.littleEndian),this.slice_end=i.Utils.getLongAt(a,232,this.littleEndian),this.description=i.Utils.getStringAt(a,240,320),this.aux_file=i.Utils.getStringAt(a,320,344),this.qform_code=i.Utils.getIntAt(a,344,this.littleEndian),this.sform_code=i.Utils.getIntAt(a,348,this.littleEndian),this.quatern_b=i.Utils.getDoubleAt(a,352,this.littleEndian),this.quatern_c=i.Utils.getDoubleAt(a,360,this.littleEndian),this.quatern_d=i.Utils.getDoubleAt(a,368,this.littleEndian),this.qoffset_x=i.Utils.getDoubleAt(a,376,this.littleEndian),this.qoffset_y=i.Utils.getDoubleAt(a,384,this.littleEndian),this.qoffset_z=i.Utils.getDoubleAt(a,392,this.littleEndian),n=0;3>n;n+=1){for(r=0;4>r;r+=1){o=400+8*(4*n+r),this.affine[n][r]=i.Utils.getDoubleAt(a,o,this.littleEndian)}}this.affine[3][0]=0,this.affine[3][1]=0,this.affine[3][2]=0,this.affine[3][3]=1,this.slice_code=i.Utils.getIntAt(a,496,this.littleEndian),this.xyzt_units=i.Utils.getIntAt(a,500,this.littleEndian),this.intent_code=i.Utils.getIntAt(a,504,this.littleEndian),this.intent_name=i.Utils.getStringAt(a,508,524),this.dim_info=i.Utils.getByteAt(a,524),a.byteLength>i.NIFTI2.MAGIC_COOKIE&&(this.extensionFlag[0]=i.Utils.getByteAt(a,540),this.extensionFlag[1]=i.Utils.getByteAt(a,541),this.extensionFlag[2]=i.Utils.getByteAt(a,542),this.extensionFlag[3]=i.Utils.getByteAt(a,543),this.extensionFlag[0]&&(this.extensionSize=this.getExtensionSize(a),this.extensionCode=this.getExtensionCode(a)))},i.NIFTI2.prototype.toFormattedString=function(){var t=i.Utils.formatNumber,e="";return e+="Datatype = "+ +this.datatypeCode+" ("+this.getDatatypeCodeString(this.datatypeCode)+")\n",e+="Bits Per Voxel =  = "+this.numBitsPerVoxel+"\n",e+="Image Dimensions (1-8): "+this.dims[0]+", "+this.dims[1]+", "+this.dims[2]+", "+this.dims[3]+", "+this.dims[4]+", "+this.dims[5]+", "+this.dims[6]+", "+this.dims[7]+"\n",e+="Intent Parameters (1-3): "+this.intent_p1+", "+this.intent_p2+", "+this.intent_p3+"\n",e+="Voxel Dimensions (1-8): "+t(this.pixDims[0])+", "+t(this.pixDims[1])+", "+t(this.pixDims[2])+", "+t(this.pixDims[3])+", "+t(this.pixDims[4])+", "+t(this.pixDims[5])+", "+t(this.pixDims[6])+", "+t(this.pixDims[7])+"\n",e+="Image Offset = "+this.vox_offset+"\n",e+="Data Scale:  Slope = "+t(this.scl_slope)+"  Intercept = "+t(this.scl_inter)+"\n",e+="Display Range:  Max = "+t(this.cal_max)+"  Min = "+t(this.cal_min)+"\n",e+="Slice Duration = "+this.slice_duration+"\n",e+="Time Axis Shift = "+this.toffset+"\n",e+="Slice Start = "+this.slice_start+"\n",e+="Slice End = "+this.slice_end+"\n",e+="Description: \""+this.description+"\"\n",e+="Auxiliary File: \""+this.aux_file+"\"\n",e+="Q-Form Code = "+this.qform_code+" ("+this.getTransformCodeString(this.qform_code)+")\n",e+="S-Form Code = "+this.sform_code+" ("+this.getTransformCodeString(this.sform_code)+")\n",e+="Quaternion Parameters:  b = "+t(this.quatern_b)+"  c = "+t(this.quatern_c)+"  d = "+t(this.quatern_d)+"\n",e+="Quaternion Offsets:  x = "+this.qoffset_x+"  y = "+this.qoffset_y+"  z = "+this.qoffset_z+"\n",e+="S-Form Parameters X: "+t(this.affine[0][0])+", "+t(this.affine[0][1])+", "+t(this.affine[0][2])+", "+t(this.affine[0][3])+"\n",e+="S-Form Parameters Y: "+t(this.affine[1][0])+", "+t(this.affine[1][1])+", "+t(this.affine[1][2])+", "+t(this.affine[1][3])+"\n",e+="S-Form Parameters Z: "+t(this.affine[2][0])+", "+t(this.affine[2][1])+", "+t(this.affine[2][2])+", "+t(this.affine[2][3])+"\n",e+="Slice Code = "+this.slice_code+"\n",e+="Units Code = "+this.xyzt_units+" ("+this.getUnitsCodeString(i.NIFTI1.SPATIAL_UNITS_MASK&this.xyzt_units)+", "+this.getUnitsCodeString(i.NIFTI1.TEMPORAL_UNITS_MASK&this.xyzt_units)+")\n",e+="Intent Code = "+this.intent_code+"\n",e+="Intent Name: \""+this.intent_name+"\"\n",e+="Dim Info = "+this.dim_info+"\n"},i.NIFTI2.prototype.getExtensionLocation=function(){return i.NIFTI2.MAGIC_COOKIE+4},i.NIFTI2.prototype.getExtensionSize=i.NIFTI1.prototype.getExtensionSize,i.NIFTI2.prototype.getExtensionCode=i.NIFTI1.prototype.getExtensionCode,i.NIFTI2.prototype.getDatatypeCodeString=i.NIFTI1.prototype.getDatatypeCodeString,i.NIFTI2.prototype.getTransformCodeString=i.NIFTI1.prototype.getTransformCodeString,i.NIFTI2.prototype.getUnitsCodeString=i.NIFTI1.prototype.getUnitsCodeString,i.NIFTI2.prototype.getQformMat=i.NIFTI1.prototype.getQformMat,i.NIFTI2.prototype.convertNiftiQFormToNiftiSForm=i.NIFTI1.prototype.convertNiftiQFormToNiftiSForm,i.NIFTI2.prototype.convertNiftiSFormToNEMA=i.NIFTI1.prototype.convertNiftiSFormToNEMA,i.NIFTI2.prototype.nifti_mat33_mul=i.NIFTI1.prototype.nifti_mat33_mul,i.NIFTI2.prototype.nifti_mat33_determ=i.NIFTI1.prototype.nifti_mat33_determ,"undefined"!==typeof t&&t.exports&&(t.exports=i.NIFTI2)},function(t,e,n){"use strict";function i(t){return t.replace("\\","\\\\").replace("\n","\\n")}function r(t){return t.split("\\\\").map(function(t){return t.replace("\\n","\n")}).join("\\")}function o(t,e,n,i){var r,o=l(t);switch(t){case"data":case"buffer":case"keys":case"version":break;case"content":case"number":case"sampleUnits":case"space":r=o+": "+e;break;case"blockSize":case"lineSkip":case"byteSkip":case"dimension":case"spaceDimension":L("number"==typeof e||babelHelpers.instanceof(e,Number),"Field "+t+" should at least contain a number!"),r=o+": "+e;break;case"min":case"max":case"oldMin":case"oldMax":L("number"==typeof e||babelHelpers.instanceof(e,Number),"Field "+t+" should contain a number!"),r=o+": "+e;break;case"spaceOrigin":L(e.length===i,"Field "+t+" should be a list with length equal to the space dimension!"),e.forEach(function(e){L("number"==typeof e||babelHelpers.instanceof(e,Number),"Field "+t+" should be a list of numbers!")}),r=o+": ("+e.join(",")+")";break;case"labels":case"units":case"spaceUnits":L(void 0!==e.length&&e.length==n,"Field "+t+" should be a list with length equal to the dimension!"),e.forEach(function(e){L("string"==typeof e||babelHelpers.instanceof(e,String),"Field "+t+" should be a list of numbers!")}),r=o+": "+e.map(d).join(" ");break;case"sizes":L(void 0!==e.length&&e.length==n,"Field "+t+" should be a list with length equal to the dimension!"),e.forEach(function(e){L("number"==typeof e||babelHelpers.instanceof(e,Number),"Field "+t+" should be a list of numbers!")}),r=o+": "+e.join(" ");break;case"spacings":case"thicknesses":case"axisMins":case"axisMaxs":L(void 0!==e.length&&e.length==n,"Field "+t+" should be a list with length equal to the dimension!"),e.forEach(function(e){L("number"==typeof e||babelHelpers.instanceof(e,Number),"Field "+t+" should be a list of numbers!")}),r=o+": "+e.join(" ");break;case"spaceDirections":L(void 0!==e.length&&e.length===n,"Field "+t+" should be a list with length equal to the dimension!"),e.forEach(function(e){L(null===e||void 0!==e.length&&e.length===i,"The elements of field "+t+" should be lists with length equal to the space dimension!"),null!==e&&e.forEach(function(e){L("number"==typeof e||babelHelpers.instanceof(e,Number),"The elements of field "+t+" should be lists of numbers!")})}),r=o+": "+e.map(function(t){return null===t?"none":"("+t.join(",")+")"}).join(" ");break;case"measurementFrame":L(void 0!==e.length&&e.length===i,"Field "+t+" should be a list with length equal to the space dimension!"),e.forEach(function(e){L(null===e||void 0!==e.length&&e.length===i,"The elements of field "+t+" should be lists with length equal to the space dimension!"),null!==e&&e.forEach(function(e){L("number"==typeof e||babelHelpers.instanceof(e,Number),"The elements of field "+t+" should be lists of numbers!")})}),r=o+": "+e.map(function(t){return null===t?"none":"("+t.join(",")+")"}).join(" ");break;case"type":case"encoding":case"endian":L("string"==typeof e||babelHelpers.instanceof(e,String),"Field "+t+" should contain a string!"),r=o+": "+e;break;case"dataFile":e.length||e.files&&"subdim"in e||(r=o+": "+b(e));break;case"centers":case"kinds":L(void 0!==e.length&&e.length==n,"Field "+t+" should be a list with length equal to the dimension!"),r=o+": "+e.map(S).join(" ");break;default:console.warn("Unrecognized NRRD field: "+t+", skipping.");}return r}function a(t,e){switch(t){case"content":case"number":case"sampleUnits":break;case"dimension":case"blockSize":case"lineSkip":case"byteSkip":case"spaceDimension":e=c(e);break;case"min":case"max":case"oldMin":case"oldMax":e=h(e);break;case"spaceOrigin":e=u(e);break;case"labels":case"units":case"spaceUnits":e=f(e,p);break;case"sizes":e=f(e,c);break;case"spacings":case"thicknesses":case"axisMins":case"axisMaxs":e=f(e,h);break;case"spaceDirections":case"measurementFrame":e=f(e,u);break;case"type":e=m(e);break;case"encoding":e=_(e);break;case"endian":e=y(e);break;case"dataFile":e=v(e);break;case"centers":e=f(e,w);break;case"kinds":e=f(e,x);break;case"space":e=g(e);break;default:console.warn("Unrecognized NRRD field: "+t);}return e}function s(t){return(t=t.toLowerCase())in F?F[t]:t}function l(t){return t in N?N[t]:t}function c(t){var e=parseInt(t,10);if(_NumberisNaN(e))throw new Error("Malformed NRRD integer: "+t);return e}function h(t){if(0<=(t=t.toLowerCase()).indexOf("nan"))return NaN;if(0<=t.indexOf("-inf"))return-1/0;if(0<=t.indexOf("inf"))return 1/0;var e=parseFloat(t);if(_NumberisNaN(e))throw new Error("Malformed NRRD float: "+t);return e}function u(t){if("none"==t)return null;if(2>t.length||"("!==t[0]||")"!==t[t.length-1])throw new Error("Malformed NRRD vector: "+t);return t.slice(1,-1).split(",").map(h)}function p(t){if(2>length||"\""!=t[0]||"\""!=t[t.length-1])throw new Error("Invalid NRRD quoted string: "+t);return t.slice(1,-1).replace("\\\"","\"")}function d(t){return"\""+t.replace("\"","\\\"")+"\""}function f(t,e){return t.split(U).map(e)}function m(t){switch(t.toLowerCase()){case"signed char":case"int8":case"int8_t":return"int8";case"uchar":case"unsigned char":case"uint8":case"uint8_t":return"uint8";case"short":case"short int":case"signed short":case"signed short int":case"int16":case"int16_t":return"int16";case"ushort":case"unsigned short":case"unsigned short int":case"uint16":case"uint16_t":return"uint16";case"int":case"signed int":case"int32":case"int32_t":return"int32";case"uint":case"unsigned int":case"uint32":case"uint32_t":return"uint32";case"longlong":case"long long":case"long long int":case"signed long long":case"signed long long int":case"int64":case"int64_t":return"int64";case"ulonglong":case"unsigned long long":case"unsigned long long int":case"uint64":case"uint64_t":return"uint64";case"float":return"float";case"double":return"double";case"block":return"block";default:return console.warn("Unrecognized NRRD type: "+t),t;}}function _(t){switch(t.toLowerCase()){case"raw":return"raw";case"txt":case"text":case"ascii":return"ascii";case"hex":return"hex";case"gz":case"gzip":return"gzip";case"bz2":case"bzip2":return"bzip2";default:return console.warn("Unrecognized NRRD encoding: "+t),t;}}function g(t){switch(t.toLowerCase()){case"right-anterior-superior":case"ras":return"right-anterior-superior";case"left-anterior-superior":case"las":return"left-anterior-superior";case"left-posterior-superior":case"lps":return"left-posterior-superior";case"right-anterior-superior-time":case"rast":return"right-anterior-superior-time";case"left-anterior-superior-time":case"last":return"left-anterior-superior-time";case"left-posterior-superior-time":case"lpst":return"left-posterior-superior-time";case"scanner-xyz":return"scanner-xyz";case"scanner-xyz-time":return"scanner-xyz-time";case"3d-right-handed":return"3D-right-handed";case"3d-left-handed":return"3D-left-handed";case"3d-right-handed-time":return"3D-right-handed-time";case"3d-left-handed-time":return"3D-left-handed-time";default:return console.warn("Unrecognized space: "+t),t;}}function y(t){switch(t.toLowerCase()){case"little":return"little";case"big":return"big";default:return console.warn("Unrecognized NRRD endianness: "+t),t;}}function v(t){var e=B.exec(t);return e?5==e.length&&e[4]?{format:t.substring(0,e.index),min:c(e[1]),max:c(e[2]),step:c(e[3]),subdim:c(e[4])}:{format:t.substring(0,e.index),min:c(e[1]),max:c(e[2]),step:c(e[3])}:t}function b(t){if("string"==typeof t||babelHelpers.instanceof(t,String))return t;if("format"in t&&"min"in t&&"max"in t&&"step"in t)return"subdim"in t?t.format+" "+t.min+" "+t.max+" "+t.step+" "+t.subdim:t.format+" "+t.min+" "+t.max+" "+t.step;throw new Error("Unrecognized data file format!")}function w(t){switch(t.toLowerCase()){case"cell":return"cell";case"node":return"node";case"???":case"none":return null;default:return console.warn("Unrecognized NRRD center: "+t),t;}}function x(t){var e=t.toLowerCase();return e in z?z[e]:(console.warn("Unrecognized NRRD kind: "+t),t)}function S(t){return null===t?"???":t}function E(t,e,n,i){function r(e){if(t.byteLength<l*e)throw new Error("NRRD file does not contain enough data!")}var o,a,s,l=1;for(o=0;o<n.length;o++){if(0>=n[o])throw new Error("Sizes should be a list of positive (>0) integers!");l*=n[o]}if("block"==e)return t.slice(0,l*i.blockSize);if("int8"==e||"uint8"==e||i.endian==G)switch(e){case"int8":return r(1),new Int8Array(t.slice(0,l));case"uint8":return r(1),new Uint8Array(t.slice(0,l));case"int16":return r(2),new Int16Array(t.slice(0,2*l));case"uint16":return r(2),new Uint16Array(t.slice(0,2*l));case"int32":return r(4),new Int32Array(t.slice(0,4*l));case"uint32":return r(4),new Uint32Array(t.slice(0,4*l));case"float":return r(4),new Float32Array(t.slice(0,4*l));case"double":return r(8),new Float64Array(t.slice(0,8*l));default:return void console.warn("Unsupported NRRD type: "+e+", returning raw buffer.");}else{switch(i.endian){case"big":break;case"little":break;default:return void console.warn("Unsupported endianness in NRRD file: "+i.endian);}switch(s=new DataView(t),e){case"int8":for(a=new Int8Array(l),o=0;o<l;o++){a[o]=s.getInt8(o)}return a;case"uint8":for(a=new Uint8Array(l),o=0;o<l;o++){a[o]=s.getUint8(o)}return a;case"int16":for(a=new Int16Array(l),o=0;o<l;o++){a[o]=s.getInt16(2*o)}return a;case"uint16":for(a=new Uint16Array(l),o=0;o<l;o++){a[o]=s.getUint16(2*o)}return a;case"int32":for(a=new Int32Array(l),o=0;o<l;o++){a[o]=s.getInt32(4*o)}return a;case"uint32":for(a=new Uint32Array(l),o=0;o<l;o++){a[o]=s.getUint32(4*o)}return a;case"float":for(a=new Float32Array(l),o=0;o<l;o++){a[o]=s.getFloat32(4*o)}return a;case"double":for(a=new Float64Array(l),o=0;o<l;o++){a[o]=s.getFloat64(8*o)}return a;default:return void console.warn("Unsupported NRRD type: "+e+", returning raw buffer.");}}}function M(t,e,n){var i,r,o,a,s=1;for(i=0;i<n.length;i++){if(0>=n[i])throw new Error("Sizes should be a list of positive (>0) integers!");s*=n[i]}if(r=new Uint8Array(t),o=_StringfromCharCode.apply(null,r),(a=o.split(H)).length<s)throw new Error("Not enough data in NRRD file!");switch(a.length>s&&(""===a[0]&&(a=a.slice(1)),a=a.slice(0,s)),e){case"int8":return new Int8Array(a.map(c));case"uint8":return new Uint8Array(a.map(c));case"int16":return new Int16Array(a.map(c));case"uint16":return new Uint16Array(a.map(c));case"int32":return new Int32Array(a.map(c));case"uint32":return new Uint32Array(a.map(c));case"float":return new Float32Array(a.map(h));case"double":return new Float64Array(a.map(h));default:return void console.warn("Unsupported NRRD type: "+e+".");}}function T(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":return 4;case"int64":case"uint64":return 8;case"float":return 4;case"double":return 8;default:throw new Error("Do not know the size of NRRD type: "+t);}}function A(t){if(void 0===t.dimension)throw new Error("Dimension missing from NRRD file!");if(void 0===t.type)throw new Error("Type missing from NRRD file!");if(void 0===t.encoding)throw new Error("Encoding missing from NRRD file!");if(void 0===t.sizes)throw new Error("Sizes missing from NRRD file!");if("block"!=t.type&&"int8"!=t.type&&"uint8"!=t.type&&"ascii"!=t.encoding&&void 0===t.endian)throw new Error("Endianness missing from NRRD file!");if("block"==t.type&&void 0===t.blockSize)throw new Error("Missing block size in NRRD file!");if(0===t.dimension)throw new Error("Zero-dimensional NRRD file?");if(t.dimension!=t.sizes.length)throw new Error("Length of 'sizes' is different from 'dimension' in an NRRD file!");if(t.spacings&&t.dimension!=t.spacings.length)throw new Error("Length of 'spacings' is different from 'dimension' in an NRRD file!");if(t.thicknesses&&t.dimension!=t.thicknesses.length)throw new Error("Length of 'thicknesses' is different from 'dimension' in an NRRD file!");if(t.axisMins&&t.dimension!=t.axisMins.length)throw new Error("Length of 'axis mins' is different from 'dimension' in an NRRD file!");if(t.axisMaxs&&t.dimension!=t.axisMaxs.length)throw new Error("Length of 'axis maxs' is different from 'dimension' in an NRRD file!");if(t.centers&&t.dimension!=t.centers.length)throw new Error("Length of 'centers' is different from 'dimension' in an NRRD file!");if(t.labels&&t.dimension!=t.labels.length)throw new Error("Length of 'labels' is different from 'dimension' in an NRRD file!");if(t.units&&t.dimension!=t.units.length)throw new Error("Length of 'units' is different from 'dimension' in an NRRD file!");if(t.kinds&&t.dimension!=t.kinds.length)throw new Error("Length of 'kinds' is different from 'dimension' in an NRRD file!");if(!(void 0!==t.data&&0!==t.data.length||void 0!==t.buffer&&0!==t.buffer.byteLength||void 0!==t.dataFile))throw new Error("NRRD file has neither inline or external data!")}function P(t,e){switch(e){case"int8":return new Int8Array(t);case"uint8":return new Uint8Array(t);case"int16":return new Int16Array(t);case"uint16":return new Uint16Array(t);case"int32":return new Int32Array(t);case"uint32":return new Uint32Array(t);case"float":return new Float32Array(t);case"double":return new Float64Array(t);default:throw new Error("Cannot cast to NRRD type: "+e);}}function C(t,e,n){var i,r,o,a=T(e),s=new ArrayBuffer(t.length*a);switch(n){case"big":r=!1;break;case"little":r=!0;break;default:return void console.warn("Unsupported endianness in NRRD file: "+n);}switch(o=new DataView(s),e){case"int8":for(i=0;i<t.length;i++){o.setInt8(i,t[i],r)}return s;case"uint8":for(i=0;i<t.length;i++){o.setUint8(i,t[i],r)}return s;case"int16":for(i=0;i<t.length;i++){o.setInt16(2*i,t[i],r)}return s;case"uint16":for(i=0;i<t.length;i++){o.setUint16(2*i,t[i],r)}return s;case"int32":for(i=0;i<t.length;i++){o.setInt32(4*i,t[i],r)}return s;case"uint32":for(i=0;i<t.length;i++){o.setUint32(4*i,t[i],r)}return s;case"float":for(i=0;i<t.length;i++){o.setFloat32(4*i,t[i],r)}return s;case"double":for(i=0;i<t.length;i++){o.setFloat64(8*i,t[i],r)}return s;default:return void console.warn("Cannot serialize NRRD type: "+e+".");}}function I(t){var e,n,i,r,o=Array(t.length);for(e=0;e<t.length;e++){o[e]=""+t[e]}for(n=o.join(" "),i=new ArrayBuffer(n.length),r=new Uint8Array(i),e=0;e<r.length;e++){r[e]=n.charCodeAt(e)}return i}var L=n(72),R=/[ \f\t\v]*\r?\n/,O=/^NRRD\d{4}$/,k=/^([^:]*)(:[ =])(.*)$/,D=/^LIST(?: (\d+))?$/;t.exports.serialize=function(t){var e,n,r,a,s,l,c,h,u,p,d=1,f={},g=[];for(a in t){f[a]=t[a]}if(void 0===f.sizes)throw new Error("Sizes missing from NRRD file!");if(void 0===f.dimension&&(f.dimension=f.sizes.length),babelHelpers.instanceof(f.data,Int8Array)?s="int8":babelHelpers.instanceof(f.data,Uint8Array)?s="uint8":babelHelpers.instanceof(f.data,Int16Array)?s="int16":babelHelpers.instanceof(f.data,Uint16Array)?s="uint16":babelHelpers.instanceof(f.data,Int32Array)?s="int32":babelHelpers.instanceof(f.data,Uint32Array)?s="uint32":babelHelpers.instanceof(f.data,Float32Array)?s="float":babelHelpers.instanceof(f.data,Float64Array)&&(s="double"),void 0===f.type&&void 0!==s)f.type=s;else{if(void 0===f.type)throw new Error("Type of data is not given and cannot be inferred!");("string"==typeof f.type||babelHelpers.instanceof(f.type,String))&&(f.type=m(f.type))}void 0===f.encoding?f.encoding="raw":("string"==typeof f.encoding||babelHelpers.instanceof(f.encoding,String))&&(f.encoding=_(f.encoding)),f.data&&"block"!=f.type&&"int8"!=f.type&&"uint8"!=f.type&&"ascii"!=f.encoding?f.endian=G:"block"==f.type||"int8"==f.type||"uint8"==f.type||"ascii"==f.encoding?f.endian=void 0:("string"==typeof f.endian||babelHelpers.instanceof(f.endian,String))&&(f.endian=y(f.endian));var v;if(void 0!==f.spaceDimension)v=f.spaceDimension;else if(void 0!==f.space)switch(f.space){case"right-anterior-superior":case"RAS":v=3;break;case"left-anterior-superior":case"LAS":v=3;break;case"left-posterior-superior":case"LPS":v=3;break;case"right-anterior-superior-time":case"RAST":v=4;break;case"left-anterior-superior-time":case"LAST":v=4;break;case"left-posterior-superior-time":case"LPST":v=4;break;case"scanner-xyz":v=3;break;case"scanner-xyz-time":v=4;break;case"3D-right-handed":case"3D-left-handed":v=3;break;case"3D-right-handed-time":case"3D-left-handed-time":v=4;break;default:console.warn("Unrecognized space: "+f.space);}for(A(f),e=0;e<f.sizes.length;e++){if(0>=f.sizes[e])throw new Error("Sizes should be a list of positive (>0) integers!");d*=f.sizes[e]}if(f.data){if(f.data.length<d)throw new Error("Missing data to serialize!")}else if(f.buffer){if("raw"==f.encoding&&(l="block"==f.type&&void 0!==f.blockSize?f.blockSize:T(f.type),f.buffer.byteLength<d*l))throw new Error("Missing data to serialize!")}else if(!f.dataFile)throw new Error("Will not serialize an empty NRRD file!");if(f.data)switch(f.encoding){case"raw":c=f.type==s&&f.endian==G?f.data.buffer.slice(f.data.byteOffset,f.data.byteOffset+f.data.byteLength):f.endian==G?(c=P(f.data,f.type)).buffer.slice(c.byteOffset,c.byteOffset+c.byteLength):C(f.data,f.type,f.endian);break;case"ascii":c=I(f.type==s?f.data:P(f.data,f.type));break;default:throw new Error("Unsupported NRRD encoding: "+f.encoding);}else f.buffer&&(c=f.buffer);g.push("NRRD0005"),g.push("# Generated by nrrd-js");var b=["dimension","spaceDimension","space"];for(e=0;e<b.length;e++){void 0!==f[a=b[e]]&&void 0!==(u=o(a,f[a],f.dimension,v))&&g.push(u)}for(a in f){void 0!==f[a]&&(0<=b.indexOf(a)||void 0!==(u=o(a,f[a],f.dimension,v))&&g.push(u))}if(f.keys)for(a in f.keys){if(0<=a.indexOf(":="))throw new Error("The combination ':=' is not allowed in an NRRD key!");g.push(a+":="+i(f[a]))}if(f.dataFile&&f.dataFile.length?(g.push("data file: LIST"),Array.prototype.push.apply(g,f.dataFile)):f.dataFile&&f.dataFile.files&&"subdim"in f.dataFile&&(g.push("data file: LIST "+f.dataFile.subdim),Array.prototype.push.apply(g,f.dataFile.files)),!c||"dataFile"in f)for(g.push(""),p=g.join("\n"),n=new ArrayBuffer(p.length),r=new Uint8Array(n),e=0;e<p.length;e++){r[e]=p.charCodeAt(e)}else{for(g.push(""),g.push(""),p=g.join("\n"),n=new ArrayBuffer(p.length+c.byteLength),r=new Uint8Array(n),e=0;e<p.length;e++){r[e]=p.charCodeAt(e)}h=new Uint8Array(c),r.set(h,p.length)}return n},t.exports.parse=function(t){var e,n,i,o,l,h,u={data:void 0,buffer:void 0,keys:{},version:void 0},p=new Uint8Array(t);for(p.buffer!==t&&(t=p.buffer),e=2;e<p.length;){if(10==p[e]){if(10==p[e-1]||13==p[e-1]&&10==p[e-2]){i=e+1;break}e++}else 13==p[e]?e++:e+=2}if(void 0===i?n=_StringfromCharCode.apply(null,p):(n=_StringfromCharCode.apply(null,p.subarray(0,i)),u.buffer=t.slice(i)),o=n.split(R),o=o.filter(function(t){return 0<t.length&&"#"!=t[0]}),!O.test(o[0]))throw new Error("File is not an NRRD file!");for(u.version=parseInt(o[0].substring(4,8),10),5<u.version&&console.warn("Reading an unsupported version of the NRRD format; things may go haywire."),e=1;e<o.length;e++){if(l=k.exec(o[e])){if(": "==l[2])l[1]=s(l[1]),"dataFile"==l[1]&&(h=D.exec(l[3]))?(2==h.length&&h[1]?u[l[1]]={files:o.slice(e+1),subdim:c(h[1])}:u[l[1]]=o.slice(e+1),o.length=e):u[l[1]]=a(l[1],l[3]);else{if(":="!=l[2])throw new Error("Logic error in NRRD parser.");u.keys[l[1]]=r(l[3])}}else console.warn("Unrecognized line in NRRD header: "+o[e])}if(A(u),"dataFile"in u)console.warn("No support for external data yet!");else switch(u.encoding){case"raw":u.data=E(u.buffer,u.type,u.sizes,{endian:u.endian,blockSize:u.blockSize});break;case"ascii":u.data=M(u.buffer,u.type,u.sizes);break;default:console.warn("Unsupported NRRD encoding: "+u.encoding);}return u};var F={"block size":"blockSize",blocksize:"blockSize","old min":"oldMin",oldmin:"oldMin","old max":"oldMax",oldmax:"oldMax","data file":"dataFile",datafile:"dataFile","line skip":"lineSkip",lineskip:"lineSkip","byte skip":"byteSkip",byteskip:"byteSkip","sample units":"sampleUnits",sampleunits:"sampleUnits","axis mins":"axisMins","axis maxs":"axisMaxs",centers:"centers",centerings:"centers","space dimension":"spaceDimension","space units":"spaceUnits","space origin":"spaceOrigin","space directions":"spaceDirections","measurement frame":"measurementFrame"},N=function(){var t,e={};for(t in F){e[F[t]]=t}return e}(),U=/[ \t]+/,B=/ (-?\d+) (-?\d+) (-?\d+)(?: (\d+))?$/,z={domain:"domain",space:"space",time:"time",list:"list",point:"point",vector:"vector","covariant-vector":"covariant-vector",normal:"normal",stub:"stub",scalar:"scalar",complex:"complex","2-vector":"2-vector","3-color":"3-color","rgb-color":"RGB-color","hsv-color":"HSV-color","xyz-color":"XYZ-color","4-color":"4-color","rgba-color":"RGBA-color","3-vector":"3-vector","3-gradient":"3-gradient","3-normal":"3-normal","4-vector":"4-vector",quaternion:"quaternion","2d-symmetric-matrix":"2D-symmetric-matrix","2d-masked-symmetric-matrix":"2D-masked-symmetric-matrix","2d-matrix":"2D-matrix","2d-masked-matrix":"2D-masked-matrix","3d-symmetric-matrix":"3D-symmetric-matrix","3d-masked-symmetric-matrix":"3D-masked-symmetric-matrix","3d-matrix":"3D-matrix","3d-masked-matrix":"3D-masked-matrix","???":null,none:null},G=function(){var t=new ArrayBuffer(4),e=new Uint32Array(t),n=new Uint8Array(t);return e[0]=16909060,1==n[0]&&2==n[1]&&3==n[2]&&4==n[3]?"big":4==n[0]&&3==n[1]&&2==n[2]&&1==n[3]?"little":void console.warn("Unrecognized system endianness!")}(),H=/[ \t\n\r\v\f]+/},function(t,e,n){"use strict";var i=n(60),r=n(23),o=n(57),a=n(83);n.d(e,"a",function(){return i.a}),n.d(e,"c",function(){return r.a}),n.d(e,"b",function(){return o.a}),n.d(e,"d",function(){return a.a})},function(t,e,n){"use strict";var i=n(61),r=n(82),o=n(79),a=n(81);n.d(e,"a",function(){return i.a}),n.d(e,"b",function(){return r.a}),n.d(e,"c",function(){return o.a}),n.d(e,"d",function(){return a.a})},function(t,e,n){"use strict";var i=n(167);n.d(e,"a",function(){return i.a})},function(t,e,n){"use strict";function i(t,e){if(!babelHelpers.instanceof(t,e))throw new TypeError("Cannot call a class as a function")}var r=n(168),o=function(){function t(t,e){for(var n=0,i;n<e.length;n++){i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"Freesurfer";i(this,t),this._presetID=e,this._presets=this.presetSegs()}return t.prototype.fetchPreset=function(t){return this._presets[t]},t.prototype.addPreset=function(t){this._presets.push(t)},t.prototype.presetsAvailable=function(){0<arguments.length&&void 0!==arguments[0]&&arguments[0];var t=[],e=this._presets;for(var n in e){t.push(n)}return t},t.prototype.presetSegs=function(){return{Freesurfer:r.a}},o(t,[{key:"preset",set:function set(t){this._presetID=t},get:function get(){return this.fetchPreset(this._presetID)}}]),t}();e.a=a},function(t,e){"use strict";e.a={0:{color:[0,0,0],opacity:0,label:"Unknown"},1:{color:[70,130,180],opacity:1,label:"Left-Cerebral-Exterior"},2:{color:[245,245,245],opacity:1,label:"Left-Cerebral-White-Matter"},3:{color:[205,62,78],opacity:1,label:"Left-Cerebral-Cortex"},4:{color:[120,18,134],opacity:1,label:"Left-Lateral-Ventricle"},5:{color:[196,58,250],opacity:1,label:"Left-Inf-Lat-Vent"},6:{color:[0,148,0],opacity:1,label:"Left-Cerebellum-Exterior"},7:{color:[220,248,164],opacity:1,label:"Left-Cerebellum-White-Matter"},8:{color:[230,148,34],opacity:1,label:"Left-Cerebellum-Cortex"},9:{color:[0,118,14],opacity:1,label:"Left-Thalamus"},10:{color:[0,118,14],opacity:1,label:"Left-Thalamus-Proper"},11:{color:[122,186,220],opacity:1,label:"Left-Caudate"},12:{color:[236,13,176],opacity:1,label:"Left-Putamen"},13:{color:[12,48,255],opacity:1,label:"Left-Pallidum"},14:{color:[204,182,142],opacity:1,label:"3rd-Ventricle"},15:{color:[42,204,164],opacity:1,label:"4th-Ventricle"},16:{color:[119,159,176],opacity:1,label:"Brain-Stem"},17:{color:[220,216,20],opacity:1,label:"Left-Hippocampus"},18:{color:[103,255,255],opacity:1,label:"Left-Amygdala"},19:{color:[80,196,98],opacity:1,label:"Left-Insula"},20:{color:[60,58,210],opacity:1,label:"Left-Operculum"},21:{color:[60,58,210],opacity:1,label:"Line-1"},22:{color:[60,58,210],opacity:1,label:"Line-2"},23:{color:[60,58,210],opacity:1,label:"Line-3"},24:{color:[60,60,60],opacity:1,label:"CSF"},25:{color:[255,165,0],opacity:1,label:"Left-Lesion"},26:{color:[255,165,0],opacity:1,label:"Left-Accumbens-area"},27:{color:[0,255,127],opacity:1,label:"Left-Substancia-Nigra"},28:{color:[165,42,42],opacity:1,label:"Left-VentralDC"},29:{color:[135,206,235],opacity:1,label:"Left-undetermined"},30:{color:[160,32,240],opacity:1,label:"Left-vessel"},31:{color:[0,200,200],opacity:1,label:"Left-choroid-plexus"},32:{color:[100,50,100],opacity:1,label:"Left-F3orb"},33:{color:[135,50,74],opacity:1,label:"Left-lOg"},34:{color:[122,135,50],opacity:1,label:"Left-aOg"},35:{color:[51,50,135],opacity:1,label:"Left-mOg"},36:{color:[74,155,60],opacity:1,label:"Left-pOg"},37:{color:[120,62,43],opacity:1,label:"Left-Stellate"},38:{color:[74,155,60],opacity:1,label:"Left-Porg"},39:{color:[122,135,50],opacity:1,label:"Left-Aorg"},40:{color:[70,130,180],opacity:1,label:"Right-Cerebral-Exterior"},41:{color:[245,245,245],opacity:1,label:"Right-Cerebral-White-Matter"},42:{color:[205,62,78],opacity:1,label:"Right-Cerebral-Cortex"},43:{color:[120,18,134],opacity:1,label:"Right-Lateral-Ventricle"},44:{color:[196,58,250],opacity:1,label:"Right-Inf-Lat-Vent"},45:{color:[0,148,0],opacity:1,label:"Right-Cerebellum-Exterior"},46:{color:[220,248,164],opacity:1,label:"Right-Cerebellum-White-Matter"},47:{color:[230,148,34],opacity:1,label:"Right-Cerebellum-Cortex"},48:{color:[0,118,14],opacity:1,label:"Right-Thalamus"},49:{color:[0,118,14],opacity:1,label:"Right-Thalamus-Proper"},50:{color:[122,186,220],opacity:1,label:"Right-Caudate"},51:{color:[236,13,176],opacity:1,label:"Right-Putamen"},52:{color:[13,48,255],opacity:1,label:"Right-Pallidum"},53:{color:[220,216,20],opacity:1,label:"Right-Hippocampus"},54:{color:[103,255,255],opacity:1,label:"Right-Amygdala"},55:{color:[80,196,98],opacity:1,label:"Right-Insula"},56:{color:[60,58,210],opacity:1,label:"Right-Operculum"},57:{color:[255,165,0],opacity:1,label:"Right-Lesion"},58:{color:[255,165,0],opacity:1,label:"Right-Accumbens-area"},59:{color:[0,255,127],opacity:1,label:"Right-Substancia-Nigra"},60:{color:[165,42,42],opacity:1,label:"Right-VentralDC"},61:{color:[135,206,235],opacity:1,label:"Right-undetermined"},62:{color:[160,32,240],opacity:1,label:"Right-vessel"},63:{color:[0,200,221],opacity:1,label:"Right-choroid-plexus"},64:{color:[100,50,100],opacity:1,label:"Right-F3orb"},65:{color:[135,50,74],opacity:1,label:"Right-lOg"},66:{color:[122,135,50],opacity:1,label:"Right-aOg"},67:{color:[51,50,135],opacity:1,label:"Right-mOg"},68:{color:[74,155,60],opacity:1,label:"Right-pOg"},69:{color:[120,62,43],opacity:1,label:"Right-Stellate"},70:{color:[74,155,60],opacity:1,label:"Right-Porg"},71:{color:[122,135,50],opacity:1,label:"Right-Aorg"},72:{color:[120,190,150],opacity:1,label:"5th-Ventricle"},73:{color:[122,135,50],opacity:1,label:"Left-Interior"},74:{color:[122,135,50],opacity:1,label:"Right-Interior"},77:{color:[200,70,255],opacity:1,label:"WM-hypointensities"},78:{color:[255,148,10],opacity:1,label:"Left-WM-hypointensities"},79:{color:[255,148,10],opacity:1,label:"Right-WM-hypointensities"},80:{color:[164,108,226],opacity:1,label:"non-WM-hypointensities"},81:{color:[164,108,226],opacity:1,label:"Left-non-WM-hypointensities"},82:{color:[164,108,226],opacity:1,label:"Right-non-WM-hypointensities"},83:{color:[255,218,185],opacity:1,label:"Left-F1"},84:{color:[255,218,185],opacity:1,label:"Right-F1"},85:{color:[234,169,30],opacity:1,label:"Optic-Chiasm"},192:{color:[250,255,50],opacity:1,label:"Corpus_Callosum"},86:{color:[200,120,255],opacity:1,label:"Left_future_WMSA"},87:{color:[200,121,255],opacity:1,label:"Right_future_WMSA"},88:{color:[200,122,255],opacity:1,label:"future_WMSA"},96:{color:[205,10,125],opacity:1,label:"Left-Amygdala-Anterior"},97:{color:[205,10,125],opacity:1,label:"Right-Amygdala-Anterior"},98:{color:[160,32,240],opacity:1,label:"Dura"},100:{color:[124,140,178],opacity:1,label:"Left-wm-intensity-abnormality"},101:{color:[125,140,178],opacity:1,label:"Left-caudate-intensity-abnormality"},102:{color:[126,140,178],opacity:1,label:"Left-putamen-intensity-abnormality"},103:{color:[127,140,178],opacity:1,label:"Left-accumbens-intensity-abnormality"},104:{color:[124,141,178],opacity:1,label:"Left-pallidum-intensity-abnormality"},105:{color:[124,142,178],opacity:1,label:"Left-amygdala-intensity-abnormality"},106:{color:[124,143,178],opacity:1,label:"Left-hippocampus-intensity-abnormality"},107:{color:[124,144,178],opacity:1,label:"Left-thalamus-intensity-abnormality"},108:{color:[124,140,179],opacity:1,label:"Left-VDC-intensity-abnormality"},109:{color:[124,140,178],opacity:1,label:"Right-wm-intensity-abnormality"},110:{color:[125,140,178],opacity:1,label:"Right-caudate-intensity-abnormality"},111:{color:[126,140,178],opacity:1,label:"Right-putamen-intensity-abnormality"},112:{color:[127,140,178],opacity:1,label:"Right-accumbens-intensity-abnormality"},113:{color:[124,141,178],opacity:1,label:"Right-pallidum-intensity-abnormality"},114:{color:[124,142,178],opacity:1,label:"Right-amygdala-intensity-abnormality"},115:{color:[124,143,178],opacity:1,label:"Right-hippocampus-intensity-abnormality"},116:{color:[124,144,178],opacity:1,label:"Right-thalamus-intensity-abnormality"},117:{color:[124,140,179],opacity:1,label:"Right-VDC-intensity-abnormality"},118:{color:[255,20,147],opacity:1,label:"Epidermis"},119:{color:[205,179,139],opacity:1,label:"Conn-Tissue"},120:{color:[238,238,209],opacity:1,label:"SC-Fat-Muscle"},121:{color:[200,200,200],opacity:1,label:"Cranium"},122:{color:[74,255,74],opacity:1,label:"CSF-SA"},123:{color:[238,0,0],opacity:1,label:"Muscle"},124:{color:[0,0,139],opacity:1,label:"Ear"},125:{color:[173,255,47],opacity:1,label:"Adipose"},126:{color:[133,203,229],opacity:1,label:"Spinal-Cord"},127:{color:[26,237,57],opacity:1,label:"Soft-Tissue"},128:{color:[34,139,34],opacity:1,label:"Nerve"},129:{color:[30,144,255],opacity:1,label:"Bone"},130:{color:[147,19,173],opacity:1,label:"Air"},131:{color:[238,59,59],opacity:1,label:"Orbital-Fat"},132:{color:[221,39,200],opacity:1,label:"Tongue"},133:{color:[238,174,238],opacity:1,label:"Nasal-Structures"},134:{color:[255,0,0],opacity:1,label:"Globe"},135:{color:[72,61,139],opacity:1,label:"Teeth"},136:{color:[21,39,132],opacity:1,label:"Left-Caudate-Putamen"},137:{color:[21,39,132],opacity:1,label:"Right-Caudate-Putamen"},138:{color:[65,135,20],opacity:1,label:"Left-Claustrum"},139:{color:[65,135,20],opacity:1,label:"Right-Claustrum"},140:{color:[134,4,160],opacity:1,label:"Cornea"},142:{color:[221,226,68],opacity:1,label:"Diploe"},143:{color:[255,255,254],opacity:1,label:"Vitreous-Humor"},144:{color:[52,209,226],opacity:1,label:"Lens"},145:{color:[239,160,223],opacity:1,label:"Aqueous-Humor"},146:{color:[70,130,180],opacity:1,label:"Outer-Table"},147:{color:[70,130,181],opacity:1,label:"Inner-Table"},148:{color:[139,121,94],opacity:1,label:"Periosteum"},149:{color:[224,224,224],opacity:1,label:"Endosteum"},150:{color:[255,0,0],opacity:1,label:"R-C-S"},151:{color:[205,205,0],opacity:1,label:"Iris"},152:{color:[238,238,209],opacity:1,label:"SC-Adipose-Muscle"},153:{color:[139,121,94],opacity:1,label:"SC-Tissue"},154:{color:[238,59,59],opacity:1,label:"Orbital-Adipose"},155:{color:[238,59,59],opacity:1,label:"Left-IntCapsule-Ant"},156:{color:[238,59,59],opacity:1,label:"Right-IntCapsule-Ant"},157:{color:[62,10,205],opacity:1,label:"Left-IntCapsule-Pos"},158:{color:[62,10,205],opacity:1,label:"Right-IntCapsule-Pos"},159:{color:[0,118,14],opacity:1,label:"Left-Cerebral-WM-unmyelinated"},160:{color:[0,118,14],opacity:1,label:"Right-Cerebral-WM-unmyelinated"},161:{color:[220,216,21],opacity:1,label:"Left-Cerebral-WM-myelinated"},162:{color:[220,216,21],opacity:1,label:"Right-Cerebral-WM-myelinated"},163:{color:[122,186,220],opacity:1,label:"Left-Subcortical-Gray-Matter"},164:{color:[122,186,220],opacity:1,label:"Right-Subcortical-Gray-Matter"},165:{color:[120,120,120],opacity:1,label:"Skull"},166:{color:[14,48,255],opacity:1,label:"Posterior-fossa"},167:{color:[166,42,42],opacity:1,label:"Scalp"},168:{color:[121,18,134],opacity:1,label:"Hematoma"},169:{color:[236,13,127],opacity:1,label:"Left-Basal-Ganglia"},176:{color:[236,13,126],opacity:1,label:"Right-Basal-Ganglia"},170:{color:[119,159,176],opacity:1,label:"brainstem"},171:{color:[119,0,176],opacity:1,label:"DCG"},172:{color:[119,100,176],opacity:1,label:"Vermis"},173:{color:[242,104,76],opacity:1,label:"Midbrain"},174:{color:[206,195,58],opacity:1,label:"Pons"},175:{color:[119,159,176],opacity:1,label:"Medulla"},177:{color:[119,50,176],opacity:1,label:"Vermis-White-Matter"},178:{color:[142,182,0],opacity:1,label:"SCP"},179:{color:[19,100,176],opacity:1,label:"Floculus"},180:{color:[73,61,139],opacity:1,label:"Left-Cortical-Dysplasia"},181:{color:[73,62,139],opacity:1,label:"Right-Cortical-Dysplasia"},182:{color:[10,100,176],opacity:1,label:"CblumNodulus"},193:{color:[0,196,255],opacity:1,label:"Left-hippocampal_fissure"},194:{color:[255,164,164],opacity:1,label:"Left-CADG-head"},195:{color:[196,196,0],opacity:1,label:"Left-subiculum"},196:{color:[0,100,255],opacity:1,label:"Left-fimbria"},197:{color:[128,196,164],opacity:1,label:"Right-hippocampal_fissure"},198:{color:[0,126,75],opacity:1,label:"Right-CADG-head"},199:{color:[128,96,64],opacity:1,label:"Right-subiculum"},200:{color:[0,50,128],opacity:1,label:"Right-fimbria"},201:{color:[255,204,153],opacity:1,label:"alveus"},202:{color:[255,128,128],opacity:1,label:"perforant_pathway"},203:{color:[255,255,0],opacity:1,label:"parasubiculum"},204:{color:[64,0,64],opacity:1,label:"presubiculum"},205:{color:[0,0,255],opacity:1,label:"subiculum"},206:{color:[255,0,0],opacity:1,label:"CA1"},207:{color:[128,128,255],opacity:1,label:"CA2"},208:{color:[0,128,0],opacity:1,label:"CA3"},209:{color:[196,160,128],opacity:1,label:"CA4"},210:{color:[32,200,255],opacity:1,label:"GC-DG"},211:{color:[128,255,128],opacity:1,label:"HATA"},212:{color:[204,153,204],opacity:1,label:"fimbria"},213:{color:[121,17,136],opacity:1,label:"lateral_ventricle"},214:{color:[128,0,0],opacity:1,label:"molecular_layer_HP"},215:{color:[128,32,255],opacity:1,label:"hippocampal_fissure"},216:{color:[255,204,102],opacity:1,label:"entorhinal_cortex"},217:{color:[128,128,128],opacity:1,label:"molecular_layer_subiculum"},218:{color:[104,255,255],opacity:1,label:"Amygdala"},219:{color:[0,226,0],opacity:1,label:"Cerebral_White_Matter"},220:{color:[205,63,78],opacity:1,label:"Cerebral_Cortex"},221:{color:[197,58,250],opacity:1,label:"Inf_Lat_Vent"},222:{color:[33,150,250],opacity:1,label:"Perirhinal"},223:{color:[226,0,0],opacity:1,label:"Cerebral_White_Matter_Edge"},224:{color:[100,100,100],opacity:1,label:"Background"},225:{color:[197,150,250],opacity:1,label:"Ectorhinal"},226:{color:[170,170,255],opacity:1,label:"HP_tail"},250:{color:[255,0,0],opacity:1,label:"Fornix"},251:{color:[0,0,64],opacity:1,label:"CC_Posterior"},252:{color:[0,0,112],opacity:1,label:"CC_Mid_Posterior"},253:{color:[0,0,160],opacity:1,label:"CC_Central"},254:{color:[0,0,208],opacity:1,label:"CC_Mid_Anterior"},255:{color:[0,0,255],opacity:1,label:"CC_Anterior"},256:{color:[0,0,0],opacity:1,label:"Voxel-Unchanged"},257:{color:[60,60,60],opacity:1,label:"CSF-ExtraCerebral"},258:{color:[150,150,200],opacity:1,label:"Head-ExtraCerebral"},259:{color:[120,120,120],opacity:1,label:"SkullApprox"},260:{color:[119,159,176],opacity:1,label:"BoneOrAir"},261:{color:[120,18,134],opacity:1,label:"PossibleFluid"},262:{color:[119,159,176],opacity:1,label:"Sinus"},263:{color:[119,159,176],opacity:1,label:"Left-Eustachian"},264:{color:[119,159,176],opacity:1,label:"Right-Eustachian"},331:{color:[255,0,0],opacity:1,label:"Aorta"},332:{color:[255,80,0],opacity:1,label:"Left-Common-IliacA"},333:{color:[255,160,0],opacity:1,label:"Right-Common-IliacA"},334:{color:[255,255,0],opacity:1,label:"Left-External-IliacA"},335:{color:[0,255,0],opacity:1,label:"Right-External-IliacA"},336:{color:[255,0,160],opacity:1,label:"Left-Internal-IliacA"},337:{color:[255,0,255],opacity:1,label:"Right-Internal-IliacA"},338:{color:[255,50,80],opacity:1,label:"Left-Lateral-SacralA"},339:{color:[80,255,50],opacity:1,label:"Right-Lateral-SacralA"},340:{color:[160,255,50],opacity:1,label:"Left-ObturatorA"},341:{color:[160,200,255],opacity:1,label:"Right-ObturatorA"},342:{color:[0,255,160],opacity:1,label:"Left-Internal-PudendalA"},343:{color:[0,0,255],opacity:1,label:"Right-Internal-PudendalA"},344:{color:[80,50,255],opacity:1,label:"Left-UmbilicalA"},345:{color:[160,0,255],opacity:1,label:"Right-UmbilicalA"},346:{color:[255,210,0],opacity:1,label:"Left-Inf-RectalA"},347:{color:[0,160,255],opacity:1,label:"Right-Inf-RectalA"},348:{color:[255,200,80],opacity:1,label:"Left-Common-IliacV"},349:{color:[255,200,160],opacity:1,label:"Right-Common-IliacV"},350:{color:[255,80,200],opacity:1,label:"Left-External-IliacV"},351:{color:[255,160,200],opacity:1,label:"Right-External-IliacV"},352:{color:[30,255,80],opacity:1,label:"Left-Internal-IliacV"},353:{color:[80,200,255],opacity:1,label:"Right-Internal-IliacV"},354:{color:[80,255,200],opacity:1,label:"Left-ObturatorV"},355:{color:[195,255,200],opacity:1,label:"Right-ObturatorV"},356:{color:[120,200,20],opacity:1,label:"Left-Internal-PudendalV"},357:{color:[170,10,200],opacity:1,label:"Right-Internal-PudendalV"},358:{color:[20,130,180],opacity:1,label:"Pos-Lymph"},359:{color:[20,180,130],opacity:1,label:"Neg-Lymph"},400:{color:[206,62,78],opacity:1,label:"V1"},401:{color:[121,18,134],opacity:1,label:"V2"},402:{color:[199,58,250],opacity:1,label:"BA44"},403:{color:[1,148,0],opacity:1,label:"BA45"},404:{color:[221,248,164],opacity:1,label:"BA4a"},405:{color:[231,148,34],opacity:1,label:"BA4p"},406:{color:[1,118,14],opacity:1,label:"BA6"},407:{color:[120,118,14],opacity:1,label:"BA2"},408:{color:[123,186,221],opacity:1,label:"BA1_old"},409:{color:[238,13,177],opacity:1,label:"BAun2"},410:{color:[123,186,220],opacity:1,label:"BA1"},411:{color:[138,13,206],opacity:1,label:"BA2b"},412:{color:[238,130,176],opacity:1,label:"BA3a"},413:{color:[218,230,76],opacity:1,label:"BA3b"},414:{color:[38,213,176],opacity:1,label:"MT"},415:{color:[1,225,176],opacity:1,label:"AIPS_AIP_l"},416:{color:[1,225,176],opacity:1,label:"AIPS_AIP_r"},417:{color:[200,2,100],opacity:1,label:"AIPS_VIP_l"},418:{color:[200,2,100],opacity:1,label:"AIPS_VIP_r"},419:{color:[5,200,90],opacity:1,label:"IPL_PFcm_l"},420:{color:[5,200,90],opacity:1,label:"IPL_PFcm_r"},421:{color:[100,5,200],opacity:1,label:"IPL_PF_l"},422:{color:[25,255,100],opacity:1,label:"IPL_PFm_l"},423:{color:[25,255,100],opacity:1,label:"IPL_PFm_r"},424:{color:[230,7,100],opacity:1,label:"IPL_PFop_l"},425:{color:[230,7,100],opacity:1,label:"IPL_PFop_r"},426:{color:[100,5,200],opacity:1,label:"IPL_PF_r"},427:{color:[150,10,200],opacity:1,label:"IPL_PFt_l"},428:{color:[150,10,200],opacity:1,label:"IPL_PFt_r"},429:{color:[175,10,176],opacity:1,label:"IPL_PGa_l"},430:{color:[175,10,176],opacity:1,label:"IPL_PGa_r"},431:{color:[10,100,255],opacity:1,label:"IPL_PGp_l"},432:{color:[10,100,255],opacity:1,label:"IPL_PGp_r"},433:{color:[150,45,70],opacity:1,label:"Visual_V3d_l"},434:{color:[150,45,70],opacity:1,label:"Visual_V3d_r"},435:{color:[45,200,15],opacity:1,label:"Visual_V4_l"},436:{color:[45,200,15],opacity:1,label:"Visual_V4_r"},437:{color:[227,45,100],opacity:1,label:"Visual_V5_b"},438:{color:[227,45,100],opacity:1,label:"Visual_VP_l"},439:{color:[227,45,100],opacity:1,label:"Visual_VP_r"},498:{color:[143,188,143],opacity:1,label:"wmsa"},499:{color:[255,248,220],opacity:1,label:"other_wmsa"},500:{color:[17,85,136],opacity:1,label:"right_CA2_3"},501:{color:[119,187,102],opacity:1,label:"right_alveus"},502:{color:[204,68,34],opacity:1,label:"right_CA1"},503:{color:[204,0,255],opacity:1,label:"right_fimbria"},504:{color:[221,187,17],opacity:1,label:"right_presubiculum"},505:{color:[153,221,238],opacity:1,label:"right_hippocampal_fissure"},506:{color:[51,17,17],opacity:1,label:"right_CA4_DG"},507:{color:[0,119,85],opacity:1,label:"right_subiculum"},508:{color:[20,100,200],opacity:1,label:"right_fornix"},550:{color:[17,85,137],opacity:1,label:"left_CA2_3"},551:{color:[119,187,103],opacity:1,label:"left_alveus"},552:{color:[204,68,35],opacity:1,label:"left_CA1"},553:{color:[204,0,254],opacity:1,label:"left_fimbria"},554:{color:[221,187,16],opacity:1,label:"left_presubiculum"},555:{color:[153,221,239],opacity:1,label:"left_hippocampal_fissure"},556:{color:[51,17,18],opacity:1,label:"left_CA4_DG"},557:{color:[0,119,86],opacity:1,label:"left_subiculum"},558:{color:[20,100,201],opacity:1,label:"left_fornix"},600:{color:[254,254,254],opacity:1,label:"Tumor"},601:{color:[70,130,180],opacity:1,label:"Cbm_Left_I_IV"},602:{color:[245,245,245],opacity:1,label:"Cbm_Right_I_IV"},603:{color:[205,62,78],opacity:1,label:"Cbm_Left_V"},604:{color:[120,18,134],opacity:1,label:"Cbm_Right_V"},605:{color:[196,58,250],opacity:1,label:"Cbm_Left_VI"},606:{color:[0,148,0],opacity:1,label:"Cbm_Vermis_VI"},607:{color:[220,248,164],opacity:1,label:"Cbm_Right_VI"},608:{color:[230,148,34],opacity:1,label:"Cbm_Left_CrusI"},609:{color:[0,118,14],opacity:1,label:"Cbm_Vermis_CrusI"},610:{color:[0,118,14],opacity:1,label:"Cbm_Right_CrusI"},611:{color:[122,186,220],opacity:1,label:"Cbm_Left_CrusII"},612:{color:[236,13,176],opacity:1,label:"Cbm_Vermis_CrusII"},613:{color:[12,48,255],opacity:1,label:"Cbm_Right_CrusII"},614:{color:[204,182,142],opacity:1,label:"Cbm_Left_VIIb"},615:{color:[42,204,164],opacity:1,label:"Cbm_Vermis_VIIb"},616:{color:[119,159,176],opacity:1,label:"Cbm_Right_VIIb"},617:{color:[220,216,20],opacity:1,label:"Cbm_Left_VIIIa"},618:{color:[103,255,255],opacity:1,label:"Cbm_Vermis_VIIIa"},619:{color:[80,196,98],opacity:1,label:"Cbm_Right_VIIIa"},620:{color:[60,58,210],opacity:1,label:"Cbm_Left_VIIIb"},621:{color:[60,58,210],opacity:1,label:"Cbm_Vermis_VIIIb"},622:{color:[60,58,210],opacity:1,label:"Cbm_Right_VIIIb"},623:{color:[60,58,210],opacity:1,label:"Cbm_Left_IX"},624:{color:[60,60,60],opacity:1,label:"Cbm_Vermis_IX"},625:{color:[255,165,0],opacity:1,label:"Cbm_Right_IX"},626:{color:[255,165,0],opacity:1,label:"Cbm_Left_X"},627:{color:[0,255,127],opacity:1,label:"Cbm_Vermis_X"},628:{color:[165,42,42],opacity:1,label:"Cbm_Right_X"},640:{color:[204,0,0],opacity:1,label:"Cbm_Right_I_V_med"},641:{color:[255,0,0],opacity:1,label:"Cbm_Right_I_V_mid"},642:{color:[0,0,255],opacity:1,label:"Cbm_Right_VI_med"},643:{color:[30,144,255],opacity:1,label:"Cbm_Right_VI_mid"},644:{color:[100,212,237],opacity:1,label:"Cbm_Right_VI_lat"},645:{color:[218,165,32],opacity:1,label:"Cbm_Right_CrusI_med"},646:{color:[255,215,0],opacity:1,label:"Cbm_Right_CrusI_mid"},647:{color:[255,255,166],opacity:1,label:"Cbm_Right_CrusI_lat"},648:{color:[153,0,204],opacity:1,label:"Cbm_Right_CrusII_med"},649:{color:[153,141,209],opacity:1,label:"Cbm_Right_CrusII_mid"},650:{color:[204,204,255],opacity:1,label:"Cbm_Right_CrusII_lat"},651:{color:[31,212,194],opacity:1,label:"Cbm_Right_7med"},652:{color:[3,255,237],opacity:1,label:"Cbm_Right_7mid"},653:{color:[204,255,255],opacity:1,label:"Cbm_Right_7lat"},654:{color:[86,74,147],opacity:1,label:"Cbm_Right_8med"},655:{color:[114,114,190],opacity:1,label:"Cbm_Right_8mid"},656:{color:[184,178,255],opacity:1,label:"Cbm_Right_8lat"},657:{color:[126,138,37],opacity:1,label:"Cbm_Right_PUNs"},658:{color:[189,197,117],opacity:1,label:"Cbm_Right_TONs"},659:{color:[240,230,140],opacity:1,label:"Cbm_Right_FLOs"},660:{color:[204,0,0],opacity:1,label:"Cbm_Left_I_V_med"},661:{color:[255,0,0],opacity:1,label:"Cbm_Left_I_V_mid"},662:{color:[0,0,255],opacity:1,label:"Cbm_Left_VI_med"},663:{color:[30,144,255],opacity:1,label:"Cbm_Left_VI_mid"},664:{color:[100,212,237],opacity:1,label:"Cbm_Left_VI_lat"},665:{color:[218,165,32],opacity:1,label:"Cbm_Left_CrusI_med"},666:{color:[255,215,0],opacity:1,label:"Cbm_Left_CrusI_mid"},667:{color:[255,255,166],opacity:1,label:"Cbm_Left_CrusI_lat"},668:{color:[153,0,204],opacity:1,label:"Cbm_Left_CrusII_med"},669:{color:[153,141,209],opacity:1,label:"Cbm_Left_CrusII_mid"},670:{color:[204,204,255],opacity:1,label:"Cbm_Left_CrusII_lat"},671:{color:[31,212,194],opacity:1,label:"Cbm_Left_7med"},672:{color:[3,255,237],opacity:1,label:"Cbm_Left_7mid"},673:{color:[204,255,255],opacity:1,label:"Cbm_Left_7lat"},674:{color:[86,74,147],opacity:1,label:"Cbm_Left_8med"},675:{color:[114,114,190],opacity:1,label:"Cbm_Left_8mid"},676:{color:[184,178,255],opacity:1,label:"Cbm_Left_8lat"},677:{color:[126,138,37],opacity:1,label:"Cbm_Left_PUNs"},678:{color:[189,197,117],opacity:1,label:"Cbm_Left_TONs"},679:{color:[240,230,140],opacity:1,label:"Cbm_Left_FLOs"},690:{color:[122,135,50],opacity:1,label:"CbmWM_Gyri_Left"},691:{color:[122,135,50],opacity:1,label:"CbmWM_Gyri_Right"},701:{color:[120,18,134],opacity:1,label:"CSF-FSL-FAST"},702:{color:[205,62,78],opacity:1,label:"GrayMatter-FSL-FAST"},703:{color:[0,225,0],opacity:1,label:"WhiteMatter-FSL-FAST"},999:{color:[255,100,100],opacity:1,label:"SUSPICIOUS"},1e3:{color:[25,5,25],opacity:1,label:"ctx-lh-unknown"},1001:{color:[25,100,40],opacity:1,label:"ctx-lh-bankssts"},1002:{color:[125,100,160],opacity:1,label:"ctx-lh-caudalanteriorcingulate"},1003:{color:[100,25,0],opacity:1,label:"ctx-lh-caudalmiddlefrontal"},1004:{color:[120,70,50],opacity:1,label:"ctx-lh-corpuscallosum"},1005:{color:[220,20,100],opacity:1,label:"ctx-lh-cuneus"},1006:{color:[220,20,10],opacity:1,label:"ctx-lh-entorhinal"},1007:{color:[180,220,140],opacity:1,label:"ctx-lh-fusiform"},1008:{color:[220,60,220],opacity:1,label:"ctx-lh-inferiorparietal"},1009:{color:[180,40,120],opacity:1,label:"ctx-lh-inferiortemporal"},1010:{color:[140,20,140],opacity:1,label:"ctx-lh-isthmuscingulate"},1011:{color:[20,30,140],opacity:1,label:"ctx-lh-lateraloccipital"},1012:{color:[35,75,50],opacity:1,label:"ctx-lh-lateralorbitofrontal"},1013:{color:[225,140,140],opacity:1,label:"ctx-lh-lingual"},1014:{color:[200,35,75],opacity:1,label:"ctx-lh-medialorbitofrontal"},1015:{color:[160,100,50],opacity:1,label:"ctx-lh-middletemporal"},1016:{color:[20,220,60],opacity:1,label:"ctx-lh-parahippocampal"},1017:{color:[60,220,60],opacity:1,label:"ctx-lh-paracentral"},1018:{color:[220,180,140],opacity:1,label:"ctx-lh-parsopercularis"},1019:{color:[20,100,50],opacity:1,label:"ctx-lh-parsorbitalis"},1020:{color:[220,60,20],opacity:1,label:"ctx-lh-parstriangularis"},1021:{color:[120,100,60],opacity:1,label:"ctx-lh-pericalcarine"},1022:{color:[220,20,20],opacity:1,label:"ctx-lh-postcentral"},1023:{color:[220,180,220],opacity:1,label:"ctx-lh-posteriorcingulate"},1024:{color:[60,20,220],opacity:1,label:"ctx-lh-precentral"},1025:{color:[160,140,180],opacity:1,label:"ctx-lh-precuneus"},1026:{color:[80,20,140],opacity:1,label:"ctx-lh-rostralanteriorcingulate"},1027:{color:[75,50,125],opacity:1,label:"ctx-lh-rostralmiddlefrontal"},1028:{color:[20,220,160],opacity:1,label:"ctx-lh-superiorfrontal"},1029:{color:[20,180,140],opacity:1,label:"ctx-lh-superiorparietal"},1030:{color:[140,220,220],opacity:1,label:"ctx-lh-superiortemporal"},1031:{color:[80,160,20],opacity:1,label:"ctx-lh-supramarginal"},1032:{color:[100,0,100],opacity:1,label:"ctx-lh-frontalpole"},1033:{color:[70,70,70],opacity:1,label:"ctx-lh-temporalpole"},1034:{color:[150,150,200],opacity:1,label:"ctx-lh-transversetemporal"},1035:{color:[255,192,32],opacity:1,label:"ctx-lh-insula"},2e3:{color:[25,5,25],opacity:1,label:"ctx-rh-unknown"},2001:{color:[25,100,40],opacity:1,label:"ctx-rh-bankssts"},2002:{color:[125,100,160],opacity:1,label:"ctx-rh-caudalanteriorcingulate"},2003:{color:[100,25,0],opacity:1,label:"ctx-rh-caudalmiddlefrontal"},2004:{color:[120,70,50],opacity:1,label:"ctx-rh-corpuscallosum"},2005:{color:[220,20,100],opacity:1,label:"ctx-rh-cuneus"},2006:{color:[220,20,10],opacity:1,label:"ctx-rh-entorhinal"},2007:{color:[180,220,140],opacity:1,label:"ctx-rh-fusiform"},2008:{color:[220,60,220],opacity:1,label:"ctx-rh-inferiorparietal"},2009:{color:[180,40,120],opacity:1,label:"ctx-rh-inferiortemporal"},2010:{color:[140,20,140],opacity:1,label:"ctx-rh-isthmuscingulate"},2011:{color:[20,30,140],opacity:1,label:"ctx-rh-lateraloccipital"},2012:{color:[35,75,50],opacity:1,label:"ctx-rh-lateralorbitofrontal"},2013:{color:[225,140,140],opacity:1,label:"ctx-rh-lingual"},2014:{color:[200,35,75],opacity:1,label:"ctx-rh-medialorbitofrontal"},2015:{color:[160,100,50],opacity:1,label:"ctx-rh-middletemporal"},2016:{color:[20,220,60],opacity:1,label:"ctx-rh-parahippocampal"},2017:{color:[60,220,60],opacity:1,label:"ctx-rh-paracentral"},2018:{color:[220,180,140],opacity:1,label:"ctx-rh-parsopercularis"},2019:{color:[20,100,50],opacity:1,label:"ctx-rh-parsorbitalis"},2020:{color:[220,60,20],opacity:1,label:"ctx-rh-parstriangularis"},2021:{color:[120,100,60],opacity:1,label:"ctx-rh-pericalcarine"},2022:{color:[220,20,20],opacity:1,label:"ctx-rh-postcentral"},2023:{color:[220,180,220],opacity:1,label:"ctx-rh-posteriorcingulate"},2024:{color:[60,20,220],opacity:1,label:"ctx-rh-precentral"},2025:{color:[160,140,180],opacity:1,label:"ctx-rh-precuneus"},2026:{color:[80,20,140],opacity:1,label:"ctx-rh-rostralanteriorcingulate"},2027:{color:[75,50,125],opacity:1,label:"ctx-rh-rostralmiddlefrontal"},2028:{color:[20,220,160],opacity:1,label:"ctx-rh-superiorfrontal"},2029:{color:[20,180,140],opacity:1,label:"ctx-rh-superiorparietal"},2030:{color:[140,220,220],opacity:1,label:"ctx-rh-superiortemporal"},2031:{color:[80,160,20],opacity:1,label:"ctx-rh-supramarginal"},2032:{color:[100,0,100],opacity:1,label:"ctx-rh-frontalpole"},2033:{color:[70,70,70],opacity:1,label:"ctx-rh-temporalpole"},2034:{color:[150,150,200],opacity:1,label:"ctx-rh-transversetemporal"},2035:{color:[255,192,32],opacity:1,label:"ctx-rh-insula"},3e3:{color:[230,250,230],opacity:1,label:"wm-lh-unknown"},3001:{color:[230,155,215],opacity:1,label:"wm-lh-bankssts"},3002:{color:[130,155,95],opacity:1,label:"wm-lh-caudalanteriorcingulate"},3003:{color:[155,230,255],opacity:1,label:"wm-lh-caudalmiddlefrontal"},3004:{color:[135,185,205],opacity:1,label:"wm-lh-corpuscallosum"},3005:{color:[35,235,155],opacity:1,label:"wm-lh-cuneus"},3006:{color:[35,235,245],opacity:1,label:"wm-lh-entorhinal"},3007:{color:[75,35,115],opacity:1,label:"wm-lh-fusiform"},3008:{color:[35,195,35],opacity:1,label:"wm-lh-inferiorparietal"},3009:{color:[75,215,135],opacity:1,label:"wm-lh-inferiortemporal"},3010:{color:[115,235,115],opacity:1,label:"wm-lh-isthmuscingulate"},3011:{color:[235,225,115],opacity:1,label:"wm-lh-lateraloccipital"},3012:{color:[220,180,205],opacity:1,label:"wm-lh-lateralorbitofrontal"},3013:{color:[30,115,115],opacity:1,label:"wm-lh-lingual"},3014:{color:[55,220,180],opacity:1,label:"wm-lh-medialorbitofrontal"},3015:{color:[95,155,205],opacity:1,label:"wm-lh-middletemporal"},3016:{color:[235,35,195],opacity:1,label:"wm-lh-parahippocampal"},3017:{color:[195,35,195],opacity:1,label:"wm-lh-paracentral"},3018:{color:[35,75,115],opacity:1,label:"wm-lh-parsopercularis"},3019:{color:[235,155,205],opacity:1,label:"wm-lh-parsorbitalis"},3020:{color:[35,195,235],opacity:1,label:"wm-lh-parstriangularis"},3021:{color:[135,155,195],opacity:1,label:"wm-lh-pericalcarine"},3022:{color:[35,235,235],opacity:1,label:"wm-lh-postcentral"},3023:{color:[35,75,35],opacity:1,label:"wm-lh-posteriorcingulate"},3024:{color:[195,235,35],opacity:1,label:"wm-lh-precentral"},3025:{color:[95,115,75],opacity:1,label:"wm-lh-precuneus"},3026:{color:[175,235,115],opacity:1,label:"wm-lh-rostralanteriorcingulate"},3027:{color:[180,205,130],opacity:1,label:"wm-lh-rostralmiddlefrontal"},3028:{color:[235,35,95],opacity:1,label:"wm-lh-superiorfrontal"},3029:{color:[235,75,115],opacity:1,label:"wm-lh-superiorparietal"},3030:{color:[115,35,35],opacity:1,label:"wm-lh-superiortemporal"},3031:{color:[175,95,235],opacity:1,label:"wm-lh-supramarginal"},3032:{color:[155,255,155],opacity:1,label:"wm-lh-frontalpole"},3033:{color:[185,185,185],opacity:1,label:"wm-lh-temporalpole"},3034:{color:[105,105,55],opacity:1,label:"wm-lh-transversetemporal"},3035:{color:[20,220,160],opacity:1,label:"wm-lh-insula"},4e3:{color:[230,250,230],opacity:1,label:"wm-rh-unknown"},4001:{color:[230,155,215],opacity:1,label:"wm-rh-bankssts"},4002:{color:[130,155,95],opacity:1,label:"wm-rh-caudalanteriorcingulate"},4003:{color:[155,230,255],opacity:1,label:"wm-rh-caudalmiddlefrontal"},4004:{color:[135,185,205],opacity:1,label:"wm-rh-corpuscallosum"},4005:{color:[35,235,155],opacity:1,label:"wm-rh-cuneus"},4006:{color:[35,235,245],opacity:1,label:"wm-rh-entorhinal"},4007:{color:[75,35,115],opacity:1,label:"wm-rh-fusiform"},4008:{color:[35,195,35],opacity:1,label:"wm-rh-inferiorparietal"},4009:{color:[75,215,135],opacity:1,label:"wm-rh-inferiortemporal"},4010:{color:[115,235,115],opacity:1,label:"wm-rh-isthmuscingulate"},4011:{color:[235,225,115],opacity:1,label:"wm-rh-lateraloccipital"},4012:{color:[220,180,205],opacity:1,label:"wm-rh-lateralorbitofrontal"},4013:{color:[30,115,115],opacity:1,label:"wm-rh-lingual"},4014:{color:[55,220,180],opacity:1,label:"wm-rh-medialorbitofrontal"},4015:{color:[95,155,205],opacity:1,label:"wm-rh-middletemporal"},4016:{color:[235,35,195],opacity:1,label:"wm-rh-parahippocampal"},4017:{color:[195,35,195],opacity:1,label:"wm-rh-paracentral"},4018:{color:[35,75,115],opacity:1,label:"wm-rh-parsopercularis"},4019:{color:[235,155,205],opacity:1,label:"wm-rh-parsorbitalis"},4020:{color:[35,195,235],opacity:1,label:"wm-rh-parstriangularis"},4021:{color:[135,155,195],opacity:1,label:"wm-rh-pericalcarine"},4022:{color:[35,235,235],opacity:1,label:"wm-rh-postcentral"},4023:{color:[35,75,35],opacity:1,label:"wm-rh-posteriorcingulate"},4024:{color:[195,235,35],opacity:1,label:"wm-rh-precentral"},4025:{color:[95,115,75],opacity:1,label:"wm-rh-precuneus"},4026:{color:[175,235,115],opacity:1,label:"wm-rh-rostralanteriorcingulate"},4027:{color:[180,205,130],opacity:1,label:"wm-rh-rostralmiddlefrontal"},4028:{color:[235,35,95],opacity:1,label:"wm-rh-superiorfrontal"},4029:{color:[235,75,115],opacity:1,label:"wm-rh-superiorparietal"},4030:{color:[115,35,35],opacity:1,label:"wm-rh-superiortemporal"},4031:{color:[175,95,235],opacity:1,label:"wm-rh-supramarginal"},4032:{color:[155,255,155],opacity:1,label:"wm-rh-frontalpole"},4033:{color:[185,185,185],opacity:1,label:"wm-rh-temporalpole"},4034:{color:[105,105,55],opacity:1,label:"wm-rh-transversetemporal"},4035:{color:[20,220,160],opacity:1,label:"wm-rh-insula"},3201:{color:[235,35,95],opacity:1,label:"wm-lh-frontal-lobe"},3203:{color:[35,75,35],opacity:1,label:"wm-lh-cingulate-lobe"},3204:{color:[135,155,195],opacity:1,label:"wm-lh-occiptal-lobe"},3205:{color:[115,35,35],opacity:1,label:"wm-lh-temporal-lobe"},3206:{color:[35,195,35],opacity:1,label:"wm-lh-parietal-lobe"},3207:{color:[20,220,160],opacity:1,label:"wm-lh-insula-lobe"},4201:{color:[235,35,95],opacity:1,label:"wm-rh-frontal-lobe"},4203:{color:[35,75,35],opacity:1,label:"wm-rh-cingulate-lobe"},4204:{color:[135,155,195],opacity:1,label:"wm-rh-occiptal-lobe"},4205:{color:[115,35,35],opacity:1,label:"wm-rh-temporal-lobe"},4206:{color:[35,195,35],opacity:1,label:"wm-rh-parietal-lobe"},4207:{color:[20,220,160],opacity:1,label:"wm-rh-insula-lobe"},1100:{color:[0,0,0],opacity:1,label:"ctx-lh-Unknown"},1101:{color:[50,50,50],opacity:1,label:"ctx-lh-Corpus_callosum"},1102:{color:[180,20,30],opacity:1,label:"ctx-lh-G_and_S_Insula_ONLY_AVERAGE"},1103:{color:[60,25,25],opacity:1,label:"ctx-lh-G_cingulate-Isthmus"},1104:{color:[25,60,60],opacity:1,label:"ctx-lh-G_cingulate-Main_part"},1200:{color:[25,60,61],opacity:1,label:"ctx-lh-G_cingulate-caudal_ACC"},1201:{color:[25,90,60],opacity:1,label:"ctx-lh-G_cingulate-rostral_ACC"},1202:{color:[25,120,60],opacity:1,label:"ctx-lh-G_cingulate-posterior"},1205:{color:[25,150,60],opacity:1,label:"ctx-lh-S_cingulate-caudal_ACC"},1206:{color:[25,180,60],opacity:1,label:"ctx-lh-S_cingulate-rostral_ACC"},1207:{color:[25,210,60],opacity:1,label:"ctx-lh-S_cingulate-posterior"},1210:{color:[25,150,90],opacity:1,label:"ctx-lh-S_pericallosal-caudal"},1211:{color:[25,180,90],opacity:1,label:"ctx-lh-S_pericallosal-rostral"},1212:{color:[25,210,90],opacity:1,label:"ctx-lh-S_pericallosal-posterior"},1105:{color:[180,20,20],opacity:1,label:"ctx-lh-G_cuneus"},1106:{color:[220,20,100],opacity:1,label:"ctx-lh-G_frontal_inf-Opercular_part"},1107:{color:[140,60,60],opacity:1,label:"ctx-lh-G_frontal_inf-Orbital_part"},1108:{color:[180,220,140],opacity:1,label:"ctx-lh-G_frontal_inf-Triangular_part"},1109:{color:[140,100,180],opacity:1,label:"ctx-lh-G_frontal_middle"},1110:{color:[180,20,140],opacity:1,label:"ctx-lh-G_frontal_superior"},1111:{color:[140,20,140],opacity:1,label:"ctx-lh-G_frontomarginal"},1112:{color:[21,10,10],opacity:1,label:"ctx-lh-G_insular_long"},1113:{color:[225,140,140],opacity:1,label:"ctx-lh-G_insular_short"},1114:{color:[23,60,180],opacity:1,label:"ctx-lh-G_and_S_occipital_inferior"},1115:{color:[180,60,180],opacity:1,label:"ctx-lh-G_occipital_middle"},1116:{color:[20,220,60],opacity:1,label:"ctx-lh-G_occipital_superior"},1117:{color:[60,20,140],opacity:1,label:"ctx-lh-G_occipit-temp_lat-Or_fusiform"},1118:{color:[220,180,140],opacity:1,label:"ctx-lh-G_occipit-temp_med-Lingual_part"},1119:{color:[65,100,20],opacity:1,label:"ctx-lh-G_occipit-temp_med-Parahippocampal_part"},1120:{color:[220,60,20],opacity:1,label:"ctx-lh-G_orbital"},1121:{color:[60,100,60],opacity:1,label:"ctx-lh-G_paracentral"},1122:{color:[20,60,220],opacity:1,label:"ctx-lh-G_parietal_inferior-Angular_part"},1123:{color:[100,100,60],opacity:1,label:"ctx-lh-G_parietal_inferior-Supramarginal_part"},1124:{color:[220,180,220],opacity:1,label:"ctx-lh-G_parietal_superior"},1125:{color:[20,180,140],opacity:1,label:"ctx-lh-G_postcentral"},1126:{color:[60,140,180],opacity:1,label:"ctx-lh-G_precentral"},1127:{color:[25,20,140],opacity:1,label:"ctx-lh-G_precuneus"},1128:{color:[20,60,100],opacity:1,label:"ctx-lh-G_rectus"},1129:{color:[60,220,20],opacity:1,label:"ctx-lh-G_subcallosal"},1130:{color:[60,20,220],opacity:1,label:"ctx-lh-G_subcentral"},1131:{color:[220,220,100],opacity:1,label:"ctx-lh-G_temporal_inferior"},1132:{color:[180,60,60],opacity:1,label:"ctx-lh-G_temporal_middle"},1133:{color:[60,60,220],opacity:1,label:"ctx-lh-G_temp_sup-G_temp_transv_and_interm_S"},1134:{color:[220,60,220],opacity:1,label:"ctx-lh-G_temp_sup-Lateral_aspect"},1135:{color:[65,220,60],opacity:1,label:"ctx-lh-G_temp_sup-Planum_polare"},1136:{color:[25,140,20],opacity:1,label:"ctx-lh-G_temp_sup-Planum_tempolare"},1137:{color:[13,0,250],opacity:1,label:"ctx-lh-G_and_S_transverse_frontopolar"},1138:{color:[61,20,220],opacity:1,label:"ctx-lh-Lat_Fissure-ant_sgt-ramus_horizontal"},1139:{color:[61,20,60],opacity:1,label:"ctx-lh-Lat_Fissure-ant_sgt-ramus_vertical"},1140:{color:[61,60,100],opacity:1,label:"ctx-lh-Lat_Fissure-post_sgt"},1141:{color:[25,25,25],opacity:1,label:"ctx-lh-Medial_wall"},1142:{color:[140,20,60],opacity:1,label:"ctx-lh-Pole_occipital"},1143:{color:[220,180,20],opacity:1,label:"ctx-lh-Pole_temporal"},1144:{color:[63,180,180],opacity:1,label:"ctx-lh-S_calcarine"},1145:{color:[221,20,10],opacity:1,label:"ctx-lh-S_central"},1146:{color:[21,220,20],opacity:1,label:"ctx-lh-S_central_insula"},1147:{color:[183,100,20],opacity:1,label:"ctx-lh-S_cingulate-Main_part_and_Intracingulate"},1148:{color:[221,20,100],opacity:1,label:"ctx-lh-S_cingulate-Marginalis_part"},1149:{color:[221,60,140],opacity:1,label:"ctx-lh-S_circular_insula_anterior"},1150:{color:[221,20,220],opacity:1,label:"ctx-lh-S_circular_insula_inferior"},1151:{color:[61,220,220],opacity:1,label:"ctx-lh-S_circular_insula_superior"},1152:{color:[100,200,200],opacity:1,label:"ctx-lh-S_collateral_transverse_ant"},1153:{color:[10,200,200],opacity:1,label:"ctx-lh-S_collateral_transverse_post"},1154:{color:[221,220,20],opacity:1,label:"ctx-lh-S_frontal_inferior"},1155:{color:[141,20,100],opacity:1,label:"ctx-lh-S_frontal_middle"},1156:{color:[61,220,100],opacity:1,label:"ctx-lh-S_frontal_superior"},1157:{color:[21,220,60],opacity:1,label:"ctx-lh-S_frontomarginal"},1158:{color:[141,60,20],opacity:1,label:"ctx-lh-S_intermedius_primus-Jensen"},1159:{color:[143,20,220],opacity:1,label:"ctx-lh-S_intraparietal-and_Parietal_transverse"},1160:{color:[61,20,180],opacity:1,label:"ctx-lh-S_occipital_anterior"},1161:{color:[101,60,220],opacity:1,label:"ctx-lh-S_occipital_middle_and_Lunatus"},1162:{color:[21,20,140],opacity:1,label:"ctx-lh-S_occipital_superior_and_transversalis"},1163:{color:[221,140,20],opacity:1,label:"ctx-lh-S_occipito-temporal_lateral"},1164:{color:[141,100,220],opacity:1,label:"ctx-lh-S_occipito-temporal_medial_and_S_Lingual"},1165:{color:[101,20,20],opacity:1,label:"ctx-lh-S_orbital-H_shapped"},1166:{color:[221,100,20],opacity:1,label:"ctx-lh-S_orbital_lateral"},1167:{color:[181,200,20],opacity:1,label:"ctx-lh-S_orbital_medial-Or_olfactory"},1168:{color:[21,180,140],opacity:1,label:"ctx-lh-S_paracentral"},1169:{color:[101,100,180],opacity:1,label:"ctx-lh-S_parieto_occipital"},1170:{color:[181,220,20],opacity:1,label:"ctx-lh-S_pericallosal"},1171:{color:[21,140,200],opacity:1,label:"ctx-lh-S_postcentral"},1172:{color:[21,20,240],opacity:1,label:"ctx-lh-S_precentral-Inferior-part"},1173:{color:[21,20,200],opacity:1,label:"ctx-lh-S_precentral-Superior-part"},1174:{color:[61,180,60],opacity:1,label:"ctx-lh-S_subcentral_ant"},1175:{color:[61,180,250],opacity:1,label:"ctx-lh-S_subcentral_post"},1176:{color:[21,20,60],opacity:1,label:"ctx-lh-S_suborbital"},1177:{color:[101,60,60],opacity:1,label:"ctx-lh-S_subparietal"},1178:{color:[21,220,220],opacity:1,label:"ctx-lh-S_supracingulate"},1179:{color:[21,180,180],opacity:1,label:"ctx-lh-S_temporal_inferior"},1180:{color:[223,220,60],opacity:1,label:"ctx-lh-S_temporal_superior"},1181:{color:[221,60,60],opacity:1,label:"ctx-lh-S_temporal_transverse"},2100:{color:[0,0,0],opacity:1,label:"ctx-rh-Unknown"},2101:{color:[50,50,50],opacity:1,label:"ctx-rh-Corpus_callosum"},2102:{color:[180,20,30],opacity:1,label:"ctx-rh-G_and_S_Insula_ONLY_AVERAGE"},2103:{color:[60,25,25],opacity:1,label:"ctx-rh-G_cingulate-Isthmus"},2104:{color:[25,60,60],opacity:1,label:"ctx-rh-G_cingulate-Main_part"},2105:{color:[180,20,20],opacity:1,label:"ctx-rh-G_cuneus"},2106:{color:[220,20,100],opacity:1,label:"ctx-rh-G_frontal_inf-Opercular_part"},2107:{color:[140,60,60],opacity:1,label:"ctx-rh-G_frontal_inf-Orbital_part"},2108:{color:[180,220,140],opacity:1,label:"ctx-rh-G_frontal_inf-Triangular_part"},2109:{color:[140,100,180],opacity:1,label:"ctx-rh-G_frontal_middle"},2110:{color:[180,20,140],opacity:1,label:"ctx-rh-G_frontal_superior"},2111:{color:[140,20,140],opacity:1,label:"ctx-rh-G_frontomarginal"},2112:{color:[21,10,10],opacity:1,label:"ctx-rh-G_insular_long"},2113:{color:[225,140,140],opacity:1,label:"ctx-rh-G_insular_short"},2114:{color:[23,60,180],opacity:1,label:"ctx-rh-G_and_S_occipital_inferior"},2115:{color:[180,60,180],opacity:1,label:"ctx-rh-G_occipital_middle"},2116:{color:[20,220,60],opacity:1,label:"ctx-rh-G_occipital_superior"},2117:{color:[60,20,140],opacity:1,label:"ctx-rh-G_occipit-temp_lat-Or_fusiform"},2118:{color:[220,180,140],opacity:1,label:"ctx-rh-G_occipit-temp_med-Lingual_part"},2119:{color:[65,100,20],opacity:1,label:"ctx-rh-G_occipit-temp_med-Parahippocampal_part"},2120:{color:[220,60,20],opacity:1,label:"ctx-rh-G_orbital"},2121:{color:[60,100,60],opacity:1,label:"ctx-rh-G_paracentral"},2122:{color:[20,60,220],opacity:1,label:"ctx-rh-G_parietal_inferior-Angular_part"},2123:{color:[100,100,60],opacity:1,label:"ctx-rh-G_parietal_inferior-Supramarginal_part"},2124:{color:[220,180,220],opacity:1,label:"ctx-rh-G_parietal_superior"},2125:{color:[20,180,140],opacity:1,label:"ctx-rh-G_postcentral"},2126:{color:[60,140,180],opacity:1,label:"ctx-rh-G_precentral"},2127:{color:[25,20,140],opacity:1,label:"ctx-rh-G_precuneus"},2128:{color:[20,60,100],opacity:1,label:"ctx-rh-G_rectus"},2129:{color:[60,220,20],opacity:1,label:"ctx-rh-G_subcallosal"},2130:{color:[60,20,220],opacity:1,label:"ctx-rh-G_subcentral"},2131:{color:[220,220,100],opacity:1,label:"ctx-rh-G_temporal_inferior"},2132:{color:[180,60,60],opacity:1,label:"ctx-rh-G_temporal_middle"},2133:{color:[60,60,220],opacity:1,label:"ctx-rh-G_temp_sup-G_temp_transv_and_interm_S"},2134:{color:[220,60,220],opacity:1,label:"ctx-rh-G_temp_sup-Lateral_aspect"},2135:{color:[65,220,60],opacity:1,label:"ctx-rh-G_temp_sup-Planum_polare"},2136:{color:[25,140,20],opacity:1,label:"ctx-rh-G_temp_sup-Planum_tempolare"},2137:{color:[13,0,250],opacity:1,label:"ctx-rh-G_and_S_transverse_frontopolar"},2138:{color:[61,20,220],opacity:1,label:"ctx-rh-Lat_Fissure-ant_sgt-ramus_horizontal"},2139:{color:[61,20,60],opacity:1,label:"ctx-rh-Lat_Fissure-ant_sgt-ramus_vertical"},2140:{color:[61,60,100],opacity:1,label:"ctx-rh-Lat_Fissure-post_sgt"},2141:{color:[25,25,25],opacity:1,label:"ctx-rh-Medial_wall"},2142:{color:[140,20,60],opacity:1,label:"ctx-rh-Pole_occipital"},2143:{color:[220,180,20],opacity:1,label:"ctx-rh-Pole_temporal"},2144:{color:[63,180,180],opacity:1,label:"ctx-rh-S_calcarine"},2145:{color:[221,20,10],opacity:1,label:"ctx-rh-S_central"},2146:{color:[21,220,20],opacity:1,label:"ctx-rh-S_central_insula"},2147:{color:[183,100,20],opacity:1,label:"ctx-rh-S_cingulate-Main_part_and_Intracingulate"},2148:{color:[221,20,100],opacity:1,label:"ctx-rh-S_cingulate-Marginalis_part"},2149:{color:[221,60,140],opacity:1,label:"ctx-rh-S_circular_insula_anterior"},2150:{color:[221,20,220],opacity:1,label:"ctx-rh-S_circular_insula_inferior"},2151:{color:[61,220,220],opacity:1,label:"ctx-rh-S_circular_insula_superior"},2152:{color:[100,200,200],opacity:1,label:"ctx-rh-S_collateral_transverse_ant"},2153:{color:[10,200,200],opacity:1,label:"ctx-rh-S_collateral_transverse_post"},2154:{color:[221,220,20],opacity:1,label:"ctx-rh-S_frontal_inferior"},2155:{color:[141,20,100],opacity:1,label:"ctx-rh-S_frontal_middle"},2156:{color:[61,220,100],opacity:1,label:"ctx-rh-S_frontal_superior"},2157:{color:[21,220,60],opacity:1,label:"ctx-rh-S_frontomarginal"},2158:{color:[141,60,20],opacity:1,label:"ctx-rh-S_intermedius_primus-Jensen"},2159:{color:[143,20,220],opacity:1,label:"ctx-rh-S_intraparietal-and_Parietal_transverse"},2160:{color:[61,20,180],opacity:1,label:"ctx-rh-S_occipital_anterior"},2161:{color:[101,60,220],opacity:1,label:"ctx-rh-S_occipital_middle_and_Lunatus"},2162:{color:[21,20,140],opacity:1,label:"ctx-rh-S_occipital_superior_and_transversalis"},2163:{color:[221,140,20],opacity:1,label:"ctx-rh-S_occipito-temporal_lateral"},2164:{color:[141,100,220],opacity:1,label:"ctx-rh-S_occipito-temporal_medial_and_S_Lingual"},2165:{color:[101,20,20],opacity:1,label:"ctx-rh-S_orbital-H_shapped"},2166:{color:[221,100,20],opacity:1,label:"ctx-rh-S_orbital_lateral"},2167:{color:[181,200,20],opacity:1,label:"ctx-rh-S_orbital_medial-Or_olfactory"},2168:{color:[21,180,140],opacity:1,label:"ctx-rh-S_paracentral"},2169:{color:[101,100,180],opacity:1,label:"ctx-rh-S_parieto_occipital"},2170:{color:[181,220,20],opacity:1,label:"ctx-rh-S_pericallosal"},2171:{color:[21,140,200],opacity:1,label:"ctx-rh-S_postcentral"},2172:{color:[21,20,240],opacity:1,label:"ctx-rh-S_precentral-Inferior-part"},2173:{color:[21,20,200],opacity:1,label:"ctx-rh-S_precentral-Superior-part"},2174:{color:[61,180,60],opacity:1,label:"ctx-rh-S_subcentral_ant"},2175:{color:[61,180,250],opacity:1,label:"ctx-rh-S_subcentral_post"},2176:{color:[21,20,60],opacity:1,label:"ctx-rh-S_suborbital"},2177:{color:[101,60,60],opacity:1,label:"ctx-rh-S_subparietal"},2178:{color:[21,220,220],opacity:1,label:"ctx-rh-S_supracingulate"},2179:{color:[21,180,180],opacity:1,label:"ctx-rh-S_temporal_inferior"},2180:{color:[223,220,60],opacity:1,label:"ctx-rh-S_temporal_superior"},2181:{color:[221,60,60],opacity:1,label:"ctx-rh-S_temporal_transverse"},2200:{color:[25,60,61],opacity:1,label:"ctx-rh-G_cingulate-caudal_ACC"},2201:{color:[25,90,60],opacity:1,label:"ctx-rh-G_cingulate-rostral_ACC"},2202:{color:[25,120,60],opacity:1,label:"ctx-rh-G_cingulate-posterior"},2205:{color:[25,150,60],opacity:1,label:"ctx-rh-S_cingulate-caudal_ACC"},2206:{color:[25,180,60],opacity:1,label:"ctx-rh-S_cingulate-rostral_ACC"},2207:{color:[25,210,60],opacity:1,label:"ctx-rh-S_cingulate-posterior"},2210:{color:[25,150,90],opacity:1,label:"ctx-rh-S_pericallosal-caudal"},2211:{color:[25,180,90],opacity:1,label:"ctx-rh-S_pericallosal-rostral"},2212:{color:[25,210,90],opacity:1,label:"ctx-rh-S_pericallosal-posterior"},3100:{color:[0,0,0],opacity:1,label:"wm-lh-Unknown"},3101:{color:[50,50,50],opacity:1,label:"wm-lh-Corpus_callosum"},3102:{color:[180,20,30],opacity:1,label:"wm-lh-G_and_S_Insula_ONLY_AVERAGE"},3103:{color:[60,25,25],opacity:1,label:"wm-lh-G_cingulate-Isthmus"},3104:{color:[25,60,60],opacity:1,label:"wm-lh-G_cingulate-Main_part"},3105:{color:[180,20,20],opacity:1,label:"wm-lh-G_cuneus"},3106:{color:[220,20,100],opacity:1,label:"wm-lh-G_frontal_inf-Opercular_part"},3107:{color:[140,60,60],opacity:1,label:"wm-lh-G_frontal_inf-Orbital_part"},3108:{color:[180,220,140],opacity:1,label:"wm-lh-G_frontal_inf-Triangular_part"},3109:{color:[140,100,180],opacity:1,label:"wm-lh-G_frontal_middle"},3110:{color:[180,20,140],opacity:1,label:"wm-lh-G_frontal_superior"},3111:{color:[140,20,140],opacity:1,label:"wm-lh-G_frontomarginal"},3112:{color:[21,10,10],opacity:1,label:"wm-lh-G_insular_long"},3113:{color:[225,140,140],opacity:1,label:"wm-lh-G_insular_short"},3114:{color:[23,60,180],opacity:1,label:"wm-lh-G_and_S_occipital_inferior"},3115:{color:[180,60,180],opacity:1,label:"wm-lh-G_occipital_middle"},3116:{color:[20,220,60],opacity:1,label:"wm-lh-G_occipital_superior"},3117:{color:[60,20,140],opacity:1,label:"wm-lh-G_occipit-temp_lat-Or_fusiform"},3118:{color:[220,180,140],opacity:1,label:"wm-lh-G_occipit-temp_med-Lingual_part"},3119:{color:[65,100,20],opacity:1,label:"wm-lh-G_occipit-temp_med-Parahippocampal_part"},3120:{color:[220,60,20],opacity:1,label:"wm-lh-G_orbital"},3121:{color:[60,100,60],opacity:1,label:"wm-lh-G_paracentral"},3122:{color:[20,60,220],opacity:1,label:"wm-lh-G_parietal_inferior-Angular_part"},3123:{color:[100,100,60],opacity:1,label:"wm-lh-G_parietal_inferior-Supramarginal_part"},3124:{color:[220,180,220],opacity:1,label:"wm-lh-G_parietal_superior"},3125:{color:[20,180,140],opacity:1,label:"wm-lh-G_postcentral"},3126:{color:[60,140,180],opacity:1,label:"wm-lh-G_precentral"},3127:{color:[25,20,140],opacity:1,label:"wm-lh-G_precuneus"},3128:{color:[20,60,100],opacity:1,label:"wm-lh-G_rectus"},3129:{color:[60,220,20],opacity:1,label:"wm-lh-G_subcallosal"},3130:{color:[60,20,220],opacity:1,label:"wm-lh-G_subcentral"},3131:{color:[220,220,100],opacity:1,label:"wm-lh-G_temporal_inferior"},3132:{color:[180,60,60],opacity:1,label:"wm-lh-G_temporal_middle"},3133:{color:[60,60,220],opacity:1,label:"wm-lh-G_temp_sup-G_temp_transv_and_interm_S"},3134:{color:[220,60,220],opacity:1,label:"wm-lh-G_temp_sup-Lateral_aspect"},3135:{color:[65,220,60],opacity:1,label:"wm-lh-G_temp_sup-Planum_polare"},3136:{color:[25,140,20],opacity:1,label:"wm-lh-G_temp_sup-Planum_tempolare"},3137:{color:[13,0,250],opacity:1,label:"wm-lh-G_and_S_transverse_frontopolar"},3138:{color:[61,20,220],opacity:1,label:"wm-lh-Lat_Fissure-ant_sgt-ramus_horizontal"},3139:{color:[61,20,60],opacity:1,label:"wm-lh-Lat_Fissure-ant_sgt-ramus_vertical"},3140:{color:[61,60,100],opacity:1,label:"wm-lh-Lat_Fissure-post_sgt"},3141:{color:[25,25,25],opacity:1,label:"wm-lh-Medial_wall"},3142:{color:[140,20,60],opacity:1,label:"wm-lh-Pole_occipital"},3143:{color:[220,180,20],opacity:1,label:"wm-lh-Pole_temporal"},3144:{color:[63,180,180],opacity:1,label:"wm-lh-S_calcarine"},3145:{color:[221,20,10],opacity:1,label:"wm-lh-S_central"},3146:{color:[21,220,20],opacity:1,label:"wm-lh-S_central_insula"},3147:{color:[183,100,20],opacity:1,label:"wm-lh-S_cingulate-Main_part_and_Intracingulate"},3148:{color:[221,20,100],opacity:1,label:"wm-lh-S_cingulate-Marginalis_part"},3149:{color:[221,60,140],opacity:1,label:"wm-lh-S_circular_insula_anterior"},3150:{color:[221,20,220],opacity:1,label:"wm-lh-S_circular_insula_inferior"},3151:{color:[61,220,220],opacity:1,label:"wm-lh-S_circular_insula_superior"},3152:{color:[100,200,200],opacity:1,label:"wm-lh-S_collateral_transverse_ant"},3153:{color:[10,200,200],opacity:1,label:"wm-lh-S_collateral_transverse_post"},3154:{color:[221,220,20],opacity:1,label:"wm-lh-S_frontal_inferior"},3155:{color:[141,20,100],opacity:1,label:"wm-lh-S_frontal_middle"},3156:{color:[61,220,100],opacity:1,label:"wm-lh-S_frontal_superior"},3157:{color:[21,220,60],opacity:1,label:"wm-lh-S_frontomarginal"},3158:{color:[141,60,20],opacity:1,label:"wm-lh-S_intermedius_primus-Jensen"},3159:{color:[143,20,220],opacity:1,label:"wm-lh-S_intraparietal-and_Parietal_transverse"},3160:{color:[61,20,180],opacity:1,label:"wm-lh-S_occipital_anterior"},3161:{color:[101,60,220],opacity:1,label:"wm-lh-S_occipital_middle_and_Lunatus"},3162:{color:[21,20,140],opacity:1,label:"wm-lh-S_occipital_superior_and_transversalis"},3163:{color:[221,140,20],opacity:1,label:"wm-lh-S_occipito-temporal_lateral"},3164:{color:[141,100,220],opacity:1,label:"wm-lh-S_occipito-temporal_medial_and_S_Lingual"},3165:{color:[101,20,20],opacity:1,label:"wm-lh-S_orbital-H_shapped"},3166:{color:[221,100,20],opacity:1,label:"wm-lh-S_orbital_lateral"},3167:{color:[181,200,20],opacity:1,label:"wm-lh-S_orbital_medial-Or_olfactory"},3168:{color:[21,180,140],opacity:1,label:"wm-lh-S_paracentral"},3169:{color:[101,100,180],opacity:1,label:"wm-lh-S_parieto_occipital"},3170:{color:[181,220,20],opacity:1,label:"wm-lh-S_pericallosal"},3171:{color:[21,140,200],opacity:1,label:"wm-lh-S_postcentral"},3172:{color:[21,20,240],opacity:1,label:"wm-lh-S_precentral-Inferior-part"},3173:{color:[21,20,200],opacity:1,label:"wm-lh-S_precentral-Superior-part"},3174:{color:[61,180,60],opacity:1,label:"wm-lh-S_subcentral_ant"},3175:{color:[61,180,250],opacity:1,label:"wm-lh-S_subcentral_post"},3176:{color:[21,20,60],opacity:1,label:"wm-lh-S_suborbital"},3177:{color:[101,60,60],opacity:1,label:"wm-lh-S_subparietal"},3178:{color:[21,220,220],opacity:1,label:"wm-lh-S_supracingulate"},3179:{color:[21,180,180],opacity:1,label:"wm-lh-S_temporal_inferior"},3180:{color:[223,220,60],opacity:1,label:"wm-lh-S_temporal_superior"},3181:{color:[221,60,60],opacity:1,label:"wm-lh-S_temporal_transverse"},4100:{color:[0,0,0],opacity:1,label:"wm-rh-Unknown"},4101:{color:[50,50,50],opacity:1,label:"wm-rh-Corpus_callosum"},4102:{color:[180,20,30],opacity:1,label:"wm-rh-G_and_S_Insula_ONLY_AVERAGE"},4103:{color:[60,25,25],opacity:1,label:"wm-rh-G_cingulate-Isthmus"},4104:{color:[25,60,60],opacity:1,label:"wm-rh-G_cingulate-Main_part"},4105:{color:[180,20,20],opacity:1,label:"wm-rh-G_cuneus"},4106:{color:[220,20,100],opacity:1,label:"wm-rh-G_frontal_inf-Opercular_part"},4107:{color:[140,60,60],opacity:1,label:"wm-rh-G_frontal_inf-Orbital_part"},4108:{color:[180,220,140],opacity:1,label:"wm-rh-G_frontal_inf-Triangular_part"},4109:{color:[140,100,180],opacity:1,label:"wm-rh-G_frontal_middle"},4110:{color:[180,20,140],opacity:1,label:"wm-rh-G_frontal_superior"},4111:{color:[140,20,140],opacity:1,label:"wm-rh-G_frontomarginal"},4112:{color:[21,10,10],opacity:1,label:"wm-rh-G_insular_long"},4113:{color:[225,140,140],opacity:1,label:"wm-rh-G_insular_short"},4114:{color:[23,60,180],opacity:1,label:"wm-rh-G_and_S_occipital_inferior"},4115:{color:[180,60,180],opacity:1,label:"wm-rh-G_occipital_middle"},4116:{color:[20,220,60],opacity:1,label:"wm-rh-G_occipital_superior"},4117:{color:[60,20,140],opacity:1,label:"wm-rh-G_occipit-temp_lat-Or_fusiform"},4118:{color:[220,180,140],opacity:1,label:"wm-rh-G_occipit-temp_med-Lingual_part"},4119:{color:[65,100,20],opacity:1,label:"wm-rh-G_occipit-temp_med-Parahippocampal_part"},4120:{color:[220,60,20],opacity:1,label:"wm-rh-G_orbital"},4121:{color:[60,100,60],opacity:1,label:"wm-rh-G_paracentral"},4122:{color:[20,60,220],opacity:1,label:"wm-rh-G_parietal_inferior-Angular_part"},4123:{color:[100,100,60],opacity:1,label:"wm-rh-G_parietal_inferior-Supramarginal_part"},4124:{color:[220,180,220],opacity:1,label:"wm-rh-G_parietal_superior"},4125:{color:[20,180,140],opacity:1,label:"wm-rh-G_postcentral"},4126:{color:[60,140,180],opacity:1,label:"wm-rh-G_precentral"},4127:{color:[25,20,140],opacity:1,label:"wm-rh-G_precuneus"},4128:{color:[20,60,100],opacity:1,label:"wm-rh-G_rectus"},4129:{color:[60,220,20],opacity:1,label:"wm-rh-G_subcallosal"},4130:{color:[60,20,220],opacity:1,label:"wm-rh-G_subcentral"},4131:{color:[220,220,100],opacity:1,label:"wm-rh-G_temporal_inferior"},4132:{color:[180,60,60],opacity:1,label:"wm-rh-G_temporal_middle"},4133:{color:[60,60,220],opacity:1,label:"wm-rh-G_temp_sup-G_temp_transv_and_interm_S"},4134:{color:[220,60,220],opacity:1,label:"wm-rh-G_temp_sup-Lateral_aspect"},4135:{color:[65,220,60],opacity:1,label:"wm-rh-G_temp_sup-Planum_polare"},4136:{color:[25,140,20],opacity:1,label:"wm-rh-G_temp_sup-Planum_tempolare"},4137:{color:[13,0,250],opacity:1,label:"wm-rh-G_and_S_transverse_frontopolar"},4138:{color:[61,20,220],opacity:1,label:"wm-rh-Lat_Fissure-ant_sgt-ramus_horizontal"},4139:{color:[61,20,60],opacity:1,label:"wm-rh-Lat_Fissure-ant_sgt-ramus_vertical"},4140:{color:[61,60,100],opacity:1,label:"wm-rh-Lat_Fissure-post_sgt"},4141:{color:[25,25,25],opacity:1,label:"wm-rh-Medial_wall"},4142:{color:[140,20,60],opacity:1,label:"wm-rh-Pole_occipital"},4143:{color:[220,180,20],opacity:1,label:"wm-rh-Pole_temporal"},4144:{color:[63,180,180],opacity:1,label:"wm-rh-S_calcarine"},4145:{color:[221,20,10],opacity:1,label:"wm-rh-S_central"},4146:{color:[21,220,20],opacity:1,label:"wm-rh-S_central_insula"},4147:{color:[183,100,20],opacity:1,label:"wm-rh-S_cingulate-Main_part_and_Intracingulate"},4148:{color:[221,20,100],opacity:1,label:"wm-rh-S_cingulate-Marginalis_part"},4149:{color:[221,60,140],opacity:1,label:"wm-rh-S_circular_insula_anterior"},4150:{color:[221,20,220],opacity:1,label:"wm-rh-S_circular_insula_inferior"},4151:{color:[61,220,220],opacity:1,label:"wm-rh-S_circular_insula_superior"},4152:{color:[100,200,200],opacity:1,label:"wm-rh-S_collateral_transverse_ant"},4153:{color:[10,200,200],opacity:1,label:"wm-rh-S_collateral_transverse_post"},4154:{color:[221,220,20],opacity:1,label:"wm-rh-S_frontal_inferior"},4155:{color:[141,20,100],opacity:1,label:"wm-rh-S_frontal_middle"},4156:{color:[61,220,100],opacity:1,label:"wm-rh-S_frontal_superior"},4157:{color:[21,220,60],opacity:1,label:"wm-rh-S_frontomarginal"},4158:{color:[141,60,20],opacity:1,label:"wm-rh-S_intermedius_primus-Jensen"},4159:{color:[143,20,220],opacity:1,label:"wm-rh-S_intraparietal-and_Parietal_transverse"},4160:{color:[61,20,180],opacity:1,label:"wm-rh-S_occipital_anterior"},4161:{color:[101,60,220],opacity:1,label:"wm-rh-S_occipital_middle_and_Lunatus"},4162:{color:[21,20,140],opacity:1,label:"wm-rh-S_occipital_superior_and_transversalis"},4163:{color:[221,140,20],opacity:1,label:"wm-rh-S_occipito-temporal_lateral"},4164:{color:[141,100,220],opacity:1,label:"wm-rh-S_occipito-temporal_medial_and_S_Lingual"},4165:{color:[101,20,20],opacity:1,label:"wm-rh-S_orbital-H_shapped"},4166:{color:[221,100,20],opacity:1,label:"wm-rh-S_orbital_lateral"},4167:{color:[181,200,20],opacity:1,label:"wm-rh-S_orbital_medial-Or_olfactory"},4168:{color:[21,180,140],opacity:1,label:"wm-rh-S_paracentral"},4169:{color:[101,100,180],opacity:1,label:"wm-rh-S_parieto_occipital"},4170:{color:[181,220,20],opacity:1,label:"wm-rh-S_pericallosal"},4171:{color:[21,140,200],opacity:1,label:"wm-rh-S_postcentral"},4172:{color:[21,20,240],opacity:1,label:"wm-rh-S_precentral-Inferior-part"},4173:{color:[21,20,200],opacity:1,label:"wm-rh-S_precentral-Superior-part"},4174:{color:[61,180,60],opacity:1,label:"wm-rh-S_subcentral_ant"},4175:{color:[61,180,250],opacity:1,label:"wm-rh-S_subcentral_post"},4176:{color:[21,20,60],opacity:1,label:"wm-rh-S_suborbital"},4177:{color:[101,60,60],opacity:1,label:"wm-rh-S_subparietal"},4178:{color:[21,220,220],opacity:1,label:"wm-rh-S_supracingulate"},4179:{color:[21,180,180],opacity:1,label:"wm-rh-S_temporal_inferior"},4180:{color:[223,220,60],opacity:1,label:"wm-rh-S_temporal_superior"},4181:{color:[221,60,60],opacity:1,label:"wm-rh-S_temporal_transverse"},5001:{color:[20,30,40],opacity:1,label:"Left-UnsegmentedWhiteMatter"},5002:{color:[20,30,40],opacity:1,label:"Right-UnsegmentedWhiteMatter"},5100:{color:[204,102,102],opacity:1,label:"fmajor"},5101:{color:[204,102,102],opacity:1,label:"fminor"},5102:{color:[255,255,102],opacity:1,label:"lh.atr"},5103:{color:[153,204,0],opacity:1,label:"lh.cab"},5104:{color:[0,153,153],opacity:1,label:"lh.ccg"},5105:{color:[204,153,255],opacity:1,label:"lh.cst"},5106:{color:[255,153,51],opacity:1,label:"lh.ilf"},5107:{color:[204,204,204],opacity:1,label:"lh.slfp"},5108:{color:[153,255,255],opacity:1,label:"lh.slft"},5109:{color:[102,153,255],opacity:1,label:"lh.unc"},5110:{color:[255,255,102],opacity:1,label:"rh.atr"},5111:{color:[153,204,0],opacity:1,label:"rh.cab"},5112:{color:[0,153,153],opacity:1,label:"rh.ccg"},5113:{color:[204,153,255],opacity:1,label:"rh.cst"},5114:{color:[255,153,51],opacity:1,label:"rh.ilf"},5115:{color:[204,204,204],opacity:1,label:"rh.slfp"},5116:{color:[153,255,255],opacity:1,label:"rh.slft"},5117:{color:[102,153,255],opacity:1,label:"rh.unc"},5200:{color:[204,102,102],opacity:1,label:"CC-ForcepsMajor"},5201:{color:[204,102,102],opacity:1,label:"CC-ForcepsMinor"},5202:{color:[255,255,102],opacity:1,label:"LAntThalRadiation"},5203:{color:[153,204,0],opacity:1,label:"LCingulumAngBundle"},5204:{color:[0,153,153],opacity:1,label:"LCingulumCingGyrus"},5205:{color:[204,153,255],opacity:1,label:"LCorticospinalTract"},5206:{color:[255,153,51],opacity:1,label:"LInfLongFas"},5207:{color:[204,204,204],opacity:1,label:"LSupLongFasParietal"},5208:{color:[153,255,255],opacity:1,label:"LSupLongFasTemporal"},5209:{color:[102,153,255],opacity:1,label:"LUncinateFas"},5210:{color:[255,255,102],opacity:1,label:"RAntThalRadiation"},5211:{color:[153,204,0],opacity:1,label:"RCingulumAngBundle"},5212:{color:[0,153,153],opacity:1,label:"RCingulumCingGyrus"},5213:{color:[204,153,255],opacity:1,label:"RCorticospinalTract"},5214:{color:[255,153,51],opacity:1,label:"RInfLongFas"},5215:{color:[204,204,204],opacity:1,label:"RSupLongFasParietal"},5216:{color:[153,255,255],opacity:1,label:"RSupLongFasTemporal"},5217:{color:[102,153,255],opacity:1,label:"RUncinateFas"},6e3:{color:[0,255,0],opacity:1,label:"CST-orig"},6001:{color:[255,255,0],opacity:1,label:"CST-hammer"},6002:{color:[0,255,255],opacity:1,label:"CST-CVS"},6003:{color:[0,0,255],opacity:1,label:"CST-flirt"},6010:{color:[236,16,231],opacity:1,label:"Left-SLF1"},6020:{color:[237,18,232],opacity:1,label:"Right-SLF1"},6030:{color:[236,13,227],opacity:1,label:"Left-SLF3"},6040:{color:[236,17,228],opacity:1,label:"Right-SLF3"},6050:{color:[1,255,1],opacity:1,label:"Left-CST"},6060:{color:[2,255,1],opacity:1,label:"Right-CST"},6070:{color:[236,14,230],opacity:1,label:"Left-SLF2"},6080:{color:[237,14,230],opacity:1,label:"Right-SLF2"},7001:{color:[72,132,181],opacity:1,label:"Lateral-nucleus"},7002:{color:[243,243,243],opacity:1,label:"Basolateral-nucleus"},7003:{color:[207,63,79],opacity:1,label:"Basal-nucleus"},7004:{color:[121,20,135],opacity:1,label:"Centromedial-nucleus"},7005:{color:[197,60,248],opacity:1,label:"Central-nucleus"},7006:{color:[2,149,2],opacity:1,label:"Medial-nucleus"},7007:{color:[221,249,166],opacity:1,label:"Cortical-nucleus"},7008:{color:[232,146,35],opacity:1,label:"Accessory-Basal-nucleus"},7009:{color:[20,60,120],opacity:1,label:"Corticoamygdaloid-transitio"},7010:{color:[250,250,0],opacity:1,label:"Anterior-amygdaloid-area-AAA"},7011:{color:[122,187,222],opacity:1,label:"Fusion-amygdala-HP-FAH"},7012:{color:[237,12,177],opacity:1,label:"Hippocampal-amygdala-transition-HATA"},7013:{color:[10,49,255],opacity:1,label:"Endopiriform-nucleus"},7014:{color:[205,184,144],opacity:1,label:"Lateral-nucleus-olfactory-tract"},7015:{color:[45,205,165],opacity:1,label:"Paralaminar-nucleus"},7016:{color:[117,160,175],opacity:1,label:"Intercalated-nucleus"},7017:{color:[221,217,21],opacity:1,label:"Prepiriform-cortex"},7018:{color:[20,60,120],opacity:1,label:"Periamygdaloid-cortex"},7019:{color:[141,21,100],opacity:1,label:"Envelope-Amygdala"},7020:{color:[225,140,141],opacity:1,label:"Extranuclear-Amydala"},7100:{color:[42,201,168],opacity:1,label:"Brainstem-inferior-colliculus"},7101:{color:[168,104,162],opacity:1,label:"Brainstem-cochlear-nucleus"},8001:{color:[74,130,181],opacity:1,label:"Thalamus-Anterior"},8002:{color:[242,241,240],opacity:1,label:"Thalamus-Ventral-anterior"},8003:{color:[206,65,78],opacity:1,label:"Thalamus-Lateral-dorsal"},8004:{color:[120,21,133],opacity:1,label:"Thalamus-Lateral-posterior"},8005:{color:[195,61,246],opacity:1,label:"Thalamus-Ventral-lateral"},8006:{color:[3,147,6],opacity:1,label:"Thalamus-Ventral-posterior-medial"},8007:{color:[220,251,163],opacity:1,label:"Thalamus-Ventral-posterior-lateral"},8008:{color:[232,146,33],opacity:1,label:"Thalamus-intralaminar"},8009:{color:[4,114,14],opacity:1,label:"Thalamus-centromedian"},8010:{color:[121,184,220],opacity:1,label:"Thalamus-mediodorsal"},8011:{color:[235,11,175],opacity:1,label:"Thalamus-medial"},8012:{color:[12,46,250],opacity:1,label:"Thalamus-pulvinar"},8013:{color:[203,182,143],opacity:1,label:"Thalamus-lateral-geniculate"},8014:{color:[42,204,167],opacity:1,label:"Thalamus-medial-geniculate"},9e3:{color:[50,100,30],opacity:1,label:"ctx-lh-prefrontal"},9001:{color:[30,100,45],opacity:1,label:"ctx-lh-primary-motor"},9002:{color:[130,100,165],opacity:1,label:"ctx-lh-premotor"},9003:{color:[105,25,5],opacity:1,label:"ctx-lh-temporal"},9004:{color:[125,70,55],opacity:1,label:"ctx-lh-posterior-parietal"},9005:{color:[225,20,105],opacity:1,label:"ctx-lh-prim-sec-somatosensory"},9006:{color:[225,20,15],opacity:1,label:"ctx-lh-occipital"},9500:{color:[50,200,30],opacity:1,label:"ctx-rh-prefrontal"},9501:{color:[30,150,45],opacity:1,label:"ctx-rh-primary-motor"},9502:{color:[130,150,165],opacity:1,label:"ctx-rh-premotor"},9503:{color:[105,75,5],opacity:1,label:"ctx-rh-temporal"},9504:{color:[125,120,55],opacity:1,label:"ctx-rh-posterior-parietal"},9505:{color:[225,70,105],opacity:1,label:"ctx-rh-prim-sec-somatosensory"},9506:{color:[225,70,15],opacity:1,label:"ctx-rh-occipital"},11100:{color:[0,0,0],opacity:1,label:"ctx_lh_Unknown"},11101:{color:[23,220,60],opacity:1,label:"ctx_lh_G_and_S_frontomargin"},11102:{color:[23,60,180],opacity:1,label:"ctx_lh_G_and_S_occipital_inf"},11103:{color:[63,100,60],opacity:1,label:"ctx_lh_G_and_S_paracentral"},11104:{color:[63,20,220],opacity:1,label:"ctx_lh_G_and_S_subcentral"},11105:{color:[13,0,250],opacity:1,label:"ctx_lh_G_and_S_transv_frontopol"},11106:{color:[26,60,0],opacity:1,label:"ctx_lh_G_and_S_cingul-Ant"},11107:{color:[26,60,75],opacity:1,label:"ctx_lh_G_and_S_cingul-Mid-Ant"},11108:{color:[26,60,150],opacity:1,label:"ctx_lh_G_and_S_cingul-Mid-Post"},11109:{color:[25,60,250],opacity:1,label:"ctx_lh_G_cingul-Post-dorsal"},11110:{color:[60,25,25],opacity:1,label:"ctx_lh_G_cingul-Post-ventral"},11111:{color:[180,20,20],opacity:1,label:"ctx_lh_G_cuneus"},11112:{color:[220,20,100],opacity:1,label:"ctx_lh_G_front_inf-Opercular"},11113:{color:[140,60,60],opacity:1,label:"ctx_lh_G_front_inf-Orbital"},11114:{color:[180,220,140],opacity:1,label:"ctx_lh_G_front_inf-Triangul"},11115:{color:[140,100,180],opacity:1,label:"ctx_lh_G_front_middle"},11116:{color:[180,20,140],opacity:1,label:"ctx_lh_G_front_sup"},11117:{color:[23,10,10],opacity:1,label:"ctx_lh_G_Ins_lg_and_S_cent_ins"},11118:{color:[225,140,140],opacity:1,label:"ctx_lh_G_insular_short"},11119:{color:[180,60,180],opacity:1,label:"ctx_lh_G_occipital_middle"},11120:{color:[20,220,60],opacity:1,label:"ctx_lh_G_occipital_sup"},11121:{color:[60,20,140],opacity:1,label:"ctx_lh_G_oc-temp_lat-fusifor"},11122:{color:[220,180,140],opacity:1,label:"ctx_lh_G_oc-temp_med-Lingual"},11123:{color:[65,100,20],opacity:1,label:"ctx_lh_G_oc-temp_med-Parahip"},11124:{color:[220,60,20],opacity:1,label:"ctx_lh_G_orbital"},11125:{color:[20,60,220],opacity:1,label:"ctx_lh_G_pariet_inf-Angular"},11126:{color:[100,100,60],opacity:1,label:"ctx_lh_G_pariet_inf-Supramar"},11127:{color:[220,180,220],opacity:1,label:"ctx_lh_G_parietal_sup"},11128:{color:[20,180,140],opacity:1,label:"ctx_lh_G_postcentral"},11129:{color:[60,140,180],opacity:1,label:"ctx_lh_G_precentral"},11130:{color:[25,20,140],opacity:1,label:"ctx_lh_G_precuneus"},11131:{color:[20,60,100],opacity:1,label:"ctx_lh_G_rectus"},11132:{color:[60,220,20],opacity:1,label:"ctx_lh_G_subcallosal"},11133:{color:[60,60,220],opacity:1,label:"ctx_lh_G_temp_sup-G_T_transv"},11134:{color:[220,60,220],opacity:1,label:"ctx_lh_G_temp_sup-Lateral"},11135:{color:[65,220,60],opacity:1,label:"ctx_lh_G_temp_sup-Plan_polar"},11136:{color:[25,140,20],opacity:1,label:"ctx_lh_G_temp_sup-Plan_tempo"},11137:{color:[220,220,100],opacity:1,label:"ctx_lh_G_temporal_inf"},11138:{color:[180,60,60],opacity:1,label:"ctx_lh_G_temporal_middle"},11139:{color:[61,20,220],opacity:1,label:"ctx_lh_Lat_Fis-ant-Horizont"},11140:{color:[61,20,60],opacity:1,label:"ctx_lh_Lat_Fis-ant-Vertical"},11141:{color:[61,60,100],opacity:1,label:"ctx_lh_Lat_Fis-post"},11142:{color:[25,25,25],opacity:1,label:"ctx_lh_Medial_wall"},11143:{color:[140,20,60],opacity:1,label:"ctx_lh_Pole_occipital"},11144:{color:[220,180,20],opacity:1,label:"ctx_lh_Pole_temporal"},11145:{color:[63,180,180],opacity:1,label:"ctx_lh_S_calcarine"},11146:{color:[221,20,10],opacity:1,label:"ctx_lh_S_central"},11147:{color:[221,20,100],opacity:1,label:"ctx_lh_S_cingul-Marginalis"},11148:{color:[221,60,140],opacity:1,label:"ctx_lh_S_circular_insula_ant"},11149:{color:[221,20,220],opacity:1,label:"ctx_lh_S_circular_insula_inf"},11150:{color:[61,220,220],opacity:1,label:"ctx_lh_S_circular_insula_sup"},11151:{color:[100,200,200],opacity:1,label:"ctx_lh_S_collat_transv_ant"},11152:{color:[10,200,200],opacity:1,label:"ctx_lh_S_collat_transv_post"},11153:{color:[221,220,20],opacity:1,label:"ctx_lh_S_front_inf"},11154:{color:[141,20,100],opacity:1,label:"ctx_lh_S_front_middle"},11155:{color:[61,220,100],opacity:1,label:"ctx_lh_S_front_sup"},11156:{color:[141,60,20],opacity:1,label:"ctx_lh_S_interm_prim-Jensen"},11157:{color:[143,20,220],opacity:1,label:"ctx_lh_S_intrapariet_and_P_trans"},11158:{color:[101,60,220],opacity:1,label:"ctx_lh_S_oc_middle_and_Lunatus"},11159:{color:[21,20,140],opacity:1,label:"ctx_lh_S_oc_sup_and_transversal"},11160:{color:[61,20,180],opacity:1,label:"ctx_lh_S_occipital_ant"},11161:{color:[221,140,20],opacity:1,label:"ctx_lh_S_oc-temp_lat"},11162:{color:[141,100,220],opacity:1,label:"ctx_lh_S_oc-temp_med_and_Lingual"},11163:{color:[221,100,20],opacity:1,label:"ctx_lh_S_orbital_lateral"},11164:{color:[181,200,20],opacity:1,label:"ctx_lh_S_orbital_med-olfact"},11165:{color:[101,20,20],opacity:1,label:"ctx_lh_S_orbital-H_Shaped"},11166:{color:[101,100,180],opacity:1,label:"ctx_lh_S_parieto_occipital"},11167:{color:[181,220,20],opacity:1,label:"ctx_lh_S_pericallosal"},11168:{color:[21,140,200],opacity:1,label:"ctx_lh_S_postcentral"},11169:{color:[21,20,240],opacity:1,label:"ctx_lh_S_precentral-inf-part"},11170:{color:[21,20,200],opacity:1,label:"ctx_lh_S_precentral-sup-part"},11171:{color:[21,20,60],opacity:1,label:"ctx_lh_S_suborbital"},11172:{color:[101,60,60],opacity:1,label:"ctx_lh_S_subparietal"},11173:{color:[21,180,180],opacity:1,label:"ctx_lh_S_temporal_inf"},11174:{color:[223,220,60],opacity:1,label:"ctx_lh_S_temporal_sup"},11175:{color:[221,60,60],opacity:1,label:"ctx_lh_S_temporal_transverse"},12100:{color:[0,0,0],opacity:1,label:"ctx_rh_Unknown"},12101:{color:[23,220,60],opacity:1,label:"ctx_rh_G_and_S_frontomargin"},12102:{color:[23,60,180],opacity:1,label:"ctx_rh_G_and_S_occipital_inf"},12103:{color:[63,100,60],opacity:1,label:"ctx_rh_G_and_S_paracentral"},12104:{color:[63,20,220],opacity:1,label:"ctx_rh_G_and_S_subcentral"},12105:{color:[13,0,250],opacity:1,label:"ctx_rh_G_and_S_transv_frontopol"},12106:{color:[26,60,0],opacity:1,label:"ctx_rh_G_and_S_cingul-Ant"},12107:{color:[26,60,75],opacity:1,label:"ctx_rh_G_and_S_cingul-Mid-Ant"},12108:{color:[26,60,150],opacity:1,label:"ctx_rh_G_and_S_cingul-Mid-Post"},12109:{color:[25,60,250],opacity:1,label:"ctx_rh_G_cingul-Post-dorsal"},12110:{color:[60,25,25],opacity:1,label:"ctx_rh_G_cingul-Post-ventral"},12111:{color:[180,20,20],opacity:1,label:"ctx_rh_G_cuneus"},12112:{color:[220,20,100],opacity:1,label:"ctx_rh_G_front_inf-Opercular"},12113:{color:[140,60,60],opacity:1,label:"ctx_rh_G_front_inf-Orbital"},12114:{color:[180,220,140],opacity:1,label:"ctx_rh_G_front_inf-Triangul"},12115:{color:[140,100,180],opacity:1,label:"ctx_rh_G_front_middle"},12116:{color:[180,20,140],opacity:1,label:"ctx_rh_G_front_sup"},12117:{color:[23,10,10],opacity:1,label:"ctx_rh_G_Ins_lg_and_S_cent_ins"},12118:{color:[225,140,140],opacity:1,label:"ctx_rh_G_insular_short"},12119:{color:[180,60,180],opacity:1,label:"ctx_rh_G_occipital_middle"},12120:{color:[20,220,60],opacity:1,label:"ctx_rh_G_occipital_sup"},12121:{color:[60,20,140],opacity:1,label:"ctx_rh_G_oc-temp_lat-fusifor"},12122:{color:[220,180,140],opacity:1,label:"ctx_rh_G_oc-temp_med-Lingual"},12123:{color:[65,100,20],opacity:1,label:"ctx_rh_G_oc-temp_med-Parahip"},12124:{color:[220,60,20],opacity:1,label:"ctx_rh_G_orbital"},12125:{color:[20,60,220],opacity:1,label:"ctx_rh_G_pariet_inf-Angular"},12126:{color:[100,100,60],opacity:1,label:"ctx_rh_G_pariet_inf-Supramar"},12127:{color:[220,180,220],opacity:1,label:"ctx_rh_G_parietal_sup"},12128:{color:[20,180,140],opacity:1,label:"ctx_rh_G_postcentral"},12129:{color:[60,140,180],opacity:1,label:"ctx_rh_G_precentral"},12130:{color:[25,20,140],opacity:1,label:"ctx_rh_G_precuneus"},12131:{color:[20,60,100],opacity:1,label:"ctx_rh_G_rectus"},12132:{color:[60,220,20],opacity:1,label:"ctx_rh_G_subcallosal"},12133:{color:[60,60,220],opacity:1,label:"ctx_rh_G_temp_sup-G_T_transv"},12134:{color:[220,60,220],opacity:1,label:"ctx_rh_G_temp_sup-Lateral"},12135:{color:[65,220,60],opacity:1,label:"ctx_rh_G_temp_sup-Plan_polar"},12136:{color:[25,140,20],opacity:1,label:"ctx_rh_G_temp_sup-Plan_tempo"},12137:{color:[220,220,100],opacity:1,label:"ctx_rh_G_temporal_inf"},12138:{color:[180,60,60],opacity:1,label:"ctx_rh_G_temporal_middle"},12139:{color:[61,20,220],opacity:1,label:"ctx_rh_Lat_Fis-ant-Horizont"},12140:{color:[61,20,60],opacity:1,label:"ctx_rh_Lat_Fis-ant-Vertical"},12141:{color:[61,60,100],opacity:1,label:"ctx_rh_Lat_Fis-post"},12142:{color:[25,25,25],opacity:1,label:"ctx_rh_Medial_wall"},12143:{color:[140,20,60],opacity:1,label:"ctx_rh_Pole_occipital"},12144:{color:[220,180,20],opacity:1,label:"ctx_rh_Pole_temporal"},12145:{color:[63,180,180],opacity:1,label:"ctx_rh_S_calcarine"},12146:{color:[221,20,10],opacity:1,label:"ctx_rh_S_central"},12147:{color:[221,20,100],opacity:1,label:"ctx_rh_S_cingul-Marginalis"},12148:{color:[221,60,140],opacity:1,label:"ctx_rh_S_circular_insula_ant"},12149:{color:[221,20,220],opacity:1,label:"ctx_rh_S_circular_insula_inf"},12150:{color:[61,220,220],opacity:1,label:"ctx_rh_S_circular_insula_sup"},12151:{color:[100,200,200],opacity:1,label:"ctx_rh_S_collat_transv_ant"},12152:{color:[10,200,200],opacity:1,label:"ctx_rh_S_collat_transv_post"},12153:{color:[221,220,20],opacity:1,label:"ctx_rh_S_front_inf"},12154:{color:[141,20,100],opacity:1,label:"ctx_rh_S_front_middle"},12155:{color:[61,220,100],opacity:1,label:"ctx_rh_S_front_sup"},12156:{color:[141,60,20],opacity:1,label:"ctx_rh_S_interm_prim-Jensen"},12157:{color:[143,20,220],opacity:1,label:"ctx_rh_S_intrapariet_and_P_trans"},12158:{color:[101,60,220],opacity:1,label:"ctx_rh_S_oc_middle_and_Lunatus"},12159:{color:[21,20,140],opacity:1,label:"ctx_rh_S_oc_sup_and_transversal"},12160:{color:[61,20,180],opacity:1,label:"ctx_rh_S_occipital_ant"},12161:{color:[221,140,20],opacity:1,label:"ctx_rh_S_oc-temp_lat"},12162:{color:[141,100,220],opacity:1,label:"ctx_rh_S_oc-temp_med_and_Lingual"},12163:{color:[221,100,20],opacity:1,label:"ctx_rh_S_orbital_lateral"},12164:{color:[181,200,20],opacity:1,label:"ctx_rh_S_orbital_med-olfact"},12165:{color:[101,20,20],opacity:1,label:"ctx_rh_S_orbital-H_Shaped"},12166:{color:[101,100,180],opacity:1,label:"ctx_rh_S_parieto_occipital"},12167:{color:[181,220,20],opacity:1,label:"ctx_rh_S_pericallosal"},12168:{color:[21,140,200],opacity:1,label:"ctx_rh_S_postcentral"},12169:{color:[21,20,240],opacity:1,label:"ctx_rh_S_precentral-inf-part"},12170:{color:[21,20,200],opacity:1,label:"ctx_rh_S_precentral-sup-part"},12171:{color:[21,20,60],opacity:1,label:"ctx_rh_S_suborbital"},12172:{color:[101,60,60],opacity:1,label:"ctx_rh_S_subparietal"},12173:{color:[21,180,180],opacity:1,label:"ctx_rh_S_temporal_inf"},12174:{color:[223,220,60],opacity:1,label:"ctx_rh_S_temporal_sup"},12175:{color:[221,60,60],opacity:1,label:"ctx_rh_S_temporal_transverse"},13100:{color:[0,0,0],opacity:1,label:"wm_lh_Unknown"},13101:{color:[23,220,60],opacity:1,label:"wm_lh_G_and_S_frontomargin"},13102:{color:[23,60,180],opacity:1,label:"wm_lh_G_and_S_occipital_inf"},13103:{color:[63,100,60],opacity:1,label:"wm_lh_G_and_S_paracentral"},13104:{color:[63,20,220],opacity:1,label:"wm_lh_G_and_S_subcentral"},13105:{color:[13,0,250],opacity:1,label:"wm_lh_G_and_S_transv_frontopol"},13106:{color:[26,60,0],opacity:1,label:"wm_lh_G_and_S_cingul-Ant"},13107:{color:[26,60,75],opacity:1,label:"wm_lh_G_and_S_cingul-Mid-Ant"},13108:{color:[26,60,150],opacity:1,label:"wm_lh_G_and_S_cingul-Mid-Post"},13109:{color:[25,60,250],opacity:1,label:"wm_lh_G_cingul-Post-dorsal"},13110:{color:[60,25,25],opacity:1,label:"wm_lh_G_cingul-Post-ventral"},13111:{color:[180,20,20],opacity:1,label:"wm_lh_G_cuneus"},13112:{color:[220,20,100],opacity:1,label:"wm_lh_G_front_inf-Opercular"},13113:{color:[140,60,60],opacity:1,label:"wm_lh_G_front_inf-Orbital"},13114:{color:[180,220,140],opacity:1,label:"wm_lh_G_front_inf-Triangul"},13115:{color:[140,100,180],opacity:1,label:"wm_lh_G_front_middle"},13116:{color:[180,20,140],opacity:1,label:"wm_lh_G_front_sup"},13117:{color:[23,10,10],opacity:1,label:"wm_lh_G_Ins_lg_and_S_cent_ins"},13118:{color:[225,140,140],opacity:1,label:"wm_lh_G_insular_short"},13119:{color:[180,60,180],opacity:1,label:"wm_lh_G_occipital_middle"},13120:{color:[20,220,60],opacity:1,label:"wm_lh_G_occipital_sup"},13121:{color:[60,20,140],opacity:1,label:"wm_lh_G_oc-temp_lat-fusifor"},13122:{color:[220,180,140],opacity:1,label:"wm_lh_G_oc-temp_med-Lingual"},13123:{color:[65,100,20],opacity:1,label:"wm_lh_G_oc-temp_med-Parahip"},13124:{color:[220,60,20],opacity:1,label:"wm_lh_G_orbital"},13125:{color:[20,60,220],opacity:1,label:"wm_lh_G_pariet_inf-Angular"},13126:{color:[100,100,60],opacity:1,label:"wm_lh_G_pariet_inf-Supramar"},13127:{color:[220,180,220],opacity:1,label:"wm_lh_G_parietal_sup"},13128:{color:[20,180,140],opacity:1,label:"wm_lh_G_postcentral"},13129:{color:[60,140,180],opacity:1,label:"wm_lh_G_precentral"},13130:{color:[25,20,140],opacity:1,label:"wm_lh_G_precuneus"},13131:{color:[20,60,100],opacity:1,label:"wm_lh_G_rectus"},13132:{color:[60,220,20],opacity:1,label:"wm_lh_G_subcallosal"},13133:{color:[60,60,220],opacity:1,label:"wm_lh_G_temp_sup-G_T_transv"},13134:{color:[220,60,220],opacity:1,label:"wm_lh_G_temp_sup-Lateral"},13135:{color:[65,220,60],opacity:1,label:"wm_lh_G_temp_sup-Plan_polar"},13136:{color:[25,140,20],opacity:1,label:"wm_lh_G_temp_sup-Plan_tempo"},13137:{color:[220,220,100],opacity:1,label:"wm_lh_G_temporal_inf"},13138:{color:[180,60,60],opacity:1,label:"wm_lh_G_temporal_middle"},13139:{color:[61,20,220],opacity:1,label:"wm_lh_Lat_Fis-ant-Horizont"},13140:{color:[61,20,60],opacity:1,label:"wm_lh_Lat_Fis-ant-Vertical"},13141:{color:[61,60,100],opacity:1,label:"wm_lh_Lat_Fis-post"},13142:{color:[25,25,25],opacity:1,label:"wm_lh_Medial_wall"},13143:{color:[140,20,60],opacity:1,label:"wm_lh_Pole_occipital"},13144:{color:[220,180,20],opacity:1,label:"wm_lh_Pole_temporal"},13145:{color:[63,180,180],opacity:1,label:"wm_lh_S_calcarine"},13146:{color:[221,20,10],opacity:1,label:"wm_lh_S_central"},13147:{color:[221,20,100],opacity:1,label:"wm_lh_S_cingul-Marginalis"},13148:{color:[221,60,140],opacity:1,label:"wm_lh_S_circular_insula_ant"},13149:{color:[221,20,220],opacity:1,label:"wm_lh_S_circular_insula_inf"},13150:{color:[61,220,220],opacity:1,label:"wm_lh_S_circular_insula_sup"},13151:{color:[100,200,200],opacity:1,label:"wm_lh_S_collat_transv_ant"},13152:{color:[10,200,200],opacity:1,label:"wm_lh_S_collat_transv_post"},13153:{color:[221,220,20],opacity:1,label:"wm_lh_S_front_inf"},13154:{color:[141,20,100],opacity:1,label:"wm_lh_S_front_middle"},13155:{color:[61,220,100],opacity:1,label:"wm_lh_S_front_sup"},13156:{color:[141,60,20],opacity:1,label:"wm_lh_S_interm_prim-Jensen"},13157:{color:[143,20,220],opacity:1,label:"wm_lh_S_intrapariet_and_P_trans"},13158:{color:[101,60,220],opacity:1,label:"wm_lh_S_oc_middle_and_Lunatus"},13159:{color:[21,20,140],opacity:1,label:"wm_lh_S_oc_sup_and_transversal"},13160:{color:[61,20,180],opacity:1,label:"wm_lh_S_occipital_ant"},13161:{color:[221,140,20],opacity:1,label:"wm_lh_S_oc-temp_lat"},13162:{color:[141,100,220],opacity:1,label:"wm_lh_S_oc-temp_med_and_Lingual"},13163:{color:[221,100,20],opacity:1,label:"wm_lh_S_orbital_lateral"},13164:{color:[181,200,20],opacity:1,label:"wm_lh_S_orbital_med-olfact"},13165:{color:[101,20,20],opacity:1,label:"wm_lh_S_orbital-H_Shaped"},13166:{color:[101,100,180],opacity:1,label:"wm_lh_S_parieto_occipital"},13167:{color:[181,220,20],opacity:1,label:"wm_lh_S_pericallosal"},13168:{color:[21,140,200],opacity:1,label:"wm_lh_S_postcentral"},13169:{color:[21,20,240],opacity:1,label:"wm_lh_S_precentral-inf-part"},13170:{color:[21,20,200],opacity:1,label:"wm_lh_S_precentral-sup-part"},13171:{color:[21,20,60],opacity:1,label:"wm_lh_S_suborbital"},13172:{color:[101,60,60],opacity:1,label:"wm_lh_S_subparietal"},13173:{color:[21,180,180],opacity:1,label:"wm_lh_S_temporal_inf"},13174:{color:[223,220,60],opacity:1,label:"wm_lh_S_temporal_sup"},13175:{color:[221,60,60],opacity:1,label:"wm_lh_S_temporal_transverse"},14100:{color:[0,0,0],opacity:1,label:"wm_rh_Unknown"},14101:{color:[23,220,60],opacity:1,label:"wm_rh_G_and_S_frontomargin"},14102:{color:[23,60,180],opacity:1,label:"wm_rh_G_and_S_occipital_inf"},14103:{color:[63,100,60],opacity:1,label:"wm_rh_G_and_S_paracentral"},14104:{color:[63,20,220],opacity:1,label:"wm_rh_G_and_S_subcentral"},14105:{color:[13,0,250],opacity:1,label:"wm_rh_G_and_S_transv_frontopol"},14106:{color:[26,60,0],opacity:1,label:"wm_rh_G_and_S_cingul-Ant"},14107:{color:[26,60,75],opacity:1,label:"wm_rh_G_and_S_cingul-Mid-Ant"},14108:{color:[26,60,150],opacity:1,label:"wm_rh_G_and_S_cingul-Mid-Post"},14109:{color:[25,60,250],opacity:1,label:"wm_rh_G_cingul-Post-dorsal"},14110:{color:[60,25,25],opacity:1,label:"wm_rh_G_cingul-Post-ventral"},14111:{color:[180,20,20],opacity:1,label:"wm_rh_G_cuneus"},14112:{color:[220,20,100],opacity:1,label:"wm_rh_G_front_inf-Opercular"},14113:{color:[140,60,60],opacity:1,label:"wm_rh_G_front_inf-Orbital"},14114:{color:[180,220,140],opacity:1,label:"wm_rh_G_front_inf-Triangul"},14115:{color:[140,100,180],opacity:1,label:"wm_rh_G_front_middle"},14116:{color:[180,20,140],opacity:1,label:"wm_rh_G_front_sup"},14117:{color:[23,10,10],opacity:1,label:"wm_rh_G_Ins_lg_and_S_cent_ins"},14118:{color:[225,140,140],opacity:1,label:"wm_rh_G_insular_short"},14119:{color:[180,60,180],opacity:1,label:"wm_rh_G_occipital_middle"},14120:{color:[20,220,60],opacity:1,label:"wm_rh_G_occipital_sup"},14121:{color:[60,20,140],opacity:1,label:"wm_rh_G_oc-temp_lat-fusifor"},14122:{color:[220,180,140],opacity:1,label:"wm_rh_G_oc-temp_med-Lingual"},14123:{color:[65,100,20],opacity:1,label:"wm_rh_G_oc-temp_med-Parahip"},14124:{color:[220,60,20],opacity:1,label:"wm_rh_G_orbital"},14125:{color:[20,60,220],opacity:1,label:"wm_rh_G_pariet_inf-Angular"},14126:{color:[100,100,60],opacity:1,label:"wm_rh_G_pariet_inf-Supramar"},14127:{color:[220,180,220],opacity:1,label:"wm_rh_G_parietal_sup"},14128:{color:[20,180,140],opacity:1,label:"wm_rh_G_postcentral"},14129:{color:[60,140,180],opacity:1,label:"wm_rh_G_precentral"},14130:{color:[25,20,140],opacity:1,label:"wm_rh_G_precuneus"},14131:{color:[20,60,100],opacity:1,label:"wm_rh_G_rectus"},14132:{color:[60,220,20],opacity:1,label:"wm_rh_G_subcallosal"},14133:{color:[60,60,220],opacity:1,label:"wm_rh_G_temp_sup-G_T_transv"},14134:{color:[220,60,220],opacity:1,label:"wm_rh_G_temp_sup-Lateral"},14135:{color:[65,220,60],opacity:1,label:"wm_rh_G_temp_sup-Plan_polar"},14136:{color:[25,140,20],opacity:1,label:"wm_rh_G_temp_sup-Plan_tempo"},14137:{color:[220,220,100],opacity:1,label:"wm_rh_G_temporal_inf"},14138:{color:[180,60,60],opacity:1,label:"wm_rh_G_temporal_middle"},14139:{color:[61,20,220],opacity:1,label:"wm_rh_Lat_Fis-ant-Horizont"},14140:{color:[61,20,60],opacity:1,label:"wm_rh_Lat_Fis-ant-Vertical"},14141:{color:[61,60,100],opacity:1,label:"wm_rh_Lat_Fis-post"},14142:{color:[25,25,25],opacity:1,label:"wm_rh_Medial_wall"},14143:{color:[140,20,60],opacity:1,label:"wm_rh_Pole_occipital"},14144:{color:[220,180,20],opacity:1,label:"wm_rh_Pole_temporal"},14145:{color:[63,180,180],opacity:1,label:"wm_rh_S_calcarine"},14146:{color:[221,20,10],opacity:1,label:"wm_rh_S_central"},14147:{color:[221,20,100],opacity:1,label:"wm_rh_S_cingul-Marginalis"},14148:{color:[221,60,140],opacity:1,label:"wm_rh_S_circular_insula_ant"},14149:{color:[221,20,220],opacity:1,label:"wm_rh_S_circular_insula_inf"},14150:{color:[61,220,220],opacity:1,label:"wm_rh_S_circular_insula_sup"},14151:{color:[100,200,200],opacity:1,label:"wm_rh_S_collat_transv_ant"},14152:{color:[10,200,200],opacity:1,label:"wm_rh_S_collat_transv_post"},14153:{color:[221,220,20],opacity:1,label:"wm_rh_S_front_inf"},14154:{color:[141,20,100],opacity:1,label:"wm_rh_S_front_middle"},14155:{color:[61,220,100],opacity:1,label:"wm_rh_S_front_sup"},14156:{color:[141,60,20],opacity:1,label:"wm_rh_S_interm_prim-Jensen"},14157:{color:[143,20,220],opacity:1,label:"wm_rh_S_intrapariet_and_P_trans"},14158:{color:[101,60,220],opacity:1,label:"wm_rh_S_oc_middle_and_Lunatus"},14159:{color:[21,20,140],opacity:1,label:"wm_rh_S_oc_sup_and_transversal"},14160:{color:[61,20,180],opacity:1,label:"wm_rh_S_occipital_ant"},14161:{color:[221,140,20],opacity:1,label:"wm_rh_S_oc-temp_lat"},14162:{color:[141,100,220],opacity:1,label:"wm_rh_S_oc-temp_med_and_Lingual"},14163:{color:[221,100,20],opacity:1,label:"wm_rh_S_orbital_lateral"},14164:{color:[181,200,20],opacity:1,label:"wm_rh_S_orbital_med-olfact"},14165:{color:[101,20,20],opacity:1,label:"wm_rh_S_orbital-H_Shaped"},14166:{color:[101,100,180],opacity:1,label:"wm_rh_S_parieto_occipital"},14167:{color:[181,220,20],opacity:1,label:"wm_rh_S_pericallosal"},14168:{color:[21,140,200],opacity:1,label:"wm_rh_S_postcentral"},14169:{color:[21,20,240],opacity:1,label:"wm_rh_S_precentral-inf-part"},14170:{color:[21,20,200],opacity:1,label:"wm_rh_S_precentral-sup-part"},14171:{color:[21,20,60],opacity:1,label:"wm_rh_S_suborbital"},14172:{color:[101,60,60],opacity:1,label:"wm_rh_S_subparietal"},14173:{color:[21,180,180],opacity:1,label:"wm_rh_S_temporal_inf"},14174:{color:[223,220,60],opacity:1,label:"wm_rh_S_temporal_sup"},14175:{color:[221,60,60],opacity:1,label:"wm_rh_S_temporal_transverse"}}},function(t,e,n){"use strict";var i=n(35),r=n(37),o=n(36),a=n(43),s=n(45),l=n(44),c=n(49),h=n(51),u=n(50),p=n(170),d=n(171),f=n(172),m=n(38),_=n(40),g=n(39);n.d(e,"b",function(){return i.a}),n.d(e,"a",function(){return r.a}),n.d(e,"c",function(){return o.a}),n.d(e,"e",function(){return a.a}),n.d(e,"d",function(){return s.a}),n.d(e,"f",function(){return l.a}),n.d(e,"n",function(){return c.a}),n.d(e,"m",function(){return h.a}),n.d(e,"o",function(){return u.a}),n.d(e,"h",function(){return p.a}),n.d(e,"g",function(){return d.a}),n.d(e,"i",function(){return f.a}),n.d(e,"k",function(){return m.a}),n.d(e,"j",function(){return _.a}),n.d(e,"l",function(){return g.a})},function(t,e,n){"use strict";function i(t,e){if(!babelHelpers.instanceof(t,e))throw new TypeError("Cannot call a class as a function")}var r=n(0),o=function(){function t(){i(this,t)}return t.uniforms=function(){return{uTextureBackTest0:{type:"t",value:[],typeGLSL:"sampler2D"},uTextureBackTest1:{type:"t",value:[],typeGLSL:"sampler2D"},uOpacity0:{type:"f",value:1,typeGLSL:"float"},uOpacity1:{type:"f",value:1,typeGLSL:"float"},uType0:{type:"i",value:0,typeGLSL:"int"},uType1:{type:"i",value:1,typeGLSL:"int"},uTrackMouse:{type:"i",value:0,typeGLSL:"int"},uMouse:{type:"v2",value:new r.e,typeGLSL:"vec2"}}},t}();e.a=o},function(t,e){"use strict";function i(t,e){if(!babelHelpers.instanceof(t,e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(e){i(this,t),this._uniforms=e,this._functions={},this._main=""}return t.prototype.functions=function(){""===this._main&&this.main();var t="";for(var e in this._functions){t+=this._functions[e]+"\n"}return t},t.prototype.uniforms=function(){var t="";for(var e in this._uniforms){var n=this._uniforms[e];t+="uniform "+n.typeGLSL+" "+e,n&&n.length&&(t+="["+n.length+"]"),t+=";\n"}return t},t.prototype.main=function(){this._main="\nvoid main(void) {\n\n  vec2 texc = vec2(((vProjectedCoords.x / vProjectedCoords.w) + 1.0 ) / 2.0,\n                ((vProjectedCoords.y / vProjectedCoords.w) + 1.0 ) / 2.0 );\n\n  // just silence warning for\n  // vec4 dummy = vPos;\n\n  //The back position is the world space position stored in the texture.\n  vec4 baseColor0 = texture2D(uTextureBackTest0, texc);\n  vec4 baseColor1 = texture2D(uTextureBackTest1, texc);\n\n  if( uTrackMouse == 1 ){\n\n      if( vProjectedCoords.x < uMouse.x ){\n\n        gl_FragColor = baseColor0;\n\n      }\n      else{\n\n        gl_FragColor = mix( baseColor0, baseColor1, uOpacity1 );\n\n      }\n\n  }\n  else{\n\n    if( uType1 == 0 ){\n\n      //merge an image into\n      gl_FragColor = mix( baseColor0, baseColor1, uOpacity1 );\n\n    }\n    else{\n\n      float opacity = baseColor1.a;\n      gl_FragColor = mix( baseColor0, baseColor1, opacity * uOpacity1 );\n\n    }\n\n  }\n\n  return;\n}\n   "},t.prototype.compute=function(){return"\n// uniforms\n"+this.uniforms()+"\n\n// varying (should fetch it from vertex directly)\n// varying vec4      vPos;\nvarying vec4      vProjectedCoords;\n\n// tailored functions\n"+this.functions()+"\n\n// main loop\n"+this._main+"\n      "},t}();e.a=r},function(t,e){"use strict";function i(t,e){if(!babelHelpers.instanceof(t,e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(){i(this,t)}return t.prototype.compute=function(){return"\n// varying vec4 vPos;\nvarying vec4 vProjectedCoords;\n\n//\n// main\n//\nvoid main() {\n\n  vec4 vPos = modelMatrix * vec4(position, 1.0 );\n  vProjectedCoords =  projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0 );\n\n}\n        "},t}();e.a=r},function(t,e,n){"use strict";var i=n(174),r=n(175),o=n(9),a=n(176),s=n(177),l=n(178),c=n(179);n.d(e,"b",function(){return i.a}),n.d(e,"c",function(){return r.a}),n.d(e,"d",function(){return o.a}),n.d(e,"e",function(){return a.a}),n.d(e,"f",function(){return s.a}),n.d(e,"g",function(){return l.a}),n.d(e,"a",function(){return c.a})},function(t,e,n){"use strict";function i(t,e){if(!babelHelpers.instanceof(t,e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=babelHelpers.typeof(e)&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+babelHelpers.typeof(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(5),s=n(9),l=n(0),c=function(){function t(t,e){for(var n=0,i;n<e.length;n++){i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),h=function(t){function e(n,o,a,c){i(this,e);var h=r(this,t.call(this));h._targetMesh=n,h._controls=o,h._camera=a,h._container=c,h._active=!0,h._worldPosition=new l.f,null!==h._targetMesh&&(h._worldPosition=h._targetMesh.position),h._material=null,h._geometry=null,h._mesh=null,h._line=null,h._label=null,h._cone=null,h._labeltext=null,h._alreadycreated=null,h._movinglabel=null,h._labelmoved=!1,h._labelhovered=!1,h._domHovered=!1,h._hovered=!0,h._manuallabeldisplay=!1,h._labelpositionx=null,h._labelpositiony=null,h._differencemousecenterlabelx=0,h._differencemousecenterlabely=0,h._handles=[];var u=new s.a(h._targetMesh,h._controls,h._camera,h._container);u.worldPosition=h._worldPosition,u.hovered=!0,h.add(u),h._handles.push(u);var p=new s.a(h._targetMesh,h._controls,h._camera,h._container);return p.worldPosition=h._worldPosition,p.hovered=!0,p.active=!0,p.tracking=!0,h.add(p),h._handles.push(p),h.create(),h.onEnd=h.onEnd.bind(h),h.onMove=h.onMove.bind(h),h.onHoverlabel=h.onHoverlabel.bind(h),h.notonHoverlabel=h.notonHoverlabel.bind(h),h.changelabeltext=h.changelabeltext.bind(h),h.movelabel=h.movelabel.bind(h),h.notmovelabel=h.notmovelabel.bind(h),h.addEventListeners(),h}return o(e,t),e.prototype.addEventListeners=function(){this._label.addEventListener("mouseenter",this.onHoverlabel),this._label.addEventListener("mouseleave",this.notonHoverlabel),this._label.addEventListener("dblclick",this.changelabeltext),this._label.addEventListener("mousedown",this.movelabel),this._container.addEventListener("mouseup",this.notmovelabel),this._container.addEventListener("mousewheel",this.onMove),this._container.addEventListener("DOMMouseScroll",this.onMove)},e.prototype.movelabel=function(){if(this._labelhovered){this._movinglabel=!0,this._labelmoved=!0;var t=-(-event.clientY+this._container.offsetHeight),e=event.clientX;this._differencemousecenterlabelx=_Mathabs(_Mathabs(e)-_Mathabs(this._labelpositionx)),this._differencemousecenterlabely=_Mathabs(_Mathabs(t)-_Mathabs(this._labelpositiony))}},e.prototype.notmovelabel=function(){this._movinglabel=!1,this._handles[0]._controls.enabled=!0,this._handles[1]._controls.enabled=!0,this._differencemousecenterlabelx=0,this._differencemousecenterlabely=0},e.prototype.onHoverlabel=function(){this._labelhovered=!0},e.prototype.notonHoverlabel=function(){this._labelhovered=!1},e.prototype.onMove=function(t){this._movinglabel&&(this._handles[0]._controls.enabled=!1,this._handles[1]._controls.enabled=!1),this._dragged=!0,this._handles[0].onMove(t),this._handles[1].onMove(t),this._hovered=this._handles[0].hovered||this._handles[1].hovered||this._labelhovered,this.update()},e.prototype.onStart=function(t){this._dragged=!1,this._handles[0].onStart(t),this._handles[1].onStart(t),this._active=this._handles[0].active||this._handles[1].active,this.update()},e.prototype.setlabeltext=function(){this._labeltext=prompt("Please enter the name of the label",""),"string"==typeof this._labeltext&&(0<this._labeltext.length?(this._label.innerHTML=this._labeltext,this._label.style.display="",this._dashline.style.display=""):(this._label.innerHTML=this._labeltext,this._label.style.display="none",this._dashline.style.display="none"))},e.prototype.changelabeltext=function(){this._labeltext=prompt("Please enter new name of the label",this._label.innerHTML),"string"==typeof this._labeltext&&(0<this._labeltext.length?(this._label.innerHTML=this._labeltext,this._label.style.display="",this._dashline.style.display=""):(this._label.innerHTML=this._labeltext,this._label.style.display="none",this._dashline.style.display="none"))},e.prototype.displaylabel=function(){"string"==typeof this._labeltext&&(this._label.innerHTML=this._labeltext,this._label.style.display="",this._dashline.style.display="",this._label.style.transform="translate3D("+this._labelpositionx+"px,"+this._labelpositiony+"px, 0)")},e.prototype.onEnd=function(t){this._handles[0].onEnd(t),this._dragged||!this._handles[1].tracking?(this._handles[1].tracking=!1,this._handles[1].onEnd(t)):this._handles[1].tracking=!1,this._alreadycreated||(this.setlabeltext(),this._alreadycreated=!0),this._active=this._handles[0].active||this._handles[1].active,this.update()},e.prototype.create=function(){this.createMesh(),this.createDOM()},e.prototype.update=function(){this.updateColor(),this.updateMeshColor(),this.updateMeshPosition(),this.updateDOMPosition(),this.updateDOMColor()},e.prototype.createMesh=function(){this._geometry=new THREE.Geometry,this._geometry.vertices.push(this._handles[0].worldPosition),this._geometry.vertices.push(this._handles[1].worldPosition),this._material=new THREE.LineBasicMaterial,this.updateMeshColor(),this._meshline=new THREE.Line(this._geometry,this._material),this._meshline.visible=!0,this.add(this._meshline),this._conegeometry=new THREE.CylinderGeometry(0,2,10),this._conegeometry.translate(0,-5,0),this._conegeometry.rotateX(-_MathPI/2),this._cone=new THREE.Mesh(this._conegeometry,this._material),this._cone.visible=!0,this.add(this._cone)},e.prototype.updateMeshColor=function(){this._material&&this._material.color.set(this._color)},e.prototype.updateMeshPosition=function(){this._geometry&&(this._geometry.verticesNeedUpdate=!0)},e.prototype.createDOM=function(){this._line=document.createElement("div"),this._line.setAttribute("class","widgets handle line"),this._line.style.position="absolute",this._line.style.transformOrigin="0 100%",this._line.style.marginTop="-1px",this._line.style.height="2px",this._line.style.width="3px",this._container.appendChild(this._line),this._dashline=document.createElement("div"),this._dashline.setAttribute("class","widgets handle dashline"),this._dashline.style.position="absolute",this._dashline.style.border="none",this._dashline.style.borderTop="2.5px dashed #F9F9F9",this._dashline.style.transformOrigin="0 100%",this._dashline.style.height="1px",this._dashline.style.width="50%",this._dashline.style.display="none",this._container.appendChild(this._dashline),this._label=document.createElement("div"),this._label.setAttribute("id",this.uuid),this._label.setAttribute("class","widgets handle label"),this._label.style.border="2px solid #F9F9F9",this._label.style.backgroundColor="#F9F9F9",this._label.style.color="#353535",this._label.style.padding="4px",this._label.style.position="absolute",this._label.style.transformOrigin="0 100%",this._label.innerHTML="Hello, world!",this._label.style.display="none",this._container.appendChild(this._label),this.updateDOMColor()},e.prototype.updateDOMPosition=function(){var t=this._handles[0].screenPosition.x,e=this._handles[0].screenPosition.y,n=this._handles[1].screenPosition.x,i=this._handles[1].screenPosition.y,r=t+(n-t)/2,o=e+(i-e)/2,a=_Mathsqrt((t-n)*(t-n)+(e-i)*(e-i)),s=180*_Mathatan(i-e,n-t)/_MathPI,l="translate3D("+t+"px,"+(e-this._container.offsetHeight)+"px, 0)";l+=" rotate("+s+"deg)",this._line.style.transform=l,this._line.style.width=a+"px";var c=0,h=0,u;u=o-this._container.offsetHeight-this._label.offsetHeight/2,r-=this._label.offsetWidth/2;if(!this._labelmoved){var p="translate3D("+_Mathround(r)+"px,"+_Mathround(u)+"px, 0)";this._label.style.transform=p,this._labelpositionx=_Mathround(r),this._labelpositiony=_Mathround(u)}this._movinglabel&&(c=event.clientX,h=-(-event.clientY+this._container.offsetHeight),this._label.style.transform="translate3D("+(c-this._differencemousecenterlabelx)+"px,"+(h-this._differencemousecenterlabely)+"px, 0)",this._labelpositionx=c-this._differencemousecenterlabelx,this._labelpositiony=h-this._differencemousecenterlabely),this._manuallabeldisplay&&this.displaylabel();var d=this._handles[0].worldPosition,f=this._handles[1].worldPosition;this._cone.position.set(f.x,f.y,f.z),this._cone.lookAt(d),t=this._handles[0].screenPosition.x,e=this._handles[0].screenPosition.y,n=this._labelpositionx,i=this._labelpositiony+this._container.offsetHeight;var m=this._label.offsetHeight,_=this._label.offsetWidth,g=0,y=0;isFinite(_)&&isFinite(m)&&(g=_/2,y=m/2),n+=g,i+=y;var v=this._handles[0].screenPosition.x,b=this._handles[0].screenPosition.y,w=(this._handles[0].screenPosition.x+this._handles[1].screenPosition.x)/2,x=(this._handles[0].screenPosition.y+this._handles[1].screenPosition.y)/2,S=this._handles[1].screenPosition.x,E=this._handles[1].screenPosition.y,M=_Mathsqrt((v-n)*(v-n)+(b-i)*(b-i)),T=_Mathsqrt((w-n)*(w-n)+(x-i)*(x-i)),A=_Mathsqrt((S-n)*(S-n)+(E-i)*(E-i)),C=_Mathmin(M,T,A),I=[M,T,A].indexOf(C);0==I&&(t=v,e=b),1==I&&(t=w,e=x),2==I&&(t=S,e=E);var L=_Mathsqrt((t-n)*(t-n)+(e-i)*(e-i)),R=180*_Mathatan(i-e,n-t)/_MathPI,O="translate3D("+t+"px,"+(e-this._container.offsetHeight)+"px, 0)";O+=" rotate("+R+"deg)",this._dashline.style.transform=O,this._dashline.style.width=L+"px"},e.prototype.updateDOMColor=function(){this._line.style.backgroundColor=""+this._color,this._dashline.style.borderTop="2.5px dashed "+this._color,this._label.style.borderColor=""+this._color},e.prototype.hideDOM=function(){this._line.style.display="none",this._dashline.style.display="none",this._label.style.display="none";for(var t in this._handles){this._handles[t].hideDOM()}},e.prototype.showDOM=function(){this._line.style.display="",this._dashline.style.display="",this._label.style.display="";for(var t in this._handles){this._handles[t].showDOM()}},e.prototype.hideMesh=function(){this.visible=!1},e.prototype.showMesh=function(){this.visible=!0},e.prototype.show=function(){this.showDOM(),this.showMesh()},e.prototype.hide=function(){this.hideDOM(),this.hideMesh()},c(e,[{key:"worldPosition",get:function get(){return this._worldPosition},set:function set(t){this._worldPosition=t,this._handles[0].worldPosition=this._worldPosition,this._handles[1].worldPosition=this._worldPosition,this.update()}}]),e}(a.a);e.a=h},function(t,e,n){"use strict";function i(t,e){if(!babelHelpers.instanceof(t,e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=babelHelpers.typeof(e)&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+babelHelpers.typeof(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(5),s=n(9),l=n(0),c=function(){function t(t,e){for(var n=0,i;n<e.length;n++){i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),h=function(t){function e(n,o,a,c){i(this,e);var h=r(this,t.call(this));h._targetMesh=n,h._controls=o,h._camera=a,h._container=c,h._active=!0,h._initOrtho=!1,h._worldPosition=new l.f,null!==h._targetMesh&&(h._worldPosition=h._targetMesh.position),h._material=null,h._geometry=null,h._mesh=null,h._line=null,h._distance=null,h._handles=[];var u=new s.a(h._targetMesh,h._controls,h._camera,h._container);u.worldPosition=h._worldPosition,u.hovered=!0,h.add(u),h._handles.push(u);var p=new s.a(h._targetMesh,h._controls,h._camera,h._container);p.worldPosition=h._worldPosition,p.hovered=!0,p.active=!0,p.tracking=!0,h.add(p),h._handles.push(p);var d=new s.a(h._targetMesh,h._controls,h._camera,h._container);d.worldPosition=h._worldPosition,d.hovered=!0,h.add(d),h._handles.push(d);var f=new s.a(h._targetMesh,h._controls,h._camera,h._container);return f.worldPosition=h._worldPosition,f.hovered=!0,h.add(f),h._handles.push(f),h.create(),h.onMove=h.onMove.bind(h),h.addEventListeners(),h._orientation=null,h._slice=null,h}return o(e,t),e.prototype.addEventListeners=function(){this._container.addEventListener("mousewheel",this.onMove),this._container.addEventListener("DOMMouseScroll",this.onMove)},e.prototype.onMove=function(t){this._dragged=!0,this._handles[0].onMove(t),this._handles[1].onMove(t),this._handles[2].onMove(t),this._handles[3].onMove(t),this._hovered=this._handles[0].hovered||this._handles[1].hovered||this._handles[2].hovered||this._handles[3].hovered,this.update()},e.prototype.onStart=function(t){this._dragged=!1,this._handles[0].onStart(t),this._handles[1].onStart(t),this._handles[2].onStart(t),this._handles[3].onStart(t),this._active=this._handles[0].active||this._handles[1].active||this._handles[2].active||this._handles[3].active,this.update()},e.prototype.onEnd=function(t){this._handles[0].onEnd(t),this._handles[2].onEnd(t),this._handles[3].onEnd(t),window.console.log(this),this._dragged||!this._handles[1].tracking?(this._handles[1].tracking=!1,this._handles[1].onEnd(t)):this._handles[1].tracking=!1,this._active=this._handles[0].active||this._handles[1].active||this._handles[2].active||this._handles[3].active,this.update()},e.prototype.create=function(){this.createMesh(),this.createDOM()},e.prototype.hideDOM=function(){this._line.style.display="none",this._distance.style.display="none",this._line2.style.display="none",this._distance2.style.display="none";for(var t in this._handles){this._handles[t].hideDOM()}this._dashline.style.display="none"},e.prototype.showDOM=function(){this._line.style.display="",this._distance.style.display="",this._line2.style.display="",this._distance2.style.display="";for(var t in this._handles){this._handles[t].showDOM()}this._dashline.style.display=""},e.prototype.hideMesh=function(){this._mesh.visible=!1,this._mesh2.visible=!1,this._handles[0].visible=!1,this._handles[1].visible=!1,this._handles[2].visible=!1,this._handles[3].visible=!1},e.prototype.showMesh=function(){this._mesh.visible=!0,this._mesh2.visible=!0,this._handles[0].visible=!0,this._handles[1].visible=!0,this._handles[2].visible=!0,this._handles[3].visible=!0},e.prototype.show=function(){this.showDOM(),this.showMesh()},e.prototype.hide=function(){this.hideDOM(),this.hideMesh()},e.prototype.update=function(){this.updateColor(),this.updateMeshColor(),this.updateMeshPosition(),this.updateDOMPosition(),this.updateDOMColor()},e.prototype.createMesh=function(){this._geometry=new THREE.Geometry,this._geometry.vertices.push(this._handles[0].worldPosition),this._geometry.vertices.push(this._handles[1].worldPosition),this._geometry2=new THREE.Geometry,this._geometry2.vertices.push(this._handles[2].worldPosition),this._geometry2.vertices.push(this._handles[3].worldPosition),this._material=new THREE.LineBasicMaterial,this._material2=new THREE.LineBasicMaterial,this.updateMeshColor(),this._mesh=new THREE.Line(this._geometry,this._material),this._mesh.visible=!0,this._mesh2=new THREE.Line(this._geometry2,this._material2),this._mesh2.visible=!0,this.add(this._mesh),this.add(this._mesh2)},e.prototype.updateMeshColor=function(){this._material&&this._material.color.set(this._color),this._material2&&this._material2.color.set(this._color)},e.prototype.updateMeshPosition=function(){this._geometry&&(this._geometry.verticesNeedUpdate=!0),this._geometry2&&(this._geometry2.verticesNeedUpdate=!0)},e.prototype.createDOM=function(){this._line=document.createElement("div"),this._line.setAttribute("class","widgets handle line"),this._line.style.position="absolute",this._line.style.transformOrigin="0 100%",this._line.style.marginTop="-1px",this._line.style.height="2px",this._line.style.width="3px",this._container.appendChild(this._line),this._distance=document.createElement("div"),this._distance.setAttribute("class","widgets handle distance"),this._distance.style.border="2px solid",this._distance.style.backgroundColor="#F9F9F9",this._distance.style.color="#353535",this._distance.style.padding="4px",this._distance.style.position="absolute",this._distance.style.transformOrigin="0 100%",this._distance.innerHTML="Hello, world!",this._container.appendChild(this._distance),this._line2=document.createElement("div"),this._line2.setAttribute("class","widgets handle line"),this._line2.style.position="absolute",this._line2.style.transformOrigin="0 100%",this._line2.style.marginTop="-1px",this._line2.style.height="2px",this._line2.style.width="3px",this._container.appendChild(this._line2),this._distance2=document.createElement("div"),this._distance2.setAttribute("class","widgets handle distance"),this._distance.style.border="2px solid",this._distance.style.backgroundColor="#F9F9F9",this._distance2.style.color="#353535",this._distance2.style.padding="4px",this._distance2.style.position="absolute",this._distance2.style.transformOrigin="0 100%",this._distance2.innerHTML="Hello, world!",this._container.appendChild(this._distance2),this._dashline=document.createElement("div"),this._dashline.setAttribute("class","widgets handle dashline"),this._dashline.style.position="absolute",this._dashline.style.border="none",this._dashline.style.borderTop="2.5px dashed #F9F9F9",this._dashline.style.transformOrigin="0 100%",this._dashline.style.height="1px",this._dashline.style.width="50%",this._container.appendChild(this._dashline),this.updateDOMColor()},e.prototype.updateDOMPosition=function(){var t=this._handles[0].screenPosition.x,e=this._handles[0].screenPosition.y,n=this._handles[1].screenPosition.x,i=this._handles[1].screenPosition.y,r=n,o=i;o=e>=i?i-30:i+30;var a=_Mathsqrt((t-n)*(t-n)+(e-i)*(e-i)),s=180*_Mathatan(i-e,n-t)/_MathPI,l=e-this._container.offsetHeight,c="translate3D("+t+"px,"+l+"px, 0)";c+=" rotate("+s+"deg)",this._line.style.transform=c,this._line.style.width=a+"px";var h=this._handles[0].worldPosition,u=this._handles[1].worldPosition;this._distance.innerHTML=_Mathsqrt((h.x-u.x)*(h.x-u.x)+(h.y-u.y)*(h.y-u.y)+(h.z-u.z)*(h.z-u.z)).toFixed(2)+" mm",this._distanceValue=_Mathsqrt((h.x-u.x)*(h.x-u.x)+(h.y-u.y)*(h.y-u.y)+(h.z-u.z)*(h.z-u.z)).toFixed(2);var p=o-this._container.offsetHeight-this._distance.offsetHeight/2;r-=this._distance.offsetWidth/2;var d="translate3D("+_Mathround(r)+"px,"+_Mathround(p)+"px, 0)";this._distance.style.transform=d;var f=this._handles[2].screenPosition.x,m=this._handles[2].screenPosition.y,_=this._handles[3].screenPosition.x,g=this._handles[3].screenPosition.y,y=_,v=g;v=m>=g?g-30:g+30,a=_Mathsqrt((f-_)*(f-_)+(m-g)*(m-g)),s=180*_Mathatan(g-m,_-f)/_MathPI,c="translate3D("+f+"px,"+(l=m-this._container.offsetHeight)+"px, 0)",c+=" rotate("+s+"deg)",this._line2.style.transform=c,this._line2.style.width=a+"px";var b=this._handles[2].worldPosition,w=this._handles[3].worldPosition;this._distance2.innerHTML=_Mathsqrt((b.x-w.x)*(b.x-w.x)+(b.y-w.y)*(b.y-w.y)+(b.z-w.z)*(b.z-w.z)).toFixed(2)+" mm",this._distance2Value=_Mathsqrt((b.x-w.x)*(b.x-w.x)+(b.y-w.y)*(b.y-w.y)+(b.z-w.z)*(b.z-w.z)).toFixed(2);var x=v-this._container.offsetHeight-this._distance2.offsetHeight/2;y-=this._distance2.offsetWidth/2,d="translate3D("+_Mathround(y)+"px,"+_Mathround(x)+"px, 0)",this._distance2.style.transform=d;var S=this.getPointInBetweenByPerc(this._handles[0].worldPosition,this._handles[1].worldPosition,.5),E=this.getPointInBetweenByPerc(this._handles[2].worldPosition,this._handles[3].worldPosition,.5),M=this._handles[0].worldToScreen(S,this._camera,this._container),T=this._handles[0].worldToScreen(E,this._camera,this._container);t=M.x,e=M.y,n=T.x,i=T.y,a=_Mathsqrt((t-n)*(t-n)+(e-i)*(e-i)),s=180*_Mathatan(i-e,n-t)/_MathPI,c="translate3D("+t+"px,"+(l=e-this._container.offsetHeight)+"px, 0)",c+=" rotate("+s+"deg)",this._dashline.style.transform=c,this._dashline.style.width=a+"px"},e.prototype.updateDOMColor=function(){this._line.style.backgroundColor=""+this._color,this._distance.style.borderColor=""+this._color,this._line2.style.backgroundColor=""+this._color,this._distance2.style.borderColor=""+this._color},e.prototype.getPointInBetweenByPerc=function(t,e,n){var i=e.clone().sub(t),r=i.length();return i=i.normalize().multiplyScalar(r*n),t.clone().add(i)},e.prototype.initOrtho=function(){this._initOrtho=!0;var t=this.getPointInBetweenByPerc(this._handles[0].worldPosition,this._handles[1].worldPosition,.5);this._handles[2].worldPosition=this.getPointInBetweenByPerc(this._handles[0].worldPosition,this._handles[1].worldPosition,.25),this._handles[3].worldPosition=this.getPointInBetweenByPerc(this._handles[0].worldPosition,this._handles[1].worldPosition,.75),this._handles[2].worldPosition.x=t.x-_Mathsqrt((t.y-this._handles[2].worldPosition.y)*(t.y-this._handles[2].worldPosition.y)),this._handles[2].worldPosition.y=t.y+_Mathsqrt((t.x-this._handles[2].worldPosition.x)*(t.x-this._handles[2].worldPosition.x)),this._handles[3].worldPosition.x=t.x+_Mathsqrt((t.y-this._handles[2].worldPosition.y)*(t.y-this._handles[2].worldPosition.y)),this._handles[3].worldPosition.y=t.y-_Mathsqrt((t.x-this._handles[2].worldPosition.x)*(t.x-this._handles[2].worldPosition.x))},c(e,[{key:"worldPosition",get:function get(){return this._worldPosition},set:function set(t){this._worldPosition=t,this._handles[0].worldPosition=this._worldPosition,this._handles[1].worldPosition=this._worldPosition,this._handles[2].worldPosition=this._worldPosition,this._handles[3].worldPosition=this._worldPosition,this.update()}},{key:"shotestDistance",get:function get(){return this._distanceValue<this._distance2Value?this._distanceValue:this._distance2Value}},{key:"longestDistance",get:function get(){return this._distanceValue>this._distance2Value?this._distanceValue:this._distance2Value}}]),e}(a.a);e.a=h},function(t,e,n){"use strict";function i(t,e){if(!babelHelpers.instanceof(t,e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=babelHelpers.typeof(e)&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+babelHelpers.typeof(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(5),s=n(9),l=n(0),c=function(){function t(t,e){for(var n=0,i;n<e.length;n++){i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),h=function(t){function e(n,o,a,c){i(this,e);var h=r(this,t.call(this));h._targetMesh=n,h._controls=o,h._camera=a,h._container=c,h._active=!0,h._init=!1,h._worldPosition=new l.f,null!==h._targetMesh&&(h._worldPosition=h._targetMesh.position),h._material=null,h._geometry=null,h._mesh=null,h._lines=[],h._area=null,h._handles=[];var u=new s.a(h._targetMesh,h._controls,h._camera,h._container);return u.worldPosition=h._worldPosition,u.hovered=!0,h.add(u),h._handles.push(u),h.create(),h.onMove=h.onMove.bind(h),h.addEventListeners(),h._orientation=null,h._slice=null,h}return o(e,t),e.prototype.addEventListeners=function(){this._container.addEventListener("mousewheel",this.onMove),this._container.addEventListener("DOMMouseScroll",this.onMove)},e.prototype.onMove=function(t){this._dragged=!0;var e=this._handles.length;if(this.active&&!this._init){var n=this._handles[e-1];n.hovered=!1,n.active=!1,n.tracking=!1;var i=new s.a(this._targetMesh,this._controls,this._camera,this._container);i.worldPosition=this._worldPosition,i.hovered=!0,i.active=!0,i.tracking=!0,this.add(i),this._handles.push(i);var r=document.createElement("div");r.setAttribute("class","widgets handle line"),r.style.position="absolute",r.style.transformOrigin="0 100%",r.style.marginTop="-1px",r.style.height="2px",r.style.width="3px",r.style.backgroundColor="#F9F9F9",this._lines.push(r),this._container.appendChild(r)}var o=!1;for(var a in this._handles){this._handles[a].onMove(t),o=o||this._handles[a].hovered}this._hovered=o,this.active&&2<e&&this.pushPopHandle(),this.update()},e.prototype.onStart=function(t){this._dragged=!1;var e=!1;for(var n in this._handles){this._handles[n].onStart(t),e=e||this._handles[n].active}this._active=e,this.update()},e.prototype.onEnd=function(t){var e=!1;for(var n in this._handles.slice(0,this._handles.length-2)){this._handles[n].onEnd(t),e=e||this._handles[n].active}if(this._dragged||!this._handles[this._handles.length-1].tracking?(this._handles[this._handles.length-1].tracking=!1,this._handles[this._handles.length-1].onEnd(t)):this._handles[this._handles.length-1].tracking=!1,e=e||this._handles[this._handles.length-1].active,this._active=e,this._lines.length<this._handles.length){var i=document.createElement("div");i.setAttribute("class","widgets handle line"),i.style.position="absolute",i.style.transformOrigin="0 100%",i.style.marginTop="-1px",i.style.height="2px",i.style.width="3px",i.style.backgroundColor="#F9F9F9",this._lines.push(i),this._container.appendChild(i)}this._init=!0,this.updateMesh(),this.update()},e.prototype.create=function(){this.createDOM()},e.prototype.hideDOM=function(){for(var t in this._handles){this._handles[t].hideDOM()}for(var e in this._lines){this._lines[e].style.display="none"}},e.prototype.showDOM=function(){for(var t in this._handles){this._handles[t].showDOM()}for(var e in this._lines){this._lines[e].style.display=""}},e.prototype.hideMesh=function(){this.visible=!1},e.prototype.showMesh=function(){this.visible=!0},e.prototype.show=function(){this.showDOM(),this.showMesh()},e.prototype.hide=function(){this.hideDOM(),this.hideMesh()},e.prototype.update=function(){this.updateColor();for(var t in this._handles){this._handles[t].update()}this.updateMeshColor(),this.updateMeshPosition(),this.updateDOMPosition(),this.updateDOMColor()},e.prototype.updateMesh=function(){var t=[];for(var e in this._handles){t.push(this._handles[e].worldPosition)}var n=AMI.SliceGeometry.centerOfMass(t),i=new THREE.Vector3(0,0,0),r=new THREE.Vector3(0,0,0);i.subVectors(t[0],n),r.subVectors(t[1],n);var o=new THREE.Vector3(0,0,0);o.crossVectors(i,r);for(var a=n,s=new THREE.Vector3(t[0].x-a.x,t[0].y-a.y,t[0].z-a.z).normalize(),l=new THREE.Vector3(0,0,0).crossVectors(s,o).normalize(),c=[],h=0,u;h<t.length;h++){u=new THREE.Vector3(t[h].x,t[h].y,t[h].z);u.direction=new THREE.Vector3(t[h].x-a.x,t[h].y-a.y,t[h].z-a.z).normalize();var p=s.dot(u.direction),d=l.dot(u.direction);u.xy={x:p,y:d};var f=_Mathatan(d,p)*(180/_MathPI);u.angle=f,c.push(u)}var m=AMI.SliceGeometry.shape(c);new THREE.Shape(c);this._geometry=new THREE.ShapeGeometry(m),this._geometry.vertices=c,this._geometry.verticesNeedUpdate=!0,this._geometry.elementsNeedUpdate=!0,this._mesh=new THREE.Mesh(this._geometry,new THREE.MeshBasicMaterial({color:65280})),this._mesh.visible=!0,this.add(this._mesh)},e.prototype.updateMeshColor=function(){this._material&&this._material.color.set(this._color)},e.prototype.updateMeshPosition=function(){this._geometry&&(this._geometry.verticesNeedUpdate=!0)},e.prototype.createDOM=function(){this._line=document.createElement("div"),this._line.setAttribute("class","widgets handle line"),this._line.style.position="absolute",this._line.style.transformOrigin="0 100%",this._line.style.marginTop="-1px",this._line.style.height="2px",this._line.style.width="3px",this._container.appendChild(this._line),this.updateDOMColor()},e.prototype.isPointOnLine=function(t,e,n){var i=new l.f;return i.crossVectors(t.clone().sub(n),e.clone().sub(n)),!i.length()},e.prototype.pushPopHandle=function(){var t=this._handles[this._handles.length-3],e=this._handles[this._handles.length-2],n=this._handles[this._handles.length-1],i=this.isPointOnLine(t.worldPosition,e.worldPosition,n.worldPosition),r=t,o=n,a=_Mathsqrt((r.x-o.x)*(r.x-o.x)+(r.y-o.y)*(r.y-o.y)+(r.z-o.z)*(r.z-o.z));if(i||3>a){e._dom.style.display="none",this.remove(e),this._handles[this._handles.length-2]=n,this._handles.pop();var s=this._lines.pop();s.style.display="none",this._container.removeChild(s)}return i},e.prototype.updateLineDOM=function(t,e,n){var i=this._handles[e].screenPosition.x,r=this._handles[e].screenPosition.y,o=this._handles[n].screenPosition.x,a=this._handles[n].screenPosition.y,s=_Mathsqrt((i-o)*(i-o)+(r-a)*(r-a)),l=180*_Mathatan(a-r,o-i)/_MathPI,c="translate3D("+i+"px, "+(r-this._container.offsetHeight)+"px, 0)";c+=" rotate("+l+"deg)",this._lines[t].style.transform=c,this._lines[t].style.width=s+"px"},e.prototype.updateDOMPosition=function(){if(2<=this._handles.length)for(var t in this._lines){this.updateLineDOM(t,t,parseInt(t)+1==this._handles.length?0:parseInt(t)+1)}},e.prototype.updateDOMColor=function(){if(2<=this._handles.length)for(var t in this._lines){this._lines[t].style.backgroundColor=""+this._color}},e.prototype.getPointInBetweenByPerc=function(t,e,n){var i=e.clone().sub(t),r=i.length();return i=i.normalize().multiplyScalar(r*n),t.clone().add(i)},c(e,[{key:"worldPosition",get:function get(){return this._worldPosition},set:function set(t){this._worldPosition=t;for(var e in this._handles){this._handles[e]._worldPosition=this._worldPosition}this.update()}}]),e}(a.a);e.a=h},function(t,e,n){"use strict";function i(t,e){if(!babelHelpers.instanceof(t,e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=babelHelpers.typeof(e)&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+babelHelpers.typeof(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(5),s=n(9),l=n(0),c=function(){function t(t,e){for(var n=0,i;n<e.length;n++){i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),h=function(t){function e(n,o,a,c){i(this,e);var h=r(this,t.call(this,c));h._targetMesh=n,h._controls=o,h._camera=a,h._active=!0,h._lastEvent=null,h._moving=!1,h._domHovered=!1,h._worldPosition=new l.f,null!==h._targetMesh&&(h._worldPosition=h._targetMesh.position),h._material=null,h._geometry=null,h._mesh=null,h._line=null,h._distance=null,h._handles=[];var u=new s.a(h._targetMesh,h._controls,h._camera,h._container);u.worldPosition=h._worldPosition,u.hovered=!0,h.add(u),h._handles.push(u);var p=new s.a(h._targetMesh,h._controls,h._camera,h._container);return p.worldPosition=h._worldPosition,p.hovered=!0,p.active=!0,p.tracking=!0,h.add(p),h._handles.push(p),h.imoveHandle=new s.a(h._targetMesh,h._controls,h._camera,h._container),h.imoveHandle.worldPosition=h._worldPosition,h.imoveHandle.hovered=!0,h.add(h.imoveHandle),h._handles.push(h.imoveHandle),h.fmoveHandle=new s.a(h._targetMesh,h._controls,h._camera,h._container),h.fmoveHandle.worldPosition=h._worldPosition,h.fmoveHandle.hovered=!0,h.add(h.fmoveHandle),h._handles.push(h.fmoveHandle),h.create(),h.initOffsets(),h.onMove=h.onMove.bind(h),h.onEndControl=h.onEndControl.bind(h),h.onHover=h.onHover.bind(h),h.addEventListeners(),h}return o(e,t),e.prototype.addEventListeners=function(){this._container.addEventListener("mousewheel",this.onMove),this._container.addEventListener("DOMMouseScroll",this.onMove),this._controls.addEventListener("end",this.onEndControl),this._line.addEventListener("mouseenter",this.onHover),this._line.addEventListener("mouseleave",this.onHover),this._distance.addEventListener("mouseenter",this.onHover),this._distance.addEventListener("mouseleave",this.onHover)},e.prototype.removeEventListeners=function(){this._container.removeEventListener("mousewheel",this.onMove),this._container.removeEventListener("DOMMouseScroll",this.onMove),this._controls.removeEventListener("end",this.onEndControl),this._line.removeEventListener("mouseenter",this.onHover),this._line.removeEventListener("mouseleave",this.onHover),this._distance.removeEventListener("mouseenter",this.onHover),this._distance.removeEventListener("mouseleave",this.onHover)},e.prototype.onHover=function(t){t&&(this._lastEvent=t,t.preventDefault(),this.hoverDom(t)),this.hoverMesh(),this._hovered=this._handles[0].hovered||this._handles[1].hovered||this._domHovered,this._container.style.cursor=this._hovered?"pointer":"default"},e.prototype.hoverMesh=function(){},e.prototype.hoverDom=function(t){this._domHovered="mouseenter"===t.type},e.prototype.onMove=function(t){if(this._lastEvent=t,this._dragged=!0,this._active){if(this.fmoveHandle.active=!0,this.fmoveHandle.onMove(t),this.fmoveHandle.active=!1,this.fmoveHandle.hide(),this._moving)for(var e in this._handles.slice(0,-2)){this._handles[e].worldPosition.x=this._handles[e].worldPosition.x+(this.fmoveHandle.worldPosition.x-this.imoveHandle.worldPosition.x),this._handles[e].worldPosition.y=this._handles[e].worldPosition.y+(this.fmoveHandle.worldPosition.y-this.imoveHandle.worldPosition.y),this._handles[e].worldPosition.z=this._handles[e].worldPosition.z+(this.fmoveHandle.worldPosition.z-this.imoveHandle.worldPosition.z)}this.imoveHandle.active=!0,this.imoveHandle.onMove(t),this.imoveHandle.active=!1,this.imoveHandle.hide()}this._handles[0].onMove(t),this._handles[1].onMove(t),this._hovered=this._handles[0].hovered||this._handles[1].hovered||this._domHovered,this.update()},e.prototype.onStart=function(t){this._lastEvent=t,this._dragged=!1,this.imoveHandle.active=!0,this.imoveHandle.onMove(t),this.imoveHandle.active=!1,this.imoveHandle.hide(),this._handles[0].onStart(t),this._handles[1].onStart(t),this._active=this._handles[0].active||this._handles[1].active||this._domHovered,this._domHovered&&(this._moving=!0),this.update()},e.prototype.onEnd=function(t){this._lastEvent=t,this._handles[0].onEnd(t),this._moving=!1,this._dragged||!this._handles[1].tracking?(this._handles[1].tracking=!1,this._handles[1].onEnd(t)):this._handles[1].tracking=!1,this._active=this._handles[0].active||this._handles[1].active,this.update()},e.prototype.onEndControl=function(){var t=this;this._lastEvent&&window.requestAnimationFrame(function(){t.onMove(t._lastEvent)})},e.prototype.create=function(){this.createMesh(),this.createDOM()},e.prototype.hideDOM=function(){this._line.style.display="none",this._distance.style.display="none";for(var t in this._handles){this._handles[t].hideDOM()}},e.prototype.showDOM=function(){this._line.style.display="",this._distance.style.display="";for(var t in this._handles){this._handles[t].showDOM()}},e.prototype.hideMesh=function(){this.visible=!1},e.prototype.showMesh=function(){this.visible=!0},e.prototype.show=function(){this.showDOM(),this.showMesh()},e.prototype.hide=function(){this.hideDOM(),this.hideMesh()},e.prototype.update=function(){this.updateColor(),this._handles[0].update(),this._handles[1].update(),this.updateMeshColor(),this.updateMeshPosition(),this.updateDOMColor(),this.updateDOMPosition()},e.prototype.createMesh=function(){this._geometry=new THREE.Geometry,this._geometry.vertices.push(this._handles[0].worldPosition),this._geometry.vertices.push(this._handles[1].worldPosition),this._material=new THREE.LineBasicMaterial,this.updateMeshColor(),this._mesh=new THREE.Line(this._geometry,this._material),this._mesh.visible=!0,this.add(this._mesh)},e.prototype.updateMeshColor=function(){this._material&&this._material.color.set(this._color)},e.prototype.updateMeshPosition=function(){this._geometry&&(this._geometry.verticesNeedUpdate=!0)},e.prototype.createDOM=function(){this._line=document.createElement("div"),this._line.setAttribute("id",this.uuid),this._line.setAttribute("class","AMI Widget Ruler"),this._line.style.position="absolute",this._line.style.transformOrigin="0 100%",this._line.style.marginTop="-1px",this._line.style.height="2px",this._line.style.width="3px",this._container.appendChild(this._line),this._distance=document.createElement("div"),this._distance.setAttribute("class","widgets handle distance"),this._distance.style.border="2px solid",this._distance.style.backgroundColor="#F9F9F9",this._distance.style.color="#353535",this._distance.style.padding="4px",this._distance.style.position="absolute",this._distance.style.transformOrigin="0 100%",this._distance.innerHTML="Hello, world!",this._container.appendChild(this._distance),this.updateDOMColor()},e.prototype.updateDOMPosition=function(){var t=this._handles[0].screenPosition.x,e=this._handles[0].screenPosition.y,n=this._handles[1].screenPosition.x,i=this._handles[1].screenPosition.y,r=n,o=i;o=e>=i?i-30:i+30;var a=_Mathsqrt((t-n)*(t-n)+(e-i)*(e-i)),s=180*_Mathatan(i-e,n-t)/_MathPI,l="translate3D("+t+"px,"+(e-this._container.offsetHeight)+"px, 0)";l+=" rotate("+s+"deg)",this._line.style.transform=l,this._line.style.width=a+"px";var c=this._handles[0].worldPosition,h=this._handles[1].worldPosition;this._distance.innerHTML=_Mathsqrt((c.x-h.x)*(c.x-h.x)+(c.y-h.y)*(c.y-h.y)+(c.z-h.z)*(c.z-h.z)).toFixed(2)+" mm";var u=o-this._container.offsetHeight-this._distance.offsetHeight/2;r-=this._distance.offsetWidth/2;var p="translate3D("+_Mathround(r)+"px,"+_Mathround(u)+"px, 0)";this._distance.style.transform=p},e.prototype.updateDOMColor=function(){this._line.style.backgroundColor=""+this._color,this._distance.style.borderColor=""+this._color},e.prototype.free=function(){this._container.removeEventListener("mousewheel",this.onMove),this._container.removeEventListener("DOMMouseScroll",this.onMove),this._handles.forEach(function(t){t.free()}),this._handles=[],this._container.removeChild(this._line),this._container.removeChild(this._distance),this.remove(this._mesh),t.prototype.free.call(this)},c(e,[{key:"worldPosition",get:function get(){return this._worldPosition},set:function set(t){this._worldPosition=t,this._handles[0].worldPosition=this._worldPosition,this._handles[1].worldPosition=this._worldPosition,this.update()}}]),e}(a.a);e.a=h},function(t,e,n){"use strict";function i(t,e){if(!babelHelpers.instanceof(t,e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=babelHelpers.typeof(e)&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+babelHelpers.typeof(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(5),s=n(32),l=n(23),c=n(83),h=n(10),u=n(0),p=function(){function t(t,e){for(var n=0,i;n<e.length;n++){i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),d=function(t){function e(n,o,a,s,l){i(this,e);var c=r(this,t.call(this,l));return c._stack=n,c._targetMesh=o,c._controls=a,c._camera=s,c._plane={position:new u.f,direction:new u.f},c._offset=new u.f,c._raycaster=new THREE.Raycaster,c._tracking=!1,c._mouse=new u.e,c._lastEvent=null,c._worldPosition=new u.f,c._screenPosition=new u.e,c._material=null,c._geometry=null,c._mesh=null,c._meshDisplayed=!0,c._meshHovered=!1,c._meshStyle="sphere",c._dom=null,c._domDisplayed=!0,c._domHovered=!1,c._domStyle="circle",null!==c._targetMesh&&c._worldPosition.copy(c._targetMesh.position),c._screenPosition=c.worldToScreen(c._worldPosition,c._camera,c._container),c.create(),c.initOffsets(),c.onMove=c.onMove.bind(c),c.onHover=c.onHover.bind(c),c.onEndControl=c.onEndControl.bind(c),c.addEventListeners(),c}return o(e,t),e.prototype.addEventListeners=function(){this._dom.addEventListener("mouseenter",this.onHover),this._dom.addEventListener("mouseleave",this.onHover),this._container.addEventListener("mousewheel",this.onMove),this._container.addEventListener("DOMMouseScroll",this.onMove),this._controls.addEventListener("end",this.onEndControl)},e.prototype.removeEventListeners=function(){this._dom.removeEventListener("mouseenter",this.onHover),this._dom.removeEventListener("mouseleave",this.onHover),this._container.removeEventListener("mousewheel",this.onMove),this._container.removeEventListener("DOMMouseScroll",this.onMove),this._controls.removeEventListener("end",this.onEndControl)},e.prototype.onStart=function(t){this._lastEvent=t,t.preventDefault();var e=this.getMouseOffsets(t,this._container);if(this._mouse.set(e.x,e.y),this._raycaster.setFromCamera(this._mouse,this._camera),this._raycaster.ray.position=this._raycaster.ray.origin,this._hovered){if(this._active=!0,this._controls.enabled=!1,this._targetMesh){var n=this._raycaster.intersectObject(this._targetMesh);0<n.length&&this._offset.copy(n[0].point).sub(this._worldPosition)}else{this._plane.position.copy(this._worldPosition),this._plane.direction.copy(this._camera.getWorldDirection());var i=h.a.rayPlane(this._raycaster.ray,this._plane);null!==i&&this._offset.copy(i).sub(this._plane.position)}this.update()}},e.prototype.onEnd=function(t){this._lastEvent=t,t.preventDefault(),!0!==this._tracking&&(!this._dragged&&this._active&&(this._selected=!this._selected),this._active=!1,this._dragged=!1,this._controls.enabled=!0,this.update())},e.prototype.onEndControl=function(){var t=this;this._lastEvent&&window.requestAnimationFrame(function(){t.onMove(t._lastEvent)})},e.prototype.onMove=function(t){this._lastEvent=t,t.preventDefault();var e=this.getMouseOffsets(t,this._container);if(this._mouse.set(e.x,e.y),this._raycaster.setFromCamera(this._mouse,this._camera),this._raycaster.ray.position=this._raycaster.ray.origin,this._active){if(this._dragged=!0,null!==this._targetMesh){var n=this._raycaster.intersectObject(this._targetMesh);0<n.length&&this._worldPosition.copy(n[0].point.sub(this._offset))}else{0===this._plane.direction.length()&&(this._plane.position.copy(this._worldPosition),this._plane.direction.copy(this._camera.getWorldDirection()));var i=h.a.rayPlane(this._raycaster.ray,this._plane);null!==i&&this._worldPosition.copy(i.sub(this._offset))}}else this.onHover(null);this.update()},e.prototype.onHover=function(t){t&&(this._lastEvent=t,t.preventDefault(),this.hoverDom(t)),this.hoverMesh(),this._hovered=this._meshHovered||this._domHovered,this._container.style.cursor=this._hovered?"pointer":"default"},e.prototype.hoverMesh=function(){var t=this._raycaster.intersectObject(this._mesh);this._meshHovered=0<t.length},e.prototype.hoverDom=function(t){this._domHovered="mouseenter"===t.type},e.prototype.worldToScreen=function(t,e,n){var i=t.clone();return i.project(e),i.x=_Mathround((i.x+1)*n.offsetWidth/2),i.y=_Mathround((1-i.y)*n.offsetHeight/2),i.z=0,i},e.prototype.create=function(){this.createVoxel(),this.createMesh(),this.createDOM()},e.prototype.createVoxel=function(){this._voxel=new c.a,this._voxel.id=this.id,this._voxel.worldCoordinates=this._worldCoordinates},e.prototype.createMesh=function(){var t=l.a.worldToData(this._stack,this._worldPosition);this._geometry=new s.a(t),this._material=new THREE.MeshBasicMaterial({wireframe:!0,wireframeLinewidth:1}),this._mesh=new THREE.Mesh(this._geometry,this._material),this._mesh.applyMatrix(this._stack.ijk2LPS),this._mesh.visible=!0,this.updateMeshColor(),this.add(this._mesh)},e.prototype.updateMeshColor=function(){this._material&&this._material.color.set(this._color)},e.prototype.createDOM=function(){this._dom=document.createElement("div"),this._dom.setAttribute("id",this.uuid),this._dom.setAttribute("class","AMI Widget VoxelProbe"),this._dom.style.border="2px solid #000",this._dom.style.backgroundColor="rgb(249, 249, 249)",this._dom.style.color="#212121",this._dom.style.position="absolute",this._dom.style.transformOrigin="0px 100% 0px";var t=document.createElement("div"),e=document.createElement("div");e.setAttribute("id","lpsPosition"),t.appendChild(e);var n=document.createElement("div");n.setAttribute("id","ijkPosition"),t.appendChild(n);var i=document.createElement("div");i.setAttribute("id","value"),t.appendChild(i),this.updateDOMColor(),this._dom.appendChild(t),this._container.appendChild(this._dom)},e.prototype.updateDOMContent=function(){this._dom.querySelector("#lpsPosition").innerHTML="LPS: \n      "+this._voxel.worldCoordinates.x.toFixed(2)+" :\n      "+this._voxel.worldCoordinates.y.toFixed(2)+" :\n      "+this._voxel.worldCoordinates.z.toFixed(2),this._dom.querySelector("#ijkPosition").innerHTML="IJK: \n      "+this._voxel.dataCoordinates.x+" :\n      "+this._voxel.dataCoordinates.y+" :\n      "+this._voxel.dataCoordinates.z,this._dom.querySelector("#value").innerHTML="Value: "+this._voxel.value},e.prototype.update=function(){this.updateColor(),this._screenPosition=this.worldToScreen(this._worldPosition,this._camera,this._container),this.updateVoxel(this._worldPosition),this.updateMeshColor(),this._mesh&&this._mesh.geometry&&(this._mesh.geometry.location=this._voxel.dataCoordinates,this._mesh.updateMatrix()),this.updateDOMContent(),this.updateDOMColor(),this.updateDOMPosition()},e.prototype.updateVoxel=function(t){this._voxel.worldCoordinates=t,this._voxel.dataCoordinates=l.a.worldToData(this._stack,this._voxel.worldCoordinates);var e=l.a.value(this._stack,this._voxel.dataCoordinates);this._voxel.value=l.a.valueRescaleSlopeIntercept(e,this._stack.rescaleSlope,this._stack.rescaleIntercept)},e.prototype.updateDOMPosition=function(){if(this._dom){var t=this._screenPosition.y-this._container.offsetHeight;this._dom.style.transform="translate3D("+this._screenPosition.x+"px, "+t+"px, 0)"}},e.prototype.updateDOMColor=function(){this._dom.style.borderColor=""+this._color},e.prototype.free=function(){this._container.removeEventListener("mouseup",this.onMouseUpHandler,!1),this._container.removeEventListener("mousemove",this.onMouseMoveHandler,!1),this._container.removeEventListener("mousewheel",this.onMouseMoveHandler,!1),this._container.removeEventListener("DOMMouseScroll",this.onMouseMoveHandler,!1),this._voxel.removeTest(),this.remove(this._voxel),this._voxel=null,t.prototype.free.call(this)},e.prototype.hoverVoxel=function(t){var n=t.screenX-this._voxel.voxel.screenCoordinates.x,i=t.screenY-this._voxel.voxel.screenCoordinates.y,r=_Mathsqrt(n*n+i*i);this._voxel.distance=r,this._hover=0<=r&&10>r},e.prototype.hideDOM=function(){this._dom.style.display="none"},e.prototype.showDOM=function(){this._dom.style.display=""},e.prototype.hideMesh=function(){this.visible=!1},e.prototype.showMesh=function(){this.visible=!0},e.prototype.show=function(){this.showDOM(),this.showMesh()},e.prototype.hide=function(){this.hideDOM(),this.hideMesh()},p(e,[{key:"worldPosition",set:function set(t){this._worldPosition.copy(t),this.update()}},{key:"defaultColor",set:function set(t){this._defaultColor=t,this.update()},get:function get(){return this._defaultColor}},{key:"activeColor",set:function set(t){this._activeColor=t,this.update()},get:function get(){return this._activeColor}},{key:"hoverColor",set:function set(t){this._hoverColor=t,this.update()},get:function get(){return this._hoverColor}},{key:"selectedColor",set:function set(t){this._selectedColor=t,this.update()},get:function get(){return this._selectedColor}},{key:"showVoxel",set:function set(t){this._showVoxel=t,this.update()},get:function get(){return this._showVoxel}},{key:"showDomSVG",set:function set(t){this._showDomSVG=t,this.update()},get:function get(){return this._showDomSVG}},{key:"showDomMeasurements",set:function set(t){this._showDomMeasurements=t,this.update()},get:function get(){return this._showDomMeasurements}}]),e}(a.a);e.a=d},function(t,e,n){"use strict";function i(t,e){if(!babelHelpers.instanceof(t,e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=babelHelpers.typeof(e)&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+babelHelpers.typeof(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(5),s=n(9),l=n(0),c=function(){function t(t,e){for(var n=0,i;n<e.length;n++){i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),h=function(t){function e(n,o,a,s){i(this,e);var c=r(this,t.call(this));return c._targetMesh=n,c._controls=o,c._camera=a,c._container=s,c._active=!0,c._moving=!1,c._worldPosition=new l.f,null!==c._targetMesh&&(c._worldPosition=c._targetMesh.position),c._material=null,c._geometry=null,c._mesh=null,c._line=null,c._distance=null,c._line2=null,c._angle=null,c._opangle=null,c._handles=[],c._defaultAngle=!0,c}return o(e,t),e.prototype.setPoints=function(t){for(var e=0,n;e<t.length;e++){n=new s.a(this._targetMesh,this._controls,this._camera,this._container);n.worldPosition=t[e].worldPosition,n.hovered=!0,this.add(n),this._handles.push(n),t[e].hide()}this.create(),this.onMove=this.onMove.bind(this),this.onHover=this.onHover.bind(this),this.addEventListeners(),this._orientation=null,this._slice=null,this.imoveHandle=new s.a(this._targetMesh,this._controls,this._camera,this._container),this.imoveHandle.worldPosition=this._worldPosition,this.imoveHandle.hovered=!0,this.add(this.imoveHandle),this._handles.push(this.imoveHandle),this.fmoveHandle=new s.a(this._targetMesh,this._controls,this._camera,this._container),this.fmoveHandle.worldPosition=this._worldPosition,this.fmoveHandle.hovered=!0,this.add(this.fmoveHandle),this._handles.push(this.fmoveHandle)},e.prototype.addEventListeners=function(){this._container.addEventListener("mousewheel",this.onMove),this._container.addEventListener("DOMMouseScroll",this.onMove),this._line.addEventListener("mouseenter",this.onHover),this._line.addEventListener("mouseleave",this.onHover),this._line2.addEventListener("mouseenter",this.onHover),this._line2.addEventListener("mouseleave",this.onHover),this._distance.addEventListener("mouseenter",this.onHover),this._distance.addEventListener("mouseleave",this.onHover)},e.prototype.removeEventListeners=function(){this._line.removeEventListener("mouseenter",this.onHover),this._line.removeEventListener("mouseleave",this.onHover),this._line2.removeEventListener("mouseenter",this.onHover),this._line2.removeEventListener("mouseleave",this.onHover),this._distance.removeEventListener("mouseenter",this.onHover),this._distance.removeEventListener("mouseleave",this.onHover)},e.prototype.onHover=function(t){t&&(this._lastEvent=t,t.preventDefault(),this.hoverDom(t)),this.hoverMesh(),this._hovered=this._handles[0].hovered||this._handles[1].hovered||this._handles[2].hovered||this._meshHovered||this._domHovered,this._container.style.cursor=this._hovered?"pointer":"default"},e.prototype.hoverMesh=function(){},e.prototype.hoverDom=function(t){this._domHovered="mouseenter"===t.type},e.prototype.onMove=function(t){if(this._dragged=!0,this._active){if(this.fmoveHandle.active=!0,this.fmoveHandle.onMove(t),this.fmoveHandle.active=!1,this.fmoveHandle.hide(),this._moving)for(var e in this._handles.slice(0,-2)){this._handles[e].worldPosition.x=this._handles[e].worldPosition.x+(this.fmoveHandle.worldPosition.x-this.imoveHandle.worldPosition.x),this._handles[e].worldPosition.y=this._handles[e].worldPosition.y+(this.fmoveHandle.worldPosition.y-this.imoveHandle.worldPosition.y),this._handles[e].worldPosition.z=this._handles[e].worldPosition.z+(this.fmoveHandle.worldPosition.z-this.imoveHandle.worldPosition.z)}this.imoveHandle.active=!0,this.imoveHandle.onMove(t),this.imoveHandle.active=!1,this.imoveHandle.hide()}this._handles[0].onMove(t),this._handles[1].onMove(t),this._handles[2].onMove(t),this._hovered=this._handles[0].hovered||this._handles[1].hovered||this._handles[2].hovered||this._meshHovered||this._domHovered,this.update()},e.prototype.onStart=function(t){this._dragged=!1,this.imoveHandle.active=!0,this.imoveHandle.onMove(t),this.imoveHandle.active=!1,this.imoveHandle.hide(),this._handles[0].onStart(t),this._handles[1].onStart(t),this._handles[2].onStart(t),this._active=this._handles[0].active||this._handles[1].active||this._handles[2].active||this._domHovered,this._domHovered&&(this._moving=!0),this.update()},e.prototype.onEnd=function(t){this._handles[0].onEnd(t),this._handles[2].onEnd(t),this._moving=!1,this._dragged||!this._handles[1].tracking?(this._handles[1].tracking=!1,this._handles[1].onEnd(t)):this._handles[1].tracking=!1,this._active=this._handles[0].active||this._handles[1].active||this._handles[2].active,this.update()},e.prototype.create=function(){this.createMesh(),this.createDOM()},e.prototype.hideDOM=function(){this._line.style.display="none",this._distance.style.display="none",this._line2.style.display="none";for(var t in this._handles){this._handles[t].hideDOM()}this._dashline.style.display="none"},e.prototype.showDOM=function(){this._line.style.display="",this._distance.style.display="",this._line2.style.display="";for(var t in this._handles){this._handles[t].showDOM()}this._dashline.style.display=""},e.prototype.hideMesh=function(){this._mesh.visible=!1,this._mesh2.visible=!1,this._handles[0].visible=!1,this._handles[1].visible=!1,this._handles[2].visible=!1},e.prototype.showMesh=function(){this._mesh.visible=!0,this._mesh2.visible=!0,this._handles[0].visible=!0,this._handles[1].visible=!0,this._handles[2].visible=!0},e.prototype.show=function(){this.showDOM(),this.showMesh()},e.prototype.hide=function(){this.hideDOM(),this.hideMesh()},e.prototype.update=function(){this.updateColor(),this.updateMeshColor(),this.updateMeshPosition(),this.updateDOMPosition(),this.updateDOMColor()},e.prototype.createMesh=function(){this._geometry=new THREE.Geometry,this._geometry.vertices.push(this._handles[0].worldPosition),this._geometry.vertices.push(this._handles[1].worldPosition),this._geometry2=new THREE.Geometry,this._geometry2.vertices.push(this._handles[1].worldPosition),this._geometry2.vertices.push(this._handles[2].worldPosition),this._material=new THREE.LineBasicMaterial,this._material2=new THREE.LineBasicMaterial,this.updateMeshColor(),this._mesh=new THREE.Line(this._geometry,this._material),this._mesh.visible=!0,this._mesh2=new THREE.Line(this._geometry2,this._material2),this._mesh2.visible=!0,this.add(this._mesh),this.add(this._mesh2)},e.prototype.updateMeshColor=function(){this._material&&this._material.color.set(this._color),this._material2&&this._material2.color.set(this._color)},e.prototype.updateMeshPosition=function(){this._geometry&&(this._geometry.verticesNeedUpdate=!0),this._geometry2&&(this._geometry2.verticesNeedUpdate=!0)},e.prototype.createDOM=function(){this._line=document.createElement("div"),this._line.setAttribute("class","widgets handle line"),this._line.style.position="absolute",this._line.style.transformOrigin="0 100%",this._line.style.marginTop="-1px",this._line.style.height="2px",this._line.style.width="3px",this._container.appendChild(this._line),this._distance=document.createElement("div"),this._distance.setAttribute("class","widgets handle distance"),this._distance.setAttribute("selectable","true"),this._distance.style.border="2px solid",this._distance.style.backgroundColor="#F9F9F9",this._distance.style.color="#353535",this._distance.style.padding="4px",this._distance.style.position="absolute",this._distance.style.transformOrigin="0 100%",this._distance.innerHTML="Hello, world!",this._container.appendChild(this._distance),this._line2=document.createElement("div"),this._line2.setAttribute("class","widgets handle line"),this._line2.style.position="absolute",this._line2.style.transformOrigin="0 100%",this._line2.style.marginTop="-1px",this._line2.style.height="2px",this._line2.style.width="3px",this._container.appendChild(this._line2),this._dashline=document.createElement("div"),this._dashline.setAttribute("class","widgets handle dashline"),this._dashline.style.position="absolute",this._dashline.style.border="none",this._dashline.style.borderTop="2.5px dashed #F9F9F9",this._dashline.style.transformOrigin="0 100%",this._dashline.style.height="1px",this._dashline.style.width="50%",this._container.appendChild(this._dashline),this.updateDOMColor()},e.prototype.updateDOMPosition=function(){var t=this._handles[0].screenPosition.x,e=this._handles[0].screenPosition.y,n=this._handles[1].screenPosition.x,i=this._handles[1].screenPosition.y,r=n,o=i;o=e>=i?i-30:i+30;var a=_Mathsqrt((t-n)*(t-n)+(e-i)*(e-i)),s=180*_Mathatan(i-e,n-t)/_MathPI,l=e-this._container.offsetHeight,c="translate3D("+t+"px,"+l+"px, 0)";c+=" rotate("+s+"deg)",this._line.style.transform=c,this._line.style.width=a+"px";var h=this._handles[0].worldPosition,u=this._handles[1].worldPosition,p=this._handles[2].worldPosition,d=_Mathsqrt((u.x-h.x)*(u.x-h.x)+(u.y-h.y)*(u.y-h.y)+(u.z-h.z)*(u.z-h.z)),f=_Mathsqrt((u.x-p.x)*(u.x-p.x)+(u.y-p.y)*(u.y-p.y)+(u.z-p.z)*(u.z-p.z)),m=_Mathsqrt((h.x-p.x)*(h.x-p.x)+(h.y-p.y)*(h.y-p.y)+(h.z-p.z)*(h.z-p.z)),_=_Mathacos((d*d+f*f-m*m)/(2*d*f));this._opangle=this._defaultAngle?180*_/_MathPI:360-180*_/_MathPI,this._distance.innerHTML=this._opangle.toFixed(2)+"&deg;",this._distanceValue=_Mathsqrt((h.x-u.x)*(h.x-u.x)+(h.y-u.y)*(h.y-u.y)+(h.z-u.z)*(h.z-u.z)).toFixed(2);var g=o-this._container.offsetHeight-this._distance.offsetHeight/2;r-=this._distance.offsetWidth/2;var y="translate3D("+_Mathround(r)+"px,"+_Mathround(g)+"px, 0)";this._distance.style.transform=y;var v=this._handles[1].screenPosition.x,b=this._handles[1].screenPosition.y,w=this._handles[2].screenPosition.x,x=this._handles[2].screenPosition.y;a=_Mathsqrt((v-w)*(v-w)+(b-x)*(b-x)),s=180*_Mathatan(x-b,w-v)/_MathPI,c="translate3D("+v+"px,"+(l=b-this._container.offsetHeight)+"px, 0)",c+=" rotate("+s+"deg)",this._line2.style.transform=c,this._line2.style.width=a+"px";this._handles[1].worldPosition,this._handles[2].worldPosition;var S=this.getPointInBetweenByPerc(this._handles[0].worldPosition,this._handles[1].worldPosition,.75),E=this.getPointInBetweenByPerc(this._handles[1].worldPosition,this._handles[2].worldPosition,.25),M=this._handles[0].worldToScreen(S,this._camera,this._container),T=this._handles[0].worldToScreen(E,this._camera,this._container);t=M.x,e=M.y,n=T.x,i=T.y,a=_Mathsqrt((t-n)*(t-n)+(e-i)*(e-i)),s=180*_Mathatan(i-e,n-t)/_MathPI,c="translate3D("+t+"px,"+(l=e-this._container.offsetHeight)+"px, 0)",c+=" rotate("+s+"deg)",this._dashline.style.transform=c,this._dashline.style.width=a+"px"},e.prototype.updateDOMColor=function(){this._line.style.backgroundColor=""+this._color,this._distance.style.borderColor=""+this._color,this._line2.style.backgroundColor=""+this._color},e.prototype.getPointInBetweenByPerc=function(t,e,n){var i=e.clone().sub(t),r=i.length();return i=i.normalize().multiplyScalar(r*n),t.clone().add(i)},e.prototype.toggleDefaultAngle=function(){this._defaultAngle=!this._defaultAngle,this._defaultAngle?this._dashline.style.borderTop="2.5px dashed #F9F9F9":this._dashline.style.borderTop="2.5px dashed #ffa7a7"},c(e,[{key:"worldPosition",get:function get(){return this._worldPosition},set:function set(t){this._worldPosition=t,this.update()}},{key:"angle",get:function get(){return this._opangle}}]),e}(a.a);e.a=h},function(t){t.exports={name:"ami.js",version:"0.0.23-dev",main:"build/ami.js",keywords:["ami","ami.js","three.js","webgl","dicom","nifti","awesome","medical","imaging","xtk","nrrd","vtk","stl","trk"],author:{name:"Nicolas Rannou",email:"nicolas@eunate.ch",url:"https://eunate.ch"},license:"Apache-2.0",repository:{type:"git",url:"https://fnndsc.github.io/ami"},config:{threeVersion:"92",amiCDN:"https://cdnjs.cloudflare.com/ajax/libs/ami.js",gaKey:"UA-39303022-3",babel:"--module-bind js=babel-loader --colors --display-error-details"},dependencies:{"dicom-parser":"1.7.3","image-JPEG2000":"OHIF/image-JPEG2000#master","jpeg-lossless-decoder-js":"1.2.3","math-float32-to-binary-string":"^1.0.0","nifti-reader-js":"v0.5.3","nrrd-js":"^0.2.1",pako:"1.0.1",three:"0.92.0"},scripts:{"build:ami":"webpack --config webpack.config.build.js","build:ami:prod":"cross-env NODE_ENV=production yarn build:ami","build:clean":"rimraf -rf build/*","build:clean:hot":"rimraf -rf build/*.hot-update.*","dev:ami":"webpack --config webpack.config.build.js --hot --watch --colors","dist:ami":"yarn build:clean && yarn build:ami && yarn build:ami:prod && yarn doc","dist:examples":"node ./scripts/buildDist.js && node ./scripts/router.js examples deploy","dist:clean":"rimraf -rf dist/*","analyze:ami":"cross-env NODE_WEBPACK_ANALYZE=true yarn build:ami","analyze:ami:prod":"cross-env NODE_WEBPACK_ANALYZE=true yarn build:ami:prod",clean:"yarn build:clean && yarn dist:clean",example:"node ./scripts/router.js examples",lesson:"node ./scripts/router.js lessons","gen:index:examples":"node ./scripts/genIndexFiles.js examples","gen:index:examples:ga":"cross-env NODE_GA=true node ./scripts/genIndexFiles.js examples","gen:index:lessons":"node ./scripts/genIndexFiles.js lessons","gen:index:lessons:cdn":"node ./scripts/genIndexFiles.js lessons cdn",test:"karma start",testExamples:"yarn dist:clean && yarn dist:examples && echo 'hi'",lint:"eslint src/**/*.js",doc:"jsdoc -p -r -R README.md -c jsdoc.json -d dist/doc src",ami:"yarn lint && yarn dist:ami && yarn test",deploy:"yarn dist:clean && yarn build:clean && yarn dist:ami && yarn dist:examples && gh-pages -d dist"},devDependencies:{"babel-cli":"latest","babel-core":"^6.26.0","babel-loader":"^7.1.2","babel-preset-env":"^1.6.0","babel-runtime":"^6.26.0","compression-webpack-plugin":"^1.0.1","cross-env":"^3.2.3",eslint:"latest","eslint-config-google":"latest","gh-pages":"latest",glslify:"5.1.0","jasmine-core":"latest",jsdoc:"jsdoc3/jsdoc#master",karma:"^2.0.2","karma-chrome-launcher":"^2.2.0","karma-jasmine":"latest","karma-sinon":"^1.0.5","karma-spec-reporter":"latest","karma-webpack":"^2.0.4","live-server":"^1.1.0","node-pre-gyp":"^0.10.0",puppeteer:"^0.13.0",rimraf:"^2.6.1","rollup-plugin-node-builtins":"^2.1.2",shelljs:"latest",sinon:"^2.0.0","uglifyjs-webpack-plugin":"^1.0.0-beta.3",webpack:"^3.7.1","webpack-bundle-analyzer":"^2.9.0","webpack-dev-server":"^2.9.1","webpack-watch-livereload-plugin":"^0.0.1"},engines:{node:">=6.9.0"}}}])});</script><dom-module id="iron-image" assetpath="../bower_components/iron-image/"><template><style>:host {
        display: inline-block;
        overflow: hidden;
        position: relative;
      }

      #baseURIAnchor {
        display: none;
      }

      #sizedImgDiv {
        position: absolute;
        top: 0px;
        right: 0px;
        bottom: 0px;
        left: 0px;

        display: none;
      }

      #img {
        display: block;
        width: var(--iron-image-width, auto);
        height: var(--iron-image-height, auto);
      }

      :host([sizing]) #sizedImgDiv {
        display: block;
      }

      :host([sizing]) #img {
        display: none;
      }

      #placeholder {
        position: absolute;
        top: 0px;
        right: 0px;
        bottom: 0px;
        left: 0px;

        background-color: inherit;
        opacity: 1;

        @apply --iron-image-placeholder;
      }

      #placeholder.faded-out {
        transition: opacity 0.5s linear;
        opacity: 0;
      }</style><a id="baseURIAnchor" href="#"></a><div id="sizedImgDiv" role="img" hidden$="[[_computeImgDivHidden(sizing)]]" aria-hidden$="[[_computeImgDivARIAHidden(alt)]]" aria-label$="[[_computeImgDivARIALabel(alt, src)]]"></div><img id="img" alt$="[[alt]]" hidden$="[[_computeImgHidden(sizing)]]" crossorigin$="[[crossorigin]]" on-load="_imgOnLoad" on-error="_imgOnError"><div id="placeholder" hidden$="[[_computePlaceholderHidden(preload, fade, loading, loaded)]]" class$="[[_computePlaceholderClassName(preload, fade, loading, loaded)]]"></div></template><script>Polymer({is:"iron-image",properties:{src:{type:String,value:""},alt:{type:String,value:null},crossorigin:{type:String,value:null},preventLoad:{type:Boolean,value:!1},sizing:{type:String,value:null,reflectToAttribute:!0},position:{type:String,value:"center"},preload:{type:Boolean,value:!1},placeholder:{type:String,value:null,observer:"_placeholderChanged"},fade:{type:Boolean,value:!1},loaded:{notify:!0,readOnly:!0,type:Boolean,value:!1},loading:{notify:!0,readOnly:!0,type:Boolean,value:!1},error:{notify:!0,readOnly:!0,type:Boolean,value:!1},width:{observer:"_widthChanged",type:Number,value:null},height:{observer:"_heightChanged",type:Number,value:null}},observers:["_transformChanged(sizing, position)","_loadStateObserver(src, preventLoad)"],created:function created(){this._resolvedSrc=""},_imgOnLoad:function _imgOnLoad(){if(this.$.img.src!==this._resolveSrc(this.src)){return}this._setLoading(!1);this._setLoaded(!0);this._setError(!1)},_imgOnError:function _imgOnError(){if(this.$.img.src!==this._resolveSrc(this.src)){return}this.$.img.removeAttribute("src");this.$.sizedImgDiv.style.backgroundImage="";this._setLoading(!1);this._setLoaded(!1);this._setError(!0)},_computePlaceholderHidden:function _computePlaceholderHidden(){return!this.preload||!this.fade&&!this.loading&&this.loaded},_computePlaceholderClassName:function _computePlaceholderClassName(){return this.preload&&this.fade&&!this.loading&&this.loaded?"faded-out":""},_computeImgDivHidden:function _computeImgDivHidden(){return!this.sizing},_computeImgDivARIAHidden:function _computeImgDivARIAHidden(){return""===this.alt?"true":void 0},_computeImgDivARIALabel:function _computeImgDivARIALabel(){if(null!==this.alt){return this.alt}if(""===this.src){return""}var resolved=this._resolveSrc(this.src);return resolved.replace(/[?|#].*/g,"").split("/").pop()},_computeImgHidden:function _computeImgHidden(){return!!this.sizing},_widthChanged:function _widthChanged(){this.style.width=isNaN(this.width)?this.width:this.width+"px"},_heightChanged:function _heightChanged(){this.style.height=isNaN(this.height)?this.height:this.height+"px"},_loadStateObserver:function _loadStateObserver(src,preventLoad){var newResolvedSrc=this._resolveSrc(src);if(newResolvedSrc===this._resolvedSrc){return}this._resolvedSrc="";this.$.img.removeAttribute("src");this.$.sizedImgDiv.style.backgroundImage="";if(""===src||preventLoad){this._setLoading(!1);this._setLoaded(!1);this._setError(!1)}else{this._resolvedSrc=newResolvedSrc;this.$.img.src=this._resolvedSrc;this.$.sizedImgDiv.style.backgroundImage="url(\""+this._resolvedSrc+"\")";this._setLoading(!0);this._setLoaded(!1);this._setError(!1)}},_placeholderChanged:function _placeholderChanged(){this.$.placeholder.style.backgroundImage=this.placeholder?"url(\""+this.placeholder+"\")":""},_transformChanged:function _transformChanged(){var sizedImgDivStyle=this.$.sizedImgDiv.style,placeholderStyle=this.$.placeholder.style;sizedImgDivStyle.backgroundSize=placeholderStyle.backgroundSize=this.sizing;sizedImgDivStyle.backgroundPosition=placeholderStyle.backgroundPosition=this.sizing?this.position:"";sizedImgDivStyle.backgroundRepeat=placeholderStyle.backgroundRepeat=this.sizing?"no-repeat":""},_resolveSrc:function _resolveSrc(testSrc){var resolved=Polymer.ResolveUrl.resolveUrl(testSrc,this.$.baseURIAnchor.href);if("/"===resolved[0]){resolved=(location.origin||location.protocol+"//"+location.host)+resolved}return resolved}});</script></dom-module><dom-module id="paper-card" assetpath="../bower_components/paper-card/"><template><style include="paper-material-styles">:host {
        display: inline-block;
        position: relative;
        box-sizing: border-box;
        background-color: var(--paper-card-background-color, var(--primary-background-color));
        border-radius: 2px;

        @apply --paper-font-common-base;
        @apply --paper-card;
      }

      /* IE 10 support for HTML5 hidden attr */
      :host([hidden]), [hidden] {
        display: none !important;
      }

      .header {
        position: relative;
        border-top-left-radius: inherit;
        border-top-right-radius: inherit;
        overflow: hidden;

        @apply --paper-card-header;
      }

      .header iron-image {
        display: block;
        width: 100%;
        --iron-image-width: 100%;
        pointer-events: none;

        @apply --paper-card-header-image;
      }

      .header .title-text {
        padding: 16px;
        font-size: 24px;
        font-weight: 400;
        color: var(--paper-card-header-color, #000);

        @apply --paper-card-header-text;
      }

      .header .title-text.over-image {
        position: absolute;
        bottom: 0px;

        @apply --paper-card-header-image-text;
      }

      :host ::slotted(.card-content) {
        padding: 16px;
        position:relative;

        @apply --paper-card-content;
      }

      :host ::slotted(.card-actions) {
        border-top: 1px solid #e8e8e8;
        padding: 5px 16px;
        position:relative;

        @apply --paper-card-actions;
      }

      :host([elevation="1"]) {
        @apply --paper-material-elevation-1;
      }

      :host([elevation="2"]) {
        @apply --paper-material-elevation-2;
      }

      :host([elevation="3"]) {
        @apply --paper-material-elevation-3;
      }

      :host([elevation="4"]) {
        @apply --paper-material-elevation-4;
      }

      :host([elevation="5"]) {
        @apply --paper-material-elevation-5;
      }</style><div class="header"><iron-image hidden$="[[!image]]" aria-hidden$="[[_isHidden(image)]]" src="[[image]]" alt="[[alt]]" placeholder="[[placeholderImage]]" preload="[[preloadImage]]" fade="[[fadeImage]]"></iron-image><div hidden$="[[!heading]]" class$="title-text [[_computeHeadingClass(image)]]">[[heading]]</div></div><slot></slot></template><script>Polymer({is:"paper-card",properties:{heading:{type:String,value:"",observer:"_headingChanged"},image:{type:String,value:""},alt:{type:String},preloadImage:{type:Boolean,value:!1},fadeImage:{type:Boolean,value:!1},placeholderImage:{type:String,value:null},elevation:{type:Number,value:1,reflectToAttribute:!0},animatedShadow:{type:Boolean,value:!1},animated:{type:Boolean,reflectToAttribute:!0,readOnly:!0,computed:"_computeAnimated(animatedShadow)"}},_isHidden:function _isHidden(image){return image?"false":"true"},_headingChanged:function _headingChanged(heading){var currentHeading=this.getAttribute("heading"),currentLabel=this.getAttribute("aria-label");if("string"!==typeof currentLabel||currentLabel===currentHeading){this.setAttribute("aria-label",heading)}},_computeHeadingClass:function _computeHeadingClass(image){return image?" over-image":""},_computeAnimated:function _computeAnimated(animatedShadow){return animatedShadow}});</script></dom-module><dom-module id="app-drawer" assetpath="../bower_components/app-layout/app-drawer/"><template><style>:host {
        position: fixed;
        top: -120px;
        right: 0;
        bottom: -120px;
        left: 0;

        visibility: hidden;

        transition-property: visibility;
      }

      :host([opened]) {
        visibility: visible;
      }

      :host([persistent]) {
        width: var(--app-drawer-width, 256px);
      }

      :host([persistent][position=left]) {
        right: auto;
      }

      :host([persistent][position=right]) {
        left: auto;
      }

      #contentContainer {
        position: absolute;
        top: 0;
        bottom: 0;
        left: 0;

        width: var(--app-drawer-width, 256px);
        padding: 120px 0;

        transition-property: -webkit-transform;
        transition-property: transform;
        -webkit-transform: translate3d(-100%, 0, 0);
        transform: translate3d(-100%, 0, 0);

        background-color: #FFF;

        @apply --app-drawer-content-container;
      }

      #contentContainer[persistent] {
        width: 100%;
      }

      #contentContainer[position=right] {
        right: 0;
        left: auto;

        -webkit-transform: translate3d(100%, 0, 0);
        transform: translate3d(100%, 0, 0);
      }

      #contentContainer[swipe-open]::after {
        position: fixed;
        top: 0;
        bottom: 0;
        left: 100%;

        visibility: visible;

        width: 20px;

        content: '';
      }

      #contentContainer[swipe-open][position=right]::after {
        right: 100%;
        left: auto;
      }

      #contentContainer[opened] {
        -webkit-transform: translate3d(0, 0, 0);
        transform: translate3d(0, 0, 0);
      }

      #scrim {
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;

        transition-property: opacity;
        -webkit-transform: translateZ(0);
        transform:  translateZ(0);

        opacity: 0;
        background: var(--app-drawer-scrim-background, rgba(0, 0, 0, 0.5));
      }

      #scrim.visible {
        opacity: 1;
      }</style><div id="scrim" on-click="close"></div><div id="contentContainer" opened$="[[opened]]" persistent$="[[persistent]]" position$="[[position]]" swipe-open$="[[swipeOpen]]"><slot></slot></div></template><script>Polymer({is:"app-drawer",properties:{opened:{type:Boolean,value:!1,notify:!0,reflectToAttribute:!0},persistent:{type:Boolean,value:!1,reflectToAttribute:!0},transitionDuration:{type:Number,value:200},align:{type:String,value:"left"},position:{type:String,readOnly:!0,reflectToAttribute:!0},swipeOpen:{type:Boolean,value:!1,reflectToAttribute:!0},noFocusTrap:{type:Boolean,value:!1},disableSwipe:{type:Boolean,value:!1}},observers:["resetLayout(position, isAttached)","_resetPosition(align, isAttached)","_styleTransitionDuration(transitionDuration)","_openedPersistentChanged(opened, persistent)"],_translateOffset:0,_trackDetails:null,_drawerState:0,_boundEscKeydownHandler:null,_firstTabStop:null,_lastTabStop:null,attached:function attached(){Polymer.RenderStatus.afterNextRender(this,function(){this._boundEscKeydownHandler=this._escKeydownHandler.bind(this);this.addEventListener("keydown",this._tabKeydownHandler.bind(this));this.listen(this,"track","_track");this.setScrollDirection("y")});this.fire("app-reset-layout")},detached:function detached(){document.removeEventListener("keydown",this._boundEscKeydownHandler)},open:function open(){this.opened=!0},close:function close(){this.opened=!1},toggle:function toggle(){this.opened=!this.opened},getWidth:function getWidth(){return this.$.contentContainer.offsetWidth},_isRTL:function _isRTL(){return"rtl"===window.getComputedStyle(this).direction},_resetPosition:function _resetPosition(){switch(this.align){case"start":this._setPosition(this._isRTL()?"right":"left");return;case"end":this._setPosition(this._isRTL()?"left":"right");return;}this._setPosition(this.align)},_escKeydownHandler:function _escKeydownHandler(event){if(event.keyCode===27){event.preventDefault();this.close()}},_track:function _track(event){if(this.persistent||this.disableSwipe){return}event.preventDefault();switch(event.detail.state){case"start":this._trackStart(event);break;case"track":this._trackMove(event);break;case"end":this._trackEnd(event);break;}},_trackStart:function _trackStart(){this._drawerState=this._DRAWER_STATE.TRACKING;this._styleTransitionDuration(0);this.style.visibility="visible";var rect=this.$.contentContainer.getBoundingClientRect();if("left"===this.position){this._translateOffset=rect.left}else{this._translateOffset=rect.right-window.innerWidth}this._trackDetails=[]},_trackMove:function _trackMove(event){this._translateDrawer(event.detail.dx+this._translateOffset);this._trackDetails.push({dx:event.detail.dx,timeStamp:Date.now()})},_trackEnd:function _trackEnd(event){var x=event.detail.dx+this._translateOffset,drawerWidth=this.getWidth(),isPositionLeft="left"===this.position,isInEndState=isPositionLeft?0<=x||x<=-drawerWidth:0>=x||x>=drawerWidth;if(!isInEndState){var trackDetails=this._trackDetails;this._trackDetails=null;this._flingDrawer(event,trackDetails);if(this._drawerState===this._DRAWER_STATE.FLINGING){return}}var halfWidth=drawerWidth/2;if(event.detail.dx<-halfWidth){this.opened="right"===this.position}else if(event.detail.dx>halfWidth){this.opened="left"===this.position}if(isInEndState){this.debounce("_resetDrawerState",this._resetDrawerState)}else{this.debounce("_resetDrawerState",this._resetDrawerState,this.transitionDuration)}this._styleTransitionDuration(this.transitionDuration);this._resetDrawerTranslate();this.style.visibility=""},_calculateVelocity:function _calculateVelocity(event,trackDetails){var now=Date.now(),trackDetail,min=0,max=trackDetails.length-1;while(min<=max){var mid=min+max>>1,d=trackDetails[mid];if(d.timeStamp>=now-100){trackDetail=d;max=mid-1}else{min=mid+1}}if(trackDetail){var dx=event.detail.dx-trackDetail.dx,dt=now-trackDetail.timeStamp||1;return dx/dt}return 0},_flingDrawer:function _flingDrawer(event,trackDetails){var velocity=this._calculateVelocity(event,trackDetails);if(Math.abs(velocity)<this._MIN_FLING_THRESHOLD){return}this._drawerState=this._DRAWER_STATE.FLINGING;var x=event.detail.dx+this._translateOffset,drawerWidth=this.getWidth(),isPositionLeft="left"===this.position,isVelocityPositive=0<velocity,dx;if(!isVelocityPositive&&isPositionLeft){dx=-(x+drawerWidth)}else if(isVelocityPositive&&!isPositionLeft){dx=drawerWidth-x}else{dx=-x}if(isVelocityPositive){velocity=Math.max(velocity,this._MIN_TRANSITION_VELOCITY);this.opened="left"===this.position}else{velocity=Math.min(velocity,-this._MIN_TRANSITION_VELOCITY);this.opened="right"===this.position}var t=this._FLING_INITIAL_SLOPE*dx/velocity;this._styleTransitionDuration(t);this._styleTransitionTimingFunction(this._FLING_TIMING_FUNCTION);this._resetDrawerTranslate();this.debounce("_resetDrawerState",this._resetDrawerState,t)},_styleTransitionDuration:function _styleTransitionDuration(duration){this.style.transitionDuration=duration+"ms";this.$.contentContainer.style.transitionDuration=duration+"ms";this.$.scrim.style.transitionDuration=duration+"ms"},_styleTransitionTimingFunction:function _styleTransitionTimingFunction(timingFunction){this.$.contentContainer.style.transitionTimingFunction=timingFunction;this.$.scrim.style.transitionTimingFunction=timingFunction},_translateDrawer:function _translateDrawer(x){var _Mathmin=Math.min,_Mathmax=Math.max,drawerWidth=this.getWidth();if("left"===this.position){x=_Mathmax(-drawerWidth,_Mathmin(x,0));this.$.scrim.style.opacity=1+x/drawerWidth}else{x=_Mathmax(0,_Mathmin(x,drawerWidth));this.$.scrim.style.opacity=1-x/drawerWidth}this.translate3d(x+"px","0","0",this.$.contentContainer)},_resetDrawerTranslate:function _resetDrawerTranslate(){this.$.scrim.style.opacity="";this.transform("",this.$.contentContainer)},_resetDrawerState:function _resetDrawerState(){var oldState=this._drawerState;if(oldState===this._DRAWER_STATE.FLINGING){this._styleTransitionDuration(this.transitionDuration);this._styleTransitionTimingFunction("");this.style.visibility=""}if(this.opened){this._drawerState=this.persistent?this._DRAWER_STATE.OPENED_PERSISTENT:this._DRAWER_STATE.OPENED}else{this._drawerState=this._DRAWER_STATE.CLOSED}if(oldState!==this._drawerState){if(this._drawerState===this._DRAWER_STATE.OPENED){this._setKeyboardFocusTrap();document.addEventListener("keydown",this._boundEscKeydownHandler);document.body.style.overflow="hidden"}else{document.removeEventListener("keydown",this._boundEscKeydownHandler);document.body.style.overflow=""}if(oldState!==this._DRAWER_STATE.INIT){this.fire("app-drawer-transitioned")}}},resetLayout:function resetLayout(){this.fire("app-reset-layout")},_setKeyboardFocusTrap:function _setKeyboardFocusTrap(){if(this.noFocusTrap){return}var focusableElementsSelector=["a[href]:not([tabindex=\"-1\"])","area[href]:not([tabindex=\"-1\"])","input:not([disabled]):not([tabindex=\"-1\"])","select:not([disabled]):not([tabindex=\"-1\"])","textarea:not([disabled]):not([tabindex=\"-1\"])","button:not([disabled]):not([tabindex=\"-1\"])","iframe:not([tabindex=\"-1\"])","[tabindex]:not([tabindex=\"-1\"])","[contentEditable=true]:not([tabindex=\"-1\"])"].join(","),focusableElements=Polymer.dom(this).querySelectorAll(focusableElementsSelector);if(0<focusableElements.length){this._firstTabStop=focusableElements[0];this._lastTabStop=focusableElements[focusableElements.length-1]}else{this._firstTabStop=null;this._lastTabStop=null}var tabindex=this.getAttribute("tabindex");if(tabindex&&-1<parseInt(tabindex,10)){this.focus()}else if(this._firstTabStop){this._firstTabStop.focus()}},_tabKeydownHandler:function _tabKeydownHandler(event){if(this.noFocusTrap){return}if(this._drawerState===this._DRAWER_STATE.OPENED&&event.keyCode===9){if(event.shiftKey){if(this._firstTabStop&&Polymer.dom(event).localTarget===this._firstTabStop){event.preventDefault();this._lastTabStop.focus()}}else{if(this._lastTabStop&&Polymer.dom(event).localTarget===this._lastTabStop){event.preventDefault();this._firstTabStop.focus()}}}},_openedPersistentChanged:function _openedPersistentChanged(opened,persistent){this.toggleClass("visible",opened&&!persistent,this.$.scrim);this.debounce("_resetDrawerState",this._resetDrawerState,this.transitionDuration)},_MIN_FLING_THRESHOLD:.2,_MIN_TRANSITION_VELOCITY:1.2,_FLING_TIMING_FUNCTION:"cubic-bezier(0.667, 1, 0.667, 1)",_FLING_INITIAL_SLOPE:1.5,_DRAWER_STATE:{INIT:0,OPENED:1,OPENED_PERSISTENT:2,CLOSED:3,TRACKING:4,FLINGING:5}});</script></dom-module><script>Polymer({is:"iron-media-query",properties:{queryMatches:{type:Boolean,value:!1,readOnly:!0,notify:!0},query:{type:String,observer:"queryChanged"},full:{type:Boolean,value:!1},_boundMQHandler:{value:function value(){return this.queryHandler.bind(this)}},_mq:{value:null}},attached:function attached(){this.style.display="none";this.queryChanged()},detached:function detached(){this._remove()},_add:function _add(){if(this._mq){this._mq.addListener(this._boundMQHandler)}},_remove:function _remove(){if(this._mq){this._mq.removeListener(this._boundMQHandler)}this._mq=null},queryChanged:function queryChanged(){this._remove();var query=this.query;if(!query){return}if(!this.full&&"("!==query[0]){query="("+query+")"}this._mq=window.matchMedia(query);this._add();this.queryHandler(this._mq)},queryHandler:function queryHandler(mq){this._setQueryMatches(mq.matches)}});</script><dom-module id="app-drawer-layout" assetpath="../bower_components/app-layout/app-drawer-layout/"><template><style>:host {
        display: block;
        /**
         * Force app-drawer-layout to have its own stacking context so that its parent can
         * control the stacking of it relative to other elements.
         */
        position: relative;
        z-index: 0;
      }

      :host ::slotted([slot=drawer]) {
        z-index: 1;
      }

      :host([fullbleed]) {
        @apply --layout-fit;
      }

      #contentContainer {
        /* Create a stacking context here so that all children appear below the header. */
        position: relative;
        z-index: 0;
        height: 100%;
        transition: var(--app-drawer-layout-content-transition, none);
      }

      #contentContainer[drawer-position=left] {
        margin-left: var(--app-drawer-width, 256px);
      }

      #contentContainer[drawer-position=right] {
        margin-right: var(--app-drawer-width, 256px);
      }</style><slot id="drawerSlot" name="drawer"></slot><div id="contentContainer" drawer-position$="[[_drawerPosition]]"><slot></slot></div><iron-media-query query="[[_computeMediaQuery(forceNarrow, responsiveWidth)]]" on-query-matches-changed="_onQueryMatchesChanged"></iron-media-query></template><script>Polymer({is:"app-drawer-layout",behaviors:[Polymer.AppLayoutBehavior],properties:{forceNarrow:{type:Boolean,value:!1},responsiveWidth:{type:String,value:"640px"},narrow:{type:Boolean,reflectToAttribute:!0,readOnly:!0,notify:!0},openedWhenNarrow:{type:Boolean,value:!1},_drawerPosition:{type:String}},listeners:{click:"_clickHandler"},observers:["_narrowChanged(narrow)"],get drawer(){return Polymer.dom(this.$.drawerSlot).getDistributedNodes()[0]},attached:function attached(){var drawer=this.drawer;if(drawer){this._savedDrawerTransitionDuration=drawer.transitionDuration;drawer.transitionDuration=0}},_clickHandler:function _clickHandler(e){var target=Polymer.dom(e).localTarget;if(target&&target.hasAttribute("drawer-toggle")){var drawer=this.drawer;if(drawer&&!drawer.persistent){drawer.toggle()}}},_updateLayoutStates:function _updateLayoutStates(){var drawer=this.drawer;if(!drawer){return}this._drawerPosition=this.narrow?null:drawer.position;if(this._drawerNeedsReset){if(this.narrow){drawer.opened=this.openedWhenNarrow;drawer.persistent=!1}else{drawer.opened=drawer.persistent=!0}if(this._savedDrawerTransitionDuration){Polymer.RenderStatus.afterNextRender(this,function(){drawer.transitionDuration=this._savedDrawerTransitionDuration;this._savedDrawerTransitionDuration=0})}this._drawerNeedsReset=!1}},_narrowChanged:function _narrowChanged(){this._drawerNeedsReset=!0;this.resetLayout()},_onQueryMatchesChanged:function _onQueryMatchesChanged(event){this._setNarrow(event.detail.value)},_computeMediaQuery:function _computeMediaQuery(forceNarrow,responsiveWidth){return forceNarrow?"(min-width: 0px)":"(max-width: "+responsiveWidth+")"}});</script></dom-module><script>Polymer.AppLayout.registerEffect("blend-background",{setUp:function(){var fx={backgroundFrontLayer:this._getDOMRef("backgroundFrontLayer"),backgroundRearLayer:this._getDOMRef("backgroundRearLayer")};fx.backgroundFrontLayer.style.willChange="opacity";fx.backgroundFrontLayer.style.transform="translateZ(0)";fx.backgroundRearLayer.style.willChange="opacity";fx.backgroundRearLayer.style.transform="translateZ(0)";fx.backgroundRearLayer.style.opacity=0;this._fxBlendBackground=fx},run:function(p){var fx=this._fxBlendBackground;fx.backgroundFrontLayer.style.opacity=1-p;fx.backgroundRearLayer.style.opacity=p},tearDown:function(){delete this._fxBlendBackground}});</script><script>Polymer.AppLayout.registerEffect("fade-background",{setUp:function(config){var fx={},duration=config.duration||"0.5s";fx.backgroundFrontLayer=this._getDOMRef("backgroundFrontLayer");fx.backgroundRearLayer=this._getDOMRef("backgroundRearLayer");fx.backgroundFrontLayer.style.willChange="opacity";fx.backgroundFrontLayer.style.webkitTransform="translateZ(0)";fx.backgroundFrontLayer.style.transitionProperty="opacity";fx.backgroundFrontLayer.style.transitionDuration=duration;fx.backgroundRearLayer.style.willChange="opacity";fx.backgroundRearLayer.style.webkitTransform="translateZ(0)";fx.backgroundRearLayer.style.transitionProperty="opacity";fx.backgroundRearLayer.style.transitionDuration=duration;this._fxFadeBackground=fx},run:function(p){var fx=this._fxFadeBackground;if(1<=p){fx.backgroundFrontLayer.style.opacity=0;fx.backgroundRearLayer.style.opacity=1}else{fx.backgroundFrontLayer.style.opacity=1;fx.backgroundRearLayer.style.opacity=0}},tearDown:function(){delete this._fxFadeBackground}});</script><script>Polymer.AppLayout.registerEffect("waterfall",{run:function(){this.shadow=this.isOnScreen()&&this.isContentBelow()}});</script><script>(function(){function interpolate(progress,points,fn,ctx){fn.apply(ctx,points.map(function(point){return point[0]+(point[1]-point[0])*progress}))}Polymer.AppLayout.registerEffect("resize-title",{setUp:function(){var title=this._getDOMRef("mainTitle"),condensedTitle=this._getDOMRef("condensedTitle");if(!condensedTitle){console.warn("Scroll effect `resize-title`: undefined `condensed-title`");return!1}if(!title){console.warn("Scroll effect `resize-title`: undefined `main-title`");return!1}condensedTitle.style.willChange="opacity";condensedTitle.style.webkitTransform="translateZ(0)";condensedTitle.style.transform="translateZ(0)";condensedTitle.style.webkitTransformOrigin="left top";condensedTitle.style.transformOrigin="left top";title.style.willChange="opacity";title.style.webkitTransformOrigin="left top";title.style.transformOrigin="left top";title.style.webkitTransform="translateZ(0)";title.style.transform="translateZ(0)";var titleClientRect=title.getBoundingClientRect(),condensedTitleClientRect=condensedTitle.getBoundingClientRect(),fx={};fx.scale=parseInt(window.getComputedStyle(condensedTitle)["font-size"],10)/parseInt(window.getComputedStyle(title)["font-size"],10);fx.titleDX=titleClientRect.left-condensedTitleClientRect.left;fx.titleDY=titleClientRect.top-condensedTitleClientRect.top;fx.condensedTitle=condensedTitle;fx.title=title;this._fxResizeTitle=fx},run:function(p,y){var fx=this._fxResizeTitle;if(!this.condenses){y=0}if(1<=p){fx.title.style.opacity=0;fx.condensedTitle.style.opacity=1}else{fx.title.style.opacity=1;fx.condensedTitle.style.opacity=0}interpolate(Math.min(1,p),[[1,fx.scale],[0,-fx.titleDX],[y,y-fx.titleDY]],function(scale,translateX,translateY){this.transform("translate("+translateX+"px, "+translateY+"px) "+"scale3d("+scale+", "+scale+", 1)",fx.title)},this)},tearDown:function(){delete this._fxResizeTitle}})})();</script><script>Polymer.AppLayout.registerEffect("parallax-background",{setUp:function(config){var fx={},scalar=parseFloat(config.scalar);fx.background=this._getDOMRef("background");fx.backgroundFrontLayer=this._getDOMRef("backgroundFrontLayer");fx.backgroundRearLayer=this._getDOMRef("backgroundRearLayer");fx.deltaBg=fx.backgroundFrontLayer.offsetHeight-fx.background.offsetHeight;if(0===fx.deltaBg){if(isNaN(scalar)){scalar=.8}fx.deltaBg=this._dHeight*scalar}else{if(isNaN(scalar)){scalar=1}fx.deltaBg=fx.deltaBg*scalar}this._fxParallaxBackground=fx},run:function(p){var _Mathmin=Math.min,fx=this._fxParallaxBackground;this.transform("translate3d(0px, "+fx.deltaBg*_Mathmin(1,p)+"px, 0px)",fx.backgroundFrontLayer);if(fx.backgroundRearLayer){this.transform("translate3d(0px, "+fx.deltaBg*_Mathmin(1,p)+"px, 0px)",fx.backgroundRearLayer)}},tearDown:function(){delete this._fxParallaxBackground}});</script><script>Polymer.AppLayout.registerEffect("material",{setUp:function(){this.effects="waterfall resize-title blend-background parallax-background";return!1}});</script><script>Polymer.AppLayout.registerEffect("resize-snapped-title",{setUp:function(config){var title=this._getDOMRef("mainTitle"),condensedTitle=this._getDOMRef("condensedTitle"),duration=config.duration||"0.2s",fx={};if(!condensedTitle){console.warn("Scroll effect `resize-snapped-title`: undefined `condensed-title`");return!1}if(!title){console.warn("Scroll effect `resize-snapped-title`: undefined `main-title`");return!1}title.style.transitionProperty="opacity";title.style.transitionDuration=duration;condensedTitle.style.transitionProperty="opacity";condensedTitle.style.transitionDuration=duration;fx.condensedTitle=condensedTitle;fx.title=title;this._fxResizeSnappedTitle=fx},run:function(p){var fx=this._fxResizeSnappedTitle;if(0<p){fx.title.style.opacity=0;fx.condensedTitle.style.opacity=1}else{fx.title.style.opacity=1;fx.condensedTitle.style.opacity=0}},tearDown:function(){var fx=this._fxResizeSnappedTitle;fx.title.style.transition="";fx.condensedTitle.style.transition="";delete this._fxResizeSnappedTitle}});</script>