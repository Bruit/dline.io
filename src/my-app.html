<html><head><link rel="lazy-import" href="my-login.html"><link rel="lazy-import" href="my-home.html"><link rel="lazy-import" href="my-case.html"><link rel="lazy-import" href="my-compare.html"><link rel="lazy-import" href="my-view404.html"><link rel="lazy-import" href="my-presentation.html"><link rel="lazy-import" href="my-data.html"></head><body><div hidden="" by-polymer-bundler=""><script>(function(){'use strict';var a=window.Polymer;window.Polymer=function(a){return window.Polymer._polymerFn(a)},a&&Object.assign(Polymer,a),window.Polymer._polymerFn=function(){throw new Error('Load polymer.html to use the Polymer() function.')},window.Polymer.version='2.5.0',window.JSCompiler_renameProperty=function(a){return a}})();</script><script>(function(){'use strict';function a(a,d){if(a&&e.test(a))return a;if(void 0===b){b=!1;try{var f=new URL('b','http://a');f.pathname='c%20d',b='http://a/c%20d'===f.href}catch(a){}}return(d||(d=document.baseURI||window.location.href),b)?new URL(a,d).href:(c||(c=document.implementation.createHTMLDocument('temp'),c.base=c.createElement('base'),c.head.appendChild(c.base),c.anchor=c.createElement('a'),c.body.appendChild(c.anchor)),c.base.href=d,c.anchor.href=a,c.anchor.href||a)}var b,c,d=/(url\()([^)]*)(\))/g,e=/(^\/)|(^#)|(^[\w-\d]*:)/;Polymer.ResolveUrl={resolveCss:function(b,c){return b.replace(d,function(b,d,e,f){return d+'\''+a(e.replace(/["']/g,''),c)+'\''+f})},resolveUrl:a,pathFromUrl:function(a){return a.substring(0,a.lastIndexOf('/')+1)}}})();</script><script>(function(){'use strict';Polymer.Settings=Polymer.Settings||{},Polymer.Settings.useShadow=!window.ShadyDOM,Polymer.Settings.useNativeCSSProperties=!(window.ShadyCSS&&!window.ShadyCSS.nativeCss),Polymer.Settings.useNativeCustomElements=!window.customElements.polyfillWrapFlushCallback;var a=Polymer.rootPath||Polymer.ResolveUrl.pathFromUrl(document.baseURI||window.location.href);Polymer.rootPath=a,Polymer.setRootPath=function(a){Polymer.rootPath=a};var b=Polymer.sanitizeDOMValue;Polymer.sanitizeDOMValue=b,Polymer.setSanitizeDOMValue=function(a){Polymer.sanitizeDOMValue=a};Polymer.passiveTouchGestures=!1,Polymer.setPassiveTouchGestures=function(a){Polymer.passiveTouchGestures=a}})();</script><script>(function(){'use strict';function a(){}var b=0;a.prototype.__mixinApplications,a.prototype.__mixinSet,Polymer.dedupingMixin=function(a){var c=a.__mixinApplications;c||(c=new WeakMap,a.__mixinApplications=c);var d=b++;return function(b){var e=b.__mixinSet;if(e&&e[d])return b;var f=c,g=f.get(b);g||(g=a(b),f.set(b,g));var h=Object.create(g.__mixinSet||e||null);return h[d]=!0,g.__mixinSet=h,g}}})();</script><script>(function(){'use strict';function a(a){var b=customElements.get('dom-module');return b?b.import(a):null}function b(a){var b=a.body?a.body:a,c=Polymer.ResolveUrl.resolveCss(b.textContent,a.baseURI),d=document.createElement('style');return d.textContent=c,d}var c='shady-unscoped';Polymer.StyleGather={stylesFromModules:function(a){for(var b=a.trim().split(/\s+/),c=[],d=0;d<b.length;d++)c.push.apply(c,babelHelpers.toConsumableArray(this.stylesFromModule(b[d])));return c},stylesFromModule:function(b){var c=a(b);if(c&&void 0===c._styles){var d=[];d.push.apply(d,babelHelpers.toConsumableArray(this._stylesFromModuleImports(c)));var e=c.querySelector('template');e&&d.push.apply(d,babelHelpers.toConsumableArray(this.stylesFromTemplate(e,c.assetpath))),c._styles=d}return c||console.warn('Could not find style data in module named',b),c?c._styles:[]},stylesFromTemplate:function(a,b){if(!a._styles){for(var c=[],d=a.content.querySelectorAll('style'),f=0;f<d.length;f++){var g=d[f],e=g.getAttribute('include');e&&c.push.apply(c,babelHelpers.toConsumableArray(this.stylesFromModules(e))),b&&(g.textContent=Polymer.ResolveUrl.resolveCss(g.textContent,b)),c.push(g)}a._styles=c}return a._styles},stylesFromModuleImports:function(b){var c=a(b);return c?this._stylesFromModuleImports(c):[]},_stylesFromModuleImports:function(a){for(var d,e=[],f=a.querySelectorAll('link[rel=import][type~=css]'),g=0;g<f.length;g++)if(d=f[g],d.import){var h=d.import,i=d.hasAttribute(c);if(i&&!h._unscopedStyle){var j=b(h);j.setAttribute(c,''),h._unscopedStyle=j}else h._style||(h._style=b(h));e.push(i?h._unscopedStyle:h._style)}return e},cssFromModules:function(a){for(var b=a.trim().split(/\s+/),c='',d=0;d<b.length;d++)c+=this.cssFromModule(b[d]);return c},cssFromModule:function(b){var c=a(b);if(c&&void 0===c._cssText){var d=this._cssFromModuleImports(c),e=c.querySelector('template');e&&(d+=this.cssFromTemplate(e,c.assetpath)),c._cssText=d||null}return c||console.warn('Could not find style data in module named',b),c&&c._cssText||''},cssFromTemplate:function(a,b){for(var c,d='',e=this.stylesFromTemplate(a,b),f=0;f<e.length;f++)c=e[f],c.parentNode&&c.parentNode.removeChild(c),d+=c.textContent;return d},cssFromModuleImports:function(b){var c=a(b);return c?this._cssFromModuleImports(c):''},_cssFromModuleImports:function(a){for(var b='',c=this._stylesFromModuleImports(a),d=0;d<c.length;d++)b+=c[d].textContent;return b}}})();</script><script>(function(){'use strict';function a(a){return c[a]||d[a.toLowerCase()]}function b(a){a.querySelector('style')&&console.warn('dom-module %s has style outside template',a.id)}var c={},d={},e=function(e){function f(){return babelHelpers.classCallCheck(this,f),babelHelpers.possibleConstructorReturn(this,(f.__proto__||Object.getPrototypeOf(f)).apply(this,arguments))}return babelHelpers.inherits(f,e),babelHelpers.createClass(f,[{key:'attributeChangedCallback',value:function(a,b,c){b!==c&&this.register()}},{key:'register',value:function(a){a=a||this.id,a&&(this.id=a,c[a]=this,d[a.toLowerCase()]=this,b(this))}},{key:'assetpath',get:function(){if(!this.__assetpath){var a=window.HTMLImports&&HTMLImports.importForElement?HTMLImports.importForElement(this)||document:this.ownerDocument,b=Polymer.ResolveUrl.resolveUrl(this.getAttribute('assetpath')||'',a.baseURI);this.__assetpath=Polymer.ResolveUrl.pathFromUrl(b)}return this.__assetpath}}],[{key:'import',value:function(b,c){if(b){var d=a(b);return d&&c?d.querySelector(c):d}return null}},{key:'observedAttributes',get:function(){return['id']}}]),f}(HTMLElement);e.prototype.modules=c,customElements.define('dom-module',e),Polymer.DomModule=e})();</script><script>(function(){'use strict';var a={isPath:function(a){return 0<=a.indexOf('.')},root:function(a){var b=a.indexOf('.');return-1===b?a:a.slice(0,b)},isAncestor:function(a,b){return 0===a.indexOf(b+'.')},isDescendant:function(a,b){return 0===b.indexOf(a+'.')},translate:function(a,b,c){return b+c.slice(a.length)},matches:function(a,b){return a===b||this.isAncestor(a,b)||this.isDescendant(a,b)},normalize:function(a){if(Array.isArray(a)){for(var b,c=[],d=0;d<a.length;d++){b=a[d].toString().split('.');for(var e=0;e<b.length;e++)c.push(b[e])}return c.join('.')}return a},split:function(a){return Array.isArray(a)?this.normalize(a).split('.'):a.toString().split('.')},get:function(a,b,c){for(var d=a,e=this.split(b),f=0;f<e.length;f++){if(!d)return;var g=e[f];d=d[g]}return c&&(c.path=e.join('.')),d},set:function(a,b,c){var d=a,e=this.split(b),f=e[e.length-1];if(1<e.length){for(var g,h=0;h<e.length-1;h++)if(g=e[h],d=d[g],!d)return;d[f]=c}else d[b]=c;return e.join('.')}};a.isDeep=a.isPath,Polymer.Path=a})();</script><script>(function(){'use strict';var a={},b=/-[a-z]/g,c=/([A-Z])/g;Polymer.CaseMap={dashToCamelCase:function(c){return a[c]||(a[c]=0>c.indexOf('-')?c:c.replace(b,function(a){return a[1].toUpperCase()}))},camelToDashCase:function(b){return a[b]||(a[b]=b.replace(c,'-$1').toLowerCase())}}})();</script><script>(function(){'use strict';var a=0,b=0,c=[],d=0,e=document.createTextNode('');new window.MutationObserver(function(){for(var a,d=c.length,e=0;e<d;e++)if(a=c[e],a)try{a()}catch(a){setTimeout(function(){throw a})}c.splice(0,d),b+=d}).observe(e,{characterData:!0}),Polymer.Async={timeOut:{after:function(a){return{run:function(b){return window.setTimeout(b,a)},cancel:function(a){window.clearTimeout(a)}}},run:function(a,b){return window.setTimeout(a,b)},cancel:function(a){window.clearTimeout(a)}},animationFrame:{run:function(a){return window.requestAnimationFrame(a)},cancel:function(a){window.cancelAnimationFrame(a)}},idlePeriod:{run:function(a){return window.requestIdleCallback?window.requestIdleCallback(a):window.setTimeout(a,16)},cancel:function(a){window.cancelIdleCallback?window.cancelIdleCallback(a):window.clearTimeout(a)}},microTask:{run:function(b){return e.textContent=d++,c.push(b),a++},cancel:function(a){var d=a-b;if(0<=d){if(!c[d])throw new Error('invalid async handle: '+a);c[d]=null}}}}})();</script><script>(function(){'use strict';var a=Polymer.Async.microTask;Polymer.PropertiesChanged=Polymer.dedupingMixin(function(b){var c=function(b){function c(){babelHelpers.classCallCheck(this,c);var a=babelHelpers.possibleConstructorReturn(this,(c.__proto__||Object.getPrototypeOf(c)).call(this));return a.__dataEnabled=!1,a.__dataReady=!1,a.__dataInvalid=!1,a.__data={},a.__dataPending=null,a.__dataOld=null,a.__dataInstanceProps=null,a.__serializing=!1,a._initializeProperties(),a}return babelHelpers.inherits(c,b),babelHelpers.createClass(c,[{key:'_createPropertyAccessor',value:function(a,b){this._addPropertyToAttributeMap(a),this.hasOwnProperty('__dataHasAccessor')||(this.__dataHasAccessor=Object.assign({},this.__dataHasAccessor)),this.__dataHasAccessor[a]||(this.__dataHasAccessor[a]=!0,this._definePropertyAccessor(a,b))}},{key:'_addPropertyToAttributeMap',value:function(a){if(this.hasOwnProperty('__dataAttributes')||(this.__dataAttributes=Object.assign({},this.__dataAttributes)),!this.__dataAttributes[a]){var b=this.constructor.attributeNameForProperty(a);this.__dataAttributes[b]=a}}},{key:'_definePropertyAccessor',value:function(a,b){Object.defineProperty(this,a,{get:function(){return this.__data[a]},set:b?function(){}:function(b){this._setProperty(a,b)}})}}],[{key:'createProperties',value:function(a){var b=this.prototype;for(var c in a)c in b||b._createPropertyAccessor(c)}},{key:'attributeNameForProperty',value:function(a){return a.toLowerCase()}},{key:'typeForProperty',value:function(){}}]),babelHelpers.createClass(c,[{key:'ready',value:function(){this.__dataReady=!0,this._flushProperties()}},{key:'_initializeProperties',value:function(){for(var a in this.__dataHasAccessor)this.hasOwnProperty(a)&&(this.__dataInstanceProps=this.__dataInstanceProps||{},this.__dataInstanceProps[a]=this[a],delete this[a])}},{key:'_initializeInstanceProperties',value:function(a){Object.assign(this,a)}},{key:'_setProperty',value:function(a,b){this._setPendingProperty(a,b)&&this._invalidateProperties()}},{key:'_getProperty',value:function(a){return this.__data[a]}},{key:'_setPendingProperty',value:function(a,b){var c=this.__data[a],d=this._shouldPropertyChange(a,b,c);return d&&(!this.__dataPending&&(this.__dataPending={},this.__dataOld={}),this.__dataOld&&!(a in this.__dataOld)&&(this.__dataOld[a]=c),this.__data[a]=b,this.__dataPending[a]=b),d}},{key:'_invalidateProperties',value:function(){var b=this;!this.__dataInvalid&&this.__dataReady&&(this.__dataInvalid=!0,a.run(function(){b.__dataInvalid&&(b.__dataInvalid=!1,b._flushProperties())}))}},{key:'_enableProperties',value:function(){this.__dataEnabled||(this.__dataEnabled=!0,this.__dataInstanceProps&&(this._initializeInstanceProperties(this.__dataInstanceProps),this.__dataInstanceProps=null),this.ready())}},{key:'_flushProperties',value:function(){if(this.__dataPending&&this.__dataOld){var a=this.__dataPending;this.__dataPending=null,this._propertiesChanged(this.__data,a,this.__dataOld)}}},{key:'_propertiesChanged',value:function(){}},{key:'_shouldPropertyChange',value:function(a,b,c){return c!==b&&(c===c||b===b)}},{key:'attributeChangedCallback',value:function(a,b,d){b!==d&&this._attributeToProperty(a,d),babelHelpers.get(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),'attributeChangedCallback',this)&&babelHelpers.get(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),'attributeChangedCallback',this).call(this,a,b,d)}},{key:'_attributeToProperty',value:function(a,b,c){if(!this.__serializing){var d=this.__dataAttributes,e=d&&d[a]||a;this[e]=this._deserializeValue(b,c||this.constructor.typeForProperty(e))}}},{key:'_propertyToAttribute',value:function(a,b,c){this.__serializing=!0,c=3>arguments.length?this[a]:c,this._valueToNodeAttribute(this,c,b||this.constructor.attributeNameForProperty(a)),this.__serializing=!1}},{key:'_valueToNodeAttribute',value:function(a,b,c){var d=this._serializeValue(b);void 0===d?a.removeAttribute(c):a.setAttribute(c,d)}},{key:'_serializeValue',value:function(a){switch('undefined'===typeof a?'undefined':babelHelpers.typeof(a)){case'boolean':return a?'':void 0;default:return null==a?void 0:a.toString();}}},{key:'_deserializeValue',value:function(a,b){return b===Boolean?null!==a:b===Number?+a:a}}]),c}(b);return c})})();</script><script>(function(){'use strict';function a(a,b){if(!c[b]){var d=a[b];d!==void 0&&(a.__data?a._setPendingProperty(b,d):(a.__dataProto?!a.hasOwnProperty(JSCompiler_renameProperty('__dataProto',a))&&(a.__dataProto=Object.create(a.__dataProto)):a.__dataProto={},a.__dataProto[b]=d))}}for(var b=Polymer.CaseMap,c={},d=HTMLElement.prototype;d;){for(var e=Object.getOwnPropertyNames(d),f=0;f<e.length;f++)c[e[f]]=!0;d=Object.getPrototypeOf(d)}Polymer.PropertyAccessors=Polymer.dedupingMixin(function(c){var d=Polymer.PropertiesChanged(c),e=function(c){function d(){return babelHelpers.classCallCheck(this,d),babelHelpers.possibleConstructorReturn(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments))}return babelHelpers.inherits(d,c),babelHelpers.createClass(d,[{key:'_initializeProperties',value:function(){this.__dataProto&&(this._initializeProtoProperties(this.__dataProto),this.__dataProto=null),babelHelpers.get(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),'_initializeProperties',this).call(this)}},{key:'_initializeProtoProperties',value:function(a){for(var b in a)this._setProperty(b,a[b])}},{key:'_ensureAttribute',value:function(a,b){var c=this;c.hasAttribute(a)||this._valueToNodeAttribute(c,b,a)}},{key:'_serializeValue',value:function(a){switch('undefined'===typeof a?'undefined':babelHelpers.typeof(a)){case'object':if(a instanceof Date)return a.toString();if(a)try{return JSON.stringify(a)}catch(a){return''}default:return babelHelpers.get(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),'_serializeValue',this).call(this,a);}}},{key:'_deserializeValue',value:function(a,b){var c;switch(b){case Object:try{c=JSON.parse(a)}catch(b){c=a}break;case Array:try{c=JSON.parse(a)}catch(b){c=null,console.warn('Polymer::Attributes: couldn\'t decode Array as JSON: '+a)}break;case Date:c=isNaN(a)?a+'':+a,c=new Date(c);break;default:c=babelHelpers.get(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),'_deserializeValue',this).call(this,a,b);}return c}},{key:'_definePropertyAccessor',value:function(b,c){a(this,b),babelHelpers.get(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),'_definePropertyAccessor',this).call(this,b,c)}},{key:'_hasAccessor',value:function(a){return this.__dataHasAccessor&&this.__dataHasAccessor[a]}},{key:'_isPropertyPending',value:function(a){return!!(this.__dataPending&&a in this.__dataPending)}}],[{key:'createPropertiesForAttributes',value:function(){for(var a=this.observedAttributes,c=0;c<a.length;c++)this.prototype._createPropertyAccessor(b.dashToCamelCase(a[c]))}},{key:'attributeNameForProperty',value:function(a){return b.camelToDashCase(a)}}]),d}(d);return e})})();</script><script>(function(){'use strict';function a(a){var b=a.getAttribute('is');if(b&&g[b]){var c=a;for(c.removeAttribute('is'),a=c.ownerDocument.createElement(b),c.parentNode.replaceChild(a,c),a.appendChild(c);c.attributes.length;)a.setAttribute(c.attributes[0].name,c.attributes[0].value),c.removeAttribute(c.attributes[0].name)}return a}function b(a,c){var d=c.parentInfo&&b(a,c.parentInfo);if(d){for(var e=d.firstChild,f=0;e;e=e.nextSibling)if(c.parentIndex===f++)return e;}else return a}function c(a,b,c,d){d.id&&(b[d.id]=c)}function d(a,b,c){if(c.events&&c.events.length)for(var d,e=0,f=c.events;e<f.length&&(d=f[e]);e++)a._addMethodEventListenerToNode(b,d.name,d.value,a)}function e(a,b,c){c.templateInfo&&(b._templateInfo=c.templateInfo)}function f(a,b,c){a=a._methodHost||a;return function(b){a[c]?a[c](b,b.detail):console.warn('listener method `'+c+'` not defined')}}var g={"dom-if":!0,"dom-repeat":!0};Polymer.TemplateStamp=Polymer.dedupingMixin(function(g){var h=function(g){function h(){return babelHelpers.classCallCheck(this,h),babelHelpers.possibleConstructorReturn(this,(h.__proto__||Object.getPrototypeOf(h)).apply(this,arguments))}return babelHelpers.inherits(h,g),babelHelpers.createClass(h,[{key:'_stampTemplate',value:function(a){a&&!a.content&&window.HTMLTemplateElement&&HTMLTemplateElement.decorate&&HTMLTemplateElement.decorate(a);var f=this.constructor._parseTemplate(a),g=f.nodeInfoList,h=f.content||a.content,j=document.importNode(h,!0);j.__noInsertionPoint=!f.hasInsertionPoint;var k=j.nodeList=Array(g.length);j.$={};for(var m,n,o=0,i=g.length;o<i&&(m=g[o]);o++)n=k[o]=b(j,m),c(this,j.$,n,m),e(this,n,m),d(this,n,m);return j=j,j}},{key:'_addMethodEventListenerToNode',value:function(a,b,c,d){d=d||a;var e=f(d,b,c);return this._addEventListenerToNode(a,b,e),e}},{key:'_addEventListenerToNode',value:function(a,b,c){a.addEventListener(b,c)}},{key:'_removeEventListenerFromNode',value:function(a,b,c){a.removeEventListener(b,c)}}],[{key:'_parseTemplate',value:function(a,b){if(!a._templateInfo){var c=a._templateInfo={};c.nodeInfoList=[],c.stripWhiteSpace=b&&b.stripWhiteSpace||a.hasAttribute('strip-whitespace'),this._parseTemplateContent(a,c,{parent:null})}return a._templateInfo}},{key:'_parseTemplateContent',value:function(a,b,c){return this._parseTemplateNode(a.content,b,c)}},{key:'_parseTemplateNode',value:function(a,b,c){var d,e=a;return'template'!=e.localName||e.hasAttribute('preserve-content')?'slot'===e.localName&&(b.hasInsertionPoint=!0):d=this._parseTemplateNestedTemplate(e,b,c)||d,e.firstChild&&(d=this._parseTemplateChildNodes(e,b,c)||d),e.hasAttributes&&e.hasAttributes()&&(d=this._parseTemplateNodeAttributes(e,b,c)||d),d}},{key:'_parseTemplateChildNodes',value:function(b,c,d){if('script'!==b.localName&&'style'!==b.localName)for(var e,f=b.firstChild,g=0;f;f=e){if('template'==f.localName&&(f=a(f)),e=f.nextSibling,f.nodeType===Node.TEXT_NODE){for(var h=e;h&&h.nodeType===Node.TEXT_NODE;)f.textContent+=h.textContent,e=h.nextSibling,b.removeChild(h),h=e;if(c.stripWhiteSpace&&!f.textContent.trim()){b.removeChild(f);continue}}var i={parentIndex:g,parentInfo:d};this._parseTemplateNode(f,c,i)&&(i.infoIndex=c.nodeInfoList.push(i)-1),f.parentNode&&g++}}},{key:'_parseTemplateNestedTemplate',value:function(a,b,c){var d=this._parseTemplate(a,b),e=d.content=a.content.ownerDocument.createDocumentFragment();return e.appendChild(a.content),c.templateInfo=d,!0}},{key:'_parseTemplateNodeAttributes',value:function(b,c,d){for(var e,a=!1,f=Array.from(b.attributes),g=f.length-1;e=f[g];g--)a=this._parseTemplateNodeAttribute(b,c,d,e.name,e.value)||a;return a}},{key:'_parseTemplateNodeAttribute',value:function(a,b,c,d,e){return'on-'===d.slice(0,3)?(a.removeAttribute(d),c.events=c.events||[],c.events.push({name:d.slice(3),value:e}),!0):'id'===d&&(c.id=e,!0)}},{key:'_contentForTemplate',value:function(a){var b=a._templateInfo;return b&&b.content||a.content}}]),h}(g);return h})})();</script><script>(function(){'use strict';function e(e,t){var a=e[t];if(!a)a=e[t]={};else if(!e.hasOwnProperty(t))for(var r in a=e[t]=Object.create(e[t]),a)for(var n=a[r],o=a[r]=Array(n.length),p=0;p<n.length;p++)o[p]=n[p];return a}function t(e,t,r,n,o,p){if(t){var d=!1,i=F++;for(var _ in r)a(e,t,i,_,r,n,o,p)&&(d=!0);return d}return!1}function a(e,t,a,n,o,p,d,_){var s=!1,y=d?Polymer.Path.root(n):n,u=t[y];if(u)for(var h,P=0,i=u.length;P<i&&(h=u[P]);P++)h.info&&h.info.lastRun===a||d&&!r(n,h.trigger)||(h.info&&(h.info.lastRun=a),h.fn(e,n,o,p,h.info,d,_),s=!0);return s}function r(e,t){if(t){var a=t.name;return a==e||t.structured&&Polymer.Path.isAncestor(a,e)||t.wildcard&&Polymer.Path.isDescendant(a,e)}return!0}function n(e,t,a,r,n){var o='string'===typeof n.method?e[n.method]:n.method,p=n.property;o?o.call(e,e.__data[p],r[p]):!n.dynamicFn&&console.warn('observer method `'+n.method+'` not defined')}function o(e,t,r,n,o){var d,i=e[Y.NOTIFY],_=F++;for(var s in t)t[s]&&(i&&a(e,i,_,s,r,n,o)?d=!0:o&&p(e,s,r)&&(d=!0));var l;d&&(l=e.__dataHost)&&l._invalidateProperties&&l._invalidateProperties()}function p(e,t,a){var r=Polymer.Path.root(t);if(r!==t){var n=Polymer.CaseMap.camelToDashCase(r)+'-changed';return d(e,n,a[t],t),!0}return!1}function d(e,t,a,r){var n={value:a,queueProperty:!0};r&&(n.path=r),e.dispatchEvent(new CustomEvent(t,{detail:n}))}function i(e,t,a,r,n,o){var p=o?Polymer.Path.root(t):t,i=p==t?null:t,_=i?Polymer.Path.get(e,i):e.__data[t];i&&_===void 0&&(_=a[t]),d(e,n.eventName,_,i)}function _(e,t,a,r,n){var o,p=e.detail,d=p&&p.path;d?(r=Polymer.Path.translate(a,r,d),o=p&&p.value):o=e.target[a],o=n?!o:o,t[Y.READ_ONLY]&&t[Y.READ_ONLY][r]||!t._setPendingPropertyOrPath(r,o,!0,!!d)||p&&p.queueProperty||t._invalidateProperties()}function s(e,t,a,r,n){var o=e.__data[t];Polymer.sanitizeDOMValue&&(o=Polymer.sanitizeDOMValue(o,n.attrName,'attribute',e)),e._propertyToAttribute(t,n.attrName,o)}function l(e,a,r,n){var o=e[Y.COMPUTE];if(o)for(var p=a;t(e,o,p,r,n);)Object.assign(r,e.__dataOld),Object.assign(a,e.__dataPending),p=e.__dataPending,e.__dataPending=null}function y(e,t,a,r,n){var o=C(e,t,a,r,n),p=n.methodInfo;e.__dataHasAccessor&&e.__dataHasAccessor[p]?e._setPendingProperty(p,o,!0):e[p]=o}function u(e,t,r){var n=e.__dataLinkedPaths;if(n){var o;for(var p in n){var a=n[p];Polymer.Path.isDescendant(p,t)?(o=Polymer.Path.translate(p,a,t),e._setPendingPropertyOrPath(o,r,!0,!0)):Polymer.Path.isDescendant(a,t)&&(o=Polymer.Path.translate(a,p,t),e._setPendingPropertyOrPath(o,r,!0,!0))}}}function h(e,t,a,r,n,o,p){a.bindings=a.bindings||[];var d={kind:r,target:n,parts:o,literal:p,isCompound:1!==o.length};if(a.bindings.push(d),m(d)){var _=d.parts[0],s=_.event,l=_.negate;d.listenerEvent=s||D.camelToDashCase(n)+'-changed',d.listenerNegate=l}for(var y,u=t.nodeInfoList.length,h=0;h<d.parts.length;h++)y=d.parts[h],y.compoundIndex=h,P(e,t,d,y,u)}function P(e,t,a,r,n){if(!r.literal)if('attribute'===a.kind&&'-'===a.target[0])console.warn('Cannot set attribute '+a.target+' because "-" is not a valid attribute starting character');else for(var o,p=r.dependencies,d={index:n,binding:a,part:r,evaluator:e},i=0;i<p.length;i++)o=p[i],'string'==typeof o&&(o=R(o),o.wildcard=!0),e._addTemplatePropertyEffect(t,o.rootProperty,{fn:f,info:d,trigger:o})}function f(e,t,a,r,n,o,p){var d=p[n.index],i=n.binding,_=n.part;if(o&&_.source&&t.length>_.source.length&&'property'==i.kind&&!i.isCompound&&d.__dataHasAccessor&&d.__dataHasAccessor[i.target]){var s=a[t];t=Polymer.Path.translate(_.source,i.target,t),d._setPendingPropertyOrPath(t,s,!1,!0)&&e._enqueueClient(d)}else{var l=n.evaluator._evaluateBinding(e,_,t,a,r,o);g(e,d,i,_,l)}}function g(e,t,a,r,n){if(n=c(t,n,a,r),Polymer.sanitizeDOMValue&&(n=Polymer.sanitizeDOMValue(n,a.target,a.kind,t)),'attribute'==a.kind)e._valueToNodeAttribute(t,n,a.target);else{var o=a.target;t.__dataHasAccessor&&t.__dataHasAccessor[o]?(!t[Y.READ_ONLY]||!t[Y.READ_ONLY][o])&&t._setPendingProperty(o,n)&&e._enqueueClient(t):e._setUnmanagedPropertyToNode(t,o,n)}}function c(e,t,a,r){if(a.isCompound){var n=e.__dataCompoundStorage[a.target];n[r.compoundIndex]=t,t=n.join('')}return'attribute'!==a.kind&&('textContent'===a.target||'value'===a.target&&('input'===e.localName||'textarea'===e.localName))&&(t=void 0==t?'':t),t}function m(e){return!!e.target&&'attribute'!=e.kind&&'text'!=e.kind&&!e.isCompound&&'{'===e.parts[0].mode}function v(e,t){var a=t.nodeList,r=t.nodeInfoList;if(r.length)for(var n=0;n<r.length;n++){var o=r[n],p=a[n],d=o.bindings;if(d)for(var i,_=0;_<d.length;_++)i=d[_],E(p,i),k(p,e,i);p.__dataHost=e}}function E(e,t){if(t.isCompound){for(var a=e.__dataCompoundStorage||(e.__dataCompoundStorage={}),r=t.parts,n=Array(r.length),o=0;o<r.length;o++)n[o]=r[o].literal;var p=t.target;a[p]=n,t.literal&&'property'==t.kind&&(e[p]=t.literal)}}function k(e,t,a){if(a.listenerEvent){var r=a.parts[0];e.addEventListener(a.listenerEvent,function(n){_(n,t,a.target,r.source,r.negate)})}}function O(e,t,a,r,n,o){o=t.static||o&&('object'!==('undefined'===typeof o?'undefined':babelHelpers.typeof(o))||o[t.methodName]);for(var p,d={methodName:t.methodName,args:t.args,methodInfo:n,dynamicFn:o},_=0;_<t.args.length&&(p=t.args[_]);_++)p.literal||e._addPropertyEffect(p.rootProperty,a,{fn:r,info:d,trigger:p});o&&e._addPropertyEffect(t.methodName,a,{fn:r,info:d})}function C(e,t,a,r,n){var o=e._methodHost||e,p=o[n.methodName];if(p){var d=I(e.__data,n.args,t,a);return p.apply(o,d)}n.dynamicFn||console.warn('method `'+n.methodName+'` not defined')}function T(e){for(var t,a='',r=0;r<e.length;r++)t=e[r].literal,a+=t||'';return a}function N(e){var t=e.match(/([^\s]+?)\(([\s\S]*)\)/);if(t){var a=t[1],r={methodName:a,static:!0,args:S};if(t[2].trim()){var n=t[2].replace(/\\,/g,'&comma;').split(',');return b(n,r)}return r}return null}function b(e,t){return t.args=e.map(function(e){var a=R(e);return a.literal||(t.static=!1),a},this),t}function R(e){var t=e.trim().replace(/&comma;/g,',').replace(/\\(.)/g,'$1'),r={name:t,value:'',literal:!1},a=t[0];return'-'===a&&(a=t[1]),'0'<=a&&'9'>=a&&(a='#'),'\''===a||'"'===a?(r.value=t.slice(1,-1),r.literal=!0):'#'===a?(r.value=+t,r.literal=!0):void 0,(r.literal||(r.rootProperty=Polymer.Path.root(t),r.structured=Polymer.Path.isPath(t),r.structured&&(r.wildcard='.*'==t.slice(-2),r.wildcard&&(r.name=t.slice(0,-2)))),r)}function I(e,t,a,r){for(var n=[],o=0,p=t.length;o<p;o++){var d=t[o],i=d.name,_=void 0;if(d.literal?_=d.value:d.structured?(_=Polymer.Path.get(e,i),void 0===_&&(_=r[i])):_=e[i],d.wildcard){var s=0===i.indexOf(a+'.'),l=0===a.indexOf(i)&&!s;n[o]={path:l?a:i,value:l?r[a]:_,base:_}}else n[o]=_}return n}function A(e,t,a,r){var n=a+'.splices';e.notifyPath(n,{indexSplices:r}),e.notifyPath(a+'.length',t.length),e.__data[n]={indexSplices:null}}function L(e,t,a,r,n,o){A(e,t,a,[{index:r,addedCount:n,removed:o,object:t,type:'splice'}])}function x(e){return e[0].toUpperCase()+e.substring(1)}var H,D=Polymer.CaseMap,F=0,Y={COMPUTE:'__computeEffects',REFLECT:'__reflectEffects',NOTIFY:'__notifyEffects',PROPAGATE:'__propagateEffects',OBSERVE:'__observeEffects',READ_ONLY:'__readOnly'},S=[],M='(?:[a-zA-Z_$][\\w.:$\\-*]*)',z='(?:('+M+'|'+'(?:[-+]?[0-9]*\\.?[0-9]+(?:[eE][-+]?[0-9]+)?)'+'|'+('(?:'+'(?:\'(?:[^\'\\\\]|\\\\.)*\')'+'|'+'(?:"(?:[^"\\\\]|\\\\.)*")'+')')+')\\s*)',w=/(\[\[|{{)\s*(?:(!)\s*)?((?:[a-zA-Z_$][\w.:$\-*]*)\s*(?:\(\s*(?:(?:(?:((?:[a-zA-Z_$][\w.:$\-*]*)|(?:[-+]?[0-9]*\.?[0-9]+(?:[eE][-+]?[0-9]+)?)|(?:(?:'(?:[^'\\]|\\.)*')|(?:"(?:[^"\\]|\\.)*")))\s*)(?:,\s*(?:((?:[a-zA-Z_$][\w.:$\-*]*)|(?:[-+]?[0-9]*\.?[0-9]+(?:[eE][-+]?[0-9]+)?)|(?:(?:'(?:[^'\\]|\\.)*')|(?:"(?:[^"\\]|\\.)*")))\s*))*)?)\)\s*)?)(?:]]|}})/g;Polymer.PropertyEffects=Polymer.dedupingMixin(function(a){var r=Polymer.TemplateStamp(Polymer.PropertyAccessors(a)),p=function(a){function r(){babelHelpers.classCallCheck(this,r);var e=babelHelpers.possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).call(this));return e.__dataCounter=0,e.__dataClientsReady,e.__dataPendingClients,e.__dataToNotify,e.__dataLinkedPaths,e.__dataHasPaths,e.__dataCompoundStorage,e.__dataHost,e.__dataTemp,e.__dataClientsInitialized,e.__data,e.__dataPending,e.__dataOld,e.__computeEffects,e.__reflectEffects,e.__notifyEffects,e.__propagateEffects,e.__observeEffects,e.__readOnly,e.__templateInfo,e}return babelHelpers.inherits(r,a),babelHelpers.createClass(r,[{key:'_initializeProperties',value:function(){babelHelpers.get(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),'_initializeProperties',this).call(this),B.registerHost(this),this.__dataClientsReady=!1,this.__dataPendingClients=null,this.__dataToNotify=null,this.__dataLinkedPaths=null,this.__dataHasPaths=!1,this.__dataCompoundStorage=this.__dataCompoundStorage||null,this.__dataHost=this.__dataHost||null,this.__dataTemp={},this.__dataClientsInitialized=!1}},{key:'_initializeProtoProperties',value:function(e){this.__data=Object.create(e),this.__dataPending=Object.create(e),this.__dataOld={}}},{key:'_initializeInstanceProperties',value:function(e){var t=this[Y.READ_ONLY];for(var a in e)t&&t[a]||(this.__dataPending=this.__dataPending||{},this.__dataOld=this.__dataOld||{},this.__data[a]=this.__dataPending[a]=e[a])}},{key:'_addPropertyEffect',value:function(t,a,r){this._createPropertyAccessor(t,a==Y.READ_ONLY);var n=e(this,a)[t];n||(n=this[a][t]=[]),n.push(r)}},{key:'_removePropertyEffect',value:function(t,a,r){var n=e(this,a)[t],o=n.indexOf(r);0<=o&&n.splice(o,1)}},{key:'_hasPropertyEffect',value:function(e,t){var a=this[t];return!!(a&&a[e])}},{key:'_hasReadOnlyEffect',value:function(e){return this._hasPropertyEffect(e,Y.READ_ONLY)}},{key:'_hasNotifyEffect',value:function(e){return this._hasPropertyEffect(e,Y.NOTIFY)}},{key:'_hasReflectEffect',value:function(e){return this._hasPropertyEffect(e,Y.REFLECT)}},{key:'_hasComputedEffect',value:function(e){return this._hasPropertyEffect(e,Y.COMPUTE)}},{key:'_setPendingPropertyOrPath',value:function(e,t,a,n){if(n||Polymer.Path.root(Array.isArray(e)?e[0]:e)!==e){if(!n){var o=Polymer.Path.get(this,e);if(e=Polymer.Path.set(this,e,t),!e||!babelHelpers.get(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),'_shouldPropertyChange',this).call(this,e,t,o))return!1}if(this.__dataHasPaths=!0,this._setPendingProperty(e,t,a))return u(this,e,t),!0}else{if(this.__dataHasAccessor&&this.__dataHasAccessor[e])return this._setPendingProperty(e,t,a);this[e]=t}return!1}},{key:'_setUnmanagedPropertyToNode',value:function(e,t,a){(a!==e[t]||'object'==('undefined'===typeof a?'undefined':babelHelpers.typeof(a)))&&(e[t]=a)}},{key:'_setPendingProperty',value:function(e,t,a){var r=this.__dataHasPaths&&Polymer.Path.isPath(e),n=r?this.__dataTemp:this.__data;return!!this._shouldPropertyChange(e,t,n[e])&&(this.__dataPending||(this.__dataPending={},this.__dataOld={}),e in this.__dataOld||(this.__dataOld[e]=this.__data[e]),r?this.__dataTemp[e]=t:this.__data[e]=t,this.__dataPending[e]=t,(r||this[Y.NOTIFY]&&this[Y.NOTIFY][e])&&(this.__dataToNotify=this.__dataToNotify||{},this.__dataToNotify[e]=a),!0)}},{key:'_setProperty',value:function(e,t){this._setPendingProperty(e,t,!0)&&this._invalidateProperties()}},{key:'_invalidateProperties',value:function(){this.__dataReady&&this._flushProperties()}},{key:'_enqueueClient',value:function(e){this.__dataPendingClients=this.__dataPendingClients||[],e!==this&&this.__dataPendingClients.push(e)}},{key:'_flushProperties',value:function(){this.__dataCounter++,babelHelpers.get(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),'_flushProperties',this).call(this),this.__dataCounter--}},{key:'_flushClients',value:function(){this.__dataClientsReady?this.__enableOrFlushClients():(this.__dataClientsReady=!0,this._readyClients(),this.__dataReady=!0)}},{key:'__enableOrFlushClients',value:function(){var e=this.__dataPendingClients;if(e){this.__dataPendingClients=null;for(var t,a=0;a<e.length;a++)t=e[a],t.__dataEnabled?t.__dataPending&&t._flushProperties():t._enableProperties()}}},{key:'_readyClients',value:function(){this.__enableOrFlushClients()}},{key:'setProperties',value:function(e,t){for(var a in e)!t&&this[Y.READ_ONLY]&&this[Y.READ_ONLY][a]||this._setPendingPropertyOrPath(a,e[a],!0);this._invalidateProperties()}},{key:'ready',value:function(){this._flushProperties(),this.__dataClientsReady||this._flushClients(),this.__dataPending&&this._flushProperties()}},{key:'_propertiesChanged',value:function(e,a,r){var n=this.__dataHasPaths;this.__dataHasPaths=!1,l(this,a,r,n);var p=this.__dataToNotify;this.__dataToNotify=null,this._propagatePropertyChanges(a,r,n),this._flushClients(),t(this,this[Y.REFLECT],a,r,n),t(this,this[Y.OBSERVE],a,r,n),p&&o(this,p,a,r,n),1==this.__dataCounter&&(this.__dataTemp={})}},{key:'_propagatePropertyChanges',value:function(e,a,r){this[Y.PROPAGATE]&&t(this,this[Y.PROPAGATE],e,a,r);for(var n=this.__templateInfo;n;)t(this,n.propertyEffects,e,a,r,n.nodeList),n=n.nextTemplateInfo}},{key:'linkPaths',value:function(e,t){e=Polymer.Path.normalize(e),t=Polymer.Path.normalize(t),this.__dataLinkedPaths=this.__dataLinkedPaths||{},this.__dataLinkedPaths[e]=t}},{key:'unlinkPaths',value:function(e){e=Polymer.Path.normalize(e),this.__dataLinkedPaths&&delete this.__dataLinkedPaths[e]}},{key:'notifySplices',value:function(e,t){var a={path:''},r=Polymer.Path.get(this,e,a);A(this,r,a.path,t)}},{key:'get',value:function(e,t){return Polymer.Path.get(t||this,e)}},{key:'set',value:function(e,t,a){a?Polymer.Path.set(a,e,t):(!this[Y.READ_ONLY]||!this[Y.READ_ONLY][e])&&this._setPendingPropertyOrPath(e,t,!0)&&this._invalidateProperties()}},{key:'push',value:function(e){for(var t={path:''},a=Polymer.Path.get(this,e,t),r=a.length,n=arguments.length,o=Array(1<n?n-1:0),p=1;p<n;p++)o[p-1]=arguments[p];var d=a.push.apply(a,o);return o.length&&L(this,a,t.path,r,o.length,[]),d}},{key:'pop',value:function(e){var t={path:''},a=Polymer.Path.get(this,e,t),r=!!a.length,n=a.pop();return r&&L(this,a,t.path,a.length,0,[n]),n}},{key:'splice',value:function(e,t,a){for(var r=Math.floor,n=arguments.length,o=Array(3<n?n-3:0),p=3;p<n;p++)o[p-3]=arguments[p];var d={path:''},i=Polymer.Path.get(this,e,d);0>t?t=i.length-r(-t):t&&(t=r(t));var _;return _=2===arguments.length?i.splice(t):i.splice.apply(i,[t,a].concat(o)),(o.length||_.length)&&L(this,i,d.path,t,o.length,_),_}},{key:'shift',value:function(e){var t={path:''},a=Polymer.Path.get(this,e,t),r=!!a.length,n=a.shift();return r&&L(this,a,t.path,0,0,[n]),n}},{key:'unshift',value:function(e){for(var t={path:''},a=Polymer.Path.get(this,e,t),r=arguments.length,n=Array(1<r?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];var p=a.unshift.apply(a,n);return n.length&&L(this,a,t.path,0,n.length,[]),p}},{key:'notifyPath',value:function(e,t){var a;if(1==arguments.length){var r={path:''};t=Polymer.Path.get(this,e,r),a=r.path}else a=Array.isArray(e)?Polymer.Path.normalize(e):e;this._setPendingPropertyOrPath(a,t,!0,!0)&&this._invalidateProperties()}},{key:'_createReadOnlyProperty',value:function(e,t){this._addPropertyEffect(e,Y.READ_ONLY),t&&(this['_set'+x(e)]=function(t){this._setProperty(e,t)})}},{key:'_createPropertyObserver',value:function(e,t,a){var r={property:e,method:t,dynamicFn:!!a};this._addPropertyEffect(e,Y.OBSERVE,{fn:n,info:r,trigger:{name:e}}),a&&this._addPropertyEffect(t,Y.OBSERVE,{fn:n,info:r,trigger:{name:t}})}},{key:'_createMethodObserver',value:function(e,t){var a=N(e);if(!a)throw new Error('Malformed observer expression \''+e+'\'');O(this,a,Y.OBSERVE,C,null,t)}},{key:'_createNotifyingProperty',value:function(e){this._addPropertyEffect(e,Y.NOTIFY,{fn:i,info:{eventName:D.camelToDashCase(e)+'-changed',property:e}})}},{key:'_createReflectedProperty',value:function(e){var t=this.constructor.attributeNameForProperty(e);'-'===t[0]?console.warn('Property '+e+' cannot be reflected to attribute '+t+' because "-" is not a valid starting attribute name. Use a lowercase first letter for the property instead.'):this._addPropertyEffect(e,Y.REFLECT,{fn:s,info:{attrName:t}})}},{key:'_createComputedProperty',value:function(e,t,a){var r=N(t);if(!r)throw new Error('Malformed computed expression \''+t+'\'');O(this,r,Y.COMPUTE,y,e,a)}},{key:'_bindTemplate',value:function(e,t){var a=this.constructor._parseTemplate(e),r=this.__templateInfo==a;if(!r)for(var n in a.propertyEffects)this._createPropertyAccessor(n);if(t&&(a=Object.create(a),a.wasPreBound=r,!r&&this.__templateInfo)){var o=this.__templateInfoLast||this.__templateInfo;return this.__templateInfoLast=o.nextTemplateInfo=a,a.previousTemplateInfo=o,a}return this.__templateInfo=a}},{key:'_stampTemplate',value:function(e){B.beginHosting(this);var a=babelHelpers.get(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),'_stampTemplate',this).call(this,e);B.endHosting(this);var o=this._bindTemplate(e,!0);if(o.nodeList=a.nodeList,!o.wasPreBound)for(var p=o.childNodes=[],d=a.firstChild;d;d=d.nextSibling)p.push(d);return a.templateInfo=o,v(this,o),this.__dataReady&&t(this,o.propertyEffects,this.__data,null,!1,o.nodeList),a}},{key:'_removeBoundDom',value:function(e){var t=e.templateInfo;t.previousTemplateInfo&&(t.previousTemplateInfo.nextTemplateInfo=t.nextTemplateInfo),t.nextTemplateInfo&&(t.nextTemplateInfo.previousTemplateInfo=t.previousTemplateInfo),this.__templateInfoLast==t&&(this.__templateInfoLast=t.previousTemplateInfo),t.previousTemplateInfo=t.nextTemplateInfo=null;for(var a,r=t.childNodes,n=0;n<r.length;n++)a=r[n],a.parentNode.removeChild(a)}},{key:'PROPERTY_EFFECT_TYPES',get:function(){return Y}}],[{key:'addPropertyEffect',value:function(e,t,a){this.prototype._addPropertyEffect(e,t,a)}},{key:'createPropertyObserver',value:function(e,t,a){this.prototype._createPropertyObserver(e,t,a)}},{key:'createMethodObserver',value:function(e,t){this.prototype._createMethodObserver(e,t)}},{key:'createNotifyingProperty',value:function(e){this.prototype._createNotifyingProperty(e)}},{key:'createReadOnlyProperty',value:function(e,t){this.prototype._createReadOnlyProperty(e,t)}},{key:'createReflectedProperty',value:function(e){this.prototype._createReflectedProperty(e)}},{key:'createComputedProperty',value:function(e,t,a){this.prototype._createComputedProperty(e,t,a)}},{key:'bindTemplate',value:function(e){return this.prototype._bindTemplate(e)}},{key:'_addTemplatePropertyEffect',value:function(e,t,a){var r=e.hostProps=e.hostProps||{};r[t]=!0;var n=e.propertyEffects=e.propertyEffects||{},o=n[t]=n[t]||[];o.push(a)}},{key:'_parseTemplateNode',value:function(e,t,a){var n=babelHelpers.get(r.__proto__||Object.getPrototypeOf(r),'_parseTemplateNode',this).call(this,e,t,a);if(e.nodeType===Node.TEXT_NODE){var o=this._parseBindings(e.textContent,t);o&&(e.textContent=T(o)||' ',h(this,t,a,'text','textContent',o),n=!0)}return n}},{key:'_parseTemplateNodeAttribute',value:function(e,t,a,n,o){var p=this._parseBindings(o,t);if(p){var d=n,i='property';'$'==n[n.length-1]&&(n=n.slice(0,-1),i='attribute');var _=T(p);return _&&'attribute'==i&&e.setAttribute(n,_),'input'===e.localName&&'value'===d&&e.setAttribute(d,''),e.removeAttribute(d),'property'===i&&(n=Polymer.CaseMap.dashToCamelCase(n)),h(this,t,a,i,n,p,_),!0}return babelHelpers.get(r.__proto__||Object.getPrototypeOf(r),'_parseTemplateNodeAttribute',this).call(this,e,t,a,n,o)}},{key:'_parseTemplateNestedTemplate',value:function(e,t,a){var n=babelHelpers.get(r.__proto__||Object.getPrototypeOf(r),'_parseTemplateNestedTemplate',this).call(this,e,t,a),o=a.templateInfo.hostProps;for(var p in o){h(this,t,a,'property','_host_'+p,[{mode:'{',source:p,dependencies:[p]}])}return n}},{key:'_parseBindings',value:function(e,t){for(var a,r=[],n=0;null!==(a=w.exec(e));){a.index>n&&r.push({literal:e.slice(n,a.index)});var o=a[1][0],p=!!a[2],d=a[3].trim(),_=!1,s='',l=-1;'{'==o&&0<(l=d.indexOf('::'))&&(s=d.substring(l+2),d=d.substring(0,l),_=!0);var y=N(d),u=[];if(y){for(var h,P=y.args,f=y.methodName,g=0;g<P.length;g++)h=P[g],h.literal||u.push(h);var i=t.dynamicFns;(i&&i[f]||y.static)&&(u.push(f),y.dynamicFn=!0)}else u.push(d);r.push({source:d,mode:o,negate:p,customEvent:_,signature:y,dependencies:u,event:s}),n=w.lastIndex}if(n&&n<e.length){var c=e.substring(n);c&&r.push({literal:c})}return r.length?r:null}},{key:'_evaluateBinding',value:function(e,t,a,r,n,o){var p;return p=t.signature?C(e,a,r,n,t.signature):a==t.source?o&&Polymer.Path.isPath(a)?Polymer.Path.get(e,a):e.__data[a]:Polymer.Path.get(e,t.source),t.negate&&(p=!p),p}}]),r}(r);return H=p,p});var B={stack:[],registerHost:function(e){if(this.stack.length){var t=this.stack[this.stack.length-1];t._enqueueClient(e)}},beginHosting:function(e){this.stack.push(e)},endHosting:function(e){var t=this.stack.length;t&&this.stack[t-1]==e&&this.stack.pop()}}})();</script><script>(function(){'use strict';function a(a){var b={};for(var c in a){var d=a[c];b[c]='function'===typeof d?{type:d}:d}return b}Polymer.PropertiesMixin=Polymer.dedupingMixin(function(b){function c(a){var b=Object.getPrototypeOf(a);return b.prototype instanceof f?b:null}function d(b){if(!b.hasOwnProperty(JSCompiler_renameProperty('__ownProperties',b))){var c=null;b.hasOwnProperty(JSCompiler_renameProperty('properties',b))&&b.properties&&(c=a(b.properties)),b.__ownProperties=c}return b.__ownProperties}var e=Polymer.PropertiesChanged(b),f=function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:'_initializeProperties',value:function(){this.constructor.finalize(),babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),'_initializeProperties',this).call(this)}},{key:'connectedCallback',value:function(){babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),'connectedCallback',this)&&babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),'connectedCallback',this).call(this),this._enableProperties()}},{key:'disconnectedCallback',value:function(){babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),'disconnectedCallback',this)&&babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),'disconnectedCallback',this).call(this)}}],[{key:'finalize',value:function(){if(!this.hasOwnProperty(JSCompiler_renameProperty('__finalized',this))){var a=c(this);a&&a.finalize(),this.__finalized=!0,this._finalizeClass()}}},{key:'_finalizeClass',value:function(){var a=d(this);a&&this.createProperties(a)}},{key:'typeForProperty',value:function(a){var b=this._properties[a];return b&&b.type}},{key:'observedAttributes',get:function(){var a=this,b=this._properties;return b?Object.keys(b).map(function(b){return a.attributeNameForProperty(b)}):[]}},{key:'_properties',get:function(){if(!this.hasOwnProperty(JSCompiler_renameProperty('__properties',this))){var a=c(this);this.__properties=Object.assign({},a&&a._properties,d(this))}return this.__properties}}]),b}(e);return f})})();</script><script>(function(){'use strict';Polymer.ElementMixin=Polymer.dedupingMixin(function(a){function b(a){if(!a.hasOwnProperty(JSCompiler_renameProperty('__propertyDefaults',a))){a.__propertyDefaults=null;var b=a._properties;for(var c in b){var d=b[c];'value'in d&&(a.__propertyDefaults=a.__propertyDefaults||{},a.__propertyDefaults[c]=d)}}return a.__propertyDefaults}function c(a){return a.hasOwnProperty(JSCompiler_renameProperty('__ownObservers',a))||(a.__ownObservers=a.hasOwnProperty(JSCompiler_renameProperty('observers',a))?a.observers:null),a.__ownObservers}function d(a,b,c,d){c.computed&&(c.readOnly=!0),c.computed&&!a._hasReadOnlyEffect(b)&&a._createComputedProperty(b,c.computed,d),c.readOnly&&!a._hasReadOnlyEffect(b)&&a._createReadOnlyProperty(b,!c.computed),c.reflectToAttribute&&!a._hasReflectEffect(b)&&a._createReflectedProperty(b),c.notify&&!a._hasNotifyEffect(b)&&a._createNotifyingProperty(b),c.observer&&a._createPropertyObserver(b,c.observer,d[c.observer]),a._addPropertyToAttributeMap(b)}function e(a,b,c,d){for(var e,f=b.content.querySelectorAll('style'),g=Polymer.StyleGather.stylesFromTemplate(b),h=Polymer.StyleGather.stylesFromModuleImports(c),j=b.content.firstElementChild,k=0;k<h.length;k++)e=h[k],e.textContent=a._processStyleText(e.textContent,d),b.content.insertBefore(e,j);for(var l=0,m=0;m<g.length;m++){var i=g[m],n=f[l];n===i?l++:(i=i.cloneNode(!0),n.parentNode.insertBefore(i,n)),i.textContent=a._processStyleText(i.textContent,d)}window.ShadyCSS&&window.ShadyCSS.prepareTemplate(b,c)}var f=Polymer.PropertiesMixin(Polymer.PropertyEffects(a)),g=function(a){function f(){babelHelpers.classCallCheck(this,f);var a=babelHelpers.possibleConstructorReturn(this,(f.__proto__||Object.getPrototypeOf(f)).call(this));return a._template,a._importPath,a.rootPath,a.importPath,a.root,a.$,a}return babelHelpers.inherits(f,a),babelHelpers.createClass(f,null,[{key:'_finalizeClass',value:function(){babelHelpers.get(f.__proto__||Object.getPrototypeOf(f),'_finalizeClass',this).call(this),this.hasOwnProperty(JSCompiler_renameProperty('is',this))&&this.is&&Polymer.telemetry.register(this.prototype);var a=c(this);a&&this.createObservers(a,this._properties);var b=this.template;if(b){if('string'===typeof b){var d=document.createElement('template');d.innerHTML=b,b=d}else b=b.cloneNode(!0);this.prototype._template=b}}},{key:'createProperties',value:function(a){for(var b in a)d(this.prototype,b,a[b],a)}},{key:'createObservers',value:function(a,b){for(var c=this.prototype,d=0;d<a.length;d++)c._createMethodObserver(a[d],b)}},{key:'template',get:function(){return this.hasOwnProperty(JSCompiler_renameProperty('_template',this))||(this._template=Polymer.DomModule&&Polymer.DomModule.import(this.is,'template')||Object.getPrototypeOf(this.prototype).constructor.template),this._template}},{key:'importPath',get:function(){if(!this.hasOwnProperty(JSCompiler_renameProperty('_importPath',this))){var a=Polymer.DomModule&&Polymer.DomModule.import(this.is);this._importPath=a?a.assetpath:Object.getPrototypeOf(this.prototype).constructor.importPath}return this._importPath}}]),babelHelpers.createClass(f,[{key:'_initializeProperties',value:function(){Polymer.telemetry.instanceCount++,this.constructor.finalize();var a=this.constructor.importPath;this.constructor._finalizeTemplate(this.localName),babelHelpers.get(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),'_initializeProperties',this).call(this),this.rootPath=Polymer.rootPath,this.importPath=a;var c=b(this.constructor);if(c)for(var d in c){var e=c[d];if(!this.hasOwnProperty(d)){var g='function'==typeof e.value?e.value.call(this):e.value;this._hasAccessor(d)?this._setPendingProperty(d,g,!0):this[d]=g}}}},{key:'connectedCallback',value:function(){window.ShadyCSS&&this._template&&window.ShadyCSS.styleElement(this),babelHelpers.get(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),'connectedCallback',this).call(this)}},{key:'ready',value:function(){this._template&&(this.root=this._stampTemplate(this._template),this.$=this.root.$),babelHelpers.get(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),'ready',this).call(this)}},{key:'_readyClients',value:function(){this._template&&(this.root=this._attachDom(this.root)),babelHelpers.get(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),'_readyClients',this).call(this)}},{key:'_attachDom',value:function(a){if(this.attachShadow)return a?(this.shadowRoot||this.attachShadow({mode:'open'}),this.shadowRoot.appendChild(a),this.shadowRoot):null;throw new Error('ShadowDOM not available. Polymer.Element can create dom as children instead of in ShadowDOM by setting `this.root = this;` before `ready`.')}},{key:'updateStyles',value:function(a){window.ShadyCSS&&window.ShadyCSS.styleSubtree(this,a)}},{key:'resolveUrl',value:function(a,b){return!b&&this.importPath&&(b=Polymer.ResolveUrl.resolveUrl(this.importPath)),Polymer.ResolveUrl.resolveUrl(a,b)}}],[{key:'_processStyleText',value:function(a,b){return Polymer.ResolveUrl.resolveCss(a,b)}},{key:'_finalizeTemplate',value:function(a){var b=this.prototype._template;if(b&&!b.__polymerFinalized){b.__polymerFinalized=!0;var c=this.importPath,d=c?Polymer.ResolveUrl.resolveUrl(c):'';e(this,b,a,d),this.prototype._bindTemplate(b)}}},{key:'_parseTemplateContent',value:function(a,b,c){return b.dynamicFns=b.dynamicFns||this._properties,babelHelpers.get(f.__proto__||Object.getPrototypeOf(f),'_parseTemplateContent',this).call(this,a,b,c)}}]),f}(f);return g}),Polymer.telemetry={instanceCount:0,registrations:[],_regLog:function(a){console.log('['+a.is+']: registered')},register:function(a){this.registrations.push(a),Polymer.log&&this._regLog(a)},dumpRegistrations:function(){this.registrations.forEach(this._regLog)}},Polymer.updateStyles=function(a){window.ShadyCSS&&window.ShadyCSS.styleDocument(a)}})();</script><script>(function(){'use strict';function a(a){if(a instanceof c)return a.value;throw new Error('non-literal value passed to Polymer.htmlLiteral: '+a)}function b(b){if(b instanceof HTMLTemplateElement)return b.innerHTML;if(b instanceof c)return a(b);throw new Error('non-template value passed to Polymer.html: '+b)}var c=function(){function a(b){babelHelpers.classCallCheck(this,a),this.value=b.toString()}return babelHelpers.createClass(a,[{key:'toString',value:function(){return this.value}}]),a}();Polymer.html=function(a){for(var c=document.createElement('template'),d=arguments.length,e=Array(1<d?d-1:0),f=1;f<d;f++)e[f-1]=arguments[f];return c.innerHTML=e.reduce(function(c,d,e){return c+b(d)+a[e+1]},a[0]),c},Polymer.htmlLiteral=function(b){for(var d=arguments.length,e=Array(1<d?d-1:0),f=1;f<d;f++)e[f-1]=arguments[f];return new c(e.reduce(function(c,d,e){return c+a(d)+b[e+1]},b[0]))}})();</script><script>(function(){'use strict';var a=Polymer.ElementMixin(HTMLElement);Polymer.Element=a,Polymer.html=Polymer.html})();</script><script>(function(){"use strict";function c(){this.end=this.start=0,this.rules=this.parent=this.previous=null,this.cssText=this.parsedCssText="",this.atRule=!1,this.type=0,this.parsedSelector=this.selector=this.keyframesName=""}function b(j){j=j.replace(v,"").replace(L,"");var a=j,b=new c;b.start=0,b.end=a.length;for(var d=b,e=0,f=a.length;e<f;e++)if("{"===a[e]){d.rules||(d.rules=[]);var h=d,g=h.rules[h.rules.length-1]||null;d=new c,d.start=e+1,d.parent=h,d.previous=g,h.rules.push(d)}else"}"===a[e]&&(d.end=e+1,d=d.parent||b);return i(b,j)}function i(h,a){var c=a.substring(h.start,h.end-1);if(h.parsedCssText=h.cssText=c.trim(),h.parent&&(c=a.substring(h.previous?h.previous.end:h.parent.start,h.start-1),c=g(c),c=c.replace(V," "),c=c.substring(c.lastIndexOf(";")+1),c=h.parsedSelector=h.selector=c.trim(),h.atRule=0===c.indexOf("@"),h.atRule?0===c.indexOf("@media")?h.type=u:c.match(U)&&(h.type=x,h.keyframesName=h.selector.split(V).pop()):h.type=0===c.indexOf("--")?t:k),c=h.rules)for(var b,f=0,d=c.length;f<d&&(b=c[f]);f++)i(b,a);return h}function g(b){return b.replace(/\\([0-9a-f]{1,6})\s/gi,function(c,a){for(c=a,a=6-c.length;a--;)c="0"+c;return"\\"+c})}function j(i,a,c){c=void 0===c?"":c;var b="";if(i.cssText||i.rules){var d,f=i.rules;if((d=f)&&(d=f[0],d=!(d&&d.selector&&0===d.selector.indexOf("--"))),d){d=0;for(var e,g=f.length;d<g&&(e=f[d]);d++)b=j(e,a,b)}else a?a=i.cssText:(a=i.cssText,a=a.replace(M,"").replace(O,""),a=a.replace(P,"").replace(Q,"")),(b=a.trim())&&(b="  "+b+"\n")}return b&&(i.selector&&(c+=i.selector+" {\n"),c+=b,i.selector&&(c+="}\n\n")),c}function d(b){(b=B[b])&&(b._applyShimCurrentVersion=b._applyShimCurrentVersion||0,b._applyShimValidatingVersion=b._applyShimValidatingVersion||0,b._applyShimNextVersion=(b._applyShimNextVersion||0)+1)}function e(b){return b._applyShimCurrentVersion===b._applyShimNextVersion}function f(b){b._applyShimValidatingVersion=b._applyShimNextVersion,b.b||(b.b=!0,r.then(function(){b._applyShimCurrentVersion=b._applyShimNextVersion,b.b=!1}))}function a(b){K=b&&b.shimcssproperties?!1:W||!navigator.userAgent.match(/AppleWebKit\/601|Edge\/15/)&&window.CSS&&CSS.supports&&CSS.supports("box-shadow","0 0 0 var(--foo)")}function h(c){return c?("string"===typeof c&&(c=b(c)),j(c,Y)):""}function l(c){return!c.__cssRules&&c.textContent&&(c.__cssRules=b(c.textContent)),c.__cssRules||null}function m(i,a,c,b){if(i){var d=!1,j=i.type;if(b&&j===u){var f=i.selector.match(G);f&&(window.matchMedia(f[1]).matches||(d=!0))}if(j===k?a(i):c&&j===x?c(i):j===t&&(d=!0),(i=i.rules)&&!d){d=0,j=i.length;for(var h;d<j&&(h=i[d]);d++)m(h,a,c,b)}}}function n(g,a){var c=g.indexOf("var(");if(-1===c)return a(g,"","","");a:{for(var b=0,d=c+3,e=g.length;d<e;d++)if("("===g[d])b++;else if(")"===g[d]&&0===--b)break a;d=-1}return b=g.substring(c+4,d),c=g.substring(0,c),g=n(g.substring(d+1),a),d=b.indexOf(","),-1===d?a(c,b.trim(),"",g):a(c,b.substring(0,d).trim(),b.substring(d+1).trim(),g)}function o(){this.a={}}function p(){this.b=this.c=null,this.a=new o}function q(d,a){return a=a.replace(Z,function(a,b,c,e){return w(d,a,b,c,e)}),s(d,a)}function s(i,a){for(var c;c=F.exec(a);){var b=c[0],d=c[1];c=c.index;var e=a.slice(0,c+b.indexOf("@apply"));a=a.slice(c+b.length);var f=y(i,e);b=void 0;var h=i;d=d.replace(H,"");var g=[],j=h.a.get(d);if(j||(h.a.set(d,{}),j=h.a.get(d)),j)for(b in h.c&&(j.i[h.c]=!0),j.h)h=f&&f[b],j=[b,": var(",d,"_-_",b],h&&j.push(",",h),j.push(")"),g.push(j.join(""));b=g.join("; "),a=""+e+b+a,F.lastIndex=c+b.length}return a}function y(i,a){a=a.split(";");for(var c,b,d,h={},e=0;e<a.length;e++)if((c=a[e])&&(d=c.split(":"),1<d.length)){c=d[0].trim();var f=i;b=c,d=d.slice(1).join(":");var g=_.exec(d);g&&(g[1]?(f.b||(f.b=document.createElement("meta"),f.b.setAttribute("apply-shim-measure",""),f.b.style.all="initial",document.head.appendChild(f.b)),b=window.getComputedStyle(f.b).getPropertyValue(b)):b="apply-shim-inherit",d=b),b=d,h[c]=b}return h}function z(d,a){if(aa)for(var c in a.i)c!==d.c&&aa(c)}function w(i,a,c,b,d){if(b&&n(b,function(a,c){c&&i.a.get(c)&&(d="@apply "+c+";")}),!d)return a;var j=s(i,d),f=a.slice(0,a.indexOf("--")),h=j=y(i,j),g=i.a.get(c),k=g&&g.h;k?h=Object.assign(Object.create(k),j):i.a.set(c,h);var m,o=[],p=!1;for(m in h){var q=j[m];void 0===q&&(q="initial"),!k||m in k||(p=!0),o.push(""+c+"_-_"+m+": "+q)}return p&&z(i,g),g&&(g.h=h),b&&(f=a+";"+f),""+f+o.join("; ")+";"}function C(b){requestAnimationFrame(function(){R?R(b):(S||(S=new Promise(function(b){N=b}),"complete"===document.readyState?N():document.addEventListener("readystatechange",function(){"complete"===document.readyState&&N()})),S.then(function(){b&&b()}))})}function E(){var b=this;this.a=null,C(function(){I(b)}),ba.invalidCallback=d}function I(b){b.a||(b.a=window.ShadyCSS.CustomStyleInterface,b.a&&(b.a.transformCallback=function(b){ba.f(b)},b.a.validateCallback=function(){requestAnimationFrame(function(){b.a.enqueued&&J(b)})}))}function J(e){if(I(e),e.a){var a=e.a.processStyles();if(e.a.enqueued){for(var c,d=0;d<a.length;d++)c=e.a.getStyleForCustomStyle(a[d]),c&&ba.f(c);e.a.enqueued=!1}}}var K,B={},k=1,x=7,u=4,t=1E3,v=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//gim,L=/@import[^;]*;/gim,M=/(?:^[^;\-\s}]+)?--[^;{}]*?:[^{};]*?(?:[;\n]|$)/gim,O=/(?:^[^;\-\s}]+)?--[^;{}]*?:[^{};]*?{[^}]*?}(?:[;\n]|$)?/gim,P=/@apply\s*\(?[^);]*\)?\s*(?:[;\n]|$)?/gim,Q=/[^;:]*?:[^;]*?var\([^;]*\)(?:[;\n]|$)?/gim,U=/^@[^\s]*keyframes/,V=/\s+/g,r=Promise.resolve(),W=!(window.ShadyDOM&&window.ShadyDOM.inUse);window.ShadyCSS&&void 0!==window.ShadyCSS.nativeCss?K=window.ShadyCSS.nativeCss:window.ShadyCSS?(a(window.ShadyCSS),window.ShadyCSS=void 0):a(window.WebComponents&&window.WebComponents.flags);var Y=K,Z=/(?:^|[;\s{]\s*)(--[\w-]*?)\s*:\s*(?:((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};{])+)|\{([^}]*)\}(?:(?=[;\s}])|$))/gi,F=/(?:^|\W+)@apply\s*\(?([^);\n]*)\)?/gi,G=/@media\s(.*)/,$=new Set,H=/;\s*/m,_=/^\s*(initial)|(inherit)\s*$/;o.prototype.set=function(b,a){b=b.trim(),this.a[b]={h:a,i:{}}},o.prototype.get=function(b){return b=b.trim(),this.a[b]||null};var aa=null;p.prototype.o=function(b){return b=F.test(b)||Z.test(b),F.lastIndex=0,Z.lastIndex=0,b},p.prototype.m=function(g,a){if(void 0===g.a){for(var c,f=[],b=g.content.querySelectorAll("style"),d=0;d<b.length;d++)if(c=b[d],!c.hasAttribute("shady-unscoped"))f.push(c.textContent),c.parentNode.removeChild(c);else if(!W){var e=c.textContent;$.has(e)||($.add(e),e=c.cloneNode(!0),document.head.appendChild(e)),c.parentNode.removeChild(c)}(f=f.join("").trim())?(b=document.createElement("style"),b.textContent=f,g.content.insertBefore(b,g.content.firstChild),f=b):f=null,g.a=f}return(g=g.a)?this.j(g,a):null},p.prototype.j=function(d,a){a=void 0===a?"":a;var c=l(d);return this.l(c,a),d.textContent=h(c),c},p.prototype.f=function(d){var e=this,a=l(d);return m(a,function(b){":root"===b.selector&&(b.selector="html"),e.g(b)}),d.textContent=h(a),a},p.prototype.l=function(d,a){var c=this;this.c=a,m(d,function(b){c.g(b)}),this.c=null},p.prototype.g=function(b){b.cssText=q(this,b.parsedCssText),":root"===b.selector&&(b.selector=":host > *")},p.prototype.detectMixin=p.prototype.o,p.prototype.transformStyle=p.prototype.j,p.prototype.transformCustomStyle=p.prototype.f,p.prototype.transformRules=p.prototype.l,p.prototype.transformRule=p.prototype.g,p.prototype.transformTemplate=p.prototype.m,p.prototype._separator="_-_",Object.defineProperty(p.prototype,"invalidCallback",{get:function(){return aa},set:function(b){aa=b}});var N,S=null,R=window.HTMLImports&&window.HTMLImports.whenReady||null,ba=new p;if(E.prototype.prepareTemplate=function(b,a){I(this),B[a]=b,a=ba.m(b,a),b._styleAst=a},E.prototype.styleSubtree=function(d,a){if(I(this),a)for(var c in a)null===c?d.style.removeProperty(c):d.style.setProperty(c,a[c]);if(d.shadowRoot)for(this.styleElement(d),d=d.shadowRoot.children||d.shadowRoot.childNodes,a=0;a<d.length;a++)this.styleSubtree(d[a]);else for(d=d.children||d.childNodes,a=0;a<d.length;a++)this.styleSubtree(d[a])},E.prototype.styleElement=function(d){I(this);var a,b=d.localName;a=b?-1<b.indexOf("-")?b:d.getAttribute&&d.getAttribute("is")||"":d.is,(b=B[a])&&!e(b)&&((e(b)||b._applyShimValidatingVersion!==b._applyShimNextVersion)&&(this.prepareTemplate(b,a),f(b)),(d=d.shadowRoot)&&(d=d.querySelector("style"))&&(d.__cssRules=b._styleAst,d.textContent=h(b._styleAst)))},E.prototype.styleDocument=function(b){I(this),this.styleSubtree(document.body,b)},!window.ShadyCSS||!window.ShadyCSS.ScopingShim){var T=new E,X=window.ShadyCSS&&window.ShadyCSS.CustomStyleInterface;window.ShadyCSS={prepareTemplate:function(b,a){J(T),T.prepareTemplate(b,a)},styleSubtree:function(b,a){J(T),T.styleSubtree(b,a)},styleElement:function(b){J(T),T.styleElement(b)},styleDocument:function(b){J(T),T.styleDocument(b)},getComputedStyleValue:function(b,a){return(b=window.getComputedStyle(b).getPropertyValue(a))?b.trim():""},nativeCss:Y,nativeShadow:W},X&&(window.ShadyCSS.CustomStyleInterface=X)}window.ShadyCSS.ApplyShim=ba}).call(this);</script><script>(function(){'use strict';var a=function(){function a(){babelHelpers.classCallCheck(this,a),this._asyncModule=null,this._callback=null,this._timer=null}return babelHelpers.createClass(a,[{key:'setConfig',value:function(a,b){var c=this;this._asyncModule=a,this._callback=b,this._timer=this._asyncModule.run(function(){c._timer=null,c._callback()})}},{key:'cancel',value:function(){this.isActive()&&(this._asyncModule.cancel(this._timer),this._timer=null)}},{key:'flush',value:function(){this.isActive()&&(this.cancel(),this._callback())}},{key:'isActive',value:function(){return null!=this._timer}}],[{key:'debounce',value:function(b,c,d){return b instanceof a?b.cancel():b=new a,b.setConfig(c,d),b}}]),a}();Polymer.Debouncer=a})();</script><script>(function(){'use strict';function a(a){return-1<p.indexOf(a)}function b(b){return a(b)||'touchend'===b?void 0:j&&s&&Polymer.passiveTouchGestures?{passive:!0}:void 0}function c(a){for(var b,c=t?['click']:p,d=0;d<c.length;d++)b=c[d],a?document.addEventListener(b,v,!0):document.removeEventListener(b,v,!0)}function d(b){var c=b.type;if(!a(c))return!1;if('mousemove'===c){var d=void 0===b.buttons?1:b.buttons;return b instanceof window.MouseEvent&&!r&&(d=q[b.which]||0),!!(1&d)}var e=void 0===b.button?0:b.button;return 0===e}function f(a){if('click'===a.type){if(0===a.detail)return!0;var b=z._findOriginalTarget(a);if(!b.nodeType||b.nodeType!==Node.ELEMENT_NODE)return!0;var c=b.getBoundingClientRect(),d=a.pageX,e=a.pageY;return!(d>=c.left&&d<=c.right&&e>=c.top&&e<=c.bottom)}return!1}function e(a){var b='auto',c=a.composedPath&&a.composedPath();if(c)for(var d,e=0;e<c.length;e++)if(d=c[e],d[m]){b=d[m];break}return b}function g(a,b,c){a.movefn=b,a.upfn=c,document.addEventListener('mousemove',b),document.addEventListener('mouseup',c)}function h(a){document.removeEventListener('mousemove',a.movefn),document.removeEventListener('mouseup',a.upfn),a.movefn=null,a.upfn=null}var i=Math.abs,j='string'===typeof document.head.style.touchAction,k='__polymerGestures',l='__polymerGesturesHandled',m='__polymerGesturesTouchAction',n=25,o=5,p=['mousedown','mousemove','mouseup','click'],q=[0,1,4,2],r=function(){try{return 1===new MouseEvent('test',{buttons:1}).buttons}catch(a){return!1}}(),s=!1;(function(){try{var a=Object.defineProperty({},'passive',{get:function(){s=!0}});window.addEventListener('test',null,a),window.removeEventListener('test',null,a)}catch(a){}})();var t=navigator.userAgent.match(/iP(?:[oa]d|hone)|Android/),u=function(){};u.prototype.reset,u.prototype.mousedown,u.prototype.mousemove,u.prototype.mouseup,u.prototype.touchstart,u.prototype.touchmove,u.prototype.touchend,u.prototype.click;var v=function(a){var b=a.sourceCapabilities;if((!b||b.firesTouchEvents)&&(a[l]={skip:!0},'click'===a.type)){var c=a.composedPath&&a.composedPath();if(c)for(var d=0;d<c.length;d++)if(c[d]===w.mouse.target)return;a.preventDefault(),a.stopPropagation()}},w={mouse:{target:null,mouseIgnoreJob:null},touch:{x:0,y:0,id:-1,scrollDecided:!1}};document.addEventListener('touchend',function(a){w.mouse.mouseIgnoreJob||c(!0);w.mouse.target=a.composedPath()[0],w.mouse.mouseIgnoreJob=Polymer.Debouncer.debounce(w.mouse.mouseIgnoreJob,Polymer.Async.timeOut.after(2500),function(){c(),w.mouse.target=null,w.mouse.mouseIgnoreJob=null})},!!s&&{passive:!0});var z={gestures:{},recognizers:[],deepTargetFind:function(a,b){for(var c,d=document.elementFromPoint(a,b),e=d;e&&e.shadowRoot&&!window.ShadyDOM&&(c=e,e=e.shadowRoot.elementFromPoint(a,b),c!==e);)e&&(d=e);return d},_findOriginalTarget:function(a){if(a.composedPath){var b=a.composedPath();return 0<b.length?b[0]:a.target}return a.target},_handleNative:function(a){var b,c=a.type,d=a.currentTarget,e=d[k];if(e){var f=e[c];if(f){if(!a[l]&&(a[l]={},'touch'===c.slice(0,5))){a=a;var g=a.changedTouches[0];if('touchstart'===c&&1===a.touches.length&&(w.touch.id=g.identifier),w.touch.id!==g.identifier)return;j||'touchstart'!==c&&'touchmove'!==c||z._handleTouchAction(a)}if(b=a[l],!b.skip){for(var h,m=0;m<z.recognizers.length;m++)h=z.recognizers[m],f[h.name]&&!b[h.name]&&h.flow&&-1<h.flow.start.indexOf(a.type)&&h.reset&&h.reset();for(var i,n=0;n<z.recognizers.length;n++)i=z.recognizers[n],f[i.name]&&!b[i.name]&&(b[i.name]=!0,i[c](a))}}}},_handleTouchAction:function(a){var b=a.changedTouches[0],c=a.type;if('touchstart'===c)w.touch.x=b.clientX,w.touch.y=b.clientY,w.touch.scrollDecided=!1;else if('touchmove'===c){if(w.touch.scrollDecided)return;w.touch.scrollDecided=!0;var d=e(a),f=!1,g=i(w.touch.x-b.clientX),h=i(w.touch.y-b.clientY);a.cancelable&&('none'===d?f=!0:'pan-x'===d?f=h>g:'pan-y'===d&&(f=g>h)),f?a.preventDefault():z.prevent('track')}},addListener:function(a,b,c){return!!this.gestures[b]&&(this._add(a,b,c),!0)},removeListener:function(a,b,c){return!!this.gestures[b]&&(this._remove(a,b,c),!0)},_add:function(c,d,e){var f=this.gestures[d],g=f.deps,h=f.name,j=c[k];j||(c[k]=j={});for(var l,m,n=0;n<g.length;n++)(l=g[n],!(t&&a(l)&&'click'!==l))&&(m=j[l],m||(j[l]=m={_count:0}),0===m._count&&c.addEventListener(l,this._handleNative,b(l)),m[h]=(m[h]||0)+1,m._count=(m._count||0)+1);c.addEventListener(d,e),f.touchAction&&this.setTouchAction(c,f.touchAction)},_remove:function(a,c,d){var e=this.gestures[c],f=e.deps,g=e.name,h=a[k];if(h)for(var j,l,m=0;m<f.length;m++)j=f[m],l=h[j],l&&l[g]&&(l[g]=(l[g]||1)-1,l._count=(l._count||1)-1,0===l._count&&a.removeEventListener(j,this._handleNative,b(j)));a.removeEventListener(c,d)},register:function(a){this.recognizers.push(a);for(var b=0;b<a.emits.length;b++)this.gestures[a.emits[b]]=a},_findRecognizerByEvent:function(a){for(var b,c=0;c<this.recognizers.length;c++){b=this.recognizers[c];for(var d,e=0;e<b.emits.length;e++)if(d=b.emits[e],d===a)return b}return null},setTouchAction:function(a,b){j&&Polymer.Async.microTask.run(function(){a.style.touchAction=b}),a[m]=b},_fire:function(a,b,c){var d=new Event(b,{bubbles:!0,cancelable:!0,composed:!0});if(d.detail=c,a.dispatchEvent(d),d.defaultPrevented){var e=c.preventer||c.sourceEvent;e&&e.preventDefault&&e.preventDefault()}},prevent:function(a){var b=this._findRecognizerByEvent(a);b.info&&(b.info.prevent=!0)},resetMouseCanceller:function(){w.mouse.mouseIgnoreJob&&w.mouse.mouseIgnoreJob.flush()}};z.register({name:'downup',deps:['mousedown','touchstart','touchend'],flow:{start:['mousedown','touchstart'],end:['mouseup','touchend']},emits:['down','up'],info:{movefn:null,upfn:null},reset:function(){h(this.info)},mousedown:function(a){if(d(a)){var b=z._findOriginalTarget(a),c=this,e=function(a){d(a)||(c._fire('up',b,a),h(c.info))},f=function(a){d(a)&&c._fire('up',b,a),h(c.info)};g(this.info,e,f),this._fire('down',b,a)}},touchstart:function(a){this._fire('down',z._findOriginalTarget(a),a.changedTouches[0],a)},touchend:function(a){this._fire('up',z._findOriginalTarget(a),a.changedTouches[0],a)},_fire:function(a,b,c,d){z._fire(b,a,{x:c.clientX,y:c.clientY,sourceEvent:c,preventer:d,prevent:function(a){return z.prevent(a)}})}}),z.register({name:'track',touchAction:'none',deps:['mousedown','touchstart','touchmove','touchend'],flow:{start:['mousedown','touchstart'],end:['mouseup','touchend']},emits:['track'],info:{x:0,y:0,state:'start',started:!1,moves:[],addMove:function(a){this.moves.length>2&&this.moves.shift(),this.moves.push(a)},movefn:null,upfn:null,prevent:!1},reset:function(){this.info.state='start',this.info.started=!1,this.info.moves=[],this.info.x=0,this.info.y=0,this.info.prevent=!1,h(this.info)},hasMovedEnough:function(a,b){if(this.info.prevent)return!1;if(this.info.started)return!0;var c=i(this.info.x-a),d=i(this.info.y-b);return c>=o||d>=o},mousedown:function(a){if(d(a)){var b=z._findOriginalTarget(a),c=this,f=function(a){var e=a.clientX,f=a.clientY;c.hasMovedEnough(e,f)&&(c.info.state=c.info.started?'mouseup'===a.type?'end':'track':'start','start'===c.info.state&&z.prevent('tap'),c.info.addMove({x:e,y:f}),!d(a)&&(c.info.state='end',h(c.info)),c._fire(b,a),c.info.started=!0)},e=function(a){c.info.started&&f(a),h(c.info)};g(this.info,f,e),this.info.x=a.clientX,this.info.y=a.clientY}},touchstart:function(a){var b=a.changedTouches[0];this.info.x=b.clientX,this.info.y=b.clientY},touchmove:function(a){var b=z._findOriginalTarget(a),c=a.changedTouches[0],d=c.clientX,e=c.clientY;this.hasMovedEnough(d,e)&&('start'===this.info.state&&z.prevent('tap'),this.info.addMove({x:d,y:e}),this._fire(b,c),this.info.state='track',this.info.started=!0)},touchend:function(a){var b=z._findOriginalTarget(a),c=a.changedTouches[0];this.info.started&&(this.info.state='end',this.info.addMove({x:c.clientX,y:c.clientY}),this._fire(b,c,a))},_fire:function(a,b){var c,d=this.info.moves[this.info.moves.length-2],e=this.info.moves[this.info.moves.length-1],f=e.x-this.info.x,g=e.y-this.info.y,h=0;d&&(c=e.x-d.x,h=e.y-d.y),z._fire(a,'track',{state:this.info.state,x:b.clientX,y:b.clientY,dx:f,dy:g,ddx:c,ddy:h,sourceEvent:b,hover:function(){return z.deepTargetFind(b.clientX,b.clientY)}})}}),z.register({name:'tap',deps:['mousedown','click','touchstart','touchend'],flow:{start:['mousedown','touchstart'],end:['click','touchend']},emits:['tap'],info:{x:NaN,y:NaN,prevent:!1},reset:function(){this.info.x=NaN,this.info.y=NaN,this.info.prevent=!1},save:function(a){this.info.x=a.clientX,this.info.y=a.clientY},mousedown:function(a){d(a)&&this.save(a)},click:function(a){d(a)&&this.forward(a)},touchstart:function(a){this.save(a.changedTouches[0],a)},touchend:function(a){this.forward(a.changedTouches[0],a)},forward:function(a,b){var c=i(a.clientX-this.info.x),d=i(a.clientY-this.info.y),g=z._findOriginalTarget(b||a);!g||(isNaN(c)||isNaN(d)||c<=n&&d<=n||f(a))&&!this.info.prevent&&z._fire(g,'tap',{x:a.clientX,y:a.clientY,sourceEvent:a,preventer:b})}}),z.findOriginalTarget=z._findOriginalTarget,z.add=z.addListener,z.remove=z.removeListener,Polymer.Gestures=z})();</script><script>(function(){'use strict';var a=Polymer.Gestures;Polymer.GestureEventListeners=Polymer.dedupingMixin(function(b){var c=function(b){function c(){return babelHelpers.classCallCheck(this,c),babelHelpers.possibleConstructorReturn(this,(c.__proto__||Object.getPrototypeOf(c)).apply(this,arguments))}return babelHelpers.inherits(c,b),babelHelpers.createClass(c,[{key:'_addEventListenerToNode',value:function(b,d,e){a.addListener(b,d,e)||babelHelpers.get(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),'_addEventListenerToNode',this).call(this,b,d,e)}},{key:'_removeEventListenerFromNode',value:function(b,d,e){a.removeListener(b,d,e)||babelHelpers.get(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),'_removeEventListenerFromNode',this).call(this,b,d,e)}}]),c}(b);return c})})();</script><script>(function(){'use strict';function a(){j=document.documentElement.getAttribute('dir')}function b(a){if(!a.__autoDirOptOut){a.setAttribute('dir',j)}}function c(){a(),j=document.documentElement.getAttribute('dir');for(var c=0;c<g.length;c++)b(g[c])}function d(){h&&h.takeRecords().length&&c()}var e=/:host\(:dir\((ltr|rtl)\)\)/g,f=/([\s\w-#\.\[\]\*]*):dir\((ltr|rtl)\)/g,g=[],h=null,j='';Polymer.DirMixin=Polymer.dedupingMixin(function(i){h||(a(),h=new MutationObserver(c),h.observe(document.documentElement,{attributes:!0,attributeFilter:['dir']}));var j=Polymer.PropertyAccessors(i),k=function(a){function c(){babelHelpers.classCallCheck(this,c);var a=babelHelpers.possibleConstructorReturn(this,(c.__proto__||Object.getPrototypeOf(c)).call(this));return a.__autoDirOptOut=!1,a}return babelHelpers.inherits(c,a),babelHelpers.createClass(c,null,[{key:'_processStyleText',value:function(a,b){return a=babelHelpers.get(c.__proto__||Object.getPrototypeOf(c),'_processStyleText',this).call(this,a,b),a=this._replaceDirInCssText(a),a}},{key:'_replaceDirInCssText',value:function(a){var b=a;return b=b.replace(e,':host([dir="$1"])'),b=b.replace(f,':host([dir="$2"]) $1'),a!==b&&(this.__activateDir=!0),b}}]),babelHelpers.createClass(c,[{key:'ready',value:function(){babelHelpers.get(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),'ready',this).call(this),this.__autoDirOptOut=this.hasAttribute('dir')}},{key:'connectedCallback',value:function(){j.prototype.connectedCallback&&babelHelpers.get(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),'connectedCallback',this).call(this),this.constructor.__activateDir&&(d(),g.push(this),b(this))}},{key:'disconnectedCallback',value:function(){if(j.prototype.disconnectedCallback&&babelHelpers.get(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),'disconnectedCallback',this).call(this),this.constructor.__activateDir){var a=g.indexOf(this);-1<a&&g.splice(a,1)}}}]),c}(j);return k.__activateDir=!1,k})})();</script><script>(function(){'use strict';function a(a){window.HTMLImports?HTMLImports.whenReady(a):a()}Polymer.importHref=function(b,c,d,e){var f=document.head.querySelector('link[href="'+b+'"][import-href]');f||(f=document.createElement('link'),f.rel='import',f.href=b,f.setAttribute('import-href','')),e&&f.setAttribute('async','');var g=function(){f.removeEventListener('load',h),f.removeEventListener('error',i)},h=function(b){g(),f.__dynamicImportLoaded=!0,c&&a(function(){c(b)})},i=function(b){g(),f.parentNode&&f.parentNode.removeChild(f),d&&a(function(){d(b)})};return f.addEventListener('load',h),f.addEventListener('error',i),null==f.parentNode?document.head.appendChild(f):f.__dynamicImportLoaded&&f.dispatchEvent(new Event('load')),f}})();</script><script>(function(){'use strict';function a(){e=!0,requestAnimationFrame(function(){e=!1,b(f),setTimeout(function(){c(g)})})}function b(a){for(;a.length;)d(a.shift())}function c(a){for(var b=0,c=a.length;b<c;b++)d(a.shift())}function d(a){var b=a[0],c=a[1],d=a[2];try{c.apply(b,d)}catch(a){setTimeout(function(){throw a})}}var e=!1,f=[],g=[];Polymer.RenderStatus={beforeNextRender:function(b,c,d){e||a(),f.push([b,c,d])},afterNextRender:function(b,c,d){e||a(),g.push([b,c,d])},flush:function(){for(;f.length||g.length;)b(f),b(g);e=!1}}})();</script><script>(function(){'use strict';function a(){document.body.removeAttribute('unresolved')}window.WebComponents?window.addEventListener('WebComponentsReady',a):'interactive'===document.readyState||'complete'===document.readyState?a():window.addEventListener('DOMContentLoaded',a)})();</script><script>(function(){'use strict';function a(a,b,c){return{index:a,removed:b,addedCount:c}}function b(a,b,c,d,e,f){for(var h=f-e+1,k=c-b+1,l=Array(h),m=0;m<h;m++)l[m]=Array(k),l[m][0]=m;for(var i=0;i<k;i++)l[0][i]=i;for(var j=1;j<h;j++)for(var n=1;n<k;n++)if(g(a[b+n-1],d[e+j-1]))l[j][n]=l[j-1][n-1];else{var o=l[j-1][n]+1,p=l[j][n-1]+1;l[j][n]=o<p?o:p}return l}function c(a){for(var b=a.length-1,c=a[0].length-1,d=a[b][c],e=[];0<b||0<c;){if(0==b){e.push(l),c--;continue}if(0==c){e.push(m),b--;continue}var f=a[b-1][c-1],g=a[b-1][c],i=a[b][c-1],j=void 0;j=g<i?g<f?g:f:i<f?i:f,j==f?(f==d?e.push(h):(e.push(k),d=f),b--,c--):j==g?(e.push(m),b--,d=g):(e.push(l),c--,d=i)}return e.reverse(),e}function d(d,g,j,n,o,p){var q,r=0,s=0,t=Math.min(j-g,p-o);if(0==g&&0==o&&(r=e(d,n,t)),j==d.length&&p==n.length&&(s=f(d,n,t-r)),g+=r,o+=r,j-=s,p-=s,0==j-g&&0==p-o)return[];if(g==j){for(q=a(g,[],0);o<p;)q.removed.push(n[o++]);return[q]}if(o==p)return[a(g,[],j-g)];var u=c(b(d,g,j,n,o,p));q=void 0;for(var v=[],w=g,x=o,y=0;y<u.length;y++)switch(u[y]){case h:q&&(v.push(q),q=void 0),w++,x++;break;case k:q||(q=a(w,[],0)),q.addedCount++,w++,q.removed.push(n[x]),x++;break;case l:q||(q=a(w,[],0)),q.addedCount++,w++;break;case m:q||(q=a(w,[],0)),q.removed.push(n[x]),x++;}return q&&v.push(q),v}function e(a,b,c){for(var d=0;d<c;d++)if(!g(a[d],b[d]))return d;return c}function f(a,b,c){for(var d=a.length,e=b.length,f=0;f<c&&g(a[--d],b[--e]);)f++;return f}function g(a,b){return a===b}var h=0,k=1,l=2,m=3;Polymer.ArraySplice={calculateSplices:function(a,b){return d(a,0,a.length,b,0,b.length)}}})();</script><script>(function(){'use strict';function a(a){return'slot'===a.localName}var b=function(){function b(a,c){var d=this;babelHelpers.classCallCheck(this,b),this._shadyChildrenObserver=null,this._nativeChildrenObserver=null,this._connected=!1,this._target=a,this.callback=c,this._effectiveNodes=[],this._observer=null,this._scheduled=!1,this._boundSchedule=function(){d._schedule()},this.connect(),this._schedule()}return babelHelpers.createClass(b,null,[{key:'getFlattenedNodes',value:function(b){return a(b)?(b=b,b.assignedNodes({flatten:!0})):Array.from(b.childNodes).map(function(b){return a(b)?(b=b,b.assignedNodes({flatten:!0})):[b]}).reduce(function(c,a){return c.concat(a)},[])}}]),babelHelpers.createClass(b,[{key:'connect',value:function(){var b=this;a(this._target)?this._listenSlots([this._target]):this._target.children&&(this._listenSlots(this._target.children),window.ShadyDOM?this._shadyChildrenObserver=ShadyDOM.observeChildren(this._target,function(a){b._processMutations(a)}):(this._nativeChildrenObserver=new MutationObserver(function(a){b._processMutations(a)}),this._nativeChildrenObserver.observe(this._target,{childList:!0}))),this._connected=!0}},{key:'disconnect',value:function(){a(this._target)?this._unlistenSlots([this._target]):this._target.children&&(this._unlistenSlots(this._target.children),window.ShadyDOM&&this._shadyChildrenObserver?(ShadyDOM.unobserveChildren(this._shadyChildrenObserver),this._shadyChildrenObserver=null):this._nativeChildrenObserver&&(this._nativeChildrenObserver.disconnect(),this._nativeChildrenObserver=null)),this._connected=!1}},{key:'_schedule',value:function(){var a=this;this._scheduled||(this._scheduled=!0,Polymer.Async.microTask.run(function(){return a.flush()}))}},{key:'_processMutations',value:function(a){this._processSlotMutations(a),this.flush()}},{key:'_processSlotMutations',value:function(a){if(a)for(var b,c=0;c<a.length;c++)b=a[c],b.addedNodes&&this._listenSlots(b.addedNodes),b.removedNodes&&this._unlistenSlots(b.removedNodes)}},{key:'flush',value:function(){if(!this._connected)return!1;window.ShadyDOM&&ShadyDOM.flush(),this._nativeChildrenObserver?this._processSlotMutations(this._nativeChildrenObserver.takeRecords()):this._shadyChildrenObserver&&this._processSlotMutations(this._shadyChildrenObserver.takeRecords()),this._scheduled=!1;for(var a,b={target:this._target,addedNodes:[],removedNodes:[]},c=this.constructor.getFlattenedNodes(this._target),d=Polymer.ArraySplice.calculateSplices(c,this._effectiveNodes),e=0;e<d.length&&(a=d[e]);e++)for(var f,g=0;g<a.removed.length&&(f=a.removed[g]);g++)b.removedNodes.push(f);for(var h,i=0;i<d.length&&(h=d[i]);i++)for(var j=h.index;j<h.index+h.addedCount;j++)b.addedNodes.push(c[j]);this._effectiveNodes=c;var k=!1;return(b.addedNodes.length||b.removedNodes.length)&&(k=!0,this.callback.call(this._target,b)),k}},{key:'_listenSlots',value:function(b){for(var c,d=0;d<b.length;d++)c=b[d],a(c)&&c.addEventListener('slotchange',this._boundSchedule)}},{key:'_unlistenSlots',value:function(b){for(var c,d=0;d<b.length;d++)c=b[d],a(c)&&c.removeEventListener('slotchange',this._boundSchedule)}}]),b}();Polymer.FlattenedNodesObserver=b})();</script><script>(function(){'use strict';function a(){for(var a=!!b.length;b.length;)try{b.shift().flush()}catch(a){setTimeout(function(){throw a})}return a}var b=[];Polymer.enqueueDebouncer=function(a){b.push(a)},Polymer.flush=function(){var b,c;do b=window.ShadyDOM&&ShadyDOM.flush(),window.ShadyCSS&&window.ShadyCSS.ScopingShim&&window.ShadyCSS.ScopingShim.flush(),c=a();while(b||c)}})();</script><script>(function(){'use strict';var a=Element.prototype,b=a.matches||a.matchesSelector||a.mozMatchesSelector||a.msMatchesSelector||a.oMatchesSelector||a.webkitMatchesSelector,d=function(a,c){return b.call(a,c)},c=function(){function a(b){babelHelpers.classCallCheck(this,a),this.node=b}return babelHelpers.createClass(a,[{key:'observeNodes',value:function(a){return new Polymer.FlattenedNodesObserver(this.node,a)}},{key:'unobserveNodes',value:function(a){a.disconnect()}},{key:'notifyObserver',value:function(){}},{key:'deepContains',value:function(a){if(this.node.contains(a))return!0;for(var b=a,c=a.ownerDocument;b&&b!==c&&b!==this.node;)b=b.parentNode||b.host;return b===this.node}},{key:'getOwnerRoot',value:function(){return this.node.getRootNode()}},{key:'getDistributedNodes',value:function(){return'slot'===this.node.localName?this.node.assignedNodes({flatten:!0}):[]}},{key:'getDestinationInsertionPoints',value:function(){for(var a=[],b=this.node.assignedSlot;b;)a.push(b),b=b.assignedSlot;return a}},{key:'importNode',value:function(a,b){var c=this.node instanceof Document?this.node:this.node.ownerDocument;return c.importNode(a,b)}},{key:'getEffectiveChildNodes',value:function(){return Polymer.FlattenedNodesObserver.getFlattenedNodes(this.node)}},{key:'queryDistributedElements',value:function(a){for(var b,c=this.getEffectiveChildNodes(),e=[],f=0,g=c.length;f<g&&(b=c[f]);f++)b.nodeType===Node.ELEMENT_NODE&&d(b,a)&&e.push(b);return e}},{key:'activeElement',get:function(){var a=this.node;return void 0===a._activeElement?a.activeElement:a._activeElement}}]),a}();(function(a,b){for(var c=function(c){var d=b[c];a[d]=function(){return this.node[d].apply(this.node,arguments)}},d=0;d<b.length;d++)c(d)})(c.prototype,['cloneNode','appendChild','insertBefore','removeChild','replaceChild','setAttribute','removeAttribute','querySelector','querySelectorAll']),function(a,b){for(var c=function(c){var d=b[c];Object.defineProperty(a,d,{get:function(){var a=this;return a.node[d]},configurable:!0})},d=0;d<b.length;d++)c(d)}(c.prototype,['parentNode','firstChild','lastChild','nextSibling','previousSibling','firstElementChild','lastElementChild','nextElementSibling','previousElementSibling','childNodes','children','classList']),function(a,b){for(var c=function(c){var d=b[c];Object.defineProperty(a,d,{get:function(){var a=this;return a.node[d]},set:function(a){this.node[d]=a},configurable:!0})},d=0;d<b.length;d++)c(d)}(c.prototype,['textContent','innerHTML']);var e=function(){function a(b){babelHelpers.classCallCheck(this,a),this.event=b}return babelHelpers.createClass(a,[{key:'rootTarget',get:function(){return this.event.composedPath()[0]}},{key:'localTarget',get:function(){return this.event.target}},{key:'path',get:function(){return this.event.composedPath()}}]),a}();Polymer.DomApi=c,Polymer.DomApi.prototype.cloneNode,Polymer.DomApi.prototype.appendChild,Polymer.DomApi.prototype.insertBefore,Polymer.DomApi.prototype.removeChild,Polymer.DomApi.prototype.replaceChild,Polymer.DomApi.prototype.setAttribute,Polymer.DomApi.prototype.removeAttribute,Polymer.DomApi.prototype.querySelector,Polymer.DomApi.prototype.querySelectorAll,Polymer.dom=function(a){if(a=a||document,!a.__domApi){var b;b=a instanceof Event?new e(a):new c(a),a.__domApi=b}return a.__domApi},Polymer.dom.matchesSelector=d,Polymer.dom.flush=Polymer.flush,Polymer.dom.addDebouncer=Polymer.enqueueDebouncer})();</script><script>(function(){'use strict';var a=window.ShadyCSS;Polymer.LegacyElementMixin=Polymer.dedupingMixin(function(b){var c=Polymer.DirMixin(Polymer.GestureEventListeners(Polymer.ElementMixin(b))),d={x:'pan-x',y:'pan-y',none:'none',all:'auto'},e=function(b){function c(){babelHelpers.classCallCheck(this,c);var a=babelHelpers.possibleConstructorReturn(this,(c.__proto__||Object.getPrototypeOf(c)).call(this));return a.root=a,a.isAttached,a.__boundListeners,a._debouncers,a.created(),a._applyListeners(),a}return babelHelpers.inherits(c,b),babelHelpers.createClass(c,[{key:'created',value:function(){}},{key:'connectedCallback',value:function(){babelHelpers.get(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),'connectedCallback',this).call(this),this.isAttached=!0,this.attached()}},{key:'attached',value:function(){}},{key:'disconnectedCallback',value:function(){babelHelpers.get(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),'disconnectedCallback',this).call(this),this.isAttached=!1,this.detached()}},{key:'detached',value:function(){}},{key:'attributeChangedCallback',value:function(a,b,d){b!==d&&(babelHelpers.get(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),'attributeChangedCallback',this).call(this,a,b,d),this.attributeChanged(a,b,d))}},{key:'attributeChanged',value:function(){}},{key:'_initializeProperties',value:function(){var a=Object.getPrototypeOf(this);a.hasOwnProperty('__hasRegisterFinished')||(a.__hasRegisterFinished=!0,this._registered()),babelHelpers.get(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),'_initializeProperties',this).call(this)}},{key:'_registered',value:function(){}},{key:'ready',value:function(){this._ensureAttributes(),babelHelpers.get(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),'ready',this).call(this)}},{key:'_ensureAttributes',value:function(){}},{key:'_applyListeners',value:function(){}},{key:'serialize',value:function(a){return this._serializeValue(a)}},{key:'deserialize',value:function(a,b){return this._deserializeValue(a,b)}},{key:'reflectPropertyToAttribute',value:function(a,b,c){this._propertyToAttribute(a,b,c)}},{key:'serializeValueToAttribute',value:function(a,b,c){this._valueToNodeAttribute(c||this,a,b)}},{key:'extend',value:function(a,b){if(!(a&&b))return a||b;for(var c,d,e=Object.getOwnPropertyNames(b),f=0;f<e.length&&(c=e[f]);f++)d=Object.getOwnPropertyDescriptor(b,c),d&&Object.defineProperty(a,c,d);return a}},{key:'mixin',value:function(a,b){for(var c in b)a[c]=b[c];return a}},{key:'chainObject',value:function(a,b){return a&&b&&a!==b&&(a.__proto__=b),a}},{key:'instanceTemplate',value:function(a){var b=this.constructor._contentForTemplate(a),c=document.importNode(b,!0);return c}},{key:'fire',value:function(a,b,c){c=c||{},b=null===b||void 0===b?{}:b;var d=new Event(a,{bubbles:void 0===c.bubbles||c.bubbles,cancelable:!!c.cancelable,composed:void 0===c.composed||c.composed});d.detail=b;var e=c.node||this;return e.dispatchEvent(d),d}},{key:'listen',value:function(a,b,c){a=a||this;var d=this.__boundListeners||(this.__boundListeners=new WeakMap),e=d.get(a);e||(e={},d.set(a,e));var f=b+c;e[f]||(e[f]=this._addMethodEventListenerToNode(a,b,c,this))}},{key:'unlisten',value:function(a,b,c){a=a||this;var d=this.__boundListeners&&this.__boundListeners.get(a),e=b+c,f=d&&d[e];f&&(this._removeEventListenerFromNode(a,b,f),d[e]=null)}},{key:'setScrollDirection',value:function(a,b){Polymer.Gestures.setTouchAction(b||this,d[a]||'auto')}},{key:'$$',value:function(a){return this.root.querySelector(a)}},{key:'distributeContent',value:function(){window.ShadyDOM&&this.shadowRoot&&ShadyDOM.flush()}},{key:'getEffectiveChildNodes',value:function(){var a=this,b=Polymer.dom(a);return b.getEffectiveChildNodes()}},{key:'queryDistributedElements',value:function(a){var b=this,c=Polymer.dom(b);return c.queryDistributedElements(a)}},{key:'getEffectiveChildren',value:function(){var a=this.getEffectiveChildNodes();return a.filter(function(a){return a.nodeType===Node.ELEMENT_NODE})}},{key:'getEffectiveTextContent',value:function(){for(var a,b=this.getEffectiveChildNodes(),c=[],d=0;a=b[d];d++)a.nodeType!==Node.COMMENT_NODE&&c.push(a.textContent);return c.join('')}},{key:'queryEffectiveChildren',value:function(a){var b=this.queryDistributedElements(a);return b&&b[0]}},{key:'queryAllEffectiveChildren',value:function(a){return this.queryDistributedElements(a)}},{key:'getContentChildNodes',value:function(a){var b=this.root.querySelector(a||'slot');return b?Polymer.dom(b).getDistributedNodes():[]}},{key:'getContentChildren',value:function(a){var b=this.getContentChildNodes(a).filter(function(a){return a.nodeType===Node.ELEMENT_NODE});return b}},{key:'isLightDescendant',value:function(a){var b=this;return b!==a&&b.contains(a)&&b.getRootNode()===a.getRootNode()}},{key:'isLocalDescendant',value:function(a){return this.root===a.getRootNode()}},{key:'scopeSubtree',value:function(){}},{key:'getComputedStyleValue',value:function(b){return a.getComputedStyleValue(this,b)}},{key:'debounce',value:function(a,b,c){return this._debouncers=this._debouncers||{},this._debouncers[a]=Polymer.Debouncer.debounce(this._debouncers[a],0<c?Polymer.Async.timeOut.after(c):Polymer.Async.microTask,b.bind(this))}},{key:'isDebouncerActive',value:function(a){this._debouncers=this._debouncers||{};var b=this._debouncers[a];return!!(b&&b.isActive())}},{key:'flushDebouncer',value:function(a){this._debouncers=this._debouncers||{};var b=this._debouncers[a];b&&b.flush()}},{key:'cancelDebouncer',value:function(a){this._debouncers=this._debouncers||{};var b=this._debouncers[a];b&&b.cancel()}},{key:'async',value:function(a,b){return 0<b?Polymer.Async.timeOut.run(a.bind(this),b):~Polymer.Async.microTask.run(a.bind(this))}},{key:'cancelAsync',value:function(a){0>a?Polymer.Async.microTask.cancel(~a):Polymer.Async.timeOut.cancel(a)}},{key:'create',value:function(a,b){var c=document.createElement(a);if(b)if(c.setProperties)c.setProperties(b);else for(var d in b)c[d]=b[d];return c}},{key:'importHref',value:function(a,b,c,d){var e=b?b.bind(this):null,f=c?c.bind(this):null;return Polymer.importHref(a,e,f,d)}},{key:'elementMatches',value:function(a,b){return Polymer.dom.matchesSelector(b||this,a)}},{key:'toggleAttribute',value:function(a,b,c){c=c||this,1==arguments.length&&(b=!c.hasAttribute(a)),b?c.setAttribute(a,''):c.removeAttribute(a)}},{key:'toggleClass',value:function(a,b,c){c=c||this,1==arguments.length&&(b=!c.classList.contains(a)),b?c.classList.add(a):c.classList.remove(a)}},{key:'transform',value:function(a,b){b=b||this,b.style.webkitTransform=a,b.style.transform=a}},{key:'translate3d',value:function(a,b,c,d){d=d||this,this.transform('translate3d('+a+','+b+','+c+')',d)}},{key:'arrayDelete',value:function(a,b){var c;if(!Array.isArray(a)){var d=Polymer.Path.get(this,a);if(c=d.indexOf(b),0<=c)return this.splice(a,c,1)}else if(c=a.indexOf(b),0<=c)return a.splice(c,1);return null}},{key:'_logger',value:function(a,b){var c;Array.isArray(b)&&1===b.length&&Array.isArray(b[0])&&(b=b[0]),'log'===a||'warn'===a||'error'===a?(c=console)[a].apply(c,babelHelpers.toConsumableArray(b)):void 0}},{key:'_log',value:function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];this._logger('log',b)}},{key:'_warn',value:function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];this._logger('warn',b)}},{key:'_error',value:function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];this._logger('error',b)}},{key:'_logf',value:function(a){for(var b=arguments.length,c=Array(1<b?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];return['[%s::%s]',this.is,a].concat(c)}},{key:'domHost',get:function(){var a=this.getRootNode();return a instanceof DocumentFragment?a.host:a}}]),c}(c);return e.prototype.is='',e})})();</script><script>(function(){'use strict';function a(a,b){if(!a)return b=b,b;b=Polymer.LegacyElementMixin(b),Array.isArray(a)||(a=[a]);var e=b.prototype.behaviors;return a=d(a,null,e),b=c(a,b),e&&(a=e.concat(a)),b.prototype.behaviors=a,b}function c(a,d){for(var f,b=0;b<a.length;b++)f=a[b],f&&(d=Array.isArray(f)?c(f,d):e(f,d));return d}function d(a,c,e){c=c||[];for(var f,b=a.length-1;0<=b;b--)f=a[b],f?Array.isArray(f)?d(f,c):0>c.indexOf(f)&&(!e||0>e.indexOf(f))&&c.unshift(f):console.warn('behavior is null, check for missing or 404 import');return c}function e(c,a){var d=function(b){function d(){return babelHelpers.classCallCheck(this,d),babelHelpers.possibleConstructorReturn(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments))}return babelHelpers.inherits(d,b),babelHelpers.createClass(d,[{key:'created',value:function(){babelHelpers.get(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),'created',this).call(this),c.created&&c.created.call(this)}},{key:'_registered',value:function(){babelHelpers.get(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),'_registered',this).call(this),c.beforeRegister&&c.beforeRegister.call(Object.getPrototypeOf(this)),c.registered&&c.registered.call(Object.getPrototypeOf(this))}},{key:'_applyListeners',value:function(){if(babelHelpers.get(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),'_applyListeners',this).call(this),c.listeners)for(var a in c.listeners)this._addMethodEventListenerToNode(this,a,c.listeners[a])}},{key:'_ensureAttributes',value:function(){if(c.hostAttributes)for(var b in c.hostAttributes)this._ensureAttribute(b,c.hostAttributes[b]);babelHelpers.get(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),'_ensureAttributes',this).call(this)}},{key:'ready',value:function(){babelHelpers.get(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),'ready',this).call(this),c.ready&&c.ready.call(this)}},{key:'attached',value:function(){babelHelpers.get(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),'attached',this).call(this),c.attached&&c.attached.call(this)}},{key:'detached',value:function(){babelHelpers.get(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),'detached',this).call(this),c.detached&&c.detached.call(this)}},{key:'attributeChanged',value:function(a,b,e){babelHelpers.get(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),'attributeChanged',this).call(this,a,b,e),c.attributeChanged&&c.attributeChanged.call(this,a,b,e)}}],[{key:'properties',get:function(){return c.properties}},{key:'observers',get:function(){return c.observers}},{key:'template',get:function(){return c._template||Polymer.DomModule&&Polymer.DomModule.import(this.is,'template')||a.template||this.prototype._template||null}}]),d}(a);for(var e in d.generatedFrom=c,c)if(!(e in b)){var f=Object.getOwnPropertyDescriptor(c,e);f&&Object.defineProperty(d.prototype,e,f)}return d}var b={attached:!0,detached:!0,ready:!0,created:!0,beforeRegister:!0,registered:!0,attributeChanged:!0,behaviors:!0};Polymer.Class=function(b){b||console.warn('Polymer.Class requires `info` argument');var c=e(b,b.behaviors?a(b.behaviors,HTMLElement):Polymer.LegacyElementMixin(HTMLElement));return c.is=b.is,c},Polymer.mixinBehaviors=a})();</script><script>(function(){'use strict';window.Polymer._polymerFn=function(a){var b;return b='function'===typeof a?a:Polymer.Class(a),customElements.define(b.is,b),b}})();</script><script>(function(){'use strict';function a(a,b,c,d,e){var f;e&&(f='object'===('undefined'===typeof c?'undefined':babelHelpers.typeof(c))&&null!==c,f&&(d=a.__dataTemp[b]));var g=d!==c&&(d===d||c===c);return f&&g&&(a.__dataTemp[b]=c),g}Polymer.MutableData=Polymer.dedupingMixin(function(b){var c=function(b){function c(){return babelHelpers.classCallCheck(this,c),babelHelpers.possibleConstructorReturn(this,(c.__proto__||Object.getPrototypeOf(c)).apply(this,arguments))}return babelHelpers.inherits(c,b),babelHelpers.createClass(c,[{key:'_shouldPropertyChange',value:function(b,c,d){return a(this,b,c,d,!0)}}]),c}(b);return c.prototype.mutableData=!1,c}),Polymer.OptionalMutableData=Polymer.dedupingMixin(function(b){var c=function(b){function c(){return babelHelpers.classCallCheck(this,c),babelHelpers.possibleConstructorReturn(this,(c.__proto__||Object.getPrototypeOf(c)).apply(this,arguments))}return babelHelpers.inherits(c,b),babelHelpers.createClass(c,[{key:'_shouldPropertyChange',value:function(b,c,d){return a(this,b,c,d,this.mutableData)}}],[{key:'properties',get:function(){return{mutableData:Boolean}}}]),c}(b);return c}),Polymer.MutableData._mutablePropertyChange=a})();</script><script>(function(){'use strict';function a(){return j}function b(a,b){j=a,Object.setPrototypeOf(a,b.prototype),new b,j=null}function c(a){var b=a.__dataHost;return b&&b._methodHost||b}function d(a,b,c){var d=c.mutableData?o:n,e=function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return babelHelpers.inherits(b,a),b}(d);return e.prototype.__templatizeOptions=c,e.prototype._bindTemplate(a),g(e,a,b,c),e}function e(a,c,d){var e=d.forwardHostProp;if(e){var g=c.templatizeTemplateClass;if(!g){var h=d.mutableData?l:k;g=c.templatizeTemplateClass=function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return babelHelpers.inherits(b,a),b}(h);var i=c.hostProps;for(var j in i)g.prototype._addPropertyEffect('_host_'+j,g.prototype.PROPERTY_EFFECT_TYPES.PROPAGATE,{fn:f(j,e)}),g.prototype._createNotifyingProperty('_host_'+j)}b(a,g),a.__dataProto&&Object.assign(a.__data,a.__dataProto),a.__dataTemp={},a.__dataPending=null,a.__dataOld=null,a._enableProperties()}}function f(a,b){return function(a,c,d){b.call(a.__templatizeOwner,c.substring(6),d[c])}}function g(a,b,c,d){var e=c.hostProps||{};for(var f in d.instanceProps){delete e[f];var g=d.notifyInstanceProp;g&&a.prototype._addPropertyEffect(f,a.prototype.PROPERTY_EFFECT_TYPES.NOTIFY,{fn:h(f,g)})}if(d.forwardHostProp&&b.__dataHost)for(var j in e)a.prototype._addPropertyEffect(j,a.prototype.PROPERTY_EFFECT_TYPES.NOTIFY,{fn:i()})}function h(a,b){return function(a,c,d){b.call(a.__templatizeOwner,a,c,d[c])}}function i(){return function(a,b,c){a.__dataHost._setPendingPropertyOrPath('_host_'+b,c[b],!0,!0)}}var j=null;a.prototype=Object.create(HTMLTemplateElement.prototype,{constructor:{value:a,writable:!0}});var k=Polymer.PropertyEffects(a),l=Polymer.MutableData(k),m=Polymer.PropertyEffects(function(){function a(){babelHelpers.classCallCheck(this,a)}return a}()),n=function(a){function b(a){babelHelpers.classCallCheck(this,b);var c=babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));c._configureProperties(a),c.root=c._stampTemplate(c.__dataHost);for(var d=c.children=[],e=c.root.firstChild;e;e=e.nextSibling)d.push(e),e.__templatizeInstance=c;c.__templatizeOwner&&c.__templatizeOwner.__hideTemplateChildren__&&c._showHideChildren(!0);var f=c.__templatizeOptions;return(a&&f.instanceProps||!f.instanceProps)&&c._enableProperties(),c}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:'_configureProperties',value:function(a){var b=this.__templatizeOptions;if(b.forwardHostProp)for(var c in this.__hostProps)this._setPendingProperty(c,this.__dataHost['_host_'+c]);for(var d in a)this._setPendingProperty(d,a[d])}},{key:'forwardHostProp',value:function(a,b){this._setPendingPropertyOrPath(a,b,!1,!0)&&this.__dataHost._enqueueClient(this)}},{key:'_addEventListenerToNode',value:function(a,b,c){var d=this;if(this._methodHost&&this.__templatizeOptions.parentModel)this._methodHost._addEventListenerToNode(a,b,function(a){a.model=d,c(a)});else{var e=this.__dataHost.__dataHost;e&&e._addEventListenerToNode(a,b,c)}}},{key:'_showHideChildren',value:function(a){for(var b,d=this.children,c=0;c<d.length;c++){if(b=d[c],!!a!=!!b.__hideTemplateChildren__)if(b.nodeType===Node.TEXT_NODE)a?(b.__polymerTextContent__=b.textContent,b.textContent=''):b.textContent=b.__polymerTextContent__;else if('slot'!==b.localName)b.style&&(a?(b.__polymerDisplay__=b.style.display,b.style.display='none'):b.style.display=b.__polymerDisplay__);else if(a)b.__polymerReplaced__=document.createComment('hidden-slot'),b.parentNode.replaceChild(b.__polymerReplaced__,b);else{var e=b.__polymerReplaced__;e&&e.parentNode.replaceChild(b,e)}b.__hideTemplateChildren__=a,b._showHideChildren&&b._showHideChildren(a)}}},{key:'_setUnmanagedPropertyToNode',value:function(a,c,d){a.__hideTemplateChildren__&&a.nodeType==Node.TEXT_NODE&&'textContent'==c?a.__polymerTextContent__=d:babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),'_setUnmanagedPropertyToNode',this).call(this,a,c,d)}},{key:'dispatchEvent',value:function(){}},{key:'parentModel',get:function(){var a=this.__parentModel;if(!a){var b;a=this;do a=a.__dataHost.__dataHost;while((b=a.__templatizeOptions)&&!b.parentModel);this.__parentModel=a}return a}}]),b}(m);n.prototype.__dataHost,n.prototype.__templatizeOptions,n.prototype._methodHost,n.prototype.__templatizeOwner,n.prototype.__hostProps;var o=Polymer.MutableData(n);Polymer.Templatize={templatize:function(a,b,f){if(f=f||{},a.__templatizeOwner)throw new Error('A <template> can only be templatized once');a.__templatizeOwner=b;var g=b?b.constructor:n,h=g._parseTemplate(a),i=h.templatizeInstanceClass;i||(i=d(a,h,f),h.templatizeInstanceClass=i),e(a,h,f);var j=function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return babelHelpers.inherits(b,a),b}(i);return j.prototype._methodHost=c(a),j.prototype.__dataHost=a,j.prototype.__templatizeOwner=b,j.prototype.__hostProps=h.hostProps,j=j,j},modelForElement:function(a,b){for(var c;b;)if(!(c=b.__templatizeInstance))b=b.parentNode;else if(c.__dataHost!=a)b=c.__dataHost;else return c;return null}},Polymer.TemplateInstanceBase=n})();</script><script>(function(){'use strict';Polymer.TemplateInstanceBase;Polymer.Templatizer={templatize:function(a,b){this._templatizerTemplate=a,this.ctor=Polymer.Templatize.templatize(a,this,{mutableData:!!b,parentModel:this._parentModel,instanceProps:this._instanceProps,forwardHostProp:this._forwardHostPropV2,notifyInstanceProp:this._notifyInstancePropV2})},stamp:function(a){return new this.ctor(a)},modelForElement:function(a){return Polymer.Templatize.modelForElement(this._templatizerTemplate,a)}}})();</script><script>(function(){'use strict';var a=Polymer.GestureEventListeners(Polymer.OptionalMutableData(Polymer.PropertyEffects(HTMLElement))),b=function(a){function b(){babelHelpers.classCallCheck(this,b);var a=babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return a.root=null,a.$=null,a.__children=null,a}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,null,[{key:'observedAttributes',get:function(){return['mutable-data']}}]),babelHelpers.createClass(b,[{key:'attributeChangedCallback',value:function(){this.mutableData=!0}},{key:'connectedCallback',value:function(){this.style.display='none',this.render()}},{key:'disconnectedCallback',value:function(){this.__removeChildren()}},{key:'__insertChildren',value:function(){this.parentNode.insertBefore(this.root,this)}},{key:'__removeChildren',value:function(){if(this.__children)for(var a=0;a<this.__children.length;a++)this.root.appendChild(this.__children[a])}},{key:'render',value:function(){var a,b=this;if(!this.__children){if(a=a||this.querySelector('template'),!a){var c=new MutationObserver(function(){if(a=b.querySelector('template'),a)c.disconnect(),b.render();else throw new Error('dom-bind requires a <template> child')});return void c.observe(this,{childList:!0})}this.root=this._stampTemplate(a),this.$=this.root.$,this.__children=[];for(var d=this.root.firstChild;d;d=d.nextSibling)this.__children[this.__children.length]=d;this._enableProperties()}this.__insertChildren(),this.dispatchEvent(new CustomEvent('dom-change',{bubbles:!0,composed:!0}))}}]),b}(a);customElements.define('dom-bind',b),Polymer.DomBind=b})();</script><script>(function(){'use strict';var a=Polymer.TemplateInstanceBase,b=Polymer.OptionalMutableData(Polymer.Element),c=function(a){function b(){babelHelpers.classCallCheck(this,b);var a=babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return a.__instances=[],a.__limit=Infinity,a.__pool=[],a.__renderDebouncer=null,a.__itemsIdxToInstIdx={},a.__chunkCount=null,a.__lastChunkTime=null,a.__sortFn=null,a.__filterFn=null,a.__observePaths=null,a.__ctor=null,a.__isDetached=!0,a.template=null,a}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,null,[{key:'is',get:function(){return'dom-repeat'}},{key:'template',get:function(){return null}},{key:'properties',get:function(){return{items:{type:Array},as:{type:String,value:'item'},indexAs:{type:String,value:'index'},itemsIndexAs:{type:String,value:'itemsIndex'},sort:{type:Function,observer:'__sortChanged'},filter:{type:Function,observer:'__filterChanged'},observe:{type:String,observer:'__observeChanged'},delay:Number,renderedItemCount:{type:Number,notify:!0,readOnly:!0},initialCount:{type:Number,observer:'__initializeChunking'},targetFramerate:{type:Number,value:20},_targetFrameTime:{type:Number,computed:'__computeFrameTime(targetFramerate)'}}}},{key:'observers',get:function(){return['__itemsChanged(items.*)']}}]),babelHelpers.createClass(b,[{key:'disconnectedCallback',value:function(){babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),'disconnectedCallback',this).call(this),this.__isDetached=!0;for(var a=0;a<this.__instances.length;a++)this.__detachInstance(a)}},{key:'connectedCallback',value:function(){if(babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),'connectedCallback',this).call(this),this.style.display='none',this.__isDetached){this.__isDetached=!1;for(var a=this.parentNode,c=0;c<this.__instances.length;c++)this.__attachInstance(c,a)}}},{key:'__ensureTemplatized',value:function(){var a=this;if(!this.__ctor){var b=this.template=this.querySelector('template');if(!b){var c=new MutationObserver(function(){if(a.querySelector('template'))c.disconnect(),a.__render();else throw new Error('dom-repeat requires a <template> child')});return c.observe(this,{childList:!0}),!1}var d={};d[this.as]=!0,d[this.indexAs]=!0,d[this.itemsIndexAs]=!0,this.__ctor=Polymer.Templatize.templatize(b,this,{mutableData:this.mutableData,parentModel:!0,instanceProps:d,forwardHostProp:function(a,b){for(var c,d=this.__instances,e=0;e<d.length&&(c=d[e]);e++)c.forwardHostProp(a,b)},notifyInstanceProp:function(a,b,c){if(Polymer.Path.matches(this.as,b)){var d=a[this.itemsIndexAs];b==this.as&&(this.items[d]=c);var e=Polymer.Path.translate(this.as,'items.'+d,b);this.notifyPath(e,c)}}})}return!0}},{key:'__getMethodHost',value:function(){return this.__dataHost._methodHost||this.__dataHost}},{key:'__functionFromPropertyValue',value:function(a){if('string'===typeof a){var b=this.__getMethodHost();return function(){return b[a].apply(b,arguments)}}return a}},{key:'__sortChanged',value:function(a){this.__sortFn=this.__functionFromPropertyValue(a),this.items&&this.__debounceRender(this.__render)}},{key:'__filterChanged',value:function(a){this.__filterFn=this.__functionFromPropertyValue(a),this.items&&this.__debounceRender(this.__render)}},{key:'__computeFrameTime',value:function(a){return Math.ceil(1e3/a)}},{key:'__initializeChunking',value:function(){this.initialCount&&(this.__limit=this.initialCount,this.__chunkCount=this.initialCount,this.__lastChunkTime=performance.now())}},{key:'__tryRenderChunk',value:function(){this.items&&this.__limit<this.items.length&&this.__debounceRender(this.__requestRenderChunk)}},{key:'__requestRenderChunk',value:function(){var a=this;requestAnimationFrame(function(){return a.__renderChunk()})}},{key:'__renderChunk',value:function(){var a=performance.now(),b=this._targetFrameTime/(a-this.__lastChunkTime);this.__chunkCount=Math.round(this.__chunkCount*b)||1,this.__limit+=this.__chunkCount,this.__lastChunkTime=a,this.__debounceRender(this.__render)}},{key:'__observeChanged',value:function(){this.__observePaths=this.observe&&this.observe.replace('.*','.').split(' ')}},{key:'__itemsChanged',value:function(a){this.items&&!Array.isArray(this.items)&&console.warn('dom-repeat expected array for `items`, found',this.items),this.__handleItemPath(a.path,a.value)||(this.__initializeChunking(),this.__debounceRender(this.__render))}},{key:'__handleObservedPaths',value:function(a){if(this.__sortFn||this.__filterFn)if(!a)this.__debounceRender(this.__render,this.delay);else if(this.__observePaths)for(var b=this.__observePaths,c=0;c<b.length;c++)0===a.indexOf(b[c])&&this.__debounceRender(this.__render,this.delay)}},{key:'__debounceRender',value:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;this.__renderDebouncer=Polymer.Debouncer.debounce(this.__renderDebouncer,0<b?Polymer.Async.timeOut.after(b):Polymer.Async.microTask,a.bind(this)),Polymer.enqueueDebouncer(this.__renderDebouncer)}},{key:'render',value:function(){this.__debounceRender(this.__render),Polymer.flush()}},{key:'__render',value:function(){this.__ensureTemplatized()&&(this.__applyFullRefresh(),this.__pool.length=0,this._setRenderedItemCount(this.__instances.length),this.dispatchEvent(new CustomEvent('dom-change',{bubbles:!0,composed:!0})),this.__tryRenderChunk())}},{key:'__applyFullRefresh',value:function(){for(var c=this,d=this.items||[],a=Array(d.length),b=0;b<d.length;b++)a[b]=b;this.__filterFn&&(a=a.filter(function(a,b,e){return c.__filterFn(d[a],b,e)})),this.__sortFn&&a.sort(function(e,a){return c.__sortFn(d[e],d[a])});for(var e=this.__itemsIdxToInstIdx={},f=0,g=Math.min(a.length,this.__limit);f<g;f++){var h=this.__instances[f],i=a[f],j=d[i];e[i]=f,h?(h._setPendingProperty(this.as,j),h._setPendingProperty(this.indexAs,f),h._setPendingProperty(this.itemsIndexAs,i),h._flushProperties()):this.__insertInstance(j,f,i)}for(var k=this.__instances.length-1;k>=f;k--)this.__detachAndRemoveInstance(k)}},{key:'__detachInstance',value:function(a){for(var b,c=this.__instances[a],d=0;d<c.children.length;d++)b=c.children[d],c.root.appendChild(b);return c}},{key:'__attachInstance',value:function(a,b){var c=this.__instances[a];b.insertBefore(c.root,this)}},{key:'__detachAndRemoveInstance',value:function(a){var b=this.__detachInstance(a);b&&this.__pool.push(b),this.__instances.splice(a,1)}},{key:'__stampInstance',value:function(a,b,c){var d={};return d[this.as]=a,d[this.indexAs]=b,d[this.itemsIndexAs]=c,new this.__ctor(d)}},{key:'__insertInstance',value:function(a,b,c){var d=this.__pool.pop();d?(d._setPendingProperty(this.as,a),d._setPendingProperty(this.indexAs,b),d._setPendingProperty(this.itemsIndexAs,c),d._flushProperties()):d=this.__stampInstance(a,b,c);var e=this.__instances[b+1],f=e?e.children[0]:this;return this.parentNode.insertBefore(d.root,f),this.__instances[b]=d,d}},{key:'_showHideChildren',value:function(a){for(var b=0;b<this.__instances.length;b++)this.__instances[b]._showHideChildren(a)}},{key:'__handleItemPath',value:function(a,b){var c=a.slice(6),d=c.indexOf('.'),e=0>d?c:c.substring(0,d);if(e==parseInt(e,10)){var f=0>d?'':c.substring(d+1);this.__handleObservedPaths(f);var g=this.__itemsIdxToInstIdx[e],h=this.__instances[g];if(h){var i=this.as+(f?'.'+f:'');h._setPendingPropertyOrPath(i,b,!1,!0),h._flushProperties()}return!0}}},{key:'itemForElement',value:function(a){var b=this.modelForElement(a);return b&&b[this.as]}},{key:'indexForElement',value:function(a){var b=this.modelForElement(a);return b&&b[this.indexAs]}},{key:'modelForElement',value:function(a){return Polymer.Templatize.modelForElement(this.template,a)}}]),b}(b);customElements.define(c.is,c),Polymer.DomRepeat=c})();</script><script>(function(){'use strict';var a=function(a){function b(){babelHelpers.classCallCheck(this,b);var a=babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return a.__renderDebouncer=null,a.__invalidProps=null,a.__instance=null,a._lastIf=!1,a.__ctor=null,a}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,null,[{key:'is',get:function(){return'dom-if'}},{key:'template',get:function(){return null}},{key:'properties',get:function(){return{if:{type:Boolean,observer:'__debounceRender'},restamp:{type:Boolean,observer:'__debounceRender'}}}}]),babelHelpers.createClass(b,[{key:'__debounceRender',value:function(){var a=this;this.__renderDebouncer=Polymer.Debouncer.debounce(this.__renderDebouncer,Polymer.Async.microTask,function(){return a.__render()}),Polymer.enqueueDebouncer(this.__renderDebouncer)}},{key:'disconnectedCallback',value:function(){babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),'disconnectedCallback',this).call(this),this.parentNode&&(this.parentNode.nodeType!=Node.DOCUMENT_FRAGMENT_NODE||this.parentNode.host)||this.__teardownInstance()}},{key:'connectedCallback',value:function(){babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),'connectedCallback',this).call(this),this.style.display='none',this.if&&this.__debounceRender()}},{key:'render',value:function(){Polymer.flush()}},{key:'__render',value:function(){if(this.if){if(!this.__ensureInstance())return;this._showHideChildren()}else this.restamp&&this.__teardownInstance();!this.restamp&&this.__instance&&this._showHideChildren(),this.if!=this._lastIf&&(this.dispatchEvent(new CustomEvent('dom-change',{bubbles:!0,composed:!0})),this._lastIf=this.if)}},{key:'__ensureInstance',value:function(){var a=this,b=this.parentNode;if(b){if(!this.__ctor){var c=this.querySelector('template');if(!c){var d=new MutationObserver(function(){if(a.querySelector('template'))d.disconnect(),a.__render();else throw new Error('dom-if requires a <template> child')});return d.observe(this,{childList:!0}),!1}this.__ctor=Polymer.Templatize.templatize(c,this,{mutableData:!0,forwardHostProp:function(a,b){this.__instance&&(this.if?this.__instance.forwardHostProp(a,b):(this.__invalidProps=this.__invalidProps||Object.create(null),this.__invalidProps[Polymer.Path.root(a)]=!0))}})}if(!this.__instance)this.__instance=new this.__ctor,b.insertBefore(this.__instance.root,this);else{this.__syncHostProperties();var e=this.__instance.children;if(e&&e.length){var f=this.previousSibling;if(f!==e[e.length-1])for(var g,h=0;h<e.length&&(g=e[h]);h++)b.insertBefore(g,this)}}}return!0}},{key:'__syncHostProperties',value:function(){var a=this.__invalidProps;if(a){for(var b in a)this.__instance._setPendingProperty(b,this.__dataHost[b]);this.__invalidProps=null,this.__instance._flushProperties()}}},{key:'__teardownInstance',value:function(){if(this.__instance){var a=this.__instance.children;if(a&&a.length)for(var b,c=a[0].parentNode,d=0;d<a.length&&(b=a[d]);d++)c.removeChild(b);this.__instance=null,this.__invalidProps=null}}},{key:'_showHideChildren',value:function(){var a=this.__hideTemplateChildren__||!this.if;this.__instance&&this.__instance._showHideChildren(a)}}]),b}(Polymer.Element);customElements.define(a.is,a),Polymer.DomIf=a})();</script><script>(function(){'use strict';var a=Polymer.dedupingMixin(function(a){var b=Polymer.ElementMixin(a),c=function(a){function b(){babelHelpers.classCallCheck(this,b);var a=babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return a.__lastItems=null,a.__lastMulti=null,a.__selectedMap=null,a}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,null,[{key:'properties',get:function(){return{items:{type:Array},multi:{type:Boolean,value:!1},selected:{type:Object,notify:!0},selectedItem:{type:Object,notify:!0},toggle:{type:Boolean,value:!1}}}},{key:'observers',get:function(){return['__updateSelection(multi, items.*)']}}]),babelHelpers.createClass(b,[{key:'__updateSelection',value:function(a,b){var c=b.path;if('items'==c){var d=b.base||[],e=this.__lastItems,f=this.__lastMulti;if(a!==f&&this.clearSelection(),e){var g=Polymer.ArraySplice.calculateSplices(d,e);this.__applySplices(g)}this.__lastItems=d,this.__lastMulti=a}else if('items.splices'==b.path)this.__applySplices(b.value.indexSplices);else{var h=c.slice(6),i=parseInt(h,10);0>h.indexOf('.')&&h==i&&this.__deselectChangedIdx(i)}}},{key:'__applySplices',value:function(a){for(var b=this,c=this.__selectedMap,d=function(d){var e=a[d];c.forEach(function(a,b){a<e.index||(a>=e.index+e.removed.length?c.set(b,a+e.addedCount-e.removed.length):c.set(b,-1))});for(var f,g=0;g<e.addedCount;g++)f=e.index+g,c.has(b.items[f])&&c.set(b.items[f],f)},e=0;e<a.length;e++)d(e);this.__updateLinks();var f=0;c.forEach(function(a,d){0>a?(b.multi?b.splice('selected',f,1):b.selected=b.selectedItem=null,c.delete(d)):f++})}},{key:'__updateLinks',value:function(){var a=this;if(this.__dataLinkedPaths={},this.multi){var b=0;this.__selectedMap.forEach(function(c){0<=c&&a.linkPaths('items.'+c,'selected.'+b++)})}else this.__selectedMap.forEach(function(b){a.linkPaths('selected','items.'+b),a.linkPaths('selectedItem','items.'+b)})}},{key:'clearSelection',value:function(){this.__dataLinkedPaths={},this.__selectedMap=new Map,this.selected=this.multi?[]:null,this.selectedItem=null}},{key:'isSelected',value:function(a){return this.__selectedMap.has(a)}},{key:'isIndexSelected',value:function(a){return this.isSelected(this.items[a])}},{key:'__deselectChangedIdx',value:function(a){var b=this,c=this.__selectedIndexForItemIndex(a);if(0<=c){var d=0;this.__selectedMap.forEach(function(a,e){c==d++&&b.deselect(e)})}}},{key:'__selectedIndexForItemIndex',value:function(a){var b=this.__dataLinkedPaths['items.'+a];if(b)return parseInt(b.slice(9),10)}},{key:'deselect',value:function(a){var b=this.__selectedMap.get(a);if(0<=b){this.__selectedMap.delete(a);var c;this.multi&&(c=this.__selectedIndexForItemIndex(b)),this.__updateLinks(),this.multi?this.splice('selected',c,1):this.selected=this.selectedItem=null}}},{key:'deselectIndex',value:function(a){this.deselect(this.items[a])}},{key:'select',value:function(a){this.selectIndex(this.items.indexOf(a))}},{key:'selectIndex',value:function(a){var b=this.items[a];this.isSelected(b)?this.toggle&&this.deselectIndex(a):(!this.multi&&this.__selectedMap.clear(),this.__selectedMap.set(b,a),this.__updateLinks(),this.multi?this.push('selected',b):this.selected=this.selectedItem=b)}}]),b}(b);return c});Polymer.ArraySelectorMixin=a;var b=a(Polymer.Element),c=function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,null,[{key:'is',get:function(){return'array-selector'}}]),b}(b);customElements.define(c.is,c),Polymer.ArraySelector=c})();</script><script>(function(){"use strict";function a(b){i=b&&b.shimcssproperties?!1:f||!navigator.userAgent.match(/AppleWebKit\/601|Edge\/15/)&&window.CSS&&CSS.supports&&CSS.supports("box-shadow","0 0 0 var(--foo)")}function d(c,a){for(var b in a)null===b?c.style.removeProperty(b):c.style.setProperty(b,a[b])}function b(){var b=o;requestAnimationFrame(function(){l?l(b):(n||(n=new Promise(function(b){k=b}),"complete"===document.readyState?k():document.addEventListener("readystatechange",function(){"complete"===document.readyState&&k()})),n.then(function(){b&&b()}))})}function e(){this.customStyles=[],this.enqueued=!1}function g(c){!c.enqueued&&o&&(c.enqueued=!0,b())}var i,f=!(window.ShadyDOM&&window.ShadyDOM.inUse);window.ShadyCSS&&void 0!==window.ShadyCSS.nativeCss?i=window.ShadyCSS.nativeCss:window.ShadyCSS?(a(window.ShadyCSS),window.ShadyCSS=void 0):a(window.WebComponents&&window.WebComponents.flags);var j=i;var k,n=null,l=window.HTMLImports&&window.HTMLImports.whenReady||null;var m=null,o=null;e.prototype.c=function(b){b.__seenByShadyCSS||(b.__seenByShadyCSS=!0,this.customStyles.push(b),g(this))},e.prototype.b=function(c){if(c.__shadyCSSCachedStyle)return c.__shadyCSSCachedStyle;var a;return a=c.getStyle?c.getStyle():c,a},e.prototype.a=function(){for(var c,d=this.customStyles,a=0;a<d.length;a++)if(c=d[a],!c.__shadyCSSCachedStyle){var b=this.b(c);b&&(b=b.__appliedElement||b,m&&m(b),c.__shadyCSSCachedStyle=b)}return d},e.prototype.addCustomStyle=e.prototype.c,e.prototype.getStyleForCustomStyle=e.prototype.b,e.prototype.processStyles=e.prototype.a,Object.defineProperties(e.prototype,{transformCallback:{get:function(){return m},set:function(b){m=b}},validateCallback:{get:function(){return o},set:function(c){var a=!1;o||(a=!0),o=c,a&&g(this)}}});var p=new e;window.ShadyCSS||(window.ShadyCSS={prepareTemplate:function(){},styleSubtree:function(c,a){p.a(),d(c,a)},styleElement:function(){p.a()},styleDocument:function(b){p.a(),d(document.body,b)},getComputedStyleValue:function(c,a){return(c=window.getComputedStyle(c).getPropertyValue(a))?c.trim():""},nativeCss:j,nativeShadow:f}),window.ShadyCSS.CustomStyleInterface=p}).call(this);</script><script>(function(){'use strict';var a='include',b=window.ShadyCSS.CustomStyleInterface,c=function(c){function d(){babelHelpers.classCallCheck(this,d);var a=babelHelpers.possibleConstructorReturn(this,(d.__proto__||Object.getPrototypeOf(d)).call(this));return a._style=null,b.addCustomStyle(a),a}return babelHelpers.inherits(d,c),babelHelpers.createClass(d,[{key:'getStyle',value:function(){if(this._style)return this._style;var b=this.querySelector('style');if(!b)return null;this._style=b;var c=b.getAttribute(a);return c&&(b.removeAttribute(a),b.textContent=Polymer.StyleGather.cssFromModules(c)+b.textContent),this.ownerDocument!==window.document&&window.document.head.appendChild(this),this._style}}]),d}(HTMLElement);window.customElements.define('custom-style',c),Polymer.CustomStyle=c})();</script><script>(function(){'use strict';var a;(function(){a=Polymer.MutableData._mutablePropertyChange})(),Polymer.MutableDataBehavior={_shouldPropertyChange:function(b,c,d){return a(this,b,c,d,!0)}},Polymer.OptionalMutableDataBehavior={properties:{mutableData:Boolean},_shouldPropertyChange:function(b,c,d){return a(this,b,c,d,this.mutableData)}}})();</script><script>Polymer.Base=Polymer.LegacyElementMixin(HTMLElement).prototype,Polymer.html=Polymer.html;</script><script>(function(){'use strict';function a(a,f){var g;if(void 0===b){b=!1;try{var h=new URL('b','http://a');h.pathname='c%20d',b='http://a/c%20d'===h.href,b=b&&'http://www.google.com/?foo%20bar'===new URL('http://www.google.com/?foo bar').href}catch(a){}}return b?g=new URL(a,f):(!c&&(c=document.implementation.createHTMLDocument('url'),d=c.createElement('base'),c.head.appendChild(d),e=c.createElement('a')),d.href=f,e.href=a.replace(/ /g,'%20'),g=e),g}var b,c,d,e;Polymer({is:'iron-location',properties:{path:{type:String,notify:!0,value:function(){return window.decodeURIComponent(window.location.pathname)}},query:{type:String,notify:!0,value:function(){return window.location.search.slice(1)}},hash:{type:String,notify:!0,value:function(){return window.decodeURIComponent(window.location.hash.slice(1))}},dwellTime:{type:Number,value:2e3},urlSpaceRegex:{type:String,value:''},_urlSpaceRegExp:{computed:'_makeRegExp(urlSpaceRegex)'},_lastChangedAt:{type:Number},_initialized:{type:Boolean,value:!1}},hostAttributes:{hidden:!0},observers:['_updateUrl(path, query, hash)'],attached:function(){this.listen(window,'hashchange','_hashChanged'),this.listen(window,'location-changed','_urlChanged'),this.listen(window,'popstate','_urlChanged'),this.listen(document.body,'click','_globalOnClick'),this._lastChangedAt=window.performance.now()-(this.dwellTime-200),this._initialized=!0,this._urlChanged()},detached:function(){this.unlisten(window,'hashchange','_hashChanged'),this.unlisten(window,'location-changed','_urlChanged'),this.unlisten(window,'popstate','_urlChanged'),this.unlisten(document.body,'click','_globalOnClick'),this._initialized=!1},_hashChanged:function(){this.hash=window.decodeURIComponent(window.location.hash.substring(1))},_urlChanged:function(){this._dontUpdateUrl=!0,this._hashChanged(),this.path=window.decodeURIComponent(window.location.pathname),this.query=window.location.search.substring(1),this._dontUpdateUrl=!1,this._updateUrl()},_getUrl:function(){var a=window.encodeURI(this.path).replace(/\#/g,'%23').replace(/\?/g,'%3F'),b='';this.query&&(b='?'+this.query.replace(/\#/g,'%23'));var c='';return this.hash&&(c='#'+window.encodeURI(this.hash)),a+b+c},_updateUrl:function(){if(!this._dontUpdateUrl&&this._initialized&&(this.path!==window.decodeURIComponent(window.location.pathname)||this.query!==window.location.search.substring(1)||this.hash!==window.decodeURIComponent(window.location.hash.substring(1)))){var b=this._getUrl(),c=a(b,window.location.protocol+'//'+window.location.host).href,d=window.performance.now(),e=this._lastChangedAt+this.dwellTime>d;this._lastChangedAt=d,e?window.history.replaceState({},'',c):window.history.pushState({},'',c),this.fire('location-changed',{},{node:window})}},_globalOnClick:function(a){if(!a.defaultPrevented){var b=this._getSameOriginLinkHref(a);b&&(a.preventDefault(),b===window.location.href||(window.history.pushState({},'',b),this.fire('location-changed',{},{node:window})))}},_getSameOriginLinkHref:function(b){if(0!==b.button)return null;if(b.metaKey||b.ctrlKey)return null;for(var c,d=Polymer.dom(b).path,e=null,f=0;f<d.length;f++)if(c=d[f],'A'===c.tagName&&c.href){e=c;break}if(!e)return null;if('_blank'===e.target)return null;if(('_top'===e.target||'_parent'===e.target)&&window.top!==window)return null;var g,h=e.href;g=null==document.baseURI?a(h):a(h,document.baseURI);var i=window.location.origin?window.location.origin:window.location.protocol+'//'+window.location.host;var j;if(j=g.origin?g.origin:g.protocol+'//'+g.host,j!==i)return null;var k=g.pathname+g.search+g.hash;if('/'!==k[0]&&(k='/'+k),this._urlSpaceRegExp&&!this._urlSpaceRegExp.test(k))return null;var l=a(k,window.location.href).href;return l},_makeRegExp:function(a){return RegExp(a)}})})();</script><script>'use strict';Polymer({is:'iron-query-params',properties:{paramsString:{type:String,notify:!0,observer:'paramsStringChanged'},paramsObject:{type:Object,notify:!0,value:function(){return{}}},_dontReact:{type:Boolean,value:!1}},hostAttributes:{hidden:!0},observers:['paramsObjectChanged(paramsObject.*)'],paramsStringChanged:function(){this._dontReact=!0,this.paramsObject=this._decodeParams(this.paramsString),this._dontReact=!1},paramsObjectChanged:function(){this._dontReact||(this.paramsString=this._encodeParams(this.paramsObject).replace(/%3F/g,'?').replace(/%2F/g,'/').replace(/'/g,'%27'))},_encodeParams:function(a){var b=[];for(var c in a){var d=a[c];''===d?b.push(encodeURIComponent(c)):d&&b.push(encodeURIComponent(c)+'='+encodeURIComponent(d.toString()))}return b.join('&')},_decodeParams:function(a){var b={};a=(a||'').replace(/\+/g,'%20');for(var c,d=a.split('&'),e=0;e<d.length;e++)c=d[e].split('='),c[0]&&(b[decodeURIComponent(c[0])]=decodeURIComponent(c[1]||''));return b}});</script><script>(function(){'use strict';Polymer.AppRouteConverterBehavior={properties:{route:{type:Object,notify:!0},queryParams:{type:Object,notify:!0},path:{type:String,notify:!0}},observers:['_locationChanged(path, queryParams)','_routeChanged(route.prefix, route.path)','_routeQueryParamsChanged(route.__queryParams)'],created:function(){this.linkPaths('route.__queryParams','queryParams'),this.linkPaths('queryParams','route.__queryParams')},_locationChanged:function(){this.route&&this.route.path===this.path&&this.queryParams===this.route.__queryParams||(this.route={prefix:'',path:this.path,__queryParams:this.queryParams})},_routeChanged:function(){this.route&&(this.path=this.route.prefix+this.route.path)},_routeQueryParamsChanged:function(a){this.route&&(this.queryParams=a)}}})();</script><dom-module id="app-location" assetpath="../bower_components/app-route/"><template><iron-location path="{{__path}}" query="{{__query}}" hash="{{__hash}}" url-space-regex="{{urlSpaceRegex}}"></iron-location><iron-query-params params-string="{{__query}}" params-object="{{queryParams}}"></iron-query-params></template><script>(function(){'use strict';Polymer({is:'app-location',properties:{route:{type:Object,notify:!0},useHashAsPath:{type:Boolean,value:!1},urlSpaceRegex:{type:String,notify:!0},__queryParams:{type:Object},__path:{type:String},__query:{type:String},__hash:{type:String},path:{type:String,observer:'__onPathChanged'},_isReady:{type:Boolean}},behaviors:[Polymer.AppRouteConverterBehavior],observers:['__computeRoutePath(useHashAsPath, __hash, __path)'],ready:function(){this._isReady=!0},__computeRoutePath:function(){this.path=this.useHashAsPath?this.__hash:this.__path},__onPathChanged:function(){this._isReady&&(this.useHashAsPath?this.__hash=this.path:this.__path=this.path)}})})();</script></dom-module><script>(function(){'use strict';Polymer({is:'app-route',properties:{route:{type:Object,notify:!0},pattern:{type:String},data:{type:Object,value:function(){return{}},notify:!0},queryParams:{type:Object,value:function(){return{}},notify:!0},tail:{type:Object,value:function(){return{path:null,prefix:null,__queryParams:null}},notify:!0},active:{type:Boolean,notify:!0,readOnly:!0},_queryParamsUpdating:{type:Boolean,value:!1},_matched:{type:String,value:''}},observers:['__tryToMatch(route.path, pattern)','__updatePathOnDataChange(data.*)','__tailPathChanged(tail.path)','__routeQueryParamsChanged(route.__queryParams)','__tailQueryParamsChanged(tail.__queryParams)','__queryParamsChanged(queryParams.*)'],created:function(){this.linkPaths('route.__queryParams','tail.__queryParams'),this.linkPaths('tail.__queryParams','route.__queryParams')},__routeQueryParamsChanged:function(a){if(a&&this.tail){if(this.tail.__queryParams!==a&&this.set('tail.__queryParams',a),!this.active||this._queryParamsUpdating)return;var b={},c=!1;for(var d in a)b[d]=a[d],(c||!this.queryParams||a[d]!==this.queryParams[d])&&(c=!0);for(var d in this.queryParams)if(c||!(d in a)){c=!0;break}if(!c)return;this._queryParamsUpdating=!0,this.set('queryParams',b),this._queryParamsUpdating=!1}},__tailQueryParamsChanged:function(a){a&&this.route&&this.route.__queryParams!=a&&this.set('route.__queryParams',a)},__queryParamsChanged:function(a){!this.active||this._queryParamsUpdating||this.set('route.__'+a.path,a.value)},__resetProperties:function(){this._setActive(!1),this._matched=null},__tryToMatch:function(){if(this.route){var a=this.route.path,b=this.pattern;if(b){if(!a)return void this.__resetProperties();for(var c,d,e=a.split('/'),f=b.split('/'),g=[],h={},j=0;j<f.length&&(c=f[j],c||''===c);j++){if(d=e.shift(),!d&&''!==d)return void this.__resetProperties();if(g.push(d),':'==c.charAt(0))h[c.slice(1)]=d;else if(c!==d)return void this.__resetProperties()}this._matched=g.join('/');var i={};this.active||(i.active=!0);var k=this.route.prefix+this._matched,l=e.join('/');for(var m in 0<e.length&&(l='/'+l),this.tail&&this.tail.prefix===k&&this.tail.path===l||(i.tail={prefix:k,path:l,__queryParams:this.route.__queryParams}),i.data=h,this._dataInUrl={},h)this._dataInUrl[m]=h[m];this.setProperties?(!this.active&&this._setActive(!0),this.setProperties(i)):this.__setMulti(i)}}},__tailPathChanged:function(a){if(this.active){var b=a,c=this._matched;b&&('/'!==b.charAt(0)&&(b='/'+b),c+=b),this.set('route.path',c)}},__updatePathOnDataChange:function(){if(this.route&&this.active){var a=this.__getLink({}),b=this.__getLink(this._dataInUrl);a===b||this.set('route.path',a)}},__getLink:function(a){var b={tail:null};for(var c in this.data)b[c]=this.data[c];for(var c in a)b[c]=a[c];var d=this.pattern.split('/'),e=d.map(function(a){return':'==a[0]&&(a=b[a.slice(1)]),a},this);return b.tail&&b.tail.path&&(0<e.length&&'/'===b.tail.path.charAt(0)?e.push(b.tail.path.slice(1)):e.push(b.tail.path)),e.join('/')},__setMulti:function(a){for(var b in a)this._propertySetter(b,a[b]);a.data!==void 0&&(this._pathEffector('data',this.data),this._notifyChange('data')),a.active!==void 0&&(this._pathEffector('active',this.active),this._notifyChange('active')),a.tail!==void 0&&(this._pathEffector('tail',this.tail),this._notifyChange('tail'))}})})();</script><script>Polymer.IronResizableBehavior={properties:{_parentResizable:{type:Object,observer:'_parentResizableChanged'},_notifyingDescendant:{type:Boolean,value:!1}},listeners:{"iron-request-resize-notifications":'_onIronRequestResizeNotifications'},created:function(){this._interestedResizables=[],this._boundNotifyResize=this.notifyResize.bind(this)},attached:function(){this._requestResizeNotifications()},detached:function(){this._parentResizable?this._parentResizable.stopResizeNotificationsFor(this):window.removeEventListener('resize',this._boundNotifyResize),this._parentResizable=null},notifyResize:function(){this.isAttached&&(this._interestedResizables.forEach(function(a){this.resizerShouldNotify(a)&&this._notifyDescendant(a)},this),this._fireResize())},assignParentResizable:function(a){this._parentResizable=a},stopResizeNotificationsFor:function(a){var b=this._interestedResizables.indexOf(a);-1<b&&(this._interestedResizables.splice(b,1),this.unlisten(a,'iron-resize','_onDescendantIronResize'))},resizerShouldNotify:function(){return!0},_onDescendantIronResize:function(a){return this._notifyingDescendant?void a.stopPropagation():void(!Polymer.Settings.useShadow&&this._fireResize())},_fireResize:function(){this.fire('iron-resize',null,{node:this,bubbles:!1})},_onIronRequestResizeNotifications:function(a){var b=Polymer.dom(a).rootTarget;b===this||(-1===this._interestedResizables.indexOf(b)&&(this._interestedResizables.push(b),this.listen(b,'iron-resize','_onDescendantIronResize')),b.assignParentResizable(this),this._notifyDescendant(b),a.stopPropagation())},_parentResizableChanged:function(a){a&&window.removeEventListener('resize',this._boundNotifyResize)},_notifyDescendant:function(a){this.isAttached&&(this._notifyingDescendant=!0,a.notifyResize(),this._notifyingDescendant=!1)},_requestResizeNotifications:function(){if(this.isAttached)if('loading'===document.readyState){var a=this._requestResizeNotifications.bind(this);document.addEventListener('readystatechange',function b(){document.removeEventListener('readystatechange',b),a()})}else this.fire('iron-request-resize-notifications',null,{node:this,bubbles:!0,cancelable:!0}),this._parentResizable||(window.addEventListener('resize',this._boundNotifyResize),this.notifyResize())}};</script><script>Polymer.IronSelection=function(a){this.selection=[],this.selectCallback=a},Polymer.IronSelection.prototype={get:function(){return this.multi?this.selection.slice():this.selection[0]},clear:function(a){this.selection.slice().forEach(function(b){(!a||0>a.indexOf(b))&&this.setItemSelected(b,!1)},this)},isSelected:function(a){return 0<=this.selection.indexOf(a)},setItemSelected:function(a,b){if(null!=a&&b!==this.isSelected(a)){if(b)this.selection.push(a);else{var c=this.selection.indexOf(a);0<=c&&this.selection.splice(c,1)}this.selectCallback&&this.selectCallback(a,b)}},select:function(a){this.multi?this.toggle(a):this.get()!==a&&(this.setItemSelected(this.get(),!1),this.setItemSelected(a,!0))},toggle:function(a){this.setItemSelected(a,!this.isSelected(a))}};</script><script>Polymer.IronSelectableBehavior={properties:{attrForSelected:{type:String,value:null},selected:{type:String,notify:!0},selectedItem:{type:Object,readOnly:!0,notify:!0},activateEvent:{type:String,value:'tap',observer:'_activateEventChanged'},selectable:String,selectedClass:{type:String,value:'iron-selected'},selectedAttribute:{type:String,value:null},fallbackSelection:{type:String,value:null},items:{type:Array,readOnly:!0,notify:!0,value:function(){return[]}},_excludedLocalNames:{type:Object,value:function(){return{template:1,"dom-bind":1,"dom-if":1,"dom-repeat":1}}}},observers:['_updateAttrForSelected(attrForSelected)','_updateSelected(selected)','_checkFallback(fallbackSelection)'],created:function(){this._bindFilterItem=this._filterItem.bind(this),this._selection=new Polymer.IronSelection(this._applySelection.bind(this))},attached:function(){this._observer=this._observeItems(this),this._addListener(this.activateEvent)},detached:function(){this._observer&&Polymer.dom(this).unobserveNodes(this._observer),this._removeListener(this.activateEvent)},indexOf:function(a){return this.items?this.items.indexOf(a):-1},select:function(a){this.selected=a},selectPrevious:function(){var a=this.items.length,b=(+this._valueToIndex(this.selected)-1+a)%a;this.selected=this._indexToValue(b)},selectNext:function(){var a=(+this._valueToIndex(this.selected)+1)%this.items.length;this.selected=this._indexToValue(a)},selectIndex:function(a){this.select(this._indexToValue(a))},forceSynchronousItemUpdate:function(){this._observer&&'function'===typeof this._observer.flush?this._observer.flush():this._updateItems()},get _shouldUpdateSelection(){return null!=this.selected},_checkFallback:function(){this._updateSelected()},_addListener:function(a){this.listen(this,a,'_activateHandler')},_removeListener:function(a){this.unlisten(this,a,'_activateHandler')},_activateEventChanged:function(a,b){this._removeListener(b),this._addListener(a)},_updateItems:function(){var a=Polymer.dom(this).queryDistributedElements(this.selectable||'*');a=Array.prototype.filter.call(a,this._bindFilterItem),this._setItems(a)},_updateAttrForSelected:function(){this.selectedItem&&(this.selected=this._valueForItem(this.selectedItem))},_updateSelected:function(){this._selectSelected(this.selected)},_selectSelected:function(){if(this.items){var a=this._valueToItem(this.selected);a?this._selection.select(a):this._selection.clear(),this.fallbackSelection&&this.items.length&&void 0===this._selection.get()&&(this.selected=this.fallbackSelection)}},_filterItem:function(a){return!this._excludedLocalNames[a.localName]},_valueToItem:function(a){return null==a?null:this.items[this._valueToIndex(a)]},_valueToIndex:function(a){if(this.attrForSelected){for(var b,c=0;b=this.items[c];c++)if(this._valueForItem(b)==a)return c;}else return+a},_indexToValue:function(a){if(this.attrForSelected){var b=this.items[a];if(b)return this._valueForItem(b)}else return a},_valueForItem:function(a){if(!a)return null;if(!this.attrForSelected){var b=this.indexOf(a);return-1===b?null:b}var c=a[Polymer.CaseMap.dashToCamelCase(this.attrForSelected)];return c==void 0?a.getAttribute(this.attrForSelected):c},_applySelection:function(a,b){this.selectedClass&&this.toggleClass(this.selectedClass,b,a),this.selectedAttribute&&this.toggleAttribute(this.selectedAttribute,b,a),this._selectionChange(),this.fire('iron-'+(b?'select':'deselect'),{item:a})},_selectionChange:function(){this._setSelectedItem(this._selection.get())},_observeItems:function(a){return Polymer.dom(a).observeNodes(function(a){this._updateItems(),this._updateSelected(),this.fire('iron-items-changed',a,{bubbles:!1,cancelable:!1})})},_activateHandler:function(a){for(var b=a.target,c=this.items;b&&b!=this;){var d=c.indexOf(b);if(0<=d){var e=this._indexToValue(d);return void this._itemActivate(e,b)}b=b.parentNode}},_itemActivate:function(a,b){this.fire('iron-activate',{selected:a,item:b},{cancelable:!0}).defaultPrevented||this.select(a)}};</script><dom-module id="iron-pages" assetpath="../bower_components/iron-pages/"><template><style>:host{display:block;}:host > ::slotted(:not(.iron-selected)){display:none !important;}</style><slot></slot></template><script>Polymer({is:'iron-pages',behaviors:[Polymer.IronResizableBehavior,Polymer.IronSelectableBehavior],properties:{activateEvent:{type:String,value:null}},observers:['_selectedPageChanged(selected)'],_selectedPageChanged:function(){this.async(this.notifyResize)}});</script></dom-module><script>var firebase=function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.i=function(a){return a},b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a.default}:function(){return a};return b.d(c,"a",c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p="",b(b.s=11)}([function(a,b,c){"use strict";(function(a){Object.defineProperty(b,"__esModule",{value:!0});var d;if(void 0!==a)d=a;else if("undefined"!=typeof self)d=self;else try{d=Function("return this")()}catch(a){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=d.Promise||c(8);b.local={Promise:e,GoogPromise:e}}).call(b,c(1))},function(a){var b=function(){return this}();try{b=b||Function("return this")()||(0,eval)("this")}catch(a){"object"==("undefined"===typeof window?"undefined":babelHelpers.typeof(window))&&(b=window)}a.exports=b},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(5),e=(0,d.createFirebaseNamespace)();b.default=e,a.exports=b.default},function(a,b){"use strict";function c(a,b){if(!(b instanceof Object))return b;switch(b.constructor){case Date:return new Date(b.getTime());case Object:void 0===a&&(a={});break;case Array:a=[];break;default:return b;}for(var d in b)b.hasOwnProperty(d)&&(a[d]=c(a[d],b[d]));return a}Object.defineProperty(b,"__esModule",{value:!0}),b.deepCopy=function(a){return c(void 0,a)},b.deepExtend=c,b.patchProperty=function(a,b,c){a[b]=c}},function(b,d){"use strict";function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(d,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();d.patchCapture=function(a){var b=h;return h=a,b};var h=Error.captureStackTrace,j=function b(c,d){if(f(this,b),this.code=c,this.message=d,h)h(this,a.prototype.create);else{var e=Error.apply(this,arguments);this.name="FirebaseError",Object.defineProperty(this,"stack",{get:function(){return e.stack}})}};j.prototype=Object.create(Error.prototype),j.prototype.constructor=j,j.prototype.name="FirebaseError";var a=d.ErrorFactory=function(){function a(b,c,d){f(this,a),this.service=b,this.serviceName=c,this.errors=d,this.pattern=/\{\$([^}]+)}/g}return g(a,[{key:"create",value:function(b,c){void 0===c&&(c={});var d,e=this.errors[b],f=this.service+"/"+b;d=void 0===e?"Error":e.replace(this.pattern,function(a,b){var d=c[b];return void 0===d?"<"+b+"?>":d.toString()}),d=this.serviceName+": "+d+" ("+f+").";var g=new j(f,d);for(var h in c)c.hasOwnProperty(h)&&"_"!==h.slice(-1)&&(g[h]=c[h]);return g}}]),a}()},function(b,e,g){"use strict";function h(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function j(){function b(b){b=b||a;var c=p[b];return void 0===c&&k("no-app",{name:b}),c}function g(a,b){Object.keys(w).forEach(function(c){var d=m(a,c);null!==d&&x[d]&&x[d](b,a)})}function m(a,b){if("serverAuth"===b)return null;var c=b,d=a.options;return"auth"===b&&(d.serviceAccount||d.credential)&&(c="serverAuth","serverAuth"in w||k("sa-not-supported")),c}var p={},w={},x={},h={__esModule:!0,initializeApp:function(b,c){void 0===c?c=a:"string"==typeof c&&""!==c||k("bad-app-name",{name:c+""}),void 0!==p[c]&&k("duplicate-app",{name:c});var e=new d(b,c,h);return p[c]=e,g(e,"create"),void 0!=e.INTERNAL&&void 0!=e.INTERNAL.getToken||(0,q.deepExtend)(e,{INTERNAL:{getUid:function(){return null},getToken:function(){return f.resolve(null)},addAuthTokenListener:function(){},removeAuthTokenListener:function(){}}}),e},app:b,apps:null,Promise:f,SDK_VERSION:"3.9.0",INTERNAL:{registerService:function(c,d,e,f,g){w[c]&&k("duplicate-service",{name:c}),w[c]=g?d:function(b,c){return d(b,c,a)},f&&(x[c]=f);var i;return i=function(a){return void 0===a&&(a=b()),"function"!=typeof a[c]&&k("invalid-app-argument",{name:c}),a[c]()},void 0!==e&&(0,q.deepExtend)(i,e),h[c]=i,i},createFirebaseNamespace:j,extendNamespace:function(a){(0,q.deepExtend)(h,a)},createSubscribe:c.createSubscribe,ErrorFactory:o.ErrorFactory,removeApp:function(a){g(p[a],"delete"),delete p[a]},factories:w,useAsService:m,Promise:s.local.GoogPromise,deepExtend:q.deepExtend}};return(0,q.patchProperty)(h,"default",h),Object.defineProperty(h,"apps",{get:function(){return Object.keys(p).map(function(a){return p[a]})}}),(0,q.patchProperty)(b,"App",d),h}function k(a,b){throw n.create(a,b)}Object.defineProperty(e,"__esModule",{value:!0});var m=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();e.createFirebaseNamespace=j;var q=g(3),c=g(6),o=g(4),s=g(0),f=s.local.Promise,a="[DEFAULT]",d=function(){function b(c,d,f){var g=this;h(this,b),this.firebase_=f,this.isDeleted_=!1,this.services_={},this.name_=d,this.options_=(0,q.deepCopy)(c);var e="credential"in this.options_,a="serviceAccount"in this.options_;if(e||a){var i=a?"serviceAccount":"credential";"undefined"!=typeof console&&console.log("The '"+i+"' property specified in the first argument to initializeApp() is deprecated and will be removed in the next major version. You should instead use the 'firebase-admin' package. See https://firebase.google.com/docs/admin/setup for details on how to get started.")}Object.keys(f.INTERNAL.factories).forEach(function(a){var b=f.INTERNAL.useAsService(g,a);if(null!==b){var c=g.getService.bind(g,b);(0,q.patchProperty)(g,a,c)}})}return m(b,[{key:"delete",value:function(){var a=this;return new f(function(b){a.checkDestroyed_(),b()}).then(function(){a.firebase_.INTERNAL.removeApp(a.name_);var b=[];return Object.keys(a.services_).forEach(function(c){Object.keys(a.services_[c]).forEach(function(d){b.push(a.services_[c][d])})}),f.all(b.map(function(a){return a.INTERNAL.delete()}))}).then(function(){a.isDeleted_=!0,a.services_={}})}},{key:"getService",value:function(b,c){this.checkDestroyed_(),void 0===this.services_[b]&&(this.services_[b]={});var d=c||a;if(void 0===this.services_[b][d]){var e=this.firebase_.INTERNAL.factories[b](this,this.extendApp.bind(this),c);return this.services_[b][d]=e,e}return this.services_[b][d]}},{key:"extendApp",value:function(a){(0,q.deepExtend)(this,a)}},{key:"checkDestroyed_",value:function(){this.isDeleted_&&k("app-deleted",{name:this.name_})}},{key:"name",get:function(){return this.checkDestroyed_(),this.name_}},{key:"options",get:function(){return this.checkDestroyed_(),this.options_}}]),b}();d.prototype.name&&d.prototype.options||d.prototype.delete||console.log("dc");var n=new o.ErrorFactory("app","Firebase",{"no-app":"No Firebase App '{$name}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$name}","duplicate-app":"Firebase App named '{$name}' already exists","app-deleted":"Firebase App named '{$name}' already deleted","duplicate-service":"Firebase service named '{$name}' already registered","sa-not-supported":"Initializing the Firebase SDK with a service account is only allowed in a Node.js environment. On client devices, you should instead initialize the SDK with an api key and auth domain","invalid-app-argument":"firebase.{$name}() takes either no argument or a Firebase App instance."})},function(b,e,g){"use strict";function h(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function j(b,d){if("object"!==(void 0===b?"undefined":k(b))||null===b)return!1;var f,e=!0,g=!1;try{for(var h,i,c=d[Symbol.iterator]();!(e=(h=c.next()).done);e=!0)if(i=h.value,i in b&&"function"==typeof b[i])return!0}catch(a){g=!0,f=a}finally{try{!e&&c.return&&c.return()}finally{if(g)throw f}}return!1}function a(){}Object.defineProperty(e,"__esModule",{value:!0});var k="function"==typeof Symbol&&"symbol"==babelHelpers.typeof(Symbol.iterator)?function(a){return"undefined"===typeof a?"undefined":babelHelpers.typeof(a)}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":"undefined"===typeof a?"undefined":babelHelpers.typeof(a)},c=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();e.createSubscribe=function(a,b){var c=new l(a,b);return c.subscribe.bind(c)},e.async=function(a,b){return function(){for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];f.resolve(!0).then(function(){a.apply(void 0,d)}).catch(function(a){b&&b(a)})}};var i=g(0),f=i.local.Promise,l=function(){function b(a,c){var d=this;h(this,b),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=f.resolve(),this.finalized=!1,this.onNoObservers=c,this.task.then(function(){a(d)}).catch(function(a){d.error(a)})}return c(b,[{key:"next",value:function(a){this.forEachObserver(function(b){b.next(a)})}},{key:"error",value:function(a){this.forEachObserver(function(b){b.error(a)}),this.close(a)}},{key:"complete",value:function(){this.forEachObserver(function(a){a.complete()}),this.close()}},{key:"subscribe",value:function(b,c,d){var f,g=this;if(void 0===b&&void 0===c&&void 0===d)throw new Error("Missing Observer.");f=j(b,["next","error","complete"])?b:{next:b,error:c,complete:d},void 0===f.next&&(f.next=a),void 0===f.error&&(f.error=a),void 0===f.complete&&(f.complete=a);var h=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{g.finalError?f.error(g.finalError):f.complete()}catch(a){}}),this.observers.push(f),h}},{key:"unsubscribeOne",value:function(a){void 0!==this.observers&&void 0!==this.observers[a]&&(delete this.observers[a],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(a){if(!this.finalized)for(var b=0;b<this.observers.length;b++)this.sendOne(b,a)}},{key:"sendOne",value:function(a,b){var c=this;this.task.then(function(){if(void 0!==c.observers&&void 0!==c.observers[a])try{b(c.observers[a])}catch(a){"undefined"!=typeof console&&console.error&&console.error(a)}})}},{key:"close",value:function(a){var b=this;this.finalized||(this.finalized=!0,void 0!==a&&(this.finalError=a),this.task.then(function(){b.observers=void 0,b.onNoObservers=void 0}))}}]),b}()},function(b){function g(){throw new Error("setTimeout has not been defined")}function j(){throw new Error("clearTimeout has not been defined")}function k(a){if(o===setTimeout)return setTimeout(a,0);if((o===g||!o)&&setTimeout)return o=setTimeout,setTimeout(a,0);try{return o(a,0)}catch(b){try{return o.call(null,a,0)}catch(b){return o.call(this,a,0)}}}function i(a){if(q===clearTimeout)return clearTimeout(a);if((q===j||!q)&&clearTimeout)return q=clearTimeout,clearTimeout(a);try{return q(a)}catch(b){try{return q.call(null,a)}catch(b){return q.call(this,a)}}}function n(){h&&d&&(h=!1,d.length?p=d.concat(p):s=-1,p.length&&a())}function a(){if(!h){var a=k(n);h=!0;for(var b=p.length;b;){for(d=p,p=[];++s<b;)d&&d[s].run();s=-1,b=p.length}d=null,h=!1,i(a)}}function c(a,b){this.fun=a,this.array=b}function e(){}var o,q,r=b.exports={};!function(){try{o="function"==typeof setTimeout?setTimeout:g}catch(a){o=g}try{q="function"==typeof clearTimeout?clearTimeout:j}catch(a){q=j}}();var d,p=[],h=!1,s=-1;r.nextTick=function(b){var d=Array(arguments.length-1);if(1<arguments.length)for(var e=1;e<arguments.length;e++)d[e-1]=arguments[e];p.push(new c(b,d)),1!==p.length||h||k(a)},c.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=e,r.addListener=e,r.once=e,r.off=e,r.removeListener=e,r.removeAllListeners=e,r.emit=e,r.binding=function(){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(b,a,c){(function(g){!function(e){function h(){}function j(a,b){return function(){a.apply(b,arguments)}}function i(a){if("object"!=babelHelpers.typeof(this))throw new TypeError("Promises must be constructed via new");if("function"!=typeof a)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],f(a,this)}function k(b,d){for(;3===b._state;)b=b._value;return 0===b._state?void b._deferreds.push(d):void(b._handled=!0,i._immediateFn(function(){var e=1===b._state?d.onFulfilled:d.onRejected;if(null===e)return void(1===b._state?a:c)(d.promise,b._value);var f;try{f=e(b._value)}catch(a){return void c(d.promise,a)}a(d.promise,f)}))}function a(a,b){try{if(b===a)throw new TypeError("A promise cannot be resolved with itself.");if(b&&("object"==("undefined"===typeof b?"undefined":babelHelpers.typeof(b))||"function"==typeof b)){var d=b.then;if(b instanceof i)return a._state=3,a._value=b,void m(a);if("function"==typeof d)return void f(j(d,b),a)}a._state=1,a._value=b,m(a)}catch(b){c(a,b)}}function c(a,b){a._state=2,a._value=b,m(a)}function m(a){2===a._state&&0===a._deferreds.length&&i._immediateFn(function(){a._handled||i._unhandledRejectionFn(a._value)});for(var b=0,c=a._deferreds.length;b<c;b++)k(a,a._deferreds[b]);a._deferreds=null}function o(a,b,c){this.onFulfilled="function"==typeof a?a:null,this.onRejected="function"==typeof b?b:null,this.promise=c}function f(b,d){var f=!1;try{b(function(b){f||(f=!0,a(d,b))},function(a){f||(f=!0,c(d,a))})}catch(a){if(f)return;f=!0,c(d,a)}}var l=setTimeout;i.prototype.catch=function(a){return this.then(null,a)},i.prototype.then=function(a,b){var c=new this.constructor(h);return k(this,new o(a,b,c)),c},i.all=function(a){var b=Array.prototype.slice.call(a);return new i(function(d,f){function a(g,h){try{if(h&&("object"==("undefined"===typeof h?"undefined":babelHelpers.typeof(h))||"function"==typeof h)){var i=h.then;if("function"==typeof i)return void i.call(h,function(b){a(g,b)},f)}b[g]=h,0==--e&&d(b)}catch(a){f(a)}}if(0===b.length)return d([]);for(var e=b.length,c=0;c<b.length;c++)a(c,b[c])})},i.resolve=function(a){return a&&"object"==("undefined"===typeof a?"undefined":babelHelpers.typeof(a))&&a.constructor===i?a:new i(function(b){b(a)})},i.reject=function(a){return new i(function(b,c){c(a)})},i.race=function(a){return new i(function(b,c){for(var d=0,e=a.length;d<e;d++)a[d].then(b,c)})},i._immediateFn="function"==typeof g&&function(a){g(a)}||function(a){l(a,0)},i._unhandledRejectionFn=function(a){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",a)},i._setImmediateFn=function(a){i._immediateFn=a},i._setUnhandledRejectionFn=function(a){i._unhandledRejectionFn=a},void 0!==b&&b.exports?b.exports=i:e.Promise||(e.Promise=i)}(this)}).call(a,c(10).setImmediate)},function(a,b,c){(function(a,b){!function(g,e){"use strict";function h(b){"function"!=typeof b&&(b=new Function(""+b));for(var d=Array(arguments.length-1),f=0;f<d.length;f++)d[f]=arguments[f+1];var g={callback:b,args:d};return m[c]=g,a(c),c++}function j(a){delete m[a]}function i(a){var b=a.callback,c=a.args;switch(c.length){case 0:b();break;case 1:b(c[0]);break;case 2:b(c[0],c[1]);break;case 3:b(c[0],c[1],c[2]);break;default:b.apply(e,c);}}function k(a){if(n)setTimeout(k,0,a);else{var b=m[a];if(b){n=!0;try{i(b)}finally{j(a),n=!1}}}}if(!g.setImmediate){var a,c=1,m={},n=!1,f=g.document,l=Object.getPrototypeOf&&Object.getPrototypeOf(g);l=l&&l.setTimeout?l:g,"[object process]"==={}.toString.call(g.process)?function(){a=function(a){b.nextTick(function(){k(a)})}}():function(){if(g.postMessage&&!g.importScripts){var a=!0,b=g.onmessage;return g.onmessage=function(){a=!1},g.postMessage("","*"),g.onmessage=b,a}}()?function(){var b="setImmediate$"+Math.random()+"$",c=function(a){a.source===g&&"string"==typeof a.data&&0===a.data.indexOf(b)&&k(+a.data.slice(b.length))};g.addEventListener?g.addEventListener("message",c,!1):g.attachEvent("onmessage",c),a=function(a){g.postMessage(b+a,"*")}}():g.MessageChannel?function(){var b=new MessageChannel;b.port1.onmessage=function(a){k(a.data)},a=function(a){b.port2.postMessage(a)}}():f&&"onreadystatechange"in f.createElement("script")?function(){var b=f.documentElement;a=function(a){var c=f.createElement("script");c.onreadystatechange=function(){k(a),c.onreadystatechange=null,b.removeChild(c),c=null},b.appendChild(c)}}():function(){a=function(a){setTimeout(k,0,a)}}(),l.setImmediate=h,l.clearImmediate=j}}("undefined"==typeof self?void 0===a?this:a:self)}).call(b,c(1),c(7))},function(a,b,c){function d(a,b){this._id=a,this._clearFn=b}var e=Function.prototype.apply;b.setTimeout=function(){return new d(e.call(setTimeout,window,arguments),clearTimeout)},b.setInterval=function(){return new d(e.call(setInterval,window,arguments),clearInterval)},b.clearTimeout=b.clearInterval=function(a){a&&a.close()},d.prototype.unref=d.prototype.ref=function(){},d.prototype.close=function(){this._clearFn.call(window,this._id)},b.enroll=function(a,b){clearTimeout(a._idleTimeoutId),a._idleTimeout=b},b.unenroll=function(a){clearTimeout(a._idleTimeoutId),a._idleTimeout=-1},b._unrefActive=b.active=function(a){clearTimeout(a._idleTimeoutId);var b=a._idleTimeout;0<=b&&(a._idleTimeoutId=setTimeout(function(){a._onTimeout&&a._onTimeout()},b))},c(9),b.setImmediate=setImmediate,b.clearImmediate=clearImmediate},function(a,b,c){a.exports=c(2)}]);</script><script>(function(){function o(e){return void 0!==e}function e(){}function n(e){e.Vb=function(){return e.Ye?e.Ye:e.Ye=new e}}function i(e){var t="undefined"===typeof e?"undefined":babelHelpers.typeof(e);if("object"==t){if(e){if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&"undefined"!=typeof e.splice&&"undefined"!=typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||"undefined"!=typeof e.call&&"undefined"!=typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else return"null";}else if("function"==t&&"undefined"==typeof e.call)return"object";return t}function s(e){return"array"==i(e)}function u(e){var t=i(e);return"array"==t||"object"==t&&"number"==typeof e.length}function F(e){return"string"==typeof e}function d(e){return"number"==typeof e}function p(e){return"function"==i(e)}function l(e){var t="undefined"===typeof e?"undefined":babelHelpers.typeof(e);return"object"==t&&null!=e||"function"==t}function c(e){return e.call.apply(e.bind,arguments)}function f(e,t){if(!e)throw Error();if(2<arguments.length){var n=Array.prototype.slice.call(arguments,2);return function(){var d=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(d,n),e.apply(t,d)}}return function(){return e.apply(t,arguments)}}function j(){return j=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?c:f,j.apply(null,arguments)}function h(e,t){function n(){}n.prototype=t.prototype,e.wg=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.sg=function(e,n){for(var d=Array(arguments.length-2),o=2;o<arguments.length;o++)d[o-2]=arguments[o];return t.prototype[n].apply(e,d)}}function b(e){if(e+="",/^\s*$/.test(e)?0:/^[\],:{}\s\u2028\u2029]*$/.test(e.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+e+")")}catch(e){}throw Error("Invalid JSON string: "+e)}function m(){this.Fd=void 0}function k(t,n,o){switch("undefined"===typeof n?"undefined":babelHelpers.typeof(n)){case"string":q(n,o);break;case"number":o.push(isFinite(n)&&!isNaN(n)?n:"null");break;case"boolean":o.push(n);break;case"undefined":o.push("null");break;case"object":if(null==n){o.push("null");break}if(s(n)){var i=n.length;o.push("[");for(var d="",r=0;r<i;r++)o.push(d),d=n[r],k(t,t.Fd?t.Fd.call(n,r+"",d):d,o),d=",";o.push("]");break}for(r in o.push("{"),i="",n)Object.prototype.hasOwnProperty.call(n,r)&&(d=n[r],"function"!=typeof d&&(o.push(i),q(r,o),o.push(":"),k(t,t.Fd?t.Fd.call(n,r,d):d,o),i=","));o.push("}");break;case"function":break;default:throw Error("Unknown type: "+("undefined"===typeof n?"undefined":babelHelpers.typeof(n)));}}function q(e,t){t.push("\"",e.replace(qa,function(t){if(t in aa)return aa[t];var n=t.charCodeAt(0),d="\\u";return 16>n?d+="000":256>n?d+="00":4096>n&&(d+="0"),aa[t]=d+n.toString(16)}),"\"")}function _(){this.Wa=-1}function $(){this.Wa=-1,this.Wa=64,this.M=[],this.Wd=[],this.Af=[],this.zd=[],this.zd[0]=128;for(var e=1;e<this.Wa;++e)this.zd[e]=0;this.Pd=this.$b=0,this.reset()}function z(t,n,o){o||(o=0);var i=t.Af;if(F(n))for(var d=0;16>d;d++)i[d]=n.charCodeAt(o)<<24|n.charCodeAt(o+1)<<16|n.charCodeAt(o+2)<<8|n.charCodeAt(o+3),o+=4;else for(d=0;16>d;d++)i[d]=n[o]<<24|n[o+1]<<16|n[o+2]<<8|n[o+3],o+=4;for(d=16;80>d;d++){var e=i[d-3]^i[d-8]^i[d-14]^i[d-16];i[d]=4294967295&(e<<1|e>>>31)}n=t.M[0],o=t.M[1];for(var r,s=t.M[2],c=t.M[3],p=t.M[4],d=0;80>d;d++)40>d?20>d?(e=c^o&(s^c),r=1518500249):(e=o^s^c,r=1859775393):60>d?(e=o&s|c&(o|s),r=2400959708):(e=o^s^c,r=3395469782),e=4294967295&(n<<5|n>>>27)+e+p+r+i[d],p=c,c=s,s=4294967295&(o<<30|o>>>2),o=n,n=e;t.M[0]=4294967295&t.M[0]+n,t.M[1]=4294967295&t.M[1]+o,t.M[2]=4294967295&t.M[2]+s,t.M[3]=4294967295&t.M[3]+c,t.M[4]=4294967295&t.M[4]+p}function _e(e,t){var n=et(e,t,void 0);return 0>n?null:F(e)?e.charAt(n):e[n]}function et(t,n,o){for(var i=t.length,d=F(t)?t.split(""):t,e=0;e<i;e++)if(e in d&&n.call(o,d[e],e,t))return e;return-1}function tt(e,n){var d=t(e,n);0<=d&&wa.splice.call(e,d,1)}function nt(e,t,n){return 2>=arguments.length?wa.slice.call(e,t):wa.slice.call(e,t,n)}function at(e,t){e.sort(t||dt)}function dt(e,t){return e>t?1:e<t?-1:0}function ot(e,t){for(var n in e)t.call(void 0,e[n],n,e)}function v(e,t){var n,d={};for(n in e)d[n]=t.call(void 0,e[n],n,e);return d}function it(e,t){for(var n in e)if(!t.call(void 0,e[n],n,e))return!1;return!0}function rt(e){var t,n=0;for(t in e)n++;return n}function st(e){for(var t in e)return t}function ct(e){var t,n=[],d=0;for(t in e)n[d++]=e[t];return n}function pt(e){var t,n=[],d=0;for(t in e)n[d++]=t;return n}function ut(e,t){for(var n in e)if(e[n]==t)return!0;return!1}function lt(e,t,n){for(var o in e)if(t.call(n,e[o],o,e))return o}function ft(e,t){var n=lt(e,t,void 0);return n&&e[n]}function ht(e){for(var t in e)return!1;return!0}function bt(e){var t,n={};for(t in e)n[t]=e[t];return n}function gt(t,n){if(!u(t))throw Error("encodeByteArray takes an array as a parameter");yt();for(var o=n?Xi:Xa,i=[],d=0;d<t.length;d+=3){var e=t[d],r=d+1<t.length,s=r?t[d+1]:0,c=d+2<t.length,p=c?t[d+2]:0,e=(3&e)<<4|s>>4,s=(15&s)<<2|p>>6,p=63&p;c||(p=64,r||(s=64)),i.push(o[e>>2],o[e],o[s],o[p])}return i.join("")}function yt(){if(!Xa){Xa={},Xi={},Za={};for(var e=0;65>e;e++)Xa[e]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(e),Xi[e]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(e),Za[Xi[e]]=e,62<=e&&(Za["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(e)]=e)}}function mt(e,t){if(!e)throw vt(t)}function vt(e){return Error("Firebase Database ("+firebase.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)}function kt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function St(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]}function w(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function wt(e){var t=[];return w(e,function(e,n){s(n)?xa(n,function(n){t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))}),t.length?"&"+t.join("&"):""}function At(){var e=this;this.reject=this.resolve=null,this.ra=new $a(function(t,n){e.resolve=t,e.reject=n})}function Ft(e,t){return function(n,o){n?e.reject(n):e.resolve(o),p(t)&&(jt(e.ra),1===t.length?t(n):t(n,o))}}function jt(t){t.then(void 0,e)}function Tt(e){return"undefined"!==typeof JSON&&o(JSON.parse)?JSON.parse(e):b(e)}function Et(e){if("undefined"!==typeof JSON&&o(JSON.stringify))e=JSON.stringify(e);else{var t=[];k(new m,e,t),e=t.join("")}return e}function x(t){for(var n,e=[],o=0,i=0;i<t.length;i++)n=t.charCodeAt(i),55296<=n&&56319>=n&&(n-=55296,i++,mt(i<t.length,"Surrogate pair missing trail surrogate."),n=65536+(n<<10)+(t.charCodeAt(i)-56320)),128>n?e[o++]=n:(2048>n?e[o++]=192|n>>6:(65536>n?e[o++]=224|n>>12:(e[o++]=240|n>>18,e[o++]=128|63&n>>12),e[o++]=128|63&n>>6),e[o++]=128|63&n);return e}function Ct(e){for(var t,n=0,d=0;d<e.length;d++)t=e.charCodeAt(d),128>t?n++:2048>t?n+=2:55296<=t&&56319>=t?(n+=4,d++):n+=3;return n}function It(t,n,o,i){var d;if(i<n?d="at least "+n:i>o&&(d=0===o?"none":"no more than "+o),d)throw Error(t+" failed: Was called with "+i+(1===i?" argument.":" arguments.")+" Expects "+d+".")}function y(e,t,n){var o="";switch(t){case 1:o=n?"first":"First";break;case 2:o=n?"second":"Second";break;case 3:o=n?"third":"Third";break;case 4:o=n?"fourth":"Fourth";break;default:throw Error("errorPrefix called with argumentNumber > 4.  Need to update it?");}return e=e+" failed: "+(o+" argument ")}function A(e,t,n,i){if((!i||o(n))&&!p(n))throw Error(y(e,t,i)+"must be a valid function.")}function B(e,t,n){if(o(n)&&(!l(n)||null===n))throw Error(y(e,t,!0)+"must be a valid context object.")}function Rt(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test("undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:"")}function Ot(e,t){this.name=e,this.R=t}function C(e,t){return new Ot(e,t)}function Dt(e,t){return Zt(e.name,t.name)}function Nt(e,t){return Zt(e,t)}function Lt(e){this.uc=e,this.Cd="firebase:"}function Pt(){this.pc={}}function xt(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new Lt(t)}}catch(e){}return new Pt}function Qt(t,n,o,i,d){this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.Sc=n,this.pe=o,this.qg=i,this.gf=d||"",this.$a=Yi.get("host:"+t)||this.host}function Bt(e,t){t!==e.$a&&(e.$a=t,"s-"===e.$a.substr(0,2)&&Yi.set("host:"+e.host,e.$a))}function Mt(e,t,n){if(tr("string"===typeof t,"typeof type must == string"),tr("object"===("undefined"===typeof n?"undefined":babelHelpers.typeof(n)),"typeof params must == object"),t===Sr)t=(e.Sc?"wss://":"ws://")+e.$a+"/.ws?";else if(t===wr)t=(e.Sc?"https://":"http://")+e.$a+"/.lp?";else throw Error("Unknown connection type: "+t);e.host!==e.$a&&(n.ns=e.pe);var o=[];return ot(n,function(e,t){o.push(t+"="+e)}),t+o.join("&")}function Ut(e,t){return e&&"object"===("undefined"===typeof e?"undefined":babelHelpers.typeof(e))?(tr(".sv"in e,"Unexpected leaf node or priority contents"),t[e[".sv"]]):e}function Wt(e,t){var n=new td;return od(e,new In(""),function(d,o){ad(n,d,qt(o,t))}),n}function qt(t,n){var o,d=t.C().H(),d=Ut(d,n);if(t.J()){var i=Ut(t.Ca(),n);return i!==t.Ca()||d!==t.C().H()?new wn(i,oa(d)):t}return o=t,d!==t.C().H()&&(o=o.fa(new wn(d))),t.O(ir,function(t,d){var i=qt(d,n);i!==d&&(o=o.T(t,i))}),o}function Kt(t){var n=String.fromCharCode;try{var o;yt();for(var i=Za,r=[],d=0;d<t.length;){var e=i[t.charAt(d++)],s=d<t.length?i[t.charAt(d)]:0;++d;var c=d<t.length?i[t.charAt(d)]:64;++d;var p=d<t.length?i[t.charAt(d)]:64;if(++d,null==e||null==s||null==c||null==p)throw Error();r.push(e<<2|s>>4),64!=c&&(r.push(240&s<<4|c>>2),64!=p&&r.push(192&c<<6|p))}if(8192>r.length)o=n.apply(null,r);else{for(t="",i=0;i<r.length;i+=8192)t+=n.apply(null,nt(r,i,i+8192));o=t}return o}catch(e){Jt("base64Decode failed: ",e)}return null}function Gt(t){var n=x(t);t=new $,t.update(n);var n=[],o=8*t.Pd;56>t.$b?t.update(t.zd,56-t.$b):t.update(t.zd,t.Wa-(t.$b-56));for(var i=t.Wa-1;56<=i;i--)t.Wd[i]=255&o,o/=256;for(z(t,t.Wd),i=o=0;5>i;i++)for(var d=24;0<=d;d-=8)n[o]=255&t.M[i]>>d,++o;return gt(n)}function Ht(){for(var e="",t=0;t<arguments.length;t++)e=u(arguments[t])?e+Ht.apply(null,arguments[t]):"object"===babelHelpers.typeof(arguments[t])?e+Et(arguments[t]):e+arguments[t],e+=" ";return e}function Vt(e,t){mt(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?("undefined"!==typeof console&&("function"===typeof console.log?nr=j(console.log,console):"object"===babelHelpers.typeof(console.log)&&(nr=function(e){console.log(e)})),t&&Zi.set("logging_enabled",!0)):p(e)?nr=e:(nr=null,Zi.remove("logging_enabled"))}function Jt(){if(!0===ar&&(ar=!1,null===nr&&!0===Zi.get("logging_enabled")&&Vt(!0)),nr){var e=Ht.apply(null,arguments);nr(e)}}function I(e){return function(){Jt(e,arguments)}}function _t(){if("undefined"!==typeof console){var e="FIREBASE INTERNAL ERROR: "+Ht.apply(null,arguments);"undefined"===typeof console.error?console.log(e):console.error(e)}}function $t(){var e=Ht.apply(null,arguments);throw Error("FIREBASE FATAL ERROR: "+e)}function zt(){if("undefined"!==typeof console){var e="FIREBASE WARNING: "+Ht.apply(null,arguments);"undefined"===typeof console.warn?console.log(e):console.warn(e)}}function J(t){var n,o,i,d,e,r=t;if(e=o=t=n="",i=!0,d="https",F(r)){var s=r.indexOf("//");for(0<=s&&(d=r.substring(0,s-1),r=r.substring(s+2)),s=r.indexOf("/"),-1===s&&(s=r.length),n=r.substring(0,s),e="",r=r.substring(s).split("/"),s=0;s<r.length;s++)if(0<r[s].length){var c=r[s];try{c=decodeURIComponent(c.replace(/\+/g," "))}catch(e){}e+="/"+c}r=n.split("."),3===r.length?(t=r[1],o=r[0].toLowerCase()):2===r.length&&(t=r[0]),s=n.indexOf(":"),0<=s&&(i="https"===d||"wss"===d)}return"firebase"===t&&$t(n+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),o&&"undefined"!=o||$t("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),i||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&zt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{jc:new Qt(n,i,o,"ws"===d||"wss"===d),path:new In(e)}}function Xt(e){return d(e)&&(e!=e||e==Number.POSITIVE_INFINITY||e==Number.NEGATIVE_INFINITY)}function Yt(e){if("complete"===document.readyState)e();else{var t=!1,n=function n(){document.body?t||(t=!0,e()):setTimeout(n,10)};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}function Zt(e,t){if(e===t)return 0;if("[MIN_NAME]"===e||"[MAX_NAME]"===t)return-1;if("[MIN_NAME]"===t||"[MAX_NAME]"===e)return 1;var n=on(e),o=on(t);return null===n?null===o?e<t?-1:1:1:null===o?-1:0==n-o?e.length-t.length:n-o}function en(e,t){if(t&&e in t)return t[e];throw Error("Missing required key ("+e+") in object: "+Et(t))}function tn(e){if("object"!==("undefined"===typeof e?"undefined":babelHelpers.typeof(e))||null===e)return Et(e);var t,n=[];for(t in e)n.push(t);n.sort(),t="{";for(var o=0;o<n.length;o++)0!==o&&(t+=","),t+=Et(n[o]),t+=":",t+=tn(e[n[o]]);return t+"}"}function nn(e,t){if(e.length<=t)return[e];for(var n=[],o=0;o<e.length;o+=t)o+t>e?n.push(e.substring(o,e.length)):n.push(e.substring(o,o+t));return n}function an(e,t){if(s(e))for(var n=0;n<e.length;++n)t(n,e[n]);else ot(e,t)}function dn(t){var n=Math.round;tr(!Xt(t),"Invalid JSON number");var o,i,r,d;for(0===t?(r=i=0,o=-Infinity===1/t?1:0):(o=0>t,t=Math.abs(t),2.2250738585072014e-308<=t?(r=Vi(Ji(_i(t)/Math.LN2),1023),i=r+1023,r=n(t*g(2,52-r)-4503599627370496)):(i=0,r=n(t/5e-324))),d=[],t=52;t;--t)d.push(r%2?1:0),r=Ji(r/2);for(t=11;t;--t)d.push(i%2?1:0),i=Ji(i/2);for(d.push(o?1:0),d.reverse(),o=d.join(""),i="",t=0;64>t;t+=8)r=parseInt(o.substr(t,8),2).toString(16),1===r.length&&(r="0"+r),i+=r;return i.toLowerCase()}function on(e){return dr.test(e)&&(e=+e,-2147483648<=e&&2147483647>=e)?e:null}function rn(e){try{e()}catch(e){setTimeout(function(){throw zt("Exception was thrown by user callback.",e.stack||""),e},0)}}function sn(e,t,n){Object.defineProperty(e,t,{get:n})}function cn(e,t){var n=setTimeout(e,t);return"object"===("undefined"===typeof n?"undefined":babelHelpers.typeof(n))&&n.unref&&n.unref(),n}function pn(t){var n={},o={},i={},r="";try{var s=t.split("."),n=Tt(Kt(s[0])||""),o=Tt(Kt(s[1])||""),r=s[2],i=o.d||{};delete o.d}catch(e){}return{tg:n,Je:o,data:i,mg:r}}function un(e){e=pn(e);var t=e.Je;return!!e.mg&&!!t&&"object"===("undefined"===typeof t?"undefined":babelHelpers.typeof(t))&&t.hasOwnProperty("iat")}function ln(e){return e=pn(e).Je,"object"===("undefined"===typeof e?"undefined":babelHelpers.typeof(e))&&!0===St(e,"admin")}function fn(){}function hn(e){return j(e.compare,e)}function bn(e){tr(!e.e()&&".priority"!==Rn(e),"Can't create PathIndex with empty path or .priority key"),this.bc=e}function gn(){}function yn(){}function mn(){}function vn(e,t){this.od=e,this.cc=t}function kn(e,t,n){var o=v(e.od,function(o,d){var i=St(e.cc,d);if(tr(i,"Missing index implementation for "+d),o===or){if(i.xc(t.R)){for(var r=[],s=n.Wb(C),c=Hn(s);c;)c.name!=t.name&&r.push(c),c=Hn(s);return r.push(t),sa(r,hn(i))}return or}return i=n.get(t.name),r=o,i&&(r=r.remove(new Ot(t.name,i))),r.Oa(t,t.R)});return new vn(o,e.cc)}function Sn(e,t,n){var o=v(e.od,function(e){if(e===or)return e;var o=n.get(t.name);return o?e.remove(new Ot(t.name,o)):e});return new vn(o,e.cc)}function wn(e,t){this.B=e,tr(o(this.B)&&null!==this.B,"LeafNode shouldn't be created with null/undefined value."),this.aa=t||rd,pa(this.aa),this.Db=null}function An(){this.set={}}function Fn(e,t){ot(e.set,function(e,n){t(n,e)})}function jn(e){tr(s(e)&&0<e.length,"Requires a non-empty array"),this.Bf=e,this.Dc={}}function Tn(e,t){tr(_e(e.Bf,function(e){return e===t}),"Unknown event: "+t)}function En(){if(jn.call(this,["online"]),this.hc=!0,"undefined"!==typeof window&&"undefined"!==typeof window.addEventListener&&!Rt()){var e=this;window.addEventListener("online",function(){e.hc||(e.hc=!0,e.Ge("online",!0))},!1),window.addEventListener("offline",function(){e.hc&&(e.hc=!1,e.Ge("online",!1))},!1)}}function Cn(){jn.call(this,["visible"]);var e,t;if("undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"===typeof document.hidden?"undefined"===typeof document.mozHidden?"undefined"===typeof document.msHidden?"undefined"!==typeof document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden"):(t="msvisibilitychange",e="msHidden"):(t="mozvisibilitychange",e="mozHidden"):(t="visibilitychange",e="hidden")),this.Mb=!0,t){var n=this;document.addEventListener(t,function(){var t=!document[e];t!==n.Mb&&(n.Mb=t,n.Ge("visible",t))},!1)}}function In(e,t){if(1==arguments.length){this.o=e.split("/");for(var n=0,o=0;o<this.o.length;o++)0<this.o[o].length&&(this.o[n]=this.o[o],n++);this.o.length=n,this.Y=0}else this.o=e,this.Y=t}function E(e,t){var n=Rn(e);if(null===n)return t;if(n===Rn(t))return E(On(e),On(t));throw Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function P(t,n){for(var o,i=t.slice(),r=n.slice(),d=0;d<i.length&&d<r.length;d++)if(o=Zt(i[d],r[d]),0!==o)return o;return i.length===r.length?0:i.length<r.length?-1:1}function Rn(e){return e.Y>=e.o.length?null:e.o[e.Y]}function K(e){return e.o.length-e.Y}function On(e){var t=e.Y;return t<e.o.length&&t++,new In(e.o,t)}function N(e){return e.Y<e.o.length?e.o[e.o.length-1]:null}function Dn(e,t){this.Qa=e.slice(),this.Ha=$i(1,this.Qa.length),this.Qe=t;for(var n=0;n<this.Qa.length;n++)this.Ha+=Ct(this.Qa[n]);Nn(this)}function Nn(e){if(768<e.Ha)throw Error(e.Qe+"has a key path longer than 768 bytes ("+e.Ha+").");if(32<e.Qa.length)throw Error(e.Qe+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Ln(e))}function Ln(e){return 0==e.Qa.length?"":"in property '"+e.Qa.join(".")+"'"}function Pn(){this.children={},this.bd=0,this.value=null}function xn(e,t,n){this.ud=e?e:"",this.Pc=t?t:null,this.A=n?n:new Pn}function Qn(t,n){for(var o,e=n instanceof In?n:new In(n),i=t;null!==(o=Rn(e));)i=new xn(o,i,St(i.A.children,o)||new Pn),e=On(e);return i}function Bn(e,t){tr("undefined"!==typeof t,"Cannot set value to undefined"),e.A.value=t,Wn(e)}function Mn(e,t,n,o){n&&!o&&t(e),e.O(function(e){Mn(e,t,!0,o)}),n&&o&&t(e)}function Un(e,t){for(var n=e.parent();null!==n&&!t(n);)n=n.parent()}function Wn(t){if(null!==t.Pc){var n=t.Pc,o=t.ud,i=t.e(),d=kt(n.A.children,o);i&&d?(delete n.A.children[o],n.A.bd--,Wn(n)):i||d||(n.A.children[o]=t.A,n.A.bd++,Wn(n))}}function qn(e,t){this.La=e,this.ba=t?t:fr}function Kn(t,n){for(var o,i=t.ba,d=null;!i.e();){if(o=t.La(n,i.key),0===o){if(i.left.e())return d?d.key:null;for(i=i.left;!i.right.e();)i=i.right;return i.key}0>o?i=i.left:0<o&&(d=i,i=i.right)}throw Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}function Gn(t,n,o,i,d){for(this.Hd=d||null,this.le=i,this.Pa=[],d=1;!t.e();)if(d=n?o(t.key,n):1,i&&(d*=-1),0>d)t=this.le?t.left:t.right;else if(0===d){this.Pa.push(t);break}else this.Pa.push(t),t=this.le?t.right:t.left}function Hn(e){if(0===e.Pa.length)return null;var t,n=e.Pa.pop();if(t=e.Hd?e.Hd(n.key,n.value):{key:n.key,value:n.value},e.le)for(n=n.left;!n.e();)e.Pa.push(n),n=n.right;else for(n=n.right;!n.e();)e.Pa.push(n),n=n.left;return t}function M(e){if(0===e.Pa.length)return null;var t;return t=e.Pa,t=t[t.length-1],e.Hd?e.Hd(t.key,t.value):{key:t.key,value:t.value}}function Vn(t,n,o,i,d){this.key=t,this.value=n,this.color=null==o||o,this.left=null==i?fr:i,this.right=null==d?fr:d}function Jn(e){return e.left.e()?e:Jn(e.left)}function _n(e){return e.left.e()?fr:(e.left.ea()||e.left.left.ea()||(e=zn(e)),e=e.X(null,null,null,_n(e.left),null),$n(e))}function $n(e){return e.right.ea()&&!e.left.ea()&&(e=Xn(e)),e.left.ea()&&e.left.left.ea()&&(e=Yn(e)),e.left.ea()&&e.right.ea()&&(e=Zn(e)),e}function zn(e){return e=Zn(e),e.right.left.ea()&&(e=e.X(null,null,null,null,Yn(e.right)),e=Xn(e),e=Zn(e)),e}function Xn(e){return e.right.X(null,null,e.color,e.X(null,null,!0,null,e.right.left),null)}function Yn(e){return e.left.X(null,null,e.color,null,e.X(null,null,!0,e.left.right,null))}function Zn(e){return e.X(null,null,!e.color,e.left.X(null,null,!e.left.color,null,null),e.right.X(null,null,!e.right.color,null,null))}function ea(){}function ta(e,t,n){this.k=e,(this.aa=t)&&pa(this.aa),e.e()&&tr(!this.aa||this.aa.e(),"An empty node cannot have a priority"),this.yb=n,this.Db=null}function O(e,t){var n;return n=(n=da(e,t))?(n=n.Gc())&&n.name:e.k.Gc(),n?new Ot(n,e.k.get(n)):null}function na(e,t){var n;return n=(n=da(e,t))?(n=n.ec())&&n.name:e.k.ec(),n?new Ot(n,e.k.get(n)):null}function da(e,t){return t===rr?null:e.yb.get(t.toString())}function oa(t,n){if(null===t)return rd;var o=null;if("object"===("undefined"===typeof t?"undefined":babelHelpers.typeof(t))&&".priority"in t?o=t[".priority"]:"undefined"!==typeof n&&(o=n),tr(null===o||"string"===typeof o||"number"===typeof o||"object"===("undefined"===typeof o?"undefined":babelHelpers.typeof(o))&&".sv"in o,"Invalid priority type found: "+("undefined"===typeof o?"undefined":babelHelpers.typeof(o))),"object"===("undefined"===typeof t?"undefined":babelHelpers.typeof(t))&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!==("undefined"===typeof t?"undefined":babelHelpers.typeof(t))||".sv"in t)return new wn(t,oa(o));if(t instanceof Array){var i=rd,d=t;return ot(d,function(e,t){if(kt(d,t)&&"."!==t.substring(0,1)){var n=oa(e);(n.J()||!n.e())&&(i=i.T(t,n))}}),i.fa(oa(o))}var e=[],r=!1,s=t;if(w(s,function(t){if("string"!==typeof t||"."!==t.substring(0,1)){var n=oa(s[t]);n.e()||(r=r||!n.C().e(),e.push(new Ot(t,n)))}}),0==e.length)return rd;var p=sa(e,Dt,function(e){return e.name},Nt);if(r){var u=sa(e,hn(ir));return new ta(p,oa(o),new vn({".priority":u},{".priority":ir}))}return new ta(p,oa(o),cr)}function G(e){this.count=parseInt(_i(e+1)/nd,10),this.Oe=this.count-1,this.Cf=e+1&parseInt(Array(this.count+1).join("1"),2)}function ia(e){var t=!(e.Cf&1<<e.Oe);return e.Oe--,t}function sa(t,n,o,i){function r(e,n){var d=n-e;if(0==d)return null;if(1==d){var i=t[e],s=o?o(i):i;return new Vn(s,i.R,!1,null,null)}var i=parseInt(d/2,10)+e,d=r(e,i),c=r(i+1,n),i=t[i],s=o?o(i):i;return new Vn(s,i.R,!1,d,c)}t.sort(n);var e=function(e){function n(e,n){var c=s-e,p=s;s-=e;var p=r(c+1,p),c=t[c],u=o?o(c):c,p=new Vn(u,c.R,n,null,p);d?d.left=p:i=p,d=p}for(var d=null,i=null,s=t.length,c=0;c<e.count;++c){var p=ia(e),u=g(2,e.count-(c+1));p?n(u,!1):(n(u,!1),n(u,!0))}return i}(new G(t.length));return null===e?new qn(i||n):new qn(i||n,e)}function ca(e){return"number"===typeof e?"number:"+dn(e):"string:"+e}function pa(e){if(e.J()){var t=e.H();tr("string"===typeof t||"number"===typeof t||"object"===("undefined"===typeof t?"undefined":babelHelpers.typeof(t))&&kt(t,".sv"),"Priority must be a string or number.")}else tr(e===L||e.e(),"priority of unexpected type.");tr(e===L||e.C().e(),"Priority nodes can't have a priority of their own.")}function ua(){ta.call(this,new qn(Nt),rd,cr)}function la(e,t){this.value=e,this.children=t||yr}function fa(e){var t=wd;return ot(e,function(e,n){t=t.set(new In(n),e)}),t}function ha(e,t,n){if(null!=e.value&&n(e.value))return{path:lr,value:e.value};if(t.e())return null;var o=Rn(t);return e=e.children.get(o),null===e?null:(t=ha(e,On(t),n),null==t?null:{path:new In(o).n(t.path),value:t.value})}function ga(e,t){return ha(e,t,function(){return!0})}function ma(e,t,n){if(t.e())return n;var o=Rn(t);return t=ma(e.children.get(o)||wd,On(t),n),o=t.e()?e.children.remove(o):e.children.Oa(o,t),new la(e.value,o)}function ka(e,t){return Sa(e,lr,t)}function Sa(e,t,n){var o={};return e.children.ha(function(e,d){o[e]=Sa(d,t.n(e),n)}),n(t,e.value,o)}function Fa(e,t,n){return ja(e,t,lr,n)}function ja(t,n,o,i){var d=!!t.value&&i(o,t.value);return d?d:n.e()?null:(d=Rn(n),(t=t.children.get(d))?ja(t,On(n),o.n(d),i):null)}function Ta(e,t,n){Ea(e,t,lr,n)}function Ea(t,n,o,i){if(n.e())return t;t.value&&i(o,t.value);var d=Rn(n);return(t=t.children.get(d))?Ea(t,On(n),o.n(d),i):wd}function Ia(e,t){Ra(e,lr,t)}function Ra(e,t,n){e.children.ha(function(d,o){Ra(o,t.n(d),n)}),e.value&&n(t,e.value)}function Oa(e,t){e.children.ha(function(e,n){n.value&&t(e,n.value)})}function Da(e){return F(e)&&0!==e.length&&!R.test(e)}function Na(e){return null===e||F(e)||d(e)&&!Xt(e)||l(e)&&kt(e,".sv")}function La(e,t,n,i){i&&!o(t)||Pa(y(e,1,i),t,n)}function Pa(t,n,i){if(i instanceof In&&(i=new Dn(i,t)),!o(n))throw Error(t+"contains undefined "+Ln(i));if(p(n))throw Error(t+"contains a function "+Ln(i)+" with contents: "+n.toString());if(Xt(n))throw Error(t+"contains "+n.toString()+" "+Ln(i));if(F(n)&&n.length>10485760/3&&10485760<Ct(n))throw Error(t+"contains a string greater than 10485760 utf8 bytes "+Ln(i)+" ('"+n.substring(0,50)+"...')");if(l(n)){var r=!1,d=!1;if(w(n,function(e,n){if(".value"===e)r=!0;else if(".priority"!==e&&".sv"!==e&&(d=!0,!Da(e)))throw Error(t+" contains an invalid key ("+e+") "+Ln(i)+".  Keys must be non-empty strings and can't contain \".\", \"#\", \"$\", \"/\", \"[\", or \"]\"");i.push(e),Pa(t,n,i),i.pop()}),r&&d)throw Error(t+" contains \".value\" child "+Ln(i)+" in addition to actual children.")}}function Qa(t,n){var o,i;for(o=0;o<n.length;o++){i=n[o];for(var d=i.slice(),e=0;e<d.length;e++)if((".priority"!==d[e]||e!==d.length-1)&&!Da(d[e]))throw Error(t+"contains an invalid key ("+d[e]+") in path "+i.toString()+". Keys must be non-empty strings and can't contain \".\", \"#\", \"$\", \"/\", \"[\", or \"]\"")}for(n.sort(P),d=null,o=0;o<n.length;o++){if(i=n[o],null!==d&&d.contains(i))throw Error(t+"contains a path "+d.toString()+" that is ancestor of another path "+i.toString());d=i}}function Ma(t,n,o){var i=y(t,1,!1);if(!l(n)||s(n))throw Error(i+" must be an object containing the children to replace.");var d=[];w(n,function(e,t){var n=new In(e);if(Pa(i,t,o.n(n)),".priority"===N(n)&&!Na(t))throw Error(i+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");d.push(n)}),Qa(i,d)}function Ka(e,t,n){if(Xt(n))throw Error(y(e,t,!1)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Na(n))throw Error(y(e,t,!1)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}function Ga(e,t,n){if(!n||o(t))switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw Error(y(e,1,n)+"must be a valid event type: \"value\", \"child_added\", \"child_removed\", \"child_changed\", or \"child_moved\".");}}function Ha(e,t){if(o(t)&&!Da(t))throw Error(y(e,2,!0)+"was an invalid key: \""+t+"\".  Firebase keys must be non-empty strings and can't contain \".\", \"#\", \"$\", \"/\", \"[\", or \"]\").")}function Ja(e,t){if(!F(t)||0===t.length||Kd.test(t))throw Error(y(e,1,!1)+"was an invalid path: \""+t+"\". Paths must be non-empty strings and can't contain \".\", \"#\", \"$\", \"[\", or \"]\"")}function _a(e,t){if(".info"===Rn(t))throw Error(e+" failed: Can't modify data under /.info/")}function ed(e,t){var n,d=t.path.toString();if(!(n=!F(t.jc.host)||0===t.jc.host.length||!Da(t.jc.pe))&&(n=0!==d.length)&&(d&&(d=d.replace(/^\/*\.info(\/|$)/,"/")),n=!F(d)||0===d.length||Kd.test(d)),n)throw Error(y(e,1,!1)+"must be a valid firebase URL and the path can't contain \".\", \"#\", \"$\", \"[\", or \"]\".")}function td(){this.k=this.B=null}function ad(e,t,n){if(t.e())e.B=n,e.k=null;else if(null!==e.B)e.B=e.B.F(t,n);else{null==e.k&&(e.k=new An);var o=Rn(t);e.k.contains(o)||e.k.add(o,new td),e=e.k.get(o),t=On(t),ad(e,t,n)}}function dd(e,t){if(t.e())return e.B=null,e.k=null,!0;if(null!==e.B){if(e.B.J())return!1;var n=e.B;return e.B=null,n.O(ir,function(t,n){ad(e,new In(t),n)}),dd(e,t)}return null===e.k||(n=Rn(t),t=On(t),e.k.contains(n)&&dd(e.k.get(n),t)&&e.k.remove(n),!!e.k.e()&&(e.k=null,!0))}function od(e,t,n){null===e.B?e.O(function(d,o){var e=new In(t.toString()+"/"+d);od(o,e,n)}):n(t,e.B)}function id(e,t){this.type=ee,this.source=e,this.path=t}function sd(e,t,n){this.type=ge,this.source=e,this.path=t,this.children=n}function ae(e,t,n){this.type=be,this.source=$d,this.path=e,this.Ob=t,this.Id=n}function de(e,t,n){this.type=Ld,this.source=e,this.path=t,this.Ga=n}function ce(e,t,n,o){this.ee=e,this.Se=t,this.Hb=n,this.Ee=o,tr(!o||t,"Tagged queries must be from server.")}function he(e,t,n){this.A=e,this.da=t,this.Sb=n}function je(e){return e.da}function ke(e){return e.Sb}function le(e,t){return t.e()?e.da&&!e.Sb:me(e,Rn(t))}function me(e,t){return e.da&&!e.Sb||e.A.Da(t)}function ne(e,t){this.N=e,this.Ld=t}function oe(e,t,n,o){return new ne(new he(t,n,o),e.Ld)}function pe(e){return e.N.da?e.N.j():null}function qe(e){return e.Ld.da?e.Ld.j():null}function re(){}function se(e,t,n){this.xf=e,this.Ka=t,this.yd=n}function ue(e,t){this.Sd=e,this.Df=t}function ve(e){this.U=e}function we(t,n,o,i,d,e){var r=n.N;if(null!=i.lc(o))return n;var s;if(o.e())tr(je(n.w()),"If change path is empty, we must have complete server data"),ke(n.w())?(d=qe(n),i=i.rc(d instanceof ta?d:rd)):i=i.Aa(qe(n)),e=t.U.ya(n.N.j(),i,e);else{var c=Rn(o);if(".priority"==c)tr(1==K(o),"Can't have a priority with additional path components"),e=r.j(),s=n.w().j(),i=i.ad(o,e,s),e=null==i?r.j():t.U.fa(e,i);else{var p=On(o);me(r,c)?(s=n.w().j(),i=i.ad(o,r.j(),s),i=null==i?r.j().Q(c):r.j().Q(c).F(p,i)):i=i.qc(c,n.w()),e=null==i?r.j():t.U.F(r.j(),c,i,p,d,e)}}return oe(n,e,r.da||o.e(),t.U.Na())}function De(t,n,o,i,d,e,r,s){var c=n.w();if(r=r?t.U:t.U.Ub(),o.e())i=r.ya(c.j(),i,null);else if(r.Na()&&!c.Sb)i=c.j().F(o,i),i=r.ya(c.j(),i,null);else{var p=Rn(o);if(!le(c,o)&&1<K(o))return n;var l=On(o);i=c.j().Q(p).F(l,i),i=".priority"==p?r.fa(c.j(),i):r.F(c.j(),p,i,l,ie,null)}return c=c.da||o.e(),n=new ne(n.N,new he(i,c,r.Na())),we(t,n,o,d,new se(d,n,e),s)}function ze(t,n,o,i,d,e,r){var s=n.N;if(d=new se(d,n,e),o.e())r=t.U.ya(n.N.j(),i,r),t=oe(n,r,!0,t.U.Na());else if(e=Rn(o),".priority"===e)r=t.U.fa(n.N.j(),i),t=oe(n,r,s.da,s.Sb);else{o=On(o);var c=s.j().Q(e);if(!o.e()){var p=d.Te(e);i=null==p?rd:".priority"===N(o)&&p.P(o.parent()).e()?p:p.F(o,i)}c.Z(i)?t=n:(r=t.U.F(s.j(),e,i,o,d,r),t=oe(n,r,s.da,t.U.Na()))}return t}function ye(t,n,o,i,r,e,s){var c=n;return Ia(i,function(i,d){var p=o.n(i);me(n.N,Rn(p))&&(c=ze(t,c,p,d,r,e,s))}),Ia(i,function(i,d){var p=o.n(i);me(n.N,Rn(p))||(c=ze(t,c,p,d,r,e,s))}),c}function Ae(e,t){return Ia(t,function(t,n){e=e.F(t,n)}),e}function Fe(t,n,o,i,r,e,s,p){if(n.w().j().e()&&!je(n.w()))return n;var u=n;o=o.e()?i:ma(wd,o,i);var f=n.w().j();return o.children.ha(function(o,i){if(f.Da(o)){var d=n.w().j().Q(o),d=Ae(d,i);u=De(t,u,new In(o),d,r,e,s,p)}}),o.children.ha(function(o,i){var d=!me(n.w(),o)&&null==i.value;f.Da(o)||d||(d=n.w().j().Q(o),d=Ae(d,i),u=De(t,u,new In(o),d,r,e,s,p))}),u}function Be(t,n,o,i,d,e,r){if(null!=d.lc(o))return n;var s=ke(n.w()),c=n.w();if(null!=i.value){if(o.e()&&c.da||le(c,o))return De(t,n,o,c.j().P(o),d,e,s,r);if(o.e()){var p=wd;return c.j().O(rr,function(e,t){p=p.set(new In(e),t)}),Fe(t,n,o,p,d,e,s,r)}return n}return p=wd,Ia(i,function(e){var t=o.n(e);le(c,t)&&(p=p.set(e,c.j().P(t)))}),Fe(t,n,o,p,d,e,s,r)}function Ce(e){this.V=e,this.g=e.m.g}function Ge(t,n,o,i){var d=[],e=[];return xa(n,function(n){n.type===Le&&t.g.nd(n.qe,n.Ja)&&e.push(new ld(Ie,n.Ja,n.Xa))}),He(t,d,Me,n,i,o),He(t,d,te,n,i,o),He(t,d,Ie,e,i,o),He(t,d,Le,n,i,o),He(t,d,Je,n,i,o),d}function He(t,n,o,i,r,e){i=ya(i,function(e){return e.type===o}),at(i,j(t.Ff,t)),xa(i,function(o){var i=Ke(t,o,e);xa(r,function(d){d.nf(o.type)&&n.push(d.createEvent(i,t.V))})})}function Ke(e,t,n){return"value"!==t.type&&"child_removed"!==t.type&&(t.Dd=n.Ve(t.Xa,t.Ja,e.g)),t}function Oe(t,n){this.V=t;var o=t.m,i=new $e(o.g),o=Ad(o)?new $e(o.g):o.xa?new Se(o):new Qe(o);this.hf=new ve(o);var d=n.w(),e=n.N,r=i.ya(rd,d.j(),null),s=o.ya(rd,e.j(),null);this.Ka=new ne(new he(s,e.da,o.Na()),new he(r,d.da,i.Na())),this.Za=[],this.Jf=new Ce(t)}function Pe(e){return e.V}function Te(e,t){var n=e.Ka.N,o=[];return n.j().J()||n.j().O(ir,function(e,t){o.push(new ld(te,t,e))}),n.da&&o.push(S(n.j())),Ve(e,o,n.j(),t)}function Ve(e,t,n,o){return Ge(e.Jf,t,n,o?[o]:e.Za)}function Ue(e,t,n,o){this.ae=t,this.Md=n,this.Dd=o,this.hd=e}function We(e,t,n){this.ae=e,this.error=t,this.path=n}function Xe(){this.vb=[]}function Ye(t,n){for(var o=null,i=0;i<n.length;i++){var d=n[i],e=d.Yb();null===o||e.Z(o.Yb())||(t.vb.push(o),o=null),null===o&&(o=new ud(e)),o.add(d)}o&&t.vb.push(o)}function Ze(e,t,n){Ye(e,n),pd(e,function(e){return e.Z(t)})}function cd(e,t,n){Ye(e,n),pd(e,function(e){return e.contains(t)||t.contains(e)})}function pd(t,n){for(var o,e=!0,i=0;i<t.vb.length;i++)if(o=t.vb[i],o)if(o=o.Yb(),n(o)){for(var d,o=t.vb[i],r=0;r<o.jd.length;r++)if(d=o.jd[r],null!==d){o.jd[r]=null;var s=d.Tb();nr&&Jt("event: "+d.toString()),rn(s)}t.vb[i]=null}else e=!1;e&&(t.vb=[])}function ud(e){this.qa=e,this.jd=[]}function $e(e){this.g=e}function Qe(e){this.he=new $e(e.g),this.g=e.g;var t;e.ka?(t=gd(e),t=e.g.Ec(bd(e),t)):t=e.g.Hc(),this.Uc=t,e.na?(t=md(e),e=e.g.Ec(yd(e),t)):e=e.g.Fc(),this.vc=e}function Se(e){this.sa=new Qe(e),this.g=e.g,tr(e.xa,"Only valid if limit has been set"),this.oa=e.oa,this.Ib=!hd(e)}function Re(t,n,o,i,d,e){var r;if(t.Ib){var s=hn(t.g);r=function(e,t){return s(t,e)}}else r=hn(t.g);tr(n.Eb()==t.oa,"");var c=new Ot(o,i),p=t.Ib?O(n,t.g):na(n,t.g),l=t.sa.matches(c);if(n.Da(o)){for(var u=n.Q(o),p=d.fe(t.g,p,t.Ib);null!=p&&(p.name==o||n.Da(p.name));)p=d.fe(t.g,p,t.Ib);return(d=null==p?1:r(p,c),l&&!i.e()&&0<=d)?(null!=e&&xe(e,new ld(Le,i,o,u)),n.T(o,i)):(null!=e&&xe(e,new ld(Me,u,o)),n=n.T(o,rd),null!=p&&t.sa.matches(p)?(null!=e&&xe(e,new ld(te,p.R,p.name)),n.T(p.name,p.R)):n)}return i.e()?n:l&&0<=r(p,c)?(null!=e&&(xe(e,new ld(Me,p.R,p.name)),xe(e,new ld(te,i,o))),n.T(o,i).T(p.name,rd)):n}function ld(e,t,n,o){this.type=e,this.Ja=t,this.Xa=n,this.qe=o,this.Dd=void 0}function S(e){return new ld(Je,e)}function Ee(){this.fb={}}function xe(t,n){var o=n.type,i=n.Xa;tr(o==te||o==Le||o==Me,"Only child changes supported for tracking"),tr(".priority"!==i,"Only non-priority child changes can be tracked.");var d=St(t.fb,i);if(d){var e=d.type;if(o==te&&e==Me)t.fb[i]=new ld(Le,n.Ja,i,d.Ja);else if(o==Me&&e==te)delete t.fb[i];else if(o==Me&&e==Le)t.fb[i]=new ld(Me,d.qe,i);else if(o==Le&&e==te)t.fb[i]=new ld(te,n.Ja,i);else if(o==Le&&e==Le)t.fb[i]=new ld(Le,n.Ja,i,d.qe);else throw D("Illegal combination of changes: "+n+" occurred after "+d)}else t.fb[i]=n}function fd(){this.Rb=this.na=this.Kb=this.ka=this.xa=!1,this.oa=0,this.mb="",this.dc=null,this.zb="",this.ac=null,this.xb="",this.g=ir}function hd(e){return""===e.mb?e.ka:"l"===e.mb}function bd(e){return tr(e.ka,"Only valid if start has been set"),e.dc}function gd(e){return tr(e.ka,"Only valid if start has been set"),e.Kb?e.zb:"[MIN_NAME]"}function yd(e){return tr(e.na,"Only valid if end has been set"),e.ac}function md(e){return tr(e.na,"Only valid if end has been set"),e.Rb?e.xb:"[MAX_NAME]"}function vd(e){var t=new fd;return t.xa=e.xa,t.oa=e.oa,t.ka=e.ka,t.dc=e.dc,t.Kb=e.Kb,t.zb=e.zb,t.na=e.na,t.ac=e.ac,t.Rb=e.Rb,t.xb=e.xb,t.g=e.g,t.mb=e.mb,t}function kd(e,t){var n=vd(e);return n.g=t,n}function Sd(e){var t={};if(e.ka&&(t.sp=e.dc,e.Kb&&(t.sn=e.zb)),e.na&&(t.ep=e.ac,e.Rb&&(t.en=e.xb)),e.xa){t.l=e.oa;var n=e.mb;""===n&&(n=hd(e)?"l":"r"),t.vf=n}return e.g!==ir&&(t.i=e.g.toString()),t}function Ad(e){return!(e.ka||e.na||e.xa)}function T(e){return Ad(e)&&e.g==ir}function Fd(e){var t={};if(T(e))return t;var n;return e.g===ir?n="$priority":e.g===sr?n="$value":e.g===rr?n="$key":(tr(e.g instanceof bn,"Unrecognized index type!"),n=e.g.toString()),t.orderBy=Et(n),e.ka&&(t.startAt=Et(e.dc),e.Kb&&(t.startAt+=","+Et(e.zb))),e.na&&(t.endAt=Et(e.ac),e.Rb&&(t.endAt+=","+Et(e.xb))),e.xa&&(hd(e)?t.limitToFirst=e.oa:t.limitToLast=e.oa),t}function jd(e){this.W=e}function Td(t,n,o){if(n.e())return new jd(new la(o));var i=ga(t.W,n);if(null!=i){var d=i.path,i=i.value;return n=E(d,n),i=i.F(n,o),new jd(t.W.set(d,i))}return t=ma(t.W,n,new la(o)),new jd(t)}function Ed(e,t,n){var o=e;return w(n,function(e,n){o=Td(o,t.n(e),n)}),o}function Cd(e,t){var n=ga(e.W,t);return null==n?null:e.W.get(n.path).P(E(n.path,t))}function Id(e){var t=[],n=e.W.value;return null==n?e.W.children.ha(function(e,n){null!=n.value&&t.push(new Ot(e,n.value))}):n.J()||n.O(ir,function(e,n){t.push(new Ot(e,n))}),t}function Rd(e,t){if(t.e())return e;var n=Cd(e,t);return null==n?new jd(e.W.subtree(t)):new jd(new la(n))}function Od(e,t,n){if(null!=t.value)return n.F(e,t.value);var o=null;return t.children.ha(function(t,d){".priority"===t?(tr(null!==d.value,"Priority writes must always be leaf nodes"),o=d.value):n=Od(e.n(t),d,n)}),n.P(e).e()||null===o||(n=n.F(e.n(".priority"),o)),n}function Dd(){this.Jd=rd}function Nd(e){this.oc=e}function Pd(e,t){e.oc.INTERNAL.addAuthTokenListener(t)}function xd(){this.S=mr,this.la=[],this.Bc=-1}function Qd(e,t){for(var n,d=0;d<e.la.length;d++)if(n=e.la[d],n.Zc===t)return n;return null}function Bd(e,t){return e.Ga?e.path.contains(t):!!lt(e.children,function(n,o){return e.path.n(o).contains(t)})}function Md(e){return e.visible}function Ud(t,n,o){for(var i,r=mr,d=0;d<t.length;++d)if(i=t[d],n(i)){var e=i.path;if(i.Ga)o.contains(e)?(e=E(o,e),r=Td(r,e,i.Ga)):e.contains(o)&&(e=E(e,o),r=Td(r,lr,i.Ga.P(e)));else if(i.children)o.contains(e)?(e=E(o,e),r=Ed(r,e,i.children)):e.contains(o)&&((e=E(e,o),e.e())?r=Ed(r,lr,i.children):(i=St(i.children,Rn(e)))&&(i=i.P(On(e)),r=Td(r,lr,i)));else throw D("WriteRecord should have .snap or .children")}return r}function Wd(e,t){this.Lb=e,this.W=t}function qd(e,t){this.rf={},this.Vc=new Vd(e),this.va=t;var n=1E4+2E4*Math.random();cn(j(this.lf,this),Ji(n))}function Gd(){this.tc={}}function Hd(e,t,n){o(n)||(n=1),kt(e.tc,t)||(e.tc[t]=0),e.tc[t]+=n}function Vd(e){this.Ef=e,this.rd=null}function Jd(e){return e=e.toString(),vr[e]||(vr[e]=new Gd),vr[e]}function _d(e,t){var n=e.toString();return kr[n]||(kr[n]=t()),kr[n]}function zd(e,t,n){this.f=I("p:rest:"),this.L=e,this.Gb=t,this.$c=n,this.$={}}function Xd(e,t){return o(t)?"tag$"+t:(tr(T(e.m),"should have a tag if it's not a default query."),e.path.toString())}function Yd(t,n,o,e){o=o||{},o.format="export",t.$c.getToken(!1).then(function(d){(d=d&&d.accessToken)&&(o.auth=d);var i=(t.L.Sc?"https://":"http://")+t.L.host+n+"?"+wt(o);t.f("Sending REST request for "+i);var r=new XMLHttpRequest;r.onreadystatechange=function(){if(e&&4===r.readyState){t.f("REST Response for "+i+" received. status:",r.status,"response:",r.responseText);var n=null;if(200<=r.status&&300>r.status){try{n=Tt(r.responseText)}catch(e){zt("Failed to parse JSON response for "+i+": "+r.responseText)}e(null,n)}else 401!==r.status&&404!==r.status&&zt("Got unsuccessful REST response for "+i+" Status: "+r.status),e(r.status);e=null}},r.open("GET",i,!0),r.send()})}function Zd(e){this.te=e,this.Bd=[],this.Qb=0,this.Yd=-1,this.Fb=null}function eo(e,t,n){e.Yd=t,e.Fb=n,e.Yd<e.Qb&&(e.Fb(),e.Fb=null)}function to(t,n,o){for(t.Bd[n]=o;t.Bd[t.Qb];){var i=t.Bd[t.Qb];delete t.Bd[t.Qb];for(var d=0;d<i.length;++d)if(i[d]){rn(function(){t.te(i[d])})}if(t.Qb===t.Yd){t.Fb&&(clearTimeout(t.Fb),t.Fb(),t.Fb=null);break}t.Qb++}}function no(e,t,n,o){this.Zd=e,this.f=I(this.Zd),this.frames=this.zc=null,this.pb=this.qb=this.Fe=0,this.Va=Jd(t),e={v:"5"},"undefined"!==typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(e.r="f"),n&&(e.s=n),o&&(e.ls=o),this.Ke=Mt(t,Sr,e)}function ao(e,t){if(e.frames.push(t),e.frames.length==e.Fe){var n=e.frames.join("");e.frames=null,n=Tt(n),e.Xf(n)}}function oo(e){clearInterval(e.zc),e.zc=setInterval(function(){e.Ia&&io(e,"0"),oo(e)},45000)}function io(e,t){try{e.Ia.send(t)}catch(t){e.f("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(j(e.bb,e),0)}}function ro(e,t,n,o){this.Zd=e,this.f=I(e),this.jc=t,this.pb=this.qb=0,this.Va=Jd(t),this.tf=n,this.wc=!1,this.Cb=o,this.Yc=function(e){return Mt(t,wr,e)}}function so(e,t){var n=Et(t).length;e.pb+=n,Hd(e.Va,"bytes_received",n)}function co(e,t,n,o){if(this.Yc=o,this.ib=n,this.ve=new An,this.Qc=[],this.$d=Ji(1E8*Math.random()),this.Kd=!0,this.Qd=er(),window["pLPCommand"+this.Qd]=e,window["pRTLPCB"+this.Qd]=t,e=document.createElement("iframe"),e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Jt("No IE domain setting required")}catch(t){e.src="javascript:void((function(){document.open();document.domain='"+document.domain+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";e.contentDocument?e.gb=e.contentDocument:e.contentWindow?e.gb=e.contentWindow.document:e.document&&(e.gb=e.document),this.Ea=e,e="",this.Ea.src&&"javascript:"===this.Ea.src.substr(0,11)&&(e="<script>document.domain=\""+document.domain+"\";<\/script>"),e="<html><body>"+e+"</body></html>";try{this.Ea.gb.open(),this.Ea.gb.write(e),this.Ea.gb.close()}catch(e){Jt("frame writing exception"),e.stack&&Jt(e.stack),Jt(e)}}function po(t){if(t.Ud&&t.Kd&&t.ve.count()<(0<t.Qc.length?2:1)){t.$d++;for(var n={id:t.Vf,pw:t.Wf,ser:t.$d},n=t.Yc(n),o="",i=0;0<t.Qc.length&&1870>=t.Qc[0].Pe.length+30+o.length;){var d=t.Qc.shift(),o=o+"&seg"+i+"="+d.jg+"&ts"+i+"="+d.pg+"&d"+i+"="+d.Pe;i++}return uo(t,n+o,t.$d),!0}return!1}function uo(t,n,o){function i(){t.ve.remove(o),po(t)}t.ve.add(o,1);var d=setTimeout(i,25000);lo(t,n,function(){clearTimeout(d),i()})}function lo(e,t,n){setTimeout(function(){try{if(e.Kd){var o=e.Ea.gb.createElement("script");o.type="text/javascript",o.async=!0,o.src=t,o.onload=o.onreadystatechange=function(){var e=o.readyState;e&&"loaded"!==e&&"complete"!==e||(o.onload=o.onreadystatechange=null,o.parentNode&&o.parentNode.removeChild(o),n())},o.onerror=function(){Jt("Long-poll script failed to load: "+t),e.Kd=!1,e.close()},e.Ea.gb.body.appendChild(o)}}catch(t){}},1)}function fo(e){ho(this,e)}function ho(t,n){var o=no&&no.isAvailable(),i=o&&!(Yi.Ze||!0===Yi.get("previous_websocket_failure"));if(n.qg&&(o||zt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)t.Wc=[no];else{var d=t.Wc=[];an(Er,function(e,t){t&&t.isAvailable()&&d.push(t)})}}function bo(e){if(0<e.Wc.length)return e.Wc[0];throw Error("No transports available")}function go(t,n,o,i,d,e,r){this.id=t,this.f=I("c:"+this.id+":"),this.te=o,this.Lc=i,this.ia=d,this.se=e,this.L=n,this.Ad=[],this.Le=0,this.sf=new fo(n),this.Ua=0,this.Cb=r,this.f("Connection created"),yo(this)}function yo(e){var t=bo(e.sf);e.I=new t("c:"+e.id+":"+e.Le++,e.L,void 0,e.Cb),e.xe=t.responsesRequiredToBeHealthy||0;var n=vo(e,e.I),o=mo(e,e.I);e.Xc=e.I,e.Rc=e.I,e.D=null,e.Bb=!1,setTimeout(function(){e.I&&e.I.open(n,o)},0),t=t.healthyTimeout||0,0<t&&(e.md=cn(function(){e.md=null,e.Bb||(e.I&&102400<e.I.pb?(e.f("Connection exceeded healthy timeout but has received "+e.I.pb+" bytes.  Marking connection healthy."),e.Bb=!0,e.I.sd()):e.I&&10240<e.I.qb?e.f("Connection exceeded healthy timeout but has sent "+e.I.qb+" bytes.  Leaving connection alive."):(e.f("Closing unhealthy connection after timeout."),e.close()))},Ji(t)))}function mo(e,t){return function(n){t===e.I?(e.I=null,n||0!==e.Ua?1===e.Ua&&e.f("Realtime connection lost."):(e.f("Realtime connection failed."),"s-"===e.L.$a.substr(0,2)&&(Yi.remove("host:"+e.L.host),e.L.$a=e.L.host)),e.close()):t===e.D?(e.f("Secondary connection lost."),n=e.D,e.D=null,e.Xc!==n&&e.Rc!==n||e.close()):e.f("closing an old connection")}}function vo(t,n){return function(o){if(2!=t.Ua)if(n===t.Rc){var i=en("t",o);if(o=en("d",o),"c"!=i)"d"==i&&t.wd(o);else if(i=en("t",o),"d"in o)if(o=o.d,"h"===i){var i=o.ts,d=o.v,e=o.h;t.qf=o.s,Bt(t.L,e),0==t.Ua&&(t.I.start(),Fo(t,t.I,i),"5"!==d&&zt("Protocol version mismatch detected"),o=t.sf,(o=1<o.Wc.length?o.Wc[1]:null)&&Ao(t,o))}else if("n"===i){for(t.f("recvd end transmission on primary"),t.Rc=t.D,o=0;o<t.Ad.length;++o)t.wd(t.Ad[o]);t.Ad=[],ko(t)}else"s"===i?(t.f("Connection shutdown command received. Shutting down..."),t.se&&(t.se(o),t.se=null),t.ia=null,t.close()):"r"===i?(t.f("Reset packet received.  New host: "+o),Bt(t.L,o),1===t.Ua?t.close():(Eo(t),yo(t))):"e"===i?_t("Server Error: "+o):"o"===i?(t.f("got pong on primary."),wo(t),jo(t)):_t("Unknown control packet command: "+i)}else if(n!==t.D)t.f("message on old connection");else if(i=en("t",o),o=en("d",o),"c"==i)"t"in o&&(o=o.t,"a"===o?So(t):"r"===o?(t.f("Got a reset on secondary, closing it"),t.D.close(),t.Xc!==t.D&&t.Rc!==t.D||t.close()):"o"===o&&(t.f("got pong on secondary."),t.pf--,So(t)));else if("d"==i)t.Ad.push(o);else throw Error("Unknown protocol layer: "+i)}}function ko(e){e.Xc===e.D&&e.Rc===e.D&&(e.f("cleaning up and promoting a connection: "+e.D.Zd),e.I=e.D,e.D=null)}function So(e){0>=e.pf?(e.f("Secondary connection is healthy."),e.Bb=!0,e.D.sd(),e.D.start(),e.f("sending client ack on secondary"),e.D.send({t:"c",d:{t:"a",d:{}}}),e.f("Ending transmission on primary"),e.I.send({t:"c",d:{t:"n",d:{}}}),e.Xc=e.D,ko(e)):(e.f("sending ping on secondary."),e.D.send({t:"c",d:{t:"p",d:{}}}))}function wo(e){e.Bb||(e.xe--,0>=e.xe&&(e.f("Primary connection is healthy."),e.Bb=!0,e.I.sd()))}function Ao(e,t){e.D=new t("c:"+e.id+":"+e.Le++,e.L,e.qf),e.pf=t.responsesRequiredToBeHealthy||0,e.D.open(vo(e,e.D),mo(e,e.D)),cn(function(){e.D&&(e.f("Timed out trying to upgrade."),e.D.close())},60000)}function Fo(e,t,n){e.f("Realtime connection established."),e.I=t,e.Ua=1,e.Lc&&(e.Lc(n,e.qf),e.Lc=null),0===e.xe?(e.f("Primary connection is healthy."),e.Bb=!0):cn(function(){jo(e)},5000)}function jo(e){e.Bb||1!==e.Ua||(e.f("sending ping on primary."),To(e,{t:"c",d:{t:"p",d:{}}}))}function To(e,t){if(1!==e.Ua)throw"Connection is not connected";e.Xc.send(t)}function Eo(e){e.f("Shutting down all connections"),e.I&&(e.I.close(),e.I=null),e.D&&(e.D.close(),e.D=null),e.md&&(clearTimeout(e.md),e.md=null)}function Co(t,n,o,i,d,e){if(this.id=Cr++,this.f=I("p:"+this.id+":"),this.qd={},this.$={},this.pa=[],this.Oc=0,this.Kc=[],this.ma=!1,this.Sa=1E3,this.td=3E5,this.Gb=n,this.Jc=o,this.ue=i,this.L=t,this.ob=this.Fa=this.Cb=this.ze=null,this.$c=d,this.de=!1,this.ke=0,e)throw Error("Auth override specified in options, but not supported on non Node.js platforms");this.Vd=e,this.ub=null,this.Mb=!1,this.Gd={},this.ig=0,this.Re=!0,this.Ac=this.me=null,Lo(this,0),Cn.Vb().gc("visible",this.Zf,this),-1===t.host.indexOf("fblocal")&&En.Vb().gc("online",this.Yf,this)}function Io(n,o){var i=o.eg,r=i.path.toString(),c=i.ja();n.f("Listen on "+r+" for "+c);var e={p:r};o.tag&&(e.q=Sd(i.m),e.t=o.tag),e.h=o.ld(),n.ua("q",e,function(e){var d=e.d,p=e.s;if(d&&"object"===("undefined"===typeof d?"undefined":babelHelpers.typeof(d))&&kt(d,"w")){var u=St(d,"w");s(u)&&0<=t(u,"no_index")&&zt("Using an unspecified index. Consider adding \".indexOn\": \""+i.m.g.toString()+"\" at "+i.path.toString()+" to your security rules for better performance")}(n.$[r]&&n.$[r][c])===o&&(n.f("listen response",e),"ok"!==p&&Qo(n,r,c),o.G&&o.G(p,d))})}function Ro(e){if(e.ma&&e.ob){var t=e.ob,n=un(t)?"auth":"gauth",o={cred:t};null===e.Vd?o.noauth=!0:"object"===babelHelpers.typeof(e.Vd)&&(o.authvar=e.Vd),e.ua(n,o,function(n){var o=n.s;n=n.d||"error",e.ob===t&&("ok"===o?e.ke=0:Bo(e,o,n))})}}function Oo(t,n,o,i,r){o={p:o,d:i},t.f("onDisconnect "+n,o),t.ua(n,o,function(e){r&&setTimeout(function(){r(e.s,e.d)},0)})}function Do(t,n,i,r,s,p){r={p:i,d:r},o(p)&&(r.h=p),t.pa.push({action:n,mf:r,G:s}),t.Oc++,n=t.pa.length-1,t.ma?No(t,n):t.f("Buffering put: "+i)}function No(t,n){var o=t.pa[n].action,i=t.pa[n].mf,r=t.pa[n].G;t.pa[n].fg=t.ma,t.ua(o,i,function(e){t.f(o+" response",e),delete t.pa[n],t.Oc--,0===t.Oc&&(t.pa=[]),r&&r(e.s,e.d)})}function Lo(e,t){tr(!e.Fa,"Scheduling a connect when we're already connected/ing?"),e.ub&&clearTimeout(e.ub),e.ub=setTimeout(function(){e.ub=null,Po(e)},Ji(t))}function Po(t){if(Uo(t)){t.f("Making a connection attempt"),t.me=new Date().getTime(),t.Ac=null;var n=j(t.wd,t),o=j(t.Lc,t),i=j(t.df,t),d=t.id+":"+Ir++,e=t.Cb,r=!1,s=null,c=function(){s?s.close():(r=!0,i())};t.Fa={close:c,ua:function(e){tr(s,"sendRequest call when we're not connected not allowed."),s.ua(e)}};var p=t.de;t.de=!1,t.$c.getToken(p).then(function(c){r?Jt("getToken() completed but was canceled"):(Jt("getToken() completed. Creating connection."),t.ob=c&&c.accessToken,s=new go(d,t.L,n,o,i,function(e){zt(e+" ("+t.L.toString()+")"),t.ab("server_kill")},e))}).then(null,function(e){t.f("Failed to get token: "+e),r||c()})}}function xo(e,t,n){n=n?za(n,function(e){return tn(e)}).join("$"):"default",(e=Qo(e,t,n))&&e.G&&e.G("permission_denied")}function Qo(e,t,n){t=new In(t).toString();var i;return o(e.$[t])?(i=e.$[t][n],delete e.$[t][n],0===rt(e.$[t])&&delete e.$[t]):i=void 0,i}function Bo(e,t,n){Jt("Auth token revoked: "+t+"/"+n),e.ob=null,e.de=!0,e.Fa.close(),("invalid_token"===t||"permission_denied"===t)&&(e.ke++,3<=e.ke&&(e.Sa=3E4,e=e.$c,t="Provided authentication credentials for the app named \""+e.oc.name+"\" are invalid. This usually indicates your app was not initialized correctly. ",t="credential"in e.oc.options?t+"Make sure the \"credential\" property provided to initializeApp() is authorized to access the specified \"databaseURL\" and is from the correct project.":"serviceAccount"in e.oc.options?t+"Make sure the \"serviceAccount\" property provided to initializeApp() is authorized to access the specified \"databaseURL\" and is from the correct project.":t+"Make sure the \"apiKey\" and \"databaseURL\" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.",zt(t)))}function Mo(e){Ro(e),ot(e.$,function(t){ot(t,function(t){Io(e,t)})});for(var t=0;t<e.pa.length;t++)e.pa[t]&&No(e,t);for(;e.Kc.length;)t=e.Kc.shift(),Oo(e,t.action,t.we,t.data,t.G)}function Uo(e){var t;return t=En.Vb().hc,ht(e.qd)&&t}function Wo(e){e instanceof gi||$t("Don't call new Database() directly - please use firebase.database()."),this.ta=e,this.ba=new Y(e,lr),this.INTERNAL=new Ko(this)}function qo(e,t){null===e.ta&&$t("Cannot call "+t+" on a deleted database.")}function Ko(e){this.Ya=e}function Go(e,t,n){this.A=e,this.V=t,this.g=n}function V(e,t,n){this.Pb=e,this.rb=t,this.tb=n||null}function Ho(e,t,n){this.ga=e,this.rb=t,this.tb=n}function Vo(){this.za={}}function Jo(e){return ya(ct(e.za),function(e){return!Ad(e.V.m)})}function _o(e,t){if(Ad(t.m))return $o(e);var n=t.ja();return St(e.za,n)}function $o(e){return ft(e.za,function(e){return Ad(e.V.m)})||null}function zo(e){this.wa=wd,this.jb=new xd,this.De={},this.ic={},this.Cc=e}function Xo(t,n,i,r,s){var e=t.jb,p=s;return tr(r>e.Bc,"Stacking an older write on top of newer ones"),o(p)||(p=!0),e.la.push({path:n,Ga:i,Zc:r,visible:p}),p&&(e.S=Td(e.S,n,i)),e.Bc=r,s?fi(t,new de($d,n,i)):[]}function Yo(t,n,o,i){var r=t.jb;return tr(i>r.Bc,"Stacking an older merge on top of newer ones"),r.la.push({path:n,children:o,Zc:i,visible:!0}),r.S=Ed(r.S,n,o),r.Bc=i,o=fa(o),fi(t,new sd($d,n,o))}function Zo(t,n,o){o=o||!1;var i=Qd(t.jb,n);if(t.jb.Ed(n)){var d=wd;return null==i.Ga?w(i.children,function(e,t){d=d.set(new In(e),t)}):d=d.set(lr,!0),fi(t,new ae(i.path,d,o))}return[]}function ei(e,t,n){return n=fa(n),fi(e,new sd(fe,t,n))}function ti(t,n,o,i){if(i=pi(t,i),null!=i){var d=ci(i);return i=d.path,d=d.Hb,n=E(i,n),o=new de(new ce(!1,!0,d,!0),n,o),li(t,i,o)}return[]}function ni(t,n,o,i){if(i=pi(t,i)){var d=ci(i);return i=d.path,d=d.Hb,n=E(i,n),o=fa(o),o=new sd(new ce(!1,!0,d,!0),n,o),li(t,i,o)}return[]}function ai(e){return ka(e,function(t,n,o){if(n&&null!=$o(n))return[$o(n)];var d=[];return n&&(d=Jo(n)),ot(o,function(e){d=d.concat(e)}),d})}function di(t,n){for(var o,d=0;d<n.length;++d)if(o=n[d],!Ad(o.m)){var o=si(o),i=t.ic[o];delete t.ic[o],delete t.De["_"+i]}}function oi(e){return Ad(e.m)&&!T(e.m)?e.wb():e}function ii(t,n,o){var i=n.path,d=ui(t,n);if(o=ri(t,o),n=t.Cc.Ae(oi(n),d,o.ld,o.G),i=t.wa.subtree(i),d)tr(null==$o(i.value),"If we're adding a query, it shouldn't be shadowed");else for(d=ka(i,function(e,t,n){if(!e.e()&&t&&null!=$o(t))return[Pe($o(t))];var o=[];return t&&(o=o.concat(za(Jo(t),function(e){return e.V}))),ot(n,function(e){o=o.concat(e)}),o}),i=0;i<d.length;++i)o=d[i],t.Cc.Od(oi(o),ui(t,o));return n}function ri(e,t){var n=t.V,o=ui(e,n);return{ld:function(){return(t.w()||rd).hash()},G:function(t){if("ok"===t){if(o){var d=n.path;if(t=pi(e,o)){var i=ci(t);t=i.path,i=i.Hb,d=E(t,d),d=new id(new ce(!1,!0,i,!0),d),t=li(e,t,d)}else t=[]}else t=fi(e,new id(fe,n.path));return t}return d="Unknown Error","too_big"===t?d="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"==t?d="Client doesn't have permission to access the desired data.":"unavailable"==t&&(d="The service is unavailable"),d=Error(t+" at "+n.path.toString()+": "+d),d.code=t.toUpperCase(),e.kb(n,null,d)}}}function si(e){return e.path.toString()+"$"+e.ja()}function ci(e){var t=e.indexOf("$");return tr(-1!==t&&t<e.length-1,"Bad queryKey."),{Hb:e.substr(t+1),path:new In(e.substr(0,t))}}function pi(e,t){var n=e.De,o="_"+t;return o in n?n[o]:void 0}function ui(e,t){var n=si(t);return St(e.ic,n)}function li(e,t,n){var o=e.wa.get(t);return tr(o,"Missing sync point for query tag that we're tracking"),o.eb(n,new Wd(t,e.jb),null)}function fi(e,t){return hi(e,t,e.wa,null,new Wd(lr,e.jb))}function hi(t,n,o,i,d){if(n.path.e())return bi(t,n,o,i,d);var e=o.get(lr);null==i&&null!=e&&(i=e.hb(lr));var r=[],s=Rn(n.path),c=n.Mc(s);if((o=o.children.get(s))&&c)var p=i?i.Q(s):null,s=d.n(s),r=r.concat(hi(t,c,o,p,s));return e&&(r=r.concat(e.eb(n,d,i))),r}function bi(t,n,o,i,d){var e=o.get(lr);null==i&&null!=e&&(i=e.hb(lr));var r=[];return o.children.ha(function(e,o){var s=i?i.Q(e):null,c=d.n(e),p=n.Mc(e);p&&(r=r.concat(bi(t,p,o,s,c)))}),e&&(r=r.concat(e.eb(n,d,i))),r}function gi(t,n,o){this.app=o;var r=new Nd(o);if(this.L=t,this.Va=Jd(t),this.Vc=null,this.ca=new Xe,this.vd=1,this.Ra=null,n||0<=("object"===("undefined"===typeof window?"undefined":babelHelpers.typeof(window))&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i))this.va=new zd(this.L,j(this.Gb,this),r),setTimeout(j(this.Jc,this,!0),0);else{if(n=o.options.databaseAuthVariableOverride,"undefined"!==i(n)&&null!==n){if("object"!==i(n))throw Error("Only objects are supported for option databaseAuthVariableOverride");try{Et(n)}catch(t){throw Error("Invalid authOverride provided: "+t)}}this.va=this.Ra=new Co(this.L,j(this.Gb,this),j(this.Jc,this),j(this.ue,this),r,n)}var s=this;Pd(r,function(e){s.va.kf(e)}),this.og=_d(t,j(function(){return new qd(this.Va,this.va)},this)),this.mc=new xn,this.ie=new Dd,this.pd=new zo({Ae:function(e,t,n,o){return t=[],n=s.ie.j(e.path),n.e()||(t=fi(s.pd,new de(fe,e.path,n)),setTimeout(function(){o("ok")},0)),t},Od:e}),vi(this,"connected",!1),this.ia=new td,this.Ya=new Wo(this),this.fd=0,this.je=null,this.K=new zo({Ae:function(t,e,n,o){return s.va.$e(t,n,e,function(n,d){var i=o(n,d);cd(s.ca,t.path,i)}),[]},Od:function(e,t){s.va.uf(e,t)}})}function yi(e){return e=e.ie.j(new In(".info/serverTimeOffset")).H()||0,new Date().getTime()+e}function mi(e){return e=e={timestamp:yi(e)},e.timestamp=e.timestamp||new Date().getTime(),e}function vi(e,t,n){t=new In("/.info/"+t),n=oa(n);var o=e.ie;o.Jd=o.Jd.F(t,n),n=fi(e.pd,new de(fe,t,n)),cd(e.ca,t,n)}function ki(t){t.f("onDisconnectEvents");var e=mi(t),n=[];od(Wt(t.ia,e),lr,function(d,o){n=n.concat(fi(t.K,new de(fe,d,o)));var e=Pi(t,d);Ii(t,e)}),t.ia=new td,cd(t.ca,lr,n)}function Si(t,n,o,i){var d=oa(o);t.va.re(n.toString(),d.H(!0),function(e,o){"ok"===e&&ad(t.ia,n,d),ji(i,e,o)})}function wi(t,n,o,i,r){var e=oa(o,i);t.va.re(n.toString(),e.H(!0),function(o,i){"ok"===o&&ad(t.ia,n,e),ji(r,o,i)})}function Ai(t,n,o,i){var d,r=!0;for(d in o)r=!1;r?(Jt("onDisconnect().update() called with empty data.  Don't do anything."),ji(i,"ok")):t.va.cf(n.toString(),o,function(d,e){if("ok"===d)for(var r in o){var s=oa(o[r]);ad(t.ia,n.n(r),s)}ji(i,d,e)})}function Fi(e,t,n){n=".info"===Rn(t.path)?e.pd.Nb(t,n):e.K.Nb(t,n),Ze(e.ca,t.path,n)}function ji(t,n,o){t&&rn(function(){if("ok"==n)t(null);else{var i=(n||"error").toUpperCase(),d=i;o&&(d+=": "+o),d=Error(d),d.code=i,t(d)}})}function Ti(t,n,i,r,s){function p(){}t.f("transaction on "+n);var u=new Y(t,n);if(u.gc("value",p),i={path:n,update:i,G:r,status:null,ef:er(),He:s,of:0,Rd:function(){u.Ic("value",p)},Td:null,Ba:null,cd:null,dd:null,ed:null},r=t.K.Aa(n,void 0)||rd,i.cd=r,r=i.update(r.H()),o(r)){Pa("transaction failed: Data returned ",r,i.path),i.status=1,s=Qn(t.mc,n);var l=s.Ca()||[];l.push(i),Bn(s,l),"object"===("undefined"===typeof r?"undefined":babelHelpers.typeof(r))&&null!==r&&kt(r,".priority")?(l=St(r,".priority"),tr(Na(l),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):l=(t.K.Aa(n)||rd).C().H(),s=mi(t),r=oa(r,l),s=qt(r,s),i.dd=r,i.ed=s,i.Ba=t.vd++,i=Xo(t.K,n,s,i.Ba,i.He),cd(t.ca,n,i),Ei(t)}else i.Rd(),i.dd=null,i.ed=null,i.G&&(t=new Go(i.cd,new Y(t,i.path),ir),i.G(null,!1,t))}function Ei(e,t){var n=t||e.mc;if(t||Li(e,n),null!==n.Ca()){var o=Di(e,n);tr(0<o.length,"Sending zero length transaction queue"),Ba(o,function(e){return 1===e.status})&&Ci(e,n.path(),o)}else n.kd()&&n.O(function(t){Ei(e,t)})}function Ci(t,n,o){for(var i,r=za(o,function(e){return e.Ba}),d=t.K.Aa(n,r)||rd,r=d,d=d.hash(),s=0;s<o.length;s++){i=o[s],tr(1===i.status,"tryToSendTransactionQueue_: items in queue should all be run."),i.status=2,i.of++;var e=E(n,i.path),r=r.F(e,i.dd)}r=r.H(!0),t.va.put(n.toString(),r,function(i){t.f("transaction put response",{path:n.toString(),status:i});var r=[];if("ok"===i){for(i=[],s=0;s<o.length;s++){if(o[s].status=3,r=r.concat(Zo(t.K,o[s].Ba)),o[s].G){var e=o[s].ed,c=new Y(t,o[s].path);i.push(j(o[s].G,null,null,!0,new Go(e,c,ir)))}o[s].Rd()}for(Li(t,Qn(t.mc,n)),Ei(t),cd(t.ca,n,r),s=0;s<i.length;s++)rn(i[s])}else{if("datastale"===i)for(s=0;s<o.length;s++)o[s].status=4===o[s].status?5:1;else for(zt("transaction at "+n.toString()+" failed: "+i),s=0;s<o.length;s++)o[s].status=5,o[s].Td=i;Ii(t,n)}},d)}function Ii(e,t){var n=Oi(e,t),o=n.path(),n=Di(e,n);return Ri(e,n,o),o}function Ri(t,n,i){if(0!==n.length){for(var r=[],d=[],e=ya(n,function(e){return 1===e.status}),e=za(e,function(e){return e.Ba}),s=0;s<n.length;s++){var c,p=n[s],u=E(i,p.path),f=!1;if(tr(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),5===p.status)f=!0,c=p.Td,d=d.concat(Zo(t.K,p.Ba,!0));else if(1===p.status)if(25<=p.of)f=!0,c="maxretry",d=d.concat(Zo(t.K,p.Ba,!0));else{var l=t.K.Aa(p.path,e)||rd;p.cd=l;var h=n[s].update(l.H());o(h)?(Pa("transaction failed: Data returned ",h,p.path),u=oa(h),"object"===("undefined"===typeof h?"undefined":babelHelpers.typeof(h))&&null!=h&&kt(h,".priority")||(u=u.fa(l.C())),l=p.Ba,h=mi(t),h=qt(u,h),p.dd=u,p.ed=h,p.Ba=t.vd++,tt(e,l),d=d.concat(Xo(t.K,p.path,h,p.Ba,p.He)),d=d.concat(Zo(t.K,l,!0))):(f=!0,c="nodata",d=d.concat(Zo(t.K,p.Ba,!0)))}cd(t.ca,i,d),d=[],f&&(n[s].status=3,setTimeout(n[s].Rd,0),n[s].G&&("nodata"===c?(p=new Y(t,n[s].path),r.push(j(n[s].G,null,null,!1,new Go(n[s].cd,p,ir)))):r.push(j(n[s].G,null,Error(c),!1,null))))}for(Li(t,t.mc),s=0;s<r.length;s++)rn(r[s]);Ei(t)}}function Oi(e,t){for(var n,o=e.mc;null!==(n=Rn(t))&&null===o.Ca();)o=Qn(o,n),t=On(t);return o}function Di(e,t){var n=[];return Ni(e,t,n),n.sort(function(e,t){return e.ef-t.ef}),n}function Ni(t,n,o){var i=n.Ca();if(null!==i)for(var d=0;d<i.length;d++)o.push(i[d]);n.O(function(e){Ni(t,e,o)})}function Li(t,n){var o=n.Ca();if(o){for(var i=0,d=0;d<o.length;d++)3!==o[d].status&&(o[i]=o[d],i++);o.length=i,Bn(n,0<o.length?o:null)}n.O(function(e){Li(t,e)})}function Pi(e,t){var n=Oi(e,t).path(),o=Qn(e.mc,t);return Un(o,function(t){xi(e,t)}),xi(e,o),Mn(o,function(t){xi(e,t)}),n}function xi(t,n){var o=n.Ca();if(null!==o){for(var i=[],d=[],e=-1,r=0;r<o.length;r++)4!==o[r].status&&(2===o[r].status?(tr(e===r-1,"All SENT items should be at beginning of queue."),e=r,o[r].status=4,o[r].Td="set"):(tr(1===o[r].status,"Unexpected transaction status in abort"),o[r].Rd(),d=d.concat(Zo(t.K,o[r].Ba,!0)),o[r].G&&i.push(j(o[r].G,null,Error("set"),!1,null))));for(-1===e?Bn(n,null):o.length=e+1,cd(t.ca,n.path(),d),r=0;r<i.length;r++)rn(i[r])}}function Qi(){this.lb={},this.wf=!1}function Bi(e,t){this.committed=e,this.snapshot=t}function Mi(e,t,n,o){this.u=e,this.path=t,this.m=n,this.Nc=o}function Ui(e){var t=null,n=null;if(e.ka&&(t=bd(e)),e.na&&(n=yd(e)),e.g===rr){if(e.ka){if("[MIN_NAME]"!=gd(e))throw Error("Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().");if("string"!==typeof t)throw Error("Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.")}if(e.na){if("[MAX_NAME]"!=md(e))throw Error("Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().");if("string"!==typeof n)throw Error("Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.")}}else if(e.g===ir){if(null!=t&&!Na(t)||null!=n&&!Na(n))throw Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).");}else if(tr(e.g instanceof bn||e.g===sr,"unknown index type."),null!=t&&"object"===("undefined"===typeof t?"undefined":babelHelpers.typeof(t))||null!=n&&"object"===("undefined"===typeof n?"undefined":babelHelpers.typeof(n)))throw Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")}function Wi(e){if(e.ka&&e.na&&e.xa&&(!e.xa||""===e.mb))throw Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")}function qi(e,t){if(!0===e.Nc)throw Error(t+": You can't combine multiple orderBy calls.")}function Ki(e,t,n){var o={cancel:null,Ma:null};if(t&&n)o.cancel=t,A(e,3,o.cancel,!0),o.Ma=n,B(e,4,o.Ma);else if(t)if("object"===("undefined"===typeof t?"undefined":babelHelpers.typeof(t))&&null!==t)o.Ma=t;else if("function"===typeof t)o.cancel=t;else throw Error(y(e,3,!0)+" must either be a cancel callback or a context object.");return o}function Gi(e,t){this.ta=e,this.qa=t}function Y(e,t){if(!(e instanceof gi))throw Error("new Firebase() no longer supported - use app.database().");Mi.call(this,e,t,Ne,!1),this.then=void 0,this["catch"]=void 0}var Hi,g=Math.pow,Vi=Math.min,Ji=Math.floor,_i=Math.log,$i=Math.max,zi=this,aa={'"':"\\\"","\\":"\\\\","/":"\\/","":"\\b","":"\\f","\n":"\\n","\r":"\\r","	":"\\t","":"\\u000b"},qa=/\uffff/.test("\uFFFF")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g;h($,_),$.prototype.reset=function(){this.M[0]=1732584193,this.M[1]=4023233417,this.M[2]=2562383102,this.M[3]=271733878,this.M[4]=3285377520,this.Pd=this.$b=0},$.prototype.update=function(t,n){if(null!=t){o(n)||(n=t.length);for(var i=n-this.Wa,r=0,d=this.Wd,e=this.$b;r<n;){if(0==e)for(;r<=i;)z(this,t,r),r+=this.Wa;if(F(t)){for(;r<n;)if(d[e]=t.charCodeAt(r),++e,++r,e==this.Wa){z(this,d),e=0;break}}else for(;r<n;)if(d[e]=t[r],++e,++r,e==this.Wa){z(this,d),e=0;break}}this.$b=e,this.Pd+=n}};var ra;a:{var r=zi.navigator;if(r){var va=r.userAgent;if(va){ra=va;break a}}ra=""}var wa=Array.prototype,t=wa.indexOf?function(e,t,n){return wa.indexOf.call(e,t,n)}:function(e,t,n){if(n=null==n?0:0>n?$i(0,e.length+n):n,F(e))return F(t)&&1==t.length?e.indexOf(t,n):-1;for(;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},xa=wa.forEach?function(e,t,n){wa.forEach.call(e,t,n)}:function(t,n,o){for(var i=t.length,d=F(t)?t.split(""):t,e=0;e<i;e++)e in d&&n.call(o,d[e],e,t)},ya=wa.filter?function(e,t,n){return wa.filter.call(e,t,n)}:function(t,n,o){for(var i=t.length,d=[],e=0,r=F(t)?t.split(""):t,s=0;s<i;s++)if(s in r){var c=r[s];n.call(o,c,s,t)&&(d[e++]=c)}return d},za=wa.map?function(e,t,n){return wa.map.call(e,t,n)}:function(t,n,o){for(var i=t.length,d=Array(i),e=F(t)?t.split(""):t,r=0;r<i;r++)r in e&&(d[r]=n.call(o,e[r],r,t));return d},Aa=wa.reduce?function(t,n,o,i){for(var d=[],e=1,r=arguments.length;e<r;e++)d.push(arguments[e]);return i&&(d[0]=j(n,i)),wa.reduce.apply(t,d)}:function(t,n,o,i){var d=o;return xa(t,function(e,o){d=n.call(i,d,e,o,t)}),d},Ba=wa.every?function(e,t,n){return wa.every.call(e,t,n)}:function(t,n,o){for(var i=t.length,d=F(t)?t.split(""):t,e=0;e<i;e++)if(e in d&&!n.call(o,d[e],e,t))return!1;return!0},Ca=-1!=ra.indexOf("Opera")||-1!=ra.indexOf("OPR"),Ua=-1!=ra.indexOf("Trident")||-1!=ra.indexOf("MSIE"),Va=-1!=ra.indexOf("Gecko")&&-1==ra.toLowerCase().indexOf("webkit")&&-1==ra.indexOf("Trident")&&-1==ra.indexOf("MSIE"),Wa=-1!=ra.toLowerCase().indexOf("webkit");(function(){var e,t="";return Ca&&zi.opera?(t=zi.opera.version,p(t)?t():t):(Va?e=/rv\:([^\);]+)(\)|;)/:Ua?e=/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/:Wa&&(e=/WebKit\/(\S+)/),e&&(t=(t=e.exec(ra))?t[1]:""),Ua&&(e=(e=zi.document)?e.documentMode:void 0,e>parseFloat(t))?e+"":t)})();var Xa=null,Xi=null,Za=null,$a=firebase.Promise;Hi=Lt.prototype,Hi.set=function(e,t){null==t?this.uc.removeItem(this.Cd+e):this.uc.setItem(this.Cd+e,Et(t))},Hi.get=function(e){return e=this.uc.getItem(this.Cd+e),null==e?null:Tt(e)},Hi.remove=function(e){this.uc.removeItem(this.Cd+e)},Hi.Ze=!1,Hi.toString=function(){return this.uc.toString()},Pt.prototype.set=function(e,t){null==t?delete this.pc[e]:this.pc[e]=t},Pt.prototype.get=function(e){return kt(this.pc,e)?this.pc[e]:null},Pt.prototype.remove=function(e){delete this.pc[e]},Pt.prototype.Ze=!0;var Yi=xt("localStorage"),Zi=xt("sessionStorage");Qt.prototype.toString=function(){var e=(this.Sc?"https://":"http://")+this.host;return this.gf&&(e+="<"+this.gf+">"),e};var er=function(){var e=1;return function(){return e++}}(),tr=mt,D=vt,nr=null,ar=!0,dr=/^-?\d{1,10}$/,or={};fn.prototype.nd=function(e,t){return 0!==this.compare(new Ot("[MIN_NAME]",e),new Ot("[MIN_NAME]",t))},fn.prototype.Hc=function(){return br},h(bn,fn),Hi=bn.prototype,Hi.xc=function(e){return!e.P(this.bc).e()},Hi.compare=function(e,t){var n=e.R.P(this.bc),o=t.R.P(this.bc),n=n.sc(o);return 0===n?Zt(e.name,t.name):n},Hi.Ec=function(e,t){var n=oa(e),n=rd.F(this.bc,n);return new Ot(t,n)},Hi.Fc=function(){var e=rd.F(this.bc,L);return new Ot("[MAX_NAME]",e)},Hi.toString=function(){return this.bc.slice().join("/")},h(gn,fn),Hi=gn.prototype,Hi.compare=function(e,t){var n=e.R.C(),o=t.R.C(),n=n.sc(o);return 0===n?Zt(e.name,t.name):n},Hi.xc=function(e){return!e.C().e()},Hi.nd=function(e,t){return!e.C().Z(t.C())},Hi.Hc=function(){return br},Hi.Fc=function(){return new Ot("[MAX_NAME]",new wn("[PRIORITY-POST]",L))},Hi.Ec=function(e,t){var n=oa(e);return new Ot(t,new wn("[PRIORITY-POST]",n))},Hi.toString=function(){return".priority"};var ir=new gn;h(yn,fn),Hi=yn.prototype,Hi.compare=function(e,t){return Zt(e.name,t.name)},Hi.xc=function(){throw D("KeyIndex.isDefinedOn not expected to be called.")},Hi.nd=function(){return!1},Hi.Hc=function(){return br},Hi.Fc=function(){return new Ot("[MAX_NAME]",rd)},Hi.Ec=function(e){return tr(F(e),"KeyIndex indexValue must always be a string."),new Ot(e,rd)},Hi.toString=function(){return".key"};var rr=new yn;h(mn,fn),Hi=mn.prototype,Hi.compare=function(e,t){var n=e.R.sc(t.R);return 0===n?Zt(e.name,t.name):n},Hi.xc=function(){return!0},Hi.nd=function(e,t){return!e.Z(t)},Hi.Hc=function(){return br},Hi.Fc=function(){return gr},Hi.Ec=function(e,t){var n=oa(e);return new Ot(t,n)},Hi.toString=function(){return".value"};var sr=new mn;vn.prototype.get=function(e){var t=St(this.od,e);if(!t)throw Error("No index defined for "+e);return t===or?null:t};var cr=new vn({".priority":or},{".priority":ir}),pr=["object","boolean","number","string"];Hi=wn.prototype,Hi.J=function(){return!0},Hi.C=function(){return this.aa},Hi.fa=function(e){return new wn(this.B,e)},Hi.Q=function(e){return".priority"===e?this.aa:rd},Hi.P=function(e){return e.e()?this:".priority"===Rn(e)?this.aa:rd},Hi.Da=function(){return!1},Hi.Ve=function(){return null},Hi.T=function(e,t){return".priority"===e?this.fa(t):t.e()&&".priority"!==e?this:rd.T(e,t).fa(this.aa)},Hi.F=function(e,t){var n=Rn(e);return null===n?t:t.e()&&".priority"!==n?this:(tr(".priority"!==n||1===K(e),".priority must be the last token in a path"),this.T(n,rd.F(On(e),t)))},Hi.e=function(){return!1},Hi.Eb=function(){return 0},Hi.O=function(){return!1},Hi.H=function(e){return e&&!this.C().e()?{".value":this.Ca(),".priority":this.C().H()}:this.Ca()},Hi.hash=function(){if(null===this.Db){var e="";this.aa.e()||(e+="priority:"+ca(this.aa.H())+":");var t=babelHelpers.typeof(this.B),e=e+(t+":"),e="number"===t?e+dn(this.B):e+this.B;this.Db=Gt(e)}return this.Db},Hi.Ca=function(){return this.B},Hi.sc=function(n){if(n===rd)return 1;if(n instanceof ta)return-1;tr(n.J(),"Unknown node type");var o=babelHelpers.typeof(n.B),i=babelHelpers.typeof(this.B),r=t(pr,o),d=t(pr,i);return tr(0<=r,"Unknown leaf type: "+o),tr(0<=d,"Unknown leaf type: "+i),r===d?"object"===i?0:this.B<n.B?-1:this.B===n.B?0:1:d-r},Hi.nb=function(){return this},Hi.yc=function(){return!0},Hi.Z=function(e){return e===this||!!e.J()&&this.B===e.B&&this.aa.Z(e.aa)},Hi.toString=function(){return Et(this.H(!0))},Hi=An.prototype,Hi.add=function(e,t){this.set[e]=null===t||t},Hi.contains=function(e){return kt(this.set,e)},Hi.get=function(e){return this.contains(e)?this.set[e]:void 0},Hi.remove=function(e){delete this.set[e]},Hi.clear=function(){this.set={}},Hi.e=function(){return ht(this.set)},Hi.count=function(){return rt(this.set)},Hi.keys=function(){var e=[];return ot(this.set,function(t,n){e.push(n)}),e},jn.prototype.Ge=function(t){var n=this.Dc[t]||[];var o=n.length;if(0<o){for(var d=Array(o),e=0;e<o;e++)d[e]=n[e];n=d}else n=[];for(o=0;o<n.length;o++)n[o].Ie.apply(n[o].Ma,Array.prototype.slice.call(arguments,1))},jn.prototype.gc=function(e,t,n){Tn(this,e),this.Dc[e]=this.Dc[e]||[],this.Dc[e].push({Ie:t,Ma:n}),(e=this.Ue(e))&&t.apply(n,e)},jn.prototype.Ic=function(e,t,n){Tn(this,e),e=this.Dc[e]||[];for(var o=0;o<e.length;o++)if(e[o].Ie===t&&(!n||n===e[o].Ma)){e.splice(o,1);break}};var ur=function(){var t=0,e=[];return function(n){var o=n===t;t=n;for(var d=Array(8),i=7;0<=i;i--)d[i]="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz".charAt(n%64),n=Ji(n/64);if(tr(0===n,"Cannot push at time == 0"),n=d.join(""),o){for(i=11;0<=i&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;12>i;i++)e[i]=Ji(64*Math.random());for(i=0;12>i;i++)n+="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz".charAt(e[i]);return tr(20===n.length,"nextPushId: Length should be 20."),n}}();h(En,jn),En.prototype.Ue=function(e){return tr("online"===e,"Unknown event type: "+e),[this.hc]},n(En),h(Cn,jn),Cn.prototype.Ue=function(e){return tr("visible"===e,"Unknown event type: "+e),[this.Mb]},n(Cn),Hi=In.prototype,Hi.toString=function(){for(var e="",t=this.Y;t<this.o.length;t++)""!==this.o[t]&&(e+="/"+this.o[t]);return e||"/"},Hi.slice=function(e){return this.o.slice(this.Y+(e||0))},Hi.parent=function(){if(this.Y>=this.o.length)return null;for(var e=[],t=this.Y;t<this.o.length-1;t++)e.push(this.o[t]);return new In(e,0)},Hi.n=function(e){for(var t=[],n=this.Y;n<this.o.length;n++)t.push(this.o[n]);if(e instanceof In)for(n=e.Y;n<e.o.length;n++)t.push(e.o[n]);else for(e=e.split("/"),n=0;n<e.length;n++)0<e[n].length&&t.push(e[n]);return new In(t,0)},Hi.e=function(){return this.Y>=this.o.length},Hi.Z=function(e){if(K(this)!==K(e))return!1;for(var t=this.Y,n=e.Y;t<=this.o.length;t++,n++)if(this.o[t]!==e.o[n])return!1;return!0},Hi.contains=function(e){var t=this.Y,n=e.Y;if(K(this)>K(e))return!1;for(;t<this.o.length;){if(this.o[t]!==e.o[n])return!1;++t,++n}return!0};var lr=new In("");Dn.prototype.push=function(e){0<this.Qa.length&&(this.Ha+=1),this.Qa.push(e),this.Ha+=Ct(e),Nn(this)},Dn.prototype.pop=function(){var e=this.Qa.pop();this.Ha-=Ct(e),0<this.Qa.length&&--this.Ha},Hi=xn.prototype,Hi.Ca=function(){return this.A.value},Hi.clear=function(){this.A.value=null,this.A.children={},this.A.bd=0,Wn(this)},Hi.kd=function(){return 0<this.A.bd},Hi.e=function(){return null===this.Ca()&&!this.kd()},Hi.O=function(e){var t=this;ot(this.A.children,function(n,o){e(new xn(o,t,n))})},Hi.path=function(){return new In(null===this.Pc?this.ud:this.Pc.path()+"/"+this.ud)},Hi.name=function(){return this.ud},Hi.parent=function(){return this.Pc},Hi=qn.prototype,Hi.Oa=function(e,t){return new qn(this.La,this.ba.Oa(e,t,this.La).X(null,null,!1,null,null))},Hi.remove=function(e){return new qn(this.La,this.ba.remove(e,this.La).X(null,null,!1,null,null))},Hi.get=function(e){for(var t,n=this.ba;!n.e();){if(t=this.La(e,n.key),0===t)return n.value;0>t?n=n.left:0<t&&(n=n.right)}return null},Hi.e=function(){return this.ba.e()},Hi.count=function(){return this.ba.count()},Hi.Gc=function(){return this.ba.Gc()},Hi.ec=function(){return this.ba.ec()},Hi.ha=function(e){return this.ba.ha(e)},Hi.Wb=function(e){return new Gn(this.ba,null,this.La,!1,e)},Hi.Xb=function(e,t){return new Gn(this.ba,e,this.La,!1,t)},Hi.Zb=function(e,t){return new Gn(this.ba,e,this.La,!0,t)},Hi.We=function(e){return new Gn(this.ba,null,this.La,!0,e)},Hi=Vn.prototype,Hi.X=function(t,n,o,i,d){return new Vn(null==t?this.key:t,null==n?this.value:n,null==o?this.color:o,null==i?this.left:i,null==d?this.right:d)},Hi.count=function(){return this.left.count()+1+this.right.count()},Hi.e=function(){return!1},Hi.ha=function(e){return this.left.ha(e)||e(this.key,this.value)||this.right.ha(e)},Hi.Gc=function(){return Jn(this).key},Hi.ec=function(){return this.right.e()?this.key:this.right.ec()},Hi.Oa=function(t,n,o){var i,d;return d=this,i=o(t,d.key),d=0>i?d.X(null,null,null,d.left.Oa(t,n,o),null):0===i?d.X(null,n,null,null,null):d.X(null,null,null,null,d.right.Oa(t,n,o)),$n(d)},Hi.remove=function(e,t){var n,o;if(n=this,0>t(e,n.key))n.left.e()||n.left.ea()||n.left.left.ea()||(n=zn(n)),n=n.X(null,null,null,n.left.remove(e,t),null);else{if(n.left.ea()&&(n=Yn(n)),n.right.e()||n.right.ea()||n.right.left.ea()||(n=Zn(n),n.left.left.ea()&&(n=Yn(n),n=Zn(n))),0===t(e,n.key)){if(n.right.e())return fr;o=Jn(n.right),n=n.X(o.key,o.value,null,null,_n(n.right))}n=n.X(null,null,null,null,n.right.remove(e,t))}return $n(n)},Hi.ea=function(){return this.color},Hi=ea.prototype,Hi.X=function(){return this},Hi.Oa=function(e,t){return new Vn(e,t,null)},Hi.remove=function(){return this},Hi.count=function(){return 0},Hi.e=function(){return!0},Hi.ha=function(){return!1},Hi.Gc=function(){return null},Hi.ec=function(){return null},Hi.ea=function(){return!1};var fr=new ea;Hi=ta.prototype,Hi.J=function(){return!1},Hi.C=function(){return this.aa||rd},Hi.fa=function(e){return this.k.e()?this:new ta(this.k,e,this.yb)},Hi.Q=function(e){return".priority"===e?this.C():(e=this.k.get(e),null===e?rd:e)},Hi.P=function(e){var t=Rn(e);return null===t?this:this.Q(t).P(On(e))},Hi.Da=function(e){return null!==this.k.get(e)},Hi.T=function(t,n){if(tr(n,"We should always be passing snapshot nodes"),".priority"===t)return this.fa(n);var o,d,e=new Ot(t,n);return n.e()?(o=this.k.remove(t),e=Sn(this.yb,e,this.k)):(o=this.k.Oa(t,n),e=kn(this.yb,e,this.k)),d=o.e()?rd:this.aa,new ta(o,d,e)},Hi.F=function(e,t){var n=Rn(e);if(null===n)return t;tr(".priority"!==Rn(e)||1===K(e),".priority must be the last token in a path");var o=this.Q(n).F(On(e),t);return this.T(n,o)},Hi.e=function(){return this.k.e()},Hi.Eb=function(){return this.k.count()};var hr=/^(0|[1-9]\d*)$/;Hi=ta.prototype,Hi.H=function(t){if(this.e())return null;var n={},o=0,i=0,d=!0;if(this.O(ir,function(e,r){n[e]=r.H(t),o++,d&&hr.test(e)?i=$i(i,+e):d=!1}),!t&&d&&i<2*o){var e,r=[];for(e in n)r[e]=n[e];return r}return t&&!this.C().e()&&(n[".priority"]=this.C().H()),n},Hi.hash=function(){if(null===this.Db){var e="";this.C().e()||(e+="priority:"+ca(this.C().H())+":"),this.O(ir,function(t,n){var o=n.hash();""!==o&&(e+=":"+t+":"+o)}),this.Db=""===e?"":Gt(e)}return this.Db},Hi.Ve=function(e,t,n){return(n=da(this,n))?(e=Kn(n,new Ot(e,t)))?e.name:null:Kn(this.k,e)},Hi.O=function(e,t){var n=da(this,e);return n?n.ha(function(e){return t(e.name,e.R)}):this.k.ha(t)},Hi.Wb=function(e){return this.Xb(e.Hc(),e)},Hi.Xb=function(e,t){var n=da(this,t);if(n)return n.Xb(e,function(e){return e});for(var n=this.k.Xb(e.name,C),o=M(n);null!=o&&0>t.compare(o,e);)Hn(n),o=M(n);return n},Hi.We=function(e){return this.Zb(e.Fc(),e)},Hi.Zb=function(e,t){var n=da(this,t);if(n)return n.Zb(e,function(e){return e});for(var n=this.k.Zb(e.name,C),o=M(n);null!=o&&0<t.compare(o,e);)Hn(n),o=M(n);return n},Hi.sc=function(e){return this.e()?e.e()?0:-1:e.J()||e.e()?1:e===L?-1:0},Hi.nb=function(t){if(t===rr||ut(this.yb.cc,t.toString()))return this;var n=this.yb,o=this.k;tr(t!==rr,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var i=[],d=!1,o=o.Wb(C),e=Hn(o);e;)d=d||t.xc(e.R),i.push(e),e=Hn(o);return i=d?sa(i,hn(t)):or,d=t.toString(),o=bt(n.cc),o[d]=t,t=bt(n.od),t[d]=i,new ta(this.k,this.aa,new vn(t,o))},Hi.yc=function(e){return e===rr||ut(this.yb.cc,e.toString())},Hi.Z=function(e){if(e===this)return!0;if(e.J())return!1;if(this.C().Z(e.C())&&this.k.count()===e.k.count()){var t=this.Wb(ir);e=e.Wb(ir);for(var n=Hn(t),o=Hn(e);n&&o;){if(n.name!==o.name||!n.R.Z(o.R))return!1;n=Hn(t),o=Hn(e)}return null===n&&null===o}return!1},Hi.toString=function(){return Et(this.H(!0))};var nd=0.6931471805599453,rd=new ta(new qn(Nt),null,cr);h(ua,ta),Hi=ua.prototype,Hi.sc=function(e){return e===this?0:1},Hi.Z=function(e){return e===this},Hi.C=function(){return this},Hi.Q=function(){return rd},Hi.e=function(){return!1};var L=new ua,br=new Ot("[MIN_NAME]",rd),gr=new Ot("[MAX_NAME]",L),yr=new qn(function(e,t){return e===t?0:e<t?-1:1});Hi=la.prototype,Hi.e=function(){return null===this.value&&this.children.e()},Hi.subtree=function(e){if(e.e())return this;var t=this.children.get(Rn(e));return null===t?wd:t.subtree(On(e))},Hi.set=function(e,t){if(e.e())return new la(t,this.children);var n=Rn(e),o=(this.children.get(n)||wd).set(On(e),t),n=this.children.Oa(n,o);return new la(this.value,n)},Hi.remove=function(e){if(e.e())return this.children.e()?wd:new la(null,this.children);var t=Rn(e),n=this.children.get(t);return n?(e=n.remove(On(e)),t=e.e()?this.children.remove(t):this.children.Oa(t,e),null===this.value&&t.e()?wd:new la(this.value,t)):this},Hi.get=function(e){if(e.e())return this.value;var t=this.children.get(Rn(e));return t?t.get(On(e)):null};var wd=new la(null);la.prototype.toString=function(){var e={};return Ia(this,function(t,n){e[t.toString()]=n.toString()}),Et(e)};var R=/[\[\].#$\/\u0000-\u001F\u007F]/,Kd=/[\[\].#$\u0000-\u001F\u007F]/;td.prototype.find=function(e){if(null!=this.B)return this.B.P(e);if(e.e()||null==this.k)return null;var t=Rn(e);return e=On(e),this.k.contains(t)?this.k.get(t).find(e):null},td.prototype.O=function(e){null!==this.k&&Fn(this.k,function(t,n){e(t,n)})},id.prototype.Mc=function(){return this.path.e()?new id(this.source,lr):new id(this.source,On(this.path))},id.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" listen_complete)"},sd.prototype.Mc=function(e){return this.path.e()?(e=this.children.subtree(new In(e)),e.e()?null:e.value?new de(this.source,lr,e.value):new sd(this.source,lr,e)):(tr(Rn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new sd(this.source,On(this.path),this.children))},sd.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},ae.prototype.Mc=function(e){return this.path.e()?null==this.Ob.value?(e=this.Ob.subtree(new In(e)),new ae(lr,e,this.Id)):(tr(this.Ob.children.e(),"affectedTree should not have overlapping affected paths."),this):(tr(Rn(this.path)===e,"operationForChild called for unrelated child."),new ae(On(this.path),this.Ob,this.Id))},ae.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" ack write revert="+this.Id+" affectedTree="+this.Ob+")"},de.prototype.Mc=function(e){return this.path.e()?new de(this.source,lr,this.Ga.Q(e)):new de(this.source,On(this.path),this.Ga)},de.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" overwrite: "+this.Ga.toString()+")"};var Ld=0,ge=1,be=2,ee=3,$d=new ce(!0,!1,null,!1),fe=new ce(!1,!0,null,!1);ce.prototype.toString=function(){return this.ee?"user":this.Ee?"server(queryID="+this.Hb+")":"server"},he.prototype.j=function(){return this.A},ne.prototype.w=function(){return this.Ld},re.prototype.Te=function(){return null},re.prototype.fe=function(){return null};var ie=new re;se.prototype.Te=function(e){var t=this.Ka.N;return me(t,e)?t.j().Q(e):(t=null==this.yd?this.Ka.w():new he(this.yd,!0,!1),this.xf.qc(e,t))},se.prototype.fe=function(e,t,n){var o=null==this.yd?qe(this.Ka):this.yd;return e=this.xf.Xd(o,t,1,n,e),0===e.length?null:e[0]},ve.prototype.eb=function(t,n,o,i){var d,r=new Ee;if(n.type===Ld)n.source.ee?o=ze(this,t,n.path,n.Ga,o,i,r):(tr(n.source.Se,"Unknown source."),d=n.source.Ee||ke(t.w())&&!n.path.e(),o=De(this,t,n.path,n.Ga,o,i,d,r));else if(n.type===ge)n.source.ee?o=ye(this,t,n.path,n.children,o,i,r):(tr(n.source.Se,"Unknown source."),d=n.source.Ee||ke(t.w()),o=Fe(this,t,n.path,n.children,o,i,d,r));else if(n.type===be){if(!n.Id)o=Be(this,t,n.path,n.Ob,o,i,r);else if(n=n.path,null!=o.lc(n))o=t;else{if(d=new se(o,t,i),i=t.N.j(),n.e()||".priority"===Rn(n))je(t.w())?n=o.Aa(qe(t)):(n=t.w().j(),tr(n instanceof ta,"serverChildren would be complete if leaf node"),n=o.rc(n)),n=this.U.ya(i,n,r);else{var e=Rn(n),s=o.qc(e,t.w());null==s&&me(t.w(),e)&&(s=i.Q(e)),n=null==s?t.N.j().Da(e)?this.U.F(i,e,rd,On(n),d,r):i:this.U.F(i,e,s,On(n),d,r),n.e()&&je(t.w())&&(i=o.Aa(qe(t)),i.J()&&(n=this.U.ya(n,i,r)))}i=je(t.w())||null!=o.lc(lr),o=oe(t,n,i,this.U.Na())}}else if(n.type===ee)i=n.path,n=t.w(),d=n.j(),e=n.da||i.e(),o=we(this,new ne(t.N,new he(d,e,n.Sb)),i,o,ie,r);else throw D("Unknown operation type: "+n.type);return r=ct(r.fb),i=o,n=i.N,n.da&&(d=n.j().J()||n.j().e(),e=pe(t),(0<r.length||!t.N.da||d&&!n.j().Z(e)||!n.j().C().Z(e.C()))&&r.push(S(pe(i)))),new ue(o,r)},Ce.prototype.Ff=function(e,t){if(null==e.Xa||null==t.Xa)throw D("Should only compare child_ events.");return this.g.compare(new Ot(e.Xa,e.Ja),new Ot(t.Xa,t.Ja))},Hi=Oe.prototype,Hi.w=function(){return this.Ka.w().j()},Hi.hb=function(e){var t=qe(this.Ka);return t&&(Ad(this.V.m)||!e.e()&&!t.Q(Rn(e)).e())?t.P(e):null},Hi.e=function(){return 0===this.Za.length},Hi.Nb=function(e){this.Za.push(e)},Hi.kb=function(t,n){var o=[];if(n){tr(null==t,"A cancel should cancel all event registrations.");var i=this.V.path;xa(this.Za,function(e){(e=e.Me(n,i))&&o.push(e)})}if(t){for(var d,r=[],e=0;e<this.Za.length;++e)if(d=this.Za[e],!d.matches(t))r.push(d);else if(t.Xe()){r=r.concat(this.Za.slice(e+1));break}this.Za=r}else this.Za=[];return o},Hi.eb=function(e,t,n){e.type===ge&&null!==e.source.Hb&&(tr(qe(this.Ka),"We should always have a full cache before handling merges"),tr(pe(this.Ka),"Missing event cache, even though we have a server cache"));var o=this.Ka;return e=this.hf.eb(o,e,t,n),t=this.hf,n=e.Sd,tr(n.N.j().yc(t.U.g),"Event snap not indexed"),tr(n.w().j().yc(t.U.g),"Server snap not indexed"),tr(je(e.Sd.w())||!je(o.w()),"Once a server snap is complete, it should never go back"),this.Ka=e.Sd,Ve(this,e.Df,e.Sd.N.j(),null)},Ue.prototype.Yb=function(){var e=this.Md.wb();return"value"===this.hd?e.path:e.getParent().path},Ue.prototype.ge=function(){return this.hd},Ue.prototype.Tb=function(){return this.ae.Tb(this)},Ue.prototype.toString=function(){return this.Yb().toString()+":"+this.hd+":"+Et(this.Md.be())},We.prototype.Yb=function(){return this.path},We.prototype.ge=function(){return"cancel"},We.prototype.Tb=function(){return this.ae.Tb(this)},We.prototype.toString=function(){return this.path.toString()+":cancel"},ud.prototype.add=function(e){this.jd.push(e)},ud.prototype.Yb=function(){return this.qa},Hi=$e.prototype,Hi.F=function(t,n,o,i,d,e){return(tr(t.yc(this.g),"A node must be indexed if only a child is updated"),d=t.Q(n),d.P(i).Z(o.P(i))&&d.e()==o.e())?t:(null!=e&&(o.e()?t.Da(n)?xe(e,new ld(Me,d,n)):tr(t.J(),"A child remove without an old child only makes sense on a leaf node"):d.e()?xe(e,new ld(te,o,n)):xe(e,new ld(Le,o,n,d))),t.J()&&o.e()?t:t.T(n,o).nb(this.g))},Hi.ya=function(t,n,d){return null!=d&&(t.J()||t.O(ir,function(t,o){n.Da(t)||xe(d,new ld(Me,o,t))}),n.J()||n.O(ir,function(n,o){if(t.Da(n)){var e=t.Q(n);e.Z(o)||xe(d,new ld(Le,o,n,e))}else xe(d,new ld(te,o,n))})),n.nb(this.g)},Hi.fa=function(e,t){return e.e()?rd:e.fa(t)},Hi.Na=function(){return!1},Hi.Ub=function(){return this},Hi=Qe.prototype,Hi.matches=function(e){return 0>=this.g.compare(this.Uc,e)&&0>=this.g.compare(e,this.vc)},Hi.F=function(t,n,o,i,d,e){return this.matches(new Ot(n,o))||(o=rd),this.he.F(t,n,o,i,d,e)},Hi.ya=function(t,n,o){n.J()&&(n=rd);var i=n.nb(this.g),i=i.fa(rd),d=this;return n.O(ir,function(e,t){d.matches(new Ot(e,t))||(i=i.T(e,rd))}),this.he.ya(t,i,o)},Hi.fa=function(e){return e},Hi.Na=function(){return!0},Hi.Ub=function(){return this.he},Hi=Se.prototype,Hi.F=function(t,n,o,i,d,e){return this.sa.matches(new Ot(n,o))||(o=rd),t.Q(n).Z(o)?t:t.Eb()<this.oa?this.sa.Ub().F(t,n,o,i,d,e):Re(this,t,n,o,d,e)},Hi.ya=function(t,n,o){var i;if(n.J()||n.e())i=rd.nb(this.g);else if(2*this.oa<n.Eb()&&n.yc(this.g)){i=rd.nb(this.g),n=this.Ib?n.Zb(this.sa.vc,this.g):n.Xb(this.sa.Uc,this.g);for(var d=0;0<n.Pa.length&&d<this.oa;){var e,r=Hn(n);if(e=this.Ib?0>=this.g.compare(this.sa.Uc,r):0>=this.g.compare(r,this.sa.vc))i=i.T(r.name,r.R),d++;else break}}else{i=n.nb(this.g),i=i.fa(rd);var s,c,p;if(this.Ib){n=i.We(this.g),s=this.sa.vc,c=this.sa.Uc;var l=hn(this.g);p=function(e,t){return l(t,e)}}else n=i.Wb(this.g),s=this.sa.Uc,c=this.sa.vc,p=hn(this.g);for(var d=0,u=!1;0<n.Pa.length;)r=Hn(n),!u&&0>=p(s,r)&&(u=!0),(e=u&&d<this.oa&&0>=p(r,c))?d++:i=i.T(r.name,rd)}return this.sa.Ub().ya(t,i,o)},Hi.fa=function(e){return e},Hi.Na=function(){return!0},Hi.Ub=function(){return this.sa.Ub()};var te="child_added",Me="child_removed",Le="child_changed",Ie="child_moved",Je="value",Ne=new fd;Hi=fd.prototype,Hi.ne=function(e){var t=vd(this);return t.xa=!0,t.oa=e,t.mb="l",t},Hi.oe=function(e){var t=vd(this);return t.xa=!0,t.oa=e,t.mb="r",t},Hi.Nd=function(e,t){var n=vd(this);return n.ka=!0,o(e)||(e=null),n.dc=e,null==t?(n.Kb=!1,n.zb=""):(n.Kb=!0,n.zb=t),n},Hi.gd=function(e,t){var n=vd(this);return n.na=!0,o(e)||(e=null),n.ac=e,o(t)?(n.Rb=!0,n.xb=t):(n.vg=!1,n.xb=""),n},Hi.toString=function(){return Et(Sd(this))};var mr=new jd(new la(null));jd.prototype.Ed=function(e){return e.e()?mr:(e=ma(this.W,e,wd),new jd(e))},jd.prototype.e=function(){return this.W.e()},jd.prototype.apply=function(e){return Od(lr,this.W,e)},Dd.prototype.j=function(e){return this.Jd.P(e)},Dd.prototype.toString=function(){return this.Jd.toString()},Nd.prototype.getToken=function(e){return this.oc.INTERNAL.getToken(e).then(null,function(e){return e&&"auth/token-not-initialized"===e.code?(Jt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})},Hi=xd.prototype,Hi.Ed=function(t){var n=et(this.la,function(e){return e.Zc===t});tr(0<=n,"removeWrite called with nonexistent writeId.");var o=this.la[n];this.la.splice(n,1);for(var i,r=o.visible,d=!1,e=this.la.length-1;r&&0<=e;)i=this.la[e],i.visible&&(e>=n&&Bd(i,o.path)?r=!1:o.path.contains(i.path)&&(d=!0)),e--;if(r){if(d)this.S=Ud(this.la,Md,lr),this.Bc=0<this.la.length?this.la[this.la.length-1].Zc:-1;else if(o.Ga)this.S=this.S.Ed(o.path);else{var s=this;ot(o.children,function(e,t){s.S=s.S.Ed(o.path.n(t))})}return!0}return!1},Hi.Aa=function(n,o,i,r){if(i||r){var s=Rd(this.S,n);return!r&&s.e()?o:r||null!=o||null!=Cd(s,lr)?(s=Ud(this.la,function(e){return(e.visible||r)&&(!i||!(0<=t(i,e.Zc)))&&(e.path.contains(n)||n.contains(e.path))},n),o=o||rd,s.apply(o)):null}return(s=Cd(this.S,n),null!=s)?s:(s=Rd(this.S,n),s.e()?o:null!=o||null!=Cd(s,lr)?(o=o||rd,s.apply(o)):null)},Hi.rc=function(t,n){var o=rd,i=Cd(this.S,t);if(i)i.J()||i.O(ir,function(e,t){o=o.T(e,t)});else if(n){var r=Rd(this.S,t);n.O(ir,function(e,t){var n=Rd(r,new In(e)).apply(t);o=o.T(e,n)}),xa(Id(r),function(e){o=o.T(e.name,e.R)})}else r=Rd(this.S,t),xa(Id(r),function(e){o=o.T(e.name,e.R)});return o},Hi.ad=function(e,t,n,o){return(tr(n||o,"Either existingEventSnap or existingServerSnap must exist"),e=e.n(t),null!=Cd(this.S,e))?null:(e=Rd(this.S,e),e.e()?o.P(t):e.apply(o.P(t)))},Hi.qc=function(e,t,n){e=e.n(t);var o=Cd(this.S,e);return null==o?me(n,t)?Rd(this.S,e).apply(n.j().Q(t)):null:o},Hi.lc=function(e){return Cd(this.S,e)},Hi.Xd=function(t,n,o,i,d,e){var r;if(t=Rd(this.S,t),r=Cd(t,lr),null==r)if(null!=n)r=t.apply(n);else return[];if(r=r.nb(e),r.e()||r.J())return[];for(n=[],t=hn(e),d=d?r.Zb(o,e):r.Xb(o,e),e=Hn(d);e&&n.length<i;)0!==t(e,o)&&n.push(e),e=Hn(d);return n},Hi=Wd.prototype,Hi.Aa=function(e,t,n){return this.W.Aa(this.Lb,e,t,n)},Hi.rc=function(e){return this.W.rc(this.Lb,e)},Hi.ad=function(e,t,n){return this.W.ad(this.Lb,e,t,n)},Hi.lc=function(e){return this.W.lc(this.Lb.n(e))},Hi.Xd=function(t,n,o,i,d){return this.W.Xd(this.Lb,t,n,o,i,d)},Hi.qc=function(e,t){return this.W.qc(this.Lb,e,t)},Hi.n=function(e){return new Wd(this.Lb.n(e),this.W)},qd.prototype.lf=function(){var e,t=this.Vc.get(),n={},d=!1;for(e in t)0<t[e]&&kt(this.rf,e)&&(n[e]=t[e],d=!0);d&&this.va.ye(n),cn(j(this.lf,this),Ji(6E5*Math.random()))},Gd.prototype.get=function(){return bt(this.tc)},Vd.prototype.get=function(){var e=this.Ef.get(),t=bt(e);if(this.rd)for(var n in this.rd)t[n]-=this.rd[n];return this.rd=e,t};var vr={},kr={};Hi=zd.prototype,Hi.$e=function(t,n,o,i){var d=t.path.toString();this.f("Listen called for "+d+" "+t.ja());var e=Xd(t,o),r={};this.$[e]=r,t=Fd(t.m);var s=this;Yd(this,d+".json",t,function(t,n){var c=n;404===t&&(t=c=null),null===t&&s.Gb(d,c,!1,o),St(s.$,e)===r&&i(t?401==t?"permission_denied":"rest_error:"+t:"ok",null)})},Hi.uf=function(e,t){var n=Xd(e,t);delete this.$[n]},Hi.kf=function(){},Hi.re=function(){},Hi.cf=function(){},Hi.xd=function(){},Hi.put=function(){},Hi.af=function(){},Hi.ye=function(){};var Sr="websocket",wr="long_polling",Ar=null;"undefined"===typeof MozWebSocket?"undefined"!==typeof WebSocket&&(Ar=WebSocket):Ar=MozWebSocket;var Fr;no.prototype.open=function(t,n){this.ib=n,this.Xf=t,this.f("Websocket connecting to "+this.Ke),this.wc=!1,Yi.set("previous_websocket_failure",!0);try{this.Ia=new Ar(this.Ke)}catch(e){this.f("Error instantiating WebSocket.");var o=e.message||e.data;return o&&this.f(o),void this.bb()}var d=this;this.Ia.onopen=function(){d.f("Websocket connected."),d.wc=!0},this.Ia.onclose=function(){d.f("Websocket connection was disconnected."),d.Ia=null,d.bb()},this.Ia.onmessage=function(e){if(null!==d.Ia)if(e=e.data,d.pb+=e.length,Hd(d.Va,"bytes_received",e.length),oo(d),null!==d.frames)ao(d,e);else{a:{if(tr(null===d.frames,"We already have a frame buffer"),6>=e.length){var t=+e;if(!isNaN(t)){d.Fe=t,d.frames=[],e=null;break a}}d.Fe=1,d.frames=[]}null!==e&&ao(d,e)}},this.Ia.onerror=function(e){d.f("WebSocket error.  Closing connection."),(e=e.message||e.data)&&d.f(e),d.bb()}},no.prototype.start=function(){},no.isAvailable=function(){var e=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var t=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);t&&1<t.length&&4.4>parseFloat(t[1])&&(e=!0)}return!e&&null!==Ar&&!Fr},no.responsesRequiredToBeHealthy=2,no.healthyTimeout=3E4,Hi=no.prototype,Hi.sd=function(){Yi.remove("previous_websocket_failure")},Hi.send=function(e){oo(this),e=Et(e),this.qb+=e.length,Hd(this.Va,"bytes_sent",e.length),e=nn(e,16384),1<e.length&&io(this,e.length+"");for(var t=0;t<e.length;t++)io(this,e[t])},Hi.Tc=function(){this.Ab=!0,this.zc&&(clearInterval(this.zc),this.zc=null),this.Ia&&(this.Ia.close(),this.Ia=null)},Hi.bb=function(){this.Ab||(this.f("WebSocket is closing itself"),this.Tc(),this.ib&&(this.ib(this.wc),this.ib=null))},Hi.close=function(){this.Ab||(this.f("WebSocket is being closed"),this.Tc())};var jr,Tr;ro.prototype.open=function(e,t){this.Ne=0,this.ia=t,this.bf=new Zd(e),this.Ab=!1;var n=this;this.sb=setTimeout(function(){n.f("Timed out trying to connect."),n.bb(),n.sb=null},30000),Yt(function(){if(!n.Ab){n.Ta=new co(function(e,t,o){if(so(n,arguments),n.Ta)if(n.sb&&(clearTimeout(n.sb),n.sb=null),n.wc=!0,"start"==e)n.id=t,n.ff=o;else if("close"===e)t?(n.Ta.Kd=!1,eo(n.bf,t,function(){n.bb()})):n.bb();else throw Error("Unrecognized command received: "+e)},function(e,t){so(n,arguments),to(n.bf,e,t)},function(){n.bb()},n.Yc);var e={start:"t"};e.ser=Ji(1E8*Math.random()),n.Ta.Qd&&(e.cb=n.Ta.Qd),e.v="5",n.tf&&(e.s=n.tf),n.Cb&&(e.ls=n.Cb),"undefined"!==typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(e.r="f"),e=n.Yc(e),n.f("Connecting via long-poll to "+e),lo(n.Ta,e,function(){})}})},ro.prototype.start=function(){var e=this.Ta,t=this.ff;for(e.Vf=this.id,e.Wf=t,e.Ud=!0;po(e););e=this.id,t=this.ff,this.fc=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.fc.src=this.Yc(n),this.fc.style.display="none",document.body.appendChild(this.fc)},ro.isAvailable=function(){return jr||!Tr&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===("undefined"===typeof window?"undefined":babelHelpers.typeof(window))&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&("object"!==("undefined"===typeof Windows?"undefined":babelHelpers.typeof(Windows))||"object"!==babelHelpers.typeof(Windows.rg))&&!0},Hi=ro.prototype,Hi.sd=function(){},Hi.Tc=function(){this.Ab=!0,this.Ta&&(this.Ta.close(),this.Ta=null),this.fc&&(document.body.removeChild(this.fc),this.fc=null),this.sb&&(clearTimeout(this.sb),this.sb=null)},Hi.bb=function(){this.Ab||(this.f("Longpoll is closing itself"),this.Tc(),this.ia&&(this.ia(this.wc),this.ia=null))},Hi.close=function(){this.Ab||(this.f("Longpoll is being closed."),this.Tc())},Hi.send=function(e){e=Et(e),this.qb+=e.length,Hd(this.Va,"bytes_sent",e.length),e=x(e),e=gt(e,!0),e=nn(e,1840);for(var t,n=0;n<e.length;n++)t=this.Ta,t.Qc.push({jg:this.Ne,pg:e.length,Pe:e[n]}),t.Ud&&po(t),this.Ne++},co.prototype.close=function(){if(this.Ud=!1,this.Ea){this.Ea.gb.body.innerHTML="";var e=this;setTimeout(function(){null!==e.Ea&&(document.body.removeChild(e.Ea),e.Ea=null)},0)}var t=this.ib;t&&(this.ib=null,t())};var Er=[ro,no];go.prototype.ua=function(e){To(this,{t:"d",d:e})},go.prototype.wd=function(e){wo(this),this.te(e)},go.prototype.close=function(){2!==this.Ua&&(this.f("Closing realtime connection."),this.Ua=2,Eo(this),this.ia&&(this.ia(),this.ia=null))};var Cr=0,Ir=0;Hi=Co.prototype,Hi.ua=function(e,t,n){var o=++this.ig;e={r:o,a:e,b:t},this.f(Et(e)),tr(this.ma,"sendRequest call when we're not connected not allowed."),this.Fa.ua(e),n&&(this.Gd[o]=n)},Hi.$e=function(t,n,o,i){var r=t.ja(),e=t.path.toString();this.f("Listen called for "+e+" "+r),this.$[e]=this.$[e]||{},tr(T(t.m)||!Ad(t.m),"listen() called for non-default but complete query"),tr(!this.$[e][r],"listen() called twice for same path/queryId."),t={G:i,ld:n,eg:t,tag:o},this.$[e][r]=t,this.ma&&Io(this,t)},Hi.kf=function(e){this.ob=e,this.f("Auth token refreshed"),this.ob?Ro(this):this.ma&&this.ua("unauth",{},function(){}),(e&&40===e.length||ln(e))&&(this.f("Admin auth credential detected.  Reducing max reconnect time."),this.td=3E4)},Hi.uf=function(t,n){var o=t.path.toString(),i=t.ja();if(this.f("Unlisten called for "+o+" "+i),tr(T(t.m)||!Ad(t.m),"unlisten() called for non-default but complete query"),Qo(this,o,i)&&this.ma){var d=Sd(t.m);this.f("Unlisten on "+o+" for "+i),o={p:o},n&&(o.q=d,o.t=n),this.ua("n",o)}},Hi.re=function(e,t,n){this.ma?Oo(this,"o",e,t,n):this.Kc.push({we:e,action:"o",data:t,G:n})},Hi.cf=function(e,t,n){this.ma?Oo(this,"om",e,t,n):this.Kc.push({we:e,action:"om",data:t,G:n})},Hi.xd=function(e,t){this.ma?Oo(this,"oc",e,null,t):this.Kc.push({we:e,action:"oc",data:null,G:t})},Hi.put=function(e,t,n,o){Do(this,"p",e,t,n,o)},Hi.af=function(e,t,n,o){Do(this,"m",e,t,n,o)},Hi.ye=function(e){this.ma&&(e={c:e},this.f("reportStats",e),this.ua("s",e,function(e){"ok"!==e.s&&this.f("reportStats","Error sending stats: "+e.d)}))},Hi.wd=function(e){if("r"in e){this.f("from server: "+Et(e));var t=e.r,n=this.Gd[t];n&&(delete this.Gd[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&(t=e.a,e=e.b,this.f("handleServerMessage",t,e),"d"===t?this.Gb(e.p,e.d,!1,e.t):"m"===t?this.Gb(e.p,e.d,!0,e.t):"c"===t?xo(this,e.p,e.q):"ac"===t?Bo(this,e.s,e.d):"sd"===t?this.ze?this.ze(e):"msg"in e&&"undefined"!==typeof console&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: ")):_t("Unrecognized action received from server: "+Et(t)+"\nAre you using the latest client?"))}},Hi.Lc=function(e,t){if(this.f("connection ready"),this.ma=!0,this.Ac=new Date().getTime(),this.ue({serverTimeOffset:e-new Date().getTime()}),this.Cb=t,this.Re){var n={};n["sdk.js."+firebase.SDK_VERSION.replace(/\./g,"-")]=1,Rt()?n["framework.cordova"]=1:"object"===("undefined"===typeof navigator?"undefined":babelHelpers.typeof(navigator))&&"ReactNative"===navigator.product&&(n["framework.reactnative"]=1),this.ye(n)}Mo(this),this.Re=!1,this.Jc(!0)},Hi.Zf=function(e){e&&!this.Mb&&this.Sa===this.td&&(this.f("Window became visible.  Reducing delay."),this.Sa=1E3,this.Fa||Lo(this,0)),this.Mb=e},Hi.Yf=function(e){e?(this.f("Browser went online."),this.Sa=1E3,this.Fa||Lo(this,0)):(this.f("Browser went offline.  Killing connection."),this.Fa&&this.Fa.close())},Hi.df=function(){this.f("data client disconnected"),this.ma=!1,this.Fa=null;for(var e,t=0;t<this.pa.length;t++)e=this.pa[t],e&&"h"in e.mf&&e.fg&&(e.G&&e.G("disconnect"),delete this.pa[t],this.Oc--);0===this.Oc&&(this.pa=[]),this.Gd={},Uo(this)&&(this.Mb?this.Ac&&(3E4<new Date().getTime()-this.Ac&&(this.Sa=1E3),this.Ac=null):(this.f("Window isn't visible.  Delaying reconnect."),this.Sa=this.td,this.me=new Date().getTime()),t=$i(0,this.Sa-(new Date().getTime()-this.me)),t*=Math.random(),this.f("Trying to reconnect in "+t+"ms"),Lo(this,t),this.Sa=Vi(this.td,1.3*this.Sa)),this.Jc(!1)},Hi.ab=function(e){Jt("Interrupting connection for reason: "+e),this.qd[e]=!0,this.Fa?this.Fa.close():(this.ub&&(clearTimeout(this.ub),this.ub=null),this.ma&&this.df())},Hi.kc=function(e){Jt("Resuming connection for reason: "+e),delete this.qd[e],ht(this.qd)&&(this.Sa=1E3,this.Fa||Lo(this,0))};var Rr={TIMESTAMP:{".sv":"timestamp"}};Hi=Wo.prototype,Hi.app=null,Hi.jf=function(e){return qo(this,"ref"),It("database.ref",0,1,arguments.length),o(e)?this.ba.n(e):this.ba},Hi.gg=function(e){qo(this,"database.refFromURL"),It("database.refFromURL",1,1,arguments.length);var t=J(e);ed("database.refFromURL",t);var n=t.jc;return n.host!==this.ta.L.host&&$t("database.refFromURL: Host name does not match the current database: (found "+n.host+" but expected "+this.ta.L.host+")"),this.jf(t.path.toString())},Hi.Pf=function(){It("database.goOffline",0,0,arguments.length),qo(this,"goOffline"),this.ta.ab()},Hi.Qf=function(){It("database.goOnline",0,0,arguments.length),qo(this,"goOnline"),this.ta.kc()},Object.defineProperty(Wo.prototype,"app",{get:function(){return this.ta.app}}),Ko.prototype.delete=function(){qo(this.Ya,"delete");var e=Qi.Vb(),t=this.Ya.ta;return St(e.lb,t.app.name)!==t&&$t("Database "+t.app.name+" has already been deleted."),t.ab(),delete e.lb[t.app.name],this.Ya.ta=null,this.Ya.ba=null,this.Ya=this.Ya.INTERNAL=null,firebase.Promise.resolve()},Wo.prototype.ref=Wo.prototype.jf,Wo.prototype.refFromURL=Wo.prototype.gg,Wo.prototype.goOnline=Wo.prototype.Qf,Wo.prototype.goOffline=Wo.prototype.Pf,Ko.prototype["delete"]=Ko.prototype.delete,Go.prototype.H=function(){return It("Firebase.DataSnapshot.val",0,0,arguments.length),this.A.H()},Go.prototype.val=Go.prototype.H,Go.prototype.be=function(){return It("Firebase.DataSnapshot.exportVal",0,0,arguments.length),this.A.H(!0)},Go.prototype.exportVal=Go.prototype.be,Go.prototype.toJSON=function(){return It("Firebase.DataSnapshot.toJSON",0,1,arguments.length),this.be()},Go.prototype.toJSON=Go.prototype.toJSON,Go.prototype.Lf=function(){return It("Firebase.DataSnapshot.exists",0,0,arguments.length),!this.A.e()},Go.prototype.exists=Go.prototype.Lf,Go.prototype.n=function(e){It("Firebase.DataSnapshot.child",0,1,arguments.length),d(e)&&(e+=""),Ja("Firebase.DataSnapshot.child",e);var t=new In(e),n=this.V.n(t);return new Go(this.A.P(t),n,ir)},Go.prototype.child=Go.prototype.n,Go.prototype.Da=function(e){It("Firebase.DataSnapshot.hasChild",1,1,arguments.length),Ja("Firebase.DataSnapshot.hasChild",e);var t=new In(e);return!this.A.P(t).e()},Go.prototype.hasChild=Go.prototype.Da,Go.prototype.C=function(){return It("Firebase.DataSnapshot.getPriority",0,0,arguments.length),this.A.C().H()},Go.prototype.getPriority=Go.prototype.C,Go.prototype.forEach=function(e){if(It("Firebase.DataSnapshot.forEach",1,1,arguments.length),A("Firebase.DataSnapshot.forEach",1,e,!1),this.A.J())return!1;var t=this;return!!this.A.O(this.g,function(n,o){return e(new Go(o,t.V.n(n),ir))})},Go.prototype.forEach=Go.prototype.forEach,Go.prototype.kd=function(){return It("Firebase.DataSnapshot.hasChildren",0,0,arguments.length),!this.A.J()&&!this.A.e()},Go.prototype.hasChildren=Go.prototype.kd,Go.prototype.getKey=function(){return It("Firebase.DataSnapshot.key",0,0,arguments.length),this.V.getKey()},sn(Go.prototype,"key",Go.prototype.getKey),Go.prototype.Eb=function(){return It("Firebase.DataSnapshot.numChildren",0,0,arguments.length),this.A.Eb()},Go.prototype.numChildren=Go.prototype.Eb,Go.prototype.wb=function(){return It("Firebase.DataSnapshot.ref",0,0,arguments.length),this.V},sn(Go.prototype,"ref",Go.prototype.wb),Hi=V.prototype,Hi.nf=function(e){return"value"===e},Hi.createEvent=function(e,t){var n=t.m.g;return new Ue("value",this,new Go(e.Ja,t.wb(),n))},Hi.Tb=function(e){var t=this.tb;if("cancel"===e.ge()){tr(this.rb,"Raising a cancel event on a listener with no cancel callback");var n=this.rb;return function(){n.call(t,e.error)}}var o=this.Pb;return function(){o.call(t,e.Md)}},Hi.Me=function(e,t){return this.rb?new We(this,e,t):null},Hi.matches=function(e){return!!(e instanceof V)&&(e.Pb&&this.Pb?e.Pb===this.Pb&&e.tb===this.tb:!0)},Hi.Xe=function(){return null!==this.Pb},Hi=Ho.prototype,Hi.nf=function(e){return e="children_added"===e?"child_added":e,("children_removed"===e?"child_removed":e)in this.ga},Hi.Me=function(e,t){return this.rb?new We(this,e,t):null},Hi.createEvent=function(e,t){tr(null!=e.Xa,"Child events should have a childName.");var n=t.wb().n(e.Xa);return new Ue(e.type,this,new Go(e.Ja,n,t.m.g),e.Dd)},Hi.Tb=function(e){var t=this.tb;if("cancel"===e.ge()){tr(this.rb,"Raising a cancel event on a listener with no cancel callback");var n=this.rb;return function(){n.call(t,e.error)}}var o=this.ga[e.hd];return function(){o.call(t,e.Md,e.Dd)}},Hi.matches=function(e){if(e instanceof Ho){if(!this.ga||!e.ga)return!0;if(this.tb===e.tb){var t=rt(e.ga);if(t===rt(this.ga)){if(1===t){var t=st(e.ga),n=st(this.ga);return n===t&&(!e.ga[t]||!this.ga[n]||e.ga[t]===this.ga[n])}return it(this.ga,function(t,n){return e.ga[n]===t})}}}return!1},Hi.Xe=function(){return null!==this.ga},Hi=Vo.prototype,Hi.e=function(){return ht(this.za)},Hi.eb=function(t,n,o){var i=t.source.Hb;if(null!==i)return i=St(this.za,i),tr(null!=i,"SyncTree gave us an op for an invalid query."),i.eb(t,n,o);var r=[];return ot(this.za,function(e){r=r.concat(e.eb(t,n,o))}),r},Hi.Nb=function(t,n,o,i,d){var e=t.ja(),r=St(this.za,e);if(!r){var r=o.Aa(d?i:null),s=!1;r?s=!0:(r=i instanceof ta?o.rc(i):rd,s=!1),r=new Oe(t,new ne(new he(r,s,!1),new he(i,d,!1))),this.za[e]=r}return r.Nb(n),Te(r,n)},Hi.kb=function(t,n,o){var i=t.ja(),r=[],s=[],d=null!=$o(this);if("default"===i){var c=this;ot(this.za,function(e,t){s=s.concat(e.kb(n,o)),e.e()&&(delete c.za[t],Ad(e.V.m)||r.push(e.V))})}else{var p=St(this.za,i);p&&(s=s.concat(p.kb(n,o)),p.e()&&(delete this.za[i],Ad(p.V.m)||r.push(p.V)))}return d&&null==$o(this)&&r.push(new Y(t.u,t.path)),{hg:r,Kf:s}},Hi.hb=function(e){var t=null;return ot(this.za,function(n){t=t||n.hb(e)}),t},zo.prototype.Nb=function(t,n){var o=t.path,i=null,d=!1;Ta(this.wa,o,function(e,t){var n=E(e,o);i=i||t.hb(n),d=d||null!=$o(t)});var e=this.wa.get(o);e?(d=d||null!=$o(e),i=i||e.hb(lr)):(e=new Vo,this.wa=this.wa.set(o,e));var r;null==i?(r=!1,i=rd,Oa(this.wa.subtree(o),function(e,t){var n=t.hb(lr);n&&(i=i.T(e,n))})):r=!0;var s=null!=_o(e,t);if(!s&&!Ad(t.m)){var c=si(t);tr(!(c in this.ic),"View does not exist, but we have a tag");var p=Or++;this.ic[c]=p,this.De["_"+p]=c}return r=e.Nb(t,n,new Wd(o,this.jb),i,r),s||d||(e=_o(e,t),r=r.concat(ii(this,t,e))),r},zo.prototype.kb=function(t,n,o){var i=t.path,d=this.wa.get(i),e=[];if(d&&("default"===t.ja()||null!=_o(d,t))){e=d.kb(t,n,o),d.e()&&(this.wa=this.wa.remove(i)),d=e.hg,e=e.Kf,n=-1!==et(d,function(e){return Ad(e.m)});var r=Fa(this.wa,i,function(e,t){return null!=$o(t)});if(n&&!r&&(i=this.wa.subtree(i),!i.e()))for(var i=ai(i),s=0;s<i.length;++s){var p=i[s],f=p.V,p=ri(this,p);this.Cc.Ae(oi(f),ui(this,f),p.ld,p.G)}if(!r&&0<d.length&&!o)if(n)this.Cc.Od(oi(t),null);else{var l=this;xa(d,function(e){e.ja();var t=l.ic[si(e)];l.Cc.Od(oi(e),t)})}di(this,d)}return e},zo.prototype.Aa=function(e,t){var n=this.jb,o=Fa(this.wa,e,function(t,n){var o=E(t,e);if(o=n.hb(o))return o});return n.Aa(e,o,t,!0)};var Or=1;Hi=gi.prototype,Hi.toString=function(){return(this.L.Sc?"https://":"http://")+this.L.host},Hi.name=function(){return this.L.pe},Hi.Gb=function(t,n,o,i){this.fd++;var d=new In(t);n=this.je?this.je(t,n):n,t=[],i?o?(n=v(n,function(e){return oa(e)}),t=ni(this.K,d,n,i)):(n=oa(n),t=ti(this.K,d,n,i)):o?(i=v(n,function(e){return oa(e)}),t=ei(this.K,d,i)):(i=oa(n),t=fi(this.K,new de(fe,d,i))),i=d,0<t.length&&(i=Ii(this,d)),cd(this.ca,i,t)},Hi.Jc=function(e){vi(this,"connected",e),!1===e&&ki(this)},Hi.ue=function(e){var t=this;an(e,function(e,n){vi(t,n,e)})},Hi.Jb=function(t,n,o,i){this.f("set",{path:t.toString(),value:n,ug:o});var d=mi(this);n=oa(n,o);var d=qt(n,d),r=this.vd++,d=Xo(this.K,t,d,r,!0);Ye(this.ca,d);var s=this;this.va.put(t.toString(),n.H(!0),function(n,d){var o="ok"===n;o||zt("set at "+t+" failed: "+n),o=Zo(s.K,r,!o),cd(s.ca,t,o),ji(i,n,d)}),d=Pi(this,t),Ii(this,d),cd(this.ca,d,[])},Hi.update=function(t,n,o){this.f("update",{path:t.toString(),value:n});var i=!0,d=mi(this),e={};if(ot(n,function(t,n){i=!1;var o=oa(t);e[n]=qt(o,d)}),i)Jt("update() called with empty data.  Don't do anything."),ji(o,"ok");else{var r=this.vd++,s=Yo(this.K,t,e,r);Ye(this.ca,s);var p=this;this.va.af(t.toString(),n,function(n,i){var d="ok"===n;d||zt("update at "+t+" failed: "+n);var d=Zo(p.K,r,!d),s=t;0<d.length&&(s=Ii(p,t)),cd(p.ca,s,d),ji(o,n,i)}),ot(n,function(e,n){var o=Pi(p,t.n(n));Ii(p,o)}),cd(this.ca,t,[])}},Hi.xd=function(t,n){var o=this;this.va.xd(t.toString(),function(i,d){"ok"===i&&dd(o.ia,t),ji(n,i,d)})},Hi.ab=function(){this.Ra&&this.Ra.ab("repo_interrupt")},Hi.kc=function(){this.Ra&&this.Ra.kc("repo_interrupt")},Hi.Be=function(t){if("undefined"!==typeof console){t?(this.Vc||(this.Vc=new Vd(this.Va)),t=this.Vc.get()):t=this.Va.get();var n,o=Aa(pt(t),function(e,t){return $i(t.length,e)},0);for(n in t){for(var i=t[n],d=n.length;d<o+2;d++)n+=" ";console.log(n+i)}}},Hi.Ce=function(e){Hd(this.Va,e),this.og.rf[e]=!0},Hi.f=function(){var e="";this.Ra&&(e=this.Ra.id+":"),Jt(e,arguments)},Qi.prototype.ab=function(){for(var e in this.lb)this.lb[e].ab()},Qi.prototype.kc=function(){for(var e in this.lb)this.lb[e].kc()},Qi.prototype.ce=function(e){this.wf=e},n(Qi),Qi.prototype.interrupt=Qi.prototype.ab,Qi.prototype.resume=Qi.prototype.kc;var Dr={};Dr.nc=Co,Dr.DataConnection=Dr.nc,Co.prototype.ng=function(e,t){this.ua("q",{p:e},t)},Dr.nc.prototype.simpleListen=Dr.nc.prototype.ng,Co.prototype.Hf=function(e,t){this.ua("echo",{d:e},t)},Dr.nc.prototype.echo=Dr.nc.prototype.Hf,Co.prototype.interrupt=Co.prototype.ab,Dr.zf=go,Dr.RealTimeConnection=Dr.zf,go.prototype.sendRequest=go.prototype.ua,go.prototype.close=go.prototype.close,Dr.Rf=function(t){var n=Co.prototype.put;return Co.prototype.put=function(i,r,d,e){o(e)&&(e=t()),n.call(this,i,r,d,e)},function(){Co.prototype.put=n}},Dr.hijackHash=Dr.Rf,Dr.yf=Qt,Dr.ConnectionTarget=Dr.yf,Dr.ja=function(e){return e.ja()},Dr.queryIdentifier=Dr.ja,Dr.Uf=function(e){return e.u.Ra.$},Dr.listens=Dr.Uf,Dr.ce=function(e){Qi.Vb().ce(e)},Dr.forceRestClient=Dr.ce,Dr.Context=Qi,Hi=Mi.prototype,Hi.wb=function(){return It("Query.ref",0,0,arguments.length),new Y(this.u,this.path)},Hi.gc=function(t,n,o,i){It("Query.on",2,4,arguments.length),Ga("Query.on",t,!1),A("Query.on",2,n,!1);var d=Ki("Query.on",o,i);if("value"===t)Fi(this.u,this,new V(n,d.cancel||null,d.Ma||null));else{var e={};e[t]=n,Fi(this.u,this,new Ho(e,d.cancel,d.Ma))}return n},Hi.Ic=function(t,n,o){It("Query.off",0,3,arguments.length),Ga("Query.off",t,!0),A("Query.off",2,n,!0),B("Query.off",3,o);var i=null,d=null;"value"===t?i=new V(n||null,null,o||null):t&&(n&&(d={},d[t]=n),i=new Ho(d,null,o||null)),d=this.u,i=".info"===Rn(this.path)?d.pd.kb(this,i):d.K.kb(this,i),Ze(d.ca,this.path,i)},Hi.$f=function(t,n){function o(s){e&&(e=!1,d.Ic(t,o),n&&n.call(i.Ma,s),r.resolve(s))}It("Query.once",1,4,arguments.length),Ga("Query.once",t,!1),A("Query.once",2,n,!0);var i=Ki("Query.once",arguments[2],arguments[3]),d=this,e=!0,r=new At;return jt(r.ra),this.gc(t,o,function(e){d.Ic(t,o),i.cancel&&i.cancel.call(i.Ma,e),r.reject(e)}),r.ra},Hi.ne=function(e){if(It("Query.limitToFirst",1,1,arguments.length),!d(e)||Ji(e)!==e||0>=e)throw Error("Query.limitToFirst: First argument must be a positive integer.");if(this.m.xa)throw Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new Mi(this.u,this.path,this.m.ne(e),this.Nc)},Hi.oe=function(e){if(It("Query.limitToLast",1,1,arguments.length),!d(e)||Ji(e)!==e||0>=e)throw Error("Query.limitToLast: First argument must be a positive integer.");if(this.m.xa)throw Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new Mi(this.u,this.path,this.m.oe(e),this.Nc)},Hi.ag=function(e){if(It("Query.orderByChild",1,1,arguments.length),"$key"===e)throw Error("Query.orderByChild: \"$key\" is invalid.  Use Query.orderByKey() instead.");if("$priority"===e)throw Error("Query.orderByChild: \"$priority\" is invalid.  Use Query.orderByPriority() instead.");if("$value"===e)throw Error("Query.orderByChild: \"$value\" is invalid.  Use Query.orderByValue() instead.");Ja("Query.orderByChild",e),qi(this,"Query.orderByChild");var t=new In(e);if(t.e())throw Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");return t=new bn(t),t=kd(this.m,t),Ui(t),new Mi(this.u,this.path,t,!0)},Hi.bg=function(){It("Query.orderByKey",0,0,arguments.length),qi(this,"Query.orderByKey");var e=kd(this.m,rr);return Ui(e),new Mi(this.u,this.path,e,!0)},Hi.cg=function(){It("Query.orderByPriority",0,0,arguments.length),qi(this,"Query.orderByPriority");var e=kd(this.m,ir);return Ui(e),new Mi(this.u,this.path,e,!0)},Hi.dg=function(){It("Query.orderByValue",0,0,arguments.length),qi(this,"Query.orderByValue");var e=kd(this.m,sr);return Ui(e),new Mi(this.u,this.path,e,!0)},Hi.Nd=function(e,t){It("Query.startAt",0,2,arguments.length),La("Query.startAt",e,this.path,!0),Ha("Query.startAt",t);var n=this.m.Nd(e,t);if(Wi(n),Ui(n),this.m.ka)throw Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return o(e)||(t=e=null),new Mi(this.u,this.path,n,this.Nc)},Hi.gd=function(e,t){It("Query.endAt",0,2,arguments.length),La("Query.endAt",e,this.path,!0),Ha("Query.endAt",t);var n=this.m.gd(e,t);if(Wi(n),Ui(n),this.m.na)throw Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new Mi(this.u,this.path,n,this.Nc)},Hi.If=function(e,t){if(It("Query.equalTo",1,2,arguments.length),La("Query.equalTo",e,this.path,!1),Ha("Query.equalTo",t),this.m.ka)throw Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.m.na)throw Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.Nd(e,t).gd(e,t)},Hi.toString=function(){It("Query.toString",0,0,arguments.length);for(var e=this.path,t="",n=e.Y;n<e.o.length;n++)""!==e.o[n]&&(t+="/"+encodeURIComponent(e.o[n]+""));return this.u.toString()+(t||"/")},Hi.toJSON=function(){return It("Query.toJSON",0,1,arguments.length),this.toString()},Hi.ja=function(){var e=tn(Sd(this.m));return"{}"===e?"default":e},Hi.isEqual=function(e){if(It("Query.isEqual",1,1,arguments.length),!(e instanceof Mi))throw Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");var t=this.u===e.u,n=this.path.Z(e.path),o=this.ja()===e.ja();return t&&n&&o},Mi.prototype.on=Mi.prototype.gc,Mi.prototype.off=Mi.prototype.Ic,Mi.prototype.once=Mi.prototype.$f,Mi.prototype.limitToFirst=Mi.prototype.ne,Mi.prototype.limitToLast=Mi.prototype.oe,Mi.prototype.orderByChild=Mi.prototype.ag,Mi.prototype.orderByKey=Mi.prototype.bg,Mi.prototype.orderByPriority=Mi.prototype.cg,Mi.prototype.orderByValue=Mi.prototype.dg,Mi.prototype.startAt=Mi.prototype.Nd,Mi.prototype.endAt=Mi.prototype.gd,Mi.prototype.equalTo=Mi.prototype.If,Mi.prototype.toString=Mi.prototype.toString,Mi.prototype.isEqual=Mi.prototype.isEqual,sn(Mi.prototype,"ref",Mi.prototype.wb),Gi.prototype.cancel=function(e){It("Firebase.onDisconnect().cancel",0,1,arguments.length),A("Firebase.onDisconnect().cancel",1,e,!0);var t=new At;return this.ta.xd(this.qa,Ft(t,e)),t.ra},Gi.prototype.cancel=Gi.prototype.cancel,Gi.prototype.remove=function(e){It("Firebase.onDisconnect().remove",0,1,arguments.length),_a("Firebase.onDisconnect().remove",this.qa),A("Firebase.onDisconnect().remove",1,e,!0);var t=new At;return Si(this.ta,this.qa,null,Ft(t,e)),t.ra},Gi.prototype.remove=Gi.prototype.remove,Gi.prototype.set=function(e,t){It("Firebase.onDisconnect().set",1,2,arguments.length),_a("Firebase.onDisconnect().set",this.qa),La("Firebase.onDisconnect().set",e,this.qa,!1),A("Firebase.onDisconnect().set",2,t,!0);var n=new At;return Si(this.ta,this.qa,e,Ft(n,t)),n.ra},Gi.prototype.set=Gi.prototype.set,Gi.prototype.Jb=function(e,t,n){It("Firebase.onDisconnect().setWithPriority",2,3,arguments.length),_a("Firebase.onDisconnect().setWithPriority",this.qa),La("Firebase.onDisconnect().setWithPriority",e,this.qa,!1),Ka("Firebase.onDisconnect().setWithPriority",2,t),A("Firebase.onDisconnect().setWithPriority",3,n,!0);var o=new At;return wi(this.ta,this.qa,e,t,Ft(o,n)),o.ra},Gi.prototype.setWithPriority=Gi.prototype.Jb,Gi.prototype.update=function(e,t){if(It("Firebase.onDisconnect().update",1,2,arguments.length),_a("Firebase.onDisconnect().update",this.qa),s(e)){for(var n={},o=0;o<e.length;++o)n[""+o]=e[o];e=n,zt("Passing an Array to Firebase.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}return Ma("Firebase.onDisconnect().update",e,this.qa),A("Firebase.onDisconnect().update",2,t,!0),n=new At,Ai(this.ta,this.qa,e,Ft(n,t)),n.ra},Gi.prototype.update=Gi.prototype.update;var Nr={Mf:function(){jr=Fr=!0}};if(Nr.forceLongPolling=Nr.Mf,Nr.Nf=function(){Tr=!0},Nr.forceWebSockets=Nr.Nf,Nr.Tf=function(){return no.isAvailable()},Nr.isWebSocketsAvailable=Nr.Tf,Nr.lg=function(e,t){e.u.Ra.ze=t},Nr.setSecurityDebugCallback=Nr.lg,Nr.Be=function(e,t){e.u.Be(t)},Nr.stats=Nr.Be,Nr.Ce=function(e,t){e.u.Ce(t)},Nr.statsIncrementCounter=Nr.Ce,Nr.fd=function(e){return e.u.fd},Nr.dataUpdateCount=Nr.fd,Nr.Sf=function(e,t){e.u.je=t},Nr.interceptServerData=Nr.Sf,h(Y,Mi),Hi=Y.prototype,Hi.getKey=function(){return It("Firebase.key",0,0,arguments.length),this.path.e()?null:N(this.path)},Hi.n=function(e){if(It("Firebase.child",1,1,arguments.length),d(e))e+="";else if(!(e instanceof In))if(null===Rn(this.path)){var t=e;t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Ja("Firebase.child",t)}else Ja("Firebase.child",e);return new Y(this.u,this.path.n(e))},Hi.getParent=function(){It("Firebase.parent",0,0,arguments.length);var e=this.path.parent();return null===e?null:new Y(this.u,e)},Hi.Of=function(){It("Firebase.ref",0,0,arguments.length);for(var e=this;null!==e.getParent();)e=e.getParent();return e},Hi.Gf=function(){return this.u.Ya},Hi.set=function(e,t){It("Firebase.set",1,2,arguments.length),_a("Firebase.set",this.path),La("Firebase.set",e,this.path,!1),A("Firebase.set",2,t,!0);var n=new At;return this.u.Jb(this.path,e,null,Ft(n,t)),n.ra},Hi.update=function(e,t){if(It("Firebase.update",1,2,arguments.length),_a("Firebase.update",this.path),s(e)){for(var n={},o=0;o<e.length;++o)n[""+o]=e[o];e=n,zt("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}return Ma("Firebase.update",e,this.path),A("Firebase.update",2,t,!0),n=new At,this.u.update(this.path,e,Ft(n,t)),n.ra},Hi.Jb=function(e,t,n){if(It("Firebase.setWithPriority",2,3,arguments.length),_a("Firebase.setWithPriority",this.path),La("Firebase.setWithPriority",e,this.path,!1),Ka("Firebase.setWithPriority",2,t),A("Firebase.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Firebase.setWithPriority failed: "+this.getKey()+" is a read-only object.";var o=new At;return this.u.Jb(this.path,e,t,Ft(o,n)),o.ra},Hi.remove=function(e){return It("Firebase.remove",0,1,arguments.length),_a("Firebase.remove",this.path),A("Firebase.remove",1,e,!0),this.set(null,e)},Hi.transaction=function(e,t,n){if(It("Firebase.transaction",1,3,arguments.length),_a("Firebase.transaction",this.path),A("Firebase.transaction",1,e,!1),A("Firebase.transaction",2,t,!0),o(n)&&"boolean"!=typeof n)throw Error(y("Firebase.transaction",3,!0)+"must be a boolean.");if(".length"===this.getKey()||".keys"===this.getKey())throw"Firebase.transaction failed: "+this.getKey()+" is a read-only object.";"undefined"===typeof n&&(n=!0);var i=new At;return p(t)&&jt(i.ra),Ti(this.u,this.path,e,function(e,n,d){e?i.reject(e):i.resolve(new Bi(n,d)),p(t)&&t(e,n,d)},n),i.ra},Hi.kg=function(e,t){It("Firebase.setPriority",1,2,arguments.length),_a("Firebase.setPriority",this.path),Ka("Firebase.setPriority",1,e),A("Firebase.setPriority",2,t,!0);var n=new At;return this.u.Jb(this.path.n(".priority"),e,null,Ft(n,t)),n.ra},Hi.push=function(t,n){It("Firebase.push",0,2,arguments.length),_a("Firebase.push",this.path),La("Firebase.push",t,this.path,!0),A("Firebase.push",2,n,!0);var o=yi(this.u),i=ur(o),o=this.n(i),d=this.n(i),i=null==t?$a.resolve(d):o.set(t,n).then(function(){return d});return o.then=j(i.then,i),o["catch"]=j(i.then,i,void 0),p(n)&&jt(i),o},Hi.ib=function(){return _a("Firebase.onDisconnect",this.path),new Gi(this.u,this.path)},Y.prototype.child=Y.prototype.n,Y.prototype.set=Y.prototype.set,Y.prototype.update=Y.prototype.update,Y.prototype.setWithPriority=Y.prototype.Jb,Y.prototype.remove=Y.prototype.remove,Y.prototype.transaction=Y.prototype.transaction,Y.prototype.setPriority=Y.prototype.kg,Y.prototype.push=Y.prototype.push,Y.prototype.onDisconnect=Y.prototype.ib,sn(Y.prototype,"database",Y.prototype.Gf),sn(Y.prototype,"key",Y.prototype.getKey),sn(Y.prototype,"parent",Y.prototype.getParent),sn(Y.prototype,"root",Y.prototype.Of),"undefined"===typeof firebase)throw Error("Cannot install Firebase Database - be sure to load firebase-app.js first.");try{firebase.INTERNAL.registerService("database",function(e){var t=Qi.Vb(),n=e.options.databaseURL;o(n)||$t("Can't determine Firebase Database URL.  Be sure to include databaseURL option when calling firebase.intializeApp().");var i=J(n),n=i.jc;return ed("Invalid Firebase Database URL",i),i.path.e()||$t("Database URL must point to the root of a Firebase Database (not including a child path)."),(i=St(t.lb,e.name))&&$t("FIREBASE INTERNAL ERROR: Database initialized multiple times."),i=new gi(n,t.wf,e),t.lb[e.name]=i,i.Ya},{Reference:Y,Query:Mi,Database:Wo,enableLogging:Vt,INTERNAL:Nr,TEST_ACCESS:Dr,ServerValue:Rr})}catch(e){$t("Failed to register the Firebase Database Service ("+e+")")}})();</script><script>(function(){var e,n=Math.floor,o=Math.max,i=i||{},s=this,l=function(){},h=function(e){var t="undefined"===typeof e?"undefined":babelHelpers.typeof(e);if("object"==t){if(e){if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&"undefined"!=typeof e.splice&&"undefined"!=typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||"undefined"!=typeof e.call&&"undefined"!=typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else return"null";}else if("function"==t&&"undefined"==typeof e.call)return"object";return t},d=function(e){return null===e},g=function(e){return"array"==h(e)},k=function(e){var t=h(e);return"array"==t||"object"==t&&"number"==typeof e.length},C=function(e){return"string"==typeof e},f=function(e){return"number"==typeof e},_=function(e){return"function"==h(e)},j=function(e){var t="undefined"===typeof e?"undefined":babelHelpers.typeof(e);return"object"==t&&null!=e||"function"==t},c=function(e){return e.call.apply(e.bind,arguments)},b=function(e,t){if(!e)throw Error();if(2<arguments.length){var n=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,n),e.apply(t,o)}}return function(){return e.apply(t,arguments)}},q=function(){return q=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?c:b,q.apply(null,arguments)},$=function(e){var t=Array.prototype.slice.call(arguments,1);return function(){var n=t.slice();return n.push.apply(n,arguments),e.apply(this,n)}},ge=Date.now||function(){return+new Date},_e=function(e,t){function n(){}n.prototype=t.prototype,e.xd=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Tf=function(n,o){for(var r=Array(arguments.length-2),i=2;i<arguments.length;i++)r[i-2]=arguments[i];return t.prototype[o].apply(n,r)}},r=function e(t){if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var n=Error().stack;n&&(this.stack=n)}t&&(this.message=t+"")};_e(r,Error),r.prototype.name="CustomError";var t=function(t){for(var n=t.split("%s"),o="",r=Array.prototype.slice.call(arguments,1);r.length&&1<n.length;)o+=n.shift()+r.shift();return o+n.join("%s")},et=String.prototype.trim?function(e){return e.trim()}:function(e){return e.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},tt=/&/g,nt=/</g,ot=/>/g,at=/"/g,rt=/'/g,it=/\x00/g,dt=/[\x00&<>"']/,st=function(e,t){return-1!=e.indexOf(t)},u=function(e,t){return e<t?-1:e>t?1:0},pt=function(e,n){n.unshift(e),r.call(this,t.apply(null,n)),n.shift()};_e(pt,r),pt.prototype.name="AssertionError";var ct,lt=function(t,n,o,r){var i="Assertion failed";if(o)var i=i+(": "+o),e=r;else t&&(i+=": "+t,e=n);throw new pt(""+i,e||[])},ut=function(e,t){e||lt("",null,t,Array.prototype.slice.call(arguments,2))},v=function(e){throw new pt("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1))},ht=function(e,t){return f(e)||lt("Expected number but got %s: %s.",[h(e),e],t,Array.prototype.slice.call(arguments,2)),e},ft=function(e,t){C(e)||lt("Expected string but got %s: %s.",[h(e),e],t,Array.prototype.slice.call(arguments,2))},mt=function(e,t){_(e)||lt("Expected function but got %s: %s.",[h(e),e],t,Array.prototype.slice.call(arguments,2))},gt=Array.prototype.indexOf?function(e,t,n){return ut(null!=e.length),Array.prototype.indexOf.call(e,t,n)}:function(e,t,n){if(n=null==n?0:0>n?o(0,e.length+n):n,C(e))return C(t)&&1==t.length?e.indexOf(t,n):-1;for(;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},bt=Array.prototype.forEach?function(e,t,n){ut(null!=e.length),Array.prototype.forEach.call(e,t,n)}:function(t,n,o){for(var r=t.length,i=C(t)?t.split(""):t,e=0;e<r;e++)e in i&&n.call(o,i[e],e,t)},w=function(e,t){for(var n=C(e)?e.split(""):e,o=e.length-1;0<=o;--o)o in n&&t.call(void 0,n[o],o,e)},yt=Array.prototype.map?function(e,t,n){return ut(null!=e.length),Array.prototype.map.call(e,t,n)}:function(t,n,o){for(var r=t.length,i=Array(r),e=C(t)?t.split(""):t,d=0;d<r;d++)d in e&&(i[d]=n.call(o,e[d],d,t));return i},vt=Array.prototype.some?function(e,t,n){return ut(null!=e.length),Array.prototype.some.call(e,t,n)}:function(t,n,o){for(var r=t.length,i=C(t)?t.split(""):t,e=0;e<r;e++)if(e in i&&n.call(o,i[e],e,t))return!0;return!1},Tt=function(t){var n;a:{n=ue;for(var o=t.length,r=C(t)?t.split(""):t,i=0;i<o;i++)if(i in r&&n.call(void 0,r[i],i,t)){n=i;break a}n=-1}return 0>n?null:C(t)?t.charAt(n):t[n]},It=function(e,t){return 0<=gt(e,t)},kt=function(e,t){t=gt(e,t);var n;return(n=0<=t)&&Et(e,t),n},Et=function(e,t){return ut(null!=e.length),1==Array.prototype.splice.call(e,t,1).length},At=function(t,n){var o=0;w(t,function(r,i){n.call(void 0,r,i,t)&&Et(t,i)&&o++})},wt=function(){return Array.prototype.concat.apply([],arguments)},St=function(e){var t=e.length;if(0<t){for(var n=Array(t),o=0;o<t;o++)n[o]=e[o];return n}return[]},Nt=function(e){return yt(e,function(e){return e=e.toString(16),1<e.length?e:"0"+e}).join("")};a:{var Pt=s.navigator;if(Pt){var Rt=Pt.userAgent;if(Rt){ct=Rt;break a}}ct=""}var Ot=function(e){return st(ct,e)},x=function(e,t){for(var n in e)t.call(void 0,e[n],n,e)},Ct=function(e){var t,n=[],o=0;for(t in e)n[o++]=e[t];return n},_t=function(e){var t,n=[],o=0;for(t in e)n[o++]=t;return n},Dt=function(e){for(var t in e)return!1;return!0},Lt=function(e,t){for(var n in e)if(!(n in t)||e[n]!==t[n])return!1;for(n in t)if(!(n in e))return!1;return!0},xt=function(e){var t,n={};for(t in e)n[t]=e[t];return n},Ut=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Vt=function(t){for(var n,o,r=1;r<arguments.length;r++){for(n in o=arguments[r],o)t[n]=o[n];for(var e=0;e<Ut.length;e++)n=Ut[e],Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}},Mt=function e(t){return e[" "](t),t};Mt[" "]=l;var jt,Ft=function(e,t){var n=Zt;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)},Kt=Ot("Opera"),Wt=Ot("Trident")||Ot("MSIE"),qt=Ot("Edge"),Xt=Ot("Gecko")&&(!st(ct.toLowerCase(),"webkit")||Ot("Edge"))&&!(Ot("Trident")||Ot("MSIE"))&&!Ot("Edge"),Bt=st(ct.toLowerCase(),"webkit")&&!Ot("Edge"),Gt=function(){var e=s.document;return e?e.documentMode:void 0};a:{var Yt="",Ht=function(){var e=ct;return Xt?/rv\:([^\);]+)(\)|;)/.exec(e):qt?/Edge\/([\d\.]+)/.exec(e):Wt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Bt?/WebKit\/(\S+)/.exec(e):Kt?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Ht&&(Yt=Ht?Ht[1]:""),Wt){var Jt=Gt();if(null!=Jt&&Jt>parseFloat(Yt)){jt=Jt+"";break a}}jt=Yt}var zt,$t=jt,Zt={},Qt=function(t){return Ft(t,function(){for(var n=0,r=et($t+"").split("."),i=et(t+"").split("."),d=o(r.length,i.length),e=0;0==n&&e<d;e++){var s=r[e]||"",p=i[e]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],p=/(\d*)(\D*)(.*)/.exec(p)||["","","",""],0==s[0].length&&0==p[0].length)break;n=u(0==s[1].length?0:parseInt(s[1],10),0==p[1].length?0:parseInt(p[1],10))||u(0==s[2].length,0==p[2].length)||u(s[2],p[2]),s=s[3],p=p[3]}while(0==n)}return 0<=n})},z=s.document;zt=z&&Wt?Gt()||("CSS1Compat"==z.compatMode?parseInt($t,10):5):void 0;var en,tn=null,nn=null,on=function(e){var t="";return an(e,function(e){t+=String.fromCharCode(e)}),t},an=function(t,n){function o(n){for(;r<t.length;){var o=t.charAt(r++),i=nn[o];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(o))throw Error("Unknown base64 encoding at char: "+o)}return n}rn();for(var r=0;;){var i=o(-1),e=o(0),d=o(64),s=o(64);if(64===s&&-1===i)break;n(i<<2|e>>4),64!=d&&(n(240&e<<4|d>>2),64!=s&&n(192&d<<6|s))}},rn=function(){if(!tn){tn={},nn={};for(var e=0;65>e;e++)tn[e]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(e),nn[tn[e]]=e,62<=e&&(nn["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(e)]=e)}},dn=function(e,t){this.Da=64,this.ec=s.Uint8Array?new Uint8Array(this.Da):Array(this.Da),this.Fc=this.hb=0,this.h=[],this.lf=e,this.Wd=t,this.Mf=s.Int32Array?new Int32Array(64):Array(64),void 0!==en||(en=s.Int32Array?new Int32Array(un):un),this.reset()};_e(dn,function(){this.Da=-1});for(var sn=[],pn=0;63>pn;pn++)sn[pn]=0;var cn=wt(128,sn);dn.prototype.reset=function(){this.Fc=this.hb=0,this.h=s.Int32Array?new Int32Array(this.Wd):St(this.Wd)};var ln=function(t){var o=t.ec;ut(o.length==t.Da);for(var r=t.Mf,i=0,d=0;d<o.length;)r[i++]=o[d]<<24|o[d+1]<<16|o[d+2]<<8|o[d+3],d=4*i;for(o=16;64>o;o++){var d=0|r[o-15],i=0|r[o-2],e=0|(0|r[o-16])+((d>>>7|d<<25)^(d>>>18|d<<14)^d>>>3),s=0|(0|r[o-7])+((i>>>17|i<<15)^(i>>>19|i<<13)^i>>>10);r[o]=0|e+s}for(var i=0|t.h[0],d=0|t.h[1],p=0|t.h[2],c=0|t.h[3],n=0|t.h[4],l=0|t.h[5],u=0|t.h[6],e=0|t.h[7],o=0;64>o;o++)var h=0|((i>>>2|i<<30)^(i>>>13|i<<19)^(i>>>22|i<<10))+(i&d^i&p^d&p),s=n&l^~n&u,e=0|e+((n>>>6|n<<26)^(n>>>11|n<<21)^(n>>>25|n<<7)),s=0|s+(0|en[o]),s=0|e+(0|s+(0|r[o])),e=u,u=l,l=n,n=0|c+s,c=p,p=d,d=i,i=0|s+h;t.h[0]=0|t.h[0]+i,t.h[1]=0|t.h[1]+d,t.h[2]=0|t.h[2]+p,t.h[3]=0|t.h[3]+c,t.h[4]=0|t.h[4]+n,t.h[5]=0|t.h[5]+l,t.h[6]=0|t.h[6]+u,t.h[7]=0|t.h[7]+e};dn.prototype.update=function(t,n){void 0===n&&(n=t.length);var o=0,r=this.hb;if(C(t))for(;o<n;)this.ec[r++]=t.charCodeAt(o++),r==this.Da&&(ln(this),r=0);else if(k(t))for(;o<n;){var i=t[o++];if(!("number"==typeof i&&0<=i&&255>=i&&i==(0|i)))throw Error("message must be a byte array");this.ec[r++]=i,r==this.Da&&(ln(this),r=0)}else throw Error("message must be string or array");this.hb=r,this.Fc+=n},dn.prototype.digest=function(){var e=[],t=8*this.Fc;56>this.hb?this.update(cn,56-this.hb):this.update(cn,this.Da-(this.hb-56));for(var n=63;56<=n;n--)this.ec[n]=255&t,t/=256;for(ln(this),n=t=0;n<this.lf;n++)for(var o=24;0<=o;o-=8)e[t++]=255&this.h[n]>>o;return e};var un=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],hn=function(){dn.call(this,8,fn)};_e(hn,dn);var fn=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],mn=function(){this.Ga=this.Ga,this.tc=this.tc};mn.prototype.Ga=!1,mn.prototype.isDisposed=function(){return this.Ga},mn.prototype.cb=function(){if(this.tc)for(;this.tc.length;)this.tc.shift()()};var gn=!Wt||9<=+zt,bn=Wt&&!Qt("9");Bt&&Qt("528"),Xt&&Qt("1.9b")||Wt&&Qt("8")||Kt&&Qt("9.5")||Bt&&Qt("528"),Xt&&!Qt("8")||Wt&&Qt("9");var yn=function(e,t){this.type=e,this.currentTarget=this.target=t,this.defaultPrevented=this.nb=!1,this.ee=!0};yn.prototype.preventDefault=function(){this.defaultPrevented=!0,this.ee=!1};var vn=function(e,t){yn.call(this,e?e.type:""),this.relatedTarget=this.currentTarget=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=this.offsetY=this.offsetX=0,this.key="",this.charCode=this.keyCode=0,this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.eb=this.state=null,e&&this.init(e,t)};_e(vn,yn),vn.prototype.init=function(t,n){var o=this.type=t.type,r=t.changedTouches?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.currentTarget=n,!(n=t.relatedTarget))"mouseover"==o?n=t.fromElement:"mouseout"==o&&(n=t.toElement);else if(Xt){var i;a:{try{Mt(n.nodeName),i=!0;break a}catch(e){}i=!1}i||(n=null)}this.relatedTarget=n,null===r?(this.offsetX=Bt||void 0!==t.offsetX?t.offsetX:t.layerX,this.offsetY=Bt||void 0!==t.offsetY?t.offsetY:t.layerY,this.clientX=void 0===t.clientX?t.pageX:t.clientX,this.clientY=void 0===t.clientY?t.pageY:t.clientY,this.screenX=t.screenX||0,this.screenY=t.screenY||0):(this.clientX=void 0===r.clientX?r.pageX:r.clientX,this.clientY=void 0===r.clientY?r.pageY:r.clientY,this.screenX=r.screenX||0,this.screenY=r.screenY||0),this.button=t.button,this.keyCode=t.keyCode||0,this.key=t.key||"",this.charCode=t.charCode||("keypress"==o?t.keyCode:0),this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.state=t.state,this.eb=t,t.defaultPrevented&&this.preventDefault()},vn.prototype.preventDefault=function(){vn.xd.preventDefault.call(this);var e=this.eb;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,bn)try{(e.ctrlKey||112<=e.keyCode&&123>=e.keyCode)&&(e.keyCode=-1)}catch(e){}},vn.prototype.Pe=function(){return this.eb};var Tn="closure_listenable_"+(0|1E6*Math.random()),In=0,kn=function(t,n,o,r,i){this.listener=t,this.xc=null,this.src=n,this.type=o,this.capture=!!r,this.kc=i,this.key=++In,this.rb=this.dc=!1},En=function(e){e.rb=!0,e.listener=null,e.xc=null,e.src=null,e.kc=null},An=function(e){this.src=e,this.G={},this.$b=0};An.prototype.add=function(t,n,o,r,i){var e=t.toString();t=this.G[e],t||(t=this.G[e]=[],this.$b++);var s=Sn(t,n,r,i);return-1<s?(n=t[s],o||(n.dc=!1)):(n=new kn(n,this.src,e,!!r,i),n.dc=o,t.push(n)),n},An.prototype.remove=function(t,n,o,r){if(t=t.toString(),!(t in this.G))return!1;var i=this.G[t];return n=Sn(i,n,o,r),!!(-1<n)&&(En(i[n]),Et(i,n),0==i.length&&(delete this.G[t],this.$b--),!0)};var wn=function(e,t){var n=t.type;n in e.G&&kt(e.G[n],t)&&(En(t),0==e.G[n].length&&(delete e.G[n],e.$b--))};An.prototype.Uc=function(t,n,o,r){t=this.G[t.toString()];var i=-1;return t&&(i=Sn(t,n,o,r)),-1<i?t[i]:null};var Sn=function(t,n,o,r){for(var i,d=0;d<t.length;++d)if(i=t[d],!i.rb&&i.listener==n&&i.capture==!!o&&i.kc==r)return d;return-1},Nn="closure_lm_"+(0|1E6*Math.random()),Pn={},Rn=0,On=function t(n,o,r,i,d){if(g(o))for(var e=0;e<o.length;e++)t(n,o[e],r,i,d);else r=Wn(r),n&&n[Tn]?n.listen(o,r,i,d):Cn(n,o,r,!1,i,d)},Cn=function(t,n,o,r,i,d){if(!n)throw Error("Invalid event type");var s=Fn(t);if(s||(t[Nn]=s=new An(t)),o=s.add(n,o,r,i,d),!o.xc){if(r=_n(),o.xc=r,r.src=t,r.listener=o,t.addEventListener)t.addEventListener(n.toString(),r,!!i);else if(t.attachEvent)t.attachEvent(Un(n.toString()),r);else throw Error("addEventListener and attachEvent are unavailable.");Rn++}},_n=function(){var e=jn,t=gn?function(n){return e.call(t.src,t.listener,n)}:function(n){if(n=e.call(t.src,t.listener,n),!n)return n};return t},Dn=function t(n,o,r,i,d){if(g(o))for(var e=0;e<o.length;e++)t(n,o[e],r,i,d);else r=Wn(r),n&&n[Tn]?he(n,o,r,i,d):Cn(n,o,r,!0,i,d)},Ln=function t(n,o,r,i,s){if(g(o))for(var e=0;e<o.length;e++)t(n,o[e],r,i,s);else r=Wn(r),n&&n[Tn]?n.fa.remove(o+"",r,i,s):n&&(n=Fn(n))&&(o=n.Uc(o,r,!!i,s))&&xn(o)},xn=function(e){if(!f(e)&&e&&!e.rb){var t=e.src;if(t&&t[Tn])wn(t.fa,e);else{var n=e.type,o=e.xc;t.removeEventListener?t.removeEventListener(n,o,e.capture):t.detachEvent&&t.detachEvent(Un(n),o),Rn--,(n=Fn(t))?(wn(n,e),0==n.$b&&(n.src=null,t[Nn]=null)):En(e)}}},Un=function(e){return e in Pn?Pn[e]:Pn[e]="on"+e},Vn=function(t,n,o,r){var i=!0;if((t=Fn(t))&&(n=t.G[n.toString()]))for(n=n.concat(),t=0;t<n.length;t++){var e=n[t];e&&e.capture==o&&!e.rb&&(e=Mn(e,r),i=i&&!1!==e)}return i},Mn=function(e,t){var n=e.listener,o=e.kc||e.src;return e.dc&&xn(e),n.call(o,t)},jn=function(t,n){if(t.rb)return!0;if(!gn){if(!n)a:{n=["window","event"];for(var o,r=s;o=n.shift();)if(null!=r[o])r=r[o];else{n=null;break a}n=r}if(o=n,n=new vn(o,this),r=!0,!(0>o.keyCode||void 0!=o.returnValue)){a:{var i=!1;if(0==o.keyCode)try{o.keyCode=-1;break a}catch(e){i=!0}(i||void 0==o.returnValue)&&(o.returnValue=!0)}for(o=[],i=n.currentTarget;i;i=i.parentNode)o.push(i);for(t=t.type,i=o.length-1;!n.nb&&0<=i;i--){n.currentTarget=o[i];var e=Vn(o[i],t,!0,n),r=r&&e}for(i=0;!n.nb&&i<o.length;i++)n.currentTarget=o[i],e=Vn(o[i],t,!1,n),r=r&&e}return r}return Mn(t,new vn(n,this))},Fn=function(e){return e=e[Nn],e instanceof An?e:null},Kn="__closure_events_fn_"+(1E9*Math.random()>>>0),Wn=function(e){return(ut(e,"Listener can not be null."),_(e))?e:(ut(e.handleEvent,"An object listener must have handleEvent method."),e[Kn]||(e[Kn]=function(t){return e.handleEvent(t)}),e[Kn])},qn=/^[+a-zA-Z0-9_.!#$%&'*\/=?^`{|}~-]+@([a-zA-Z0-9-]+\.)+[a-zA-Z0-9]{2,63}$/,Xn=function(){this.Cc="",this.we=Gn};Xn.prototype.Eb=!0,Xn.prototype.Bb=function(){return this.Cc},Xn.prototype.toString=function(){return"Const{"+this.Cc+"}"};var Bn=function(e){return e instanceof Xn&&e.constructor===Xn&&e.we===Gn?e.Cc:(v("expected object of type Const, got '"+e+"'"),"type_error:Const")},Gn={},Yn=function(e){var t=new Xn;return t.Cc=e,t};Yn("");var Hn=function(){this.wc="",this.xe=Jn};Hn.prototype.Eb=!0,Hn.prototype.Bb=function(){return this.wc},Hn.prototype.toString=function(){return"TrustedResourceUrl{"+this.wc+"}"};var Jn={},zn=function(){this.pa="",this.ve=eo};zn.prototype.Eb=!0,zn.prototype.Bb=function(){return this.pa},zn.prototype.toString=function(){return"SafeUrl{"+this.pa+"}"};var $n=function(e){return e instanceof zn&&e.constructor===zn&&e.ve===eo?e.pa:(v("expected object of type SafeUrl, got '"+e+"' of type "+h(e)),"type_error:SafeUrl")},Zn=/^(?:(?:https?|mailto|ftp):|[^&:/?#]*(?:[/?#]|$))/i,Qn=function(e){return e instanceof zn?e:(e=e.Eb?e.Bb():e+"",Zn.test(e)||(e="about:invalid#zClosurez"),to(e))},eo={},to=function(e){var t=new zn;return t.pa=e,t};to("about:blank");var no=function(e){var t=[];return ao(new oo,e,t),t.join("")},oo=function(){this.yc=void 0},ao=function t(n,o,r){if(null==o)r.push("null");else{if("object"==("undefined"===typeof o?"undefined":babelHelpers.typeof(o))){if(g(o)){var i=o;o=i.length,r.push("[");for(var d="",s=0;s<o;s++)r.push(d),d=i[s],t(n,n.yc?n.yc.call(i,s+"",d):d,r),d=",";return void r.push("]")}if(o instanceof String||o instanceof Number||o instanceof Boolean)o=o.valueOf();else{for(i in r.push("{"),s="",o)Object.prototype.hasOwnProperty.call(o,i)&&(d=o[i],"function"!=typeof d&&(r.push(s),so(i,r),r.push(":"),t(n,n.yc?n.yc.call(o,i,d):d,r),s=","));return void r.push("}")}}switch("undefined"===typeof o?"undefined":babelHelpers.typeof(o)){case"string":so(o,r);break;case"number":r.push(isFinite(o)&&!isNaN(o)?o+"":"null");break;case"boolean":r.push(o+"");break;case"function":r.push("null");break;default:throw Error("Unknown type: "+("undefined"===typeof o?"undefined":babelHelpers.typeof(o)));}}},ro={'"':"\\\"","\\":"\\\\","/":"\\/","":"\\b","":"\\f","\n":"\\n","\r":"\\r","	":"\\t","":"\\u000b"},io=/\uffff/.test("\uFFFF")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g,so=function(e,t){t.push("\"",e.replace(io,function(e){var t=ro[e];return t||(t="\\u"+(65536|e.charCodeAt(0)).toString(16).substr(1),ro[e]=t),t}),"\"")},po=function(){};po.prototype.Dd=null;var co,lo=function(e){return e.Dd||(e.Dd=e.$c())},uo=function(){};_e(uo,po),uo.prototype.fc=function(){var e=ho(this);return e?new ActiveXObject(e):new XMLHttpRequest},uo.prototype.$c=function(){var e={};return ho(this)&&(e[0]=!0,e[1]=!0),e};var ho=function(e){if(!e.Vd&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var t,n=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],o=0;o<n.length;o++){t=n[o];try{return new ActiveXObject(t),e.Vd=t}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return e.Vd};co=new uo;var fo=function(){};_e(fo,po),fo.prototype.fc=function(){var e=new XMLHttpRequest;if("withCredentials"in e)return e;if("undefined"!=typeof XDomainRequest)return new mo;throw Error("Unsupported browser")},fo.prototype.$c=function(){return{}};var mo=function(){this.ua=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseText="",this.status=-1,this.statusText=this.responseXML=null,this.ua.onload=q(this.Re,this),this.ua.onerror=q(this.Sd,this),this.ua.onprogress=q(this.Se,this),this.ua.ontimeout=q(this.Te,this)};e=mo.prototype,e.open=function(e,t,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.ua.open(e,t)},e.send=function(e){if(!e)this.ua.send();else if("string"==typeof e)this.ua.send(e);else throw Error("Only string data is supported")},e.abort=function(){this.ua.abort()},e.setRequestHeader=function(){},e.Re=function(){this.status=200,this.responseText=this.ua.responseText,go(this,4)},e.Sd=function(){this.status=500,this.responseText="",go(this,4)},e.Te=function(){this.Sd()},e.Se=function(){this.status=200,go(this,1)};var go=function(e,t){e.readyState=t,e.onreadystatechange&&e.onreadystatechange()},bo=function(e,t,n){this.ef=n,this.Fe=e,this.wf=t,this.sc=0,this.lc=null};bo.prototype.get=function(){var e;return 0<this.sc?(this.sc--,e=this.lc,this.lc=e.next,e.next=null):e=this.Fe(),e},bo.prototype.put=function(e){this.wf(e),this.sc<this.ef&&(this.sc++,e.next=this.lc,this.lc=e)};var yo,vo=function(e){s.setTimeout(function(){throw e},0)},To=function(){var e=s.MessageChannel;if("undefined"===typeof e&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!Ot("Presto")&&(e=function(){var e=document.createElement("IFRAME");e.style.display="none",e.src="",document.documentElement.appendChild(e);var t=e.contentWindow,e=t.document;e.open(),e.write(""),e.close();var n="callImmediate"+Math.random(),o="file:"==t.location.protocol?"*":t.location.protocol+"//"+t.location.host,e=q(function(e){("*"==o||e.origin==o)&&e.data==n&&this.port1.onmessage()},this);t.addEventListener("message",e,!1),this.port1={},this.port2={postMessage:function(){t.postMessage(n,o)}}}),"undefined"!==typeof e&&!Ot("Trident")&&!Ot("MSIE")){var t=new e,n={},o=n;return t.port1.onmessage=function(){if(void 0!==n.next){n=n.next;var e=n.Gd;n.Gd=null,e()}},function(e){o.next={Gd:e},o=o.next,t.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(e){var t=document.createElement("SCRIPT");t.onreadystatechange=function(){t.onreadystatechange=null,t.parentNode.removeChild(t),t=null,e(),e=null},document.documentElement.appendChild(t)}:function(e){s.setTimeout(e,0)}},Io=function(){this.Jc=this.Za=null},ko=new bo(function(){return new Eo},function(e){e.reset()},100);Io.prototype.add=function(e,t){var n=ko.get();n.set(e,t),this.Jc?this.Jc.next=n:(ut(!this.Za),this.Za=n),this.Jc=n},Io.prototype.remove=function(){var e=null;return this.Za&&(e=this.Za,this.Za=this.Za.next,this.Za||(this.Jc=null),e.next=null),e};var Eo=function(){this.next=this.scope=this.Tc=null};Eo.prototype.set=function(e,t){this.Tc=e,this.scope=t,this.next=null},Eo.prototype.reset=function(){this.next=this.scope=this.Tc=null};var Ao,wo=function(e,t){Ao||So(),No||(Ao(),No=!0),Po.add(e,t)},So=function(){if(-1!=(s.Promise+"").indexOf("[native code]")){var e=s.Promise.resolve(void 0);Ao=function(){e.then(Ro)}}else Ao=function(){var e=Ro;!_(s.setImmediate)||s.Window&&s.Window.prototype&&!Ot("Edge")&&s.Window.prototype.setImmediate==s.setImmediate?(yo||(yo=To()),yo(e)):s.setImmediate(e)}},No=!1,Po=new Io,Ro=function(){for(var e;e=Po.remove();){try{e.Tc.call(e.scope)}catch(e){vo(e)}ko.put(e)}No=!1};!Xt&&!Wt||Wt&&9<=+zt||Xt&&Qt("1.9.1"),Wt&&Qt("9");var Oo=function(){this.pa="",this.ue=_o};Oo.prototype.Eb=!0,Oo.prototype.Bb=function(){return this.pa},Oo.prototype.toString=function(){return"SafeHtml{"+this.pa+"}"};var Co=function(e){return e instanceof Oo&&e.constructor===Oo&&e.ue===_o?e.pa:(v("expected object of type SafeHtml, got '"+e+"' of type "+h(e)),"type_error:SafeHtml")},_o={};Oo.prototype.$e=function(e){return this.pa=e,this};var Do=function(e,t){x(t,function(t,n){t&&t.Eb&&(t=t.Bb()),"style"==n?e.style.cssText=t:"class"==n?e.className=t:"for"==n?e.htmlFor=t:Lo.hasOwnProperty(n)?e.setAttribute(Lo[n],t):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?e.setAttribute(n,t):e[n]=t})},Lo={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"},xo=function(e){e.prototype.then=e.prototype.then,e.prototype.$goog_Thenable=!0},Uo=function(e){if(!e)return!1;try{return!!e.$goog_Thenable}catch(e){return!1}},Vo=function(e,t){if(this.N=0,this.ra=void 0,this.bb=this.na=this.s=null,this.jc=this.Sc=!1,e!=l)try{var n=this;e.call(t,function(e){Go(n,2,e)},function(e){if(!(e instanceof ta))try{if(e instanceof Error)throw e;throw Error("Promise rejected.")}catch(t){}Go(n,3,e)})}catch(e){Go(this,3,e)}},A=function(){this.next=this.context=this.jb=this.Oa=this.child=null,this.xb=!1};A.prototype.reset=function(){this.context=this.jb=this.Oa=this.child=null,this.xb=!1};var Mo=new bo(function(){return new A},function(e){e.reset()},100),jo=function(e,t,n){var o=Mo.get();return o.Oa=e,o.jb=t,o.context=n,o},Fo=function(e){if(e instanceof Vo)return e;var t=new Vo(l);return Go(t,2,e),t},B=function(e){return new Vo(function(t,n){n(e)})},D=function(e,t,n){Yo(e,t,n,null)||wo($(t,e))},Ko=function(t){return new Vo(function(n){var o=t.length,r=[];if(o)for(var i,d=function(e,t,i){o--,r[e]=t?{Ne:!0,value:i}:{Ne:!1,reason:i},0==o&&n(r)},e=0;e<t.length;e++)i=t[e],D(i,$(d,e,!0),$(d,e,!1));else n(r)})};Vo.prototype.then=function(e,t,n){return null!=e&&mt(e,"opt_onFulfilled should be a function."),null!=t&&mt(t,"opt_onRejected should be a function. Did you pass opt_context as the second argument instead of the third?"),Bo(this,_(e)?e:null,_(t)?t:null,n)},xo(Vo);var Wo=function(e,t){return t=jo(t,t,void 0),t.xb=!0,Xo(e,t),e};Vo.prototype.f=function(e,t){return Bo(this,null,e,t)},Vo.prototype.cancel=function(e){0==this.N&&wo(function(){var t=new ta(e);qo(this,t)},this)};var qo=function t(n,o){if(0==n.N)if(n.s){var r=n.s;if(r.na){for(var i=0,d=null,e=null,s=r.na;s&&(s.xb||(i++,s.child==n&&(d=s),!(d&&1<i)));s=s.next)d||(e=s);d&&(0==r.N&&1==i?t(r,o):(e?(i=e,ut(r.na),ut(null!=i),i.next==r.bb&&(r.bb=i),i.next=i.next.next):zo(r),$o(r,d,3,o)))}n.s=null}else Go(n,3,o)},Xo=function(e,t){e.na||2!=e.N&&3!=e.N||Jo(e),ut(null!=t.Oa),e.bb?e.bb.next=t:e.na=t,e.bb=t},Bo=function(t,n,o,r){var i=jo(null,null,null);return i.child=new Vo(function(t,d){i.Oa=n?function(o){try{var i=n.call(r,o);t(i)}catch(e){d(e)}}:t,i.jb=o?function(n){try{var i=o.call(r,n);void 0===i&&n instanceof ta?d(n):t(i)}catch(e){d(e)}}:d}),i.child.s=t,Xo(t,i),i.child};Vo.prototype.Jf=function(e){ut(1==this.N),this.N=0,Go(this,2,e)},Vo.prototype.Kf=function(e){ut(1==this.N),this.N=0,Go(this,3,e)};var Go=function(e,t,n){0==e.N&&(e===n&&(t=3,n=new TypeError("Promise cannot resolve to itself")),e.N=1,Yo(n,e.Jf,e.Kf,e)||(e.ra=n,e.N=t,e.s=null,Jo(e),3!=t||n instanceof ta||Qo(e,n)))},Yo=function(t,n,o,r){if(t instanceof Vo)return null!=n&&mt(n,"opt_onFulfilled should be a function."),null!=o&&mt(o,"opt_onRejected should be a function. Did you pass opt_context as the second argument instead of the third?"),Xo(t,jo(n||l,o||null,r)),!0;if(Uo(t))return t.then(n,o,r),!0;if(j(t))try{var i=t.then;if(_(i))return Ho(t,i,n,o,r),!0}catch(e){return o.call(r,e),!0}return!1},Ho=function(t,n,o,r,i){var e=!1,d=function(t){e||(e=!0,o.call(i,t))},s=function(t){e||(e=!0,r.call(i,t))};try{n.call(t,d,s)}catch(e){s(e)}},Jo=function(e){e.Sc||(e.Sc=!0,wo(e.Je,e))},zo=function(e){var t=null;return e.na&&(t=e.na,e.na=t.next,t.next=null),e.na||(e.bb=null),null!=t&&ut(null!=t.Oa),t};Vo.prototype.Je=function(){for(var e;e=zo(this);)$o(this,e,this.N,this.ra);this.Sc=!1};var $o=function(e,t,n,o){if(3==n&&t.jb&&!t.xb)for(;e&&e.jc;e=e.s)e.jc=!1;if(t.child)t.child.s=null,Zo(t,n,o);else try{t.xb?t.Oa.call(t.context):Zo(t,n,o)}catch(t){ea.call(null,t)}Mo.put(t)},Zo=function(e,t,n){2==t?e.Oa.call(e.context,n):e.jb&&e.jb.call(e.context,n)},Qo=function(e,t){e.jc=!0,wo(function(){e.jc&&ea.call(null,t)})},ea=vo,ta=function(e){r.call(this,e)};_e(ta,r),ta.prototype.name="cancel";var na=function(e,t){this.zc=[],this.$d=e,this.Jd=t||null,this.Cb=this.fb=!1,this.ra=void 0,this.ud=this.Cd=this.Nc=!1,this.Gc=0,this.s=null,this.Oc=0};na.prototype.cancel=function(e){if(this.fb)this.ra instanceof na&&this.ra.cancel();else{if(this.s){var t=this.s;delete this.s,e?t.cancel(e):(t.Oc--,0>=t.Oc&&t.cancel())}this.$d?this.$d.call(this.Jd,this):this.ud=!0,this.fb||ia(this,new ma)}},na.prototype.Hd=function(e,t){this.Nc=!1,oa(this,e,t)};var oa=function(e,t,n){e.fb=!0,e.ra=n,e.Cb=!t,ua(e)},ra=function(e){if(e.fb){if(!e.ud)throw new fa;e.ud=!1}};na.prototype.callback=function(e){ra(this),sa(e),oa(this,!0,e)};var ia=function(e,t){ra(e),sa(t),oa(e,!1,t)},sa=function(e){ut(!(e instanceof na),"An execution sequence may not be initiated with a blocking Deferred.")},pa=function(e){var t=ya("https://apis.google.com/js/client.js?onload="+nd);ca(t,null,e,void 0)},ca=function(e,t,n,o){ut(!e.Cd,"Blocking Deferreds can not be re-used"),e.zc.push([t,n,o]),e.fb&&ua(e)};na.prototype.then=function(t,n,o){var r,i,e=new Vo(function(e,t){r=e,i=t});return ca(this,r,function(t){t instanceof ma?e.cancel():i(t)}),e.then(t,n,o)},xo(na);var la=function(e){return vt(e.zc,function(e){return _(e[1])})},ua=function(t){if(t.Gc&&t.fb&&la(t)){var o=t.Gc,r=ba[o];r&&(s.clearTimeout(r.Db),delete ba[o]),t.Gc=0}t.s&&(t.s.Oc--,delete t.s);for(var o=t.ra,n=r=!1;t.zc.length&&!t.Nc;){var i=t.zc.shift(),e=i[0],d=i[1],i=i[2];if(e=t.Cb?d:e)try{var p=e.call(i||t.Jd,o);void 0!==p&&(t.Cb=t.Cb&&(p==o||p instanceof Error),t.ra=o=p),(Uo(o)||"function"===typeof s.Promise&&o instanceof s.Promise)&&(n=!0,t.Nc=!0)}catch(e){o=e,t.Cb=!0,la(t)||(r=!0)}}t.ra=o,n&&(p=q(t.Hd,t,!0),n=q(t.Hd,t,!1),o instanceof na?(ca(o,p,n),o.Cd=!0):o.then(p,n)),r&&(o=new ga(o),ba[o.Db]=o,t.Gc=o.Db)},fa=function(){r.call(this)};_e(fa,r),fa.prototype.message="Deferred has already fired",fa.prototype.name="AlreadyCalledError";var ma=function(){r.call(this)};_e(ma,r),ma.prototype.message="Deferred was canceled",ma.prototype.name="CanceledError";var ga=function(e){this.Db=s.setTimeout(q(this.If,this),0),this.P=e};ga.prototype.If=function(){throw ut(ba[this.Db],"Cannot throw an error that is not scheduled."),delete ba[this.Db],this.P};var ba={},ya=function(e){var t=new Hn;return t.wc=e,va(t)},va=function(t){var n,o={},r=o.document||document;t instanceof Hn&&t.constructor===Hn&&t.xe===Jn?n=t.wc:(v("expected object of type TrustedResourceUrl, got '"+t+"' of type "+h(t)),n="type_error:TrustedResourceUrl");var i=document.createElement("SCRIPT");t={fe:i,Zb:void 0};var s=new na(Ia,t),p=null,c=null==o.timeout?5E3:o.timeout;return 0<c&&(p=window.setTimeout(function(){ka(i,!0),ia(s,new Ea(1,"Timeout reached for loading script "+n))},c),t.Zb=p),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(ka(i,o.Uf||!1,p),s.callback(null))},i.onerror=function(){ka(i,!0,p),ia(s,new Ea(0,"Error while loading script "+n))},t=o.attributes||{},Vt(t,{type:"text/javascript",charset:"UTF-8",src:n}),Do(i,t),Ta(r).appendChild(i),s},Ta=function(e){var t;return(t=(e||document).getElementsByTagName("HEAD"))&&0!=t.length?t[0]:e.documentElement},Ia=function(){if(this&&this.fe){var e=this.fe;e&&"SCRIPT"==e.tagName&&ka(e,!0,this.Zb)}},ka=function(e,t,n){null!=n&&s.clearTimeout(n),e.onload=l,e.onerror=l,e.onreadystatechange=l,t&&window.setTimeout(function(){e&&e.parentNode&&e.parentNode.removeChild(e)},0)},Ea=function(e,t){var n="Jsloader error (code #"+e+")";t&&(n+=": "+t),r.call(this,n),this.code=e};_e(Ea,r);var Aa="StopIteration"in s?s.StopIteration:{message:"StopIteration",stack:""},wa=function(){};wa.prototype.next=function(){throw Aa},wa.prototype.ye=function(){return this};var Sa=function(e){this.ga={},this.w=[],this.wb=this.o=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var n=0;n<t;n+=2)this.set(arguments[n],arguments[n+1])}else e&&this.addAll(e)};Sa.prototype.Z=function(){Na(this);for(var e=[],t=0;t<this.w.length;t++)e.push(this.ga[this.w[t]]);return e},Sa.prototype.oa=function(){return Na(this),this.w.concat()},Sa.prototype.yb=function(e){return Pa(this.ga,e)},Sa.prototype.remove=function(e){return!!Pa(this.ga,e)&&(delete this.ga[e],this.o--,this.wb++,this.w.length>2*this.o&&Na(this),!0)};var Na=function(t){if(t.o!=t.w.length){for(var n,o=0,r=0;o<t.w.length;)n=t.w[o],Pa(t.ga,n)&&(t.w[r++]=n),o++;t.w.length=r}if(t.o!=t.w.length){for(var i={},r=o=0;o<t.w.length;)n=t.w[o],Pa(i,n)||(t.w[r++]=n,i[n]=1),o++;t.w.length=r}};e=Sa.prototype,e.get=function(e,t){return Pa(this.ga,e)?this.ga[e]:t},e.set=function(e,t){Pa(this.ga,e)||(this.o++,this.w.push(e),this.wb++),this.ga[e]=t},e.addAll=function(e){var t;e instanceof Sa?(t=e.oa(),e=e.Z()):(t=_t(e),e=Ct(e));for(var n=0;n<t.length;n++)this.set(t[n],e[n])},e.forEach=function(t,n){for(var o=this.oa(),r=0;r<o.length;r++){var i=o[r],e=this.get(i);t.call(n,e,i,this)}},e.clone=function(){return new Sa(this)},e.ye=function(t){Na(this);var n=0,o=this.wb,r=this,i=new wa;return i.next=function(){if(o!=r.wb)throw Error("The map has changed since the iterator was created");if(n>=r.w.length)throw Aa;var i=r.w[n++];return t?i:r.ga[i]},i};var Pa=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},Ra=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if(C(e))return e.split("");if(k(e)){for(var t=[],n=e.length,o=0;o<n;o++)t.push(e[o]);return t}return Ct(e)},Oa=function(e){if(e.oa&&"function"==typeof e.oa)return e.oa();if(!e.Z||"function"!=typeof e.Z){if(k(e)||C(e)){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}return _t(e)}},Ca=function(t,n){if(t.forEach&&"function"==typeof t.forEach)t.forEach(n,void 0);else if(k(t)||C(t))bt(t,n,void 0);else for(var o=Oa(t),r=Ra(t),i=r.length,e=0;e<i;e++)n.call(void 0,r[e],o&&o[e],t)},_a=function(t,n,o,r,i){this.reset(t,n,o,r,i)};_a.prototype.Md=null;var Da=0;_a.prototype.reset=function(t,n,o,r,i){"number"==typeof i||Da++,r||ge(),this.Ib=t,this.hf=n,delete this.Md},_a.prototype.ie=function(e){this.Ib=e};var La=function(e){this.jf=e,this.Td=this.Pc=this.Ib=this.s=null},xa=function(e,t){this.name=e,this.value=t};xa.prototype.toString=function(){return this.name};var Ua=new xa("SEVERE",1E3),ae=new xa("CONFIG",700),be=new xa("FINE",500);La.prototype.getParent=function(){return this.s},La.prototype.ie=function(e){this.Ib=e};var ce=function e(t){return t.Ib?t.Ib:t.s?e(t.s):(v("Root logger has no level set."),null)};La.prototype.log=function(t,n,o){if(t.value>=ce(this).value)for(_(n)&&(n=n()),t=new _a(t,n+"",this.jf),o&&(t.Md=o),o="log:"+t.hf,s.console&&(s.console.timeStamp?s.console.timeStamp(o):s.console.markTimeline&&s.console.markTimeline(o)),s.msWriteProfilerMark&&s.msWriteProfilerMark(o),o=this;o;){var r=o,i=t;if(r.Td)for(var e=0;n=r.Td[e];e++)n(i);o=o.getParent()}};var de={},ee=null,fe=function(){mn.call(this),this.fa=new An(this),this.ze=this,this.hd=null};_e(fe,mn),fe.prototype[Tn]=!0,e=fe.prototype,e.addEventListener=function(e,t,n,o){On(this,e,t,n,o)},e.removeEventListener=function(e,t,n,o){Ln(this,e,t,n,o)},e.dispatchEvent=function(t){je(this);var n,o=this.hd;if(o){n=[];for(var r=1;o;o=o.hd)n.push(o),ut(1E3>++r,"infinite loop")}if(o=this.ze,r=t.type||t,C(t))t=new yn(t,o);else if(t instanceof yn)t.target=t.target||o;else{var i=t;t=new yn(r,o),Vt(t,i)}var e,i=!0;if(n)for(var d=n.length-1;!t.nb&&0<=d;d--)e=t.currentTarget=n[d],i=Va(e,r,!0,t)&&i;if(t.nb||(e=t.currentTarget=o,i=Va(e,r,!0,t)&&i,t.nb||(i=Va(e,r,!1,t)&&i)),n)for(d=0;!t.nb&&d<n.length;d++)e=t.currentTarget=n[d],i=Va(e,r,!1,t)&&i;return i},e.cb=function(){if(fe.xd.cb.call(this),this.fa){var t,n=this.fa,o=0;for(t in n.G){for(var r=n.G[t],i=0;i<r.length;i++)++o,En(r[i]);delete n.G[t],n.$b--}}this.hd=null},e.listen=function(e,t,n,o){return je(this),this.fa.add(e+"",t,!1,n,o)};var he=function(t,n,o,r,i){t.fa.add(n+"",o,!0,r,i)},Va=function(t,o,r,i){if(o=t.fa.G[o+""],!o)return!0;o=o.concat();for(var d,s=!0,e=0;e<o.length;++e)if(d=o[e],d&&!d.rb&&d.capture==r){var p=d.listener,c=d.kc||d.src;d.dc&&wn(t.fa,d),s=!1!==p.call(c,i)&&s}return s&&0!=i.ee};fe.prototype.Uc=function(e,t,n,o){return this.fa.Uc(e+"",t,n,o)};var je=function(e){ut(e.fa,"Event target is not initialized. Did you call the superclass (goog.events.EventTarget) constructor?")},ie=function(e,t){e&&e.log(be,t,void 0)},E=function(e,t,n){if(_(e))n&&(e=q(e,n));else if(e&&"function"==typeof e.handleEvent)e=q(e.handleEvent,e);else throw Error("Invalid listener argument");return 2147483647<+t?-1:s.setTimeout(e,t||0)},ke=function(e){var t=null;return new Vo(function(n,o){t=E(function(){n(void 0)},e),-1==t&&o(Error("Failed to schedule timer."))}).f(function(e){throw s.clearTimeout(t),e})},le=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/,me=function(t,n){if(t){t=t.split("&");for(var o=0;o<t.length;o++){var r,e=t[o].indexOf("="),i=null;0<=e?(r=t[o].substring(0,e),i=t[o].substring(e+1)):r=t[o],n(r,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}},ne=function(e){fe.call(this),this.headers=new Sa,this.Lc=e||null,this.va=!1,this.Kc=this.b=null,this.Hb=this.Zd=this.qc="",this.Ka=this.Yc=this.oc=this.Rc=!1,this.sb=0,this.Ec=null,this.de="",this.Hc=this.sf=this.te=!1};_e(ne,fe);var F=ne.prototype,oe=function e(t){ee||(ee=new La(""),de[""]=ee,ee.ie(ae));var n;if(!(n=de[t])){n=new La(t);var o=t.lastIndexOf("."),r=t.substr(o+1),o=e(t.substr(0,o));o.Pc||(o.Pc={}),o.Pc[r]=n,n.s=o,de[t]=n}return n}("goog.net.XhrIo");F.U=oe;var pe=/^https?$/i,qe=["POST","PUT"];ne.prototype.send=function(t,n,o,r){if(this.b)throw Error("[goog.net.XhrIo] Object is active with another request="+this.qc+"; newUri="+t);n=n?n.toUpperCase():"GET",this.qc=t,this.Hb="",this.Zd=n,this.Rc=!1,this.va=!0,this.b=this.Lc?this.Lc.fc():co.fc(),this.Kc=this.Lc?lo(this.Lc):lo(co),this.b.onreadystatechange=q(this.be,this),this.sf&&"onprogress"in this.b&&(this.b.onprogress=q(function(e){this.ae(e,!0)},this),this.b.upload&&(this.b.upload.onprogress=q(this.ae,this)));try{ie(this.U,Be(this,"Opening Xhr")),this.Yc=!0,this.b.open(n,t+"",!0),this.Yc=!1}catch(e){return ie(this.U,Be(this,"Error opening Xhr: "+e.message)),void this.P(5,e)}t=o||"";var i=this.headers.clone();r&&Ca(r,function(e,t){i.set(t,e)}),r=Tt(i.oa()),o=s.FormData&&t instanceof s.FormData,!It(qe,n)||r||o||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(e,t){this.b.setRequestHeader(t,e)},this),this.de&&(this.b.responseType=this.de),"withCredentials"in this.b&&this.b.withCredentials!==this.te&&(this.b.withCredentials=this.te);try{we(this),0<this.sb&&(this.Hc=re(this.b),ie(this.U,Be(this,"Will abort after "+this.sb+"ms if incomplete, xhr2 "+this.Hc)),this.Hc?(this.b.timeout=this.sb,this.b.ontimeout=q(this.Zb,this)):this.Ec=E(this.Zb,this.sb,this)),ie(this.U,Be(this,"Sending request")),this.oc=!0,this.b.send(t),this.oc=!1}catch(e){ie(this.U,Be(this,"Send error: "+e.message)),this.P(5,e)}};var re=function(e){return Wt&&Qt(9)&&f(e.timeout)&&void 0!==e.ontimeout},ue=function(e){return"content-type"==e.toLowerCase()};ne.prototype.Zb=function(){"undefined"!=typeof i&&this.b&&(this.Hb="Timed out after "+this.sb+"ms, aborting",ie(this.U,Be(this,this.Hb)),this.dispatchEvent("timeout"),this.abort(8))},ne.prototype.P=function(e,t){this.va=!1,this.b&&(this.Ka=!0,this.b.abort(),this.Ka=!1),this.Hb=t,Ma(this),Ae(this)};var Ma=function(e){e.Rc||(e.Rc=!0,e.dispatchEvent("complete"),e.dispatchEvent("error"))};ne.prototype.abort=function(){this.b&&this.va&&(ie(this.U,Be(this,"Aborting")),this.va=!1,this.Ka=!0,this.b.abort(),this.Ka=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Ae(this))},ne.prototype.cb=function(){this.b&&(this.va&&(this.va=!1,this.Ka=!0,this.b.abort(),this.Ka=!1),Ae(this,!0)),ne.xd.cb.call(this)},ne.prototype.be=function(){this.isDisposed()||(this.Yc||this.oc||this.Ka?ve(this):this.nf())},ne.prototype.nf=function(){ve(this)};var ve=function(t){if(t.va&&"undefined"!=typeof i)if(t.Kc[1]&&4==te(t)&&2==ye(t))ie(t.U,Be(t,"Local request error detected and ignored"));else if(t.oc&&4==te(t))E(t.be,0,t);else if(t.dispatchEvent("readystatechange"),4==te(t)){ie(t.U,Be(t,"Request complete")),t.va=!1;try{var n,o=ye(t);a:n=200===o||201===o||202===o||204===o||206===o||304===o||1223===o;var r;if(!(r=n)){var d;if(d=0===o){var e=(t.qc+"").match(le)[1]||null;if(!e&&s.self&&s.self.location)var p=s.self.location.protocol,e=p.substr(0,p.length-1);d=!pe.test(e?e.toLowerCase():"")}r=d}if(r)t.dispatchEvent("complete"),t.dispatchEvent("success");else{var c;try{c=2<te(t)?t.b.statusText:""}catch(e){ie(t.U,"Can not get status: "+e.message),c=""}t.Hb=c+" ["+ye(t)+"]",Ma(t)}}finally{Ae(t)}}};ne.prototype.ae=function(e,t){ut("progress"===e.type,"goog.net.EventType.PROGRESS is of the same type as raw XHR progress."),this.dispatchEvent(xe(e,"progress")),this.dispatchEvent(xe(e,t?"downloadprogress":"uploadprogress"))};var xe=function(e,t){return{type:t,lengthComputable:e.lengthComputable,loaded:e.loaded,total:e.total}},Ae=function(t,e){if(t.b){we(t);var n=t.b,o=t.Kc[0]?l:null;t.b=null,t.Kc=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=o}catch(n){(t=t.U)&&t.log(Ua,"Problem encountered resetting onreadystatechange: "+n.message,void 0)}}},we=function(e){e.b&&e.Hc&&(e.b.ontimeout=null),f(e.Ec)&&(s.clearTimeout(e.Ec),e.Ec=null)},te=function(e){return e.b?e.b.readyState:0},ye=function(e){try{return 2<te(e)?e.b.status:-1}catch(e){return-1}},ze=function(e){try{return e.b?e.b.responseText:""}catch(t){return ie(e.U,"Can not get responseText: "+t.message),""}},Be=function(e,t){return t+" ["+e.Zd+" "+e.qc+" "+ye(e)+"]"},se=function e(t,n){this.ea=this.Xa=this.ha="",this.lb=null,this.Ja=this.xa="",this.S=this.df=!1;var o;t instanceof e?(this.S=void 0===n?t.S:n,ja(this,t.ha),o=t.Xa,Oe(this),this.Xa=o,Ce(this,t.ea),De(this,t.lb),Ee(this,t.xa),Fe(this,t.W.clone()),t=t.Ja,Oe(this),this.Ja=t):t&&(o=(t+"").match(le))?(this.S=!!n,ja(this,o[1]||"",!0),t=o[2]||"",Oe(this),this.Xa=Ge(t),Ce(this,o[3]||"",!0),De(this,o[4]),Ee(this,o[5]||"",!0),Fe(this,o[6]||"",!0),t=o[7]||"",Oe(this),this.Ja=Ge(t)):(this.S=!!n,this.W=new Me(null,0,this.S))};se.prototype.toString=function(){var e=[],t=this.ha;t&&e.push(He(t,Re,!0),":");var n=this.ea;return(n||"file"==t)&&(e.push("//"),(t=this.Xa)&&e.push(He(t,Re,!0),"@"),e.push(encodeURIComponent(n+"").replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.lb,null!=n&&e.push(":",n+"")),(n=this.xa)&&(this.ea&&"/"!=n.charAt(0)&&e.push("/"),e.push(He(n,"/"==n.charAt(0)?Le:Je,!0))),(n=this.W.toString())&&e.push("?",n),(n=this.Ja)&&e.push("#",He(n,Ne)),e.join("")},se.prototype.resolve=function(t){var n=this.clone(),o=!!t.ha;if(o?ja(n,t.ha):o=!!t.Xa,o){var r=t.Xa;Oe(n),n.Xa=r}else o=!!t.ea;if(o?Ce(n,t.ea):o=null!=t.lb,r=t.xa,o)De(n,t.lb);else if(o=!!t.xa){if("/"!=r.charAt(0))if(this.ea&&!this.xa)r="/"+r;else{var i=n.xa.lastIndexOf("/");-1!=i&&(r=n.xa.substr(0,i+1)+r)}if(i=r,".."==i||"."==i)r="";else if(st(i,"./")||st(i,"/.")){for(var e,r=0==i.lastIndexOf("/",0),i=i.split("/"),d=[],s=0;s<i.length;)e=i[s++],"."==e?r&&s==i.length&&d.push(""):".."==e?((1<d.length||1==d.length&&""!=d[0])&&d.pop(),r&&s==i.length&&d.push("")):(d.push(e),r=!0);r=d.join("/")}else r=i}return o?Ee(n,r):o=""!==t.W.toString(),o?Fe(n,t.W.clone()):o=!!t.Ja,o&&(t=t.Ja,Oe(n),n.Ja=t),n},se.prototype.clone=function(){return new se(this)};var ja=function(e,t,n){Oe(e),e.ha=n?Ge(t,!0):t,e.ha&&(e.ha=e.ha.replace(/:$/,""))},Ce=function(e,t,n){Oe(e),e.ea=n?Ge(t,!0):t},De=function(e,t){if(Oe(e),t){if(t=+t,isNaN(t)||0>t)throw Error("Bad port number "+t);e.lb=t}else e.lb=null},Ee=function(e,t,n){Oe(e),e.xa=n?Ge(t,!0):t},Fe=function(e,t,n){Oe(e),t instanceof Me?(e.W=t,e.W.td(e.S)):(n||(t=He(t,Ke)),e.W=new Me(t,0,e.S))},G=function(e,t,n){Oe(e),e.W.set(t,n)},J=function(e,t){return e.W.get(t)};se.prototype.removeParameter=function(e){return Oe(this),this.W.remove(e),this};var Oe=function(e){if(e.df)throw Error("Tried to modify a read-only Uri")};se.prototype.td=function(e){return this.S=e,this.W&&this.W.td(e),this};var H=function(e){return e instanceof se?e.clone():new se(e,void 0)},Pe=function(e,t){var n=new se(null,void 0);return ja(n,"https"),e&&Ce(n,e),t&&Ee(n,t),n},Ge=function(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""},He=function(e,t,n){return C(e)?(e=encodeURI(e).replace(t,Ie),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null},Ie=function(e){return e=e.charCodeAt(0),"%"+(15&e>>4).toString(16)+(15&e).toString(16)},Re=/[#\/\?@]/g,Je=/[\#\?:]/g,Le=/[\#\?]/g,Ke=/[\#\?@]/g,Ne=/#/g,Me=function(e,t,n){this.o=this.l=null,this.O=e||null,this.S=!!n},I=function(e){e.l||(e.l=new Sa,e.o=0,e.O&&me(e.O,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))},Se=function(t){var n=Oa(t);if("undefined"==typeof n)throw Error("Keys are undefined");var o=new Me(null,0,void 0);t=Ra(t);for(var r=0;r<n.length;r++){var i=n[r],e=t[r];g(e)?Ue(o,i,e):o.add(i,e)}return o};e=Me.prototype,e.add=function(e,t){I(this),this.O=null,e=this.R(e);var n=this.l.get(e);return n||this.l.set(e,n=[]),n.push(t),this.o=ht(this.o)+1,this},e.remove=function(e){return I(this),e=this.R(e),!!this.l.yb(e)&&(this.O=null,this.o=ht(this.o)-this.l.get(e).length,this.l.remove(e))},e.yb=function(e){return I(this),e=this.R(e),this.l.yb(e)},e.oa=function(){I(this);for(var t=this.l.Z(),n=this.l.oa(),o=[],r=0;r<n.length;r++)for(var i=t[r],e=0;e<i.length;e++)o.push(n[r]);return o},e.Z=function(e){I(this);var t=[];if(C(e))this.yb(e)&&(t=wt(t,this.l.get(this.R(e))));else{e=this.l.Z();for(var n=0;n<e.length;n++)t=wt(t,e[n])}return t},e.set=function(e,t){return I(this),this.O=null,e=this.R(e),this.yb(e)&&(this.o=ht(this.o)-this.l.get(e).length),this.l.set(e,[t]),this.o=ht(this.o)+1,this},e.get=function(e,t){return e=e?this.Z(e):[],0<e.length?e[0]+"":t};var Ue=function(e,t,n){e.remove(t),0<n.length&&(e.O=null,e.l.set(e.R(t),St(n)),e.o=ht(e.o)+n.length)};Me.prototype.toString=function(){if(this.O)return this.O;if(!this.l)return"";for(var t=[],n=this.l.oa(),o=0;o<n.length;o++)for(var r,i=n[o],d=encodeURIComponent(i+""),i=this.Z(i),e=0;e<i.length;e++)r=d,""!==i[e]&&(r+="="+encodeURIComponent(i[e]+"")),t.push(r);return this.O=t.join("&")},Me.prototype.clone=function(){var e=new Me;return e.O=this.O,this.l&&(e.l=this.l.clone(),e.o=this.o),e},Me.prototype.R=function(e){return e+="",this.S&&(e=e.toLowerCase()),e},Me.prototype.td=function(e){e&&!this.S&&(I(this),this.O=null,this.l.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(this.remove(t),Ue(this,n,e))},this)),this.S=e};var Te=function(){var e=Ja();return Wt&&!!zt&&11==zt||/Edge\/\d+/.test(e)},Ve=function(){return s.window&&s.window.location.href||""},We=function(e,t){t=t||s.window;var n="about:blank";e&&(n=$n(Qn(e))),t.location.href=n},Xe=function e(t,n){var o,r=[];for(o in t)o in n?babelHelpers.typeof(t[o])==babelHelpers.typeof(n[o])?g(t[o])?Lt(t[o],n[o])||r.push(o):"object"==babelHelpers.typeof(t[o])&&null!=t[o]&&null!=n[o]?0<e(t[o],n[o]).length&&r.push(o):t[o]!==n[o]&&r.push(o):r.push(o):r.push(o);for(o in n)o in t||r.push(o);return r},Ye=function(){var e;return e=Ja(),e="Chrome"==Ha(e)?(e=e.match(/\sChrome\/(\d+)/i))&&2==e.length?parseInt(e[1],10):null:null,e&&30>e?!1:!Wt||!zt||9<zt},$e=function(e){return e=(e||Ja()).toLowerCase(),e.match(/android/)||e.match(/webos/)||e.match(/iphone|ipad|ipod/)||e.match(/blackberry/)||e.match(/windows phone/)||e.match(/iemobile/)},Qe=function(e){e=e||s.window;try{e.close()}catch(e){}},Fa=function(t,o,r){var i=n(1E9*Math.random()).toString();o=o||500,r=r||600;var d=(window.screen.availHeight-r)/2,e=(window.screen.availWidth-o)/2;o={width:o,height:r,top:0<d?d:0,left:0<e?e:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},r=Ja().toLowerCase(),i&&(o.target=i,st(r,"crios/")&&(o.target="_blank")),"Firefox"==Ha(Ja())&&(t=t||"http://localhost",o.scrollbars=!0);for(var s in r=t||"about:blank",(i=o)||(i={}),t=window,o=r instanceof zn?r:Qn("undefined"==typeof r.href?r+"":r.href),r=i.target||r.target,d=[],i)switch(s){case"width":case"height":case"top":case"left":d.push(s+"="+i[s]);break;case"target":case"noreferrer":break;default:d.push(s+"="+(i[s]?1:0));}if(s=d.join(","),(Ot("iPhone")&&!Ot("iPod")&&!Ot("iPad")||Ot("iPad")||Ot("iPod"))&&t.navigator&&t.navigator.standalone&&r&&"_self"!=r?(s=t.document.createElement("A"),"undefined"!=typeof HTMLAnchorElement&&"undefined"!=typeof Location&&"undefined"!=typeof Element&&(d=s&&(s instanceof HTMLAnchorElement||!(s instanceof Location||s instanceof Element)),e=j(s)?s.constructor.displayName||s.constructor.name||Object.prototype.toString.call(s):void 0===s?"undefined":null===s?"null":"undefined"===typeof s?"undefined":babelHelpers.typeof(s),ut(d,"Argument is not a HTMLAnchorElement (or a non-Element mock); got: %s",e)),o=o instanceof zn?o:Qn(o),s.href=$n(o),s.setAttribute("target",r),i.noreferrer&&s.setAttribute("rel","noreferrer"),i=document.createEvent("MouseEvent"),i.initMouseEvent("click",!0,!0,t,1),s.dispatchEvent(i),s={}):i.noreferrer?(s=t.open("",r,s),i=$n(o),s&&((qt||Wt)&&st(i,";")&&(i="'"+i.replace(/'/g,"%27")+"'"),s.opener=null,t=Yn("b/12014412, meta tag with sanitized URL"),dt.test(i)&&(-1!=i.indexOf("&")&&(i=i.replace(tt,"&amp;")),-1!=i.indexOf("<")&&(i=i.replace(nt,"&lt;")),-1!=i.indexOf(">")&&(i=i.replace(ot,"&gt;")),-1!=i.indexOf("\"")&&(i=i.replace(at,"&quot;")),-1!=i.indexOf("'")&&(i=i.replace(rt,"&#39;")),-1!=i.indexOf("\0")&&(i=i.replace(it,"&#0;"))),i="<META HTTP-EQUIV=\"refresh\" content=\"0; url="+i+"\">",ft(Bn(t),"must provide justification"),ut(!/^[\s\xa0]*$/.test(Bn(t)),"must provide non-empty justification"),s.document.write(Co(new Oo().$e(i))),s.document.close())):s=t.open($n(o),r,s),s)try{s.focus()}catch(e){}return s},Ka=function(e){return new Vo(function(t){return function n(){ke(2E3).then(function(){return!e||e.closed?void t():n()})}()})},Wa=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,qa=function(){var e=null;return new Vo(function(t){"complete"==s.document.readyState?t():(e=function(){t()},Dn(window,"load",e))}).f(function(t){throw Ln(window,"load",e),t})},Xa=function(){return Ba(void 0)?qa().then(function(){return new Vo(function(e,t){var n=s.document,o=setTimeout(function(){t(Error("Cordova framework is not ready."))},1E3);n.addEventListener("deviceready",function(){clearTimeout(o),e()},!1)})}):B(Error("Cordova must run in an Android or iOS file scheme."))},Ba=function(e){return e=e||Ja(),"file:"===$a()&&e.toLowerCase().match(/iphone|ipad|ipod|android/)},Ga=function(){var e=s.window;try{return e&&e!=e.top}catch(e){return!1}},Ya=function(){return firebase.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":firebase.INTERNAL.hasOwnProperty("node")?"Node":"Browser"},L=function(){var e=Ya();return"ReactNative"===e||"Node"===e},Ha=function(e){var t=e.toLowerCase();if(st(t,"opera/")||st(t,"opr/")||st(t,"opios/"))return"Opera";if(st(t,"iemobile"))return"IEMobile";if(st(t,"msie")||st(t,"trident/"))return"IE";if(st(t,"edge/"))return"Edge";if(st(t,"firefox/"))return"Firefox";if(st(t,"silk/"))return"Silk";if(st(t,"blackberry"))return"Blackberry";if(st(t,"webos"))return"Webos";if(!(!st(t,"safari/")||st(t,"chrome/")||st(t,"crios/")||st(t,"android")))return"Safari";if(!st(t,"chrome/")&&!st(t,"crios/")||st(t,"edge/")){if(st(t,"android"))return"Android";if((e=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==e.length)return e[1]}else return"Chrome";return"Other"},Ze=function(e){var t=Ya();return("Browser"===t?Ha(Ja()):t)+"/JsCore/"+e},Ja=function(){return s.navigator&&s.navigator.userAgent||""},K=function(e,t){e=e.split("."),t=t||s;for(var n=0;n<e.length&&"object"==("undefined"===typeof t?"undefined":babelHelpers.typeof(t))&&null!=t;n++)t=t[e[n]];return n!=e.length&&(t=void 0),t},M=function(){var e;if(e=(za()||"chrome-extension:"===$a()||Ba())&&!L())a:{try{var t=s.localStorage,n=nr();if(t){t.setItem(n,"1"),t.removeItem(n),e=!Te()||!!s.indexedDB;break a}}catch(e){}e=!1}return e},za=function(){return"http:"===$a()||"https:"===$a()},$a=function(){return s.location&&s.location.protocol||null},Za=function(e){return e=e||Ja(),$e(e)||"Firefox"==Ha(e)?!1:!0},Qa=function(e){return"undefined"===typeof e?null:no(e)},er=function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&null!==e[t]&&void 0!==e[t]&&(n[t]=e[t]);return n},tr=function(e){if(null!==e)return JSON.parse(e)},nr=function(e){return e?e:""+n(1E9*Math.random()).toString()},or=function(e){return e=e||Ja(),"Safari"==Ha(e)||e.toLowerCase().match(/iphone|ipad|ipod/)?!1:!0},ar=function(){var e=s.___jsl;if(e&&e.H)for(var t in e.H)if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=e.H[t].L.concat(),e.CP)for(var n=0;n<e.CP.length;n++)e.CP[n]=null},rr=function(){return s.navigator&&"boolean"===typeof s.navigator.onLine?s.navigator.onLine:!0},ir=function(e,t,n,o){if(e>t)throw Error("Short delay should be less than long delay!");this.Ff=e,this.gf=t,e=n||Ja(),o=o||Ya(),this.cf=$e(e)||"ReactNative"===o};ir.prototype.get=function(){return this.cf?this.gf:this.Ff};var dr,sr=function(){var e=s.document;return e&&"undefined"!==typeof e.visibilityState?"visible"==e.visibilityState:!0},pr=function(){var e=s.document,t=null;return sr()||!e?Fo():new Vo(function(n){t=function(){sr()&&(e.removeEventListener("visibilitychange",t,!1),n())},e.addEventListener("visibilitychange",t,!1)}).f(function(n){throw e.removeEventListener("visibilitychange",t,!1),n})},cr={},lr=function(e){cr[e]||(cr[e]=!0,"undefined"!==typeof console&&"function"===typeof console.warn&&console.warn(e))};try{var ur={};Object.defineProperty(ur,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(ur,"abcd",{configurable:!0,enumerable:!0,value:2}),dr=2==ur.abcd}catch(e){dr=!1}var hr=function(e,t,n){dr?Object.defineProperty(e,t,{configurable:!0,enumerable:!0,value:n}):e[t]=n},N=function(e,t){dr?Object.defineProperty(e,"provider",{configurable:!0,enumerable:!0,get:function(){return lr("firebase.auth.AuthCredential.provider is deprecated. Please use the providerId field instead."),t}}):e.provider=t},fr=function(e,t){if(t)for(var n in t)t.hasOwnProperty(n)&&hr(e,n,t[n])},mr=function(e){var t={};return fr(t,e),t},gr=function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n},br=function(e,t){if(!t||!t.length)return!0;if(!e)return!1;for(var n,o=0;o<t.length;o++)if(n=e[t[o]],void 0===n||null===n||""===n)return!1;return!0},yr=function e(t){var n=t;if("object"==("undefined"===typeof t?"undefined":babelHelpers.typeof(t))&&null!=t){var o,n="length"in t?[]:{};for(o in t)hr(n,o,e(t[o]))}return n},vr=["oauth_consumer_key","oauth_nonce","oauth_signature","oauth_signature_method","oauth_timestamp","oauth_token","oauth_version"],Tr=["client_id","response_type","scope","redirect_uri","state"],Ir={Pf:{Mb:500,Lb:600,providerId:"facebook.com",qd:Tr},Qf:{Mb:500,Lb:620,providerId:"github.com",qd:Tr},Rf:{Mb:515,Lb:680,providerId:"google.com",qd:Tr},Sf:{Mb:485,Lb:705,providerId:"twitter.com",qd:vr}},kr=function(e){for(var t in Ir)if(Ir[t].providerId==e)return Ir[t];return null},Er=function(e,t){this.code="auth/"+e,this.message=t||wr[e]||""};_e(Er,Error),Er.prototype.C=function(){return{code:this.code,message:this.message}},Er.prototype.toJSON=function(){return this.C()};var Ar=function(e){var t=e&&e.code;return t?new Er(t.substring(5),e.message):null},wr={"argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"","code-expired":"","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"The user's credential is no longer valid. The user must sign in again.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-identifier-number":"","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"","missing-iframe-start":"An internal error has occurred.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"","missing-verification-code":"","missing-identifier-number":"","missing-verification-id":"","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":"This operation is not supported in the environment this application is running on. \"location.protocol\" must be http, https or chrome-extension and web storage must be enabled.","popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","user-cancelled":"User did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},Sr=function(t,n,o,r,i){if(this.da=t,this.J=n||null,this.tb=o||null,this.sd=r||null,this.P=i||null,this.tb||this.P){if(this.tb&&this.P)throw new Er("invalid-auth-event");if(this.tb&&!this.sd)throw new Er("invalid-auth-event")}else throw new Er("invalid-auth-event")};Sr.prototype.ic=function(){return this.sd},Sr.prototype.getError=function(){return this.P},Sr.prototype.C=function(){return{type:this.da,eventId:this.J,urlResponse:this.tb,sessionId:this.sd,error:this.P&&this.P.C()}};var P=function(e){return e=e||{},e.type?new Sr(e.type,e.eventId,e.urlResponse,e.sessionId,e.error&&Ar(e.error)):null},Nr=function(e){var n,o="unauthorized-domain",r=H(e);e=r.ea,r=r.ha,"chrome-extension"==r?n=t("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):"http"==r||"https"==r?n=t("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):o="operation-not-supported-in-this-environment",Er.call(this,o,n)};_e(Nr,Er);var Pr=function(e){this.ff=e.sub,ge(),this.gc=e.email||null},Rr=function(e,t){return e.then(function(n){if(n.idToken){var o;a:{var r=n.idToken.split(".");if(3==r.length){for(var r=r[1],e=(4-r.length%4)%4,i=0;i<e;i++)r+=".";try{var d=JSON.parse(on(r));if(d.sub&&d.iss&&d.aud&&d.exp){o=new Pr(d);break a}}catch(e){}}o=null}if(!o||t!=o.ff)throw new Er("user-mismatch");return n}throw new Er("user-mismatch")}).f(function(e){throw e&&e.code&&"auth/user-not-found"==e.code?new Er("user-mismatch"):e})},Or=function(e,t){if(t.idToken||t.accessToken)t.idToken&&hr(this,"idToken",t.idToken),t.accessToken&&hr(this,"accessToken",t.accessToken);else if(t.oauthToken&&t.oauthTokenSecret)hr(this,"accessToken",t.oauthToken),hr(this,"secret",t.oauthTokenSecret);else throw new Er("internal-error","failed to construct a credential");N(this,e),hr(this,"providerId",e)};Or.prototype.Ab=function(e){return gd(e,Cr(this))},Or.prototype.cd=function(e,t){var n=Cr(this);return n.idToken=t,bd(e,n)},Or.prototype.ed=function(e,t){var n=Cr(this);return Rr(yd(e,n),t)};var Cr=function(e){var t={};return e.idToken&&(t.id_token=e.idToken),e.accessToken&&(t.access_token=e.accessToken),e.secret&&(t.oauth_token_secret=e.secret),t.providerId=e.providerId,{postBody:Se(t).toString(),requestUri:"http://localhost"}};Or.prototype.C=function(){var e={providerId:this.providerId};return this.idToken&&(e.oauthIdToken=this.idToken),this.accessToken&&(e.oauthAccessToken=this.accessToken),this.secret&&(e.oauthTokenSecret=this.secret),e};var _r=function(e,t){this.vf=t||[],fr(this,{providerId:e,isOAuthProvider:!0}),this.Id={}};_r.prototype.setCustomParameters=function(e){return this.Id=xt(e),this};var Dr=function(e){_r.call(this,e,Tr),this.rd=[]};_e(Dr,_r),Dr.prototype.addScope=function(e){return It(this.rd,e)||this.rd.push(e),this},Dr.prototype.Rd=function(){return St(this.rd)},Dr.prototype.credential=function(e,t){if(!e&&!t)throw new Er("argument-error","credential failed: must provide the ID token and/or the access token.");return new Or(this.providerId,{idToken:e||null,accessToken:t||null})};var Q=function(){Dr.call(this,"facebook.com")};_e(Q,Dr),hr(Q,"PROVIDER_ID","facebook.com");var Lr=function(e){if(!e)throw new Er("argument-error","credential failed: expected 1 argument (the OAuth access token).");var t=e;return j(e)&&(t=e.accessToken),new Q().credential(null,t)},xr=function(){Dr.call(this,"github.com")};_e(xr,Dr),hr(xr,"PROVIDER_ID","github.com");var Ur=function(e){if(!e)throw new Er("argument-error","credential failed: expected 1 argument (the OAuth access token).");var t=e;return j(e)&&(t=e.accessToken),new xr().credential(null,t)},Vr=function(){Dr.call(this,"google.com"),this.addScope("profile")};_e(Vr,Dr),hr(Vr,"PROVIDER_ID","google.com");var Mr=function(e,t){var n=e;return j(e)&&(n=e.idToken,t=e.accessToken),new Vr().credential(n,t)},jr=function(){_r.call(this,"twitter.com",vr)};_e(jr,_r),hr(jr,"PROVIDER_ID","twitter.com");var Fr=function(e,t){var n=e;if(j(n)||(n={oauthToken:e,oauthTokenSecret:t}),!n.oauthToken||!n.oauthTokenSecret)throw new Er("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new Or("twitter.com",n)},Kr=function(e,t){this.gc=e,this.jd=t,N(this,"password"),hr(this,"providerId","password")};Kr.prototype.Ab=function(e){return qd(e,jd,{email:this.gc,password:this.jd})},Kr.prototype.cd=function(e,t){return qd(e,Dd,{idToken:t,email:this.gc,password:this.jd})},Kr.prototype.ed=function(e,t){return Rr(this.Ab(e),t)},Kr.prototype.C=function(){return{email:this.gc,password:this.jd}};var Wr=function(){fr(this,{providerId:"password",isOAuthProvider:!1})};fr(Wr,{PROVIDER_ID:"password"});var qr=function(e){if(!(e.Bd&&e.Ad||e.Yb&&e.ya))throw new Er("internal-error");this.I=e,hr(this,"providerId","identifier")};qr.prototype.Ab=function(e){return e.se(Xr(this))},qr.prototype.cd=function(e,t){var n=Xr(this);return n.idToken=t,qd(e,Kd,n)},qr.prototype.ed=function(e,t){var n=Xr(this);return n.operation="REAUTH",e=qd(e,Wd,n),Rr(e,t)},qr.prototype.C=function(){var e={providerId:"identifier"};return this.I.Bd&&(e.verificationId=this.I.Bd),this.I.Ad&&(e.verificationCode=this.I.Ad),this.I.Yb&&(e.temporaryProof=this.I.Yb),this.I.ya&&(e.identifierNumber=this.I.ya),e};var Xr=function(e){return e.I.Yb&&e.I.ya?{temporaryProof:e.I.Yb,identifierNumber:e.I.ya}:{sessionInfo:e.I.Bd,code:e.I.Ad}},Br=function(e){try{this.Ce=e||firebase.auth()}catch(e){throw new Er("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.identifierAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}fr(this,{providerId:"identifier",isOAuthProvider:!1})};Br.prototype.se=function(e,t){var n=this.Ce.g;return Fo(t.verify()).then(function(o){if(!C(o))throw new Er("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(t.type){case"recaptcha":return qd(n,Cd,{identifierNumber:e,recaptchaToken:o});default:throw new Er("argument-error","Only firebase.auth.ApplicationVerifiers with type=\"recaptcha\" are currently supported.");}})},fr(Br,{PROVIDER_ID:"identifier"});var Gr=function(e){if(e.temporaryProof&&e.identifierNumber)return new qr({Yb:e.temporaryProof,ya:e.identifierNumber});var t=e&&e.providerId;if(!t||"password"===t)return null;var n=e&&e.oauthAccessToken,o=e&&e.oauthTokenSecret;e=e&&e.oauthIdToken;try{return"google.com"===t?Mr(e,n):"facebook.com"===t?Lr(n):"github.com"===t?Ur(n):"twitter.com"===t?Fr(n,o):new Dr(t).credential(e,n)}catch(t){return null}},Yr=function(e){if(!e.isOAuthProvider)throw new Er("invalid-oauth-provider")},Hr=function(e,t,n){Er.call(this,e,n),e=t||{},e.email&&hr(this,"email",e.email),e.ya&&hr(this,"identifierNumber",e.ya),e.credential&&hr(this,"credential",e.credential)};_e(Hr,Er),Hr.prototype.C=function(){var e={code:this.code,message:this.message};this.email&&(e.email=this.email),this.identifierNumber&&(e.identifierNumber=this.identifierNumber);var t=this.credential&&this.credential.C();return t&&Vt(e,t),e},Hr.prototype.toJSON=function(){return this.C()};var Jr=function(e){if(e.code){var t=e.code||"";0==t.indexOf("auth/")&&(t=t.substring(5));var n={credential:Gr(e)};if(e.email)n.email=e.email;else if(e.identifierNumber)n.ya=e.identifierNumber;else return new Er(t,e.message||void 0);return new Hr(t,n,e.message)}return null},zr=function(e){this.Of=e};_e(zr,po),zr.prototype.fc=function(){return new this.Of},zr.prototype.$c=function(){return{}};var $r,Zr=function(e,t,n){var o;if(o="Node"==Ya(),o=s.XMLHttpRequest||o&&firebase.INTERNAL.node&&firebase.INTERNAL.node.XMLHttpRequest,!o)throw new Er("internal-error","The XMLHttpRequest compatibility library was not found.");this.j=e,e=t||{},this.Bf=e.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.Cf=e.secureTokenTimeout||S,this.ge=xt(e.secureTokenHeaders||Qr),this.Le=e.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.Me=e.firebaseTimeout||_i,this.Pd=xt(e.firebaseHeaders||ed),n&&(this.Pd["X-Client-Version"]=n,this.ge["X-Client-Version"]=n),this.Ee=new fo,this.Nf=new zr(o)},S=new ir(3E4,6E4),Qr={"Content-Type":"application/x-www-form-urlencoded"},_i=new ir(3E4,6E4),ed={"Content-Type":"application/json"},td=function(t,n,o,r,i,e,d){rr()?(Ye()?t=q(t.Ef,t):($r||($r=new Vo(function(e,t){od(e,t)})),t=q(t.Df,t)),t(n,o,r,i,e,d)):o&&o(null)};Zr.prototype.Ef=function(t,r,i,s,d,e){var p,n="Node"==Ya(),c=L()?n?new ne(this.Nf):new ne:new ne(this.Ee);e&&(c.sb=o(0,e),p=setTimeout(function(){c.dispatchEvent("timeout")},e)),c.listen("complete",function(){p&&clearTimeout(p);var e=null;try{e=JSON.parse(ze(this))||null}catch(t){e=null}r&&r(e)}),he(c,"ready",function(){p&&clearTimeout(p),this.Ga||(this.Ga=!0,this.cb())}),he(c,"timeout",function(){p&&clearTimeout(p),this.Ga||(this.Ga=!0,this.cb()),r&&r(null)}),c.send(t,i,s,d)};var nd="__fcb"+n(1E6*Math.random()).toString(),od=function(e,t){((window.gapi||{}).client||{}).request?e():(s[nd]=function(){((window.gapi||{}).client||{}).request?e():t(Error("CORS_UNSUPPORTED"))},pa(function(){t(Error("CORS_UNSUPPORTED"))}))};Zr.prototype.Df=function(t,n,o,r,i){var s=this;$r.then(function(){window.gapi.client.setApiKey(s.j);var p=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:o,body:r,headers:i,authType:"none",callback:function(e){window.gapi.auth.setToken(p),n&&n(e)}})}).f(function(e){n&&n({error:{message:e&&e.message||"CORS_UNSUPPORTED"}})})};var ad=function(e,t){return new Vo(function(n,o){"refresh_token"==t.grant_type&&t.refresh_token||"authorization_code"==t.grant_type&&t.code?td(e,e.Bf+"?key="+encodeURIComponent(e.j),function(e){e?e.error?o(R(e)):e.access_token&&e.refresh_token?n(e):o(new Er("internal-error")):o(new Er("network-request-failed"))},"POST",Se(t).toString(),e.ge,e.Cf.get()):o(new Er("internal-error"))})},rd=function(t,o,r,i,d,e){var s=H(t.Le+o);G(s,"key",t.j),e&&G(s,"cb",ge().toString());var p="GET"==r;if(p)for(var c in i)i.hasOwnProperty(c)&&G(s,c,i[c]);return new Vo(function(e,n){td(t,s.toString(),function(t){t?t.error?n(R(t,d||{})):e(t):n(new Er("network-request-failed"))},r,p?void 0:no(er(i)),t.Pd,t.Me.get())})},id=function(e){if(!qn.test(e.email))throw new Er("invalid-email")},dd=function(e){"email"in e&&id(e)},sd=function(e,t){return qd(e,Ed,{identifier:t,continueUri:za()?Ve():"http://localhost"}).then(function(e){return e.allProviders||[]})},pd=function(e){return qd(e,Rd,{}).then(function(e){return e.authorizedDomains||[]})},cd=function(e){if(!e.idToken)throw new Er("internal-error")},ld=function(e){if(!(e.identifierNumber||e.temporaryProof)){if(!e.sessionInfo)throw new Er("missing-verification-id");if(!e.code)throw new Er("missing-verification-code")}else if(!e.identifierNumber||!e.temporaryProof)throw new Er("internal-error")};Zr.prototype.signInAnonymously=function(){return qd(this,Ld,{})},Zr.prototype.updateEmail=function(e,t){return qd(this,_d,{idToken:e,email:t})},Zr.prototype.updatePassword=function(e,t){return qd(this,Dd,{idToken:e,password:t})};var ud={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};Zr.prototype.updateProfile=function(e,t){var n={idToken:e},o=[];return x(ud,function(r,i){var d=t[i];null===d?o.push(r):i in t&&(n[i]=d)}),o.length&&(n.deleteAttribute=o),qd(this,_d,n)},Zr.prototype.sendPasswordResetEmail=function(e){return qd(this,Pd,{requestType:"PASSWORD_RESET",email:e})},Zr.prototype.sendEmailVerification=function(e){return qd(this,Nd,{requestType:"VERIFY_EMAIL",idToken:e})},Zr.prototype.se=function(e){return qd(this,Fd,e)};var hd=function(e,t,n){return qd(e,wd,{idToken:t,deleteProvider:n})},fd=function(e){if(!e.requestUri||!e.sessionId&&!e.postBody)throw new Er("internal-error")},md=function(e){var t=null;if(e.needConfirmation?(e.code="account-exists-with-different-credential",t=Jr(e)):"FEDERATED_USER_ID_ALREADY_LINKED"==e.errorMessage?(e.code="credential-already-in-use",t=Jr(e)):"EMAIL_EXISTS"==e.errorMessage&&(e.code="email-already-in-use",t=Jr(e)),t)throw t;if(!e.idToken)throw new Er("internal-error")},gd=function(e,t){return t.returnIdpCredential=!0,qd(e,xd,t)},bd=function(e,t){return t.returnIdpCredential=!0,qd(e,Vd,t)},yd=function(e,t){return t.returnIdpCredential=!0,t.autoCreate=!1,qd(e,Ud,t)},vd=function(e){if(!e.oobCode)throw new Er("invalid-action-code")};Zr.prototype.confirmPasswordReset=function(e,t){return qd(this,Od,{oobCode:e,newPassword:t})},Zr.prototype.checkActionCode=function(e){return qd(this,Id,{oobCode:e})},Zr.prototype.applyActionCode=function(e){return qd(this,Td,{oobCode:e})};var Td={endpoint:"setAccountInfo",A:vd,Wa:"email"},Id={endpoint:"resetPassword",A:vd,Y:function(e){if(!e.email||!e.requestType)throw new Er("internal-error")}},kd={endpoint:"signupNewUser",A:function(e){if(id(e),!e.password)throw new Er("weak-password")},Y:cd,sa:!0},Ed={endpoint:"createAuthUri"},Ad={endpoint:"deleteAccount",Ua:["idToken"]},wd={endpoint:"setAccountInfo",Ua:["idToken","deleteProvider"],A:function(e){if(!g(e.deleteProvider))throw new Er("internal-error")}},Sd={endpoint:"getAccountInfo"},Nd={endpoint:"getOobConfirmationCode",Ua:["idToken","requestType"],A:function(e){if("VERIFY_EMAIL"!=e.requestType)throw new Er("internal-error")},Wa:"email"},Pd={endpoint:"getOobConfirmationCode",Ua:["requestType"],A:function(e){if("PASSWORD_RESET"!=e.requestType)throw new Er("internal-error");id(e)},Wa:"email"},Rd={De:!0,endpoint:"getProjectConfig",We:"GET"},Od={endpoint:"resetPassword",A:vd,Wa:"email"},Cd={endpoint:"sendVerificationCode",Ua:["identifierNumber","recaptchaToken"],Wa:"sessionInfo"},_d={endpoint:"setAccountInfo",Ua:["idToken"],A:dd,sa:!0},Dd={endpoint:"setAccountInfo",Ua:["idToken"],A:function(e){if(dd(e),!e.password)throw new Er("weak-password")},Y:cd,sa:!0},Ld={endpoint:"signupNewUser",Y:cd,sa:!0},xd={endpoint:"verifyAssertion",A:fd,Y:md,sa:!0},Ud={endpoint:"verifyAssertion",A:fd,Y:function(e){if(e.errorMessage&&"USER_NOT_FOUND"==e.errorMessage)throw new Er("user-not-found");if(!e.idToken)throw new Er("internal-error")},sa:!0},Vd={endpoint:"verifyAssertion",A:function(e){if(fd(e),!e.idToken)throw new Er("internal-error")},Y:md,sa:!0},Md={endpoint:"verifyCustomToken",A:function(e){if(!e.token)throw new Er("invalid-custom-token")},Y:cd,sa:!0},jd={endpoint:"verifyPassword",A:function(e){if(id(e),!e.password)throw new Er("wrong-password")},Y:cd,sa:!0},Fd={endpoint:"verifyidentifierNumber",A:ld,Y:cd},Kd={endpoint:"verifyidentifierNumber",A:function(e){if(!e.idToken)throw new Er("internal-error");ld(e)},Y:function(e){if(e.temporaryProof)throw e.code="credential-already-in-use",Jr(e);cd(e)}},Wd={Ge:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyidentifierNumber",A:ld,Y:cd},qd=function(t,n,o){if(!br(o,n.Ua))return B(new Er("internal-error"));var r,e=n.We||"POST";return Fo(o).then(n.A).then(function(){return n.sa&&(o.returnSecureToken=!0),rd(t,n.endpoint,e,o,n.Ge,n.De||!1)}).then(function(e){return r=e}).then(n.Y).then(function(){if(!n.Wa)return r;if(!(n.Wa in r))throw new Er("internal-error");return r[n.Wa]})},R=function(t,n){var o=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"";var r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(o=r[o]?new Er(r[o]):null)return o;for(var i in o=t.error&&t.error.message||"",r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_identifier_NUMBER:"invalid-identifier-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_identifier_NUMBER:"missing-identifier-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired"},Vt(r,n||{}),n=(n=o.match(/^[^\s]+\s*:\s*(.*)$/))&&1<n.length?n[1]:void 0,r)if(0===o.indexOf(i))return new Er(r[i],n);return!n&&t&&(n=Qa(t)),new Er("internal-error",n)},Xd=function(e){this.V=e};Xd.prototype.value=function(){return this.V},Xd.prototype.je=function(e){return this.V.style=e,this};var Bd=function(e){this.V=e||{}};Bd.prototype.value=function(){return this.V},Bd.prototype.je=function(e){return this.V.style=e,this};var Gd=function(e){this.Lf=e,this.nc=null,this.gd=Hd(this)},Yd=function(e){var t=new Bd;return t.V.where=document.body,t.V.url=e.Lf,t.V.messageHandlersFilter=K("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),t.V.attributes=t.V.attributes||{},new Xd(t.V.attributes).je({position:"absolute",top:"-100px",width:"1px",height:"1px"}),t.V.dontclear=!0,t},Hd=function(t){return Zd().then(function(){return new Vo(function(n,e){K("gapi.iframes.getContext")().open(Yd(t).value(),function(o){t.nc=o,t.nc.restyle({setHideOnLeave:!1});var r=setTimeout(function(){e(Error("Network Error"))},$d.get()),i=function(){clearTimeout(r),n()};o.ping(i).then(i,function(){e(Error("Network Error"))})})})})};Gd.prototype.sendMessage=function(e){var t=this;return this.gd.then(function(){return new Vo(function(n){t.nc.send(e.type,e,n,K("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})})};var Jd=function(e,t){e.gd.then(function(){e.nc.register("authEvent",t,K("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})},zd=new ir(3E4,6E4),$d=new ir(5E3,15E3),Zd=function(){return new Vo(function(e,t){if(rr()){var o=function(){ar(),K("gapi.load")("gapi.iframes",{callback:e,ontimeout:function(){ar(),t(Error("Network Error"))},timeout:zd.get()})};if(K("gapi.iframes.Iframe"))e();else if(K("gapi.load"))o();else{var r="__iframefcb"+n(1E6*Math.random()).toString();s[r]=function(){K("gapi.load")?o():t(Error("Network Error"))},Fo(ya("https://apis.google.com/js/api.js?onload="+r)).f(function(){t(Error("Network Error"))})}}else t(Error("Network Error"))})},Qd=function(e,t,n){this.v=e,this.j=t,this.D=n,this.Ya=null,this.ac=Pe(this.v,"/__/auth/iframe"),G(this.ac,"apiKey",this.j),G(this.ac,"appName",this.D)};Qd.prototype.setVersion=function(e){return this.Ya=e,this},Qd.prototype.toString=function(){return this.Ya?G(this.ac,"v",this.Ya):this.ac.removeParameter("v"),this.ac.toString()};var es=function(t,n,o,r,i){this.v=t,this.j=n,this.D=o,this.Be=r,this.Ya=this.J=this.pd=null,this.Pb=i};es.prototype.setVersion=function(e){return this.Ya=e,this},es.prototype.toString=function(){var t=Pe(this.v,"/__/auth/handler");if(G(t,"apiKey",this.j),G(t,"appName",this.D),G(t,"authType",this.Be),this.Pb.isOAuthProvider){G(t,"providerId",this.Pb.providerId);var n,o=this.Pb,r=er(o.Id);for(n in r)r[n]=r[n].toString();for(o=o.vf,r=xt(r),n=0;n<o.length;n++){var i=o[n];i in r&&delete r[i]}Dt(r)||G(t,"customParameters",Qa(r))}if("function"===typeof this.Pb.Rd&&(o=this.Pb.Rd(),o.length&&G(t,"scopes",o.join(","))),this.pd?G(t,"redirectUrl",this.pd):t.removeParameter("redirectUrl"),this.J?G(t,"eventId",this.J):t.removeParameter("eventId"),this.Ya?G(t,"v",this.Ya):t.removeParameter("v"),this.bc)for(var e in this.bc)this.bc.hasOwnProperty(e)&&!J(t,e)&&G(t,e,this.bc[e]);return t.toString()};var ts=function(e,t,n,o){this.v=e,this.j=t,this.D=n,this.Oe=(this.Ea=o||null)?Ze(this.Ea):null,o=this.Ea,this.Xe=new Qd(e,t,n).setVersion(o).toString(),this.ma=[],this.g=new Zr(t,null,this.Oe),this.pc=this.wa=null},ns=function(e){var t=Ve();return pd(e).then(function(o){a:{for(var r=H(t),i=r.ha,r=r.ea,e=0;e<o.length;e++){var d,s=o[e];d=r;var p=i;if(0==s.indexOf("chrome-extension://")?d=H(s).ea==d&&"chrome-extension"==p:"http"!=p&&"https"!=p?d=!1:Wa.test(s)?d=d==s:(s=s.split(".").join("\\."),d=new RegExp("^(.+\\."+s+"|"+s+")$","i").test(d)),d){o=!0;break a}}o=!1}if(!o)throw new Nr(Ve())})};e=ts.prototype,e.Gb=function(){if(this.pc)return this.pc;var e=this;return this.pc=qa().then(function(){e.mc=new Gd(e.Xe),as(e)})},e.Vb=function(t,n,o){var r=new Er("popup-closed-by-user"),i=new Er("web-storage-unsupported"),e=this,d=!1;return this.La().then(function(){rs(e).then(function(e){e||(t&&Qe(t),n(i),d=!0)})}).f(function(){}).then(function(){if(!d)return Ka(t)}).then(function(){if(!d)return ke(o).then(function(){n(r)})})},e.ke=function(){var e=Ja();return!Za(e)&&!or(e)},e.Ud=function(){return!1},e.Nb=function(t,n,o,r,i,e,s){if(!t)return B(new Er("popup-blocked"));if(s&&!Za())return this.La().f(function(e){Qe(t),i(e)}),r(),Fo();this.wa||(this.wa=ns(this.g));var p=this;return this.wa.then(function(){var e=p.La().f(function(e){throw Qe(t),i(e),e});return r(),e}).then(function(){if(Yr(o),!s){var r=os(p.v,p.j,p.D,n,o,null,e,p.Ea);We(r,t)}}).f(function(e){throw"auth/network-request-failed"==e.code&&(p.wa=null),e})},e.Ob=function(t,n,o){this.wa||(this.wa=ns(this.g));var r=this;return this.wa.then(function(){Yr(n);var i=os(r.v,r.j,r.D,t,n,Ve(),o,r.Ea);We(i)})},e.La=function(){var e=this;return this.Gb().then(function(){return e.mc.gd}).f(function(){throw e.wa=null,new Er("network-request-failed")})},e.ne=function(){return!0};var os=function(t,o,r,i,d,e,s,p,c){return t=new es(t,o,r,i,d),t.pd=e,t.J=s,e=t.setVersion(p),e.bc=xt(c||null),e.toString()},as=function(e){if(!e.mc)throw Error("IfcHandler must be initialized!");Jd(e.mc,function(t){var n={};if(t&&t.authEvent){var o=!1;for(t=P(t.authEvent),n=0;n<e.ma.length;n++)o=e.ma[n](t)||o;return n={},n.status=o?"ACK":"ERROR",Fo(n)}return n.status="ERROR",Fo(n)})},rs=function(e){var t={type:"webStorageSupport"};return e.Gb().then(function(){return e.mc.sendMessage(t)}).then(function(e){if(e&&e.length&&"undefined"!==typeof e[0].webStorageSupport)return e[0].webStorageSupport;throw Error()})};ts.prototype.$a=function(e){this.ma.push(e)},ts.prototype.Tb=function(e){At(this.ma,function(t){return t==e})};var is=function(e){if(this.B=e||firebase.INTERNAL.reactNative&&firebase.INTERNAL.reactNative.AsyncStorage,!this.B)throw new Er("internal-error","The React Native compatibility library was not found.")};e=is.prototype,e.get=function(e){return Fo(this.B.getItem(e)).then(function(e){return e&&tr(e)})},e.set=function(e,t){return Fo(this.B.setItem(e,Qa(t)))},e.remove=function(e){return Fo(this.B.removeItem(e))},e.ab=function(){},e.Ta=function(){};var ds=function(){this.B={}};e=ds.prototype,e.get=function(e){return Fo(this.B[e])},e.set=function(e,t){return this.B[e]=t,Fo()},e.remove=function(e){return delete this.B[e],Fo()},e.ab=function(){},e.Ta=function(){};var ss=function(){if(!ps()){if("Node"==Ya())throw new Er("internal-error","The LocalStorage compatibility library was not found.");throw new Er("web-storage-unsupported")}this.B=s.localStorage||firebase.INTERNAL.node.localStorage},ps=function(){var e="Node"==Ya(),e=s.localStorage||e&&firebase.INTERNAL.node&&firebase.INTERNAL.node.localStorage;if(!e)return!1;try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch(e){return!1}};e=ss.prototype,e.get=function(e){var t=this;return Fo().then(function(){var n=t.B.getItem(e);return tr(n)})},e.set=function(e,t){var n=this;return Fo().then(function(){var o=Qa(t);null===o?n.remove(e):n.B.setItem(e,o)})},e.remove=function(e){var t=this;return Fo().then(function(){t.B.removeItem(e)})},e.ab=function(e){s.window&&On(s.window,"storage",e)},e.Ta=function(e){s.window&&Ln(s.window,"storage",e)};var cs=function(){this.B={}};e=cs.prototype,e.get=function(){return Fo(null)},e.set=function(){return Fo()},e.remove=function(){return Fo()},e.ab=function(){},e.Ta=function(){};var ls=function(){if(!us()){if("Node"==Ya())throw new Er("internal-error","The SessionStorage compatibility library was not found.");throw new Er("web-storage-unsupported")}this.B=s.sessionStorage||firebase.INTERNAL.node.sessionStorage},us=function(){var e="Node"==Ya(),e=s.sessionStorage||e&&firebase.INTERNAL.node&&firebase.INTERNAL.node.sessionStorage;if(!e)return!1;try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch(e){return!1}};e=ls.prototype,e.get=function(e){var t=this;return Fo().then(function(){var n=t.B.getItem(e);return tr(n)})},e.set=function(e,t){var n=this;return Fo().then(function(){var o=Qa(t);null===o?n.remove(e):n.B.setItem(e,o)})},e.remove=function(e){var t=this;return Fo().then(function(){t.B.removeItem(e)})},e.ab=function(){},e.Ta=function(){};var hs,fs=function(t,n,o,r,i,e){if(!window.indexedDB)throw new Er("web-storage-unsupported");this.He=t,this.fd=n,this.Qc=o,this.re=r,this.wb=i,this.$={},this.Wb=[],this.Jb=0,this.Ye=e||s.indexedDB},ms=function(e){return new Vo(function(t,n){var o=e.Ye.open(e.He,e.wb);o.onerror=function(e){n(Error(e.target.errorCode))},o.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore(e.fd,{keyPath:e.Qc})}catch(e){n(e)}},o.onsuccess=function(e){t(e.target.result)}})},gs=function(e){return e.Xd||(e.Xd=ms(e)),e.Xd},bs=function(e,t){return t.objectStore(e.fd)},ys=function(e,t,n){return t.transaction([e.fd],n?"readwrite":"readonly")},vs=function(e){return new Vo(function(t,n){e.onsuccess=function(e){e&&e.target?t(e.target.result):t()},e.onerror=function(e){n(Error(e.target.errorCode))}})};e=fs.prototype,e.set=function(t,n){var o,r=!1,i=this;return Wo(gs(this).then(function(e){return o=e,e=bs(i,ys(i,o,!0)),vs(e.get(t))}).then(function(e){var d=bs(i,ys(i,o,!0));return e?(e.value=n,vs(d.put(e))):(i.Jb++,r=!0,e={},e[i.Qc]=t,e[i.re]=n,vs(d.add(e)))}).then(function(){i.$[t]=n}),function(){r&&i.Jb--})},e.get=function(e){var t=this;return gs(this).then(function(n){return vs(bs(t,ys(t,n,!1)).get(e))}).then(function(e){return e&&e.value})},e.remove=function(e){var t=!1,n=this;return Wo(gs(this).then(function(o){return t=!0,n.Jb++,vs(bs(n,ys(n,o,!0))["delete"](e))}).then(function(){delete n.$[e]}),function(){t&&n.Jb--})},e.Hf=function(){var e=this;return gs(this).then(function(t){var n=bs(e,ys(e,t,!1));return n.getAll?vs(n.getAll()):new Vo(function(t,o){var r=[],i=n.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e["continue"]()):t(r)},i.onerror=function(e){o(Error(e.target.errorCode))}})}).then(function(t){var n={},o=[];if(0==e.Jb){for(o=0;o<t.length;o++)n[t[o][e.Qc]]=t[o][e.re];o=Xe(e.$,n),e.$=n}return o})},e.ab=function(e){0==this.Wb.length&&this.vd(),this.Wb.push(e)},e.Ta=function(e){At(this.Wb,function(t){return t==e}),0==this.Wb.length&&this.Bc()},e.vd=function(){var e=this;this.Bc();(function t(){return e.kd=ke(800).then(q(e.Hf,e)).then(function(t){0<t.length&&bt(e.Wb,function(e){e(t)})}).then(t).f(function(e){"STOP_EVENT"!=e.message&&t()}),e.kd})()},e.Bc=function(){this.kd&&this.kd.cancel("STOP_EVENT")};var Ts,Is=function(){this.Ld={Browser:ks,Node:Es,ReactNative:As}[Ya()]},ks={M:ss,yd:ls},Es={M:ss,yd:ls},As={M:is,yd:cs},ws=function(e){var t={},n=e.email,o=e.newEmail;if(e=e.requestType,!n||!e)throw Error("Invalid provider user info!");t.fromEmail=o||null,t.email=n,hr(this,"operation",e),hr(this,"data",yr(t))},Ss=function(t,n,o,r,i,e){if(this.pf=t,this.xf=n,this.Qe=o,this.rc=r,this.zd=i,this.yf=!!e,this.kb=null,this.Ma=this.rc,this.zd<this.rc)throw Error("Proactive refresh lower bound greater than upper bound!")};Ss.prototype.start=function(){this.Ma=this.rc,Ps(this,!0)};var Ns=function(e,t){return t?(e.Ma=e.rc,e.Qe()):(t=e.Ma,e.Ma*=2,e.Ma>e.zd&&(e.Ma=e.zd),t)},Ps=function e(t,n){t.stop(),t.kb=ke(Ns(t,n)).then(function(){return t.yf?Fo():pr()}).then(function(){return t.pf()}).then(function(){e(t,!0)}).f(function(n){t.xf(n)&&e(t,!1)})};Ss.prototype.stop=function(){this.kb&&(this.kb.cancel(),this.kb=null)};var Rs=function(e){var t={"facebook.com":Os,"google.com":_s,"github.com":Cs,"twitter.com":Ds},n=e&&e.providerId;return n?t[n]?new t[n](e):new ai(e):null},ai=function(e){var t=tr(e.rawUserInfo||"{}");if(e=e.providerId,!e)throw Error("Invalid additional user info!");hr(this,"profile",yr(t||{})),hr(this,"providerId",e)},Os=function(e){if(ai.call(this,e),"facebook.com"!=this.providerId)throw Error("Invalid provider id!")};_e(Os,ai);var Cs=function(e){if(ai.call(this,e),"github.com"!=this.providerId)throw Error("Invalid provider id!");hr(this,"username",this.profile&&this.profile.login||null)};_e(Cs,ai);var _s=function(e){if(ai.call(this,e),"google.com"!=this.providerId)throw Error("Invalid provider id!")};_e(_s,ai);var Ds=function(e){if(ai.call(this,e),"twitter.com"!=this.providerId)throw Error("Invalid provider id!");hr(this,"username",e.screenName||null)};_e(Ds,ai);var Ls,ci=function(t,n,o,r){this.kf=t,this.he=n,this.zf=o,this.Ub=r,this.T={},Ts||(Ts=new Is),t=Ts;try{var i;Te()?(hs||(hs=new fs("firebaseLocalStorageDb","firebaseLocalStorage","fbase_key","value",1)),i=hs):i=new t.Ld.M,this.Qa=i}catch(e){this.Qa=new ds,this.Ub=!0}try{this.Dc=new t.Ld.yd}catch(e){this.Dc=new ds}this.wd=q(this.le,this),this.$={}},bi=function(){return Ls||(Ls=new ci("firebase",":",!or(Ja())&&Ga(),Za())),Ls};e=ci.prototype,e.R=function(e,t){return this.kf+this.he+e.name+(t?this.he+t:"")},e.get=function(e,t){return(e.M?this.Qa:this.Dc).get(this.R(e,t))},e.remove=function(e,t){return t=this.R(e,t),e.M&&!this.Ub&&(this.$[t]=null),(e.M?this.Qa:this.Dc).remove(t)},e.set=function(t,n,o){var r=this.R(t,o),i=this,e=t.M?this.Qa:this.Dc;return e.set(r,n).then(function(){return e.get(r)}).then(function(e){t.M&&!this.Ub&&(i.$[r]=e)})},e.addListener=function(e,t,n){e=this.R(e,t),this.Ub||(this.$[e]=s.localStorage.getItem(e)),Dt(this.T)&&this.vd(),this.T[e]||(this.T[e]=[]),this.T[e].push(n)},e.removeListener=function(e,t,n){e=this.R(e,t),this.T[e]&&(At(this.T[e],function(e){return e==n}),0==this.T[e].length&&delete this.T[e]),Dt(this.T)&&this.Bc()},e.vd=function(){this.Qa.ab(this.wd),this.Ub||Te()||di(this)};var di=function(e){ei(e),e.dd=setInterval(function(){for(var t in e.T){var n=s.localStorage.getItem(t),o=e.$[t];n!=o&&(e.$[t]=n,n=new vn({type:"storage",key:t,target:window,oldValue:o,newValue:n,rf:!0}),e.le(n))}},1E3)},ei=function(e){e.dd&&(clearInterval(e.dd),e.dd=null)};ci.prototype.Bc=function(){this.Qa.Ta(this.wd),ei(this)},ci.prototype.le=function(e){if(e&&e.Pe){var t=e.eb.key;if("undefined"===typeof e.eb.rf?ei(this):this.Qa.Ta(this.wd),this.zf){var n=s.localStorage.getItem(t);e=e.eb.newValue,e!=n&&(e?s.localStorage.setItem(t,e):e||s.localStorage.removeItem(t))}this.$[t]=s.localStorage.getItem(t),this.Ed(t)}else bt(e,q(this.Ed,this))},ci.prototype.Ed=function(e){this.T[e]&&bt(this.T[e],function(e){e()})};var fi=function(e,t){this.u=e,this.i=t||bi()},gi={name:"authEvent",M:!0},hi=function(e){return e.i.get(gi,e.u).then(function(e){return P(e)})};fi.prototype.$a=function(e){this.i.addListener(gi,this.u,e)},fi.prototype.Tb=function(e){this.i.removeListener(gi,this.u,e)};var ii=function(e){this.i=e||bi()},ji={name:"sessionId",M:!1};ii.prototype.ic=function(e){return this.i.get(ji,e)};var ki=function(t,n,o,r,i,e){this.v=t,this.j=n,this.D=o,this.Ea=r||null,this.me=n+":"+o,this.Af=new ii,this.Qd=new fi(this.me),this.Zc=null,this.ma=[],this.bf=i||500,this.tf=e||2E3,this.Fb=this.uc=null},li=function(e){return new Er("invalid-cordova-configuration",e)};ki.prototype.La=function(){return this.ad?this.ad:this.ad=Xa().then(function(){if("function"!==typeof K("universalLinks.subscribe",s))throw li("cordova-universal-links-plugin is not installed");if("undefined"===typeof K("BuildInfo.packageName",s))throw li("cordova-plugin-buildinfo is not installed");if("function"!==typeof K("cordova.plugins.browsertab.openUrl",s))throw li("cordova-plugin-browsertab is not installed");if("function"!==typeof K("cordova.InAppBrowser.open",s))throw li("cordova-plugin-inappbrowser is not installed")},function(){throw new Er("cordova-not-ready")})};var mi=function(){for(var e=20,t=[];0<e;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(n(62*Math.random()))),e--;return t.join("")},ni=function(e){var t=new hn;return t.update(e),Nt(t.digest())};e=ki.prototype,e.Vb=function(e,t){return t(new Er("operation-not-supported-in-this-environment")),Fo()},e.Nb=function(){return B(new Er("operation-not-supported-in-this-environment"))},e.ne=function(){return!1},e.ke=function(){return!0},e.Ud=function(){return!0},e.Ob=function(t,o,r){if(this.uc)return B(new Er("redirect-operation-pending"));var i=this,d=s.document,e=null,p=null,c=null,l=null;return this.uc=Wo(Fo().then(function(){return Yr(o),si(i)}).then(function(){return oi(i,t,o,r)}).then(function(){return new Vo(function(t,n){p=function(){var e=K("cordova.plugins.browsertab.close",s);return t(),"function"===typeof e&&e(),i.Fb&&"function"===typeof i.Fb.close&&(i.Fb.close(),i.Fb=null),!1},i.$a(p),c=function(){e||(e=ke(i.tf).then(function(){n(new Er("redirect-cancelled-by-user"))}))},l=function(){sr()&&c()},d.addEventListener("resume",c,!1),Ja().toLowerCase().match(/android/)||d.addEventListener("visibilitychange",l,!1)}).f(function(e){return pi(i).then(function(){throw e})})}),function(){c&&d.removeEventListener("resume",c,!1),l&&d.removeEventListener("visibilitychange",l,!1),e&&e.cancel(),p&&i.Tb(p),i.uc=null})};var oi=function(t,o,r,i){var d=mi(),e=new Sr(o,i,null,d,new Er("no-auth-event")),p=K("BuildInfo.packageName",s);if("string"!==typeof p)throw new Er("invalid-cordova-configuration");var c=K("BuildInfo.displayName",s),l={};if(Ja().toLowerCase().match(/iphone|ipad|ipod/))l.ibi=p;else if(Ja().toLowerCase().match(/android/))l.apn=p;else return B(new Er("operation-not-supported-in-this-environment"));c&&(l.appDisplayName=c),d=ni(d),l.sessionId=d;var n=os(t.v,t.j,t.D,o,r,null,i,t.Ea,l);return t.La().then(function(){var n=t.me;return t.Af.i.set(gi,e.C(),n)}).then(function(){var e=K("cordova.plugins.browsertab.isAvailable",s);if("function"!==typeof e)throw new Er("invalid-cordova-configuration");var o=null;e(function(e){if(e){if(o=K("cordova.plugins.browsertab.openUrl",s),"function"!==typeof o)throw new Er("invalid-cordova-configuration");o(n)}else{if(o=K("cordova.InAppBrowser.open",s),"function"!==typeof o)throw new Er("invalid-cordova-configuration");e=o;var r;r=Ja(),r=r.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||r.match(/(iPad|iPhone|iPod).*OS 8_\d/i),t.Fb=e(n,r?"_blank":"_system","location=yes")}})})},qi=function(e,t){for(var n=0;n<e.ma.length;n++)try{e.ma[n](t)}catch(e){}},si=function(e){return e.Zc||(e.Zc=e.La().then(function(){return new Vo(function(t){e.$a(function n(o){return t(o),e.Tb(n),!1}),ri(e)})})),e.Zc},pi=function(e){var t=null;return hi(e.Qd).then(function(n){return t=n,n=e.Qd,n.i.remove(gi,n.u)}).then(function(){return t})},ri=function(t){var n=K("universalLinks.subscribe",s);if("function"!==typeof n)throw new Er("invalid-cordova-configuration");var o=new Sr("unknown",null,null,null,new Er("no-auth-event")),r=!1,i=ke(t.bf).then(function(){return pi(t).then(function(){r||qi(t,o)})}),e=function(s){r=!0,i&&i.cancel(),pi(t).then(function(r){var i=o;if(r&&s&&s.url){var d,i=null;d=s.url;var p=H(d),c=J(p,"link"),l=J(H(c),"link"),p=J(p,"deep_link_id");d=J(H(p),"link")||p||l||c||d,-1!=d.indexOf("/__/auth/callback")&&(i=H(d),i=tr(J(i,"firebaseError")||null),i=(i="object"===("undefined"===typeof i?"undefined":babelHelpers.typeof(i))?Ar(i):null)?new Sr(r.da,r.J,null,null,i):new Sr(r.da,r.J,d,r.ic())),i=i||o}qi(t,i)})},d=s.handleOpenURL;s.handleOpenURL=function(t){if(0==t.indexOf(K("BuildInfo.packageName",s)+"://")&&e({url:t}),"function"===typeof d)try{d(t)}catch(e){console.error(e)}},n(null,e)};ki.prototype.$a=function(e){this.ma.push(e),si(this).f(function(t){"auth/invalid-cordova-configuration"===t.code&&(t=new Sr("unknown",null,null,null,new Er("no-auth-event")),e(t))})},ki.prototype.Tb=function(e){At(this.ma,function(t){return t==e})};var ti=function(e){this.u=e,this.i=bi()},ui={name:"pendingRedirect",M:!1},vi=function(e){return e.i.set(ui,"pending",e.u)},wi=function(e){return e.i.remove(ui,e.u)},xi=function(e){return e.i.get(ui,e.u).then(function(e){return"pending"==e})},yi=function(e,t,n){this.v=e,this.j=t,this.D=n,this.Xb=[],this.ib=!1,this.Mc=q(this.Wc,this),this.Ra=new Ii(this),this.ld=new Mi(this),this.Kb=new ti(this.j+":"+this.D),this.Aa={},this.Aa.unknown=this.Ra,this.Aa.signInViaRedirect=this.Ra,this.Aa.linkViaRedirect=this.Ra,this.Aa.reauthViaRedirect=this.Ra,this.Aa.signInViaPopup=this.ld,this.Aa.linkViaPopup=this.ld,this.Aa.reauthViaPopup=this.ld,this.K=T(this.v,this.j,this.D)},T=function(e,t,n){var o=firebase.SDK_VERSION||null;return Ba()?new ki(e,t,n,o):new ts(e,t,n,o)};yi.prototype.reset=function(){this.ib=!1,this.K.Tb(this.Mc),this.K=T(this.v,this.j,this.D)},yi.prototype.Gb=function(){var e=this;this.ib||(this.ib=!0,this.K.$a(this.Mc));var t=this.K;return this.K.La().f(function(n){throw e.K==t&&e.reset(),n})};var Bi=function(e){e.K.ke()&&e.Gb().f(function(t){var n=new Sr("unknown",null,null,null,new Er("operation-not-supported-in-this-environment"));Gi(t)&&e.Wc(n)}),e.K.Ud()||zi(e.Ra)};yi.prototype.subscribe=function(e){if(It(this.Xb,e)||this.Xb.push(e),!this.ib){var t=this;xi(this.Kb).then(function(e){e?wi(t.Kb).then(function(){t.Gb().f(function(e){var n=new Sr("unknown",null,null,null,new Er("operation-not-supported-in-this-environment"));Gi(e)&&t.Wc(n)})}):Bi(t)}).f(function(){Bi(t)})}},yi.prototype.unsubscribe=function(e){At(this.Xb,function(t){return t==e})},yi.prototype.Wc=function(e){if(!e)throw new Er("invalid-auth-event");for(var t,n=!1,o=0;o<this.Xb.length;o++)if(t=this.Xb[o],t.Fd(e.da,e.J)){(n=this.Aa[e.da])&&n.ce(e,t),n=!0;break}return zi(this.Ra),n};var Ei=new ir(2E3,1E4),Fi=new ir(3E4,6E4);yi.prototype.getRedirectResult=function(){return this.Ra.getRedirectResult()},yi.prototype.Nb=function(t,n,o,r,i){var e=this;return this.K.Nb(t,n,o,function(){e.ib||(e.ib=!0,e.K.$a(e.Mc))},function(){e.reset()},r,i)};var Gi=function(e){return e&&"auth/cordova-not-ready"==e.code};yi.prototype.Ob=function(t,n,o){var r,e=this;return vi(this.Kb).then(function(){return e.K.Ob(t,n,o).f(function(t){if(Gi(t))throw new Er("operation-not-supported-in-this-environment");return r=t,wi(e.Kb).then(function(){throw r})}).then(function(){return e.K.ne()?new Vo(function(){}):wi(e.Kb).then(function(){return e.getRedirectResult()}).then(function(){}).f(function(){})})})},yi.prototype.Vb=function(e,t,n,o){return this.K.Vb(n,function(n){e.Va(t,null,n,o)},Ei.get())};var Ci={},Hi=function(e,t,n){var o=t+":"+n;return Ci[o]||(Ci[o]=new yi(e,t,n)),Ci[o]},Ii=function(e){this.i=e,this.qb=null,this.Rb=[],this.Qb=[],this.ob=null,this.od=!1};Ii.prototype.reset=function(){this.qb=null,this.ob&&(this.ob.cancel(),this.ob=null)},Ii.prototype.ce=function(t,n){if(!t)return B(new Er("invalid-auth-event"));this.reset(),this.od=!0;var o=t.da,r=t.J,i=t.getError()&&"auth/web-storage-unsupported"==t.getError().code,e=t.getError()&&"auth/operation-not-supported-in-this-environment"==t.getError().code;return"unknown"!=o||i||e?t=t.P?this.md(t,n):n.zb(o,r)?this.nd(t,n):B(new Er("invalid-auth-event")):(Li(this,!1,null,null),t=Fo()),t};var zi=function(e){e.od||(e.od=!0,Li(e,!1,null,null))};Ii.prototype.md=function(e){return Li(this,!0,null,e.getError()),Fo()},Ii.prototype.nd=function(t,n){var o=this;n=n.zb(t.da,t.J);var r=t.tb,i=t.ic(),e=!!t.da.match(/Redirect$/);return n(r,i).then(function(t){Li(o,e,t,null)}).f(function(t){Li(o,e,null,t)})};var Di=function(e,t){if(e.qb=function(){return B(t)},e.Qb.length)for(var n=0;n<e.Qb.length;n++)e.Qb[n](t)},Ki=function(e,t){if(e.qb=function(){return Fo(t)},e.Rb.length)for(var n=0;n<e.Rb.length;n++)e.Rb[n](t)},Li=function(e,t,n,o){t?o?Di(e,o):Ki(e,n):Ki(e,{user:null}),e.Rb=[],e.Qb=[]};Ii.prototype.getRedirectResult=function(){var e=this;return new Vo(function(t,n){e.qb?e.qb().then(t,n):(e.Rb.push(t),e.Qb.push(n),Ji(e))})};var Ji=function(e){var t=new Er("timeout");e.ob&&e.ob.cancel(),e.ob=ke(Fi.get()).then(function(){e.qb||Li(e,!0,null,t)})},Mi=function(e){this.i=e};Mi.prototype.ce=function(e,t){if(!e)return B(new Er("invalid-auth-event"));var n=e.da,o=e.J;return e.P?this.md(e,t):t.zb(n,o)?this.nd(e,t):B(new Er("invalid-auth-event"))},Mi.prototype.md=function(e,t){return t.Va(e.da,null,e.getError(),e.J),Fo()},Mi.prototype.nd=function(t,n){var o=t.J,r=t.da,i=n.zb(r,o),e=t.tb;return t=t.ic(),i(e,t).then(function(e){n.Va(r,e,null,o)}).f(function(e){n.Va(r,null,e,o)})};var Ai=function(e){this.g=e,this.Ba=this.X=null,this.Ha=0};Ai.prototype.C=function(){return{apiKey:this.g.j,refreshToken:this.X,accessToken:this.Ba,expirationTime:this.Ha}};var Ni=function(e,t){var n=t.idToken,o=t.refreshToken;t=Pi(t.expiresIn),e.Ba=n,e.Ha=t,e.X=o},Pi=function(e){return ge()+1E3*parseInt(e,10)},Oi=function(e,t){return ad(e.g,t).then(function(t){return e.Ba=t.access_token,e.Ha=Pi(t.expires_in),e.X=t.refresh_token,{accessToken:e.Ba,expirationTime:e.Ha,refreshToken:e.X}}).f(function(t){throw"auth/user-token-expired"==t.code&&(e.X=null),t})};Ai.prototype.getToken=function(e){return e=!!e,this.Ba&&!this.X?B(new Er("user-token-expired")):e||!this.Ba||ge()>this.Ha-3E4?this.X?Oi(this,{grant_type:"refresh_token",refresh_token:this.X}):Fo(null):Fo({accessToken:this.Ba,expirationTime:this.Ha,refreshToken:this.X})};var Qi=function(t,n,o,r,i){fr(this,{uid:t,displayName:r||null,photoURL:i||null,email:o||null,providerId:n})},Ri=function(e,t){for(var n in yn.call(this,e),t)this[n]=t[n]};_e(Ri,yn);var Si=function(e,t,n){this.ba=[],this.j=e.apiKey,this.D=e.appName,this.v=e.authDomain||null,e=firebase.SDK_VERSION?Ze(firebase.SDK_VERSION):null,this.g=new Zr(this.j,null,e),this.ia=new Ai(this.g),Xi(this,t.idToken),Ni(this.ia,t),hr(this,"refreshToken",this.ia.X),$i(this,n||{}),fe.call(this),this.vc=!1,this.v&&M()&&(this.m=Hi(this.v,this.j,this.D)),this.Ac=[],this.ka=null,this.mb=xs(this),this.vb=q(this.Xc,this)};_e(Si,fe),Si.prototype.Xc=function(){this.mb.kb&&(this.mb.stop(),this.mb.start())};var xs=function(e){return new Ss(function(){return e.getToken(!0)},function(e){return e&&"auth/network-request-failed"==e.code},function(){var t=e.ia.Ha-ge()-3E5;return 0<t?t:0},3E4,96E4,!1)},Vi=function(e){e.Kd||e.mb.kb||(e.mb.start(),Ln(e,"tokenChanged",e.vb),On(e,"tokenChanged",e.vb))},Wi=function(e){Ln(e,"tokenChanged",e.vb),e.mb.stop()},Xi=function(e,t){e.Yd=t,hr(e,"_lat",t)},Ti=function(e,t){At(e.Ac,function(e){return e==t})},Yi=function(e){for(var t=[],n=0;n<e.Ac.length;n++)t.push(e.Ac[n](e));return Ko(t).then(function(){return e})},Zi=function(e){e.m&&!e.vc&&(e.vc=!0,e.m.subscribe(e))},$i=function(e,t){fr(e,{uid:t.uid,displayName:t.displayName||null,photoURL:t.photoURL||null,email:t.email||null,emailVerified:t.emailVerified||!1,identifierNumber:t.identifierNumber||null,isAnonymous:t.isAnonymous||!1,providerData:[]})};hr(Si.prototype,"providerId","firebase");var Ui=function(){},Us=function(e){return Fo().then(function(){if(e.Kd)throw new Er("app-deleted")})},Vs=function(e){return yt(e.providerData,function(e){return e.providerId})},Ms=function(e,t){t&&(js(e,t.providerId),e.providerData.push(t))},js=function(e,t){At(e.providerData,function(e){return e.providerId==t})},Fs=function(e,t,n){("uid"!=t||n)&&e.hasOwnProperty(t)&&hr(e,t,n)};Si.prototype.copy=function(e){var t=this;t!=e&&(fr(this,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,identifierNumber:e.identifierNumber,isAnonymous:e.isAnonymous,providerData:[]}),bt(e.providerData,function(e){Ms(t,e)}),this.ia=e.ia,hr(this,"refreshToken",this.ia.X))},Si.prototype.reload=function(){var e=this;return this.c(Us(this).then(function(){return Ks(e).then(function(){return Yi(e)}).then(Ui)}))};var Ks=function(e){return e.getToken().then(function(t){var n=e.isAnonymous;return qs(e,t).then(function(){return n||Fs(e,"isAnonymous",!1),t})})};Si.prototype.getToken=function(e){var t=this;return this.c(Us(this).then(function(){return t.ia.getToken(e)}).then(function(e){if(!e)throw new Er("internal-error");return e.accessToken!=t.Yd&&(Xi(t,e.accessToken),t.Na()),Fs(t,"refreshToken",e.refreshToken),e.accessToken}))};var Ws=function(e,t){t.idToken&&e.Yd!=t.idToken&&(Ni(e.ia,t),e.Na(),Xi(e,t.idToken),Fs(e,"refreshToken",e.ia.X))};Si.prototype.Na=function(){this.dispatchEvent(new Ri("tokenChanged"))};var qs=function(e,t){return qd(e.g,Sd,{idToken:t}).then(q(e.qf,e))};Si.prototype.qf=function(e){if(e=e.users,!e||!e.length)throw new Er("internal-error");e=e[0],$i(this,{uid:e.localId,displayName:e.displayName,photoURL:e.photoUrl,email:e.email,emailVerified:!!e.emailVerified,identifierNumber:e.identifierNumber});for(var t=Xs(e),n=0;n<t.length;n++)Ms(this,t[n]);Fs(this,"isAnonymous",!(this.email&&e.passwordHash)&&!(this.providerData&&this.providerData.length))};var Xs=function(e){return(e=e.providerUserInfo)&&e.length?yt(e,function(e){return new Qi(e.rawId,e.providerId,e.email,e.displayName,e.photoUrl)}):[]},Bs=function(e,t){var n=null;return e.c(t.ed(e.g,e.uid).then(function(t){return Ws(e,t),n=Hs(e,t,"reauthenticate"),e.ka=null,e.reload()}).then(function(){return n}),!0)};Si.prototype.reauthenticate=function(e){return lr("firebase.User.prototype.reauthenticate is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.reauthenticateWithCredential(e)},Si.prototype.reauthenticateWithCredential=function(e){return Bs(this,e).then(function(){})};var Gs=function(e,t){return Ks(e).then(function(){if(It(Vs(e),t))return Yi(e).then(function(){throw new Er("provider-already-linked")})})},Ys=function(e,t){var n=null;return e.c(Gs(e,t.providerId).then(function(){return e.getToken()}).then(function(n){return t.cd(e.g,n)}).then(function(t){return n=Hs(e,t,"link"),Js(e,t)}).then(function(){return n}))};Si.prototype.link=function(e){return lr("firebase.User.prototype.link is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.linkWithCredential(e)},Si.prototype.linkWithCredential=function(e){return Ys(this,e).then(function(e){return e.user})};var Hs=function(e,t,n){var o=Gr(t);return t=Rs(t),mr({user:e,credential:o,additionalUserInfo:t,operationType:n})},Js=function(e,t){return Ws(e,t),e.reload().then(function(){return e})};e=Si.prototype,e.updateEmail=function(e){var t=this;return this.c(this.getToken().then(function(n){return t.g.updateEmail(n,e)}).then(function(e){return Ws(t,e),t.reload()}))},e.updatePassword=function(e){var t=this;return this.c(this.getToken().then(function(n){return t.g.updatePassword(n,e)}).then(function(e){return Ws(t,e),t.reload()}))},e.updateProfile=function(e){if(void 0===e.displayName&&void 0===e.photoURL)return Us(this);var t=this;return this.c(this.getToken().then(function(n){return t.g.updateProfile(n,{displayName:e.displayName,photoUrl:e.photoURL})}).then(function(e){return Ws(t,e),Fs(t,"displayName",e.displayName||null),Fs(t,"photoURL",e.photoUrl||null),Yi(t)}).then(Ui))},e.unlink=function(e){var t=this;return this.c(Ks(this).then(function(n){return It(Vs(t),e)?hd(t.g,n,[e]).then(function(e){var n={};return bt(e.providerUserInfo||[],function(e){n[e.providerId]=!0}),bt(Vs(t),function(e){n[e]||js(t,e)}),Yi(t)}):Yi(t).then(function(){throw new Er("no-such-provider")})}))},e["delete"]=function(){var e=this;return this.c(this.getToken().then(function(t){return qd(e.g,Ad,{idToken:t})}).then(function(){e.dispatchEvent(new Ri("userDeleted"))})).then(function(){for(var t=0;t<e.ba.length;t++)e.ba[t].cancel("app-deleted");e.ba=[],e.Kd=!0,Wi(e),hr(e,"refreshToken",null),e.m&&e.m.unsubscribe(e)})},e.Fd=function(e,t){return"linkViaPopup"==e&&(this.ca||null)==t&&this.aa||"reauthViaPopup"==e&&(this.ca||null)==t&&this.aa||"linkViaRedirect"==e&&(this.za||null)==t||"reauthViaRedirect"==e&&(this.za||null)==t},e.Va=function(e,t,n,o){"linkViaPopup"!=e&&"reauthViaPopup"!=e||o!=(this.ca||null)||(n&&this.Pa?this.Pa(n):t&&!n&&this.aa&&this.aa(t),this.F&&(this.F.cancel(),this.F=null),delete this.aa,delete this.Pa)},e.zb=function(e,t){return"linkViaPopup"==e&&t==(this.ca||null)?q(this.Nd,this):"reauthViaPopup"==e&&t==(this.ca||null)?q(this.Od,this):"linkViaRedirect"==e&&(this.za||null)==t?q(this.Nd,this):"reauthViaRedirect"==e&&(this.za||null)==t?q(this.Od,this):null},e.hc=function(){return nr(this.uid+":::")};var zs=function(e,t){return Zs(e,"linkViaPopup",t,function(){return Gs(e,t.providerId).then(function(){return Yi(e)})},!1)};Si.prototype.linkWithPopup=function(e){return zs(this,e).then(function(e){return e?mr({user:e.user,credential:e.credential,operationType:e.operationType}):e})};var $s=function(e,t){return Zs(e,"reauthViaPopup",t,function(){return Fo()},!0)};Si.prototype.reauthenticateWithPopup=function(e){return $s(this,e).then(function(e){return e?mr({user:e.user,credential:e.credential,operationType:e.operationType}):e})};var Zs=function(t,o,r,i,d){if(!M())return B(new Er("operation-not-supported-in-this-environment"));if(t.ka&&!d)return B(t.ka);var s=kr(r.providerId),p=t.hc(),c=null;(!Za()||Ga())&&t.v&&r.isOAuthProvider&&(c=os(t.v,t.j,t.D,o,r,null,p,firebase.SDK_VERSION||null));var l=Fa(c,s&&s.Mb,s&&s.Lb);return i=i().then(function(){if(ep(t),!d)return t.getToken().then(function(){})}).then(function(){return t.m.Nb(l,o,r,p,!!c)}).then(function(){return new Vo(function(e,n){t.Va(o,null,new Er("cancelled-popup-request"),t.ca||null),t.aa=e,t.Pa=n,t.ca=p,t.F=t.m.Vb(t,o,l,p)})}).then(function(e){return l&&Qe(l),e}).f(function(e){throw l&&Qe(l),e}),t.c(i,d)};Si.prototype.linkWithRedirect=function(e){var t=this;return Qs(this,"linkViaRedirect",e,function(){return Gs(t,e.providerId)},!1)},Si.prototype.reauthenticateWithRedirect=function(e){return Qs(this,"reauthViaRedirect",e,function(){return Fo()},!0)};var Qs=function(t,n,o,r,i){if(!M())return B(new Er("operation-not-supported-in-this-environment"));if(t.ka&&!i)return B(t.ka);var d=null,s=t.hc();return r=r().then(function(){if(ep(t),!i)return t.getToken().then(function(){})}).then(function(){return t.za=s,Yi(t)}).then(function(e){return t.Sa&&(e=t.Sa,e=e.i.set(rp,t.C(),e.u)),e}).then(function(){return t.m.Ob(n,o,s)}).f(function(e){if(d=e,t.Sa)return ip(t.Sa);throw d}).then(function(){if(d)throw d}),t.c(r,i)},ep=function(e){if(!e.m||!e.vc){if(e.m&&!e.vc)throw new Er("internal-error");throw new Er("auth-domain-config-required")}};Si.prototype.Nd=function(t,n){var o=this;this.F&&(this.F.cancel(),this.F=null);var r=null,i=this.getToken().then(function(e){return bd(o.g,{requestUri:t,sessionId:n,idToken:e})}).then(function(e){return r=Hs(o,e,"link"),Js(o,e)}).then(function(){return r});return this.c(i)},Si.prototype.Od=function(t,n){var o=this;this.F&&(this.F.cancel(),this.F=null);var r=null,i=Fo().then(function(){return Rr(yd(o.g,{requestUri:t,sessionId:n}),o.uid)}).then(function(e){return r=Hs(o,e,"reauthenticate"),Ws(o,e),o.ka=null,o.reload()}).then(function(){return r});return this.c(i,!0)},Si.prototype.sendEmailVerification=function(){var e=this;return this.c(this.getToken().then(function(t){return e.g.sendEmailVerification(t)}).then(function(t){if(e.email!=t)return e.reload()}).then(function(){}))},Si.prototype.c=function(e,t){var n=this,o=tp(this,e,t);return this.ba.push(o),Wo(o,function(){kt(n.ba,o)}),o};var tp=function(e,t,n){return e.ka&&!n?(t.cancel(),B(e.ka)):t.f(function(t){throw t&&("auth/user-disabled"==t.code||"auth/user-token-expired"==t.code)&&(e.ka||e.dispatchEvent(new Ri("userInvalidated")),e.ka=t),t})};Si.prototype.toJSON=function(){return this.C()},Si.prototype.C=function(){var e={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,identifierNumber:this.identifierNumber,isAnonymous:this.isAnonymous,providerData:[],apiKey:this.j,appName:this.D,authDomain:this.v,stsTokenManager:this.ia.C(),redirectEventId:this.za||null};return bt(this.providerData,function(t){e.providerData.push(gr(t))}),e};var np=function(e){if(!e.apiKey)return null;var t={apiKey:e.apiKey,authDomain:e.authDomain,appName:e.appName},n={};if(e.stsTokenManager&&e.stsTokenManager.accessToken&&e.stsTokenManager.expirationTime)n.idToken=e.stsTokenManager.accessToken,n.refreshToken=e.stsTokenManager.refreshToken||null,n.expiresIn=(e.stsTokenManager.expirationTime-ge())/1E3;else return null;var o=new Si(t,n,e);return e.providerData&&bt(e.providerData,function(e){e&&Ms(o,mr(e))}),e.redirectEventId&&(o.za=e.redirectEventId),o},op=function(e,t,n){var o=new Si(e,t);return n&&(o.Sa=n),o.reload().then(function(){return o})},ap=function(e){this.u=e,this.i=bi()},rp={name:"redirectUser",M:!1},ip=function(e){return e.i.remove(rp,e.u)},dp=function(e,t){return e.i.get(rp,e.u).then(function(e){return e&&t&&(e.authDomain=t),np(e||{})})},sp=function(e){this.u=e,this.i=bi()},pp={name:"authUser",M:!0},cp=function(e,t){return e.i.set(pp,t.C(),e.u)},lp=function(e){return e.i.remove(pp,e.u)},up=function(e,t){return e.i.get(pp,e.u).then(function(e){return e&&t&&(e.authDomain=t),np(e||{})})},hp=function(e){if(this.Fa=!1,hr(this,"app",e),wp(this).options&&wp(this).options.apiKey)e=firebase.SDK_VERSION?Ze(firebase.SDK_VERSION):null,this.g=new Zr(wp(this).options&&wp(this).options.apiKey,null,e);else throw new Er("invalid-api-key");this.ba=[],this.Ca=[],this.ub=[],this.mf=firebase.INTERNAL.createSubscribe(q(this.Ze,this)),this.Ic=void 0,firebase.INTERNAL.createSubscribe(q(this.af,this)),vp(this,null),this.ta=new sp(wp(this).options.apiKey+":"+wp(this).name),this.pb=new ap(wp(this).options.apiKey+":"+wp(this).name),this.cc=this.c(Ip(this)),this.qa=this.c(kp(this)),this.bd=!1,this.Vc=q(this.Gf,this),this.qe=q(this.gb,this),this.vb=q(this.Xc,this),this.oe=q(this.Ue,this),this.pe=q(this.Ve,this),mp(this),this.INTERNAL={},this.INTERNAL["delete"]=q(this["delete"],this),this.Ia=0};hp.prototype.toJSON=function(){return{apiKey:wp(this).options.apiKey,authDomain:wp(this).options.authDomain,appName:wp(this).name,currentUser:V(this)&&V(this).C()}};var fp=function(e){return e.Ie||B(new Er("auth-domain-config-required"))},mp=function(e){var t=wp(e).options.authDomain,n=wp(e).options.apiKey;t&&M()&&(e.Ie=e.cc.then(function(){if(!e.Fa)return e.m=Hi(t,n,wp(e).name),e.m.subscribe(e),V(e)&&Zi(V(e)),e.Sb&&(Zi(e.Sb),e.Sb=null),e.m}))};e=hp.prototype,e.Fd=function(e,t){return"unknown"===e||"signInViaRedirect"===e||!("signInViaPopup"!==e)&&this.ca==t&&!!this.aa},e.Va=function(e,t,n,o){"signInViaPopup"==e&&this.ca==o&&(n&&this.Pa?this.Pa(n):t&&!n&&this.aa&&this.aa(t),this.F&&(this.F.cancel(),this.F=null),delete this.aa,delete this.Pa)},e.zb=function(e,t){return"signInViaRedirect"==e||"signInViaPopup"==e&&this.ca==t&&this.aa?q(this.Ke,this):null},e.Ke=function(t,n){var o=this;t={requestUri:t,sessionId:n},this.F&&(this.F.cancel(),this.F=null);var r=null,i=null,s=gd(o.g,t).then(function(e){return r=Gr(e),i=Rs(e),e});return t=o.cc.then(function(){return s}).then(function(e){return yp(o,e)}).then(function(){return mr({user:V(o),credential:r,additionalUserInfo:i,operationType:"signIn"})}),this.c(t)},e.hc=function(){return nr()};var gp=function(t,n){if(!M())return B(new Er("operation-not-supported-in-this-environment"));var o=kr(n.providerId),r=t.hc(),i=null;(!Za()||Ga())&&wp(t).options.authDomain&&n.isOAuthProvider&&(i=os(wp(t).options.authDomain,wp(t).options.apiKey,wp(t).name,"signInViaPopup",n,null,r,firebase.SDK_VERSION||null));var d=Fa(i,o&&o.Mb,o&&o.Lb),o=fp(t).then(function(t){return t.Nb(d,"signInViaPopup",n,r,!!i)}).then(function(){return new Vo(function(e,n){t.Va("signInViaPopup",null,new Er("cancelled-popup-request"),t.ca),t.aa=e,t.Pa=n,t.ca=r,t.F=t.m.Vb(t,"signInViaPopup",d,r)})}).then(function(e){return d&&Qe(d),e}).f(function(e){throw d&&Qe(d),e});return t.c(o)};hp.prototype.signInWithPopup=function(e){return gp(this,e).then(function(e){return e?mr({user:e.user,credential:e.credential,operationType:e.operationType}):e})},hp.prototype.getRedirectResult=function(){return bp(this).then(function(e){return e?mr({user:e.user,credential:e.credential,operationType:e.operationType}):e})},hp.prototype.signInWithRedirect=function(e){if(!M())return B(new Er("operation-not-supported-in-this-environment"));var t=this,n=fp(this).then(function(){return t.m.Ob("signInViaRedirect",e)});return this.c(n)};var bp=function(e){if(!M())return B(new Er("operation-not-supported-in-this-environment"));var t=fp(e).then(function(){return e.m.getRedirectResult()});return e.c(t)},yp=function(e,t){var n={apiKey:wp(e).options.apiKey,authDomain:wp(e).options.authDomain,appName:wp(e).name};return e.cc.then(function(){return op(n,t,e.pb)}).then(function(t){return V(e)&&t.uid==V(e).uid?(V(e).copy(t),e.gb(t)):(vp(e,t),Zi(t),e.gb(t))}).then(function(){e.Na()})},vp=function(e,t){V(e)&&(Ti(V(e),e.qe),Ln(V(e),"tokenChanged",e.vb),Ln(V(e),"userDeleted",e.oe),Ln(V(e),"userInvalidated",e.pe),Wi(V(e))),t&&(t.Ac.push(e.qe),On(t,"tokenChanged",e.vb),On(t,"userDeleted",e.oe),On(t,"userInvalidated",e.pe),0<e.Ia&&Vi(t)),hr(e,"currentUser",t)};hp.prototype.signOut=function(){var e=this,t=this.qa.then(function(){return V(e)?(vp(e,null),lp(e.ta).then(function(){e.Na()})):Fo()});return this.c(t)};var Tp=function(e){var t=dp(e.pb,wp(e).options.authDomain).then(function(t){return(e.Sb=t)&&(t.Sa=e.pb),ip(e.pb)});return e.c(t)},Ip=function(e){var t=wp(e).options.authDomain,n=Tp(e).then(function(){return up(e.ta,t)}).then(function(t){return t?(t.Sa=e.pb,e.Sb&&(e.Sb.za||null)==(t.za||null)?t:t.reload().then(function(){return cp(e.ta,t).then(function(){return t})}).f(function(n){return"auth/network-request-failed"==n.code?t:lp(e.ta)})):null}).then(function(t){vp(e,t||null)});return e.c(n)},kp=function(e){return e.cc.then(function(){return e.getRedirectResult()}).f(function(){}).then(function(){if(!e.Fa)return e.Vc()}).f(function(){}).then(function(){if(!e.Fa){e.bd=!0;var t=e.ta;t.i.addListener(pp,t.u,e.Vc)}})};e=hp.prototype,e.Gf=function(){var e=this;return up(this.ta,wp(this).options.authDomain).then(function(t){if(!e.Fa){var n;if(n=V(e)&&t){n=V(e).uid;var o=t.uid;n=void 0===n||null===n||""===n||void 0===o||null===o||""===o?!1:n==o}if(n)return V(e).copy(t),V(e).getToken();(V(e)||t)&&(vp(e,t),t&&(Zi(t),t.Sa=e.pb),e.m&&e.m.subscribe(e),e.Na())}})},e.gb=function(e){return cp(this.ta,e)},e.Xc=function(){this.Na(),this.gb(V(this))},e.Ue=function(){this.signOut()},e.Ve=function(){this.signOut()};var Ep=function(e,t){var n=null,o=null;return e.c(t.then(function(t){return n=Gr(t),o=Rs(t),yp(e,t)}).then(function(){return mr({user:V(e),credential:n,additionalUserInfo:o,operationType:"signIn"})}))};e=hp.prototype,e.Ze=function(e){var t=this;this.addAuthTokenListener(function(){e.next(V(t))})},e.af=function(e){var t=this;Sp(this,function(){e.next(V(t))})},e.onAuthStateChanged=function(e,t,n){var o=this;return this.bd&&firebase.Promise.resolve().then(function(){_(e)?e(V(o)):_(e.next)&&e.next(V(o))}),this.mf(e,t,n)},e.getToken=function(e){var t=this,n=this.qa.then(function(){return V(t)?V(t).getToken(e).then(function(e){return{accessToken:e}}):null});return this.c(n)},e.signInWithCustomToken=function(e){var t=this;return this.qa.then(function(){return Ep(t,qd(t.g,Md,{token:e}))}).then(function(e){return e=e.user,Fs(e,"isAnonymous",!1),t.gb(e)}).then(function(){return V(t)})},e.signInWithEmailAndPassword=function(e,t){var n=this;return this.qa.then(function(){return Ep(n,qd(n.g,jd,{email:e,password:t}))}).then(function(e){return e.user})},e.createUserWithEmailAndPassword=function(e,t){var n=this;return this.qa.then(function(){return Ep(n,qd(n.g,kd,{email:e,password:t}))}).then(function(e){return e.user})},e.signInWithCredential=function(e){return Ap(this,e).then(function(e){return e.user})};var Ap=function(e,t){return e.qa.then(function(){return Ep(e,t.Ab(e.g))})};hp.prototype.signInAnonymously=function(){var e=V(this),t=this;return e&&e.isAnonymous?Fo(e):this.qa.then(function(){return Ep(t,t.g.signInAnonymously())}).then(function(e){return e=e.user,Fs(e,"isAnonymous",!0),t.gb(e)}).then(function(){return V(t)})};var wp=function(e){return e.app},V=function(e){return e.currentUser};hp.prototype.getUid=function(){return V(this)&&V(this).uid||null};var X=function(e){return V(e)&&V(e)._lat||null};e=hp.prototype,e.Na=function(){if(this.bd){for(var e=0;e<this.Ca.length;e++)this.Ca[e]&&this.Ca[e](X(this));if(this.Ic!==this.getUid()&&this.ub.length)for(this.Ic=this.getUid(),e=0;e<this.ub.length;e++)this.ub[e]&&this.ub[e](X(this))}},e.Ae=function(e){this.addAuthTokenListener(e),this.Ia++,0<this.Ia&&V(this)&&Vi(V(this))},e.uf=function(e){var t=this;bt(this.Ca,function(n){n==e&&t.Ia--}),0>this.Ia&&(this.Ia=0),0==this.Ia&&V(this)&&Wi(V(this)),this.removeAuthTokenListener(e)},e.addAuthTokenListener=function(e){var t=this;this.Ca.push(e),this.c(this.qa.then(function(){t.Fa||It(t.Ca,e)&&e(X(t))}))},e.removeAuthTokenListener=function(e){At(this.Ca,function(t){return t==e})};var Sp=function(e,t){e.ub.push(t),e.c(e.qa.then(function(){!e.Fa&&It(e.ub,t)&&e.Ic!==e.getUid()&&(e.Ic=e.getUid(),t(X(e)))}))};e=hp.prototype,e["delete"]=function(){this.Fa=!0;for(var e=0;e<this.ba.length;e++)this.ba[e].cancel("app-deleted");return this.ba=[],this.ta&&(e=this.ta,e.i.removeListener(pp,e.u,this.Vc)),this.m&&this.m.unsubscribe(this),firebase.Promise.resolve()},e.c=function(e){var t=this;return this.ba.push(e),Wo(e,function(){kt(t.ba,e)}),e},e.fetchProvidersForEmail=function(e){return this.c(sd(this.g,e))},e.verifyPasswordResetCode=function(e){return this.checkActionCode(e).then(function(e){return e.data.email})},e.confirmPasswordReset=function(e,t){return this.c(this.g.confirmPasswordReset(e,t).then(function(){}))},e.checkActionCode=function(e){return this.c(this.g.checkActionCode(e).then(function(e){return new ws(e)}))},e.applyActionCode=function(e){return this.c(this.g.applyActionCode(e).then(function(){}))},e.sendPasswordResetEmail=function(e){return this.c(this.g.sendPasswordResetEmail(e).then(function(){}))};var Np=["First","Second","Third","Fourth","Fifth","Sixth","Seventh","Eighth","Ninth"],Pp=function(e,t){return{name:e||"",ja:"a valid string",optional:!!t,la:C}},Y=function(e){return{name:e||"",ja:"a valid object",optional:!1,la:j}},Z=function(e,t){return{name:e||"",ja:"a function",optional:!!t,la:_}},Rp=function(){return{name:"",ja:"null",optional:!1,la:d}},Op=function(){return{name:"credential",ja:"a valid credential",optional:!1,la:function(e){return!!e&&!!e.Ab}}},Cp=function(){return{name:"authProvider",ja:"a valid Auth provider",optional:!1,la:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}},_p=function(e,t,n,o){return{name:n||"",ja:e.ja+" or "+t.ja,optional:!!o,la:function(n){return e.la(n)||t.la(n)}}},Dp=function(e,t){for(var n in t){var o=t[n].name;e[o]=xp(o,e[n],t[n].a)}},Lp=function(e,t,n,o){e[t]=xp(t,n,o)},xp=function(t,o,r){if(!r)return o;var i=Up(t);for(var n in t=function(){var t,e=Array.prototype.slice.call(arguments);a:{t=Array.prototype.slice.call(e);var d=0;for(var s=!1,p=0;p<r.length;p++)if(r[p].optional)s=!0;else{if(s)throw new Er("internal-error","Argument validator encountered a required argument after an optional argument.");d++}if(s=r.length,t.length<d||s<t.length)t="Expected "+(d==s?1==d?"1 argument":d+" arguments":d+"-"+s+" arguments")+" but got "+t.length+".";else{for(d=0;d<t.length;d++)if(s=r[d].optional&&void 0===t[d],!r[d].la(t[d])&&!s){if(t=r[d],0>d||d>=Np.length)throw new Er("internal-error","Argument validator received an unsupported number of arguments.");t=Np[d]+" argument "+(t.name?"\""+t.name+"\" ":"")+"must be "+t.ja+".";break a}t=null}}if(t)throw new Er("argument-error",i+" failed: "+t);return o.apply(this,e)},o)t[n]=o[n];for(n in o.prototype)t.prototype[n]=o.prototype[n];return t},Up=function(e){return e=e.split("."),e[e.length-1]};Dp(hp.prototype,{applyActionCode:{name:"applyActionCode",a:[Pp("code")]},checkActionCode:{name:"checkActionCode",a:[Pp("code")]},confirmPasswordReset:{name:"confirmPasswordReset",a:[Pp("code"),Pp("newPassword")]},createUserWithEmailAndPassword:{name:"createUserWithEmailAndPassword",a:[Pp("email"),Pp("password")]},fetchProvidersForEmail:{name:"fetchProvidersForEmail",a:[Pp("email")]},getRedirectResult:{name:"getRedirectResult",a:[]},onAuthStateChanged:{name:"onAuthStateChanged",a:[_p(Y(),Z(),"nextOrObserver"),Z("opt_error",!0),Z("opt_completed",!0)]},sendPasswordResetEmail:{name:"sendPasswordResetEmail",a:[Pp("email")]},signInAnonymously:{name:"signInAnonymously",a:[]},signInWithCredential:{name:"signInWithCredential",a:[Op()]},signInWithCustomToken:{name:"signInWithCustomToken",a:[Pp("token")]},signInWithEmailAndPassword:{name:"signInWithEmailAndPassword",a:[Pp("email"),Pp("password")]},signInWithPopup:{name:"signInWithPopup",a:[Cp()]},signInWithRedirect:{name:"signInWithRedirect",a:[Cp()]},signOut:{name:"signOut",a:[]},toJSON:{name:"toJSON",a:[Pp(null,!0)]},verifyPasswordResetCode:{name:"verifyPasswordResetCode",a:[Pp("code")]}}),Dp(Si.prototype,{delete:{name:"delete",a:[]},getToken:{name:"getToken",a:[{name:"opt_forceRefresh",ja:"a boolean",optional:!0,la:function(e){return"boolean"==typeof e}}]},link:{name:"link",a:[Op()]},linkWithCredential:{name:"linkWithCredential",a:[Op()]},linkWithPopup:{name:"linkWithPopup",a:[Cp()]},linkWithRedirect:{name:"linkWithRedirect",a:[Cp()]},reauthenticate:{name:"reauthenticate",a:[Op()]},reauthenticateWithCredential:{name:"reauthenticateWithCredential",a:[Op()]},reauthenticateWithPopup:{name:"reauthenticateWithPopup",a:[Cp()]},reauthenticateWithRedirect:{name:"reauthenticateWithRedirect",a:[Cp()]},reload:{name:"reload",a:[]},sendEmailVerification:{name:"sendEmailVerification",a:[]},toJSON:{name:"toJSON",a:[Pp(null,!0)]},unlink:{name:"unlink",a:[Pp("provider")]},updateEmail:{name:"updateEmail",a:[Pp("email")]},updatePassword:{name:"updatePassword",a:[Pp("password")]},updateProfile:{name:"updateProfile",a:[Y("profile")]}}),Dp(Vo.prototype,{f:{name:"catch"},then:{name:"then"}}),Lp(Wr,"credential",function(e,t){return new Kr(e,t)},[Pp("email"),Pp("password")]),Dp(Q.prototype,{addScope:{name:"addScope",a:[Pp("scope")]},setCustomParameters:{name:"setCustomParameters",a:[Y("customOAuthParameters")]}}),Lp(Q,"credential",Lr,[_p(Pp(),Y(),"token")]),Dp(xr.prototype,{addScope:{name:"addScope",a:[Pp("scope")]},setCustomParameters:{name:"setCustomParameters",a:[Y("customOAuthParameters")]}}),Lp(xr,"credential",Ur,[_p(Pp(),Y(),"token")]),Dp(Vr.prototype,{addScope:{name:"addScope",a:[Pp("scope")]},setCustomParameters:{name:"setCustomParameters",a:[Y("customOAuthParameters")]}}),Lp(Vr,"credential",Mr,[_p(Pp(),_p(Y(),Rp()),"idToken"),_p(Pp(),Rp(),"accessToken",!0)]),Dp(jr.prototype,{setCustomParameters:{name:"setCustomParameters",a:[Y("customOAuthParameters")]}}),Lp(jr,"credential",Fr,[_p(Pp(),Y(),"token"),Pp("secret",!0)]),Dp(Er.prototype,{toJSON:{name:"toJSON",a:[Pp(null,!0)]}}),Dp(Hr.prototype,{toJSON:{name:"toJSON",a:[Pp(null,!0)]}}),Dp(Nr.prototype,{toJSON:{name:"toJSON",a:[Pp(null,!0)]}}),function(){if("undefined"!==typeof firebase&&firebase.INTERNAL&&firebase.INTERNAL.registerService){var e={Auth:hp,Error:Er};Lp(e,"EmailAuthProvider",Wr,[]),Lp(e,"FacebookAuthProvider",Q,[]),Lp(e,"GithubAuthProvider",xr,[]),Lp(e,"GoogleAuthProvider",Vr,[]),Lp(e,"TwitterAuthProvider",jr,[]),firebase.INTERNAL.registerService("auth",function(e,t){return e=new hp(e),t({INTERNAL:{getUid:q(e.getUid,e),getToken:q(e.getToken,e),addAuthTokenListener:q(e.Ae,e),removeAuthTokenListener:q(e.uf,e)}}),e},e,function(e,t){if("create"===e)try{t.auth()}catch(e){}}),firebase.INTERNAL.extendNamespace({User:Si})}else throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.")}()}).call(this);</script><script>(function(){for(var b,c,d="function"==typeof Object.defineProperties?Object.defineProperty:function(d,e,b){d!=Array.prototype&&d!=Object.prototype&&(d[e]=b.value)},e="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this,f=["Number","MIN_SAFE_INTEGER"],g=0;g<f.length-1;g++)c=f[g],c in e||(e[c]={}),e=e[c];var h=f[f.length-1];-9007199254740991!=e[h]&&d(e,h,{configurable:!0,writable:!0,value:-9007199254740991});var i=this,j=function(b){return void 0!==b},k=function(d){var e="undefined"===typeof d?"undefined":babelHelpers.typeof(d);if("object"==e){if(d){if(d instanceof Array)return"array";if(d instanceof Object)return e;var b=Object.prototype.toString.call(d);if("[object Window]"==b)return"object";if("[object Array]"==b||"number"==typeof d.length&&"undefined"!=typeof d.splice&&"undefined"!=typeof d.propertyIsEnumerable&&!d.propertyIsEnumerable("splice"))return"array";if("[object Function]"==b||"undefined"!=typeof d.call&&"undefined"!=typeof d.propertyIsEnumerable&&!d.propertyIsEnumerable("call"))return"function"}else return"null";}else if("function"==e&&"undefined"==typeof d.call)return"object";return e},l=function(c,d){this.code="storage/"+c,this.message="Firebase Storage: "+d,this.serverResponse=null,this.name="FirebaseError"};(function(){function c(){}var e=Error;c.prototype=e.prototype,l.b=e.prototype,l.prototype=new c,l.a=function(g,b){for(var d=Array(arguments.length-2),c=2;c<arguments.length;c++)d[c-2]=arguments[c];return e.prototype[b].apply(g,d)}})();var m=function(){return new l("unknown","An unknown error occurred, please check the error payload for server response.")},n=function(){return new l("canceled","User canceled the upload/download.")},o=function(){return new l("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")},p=function(d,e,b){return new l("invalid-argument","Invalid argument in `"+e+"` at index "+d+": "+b)},q=function(){return new l("app-deleted","The Firebase app was deleted.")},r=function(c,d){return new l("invalid-format","String does not match format '"+c+"': "+d)},s=function(b){throw new l("internal-error","Internal error: "+b)},t="https://firebasestorage.googleapis.com",u=function(b){if("undefined"!==typeof firebase)return new firebase.Promise(b);throw Error("Error in Firebase Storage - be sure to load firebase-app.js first.")},v=function(c,d){return-1!==c.indexOf(d)},y=function(h,i,b){function j(){m||(m=!0,i.apply(null,arguments))}function d(d){g=setTimeout(function(){g=null,h(c,2===l)},d)}function c(b){if(!m)if(b)j.apply(null,arguments);else if(2===l||k)j.apply(null,arguments);else{64>f&&(f*=2);var e;1===l?(l=2,e=0):e=1E3*(f+Math.random()),d(e)}}function e(b){n||(n=!0,m||(null===g?b||(l=1):(b||(l=2),clearTimeout(g),d(0))))}var f=1,g=null,k=!1,l=0,m=!1,n=!1;return d(0),setTimeout(function(){k=!0,e(!0)},b),e},z=function(d,e){for(var b in d)Object.prototype.hasOwnProperty.call(d,b)&&e(b,d[b])},C=function(c){var e={};return z(c,function(b,c){e[b]=c}),e},$=function(e,f,b,c){this.l=e,this.b={},this.method=f,this.headers={},this.body=null,this.m=b,this.c=this.a=null,this.f=[200],this.i=[],this.timeout=c,this.g=!0},w=function(d){var f=encodeURIComponent,b="?";return z(d,function(c,d){c=f(c)+"="+f(d),b=b+c+"&"}),b=b.slice(0,-1)},_=function(h,i,b,c,d,e,g,f,j,k,l){this.F=h,this.D=i,this.A=b,this.u=c,this.B=d.slice(),this.s=e.slice(),this.m=this.o=this.c=this.b=null,this.g=this.i=!1,this.v=g,this.l=f,this.f=k,this.G=l,this.C=j;var m=this;this.w=u(function(c,d){m.o=c,m.m=d,ba(m)})},aa=function(d,e,b){this.b=d,this.c=e,this.a=!!b},ba=function(e){function f(d,e){function i(b){h.f(b.loaded,b.lengthComputable?b.total:-1)}e?d(!1,new aa(!1,null,!0)):(e=new tb,e.h.withCredentials=h.G,h.b=e,null!==h.f&&j(e.h.upload)&&e.h.upload.addEventListener("progress",i),ta(e,h.F,h.D,h.u,h.A).then(function(c){null!==h.f&&j(c.h.upload)&&c.h.upload.removeEventListener("progress",i),h.b=null;var b=0===ua(c),k=va(c);if(!(b=!b))var b=v([408,429],k),f=v(h.s,k),b=500<=k&&600>k||b||f;b?(c=2===ua(c),d(!1,new aa(!1,null,c))):d(!0,new aa(v(h.B,k),c))}))}function b(d,f){var b=h.o;d=h.m;var i=f.c;if(f.b)try{var e=h.v(i,x(i));j(e)?b(e):b()}catch(b){d(b)}else null===i?(f=f.a?h.g?q():n():new l("retry-limit-exceeded","Max retry time for operation exceeded, please try again."),d(f)):(f=m(),e=x(i),f.serverResponse=e,h.l?d(h.l(i,f)):d(f))}var h=e;e.i?b(0,new aa(!1,null,!0)):e.c=y(f,b,e.C)};_.prototype.a=function(){return this.w},_.prototype.cancel=function(b){this.i=!0,this.g=b||!1,null!==this.c&&(0,this.c)(!1),null!==this.b&&this.b.abort()};var ca=function(f,g,b){var c=w(f.b),c=f.l+c,d=f.headers?C(f.headers):{};return null!==g&&0<g.length&&(d.Authorization="Firebase "+g),d["X-Firebase-Storage-Version"]="webjs/"+("undefined"===typeof firebase?"AppManager":firebase.SDK_VERSION),new _(c,f.method,d,f.body,f.f,f.i,f.m,f.a,f.timeout,f.c,b)},da=function(b){this.b=firebase.Promise.reject(b)};da.prototype.a=function(){return this.b},da.prototype.cancel=function(){};var ea=function(c,d){this.bucket=c,this.path=d},A=function(c){var d=encodeURIComponent;return"/b/"+d(c.bucket)+"/o/"+d(c.path)},fa=function(c){var d;try{d=ga(c)}catch(b){return new ea(c,"")}if(""===d.path)return d;throw new l("invalid-default-bucket","Invalid default bucket '"+c+"'.")},ga=function(f){for(var h=null,b=[{M:/^gs:\/\/([A-Za-z0-9.\-]+)(\/(.*))?$/i,H:{bucket:1,path:3},L:function(b){"/"===b.path.charAt(b.path.length-1)&&(b.path=b.path.slice(0,-1))}},{M:/^https?:\/\/firebasestorage\.googleapis\.com\/v[A-Za-z0-9_]+\/b\/([A-Za-z0-9.\-]+)\/o(\/([^?#]*).*)?$/i,H:{bucket:1,path:3},L:function(b){b.path=decodeURIComponent(b.path)}}],c=0;c<b.length;c++){var d=b[c],e=d.M.exec(f);if(e){h=e[d.H.bucket],(e=e[d.H.path])||(e=""),h=new ea(h,e),d.L(h);break}}if(null==h)throw new l("invalid-url","Invalid URL '"+f+"'.");return h},ha=function(){this.a={},this.b=Number.MIN_SAFE_INTEGER},ia=function(f,g){function b(){delete d.a[c]}var c=f.b;f.b++,f.a[c]=g;var d=f;g.a().then(b,b)},ja=function(b){z(b.a,function(b,d){d&&d.cancel(!0)}),b.a={}},ka=function(b){return j(b)&&null!==b},B=function(b){return"string"===typeof b||b instanceof String},la=function(){return"undefined"!==typeof Blob},ma=function(f,g,b,c,d){this.a=f,this.g=null,null!==this.a&&(f=this.a.options,ka(f)&&(f=f.storageBucket||null,this.g=null==f?null:fa(f).bucket)),this.s=g,this.o=b,this.l=d,this.m=c,this.c=12E4,this.b=6E4,this.i=new ha,this.f=!1},na=function(b){return null!==b.a&&ka(b.a.INTERNAL)&&ka(b.a.INTERNAL.getToken)?b.a.INTERNAL.getToken().then(function(b){return ka(b)?b.accessToken:null},function(){return null}):firebase.Promise.resolve(null)};ma.prototype.bucket=function(){if(this.f)throw q();return this.g};var oa,K=function(d,e,b){return d.f?new da(q()):(e=d.o(e,b,null===d.a,d.l),ia(d.i,e),e)},D=function(c,d){return d=d.split("/").filter(function(b){return 0<b.length}).join("/"),0===c.length?d:c+"/"+d},pa=function(c){var d=c.lastIndexOf("/",c.length-2);return-1===d?c:c.slice(d+1)},qa=function(c,d){return d},ra=function(e,f,b,g){this.c=e,this.b=f||e,this.writable=!!b,this.a=g||qa},E=null,sa=function(){if(E)return E;var c=[new ra("bucket"),new ra("generation"),new ra("metageneration"),new ra("name","fullPath",!0)],d=new ra("name");return d.a=function(c,d){return!B(d)||2>d.length?d:pa(d)},c.push(d),d=new ra("size"),d.a=function(c,d){return ka(d)?+d:d},c.push(d),c.push(new ra("timeCreated")),c.push(new ra("updated")),c.push(new ra("md5Hash",null,!0)),c.push(new ra("cacheControl",null,!0)),c.push(new ra("contentDisposition",null,!0)),c.push(new ra("contentEncoding",null,!0)),c.push(new ra("contentLanguage",null,!0)),c.push(new ra("contentType",null,!0)),c.push(new ra("metadata","customMetadata",!0)),c.push(new ra("downloadTokens","downloadURLs",!1,function(e,d){if(!(B(d)&&0<d.length))return[];var f=encodeURIComponent;return d.split(",").map(function(c){var g=e.fullPath,g="https://firebasestorage.googleapis.com/v0/b/"+f(e.bucket)+"/o/"+f(g);return c=w({alt:"media",token:c}),g+c})})),E=c},xa=function(c,d){Object.defineProperty(c,"ref",{get:function(){return d.s(d,new ea(c.bucket,c.fullPath))}})},ya=function(f,h){for(var b,g={},c=h.length,d=0;d<c;d++)b=h[d],b.writable&&(g[b.c]=f[b.b]);return JSON.stringify(g)},za=function(d){if(!d||"object"!==("undefined"===typeof d?"undefined":babelHelpers.typeof(d)))throw"Expected Metadata object.";for(var e in d){var b=d[e];if("customMetadata"===e){if("object"!==("undefined"===typeof b?"undefined":babelHelpers.typeof(b)))throw"Expected object for 'customMetadata' mapping.";}else if(null!=b&&"object"===("undefined"===typeof b?"undefined":babelHelpers.typeof(b)))throw"Mapping for '"+e+"' cannot be an object."}},Aa=function(h,f,b){for(var c=f.length,d=f.length,e=0;e<f.length;e++)if(f[e].b){c=e;break}if(!(c<=b.length&&b.length<=d))throw c===d?(f=c,c=1===c?"argument":"arguments"):(f="between "+c+" and "+d,c="arguments"),new l("invalid-argument-count","Invalid argument count in `"+h+"`: Expected "+f+" "+c+", received "+b.length+".");for(e=0;e<b.length;e++)try{f[e].a(b[e])}catch(b){if(b instanceof Error)throw p(e,h,b.message);throw p(e,h,b)}},F=function(d,e){var f=this;this.a=function(c){f.b&&!j(c)||d(c)},this.b=!!e},G=function(d,e){return function(b){d(b),e(b)}},Ba=function(e,f){function b(b){if(!("string"===typeof b||b instanceof String))throw"Expected string."}var c;return c=e?G(b,e):b,new F(c,f)},H=function(){return new F(function(b){if(!(b instanceof Uint8Array||b instanceof ArrayBuffer||la()&&b instanceof Blob))throw"Expected Blob or File."})},Ca=function(){return new F(function(b){if(!(("number"===typeof b||b instanceof Number)&&0<=b))throw"Expected a number 0 or greater."})},Da=function(c,d){return new F(function(d){if(!(null===d||ka(d)&&d instanceof Object))throw"Expected an Object.";ka(c)&&c(d)},d)},Ea=function(){return new F(function(b){if(null!==b&&"function"!=k(b))throw"Expected a Function."},!0)},I=function(c){return function(){var d=[];Array.prototype.push.apply(d,arguments),firebase.Promise.resolve(!0).then(function(){c.apply(null,d)})}},J=String.prototype.trim?function(b){return b.trim()}:function(b){return b.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},Fa=function(c,d){return c<d?-1:c>d?1:0};a:{var Ga=i.navigator;if(Ga){var Ha=Ga.userAgent;if(Ha){oa=Ha;break a}}oa=""}var Ia,Ja=function(d,e){var b=Ua;return Object.prototype.hasOwnProperty.call(b,d)?b[d]:b[d]=e(d)},Ka=-1!=oa.indexOf("Opera"),La=-1!=oa.indexOf("Trident")||-1!=oa.indexOf("MSIE"),Ma=-1!=oa.indexOf("Edge"),Na=-1!=oa.indexOf("Gecko")&&(-1==oa.toLowerCase().indexOf("webkit")||-1!=oa.indexOf("Edge"))&&-1==oa.indexOf("Trident")&&-1==oa.indexOf("MSIE")&&-1==oa.indexOf("Edge"),Oa=-1!=oa.toLowerCase().indexOf("webkit")&&-1==oa.indexOf("Edge");a:{var Pa="",Qa=function(){var b=oa;return Na?/rv\:([^\);]+)(\)|;)/.exec(b):Ma?/Edge\/([\d\.]+)/.exec(b):La?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(b):Oa?/WebKit\/(\S+)/.exec(b):Ka?/(?:Version)[ \/]?(\S+)/.exec(b):void 0}();if(Qa&&(Pa=Qa?Qa[1]:""),La){var Ra,Sa=i.document;if(Ra=Sa?Sa.documentMode:void 0,null!=Ra&&Ra>parseFloat(Pa)){Ia=Ra+"";break a}}Ia=Pa}var Ta=Ia,Ua={},Va=function(h){return Ja(h,function(){for(var i=0,b=J(Ta+"").split("."),c=J(h+"").split("."),d=Math.max(b.length,c.length),e=0;0==i&&e<d;e++){var g=b[e]||"",f=c[e]||"";do{if(g=/(\d*)(\D*)(.*)/.exec(g)||["","","",""],f=/(\d*)(\D*)(.*)/.exec(f)||["","","",""],0==g[0].length&&0==f[0].length)break;i=Fa(0==g[1].length?0:parseInt(g[1],10),0==f[1].length?0:parseInt(f[1],10))||Fa(0==g[2].length,0==f[2].length)||Fa(g[2],f[2]),g=g[3],f=f[3]}while(0==i)}return 0<=i})},Wa=function(){var e=i.BlobBuilder||i.WebKitBlobBuilder;if(j(e)){for(var e=new e,b=0;b<arguments.length;b++)e.append(arguments[b]);return e.getBlob()}if(e=Array.prototype.slice.call(arguments),b=i.BlobBuilder||i.WebKitBlobBuilder,j(b)){for(var b=new b,c=0;c<e.length;c++)b.append(e[c],void 0);e=b.getBlob(void 0)}else if(j(i.Blob))e=new Blob(e,{});else throw Error("This browser doesn't seem to support creating Blobs");return e},Xa=function(d,e,b){return j(b)||(b=d.size),d.webkitSlice?d.webkitSlice(e,b):d.mozSlice?d.mozSlice(e,b):d.slice?Na&&!Va("13.0")||Oa&&!Va("537.1")?(0>e&&(e+=d.size),0>e&&(e=0),0>b&&(b+=d.size),b<e&&(b=e),d.slice(e,b-e)):d.slice(e,b):null},Ya={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Za=function(b){switch(b){case"raw":case"base64":case"base64url":case"data_url":break;default:throw"Expected one of the event types: [raw, base64, base64url, data_url].";}},$a=function(c,d){this.data=c,this.a=d||null},_a=function(d,e){switch(d){case"raw":return new $a(ab(e));case"base64":case"base64url":return new $a(bb(d,e));case"data_url":d=new cb(e);var b;if(d.a)b=bb("base64",d.c);else{try{b=decodeURIComponent(d.c)}catch(b){throw r("data_url","Malformed data URL.")}b=ab(b)}return new $a(b,new cb(e).b);}throw m()},ab=function(f){for(var g,d=[],b=0;b<f.length;b++)if(g=f.charCodeAt(b),127>=g)d.push(g);else if(2047>=g)d.push(192|g>>6,128|63&g);else if(55296!=(64512&g))56320==(64512&g)?d.push(239,191,189):d.push(224|g>>12,128|63&g>>6,128|63&g);else if(b<f.length-1&&56320==(64512&f.charCodeAt(b+1))){var c=f.charCodeAt(++b),g=65536|(1023&g)<<10|1023&c;d.push(240|g>>18,128|63&g>>12,128|63&g>>6,128|63&g)}else d.push(239,191,189);return new Uint8Array(d)},bb=function(f,g){switch(f){case"base64":var b=-1!==g.indexOf("-"),c=-1!==g.indexOf("_");if(b||c)throw r(f,"Invalid character '"+(b?"-":"_")+"' found: is it base64url encoded?");break;case"base64url":if(b=-1!==g.indexOf("+"),c=-1!==g.indexOf("/"),b||c)throw r(f,"Invalid character '"+(b?"+":"/")+"' found: is it base64 encoded?");g=g.replace(/-/g,"+").replace(/_/g,"/");}var d;try{d=atob(g)}catch(b){throw r(f,"Invalid character found")}for(f=new Uint8Array(d.length),g=0;g<d.length;g++)f[g]=d.charCodeAt(g);return f},cb=function(d){var e=d.match(/^data:([^,]+)?,/);if(null===e)throw r("data_url","Must be formatted 'data:[<mediatype>][;base64],<data>");if(e=e[1]||null,this.a=!1,this.b=null,null!=e){var b=e.length-7;this.b=(this.a=0<=b&&e.indexOf(";base64",b)==b)?e.substring(0,e.length-7):e}this.c=d.substring(d.indexOf(",")+1)},db=function(c,d){la()&&c instanceof Blob?(this.j=c,d=c.size,c=c.type):(c instanceof ArrayBuffer?(d?this.j=new Uint8Array(c):(this.j=new Uint8Array(c.byteLength),this.j.set(new Uint8Array(c))),d=this.j.length):(d?this.j=c:(this.j=new Uint8Array(c.length),this.j.set(c)),d=c.length),c=""),this.a=d,this.b=c};db.prototype.type=function(){return this.b},db.prototype.slice=function(c,d){return la()&&this.j instanceof Blob?(c=Xa(this.j,c,d),null===c?null:new db(c)):(c=new Uint8Array(this.j.buffer,c,d-c),new db(c,!0))};var M=function(){var f=[];if(Array.prototype.push.apply(f,arguments),la())return f=f.map(function(b){return b instanceof db?b.j:b}),new db(Wa.apply(null,f));var f=f.map(function(b){return B(b)?_a("raw",b).data:b.j}),b=0;f.forEach(function(c){b+=c.byteLength});var c=new Uint8Array(b),d=0;return f.forEach(function(e){for(var f=0;f<e.length;f++)c[d++]=e[f]}),new db(c,!0)},eb=function(d,e,b){"function"==k(d)||ka(e)||ka(b)?(this.b=d,this.error=e||null,this.a=b||null):(this.b=d.next||null,this.error=d.error||null,this.a=d.complete||null)},fb=function(b){if(!b)throw m()},N=function(h,i){return function(b,c){var d;a:{try{d=JSON.parse(c)}catch(b){d=null;break a}b="undefined"===typeof d?"undefined":babelHelpers.typeof(d),d="object"==b&&null!=d||"function"==b?d:null}if(null===d)d=null;else{b={type:"file"},c=i.length;for(var j,f=0;f<c;f++)j=i[f],b[j.b]=j.a(b,d[j.c]);xa(b,h),d=b}return fb(null!==d),d}},gb=function(d){return function(e,b){return e=401===va(e)?new l("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===va(e)?new l("quota-exceeded","Quota for bucket '"+d.bucket+"' exceeded, please view quota on https://firebase.google.com/pricing/."):403===va(e)?new l("unauthorized","User does not have permission to access '"+d.path+"'."):b,e.serverResponse=b.serverResponse,e}},O=function(f){var g=gb(f);return function(b,c){var d=g(b,c);return 404===va(b)&&(d=new l("object-not-found","Object '"+f.path+"' does not exist.")),d.serverResponse=c.serverResponse,d}},hb=function(e,f,b){var c=A(f);return e=new $(t+"/v0"+c,"GET",N(e,b),e.c),e.a=O(f),e},ib=function(d,e){var b=A(e);return d=new $(t+"/v0"+b,"DELETE",function(){},d.c),d.f=[200,204],d.a=O(e),d},jb=function(d,e,b){return b=b?C(b):{},b.fullPath=d.path,b.size=e.a,b.contentType||(d=e&&e.type()||"application/octet-stream",b.contentType=d),b},kb=function(h,i,b,c,d){var e,j="/b/"+encodeURIComponent(i.bucket)+"/o",g={"X-Goog-Upload-Protocol":"multipart"};e="";for(var f=0;2>f;f++)e+=Math.random().toString().slice(2);if(g["Content-Type"]="multipart/related; boundary="+e,d=jb(i,c,d),f=ya(d,b),c=M("--"+e+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+f+"\r\n--"+e+"\r\nContent-Type: "+d.contentType+"\r\n\r\n",c,"\r\n--"+e+"--"),null===c)throw o();return h=new $(t+"/v0"+j,"POST",N(h,b),h.b),h.b={name:d.fullPath},h.headers=g,h.body=c.j,h.a=gb(i),h},lb=function(e,f,b,g){this.current=e,this.total=f,this.I=!!b,this.metadata=g||null},mb=function(d,e){var b;try{b=d.h.getResponseHeader("X-Goog-Upload-Status")}catch(b){fb(!1)}return fb(v(e||["active"],b)),b},nb=function(h,i,b,c,d){var e="/b/"+encodeURIComponent(i.bucket)+"/o",g=jb(i,c,d);return d={name:g.fullPath},e=t+"/v0"+e,c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":c.a,"X-Goog-Upload-Header-Content-Type":g.contentType,"Content-Type":"application/json; charset=utf-8"},b=ya(g,b),h=new $(e,"POST",function(c){mb(c);var d;try{d=c.h.getResponseHeader("X-Goog-Upload-URL")}catch(b){fb(!1)}return fb(B(d)),d},h.b),h.b=d,h.headers=c,h.body=b,h.a=gb(i),h},ob=function(e,f,b,g){return e=new $(b,"POST",function(d){var e,c=mb(d,["active","final"]);try{e=d.h.getResponseHeader("X-Goog-Upload-Size-Received")}catch(b){fb(!1)}return d=e,isFinite(d)&&(d+=""),d="string"==typeof d?/^\s*-?0x/i.test(d)?parseInt(d,16):parseInt(d,10):NaN,fb(!isNaN(d)),new lb(d,g.a,"final"===c)},e.b),e.headers={"X-Goog-Upload-Command":"query"},e.a=gb(f),e.g=!1,e},pb=function(h,i,b,j,c,d,e,f){var g=new lb(0,0);if(e?(g.current=e.current,g.total=e.total):(g.current=0,g.total=j.a),j.a!==g.total)throw new l("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var m=e=g.total-g.current;0<c&&(m=Math.min(m,c));var k=g.current;if(c={"X-Goog-Upload-Command":m===e?"upload, finalize":"upload","X-Goog-Upload-Offset":g.current},e=j.slice(k,k+m),null===e)throw o();return b=new $(b,"POST",function(b,h){var c,l=mb(b,["active","final"]),e=g.current+m,f=j.a;return c="final"===l?N(i,d)(b,h):null,new lb(e,f,"final"===l,c)},i.b),b.headers=c,b.body=e.j,b.c=f||null,b.a=gb(h),b.g=!1,b},qb={STATE_CHANGED:"state_changed"},rb={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"},sb=function(b){return"running"===b||"pausing"===b||"canceling"===b?"running":"paused"===b?"paused":"success"===b?"success":"canceled"===b?"canceled":"error"===b?"error":"error"},tb=function(){var c=this;this.h=new XMLHttpRequest,this.b=0,this.c=u(function(d){c.h.addEventListener("abort",function(){c.b=2,d(c)}),c.h.addEventListener("error",function(){c.b=1,d(c)}),c.h.addEventListener("load",function(){d(c)})}),this.a=!1},ta=function(f,g,b,c,d){if(f.a)throw s("cannot .send() more than once");return f.a=!0,f.h.open(b,g,!0),ka(d)&&z(d,function(d,b){f.h.setRequestHeader(d,b.toString())}),ka(c)?f.h.send(c):f.h.send(),f.c},ua=function(b){if(!b.a)throw s("cannot .getErrorCode() before sending");return b.b},va=function(b){if(!b.a)throw s("cannot .getStatus() before sending");try{return b.h.status}catch(c){return-1}},x=function(b){if(!b.a)throw s("cannot .getResponseText() before sending");return b.h.responseText};tb.prototype.abort=function(){this.h.abort()};var wa=function(){},ub=function(f,h,b,c,d,e){this.b=f,this.i=h,this.f=b,this.a=c,this.g=d,this.c=e};b=ub.prototype,b.X=function(){return this.b},b.sa=function(){return this.i},b.pa=function(){return this.f},b.ka=function(){return this.a},b.Y=function(){if(ka(this.a)){var b=this.a.downloadURLs;return ka(b)&&ka(b[0])?b[0]:null}return null},b.ra=function(){return this.g},b.na=function(){return this.c};var Q=function(h,i,b,c,d,e){var g=this;this.O=h,this.c=i,this.o=b,this.f=d,this.i=void 0===e?null:e,this.u=c,this.l=0,this.G=this.w=!1,this.B=[],this.U=262144<this.f.a,this.b="running",this.a=this.A=this.g=null,this.m=1,this.s=function(b){g.a=null,g.m=1,"storage/canceled"===b.code?(g.w=!0,S(g)):(g.g=b,Cb(g,"error"))},this.N=function(b){g.a=null,"storage/canceled"===b.code?S(g):(g.g=b,Cb(g,"error"))},this.D=this.v=null,this.F=u(function(c,d){g.v=c,g.D=d,vb(g)}),this.F.then(null,function(){})},T=function(d){var e=d.l;return function(b){Bb(d,e+b)}},vb=function(b){"running"===b.b&&null===b.a&&(b.U?null===b.A?U(b):b.w?xb(b):b.G?zb(b):yb(b):Ab(b))},wb=function(d,e){na(d.c).then(function(b){switch(d.b){case"running":e(b);break;case"canceling":Cb(d,"canceled");break;case"pausing":Cb(d,"paused");}})},U=function(d){wb(d,function(e){var b=nb(d.c,d.o,d.u,d.f,d.i);d.a=K(d.c,b,e),d.a.a().then(function(c){d.a=null,d.A=c,d.w=!1,S(d)},d.s)})},xb=function(e){var f=e.A;wb(e,function(b){var c=ob(e.c,e.o,f,e.f);e.a=K(e.c,c,b),e.a.a().then(function(c){e.a=null,Bb(e,c.current),e.w=!1,c.I&&(e.G=!0),S(e)},e.s)})},yb=function(h){var e=262144*h.m,b=new lb(h.l,h.f.a),c=h.A;wb(h,function(d){var f;try{f=pb(h.o,h.c,c,h.f,e,h.u,b,T(h))}catch(b){return h.g=b,void Cb(h,"error")}h.a=K(h.c,f,d),h.a.a().then(function(c){33554432>262144*h.m&&(h.m*=2),h.a=null,Bb(h,c.current),c.I?(h.i=c.metadata,Cb(h,"success")):S(h)},h.s)})},zb=function(d){wb(d,function(e){var b=hb(d.c,d.o,d.u);d.a=K(d.c,b,e),d.a.a().then(function(c){d.a=null,d.i=c,Cb(d,"success")},d.N)})},Ab=function(d){wb(d,function(e){var b=kb(d.c,d.o,d.u,d.f,d.i);d.a=K(d.c,b,e),d.a.a().then(function(c){d.a=null,d.i=c,Bb(d,d.f.a),Cb(d,"success")},d.s)})},Bb=function(d,e){var b=d.l;d.l=e,d.l!==b&&R(d)},Cb=function(d,e){if(d.b!==e)switch(e){case"canceling":d.b=e,null!==d.a&&d.a.cancel();break;case"pausing":d.b=e,null!==d.a&&d.a.cancel();break;case"running":var b="paused"===d.b;d.b=e,b&&(R(d),vb(d));break;case"paused":d.b=e,R(d);break;case"canceled":d.g=n(),d.b=e,R(d);break;case"error":d.b=e,R(d);break;case"success":d.b=e,R(d);}},S=function(b){switch(b.b){case"pausing":Cb(b,"paused");break;case"canceling":Cb(b,"canceled");break;case"running":vb(b);}};Q.prototype.C=function(){return new ub(this.l,this.f.a,sb(this.b),this.i,this,this.O)},Q.prototype.P=function(h,i,b,c){function d(b){try{return void g(b)}catch(b){}try{if(f(b),!(j(b.next)||j(b.error)||j(b.complete)))throw""}catch(b){throw"Expected a function or an Object with one of `next`, `error`, `complete` properties."}}function e(f){return function(g,b,c){null!==f&&Aa("on",f,arguments);var d=new eb(g,b,c);return k.B.push(d),Db(k,d),function(){var c=k.B,e=c.indexOf(d);-1!==e&&c.splice(e,1)}}}var g=Ea().a,f=Da(null,!0).a;Aa("on",[Ba(function(){if("state_changed"!==h)throw"Expected one of the event types: [state_changed]."}),Da(d,!0),Ea(),Ea()],arguments);var k=this,l=[Da(function(b){if(null===b)throw"Expected a function or an Object with one of `next`, `error`, `complete` properties.";d(b)}),Ea(),Ea()];return j(i)||j(b)||j(c)?e(null)(i,b,c):e(l)},Q.prototype.then=function(c,d){return this.F.then(void 0===c?null:c,void 0===d?null:d)},Q.prototype["catch"]=function(b){return this.then(null,b)};var R=function(c){V(c),Array.prototype.slice.call(c.B).forEach(function(d){Db(c,d)})},V=function(c){if(null!==c.v){var d=!0;switch(sb(c.b)){case"success":I(c.v.bind(null,c.C()))();break;case"canceled":case"error":I(c.D.bind(null,c.g))();break;default:d=!1;}d&&(c.v=null,c.D=null)}},Db=function(c,d){switch(sb(c.b)){case"running":case"paused":null!==d.b&&I(d.b.bind(d,c.C()))();break;case"success":null!==d.a&&I(d.a.bind(d))();break;case"canceled":case"error":null!==d.error&&I(d.error.bind(d,c.g))();break;default:null!==d.error&&I(d.error.bind(d,c.g))();}};Q.prototype.T=function(){Aa("resume",[],arguments);var b="paused"===this.b||"pausing"===this.b;return b&&Cb(this,"running"),b},Q.prototype.R=function(){Aa("pause",[],arguments);var b="running"===this.b;return b&&Cb(this,"pausing"),b},Q.prototype.cancel=function(){Aa("cancel",[],arguments);var b="running"===this.b||"pausing"===this.b;return b&&Cb(this,"canceling"),b};var Eb=function(c,d){this.a=c,this.location=d instanceof ea?d:ga(d)};Eb.prototype.toString=function(){return Aa("toString",[],arguments),"gs://"+this.location.bucket+"/"+this.location.path};var Fb=function(c,d){return new Eb(c,d)};b=Eb.prototype,b.J=function(c){Aa("child",[Ba()],arguments);var d=D(this.location.path,c);return Fb(this.a,new ea(this.location.bucket,d))},b.ma=function(){var c;if(c=this.location.path,0==c.length)c=null;else{var d=c.lastIndexOf("/");c=-1===d?"":c.slice(0,d)}return null===c?null:Fb(this.a,new ea(this.location.bucket,c))},b.oa=function(){return Fb(this.a,new ea(this.location.bucket,""))},b.W=function(){return this.location.bucket},b.ha=function(){return this.location.path},b.la=function(){return pa(this.location.path)},b.qa=function(){return this.a.m},b.aa=function(c,d){return Aa("put",[H(),new F(za,!0)],arguments),Gb(this,"put"),new Q(this,this.a,this.location,sa(),new db(c),d)},b.ba=function(f,g,b){Aa("putString",[Ba(),Ba(Za,!0),new F(za,!0)],arguments),Gb(this,"putString");var c=_a(ka(g)?g:"raw",f),d=b?C(b):{};return!ka(d.contentType)&&ka(c.a)&&(d.contentType=c.a),new Q(this,this.a,this.location,sa(),new db(c.data,!0),d)},b.Z=function(){Aa("delete",[],arguments),Gb(this,"delete");var d=this;return na(this.a).then(function(e){var b=ib(d.a,d.location);return K(d.a,b,e).a()})},b.K=function(){Aa("getMetadata",[],arguments),Gb(this,"getMetadata");var d=this;return na(this.a).then(function(e){var b=hb(d.a,d.location,sa());return K(d.a,b,e).a()})},b.ca=function(h){Aa("updateMetadata",[new F(za,void 0)],arguments),Gb(this,"updateMetadata");var i=this;return na(this.a).then(function(b){var c=i.a,d=i.location,e=h,g=sa(),f=A(d),f=t+"/v0"+f,e=ya(e,g),c=new $(f,"PATCH",N(c,g),c.c);return c.headers={"Content-Type":"application/json; charset=utf-8"},c.body=e,c.a=O(d),K(i.a,c,b).a()})},b.$=function(){return Aa("getDownloadURL",[],arguments),Gb(this,"getDownloadURL"),this.K().then(function(b){if(b=b.downloadURLs[0],ka(b))return b;throw new l("no-download-url","The given file does not have any download URLs.")})};var Gb=function(c,d){if(""===c.location.path)throw new l("invalid-root-operation","The operation '"+d+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")},X=function(d,e,b){this.a=new ma(d,function(c,d){return new Eb(c,d)},ca,this,e),this.c=d,j(b)?this.b=fa(b):null!=this.a.bucket()&&(this.b=new ea(this.a.bucket(),"")),this.f=new Hb(this)};b=X.prototype,b.da=function(c){if(Aa("ref",[Ba(function(b){if(/^[A-Za-z]+:\/\//.test(b))throw"Expected child path but got a URL, use refFromURL instead."},!0)],arguments),null===this.b)throw Error("No Storage Bucket defined in Firebase Options.");var d=new Eb(this.a,this.b);return j(c)?d.J(c):d},b.ea=function(b){return Aa("refFromURL",[Ba(function(b){if(!/^[A-Za-z]+:\/\//.test(b))throw"Expected full URL but got a child path, use ref instead.";try{ga(b)}catch(b){throw"Expected valid full URL but got an invalid one."}},!1)],arguments),new Eb(this.a,b)},b.ja=function(){return this.a.b},b.ga=function(b){Aa("setMaxUploadRetryTime",[Ca()],arguments),this.a.b=b},b.ia=function(){return this.a.c},b.fa=function(b){Aa("setMaxOperationRetryTime",[Ca()],arguments),this.a.c=b},b.V=function(){return this.c},b.S=function(){return this.f};var Hb=function(b){this.a=b};Hb.prototype.b=function(){var b=this.a.a;b.f=!0,b.a=null,ja(b.i)};var Jb=function(d,e,b){Object.defineProperty(d,e,{get:b})};Eb.prototype.toString=Eb.prototype.toString,Eb.prototype.child=Eb.prototype.J,Eb.prototype.put=Eb.prototype.aa,Eb.prototype.putString=Eb.prototype.ba,Eb.prototype["delete"]=Eb.prototype.Z,Eb.prototype.getMetadata=Eb.prototype.K,Eb.prototype.updateMetadata=Eb.prototype.ca,Eb.prototype.getDownloadURL=Eb.prototype.$,Jb(Eb.prototype,"parent",Eb.prototype.ma),Jb(Eb.prototype,"root",Eb.prototype.oa),Jb(Eb.prototype,"bucket",Eb.prototype.W),Jb(Eb.prototype,"fullPath",Eb.prototype.ha),Jb(Eb.prototype,"name",Eb.prototype.la),Jb(Eb.prototype,"storage",Eb.prototype.qa),X.prototype.ref=X.prototype.da,X.prototype.refFromURL=X.prototype.ea,Jb(X.prototype,"maxOperationRetryTime",X.prototype.ia),X.prototype.setMaxOperationRetryTime=X.prototype.fa,Jb(X.prototype,"maxUploadRetryTime",X.prototype.ja),X.prototype.setMaxUploadRetryTime=X.prototype.ga,Jb(X.prototype,"app",X.prototype.V),Jb(X.prototype,"INTERNAL",X.prototype.S),Hb.prototype["delete"]=Hb.prototype.b,X.prototype.capi_=function(b){t=b},Q.prototype.on=Q.prototype.P,Q.prototype.resume=Q.prototype.T,Q.prototype.pause=Q.prototype.R,Q.prototype.cancel=Q.prototype.cancel,Q.prototype.then=Q.prototype.then,Q.prototype["catch"]=Q.prototype["catch"],Jb(Q.prototype,"snapshot",Q.prototype.C),Jb(ub.prototype,"bytesTransferred",ub.prototype.X),Jb(ub.prototype,"totalBytes",ub.prototype.sa),Jb(ub.prototype,"state",ub.prototype.pa),Jb(ub.prototype,"metadata",ub.prototype.ka),Jb(ub.prototype,"downloadURL",ub.prototype.Y),Jb(ub.prototype,"task",ub.prototype.ra),Jb(ub.prototype,"ref",ub.prototype.na),qb.STATE_CHANGED="state_changed",rb.RUNNING="running",rb.PAUSED="paused",rb.SUCCESS="success",rb.CANCELED="canceled",rb.ERROR="error",Ya.RAW="raw",Ya.BASE64="base64",Ya.BASE64URL="base64url",Ya.DATA_URL="data_url",function(){function b(c,d,b){return new X(c,new wa(),b)}if("undefined"!==typeof firebase)firebase.INTERNAL.registerService("storage",b,{TaskState:rb,TaskEvent:qb,StringFormat:Ya,Storage:X,Reference:Eb},void 0,!0);else throw Error("Cannot install Firebase Storage - be sure to load firebase-app.js first.")}()}).call(this);</script><script>(function(){var a=function(f,a){function b(){}for(var c in b.prototype=a.prototype,f.u=a.prototype,f.prototype=new b,a)if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(a,c);d&&Object.defineProperty(f,c,d)}else f[c]=a[c]},d=this,f=function(d){var e="undefined"===typeof d?"undefined":babelHelpers.typeof(d);if("object"==e){if(d){if(d instanceof Array)return"array";if(d instanceof Object)return e;var b=Object.prototype.toString.call(d);if("[object Window]"==b)return"object";if("[object Array]"==b||"number"==typeof d.length&&"undefined"!=typeof d.splice&&"undefined"!=typeof d.propertyIsEnumerable&&!d.propertyIsEnumerable("splice"))return"array";if("[object Function]"==b||"undefined"!=typeof d.call&&"undefined"!=typeof d.propertyIsEnumerable&&!d.propertyIsEnumerable("call"))return"function"}else return"null";}else if("function"==e&&"undefined"==typeof d.call)return"object";return e},b=function(d,f){function a(){}a.prototype=f.prototype,d.u=f.prototype,d.prototype=new a,d.v=function(b,a){for(var c=Array(arguments.length-2),d=2;d<arguments.length;d++)c[d-2]=arguments[d];return f.prototype[a].apply(b,c)}},c=function c(d){if(Error.captureStackTrace)Error.captureStackTrace(this,c);else{var a=Error().stack;a&&(this.stack=a)}d&&(this.message=d+"")};b(c,Error);var e=function(b){for(var a=b.split("%s"),c="",d=Array.prototype.slice.call(arguments,1);d.length&&1<a.length;)c+=a.shift()+d.shift();return c+a.join("%s")},g=function(d,a){a.unshift(d),c.call(this,e.apply(null,a)),a.shift()};b(g,c);var h=function(c,f){if(!c){var b="Assertion failed";if(f)var b=b+(": "+f),d=Array.prototype.slice.call(arguments,2);throw new g(""+b,d||[])}},i=null,j=function(g){g=new Uint8Array(g);var a=f(g);if(h("array"==a||"object"==a&&"number"==typeof g.length,"encodeByteArray takes an array as a parameter"),!i)for(i={},a=0;65>a;a++)i[a]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(a);for(var a=i,b=[],c=0;c<g.length;c+=3){var d=g[c],e=c+1<g.length,j=e?g[c+1]:0,k=c+2<g.length,l=k?g[c+2]:0,d=(3&d)<<4|j>>4,j=(15&j)<<2|l>>6,l=63&l;k||(l=64,e||(j=64)),b.push(a[d>>2],a[d],a[j],a[l])}return b.join("").replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")},k={},l=(k["only-available-in-window"]="This method is available in a Window context.",k["only-available-in-sw"]="This method is available in a service worker context.",k["should-be-overriden"]="This method should be overriden by extended classes.",k["bad-sender-id"]="Please ensure that 'messagingSenderId' is set correctly in the options passed into firebase.initializeApp().",k["permission-default"]="The required permissions were not granted and dismissed instead.",k["permission-blocked"]="The required permissions were not granted and blocked instead.",k["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",k["notifications-blocked"]="Notifications have been blocked.",k["failed-serviceworker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",k["sw-registration-expected"]="A service worker registration was the expected input.",k["get-subscription-failed"]="There was an error when trying to get any existing Push Subscriptions.",k["invalid-saved-token"]="Unable to access details of the saved token.",k["sw-reg-redundant"]="The service worker being used for push was made redundant.",k["token-subscribe-failed"]="A problem occured while subscribing the user to FCM: {$message}",k["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",k["token-subscribe-no-push-set"]="FCM returned an invalid response when getting an FCM token.",k["use-sw-before-get-token"]="You must call useServiceWorker() before calling getToken() to ensure your service worker is used.",k["invalid-delete-token"]="You must pass a valid token into deleteToken(), i.e. the token from getToken().",k["delete-token-not-found"]="The deletion attempt for token could not be performed as the token was not found.",k["delete-scope-not-found"]="The deletion attempt for service worker scope could not be performed as the scope was not found.",k["bg-handler-function-expected"]="The input to setBackgroundMessageHandler() must be a function.",k["no-window-client-to-msg"]="An attempt was made to message a non-existant window client.",k["unable-to-resubscribe"]="There was an error while re-subscribing the FCM token for push messaging. Will have to resubscribe the user on next visit. {$message}",k["no-fcm-token-for-resubscribe"]="Could not find an FCM token and as a result, unable to resubscribe. Will have to resubscribe the user on next visit.",k["failed-to-delete-token"]="Unable to delete the currently saved token.",k["no-sw-in-reg"]="Even though the service worker registration was successful, there was a problem accessing the service worker itself.",k["incorrect-gcm-sender-id"]="Please change your web app manifest's 'gcm_sender_id' value to '103953800507' to use Firebase messaging.",k["bad-scope"]="The service worker scope must be a string with at least one character.",k["bad-vapid-key"]="The public VAPID key must be a string with at least one character.",k["bad-subscription"]="The subscription must be a valid PushSubscription.",k["bad-token"]="The FCM Token used for storage / lookup was not a valid token string.",k["bad-push-set"]="The FCM push set used for storage / lookup was not not a valid push set string.",k["failed-delete-vapid-key"]="The VAPID key could not be deleted.",k),m={userVisibleOnly:!0,applicationServerKey:new Uint8Array([4,51,148,247,223,161,235,177,220,3,162,94,21,113,219,72,211,46,237,237,178,52,219,183,71,58,12,143,196,204,225,111,60,140,132,223,171,182,102,62,242,12,212,139,254,227,249,118,47,20,28,99,8,106,111,45,177,26,149,176,206,55,192,156,110])},n=new firebase.INTERNAL.ErrorFactory("messaging","Messaging",l),o=function(){this.a=null},p=function(b){return b.a?b.a:(b.a=new Promise(function(e,f){var a=d.indexedDB.open("fcm_token_details_db",1);a.onerror=function(b){f(b.target.error)},a.onsuccess=function(a){e(a.target.result)},a.onupgradeneeded=function(b){b=b.target.result.createObjectStore("fcm_token_object_Store",{keyPath:"swScope"}),b.createIndex("fcmSenderId","fcmSenderId",{unique:!1}),b.createIndex("fcmToken","fcmToken",{unique:!0})}}),b.a)},q=function(c){c.a?c.a.then(function(a){a.close(),c.a=null}):Promise.resolve()},r=function(c,f){return p(c).then(function(b){return new Promise(function(g,c){var a=b.transaction(["fcm_token_object_Store"]).objectStore("fcm_token_object_Store").index("fcmToken").get(f);a.onerror=function(b){c(b.target.error)},a.onsuccess=function(b){g(b.target.result)}})})},s=function(c,e){return p(c).then(function(b){return new Promise(function(f,c){var g=[],a=b.transaction(["fcm_token_object_Store"]).objectStore("fcm_token_object_Store").openCursor();a.onerror=function(b){c(b.target.error)},a.onsuccess=function(b){(b=b.target.result)?(b.value.fcmSenderId===e&&g.push(b.value),b.continue()):f(g)}})})},u=function(f,g,b){var h=j(g.getKey("p256dh")),d=j(g.getKey("auth"));return f="authorized_entity="+f+"&"+("endpoint="+g.endpoint+"&")+("encryption_key="+h+"&")+("encryption_auth="+d),b&&(f+="&pushSet="+b),b=new Headers,b.append("Content-Type","application/x-www-form-urlencoded"),fetch("https://fcm.googleapis.com/fcm/connect/subscribe",{method:"POST",headers:b,body:f}).then(function(b){return b.json()}).then(function(b){if(b.error)throw n.create("token-subscribe-failed",{message:b.error.message});if(!b.token)throw n.create("token-subscribe-no-token");if(!b.pushSet)throw n.create("token-subscribe-no-push-set");return{token:b.token,pushSet:b.pushSet}})},v=function(f,a,g,c,d,h){var i={swScope:g.scope,endpoint:c.endpoint,auth:j(c.getKey("auth")),p256dh:j(c.getKey("p256dh")),fcmToken:d,fcmPushSet:h,fcmSenderId:a};return p(f).then(function(e){return new Promise(function(a,b){var c=e.transaction(["fcm_token_object_Store"],"readwrite").objectStore("fcm_token_object_Store").put(i);c.onerror=function(c){b(c.target.error)},c.onsuccess=function(){a()}})})};o.prototype.i=function(d,e){return e instanceof ServiceWorkerRegistration?"string"!==typeof d||0===d.length?Promise.reject(n.create("bad-sender-id")):s(this,d).then(function(a){if(0!==a.length){var b=a.findIndex(function(a){return e.scope===a.swScope&&d===a.fcmSenderId});if(-1!==b)return a[b]}}).then(function(d){if(d)return e.pushManager.getSubscription().catch(function(){throw n.create("get-subscription-failed")}).then(function(a){var b;if((b=a)&&(b=a.endpoint===d.endpoint&&j(a.getKey("auth"))===d.auth&&j(a.getKey("p256dh"))===d.p256dh),b)return d.fcmToken})}):Promise.reject(n.create("sw-registration-expected"))},o.prototype.getSavedToken=o.prototype.i,o.prototype.h=function(f,g){var b=this;return"string"!==typeof f||0===f.length?Promise.reject(n.create("bad-sender-id")):g instanceof ServiceWorkerRegistration?g.pushManager.getSubscription().then(function(b){return b?b:g.pushManager.subscribe(m)}).then(function(a){return u(f,a).then(function(c){return v(b,f,g,a,c.token,c.pushSet).then(function(){return c.token})})}):Promise.reject(n.create("sw-registration-expected"))},o.prototype.createToken=o.prototype.h,o.prototype.deleteToken=function(c){var d=this;return"string"!==typeof c||0===c.length?Promise.reject(n.create("invalid-delete-token")):r(this,c).then(function(f){if(!f)throw n.create("delete-token-not-found");return p(d).then(function(a){return new Promise(function(g,c){var b=a.transaction(["fcm_token_object_Store"],"readwrite").objectStore("fcm_token_object_Store").delete(f.swScope);b.onerror=function(b){c(b.target.error)},b.onsuccess=function(a){0===a.target.result?c(n.create("failed-to-delete-token")):g(f)}})})})};var w=function(c){var a=this;if(this.a=new firebase.INTERNAL.ErrorFactory("messaging","Messaging",l),!c.options.messagingSenderId||"string"!==typeof c.options.messagingSenderId)throw this.a.create("bad-sender-id");this.l=c.options.messagingSenderId,this.c=new o,this.app=c,this.INTERNAL={},this.INTERNAL.delete=function(){return a.delete}};w.prototype.getToken=function(){var d=this,a=Notification.permission;return"granted"===a?this.f().then(function(a){return d.c.i(d.l,a).then(function(b){return b?b:d.c.h(d.l,a)})}):"denied"===a?Promise.reject(this.a.create("notifications-blocked")):Promise.resolve(null)},w.prototype.getToken=w.prototype.getToken,w.prototype.deleteToken=function(c){var a=this;return this.c.deleteToken(c).then(function(){return a.f()}).then(function(b){return b?b.pushManager.getSubscription():null}).then(function(b){if(b)return b.unsubscribe()})},w.prototype.deleteToken=w.prototype.deleteToken,w.prototype.f=function(){throw this.a.create("should-be-overriden")},w.prototype.requestPermission=function(){throw this.a.create("only-available-in-window")},w.prototype.useServiceWorker=function(){throw this.a.create("only-available-in-window")},w.prototype.useServiceWorker=w.prototype.useServiceWorker,w.prototype.onMessage=function(){throw this.a.create("only-available-in-window")},w.prototype.onMessage=w.prototype.onMessage,w.prototype.onTokenRefresh=function(){throw this.a.create("only-available-in-window")},w.prototype.onTokenRefresh=w.prototype.onTokenRefresh,w.prototype.setBackgroundMessageHandler=function(){throw this.a.create("only-available-in-sw")},w.prototype.setBackgroundMessageHandler=w.prototype.setBackgroundMessageHandler,w.prototype.delete=function(){q(this.c)};var x=function(d,a){var b={};return b["firebase-messaging-msg-type"]=d,b["firebase-messaging-msg-data"]=a,b},y=self,z=function(c){w.call(this,c);var d=this;this.a=new firebase.INTERNAL.ErrorFactory("messaging","Messaging",l),y.addEventListener("push",function(b){return A(d,b)},!1),y.addEventListener("pushsubscriptionchange",function(b){return B(d,b)},!1),y.addEventListener("notificationclick",function(b){return C(d,b)},!1),this.b=null};a(z,w);var A=function(f,a){var g;try{g=a.data.json()}catch(a){return}var b=F().then(function(a){if(!a){if((a=g)&&"object"===babelHelpers.typeof(a.notification)){var c=Object.assign({},a.notification),d={};c.data=(d.FCM_MSG=a,d),a=c}else a=void 0;if(a)return y.registration.showNotification(a.title||"",a);if(f.b)return f.b(g)}else if(g.notification||f.b)return G(f,g)});a.waitUntil(b)},B=function(e,a){var b=e.getToken().then(function(a){if(!a)throw e.a.create("no-fcm-token-for-resubscribe");var f=e.c;return r(f,a).then(function(c){if(!c)throw e.a.create("invalid-saved-token");return y.registration.pushManager.subscribe(m).then(function(b){return u(c.A,b,c.w)}).catch(function(a){return f.deleteToken(c.B).then(function(){throw e.a.create("unable-to-resubscribe",{message:a})})})})});a.waitUntil(b)},C=function(f,a){if(a.notification&&a.notification.data&&a.notification.data.FCM_MSG){a.stopImmediatePropagation(),a.notification.close();var g=a.notification.data.FCM_MSG,b=g.notification.click_action;if(b){var c=D(b).then(function(c){return c?c:y.clients.openWindow(b)}).then(function(a){if(a)return delete g.notification,E(f,a,x("notification-clicked",g))});a.waitUntil(c)}}};z.prototype.setBackgroundMessageHandler=function(b){if(b&&"function"!==typeof b)throw this.a.create("bg-handler-function-expected");this.b=b},z.prototype.setBackgroundMessageHandler=z.prototype.setBackgroundMessageHandler;var D=function(c){var d=new URL(c).href;return y.clients.matchAll({type:"window",includeUncontrolled:!0}).then(function(b){for(var a=null,c=0;c<b.length;c++)if(new URL(b[c].url).href===d){a=b[c];break}if(a)return a.focus(),a})},E=function(f,a,b){return new Promise(function(c,d){return a?void(a.postMessage(b),c()):d(f.a.create("no-window-client-to-msg"))})},F=function(){return y.clients.matchAll({type:"window",includeUncontrolled:!0}).then(function(b){return b.some(function(b){return"visible"===b.visibilityState})})},G=function(c,a){return y.clients.matchAll({type:"window",includeUncontrolled:!0}).then(function(b){var e=x("push-msg-received",a);return Promise.all(b.map(function(a){return E(c,a,e)}))})};z.prototype.f=function(){return Promise.resolve(y.registration)};var H=function(c){w.call(this,c);var d=this;this.j=null,this.m=firebase.INTERNAL.createSubscribe(function(b){d.j=b}),this.s=null,this.o=firebase.INTERNAL.createSubscribe(function(b){d.s=b}),K(this)};a(H,w),H.prototype.getToken=function(){var b=this;return"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")?I(this).then(function(){return w.prototype.getToken.call(b)}):Promise.reject(this.a.create("unsupported-browser"))},H.prototype.getToken=H.prototype.getToken;var I=function(c){if(c.g)return c.g;var a=document.querySelector("link[rel=\"manifest\"]");return c.g=a?fetch(a.href).then(function(b){return b.json()}).catch(function(){return Promise.resolve()}).then(function(a){if(a&&a.gcm_sender_id&&"103953800507"!==a.gcm_sender_id)throw c.a.create("incorrect-gcm-sender-id")}):Promise.resolve(),c.g};H.prototype.requestPermission=function(){var d=this;return"granted"===Notification.permission?Promise.resolve():new Promise(function(a,b){var c=function(c){return"granted"===c?a():"denied"===c?b(d.a.create("permission-blocked")):b(d.a.create("permission-default"))},f=Notification.requestPermission(function(b){f||c(b)});f&&f.then(c)})},H.prototype.requestPermission=H.prototype.requestPermission,H.prototype.useServiceWorker=function(b){if(!(b instanceof ServiceWorkerRegistration))throw this.a.create("sw-registration-expected");if("undefined"!==typeof this.b)throw this.a.create("use-sw-before-get-token");this.b=b},H.prototype.useServiceWorker=H.prototype.useServiceWorker,H.prototype.onMessage=function(d,a,b){return this.m(d,a,b)},H.prototype.onMessage=H.prototype.onMessage,H.prototype.onTokenRefresh=function(d,a,b){return this.o(d,a,b)},H.prototype.onTokenRefresh=H.prototype.onTokenRefresh;var J=function(f,a){var b=a.installing||a.waiting||a.active;return new Promise(function(g,d){if(!b)d(f.a.create("no-sw-in-reg"));else if("activated"===b.state)g(a);else if("redundant"===b.state)d(f.a.create("sw-reg-redundant"));else{var e=function c(){if("activated"===b.state)g(a);else if("redundant"===b.state)d(f.a.create("sw-reg-redundant"));else return;b.removeEventListener("statechange",c)};b.addEventListener("statechange",e)}})};H.prototype.f=function(){var c=this;return this.b?J(this,this.b):(this.b=null,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"}).catch(function(a){throw c.a.create("failed-serviceworker-registration",{browserErrorMessage:a.message})}).then(function(a){return J(c,a).then(function(){return c.b=a,a.update(),a})}))};var K=function(c){"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",function(a){if(a.data&&a.data["firebase-messaging-msg-type"])switch(a=a.data,a["firebase-messaging-msg-type"]){case"push-msg-received":case"notification-clicked":c.j.next(a["firebase-messaging-msg-data"]);}},!1)};if(!(firebase&&firebase.INTERNAL&&firebase.INTERNAL.registerService))throw Error("Cannot install Firebase Messaging - be sure to load firebase-app.js first.");firebase.INTERNAL.registerService("messaging",function(b){return self&&"ServiceWorkerGlobalScope"in self?new z(b):new H(b)},{Messaging:H}),new firebase.INTERNAL.ErrorFactory("messaging","Messaging",l),new firebase.INTERNAL.ErrorFactory("messaging","Messaging",l),new firebase.INTERNAL.ErrorFactory("messaging","Messaging",l)}).call(this);</script><dom-module id="firebase-app" assetpath="../bower_components/polymerfire/"><script>(function(){'use strict';Polymer({is:'firebase-app',properties:{name:{type:String,value:''},apiKey:{type:String},authDomain:{type:String},databaseUrl:{type:String},storageBucket:{type:String,value:null},messagingSenderId:{type:String,value:null},app:{type:Object,notify:!0,computed:'__computeApp(name, apiKey, authDomain, databaseUrl, storageBucket, messagingSenderId)'}},__computeApp:function(a,b,c,d,e,f){if(b&&c&&d){var g=[{apiKey:b,authDomain:c,databaseURL:d,storageBucket:e,messagingSenderId:f}];a&&g.push(a),firebase.initializeApp.apply(firebase,g),this.fire('firebase-app-initialized')}else return null;return firebase.app(a)}})})();</script></dom-module><script>(function(){'use strict';function a(){for(var a=0;a<b.length;++a)b[a].refreshNetworkStatus()}var b=[];window.addEventListener('online',a),window.addEventListener('offline',a),Polymer.AppNetworkStatusBehavior={properties:{online:{type:Boolean,readOnly:!0,notify:!0,value:function(){return window.navigator.onLine}}},attached:function(){b.push(this),this.refreshNetworkStatus()},detached:function(){var a=b.indexOf(this);0>a||b.splice(a,1)},refreshNetworkStatus:function(){this._setOnline(window.navigator.onLine)}}})();</script><script>(function(){'use strict';Polymer.FirebaseCommonBehaviorImpl={properties:{app:{type:Object,notify:!0,observer:'__appChanged'},appName:{type:String,notify:!0,value:'',observer:'__appNameChanged'}},__appNameChanged:function(a){if(!(this.app&&this.app.name===a))try{this.app=null==a?firebase.app():firebase.app(a)}catch(a){var b=this;window.addEventListener('firebase-app-initialized',function a(){window.removeEventListener('firebase-app-initialized',a),b.__appNameChanged(b.appName)})}},__appChanged:function(a){a&&a.name===this.appName||(this.appName=a?a.name:'')},__onError:function(a){this.fire('error',a)}},Polymer.FirebaseCommonBehavior=[Polymer.AppNetworkStatusBehavior,Polymer.FirebaseCommonBehaviorImpl]})();</script><dom-module id="firebase-auth" assetpath="../bower_components/polymerfire/"><script>(function(){'use strict';Polymer({is:'firebase-auth',behaviors:[Polymer.FirebaseCommonBehavior],properties:{auth:{type:Object,computed:'_computeAuth(app)',observer:'__authChanged'},provider:{type:String,notify:!0},signedIn:{type:Boolean,computed:'_computeSignedIn(user)',notify:!0},user:{type:Object,readOnly:!0,value:null,notify:!0},statusKnown:{type:Boolean,value:!1,notify:!0,readOnly:!0,reflectToAttribute:!0}},signInAnonymously:function(){return this.auth?this._handleSignIn(this.auth.signInAnonymously()):Promise.reject('No app configured for firebase-auth!')},signInWithCustomToken:function(a){return this.auth?this._handleSignIn(this.auth.signInWithCustomToken(a)):Promise.reject('No app configured for firebase-auth!')},signInWithCredential:function(a){return this.auth?this._handleSignIn(this.auth.signInWithCredential(a)):Promise.reject('No app configured for firebase-auth!')},signInWithPopup:function(a){return this._attemptProviderSignIn(this._normalizeProvider(a),this.auth.signInWithPopup)},signInWithRedirect:function(a){return this._attemptProviderSignIn(this._normalizeProvider(a),this.auth.signInWithRedirect)},signInWithEmailAndPassword:function(a,b){return this._handleSignIn(this.auth.signInWithEmailAndPassword(a,b))},createUserWithEmailAndPassword:function(a,b){return this._handleSignIn(this.auth.createUserWithEmailAndPassword(a,b))},sendPasswordResetEmail:function(a){return this._handleSignIn(this.auth.sendPasswordResetEmail(a))},signOut:function(){return this.auth?this.auth.signOut():Promise.reject('No app configured for auth!')},_attemptProviderSignIn:function(a,b){return a=a||this._providerFromName(this.provider),a?this.auth?this._handleSignIn(b.call(this.auth,a)):Promise.reject('No app configured for firebase-auth!'):Promise.reject('Must supply a provider for popup sign in.')},_providerFromName:function(a){switch(a){case'facebook':return new firebase.auth.FacebookAuthProvider;case'github':return new firebase.auth.GithubAuthProvider;case'google':return new firebase.auth.GoogleAuthProvider;case'twitter':return new firebase.auth.TwitterAuthProvider;default:this.fire('error','Unrecognized firebase-auth provider "'+a+'"');}},_normalizeProvider:function(a){return'string'===typeof a?this._providerFromName(a):a},_handleSignIn:function(a){return a.catch(function(a){throw this.fire('error',a),a}.bind(this))},_computeSignedIn:function(a){return!!a},_computeAuth:function(){return this.app.auth()},__authChanged:function(a,b){this._setStatusKnown(!1),b!==a&&this._unsubscribe&&(this._unsubscribe(),this._unsubscribe=null),this.auth&&(this._unsubscribe=this.auth.onAuthStateChanged(function(a){this._setUser(a),this._setStatusKnown(!0)}.bind(this),function(a){this.fire('error',a)}.bind(this)))}})})();</script></dom-module><script>(function(){Polymer.IronMeta=function(a){Polymer.IronMeta[' '](a),this.type=a&&a.type||'default',this.key=a&&a.key,a&&'value'in a&&(this.value=a.value)},Polymer.IronMeta[' ']=function(){},Polymer.IronMeta.types={},Polymer.IronMeta.prototype={get value(){var a=this.type,b=this.key;if(a&&b)return Polymer.IronMeta.types[a]&&Polymer.IronMeta.types[a][b]},set value(a){var b=this.type,c=this.key;b&&c&&(b=Polymer.IronMeta.types[b]=Polymer.IronMeta.types[b]||{},null==a?delete b[c]:b[c]=a)},get list(){var b=this.type;if(b){var c=Polymer.IronMeta.types[this.type];return c?Object.keys(c).map(function(b){return a[this.type][b]},this):[]}},byKey:function(a){return this.key=a,this.value}};var a=Polymer.IronMeta.types;Polymer({is:'iron-meta',properties:{type:{type:String,value:'default'},key:{type:String},value:{type:String,notify:!0},self:{type:Boolean,observer:'_selfChanged'},__meta:{type:Boolean,computed:'__computeMeta(type, key, value)'}},hostAttributes:{hidden:!0},__computeMeta:function(a,b,c){var d=new Polymer.IronMeta({type:a,key:b});return void 0!==c&&c!==d.value?d.value=c:this.value!==d.value&&(this.value=d.value),d},get list(){return this.__meta&&this.__meta.list},_selfChanged:function(a){a&&(this.value=this)},byKey:function(a){return new Polymer.IronMeta({type:this.type,key:a}).value}})})();</script><script>Polymer({is:'iron-iconset-svg',properties:{name:{type:String,observer:'_nameChanged'},size:{type:Number,value:24},rtlMirroring:{type:Boolean,value:!1},useGlobalRtlAttribute:{type:Boolean,value:!1}},created:function(){this._meta=new Polymer.IronMeta({type:'iconset',key:null,value:null})},attached:function(){this.style.display='none'},getIconNames:function(){return this._icons=this._createIconMap(),Object.keys(this._icons).map(function(a){return this.name+':'+a},this)},applyIcon:function(a,b){this.removeIcon(a);var c=this._cloneIcon(b,this.rtlMirroring&&this._targetIsRTL(a));if(c){var d=Polymer.dom(a.root||a);return d.insertBefore(c,d.childNodes[0]),a._svgIcon=c}return null},removeIcon:function(a){a._svgIcon&&(Polymer.dom(a.root||a).removeChild(a._svgIcon),a._svgIcon=null)},_targetIsRTL:function(a){if(null==this.__targetIsRTL)if(this.useGlobalRtlAttribute){var b=document.body&&document.body.hasAttribute('dir')?document.body:document.documentElement;this.__targetIsRTL='rtl'===b.getAttribute('dir')}else a&&a.nodeType!==Node.ELEMENT_NODE&&(a=a.host),this.__targetIsRTL=a&&'rtl'===window.getComputedStyle(a).direction;return this.__targetIsRTL},_nameChanged:function(){this._meta.value=null,this._meta.key=this.name,this._meta.value=this,this.async(function(){this.fire('iron-iconset-added',this,{node:window})})},_createIconMap:function(){var a=Object.create(null);return Polymer.dom(this).querySelectorAll('[id]').forEach(function(b){a[b.id]=b}),a},_cloneIcon:function(a,b){return this._icons=this._icons||this._createIconMap(),this._prepareSvgClone(this._icons[a],this.size,b)},_prepareSvgClone:function(a,b,c){if(a){var d=a.cloneNode(!0),e=document.createElementNS('http://www.w3.org/2000/svg','svg'),f=d.getAttribute('viewBox')||'0 0 '+b+' '+b,g='pointer-events: none; display: block; width: 100%; height: 100%;';return c&&d.hasAttribute('mirror-in-rtl')&&(g+='-webkit-transform:scale(-1,1);transform:scale(-1,1);transform-origin:center;'),e.setAttribute('viewBox',f),e.setAttribute('preserveAspectRatio','xMidYMid meet'),e.setAttribute('focusable','false'),e.style.cssText=g,e.appendChild(d).removeAttribute('id'),e}return null}});</script><iron-iconset-svg name="my-icons" size="24"><svg><defs><g id="arrow-back"><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"></path></g><g id="menu"><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"></path></g><g id="chevron-right"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"></path></g><g id="close"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></g><g id="expand-more"><path d="M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"></path></g></defs></svg></iron-iconset-svg></div><dom-module id="my-app"><template><style>:host{--dark-primary-color:#212121;--default-primary-color:#424242;--light-primary-color:#bdbdbd;--text-primary-color:#FFFFFF;--accent-color:rgb(98, 97, 99);--primary-background-color:#CFD8DC;--primary-text-color:#212121;--secondary-text-color:#757575;--disabled-text-color:#BDBDBD;--divider-color:#BDBDBD;--paper-checkbox-label-color:var(--primary-text-color);--drawer-menu-color:#ffffff;--drawer-border-color:1px solid #ccc;--drawer-toolbar-border-color:1px solid rgba(0, 0, 0, 0.22);--paper-menu-background-color:#fff;--menu-link-color:#111111;--paper-input-container-color:#607D8B;--paper-input-container-focus-color:#455A64;--paper-input-container-input-color:#212121;--paper-radio-button-checked-color:var(--accent-color);--paper-radio-button-checked-ink-color:var(--accent-color);--paper-tab-ink:var(--accent-color);--paper-tabs-selection-bar-color:var(--accent-color);--paper-button:{background-color:var(--accent-color);color:var(--text-primary-color);};--paper-checkbox-checked-color:(--primary-text-color);--paper-checkbox-checked-ink-color:var(--accent-color);--paper-checkbox-checkmark-color:var(--accent-color);--paper-slider-active-color:var(--accent-color);--paper-slider-knob-color:var(--accent-color);--paper-listbox:{background-color:#fff;};--paper-card:{background-color:#fff;};display:block;}</style><app-location route="{{route}}"></app-location><app-route route="{{route}}" pattern="[[rootPattern]]:page/:subpage" data="{{routeData}}" tail="{{subroute}}"></app-route><firebase-app auth-domain="atlas-4951a.firebaseapp.com" database-url="https://atlas-4951a.firebaseio.com/" api-key="AIzaSyA14VnwL_vCDqgwlEsUyJPqyGgk92BTko8"></firebase-app><firebase-auth id="FBAuth" signed-in="{{signedIn}}"></firebase-auth><iron-pages role="main" selected="[[page]]" attr-for-selected="name" fallback-selection="view404"><my-login name="login"></my-login><my-home name="home" todo-list="{{todo}}"></my-home><my-case name="case" route-data="[[routeData]]" todo="[[todo]]"></my-case><my-compare name="compare" route-data="[[routeData]]" todo="[[todo]]"></my-compare><my-view404 name="view404"></my-view404><my-data name="data" route-data="[[routeData]]"></my-data></iron-pages></template><script>var MyApp=function(a){function b(){babelHelpers.classCallCheck(this,b);var a=babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return a.rootPattern=new URL(a.rootPath).pathname,a}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,null,[{key:'is',get:function(){return'my-app'}},{key:'properties',get:function(){return{page:{type:String,reflectToAttribute:!0,observer:'_pageChanged'},rootPattern:String,subroute:String,signedIn:{type:Boolean,observer:'_signedInChanged'}}}},{key:'observers',get:function(){return['_routePageChanged(routeData.page)']}}]),babelHelpers.createClass(b,[{key:'_routePageChanged',value:function(a){!this.signedIn&&'login'!==a||this.signedIn&&'login'===a||(this.page=a||'home')}},{key:'_pageChanged',value:function(a){var b=this.resolveUrl('my-'+a+'.html');Polymer.importHref(b,null,this._showPage404.bind(this),!0)}},{key:'_showPage404',value:function(){this.page='view404'}},{key:'_signedInChanged',value:function(a){a?this.set('routeData.page','home'):(this.set('routeData.page','login'),this.set('routeData.subpage',''))}}]),b}(Polymer.Element);window.customElements.define(MyApp.is,MyApp);</script></dom-module><script>(function(){var a=document.createElement('style');a.textContent='[hidden] { display: none !important; }',document.head.appendChild(a)})();</script><custom-style><style is="custom-style">[hidden]{display:none !important;}</style></custom-style><custom-style><style is="custom-style">html{--layout:{display:-ms-flexbox;display:-webkit-flex;display:flex;};--layout-inline:{display:-ms-inline-flexbox;display:-webkit-inline-flex;display:inline-flex;};--layout-horizontal:{@apply --layout;-ms-flex-direction:row;-webkit-flex-direction:row;flex-direction:row;};--layout-horizontal-reverse:{@apply --layout;-ms-flex-direction:row-reverse;-webkit-flex-direction:row-reverse;flex-direction:row-reverse;};--layout-vertical:{@apply --layout;-ms-flex-direction:column;-webkit-flex-direction:column;flex-direction:column;};--layout-vertical-reverse:{@apply --layout;-ms-flex-direction:column-reverse;-webkit-flex-direction:column-reverse;flex-direction:column-reverse;};--layout-wrap:{-ms-flex-wrap:wrap;-webkit-flex-wrap:wrap;flex-wrap:wrap;};--layout-wrap-reverse:{-ms-flex-wrap:wrap-reverse;-webkit-flex-wrap:wrap-reverse;flex-wrap:wrap-reverse;};--layout-flex-auto:{-ms-flex:1 1 auto;-webkit-flex:1 1 auto;flex:1 1 auto;};--layout-flex-none:{-ms-flex:none;-webkit-flex:none;flex:none;};--layout-flex:{-ms-flex:1 1 0.000000001px;-webkit-flex:1;flex:1;-webkit-flex-basis:0.000000001px;flex-basis:0.000000001px;};--layout-flex-2:{-ms-flex:2;-webkit-flex:2;flex:2;};--layout-flex-3:{-ms-flex:3;-webkit-flex:3;flex:3;};--layout-flex-4:{-ms-flex:4;-webkit-flex:4;flex:4;};--layout-flex-5:{-ms-flex:5;-webkit-flex:5;flex:5;};--layout-flex-6:{-ms-flex:6;-webkit-flex:6;flex:6;};--layout-flex-7:{-ms-flex:7;-webkit-flex:7;flex:7;};--layout-flex-8:{-ms-flex:8;-webkit-flex:8;flex:8;};--layout-flex-9:{-ms-flex:9;-webkit-flex:9;flex:9;};--layout-flex-10:{-ms-flex:10;-webkit-flex:10;flex:10;};--layout-flex-11:{-ms-flex:11;-webkit-flex:11;flex:11;};--layout-flex-12:{-ms-flex:12;-webkit-flex:12;flex:12;};--layout-start:{-ms-flex-align:start;-webkit-align-items:flex-start;align-items:flex-start;};--layout-center:{-ms-flex-align:center;-webkit-align-items:center;align-items:center;};--layout-end:{-ms-flex-align:end;-webkit-align-items:flex-end;align-items:flex-end;};--layout-baseline:{-ms-flex-align:baseline;-webkit-align-items:baseline;align-items:baseline;};--layout-start-justified:{-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;};--layout-center-justified:{-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;};--layout-end-justified:{-ms-flex-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end;};--layout-around-justified:{-ms-flex-pack:distribute;-webkit-justify-content:space-around;justify-content:space-around;};--layout-justified:{-ms-flex-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;};--layout-center-center:{@apply --layout-center;@apply --layout-center-justified;};--layout-self-start:{-ms-align-self:flex-start;-webkit-align-self:flex-start;align-self:flex-start;};--layout-self-center:{-ms-align-self:center;-webkit-align-self:center;align-self:center;};--layout-self-end:{-ms-align-self:flex-end;-webkit-align-self:flex-end;align-self:flex-end;};--layout-self-stretch:{-ms-align-self:stretch;-webkit-align-self:stretch;align-self:stretch;};--layout-self-baseline:{-ms-align-self:baseline;-webkit-align-self:baseline;align-self:baseline;};--layout-start-aligned:{-ms-flex-line-pack:start;-ms-align-content:flex-start;-webkit-align-content:flex-start;align-content:flex-start;};--layout-end-aligned:{-ms-flex-line-pack:end;-ms-align-content:flex-end;-webkit-align-content:flex-end;align-content:flex-end;};--layout-center-aligned:{-ms-flex-line-pack:center;-ms-align-content:center;-webkit-align-content:center;align-content:center;};--layout-between-aligned:{-ms-flex-line-pack:justify;-ms-align-content:space-between;-webkit-align-content:space-between;align-content:space-between;};--layout-around-aligned:{-ms-flex-line-pack:distribute;-ms-align-content:space-around;-webkit-align-content:space-around;align-content:space-around;};--layout-block:{display:block;};--layout-invisible:{visibility:hidden !important;};--layout-relative:{position:relative;};--layout-fit:{position:absolute;top:0;right:0;bottom:0;left:0;};--layout-scroll:{-webkit-overflow-scrolling:touch;overflow:auto;};--layout-fullbleed:{margin:0;height:100vh;};--layout-fixed-top:{position:fixed;top:0;left:0;right:0;};--layout-fixed-right:{position:fixed;top:0;right:0;bottom:0;};--layout-fixed-bottom:{position:fixed;right:0;bottom:0;left:0;};--layout-fixed-left:{position:fixed;top:0;bottom:0;left:0;};}</style></custom-style><script>Polymer.IronScrollTargetBehavior={properties:{scrollTarget:{type:HTMLElement,value:function(){return this._defaultScrollTarget}}},observers:['_scrollTargetChanged(scrollTarget, isAttached)'],_shouldHaveListener:!0,_scrollTargetChanged:function(a,b){if(this._oldScrollTarget&&(this._toggleScrollListener(!1,this._oldScrollTarget),this._oldScrollTarget=null),!!b)if('document'===a)this.scrollTarget=this._doc;else if('string'===typeof a){var c=this.domHost;this.scrollTarget=c&&c.$?c.$[a]:Polymer.dom(this.ownerDocument).querySelector('#'+a)}else this._isValidScrollTarget()&&(this._oldScrollTarget=a,this._toggleScrollListener(this._shouldHaveListener,a))},_scrollHandler:function(){},get _defaultScrollTarget(){return this._doc},get _doc(){return this.ownerDocument.documentElement},get _scrollTop(){return this._isValidScrollTarget()?this.scrollTarget===this._doc?window.pageYOffset:this.scrollTarget.scrollTop:0},get _scrollLeft(){return this._isValidScrollTarget()?this.scrollTarget===this._doc?window.pageXOffset:this.scrollTarget.scrollLeft:0},set _scrollTop(a){this.scrollTarget===this._doc?window.scrollTo(window.pageXOffset,a):this._isValidScrollTarget()&&(this.scrollTarget.scrollTop=a)},set _scrollLeft(a){this.scrollTarget===this._doc?window.scrollTo(a,window.pageYOffset):this._isValidScrollTarget()&&(this.scrollTarget.scrollLeft=a)},scroll:function(a,b){this.scrollTarget===this._doc?window.scrollTo(a,b):this._isValidScrollTarget()&&(this.scrollTarget.scrollLeft=a,this.scrollTarget.scrollTop=b)},get _scrollTargetWidth(){return this._isValidScrollTarget()?this.scrollTarget===this._doc?window.innerWidth:this.scrollTarget.offsetWidth:0},get _scrollTargetHeight(){return this._isValidScrollTarget()?this.scrollTarget===this._doc?window.innerHeight:this.scrollTarget.offsetHeight:0},_isValidScrollTarget:function(){return this.scrollTarget instanceof HTMLElement},_toggleScrollListener:function(a,b){var c=b===this._doc?window:b;a?!this._boundScrollHandler&&(this._boundScrollHandler=this._scrollHandler.bind(this),c.addEventListener('scroll',this._boundScrollHandler)):this._boundScrollHandler&&(c.removeEventListener('scroll',this._boundScrollHandler),this._boundScrollHandler=null)},toggleScrollListener:function(a){this._shouldHaveListener=a,this._toggleScrollListener(a,this.scrollTarget)}};</script><script>Polymer.AppLayout=Polymer.AppLayout||{},Polymer.AppLayout._scrollEffects=Polymer.AppLayout._scrollEffects||{},Polymer.AppLayout.scrollTimingFunction=function(a,e,b,f){return a/=f,-b*a*(a-2)+e},Polymer.AppLayout.registerEffect=function(a,b){if(null!=Polymer.AppLayout._scrollEffects[a])throw new Error('effect `'+a+'` is already registered.');Polymer.AppLayout._scrollEffects[a]=b},Polymer.AppLayout.queryAllRoot=function(a,b){for(var c=[b],d=[];0<c.length;){var e=c.shift();for(d.push.apply(d,e.querySelectorAll(a)),i=0;e.children[i];i++)e.children[i].shadowRoot&&c.push(e.children[i].shadowRoot)}return d},Polymer.AppLayout.scroll=function(a){a=a||{};var b=document.documentElement,c=a.target||b,d='scrollBehavior'in c.style&&c.scroll,e=a.top||0,f=a.left||0,g=c===b?window.scrollTo:function(a,b){c.scrollLeft=a,c.scrollTop=b};if('smooth'===a.behavior){if(d)c.scroll(a);else{var h=Polymer.AppLayout.scrollTimingFunction,j=Date.now(),k=c===b?window.pageYOffset:c.scrollTop,l=c===b?window.pageXOffset:c.scrollLeft,m=300,n=function a(){var b=Date.now(),c=b-j;c<m?(g(h(c,l,f-l,m),h(c,k,e-k,m)),requestAnimationFrame(a)):g(f,e)}.bind(this);n()}}else if('silent'===a.behavior){var o=Polymer.AppLayout.queryAllRoot('app-header',document.body);o.forEach(function(a){a.setAttribute('silent-scroll','')}),window.cancelAnimationFrame(Polymer.AppLayout._scrollTimer),Polymer.AppLayout._scrollTimer=window.requestAnimationFrame(function(){o.forEach(function(a){a.removeAttribute('silent-scroll')}),Polymer.AppLayout._scrollTimer=null}),g(f,e)}else g(f,e)};</script><script>Polymer.AppScrollEffectsBehavior=[Polymer.IronScrollTargetBehavior,{properties:{effects:{type:String},effectsConfig:{type:Object,value:function(){return{}}},disabled:{type:Boolean,reflectToAttribute:!0,value:!1},threshold:{type:Number,value:0},thresholdTriggered:{type:Boolean,notify:!0,readOnly:!0,reflectToAttribute:!0}},observers:['_effectsChanged(effects, effectsConfig, isAttached)'],_updateScrollState:function(){},isOnScreen:function(){return!1},isContentBelow:function(){return!1},_effectsRunFn:null,_effects:null,get _clampedScrollTop(){return Math.max(0,this._scrollTop)},detached:function(){this._tearDownEffects()},createEffect:function(a,b){var c=Polymer.AppLayout._scrollEffects[a];if(!c)throw new ReferenceError(this._getUndefinedMsg(a));var d=this._boundEffect(c,b||{});return d.setUp(),d},_effectsChanged:function(a,b,c){this._tearDownEffects();a&&c&&(a.split(' ').forEach(function(a){var c;''!==a&&((c=Polymer.AppLayout._scrollEffects[a])?this._effects.push(this._boundEffect(c,b[a])):console.warn(this._getUndefinedMsg(a)))},this),this._setUpEffect())},_layoutIfDirty:function(){return this.offsetWidth},_boundEffect:function(a,b){b=b||{};var c=parseFloat(b.startsAt||0),d=parseFloat(b.endsAt||1),e=function(){},f=0===c&&1===d?a.run:function(b,e){a.run.call(this,Math.max(0,(b-c)/(d-c)),e)};return{setUp:a.setUp?a.setUp.bind(this,b):e,run:a.run?f.bind(this):e,tearDown:a.tearDown?a.tearDown.bind(this):e}},_setUpEffect:function(){this.isAttached&&this._effects&&(this._effectsRunFn=[],this._effects.forEach(function(a){!1!==a.setUp()&&this._effectsRunFn.push(a.run)},this))},_tearDownEffects:function(){this._effects&&this._effects.forEach(function(a){a.tearDown()}),this._effectsRunFn=[],this._effects=[]},_runEffects:function(a,b){this._effectsRunFn&&this._effectsRunFn.forEach(function(c){c(a,b)})},_scrollHandler:function(){if(!this.disabled){var a=this._clampedScrollTop;this._updateScrollState(a),0<this.threshold&&this._setThresholdTriggered(a>=this.threshold)}},_getDOMRef:function(a){console.warn('_getDOMRef','`'+a+'` is undefined')},_getUndefinedMsg:function(a){return'Scroll effect `'+a+'` is undefined. Did you forget to import app-layout/app-scroll-effects/effects/'+a+'.html ?'}}];</script><script>Polymer.AppLayoutBehavior=[Polymer.IronResizableBehavior,{listeners:{"app-reset-layout":'_appResetLayoutHandler',"iron-resize":'resetLayout'},attached:function(){this.fire('app-reset-layout')},_appResetLayoutHandler:function(a){Polymer.dom(a).path[0]===this||(this.resetLayout(),a.stopPropagation())},_updateLayoutStates:function(){console.error('unimplemented')},resetLayout:function(){var a=this,b=this._updateLayoutStates.bind(this);Polymer.Async&&Polymer.Async.animationFrame?(this._layoutDebouncer=Polymer.Debouncer.debounce(this._layoutDebouncer,Polymer.Async.animationFrame,b),Polymer.enqueueDebouncer(this._layoutDebouncer)):this.debounce('resetLayout',b),this._notifyDescendantResize()},_notifyLayoutChanged:function(){var a=this;requestAnimationFrame(function(){a.fire('app-reset-layout')})},_notifyDescendantResize:function(){this.isAttached&&this._interestedResizables.forEach(function(a){this.resizerShouldNotify(a)&&this._notifyDescendant(a)},this)}}];</script><dom-module id="app-header" assetpath="../bower_components/app-layout/app-header/"><template><style>:host{position:relative;display:block;transition-timing-function:linear;transition-property:-webkit-transform;transition-property:transform;}:host::before{position:absolute;right:0px;bottom:-5px;left:0px;width:100%;height:5px;content:"";transition:opacity 0.4s;pointer-events:none;opacity:0;box-shadow:inset 0px 5px 6px -3px rgba(0, 0, 0, 0.4);will-change:opacity;@apply --app-header-shadow;}:host([shadow])::before{opacity:1;}#background{@apply --layout-fit;overflow:hidden;}#backgroundFrontLayer,
      #backgroundRearLayer{@apply --layout-fit;height:100%;pointer-events:none;background-size:cover;}#backgroundFrontLayer{@apply --app-header-background-front-layer;}#backgroundRearLayer{opacity:0;@apply --app-header-background-rear-layer;}#contentContainer{position:relative;width:100%;height:100%;}:host([disabled]),
      :host([disabled])::after,
      :host([disabled]) #backgroundFrontLayer,
      :host([disabled]) #backgroundRearLayer,
      /* Silent scrolling should not run CSS transitions */
      :host([silent-scroll]),
      :host([silent-scroll])::after,
      :host([silent-scroll]) #backgroundFrontLayer,
      :host([silent-scroll]) #backgroundRearLayer{transition:none !important;}:host([disabled]) ::slotted(app-toolbar:first-of-type),
      :host([disabled]) ::slotted([sticky]),
      /* Silent scrolling should not run CSS transitions */
      :host([silent-scroll]) ::slotted(app-toolbar:first-of-type),
      :host([silent-scroll]) ::slotted([sticky]){transition:none !important;}</style><div id="contentContainer"><slot id="slot"></slot></div></template><script>Polymer({is:'app-header',behaviors:[Polymer.AppScrollEffectsBehavior,Polymer.AppLayoutBehavior],properties:{condenses:{type:Boolean,value:!1},fixed:{type:Boolean,value:!1},reveals:{type:Boolean,value:!1},shadow:{type:Boolean,reflectToAttribute:!0,value:!1}},observers:['_configChanged(isAttached, condenses, fixed)'],_height:0,_dHeight:0,_stickyElTop:0,_stickyElRef:null,_top:0,_progress:0,_wasScrollingDown:!1,_initScrollTop:0,_initTimestamp:0,_lastTimestamp:0,_lastScrollTop:0,get _maxHeaderTop(){return this.fixed?this._dHeight:this._height+5},get _stickyEl(){if(this._stickyElRef)return this._stickyElRef;for(var a,b=Polymer.dom(this.$.slot).getDistributedNodes(),c=0;a=b[c];c++)if(a.nodeType===Node.ELEMENT_NODE)if(a.hasAttribute('sticky')){this._stickyElRef=a;break}else this._stickyElRef||(this._stickyElRef=a);return this._stickyElRef},_configChanged:function(){this.resetLayout(),this._notifyLayoutChanged()},_updateLayoutStates:function(){if(0!==this.offsetWidth||0!==this.offsetHeight){var a=this._clampedScrollTop,b=0===this._height||0===a,c=this.disabled;this._height=this.offsetHeight,this._stickyElRef=null,this.disabled=!0,b||this._updateScrollState(0,!0),this._dHeight=this._mayMove()?this._stickyEl?this._height-this._stickyEl.offsetHeight:0:0,this._stickyElTop=this._stickyEl?this._stickyEl.offsetTop:0,this._setUpEffect(),b?this._updateScrollState(a,!0):(this._updateScrollState(this._lastScrollTop,!0),this._layoutIfDirty()),this.disabled=c}},_updateScrollState:function(a,b){var c=Math.abs;if(0!==this._height){var d=0,e=0,f=this._top,g=this._lastScrollTop,h=this._maxHeaderTop,i=a-this._lastScrollTop,j=c(i),k=a>this._lastScrollTop,l=performance.now();if(this._mayMove()&&(e=this._clamp(this.reveals?f+i:a,0,h)),a>=this._dHeight&&(e=this.condenses&&!this.fixed?Math.max(this._dHeight,e):e,this.style.transitionDuration='0ms'),this.reveals&&!this.disabled&&100>j&&((300<l-this._initTimestamp||this._wasScrollingDown!==k)&&(this._initScrollTop=a,this._initTimestamp=l),a>=h))if(30<c(this._initScrollTop-a)||10<j){k&&a>=h?e=h:!k&&a>=this._dHeight&&(e=this.condenses&&!this.fixed?this._dHeight:0);var m=i/(l-this._lastTimestamp);this.style.transitionDuration=this._clamp((e-f)/m,0,300)+'ms'}else e=this._top;d=0===this._dHeight?0<a?1:0:e/this._dHeight,b||(this._lastScrollTop=a,this._top=e,this._wasScrollingDown=k,this._lastTimestamp=l),(b||d!==this._progress||f!==e||0===a)&&(this._progress=d,this._runEffects(d,e),this._transformHeader(e))}},_mayMove:function(){return this.condenses||!this.fixed},willCondense:function(){return 0<this._dHeight&&this.condenses},isOnScreen:function(){return 0!==this._height&&this._top<this._height},isContentBelow:function(){return 0===this._top?0<this._clampedScrollTop:0<=this._clampedScrollTop-this._maxHeaderTop},_transformHeader:function(a){this.translate3d(0,-a+'px',0),this._stickyEl&&this.translate3d(0,this.condenses&&a>=this._stickyElTop?Math.min(a,this._dHeight)-this._stickyElTop+'px':0,0,this._stickyEl)},_clamp:function(a,b,c){return Math.min(c,Math.max(b,a))},_ensureBgContainers:function(){this._bgContainer||(this._bgContainer=document.createElement('div'),this._bgContainer.id='background',this._bgRear=document.createElement('div'),this._bgRear.id='backgroundRearLayer',this._bgContainer.appendChild(this._bgRear),this._bgFront=document.createElement('div'),this._bgFront.id='backgroundFrontLayer',this._bgContainer.appendChild(this._bgFront),Polymer.dom(this.root).insertBefore(this._bgContainer,this.$.contentContainer))},_getDOMRef:function(a){return'backgroundFrontLayer'===a?(this._ensureBgContainers(),this._bgFront):'backgroundRearLayer'===a?(this._ensureBgContainers(),this._bgRear):'background'===a?(this._ensureBgContainers(),this._bgContainer):'mainTitle'===a?Polymer.dom(this).querySelector('[main-title]'):'condensedTitle'===a?Polymer.dom(this).querySelector('[condensed-title]'):null},getScrollState:function(){return{progress:this._progress,top:this._top}}});</script></dom-module><dom-module id="app-header-layout" assetpath="../bower_components/app-layout/app-header-layout/"><template><style>:host{display:block;position:relative;z-index:0;}#wrapper ::slotted([slot=header]){@apply --layout-fixed-top;z-index:1;}#wrapper.initializing ::slotted([slot=header]){position:relative;}:host([has-scrolling-region]){height:100%;}:host([has-scrolling-region]) #wrapper ::slotted([slot=header]){position:absolute;}:host([has-scrolling-region]) #wrapper.initializing ::slotted([slot=header]){position:relative;}:host([has-scrolling-region]) #wrapper #contentContainer{@apply --layout-fit;overflow-y:auto;-webkit-overflow-scrolling:touch;}:host([has-scrolling-region]) #wrapper.initializing #contentContainer{position:relative;}:host([fullbleed]){@apply --layout-vertical;@apply --layout-fit;}:host([fullbleed]) #wrapper,
      :host([fullbleed]) #wrapper #contentContainer{@apply --layout-vertical;@apply --layout-flex;}#contentContainer{position:relative;z-index:0;}</style><div id="wrapper" class="initializing"><slot id="headerSlot" name="header"></slot><div id="contentContainer"><slot></slot></div></div></template><script>Polymer({is:'app-header-layout',behaviors:[Polymer.AppLayoutBehavior],properties:{hasScrollingRegion:{type:Boolean,value:!1,reflectToAttribute:!0}},observers:['resetLayout(isAttached, hasScrollingRegion)'],get header(){return Polymer.dom(this.$.headerSlot).getDistributedNodes()[0]},_updateLayoutStates:function(){var a=this.header;if(this.isAttached&&a){this.$.wrapper.classList.remove('initializing'),a.scrollTarget=this.hasScrollingRegion?this.$.contentContainer:this.ownerDocument.documentElement;var b=a.offsetHeight;this.hasScrollingRegion?(a.style.left='',a.style.right=''):requestAnimationFrame(function(){var b=this.getBoundingClientRect(),c=document.documentElement.clientWidth-b.right;a.style.left=b.left+'px',a.style.right=c+'px'}.bind(this));var c=this.$.contentContainer.style;a.fixed&&!a.condenses&&this.hasScrollingRegion?(c.marginTop=b+'px',c.paddingTop=''):(c.paddingTop=b+'px',c.marginTop='')}}});</script></dom-module><dom-module id="app-toolbar" assetpath="../bower_components/app-layout/app-toolbar/"><template><style>:host{@apply --layout-horizontal;@apply --layout-center;position:relative;height:64px;padding:0 16px;pointer-events:none;font-size:var(--app-toolbar-font-size, 20px);}:host ::slotted(*){pointer-events:auto;}:host ::slotted(paper-icon-button){font-size:0;}:host ::slotted([main-title]),
      :host ::slotted([condensed-title]){pointer-events:none;@apply --layout-flex;}:host ::slotted([bottom-item]){position:absolute;right:0;bottom:0;left:0;}:host ::slotted([top-item]){position:absolute;top:0;right:0;left:0;}:host ::slotted([spacer]){margin-left:64px;}</style><slot></slot></template><script>Polymer({is:'app-toolbar'});</script></dom-module><dom-module id="iron-icon" assetpath="../bower_components/iron-icon/"><template><style>:host{@apply --layout-inline;@apply --layout-center-center;position:relative;vertical-align:middle;fill:var(--iron-icon-fill-color, currentcolor);stroke:var(--iron-icon-stroke-color, none);width:var(--iron-icon-width, 24px);height:var(--iron-icon-height, 24px);@apply --iron-icon;}:host([hidden]){display:none;}</style></template><script>Polymer({is:'iron-icon',properties:{icon:{type:String},theme:{type:String},src:{type:String},_meta:{value:Polymer.Base.create('iron-meta',{type:'iconset'})}},observers:['_updateIcon(_meta, isAttached)','_updateIcon(theme, isAttached)','_srcChanged(src, isAttached)','_iconChanged(icon, isAttached)'],_DEFAULT_ICONSET:'icons',_iconChanged:function(a){var b=(a||'').split(':');this._iconName=b.pop(),this._iconsetName=b.pop()||this._DEFAULT_ICONSET,this._updateIcon()},_srcChanged:function(){this._updateIcon()},_usesIconset:function(){return this.icon||!this.src},_updateIcon:function(){this._usesIconset()?(this._img&&this._img.parentNode&&Polymer.dom(this.root).removeChild(this._img),''===this._iconName?this._iconset&&this._iconset.removeIcon(this):this._iconsetName&&this._meta&&(this._iconset=this._meta.byKey(this._iconsetName),this._iconset?(this._iconset.applyIcon(this,this._iconName,this.theme),this.unlisten(window,'iron-iconset-added','_updateIcon')):this.listen(window,'iron-iconset-added','_updateIcon'))):(this._iconset&&this._iconset.removeIcon(this),!this._img&&(this._img=document.createElement('img'),this._img.style.width='100%',this._img.style.height='100%',this._img.draggable=!1),this._img.src=this.src,Polymer.dom(this.root).appendChild(this._img))}});</script></dom-module><script>(function(){'use strict';function a(a,b){var c='';if(a){var d=a.toLowerCase();' '===d||o.test(d)?c='space':p.test(d)?c='esc':1==d.length?(!b||l.test(d))&&(c=d):n.test(d)?c=d.replace('arrow',''):'multiply'==d?c='*':c=d}return c}function b(a){var b='';return a&&(a in i?b=i[a]:m.test(a)?(a=parseInt(a.replace('U+','0x'),16),b=h(a).toLowerCase()):b=a.toLowerCase()),b}function c(a){var b='';return+a&&(65<=a&&90>=a?b=h(32+a):112<=a&&123>=a?b='f'+(a-112+1):48<=a&&57>=a?b=a-48+'':96<=a&&105>=a?b=a-96+'':b=j[a]),b}function d(d,e){return d.key?a(d.key,e):d.detail&&d.detail.key?a(d.detail.key,e):b(d.keyIdentifier)||c(d.keyCode)||''}function e(a,b){var c=d(b,a.hasModifiers);return c===a.key&&(!a.hasModifiers||!!b.shiftKey===!!a.shiftKey&&!!b.ctrlKey===!!a.ctrlKey&&!!b.altKey===!!a.altKey&&!!b.metaKey===!!a.metaKey)}function f(a){return 1===a.length?{combo:a,key:a,event:'keydown'}:a.split('+').reduce(function(a,b){var c=b.split(':'),d=c[0],e=c[1];return d in k?(a[k[d]]=!0,a.hasModifiers=!0):(a.key=d,a.event=e||'keydown'),a},{combo:a.split(':').shift()})}function g(a){return a.trim().split(' ').map(function(a){return f(a)})}var h=String.fromCharCode,i={"U+0008":'backspace',"U+0009":'tab',"U+001B":'esc',"U+0020":'space',"U+007F":'del'},j={8:'backspace',9:'tab',13:'enter',27:'esc',32:'space',33:'pageup',34:'pagedown',35:'end',36:'home',37:'left',38:'up',39:'right',40:'down',46:'del',106:'*'},k={shift:'shiftKey',ctrl:'ctrlKey',alt:'altKey',meta:'metaKey'},l=/[a-z0-9*]/,m=/U\+/,n=/^arrow/,o=/^space(bar)?/,p=/^escape$/;Polymer.IronA11yKeysBehavior={properties:{keyEventTarget:{type:Object,value:function(){return this}},stopKeyboardEventPropagation:{type:Boolean,value:!1},_boundKeyHandlers:{type:Array,value:function(){return[]}},_imperativeKeyBindings:{type:Object,value:function(){return{}}}},observers:['_resetKeyEventListeners(keyEventTarget, _boundKeyHandlers)'],keyBindings:{},registered:function(){this._prepKeyBindings()},attached:function(){this._listenKeyEventListeners()},detached:function(){this._unlistenKeyEventListeners()},addOwnKeyBinding:function(a,b){this._imperativeKeyBindings[a]=b,this._prepKeyBindings(),this._resetKeyEventListeners()},removeOwnKeyBindings:function(){this._imperativeKeyBindings={},this._prepKeyBindings(),this._resetKeyEventListeners()},keyboardEventMatchesKeys:function(a,b){for(var c=g(b),d=0;d<c.length;++d)if(e(c[d],a))return!0;return!1},_collectKeyBindings:function(){var a=this.behaviors.map(function(a){return a.keyBindings});return-1===a.indexOf(this.keyBindings)&&a.push(this.keyBindings),a},_prepKeyBindings:function(){for(var a in this._keyBindings={},this._collectKeyBindings().forEach(function(a){for(var b in a)this._addKeyBinding(b,a[b])},this),this._imperativeKeyBindings)this._addKeyBinding(a,this._imperativeKeyBindings[a]);for(var b in this._keyBindings)this._keyBindings[b].sort(function(a,b){var c=a[0].hasModifiers,d=b[0].hasModifiers;return c===d?0:c?-1:1})},_addKeyBinding:function(a,b){g(a).forEach(function(a){this._keyBindings[a.event]=this._keyBindings[a.event]||[],this._keyBindings[a.event].push([a,b])},this)},_resetKeyEventListeners:function(){this._unlistenKeyEventListeners(),this.isAttached&&this._listenKeyEventListeners()},_listenKeyEventListeners:function(){this.keyEventTarget&&Object.keys(this._keyBindings).forEach(function(a){var b=this._keyBindings[a],c=this._onKeyBindingEvent.bind(this,b);this._boundKeyHandlers.push([this.keyEventTarget,a,c]),this.keyEventTarget.addEventListener(a,c)},this)},_unlistenKeyEventListeners:function(){for(var a,b,c,d;this._boundKeyHandlers.length;)a=this._boundKeyHandlers.pop(),b=a[0],c=a[1],d=a[2],b.removeEventListener(c,d)},_onKeyBindingEvent:function(a,b){if(this.stopKeyboardEventPropagation&&b.stopPropagation(),!b.defaultPrevented)for(var c=0;c<a.length;c++){var d=a[c][0],f=a[c][1];if(e(d,b)&&(this._triggerKeyHandler(d,f,b),b.defaultPrevented))return}},_triggerKeyHandler:function(a,b,c){var d=Object.create(a);d.keyboardEvent=c;var e=new CustomEvent(a.event,{detail:d,cancelable:!0});this[b].call(this,e),e.defaultPrevented&&c.preventDefault()}}})();</script><script>Polymer.IronControlState={properties:{focused:{type:Boolean,value:!1,notify:!0,readOnly:!0,reflectToAttribute:!0},disabled:{type:Boolean,value:!1,notify:!0,observer:'_disabledChanged',reflectToAttribute:!0},_oldTabIndex:{type:Number},_boundFocusBlurHandler:{type:Function,value:function(){return this._focusBlurHandler.bind(this)}},__handleEventRetargeting:{type:Boolean,value:function(){return!this.shadowRoot&&!Polymer.Element}}},observers:['_changedControlState(focused, disabled)'],ready:function(){this.addEventListener('focus',this._boundFocusBlurHandler,!0),this.addEventListener('blur',this._boundFocusBlurHandler,!0)},_focusBlurHandler:function(a){if(Polymer.Element)return void this._setFocused('focus'===a.type);if(a.target===this)this._setFocused('focus'===a.type);else if(this.__handleEventRetargeting){var b=Polymer.dom(a).localTarget;this.isLightDescendant(b)||this.fire(a.type,{sourceEvent:a},{node:this,bubbles:a.bubbles,cancelable:a.cancelable})}},_disabledChanged:function(a){this.setAttribute('aria-disabled',a?'true':'false'),this.style.pointerEvents=a?'none':'',a?(this._oldTabIndex=this.tabIndex,this._setFocused(!1),this.tabIndex=-1,this.blur()):this._oldTabIndex!==void 0&&(this.tabIndex=this._oldTabIndex)},_changedControlState:function(){this._controlStateChanged&&this._controlStateChanged()}};</script><script>Polymer.IronButtonStateImpl={properties:{pressed:{type:Boolean,readOnly:!0,value:!1,reflectToAttribute:!0,observer:'_pressedChanged'},toggles:{type:Boolean,value:!1,reflectToAttribute:!0},active:{type:Boolean,value:!1,notify:!0,reflectToAttribute:!0},pointerDown:{type:Boolean,readOnly:!0,value:!1},receivedFocusFromKeyboard:{type:Boolean,readOnly:!0},ariaActiveAttribute:{type:String,value:'aria-pressed',observer:'_ariaActiveAttributeChanged'}},listeners:{down:'_downHandler',up:'_upHandler',tap:'_tapHandler'},observers:['_focusChanged(focused)','_activeChanged(active, ariaActiveAttribute)'],keyBindings:{"enter:keydown":'_asyncClick',"space:keydown":'_spaceKeyDownHandler',"space:keyup":'_spaceKeyUpHandler'},_mouseEventRe:/^mouse/,_tapHandler:function(){this.toggles?this._userActivate(!this.active):this.active=!1},_focusChanged:function(a){this._detectKeyboardFocus(a),a||this._setPressed(!1)},_detectKeyboardFocus:function(a){this._setReceivedFocusFromKeyboard(!this.pointerDown&&a)},_userActivate:function(a){this.active!==a&&(this.active=a,this.fire('change'))},_downHandler:function(){this._setPointerDown(!0),this._setPressed(!0),this._setReceivedFocusFromKeyboard(!1)},_upHandler:function(){this._setPointerDown(!1),this._setPressed(!1)},_spaceKeyDownHandler:function(a){var b=a.detail.keyboardEvent,c=Polymer.dom(b).localTarget;this.isLightDescendant(c)||(b.preventDefault(),b.stopImmediatePropagation(),this._setPressed(!0))},_spaceKeyUpHandler:function(a){var b=a.detail.keyboardEvent,c=Polymer.dom(b).localTarget;this.isLightDescendant(c)||(this.pressed&&this._asyncClick(),this._setPressed(!1))},_asyncClick:function(){this.async(function(){this.click()},1)},_pressedChanged:function(){this._changedButtonState()},_ariaActiveAttributeChanged:function(a,b){b&&b!=a&&this.hasAttribute(b)&&this.removeAttribute(b)},_activeChanged:function(a){this.toggles?this.setAttribute(this.ariaActiveAttribute,a?'true':'false'):this.removeAttribute(this.ariaActiveAttribute),this._changedButtonState()},_controlStateChanged:function(){this.disabled?this._setPressed(!1):this._changedButtonState()},_changedButtonState:function(){this._buttonStateChanged&&this._buttonStateChanged()}},Polymer.IronButtonState=[Polymer.IronA11yKeysBehavior,Polymer.IronButtonStateImpl];</script><dom-module id="paper-ripple" assetpath="../bower_components/paper-ripple/"><template><style>:host{display:block;position:absolute;border-radius:inherit;overflow:hidden;top:0;left:0;right:0;bottom:0;pointer-events:none;}:host([animating]){-webkit-transform:translate(0, 0);transform:translate3d(0, 0, 0);}#background,
      #waves,
      .wave-container,
      .wave{pointer-events:none;position:absolute;top:0;left:0;width:100%;height:100%;}#background,
      .wave{opacity:0;}#waves,
      .wave{overflow:hidden;}.wave-container,
      .wave{border-radius:50%;}:host(.circle) #background,
      :host(.circle) #waves{border-radius:50%;}:host(.circle) .wave-container{overflow:hidden;}</style><div id="background"></div><div id="waves"></div></template></dom-module><script>(function(){'use strict';function a(a){this.element=a,this.width=this.boundingRect.width,this.height=this.boundingRect.height,this.size=d(this.width,this.height)}function b(a){this.element=a,this.color=window.getComputedStyle(a).color,this.wave=document.createElement('div'),this.waveContainer=document.createElement('div'),this.wave.style.backgroundColor=this.color,this.wave.classList.add('wave'),this.waveContainer.classList.add('wave-container'),Polymer.dom(this.waveContainer).appendChild(this.wave),this.resetInteractionState()}var c=Math.min,d=Math.max,e=Math.sqrt,f={distance:function(a,b,c,d){var f=a-c,g=b-d;return e(f*f+g*g)},now:window.performance&&window.performance.now?window.performance.now.bind(window.performance):Date.now};a.prototype={get boundingRect(){return this.element.getBoundingClientRect()},furthestCornerDistanceFrom:function(a,b){var c=f.distance(a,b,0,0),e=f.distance(a,b,this.width,0),g=f.distance(a,b,0,this.height),h=f.distance(a,b,this.width,this.height);return d(c,e,g,h)}},b.MAX_RADIUS=300,b.prototype={get recenters(){return this.element.recenters},get center(){return this.element.center},get mouseDownElapsed(){var a;return this.mouseDownStart?(a=f.now()-this.mouseDownStart,this.mouseUpStart&&(a-=this.mouseUpElapsed),a):0},get mouseUpElapsed(){return this.mouseUpStart?f.now()-this.mouseUpStart:0},get mouseDownElapsedSeconds(){return this.mouseDownElapsed/1e3},get mouseUpElapsedSeconds(){return this.mouseUpElapsed/1e3},get mouseInteractionSeconds(){return this.mouseDownElapsedSeconds+this.mouseUpElapsedSeconds},get initialOpacity(){return this.element.initialOpacity},get opacityDecayVelocity(){return this.element.opacityDecayVelocity},get radius(){var a=this.containerMetrics.width*this.containerMetrics.width,d=this.containerMetrics.height*this.containerMetrics.height,f=1.1*c(e(a+d),b.MAX_RADIUS)+5,g=1.1-0.2*(f/b.MAX_RADIUS),h=this.mouseInteractionSeconds/g,i=f*(1-Math.pow(80,-h));return Math.abs(i)},get opacity(){return this.mouseUpStart?d(0,this.initialOpacity-this.mouseUpElapsedSeconds*this.opacityDecayVelocity):this.initialOpacity},get outerOpacity(){var a=0.3*this.mouseUpElapsedSeconds,b=this.opacity;return d(0,c(a,b))},get isOpacityFullyDecayed(){return 0.01>this.opacity&&this.radius>=c(this.maxRadius,b.MAX_RADIUS)},get isRestingAtMaxRadius(){return this.opacity>=this.initialOpacity&&this.radius>=c(this.maxRadius,b.MAX_RADIUS)},get isAnimationComplete(){return this.mouseUpStart?this.isOpacityFullyDecayed:this.isRestingAtMaxRadius},get translationFraction(){return c(1,2*(this.radius/this.containerMetrics.size)/1.4142135623730951)},get xNow(){return this.xEnd?this.xStart+this.translationFraction*(this.xEnd-this.xStart):this.xStart},get yNow(){return this.yEnd?this.yStart+this.translationFraction*(this.yEnd-this.yStart):this.yStart},get isMouseDown(){return this.mouseDownStart&&!this.mouseUpStart},resetInteractionState:function(){this.maxRadius=0,this.mouseDownStart=0,this.mouseUpStart=0,this.xStart=0,this.yStart=0,this.xEnd=0,this.yEnd=0,this.slideDistance=0,this.containerMetrics=new a(this.element)},draw:function(){var a,b,c;this.wave.style.opacity=this.opacity,a=this.radius/(this.containerMetrics.size/2),b=this.xNow-this.containerMetrics.width/2,c=this.yNow-this.containerMetrics.height/2,this.waveContainer.style.webkitTransform='translate('+b+'px, '+c+'px)',this.waveContainer.style.transform='translate3d('+b+'px, '+c+'px, 0)',this.wave.style.webkitTransform='scale('+a+','+a+')',this.wave.style.transform='scale3d('+a+','+a+',1)'},downAction:function(a){var b=this.containerMetrics.width/2,c=this.containerMetrics.height/2;this.resetInteractionState(),this.mouseDownStart=f.now(),this.center?(this.xStart=b,this.yStart=c,this.slideDistance=f.distance(this.xStart,this.yStart,this.xEnd,this.yEnd)):(this.xStart=a?a.detail.x-this.containerMetrics.boundingRect.left:this.containerMetrics.width/2,this.yStart=a?a.detail.y-this.containerMetrics.boundingRect.top:this.containerMetrics.height/2),this.recenters&&(this.xEnd=b,this.yEnd=c,this.slideDistance=f.distance(this.xStart,this.yStart,this.xEnd,this.yEnd)),this.maxRadius=this.containerMetrics.furthestCornerDistanceFrom(this.xStart,this.yStart),this.waveContainer.style.top=(this.containerMetrics.height-this.containerMetrics.size)/2+'px',this.waveContainer.style.left=(this.containerMetrics.width-this.containerMetrics.size)/2+'px',this.waveContainer.style.width=this.containerMetrics.size+'px',this.waveContainer.style.height=this.containerMetrics.size+'px'},upAction:function(){this.isMouseDown&&(this.mouseUpStart=f.now())},remove:function(){Polymer.dom(this.waveContainer.parentNode).removeChild(this.waveContainer)}},Polymer({is:'paper-ripple',behaviors:[Polymer.IronA11yKeysBehavior],properties:{initialOpacity:{type:Number,value:0.25},opacityDecayVelocity:{type:Number,value:0.8},recenters:{type:Boolean,value:!1},center:{type:Boolean,value:!1},ripples:{type:Array,value:function(){return[]}},animating:{type:Boolean,readOnly:!0,reflectToAttribute:!0,value:!1},holdDown:{type:Boolean,value:!1,observer:'_holdDownChanged'},noink:{type:Boolean,value:!1},_animating:{type:Boolean},_boundAnimate:{type:Function,value:function(){return this.animate.bind(this)}}},get target(){return this.keyEventTarget},keyBindings:{"enter:keydown":'_onEnterKeydown',"space:keydown":'_onSpaceKeydown',"space:keyup":'_onSpaceKeyup'},attached:function(){this.keyEventTarget=11==this.parentNode.nodeType?Polymer.dom(this).getOwnerRoot().host:this.parentNode;var a=this.keyEventTarget;this.listen(a,'up','uiUpAction'),this.listen(a,'down','uiDownAction')},detached:function(){this.unlisten(this.keyEventTarget,'up','uiUpAction'),this.unlisten(this.keyEventTarget,'down','uiDownAction'),this.keyEventTarget=null},get shouldKeepAnimating(){for(var a=0;a<this.ripples.length;++a)if(!this.ripples[a].isAnimationComplete)return!0;return!1},simulatedRipple:function(){this.downAction(null),this.async(function(){this.upAction()},1)},uiDownAction:function(a){this.noink||this.downAction(a)},downAction:function(a){if(!(this.holdDown&&0<this.ripples.length)){var b=this.addRipple();b.downAction(a),this._animating||(this._animating=!0,this.animate())}},uiUpAction:function(a){this.noink||this.upAction(a)},upAction:function(a){this.holdDown||(this.ripples.forEach(function(b){b.upAction(a)}),this._animating=!0,this.animate())},onAnimationComplete:function(){this._animating=!1,this.$.background.style.backgroundColor=null,this.fire('transitionend')},addRipple:function(){var a=new b(this);return Polymer.dom(this.$.waves).appendChild(a.waveContainer),this.$.background.style.backgroundColor=a.color,this.ripples.push(a),this._setAnimating(!0),a},removeRipple:function(a){var b=this.ripples.indexOf(a);0>b||(this.ripples.splice(b,1),a.remove(),!this.ripples.length&&this._setAnimating(!1))},animate:function(){if(this._animating){var a,b;for(a=0;a<this.ripples.length;++a)b=this.ripples[a],b.draw(),this.$.background.style.opacity=b.outerOpacity,b.isOpacityFullyDecayed&&!b.isRestingAtMaxRadius&&this.removeRipple(b);this.shouldKeepAnimating||0!==this.ripples.length?window.requestAnimationFrame(this._boundAnimate):this.onAnimationComplete()}},_onEnterKeydown:function(){this.uiDownAction(),this.async(this.uiUpAction,1)},_onSpaceKeydown:function(){this.uiDownAction()},_onSpaceKeyup:function(){this.uiUpAction()},_holdDownChanged:function(a,b){void 0===b||(a?this.downAction():this.upAction())}})})();</script><script>Polymer.PaperRippleBehavior={properties:{noink:{type:Boolean,observer:'_noinkChanged'},_rippleContainer:{type:Object}},_buttonStateChanged:function(){this.focused&&this.ensureRipple()},_downHandler:function(a){Polymer.IronButtonStateImpl._downHandler.call(this,a),this.pressed&&this.ensureRipple(a)},ensureRipple:function(a){if(!this.hasRipple()){this._ripple=this._createRipple(),this._ripple.noink=this.noink;var b=this._rippleContainer||this.root;if(b&&Polymer.dom(b).appendChild(this._ripple),a){var c=Polymer.dom(this._rippleContainer||this),d=Polymer.dom(a).rootTarget;c.deepContains(d)&&this._ripple.uiDownAction(a)}}},getRipple:function(){return this.ensureRipple(),this._ripple},hasRipple:function(){return!!this._ripple},_createRipple:function(){var a=document.createElement('paper-ripple');return a},_noinkChanged:function(a){this.hasRipple()&&(this._ripple.noink=a)}};</script><script>Polymer.PaperButtonBehaviorImpl={properties:{elevation:{type:Number,reflectToAttribute:!0,readOnly:!0}},observers:['_calculateElevation(focused, disabled, active, pressed, receivedFocusFromKeyboard)','_computeKeyboardClass(receivedFocusFromKeyboard)'],hostAttributes:{role:'button',tabindex:'0',animated:!0},_calculateElevation:function(){var a=1;this.disabled?a=0:this.active||this.pressed?a=4:this.receivedFocusFromKeyboard&&(a=3),this._setElevation(a)},_computeKeyboardClass:function(a){this.toggleClass('keyboard-focus',a)},_spaceKeyDownHandler:function(a){Polymer.IronButtonStateImpl._spaceKeyDownHandler.call(this,a),this.hasRipple()&&1>this.getRipple().ripples.length&&this._ripple.uiDownAction()},_spaceKeyUpHandler:function(a){Polymer.IronButtonStateImpl._spaceKeyUpHandler.call(this,a),this.hasRipple()&&this._ripple.uiUpAction()}},Polymer.PaperButtonBehavior=[Polymer.IronButtonState,Polymer.IronControlState,Polymer.PaperRippleBehavior,Polymer.PaperButtonBehaviorImpl];</script><custom-style><style is="custom-style">html{--shadow-transition:{transition:box-shadow 0.28s cubic-bezier(0.4, 0, 0.2, 1);};--shadow-none:{box-shadow:none;};--shadow-elevation-2dp:{box-shadow:0 2px 2px 0 rgba(0, 0, 0, 0.14),
                    0 1px 5px 0 rgba(0, 0, 0, 0.12),
                    0 3px 1px -2px rgba(0, 0, 0, 0.2);};--shadow-elevation-3dp:{box-shadow:0 3px 4px 0 rgba(0, 0, 0, 0.14),
                    0 1px 8px 0 rgba(0, 0, 0, 0.12),
                    0 3px 3px -2px rgba(0, 0, 0, 0.4);};--shadow-elevation-4dp:{box-shadow:0 4px 5px 0 rgba(0, 0, 0, 0.14),
                    0 1px 10px 0 rgba(0, 0, 0, 0.12),
                    0 2px 4px -1px rgba(0, 0, 0, 0.4);};--shadow-elevation-6dp:{box-shadow:0 6px 10px 0 rgba(0, 0, 0, 0.14),
                    0 1px 18px 0 rgba(0, 0, 0, 0.12),
                    0 3px 5px -1px rgba(0, 0, 0, 0.4);};--shadow-elevation-8dp:{box-shadow:0 8px 10px 1px rgba(0, 0, 0, 0.14),
                    0 3px 14px 2px rgba(0, 0, 0, 0.12),
                    0 5px 5px -3px rgba(0, 0, 0, 0.4);};--shadow-elevation-12dp:{box-shadow:0 12px 16px 1px rgba(0, 0, 0, 0.14),
                    0 4px 22px 3px rgba(0, 0, 0, 0.12),
                    0 6px 7px -4px rgba(0, 0, 0, 0.4);};--shadow-elevation-16dp:{box-shadow:0 16px 24px 2px rgba(0, 0, 0, 0.14),
                    0  6px 30px 5px rgba(0, 0, 0, 0.12),
                    0  8px 10px -5px rgba(0, 0, 0, 0.4);};--shadow-elevation-24dp:{box-shadow:0 24px 38px 3px rgba(0, 0, 0, 0.14),
                    0 9px 46px 8px rgba(0, 0, 0, 0.12),
                    0 11px 15px -7px rgba(0, 0, 0, 0.4);};}</style></custom-style><dom-module id="paper-material-styles" assetpath="../bower_components/paper-styles/element-styles/"><template><style>:host, html{--paper-material:{display:block;position:relative;};--paper-material-elevation-1:{@apply --shadow-elevation-2dp;};--paper-material-elevation-2:{@apply --shadow-elevation-4dp;};--paper-material-elevation-3:{@apply --shadow-elevation-6dp;};--paper-material-elevation-4:{@apply --shadow-elevation-8dp;};--paper-material-elevation-5:{@apply --shadow-elevation-16dp;};}:host(.paper-material), .paper-material{@apply --paper-material;}:host(.paper-material[elevation="1"]), .paper-material[elevation="1"]{@apply --paper-material-elevation-1;}:host(.paper-material[elevation="2"]), .paper-material[elevation="2"]{@apply --paper-material-elevation-2;}:host(.paper-material[elevation="3"]), .paper-material[elevation="3"]{@apply --paper-material-elevation-3;}:host(.paper-material[elevation="4"]), .paper-material[elevation="4"]{@apply --paper-material-elevation-4;}:host(.paper-material[elevation="5"]), .paper-material[elevation="5"]{@apply --paper-material-elevation-5;}</style></template></dom-module><dom-module id="paper-button" assetpath="../bower_components/paper-button/"><template strip-whitespace=""><style include="paper-material-styles">:host{@apply --layout-inline;@apply --layout-center-center;position:relative;box-sizing:border-box;min-width:5.14em;margin:0 0.29em;background:transparent;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);-webkit-tap-highlight-color:transparent;font:inherit;text-transform:uppercase;outline-width:0;border-radius:3px;-moz-user-select:none;-ms-user-select:none;-webkit-user-select:none;user-select:none;cursor:pointer;z-index:0;padding:0.7em 0.57em;@apply --paper-font-common-base;@apply --paper-button;}:host([elevation="1"]){@apply --paper-material-elevation-1;}:host([elevation="2"]){@apply --paper-material-elevation-2;}:host([elevation="3"]){@apply --paper-material-elevation-3;}:host([elevation="4"]){@apply --paper-material-elevation-4;}:host([elevation="5"]){@apply --paper-material-elevation-5;}:host([hidden]){display:none !important;}:host([raised].keyboard-focus){font-weight:bold;@apply --paper-button-raised-keyboard-focus;}:host(:not([raised]).keyboard-focus){font-weight:bold;@apply --paper-button-flat-keyboard-focus;}:host([disabled]){background:#eaeaea;color:#a8a8a8;cursor:auto;pointer-events:none;@apply --paper-button-disabled;}:host([animated]){@apply --shadow-transition;}paper-ripple{color:var(--paper-button-ink-color);}</style><slot></slot></template><script>Polymer({is:'paper-button',behaviors:[Polymer.PaperButtonBehavior],properties:{raised:{type:Boolean,reflectToAttribute:!0,value:!1,observer:'_calculateElevation'}},_calculateElevation:function(){this.raised?Polymer.PaperButtonBehaviorImpl._calculateElevation.apply(this):this._setElevation(0)}});</script></dom-module><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,700|Roboto:400,300,300italic,400italic,500,500italic,700,700italic" crossorigin="anonymous"><custom-style><style is="custom-style">html{--paper-font-common-base:{font-family:'Roboto', 'Noto', sans-serif;-webkit-font-smoothing:antialiased;};--paper-font-common-code:{font-family:'Roboto Mono', 'Consolas', 'Menlo', monospace;-webkit-font-smoothing:antialiased;};--paper-font-common-expensive-kerning:{text-rendering:optimizeLegibility;};--paper-font-common-nowrap:{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;};--paper-font-display4:{@apply --paper-font-common-base;@apply --paper-font-common-nowrap;font-size:112px;font-weight:300;letter-spacing:-.044em;line-height:120px;};--paper-font-display3:{@apply --paper-font-common-base;@apply --paper-font-common-nowrap;font-size:56px;font-weight:400;letter-spacing:-.026em;line-height:60px;};--paper-font-display2:{@apply --paper-font-common-base;font-size:45px;font-weight:400;letter-spacing:-.018em;line-height:48px;};--paper-font-display1:{@apply --paper-font-common-base;font-size:34px;font-weight:400;letter-spacing:-.01em;line-height:40px;};--paper-font-headline:{@apply --paper-font-common-base;font-size:24px;font-weight:400;letter-spacing:-.012em;line-height:32px;};--paper-font-title:{@apply --paper-font-common-base;@apply --paper-font-common-nowrap;font-size:20px;font-weight:500;line-height:28px;};--paper-font-subhead:{@apply --paper-font-common-base;font-size:16px;font-weight:400;line-height:24px;};--paper-font-body2:{@apply --paper-font-common-base;font-size:14px;font-weight:500;line-height:24px;};--paper-font-body1:{@apply --paper-font-common-base;font-size:14px;font-weight:400;line-height:20px;};--paper-font-caption:{@apply --paper-font-common-base;@apply --paper-font-common-nowrap;font-size:12px;font-weight:400;letter-spacing:0.011em;line-height:20px;};--paper-font-menu:{@apply --paper-font-common-base;@apply --paper-font-common-nowrap;font-size:13px;font-weight:500;line-height:24px;};--paper-font-button:{@apply --paper-font-common-base;@apply --paper-font-common-nowrap;font-size:14px;font-weight:500;letter-spacing:0.018em;line-height:24px;text-transform:uppercase;};--paper-font-code2:{@apply --paper-font-common-code;font-size:14px;font-weight:700;line-height:20px;};--paper-font-code1:{@apply --paper-font-common-code;font-size:14px;font-weight:500;line-height:20px;};}</style></custom-style><custom-style><style is="custom-style">html{--google-red-100:#f4c7c3;--google-red-300:#e67c73;--google-red-500:#db4437;--google-red-700:#c53929;--google-blue-100:#c6dafc;--google-blue-300:#7baaf7;--google-blue-500:#4285f4;--google-blue-700:#3367d6;--google-green-100:#b7e1cd;--google-green-300:#57bb8a;--google-green-500:#0f9d58;--google-green-700:#0b8043;--google-yellow-100:#fce8b2;--google-yellow-300:#f7cb4d;--google-yellow-500:#f4b400;--google-yellow-700:#f09300;--google-grey-100:#f5f5f5;--google-grey-300:#e0e0e0;--google-grey-500:#9e9e9e;--google-grey-700:#616161;--paper-red-50:#ffebee;--paper-red-100:#ffcdd2;--paper-red-200:#ef9a9a;--paper-red-300:#e57373;--paper-red-400:#ef5350;--paper-red-500:#f44336;--paper-red-600:#e53935;--paper-red-700:#d32f2f;--paper-red-800:#c62828;--paper-red-900:#b71c1c;--paper-red-a100:#ff8a80;--paper-red-a200:#ff5252;--paper-red-a400:#ff1744;--paper-red-a700:#d50000;--paper-pink-50:#fce4ec;--paper-pink-100:#f8bbd0;--paper-pink-200:#f48fb1;--paper-pink-300:#f06292;--paper-pink-400:#ec407a;--paper-pink-500:#e91e63;--paper-pink-600:#d81b60;--paper-pink-700:#c2185b;--paper-pink-800:#ad1457;--paper-pink-900:#880e4f;--paper-pink-a100:#ff80ab;--paper-pink-a200:#ff4081;--paper-pink-a400:#f50057;--paper-pink-a700:#c51162;--paper-purple-50:#f3e5f5;--paper-purple-100:#e1bee7;--paper-purple-200:#ce93d8;--paper-purple-300:#ba68c8;--paper-purple-400:#ab47bc;--paper-purple-500:#9c27b0;--paper-purple-600:#8e24aa;--paper-purple-700:#7b1fa2;--paper-purple-800:#6a1b9a;--paper-purple-900:#4a148c;--paper-purple-a100:#ea80fc;--paper-purple-a200:#e040fb;--paper-purple-a400:#d500f9;--paper-purple-a700:#aa00ff;--paper-deep-purple-50:#ede7f6;--paper-deep-purple-100:#d1c4e9;--paper-deep-purple-200:#b39ddb;--paper-deep-purple-300:#9575cd;--paper-deep-purple-400:#7e57c2;--paper-deep-purple-500:#673ab7;--paper-deep-purple-600:#5e35b1;--paper-deep-purple-700:#512da8;--paper-deep-purple-800:#4527a0;--paper-deep-purple-900:#311b92;--paper-deep-purple-a100:#b388ff;--paper-deep-purple-a200:#7c4dff;--paper-deep-purple-a400:#651fff;--paper-deep-purple-a700:#6200ea;--paper-indigo-50:#e8eaf6;--paper-indigo-100:#c5cae9;--paper-indigo-200:#9fa8da;--paper-indigo-300:#7986cb;--paper-indigo-400:#5c6bc0;--paper-indigo-500:#3f51b5;--paper-indigo-600:#3949ab;--paper-indigo-700:#303f9f;--paper-indigo-800:#283593;--paper-indigo-900:#1a237e;--paper-indigo-a100:#8c9eff;--paper-indigo-a200:#536dfe;--paper-indigo-a400:#3d5afe;--paper-indigo-a700:#304ffe;--paper-blue-50:#e3f2fd;--paper-blue-100:#bbdefb;--paper-blue-200:#90caf9;--paper-blue-300:#64b5f6;--paper-blue-400:#42a5f5;--paper-blue-500:#2196f3;--paper-blue-600:#1e88e5;--paper-blue-700:#1976d2;--paper-blue-800:#1565c0;--paper-blue-900:#0d47a1;--paper-blue-a100:#82b1ff;--paper-blue-a200:#448aff;--paper-blue-a400:#2979ff;--paper-blue-a700:#2962ff;--paper-light-blue-50:#e1f5fe;--paper-light-blue-100:#b3e5fc;--paper-light-blue-200:#81d4fa;--paper-light-blue-300:#4fc3f7;--paper-light-blue-400:#29b6f6;--paper-light-blue-500:#03a9f4;--paper-light-blue-600:#039be5;--paper-light-blue-700:#0288d1;--paper-light-blue-800:#0277bd;--paper-light-blue-900:#01579b;--paper-light-blue-a100:#80d8ff;--paper-light-blue-a200:#40c4ff;--paper-light-blue-a400:#00b0ff;--paper-light-blue-a700:#0091ea;--paper-cyan-50:#e0f7fa;--paper-cyan-100:#b2ebf2;--paper-cyan-200:#80deea;--paper-cyan-300:#4dd0e1;--paper-cyan-400:#26c6da;--paper-cyan-500:#00bcd4;--paper-cyan-600:#00acc1;--paper-cyan-700:#0097a7;--paper-cyan-800:#00838f;--paper-cyan-900:#006064;--paper-cyan-a100:#84ffff;--paper-cyan-a200:#18ffff;--paper-cyan-a400:#00e5ff;--paper-cyan-a700:#00b8d4;--paper-teal-50:#e0f2f1;--paper-teal-100:#b2dfdb;--paper-teal-200:#80cbc4;--paper-teal-300:#4db6ac;--paper-teal-400:#26a69a;--paper-teal-500:#009688;--paper-teal-600:#00897b;--paper-teal-700:#00796b;--paper-teal-800:#00695c;--paper-teal-900:#004d40;--paper-teal-a100:#a7ffeb;--paper-teal-a200:#64ffda;--paper-teal-a400:#1de9b6;--paper-teal-a700:#00bfa5;--paper-green-50:#e8f5e9;--paper-green-100:#c8e6c9;--paper-green-200:#a5d6a7;--paper-green-300:#81c784;--paper-green-400:#66bb6a;--paper-green-500:#4caf50;--paper-green-600:#43a047;--paper-green-700:#388e3c;--paper-green-800:#2e7d32;--paper-green-900:#1b5e20;--paper-green-a100:#b9f6ca;--paper-green-a200:#69f0ae;--paper-green-a400:#00e676;--paper-green-a700:#00c853;--paper-light-green-50:#f1f8e9;--paper-light-green-100:#dcedc8;--paper-light-green-200:#c5e1a5;--paper-light-green-300:#aed581;--paper-light-green-400:#9ccc65;--paper-light-green-500:#8bc34a;--paper-light-green-600:#7cb342;--paper-light-green-700:#689f38;--paper-light-green-800:#558b2f;--paper-light-green-900:#33691e;--paper-light-green-a100:#ccff90;--paper-light-green-a200:#b2ff59;--paper-light-green-a400:#76ff03;--paper-light-green-a700:#64dd17;--paper-lime-50:#f9fbe7;--paper-lime-100:#f0f4c3;--paper-lime-200:#e6ee9c;--paper-lime-300:#dce775;--paper-lime-400:#d4e157;--paper-lime-500:#cddc39;--paper-lime-600:#c0ca33;--paper-lime-700:#afb42b;--paper-lime-800:#9e9d24;--paper-lime-900:#827717;--paper-lime-a100:#f4ff81;--paper-lime-a200:#eeff41;--paper-lime-a400:#c6ff00;--paper-lime-a700:#aeea00;--paper-yellow-50:#fffde7;--paper-yellow-100:#fff9c4;--paper-yellow-200:#fff59d;--paper-yellow-300:#fff176;--paper-yellow-400:#ffee58;--paper-yellow-500:#ffeb3b;--paper-yellow-600:#fdd835;--paper-yellow-700:#fbc02d;--paper-yellow-800:#f9a825;--paper-yellow-900:#f57f17;--paper-yellow-a100:#ffff8d;--paper-yellow-a200:#ffff00;--paper-yellow-a400:#ffea00;--paper-yellow-a700:#ffd600;--paper-amber-50:#fff8e1;--paper-amber-100:#ffecb3;--paper-amber-200:#ffe082;--paper-amber-300:#ffd54f;--paper-amber-400:#ffca28;--paper-amber-500:#ffc107;--paper-amber-600:#ffb300;--paper-amber-700:#ffa000;--paper-amber-800:#ff8f00;--paper-amber-900:#ff6f00;--paper-amber-a100:#ffe57f;--paper-amber-a200:#ffd740;--paper-amber-a400:#ffc400;--paper-amber-a700:#ffab00;--paper-orange-50:#fff3e0;--paper-orange-100:#ffe0b2;--paper-orange-200:#ffcc80;--paper-orange-300:#ffb74d;--paper-orange-400:#ffa726;--paper-orange-500:#ff9800;--paper-orange-600:#fb8c00;--paper-orange-700:#f57c00;--paper-orange-800:#ef6c00;--paper-orange-900:#e65100;--paper-orange-a100:#ffd180;--paper-orange-a200:#ffab40;--paper-orange-a400:#ff9100;--paper-orange-a700:#ff6500;--paper-deep-orange-50:#fbe9e7;--paper-deep-orange-100:#ffccbc;--paper-deep-orange-200:#ffab91;--paper-deep-orange-300:#ff8a65;--paper-deep-orange-400:#ff7043;--paper-deep-orange-500:#ff5722;--paper-deep-orange-600:#f4511e;--paper-deep-orange-700:#e64a19;--paper-deep-orange-800:#d84315;--paper-deep-orange-900:#bf360c;--paper-deep-orange-a100:#ff9e80;--paper-deep-orange-a200:#ff6e40;--paper-deep-orange-a400:#ff3d00;--paper-deep-orange-a700:#dd2c00;--paper-brown-50:#efebe9;--paper-brown-100:#d7ccc8;--paper-brown-200:#bcaaa4;--paper-brown-300:#a1887f;--paper-brown-400:#8d6e63;--paper-brown-500:#795548;--paper-brown-600:#6d4c41;--paper-brown-700:#5d4037;--paper-brown-800:#4e342e;--paper-brown-900:#3e2723;--paper-grey-50:#fafafa;--paper-grey-100:#f5f5f5;--paper-grey-200:#eeeeee;--paper-grey-300:#e0e0e0;--paper-grey-400:#bdbdbd;--paper-grey-500:#9e9e9e;--paper-grey-600:#757575;--paper-grey-700:#616161;--paper-grey-800:#424242;--paper-grey-900:#212121;--paper-blue-grey-50:#eceff1;--paper-blue-grey-100:#cfd8dc;--paper-blue-grey-200:#b0bec5;--paper-blue-grey-300:#90a4ae;--paper-blue-grey-400:#78909c;--paper-blue-grey-500:#607d8b;--paper-blue-grey-600:#546e7a;--paper-blue-grey-700:#455a64;--paper-blue-grey-800:#37474f;--paper-blue-grey-900:#263238;--dark-divider-opacity:0.12;--dark-disabled-opacity:0.38;--dark-secondary-opacity:0.54;--dark-primary-opacity:0.87;--light-divider-opacity:0.12;--light-disabled-opacity:0.3;--light-secondary-opacity:0.7;--light-primary-opacity:1.0;}</style></custom-style><custom-style><style is="custom-style">html{--primary-text-color:var(--light-theme-text-color);--primary-background-color:var(--light-theme-background-color);--secondary-text-color:var(--light-theme-secondary-color);--disabled-text-color:var(--light-theme-disabled-color);--divider-color:var(--light-theme-divider-color);--error-color:var(--paper-deep-orange-a700);--primary-color:var(--paper-indigo-500);--light-primary-color:var(--paper-indigo-100);--dark-primary-color:var(--paper-indigo-700);--accent-color:var(--paper-pink-a200);--light-accent-color:var(--paper-pink-a100);--dark-accent-color:var(--paper-pink-a400);--light-theme-background-color:#ffffff;--light-theme-base-color:#000000;--light-theme-text-color:var(--paper-grey-900);--light-theme-secondary-color:#737373;--light-theme-disabled-color:#9b9b9b;--light-theme-divider-color:#dbdbdb;--dark-theme-background-color:var(--paper-grey-900);--dark-theme-base-color:#ffffff;--dark-theme-text-color:#ffffff;--dark-theme-secondary-color:#bcbcbc;--dark-theme-disabled-color:#646464;--dark-theme-divider-color:#3c3c3c;--text-primary-color:var(--dark-theme-text-color);--default-primary-color:var(--primary-color);}</style></custom-style><script>Polymer.IronMultiSelectableBehaviorImpl={properties:{multi:{type:Boolean,value:!1,observer:'multiChanged'},selectedValues:{type:Array,notify:!0,value:function(){return[]}},selectedItems:{type:Array,readOnly:!0,notify:!0,value:function(){return[]}}},observers:['_updateSelected(selectedValues.splices)'],select:function(a){this.multi?this._toggleSelected(a):this.selected=a},multiChanged:function(a){this._selection.multi=a,this._updateSelected()},get _shouldUpdateSelection(){return null!=this.selected||null!=this.selectedValues&&this.selectedValues.length},_updateAttrForSelected:function(){this.multi?this.selectedItems&&0<this.selectedItems.length&&(this.selectedValues=this.selectedItems.map(function(a){return this._indexToValue(this.indexOf(a))},this).filter(function(a){return null!=a},this)):Polymer.IronSelectableBehavior._updateAttrForSelected.apply(this)},_updateSelected:function(){this.multi?this._selectMulti(this.selectedValues):this._selectSelected(this.selected)},_selectMulti:function(a){a=a||[];var b=(this._valuesToItems(a)||[]).filter(function(a){return null!==a&&a!==void 0});this._selection.clear(b);for(var c=0;c<b.length;c++)this._selection.setItemSelected(b[c],!0);if(this.fallbackSelection&&!this._selection.get().length){var d=this._valueToItem(this.fallbackSelection);d&&this.select(this.fallbackSelection)}},_selectionChange:function(){var a=this._selection.get();this.multi?(this._setSelectedItems(a),this._setSelectedItem(a.length?a[0]:null)):null!==a&&a!==void 0?(this._setSelectedItems([a]),this._setSelectedItem(a)):(this._setSelectedItems([]),this._setSelectedItem(null))},_toggleSelected:function(a){var b=this.selectedValues.indexOf(a);0>b?this.push('selectedValues',a):this.splice('selectedValues',b,1)},_valuesToItems:function(a){return null==a?null:a.map(function(a){return this._valueToItem(a)},this)}},Polymer.IronMultiSelectableBehavior=[Polymer.IronSelectableBehavior,Polymer.IronMultiSelectableBehaviorImpl];</script><script>Polymer.IronMenuBehaviorImpl={properties:{focusedItem:{observer:'_focusedItemChanged',readOnly:!0,type:Object},attrForItemTitle:{type:String},disabled:{type:Boolean,value:!1,observer:'_disabledChanged'}},_MODIFIER_KEYS:['Alt','AltGraph','CapsLock','Control','Fn','FnLock','Hyper','Meta','NumLock','OS','ScrollLock','Shift','Super','Symbol','SymbolLock'],_SEARCH_RESET_TIMEOUT_MS:1e3,_previousTabIndex:0,hostAttributes:{role:'menu'},observers:['_updateMultiselectable(multi)'],listeners:{focus:'_onFocus',keydown:'_onKeydown',"iron-items-changed":'_onIronItemsChanged'},keyBindings:{up:'_onUpKey',down:'_onDownKey',esc:'_onEscKey',"shift+tab:keydown":'_onShiftTabDown'},attached:function(){this._resetTabindices()},select:function(a){this._defaultFocusAsync&&(this.cancelAsync(this._defaultFocusAsync),this._defaultFocusAsync=null);var b=this._valueToItem(a);b&&b.hasAttribute('disabled')||(this._setFocusedItem(b),Polymer.IronMultiSelectableBehaviorImpl.select.apply(this,arguments))},_resetTabindices:function(){var a=this.multi?this.selectedItems&&this.selectedItems[0]:this.selectedItem;this.items.forEach(function(b){b.setAttribute('tabindex',b===a?'0':'-1')},this)},_updateMultiselectable:function(a){a?this.setAttribute('aria-multiselectable','true'):this.removeAttribute('aria-multiselectable')},_focusWithKeyboardEvent:function(a){if(-1===this._MODIFIER_KEYS.indexOf(a.key)){this.cancelDebouncer('_clearSearchText');var b=this._searchText||'',c=a.key&&1==a.key.length?a.key:String.fromCharCode(a.keyCode);b+=c.toLocaleLowerCase();for(var d,e=b.length,f=0;d=this.items[f];f++)if(!d.hasAttribute('disabled')){var g=this.attrForItemTitle||'textContent',h=(d[g]||d.getAttribute(g)||'').trim();if(!(h.length<e)&&h.slice(0,e).toLocaleLowerCase()==b){this._setFocusedItem(d);break}}this._searchText=b,this.debounce('_clearSearchText',this._clearSearchText,this._SEARCH_RESET_TIMEOUT_MS)}},_clearSearchText:function(){this._searchText=''},_focusPrevious:function(){for(var a,b=this.items.length,c=+this.indexOf(this.focusedItem),d=1;d<b+1;d++)if(a=this.items[(c-d+b)%b],!a.hasAttribute('disabled')){var e=Polymer.dom(a).getOwnerRoot()||document;if(this._setFocusedItem(a),Polymer.dom(e).activeElement==a)return}},_focusNext:function(){for(var a,b=this.items.length,c=+this.indexOf(this.focusedItem),d=1;d<b+1;d++)if(a=this.items[(c+d)%b],!a.hasAttribute('disabled')){var e=Polymer.dom(a).getOwnerRoot()||document;if(this._setFocusedItem(a),Polymer.dom(e).activeElement==a)return}},_applySelection:function(a,b){b?a.setAttribute('aria-selected','true'):a.removeAttribute('aria-selected'),Polymer.IronSelectableBehavior._applySelection.apply(this,arguments)},_focusedItemChanged:function(a,b){b&&b.setAttribute('tabindex','-1'),!a||a.hasAttribute('disabled')||this.disabled||(a.setAttribute('tabindex','0'),a.focus())},_onIronItemsChanged:function(a){a.detail.addedNodes.length&&this._resetTabindices()},_onShiftTabDown:function(){var a=this.getAttribute('tabindex');Polymer.IronMenuBehaviorImpl._shiftTabPressed=!0,this._setFocusedItem(null),this.setAttribute('tabindex','-1'),this.async(function(){this.setAttribute('tabindex',a),Polymer.IronMenuBehaviorImpl._shiftTabPressed=!1},1)},_onFocus:function(a){if(!Polymer.IronMenuBehaviorImpl._shiftTabPressed){var b=Polymer.dom(a).rootTarget;(b===this||'undefined'===typeof b.tabIndex||this.isLightDescendant(b))&&(this._defaultFocusAsync=this.async(function(){var a=this.multi?this.selectedItems&&this.selectedItems[0]:this.selectedItem;this._setFocusedItem(null),a?this._setFocusedItem(a):this.items[0]&&this._focusNext()}))}},_onUpKey:function(a){this._focusPrevious(),a.detail.keyboardEvent.preventDefault()},_onDownKey:function(a){this._focusNext(),a.detail.keyboardEvent.preventDefault()},_onEscKey:function(){var a=this.focusedItem;a&&a.blur()},_onKeydown:function(a){this.keyboardEventMatchesKeys(a,'up down esc')||this._focusWithKeyboardEvent(a),a.stopPropagation()},_activateHandler:function(a){Polymer.IronSelectableBehavior._activateHandler.call(this,a),a.stopPropagation()},_disabledChanged:function(a){a?(this._previousTabIndex=this.hasAttribute('tabindex')?this.tabIndex:0,this.removeAttribute('tabindex')):!this.hasAttribute('tabindex')&&this.setAttribute('tabindex',this._previousTabIndex)}},Polymer.IronMenuBehaviorImpl._shiftTabPressed=!1,Polymer.IronMenuBehavior=[Polymer.IronMultiSelectableBehavior,Polymer.IronA11yKeysBehavior,Polymer.IronMenuBehaviorImpl];</script><script>Polymer.PaperInkyFocusBehaviorImpl={observers:['_focusedChanged(receivedFocusFromKeyboard)'],_focusedChanged:function(a){a&&this.ensureRipple(),this.hasRipple()&&(this._ripple.holdDown=a)},_createRipple:function(){var a=Polymer.PaperRippleBehavior._createRipple();return a.id='ink',a.setAttribute('center',''),a.classList.add('circle'),a}},Polymer.PaperInkyFocusBehavior=[Polymer.IronButtonState,Polymer.IronControlState,Polymer.PaperRippleBehavior,Polymer.PaperInkyFocusBehaviorImpl];</script><dom-module id="paper-icon-button" assetpath="../bower_components/paper-icon-button/"><template strip-whitespace=""><style>:host{display:inline-block;position:relative;padding:8px;outline:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;z-index:0;line-height:1;width:40px;height:40px;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);-webkit-tap-highlight-color:transparent;box-sizing:border-box !important;@apply --paper-icon-button;}:host #ink{color:var(--paper-icon-button-ink-color, var(--primary-text-color));opacity:0.6;}:host([disabled]){color:var(--paper-icon-button-disabled-text, var(--disabled-text-color));pointer-events:none;cursor:auto;@apply --paper-icon-button-disabled;}:host([hidden]){display:none !important;}:host(:hover){@apply --paper-icon-button-hover;}iron-icon{--iron-icon-width:100%;--iron-icon-height:100%;}</style><iron-icon id="icon" src="[[src]]" icon="[[icon]]" alt$="[[alt]]"></iron-icon></template><script>Polymer({is:'paper-icon-button',hostAttributes:{role:'button',tabindex:'0'},behaviors:[Polymer.PaperInkyFocusBehavior],properties:{src:{type:String},icon:{type:String},alt:{type:String,observer:'_altChanged'}},_altChanged:function(a,b){var c=this.getAttribute('aria-label');c&&b!=c||this.setAttribute('aria-label',a)}});</script></dom-module><script>(function(){'use strict';var a=/\.splices$/,b=/\.length$/,c=/\.?#?([0-9]+)$/;Polymer.AppStorageBehavior={properties:{data:{type:Object,notify:!0,value:function(){return this.zeroValue}},sequentialTransactions:{type:Boolean,value:!1},log:{type:Boolean,value:!1}},observers:['__dataChanged(data.*)'],created:function(){this.__initialized=!1,this.__syncingToMemory=!1,this.__initializingStoredValue=null,this.__transactionQueueAdvances=Promise.resolve()},ready:function(){this._initializeStoredValue()},get isNew(){return!0},get transactionsComplete(){return this.__transactionQueueAdvances},get zeroValue(){},saveValue:function(){return Promise.resolve()},reset:function(){},destroy:function(){return this.data=this.zeroValue,this.saveValue()},initializeStoredValue:function(){return this.isNew?Promise.resolve():this._getStoredValue('data').then(function(a){return this._log('Got stored value!',a,this.data),null==a?this._setStoredValue('data',this.data||this.zeroValue):void this.syncToMemory(function(){this.set('data',a)})}.bind(this))},getStoredValue:function(){return Promise.resolve()},setStoredValue:function(a,b){return Promise.resolve(b)},memoryPathToStoragePath:function(a){return a},storagePathToMemoryPath:function(a){return a},syncToMemory:function(a){this.__syncingToMemory||(this._group('Sync to memory.'),this.__syncingToMemory=!0,a.call(this),this.__syncingToMemory=!1,this._groupEnd('Sync to memory.'))},valueIsEmpty:function(a){return Array.isArray(a)?0===a.length:Object.prototype.isPrototypeOf(a)?0===Object.keys(a).length:null==a},_getStoredValue:function(a){return this.getStoredValue(this.memoryPathToStoragePath(a))},_setStoredValue:function(a,b){return this.setStoredValue(this.memoryPathToStoragePath(a),b)},_enqueueTransaction:function(a){if(this.sequentialTransactions)a=a.bind(this);else{var b=a.call(this);a=function(){return b}}return this.__transactionQueueAdvances=this.__transactionQueueAdvances.then(a).catch(function(a){this._error('Error performing queued transaction.',a)}.bind(this))},_log:function(){this.log&&console.log.apply(console,arguments)},_error:function(){this.log&&console.error.apply(console,arguments)},_group:function(){this.log&&console.group.apply(console,arguments)},_groupEnd:function(){this.log&&console.groupEnd.apply(console,arguments)},_initializeStoredValue:function(){if(!this.__initializingStoredValue){this._group('Initializing stored value.');var a=this.__initializingStoredValue=this.initializeStoredValue().then(function(){this.__initialized=!0,this.__initializingStoredValue=null,this._groupEnd('Initializing stored value.')}.bind(this));return this._enqueueTransaction(function(){return a})}},__dataChanged:function(a){if(!(this.isNew||this.__syncingToMemory||!this.__initialized||this.__pathCanBeIgnored(a.path))){var b=this.__normalizeMemoryPath(a.path),c=a.value,d=c&&c.indexSplices;this._enqueueTransaction(function(){return this._log('Setting',b+':',d||c),d&&this.__pathIsSplices(b)&&(b=this.__parentPath(b),c=this.get(b)),this._setStoredValue(b,c)})}},__normalizeMemoryPath:function(a){for(var b=a.split('.'),c=[],d=[],e=[],f=0;f<b.length;++f)d.push(b[f]),/^#/.test(b[f])?e.push(this.get(c).indexOf(this.get(d))):e.push(b[f]),c.push(b[f]);return e.join('.')},__parentPath:function(a){var b=a.split('.');return b.slice(0,b.length-1).join('.')},__pathCanBeIgnored:function(a){return b.test(a)&&Array.isArray(this.get(this.__parentPath(a)))},__pathIsSplices:function(b){return a.test(b)&&Array.isArray(this.get(this.__parentPath(b)))},__pathRefersToArray:function(c){return(a.test(c)||b.test(c))&&Array.isArray(this.get(this.__parentPath(c)))},__pathTailToIndex:function(a){var b=a.split('.').pop();return window.parseInt(b.replace(c,'$1'),10)}}})();</script><script>(function(){'use strict';Polymer.FirebaseDatabaseBehaviorImpl={properties:{db:{type:Object,computed:'__computeDb(app)'},ref:{type:Object,computed:'__computeRef(db, path, disabled)',observer:'__refChanged'},path:{type:String,value:null,observer:'__pathChanged'},disabled:{type:Boolean,value:!1}},observers:['__onlineChanged(online)'],_setFirebaseValue:function(a,b){this._log('Setting Firebase value at',a,'to',b);var c=b&&b.$key,d=b&&b.hasOwnProperty('$val');c&&(b.$key=null);var e=this.db.ref(a).set(d?b.$val:b);return c&&(b.$key=c),e},__computeDb:function(a){return a?a.database():null},__computeRef:function(a,b){return null==a||null==b||!this.__pathReady(b)||this.disabled?null:a.ref(b)},__refChanged:function(){},__pathChanged:function(){this.disabled||this.valueIsEmpty(this.data)||this.syncToMemory(function(){this.data=this.zeroValue,this.__needSetData=!0})},__pathReady:function(a){return a&&0>a.split('/').slice(1).indexOf('')},__onlineChanged:function(a){this.ref&&(a?this.db.goOnline():this.db.goOffline())}},Polymer.FirebaseDatabaseBehavior=[Polymer.AppStorageBehavior,Polymer.FirebaseCommonBehavior,Polymer.FirebaseDatabaseBehaviorImpl]})();</script><dom-module id="firebase-query" assetpath="../bower_components/polymerfire/"><script>(function(){'use strict';Polymer({is:'firebase-query',behaviors:[Polymer.FirebaseDatabaseBehavior],properties:{query:{type:Object,computed:'__computeQuery(ref, orderByChild, orderByValue, limitToFirst, limitToLast, startAt, endAt, equalTo)',observer:'__queryChanged'},orderByChild:{type:String,value:''},orderByValue:{type:Boolean,value:!1},startAt:{type:String,value:''},endAt:{type:String,value:''},equalTo:{type:Object,value:null},limitToFirst:{type:Number,value:0},limitToLast:{type:Number,value:0}},created:function(){this.__map={}},attached:function(){this.__queryChanged(this.query,this.query)},detached:function(){null==this.query||this.__queryChanged(null,this.query)},child:function(a){return this.__map[a]},get isNew(){return this.disabled||!this.__pathReady(this.path)},get zeroValue(){return[]},memoryPathToStoragePath:function(a){var b=this.path;if('data'!==a){var c=a.split('.'),d=window.parseInt(c[1],10);null==d||isNaN(d)||(c[1]=null!=this.data[d]&&this.data[d].$key),b+=c.join('/').replace(/^data\.?/,'')}return b},storagePathToMemoryPath:function(a){var b='data';if(a!==this.path){var c=a.replace(this.path+'/','').split('/'),d=c[0],e=this.__map[d];e&&(c[0]=this.__indexFromKey(d)),b+='.'+c.join('.')}return b},setStoredValue:function(a,b){return a===this.path||/\$key$/.test(a)?Promise.resolve():/\/\$val$/.test(a)?this._setFirebaseValue(a.replace(/\/\$val$/,''),b):this._setFirebaseValue(a,b)},_propertyToKey:function(a){var b=window.parseInt(a,10);if(null!=b&&!isNaN(b))return this.data[b].$key},__computeQuery:function(a,b,c,d,e,f,g,h){if(null==a)return null;var i;return i=b?a.orderByChild(b):c?a.orderByValue():a.orderByKey(),d?i=i.limitToFirst(d):e&&(i=i.limitToLast(e)),f&&(i=i.startAt(f)),g&&(i=i.endAt(g)),null!==h&&(i=i.equalTo(h)),i},__pathChanged:function(a){null==a&&this.syncToMemory(function(){this.data=this.zeroValue})},__queryChanged:function(a,b){b&&(b.off('child_added',this.__onFirebaseChildAdded,this),b.off('child_removed',this.__onFirebaseChildRemoved,this),b.off('child_changed',this.__onFirebaseChildChanged,this),b.off('child_moved',this.__onFirebaseChildMoved,this),this.syncToMemory(function(){this.set('data',this.zeroValue)})),a&&(this._onOnce&&(a.off('child_added',this.__onFirebaseChildAdded,this),a.off('child_removed',this.__onFirebaseChildRemoved,this),a.off('child_changed',this.__onFirebaseChildChanged,this),a.off('child_moved',this.__onFirebaseChildMoved,this)),this._onOnce=!0,a.on('child_added',this.__onFirebaseChildAdded,this.__onError,this),a.on('child_removed',this.__onFirebaseChildRemoved,this.__onError,this),a.on('child_changed',this.__onFirebaseChildChanged,this.__onError,this),a.on('child_moved',this.__onFirebaseChildMoved,this.__onError,this))},__indexFromKey:function(a){if(null!=a)for(var b=0;b<this.data.length;b++)if(this.data[b].$key===a)return b;return-1},__onFirebaseChildAdded:function(a,b){var c=a.key,d=a.val(),e=this.__indexFromKey(b);this._log('Firebase child_added:',c,d),d=this.__snapshotToValue(a),this.__map[c]=d,this.splice('data',e+1,0,d)},__onFirebaseChildRemoved:function(a){var b=a.key,c=this.__map[b];this._log('Firebase child_removed:',b,c),c&&(this.__map[b]=null,this.async(function(){this.syncToMemory(function(){this.splice('data',this.__indexFromKey(b),1)})}))},__onFirebaseChildChanged:function(a){var b=a.key,c=this.__map[b];this._log('Firebase child_changed:',b,c),c&&this.async(function(){var d=this.__indexFromKey(b),e=this.__snapshotToValue(a);this.__map[b]=e,this.syncToMemory(function(){if(e instanceof Object){for(var a in e)this.set(['data',d,a],e[a]);for(var a in c)e.hasOwnProperty(a)||this.set(['data',d,a],void 0)}else this.set(['data',d],e)})})},__onFirebaseChildMoved:function(a,b){var c=a.key,d=this.__map[c],e=b?this.__indexFromKey(b):0;if(this._log('Firebase child_moved:',c,d,'to index',e),d){var f=this.__indexFromKey(c);d=this.__snapshotToValue(a),this.__map[c]=d,this.async(function(){this.syncToMemory(function(){this.splice('data',f,1),this.splice('data',e,0,d)})})}},__snapshotToValue:function(a){var b=a.key,c=a.val(),d='object'!==('undefined'===typeof c?'undefined':babelHelpers.typeof(c));return d?c={$key:b,$val:c}:c.$key=b,c}})})();</script></dom-module><dom-module id="shared-styles" assetpath="style/"><template><style>.card{margin:24px;padding:16px;color:#757575;border-radius:5px;background-color:#ffffff;box-shadow:0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12), 0 3px 1px -2px rgba(0, 0, 0, 0.2);}.circle{display:inline-block;width:64px;height:64px;text-align:center;color:#555;border-radius:50%;background:#ddd;font-size:30px;line-height:64px;}h1{margin:16px 0;color:#212121;font-size:22px;}:host{display:block;padding:10px;}.drawer-list{margin:0 20px;}.drawer-list a{display:block;padding:0 16px;text-decoration:none;color:var(--accent-color);line-height:40px;}.drawer-list a.iron-selected{color:black;font-weight:bold;}.container{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:15px;padding:1.5%;-webkit-box-sizing:border-box;box-sizing:border-box;}.welcome{min-height:60px;margin:10px 10px;background-size:contain;background-position:center center;background-repeat:no-repeat;background-image:url('../../images/logo4.png');}.emailTest{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-size:18px;font-weight:lighter;}.separator{margin:0 10px;font-size:14px;font-weight:lighter;color:#aaa;border-top:1px solid var(--divider-color);}.separator span{padding-top:10px;padding-left:16px;display:block;}app-drawer-layout:not([narrow]) [drawer-toggle]{display:none;}app-header{background-color:var(--dark-primary-color);color:var(--text-primary-color);}app-header paper-icon-button, app-header a{--paper-icon-button-ink-color:white;text-decoration:none;color:white;}paper-item{cursor:pointer;}paper-listbox a{text-decoration:none;color:#212121;}paper-listbox a paper-item.iron-selected{font-weight:bold;background-color:#eeeeee;}</style></template></dom-module><dom-module id="iron-collapse" assetpath="../bower_components/iron-collapse/"><template><style>:host{display:block;transition-duration:var(--iron-collapse-transition-duration, 300ms);-webkit-transition-duration:var(--iron-collapse-transition-duration, 300ms);overflow:visible;}:host(.iron-collapse-closed){display:none;}:host(:not(.iron-collapse-opened)){overflow:hidden;}</style><slot></slot></template></dom-module><script>Polymer({is:'iron-collapse',behaviors:[Polymer.IronResizableBehavior],properties:{horizontal:{type:Boolean,value:!1,observer:'_horizontalChanged'},opened:{type:Boolean,value:!1,notify:!0,observer:'_openedChanged'},transitioning:{type:Boolean,notify:!0,readOnly:!0},noAnimation:{type:Boolean},_desiredSize:{type:String,value:''}},get dimension(){return this.horizontal?'width':'height'},get _dimensionMax(){return this.horizontal?'maxWidth':'maxHeight'},get _dimensionMaxCss(){return this.horizontal?'max-width':'max-height'},hostAttributes:{role:'group',"aria-hidden":'true'},listeners:{transitionend:'_onTransitionEnd'},toggle:function(){this.opened=!this.opened},show:function(){this.opened=!0},hide:function(){this.opened=!1},updateSize:function(a,b){a='auto'===a?'':a;var c=b&&!this.noAnimation&&this.isAttached&&this._desiredSize!==a;if(this._desiredSize=a,this._updateTransition(!1),c){var d=this._calcSize();''===a&&(this.style[this._dimensionMax]='',a=this._calcSize()),this.style[this._dimensionMax]=d,this.scrollTop=this.scrollTop,this._updateTransition(!0),c=a!==d}this.style[this._dimensionMax]=a,c||this._transitionEnd()},enableTransition:function(a){Polymer.Base._warn('`enableTransition()` is deprecated, use `noAnimation` instead.'),this.noAnimation=!a},_updateTransition:function(a){this.style.transitionDuration=a&&!this.noAnimation?'':'0s'},_horizontalChanged:function(){this.style.transitionProperty=this._dimensionMaxCss;var a='maxWidth'===this._dimensionMax?'maxHeight':'maxWidth';this.style[a]='',this.updateSize(this.opened?'auto':'0px',!1)},_openedChanged:function(){this.setAttribute('aria-hidden',!this.opened),this._setTransitioning(!0),this.toggleClass('iron-collapse-closed',!1),this.toggleClass('iron-collapse-opened',!1),this.updateSize(this.opened?'auto':'0px',!0),this.opened&&this.focus()},_transitionEnd:function(){this.style[this._dimensionMax]=this._desiredSize,this.toggleClass('iron-collapse-closed',!this.opened),this.toggleClass('iron-collapse-opened',this.opened),this._updateTransition(!1),this.notifyResize(),this._setTransitioning(!1)},_onTransitionEnd:function(a){Polymer.dom(a).rootTarget===this&&this._transitionEnd()},_calcSize:function(){return this.getBoundingClientRect()[this.dimension]+'px'}});</script><script>Polymer.IronFormElementBehavior={properties:{name:{type:String},value:{notify:!0,type:String},required:{type:Boolean,value:!1},_parentForm:{type:Object}},attached:Polymer.Element?null:function(){this.fire('iron-form-element-register')},detached:Polymer.Element?null:function(){this._parentForm&&this._parentForm.fire('iron-form-element-unregister',{target:this})}};</script><script>Polymer.IronValidatableBehaviorMeta=null,Polymer.IronValidatableBehavior={properties:{validator:{type:String},invalid:{notify:!0,reflectToAttribute:!0,type:Boolean,value:!1,observer:'_invalidChanged'}},registered:function(){Polymer.IronValidatableBehaviorMeta=new Polymer.IronMeta({type:'validator'})},_invalidChanged:function(){this.invalid?this.setAttribute('aria-invalid','true'):this.removeAttribute('aria-invalid')},get _validator(){return Polymer.IronValidatableBehaviorMeta&&Polymer.IronValidatableBehaviorMeta.byKey(this.validator)},hasValidator:function(){return null!=this._validator},validate:function(a){return this.invalid=void 0===a&&void 0!==this.value?!this._getValidity(this.value):!this._getValidity(a),!this.invalid},_getValidity:function(a){return!this.hasValidator()||this._validator.validate(a)}};</script><dom-module id="iron-a11y-announcer" assetpath="../bower_components/iron-a11y-announcer/"><template><style>:host{display:inline-block;position:fixed;clip:rect(0px,0px,0px,0px);}</style><div aria-live$="[[mode]]">[[_text]]</div></template><script>(function(){'use strict';Polymer.IronA11yAnnouncer=Polymer({is:'iron-a11y-announcer',properties:{mode:{type:String,value:'polite'},_text:{type:String,value:''}},created:function(){Polymer.IronA11yAnnouncer.instance||(Polymer.IronA11yAnnouncer.instance=this),document.body.addEventListener('iron-announce',this._onIronAnnounce.bind(this))},announce:function(a){this._text='',this.async(function(){this._text=a},100)},_onIronAnnounce:function(a){a.detail&&a.detail.text&&this.announce(a.detail.text)}}),Polymer.IronA11yAnnouncer.instance=null,Polymer.IronA11yAnnouncer.requestAvailability=function(){Polymer.IronA11yAnnouncer.instance||(Polymer.IronA11yAnnouncer.instance=document.createElement('iron-a11y-announcer')),document.body.appendChild(Polymer.IronA11yAnnouncer.instance)}})();</script></dom-module><dom-module id="iron-input" assetpath="../bower_components/iron-input/"><template><style>:host{display:inline-block;}</style><slot id="content"></slot></template><script>Polymer({is:'iron-input',behaviors:[Polymer.IronValidatableBehavior],properties:{bindValue:{type:String},value:{type:String,computed:'_computeValue(bindValue)'},allowedPattern:{type:String},autoValidate:{type:Boolean,value:!1},_inputElement:Object},observers:['_bindValueChanged(bindValue, _inputElement)'],listeners:{input:'_onInput',keypress:'_onKeypress'},created:function(){Polymer.IronA11yAnnouncer.requestAvailability(),this._previousValidInput='',this._patternAlreadyChecked=!1},attached:function(){this._observer=Polymer.dom(this).observeNodes(function(){this._initSlottedInput()}.bind(this))},detached:function(){this._observer&&(Polymer.dom(this).unobserveNodes(this._observer),this._observer=null)},get inputElement(){return this._inputElement},_initSlottedInput:function(){this._inputElement=this.getEffectiveChildren()[0],this.inputElement&&this.inputElement.value&&(this.bindValue=this.inputElement.value),this.fire('iron-input-ready')},get _patternRegExp(){var a;if(this.allowedPattern)a=new RegExp(this.allowedPattern);else switch(this.type){case'number':a=/[0-9.,e-]/;}return a},_bindValueChanged:function(a,b){b&&(a===void 0?b.value=null:a!==b.value&&(this.inputElement.value=a),this.autoValidate&&this.validate(),this.fire('bind-value-changed',{value:a}))},_onInput:function(){if(this.allowedPattern&&!this._patternAlreadyChecked){var a=this._checkPatternValidity();a||(this._announceInvalidCharacter('Invalid string of characters not entered.'),this.inputElement.value=this._previousValidInput)}this.bindValue=this._previousValidInput=this.inputElement.value,this._patternAlreadyChecked=!1},_isPrintable:function(a){var b=8==a.keyCode||9==a.keyCode||13==a.keyCode||27==a.keyCode,c=19==a.keyCode||20==a.keyCode||45==a.keyCode||46==a.keyCode||144==a.keyCode||145==a.keyCode||32<a.keyCode&&41>a.keyCode||111<a.keyCode&&124>a.keyCode;return!b&&!(0==a.charCode&&c)},_onKeypress:function(a){if(this.allowedPattern||'number'===this.type){var b=this._patternRegExp;if(b&&!(a.metaKey||a.ctrlKey||a.altKey)){this._patternAlreadyChecked=!0;var c=String.fromCharCode(a.charCode);this._isPrintable(a)&&!b.test(c)&&(a.preventDefault(),this._announceInvalidCharacter('Invalid character '+c+' not entered.'))}}},_checkPatternValidity:function(){var a=this._patternRegExp;if(!a)return!0;for(var b=0;b<this.inputElement.value.length;b++)if(!a.test(this.inputElement.value[b]))return!1;return!0},validate:function(){if(!this.inputElement)return this.invalid=!1,!0;var a=this.inputElement.checkValidity();return a&&(this.required&&''===this.bindValue?a=!1:this.hasValidator()&&(a=Polymer.IronValidatableBehavior.validate.call(this,this.bindValue))),this.invalid=!a,this.fire('iron-input-validate'),a},_announceInvalidCharacter:function(a){this.fire('iron-announce',{text:a})},_computeValue:function(a){return a}});</script></dom-module><script>Polymer.PaperInputHelper={},Polymer.PaperInputHelper.NextLabelID=1,Polymer.PaperInputHelper.NextAddonID=1,Polymer.PaperInputHelper.NextInputID=1,Polymer.PaperInputBehaviorImpl={properties:{label:{type:String},value:{notify:!0,type:String},disabled:{type:Boolean,value:!1},invalid:{type:Boolean,value:!1,notify:!0},allowedPattern:{type:String},type:{type:String},list:{type:String},pattern:{type:String},required:{type:Boolean,value:!1},errorMessage:{type:String},charCounter:{type:Boolean,value:!1},noLabelFloat:{type:Boolean,value:!1},alwaysFloatLabel:{type:Boolean,value:!1},autoValidate:{type:Boolean,value:!1},validator:{type:String},autocomplete:{type:String,value:'off'},autofocus:{type:Boolean,observer:'_autofocusChanged'},inputmode:{type:String},minlength:{type:Number},maxlength:{type:Number},min:{type:String},max:{type:String},step:{type:String},name:{type:String},placeholder:{type:String,value:''},readonly:{type:Boolean,value:!1},size:{type:Number},autocapitalize:{type:String,value:'none'},autocorrect:{type:String,value:'off'},autosave:{type:String},results:{type:Number},accept:{type:String},multiple:{type:Boolean},_ariaDescribedBy:{type:String,value:''},_ariaLabelledBy:{type:String,value:''},_inputId:{type:String,value:''}},listeners:{"addon-attached":'_onAddonAttached'},keyBindings:{"shift+tab:keydown":'_onShiftTabDown'},hostAttributes:{tabindex:0},get inputElement(){return this.$||(this.$={}),this.$.input||(this._generateInputId(),this.$.input=this.$$('#'+this._inputId)),this.$.input},get _focusableElement(){return this.inputElement},created:function(){this._typesThatHaveText=['date','datetime','datetime-local','month','time','week','file']},attached:function(){this._updateAriaLabelledBy(),!Polymer.Element&&this.inputElement&&-1!==this._typesThatHaveText.indexOf(this.inputElement.type)&&(this.alwaysFloatLabel=!0)},_appendStringWithSpace:function(a,b){return a=a?a+' '+b:b,a},_onAddonAttached:function(a){var b=Polymer.dom(a).rootTarget;if(b.id)this._ariaDescribedBy=this._appendStringWithSpace(this._ariaDescribedBy,b.id);else{var c='paper-input-add-on-'+Polymer.PaperInputHelper.NextAddonID++;b.id=c,this._ariaDescribedBy=this._appendStringWithSpace(this._ariaDescribedBy,c)}},validate:function(){return this.inputElement.validate()},_focusBlurHandler:function(a){Polymer.IronControlState._focusBlurHandler.call(this,a),this.focused&&!this._shiftTabPressed&&this._focusableElement&&this._focusableElement.focus()},_onShiftTabDown:function(){var a=this.getAttribute('tabindex');this._shiftTabPressed=!0,this.setAttribute('tabindex','-1'),this.async(function(){this.setAttribute('tabindex',a),this._shiftTabPressed=!1},1)},_handleAutoValidate:function(){this.autoValidate&&this.validate()},updateValueAndPreserveCaret:function(a){try{var b=this.inputElement.selectionStart;this.value=a,this.inputElement.selectionStart=b,this.inputElement.selectionEnd=b}catch(b){this.value=a}},_computeAlwaysFloatLabel:function(a,b){return b||a},_updateAriaLabelledBy:function(){var a=Polymer.dom(this.root).querySelector('label');if(!a)return void(this._ariaLabelledBy='');var b;a.id?b=a.id:(b='paper-input-label-'+Polymer.PaperInputHelper.NextLabelID++,a.id=b),this._ariaLabelledBy=b},_generateInputId:function(){this._inputId&&''!==this._inputId||(this._inputId='input-'+Polymer.PaperInputHelper.NextInputID++)},_onChange:function(a){this.shadowRoot&&this.fire(a.type,{sourceEvent:a},{node:this,bubbles:a.bubbles,cancelable:a.cancelable})},_autofocusChanged:function(){if(this.autofocus&&this._focusableElement){var a=document.activeElement,b=a instanceof HTMLElement,c=b&&a!==document.body&&a!==document.documentElement;c||this._focusableElement.focus()}}},Polymer.PaperInputBehavior=[Polymer.IronControlState,Polymer.IronA11yKeysBehavior,Polymer.PaperInputBehaviorImpl];</script><script>Polymer.PaperInputAddonBehavior={attached:function(){Polymer.dom.flush(),this.fire('addon-attached')},update:function(){}};</script><dom-module id="paper-input-char-counter" assetpath="../bower_components/paper-input/"><template><style>:host{display:inline-block;float:right;@apply --paper-font-caption;@apply --paper-input-char-counter;}:host([hidden]){display:none !important;}:host(:dir(rtl)){float:left;}</style><span>[[_charCounterStr]]</span></template></dom-module><script>Polymer({is:'paper-input-char-counter',behaviors:[Polymer.PaperInputAddonBehavior],properties:{_charCounterStr:{type:String,value:'0'}},update:function(a){if(a.inputElement){a.value=a.value||'';var b=a.value.toString().length.toString();a.inputElement.hasAttribute('maxlength')&&(b+='/'+a.inputElement.getAttribute('maxlength')),this._charCounterStr=b}}});</script><dom-module id="paper-input-container" assetpath="../bower_components/paper-input/"><template><style>:host{display:block;padding:8px 0;--paper-input-container-shared-input-style:{position:relative;outline:none;box-shadow:none;padding:0;width:100%;max-width:100%;background:transparent;border:none;color:var(--paper-input-container-input-color, var(--primary-text-color));-webkit-appearance:none;text-align:inherit;vertical-align:bottom;@apply --paper-font-subhead;};@apply --paper-input-container;}:host([inline]){display:inline-block;}:host([disabled]){pointer-events:none;opacity:0.33;@apply --paper-input-container-disabled;}:host([hidden]){display:none !important;}[hidden]{display:none !important;}.floated-label-placeholder{@apply --paper-font-caption;}.underline{height:2px;position:relative;}.focused-line{@apply --layout-fit;border-bottom:2px solid var(--paper-input-container-focus-color, var(--primary-color));-webkit-transform-origin:center center;transform-origin:center center;-webkit-transform:scale3d(0,1,1);transform:scale3d(0,1,1);@apply --paper-input-container-underline-focus;}.underline.is-highlighted .focused-line{-webkit-transform:none;transform:none;-webkit-transition:-webkit-transform 0.25s;transition:transform 0.25s;@apply --paper-transition-easing;}.underline.is-invalid .focused-line{border-color:var(--paper-input-container-invalid-color, var(--error-color));-webkit-transform:none;transform:none;-webkit-transition:-webkit-transform 0.25s;transition:transform 0.25s;@apply --paper-transition-easing;}.unfocused-line{@apply --layout-fit;border-bottom:1px solid var(--paper-input-container-color, var(--secondary-text-color));@apply --paper-input-container-underline;}:host([disabled]) .unfocused-line{border-bottom:1px dashed;border-color:var(--paper-input-container-color, var(--secondary-text-color));@apply --paper-input-container-underline-disabled;}.input-wrapper{@apply --layout-horizontal;@apply --layout-center;position:relative;}.input-content{@apply --layout-flex-auto;@apply --layout-relative;max-width:100%;}.input-content ::slotted(label),
      .input-content ::slotted(.paper-input-label){position:absolute;top:0;left:0;width:100%;font:inherit;color:var(--paper-input-container-color, var(--secondary-text-color));-webkit-transition:-webkit-transform 0.25s, width 0.25s;transition:transform 0.25s, width 0.25s;-webkit-transform-origin:left top;transform-origin:left top;min-height:1px;@apply --paper-font-common-nowrap;@apply --paper-font-subhead;@apply --paper-input-container-label;@apply --paper-transition-easing;}.input-content.label-is-floating ::slotted(label),
      .input-content.label-is-floating ::slotted(.paper-input-label){-webkit-transform:translateY(-75%) scale(0.75);transform:translateY(-75%) scale(0.75);width:133%;@apply --paper-input-container-label-floating;}:host(:dir(rtl)) .input-content.label-is-floating ::slotted(label),
      :host(:dir(rtl)) .input-content.label-is-floating ::slotted(.paper-input-label){right:0;left:auto;-webkit-transform-origin:right top;transform-origin:right top;}.input-content.label-is-highlighted ::slotted(label),
      .input-content.label-is-highlighted ::slotted(.paper-input-label){color:var(--paper-input-container-focus-color, var(--primary-color));@apply --paper-input-container-label-focus;}.input-content.is-invalid ::slotted(label),
      .input-content.is-invalid ::slotted(.paper-input-label){color:var(--paper-input-container-invalid-color, var(--error-color));}.input-content.label-is-hidden ::slotted(label),
      .input-content.label-is-hidden ::slotted(.paper-input-label){visibility:hidden;}.input-content ::slotted(iron-input){@apply --paper-input-container-shared-input-style;}.input-content ::slotted(input),
      .input-content ::slotted(textarea),
      .input-content ::slotted(iron-autogrow-textarea),
      .input-content ::slotted(.paper-input-input){@apply --paper-input-container-shared-input-style;@apply --paper-input-container-input;}.input-content ::slotted(input)::-webkit-outer-spin-button,
      .input-content ::slotted(input)::-webkit-inner-spin-button{@apply --paper-input-container-input-webkit-spinner;}.input-content.focused ::slotted(input),
      .input-content.focused ::slotted(textarea),
      .input-content.focused ::slotted(iron-autogrow-textarea),
      .input-content.focused ::slotted(.paper-input-input){@apply --paper-input-container-input-focus;}.input-content.is-invalid ::slotted(input),
      .input-content.is-invalid ::slotted(textarea),
      .input-content.is-invalid ::slotted(iron-autogrow-textarea),
      .input-content.is-invalid ::slotted(.paper-input-input){@apply --paper-input-container-input-invalid;}.prefix ::slotted(*){display:inline-block;@apply --paper-font-subhead;@apply --layout-flex-none;@apply --paper-input-prefix;}.suffix ::slotted(*){display:inline-block;@apply --paper-font-subhead;@apply --layout-flex-none;@apply --paper-input-suffix;}.input-content ::slotted(input){min-width:0;}.input-content ::slotted(textarea){resize:none;}.add-on-content{position:relative;}.add-on-content.is-invalid ::slotted(*){color:var(--paper-input-container-invalid-color, var(--error-color));}.add-on-content.is-highlighted ::slotted(*){color:var(--paper-input-container-focus-color, var(--primary-color));}</style><div class="floated-label-placeholder" aria-hidden="true" hidden="[[noLabelFloat]]">&nbsp;</div><div class="input-wrapper"><span class="prefix"><slot name="prefix"></slot></span><div class$="[[_computeInputContentClass(noLabelFloat,alwaysFloatLabel,focused,invalid,_inputHasContent)]]" id="labelAndInputContainer"><slot name="label"></slot><slot name="input"></slot></div><span class="suffix"><slot name="suffix"></slot></span></div><div class$="[[_computeUnderlineClass(focused,invalid)]]"><div class="unfocused-line"></div><div class="focused-line"></div></div><div class$="[[_computeAddOnContentClass(focused,invalid)]]"><slot name="add-on"></slot></div></template></dom-module><script>Polymer({is:'paper-input-container',properties:{noLabelFloat:{type:Boolean,value:!1},alwaysFloatLabel:{type:Boolean,value:!1},attrForValue:{type:String,value:'bind-value'},autoValidate:{type:Boolean,value:!1},invalid:{observer:'_invalidChanged',type:Boolean,value:!1},focused:{readOnly:!0,type:Boolean,value:!1,notify:!0},_addons:{type:Array},_inputHasContent:{type:Boolean,value:!1},_inputSelector:{type:String,value:'input,iron-input,textarea,.paper-input-input'},_boundOnFocus:{type:Function,value:function(){return this._onFocus.bind(this)}},_boundOnBlur:{type:Function,value:function(){return this._onBlur.bind(this)}},_boundOnInput:{type:Function,value:function(){return this._onInput.bind(this)}},_boundValueChanged:{type:Function,value:function(){return this._onValueChanged.bind(this)}}},listeners:{"addon-attached":'_onAddonAttached',"iron-input-validate":'_onIronInputValidate'},get _valueChangedEvent(){return this.attrForValue+'-changed'},get _propertyForValue(){return Polymer.CaseMap.dashToCamelCase(this.attrForValue)},get _inputElement(){return Polymer.dom(this).querySelector(this._inputSelector)},get _inputElementValue(){return this._inputElement[this._propertyForValue]||this._inputElement.value},ready:function(){this.__isFirstValueUpdate=!0,this._addons||(this._addons=[]),this.addEventListener('focus',this._boundOnFocus,!0),this.addEventListener('blur',this._boundOnBlur,!0)},attached:function(){this.attrForValue?this._inputElement.addEventListener(this._valueChangedEvent,this._boundValueChanged):this.addEventListener('input',this._onInput),this._inputElementValue&&''!=this._inputElementValue?this._handleValueAndAutoValidate(this._inputElement):this._handleValue(this._inputElement)},_onAddonAttached:function(a){this._addons||(this._addons=[]);var b=a.target;-1===this._addons.indexOf(b)&&(this._addons.push(b),this.isAttached&&this._handleValue(this._inputElement))},_onFocus:function(){this._setFocused(!0)},_onBlur:function(){this._setFocused(!1),this._handleValueAndAutoValidate(this._inputElement)},_onInput:function(a){this._handleValueAndAutoValidate(a.target)},_onValueChanged:function(a){var b=a.target;this.__isFirstValueUpdate&&(this.__isFirstValueUpdate=!1,void 0===b.value)||this._handleValueAndAutoValidate(a.target)},_handleValue:function(a){var b=this._inputElementValue;this._inputHasContent=b||0===b||'number'===a.type&&!a.checkValidity(),this.updateAddons({inputElement:a,value:b,invalid:this.invalid})},_handleValueAndAutoValidate:function(a){if(this.autoValidate&&a){var b;b=a.validate?a.validate(this._inputElementValue):a.checkValidity(),this.invalid=!b}this._handleValue(a)},_onIronInputValidate:function(){this.invalid=this._inputElement.invalid},_invalidChanged:function(){this._addons&&this.updateAddons({invalid:this.invalid})},updateAddons:function(a){for(var b,c=0;b=this._addons[c];c++)b.update(a)},_computeInputContentClass:function(a,b,c,d,e){var f='input-content';if(!a){var g=this.querySelector('label');b||e?(f+=' label-is-floating',this.$.labelAndInputContainer.style.position='static',d?f+=' is-invalid':c&&(f+=' label-is-highlighted')):(g&&(this.$.labelAndInputContainer.style.position='relative'),d&&(f+=' is-invalid'))}else e&&(f+=' label-is-hidden'),d&&(f+=' is-invalid');return c&&(f+=' focused'),f},_computeUnderlineClass:function(a,b){var c='underline';return b?c+=' is-invalid':a&&(c+=' is-highlighted'),c},_computeAddOnContentClass:function(a,b){var c='add-on-content';return b?c+=' is-invalid':a&&(c+=' is-highlighted'),c}});</script><dom-module id="paper-input-error" assetpath="../bower_components/paper-input/"><template><style>:host{display:inline-block;visibility:hidden;color:var(--paper-input-container-invalid-color, var(--error-color));@apply --paper-font-caption;@apply --paper-input-error;position:absolute;left:0;right:0;}:host([invalid]){visibility:visible;}</style><slot></slot></template></dom-module><script>Polymer({is:'paper-input-error',behaviors:[Polymer.PaperInputAddonBehavior],properties:{invalid:{readOnly:!0,reflectToAttribute:!0,type:Boolean}},update:function(a){this._setInvalid(a.invalid)}});</script><dom-module id="paper-input" assetpath="../bower_components/paper-input/"><template><style>:host{display:block;}:host([focused]){outline:none;}:host([hidden]){display:none !important;}input{position:relative;outline:none;box-shadow:none;margin:0;padding:0;width:100%;max-width:100%;background:transparent;border:none;color:var(--paper-input-container-input-color, var(--primary-text-color));-webkit-appearance:none;text-align:inherit;vertical-align:bottom;min-width:0;@apply --paper-font-subhead;@apply --paper-input-container-input;}input:disabled{@apply --paper-input-container-input-disabled;}input::-webkit-outer-spin-button,
      input::-webkit-inner-spin-button{@apply --paper-input-container-input-webkit-spinner;}input::-webkit-clear-button{@apply --paper-input-container-input-webkit-clear;}input::-webkit-calendar-picker-indicator{@apply --paper-input-container-input-webkit-calendar-picker-indicator;}input::-webkit-input-placeholder{color:var(--paper-input-container-color, var(--secondary-text-color));}input:-moz-placeholder{color:var(--paper-input-container-color, var(--secondary-text-color));}input::-moz-placeholder{color:var(--paper-input-container-color, var(--secondary-text-color));}input::-ms-clear{@apply --paper-input-container-ms-clear;}input::-ms-reveal{@apply --paper-input-container-ms-reveal;}input:-ms-input-placeholder{color:var(--paper-input-container-color, var(--secondary-text-color));}label{pointer-events:none;}</style><paper-input-container id="container" no-label-float="[[noLabelFloat]]" always-float-label="[[_computeAlwaysFloatLabel(alwaysFloatLabel,placeholder)]]" auto-validate$="[[autoValidate]]" disabled$="[[disabled]]" invalid="[[invalid]]"><slot name="prefix" slot="prefix"></slot><label hidden$="[[!label]]" aria-hidden="true" for$="[[_inputId]]" slot="label">[[label]]</label><span id="template-placeholder"></span><slot name="suffix" slot="suffix"></slot><template is="dom-if" if="[[errorMessage]]"><paper-input-error aria-live="assertive" slot="add-on">[[errorMessage]]</paper-input-error></template><template is="dom-if" if="[[charCounter]]"><paper-input-char-counter slot="add-on"></paper-input-char-counter></template></paper-input-container></template><template id="v0"><input is="iron-input" slot="input" class="input-element" id$="[[_inputId]]" aria-labelledby$="[[_ariaLabelledBy]]" aria-describedby$="[[_ariaDescribedBy]]" disabled$="[[disabled]]" title$="[[title]]" bind-value="{{value}}" invalid="{{invalid}}" prevent-invalid-input="[[preventInvalidInput]]" allowed-pattern="[[allowedPattern]]" validator="[[validator]]" type$="[[type]]" pattern$="[[pattern]]" required$="[[required]]" autocomplete$="[[autocomplete]]" autofocus$="[[autofocus]]" inputmode$="[[inputmode]]" minlength$="[[minlength]]" maxlength$="[[maxlength]]" min$="[[min]]" max$="[[max]]" step$="[[step]]" name$="[[name]]" placeholder$="[[placeholder]]" readonly$="[[readonly]]" list$="[[list]]" size$="[[size]]" autocapitalize$="[[autocapitalize]]" autocorrect$="[[autocorrect]]" on-change="_onChange" tabindex$="[[tabIndex]]" autosave$="[[autosave]]" results$="[[results]]" accept$="[[accept]]" multiple$="[[multiple]]"></template><template id="v1"><iron-input bind-value="{{value}}" slot="input" class="input-element" id$="[[_inputId]]" maxlength$="[[maxlength]]" allowed-pattern="[[allowedPattern]]" invalid="{{invalid}}" validator="[[validator]]"><input aria-labelledby$="[[_ariaLabelledBy]]" aria-describedby$="[[_ariaDescribedBy]]" disabled$="[[disabled]]" title$="[[title]]" type$="[[type]]" pattern$="[[pattern]]" required$="[[required]]" autocomplete$="[[autocomplete]]" autofocus$="[[autofocus]]" inputmode$="[[inputmode]]" minlength$="[[minlength]]" maxlength$="[[maxlength]]" min$="[[min]]" max$="[[max]]" step$="[[step]]" name$="[[name]]" placeholder$="[[placeholder]]" readonly$="[[readonly]]" list$="[[list]]" size$="[[size]]" autocapitalize$="[[autocapitalize]]" autocorrect$="[[autocorrect]]" on-change="_onChange" tabindex$="[[tabIndex]]" autosave$="[[autosave]]" results$="[[results]]" accept$="[[accept]]" multiple$="[[multiple]]"></iron-input></template></dom-module><script>Polymer({is:'paper-input',behaviors:[Polymer.PaperInputBehavior,Polymer.IronFormElementBehavior],beforeRegister:function(){var a=document.createElement('iron-input'),b='function'==typeof a._initSlottedInput?'v1':'v0',c=Polymer.DomModule.import('paper-input','template'),d=Polymer.DomModule.import('paper-input','template#'+b),e=c.content.querySelector('#template-placeholder');e&&e.parentNode.replaceChild(d.content,e)},get _focusableElement(){return Polymer.Element?this.inputElement._inputElement:this.inputElement},listeners:{"iron-input-ready":'_onIronInputReady'},_onIronInputReady:function(){this.$.nativeInput||(this.$.nativeInput=this.$$('input')),this.inputElement&&-1!==this._typesThatHaveText.indexOf(this.$.nativeInput.type)&&(this.alwaysFloatLabel=!0),!this.inputElement.bindValue||this.$.container._handleValueAndAutoValidate(this.inputElement)}});</script><script>Polymer.IronMenubarBehaviorImpl={hostAttributes:{role:'menubar'},keyBindings:{left:'_onLeftKey',right:'_onRightKey'},_onUpKey:function(a){this.focusedItem.click(),a.detail.keyboardEvent.preventDefault()},_onDownKey:function(a){this.focusedItem.click(),a.detail.keyboardEvent.preventDefault()},get _isRTL(){return'rtl'===window.getComputedStyle(this).direction},_onLeftKey:function(a){this._isRTL?this._focusNext():this._focusPrevious(),a.detail.keyboardEvent.preventDefault()},_onRightKey:function(a){this._isRTL?this._focusPrevious():this._focusNext(),a.detail.keyboardEvent.preventDefault()},_onKeydown:function(a){this.keyboardEventMatchesKeys(a,'up down left right esc')||this._focusWithKeyboardEvent(a)}},Polymer.IronMenubarBehavior=[Polymer.IronMenuBehavior,Polymer.IronMenubarBehaviorImpl];</script><iron-iconset-svg name="icons" size="24"><svg><defs><g id="3d-rotation"><path d="M7.52 21.48C4.25 19.94 1.91 16.76 1.55 13H.05C.56 19.16 5.71 24 12 24l.66-.03-3.81-3.81-1.33 1.32zm.89-6.52c-.19 0-.37-.03-.52-.08-.16-.06-.29-.13-.4-.24-.11-.1-.2-.22-.26-.37-.06-.14-.09-.3-.09-.47h-1.3c0 .36.07.68.21.95.14.27.33.5.56.69.24.18.51.32.82.41.3.1.62.15.96.15.37 0 .72-.05 1.03-.15.32-.1.6-.25.83-.44s.42-.43.55-.72c.13-.29.2-.61.2-.97 0-.19-.02-.38-.07-.56-.05-.18-.12-.35-.23-.51-.1-.16-.24-.3-.4-.43-.17-.13-.37-.23-.61-.31.2-.09.37-.2.52-.33.15-.13.27-.27.37-.42.1-.15.17-.3.22-.46.05-.16.07-.32.07-.48 0-.36-.06-.68-.18-.96-.12-.28-.29-.51-.51-.69-.2-.19-.47-.33-.77-.43C9.1 8.05 8.76 8 8.39 8c-.36 0-.69.05-1 .16-.3.11-.57.26-.79.45-.21.19-.38.41-.51.67-.12.26-.18.54-.18.85h1.3c0-.17.03-.32.09-.45s.14-.25.25-.34c.11-.09.23-.17.38-.22.15-.05.3-.08.48-.08.4 0 .7.1.89.31.19.2.29.49.29.86 0 .18-.03.34-.08.49-.05.15-.14.27-.25.37-.11.1-.25.18-.41.24-.16.06-.36.09-.58.09H7.5v1.03h.77c.22 0 .42.02.6.07s.33.13.45.23c.12.11.22.24.29.4.07.16.1.35.1.57 0 .41-.12.72-.35.93-.23.23-.55.33-.95.33zm8.55-5.92c-.32-.33-.7-.59-1.14-.77-.43-.18-.92-.27-1.46-.27H12v8h2.3c.55 0 1.06-.09 1.51-.27.45-.18.84-.43 1.16-.76.32-.33.57-.73.74-1.19.17-.47.26-.99.26-1.57v-.4c0-.58-.09-1.1-.26-1.57-.18-.47-.43-.87-.75-1.2zm-.39 3.16c0 .42-.05.79-.14 1.13-.1.33-.24.62-.43.85-.19.23-.43.41-.71.53-.29.12-.62.18-.99.18h-.91V9.12h.97c.72 0 1.27.23 1.64.69.38.46.57 1.12.57 1.99v.4zM12 0l-.66.03 3.81 3.81 1.33-1.33c3.27 1.55 5.61 4.72 5.96 8.48h1.5C23.44 4.84 18.29 0 12 0z"></path></g><g id="accessibility"><path d="M12 2c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zm9 7h-6v13h-2v-6h-2v6H9V9H3V7h18v2z"></path></g><g id="accessible"><circle cx="12" cy="4" r="2"></circle><path d="M19 13v-2c-1.54.02-3.09-.75-4.07-1.83l-1.29-1.43c-.17-.19-.38-.34-.61-.45-.01 0-.01-.01-.02-.01H13c-.35-.2-.75-.3-1.19-.26C10.76 7.11 10 8.04 10 9.09V15c0 1.1.9 2 2 2h5v5h2v-5.5c0-1.1-.9-2-2-2h-3v-3.45c1.29 1.07 3.25 1.94 5 1.95zm-6.17 5c-.41 1.16-1.52 2-2.83 2-1.66 0-3-1.34-3-3 0-1.31.84-2.41 2-2.83V12.1c-2.28.46-4 2.48-4 4.9 0 2.76 2.24 5 5 5 2.42 0 4.44-1.72 4.9-4h-2.07z"></path></g><g id="account-balance"><path d="M4 10v7h3v-7H4zm6 0v7h3v-7h-3zM2 22h19v-3H2v3zm14-12v7h3v-7h-3zm-4.5-9L2 6v2h19V6l-9.5-5z"></path></g><g id="account-balance-wallet"><path d="M21 18v1c0 1.1-.9 2-2 2H5c-1.11 0-2-.9-2-2V5c0-1.1.89-2 2-2h14c1.1 0 2 .9 2 2v1h-9c-1.11 0-2 .9-2 2v8c0 1.1.89 2 2 2h9zm-9-2h10V8H12v8zm4-2.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"></path></g><g id="account-box"><path d="M3 5v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2H5c-1.11 0-2 .9-2 2zm12 4c0 1.66-1.34 3-3 3s-3-1.34-3-3 1.34-3 3-3 3 1.34 3 3zm-9 8c0-2 4-3.1 6-3.1s6 1.1 6 3.1v1H6v-1z"></path></g><g id="account-circle"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"></path></g><g id="add"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"></path></g><g id="add-alert"><path d="M10.01 21.01c0 1.1.89 1.99 1.99 1.99s1.99-.89 1.99-1.99h-3.98zm8.87-4.19V11c0-3.25-2.25-5.97-5.29-6.69v-.72C13.59 2.71 12.88 2 12 2s-1.59.71-1.59 1.59v.72C7.37 5.03 5.12 7.75 5.12 11v5.82L3 18.94V20h18v-1.06l-2.12-2.12zM16 13.01h-3v3h-2v-3H8V11h3V8h2v3h3v2.01z"></path></g><g id="add-box"><path d="M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"></path></g><g id="add-circle"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"></path></g><g id="add-circle-outline"><path d="M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"></path></g><g id="add-shopping-cart"><path d="M11 9h2V6h3V4h-3V1h-2v3H8v2h3v3zm-4 9c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zm10 0c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2zm-9.83-3.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.86-7.01L19.42 4h-.01l-1.1 2-2.76 5H8.53l-.13-.27L6.16 6l-.95-2-.94-2H1v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.13 0-.25-.11-.25-.25z"></path></g><g id="alarm"><path d="M22 5.72l-4.6-3.86-1.29 1.53 4.6 3.86L22 5.72zM7.88 3.39L6.6 1.86 2 5.71l1.29 1.53 4.59-3.85zM12.5 8H11v6l4.75 2.85.75-1.23-4-2.37V8zM12 4c-4.97 0-9 4.03-9 9s4.02 9 9 9c4.97 0 9-4.03 9-9s-4.03-9-9-9zm0 16c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"></path></g><g id="alarm-add"><path d="M7.88 3.39L6.6 1.86 2 5.71l1.29 1.53 4.59-3.85zM22 5.72l-4.6-3.86-1.29 1.53 4.6 3.86L22 5.72zM12 4c-4.97 0-9 4.03-9 9s4.02 9 9 9c4.97 0 9-4.03 9-9s-4.03-9-9-9zm0 16c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7zm1-11h-2v3H8v2h3v3h2v-3h3v-2h-3V9z"></path></g><g id="alarm-off"><path d="M12 6c3.87 0 7 3.13 7 7 0 .84-.16 1.65-.43 2.4l1.52 1.52c.58-1.19.91-2.51.91-3.92 0-4.97-4.03-9-9-9-1.41 0-2.73.33-3.92.91L9.6 6.43C10.35 6.16 11.16 6 12 6zm10-.28l-4.6-3.86-1.29 1.53 4.6 3.86L22 5.72zM2.92 2.29L1.65 3.57 2.98 4.9l-1.11.93 1.42 1.42 1.11-.94.8.8C3.83 8.69 3 10.75 3 13c0 4.97 4.02 9 9 9 2.25 0 4.31-.83 5.89-2.2l2.2 2.2 1.27-1.27L3.89 3.27l-.97-.98zm13.55 16.1C15.26 19.39 13.7 20 12 20c-3.87 0-7-3.13-7-7 0-1.7.61-3.26 1.61-4.47l9.86 9.86zM8.02 3.28L6.6 1.86l-.86.71 1.42 1.42.86-.71z"></path></g><g id="alarm-on"><path d="M22 5.72l-4.6-3.86-1.29 1.53 4.6 3.86L22 5.72zM7.88 3.39L6.6 1.86 2 5.71l1.29 1.53 4.59-3.85zM12 4c-4.97 0-9 4.03-9 9s4.02 9 9 9c4.97 0 9-4.03 9-9s-4.03-9-9-9zm0 16c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7zm-1.46-5.47L8.41 12.4l-1.06 1.06 3.18 3.18 6-6-1.06-1.06-4.93 4.95z"></path></g><g id="all-out"><path d="M16.21 4.16l4 4v-4zm4 12l-4 4h4zm-12 4l-4-4v4zm-4-12l4-4h-4zm12.95-.95c-2.73-2.73-7.17-2.73-9.9 0s-2.73 7.17 0 9.9 7.17 2.73 9.9 0 2.73-7.16 0-9.9zm-1.1 8.8c-2.13 2.13-5.57 2.13-7.7 0s-2.13-5.57 0-7.7 5.57-2.13 7.7 0 2.13 5.57 0 7.7z"></path></g><g id="android"><path d="M6 18c0 .55.45 1 1 1h1v3.5c0 .83.67 1.5 1.5 1.5s1.5-.67 1.5-1.5V19h2v3.5c0 .83.67 1.5 1.5 1.5s1.5-.67 1.5-1.5V19h1c.55 0 1-.45 1-1V8H6v10zM3.5 8C2.67 8 2 8.67 2 9.5v7c0 .83.67 1.5 1.5 1.5S5 17.33 5 16.5v-7C5 8.67 4.33 8 3.5 8zm17 0c-.83 0-1.5.67-1.5 1.5v7c0 .83.67 1.5 1.5 1.5s1.5-.67 1.5-1.5v-7c0-.83-.67-1.5-1.5-1.5zm-4.97-5.84l1.3-1.3c.2-.2.2-.51 0-.71-.2-.2-.51-.2-.71 0l-1.48 1.48C13.85 1.23 12.95 1 12 1c-.96 0-1.86.23-2.66.63L7.85.15c-.2-.2-.51-.2-.71 0-.2.2-.2.51 0 .71l1.31 1.31C6.97 3.26 6 5.01 6 7h12c0-1.99-.97-3.75-2.47-4.84zM10 5H9V4h1v1zm5 0h-1V4h1v1z"></path></g><g id="announcement"><path d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-7 9h-2V5h2v6zm0 4h-2v-2h2v2z"></path></g><g id="apps"><path d="M4 8h4V4H4v4zm6 12h4v-4h-4v4zm-6 0h4v-4H4v4zm0-6h4v-4H4v4zm6 0h4v-4h-4v4zm6-10v4h4V4h-4zm-6 4h4V4h-4v4zm6 6h4v-4h-4v4zm0 6h4v-4h-4v4z"></path></g><g id="archive"><path d="M20.54 5.23l-1.39-1.68C18.88 3.21 18.47 3 18 3H6c-.47 0-.88.21-1.16.55L3.46 5.23C3.17 5.57 3 6.02 3 6.5V19c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V6.5c0-.48-.17-.93-.46-1.27zM12 17.5L6.5 12H10v-2h4v2h3.5L12 17.5zM5.12 5l.81-1h12l.94 1H5.12z"></path></g><g id="arrow-back"><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"></path></g><g id="arrow-downward"><path d="M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"></path></g><g id="arrow-drop-down"><path d="M7 10l5 5 5-5z"></path></g><g id="arrow-drop-down-circle"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 12l-4-4h8l-4 4z"></path></g><g id="arrow-drop-up"><path d="M7 14l5-5 5 5z"></path></g><g id="arrow-forward"><path d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"></path></g><g id="arrow-upward"><path d="M4 12l1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8-8 8z"></path></g><g id="aspect-ratio"><path d="M19 12h-2v3h-3v2h5v-5zM7 9h3V7H5v5h2V9zm14-6H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16.01H3V4.99h18v14.02z"></path></g><g id="assessment"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"></path></g><g id="assignment"><path d="M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm2 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"></path></g><g id="assignment-ind"><path d="M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm0 4c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm6 12H6v-1.4c0-2 4-3.1 6-3.1s6 1.1 6 3.1V19z"></path></g><g id="assignment-late"><path d="M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-6 15h-2v-2h2v2zm0-4h-2V8h2v6zm-1-9c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1z"></path></g><g id="assignment-return"><path d="M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm4 12h-4v3l-5-5 5-5v3h4v4z"></path></g><g id="assignment-returned"><path d="M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm0 15l-5-5h3V9h4v4h3l-5 5z"></path></g><g id="assignment-turned-in"><path d="M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm-2 14l-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9l-8 8z"></path></g><g id="attachment"><path d="M2 12.5C2 9.46 4.46 7 7.5 7H18c2.21 0 4 1.79 4 4s-1.79 4-4 4H9.5C8.12 15 7 13.88 7 12.5S8.12 10 9.5 10H17v2H9.41c-.55 0-.55 1 0 1H18c1.1 0 2-.9 2-2s-.9-2-2-2H7.5C5.57 9 4 10.57 4 12.5S5.57 16 7.5 16H17v2H7.5C4.46 18 2 15.54 2 12.5z"></path></g><g id="autorenew"><path d="M12 6v3l4-4-4-4v3c-4.42 0-8 3.58-8 8 0 1.57.46 3.03 1.24 4.26L6.7 14.8c-.45-.83-.7-1.79-.7-2.8 0-3.31 2.69-6 6-6zm6.76 1.74L17.3 9.2c.44.84.7 1.79.7 2.8 0 3.31-2.69 6-6 6v-3l-4 4 4 4v-3c4.42 0 8-3.58 8-8 0-1.57-.46-3.03-1.24-4.26z"></path></g><g id="backspace"><path d="M22 3H7c-.69 0-1.23.35-1.59.88L0 12l5.41 8.11c.36.53.9.89 1.59.89h15c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-3 12.59L17.59 17 14 13.41 10.41 17 9 15.59 12.59 12 9 8.41 10.41 7 14 10.59 17.59 7 19 8.41 15.41 12 19 15.59z"></path></g><g id="backup"><path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM14 13v4h-4v-4H7l5-5 5 5h-3z"></path></g><g id="block"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM4 12c0-4.42 3.58-8 8-8 1.85 0 3.55.63 4.9 1.69L5.69 16.9C4.63 15.55 4 13.85 4 12zm8 8c-1.85 0-3.55-.63-4.9-1.69L18.31 7.1C19.37 8.45 20 10.15 20 12c0 4.42-3.58 8-8 8z"></path></g><g id="book"><path d="M18 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 4h5v8l-2.5-1.5L6 12V4z"></path></g><g id="bookmark"><path d="M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2z"></path></g><g id="bookmark-border"><path d="M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2zm0 15l-5-2.18L7 18V5h10v13z"></path></g><g id="bug-report"><path d="M20 8h-2.81c-.45-.78-1.07-1.45-1.82-1.96L17 4.41 15.59 3l-2.17 2.17C12.96 5.06 12.49 5 12 5c-.49 0-.96.06-1.41.17L8.41 3 7 4.41l1.62 1.63C7.88 6.55 7.26 7.22 6.81 8H4v2h2.09c-.05.33-.09.66-.09 1v1H4v2h2v1c0 .34.04.67.09 1H4v2h2.81c1.04 1.79 2.97 3 5.19 3s4.15-1.21 5.19-3H20v-2h-2.09c.05-.33.09-.66.09-1v-1h2v-2h-2v-1c0-.34-.04-.67-.09-1H20V8zm-6 8h-4v-2h4v2zm0-4h-4v-2h4v2z"></path></g><g id="build"><path d="M22.7 19l-9.1-9.1c.9-2.3.4-5-1.5-6.9-2-2-5-2.4-7.4-1.3L9 6 6 9 1.6 4.7C.4 7.1.9 10.1 2.9 12.1c1.9 1.9 4.6 2.4 6.9 1.5l9.1 9.1c.4.4 1 .4 1.4 0l2.3-2.3c.5-.4.5-1.1.1-1.4z"></path></g><g id="cached"><path d="M19 8l-4 4h3c0 3.31-2.69 6-6 6-1.01 0-1.97-.25-2.8-.7l-1.46 1.46C8.97 19.54 10.43 20 12 20c4.42 0 8-3.58 8-8h3l-4-4zM6 12c0-3.31 2.69-6 6-6 1.01 0 1.97.25 2.8.7l1.46-1.46C15.03 4.46 13.57 4 12 4c-4.42 0-8 3.58-8 8H1l4 4 4-4H6z"></path></g><g id="camera-enhance"><path d="M9 3L7.17 5H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2h-3.17L15 3H9zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-1l1.25-2.75L16 13l-2.75-1.25L12 9l-1.25 2.75L8 13l2.75 1.25z"></path></g><g id="cancel"><path d="M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"></path></g><g id="card-giftcard"><path d="M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.05 0-1.96.54-2.5 1.35l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 15H4v-2h16v2zm0-5H4V8h5.08L7 10.83 8.62 12 11 8.76l1-1.36 1 1.36L15.38 12 17 10.83 14.92 8H20v6z"></path></g><g id="card-membership"><path d="M20 2H4c-1.11 0-2 .89-2 2v11c0 1.11.89 2 2 2h4v5l4-2 4 2v-5h4c1.11 0 2-.89 2-2V4c0-1.11-.89-2-2-2zm0 13H4v-2h16v2zm0-5H4V4h16v6z"></path></g><g id="card-travel"><path d="M20 6h-3V4c0-1.11-.89-2-2-2H9c-1.11 0-2 .89-2 2v2H4c-1.11 0-2 .89-2 2v11c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zM9 4h6v2H9V4zm11 15H4v-2h16v2zm0-5H4V8h3v2h2V8h6v2h2V8h3v6z"></path></g><g id="change-history"><path d="M12 7.77L18.39 18H5.61L12 7.77M12 4L2 20h20L12 4z"></path></g><g id="check"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"></path></g><g id="check-box"><path d="M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"></path></g><g id="check-box-outline-blank"><path d="M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"></path></g><g id="check-circle"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"></path></g><g id="chevron-left"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"></path></g><g id="chevron-right"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"></path></g><g id="chrome-reader-mode"><path d="M13 12h7v1.5h-7zm0-2.5h7V11h-7zm0 5h7V16h-7zM21 4H3c-1.1 0-2 .9-2 2v13c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 15h-9V6h9v13z"></path></g><g id="class"><path d="M18 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 4h5v8l-2.5-1.5L6 12V4z"></path></g><g id="clear"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></g><g id="close"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></g><g id="cloud"><path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96z"></path></g><g id="cloud-circle"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm4.5 14H8c-1.66 0-3-1.34-3-3s1.34-3 3-3l.14.01C8.58 8.28 10.13 7 12 7c2.21 0 4 1.79 4 4h.5c1.38 0 2.5 1.12 2.5 2.5S17.88 16 16.5 16z"></path></g><g id="cloud-done"><path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM10 17l-3.5-3.5 1.41-1.41L10 14.17 15.18 9l1.41 1.41L10 17z"></path></g><g id="cloud-download"><path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM17 13l-5 5-5-5h3V9h4v4h3z"></path></g><g id="cloud-off"><path d="M19.35 10.04C18.67 6.59 15.64 4 12 4c-1.48 0-2.85.43-4.01 1.17l1.46 1.46C10.21 6.23 11.08 6 12 6c3.04 0 5.5 2.46 5.5 5.5v.5H19c1.66 0 3 1.34 3 3 0 1.13-.64 2.11-1.56 2.62l1.45 1.45C23.16 18.16 24 16.68 24 15c0-2.64-2.05-4.78-4.65-4.96zM3 5.27l2.75 2.74C2.56 8.15 0 10.77 0 14c0 3.31 2.69 6 6 6h11.73l2 2L21 20.73 4.27 4 3 5.27zM7.73 10l8 8H6c-2.21 0-4-1.79-4-4s1.79-4 4-4h1.73z"></path></g><g id="cloud-queue"><path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM19 18H6c-2.21 0-4-1.79-4-4s1.79-4 4-4h.71C7.37 7.69 9.48 6 12 6c3.04 0 5.5 2.46 5.5 5.5v.5H19c1.66 0 3 1.34 3 3s-1.34 3-3 3z"></path></g><g id="cloud-upload"><path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM14 13v4h-4v-4H7l5-5 5 5h-3z"></path></g><g id="code"><path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"></path></g><g id="compare-arrows"><path d="M9.01 14H2v2h7.01v3L13 15l-3.99-4v3zm5.98-1v-3H22V8h-7.01V5L11 9l3.99 4z"></path></g><g id="content-copy"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"></path></g><g id="content-cut"><path d="M9.64 7.64c.23-.5.36-1.05.36-1.64 0-2.21-1.79-4-4-4S2 3.79 2 6s1.79 4 4 4c.59 0 1.14-.13 1.64-.36L10 12l-2.36 2.36C7.14 14.13 6.59 14 6 14c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4c0-.59-.13-1.14-.36-1.64L12 14l7 7h3v-1L9.64 7.64zM6 8c-1.1 0-2-.89-2-2s.9-2 2-2 2 .89 2 2-.9 2-2 2zm0 12c-1.1 0-2-.89-2-2s.9-2 2-2 2 .89 2 2-.9 2-2 2zm6-7.5c-.28 0-.5-.22-.5-.5s.22-.5.5-.5.5.22.5.5-.22.5-.5.5zM19 3l-6 6 2 2 7-7V3z"></path></g><g id="content-paste"><path d="M19 2h-4.18C14.4.84 13.3 0 12 0c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm7 18H5V4h2v3h10V4h2v16z"></path></g><g id="copyright"><path d="M10.08 10.86c.05-.33.16-.62.3-.87s.34-.46.59-.62c.24-.15.54-.22.91-.23.23.01.44.05.63.13.2.09.38.21.52.36s.25.33.34.53.13.42.14.64h1.79c-.02-.47-.11-.9-.28-1.29s-.4-.73-.7-1.01-.66-.5-1.08-.66-.88-.23-1.39-.23c-.65 0-1.22.11-1.7.34s-.88.53-1.2.92-.56.84-.71 1.36S8 11.29 8 11.87v.27c0 .58.08 1.12.23 1.64s.39.97.71 1.35.72.69 1.2.91 1.05.34 1.7.34c.47 0 .91-.08 1.32-.23s.77-.36 1.08-.63.56-.58.74-.94.29-.74.3-1.15h-1.79c-.01.21-.06.4-.15.58s-.21.33-.36.46-.32.23-.52.3c-.19.07-.39.09-.6.1-.36-.01-.66-.08-.89-.23-.25-.16-.45-.37-.59-.62s-.25-.55-.3-.88-.08-.67-.08-1v-.27c0-.35.03-.68.08-1.01zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"></path></g><g id="create"><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"></path></g><g id="create-new-folder"><path d="M20 6h-8l-2-2H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-1 8h-3v3h-2v-3h-3v-2h3V9h2v3h3v2z"></path></g><g id="credit-card"><path d="M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2zm0 14H4v-6h16v6zm0-10H4V6h16v2z"></path></g><g id="dashboard"><path d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"></path></g><g id="date-range"><path d="M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z"></path></g><g id="delete"><path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"></path></g><g id="delete-forever"><path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zm2.46-7.12l1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14l-2.13-2.12zM15.5 4l-1-1h-5l-1 1H5v2h14V4z"></path></g><g id="delete-sweep"><path d="M15 16h4v2h-4zm0-8h7v2h-7zm0 4h6v2h-6zM3 18c0 1.1.9 2 2 2h6c1.1 0 2-.9 2-2V8H3v10zM14 5h-3l-1-1H6L5 5H2v2h12z"></path></g><g id="description"><path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"></path></g><g id="dns"><path d="M20 13H4c-.55 0-1 .45-1 1v6c0 .55.45 1 1 1h16c.55 0 1-.45 1-1v-6c0-.55-.45-1-1-1zM7 19c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zM20 3H4c-.55 0-1 .45-1 1v6c0 .55.45 1 1 1h16c.55 0 1-.45 1-1V4c0-.55-.45-1-1-1zM7 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"></path></g><g id="done"><path d="M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"></path></g><g id="done-all"><path d="M18 7l-1.41-1.41-6.34 6.34 1.41 1.41L18 7zm4.24-1.41L11.66 16.17 7.48 12l-1.41 1.41L11.66 19l12-12-1.42-1.41zM.41 13.41L6 19l1.41-1.41L1.83 12 .41 13.41z"></path></g><g id="donut-large"><path d="M11 5.08V2c-5 .5-9 4.81-9 10s4 9.5 9 10v-3.08c-3-.48-6-3.4-6-6.92s3-6.44 6-6.92zM18.97 11H22c-.47-5-4-8.53-9-9v3.08C16 5.51 18.54 8 18.97 11zM13 18.92V22c5-.47 8.53-4 9-9h-3.03c-.43 3-2.97 5.49-5.97 5.92z"></path></g><g id="donut-small"><path d="M11 9.16V2c-5 .5-9 4.79-9 10s4 9.5 9 10v-7.16c-1-.41-2-1.52-2-2.84s1-2.43 2-2.84zM14.86 11H22c-.48-4.75-4-8.53-9-9v7.16c1 .3 1.52.98 1.86 1.84zM13 14.84V22c5-.47 8.52-4.25 9-9h-7.14c-.34.86-.86 1.54-1.86 1.84z"></path></g><g id="drafts"><path d="M21.99 8c0-.72-.37-1.35-.94-1.7L12 1 2.95 6.3C2.38 6.65 2 7.28 2 8v10c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2l-.01-10zM12 13L3.74 7.84 12 3l8.26 4.84L12 13z"></path></g><g id="eject"><path d="M5 17h14v2H5zm7-12L5.33 15h13.34z"></path></g><g id="error"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"></path></g><g id="error-outline"><path d="M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"></path></g><g id="euro-symbol"><path d="M15 18.5c-2.51 0-4.68-1.42-5.76-3.5H15v-2H8.58c-.05-.33-.08-.66-.08-1s.03-.67.08-1H15V9H9.24C10.32 6.92 12.5 5.5 15 5.5c1.61 0 3.09.59 4.23 1.57L21 5.3C19.41 3.87 17.3 3 15 3c-3.92 0-7.24 2.51-8.48 6H3v2h3.06c-.04.33-.06.66-.06 1 0 .34.02.67.06 1H3v2h3.52c1.24 3.49 4.56 6 8.48 6 2.31 0 4.41-.87 6-2.3l-1.78-1.77c-1.13.98-2.6 1.57-4.22 1.57z"></path></g><g id="event"><path d="M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z"></path></g><g id="event-seat"><path d="M4 18v3h3v-3h10v3h3v-6H4zm15-8h3v3h-3zM2 10h3v3H2zm15 3H7V5c0-1.1.9-2 2-2h6c1.1 0 2 .9 2 2v8z"></path></g><g id="exit-to-app"><path d="M10.09 15.59L11.5 17l5-5-5-5-1.41 1.41L12.67 11H3v2h9.67l-2.58 2.59zM19 3H5c-1.11 0-2 .9-2 2v4h2V5h14v14H5v-4H3v4c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"></path></g><g id="expand-less"><path d="M12 8l-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"></path></g><g id="expand-more"><path d="M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"></path></g><g id="explore"><path d="M12 10.9c-.61 0-1.1.49-1.1 1.1s.49 1.1 1.1 1.1c.61 0 1.1-.49 1.1-1.1s-.49-1.1-1.1-1.1zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm2.19 12.19L6 18l3.81-8.19L18 6l-3.81 8.19z"></path></g><g id="extension"><path d="M20.5 11H19V7c0-1.1-.9-2-2-2h-4V3.5C13 2.12 11.88 1 10.5 1S8 2.12 8 3.5V5H4c-1.1 0-1.99.9-1.99 2v3.8H3.5c1.49 0 2.7 1.21 2.7 2.7s-1.21 2.7-2.7 2.7H2V20c0 1.1.9 2 2 2h3.8v-1.5c0-1.49 1.21-2.7 2.7-2.7 1.49 0 2.7 1.21 2.7 2.7V22H17c1.1 0 2-.9 2-2v-4h1.5c1.38 0 2.5-1.12 2.5-2.5S21.88 11 20.5 11z"></path></g><g id="face"><path d="M9 11.75c-.69 0-1.25.56-1.25 1.25s.56 1.25 1.25 1.25 1.25-.56 1.25-1.25-.56-1.25-1.25-1.25zm6 0c-.69 0-1.25.56-1.25 1.25s.56 1.25 1.25 1.25 1.25-.56 1.25-1.25-.56-1.25-1.25-1.25zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8 0-.29.02-.58.05-.86 2.36-1.05 4.23-2.98 5.21-5.37C11.07 8.33 14.05 10 17.42 10c.78 0 1.53-.09 2.25-.26.21.71.33 1.47.33 2.26 0 4.41-3.59 8-8 8z"></path></g><g id="favorite"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"></path></g><g id="favorite-border"><path d="M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3zm-4.4 15.55l-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05z"></path></g><g id="feedback"><path d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-7 12h-2v-2h2v2zm0-4h-2V6h2v4z"></path></g><g id="file-download"><path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"></path></g><g id="file-upload"><path d="M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z"></path></g><g id="filter-list"><path d="M10 18h4v-2h-4v2zM3 6v2h18V6H3zm3 7h12v-2H6v2z"></path></g><g id="find-in-page"><path d="M20 19.59V8l-6-6H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c.45 0 .85-.15 1.19-.4l-4.43-4.43c-.8.52-1.74.83-2.76.83-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5c0 1.02-.31 1.96-.83 2.75L20 19.59zM9 13c0 1.66 1.34 3 3 3s3-1.34 3-3-1.34-3-3-3-3 1.34-3 3z"></path></g><g id="find-replace"><path d="M11 6c1.38 0 2.63.56 3.54 1.46L12 10h6V4l-2.05 2.05C14.68 4.78 12.93 4 11 4c-3.53 0-6.43 2.61-6.92 6H6.1c.46-2.28 2.48-4 4.9-4zm5.64 9.14c.66-.9 1.12-1.97 1.28-3.14H15.9c-.46 2.28-2.48 4-4.9 4-1.38 0-2.63-.56-3.54-1.46L10 12H4v6l2.05-2.05C7.32 17.22 9.07 18 11 18c1.55 0 2.98-.51 4.14-1.36L20 21.49 21.49 20l-4.85-4.86z"></path></g><g id="fingerprint"><path d="M17.81 4.47c-.08 0-.16-.02-.23-.06C15.66 3.42 14 3 12.01 3c-1.98 0-3.86.47-5.57 1.41-.24.13-.54.04-.68-.2-.13-.24-.04-.55.2-.68C7.82 2.52 9.86 2 12.01 2c2.13 0 3.99.47 6.03 1.52.25.13.34.43.21.67-.09.18-.26.28-.44.28zM3.5 9.72c-.1 0-.2-.03-.29-.09-.23-.16-.28-.47-.12-.7.99-1.4 2.25-2.5 3.75-3.27C9.98 4.04 14 4.03 17.15 5.65c1.5.77 2.76 1.86 3.75 3.25.16.22.11.54-.12.7-.23.16-.54.11-.7-.12-.9-1.26-2.04-2.25-3.39-2.94-2.87-1.47-6.54-1.47-9.4.01-1.36.7-2.5 1.7-3.4 2.96-.08.14-.23.21-.39.21zm6.25 12.07c-.13 0-.26-.05-.35-.15-.87-.87-1.34-1.43-2.01-2.64-.69-1.23-1.05-2.73-1.05-4.34 0-2.97 2.54-5.39 5.66-5.39s5.66 2.42 5.66 5.39c0 .28-.22.5-.5.5s-.5-.22-.5-.5c0-2.42-2.09-4.39-4.66-4.39-2.57 0-4.66 1.97-4.66 4.39 0 1.44.32 2.77.93 3.85.64 1.15 1.08 1.64 1.85 2.42.19.2.19.51 0 .71-.11.1-.24.15-.37.15zm7.17-1.85c-1.19 0-2.24-.3-3.1-.89-1.49-1.01-2.38-2.65-2.38-4.39 0-.28.22-.5.5-.5s.5.22.5.5c0 1.41.72 2.74 1.94 3.56.71.48 1.54.71 2.54.71.24 0 .64-.03 1.04-.1.27-.05.53.13.58.41.05.27-.13.53-.41.58-.57.11-1.07.12-1.21.12zM14.91 22c-.04 0-.09-.01-.13-.02-1.59-.44-2.63-1.03-3.72-2.1-1.4-1.39-2.17-3.24-2.17-5.22 0-1.62 1.38-2.94 3.08-2.94 1.7 0 3.08 1.32 3.08 2.94 0 1.07.93 1.94 2.08 1.94s2.08-.87 2.08-1.94c0-3.77-3.25-6.83-7.25-6.83-2.84 0-5.44 1.58-6.61 4.03-.39.81-.59 1.76-.59 2.8 0 .78.07 2.01.67 3.61.1.26-.03.55-.29.64-.26.1-.55-.04-.64-.29-.49-1.31-.73-2.61-.73-3.96 0-1.2.23-2.29.68-3.24 1.33-2.79 4.28-4.6 7.51-4.6 4.55 0 8.25 3.51 8.25 7.83 0 1.62-1.38 2.94-3.08 2.94s-3.08-1.32-3.08-2.94c0-1.07-.93-1.94-2.08-1.94s-2.08.87-2.08 1.94c0 1.71.66 3.31 1.87 4.51.95.94 1.86 1.46 3.27 1.85.27.07.42.35.35.61-.05.23-.26.38-.47.38z"></path></g><g id="first-page"><path d="M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"></path></g><g id="flag"><path d="M14.4 6L14 4H5v17h2v-7h5.6l.4 2h7V6z"></path></g><g id="flight-land"><path d="M2.5 19h19v2h-19zm7.18-5.73l4.35 1.16 5.31 1.42c.8.21 1.62-.26 1.84-1.06.21-.8-.26-1.62-1.06-1.84l-5.31-1.42-2.76-9.02L10.12 2v8.28L5.15 8.95l-.93-2.32-1.45-.39v5.17l1.6.43 5.31 1.43z"></path></g><g id="flight-takeoff"><path d="M2.5 19h19v2h-19zm19.57-9.36c-.21-.8-1.04-1.28-1.84-1.06L14.92 10l-6.9-6.43-1.93.51 4.14 7.17-4.97 1.33-1.97-1.54-1.45.39 1.82 3.16.77 1.33 1.6-.43 5.31-1.42 4.35-1.16L21 11.49c.81-.23 1.28-1.05 1.07-1.85z"></path></g><g id="flip-to-back"><path d="M9 7H7v2h2V7zm0 4H7v2h2v-2zm0-8c-1.11 0-2 .9-2 2h2V3zm4 12h-2v2h2v-2zm6-12v2h2c0-1.1-.9-2-2-2zm-6 0h-2v2h2V3zM9 17v-2H7c0 1.1.89 2 2 2zm10-4h2v-2h-2v2zm0-4h2V7h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2zM5 7H3v12c0 1.1.89 2 2 2h12v-2H5V7zm10-2h2V3h-2v2zm0 12h2v-2h-2v2z"></path></g><g id="flip-to-front"><path d="M3 13h2v-2H3v2zm0 4h2v-2H3v2zm2 4v-2H3c0 1.1.89 2 2 2zM3 9h2V7H3v2zm12 12h2v-2h-2v2zm4-18H9c-1.11 0-2 .9-2 2v10c0 1.1.89 2 2 2h10c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 12H9V5h10v10zm-8 6h2v-2h-2v2zm-4 0h2v-2H7v2z"></path></g><g id="folder"><path d="M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8l-2-2z"></path></g><g id="folder-open"><path d="M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm0 12H4V8h16v10z"></path></g><g id="folder-shared"><path d="M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm-5 3c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zm4 8h-8v-1c0-1.33 2.67-2 4-2s4 .67 4 2v1z"></path></g><g id="font-download"><path d="M9.93 13.5h4.14L12 7.98zM20 2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-4.05 16.5l-1.14-3H9.17l-1.12 3H5.96l5.11-13h1.86l5.11 13h-2.09z"></path></g><g id="forward"><path d="M12 8V4l8 8-8 8v-4H4V8z"></path></g><g id="fullscreen"><path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"></path></g><g id="fullscreen-exit"><path d="M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"></path></g><g id="g-translate"><path d="M20 5h-9.12L10 2H4c-1.1 0-2 .9-2 2v13c0 1.1.9 2 2 2h7l1 3h8c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zM7.17 14.59c-2.25 0-4.09-1.83-4.09-4.09s1.83-4.09 4.09-4.09c1.04 0 1.99.37 2.74 1.07l.07.06-1.23 1.18-.06-.05c-.29-.27-.78-.59-1.52-.59-1.31 0-2.38 1.09-2.38 2.42s1.07 2.42 2.38 2.42c1.37 0 1.96-.87 2.12-1.46H7.08V9.91h3.95l.01.07c.04.21.05.4.05.61 0 2.35-1.61 4-3.92 4zm6.03-1.71c.33.6.74 1.18 1.19 1.7l-.54.53-.65-2.23zm.77-.76h-.99l-.31-1.04h3.99s-.34 1.31-1.56 2.74c-.52-.62-.89-1.23-1.13-1.7zM21 20c0 .55-.45 1-1 1h-7l2-2-.81-2.77.92-.92L17.79 18l.73-.73-2.71-2.68c.9-1.03 1.6-2.25 1.92-3.51H19v-1.04h-3.64V9h-1.04v1.04h-1.96L11.18 6H20c.55 0 1 .45 1 1v13z"></path></g><g id="gavel"><path d="M1 21h12v2H1zM5.245 8.07l2.83-2.827 14.14 14.142-2.828 2.828zM12.317 1l5.657 5.656-2.83 2.83-5.654-5.66zM3.825 9.485l5.657 5.657-2.828 2.828-5.657-5.657z"></path></g><g id="gesture"><path d="M4.59 6.89c.7-.71 1.4-1.35 1.71-1.22.5.2 0 1.03-.3 1.52-.25.42-2.86 3.89-2.86 6.31 0 1.28.48 2.34 1.34 2.98.75.56 1.74.73 2.64.46 1.07-.31 1.95-1.4 3.06-2.77 1.21-1.49 2.83-3.44 4.08-3.44 1.63 0 1.65 1.01 1.76 1.79-3.78.64-5.38 3.67-5.38 5.37 0 1.7 1.44 3.09 3.21 3.09 1.63 0 4.29-1.33 4.69-6.1H21v-2.5h-2.47c-.15-1.65-1.09-4.2-4.03-4.2-2.25 0-4.18 1.91-4.94 2.84-.58.73-2.06 2.48-2.29 2.72-.25.3-.68.84-1.11.84-.45 0-.72-.83-.36-1.92.35-1.09 1.4-2.86 1.85-3.52.78-1.14 1.3-1.92 1.3-3.28C8.95 3.69 7.31 3 6.44 3 5.12 3 3.97 4 3.72 4.25c-.36.36-.66.66-.88.93l1.75 1.71zm9.29 11.66c-.31 0-.74-.26-.74-.72 0-.6.73-2.2 2.87-2.76-.3 2.69-1.43 3.48-2.13 3.48z"></path></g><g id="get-app"><path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"></path></g><g id="gif"><path d="M11.5 9H13v6h-1.5zM9 9H6c-.6 0-1 .5-1 1v4c0 .5.4 1 1 1h3c.6 0 1-.5 1-1v-2H8.5v1.5h-2v-3H10V10c0-.5-.4-1-1-1zm10 1.5V9h-4.5v6H16v-2h2v-1.5h-2v-1z"></path></g><g id="grade"><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"></path></g><g id="group-work"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM8 17.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5zM9.5 8c0-1.38 1.12-2.5 2.5-2.5s2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5S9.5 9.38 9.5 8zm6.5 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"></path></g><g id="help"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"></path></g><g id="help-outline"><path d="M11 18h2v-2h-2v2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4z"></path></g><g id="highlight-off"><path d="M14.59 8L12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41 14.59 8zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"></path></g><g id="history"><path d="M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z"></path></g><g id="home"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"></path></g><g id="hourglass-empty"><path d="M6 2v6h.01L6 8.01 10 12l-4 4 .01.01H6V22h12v-5.99h-.01L18 16l-4-4 4-3.99-.01-.01H18V2H6zm10 14.5V20H8v-3.5l4-4 4 4zm-4-5l-4-4V4h8v3.5l-4 4z"></path></g><g id="hourglass-full"><path d="M6 2v6h.01L6 8.01 10 12l-4 4 .01.01H6V22h12v-5.99h-.01L18 16l-4-4 4-3.99-.01-.01H18V2H6z"></path></g><g id="http"><path d="M4.5 11h-2V9H1v6h1.5v-2.5h2V15H6V9H4.5v2zm2.5-.5h1.5V15H10v-4.5h1.5V9H7v1.5zm5.5 0H14V15h1.5v-4.5H17V9h-4.5v1.5zm9-1.5H18v6h1.5v-2h2c.8 0 1.5-.7 1.5-1.5v-1c0-.8-.7-1.5-1.5-1.5zm0 2.5h-2v-1h2v1z"></path></g><g id="https"><path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"></path></g><g id="important-devices"><path d="M23 11.01L18 11c-.55 0-1 .45-1 1v9c0 .55.45 1 1 1h5c.55 0 1-.45 1-1v-9c0-.55-.45-.99-1-.99zM23 20h-5v-7h5v7zM20 2H2C.89 2 0 2.89 0 4v12c0 1.1.89 2 2 2h7v2H7v2h8v-2h-2v-2h2v-2H2V4h18v5h2V4c0-1.11-.9-2-2-2zm-8.03 7L11 6l-.97 3H7l2.47 1.76-.94 2.91 2.47-1.8 2.47 1.8-.94-2.91L15 9h-3.03z"></path></g><g id="inbox"><path d="M19 3H4.99c-1.11 0-1.98.89-1.98 2L3 19c0 1.1.88 2 1.99 2H19c1.1 0 2-.9 2-2V5c0-1.11-.9-2-2-2zm0 12h-4c0 1.66-1.35 3-3 3s-3-1.34-3-3H4.99V5H19v10z"></path></g><g id="indeterminate-check-box"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"></path></g><g id="info"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"></path></g><g id="info-outline"><path d="M11 17h2v-6h-2v6zm1-15C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zM11 9h2V7h-2v2z"></path></g><g id="input"><path d="M21 3.01H3c-1.1 0-2 .9-2 2V9h2V4.99h18v14.03H3V15H1v4.01c0 1.1.9 1.98 2 1.98h18c1.1 0 2-.88 2-1.98v-14c0-1.11-.9-2-2-2zM11 16l4-4-4-4v3H1v2h10v3z"></path></g><g id="invert-colors"><path d="M17.66 7.93L12 2.27 6.34 7.93c-3.12 3.12-3.12 8.19 0 11.31C7.9 20.8 9.95 21.58 12 21.58c2.05 0 4.1-.78 5.66-2.34 3.12-3.12 3.12-8.19 0-11.31zM12 19.59c-1.6 0-3.11-.62-4.24-1.76C6.62 16.69 6 15.19 6 13.59s.62-3.11 1.76-4.24L12 5.1v14.49z"></path></g><g id="label"><path d="M17.63 5.84C17.27 5.33 16.67 5 16 5L5 5.01C3.9 5.01 3 5.9 3 7v10c0 1.1.9 1.99 2 1.99L16 19c.67 0 1.27-.33 1.63-.84L22 12l-4.37-6.16z"></path></g><g id="label-outline"><path d="M17.63 5.84C17.27 5.33 16.67 5 16 5L5 5.01C3.9 5.01 3 5.9 3 7v10c0 1.1.9 1.99 2 1.99L16 19c.67 0 1.27-.33 1.63-.84L22 12l-4.37-6.16zM16 17H5V7h11l3.55 5L16 17z"></path></g><g id="language"><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm6.93 6h-2.95c-.32-1.25-.78-2.45-1.38-3.56 1.84.63 3.37 1.91 4.33 3.56zM12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 1.08-2.76 1.91-3.96zM4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2 0 .68.06 1.34.14 2H4.26zm.82 2h2.95c.32 1.25.78 2.45 1.38 3.56-1.84-.63-3.37-1.9-4.33-3.56zm2.95-8H5.08c.96-1.66 2.49-2.93 4.33-3.56C8.81 5.55 8.35 6.75 8.03 8zM12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 1.43-1.08 2.76-1.91 3.96zM14.34 14H9.66c-.09-.66-.16-1.32-.16-2 0-.68.07-1.35.16-2h4.68c.09.65.16 1.32.16 2 0 .68-.07 1.34-.16 2zm.25 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95c-.96 1.65-2.49 2.93-4.33 3.56zM16.36 14c.08-.66.14-1.32.14-2 0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2h-3.38z"></path></g><g id="last-page"><path d="M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"></path></g><g id="launch"><path d="M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"></path></g><g id="lightbulb-outline"><path d="M9 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H9v1zm3-19C8.14 2 5 5.14 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.86-3.14-7-7-7zm2.85 11.1l-.85.6V16h-4v-2.3l-.85-.6C7.8 12.16 7 10.63 7 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 1.63-.8 3.16-2.15 4.1z"></path></g><g id="line-style"><path d="M3 16h5v-2H3v2zm6.5 0h5v-2h-5v2zm6.5 0h5v-2h-5v2zM3 20h2v-2H3v2zm4 0h2v-2H7v2zm4 0h2v-2h-2v2zm4 0h2v-2h-2v2zm4 0h2v-2h-2v2zM3 12h8v-2H3v2zm10 0h8v-2h-8v2zM3 4v4h18V4H3z"></path></g><g id="line-weight"><path d="M3 17h18v-2H3v2zm0 3h18v-1H3v1zm0-7h18v-3H3v3zm0-9v4h18V4H3z"></path></g><g id="link"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"></path></g><g id="list"><path d="M3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm4 4h14v-2H7v2zm0 4h14v-2H7v2zM7 7v2h14V7H7z"></path></g><g id="lock"><path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"></path></g><g id="lock-open"><path d="M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h1.9c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm0 12H6V10h12v10z"></path></g><g id="lock-outline"><path d="M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM8.9 6c0-1.71 1.39-3.1 3.1-3.1s3.1 1.39 3.1 3.1v2H8.9V6zM18 20H6V10h12v10z"></path></g><g id="low-priority"><path d="M14 5h8v2h-8zm0 5.5h8v2h-8zm0 5.5h8v2h-8zM2 11.5C2 15.08 4.92 18 8.5 18H9v2l3-3-3-3v2h-.5C6.02 16 4 13.98 4 11.5S6.02 7 8.5 7H12V5H8.5C4.92 5 2 7.92 2 11.5z"></path></g><g id="loyalty"><path d="M21.41 11.58l-9-9C12.05 2.22 11.55 2 11 2H4c-1.1 0-2 .9-2 2v7c0 .55.22 1.05.59 1.42l9 9c.36.36.86.58 1.41.58.55 0 1.05-.22 1.41-.59l7-7c.37-.36.59-.86.59-1.41 0-.55-.23-1.06-.59-1.42zM5.5 7C4.67 7 4 6.33 4 5.5S4.67 4 5.5 4 7 4.67 7 5.5 6.33 7 5.5 7zm11.77 8.27L13 19.54l-4.27-4.27C8.28 14.81 8 14.19 8 13.5c0-1.38 1.12-2.5 2.5-2.5.69 0 1.32.28 1.77.74l.73.72.73-.73c.45-.45 1.08-.73 1.77-.73 1.38 0 2.5 1.12 2.5 2.5 0 .69-.28 1.32-.73 1.77z"></path></g><g id="mail"><path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"></path></g><g id="markunread"><path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"></path></g><g id="markunread-mailbox"><path d="M20 6H10v6H8V4h6V0H6v6H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2z"></path></g><g id="menu"><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"></path></g><g id="more-horiz"><path d="M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"></path></g><g id="more-vert"><path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"></path></g><g id="motorcycle"><path d="M19.44 9.03L15.41 5H11v2h3.59l2 2H5c-2.8 0-5 2.2-5 5s2.2 5 5 5c2.46 0 4.45-1.69 4.9-4h1.65l2.77-2.77c-.21.54-.32 1.14-.32 1.77 0 2.8 2.2 5 5 5s5-2.2 5-5c0-2.65-1.97-4.77-4.56-4.97zM7.82 15C7.4 16.15 6.28 17 5 17c-1.63 0-3-1.37-3-3s1.37-3 3-3c1.28 0 2.4.85 2.82 2H5v2h2.82zM19 17c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3z"></path></g><g id="move-to-inbox"><path d="M19 3H4.99c-1.11 0-1.98.9-1.98 2L3 19c0 1.1.88 2 1.99 2H19c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 12h-4c0 1.66-1.35 3-3 3s-3-1.34-3-3H4.99V5H19v10zm-3-5h-2V7h-4v3H8l4 4 4-4z"></path></g><g id="next-week"><path d="M20 7h-4V5c0-.55-.22-1.05-.59-1.41C15.05 3.22 14.55 3 14 3h-4c-1.1 0-2 .9-2 2v2H4c-1.1 0-2 .9-2 2v11c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V9c0-1.1-.9-2-2-2zM10 5h4v2h-4V5zm1 13.5l-1-1 3-3-3-3 1-1 4 4-4 4z"></path></g><g id="note-add"><path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 14h-3v3h-2v-3H8v-2h3v-3h2v3h3v2zm-3-7V3.5L18.5 9H13z"></path></g><g id="offline-pin"><path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2zm5 16H7v-2h10v2zm-6.7-4L7 10.7l1.4-1.4 1.9 1.9 5.3-5.3L17 7.3 10.3 14z"></path></g><g id="opacity"><path d="M17.66 8L12 2.35 6.34 8C4.78 9.56 4 11.64 4 13.64s.78 4.11 2.34 5.67 3.61 2.35 5.66 2.35 4.1-.79 5.66-2.35S20 15.64 20 13.64 19.22 9.56 17.66 8zM6 14c.01-2 .62-3.27 1.76-4.4L12 5.27l4.24 4.38C17.38 10.77 17.99 12 18 14H6z"></path></g><g id="open-in-browser"><path d="M19 4H5c-1.11 0-2 .9-2 2v12c0 1.1.89 2 2 2h4v-2H5V8h14v10h-4v2h4c1.1 0 2-.9 2-2V6c0-1.1-.89-2-2-2zm-7 6l-4 4h3v6h2v-6h3l-4-4z"></path></g><g id="open-in-new"><path d="M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"></path></g><g id="open-with"><path d="M10 9h4V6h3l-5-5-5 5h3v3zm-1 1H6V7l-5 5 5 5v-3h3v-4zm14 2l-5-5v3h-3v4h3v3l5-5zm-9 3h-4v3H7l5 5 5-5h-3v-3z"></path></g><g id="pageview"><path d="M11.5 9C10.12 9 9 10.12 9 11.5s1.12 2.5 2.5 2.5 2.5-1.12 2.5-2.5S12.88 9 11.5 9zM20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm-3.21 14.21l-2.91-2.91c-.69.44-1.51.7-2.39.7C9.01 16 7 13.99 7 11.5S9.01 7 11.5 7 16 9.01 16 11.5c0 .88-.26 1.69-.7 2.39l2.91 2.9-1.42 1.42z"></path></g><g id="pan-tool"><path d="M23 5.5V20c0 2.2-1.8 4-4 4h-7.3c-1.08 0-2.1-.43-2.85-1.19L1 14.83s1.26-1.23 1.3-1.25c.22-.19.49-.29.79-.29.22 0 .42.06.6.16.04.01 4.31 2.46 4.31 2.46V4c0-.83.67-1.5 1.5-1.5S11 3.17 11 4v7h1V1.5c0-.83.67-1.5 1.5-1.5S15 .67 15 1.5V11h1V2.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5V11h1V5.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5z"></path></g><g id="payment"><path d="M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2zm0 14H4v-6h16v6zm0-10H4V6h16v2z"></path></g><g id="perm-camera-mic"><path d="M20 5h-3.17L15 3H9L7.17 5H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h7v-2.09c-2.83-.48-5-2.94-5-5.91h2c0 2.21 1.79 4 4 4s4-1.79 4-4h2c0 2.97-2.17 5.43-5 5.91V21h7c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm-6 8c0 1.1-.9 2-2 2s-2-.9-2-2V9c0-1.1.9-2 2-2s2 .9 2 2v4z"></path></g><g id="perm-contact-calendar"><path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm6 12H6v-1c0-2 4-3.1 6-3.1s6 1.1 6 3.1v1z"></path></g><g id="perm-data-setting"><path d="M18.99 11.5c.34 0 .67.03 1 .07L20 0 0 20h11.56c-.04-.33-.07-.66-.07-1 0-4.14 3.36-7.5 7.5-7.5zm3.71 7.99c.02-.16.04-.32.04-.49 0-.17-.01-.33-.04-.49l1.06-.83c.09-.08.12-.21.06-.32l-1-1.73c-.06-.11-.19-.15-.31-.11l-1.24.5c-.26-.2-.54-.37-.85-.49l-.19-1.32c-.01-.12-.12-.21-.24-.21h-2c-.12 0-.23.09-.25.21l-.19 1.32c-.3.13-.59.29-.85.49l-1.24-.5c-.11-.04-.24 0-.31.11l-1 1.73c-.06.11-.04.24.06.32l1.06.83c-.02.16-.03.32-.03.49 0 .17.01.33.03.49l-1.06.83c-.09.08-.12.21-.06.32l1 1.73c.06.11.19.15.31.11l1.24-.5c.26.2.54.37.85.49l.19 1.32c.02.12.12.21.25.21h2c.12 0 .23-.09.25-.21l.19-1.32c.3-.13.59-.29.84-.49l1.25.5c.11.04.24 0 .31-.11l1-1.73c.06-.11.03-.24-.06-.32l-1.07-.83zm-3.71 1.01c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"></path></g><g id="perm-device-information"><path d="M13 7h-2v2h2V7zm0 4h-2v6h2v-6zm4-9.99L7 1c-1.1 0-2 .9-2 2v18c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V3c0-1.1-.9-1.99-2-1.99zM17 19H7V5h10v14z"></path></g><g id="perm-identity"><path d="M12 5.9c1.16 0 2.1.94 2.1 2.1s-.94 2.1-2.1 2.1S9.9 9.16 9.9 8s.94-2.1 2.1-2.1m0 9c2.97 0 6.1 1.46 6.1 2.1v1.1H5.9V17c0-.64 3.13-2.1 6.1-2.1M12 4C9.79 4 8 5.79 8 8s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 9c-2.67 0-8 1.34-8 4v3h16v-3c0-2.66-5.33-4-8-4z"></path></g><g id="perm-media"><path d="M2 6H0v5h.01L0 20c0 1.1.9 2 2 2h18v-2H2V6zm20-2h-8l-2-2H6c-1.1 0-1.99.9-1.99 2L4 16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zM7 15l4.5-6 3.5 4.51 2.5-3.01L21 15H7z"></path></g><g id="perm-phone-msg"><path d="M20 15.5c-1.25 0-2.45-.2-3.57-.57-.35-.11-.74-.03-1.02.24l-2.2 2.2c-2.83-1.44-5.15-3.75-6.59-6.58l2.2-2.21c.28-.27.36-.66.25-1.01C8.7 6.45 8.5 5.25 8.5 4c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1 0 9.39 7.61 17 17 17 .55 0 1-.45 1-1v-3.5c0-.55-.45-1-1-1zM12 3v10l3-3h6V3h-9z"></path></g><g id="perm-scan-wifi"><path d="M12 3C6.95 3 3.15 4.85 0 7.23L12 22 24 7.25C20.85 4.87 17.05 3 12 3zm1 13h-2v-6h2v6zm-2-8V6h2v2h-2z"></path></g><g id="pets"><circle cx="4.5" cy="9.5" r="2.5"></circle><circle cx="9" cy="5.5" r="2.5"></circle><circle cx="15" cy="5.5" r="2.5"></circle><circle cx="19.5" cy="9.5" r="2.5"></circle><path d="M17.34 14.86c-.87-1.02-1.6-1.89-2.48-2.91-.46-.54-1.05-1.08-1.75-1.32-.11-.04-.22-.07-.33-.09-.25-.04-.52-.04-.78-.04s-.53 0-.79.05c-.11.02-.22.05-.33.09-.7.24-1.28.78-1.75 1.32-.87 1.02-1.6 1.89-2.48 2.91-1.31 1.31-2.92 2.76-2.62 4.79.29 1.02 1.02 2.03 2.33 2.32.73.15 3.06-.44 5.54-.44h.18c2.48 0 4.81.58 5.54.44 1.31-.29 2.04-1.31 2.33-2.32.31-2.04-1.3-3.49-2.61-4.8z"></path></g><g id="picture-in-picture"><path d="M19 7h-8v6h8V7zm2-4H3c-1.1 0-2 .9-2 2v14c0 1.1.9 1.98 2 1.98h18c1.1 0 2-.88 2-1.98V5c0-1.1-.9-2-2-2zm0 16.01H3V4.98h18v14.03z"></path></g><g id="picture-in-picture-alt"><path d="M19 11h-8v6h8v-6zm4 8V4.98C23 3.88 22.1 3 21 3H3c-1.1 0-2 .88-2 1.98V19c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2zm-2 .02H3V4.97h18v14.05z"></path></g><g id="play-for-work"><path d="M11 5v5.59H7.5l4.5 4.5 4.5-4.5H13V5h-2zm-5 9c0 3.31 2.69 6 6 6s6-2.69 6-6h-2c0 2.21-1.79 4-4 4s-4-1.79-4-4H6z"></path></g><g id="polymer"><path d="M19 4h-4L7.11 16.63 4.5 12 9 4H5L.5 12 5 20h4l7.89-12.63L19.5 12 15 20h4l4.5-8z"></path></g><g id="power-settings-new"><path d="M13 3h-2v10h2V3zm4.83 2.17l-1.42 1.42C17.99 7.86 19 9.81 19 12c0 3.87-3.13 7-7 7s-7-3.13-7-7c0-2.19 1.01-4.14 2.58-5.42L6.17 5.17C4.23 6.82 3 9.26 3 12c0 4.97 4.03 9 9 9s9-4.03 9-9c0-2.74-1.23-5.18-3.17-6.83z"></path></g><g id="pregnant-woman"><path d="M9 4c0-1.11.89-2 2-2s2 .89 2 2-.89 2-2 2-2-.89-2-2zm7 9c-.01-1.34-.83-2.51-2-3 0-1.66-1.34-3-3-3s-3 1.34-3 3v7h2v5h3v-5h3v-4z"></path></g><g id="print"><path d="M19 8H5c-1.66 0-3 1.34-3 3v6h4v4h12v-4h4v-6c0-1.66-1.34-3-3-3zm-3 11H8v-5h8v5zm3-7c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm-1-9H6v4h12V3z"></path></g><g id="query-builder"><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z"></path></g><g id="question-answer"><path d="M21 6h-2v9H6v2c0 .55.45 1 1 1h11l4 4V7c0-.55-.45-1-1-1zm-4 6V3c0-.55-.45-1-1-1H3c-.55 0-1 .45-1 1v14l4-4h10c.55 0 1-.45 1-1z"></path></g><g id="radio-button-checked"><path d="M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zm0-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"></path></g><g id="radio-button-unchecked"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"></path></g><g id="receipt"><path d="M18 17H6v-2h12v2zm0-4H6v-2h12v2zm0-4H6V7h12v2zM3 22l1.5-1.5L6 22l1.5-1.5L9 22l1.5-1.5L12 22l1.5-1.5L15 22l1.5-1.5L18 22l1.5-1.5L21 22V2l-1.5 1.5L18 2l-1.5 1.5L15 2l-1.5 1.5L12 2l-1.5 1.5L9 2 7.5 3.5 6 2 4.5 3.5 3 2v20z"></path></g><g id="record-voice-over"><circle cx="9" cy="9" r="4"></circle><path d="M9 15c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4zm7.76-9.64l-1.68 1.69c.84 1.18.84 2.71 0 3.89l1.68 1.69c2.02-2.02 2.02-5.07 0-7.27zM20.07 2l-1.63 1.63c2.77 3.02 2.77 7.56 0 10.74L20.07 16c3.9-3.89 3.91-9.95 0-14z"></path></g><g id="redeem"><path d="M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.05 0-1.96.54-2.5 1.35l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 15H4v-2h16v2zm0-5H4V8h5.08L7 10.83 8.62 12 11 8.76l1-1.36 1 1.36L15.38 12 17 10.83 14.92 8H20v6z"></path></g><g id="redo"><path d="M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16c1.05-3.19 4.05-5.5 7.6-5.5 1.95 0 3.73.72 5.12 1.88L13 16h9V7l-3.6 3.6z"></path></g><g id="refresh"><path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"></path></g><g id="remove"><path d="M19 13H5v-2h14v2z"></path></g><g id="remove-circle"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11H7v-2h10v2z"></path></g><g id="remove-circle-outline"><path d="M7 11v2h10v-2H7zm5-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"></path></g><g id="remove-shopping-cart"><path d="M22.73 22.73L2.77 2.77 2 2l-.73-.73L0 2.54l4.39 4.39 2.21 4.66-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h7.46l1.38 1.38c-.5.36-.83.95-.83 1.62 0 1.1.89 2 1.99 2 .67 0 1.26-.33 1.62-.84L21.46 24l1.27-1.27zM7.42 15c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h2.36l2 2H7.42zm8.13-2c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H6.54l9.01 9zM7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2z"></path></g><g id="reorder"><path d="M3 15h18v-2H3v2zm0 4h18v-2H3v2zm0-8h18V9H3v2zm0-6v2h18V5H3z"></path></g><g id="reply"><path d="M10 9V5l-7 7 7 7v-4.1c5 0 8.5 1.6 11 5.1-1-5-4-10-11-11z"></path></g><g id="reply-all"><path d="M7 8V5l-7 7 7 7v-3l-4-4 4-4zm6 1V5l-7 7 7 7v-4.1c5 0 8.5 1.6 11 5.1-1-5-4-10-11-11z"></path></g><g id="report"><path d="M15.73 3H8.27L3 8.27v7.46L8.27 21h7.46L21 15.73V8.27L15.73 3zM12 17.3c-.72 0-1.3-.58-1.3-1.3 0-.72.58-1.3 1.3-1.3.72 0 1.3.58 1.3 1.3 0 .72-.58 1.3-1.3 1.3zm1-4.3h-2V7h2v6z"></path></g><g id="report-problem"><path d="M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"></path></g><g id="restore"><path d="M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z"></path></g><g id="restore-page"><path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm-2 16c-2.05 0-3.81-1.24-4.58-3h1.71c.63.9 1.68 1.5 2.87 1.5 1.93 0 3.5-1.57 3.5-3.5S13.93 9.5 12 9.5c-1.35 0-2.52.78-3.1 1.9l1.6 1.6h-4V9l1.3 1.3C8.69 8.92 10.23 8 12 8c2.76 0 5 2.24 5 5s-2.24 5-5 5z"></path></g><g id="room"><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"></path></g><g id="rounded-corner"><path d="M19 19h2v2h-2v-2zm0-2h2v-2h-2v2zM3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm0-4h2V3H3v2zm4 0h2V3H7v2zm8 16h2v-2h-2v2zm-4 0h2v-2h-2v2zm4 0h2v-2h-2v2zm-8 0h2v-2H7v2zm-4 0h2v-2H3v2zM21 8c0-2.76-2.24-5-5-5h-5v2h5c1.65 0 3 1.35 3 3v5h2V8z"></path></g><g id="rowing"><path d="M8.5 14.5L4 19l1.5 1.5L9 17h2l-2.5-2.5zM15 1c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 20.01L18 24l-2.99-3.01V19.5l-7.1-7.09c-.31.05-.61.07-.91.07v-2.16c1.66.03 3.61-.87 4.67-2.04l1.4-1.55c.19-.21.43-.38.69-.5.29-.14.62-.23.96-.23h.03C15.99 6.01 17 7.02 17 8.26v5.75c0 .84-.35 1.61-.92 2.16l-3.58-3.58v-2.27c-.63.52-1.43 1.02-2.29 1.39L16.5 18H18l3 3.01z"></path></g><g id="save"><path d="M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"></path></g><g id="schedule"><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z"></path></g><g id="search"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path></g><g id="select-all"><path d="M3 5h2V3c-1.1 0-2 .9-2 2zm0 8h2v-2H3v2zm4 8h2v-2H7v2zM3 9h2V7H3v2zm10-6h-2v2h2V3zm6 0v2h2c0-1.1-.9-2-2-2zM5 21v-2H3c0 1.1.9 2 2 2zm-2-4h2v-2H3v2zM9 3H7v2h2V3zm2 18h2v-2h-2v2zm8-8h2v-2h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2zm0-12h2V7h-2v2zm0 8h2v-2h-2v2zm-4 4h2v-2h-2v2zm0-16h2V3h-2v2zM7 17h10V7H7v10zm2-8h6v6H9V9z"></path></g><g id="send"><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"></path></g><g id="settings"><path d="M19.43 12.98c.04-.32.07-.64.07-.98s-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.3-.61-.22l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65C14.46 2.18 14.25 2 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1c-.23-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98s.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.23.09.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65zM12 15.5c-1.93 0-3.5-1.57-3.5-3.5s1.57-3.5 3.5-3.5 3.5 1.57 3.5 3.5-1.57 3.5-3.5 3.5z"></path></g><g id="settings-applications"><path d="M12 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm7-7H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-1.75 9c0 .23-.02.46-.05.68l1.48 1.16c.13.11.17.3.08.45l-1.4 2.42c-.09.15-.27.21-.43.15l-1.74-.7c-.36.28-.76.51-1.18.69l-.26 1.85c-.03.17-.18.3-.35.3h-2.8c-.17 0-.32-.13-.35-.29l-.26-1.85c-.43-.18-.82-.41-1.18-.69l-1.74.7c-.16.06-.34 0-.43-.15l-1.4-2.42c-.09-.15-.05-.34.08-.45l1.48-1.16c-.03-.23-.05-.46-.05-.69 0-.23.02-.46.05-.68l-1.48-1.16c-.13-.11-.17-.3-.08-.45l1.4-2.42c.09-.15.27-.21.43-.15l1.74.7c.36-.28.76-.51 1.18-.69l.26-1.85c.03-.17.18-.3.35-.3h2.8c.17 0 .32.13.35.29l.26 1.85c.43.18.82.41 1.18.69l1.74-.7c.16-.06.34 0 .43.15l1.4 2.42c.09.15.05.34-.08.45l-1.48 1.16c.03.23.05.46.05.69z"></path></g><g id="settings-backup-restore"><path d="M14 12c0-1.1-.9-2-2-2s-2 .9-2 2 .9 2 2 2 2-.9 2-2zm-2-9c-4.97 0-9 4.03-9 9H0l4 4 4-4H5c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.51 0-2.91-.49-4.06-1.3l-1.42 1.44C8.04 20.3 9.94 21 12 21c4.97 0 9-4.03 9-9s-4.03-9-9-9z"></path></g><g id="settings-bluetooth"><path d="M11 24h2v-2h-2v2zm-4 0h2v-2H7v2zm8 0h2v-2h-2v2zm2.71-18.29L12 0h-1v7.59L6.41 3 5 4.41 10.59 10 5 15.59 6.41 17 11 12.41V20h1l5.71-5.71-4.3-4.29 4.3-4.29zM13 3.83l1.88 1.88L13 7.59V3.83zm1.88 10.46L13 16.17v-3.76l1.88 1.88z"></path></g><g id="settings-brightness"><path d="M21 3H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16.01H3V4.99h18v14.02zM8 16h2.5l1.5 1.5 1.5-1.5H16v-2.5l1.5-1.5-1.5-1.5V8h-2.5L12 6.5 10.5 8H8v2.5L6.5 12 8 13.5V16zm4-7c1.66 0 3 1.34 3 3s-1.34 3-3 3V9z"></path></g><g id="settings-cell"><path d="M7 24h2v-2H7v2zm4 0h2v-2h-2v2zm4 0h2v-2h-2v2zM16 .01L8 0C6.9 0 6 .9 6 2v16c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V2c0-1.1-.9-1.99-2-1.99zM16 16H8V4h8v12z"></path></g><g id="settings-ethernet"><path d="M7.77 6.76L6.23 5.48.82 12l5.41 6.52 1.54-1.28L3.42 12l4.35-5.24zM7 13h2v-2H7v2zm10-2h-2v2h2v-2zm-6 2h2v-2h-2v2zm6.77-7.52l-1.54 1.28L20.58 12l-4.35 5.24 1.54 1.28L23.18 12l-5.41-6.52z"></path></g><g id="settings-input-antenna"><path d="M12 5c-3.87 0-7 3.13-7 7h2c0-2.76 2.24-5 5-5s5 2.24 5 5h2c0-3.87-3.13-7-7-7zm1 9.29c.88-.39 1.5-1.26 1.5-2.29 0-1.38-1.12-2.5-2.5-2.5S9.5 10.62 9.5 12c0 1.02.62 1.9 1.5 2.29v3.3L7.59 21 9 22.41l3-3 3 3L16.41 21 13 17.59v-3.3zM12 1C5.93 1 1 5.93 1 12h2c0-4.97 4.03-9 9-9s9 4.03 9 9h2c0-6.07-4.93-11-11-11z"></path></g><g id="settings-input-component"><path d="M5 2c0-.55-.45-1-1-1s-1 .45-1 1v4H1v6h6V6H5V2zm4 14c0 1.3.84 2.4 2 2.82V23h2v-4.18c1.16-.41 2-1.51 2-2.82v-2H9v2zm-8 0c0 1.3.84 2.4 2 2.82V23h2v-4.18C6.16 18.4 7 17.3 7 16v-2H1v2zM21 6V2c0-.55-.45-1-1-1s-1 .45-1 1v4h-2v6h6V6h-2zm-8-4c0-.55-.45-1-1-1s-1 .45-1 1v4H9v6h6V6h-2V2zm4 14c0 1.3.84 2.4 2 2.82V23h2v-4.18c1.16-.41 2-1.51 2-2.82v-2h-6v2z"></path></g><g id="settings-input-composite"><path d="M5 2c0-.55-.45-1-1-1s-1 .45-1 1v4H1v6h6V6H5V2zm4 14c0 1.3.84 2.4 2 2.82V23h2v-4.18c1.16-.41 2-1.51 2-2.82v-2H9v2zm-8 0c0 1.3.84 2.4 2 2.82V23h2v-4.18C6.16 18.4 7 17.3 7 16v-2H1v2zM21 6V2c0-.55-.45-1-1-1s-1 .45-1 1v4h-2v6h6V6h-2zm-8-4c0-.55-.45-1-1-1s-1 .45-1 1v4H9v6h6V6h-2V2zm4 14c0 1.3.84 2.4 2 2.82V23h2v-4.18c1.16-.41 2-1.51 2-2.82v-2h-6v2z"></path></g><g id="settings-input-hdmi"><path d="M18 7V4c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v3H5v6l3 6v3h8v-3l3-6V7h-1zM8 4h8v3h-2V5h-1v2h-2V5h-1v2H8V4z"></path></g><g id="settings-input-svideo"><path d="M8 11.5c0-.83-.67-1.5-1.5-1.5S5 10.67 5 11.5 5.67 13 6.5 13 8 12.33 8 11.5zm7-5c0-.83-.67-1.5-1.5-1.5h-3C9.67 5 9 5.67 9 6.5S9.67 8 10.5 8h3c.83 0 1.5-.67 1.5-1.5zM8.5 15c-.83 0-1.5.67-1.5 1.5S7.67 18 8.5 18s1.5-.67 1.5-1.5S9.33 15 8.5 15zM12 1C5.93 1 1 5.93 1 12s4.93 11 11 11 11-4.93 11-11S18.07 1 12 1zm0 20c-4.96 0-9-4.04-9-9s4.04-9 9-9 9 4.04 9 9-4.04 9-9 9zm5.5-11c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm-2 5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5z"></path></g><g id="settings-overscan"><path d="M12.01 5.5L10 8h4l-1.99-2.5zM18 10v4l2.5-1.99L18 10zM6 10l-2.5 2.01L6 14v-4zm8 6h-4l2.01 2.5L14 16zm7-13H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16.01H3V4.99h18v14.02z"></path></g><g id="settings-phone"><path d="M13 9h-2v2h2V9zm4 0h-2v2h2V9zm3 6.5c-1.25 0-2.45-.2-3.57-.57-.35-.11-.74-.03-1.02.24l-2.2 2.2c-2.83-1.44-5.15-3.75-6.59-6.58l2.2-2.21c.28-.27.36-.66.25-1.01C8.7 6.45 8.5 5.25 8.5 4c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1 0 9.39 7.61 17 17 17 .55 0 1-.45 1-1v-3.5c0-.55-.45-1-1-1zM19 9v2h2V9h-2z"></path></g><g id="settings-power"><path d="M7 24h2v-2H7v2zm4 0h2v-2h-2v2zm2-22h-2v10h2V2zm3.56 2.44l-1.45 1.45C16.84 6.94 18 8.83 18 11c0 3.31-2.69 6-6 6s-6-2.69-6-6c0-2.17 1.16-4.06 2.88-5.12L7.44 4.44C5.36 5.88 4 8.28 4 11c0 4.42 3.58 8 8 8s8-3.58 8-8c0-2.72-1.36-5.12-3.44-6.56zM15 24h2v-2h-2v2z"></path></g><g id="settings-remote"><path d="M15 9H9c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h6c.55 0 1-.45 1-1V10c0-.55-.45-1-1-1zm-3 6c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zM7.05 6.05l1.41 1.41C9.37 6.56 10.62 6 12 6s2.63.56 3.54 1.46l1.41-1.41C15.68 4.78 13.93 4 12 4s-3.68.78-4.95 2.05zM12 0C8.96 0 6.21 1.23 4.22 3.22l1.41 1.41C7.26 3.01 9.51 2 12 2s4.74 1.01 6.36 2.64l1.41-1.41C17.79 1.23 15.04 0 12 0z"></path></g><g id="settings-voice"><path d="M7 24h2v-2H7v2zm5-11c1.66 0 2.99-1.34 2.99-3L15 4c0-1.66-1.34-3-3-3S9 2.34 9 4v6c0 1.66 1.34 3 3 3zm-1 11h2v-2h-2v2zm4 0h2v-2h-2v2zm4-14h-1.7c0 3-2.54 5.1-5.3 5.1S6.7 13 6.7 10H5c0 3.41 2.72 6.23 6 6.72V20h2v-3.28c3.28-.49 6-3.31 6-6.72z"></path></g><g id="shop"><path d="M16 6V4c0-1.11-.89-2-2-2h-4c-1.11 0-2 .89-2 2v2H2v13c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6h-6zm-6-2h4v2h-4V4zM9 18V9l7.5 4L9 18z"></path></g><g id="shop-two"><path d="M3 9H1v11c0 1.11.89 2 2 2h14c1.11 0 2-.89 2-2H3V9zm15-4V3c0-1.11-.89-2-2-2h-4c-1.11 0-2 .89-2 2v2H5v11c0 1.11.89 2 2 2h14c1.11 0 2-.89 2-2V5h-5zm-6-2h4v2h-4V3zm0 12V8l5.5 3-5.5 4z"></path></g><g id="shopping-basket"><path d="M17.21 9l-4.38-6.56c-.19-.28-.51-.42-.83-.42-.32 0-.64.14-.83.43L6.79 9H2c-.55 0-1 .45-1 1 0 .09.01.18.04.27l2.54 9.27c.23.84 1 1.46 1.92 1.46h13c.92 0 1.69-.62 1.93-1.46l2.54-9.27L23 10c0-.55-.45-1-1-1h-4.79zM9 9l3-4.4L15 9H9zm3 8c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"></path></g><g id="shopping-cart"><path d="M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z"></path></g><g id="sort"><path d="M3 18h6v-2H3v2zM3 6v2h18V6H3zm0 7h12v-2H3v2z"></path></g><g id="speaker-notes"><path d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM8 14H6v-2h2v2zm0-3H6V9h2v2zm0-3H6V6h2v2zm7 6h-5v-2h5v2zm3-3h-8V9h8v2zm0-3h-8V6h8v2z"></path></g><g id="speaker-notes-off"><path d="M10.54 11l-.54-.54L7.54 8 6 6.46 2.38 2.84 1.27 1.73 0 3l2.01 2.01L2 22l4-4h9l5.73 5.73L22 22.46 17.54 18l-7-7zM8 14H6v-2h2v2zm-2-3V9l2 2H6zm14-9H4.08L10 7.92V6h8v2h-7.92l1 1H18v2h-4.92l6.99 6.99C21.14 17.95 22 17.08 22 16V4c0-1.1-.9-2-2-2z"></path></g><g id="spellcheck"><path d="M12.45 16h2.09L9.43 3H7.57L2.46 16h2.09l1.12-3h5.64l1.14 3zm-6.02-5L8.5 5.48 10.57 11H6.43zm15.16.59l-8.09 8.09L9.83 16l-1.41 1.41 5.09 5.09L23 13l-1.41-1.41z"></path></g><g id="star"><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"></path></g><g id="star-border"><path d="M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z"></path></g><g id="star-half"><path d="M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4V6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z"></path></g><g id="stars"><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm4.24 16L12 15.45 7.77 18l1.12-4.81-3.73-3.23 4.92-.42L12 5l1.92 4.53 4.92.42-3.73 3.23L16.23 18z"></path></g><g id="store"><path d="M20 4H4v2h16V4zm1 10v-2l-1-5H4l-1 5v2h1v6h10v-6h4v6h2v-6h1zm-9 4H6v-4h6v4z"></path></g><g id="subdirectory-arrow-left"><path d="M11 9l1.42 1.42L8.83 14H18V4h2v12H8.83l3.59 3.58L11 21l-6-6 6-6z"></path></g><g id="subdirectory-arrow-right"><path d="M19 15l-6 6-1.42-1.42L15.17 16H4V4h2v10h9.17l-3.59-3.58L13 9l6 6z"></path></g><g id="subject"><path d="M14 17H4v2h10v-2zm6-8H4v2h16V9zM4 15h16v-2H4v2zM4 5v2h16V5H4z"></path></g><g id="supervisor-account"><path d="M16.5 12c1.38 0 2.49-1.12 2.49-2.5S17.88 7 16.5 7C15.12 7 14 8.12 14 9.5s1.12 2.5 2.5 2.5zM9 11c1.66 0 2.99-1.34 2.99-3S10.66 5 9 5C7.34 5 6 6.34 6 8s1.34 3 3 3zm7.5 3c-1.83 0-5.5.92-5.5 2.75V19h11v-2.25c0-1.83-3.67-2.75-5.5-2.75zM9 13c-2.33 0-7 1.17-7 3.5V19h7v-2.25c0-.85.33-2.34 2.37-3.47C10.5 13.1 9.66 13 9 13z"></path></g><g id="swap-horiz"><path d="M6.99 11L3 15l3.99 4v-3H14v-2H6.99v-3zM21 9l-3.99-4v3H10v2h7.01v3L21 9z"></path></g><g id="swap-vert"><path d="M16 17.01V10h-2v7.01h-3L15 21l4-3.99h-3zM9 3L5 6.99h3V14h2V6.99h3L9 3z"></path></g><g id="swap-vertical-circle"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM6.5 9L10 5.5 13.5 9H11v4H9V9H6.5zm11 6L14 18.5 10.5 15H13v-4h2v4h2.5z"></path></g><g id="system-update-alt"><path d="M12 16.5l4-4h-3v-9h-2v9H8l4 4zm9-13h-6v1.99h6v14.03H3V5.49h6V3.5H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2v-14c0-1.1-.9-2-2-2z"></path></g><g id="tab"><path d="M21 3H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H3V5h10v4h8v10z"></path></g><g id="tab-unselected"><path d="M1 9h2V7H1v2zm0 4h2v-2H1v2zm0-8h2V3c-1.1 0-2 .9-2 2zm8 16h2v-2H9v2zm-8-4h2v-2H1v2zm2 4v-2H1c0 1.1.9 2 2 2zM21 3h-8v6h10V5c0-1.1-.9-2-2-2zm0 14h2v-2h-2v2zM9 5h2V3H9v2zM5 21h2v-2H5v2zM5 5h2V3H5v2zm16 16c1.1 0 2-.9 2-2h-2v2zm0-8h2v-2h-2v2zm-8 8h2v-2h-2v2zm4 0h2v-2h-2v2z"></path></g><g id="text-format"><path d="M5 17v2h14v-2H5zm4.5-4.2h5l.9 2.2h2.1L12.75 4h-1.5L6.5 15h2.1l.9-2.2zM12 5.98L13.87 11h-3.74L12 5.98z"></path></g><g id="theaters"><path d="M18 3v2h-2V3H8v2H6V3H4v18h2v-2h2v2h8v-2h2v2h2V3h-2zM8 17H6v-2h2v2zm0-4H6v-2h2v2zm0-4H6V7h2v2zm10 8h-2v-2h2v2zm0-4h-2v-2h2v2zm0-4h-2V7h2v2z"></path></g><g id="thumb-down"><path d="M15 3H6c-.83 0-1.54.5-1.84 1.22l-3.02 7.05c-.09.23-.14.47-.14.73v1.91l.01.01L1 14c0 1.1.9 2 2 2h6.31l-.95 4.57-.03.32c0 .41.17.79.44 1.06L9.83 23l6.59-6.59c.36-.36.58-.86.58-1.41V5c0-1.1-.9-2-2-2zm4 0v12h4V3h-4z"></path></g><g id="thumb-up"><path d="M1 21h4V9H1v12zm22-11c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73v-1.91l-.01-.01L23 10z"></path></g><g id="thumbs-up-down"><path d="M12 6c0-.55-.45-1-1-1H5.82l.66-3.18.02-.23c0-.31-.13-.59-.33-.8L5.38 0 .44 4.94C.17 5.21 0 5.59 0 6v6.5c0 .83.67 1.5 1.5 1.5h6.75c.62 0 1.15-.38 1.38-.91l2.26-5.29c.07-.17.11-.36.11-.55V6zm10.5 4h-6.75c-.62 0-1.15.38-1.38.91l-2.26 5.29c-.07.17-.11.36-.11.55V18c0 .55.45 1 1 1h5.18l-.66 3.18-.02.24c0 .31.13.59.33.8l.79.78 4.94-4.94c.27-.27.44-.65.44-1.06v-6.5c0-.83-.67-1.5-1.5-1.5z"></path></g><g id="timeline"><path d="M23 8c0 1.1-.9 2-2 2-.18 0-.35-.02-.51-.07l-3.56 3.55c.05.16.07.34.07.52 0 1.1-.9 2-2 2s-2-.9-2-2c0-.18.02-.36.07-.52l-2.55-2.55c-.16.05-.34.07-.52.07s-.36-.02-.52-.07l-4.55 4.56c.05.16.07.33.07.51 0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2c.18 0 .35.02.51.07l4.56-4.55C8.02 9.36 8 9.18 8 9c0-1.1.9-2 2-2s2 .9 2 2c0 .18-.02.36-.07.52l2.55 2.55c.16-.05.34-.07.52-.07s.36.02.52.07l3.55-3.56C19.02 8.35 19 8.18 19 8c0-1.1.9-2 2-2s2 .9 2 2z"></path></g><g id="toc"><path d="M3 9h14V7H3v2zm0 4h14v-2H3v2zm0 4h14v-2H3v2zm16 0h2v-2h-2v2zm0-10v2h2V7h-2zm0 6h2v-2h-2v2z"></path></g><g id="today"><path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"></path></g><g id="toll"><path d="M15 4c-4.42 0-8 3.58-8 8s3.58 8 8 8 8-3.58 8-8-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6zM3 12c0-2.61 1.67-4.83 4-5.65V4.26C3.55 5.15 1 8.27 1 12s2.55 6.85 6 7.74v-2.09c-2.33-.82-4-3.04-4-5.65z"></path></g><g id="touch-app"><path d="M9 11.24V7.5C9 6.12 10.12 5 11.5 5S14 6.12 14 7.5v3.74c1.21-.81 2-2.18 2-3.74C16 5.01 13.99 3 11.5 3S7 5.01 7 7.5c0 1.56.79 2.93 2 3.74zm9.84 4.63l-4.54-2.26c-.17-.07-.35-.11-.54-.11H13v-6c0-.83-.67-1.5-1.5-1.5S10 6.67 10 7.5v10.74l-3.43-.72c-.08-.01-.15-.03-.24-.03-.31 0-.59.13-.79.33l-.79.8 4.94 4.94c.27.27.65.44 1.06.44h6.79c.75 0 1.33-.55 1.44-1.28l.75-5.27c.01-.07.02-.14.02-.2 0-.62-.38-1.16-.91-1.38z"></path></g><g id="track-changes"><path d="M19.07 4.93l-1.41 1.41C19.1 7.79 20 9.79 20 12c0 4.42-3.58 8-8 8s-8-3.58-8-8c0-4.08 3.05-7.44 7-7.93v2.02C8.16 6.57 6 9.03 6 12c0 3.31 2.69 6 6 6s6-2.69 6-6c0-1.66-.67-3.16-1.76-4.24l-1.41 1.41C15.55 9.9 16 10.9 16 12c0 2.21-1.79 4-4 4s-4-1.79-4-4c0-1.86 1.28-3.41 3-3.86v2.14c-.6.35-1 .98-1 1.72 0 1.1.9 2 2 2s2-.9 2-2c0-.74-.4-1.38-1-1.72V2h-1C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10c0-2.76-1.12-5.26-2.93-7.07z"></path></g><g id="translate"><path d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></g><g id="trending-down"><path d="M16 18l2.29-2.29-4.88-4.88-4 4L2 7.41 3.41 6l6 6 4-4 6.3 6.29L22 12v6z"></path></g><g id="trending-flat"><path d="M22 12l-4-4v3H3v2h15v3z"></path></g><g id="trending-up"><path d="M16 6l2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"></path></g><g id="turned-in"><path d="M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2z"></path></g><g id="turned-in-not"><path d="M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2zm0 15l-5-2.18L7 18V5h10v13z"></path></g><g id="unarchive"><path d="M20.55 5.22l-1.39-1.68C18.88 3.21 18.47 3 18 3H6c-.47 0-.88.21-1.15.55L3.46 5.22C3.17 5.57 3 6.01 3 6.5V19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6.5c0-.49-.17-.93-.45-1.28zM12 9.5l5.5 5.5H14v2h-4v-2H6.5L12 9.5zM5.12 5l.82-1h12l.93 1H5.12z"></path></g><g id="undo"><path d="M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z"></path></g><g id="unfold-less"><path d="M7.41 18.59L8.83 20 12 16.83 15.17 20l1.41-1.41L12 14l-4.59 4.59zm9.18-13.18L15.17 4 12 7.17 8.83 4 7.41 5.41 12 10l4.59-4.59z"></path></g><g id="unfold-more"><path d="M12 5.83L15.17 9l1.41-1.41L12 3 7.41 7.59 8.83 9 12 5.83zm0 12.34L8.83 15l-1.41 1.41L12 21l4.59-4.59L15.17 15 12 18.17z"></path></g><g id="update"><path d="M21 10.12h-6.78l2.74-2.82c-2.73-2.7-7.15-2.8-9.88-.1-2.73 2.71-2.73 7.08 0 9.79 2.73 2.71 7.15 2.71 9.88 0C18.32 15.65 19 14.08 19 12.1h2c0 1.98-.88 4.55-2.64 6.29-3.51 3.48-9.21 3.48-12.72 0-3.5-3.47-3.53-9.11-.02-12.58 3.51-3.47 9.14-3.47 12.65 0L21 3v7.12zM12.5 8v4.25l3.5 2.08-.72 1.21L11 13V8h1.5z"></path></g><g id="verified-user"><path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm-2 16l-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9l-8 8z"></path></g><g id="view-agenda"><path d="M20 13H3c-.55 0-1 .45-1 1v6c0 .55.45 1 1 1h17c.55 0 1-.45 1-1v-6c0-.55-.45-1-1-1zm0-10H3c-.55 0-1 .45-1 1v6c0 .55.45 1 1 1h17c.55 0 1-.45 1-1V4c0-.55-.45-1-1-1z"></path></g><g id="view-array"><path d="M4 18h3V5H4v13zM18 5v13h3V5h-3zM8 18h9V5H8v13z"></path></g><g id="view-carousel"><path d="M7 19h10V4H7v15zm-5-2h4V6H2v11zM18 6v11h4V6h-4z"></path></g><g id="view-column"><path d="M10 18h5V5h-5v13zm-6 0h5V5H4v13zM16 5v13h5V5h-5z"></path></g><g id="view-day"><path d="M2 21h19v-3H2v3zM20 8H3c-.55 0-1 .45-1 1v6c0 .55.45 1 1 1h17c.55 0 1-.45 1-1V9c0-.55-.45-1-1-1zM2 3v3h19V3H2z"></path></g><g id="view-headline"><path d="M4 15h16v-2H4v2zm0 4h16v-2H4v2zm0-8h16V9H4v2zm0-6v2h16V5H4z"></path></g><g id="view-list"><path d="M4 14h4v-4H4v4zm0 5h4v-4H4v4zM4 9h4V5H4v4zm5 5h12v-4H9v4zm0 5h12v-4H9v4zM9 5v4h12V5H9z"></path></g><g id="view-module"><path d="M4 11h5V5H4v6zm0 7h5v-6H4v6zm6 0h5v-6h-5v6zm6 0h5v-6h-5v6zm-6-7h5V5h-5v6zm6-6v6h5V5h-5z"></path></g><g id="view-quilt"><path d="M10 18h5v-6h-5v6zm-6 0h5V5H4v13zm12 0h5v-6h-5v6zM10 5v6h11V5H10z"></path></g><g id="view-stream"><path d="M4 18h17v-6H4v6zM4 5v6h17V5H4z"></path></g><g id="view-week"><path d="M6 5H3c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h3c.55 0 1-.45 1-1V6c0-.55-.45-1-1-1zm14 0h-3c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h3c.55 0 1-.45 1-1V6c0-.55-.45-1-1-1zm-7 0h-3c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h3c.55 0 1-.45 1-1V6c0-.55-.45-1-1-1z"></path></g><g id="visibility"><path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"></path></g><g id="visibility-off"><path d="M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78l3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"></path></g><g id="warning"><path d="M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"></path></g><g id="watch-later"><path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2zm4.2 14.2L11 13V7h1.5v5.2l4.5 2.7-.8 1.3z"></path></g><g id="weekend"><path d="M21 10c-1.1 0-2 .9-2 2v3H5v-3c0-1.1-.9-2-2-2s-2 .9-2 2v5c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2v-5c0-1.1-.9-2-2-2zm-3-5H6c-1.1 0-2 .9-2 2v2.15c1.16.41 2 1.51 2 2.82V14h12v-2.03c0-1.3.84-2.4 2-2.82V7c0-1.1-.9-2-2-2z"></path></g><g id="work"><path d="M20 6h-4V4c0-1.11-.89-2-2-2h-4c-1.11 0-2 .89-2 2v2H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-6 0h-4V4h4v2z"></path></g><g id="youtube-searched-for"><path d="M17.01 14h-.8l-.27-.27c.98-1.14 1.57-2.61 1.57-4.23 0-3.59-2.91-6.5-6.5-6.5s-6.5 3-6.5 6.5H2l3.84 4 4.16-4H6.51C6.51 7 8.53 5 11.01 5s4.5 2.01 4.5 4.5c0 2.48-2.02 4.5-4.5 4.5-.65 0-1.26-.14-1.82-.38L7.71 15.1c.97.57 2.09.9 3.3.9 1.61 0 3.08-.59 4.22-1.57l.27.27v.79l5.01 4.99L22 19l-4.99-5z"></path></g><g id="zoom-in"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zm2.5-4h-2v2H9v-2H7V9h2V7h1v2h2v1z"></path></g><g id="zoom-out"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zM7 9h5v1H7z"></path></g></defs></svg></iron-iconset-svg><iron-iconset-svg name="communication" size="24"><svg><defs><g id="business"><path d="M12 7V3H2v18h20V7H12zM6 19H4v-2h2v2zm0-4H4v-2h2v2zm0-4H4V9h2v2zm0-4H4V5h2v2zm4 12H8v-2h2v2zm0-4H8v-2h2v2zm0-4H8V9h2v2zm0-4H8V5h2v2zm10 12h-8v-2h2v-2h-2v-2h2v-2h-2V9h8v10zm-2-8h-2v2h2v-2zm0 4h-2v2h2v-2z"></path></g><g id="call"><path d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"></path></g><g id="call-end"><path d="M12 9c-1.6 0-3.15.25-4.6.72v3.1c0 .39-.23.74-.56.9-.98.49-1.87 1.12-2.66 1.85-.18.18-.43.28-.7.28-.28 0-.53-.11-.71-.29L.29 13.08c-.18-.17-.29-.42-.29-.7 0-.28.11-.53.29-.71C3.34 8.78 7.46 7 12 7s8.66 1.78 11.71 4.67c.18.18.29.43.29.71 0 .28-.11.53-.29.71l-2.48 2.48c-.18.18-.43.29-.71.29-.27 0-.52-.11-.7-.28-.79-.74-1.69-1.36-2.67-1.85-.33-.16-.56-.5-.56-.9v-3.1C15.15 9.25 13.6 9 12 9z"></path></g><g id="call-made"><path d="M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5z"></path></g><g id="call-merge"><path d="M17 20.41L18.41 19 15 15.59 13.59 17 17 20.41zM7.5 8H11v5.59L5.59 19 7 20.41l6-6V8h3.5L12 3.5 7.5 8z"></path></g><g id="call-missed"><path d="M19.59 7L12 14.59 6.41 9H11V7H3v8h2v-4.59l7 7 9-9z"></path></g><g id="call-missed-outgoing"><path d="M3 8.41l9 9 7-7V15h2V7h-8v2h4.59L12 14.59 4.41 7 3 8.41z"></path></g><g id="call-received"><path d="M20 5.41L18.59 4 7 15.59V9H5v10h10v-2H8.41z"></path></g><g id="call-split"><path d="M14 4l2.29 2.29-2.88 2.88 1.42 1.42 2.88-2.88L20 10V4zm-4 0H4v6l2.29-2.29 4.71 4.7V20h2v-8.41l-5.29-5.3z"></path></g><g id="chat"><path d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 9h12v2H6V9zm8 5H6v-2h8v2zm4-6H6V6h12v2z"></path></g><g id="chat-bubble"><path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2z"></path></g><g id="chat-bubble-outline"><path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H6l-2 2V4h16v12z"></path></g><g id="clear-all"><path d="M5 13h14v-2H5v2zm-2 4h14v-2H3v2zM7 7v2h14V7H7z"></path></g><g id="comment"><path d="M21.99 4c0-1.1-.89-2-1.99-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h14l4 4-.01-18zM18 14H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"></path></g><g id="contact-mail"><path d="M21 8V7l-3 2-3-2v1l3 2 3-2zm1-5H2C.9 3 0 3.9 0 5v14c0 1.1.9 2 2 2h20c1.1 0 1.99-.9 1.99-2L24 5c0-1.1-.9-2-2-2zM8 6c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm6 12H2v-1c0-2 4-3.1 6-3.1s6 1.1 6 3.1v1zm8-6h-8V6h8v6z"></path></g><g id="contact-phone"><path d="M22 3H2C.9 3 0 3.9 0 5v14c0 1.1.9 2 2 2h20c1.1 0 1.99-.9 1.99-2L24 5c0-1.1-.9-2-2-2zM8 6c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm6 12H2v-1c0-2 4-3.1 6-3.1s6 1.1 6 3.1v1zm3.85-4h1.64L21 16l-1.99 1.99c-1.31-.98-2.28-2.38-2.73-3.99-.18-.64-.28-1.31-.28-2s.1-1.36.28-2c.45-1.62 1.42-3.01 2.73-3.99L21 8l-1.51 2h-1.64c-.22.63-.35 1.3-.35 2s.13 1.37.35 2z"></path></g><g id="contacts"><path d="M20 0H4v2h16V0zM4 24h16v-2H4v2zM20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm-8 2.75c1.24 0 2.25 1.01 2.25 2.25s-1.01 2.25-2.25 2.25S9.75 10.24 9.75 9 10.76 6.75 12 6.75zM17 17H7v-1.5c0-1.67 3.33-2.5 5-2.5s5 .83 5 2.5V17z"></path></g><g id="dialer-sip"><path d="M17 3h-1v5h1V3zm-2 2h-2V4h2V3h-3v3h2v1h-2v1h3V5zm3-2v5h1V6h2V3h-3zm2 2h-1V4h1v1zm0 10.5c-1.25 0-2.45-.2-3.57-.57-.35-.11-.74-.03-1.01.24l-2.2 2.2c-2.83-1.44-5.15-3.75-6.59-6.59l2.2-2.21c.27-.26.35-.65.24-1C8.7 6.45 8.5 5.25 8.5 4c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1 0 9.39 7.61 17 17 17 .55 0 1-.45 1-1v-3.5c0-.55-.45-1-1-1z"></path></g><g id="dialpad"><path d="M12 19c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zM6 1c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12-8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm-6 8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"></path></g><g id="email"><path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"></path></g><g id="forum"><path d="M21 6h-2v9H6v2c0 .55.45 1 1 1h11l4 4V7c0-.55-.45-1-1-1zm-4 6V3c0-.55-.45-1-1-1H3c-.55 0-1 .45-1 1v14l4-4h10c.55 0 1-.45 1-1z"></path></g><g id="import-contacts"><path d="M21 5c-1.11-.35-2.33-.5-3.5-.5-1.95 0-4.05.4-5.5 1.5-1.45-1.1-3.55-1.5-5.5-1.5S2.45 4.9 1 6v14.65c0 .25.25.5.5.5.1 0 .15-.05.25-.05C3.1 20.45 5.05 20 6.5 20c1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.3 4.75 1.05.1.05.15.05.25.05.25 0 .5-.25.5-.5V6c-.6-.45-1.25-.75-2-1zm0 13.5c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V8c1.35-.85 3.8-1.5 5.5-1.5 1.2 0 2.4.15 3.5.5v11.5z"></path></g><g id="import-export"><path d="M9 3L5 6.99h3V14h2V6.99h3L9 3zm7 14.01V10h-2v7.01h-3L15 21l4-3.99h-3z"></path></g><g id="invert-colors-off"><path d="M20.65 20.87l-2.35-2.35-6.3-6.29-3.56-3.57-1.42-1.41L4.27 4.5 3 5.77l2.78 2.78c-2.55 3.14-2.36 7.76.56 10.69C7.9 20.8 9.95 21.58 12 21.58c1.79 0 3.57-.59 5.03-1.78l2.7 2.7L21 21.23l-.35-.36zM12 19.59c-1.6 0-3.11-.62-4.24-1.76C6.62 16.69 6 15.19 6 13.59c0-1.32.43-2.57 1.21-3.6L12 14.77v4.82zM12 5.1v4.58l7.25 7.26c1.37-2.96.84-6.57-1.6-9.01L12 2.27l-3.7 3.7 1.41 1.41L12 5.1z"></path></g><g id="live-help"><path d="M19 2H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h4l3 3 3-3h4c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-6 16h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 11.9 13 12.5 13 14h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"></path></g><g id="location-off"><path d="M12 6.5c1.38 0 2.5 1.12 2.5 2.5 0 .74-.33 1.39-.83 1.85l3.63 3.63c.98-1.86 1.7-3.8 1.7-5.48 0-3.87-3.13-7-7-7-1.98 0-3.76.83-5.04 2.15l3.19 3.19c.46-.52 1.11-.84 1.85-.84zm4.37 9.6l-4.63-4.63-.11-.11L3.27 3 2 4.27l3.18 3.18C5.07 7.95 5 8.47 5 9c0 5.25 7 13 7 13s1.67-1.85 3.38-4.35L18.73 21 20 19.73l-3.63-3.63z"></path></g><g id="location-on"><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"></path></g><g id="mail-outline"><path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 14H4V8l8 5 8-5v10zm-8-7L4 6h16l-8 5z"></path></g><g id="message"><path d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"></path></g><g id="no-sim"><path d="M18.99 5c0-1.1-.89-2-1.99-2h-7L7.66 5.34 19 16.68 18.99 5zM3.65 3.88L2.38 5.15 5 7.77V19c0 1.1.9 2 2 2h10.01c.35 0 .67-.1.96-.26l1.88 1.88 1.27-1.27L3.65 3.88z"></path></g><g id="phone"><path d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"></path></g><g id="phonelink-erase"><path d="M13 8.2l-1-1-4 4-4-4-1 1 4 4-4 4 1 1 4-4 4 4 1-1-4-4 4-4zM19 1H9c-1.1 0-2 .9-2 2v3h2V4h10v16H9v-2H7v3c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V3c0-1.1-.9-2-2-2z"></path></g><g id="phonelink-lock"><path d="M19 1H9c-1.1 0-2 .9-2 2v3h2V4h10v16H9v-2H7v3c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V3c0-1.1-.9-2-2-2zm-8.2 10V9.5C10.8 8.1 9.4 7 8 7S5.2 8.1 5.2 9.5V11c-.6 0-1.2.6-1.2 1.2v3.5c0 .7.6 1.3 1.2 1.3h5.5c.7 0 1.3-.6 1.3-1.2v-3.5c0-.7-.6-1.3-1.2-1.3zm-1.3 0h-3V9.5c0-.8.7-1.3 1.5-1.3s1.5.5 1.5 1.3V11z"></path></g><g id="phonelink-ring"><path d="M20.1 7.7l-1 1c1.8 1.8 1.8 4.6 0 6.5l1 1c2.5-2.3 2.5-6.1 0-8.5zM18 9.8l-1 1c.5.7.5 1.6 0 2.3l1 1c1.2-1.2 1.2-3 0-4.3zM14 1H4c-1.1 0-2 .9-2 2v18c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V3c0-1.1-.9-2-2-2zm0 19H4V4h10v16z"></path></g><g id="phonelink-setup"><path d="M11.8 12.5v-1l1.1-.8c.1-.1.1-.2.1-.3l-1-1.7c-.1-.1-.2-.2-.3-.1l-1.3.4c-.3-.2-.6-.4-.9-.5l-.2-1.3c0-.1-.1-.2-.3-.2H7c-.1 0-.2.1-.3.2l-.2 1.3c-.3.1-.6.3-.9.5l-1.3-.5c-.1 0-.2 0-.3.1l-1 1.7c-.1.1 0 .2.1.3l1.1.8v1l-1.1.8c-.1.2-.1.3-.1.4l1 1.7c.1.1.2.2.3.1l1.4-.4c.3.2.6.4.9.5l.2 1.3c-.1.1.1.2.2.2h2c.1 0 .2-.1.3-.2l.2-1.3c.3-.1.6-.3.9-.5l1.3.5c.1 0 .2 0 .3-.1l1-1.7c.1-.1 0-.2-.1-.3l-1.1-.9zM8 14c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zM19 1H9c-1.1 0-2 .9-2 2v3h2V4h10v16H9v-2H7v3c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V3c0-1.1-.9-2-2-2z"></path></g><g id="portable-wifi-off"><path d="M17.56 14.24c.28-.69.44-1.45.44-2.24 0-3.31-2.69-6-6-6-.79 0-1.55.16-2.24.44l1.62 1.62c.2-.03.41-.06.62-.06 2.21 0 4 1.79 4 4 0 .21-.02.42-.05.63l1.61 1.61zM12 4c4.42 0 8 3.58 8 8 0 1.35-.35 2.62-.95 3.74l1.47 1.47C21.46 15.69 22 13.91 22 12c0-5.52-4.48-10-10-10-1.91 0-3.69.55-5.21 1.47l1.46 1.46C9.37 4.34 10.65 4 12 4zM3.27 2.5L2 3.77l2.1 2.1C2.79 7.57 2 9.69 2 12c0 3.7 2.01 6.92 4.99 8.65l1-1.73C5.61 17.53 4 14.96 4 12c0-1.76.57-3.38 1.53-4.69l1.43 1.44C6.36 9.68 6 10.8 6 12c0 2.22 1.21 4.15 3 5.19l1-1.74c-1.19-.7-2-1.97-2-3.45 0-.65.17-1.25.44-1.79l1.58 1.58L10 12c0 1.1.9 2 2 2l.21-.02.01.01 7.51 7.51L21 20.23 4.27 3.5l-1-1z"></path></g><g id="present-to-all"><path d="M21 3H3c-1.11 0-2 .89-2 2v14c0 1.11.89 2 2 2h18c1.11 0 2-.89 2-2V5c0-1.11-.89-2-2-2zm0 16.02H3V4.98h18v14.04zM10 12H8l4-4 4 4h-2v4h-4v-4z"></path></g><g id="ring-volume"><path d="M23.71 16.67C20.66 13.78 16.54 12 12 12 7.46 12 3.34 13.78.29 16.67c-.18.18-.29.43-.29.71 0 .28.11.53.29.71l2.48 2.48c.18.18.43.29.71.29.27 0 .52-.11.7-.28.79-.74 1.69-1.36 2.66-1.85.33-.16.56-.5.56-.9v-3.1c1.45-.48 3-.73 4.6-.73s3.15.25 4.6.72v3.1c0 .39.23.74.56.9.98.49 1.87 1.12 2.66 1.85.18.18.43.28.7.28.28 0 .53-.11.71-.29l2.48-2.48c.18-.18.29-.43.29-.71 0-.27-.11-.52-.29-.7zM21.16 6.26l-1.41-1.41-3.56 3.55 1.41 1.41s3.45-3.52 3.56-3.55zM13 2h-2v5h2V2zM6.4 9.81L7.81 8.4 4.26 4.84 2.84 6.26c.11.03 3.56 3.55 3.56 3.55z"></path></g><g id="rss-feed"><circle cx="6.18" cy="17.82" r="2.18"></circle><path d="M4 4.44v2.83c7.03 0 12.73 5.7 12.73 12.73h2.83c0-8.59-6.97-15.56-15.56-15.56zm0 5.66v2.83c3.9 0 7.07 3.17 7.07 7.07h2.83c0-5.47-4.43-9.9-9.9-9.9z"></path></g><g id="screen-share"><path d="M20 18c1.1 0 1.99-.9 1.99-2L22 6c0-1.11-.9-2-2-2H4c-1.11 0-2 .89-2 2v10c0 1.1.89 2 2 2H0v2h24v-2h-4zm-7-3.53v-2.19c-2.78 0-4.61.85-6 2.72.56-2.67 2.11-5.33 6-5.87V7l4 3.73-4 3.74z"></path></g><g id="speaker-phone"><path d="M7 7.07L8.43 8.5c.91-.91 2.18-1.48 3.57-1.48s2.66.57 3.57 1.48L17 7.07C15.72 5.79 13.95 5 12 5s-3.72.79-5 2.07zM12 1C8.98 1 6.24 2.23 4.25 4.21l1.41 1.41C7.28 4 9.53 3 12 3s4.72 1 6.34 2.62l1.41-1.41C17.76 2.23 15.02 1 12 1zm2.86 9.01L9.14 10C8.51 10 8 10.51 8 11.14v9.71c0 .63.51 1.14 1.14 1.14h5.71c.63 0 1.14-.51 1.14-1.14v-9.71c.01-.63-.5-1.13-1.13-1.13zM15 20H9v-8h6v8z"></path></g><g id="stay-current-landscape"><path d="M1.01 7L1 17c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2H3c-1.1 0-1.99.9-1.99 2zM19 7v10H5V7h14z"></path></g><g id="stay-current-portrait"><path d="M17 1.01L7 1c-1.1 0-1.99.9-1.99 2v18c0 1.1.89 2 1.99 2h10c1.1 0 2-.9 2-2V3c0-1.1-.9-1.99-2-1.99zM17 19H7V5h10v14z"></path></g><g id="stay-primary-landscape"><path d="M1.01 7L1 17c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2H3c-1.1 0-1.99.9-1.99 2zM19 7v10H5V7h14z"></path></g><g id="stay-primary-portrait"><path d="M17 1.01L7 1c-1.1 0-1.99.9-1.99 2v18c0 1.1.89 2 1.99 2h10c1.1 0 2-.9 2-2V3c0-1.1-.9-1.99-2-1.99zM17 19H7V5h10v14z"></path></g><g id="stop-screen-share"><path d="M21.22 18.02l2 2H24v-2h-2.78zm.77-2l.01-10c0-1.11-.9-2-2-2H7.22l5.23 5.23c.18-.04.36-.07.55-.1V7.02l4 3.73-1.58 1.47 5.54 5.54c.61-.33 1.03-.99 1.03-1.74zM2.39 1.73L1.11 3l1.54 1.54c-.4.36-.65.89-.65 1.48v10c0 1.1.89 2 2 2H0v2h18.13l2.71 2.71 1.27-1.27L2.39 1.73zM7 15.02c.31-1.48.92-2.95 2.07-4.06l1.59 1.59c-1.54.38-2.7 1.18-3.66 2.47z"></path></g><g id="swap-calls"><path d="M18 4l-4 4h3v7c0 1.1-.9 2-2 2s-2-.9-2-2V8c0-2.21-1.79-4-4-4S5 5.79 5 8v7H2l4 4 4-4H7V8c0-1.1.9-2 2-2s2 .9 2 2v7c0 2.21 1.79 4 4 4s4-1.79 4-4V8h3l-4-4z"></path></g><g id="textsms"><path d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM9 11H7V9h2v2zm4 0h-2V9h2v2zm4 0h-2V9h2v2z"></path></g><g id="voicemail"><path d="M18.5 6C15.46 6 13 8.46 13 11.5c0 1.33.47 2.55 1.26 3.5H9.74c.79-.95 1.26-2.17 1.26-3.5C11 8.46 8.54 6 5.5 6S0 8.46 0 11.5 2.46 17 5.5 17h13c3.04 0 5.5-2.46 5.5-5.5S21.54 6 18.5 6zm-13 9C3.57 15 2 13.43 2 11.5S3.57 8 5.5 8 9 9.57 9 11.5 7.43 15 5.5 15zm13 0c-1.93 0-3.5-1.57-3.5-3.5S16.57 8 18.5 8 22 9.57 22 11.5 20.43 15 18.5 15z"></path></g><g id="vpn-key"><path d="M12.65 10C11.83 7.67 9.61 6 7 6c-3.31 0-6 2.69-6 6s2.69 6 6 6c2.61 0 4.83-1.67 5.65-4H17v4h4v-4h2v-4H12.65zM7 14c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"></path></g></defs></svg></iron-iconset-svg><script>Polymer.IronFitBehavior={properties:{sizingTarget:{type:Object,value:function(){return this}},fitInto:{type:Object,value:window},noOverlap:{type:Boolean},positionTarget:{type:Element},horizontalAlign:{type:String},verticalAlign:{type:String},dynamicAlign:{type:Boolean},horizontalOffset:{type:Number,value:0,notify:!0},verticalOffset:{type:Number,value:0,notify:!0},autoFitOnAttach:{type:Boolean,value:!1},_fitInfo:{type:Object}},get _fitWidth(){var a;return a=this.fitInto===window?this.fitInto.innerWidth:this.fitInto.getBoundingClientRect().width,a},get _fitHeight(){var a;return a=this.fitInto===window?this.fitInto.innerHeight:this.fitInto.getBoundingClientRect().height,a},get _fitLeft(){var a;return a=this.fitInto===window?0:this.fitInto.getBoundingClientRect().left,a},get _fitTop(){var a;return a=this.fitInto===window?0:this.fitInto.getBoundingClientRect().top,a},get _defaultPositionTarget(){var a=Polymer.dom(this).parentNode;return a&&a.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&(a=a.host),a},get _localeHorizontalAlign(){if(this._isRTL){if('right'===this.horizontalAlign)return'left';if('left'===this.horizontalAlign)return'right'}return this.horizontalAlign},get __shouldPosition(){return(this.horizontalAlign||this.verticalAlign)&&('center'!==this.horizontalAlign||'middle'!==this.verticalAlign)},attached:function(){'undefined'===typeof this._isRTL&&(this._isRTL='rtl'==window.getComputedStyle(this).direction),this.positionTarget=this.positionTarget||this._defaultPositionTarget,this.autoFitOnAttach&&('none'===window.getComputedStyle(this).display?setTimeout(function(){this.fit()}.bind(this)):(window.ShadyDOM&&ShadyDOM.flush(),this.fit()))},detached:function(){this.__deferredFit&&(clearTimeout(this.__deferredFit),this.__deferredFit=null)},fit:function(){this.position(),this.constrain(),this.center()},_discoverInfo:function(){if(!this._fitInfo){var a=window.getComputedStyle(this),b=window.getComputedStyle(this.sizingTarget);this._fitInfo={inlineStyle:{top:this.style.top||'',left:this.style.left||'',position:this.style.position||''},sizerInlineStyle:{maxWidth:this.sizingTarget.style.maxWidth||'',maxHeight:this.sizingTarget.style.maxHeight||'',boxSizing:this.sizingTarget.style.boxSizing||''},positionedBy:{vertically:'auto'===a.top?'auto'===a.bottom?null:'bottom':'top',horizontally:'auto'===a.left?'auto'===a.right?null:'right':'left'},sizedBy:{height:'none'!==b.maxHeight,width:'none'!==b.maxWidth,minWidth:parseInt(b.minWidth,10)||0,minHeight:parseInt(b.minHeight,10)||0},margin:{top:parseInt(a.marginTop,10)||0,right:parseInt(a.marginRight,10)||0,bottom:parseInt(a.marginBottom,10)||0,left:parseInt(a.marginLeft,10)||0}}}},resetFit:function(){var a=this._fitInfo||{};for(var b in a.sizerInlineStyle)this.sizingTarget.style[b]=a.sizerInlineStyle[b];for(var b in a.inlineStyle)this.style[b]=a.inlineStyle[b];this._fitInfo=null},refit:function(){var a=this.sizingTarget.scrollLeft,b=this.sizingTarget.scrollTop;this.resetFit(),this.fit(),this.sizingTarget.scrollLeft=a,this.sizingTarget.scrollTop=b},position:function(){var a=Math.max,b=Math.min;if(this.__shouldPosition){this._discoverInfo(),this.style.position='fixed',this.sizingTarget.style.boxSizing='border-box',this.style.left='0px',this.style.top='0px';var c=this.getBoundingClientRect(),d=this.__getNormalizedRect(this.positionTarget),e=this.__getNormalizedRect(this.fitInto),f=this._fitInfo.margin,g={width:c.width+f.left+f.right,height:c.height+f.top+f.bottom},h=this.__getPosition(this._localeHorizontalAlign,this.verticalAlign,g,c,d,e),i=h.left+f.left,j=h.top+f.top,k=b(e.right-f.right,i+c.width),l=b(e.bottom-f.bottom,j+c.height);i=a(e.left+f.left,b(i,k-this._fitInfo.sizedBy.minWidth)),j=a(e.top+f.top,b(j,l-this._fitInfo.sizedBy.minHeight)),this.sizingTarget.style.maxWidth=a(k-i,this._fitInfo.sizedBy.minWidth)+'px',this.sizingTarget.style.maxHeight=a(l-j,this._fitInfo.sizedBy.minHeight)+'px',this.style.left=i-c.left+'px',this.style.top=j-c.top+'px'}},constrain:function(){if(!this.__shouldPosition){this._discoverInfo();var a=this._fitInfo;a.positionedBy.vertically||(this.style.position='fixed',this.style.top='0px'),a.positionedBy.horizontally||(this.style.position='fixed',this.style.left='0px'),this.sizingTarget.style.boxSizing='border-box';var b=this.getBoundingClientRect();a.sizedBy.height||this.__sizeDimension(b,a.positionedBy.vertically,'top','bottom','Height'),a.sizedBy.width||this.__sizeDimension(b,a.positionedBy.horizontally,'left','right','Width')}},_sizeDimension:function(a,b,c,d,e){this.__sizeDimension(a,b,c,d,e)},__sizeDimension:function(a,b,c,d,e){var f=this._fitInfo,g=this.__getNormalizedRect(this.fitInto),h='Width'===e?g.width:g.height,i=b===d,j=i?h-a[d]:a[c],k=f.margin[i?c:d],l='offset'+e,m=this[l]-this.sizingTarget[l];this.sizingTarget.style['max'+e]=h-k-j-m+'px'},center:function(){if(!this.__shouldPosition){this._discoverInfo();var a=this._fitInfo.positionedBy;if(!(a.vertically&&a.horizontally)){this.style.position='fixed',a.vertically||(this.style.top='0px'),a.horizontally||(this.style.left='0px');var b=this.getBoundingClientRect(),c=this.__getNormalizedRect(this.fitInto);if(!a.vertically){var d=c.top-b.top+(c.height-b.height)/2;this.style.top=d+'px'}if(!a.horizontally){var e=c.left-b.left+(c.width-b.width)/2;this.style.left=e+'px'}}}},__getNormalizedRect:function(a){return a===document.documentElement||a===window?{top:0,left:0,width:window.innerWidth,height:window.innerHeight,right:window.innerWidth,bottom:window.innerHeight}:a.getBoundingClientRect()},__getOffscreenArea:function(a,b,c){var d=Math.abs,e=Math.min,f=e(0,a.top)+e(0,c.bottom-(a.top+b.height)),g=e(0,a.left)+e(0,c.right-(a.left+b.width));return d(f)*b.width+d(g)*b.height},__getPosition:function(a,b,c,d,e,f){var g=[{verticalAlign:'top',horizontalAlign:'left',top:e.top+this.verticalOffset,left:e.left+this.horizontalOffset},{verticalAlign:'top',horizontalAlign:'right',top:e.top+this.verticalOffset,left:e.right-c.width-this.horizontalOffset},{verticalAlign:'bottom',horizontalAlign:'left',top:e.bottom-c.height-this.verticalOffset,left:e.left+this.horizontalOffset},{verticalAlign:'bottom',horizontalAlign:'right',top:e.bottom-c.height-this.verticalOffset,left:e.right-c.width-this.horizontalOffset}];if(this.noOverlap){for(var h,j=0,i=g.length;j<i;j++){for(var k in h={},g[j])h[k]=g[j][k];g.push(h)}g[0].top=g[1].top+=e.height,g[2].top=g[3].top-=e.height,g[4].left=g[6].left+=e.width,g[5].left=g[7].left-=e.width}b='auto'===b?null:b,a='auto'===a?null:a,a&&'center'!==a||(g.push({verticalAlign:'top',horizontalAlign:'center',top:e.top+this.verticalOffset+(this.noOverlap?e.height:0),left:e.left-d.width/2+e.width/2+this.horizontalOffset}),g.push({verticalAlign:'bottom',horizontalAlign:'center',top:e.bottom-c.height-this.verticalOffset-(this.noOverlap?e.height:0),left:e.left-d.width/2+e.width/2+this.horizontalOffset})),b&&'middle'!==b||(g.push({verticalAlign:'middle',horizontalAlign:'left',top:e.top-d.height/2+e.height/2+this.verticalOffset,left:e.left+this.horizontalOffset+(this.noOverlap?e.width:0)}),g.push({verticalAlign:'middle',horizontalAlign:'right',top:e.top-d.height/2+e.height/2+this.verticalOffset,left:e.right-c.width-this.horizontalOffset-(this.noOverlap?e.width:0)}));for(var l,j=0;j<g.length;j++){var m=g[j],n=m.verticalAlign===b,o=m.horizontalAlign===a;if(!this.dynamicAlign&&!this.noOverlap&&n&&o){l=m;break}var p=(!b||n)&&(!a||o);if(this.dynamicAlign||p){if(m.offscreenArea=this.__getOffscreenArea(m,c,f),0===m.offscreenArea&&p){l=m;break}l=l||m;var q=m.offscreenArea-l.offscreenArea;(0>q||0===q&&(n||o))&&(l=m)}}return l}};</script><dom-module id="iron-overlay-backdrop" assetpath="../bower_components/iron-overlay-behavior/"><template><style>:host{position:fixed;top:0;left:0;width:100%;height:100%;background-color:var(--iron-overlay-backdrop-background-color, #000);opacity:0;transition:opacity 0.2s;pointer-events:none;@apply --iron-overlay-backdrop;}:host(.opened){opacity:var(--iron-overlay-backdrop-opacity, 0.6);pointer-events:auto;@apply --iron-overlay-backdrop-opened;}</style><slot></slot></template></dom-module><script>(function(){'use strict';Polymer({is:'iron-overlay-backdrop',properties:{opened:{reflectToAttribute:!0,type:Boolean,value:!1,observer:'_openedChanged'}},listeners:{transitionend:'_onTransitionend'},created:function(){this.__openedRaf=null},attached:function(){this.opened&&this._openedChanged(this.opened)},prepare:function(){this.opened&&!this.parentNode&&Polymer.dom(document.body).appendChild(this)},open:function(){this.opened=!0},close:function(){this.opened=!1},complete:function(){this.opened||this.parentNode!==document.body||Polymer.dom(this.parentNode).removeChild(this)},_onTransitionend:function(a){a&&a.target===this&&this.complete()},_openedChanged:function(a){if(a)this.prepare();else{var b=window.getComputedStyle(this);('0s'===b.transitionDuration||0==b.opacity)&&this.complete()}this.isAttached&&(this.__openedRaf&&(window.cancelAnimationFrame(this.__openedRaf),this.__openedRaf=null),this.scrollTop=this.scrollTop,this.__openedRaf=window.requestAnimationFrame(function(){this.__openedRaf=null,this.toggleClass('opened',this.opened)}.bind(this)))}})})();</script><script>Polymer.IronOverlayManagerClass=function(){this._overlays=[],this._minimumZ=101,this._backdropElement=null,Polymer.Gestures.add(document.documentElement,'tap',function(){}),document.addEventListener('tap',this._onCaptureClick.bind(this),!0),document.addEventListener('focus',this._onCaptureFocus.bind(this),!0),document.addEventListener('keydown',this._onCaptureKeyDown.bind(this),!0)},Polymer.IronOverlayManagerClass.prototype={constructor:Polymer.IronOverlayManagerClass,get backdropElement(){return this._backdropElement||(this._backdropElement=document.createElement('iron-overlay-backdrop')),this._backdropElement},get deepActiveElement(){var a=document.activeElement;for(a&&!1!==a instanceof Element||(a=document.body);a.root&&Polymer.dom(a.root).activeElement;)a=Polymer.dom(a.root).activeElement;return a},_bringOverlayAtIndexToFront:function(a){var b=this._overlays[a];if(b){var c=this._overlays.length-1,d=this._overlays[c];if(d&&this._shouldBeBehindOverlay(b,d)&&c--,!(a>=c)){var e=Math.max(this.currentOverlayZ(),this._minimumZ);for(this._getZ(b)<=e&&this._applyOverlayZ(b,e);a<c;)this._overlays[a]=this._overlays[a+1],a++;this._overlays[c]=b}}},addOrRemoveOverlay:function(a){a.opened?this.addOverlay(a):this.removeOverlay(a)},addOverlay:function(a){var b=Math.max,c=this._overlays.indexOf(a);if(0<=c)return this._bringOverlayAtIndexToFront(c),void this.trackBackdrop();var d=this._overlays.length,e=this._overlays[d-1],f=b(this._getZ(e),this._minimumZ),g=this._getZ(a);if(e&&this._shouldBeBehindOverlay(a,e)){this._applyOverlayZ(e,f),d--;var h=this._overlays[d-1];f=b(this._getZ(h),this._minimumZ)}g<=f&&this._applyOverlayZ(a,f),this._overlays.splice(d,0,a),this.trackBackdrop()},removeOverlay:function(a){var b=this._overlays.indexOf(a);-1===b||(this._overlays.splice(b,1),this.trackBackdrop())},currentOverlay:function(){var a=this._overlays.length-1;return this._overlays[a]},currentOverlayZ:function(){return this._getZ(this.currentOverlay())},ensureMinimumZ:function(a){this._minimumZ=Math.max(this._minimumZ,a)},focusOverlay:function(){var a=this.currentOverlay();a&&a._applyFocus()},trackBackdrop:function(){var a=this._overlayWithBackdrop();(a||this._backdropElement)&&(this.backdropElement.style.zIndex=this._getZ(a)-1,this.backdropElement.opened=!!a,this.backdropElement.prepare())},getBackdrops:function(){for(var a=[],b=0;b<this._overlays.length;b++)this._overlays[b].withBackdrop&&a.push(this._overlays[b]);return a},backdropZ:function(){return this._getZ(this._overlayWithBackdrop())-1},_overlayWithBackdrop:function(){for(var a=this._overlays.length-1;0<=a;a--)if(this._overlays[a].withBackdrop)return this._overlays[a]},_getZ:function(a){var b=this._minimumZ;if(a){var c=+(a.style.zIndex||window.getComputedStyle(a).zIndex);c===c&&(b=c)}return b},_setZ:function(a,b){a.style.zIndex=b},_applyOverlayZ:function(a,b){this._setZ(a,b+2)},_overlayInPath:function(a){a=a||[];for(var b=0;b<a.length;b++)if(a[b]._manager===this)return a[b]},_onCaptureClick:function(a){var b=this._overlays.length-1;if(-1!==b)for(var c,d=Polymer.dom(a).path;(c=this._overlays[b])&&this._overlayInPath(d)!==c&&(c._onCaptureClick(a),c.allowClickThrough);)b--},_onCaptureFocus:function(a){var b=this.currentOverlay();b&&b._onCaptureFocus(a)},_onCaptureKeyDown:function(a){var b=this.currentOverlay();b&&(Polymer.IronA11yKeysBehavior.keyboardEventMatchesKeys(a,'esc')?b._onCaptureEsc(a):Polymer.IronA11yKeysBehavior.keyboardEventMatchesKeys(a,'tab')&&b._onCaptureTab(a))},_shouldBeBehindOverlay:function(a,b){return!a.alwaysOnTop&&b.alwaysOnTop}},Polymer.IronOverlayManager=new Polymer.IronOverlayManagerClass;</script><script>(function(){'use strict';var a={pageX:0,pageY:0},b=null,c=[],d=['wheel','mousewheel','DOMMouseScroll','touchstart','touchmove'];Polymer.IronScrollManager={get currentLockingElement(){return this._lockingElements[this._lockingElements.length-1]},elementIsScrollLocked:function(a){var b=this.currentLockingElement;if(void 0===b)return!1;var c;return!!this._hasCachedLockedElement(a)||!this._hasCachedUnlockedElement(a)&&(c=!!b&&b!==a&&!this._composedTreeContains(b,a),c?this._lockedElementCache.push(a):this._unlockedElementCache.push(a),c)},pushScrollLock:function(a){0<=this._lockingElements.indexOf(a)||(0===this._lockingElements.length&&this._lockScrollInteractions(),this._lockingElements.push(a),this._lockedElementCache=[],this._unlockedElementCache=[])},removeScrollLock:function(a){var b=this._lockingElements.indexOf(a);-1===b||(this._lockingElements.splice(b,1),this._lockedElementCache=[],this._unlockedElementCache=[],0===this._lockingElements.length&&this._unlockScrollInteractions())},_lockingElements:[],_lockedElementCache:null,_unlockedElementCache:null,_hasCachedLockedElement:function(a){return-1<this._lockedElementCache.indexOf(a)},_hasCachedUnlockedElement:function(a){return-1<this._unlockedElementCache.indexOf(a)},_composedTreeContains:function(a,b){var c,d,e,f;if(a.contains(b))return!0;for(c=Polymer.dom(a).querySelectorAll('content,slot'),e=0;e<c.length;++e)for(d=Polymer.dom(c[e]).getDistributedNodes(),f=0;f<d.length;++f)if(d[f].nodeType===Node.ELEMENT_NODE&&this._composedTreeContains(d[f],b))return!0;return!1},_scrollInteractionHandler:function(b){if(b.cancelable&&this._shouldPreventScrolling(b)&&b.preventDefault(),b.targetTouches){var c=b.targetTouches[0];a.pageX=c.pageX,a.pageY=c.pageY}},_lockScrollInteractions:function(){this._boundScrollHandler=this._boundScrollHandler||this._scrollInteractionHandler.bind(this);for(var a=0,b=d.length;a<b;a++)document.addEventListener(d[a],this._boundScrollHandler,{capture:!0,passive:!1})},_unlockScrollInteractions:function(){for(var a=0,b=d.length;a<b;a++)document.removeEventListener(d[a],this._boundScrollHandler,{capture:!0,passive:!1})},_shouldPreventScrolling:function(a){var d=Polymer.dom(a).rootTarget;if('touchmove'!==a.type&&b!==d&&(b=d,c=this._getScrollableNodes(Polymer.dom(a).path)),!c.length)return!0;if('touchstart'===a.type)return!1;var e=this._getScrollInfo(a);return!this._getScrollingNode(c,e.deltaX,e.deltaY)},_getScrollableNodes:function(a){for(var b=[],c=a.indexOf(this.currentLockingElement),d=0;d<=c;d++)if(a[d].nodeType===Node.ELEMENT_NODE){var e=a[d],f=e.style;'scroll'!==f.overflow&&'auto'!==f.overflow&&(f=window.getComputedStyle(e)),('scroll'===f.overflow||'auto'===f.overflow)&&b.push(e)}return b},_getScrollingNode:function(a,b,c){var d=Math.abs;if(b||c)for(var e=d(c)>=d(b),f=0;f<a.length;f++){var g=a[f],h=!1;if(h=e?0>c?0<g.scrollTop:g.scrollTop<g.scrollHeight-g.clientHeight:0>b?0<g.scrollLeft:g.scrollLeft<g.scrollWidth-g.clientWidth,h)return g}},_getScrollInfo:function(b){var c={deltaX:b.deltaX,deltaY:b.deltaY};if('deltaX'in b);else if('wheelDeltaX'in b&&'wheelDeltaY'in b)c.deltaX=-b.wheelDeltaX,c.deltaY=-b.wheelDeltaY;else if('wheelDelta'in b)c.deltaX=0,c.deltaY=-b.wheelDelta;else if('axis'in b)c.deltaX=1===b.axis?b.detail:0,c.deltaY=2===b.axis?b.detail:0;else if(b.targetTouches){var d=b.targetTouches[0];c.deltaX=a.pageX-d.pageX,c.deltaY=a.pageY-d.pageY}return c}}})();</script><script>(function(){'use strict';var a=Element.prototype,b=a.matches||a.matchesSelector||a.mozMatchesSelector||a.msMatchesSelector||a.oMatchesSelector||a.webkitMatchesSelector;Polymer.IronFocusablesHelper={getTabbableNodes:function(a){var b=[],c=this._collectTabbableNodes(a,b);return c?this._sortByTabIndex(b):b},isFocusable:function(a){return b.call(a,'input, select, textarea, button, object')?b.call(a,':not([disabled])'):b.call(a,'a[href], area[href], iframe, [tabindex], [contentEditable]')},isTabbable:function(a){return this.isFocusable(a)&&b.call(a,':not([tabindex="-1"])')&&this._isVisible(a)},_normalizedTabIndex:function(a){if(this.isFocusable(a)){var b=a.getAttribute('tabindex')||0;return+b}return-1},_collectTabbableNodes:function(a,b){if(a.nodeType!==Node.ELEMENT_NODE||!this._isVisible(a))return!1;var c=a,d=this._normalizedTabIndex(c),e=0<d;0<=d&&b.push(c);var f='content'===c.localName||'slot'===c.localName?Polymer.dom(c).getDistributedNodes():Polymer.dom(c.root||c).children;for(var g=0;g<f.length;g++)e=this._collectTabbableNodes(f[g],b)||e;return e},_isVisible:function(a){var b=a.style;return'hidden'!==b.visibility&&'none'!==b.display&&(b=window.getComputedStyle(a),'hidden'!==b.visibility&&'none'!==b.display)},_sortByTabIndex:function(a){var b=a.length;if(2>b)return a;var c=Math.ceil(b/2),d=this._sortByTabIndex(a.slice(0,c)),e=this._sortByTabIndex(a.slice(c));return this._mergeSortByTabIndex(d,e)},_mergeSortByTabIndex:function(a,b){for(var c=[];0<a.length&&0<b.length;)this._hasLowerTabOrder(a[0],b[0])?c.push(b.shift()):c.push(a.shift());return c.concat(a,b)},_hasLowerTabOrder:function(c,a){var b=Math.max,d=b(c.tabIndex,0),e=b(a.tabIndex,0);return 0===d||0===e?e>d:d>e}}})();</script><script>(function(){'use strict';Polymer.IronOverlayBehaviorImpl={properties:{opened:{observer:'_openedChanged',type:Boolean,value:!1,notify:!0},canceled:{observer:'_canceledChanged',readOnly:!0,type:Boolean,value:!1},withBackdrop:{observer:'_withBackdropChanged',type:Boolean},noAutoFocus:{type:Boolean,value:!1},noCancelOnEscKey:{type:Boolean,value:!1},noCancelOnOutsideClick:{type:Boolean,value:!1},closingReason:{type:Object},restoreFocusOnClose:{type:Boolean,value:!1},allowClickThrough:{type:Boolean},alwaysOnTop:{type:Boolean},scrollAction:{type:String},_manager:{type:Object,value:Polymer.IronOverlayManager},_focusedChild:{type:Object}},listeners:{"iron-resize":'_onIronResize'},observers:['__updateScrollObservers(isAttached, opened, scrollAction)'],get backdropElement(){return this._manager.backdropElement},get _focusNode(){return this._focusedChild||Polymer.dom(this).querySelector('[autofocus]')||this},get _focusableNodes(){return Polymer.IronFocusablesHelper.getTabbableNodes(this)},ready:function(){this.__isAnimating=!1,this.__shouldRemoveTabIndex=!1,this.__firstFocusableNode=this.__lastFocusableNode=null,this.__rafs={},this.__restoreFocusNode=null,this.__scrollTop=this.__scrollLeft=null,this.__onCaptureScroll=this.__onCaptureScroll.bind(this),this.__rootNodes=null,this._ensureSetup()},attached:function(){this.opened&&this._openedChanged(this.opened),this._observer=Polymer.dom(this).observeNodes(this._onNodesChange)},detached:function(){for(var a in Polymer.dom(this).unobserveNodes(this._observer),this._observer=null,this.__rafs)null!==this.__rafs[a]&&cancelAnimationFrame(this.__rafs[a]);this.__rafs={},this._manager.removeOverlay(this),this.__isAnimating&&(this.opened?this._finishRenderOpened():(this._applyFocus(),this._finishRenderClosed()))},toggle:function(){this._setCanceled(!1),this.opened=!this.opened},open:function(){this._setCanceled(!1),this.opened=!0},close:function(){this._setCanceled(!1),this.opened=!1},cancel:function(a){var b=this.fire('iron-overlay-canceled',a,{cancelable:!0});b.defaultPrevented||(this._setCanceled(!0),this.opened=!1)},invalidateTabbables:function(){this.__firstFocusableNode=this.__lastFocusableNode=null},_ensureSetup:function(){this._overlaySetup||(this._overlaySetup=!0,this.style.outline='none',this.style.display='none')},_openedChanged:function(a){a?this.removeAttribute('aria-hidden'):this.setAttribute('aria-hidden','true');this.isAttached&&(this.__isAnimating=!0,this.__deraf('__openedChanged',this.__openedChanged))},_canceledChanged:function(){this.closingReason=this.closingReason||{},this.closingReason.canceled=this.canceled},_withBackdropChanged:function(){this.withBackdrop&&!this.hasAttribute('tabindex')?(this.setAttribute('tabindex','-1'),this.__shouldRemoveTabIndex=!0):this.__shouldRemoveTabIndex&&(this.removeAttribute('tabindex'),this.__shouldRemoveTabIndex=!1),this.opened&&this.isAttached&&this._manager.trackBackdrop()},_prepareRenderOpened:function(){this.__restoreFocusNode=this._manager.deepActiveElement,this._preparePositioning(),this.refit(),this._finishPositioning(),this.noAutoFocus&&document.activeElement===this._focusNode&&(this._focusNode.blur(),this.__restoreFocusNode.focus())},_renderOpened:function(){this._finishRenderOpened()},_renderClosed:function(){this._finishRenderClosed()},_finishRenderOpened:function(){this.notifyResize(),this.__isAnimating=!1,this.fire('iron-overlay-opened')},_finishRenderClosed:function(){this.style.display='none',this.style.zIndex='',this.notifyResize(),this.__isAnimating=!1,this.fire('iron-overlay-closed',this.closingReason)},_preparePositioning:function(){this.style.transition=this.style.webkitTransition='none',this.style.transform=this.style.webkitTransform='none',this.style.display=''},_finishPositioning:function(){this.style.display='none',this.scrollTop=this.scrollTop,this.style.transition=this.style.webkitTransition='',this.style.transform=this.style.webkitTransform='',this.style.display='',this.scrollTop=this.scrollTop},_applyFocus:function(){if(this.opened)this.noAutoFocus||this._focusNode.focus();else{if(this._focusNode.blur(),this._focusedChild=null,this.restoreFocusOnClose&&this.__restoreFocusNode){var a=this._manager.deepActiveElement;(a===document.body||Polymer.dom(this).deepContains(a))&&this.__restoreFocusNode.focus()}this.__restoreFocusNode=null;var b=this._manager.currentOverlay();b&&this!==b&&b._applyFocus()}},_onCaptureClick:function(a){this.noCancelOnOutsideClick||this.cancel(a)},_onCaptureFocus:function(a){if(this.withBackdrop){var b=Polymer.dom(a).path;-1===b.indexOf(this)?(a.stopPropagation(),this._applyFocus()):this._focusedChild=b[0]}},_onCaptureEsc:function(a){this.noCancelOnEscKey||this.cancel(a)},_onCaptureTab:function(a){if(this.withBackdrop){this.__ensureFirstLastFocusables();var b=a.shiftKey,c=b?this.__firstFocusableNode:this.__lastFocusableNode,d=b?this.__lastFocusableNode:this.__firstFocusableNode,e=!1;if(c===d)e=!0;else{var f=this._manager.deepActiveElement;e=f===c||f===this}e&&(a.preventDefault(),this._focusedChild=d,this._applyFocus())}},_onIronResize:function(){this.opened&&!this.__isAnimating&&this.__deraf('refit',this.refit)},_onNodesChange:function(){this.opened&&!this.__isAnimating&&(this.invalidateTabbables(),this.notifyResize())},__ensureFirstLastFocusables:function(){if(!this.__firstFocusableNode||!this.__lastFocusableNode){var a=this._focusableNodes;this.__firstFocusableNode=a[0],this.__lastFocusableNode=a[a.length-1]}},__openedChanged:function(){this.opened?(this._prepareRenderOpened(),this._manager.addOverlay(this),this._applyFocus(),this._renderOpened()):(this._manager.removeOverlay(this),this._applyFocus(),this._renderClosed())},__deraf:function(a,b){var c=this.__rafs;null!==c[a]&&cancelAnimationFrame(c[a]),c[a]=requestAnimationFrame(function(){c[a]=null,b.call(this)}.bind(this))},__updateScrollObservers:function(a,b,c){a&&b&&this.__isValidScrollAction(c)?('lock'===c&&(this.__saveScrollPosition(),Polymer.IronScrollManager.pushScrollLock(this)),this.__addScrollListeners()):(Polymer.IronScrollManager.removeScrollLock(this),this.__removeScrollListeners())},__addScrollListeners:function(){if(!this.__rootNodes){if(this.__rootNodes=[],Polymer.Settings.useShadow)for(var a=this;a;)a.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&a.host&&this.__rootNodes.push(a),a=a.host||a.assignedSlot||a.parentNode;this.__rootNodes.push(document)}this.__rootNodes.forEach(function(a){a.addEventListener('scroll',this.__onCaptureScroll,{capture:!0,passive:!0})},this)},__removeScrollListeners:function(){this.__rootNodes&&this.__rootNodes.forEach(function(a){a.removeEventListener('scroll',this.__onCaptureScroll,{capture:!0,passive:!0})},this),this.isAttached||(this.__rootNodes=null)},__isValidScrollAction:function(a){return'lock'===a||'refit'===a||'cancel'===a},__onCaptureScroll:function(a){if(!this.__isAnimating&&!(0<=Polymer.dom(a).path.indexOf(this)))switch(this.scrollAction){case'lock':this.__restoreScrollPosition();break;case'refit':this.__deraf('refit',this.refit);break;case'cancel':this.cancel(a);}},__saveScrollPosition:function(){var a=Math.max;document.scrollingElement?(this.__scrollTop=document.scrollingElement.scrollTop,this.__scrollLeft=document.scrollingElement.scrollLeft):(this.__scrollTop=a(document.documentElement.scrollTop,document.body.scrollTop),this.__scrollLeft=a(document.documentElement.scrollLeft,document.body.scrollLeft))},__restoreScrollPosition:function(){document.scrollingElement?(document.scrollingElement.scrollTop=this.__scrollTop,document.scrollingElement.scrollLeft=this.__scrollLeft):(document.documentElement.scrollTop=document.body.scrollTop=this.__scrollTop,document.documentElement.scrollLeft=document.body.scrollLeft=this.__scrollLeft)}},Polymer.IronOverlayBehavior=[Polymer.IronFitBehavior,Polymer.IronResizableBehavior,Polymer.IronOverlayBehaviorImpl]})();</script><script>Polymer.NeonAnimatableBehavior={properties:{animationConfig:{type:Object},entryAnimation:{observer:'_entryAnimationChanged',type:String},exitAnimation:{observer:'_exitAnimationChanged',type:String}},_entryAnimationChanged:function(){this.animationConfig=this.animationConfig||{},this.animationConfig.entry=[{name:this.entryAnimation,node:this}]},_exitAnimationChanged:function(){this.animationConfig=this.animationConfig||{},this.animationConfig.exit=[{name:this.exitAnimation,node:this}]},_copyProperties:function(a,b){for(var c in b)a[c]=b[c]},_cloneConfig:function(a){var b={isClone:!0};return this._copyProperties(b,a),b},_getAnimationConfigRecursive:function(a,b,c){if(this.animationConfig){if(this.animationConfig.value&&'function'===typeof this.animationConfig.value)return void this._warn(this._logf('playAnimation','Please put \'animationConfig\' inside of your components \'properties\' object instead of outside of it.'));var d;if(d=a?this.animationConfig[a]:this.animationConfig,Array.isArray(d)||(d=[d]),d)for(var e,f=0;e=d[f];f++)if(e.animatable)e.animatable._getAnimationConfigRecursive(e.type||a,b,c);else if(e.id){var g=b[e.id];g?(!g.isClone&&(b[e.id]=this._cloneConfig(g),g=b[e.id]),this._copyProperties(g,e)):b[e.id]=e}else c.push(e)}},getAnimationConfig:function(a){var b={},c=[];for(var d in this._getAnimationConfigRecursive(a,b,c),b)c.push(b[d]);return c}};</script><script>Polymer.NeonAnimationRunnerBehaviorImpl={_configureAnimations:function(a){var b=[],c=[];if(0<a.length)for(var d,e,f=0;d=a[f];f++)if(e=document.createElement(d.name),e.isNeonAnimation){var g=null;e.configure||(e.configure=function(){return null}),g=e.configure(d),c.push({result:g,config:d})}else console.warn(this.is+':',d.name,'not found!');for(var h=0;h<c.length;h++){var g=c[h].result,d=c[h].config;try{'function'!=typeof g.cancel&&(g=document.timeline.play(g))}catch(a){g=null,console.warn('Couldnt play','(',d.name,').',a)}g&&b.push({neonAnimation:e,config:d,animation:g})}return b},_shouldComplete:function(a){for(var b=!0,c=0;c<a.length;c++)if('finished'!=a[c].animation.playState){b=!1;break}return b},_complete:function(a){for(var b=0;b<a.length;b++)a[b].neonAnimation.complete(a[b].config);for(var b=0;b<a.length;b++)a[b].animation.cancel()},playAnimation:function(a,b){var c=this.getAnimationConfig(a);if(c){this._active=this._active||{},this._active[a]&&(this._complete(this._active[a]),delete this._active[a]);var d=this._configureAnimations(c);if(0==d.length)return void this.fire('neon-animation-finish',b,{bubbles:!1});this._active[a]=d;for(var e=0;e<d.length;e++)d[e].animation.onfinish=function(){this._shouldComplete(d)&&(this._complete(d),delete this._active[a],this.fire('neon-animation-finish',b,{bubbles:!1}))}.bind(this)}},cancelAnimation:function(){for(var a in this._active){var b=this._active[a];for(var c in b)b[c].animation.cancel()}this._active={}}},Polymer.NeonAnimationRunnerBehavior=[Polymer.NeonAnimatableBehavior,Polymer.NeonAnimationRunnerBehaviorImpl];</script><script>(function(){'use strict';Polymer.IronDropdownScrollManager=Polymer.IronScrollManager})();</script><dom-module id="iron-dropdown" assetpath="../bower_components/iron-dropdown/"><template><style>:host{position:fixed;}#contentWrapper ::slotted(*){overflow:auto;}#contentWrapper.animating ::slotted(*){overflow:hidden;pointer-events:none;}</style><div id="contentWrapper"><slot id="content" name="dropdown-content"></slot></div></template><script>(function(){'use strict';Polymer({is:'iron-dropdown',behaviors:[Polymer.IronControlState,Polymer.IronA11yKeysBehavior,Polymer.IronOverlayBehavior,Polymer.NeonAnimationRunnerBehavior],properties:{horizontalAlign:{type:String,value:'left',reflectToAttribute:!0},verticalAlign:{type:String,value:'top',reflectToAttribute:!0},openAnimationConfig:{type:Object},closeAnimationConfig:{type:Object},focusTarget:{type:Object},noAnimations:{type:Boolean,value:!1},allowOutsideScroll:{type:Boolean,value:!1,observer:'_allowOutsideScrollChanged'}},listeners:{"neon-animation-finish":'_onNeonAnimationFinish'},observers:['_updateOverlayPosition(positionTarget, verticalAlign, horizontalAlign, verticalOffset, horizontalOffset)'],get containedElement(){for(var a=Polymer.dom(this.$.content).getDistributedNodes(),b=0,c=a.length;b<c;b++)if(a[b].nodeType===Node.ELEMENT_NODE)return a[b]},ready:function(){this.scrollAction||(this.scrollAction=this.allowOutsideScroll?'refit':'lock'),this._readied=!0},attached:function(){this.sizingTarget&&this.sizingTarget!==this||(this.sizingTarget=this.containedElement||this)},detached:function(){this.cancelAnimation()},_openedChanged:function(){this.opened&&this.disabled?this.cancel():(this.cancelAnimation(),this._updateAnimationConfig(),Polymer.IronOverlayBehaviorImpl._openedChanged.apply(this,arguments))},_renderOpened:function(){!this.noAnimations&&this.animationConfig.open?(this.$.contentWrapper.classList.add('animating'),this.playAnimation('open')):Polymer.IronOverlayBehaviorImpl._renderOpened.apply(this,arguments)},_renderClosed:function(){!this.noAnimations&&this.animationConfig.close?(this.$.contentWrapper.classList.add('animating'),this.playAnimation('close')):Polymer.IronOverlayBehaviorImpl._renderClosed.apply(this,arguments)},_onNeonAnimationFinish:function(){this.$.contentWrapper.classList.remove('animating'),this.opened?this._finishRenderOpened():this._finishRenderClosed()},_updateAnimationConfig:function(){for(var a=this.containedElement,b=[].concat(this.openAnimationConfig||[]).concat(this.closeAnimationConfig||[]),c=0;c<b.length;c++)b[c].node=a;this.animationConfig={open:this.openAnimationConfig,close:this.closeAnimationConfig}},_updateOverlayPosition:function(){this.isAttached&&this.notifyResize()},_allowOutsideScrollChanged:function(a){this._readied&&(a?(!this.scrollAction||'lock'===this.scrollAction)&&(this.scrollAction='refit'):this.scrollAction='lock')},_applyFocus:function(){var a=this.focusTarget||this.containedElement;a&&this.opened&&!this.noAutoFocus?a.focus():Polymer.IronOverlayBehaviorImpl._applyFocus.apply(this,arguments)}})})();</script></dom-module><script>Polymer.NeonAnimationBehavior={properties:{animationTiming:{type:Object,value:function(){return{duration:500,easing:'cubic-bezier(0.4, 0, 0.2, 1)',fill:'both'}}}},isNeonAnimation:!0,created:function(){document.body.animate||console.warn('No web animations detected. This element will not function without a web animations polyfill.')},timingFromConfig:function(a){if(a.timing)for(var b in a.timing)this.animationTiming[b]=a.timing[b];return this.animationTiming},setPrefixedProperty:function(a,b,c){for(var d,e={transform:['webkitTransform'],transformOrigin:['mozTransformOrigin','webkitTransformOrigin']},f=e[b],g=0;d=f[g];g++)a.style[d]=c;a.style[b]=c},complete:function(){}};</script><script>Polymer({is:'fade-in-animation',behaviors:[Polymer.NeonAnimationBehavior],configure:function(a){var b=a.node;return this._effect=new KeyframeEffect(b,[{opacity:'0'},{opacity:'1'}],this.timingFromConfig(a)),this._effect}});</script><script>Polymer({is:'fade-out-animation',behaviors:[Polymer.NeonAnimationBehavior],configure:function(a){var b=a.node;return this._effect=new KeyframeEffect(b,[{opacity:'1'},{opacity:'0'}],this.timingFromConfig(a)),this._effect}});</script><script>Polymer({is:'paper-menu-grow-height-animation',behaviors:[Polymer.NeonAnimationBehavior],configure:function(a){var b=a.node,c=b.getBoundingClientRect(),d=c.height;return this._effect=new KeyframeEffect(b,[{height:d/2+'px'},{height:d+'px'}],this.timingFromConfig(a)),this._effect}}),Polymer({is:'paper-menu-grow-width-animation',behaviors:[Polymer.NeonAnimationBehavior],configure:function(a){var b=a.node,c=b.getBoundingClientRect(),d=c.width;return this._effect=new KeyframeEffect(b,[{width:d/2+'px'},{width:d+'px'}],this.timingFromConfig(a)),this._effect}}),Polymer({is:'paper-menu-shrink-width-animation',behaviors:[Polymer.NeonAnimationBehavior],configure:function(a){var b=a.node,c=b.getBoundingClientRect(),d=c.width;return this._effect=new KeyframeEffect(b,[{width:d+'px'},{width:d-d/20+'px'}],this.timingFromConfig(a)),this._effect}}),Polymer({is:'paper-menu-shrink-height-animation',behaviors:[Polymer.NeonAnimationBehavior],configure:function(a){var b=a.node,c=b.getBoundingClientRect(),d=c.height,e=c.top;return this.setPrefixedProperty(b,'transformOrigin','0 0'),this._effect=new KeyframeEffect(b,[{height:d+'px',transform:'translateY(0)'},{height:d/2+'px',transform:'translateY(-20px)'}],this.timingFromConfig(a)),this._effect}});</script><dom-module id="paper-menu-button" assetpath="../bower_components/paper-menu-button/"><template><style>:host{display:inline-block;position:relative;padding:8px;outline:none;@apply --paper-menu-button;}:host([disabled]){cursor:auto;color:var(--disabled-text-color);@apply --paper-menu-button-disabled;}iron-dropdown{@apply --paper-menu-button-dropdown;}.dropdown-content{@apply --shadow-elevation-2dp;position:relative;border-radius:2px;background-color:var(--paper-menu-button-dropdown-background, var(--primary-background-color));@apply --paper-menu-button-content;}:host([vertical-align="top"]) .dropdown-content{margin-bottom:20px;margin-top:-10px;top:10px;}:host([vertical-align="bottom"]) .dropdown-content{bottom:10px;margin-bottom:-10px;margin-top:20px;}#trigger{cursor:pointer;}</style><div id="trigger" on-tap="toggle"><slot name="dropdown-trigger"></slot></div><iron-dropdown id="dropdown" opened="{{opened}}" horizontal-align="[[horizontalAlign]]" vertical-align="[[verticalAlign]]" dynamic-align="[[dynamicAlign]]" horizontal-offset="[[horizontalOffset]]" vertical-offset="[[verticalOffset]]" no-overlap="[[noOverlap]]" open-animation-config="[[openAnimationConfig]]" close-animation-config="[[closeAnimationConfig]]" no-animations="[[noAnimations]]" focus-target="[[_dropdownContent]]" allow-outside-scroll="[[allowOutsideScroll]]" restore-focus-on-close="[[restoreFocusOnClose]]" on-iron-overlay-canceled="__onIronOverlayCanceled"><div slot="dropdown-content" class="dropdown-content"><slot id="content" name="dropdown-content"></slot></div></iron-dropdown></template><script>(function(){'use strict';var a={ANIMATION_CUBIC_BEZIER:'cubic-bezier(.3,.95,.5,1)',MAX_ANIMATION_TIME_MS:400},b=Polymer({is:'paper-menu-button',behaviors:[Polymer.IronA11yKeysBehavior,Polymer.IronControlState],properties:{opened:{type:Boolean,value:!1,notify:!0,observer:'_openedChanged'},horizontalAlign:{type:String,value:'left',reflectToAttribute:!0},verticalAlign:{type:String,value:'top',reflectToAttribute:!0},dynamicAlign:{type:Boolean},horizontalOffset:{type:Number,value:0,notify:!0},verticalOffset:{type:Number,value:0,notify:!0},noOverlap:{type:Boolean},noAnimations:{type:Boolean,value:!1},ignoreSelect:{type:Boolean,value:!1},closeOnActivate:{type:Boolean,value:!1},openAnimationConfig:{type:Object,value:function(){return[{name:'fade-in-animation',timing:{delay:100,duration:200}},{name:'paper-menu-grow-width-animation',timing:{delay:100,duration:150,easing:a.ANIMATION_CUBIC_BEZIER}},{name:'paper-menu-grow-height-animation',timing:{delay:100,duration:275,easing:a.ANIMATION_CUBIC_BEZIER}}]}},closeAnimationConfig:{type:Object,value:function(){return[{name:'fade-out-animation',timing:{duration:150}},{name:'paper-menu-shrink-width-animation',timing:{delay:100,duration:50,easing:a.ANIMATION_CUBIC_BEZIER}},{name:'paper-menu-shrink-height-animation',timing:{duration:200,easing:'ease-in'}}]}},allowOutsideScroll:{type:Boolean,value:!1},restoreFocusOnClose:{type:Boolean,value:!0},_dropdownContent:{type:Object}},hostAttributes:{role:'group',"aria-haspopup":'true'},listeners:{"iron-activate":'_onIronActivate',"iron-select":'_onIronSelect'},get contentElement(){for(var a=Polymer.dom(this.$.content).getDistributedNodes(),b=0,c=a.length;b<c;b++)if(a[b].nodeType===Node.ELEMENT_NODE)return a[b]},toggle:function(){this.opened?this.close():this.open()},open:function(){this.disabled||this.$.dropdown.open()},close:function(){this.$.dropdown.close()},_onIronSelect:function(){this.ignoreSelect||this.close()},_onIronActivate:function(){this.closeOnActivate&&this.close()},_openedChanged:function(a,b){a?(this._dropdownContent=this.contentElement,this.fire('paper-dropdown-open')):null!=b&&this.fire('paper-dropdown-close')},_disabledChanged:function(a){Polymer.IronControlState._disabledChanged.apply(this,arguments),a&&this.opened&&this.close()},__onIronOverlayCanceled:function(a){var b=a.detail,c=Polymer.dom(b).rootTarget,d=this.$.trigger,e=Polymer.dom(b).path;-1<e.indexOf(d)&&a.preventDefault()}});Object.keys(a).forEach(function(c){b[c]=a[c]}),Polymer.PaperMenuButton=b})();</script></dom-module><iron-iconset-svg name="paper-dropdown-menu" size="24"><svg><defs><g id="arrow-drop-down"><path d="M7 10l5 5 5-5z"></path></g></defs></svg></iron-iconset-svg><dom-module id="paper-dropdown-menu-shared-styles" assetpath="../bower_components/paper-dropdown-menu/"><template><style>:host{display:inline-block;position:relative;text-align:left;-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-tap-highlight-color:transparent;--paper-input-container-input:{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;max-width:100%;box-sizing:border-box;cursor:pointer;};@apply --paper-dropdown-menu;}:host([disabled]){@apply --paper-dropdown-menu-disabled;}:host([noink]) paper-ripple{display:none;}:host([no-label-float]) paper-ripple{top:8px;}paper-ripple{top:12px;left:0px;bottom:8px;right:0px;@apply --paper-dropdown-menu-ripple;}paper-menu-button{display:block;padding:0;@apply --paper-dropdown-menu-button;}paper-input{@apply --paper-dropdown-menu-input;}iron-icon{color:var(--disabled-text-color);@apply --paper-dropdown-menu-icon;}</style></template></dom-module><dom-module id="paper-dropdown-menu" assetpath="../bower_components/paper-dropdown-menu/"><template><style include="paper-dropdown-menu-shared-styles"></style><span role="button"></span><paper-menu-button id="menuButton" vertical-align="[[verticalAlign]]" horizontal-align="[[horizontalAlign]]" dynamic-align="[[dynamicAlign]]" vertical-offset="[[_computeMenuVerticalOffset(noLabelFloat)]]" disabled="[[disabled]]" no-animations="[[noAnimations]]" on-iron-select="_onIronSelect" on-iron-deselect="_onIronDeselect" opened="{{opened}}" close-on-activate="" allow-outside-scroll="[[allowOutsideScroll]]" restore-focus-on-close="[[restoreFocusOnClose]]"><div class="dropdown-trigger" slot="dropdown-trigger"><paper-ripple></paper-ripple><paper-input type="text" invalid="[[invalid]]" readonly="" disabled="[[disabled]]" value="[[selectedItemLabel]]" placeholder="[[placeholder]]" error-message="[[errorMessage]]" always-float-label="[[alwaysFloatLabel]]" no-label-float="[[noLabelFloat]]" label="[[label]]"><iron-icon icon="paper-dropdown-menu:arrow-drop-down" suffix="" slot="suffix"></iron-icon></paper-input></div><slot id="content" name="dropdown-content" slot="dropdown-content"></slot></paper-menu-button></template><script>(function(){'use strict';Polymer({is:'paper-dropdown-menu',behaviors:[Polymer.IronButtonState,Polymer.IronControlState,Polymer.IronFormElementBehavior,Polymer.IronValidatableBehavior],properties:{selectedItemLabel:{type:String,notify:!0,readOnly:!0},selectedItem:{type:Object,notify:!0,readOnly:!0},value:{type:String,notify:!0,readOnly:!0},label:{type:String},placeholder:{type:String},errorMessage:{type:String},opened:{type:Boolean,notify:!0,value:!1,observer:'_openedChanged'},allowOutsideScroll:{type:Boolean,value:!1},noLabelFloat:{type:Boolean,value:!1,reflectToAttribute:!0},alwaysFloatLabel:{type:Boolean,value:!1},noAnimations:{type:Boolean,value:!1},horizontalAlign:{type:String,value:'right'},verticalAlign:{type:String,value:'top'},dynamicAlign:{type:Boolean},restoreFocusOnClose:{type:Boolean,value:!0}},listeners:{tap:'_onTap'},keyBindings:{"up down":'open',esc:'close'},hostAttributes:{role:'combobox',"aria-autocomplete":'none',"aria-haspopup":'true'},observers:['_selectedItemChanged(selectedItem)'],attached:function(){var a=this.contentElement;a&&a.selectedItem&&this._setSelectedItem(a.selectedItem)},get contentElement(){for(var a=Polymer.dom(this.$.content).getDistributedNodes(),b=0,c=a.length;b<c;b++)if(a[b].nodeType===Node.ELEMENT_NODE)return a[b]},open:function(){this.$.menuButton.open()},close:function(){this.$.menuButton.close()},_onIronSelect:function(a){this._setSelectedItem(a.detail.item)},_onIronDeselect:function(){this._setSelectedItem(null)},_onTap:function(a){Polymer.Gestures.findOriginalTarget(a)===this&&this.open()},_selectedItemChanged:function(a){var b='';b=a?a.label||a.getAttribute('label')||a.textContent.trim():'',this._setValue(b),this._setSelectedItemLabel(b)},_computeMenuVerticalOffset:function(a){return a?-4:8},_getValidity:function(){return this.disabled||!this.required||this.required&&!!this.value},_openedChanged:function(){var a=this.opened?'true':'false',b=this.contentElement;b&&b.setAttribute('aria-expanded',a)}})})();</script></dom-module><dom-module id="paper-listbox" assetpath="../bower_components/paper-listbox/"><template><style>:host{display:block;padding:8px 0;background:var(--paper-listbox-background-color, var(--primary-background-color));color:var(--paper-listbox-color, var(--primary-text-color));@apply --paper-listbox;}</style><slot></slot></template><script>(function(){Polymer({is:'paper-listbox',behaviors:[Polymer.IronMenuBehavior],hostAttributes:{role:'listbox'}})})();</script></dom-module><script>Polymer.PaperItemBehaviorImpl={hostAttributes:{role:'option',tabindex:'0'}},Polymer.PaperItemBehavior=[Polymer.IronButtonState,Polymer.IronControlState,Polymer.PaperItemBehaviorImpl];</script><dom-module id="paper-item-shared-styles" assetpath="../bower_components/paper-item/"><template><style>:host, .paper-item{display:block;position:relative;min-height:var(--paper-item-min-height, 48px);padding:0px 16px;}.paper-item{@apply --paper-font-subhead;border:none;outline:none;background:white;width:100%;text-align:left;}:host([hidden]), .paper-item[hidden]{display:none !important;}:host(.iron-selected), .paper-item.iron-selected{font-weight:var(--paper-item-selected-weight, bold);@apply --paper-item-selected;}:host([disabled]), .paper-item[disabled]{color:var(--paper-item-disabled-color, var(--disabled-text-color));@apply --paper-item-disabled;}:host(:focus), .paper-item:focus{position:relative;outline:0;@apply --paper-item-focused;}:host(:focus):before, .paper-item:focus:before{@apply --layout-fit;background:currentColor;content:'';opacity:var(--dark-divider-opacity);pointer-events:none;@apply --paper-item-focused-before;}</style></template></dom-module><dom-module id="paper-item" assetpath="../bower_components/paper-item/"><template><style include="paper-item-shared-styles">:host{@apply --layout-horizontal;@apply --layout-center;@apply --paper-font-subhead;@apply --paper-item;}</style><slot></slot></template><script>Polymer({is:'paper-item',behaviors:[Polymer.PaperItemBehavior]});</script></dom-module><script>Polymer.IronCheckedElementBehaviorImpl={properties:{checked:{type:Boolean,value:!1,reflectToAttribute:!0,notify:!0,observer:'_checkedChanged'},toggles:{type:Boolean,value:!0,reflectToAttribute:!0},value:{type:String,value:'on',observer:'_valueChanged'}},observers:['_requiredChanged(required)'],created:function(){this._hasIronCheckedElementBehavior=!0},_getValidity:function(){return this.disabled||!this.required||this.checked},_requiredChanged:function(){this.required?this.setAttribute('aria-required','true'):this.removeAttribute('aria-required')},_checkedChanged:function(){this.active=this.checked,this.fire('iron-change')},_valueChanged:function(){(this.value===void 0||null===this.value)&&(this.value='on')}},Polymer.IronCheckedElementBehavior=[Polymer.IronFormElementBehavior,Polymer.IronValidatableBehavior,Polymer.IronCheckedElementBehaviorImpl];</script><script>Polymer.PaperCheckedElementBehaviorImpl={_checkedChanged:function(){Polymer.IronCheckedElementBehaviorImpl._checkedChanged.call(this),this.hasRipple()&&(this.checked?this._ripple.setAttribute('checked',''):this._ripple.removeAttribute('checked'))},_buttonStateChanged:function(){Polymer.PaperRippleBehavior._buttonStateChanged.call(this);this.disabled||this.isAttached&&(this.checked=this.active)}},Polymer.PaperCheckedElementBehavior=[Polymer.PaperInkyFocusBehavior,Polymer.IronCheckedElementBehavior,Polymer.PaperCheckedElementBehaviorImpl];</script><dom-module id="paper-checkbox" assetpath="../bower_components/paper-checkbox/"><template strip-whitespace=""><style>:host{display:inline-block;white-space:nowrap;cursor:pointer;--calculated-paper-checkbox-size:var(--paper-checkbox-size, 18px);--calculated-paper-checkbox-ink-size:var(--paper-checkbox-ink-size, -1px);@apply --paper-font-common-base;line-height:0;-webkit-tap-highlight-color:transparent;}:host([hidden]){display:none !important;}:host(:focus){outline:none;}.hidden{display:none;}#checkboxContainer{display:inline-block;position:relative;width:var(--calculated-paper-checkbox-size);height:var(--calculated-paper-checkbox-size);min-width:var(--calculated-paper-checkbox-size);margin:var(--paper-checkbox-margin, initial);vertical-align:var(--paper-checkbox-vertical-align, middle);background-color:var(--paper-checkbox-unchecked-background-color, transparent);}#ink{position:absolute;top:calc(0px - (var(--calculated-paper-checkbox-ink-size) - var(--calculated-paper-checkbox-size)) / 2);left:calc(0px - (var(--calculated-paper-checkbox-ink-size) - var(--calculated-paper-checkbox-size)) / 2);width:var(--calculated-paper-checkbox-ink-size);height:var(--calculated-paper-checkbox-ink-size);color:var(--paper-checkbox-unchecked-ink-color, var(--primary-text-color));opacity:0.6;pointer-events:none;}:host-context([dir="rtl"]) #ink{right:calc(0px - (var(--calculated-paper-checkbox-ink-size) - var(--calculated-paper-checkbox-size)) / 2);left:auto;}#ink[checked]{color:var(--paper-checkbox-checked-ink-color, var(--primary-color));}#checkbox{position:relative;box-sizing:border-box;height:100%;border:solid 2px;border-color:var(--paper-checkbox-unchecked-color, var(--primary-text-color));border-radius:2px;pointer-events:none;-webkit-transition:background-color 140ms, border-color 140ms;transition:background-color 140ms, border-color 140ms;}#checkbox.checked #checkmark{-webkit-animation:checkmark-expand 140ms ease-out forwards;animation:checkmark-expand 140ms ease-out forwards;}@-webkit-keyframes checkmark-expand{0%{-webkit-transform:scale(0, 0) rotate(45deg);}100%{-webkit-transform:scale(1, 1) rotate(45deg);}}@keyframes checkmark-expand{0%{transform:scale(0, 0) rotate(45deg);}100%{transform:scale(1, 1) rotate(45deg);}}#checkbox.checked{background-color:var(--paper-checkbox-checked-color, var(--primary-color));border-color:var(--paper-checkbox-checked-color, var(--primary-color));}#checkmark{position:absolute;width:36%;height:70%;border-style:solid;border-top:none;border-left:none;border-right-width:calc(2/15 * var(--calculated-paper-checkbox-size));border-bottom-width:calc(2/15 * var(--calculated-paper-checkbox-size));border-color:var(--paper-checkbox-checkmark-color, white);-webkit-transform-origin:97% 86%;transform-origin:97% 86%;box-sizing:content-box;}:host-context([dir="rtl"]) #checkmark{-webkit-transform-origin:50% 14%;transform-origin:50% 14%;}#checkboxLabel{position:relative;display:inline-block;vertical-align:middle;padding-left:var(--paper-checkbox-label-spacing, 8px);white-space:normal;line-height:normal;color:var(--paper-checkbox-label-color, var(--primary-text-color));@apply --paper-checkbox-label;}:host([checked]) #checkboxLabel{color:var(--paper-checkbox-label-checked-color, var(--paper-checkbox-label-color, var(--primary-text-color)));@apply --paper-checkbox-label-checked;}:host-context([dir="rtl"]) #checkboxLabel{padding-right:var(--paper-checkbox-label-spacing, 8px);padding-left:0;}#checkboxLabel[hidden]{display:none;}:host([disabled]) #checkbox{opacity:0.5;border-color:var(--paper-checkbox-unchecked-color, var(--primary-text-color));}:host([disabled][checked]) #checkbox{background-color:var(--paper-checkbox-unchecked-color, var(--primary-text-color));opacity:0.5;}:host([disabled]) #checkboxLabel{opacity:0.65;}#checkbox.invalid:not(.checked){border-color:var(--paper-checkbox-error-color, var(--error-color));}</style><div id="checkboxContainer"><div id="checkbox" class$="[[_computeCheckboxClass(checked, invalid)]]"><div id="checkmark" class$="[[_computeCheckmarkClass(checked)]]"></div></div></div><div id="checkboxLabel"><slot></slot></div></template><script>Polymer({is:'paper-checkbox',behaviors:[Polymer.PaperCheckedElementBehavior],hostAttributes:{role:'checkbox',"aria-checked":!1,tabindex:0},properties:{ariaActiveAttribute:{type:String,value:'aria-checked'}},attached:function(){Polymer.RenderStatus.afterNextRender(this,function(){var a=this.getComputedStyleValue('--calculated-paper-checkbox-ink-size').trim();if('-1px'===a){var b=this.getComputedStyleValue('--calculated-paper-checkbox-size').trim(),c=b.match(/[A-Za-z]+$/)[0]||'px',d=parseFloat(b),e=8/3*d;'px'===c&&(e=Math.floor(e),e%2!==d%2&&e++),this.updateStyles({"--paper-checkbox-ink-size":e+c})}})},_computeCheckboxClass:function(a,b){var c='';return a&&(c+='checked '),b&&(c+='invalid'),c},_computeCheckmarkClass:function(a){return a?'':'hidden'},_createRipple:function(){return this._rippleContainer=this.$.checkboxContainer,Polymer.PaperInkyFocusBehaviorImpl._createRipple.call(this)}});</script></dom-module><dom-module id="paper-radio-button" assetpath="../bower_components/paper-radio-button/"><template strip-whitespace=""><style>:host{display:inline-block;line-height:0;white-space:nowrap;cursor:pointer;@apply --paper-font-common-base;--calculated-paper-radio-button-size:var(--paper-radio-button-size, 16px);--calculated-paper-radio-button-ink-size:var(--paper-radio-button-ink-size, -1px);}:host(:focus){outline:none;}#radioContainer{@apply --layout-inline;@apply --layout-center-center;position:relative;width:var(--calculated-paper-radio-button-size);height:var(--calculated-paper-radio-button-size);vertical-align:middle;@apply --paper-radio-button-radio-container;}#ink{position:absolute;top:50%;left:50%;right:auto;width:var(--calculated-paper-radio-button-ink-size);height:var(--calculated-paper-radio-button-ink-size);color:var(--paper-radio-button-unchecked-ink-color, var(--primary-text-color));opacity:0.6;pointer-events:none;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%);}#ink[checked]{color:var(--paper-radio-button-checked-ink-color, var(--primary-color));}#offRadio, #onRadio{position:absolute;box-sizing:border-box;top:0;left:0;width:100%;height:100%;border-radius:50%;}#offRadio{border:2px solid var(--paper-radio-button-unchecked-color, var(--primary-text-color));background-color:var(--paper-radio-button-unchecked-background-color, transparent);transition:border-color 0.28s;}#onRadio{background-color:var(--paper-radio-button-checked-color, var(--primary-color));-webkit-transform:scale(0);transform:scale(0);transition:-webkit-transform ease 0.28s;transition:transform ease 0.28s;will-change:transform;}:host([checked]) #offRadio{border-color:var(--paper-radio-button-checked-color, var(--primary-color));}:host([checked]) #onRadio{-webkit-transform:scale(0.5);transform:scale(0.5);}#radioLabel{line-height:normal;position:relative;display:inline-block;vertical-align:middle;margin-left:var(--paper-radio-button-label-spacing, 10px);white-space:normal;color:var(--paper-radio-button-label-color, var(--primary-text-color));@apply --paper-radio-button-label;}:host([checked]) #radioLabel{@apply --paper-radio-button-label-checked;}:host-context([dir="rtl"]) #radioLabel{margin-left:0;margin-right:var(--paper-radio-button-label-spacing, 10px);}#radioLabel[hidden]{display:none;}:host([disabled]) #offRadio{border-color:var(--paper-radio-button-unchecked-color, var(--primary-text-color));opacity:0.5;}:host([disabled][checked]) #onRadio{background-color:var(--paper-radio-button-unchecked-color, var(--primary-text-color));opacity:0.5;}:host([disabled]) #radioLabel{opacity:0.65;}</style><div id="radioContainer"><div id="offRadio"></div><div id="onRadio"></div></div><div id="radioLabel"><slot></slot></div></template><script>Polymer({is:'paper-radio-button',behaviors:[Polymer.PaperCheckedElementBehavior],hostAttributes:{role:'radio',"aria-checked":!1,tabindex:0},properties:{ariaActiveAttribute:{type:String,value:'aria-checked'}},ready:function(){this._rippleContainer=this.$.radioContainer},attached:function(){Polymer.RenderStatus.afterNextRender(this,function(){var a=this.getComputedStyleValue('--calculated-paper-radio-button-ink-size').trim();if('-1px'===a){var b=parseFloat(this.getComputedStyleValue('--calculated-paper-radio-button-size').trim()),c=Math.floor(3*b);c%2!==b%2&&c++,this.updateStyles({"--paper-radio-button-ink-size":c+'px'})}})}});</script></dom-module><dom-module id="paper-radio-group" assetpath="../bower_components/paper-radio-group/"><template><style>:host{display:inline-block;}:host ::slotted(*){padding:var(--paper-radio-group-item-padding, 12px);}</style><slot></slot></template></dom-module><script>Polymer({is:'paper-radio-group',behaviors:[Polymer.IronMenubarBehavior],hostAttributes:{role:'radiogroup'},properties:{attrForSelected:{type:String,value:'name'},selectedAttribute:{type:String,value:'checked'},selectable:{type:String,value:'paper-radio-button'},allowEmptySelection:{type:Boolean,value:!1}},select:function(a){var b=this._valueToItem(a);if(!(b&&b.hasAttribute('disabled'))){if(this.selected){var c=this._valueToItem(this.selected);if(this.selected==a)if(this.allowEmptySelection)a='';else return void(c&&(c.checked=!0));c&&(c.checked=!1)}Polymer.IronSelectableBehavior.select.apply(this,[a]),this.fire('paper-radio-group-changed')}},_activateFocusedItem:function(){this._itemActivate(this._valueForItem(this.focusedItem),this.focusedItem)},_onUpKey:function(a){this._focusPrevious(),a.preventDefault(),this._activateFocusedItem()},_onDownKey:function(a){this._focusNext(),a.preventDefault(),this._activateFocusedItem()},_onLeftKey:function(){Polymer.IronMenubarBehaviorImpl._onLeftKey.apply(this,arguments),this._activateFocusedItem()},_onRightKey:function(){Polymer.IronMenubarBehaviorImpl._onRightKey.apply(this,arguments),this._activateFocusedItem()}});</script><script>Polymer.IronRangeBehavior={properties:{value:{type:Number,value:0,notify:!0,reflectToAttribute:!0},min:{type:Number,value:0,notify:!0},max:{type:Number,value:100,notify:!0},step:{type:Number,value:1,notify:!0},ratio:{type:Number,value:0,readOnly:!0,notify:!0}},observers:['_update(value, min, max, step)'],_calcRatio:function(a){return(this._clampValue(a)-this.min)/(this.max-this.min)},_clampValue:function(a){return Math.min(this.max,Math.max(this.min,this._calcStep(a)))},_calcStep:function(a){if(a=parseFloat(a),!this.step)return a;var b=Math.round((a-this.min)/this.step);return 1>this.step?b/(1/this.step)+this.min:b*this.step+this.min},_validateValue:function(){var a=this._clampValue(this.value);return this.value=this.oldValue=isNaN(a)?this.oldValue:a,this.value!==a},_update:function(){this._validateValue(),this._setRatio(100*this._calcRatio(this.value))}};</script><dom-module id="paper-progress" assetpath="../bower_components/paper-progress/"><template><style>:host{display:block;width:200px;position:relative;overflow:hidden;}:host([hidden]), [hidden]{display:none !important;}#progressContainer{@apply --paper-progress-container;position:relative;}#progressContainer,
      /* the stripe for the indeterminate animation*/
      .indeterminate::after{height:var(--paper-progress-height, 4px);}#primaryProgress,
      #secondaryProgress,
      .indeterminate::after{@apply --layout-fit;}#progressContainer,
      .indeterminate::after{background:var(--paper-progress-container-color, var(--google-grey-300));}:host(.transiting) #primaryProgress,
      :host(.transiting) #secondaryProgress{-webkit-transition-property:-webkit-transform;transition-property:transform;-webkit-transition-duration:var(--paper-progress-transition-duration, 0.08s);transition-duration:var(--paper-progress-transition-duration, 0.08s);-webkit-transition-timing-function:var(--paper-progress-transition-timing-function, ease);transition-timing-function:var(--paper-progress-transition-timing-function, ease);-webkit-transition-delay:var(--paper-progress-transition-delay, 0s);transition-delay:var(--paper-progress-transition-delay, 0s);}#primaryProgress,
      #secondaryProgress{@apply --layout-fit;-webkit-transform-origin:left center;transform-origin:left center;-webkit-transform:scaleX(0);transform:scaleX(0);will-change:transform;}#primaryProgress{background:var(--paper-progress-active-color, var(--google-green-500));}#secondaryProgress{background:var(--paper-progress-secondary-color, var(--google-green-100));}:host([disabled]) #primaryProgress{background:var(--paper-progress-disabled-active-color, var(--google-grey-500));}:host([disabled]) #secondaryProgress{background:var(--paper-progress-disabled-secondary-color, var(--google-grey-300));}:host(:not([disabled])) #primaryProgress.indeterminate{-webkit-transform-origin:right center;transform-origin:right center;-webkit-animation:indeterminate-bar var(--paper-progress-indeterminate-cycle-duration, 2s) linear infinite;animation:indeterminate-bar var(--paper-progress-indeterminate-cycle-duration, 2s) linear infinite;}:host(:not([disabled])) #primaryProgress.indeterminate::after{content:"";-webkit-transform-origin:center center;transform-origin:center center;-webkit-animation:indeterminate-splitter var(--paper-progress-indeterminate-cycle-duration, 2s) linear infinite;animation:indeterminate-splitter var(--paper-progress-indeterminate-cycle-duration, 2s) linear infinite;}@-webkit-keyframes indeterminate-bar{0%{-webkit-transform:scaleX(1) translateX(-100%);}50%{-webkit-transform:scaleX(1) translateX(0%);}75%{-webkit-transform:scaleX(1) translateX(0%);-webkit-animation-timing-function:cubic-bezier(.28,.62,.37,.91);}100%{-webkit-transform:scaleX(0) translateX(0%);}}@-webkit-keyframes indeterminate-splitter{0%{-webkit-transform:scaleX(.75) translateX(-125%);}30%{-webkit-transform:scaleX(.75) translateX(-125%);-webkit-animation-timing-function:cubic-bezier(.42,0,.6,.8);}90%{-webkit-transform:scaleX(.75) translateX(125%);}100%{-webkit-transform:scaleX(.75) translateX(125%);}}@keyframes indeterminate-bar{0%{transform:scaleX(1) translateX(-100%);}50%{transform:scaleX(1) translateX(0%);}75%{transform:scaleX(1) translateX(0%);animation-timing-function:cubic-bezier(.28,.62,.37,.91);}100%{transform:scaleX(0) translateX(0%);}}@keyframes indeterminate-splitter{0%{transform:scaleX(.75) translateX(-125%);}30%{transform:scaleX(.75) translateX(-125%);animation-timing-function:cubic-bezier(.42,0,.6,.8);}90%{transform:scaleX(.75) translateX(125%);}100%{transform:scaleX(.75) translateX(125%);}}</style><div id="progressContainer"><div id="secondaryProgress" hidden$="[[_hideSecondaryProgress(secondaryRatio)]]"></div><div id="primaryProgress"></div></div></template></dom-module><script>Polymer({is:'paper-progress',behaviors:[Polymer.IronRangeBehavior],properties:{secondaryProgress:{type:Number,value:0},secondaryRatio:{type:Number,value:0,readOnly:!0},indeterminate:{type:Boolean,value:!1,observer:'_toggleIndeterminate'},disabled:{type:Boolean,value:!1,reflectToAttribute:!0,observer:'_disabledChanged'}},observers:['_progressChanged(secondaryProgress, value, min, max, indeterminate)'],hostAttributes:{role:'progressbar'},_toggleIndeterminate:function(a){this.toggleClass('indeterminate',a,this.$.primaryProgress)},_transformProgress:function(a,b){a.style.transform=a.style.webkitTransform='scaleX('+b/100+')'},_mainRatioChanged:function(a){this._transformProgress(this.$.primaryProgress,a)},_progressChanged:function(a,b,c,d,e){a=this._clampValue(a),b=this._clampValue(b);var f=100*this._calcRatio(a),g=100*this._calcRatio(b);this._setSecondaryRatio(f),this._transformProgress(this.$.secondaryProgress,f),this._transformProgress(this.$.primaryProgress,g),this.secondaryProgress=a,e?this.removeAttribute('aria-valuenow'):this.setAttribute('aria-valuenow',b),this.setAttribute('aria-valuemin',c),this.setAttribute('aria-valuemax',d)},_disabledChanged:function(a){this.setAttribute('aria-disabled',a?'true':'false')},_hideSecondaryProgress:function(a){return 0===a}});</script><dom-module id="paper-slider" assetpath="../bower_components/paper-slider/"><template strip-whitespace=""><style>:host{@apply --layout;@apply --layout-justified;@apply --layout-center;width:200px;cursor:default;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);--paper-progress-active-color:var(--paper-slider-active-color, var(--google-blue-700));--paper-progress-secondary-color:var(--paper-slider-secondary-color, var(--google-blue-300));--paper-progress-disabled-active-color:var(--paper-slider-disabled-active-color, var(--paper-grey-400));--paper-progress-disabled-secondary-color:var(--paper-slider-disabled-secondary-color, var(--paper-grey-400));--calculated-paper-slider-height:var(--paper-slider-height, 2px);}:host(:focus){outline:none;}:dir(rtl) #sliderContainer{-webkit-transform:scaleX(-1);transform:scaleX(-1);}:host([dir="rtl"]) #sliderContainer{-webkit-transform:scaleX(-1);transform:scaleX(-1);}:host([dir="ltr"]) #sliderContainer{-webkit-transform:scaleX(1);transform:scaleX(1);}#sliderContainer{position:relative;width:100%;height:calc(30px + var(--calculated-paper-slider-height));margin-left:calc(15px + var(--calculated-paper-slider-height)/2);margin-right:calc(15px + var(--calculated-paper-slider-height)/2);}#sliderContainer:focus{outline:0;}#sliderContainer.editable{margin-top:12px;margin-bottom:12px;}.bar-container{position:absolute;top:0;bottom:0;left:0;right:0;overflow:hidden;}.ring > .bar-container{left:calc(5px + var(--calculated-paper-slider-height)/2);transition:left 0.18s ease;}.ring.expand.dragging > .bar-container{transition:none;}.ring.expand:not(.pin) > .bar-container{left:calc(8px + var(--calculated-paper-slider-height)/2);}#sliderBar{padding:15px 0;width:100%;background-color:var(--paper-slider-bar-color, transparent);--paper-progress-container-color:var(--paper-slider-container-color, var(--paper-grey-400));--paper-progress-height:var(--calculated-paper-slider-height);}.slider-markers{position:absolute;top:calc(14px + var(--paper-slider-height,2px)/2);height:var(--calculated-paper-slider-height);left:0;right:-1px;box-sizing:border-box;pointer-events:none;@apply --layout-horizontal;}.slider-marker{@apply --layout-flex;}.slider-markers::after,
      .slider-marker::after{content:"";display:block;margin-left:-1px;width:2px;height:var(--calculated-paper-slider-height);border-radius:50%;background-color:var(--paper-slider-markers-color, #000);}.slider-knob{position:absolute;left:0;top:0;margin-left:calc(-15px - var(--calculated-paper-slider-height)/2);width:calc(30px + var(--calculated-paper-slider-height));height:calc(30px + var(--calculated-paper-slider-height));}.transiting > .slider-knob{transition:left 0.08s ease;}.slider-knob:focus{outline:none;}.slider-knob.dragging{transition:none;}.snaps > .slider-knob.dragging{transition:-webkit-transform 0.08s ease;transition:transform 0.08s ease;}.slider-knob-inner{margin:10px;width:calc(100% - 20px);height:calc(100% - 20px);background-color:var(--paper-slider-knob-color, var(--google-blue-700));border:2px solid var(--paper-slider-knob-color, var(--google-blue-700));border-radius:50%;-moz-box-sizing:border-box;box-sizing:border-box;transition-property:-webkit-transform, background-color, border;transition-property:transform, background-color, border;transition-duration:0.18s;transition-timing-function:ease;}.expand:not(.pin) > .slider-knob > .slider-knob-inner{-webkit-transform:scale(1.5);transform:scale(1.5);}.ring > .slider-knob > .slider-knob-inner{background-color:var(--paper-slider-knob-start-color, transparent);border:2px solid var(--paper-slider-knob-start-border-color, var(--paper-grey-400));}.slider-knob-inner::before{background-color:var(--paper-slider-pin-color, var(--google-blue-700));}.pin > .slider-knob > .slider-knob-inner::before{content:"";position:absolute;top:0;left:50%;margin-left:-13px;width:26px;height:26px;border-radius:50% 50% 50% 0;-webkit-transform:rotate(-45deg) scale(0) translate(0);transform:rotate(-45deg) scale(0) translate(0);}.slider-knob-inner::before,
      .slider-knob-inner::after{transition:-webkit-transform .18s ease, background-color .18s ease;transition:transform .18s ease, background-color .18s ease;}.pin.ring > .slider-knob > .slider-knob-inner::before{background-color:var(--paper-slider-pin-start-color, var(--paper-grey-400));}.pin.expand > .slider-knob > .slider-knob-inner::before{-webkit-transform:rotate(-45deg) scale(1) translate(17px, -17px);transform:rotate(-45deg) scale(1) translate(17px, -17px);}.pin > .slider-knob > .slider-knob-inner::after{content:attr(value);position:absolute;top:0;left:50%;margin-left:-16px;width:32px;height:26px;text-align:center;color:var(--paper-slider-font-color, #fff);font-size:10px;-webkit-transform:scale(0) translate(0);transform:scale(0) translate(0);}.pin.expand > .slider-knob > .slider-knob-inner::after{-webkit-transform:scale(1) translate(0, -17px);transform:scale(1) translate(0, -17px);}.slider-input{width:50px;overflow:hidden;--paper-input-container-input:{text-align:center;@apply --paper-slider-input-container-input;};@apply --paper-slider-input;}#sliderContainer.disabled{pointer-events:none;}.disabled > .slider-knob > .slider-knob-inner{background-color:var(--paper-slider-disabled-knob-color, var(--paper-grey-400));border:2px solid var(--paper-slider-disabled-knob-color, var(--paper-grey-400));-webkit-transform:scale3d(0.75, 0.75, 1);transform:scale3d(0.75, 0.75, 1);}.disabled.ring > .slider-knob > .slider-knob-inner{background-color:var(--paper-slider-knob-start-color, transparent);border:2px solid var(--paper-slider-knob-start-border-color, var(--paper-grey-400));}paper-ripple{color:var(--paper-slider-knob-color, var(--google-blue-700));}</style><div id="sliderContainer" class$="[[_getClassNames(disabled, pin, snaps, immediateValue, min, expand, dragging, transiting, editable)]]"><div class="bar-container"><paper-progress disabled$="[[disabled]]" id="sliderBar" aria-hidden="true" min="[[min]]" max="[[max]]" step="[[step]]" value="[[immediateValue]]" secondary-progress="[[secondaryProgress]]" on-down="_bardown" on-up="_resetKnob" on-track="_onTrack"></paper-progress></div><template is="dom-if" if="[[snaps]]"><div class="slider-markers"><template is="dom-repeat" items="[[markers]]"><div class="slider-marker"></div></template></div></template><div id="sliderKnob" class="slider-knob" on-down="_knobdown" on-up="_resetKnob" on-track="_onTrack" on-transitionend="_knobTransitionEnd"><div class="slider-knob-inner" value$="[[immediateValue]]"></div></div></div><template is="dom-if" if="[[editable]]"><paper-input id="input" type="number" step="[[step]]" min="[[min]]" max="[[max]]" class="slider-input" disabled$="[[disabled]]" value="[[immediateValue]]" on-change="_changeValue" on-keydown="_inputKeyDown" no-label-float=""></paper-input></template></template><script>Polymer({is:'paper-slider',behaviors:[Polymer.IronA11yKeysBehavior,Polymer.IronFormElementBehavior,Polymer.PaperInkyFocusBehavior,Polymer.IronRangeBehavior],properties:{snaps:{type:Boolean,value:!1,notify:!0},pin:{type:Boolean,value:!1,notify:!0},secondaryProgress:{type:Number,value:0,notify:!0,observer:'_secondaryProgressChanged'},editable:{type:Boolean,value:!1},immediateValue:{type:Number,value:0,readOnly:!0,notify:!0},maxMarkers:{type:Number,value:0,notify:!0},expand:{type:Boolean,value:!1,readOnly:!0},dragging:{type:Boolean,value:!1,readOnly:!0,notify:!0},transiting:{type:Boolean,value:!1,readOnly:!0},markers:{type:Array,readOnly:!0,value:function(){return[]}}},observers:['_updateKnob(value, min, max, snaps, step)','_valueChanged(value)','_immediateValueChanged(immediateValue)','_updateMarkers(maxMarkers, min, max, snaps)'],hostAttributes:{role:'slider',tabindex:0},keyBindings:{left:'_leftKey',right:'_rightKey',"down pagedown home":'_decrementKey',"up pageup end":'_incrementKey'},increment:function(){this.value=this._clampValue(this.value+this.step)},decrement:function(){this.value=this._clampValue(this.value-this.step)},_updateKnob:function(a,b,c){this.setAttribute('aria-valuemin',b),this.setAttribute('aria-valuemax',c),this.setAttribute('aria-valuenow',a),this._positionKnob(100*this._calcRatio(a))},_valueChanged:function(){this.fire('value-change',{composed:!0})},_immediateValueChanged:function(){this.dragging?this.fire('immediate-value-change',{composed:!0}):this.value=this.immediateValue},_secondaryProgressChanged:function(){this.secondaryProgress=this._clampValue(this.secondaryProgress)},_expandKnob:function(){this._setExpand(!0)},_resetKnob:function(){this.cancelDebouncer('expandKnob'),this._setExpand(!1)},_positionKnob:function(a){this._setImmediateValue(this._calcStep(this._calcKnobPosition(a))),this._setRatio(100*this._calcRatio(this.immediateValue)),this.$.sliderKnob.style.left=this.ratio+'%',this.dragging&&(this._knobstartx=this.ratio*this._w/100,this.translate3d(0,0,0,this.$.sliderKnob))},_calcKnobPosition:function(a){return(this.max-this.min)*a/100+this.min},_onTrack:function(a){switch(a.stopPropagation(),a.detail.state){case'start':this._trackStart(a);break;case'track':this._trackX(a);break;case'end':this._trackEnd();}},_trackStart:function(){this._setTransiting(!1),this._w=this.$.sliderBar.offsetWidth,this._x=this.ratio*this._w/100,this._startx=this._x,this._knobstartx=this._startx,this._minx=-this._startx,this._maxx=this._w-this._startx,this.$.sliderKnob.classList.add('dragging'),this._setDragging(!0)},_trackX:function(a){this.dragging||this._trackStart(a);var b=this._isRTL?-1:1,c=Math.min(this._maxx,Math.max(this._minx,a.detail.dx*b));this._x=this._startx+c;var d=this._calcStep(this._calcKnobPosition(100*(this._x/this._w)));this._setImmediateValue(d);var e=this._calcRatio(this.immediateValue)*this._w-this._knobstartx;this.translate3d(e+'px',0,0,this.$.sliderKnob)},_trackEnd:function(){var a=this.$.sliderKnob.style;this.$.sliderKnob.classList.remove('dragging'),this._setDragging(!1),this._resetKnob(),this.value=this.immediateValue,a.transform=a.webkitTransform='',this.fire('change',{composed:!0})},_knobdown:function(a){this._expandKnob(),a.preventDefault(),this.focus()},_bardown:function(a){this._w=this.$.sliderBar.offsetWidth;var b=this.$.sliderBar.getBoundingClientRect(),c=100*((a.detail.x-b.left)/this._w);this._isRTL&&(c=100-c);var d=this.ratio;this._setTransiting(!0),this._positionKnob(c),this.debounce('expandKnob',this._expandKnob,60),d===this.ratio&&this._setTransiting(!1),this.async(function(){this.fire('change',{composed:!0})}),a.preventDefault(),this.focus()},_knobTransitionEnd:function(a){a.target===this.$.sliderKnob&&this._setTransiting(!1)},_updateMarkers:function(a,b,c,d){d||this._setMarkers([]);var e=Math.round((c-b)/this.step);e>a&&(e=a),(0>e||!isFinite(e))&&(e=0),this._setMarkers(Array(e))},_mergeClasses:function(a){return Object.keys(a).filter(function(b){return a[b]}).join(' ')},_getClassNames:function(){return this._mergeClasses({disabled:this.disabled,pin:this.pin,snaps:this.snaps,ring:this.immediateValue<=this.min,expand:this.expand,dragging:this.dragging,transiting:this.transiting,editable:this.editable})},get _isRTL(){return void 0===this.__isRTL&&(this.__isRTL='rtl'===window.getComputedStyle(this).direction),this.__isRTL},_leftKey:function(a){this._isRTL?this._incrementKey(a):this._decrementKey(a)},_rightKey:function(a){this._isRTL?this._decrementKey(a):this._incrementKey(a)},_incrementKey:function(a){this.disabled||('end'===a.detail.key?this.value=this.max:this.increment(),this.fire('change'),a.preventDefault())},_decrementKey:function(a){this.disabled||('home'===a.detail.key?this.value=this.min:this.decrement(),this.fire('change'),a.preventDefault())},_changeValue:function(a){this.value=a.target.value,this.fire('change',{composed:!0})},_inputKeyDown:function(a){a.stopPropagation()},_createRipple:function(){return this._rippleContainer=this.$.sliderKnob,Polymer.PaperInkyFocusBehaviorImpl._createRipple.call(this)},_focusedChanged:function(a){a&&this.ensureRipple(),this.hasRipple()&&(this._ripple.style.display=a?'':'none',this._ripple.holdDown=a)}});</script></dom-module><script>(function(e,t){"object"===("undefined"===typeof exports?"undefined":babelHelpers.typeof(exports))&&"undefined"!==typeof module?t(exports):"function"===typeof define&&define.amd?define(["exports"],t):t(e.THREE={})})(this,function(e){function t(){}function o(e,t){this.x=e||0,this.y=t||0}function i(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],0<arguments.length&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function s(e,t,r,a){this._x=e||0,this._y=t||0,this._z=r||0,this._w=void 0===a?1:a}function _(e,t,r){this.x=e||0,this.y=t||0,this.z=r||0}function u(){this.elements=[1,0,0,0,1,0,0,0,1],0<arguments.length&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}function r(t,a,i,n,s,e,l,p,d,c){Object.defineProperty(this,"id",{value:S++}),this.uuid=vn.generateUUID(),this.name="",this.image=void 0===t?r.DEFAULT_IMAGE:t,this.mipmaps=[],this.mapping=void 0===a?r.DEFAULT_MAPPING:a,this.wrapS=void 0===i?1001:i,this.wrapT=void 0===n?1001:n,this.magFilter=void 0===s?1006:s,this.minFilter=void 0===e?1008:e,this.anisotropy=void 0===d?1:d,this.format=void 0===l?1023:l,this.type=void 0===p?1009:p,this.offset=new o(0,0),this.repeat=new o(1,1),this.center=new o(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new u,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0===c?3E3:c,this.version=0,this.onUpdate=null}function j(e,t,r,a){this.x=e||0,this.y=t||0,this.z=r||0,this.w=void 0===a?1:a}function E(e,t,a){this.uuid=vn.generateUUID(),this.width=e,this.height=t,this.scissor=new j(0,0,e,t),this.scissorTest=!1,this.viewport=new j(0,0,e,t),a=a||{},void 0===a.minFilter&&(a.minFilter=1006),this.texture=new r(void 0,void 0,a.wrapS,a.wrapT,a.magFilter,a.minFilter,a.format,a.type,a.anisotropy,a.encoding),this.depthBuffer=!(void 0!==a.depthBuffer)||a.depthBuffer,this.stencilBuffer=!(void 0!==a.stencilBuffer)||a.stencilBuffer,this.depthTexture=void 0===a.depthTexture?null:a.depthTexture}function n(e,t,r){E.call(this,e,t,r),this.activeMipMapLevel=this.activeCubeFace=0}function l(t,o,i,s,l,e,p,d,u,g,m,f){r.call(this,null,e,p,d,u,g,s,l,m,f),this.image={data:t,width:o,height:i},this.magFilter=void 0===u?1003:u,this.minFilter=void 0===g?1003:g,this.flipY=this.generateMipmaps=!1,this.unpackAlignment=1}function p(t,a,o,i,n,e,s,l,p,d){t=void 0===t?[]:t,r.call(this,t,void 0===a?301:a,o,i,n,e,s,l,p,d),this.flipY=!1}function d(t,r,a){var o=t[0];if(0>=o||0<o)return t;var i=r*a,e=Ie[i];if(void 0===e&&(e=new Float32Array(i),Ie[i]=e),0!==r)for(o.toArray(e,0),o=1,i=0;o!==r;++o)i+=a,t[o].toArray(e,i);return e}function m(e,t){var r=Ce[t];void 0===r&&(r=new Int32Array(t),Ce[t]=r);for(var a=0;a!==t;++a)r[a]=e.allocTextureUnit();return r}function c(e,t){e.uniform1f(this.addr,t)}function g(e,t){e.uniform1i(this.addr,t)}function f(e,t){void 0===t.x?e.uniform2fv(this.addr,t):e.uniform2f(this.addr,t.x,t.y)}function h(e,t){void 0===t.x?void 0===t.r?e.uniform3fv(this.addr,t):e.uniform3f(this.addr,t.r,t.g,t.b):e.uniform3f(this.addr,t.x,t.y,t.z)}function x(e,t){void 0===t.x?e.uniform4fv(this.addr,t):e.uniform4f(this.addr,t.x,t.y,t.z,t.w)}function v(e,t){e.uniformMatrix2fv(this.addr,!1,t.elements||t)}function b(e,t){void 0===t.elements?e.uniformMatrix3fv(this.addr,!1,t):(Ge.set(t.elements),e.uniformMatrix3fv(this.addr,!1,Ge))}function T(e,t){void 0===t.elements?e.uniformMatrix4fv(this.addr,!1,t):(Ee.set(t.elements),e.uniformMatrix4fv(this.addr,!1,Ee))}function A(e,t,r){var a=r.allocTextureUnit();e.uniform1i(this.addr,a),r.setTexture2D(t||_n,a)}function w(e,t,r){var a=r.allocTextureUnit();e.uniform1i(this.addr,a),r.setTextureCube(t||He,a)}function C(e,t){e.uniform2iv(this.addr,t)}function P(e,t){e.uniform3iv(this.addr,t)}function N(e,t){e.uniform4iv(this.addr,t)}function B(e){return 5126===e?c:35664===e?f:35665===e?h:35666===e?x:35674===e?v:35675===e?b:35676===e?T:35678===e||36198===e?A:35680===e?w:5124===e||35670===e?g:35667===e||35671===e?C:35668===e||35672===e?P:35669===e||35673===e?N:void 0}function F(e,t){e.uniform1fv(this.addr,t)}function G(e,t){e.uniform1iv(this.addr,t)}function V(e,t){e.uniform2fv(this.addr,d(t,this.size,2))}function k(e,t){e.uniform3fv(this.addr,d(t,this.size,3))}function X(e,t){e.uniform4fv(this.addr,d(t,this.size,4))}function q(e,t){e.uniformMatrix2fv(this.addr,!1,d(t,this.size,4))}function Z(e,t){e.uniformMatrix3fv(this.addr,!1,d(t,this.size,9))}function J(e,t){e.uniformMatrix4fv(this.addr,!1,d(t,this.size,16))}function Q(t,r,a){var o=r.length,i=m(a,o);for(t.uniform1iv(this.addr,i),t=0;t!==o;++t)a.setTexture2D(r[t]||_n,i[t])}function $(t,r,a){var o=r.length,i=m(a,o);for(t.uniform1iv(this.addr,i),t=0;t!==o;++t)a.setTextureCube(r[t]||He,i[t])}function _e(e){return 5126===e?F:35664===e?V:35665===e?k:35666===e?X:35674===e?q:35675===e?Z:35676===e?J:35678===e?Q:35680===e?$:5124===e||35670===e?G:35667===e||35671===e?C:35668===e||35672===e?P:35669===e||35673===e?N:void 0}function a(e,t,r){this.id=e,this.addr=r,this.setValue=B(t.type)}function Le(e,t,r){this.id=e,this.addr=r,this.size=t.size,this.setValue=_e(t.type)}function De(e){this.id=e,this.seq=[],this.map={}}function Me(t,r,o){this.seq=[],this.map={},this.renderer=o,o=t.getProgramParameter(r,t.ACTIVE_UNIFORMS);for(var i=0;i<o;++i){var s=t.getActiveUniform(r,i),e=t.getUniformLocation(r,s.name),l=this,p=s.name,d=p.length;for(Fe.lastIndex=0;;){var c=Fe.exec(p),m=Fe.lastIndex,g=c[1],n=c[3];if("]"===c[2]&&(g|=0),void 0===n||"["===n&&m+2===d){p=l,s=void 0===n?new a(g,s,e):new Le(g,s,e),p.seq.push(s),p.map[s.id]=s;break}else n=l.map[g],void 0===n&&(n=new De(g),g=l,l=n,g.seq.push(l),g.map[l.id]=l),l=n}}}function Ne(e,t,r){return void 0===t&&void 0===r?this.set(e):this.setRGB(e,t,r)}function H(t,a,o,i,n,e,s,l,p){r.call(this,t,a,o,i,n,e,s,l,p),this.needsUpdate=!0}function Je(t,a,o,i,p){function e(e,t){return e.renderOrder===t.renderOrder?e.z===t.z?t.id-e.id:t.z-e.z:e.renderOrder-t.renderOrder}var d=new _,c=new s,y=new _,b,f,g,h,E,m,v,n,u,S,r,l,x,M,w,A,R,L,C,P,U,D;this.render=function(s,_,N){if(0!==s.length){if(void 0===U){var B=new Float32Array([-0.5,-0.5,0,0,0.5,-0.5,1,0,0.5,0.5,1,1,-0.5,0.5,0,1]),F=new Uint16Array([0,1,2,0,2,3]);C=a.createBuffer(),P=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,C),a.bufferData(a.ARRAY_BUFFER,B,a.STATIC_DRAW),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,P),a.bufferData(a.ELEMENT_ARRAY_BUFFER,F,a.STATIC_DRAW),B=a.createProgram(),F=a.createShader(a.VERTEX_SHADER);var T=a.createShader(a.FRAGMENT_SHADER);a.shaderSource(F,["precision "+p.precision+" float;","#define SHADER_NAME SpriteMaterial\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform float rotation;\nuniform vec2 center;\nuniform vec2 scale;\nuniform vec2 uvOffset;\nuniform vec2 uvScale;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvarying float fogDepth;\nvoid main() {\n\tvUV = uvOffset + uv * uvScale;\n\tvec2 alignedPosition = ( position - center ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tvec4 mvPosition;\n\tmvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\tfogDepth = - mvPosition.z;\n}"].join("\n")),a.shaderSource(T,["precision "+p.precision+" float;","#define SHADER_NAME SpriteMaterial\nuniform vec3 color;\nuniform sampler2D map;\nuniform float opacity;\nuniform int fogType;\nuniform vec3 fogColor;\nuniform float fogDensity;\nuniform float fogNear;\nuniform float fogFar;\nuniform float alphaTest;\nvarying vec2 vUV;\nvarying float fogDepth;\nvoid main() {\n\tvec4 texture = texture2D( map, vUV );\n\tgl_FragColor = vec4( color * texture.xyz, texture.a * opacity );\n\tif ( gl_FragColor.a < alphaTest ) discard;\n\tif ( fogType > 0 ) {\n\t\tfloat fogFactor = 0.0;\n\t\tif ( fogType == 1 ) {\n\t\t\tfogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t\t} else {\n\t\t\tconst float LOG2 = 1.442695;\n\t\t\tfogFactor = exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 );\n\t\t\tfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\n\t\t}\n\t\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n\t}\n}"].join("\n")),a.compileShader(F),a.compileShader(T),a.attachShader(B,F),a.attachShader(B,T),a.linkProgram(B),U=B,R=a.getAttribLocation(U,"position"),L=a.getAttribLocation(U,"uv"),b=a.getUniformLocation(U,"uvOffset"),f=a.getUniformLocation(U,"uvScale"),g=a.getUniformLocation(U,"rotation"),h=a.getUniformLocation(U,"center"),E=a.getUniformLocation(U,"scale"),m=a.getUniformLocation(U,"color"),v=a.getUniformLocation(U,"map"),n=a.getUniformLocation(U,"opacity"),u=a.getUniformLocation(U,"modelViewMatrix"),S=a.getUniformLocation(U,"projectionMatrix"),r=a.getUniformLocation(U,"fogType"),l=a.getUniformLocation(U,"fogDensity"),x=a.getUniformLocation(U,"fogNear"),M=a.getUniformLocation(U,"fogFar"),w=a.getUniformLocation(U,"fogColor"),a.getUniformLocation(U,"fogDepth"),A=a.getUniformLocation(U,"alphaTest"),B=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),B.width=8,B.height=8,F=B.getContext("2d"),F.fillStyle="white",F.fillRect(0,0,8,8),D=new H(B)}o.useProgram(U),o.initAttributes(),o.enableAttribute(R),o.enableAttribute(L),o.disableUnusedAttributes(),o.disable(a.CULL_FACE),o.enable(a.BLEND),a.bindBuffer(a.ARRAY_BUFFER,C),a.vertexAttribPointer(R,2,a.FLOAT,!1,16,0),a.vertexAttribPointer(L,2,a.FLOAT,!1,16,8),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,P),a.uniformMatrix4fv(S,!1,N.projectionMatrix.elements),o.activeTexture(a.TEXTURE0),a.uniform1i(v,0),F=B=0,(T=_.fog)?(a.uniform3f(w,T.color.r,T.color.g,T.color.b),T.isFog?(a.uniform1f(x,T.near),a.uniform1f(M,T.far),a.uniform1i(r,1),F=B=1):T.isFogExp2&&(a.uniform1f(l,T.density),a.uniform1i(r,2),F=B=2)):(a.uniform1i(r,0),F=B=0),T=0;for(var G=s.length,z;T<G;T++)z=s[T],z.modelViewMatrix.multiplyMatrices(N.matrixWorldInverse,z.matrixWorld),z.z=-z.modelViewMatrix.elements[14];s.sort(e);var O=[],V=[];for(T=0,G=s.length;T<G;T++){z=s[T];var k=z.material;if(!1!==k.visible){z.onBeforeRender(t,_,N,void 0,k,void 0),a.uniform1f(A,k.alphaTest),a.uniformMatrix4fv(u,!1,z.modelViewMatrix.elements),z.matrixWorld.decompose(d,c,y),O[0]=y.x,O[1]=y.y,V[0]=z.center.x-.5,V[1]=z.center.y-.5;var W=0;_.fog&&k.fog&&(W=F),B!==W&&(a.uniform1i(r,W),B=W),null===k.map?(a.uniform2f(b,0,0),a.uniform2f(f,1,1)):(a.uniform2f(b,k.map.offset.x,k.map.offset.y),a.uniform2f(f,k.map.repeat.x,k.map.repeat.y)),a.uniform1f(n,k.opacity),a.uniform3f(m,k.color.r,k.color.g,k.color.b),a.uniform1f(g,k.rotation),a.uniform2fv(h,V),a.uniform2fv(E,O),o.setBlending(k.blending,k.blendEquation,k.blendSrc,k.blendDst,k.blendEquationAlpha,k.blendSrcAlpha,k.blendDstAlpha,k.premultipliedAlpha),o.buffers.depth.setTest(k.depthTest),o.buffers.depth.setMask(k.depthWrite),o.buffers.color.setMask(k.colorWrite),i.setTexture2D(k.map||D,0),a.drawElements(a.TRIANGLES,6,a.UNSIGNED_SHORT,0),z.onAfterRender(t,_,N,void 0,k,void 0)}}o.enable(a.CULL_FACE),o.reset()}}}function Ke(){Object.defineProperty(this,"id",{value:Tn++}),this.uuid=vn.generateUUID(),this.name="",this.type="Material",this.lights=this.fog=!0,this.blending=1,this.side=0,this.flatShading=!1,this.vertexColors=0,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendEquationAlpha=this.blendDstAlpha=this.blendSrcAlpha=null,this.depthFunc=3,this.depthWrite=this.depthTest=!0,this.clippingPlanes=null,this.clipShadows=this.clipIntersection=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetUnits=this.polygonOffsetFactor=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.overdraw=0,this.visible=!0,this.userData={},this.needsUpdate=!0}function et(e){Ke.call(this),this.type="MeshDepthMaterial",this.depthPacking=3200,this.morphTargets=this.skinning=!1,this.displacementMap=this.alphaMap=this.map=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.lights=this.fog=!1,this.setValues(e)}function tt(e){Ke.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new _,this.nearDistance=1,this.farDistance=1E3,this.morphTargets=this.skinning=!1,this.displacementMap=this.alphaMap=this.map=null,this.displacementScale=1,this.displacementBias=0,this.lights=this.fog=!1,this.setValues(e)}function rt(e,t){this.min=void 0===e?new _(Infinity,Infinity,Infinity):e,this.max=void 0===t?new _(-Infinity,-Infinity,-Infinity):t}function at(e,t){this.center=void 0===e?new _:e,this.radius=void 0===t?0:t}function ot(e,t){this.normal=void 0===e?new _(1,0,0):e,this.constant=void 0===t?0:t}function it(t,r,a,o,i,e){this.planes=[void 0===t?new ot:t,void 0===r?new ot:r,void 0===a?new ot:a,void 0===o?new ot:o,void 0===i?new ot:i,void 0===e?new ot:e]}function nt(s,a,t){function p(t,r,a,o,e,i){var l=t.geometry,p=v,c=t.customDepthMaterial;return a&&(p=n,c=t.customDistanceMaterial),c?p=c:(c=!1,r.morphTargets&&(l&&l.isBufferGeometry?c=l.morphAttributes&&l.morphAttributes.position&&0<l.morphAttributes.position.length:l&&l.isGeometry&&(c=l.morphTargets&&0<l.morphTargets.length)),t.isSkinnedMesh&&!1===r.skinning&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",t),t=t.isSkinnedMesh&&r.skinning,l=0,c&&(l|=1),t&&(l|=2),p=p[l]),s.localClippingEnabled&&!0===r.clipShadows&&0!==r.clippingPlanes.length&&(l=p.uuid,c=r.uuid,t=u[l],void 0===t&&(t={},u[l]=t),l=t[c],void 0===l&&(l=p.clone(),t[c]=l),p=l),p.visible=r.visible,p.wireframe=r.wireframe,p.side=null==r.shadowSide?S[r.side]:r.shadowSide,p.clipShadows=r.clipShadows,p.clippingPlanes=r.clippingPlanes,p.clipIntersection=r.clipIntersection,p.wireframeLinewidth=r.wireframeLinewidth,p.linewidth=r.linewidth,a&&p.isMeshDistanceMaterial&&(p.referencePosition.copy(o),p.nearDistance=e,p.farDistance=i),p}function y(o,i,d,c){if(!1!==o.visible){if(o.layers.test(i.layers)&&(o.isMesh||o.isLine||o.isPoints)&&o.castShadow&&(!o.frustumCulled||e.intersectsObject(o))){o.modelViewMatrix.multiplyMatrices(d.matrixWorldInverse,o.matrixWorld);var g=a.update(o),m=o.material;if(Array.isArray(m))for(var n=g.groups,u=0,r=n.length;u<r;u++){var f=n[u],l=m[f.materialIndex];l&&l.visible&&(l=p(o,l,c,T,d.near,d.far),s.renderBufferDirect(d,null,g,l,o,f))}else m.visible&&(l=p(o,m,c,T,d.near,d.far),s.renderBufferDirect(d,null,g,l,o,null))}for(o=o.children,g=0,m=o.length;g<m;g++)y(o[g],i,d,c)}}var e=new it,f=new i,g=new o,h=new o(t,t),b=new _,T=new _,v=[,,,,],n=[,,,,],u={},S={0:1,1:0,2:2},r=[new _(1,0,0),new _(-1,0,0),new _(0,0,1),new _(0,0,-1),new _(0,1,0),new _(0,-1,0)],l=[new _(0,1,0),new _(0,1,0),new _(0,1,0),new _(0,1,0),new _(0,0,1),new _(0,0,-1)],m=[new j,new j,new j,new j,new j,new j];for(t=0;4!==t;++t){var d=0!==(1&t),c=0!==(2&t),x=new et({depthPacking:3201,morphTargets:d,skinning:c});v[t]=x,d=new tt({morphTargets:d,skinning:c}),n[t]=d}var M=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(a,o,i){if(!1!==M.enabled&&(!1!==M.autoUpdate||!1!==M.needsUpdate)&&0!==a.length){var d=s.state;d.disable(s.context.BLEND),d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);for(var n=0,c=a.length,x,u;n<c;n++){u=a[n],x=u.shadow;var t=u&&u.isPointLight;if(void 0===x)console.warn("THREE.WebGLShadowMap:",u,"has no shadow.");else{var p=x.camera;if(g.copy(x.mapSize),g.min(h),t){var v=g.x,_=g.y;m[0].set(2*v,_,v,_),m[1].set(0,_,v,_),m[2].set(3*v,_,v,_),m[3].set(v,_,v,_),m[4].set(3*v,0,v,_),m[5].set(v,0,v,_),g.x*=4,g.y*=2}for(null===x.map&&(x.map=new E(g.x,g.y,{minFilter:1003,magFilter:1003,format:1023}),x.map.texture.name=u.name+".shadowMap",p.updateProjectionMatrix()),x.isSpotLightShadow&&x.update(u),v=x.map,_=x.matrix,T.setFromMatrixPosition(u.matrixWorld),p.position.copy(T),t?(x=6,_.makeTranslation(-T.x,-T.y,-T.z)):(x=1,b.setFromMatrixPosition(u.target.matrixWorld),p.lookAt(b),p.updateMatrixWorld(),_.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),_.multiply(p.projectionMatrix),_.multiply(p.matrixWorldInverse)),s.setRenderTarget(v),s.clear(),u=0;u<x;u++)t&&(b.copy(p.position),b.add(r[u]),p.up.copy(l[u]),p.lookAt(b),p.updateMatrixWorld(),d.viewport(m[u])),f.multiplyMatrices(p.projectionMatrix,p.matrixWorldInverse),e.setFromMatrix(f),y(o,i,p,t)}}M.needsUpdate=!1}}}function Oe(t){var r={};return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),r[e.uuid]},remove:function(e){e.isInterleavedBufferAttribute&&(e=e.data);var a=r[e.uuid];a&&(t.deleteBuffer(a.buffer),delete r[e.uuid])},update:function(a,o){a.isInterleavedBufferAttribute&&(a=a.data);var i=r[a.uuid];if(void 0===i){i=a.uuid;var e=a.array,n=a.dynamic?t.DYNAMIC_DRAW:t.STATIC_DRAW,s=t.createBuffer();t.bindBuffer(o,s),t.bufferData(o,e,n),a.onUploadCallback(),o=t.FLOAT,e instanceof Float32Array?o=t.FLOAT:e instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):e instanceof Uint16Array?o=t.UNSIGNED_SHORT:e instanceof Int16Array?o=t.SHORT:e instanceof Uint32Array?o=t.UNSIGNED_INT:e instanceof Int32Array?o=t.INT:e instanceof Int8Array?o=t.BYTE:e instanceof Uint8Array&&(o=t.UNSIGNED_BYTE),r[i]={buffer:s,type:o,bytesPerElement:e.BYTES_PER_ELEMENT,version:a.version}}else i.version<a.version&&(e=a,s=e.array,n=e.updateRange,t.bindBuffer(o,i.buffer),!1===e.dynamic?t.bufferData(o,s,t.STATIC_DRAW):-1===n.count?t.bufferSubData(o,0,s):0===n.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(t.bufferSubData(o,n.offset*s.BYTES_PER_ELEMENT,s.subarray(n.offset,n.offset+n.count)),n.count=-1),i.version=a.version)}}}function st(e,t,r,a){this._x=e||0,this._y=t||0,this._z=r||0,this._order=a||st.DefaultOrder}function lt(){this.mask=1}function pt(){Object.defineProperty(this,"id",{value:Sn++}),this.uuid=vn.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=pt.DefaultUp.clone();var e=new _,t=new st,r=new s,o=new _(1,1,1);t.onChange(function(){r.setFromEuler(t,!1)}),r.onChange(function(){t.setFromQuaternion(r,void 0,!1)}),Object.defineProperties(this,{position:{enumerable:!0,value:e},rotation:{enumerable:!0,value:t},quaternion:{enumerable:!0,value:r},scale:{enumerable:!0,value:o},modelViewMatrix:{value:new i},normalMatrix:{value:new u}}),this.matrix=new i,this.matrixWorld=new i,this.matrixAutoUpdate=pt.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new lt,this.visible=!0,this.receiveShadow=this.castShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function dt(){pt.call(this),this.type="Camera",this.matrixWorldInverse=new i,this.projectionMatrix=new i}function ct(t,r,a,o,i,e){dt.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=r,this.top=a,this.bottom=o,this.near=void 0===i?.1:i,this.far=void 0===e?2E3:e,this.updateProjectionMatrix()}function mt(t,r,a,o,i,e){this.a=t,this.b=r,this.c=a,this.normal=o&&o.isVector3?o:new _,this.vertexNormals=Array.isArray(o)?o:[],this.color=i&&i.isColor?i:new Ne,this.vertexColors=Array.isArray(i)?i:[],this.materialIndex=void 0===e?0:e}function ut(){Object.defineProperty(this,"id",{value:Mn+=2}),this.uuid=vn.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingSphere=this.boundingBox=null,this.groupsNeedUpdate=this.lineDistancesNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.uvsNeedUpdate=this.verticesNeedUpdate=this.elementsNeedUpdate=!1}function gt(e,t,r){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.uuid=vn.generateUUID(),this.name="",this.array=e,this.itemSize=t,this.count=void 0===e?0:e.length/t,this.normalized=!0===r,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=function(){},this.version=0}function M(e,t,r){gt.call(this,new Int8Array(e),t,r)}function ft(e,t,r){gt.call(this,new Uint8Array(e),t,r)}function ht(e,t,r){gt.call(this,new Uint8ClampedArray(e),t,r)}function yt(e,t,r){gt.call(this,new Int16Array(e),t,r)}function xt(e,t,r){gt.call(this,new Uint16Array(e),t,r)}function vt(e,t,r){gt.call(this,new Int32Array(e),t,r)}function _t(e,t,r){gt.call(this,new Uint32Array(e),t,r)}function bt(e,t,r){gt.call(this,new Float32Array(e),t,r)}function D(e,t,r){gt.call(this,new Float64Array(e),t,r)}function Et(){this.indices=[],this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingSphere=this.boundingBox=null,this.groupsNeedUpdate=this.uvsNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.verticesNeedUpdate=!1}function Pe(e){if(0===e.length)return-Infinity;for(var t=e[0],r=1,a=e.length;r<a;++r)e[r]>t&&(t=e[r]);return t}function Tt(){Object.defineProperty(this,"id",{value:An+=2}),this.uuid=vn.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingSphere=this.boundingBox=null,this.drawRange={start:0,count:Infinity}}function St(t,r,o,i,n,s){ut.call(this),this.type="BoxGeometry",this.parameters={width:t,height:r,depth:o,widthSegments:i,heightSegments:n,depthSegments:s},this.fromBufferGeometry(new Mt(t,r,o,i,n,s)),this.mergeVertices()}function Mt(t,r,o,i,s,l){function p(o,a,i,s,p,e,d,c,l,f,v){var b=e/l,r=d/f,t=e/2,T=d/2;d=l+1;var S=e=0,M=new _,A,w;for(w=0;w<f+1;w++){var R=w*r-T;for(A=0;A<d;A++)M[o]=(A*b-t)*s,M[a]=R*p,M[i]=c/2,y.push(M.x,M.y,M.z),M[o]=0,M[a]=0,M[i]=0<c?1:-1,m.push(M.x,M.y,M.z),x.push(A/l),x.push(1-w/f),e+=1}for(w=0;w<f;w++)for(A=0;A<l;A++)o=n+A+d*(w+1),a=n+(A+1)+d*(w+1),i=n+(A+1)+d*w,h.push(n+A+d*w,o,i),h.push(o,a,i),S+=6;E.addGroup(u,S,v),u+=S,n+=e}Tt.call(this),this.type="BoxBufferGeometry",this.parameters={width:t,height:r,depth:o,widthSegments:i,heightSegments:s,depthSegments:l};var E=this;t=t||1,r=r||1,o=o||1,i=xn(i)||1,s=xn(s)||1,l=xn(l)||1;var h=[],y=[],m=[],x=[],n=0,u=0;p("z","y","x",-1,-1,o,r,t,l,s,0),p("z","y","x",1,-1,o,r,-t,l,s,1),p("x","z","y",1,1,t,o,r,i,l,2),p("x","z","y",1,-1,t,o,-r,i,l,3),p("x","y","z",1,-1,t,r,o,i,s,4),p("x","y","z",-1,-1,t,r,-o,i,s,5),this.setIndex(h),this.addAttribute("position",new bt(y,3)),this.addAttribute("normal",new bt(m,3)),this.addAttribute("uv",new bt(x,2))}function At(e,t,r,o){ut.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:o},this.fromBufferGeometry(new wt(e,t,r,o)),this.mergeVertices()}function wt(t,o,i,s){Tt.call(this),this.type="PlaneBufferGeometry",this.parameters={width:t,height:o,widthSegments:i,heightSegments:s},t=t||1,o=o||1;var l=t/2,e=o/2;i=xn(i)||1,s=xn(s)||1;var p=i+1,g=s+1,f=t/i,h=o/s,m=[],y=[],n=[],u=[];for(t=0;t<g;t++){var x=t*h-e;for(o=0;o<p;o++)y.push(o*f-l,-x,0),n.push(0,0,1),u.push(o/i),u.push(1-t/s)}for(t=0;t<s;t++)for(o=0;o<i;o++)l=o+p*(t+1),e=o+1+p*(t+1),g=o+1+p*t,m.push(o+p*t,l,g),m.push(l,e,g);this.setIndex(m),this.addAttribute("position",new bt(y,3)),this.addAttribute("normal",new bt(n,3)),this.addAttribute("uv",new bt(u,2))}function Rt(e){Ke.call(this),this.type="MeshBasicMaterial",this.color=new Ne(16777215),this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.envMap=this.alphaMap=this.specularMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.lights=this.morphTargets=this.skinning=!1,this.setValues(e)}function Lt(e){Ke.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.morphNormals=this.morphTargets=this.skinning=this.clipping=this.lights=this.fog=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}function Ct(e,t){this.origin=void 0===e?new _:e,this.direction=void 0===t?new _:t}function Pt(e,t){this.start=void 0===e?new _:e,this.end=void 0===t?new _:t}function It(e,t,r){this.a=void 0===e?new _:e,this.b=void 0===t?new _:t,this.c=void 0===r?new _:r}function Ut(e,t){pt.call(this),this.type="Mesh",this.geometry=void 0===e?new Tt:e,this.material=void 0===t?new Rt({color:16777215*Math.random()}):t,this.drawMode=0,this.updateMorphTargets()}function Dt(t,r,a,o){function i(e,t){r.buffers.color.setClear(e.r,e.g,e.b,t,o)}var e=new Ne(0),n=0,s,l,p;return{getClearColor:function(){return e},setClearColor:function(t,r){e.set(t),n=void 0===r?1:r,i(e,n)},getClearAlpha:function(){return n},setClearAlpha:function(t){n=t,i(e,n)},render:function(r,o,d,c){o=o.background,null===o?i(e,n):o&&o.isColor&&(i(o,1),c=!0),(t.autoClear||c)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),o&&o.isCubeTexture?(void 0===p&&(p=new Ut(new Mt(1,1,1),new Lt({uniforms:R.cube.uniforms,vertexShader:R.cube.vertexShader,fragmentShader:R.cube.fragmentShader,side:1,depthTest:!0,depthWrite:!1,fog:!1})),p.geometry.removeAttribute("normal"),p.geometry.removeAttribute("uv"),p.onBeforeRender=function(e,t,r){this.matrixWorld.copyPosition(r.matrixWorld)},a.update(p.geometry)),p.material.uniforms.tCube.value=o,r.push(p,p.geometry,p.material,0,null)):o&&o.isTexture&&(void 0===s&&(s=new ct(-1,1,1,-1,0,1),l=new Ut(new wt(2,2),new Rt({depthTest:!1,depthWrite:!1,fog:!1})),a.update(l.geometry)),l.material.map=o,t.renderBufferDirect(s,null,l.geometry,l.material,l,null))}}}function Nt(e,t){return e.renderOrder===t.renderOrder?e.program&&t.program&&e.program!==t.program?e.program.id-t.program.id:e.material.id===t.material.id?e.z===t.z?e.id-t.id:e.z-t.z:e.material.id-t.material.id:e.renderOrder-t.renderOrder}function Bt(e,t){return e.renderOrder===t.renderOrder?e.z===t.z?e.id-t.id:t.z-e.z:e.renderOrder-t.renderOrder}function Ft(){var t=[],r=0,a=[],o=[];return{opaque:a,transparent:o,init:function(){r=0,a.length=0,o.length=0},push:function(i,n,s,l,p){var d=t[r];void 0===d?(d={id:i.id,object:i,geometry:n,material:s,program:s.program,renderOrder:i.renderOrder,z:l,group:p},t[r]=d):(d.id=i.id,d.object=i,d.geometry=n,d.material=s,d.program=s.program,d.renderOrder=i.renderOrder,d.z=l,d.group=p),(!0===s.transparent?o:a).push(d),r++},sort:function(){1<a.length&&a.sort(Nt),1<o.length&&o.sort(Bt)}}}function zt(){var e={};return{get:function(t,r){return t=t.id+","+r.id,r=e[t],void 0===r&&(r=new Ft,e[t]=r),r},dispose:function(){e={}}}}function Gt(e,t){return yn(t[1])-yn(e[1])}function Ot(t){var r={},a=new Float32Array(8);return{update:function(o,i,e,s){var l=o.morphTargetInfluences,p=l.length;if(o=r[i.id],void 0===o){o=[];for(var d=0;d<p;d++)o[d]=[d,0];r[i.id]=o}var c=e.morphTargets&&i.morphAttributes.position;for(e=e.morphNormals&&i.morphAttributes.normal,d=0;d<p;d++){var m=o[d];0!==m[1]&&(c&&i.removeAttribute("morphTarget"+d),e&&i.removeAttribute("morphNormal"+d))}for(d=0;d<p;d++)m=o[d],m[0]=d,m[1]=l[d];for(o.sort(Gt),d=0;8>d;d++){if((m=o[d])&&(l=m[0],p=m[1])){c&&i.addAttribute("morphTarget"+d,c[l]),e&&i.addAttribute("morphNormal"+d,e[l]),a[d]=p;continue}a[d]=0}s.getUniforms().setValue(t,"morphTargetInfluences",a)}}}function Ht(t,r,a){var o,i,e;this.setMode=function(e){o=e},this.setIndex=function(t){i=t.type,e=t.bytesPerElement},this.render=function(r,n){t.drawElements(o,n,i,r*e),a.calls++,a.vertices+=n,o===t.TRIANGLES?a.faces+=n/3:o===t.POINTS&&(a.points+=n)},this.renderInstances=function(n,s,l){var p=r.get("ANGLE_instanced_arrays");null===p?console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays."):(p.drawElementsInstancedANGLE(o,l,i,s*e,n.maxInstancedCount),a.calls++,a.vertices+=l*n.maxInstancedCount,o===t.TRIANGLES?a.faces+=n.maxInstancedCount*l/3:o===t.POINTS&&(a.points+=n.maxInstancedCount*l))}}function Vt(t,r,a){var o;this.setMode=function(e){o=e},this.render=function(e,r){t.drawArrays(o,e,r),a.calls++,a.vertices+=r,o===t.TRIANGLES?a.faces+=r/3:o===t.POINTS&&(a.points+=r)},this.renderInstances=function(i,e,n){var s=r.get("ANGLE_instanced_arrays");if(null===s)console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");else{var l=i.attributes.position;l.isInterleavedBufferAttribute?(n=l.data.count,s.drawArraysInstancedANGLE(o,0,n,i.maxInstancedCount)):s.drawArraysInstancedANGLE(o,e,n,i.maxInstancedCount),a.calls++,a.vertices+=n*i.maxInstancedCount,o===t.TRIANGLES?a.faces+=i.maxInstancedCount*n/3:o===t.POINTS&&(a.points+=i.maxInstancedCount*n)}}}function kt(t,r,o){function i(e){e=e.target;var t=n[e.id];for(var a in null!==t.index&&r.remove(t.index),t.attributes)r.remove(t.attributes[a]);e.removeEventListener("dispose",i),delete n[e.id],(a=s[e.id])&&(r.remove(a),delete s[e.id]),(a=s[t.id])&&(r.remove(a),delete s[t.id]),o.geometries--}var n={},s={};return{get:function(e,t){var r=n[t.id];return r?r:(t.addEventListener("dispose",i),t.isBufferGeometry?r=t:t.isGeometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=new Tt().setFromObject(e)),r=t._bufferGeometry),n[t.id]=r,o.geometries++,r)},update:function(a){var o=a.index,i=a.attributes;for(var e in null!==o&&r.update(o,t.ELEMENT_ARRAY_BUFFER),i)r.update(i[e],t.ARRAY_BUFFER);for(e in a=a.morphAttributes,a){o=a[e],i=0;for(var n=o.length;i<n;i++)r.update(o[i],t.ARRAY_BUFFER)}},getWireframeAttribute:function(a){var o=s[a.id];if(o)return o;o=[];var i=a.index,e=a.attributes;if(null!==i){i=i.array,e=0;for(var l=i.length;e<l;e+=3){var p=i[e+0],n=i[e+1],d=i[e+2];o.push(p,n,n,d,d,p)}}else for(i=e.position.array,e=0,l=i.length/3-1;e<l;e+=3)p=e+0,n=e+1,d=e+2,o.push(p,n,n,d,d,p);return o=new(65535<Pe(o)?_t:xt)(o,1),r.update(o,t.ELEMENT_ARRAY_BUFFER),s[a.id]=o}}}function Wt(t,r){var a={};return{update:function(o){var i=r.frame,e=o.geometry,n=t.get(o,e);return a[n.id]!==i&&(e.isGeometry&&n.updateFromObject(o),t.update(n),a[n.id]=i),n},dispose:function(){a={}}}}function jt(e){e=e.split("\n");for(var t=0;t<e.length;t++)e[t]=t+1+": "+e[t];return e.join("\n")}function Xt(e,t,r){var a=e.createShader(t);return e.shaderSource(a,r),e.compileShader(a),!1===e.getShaderParameter(a,e.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==e.getShaderInfoLog(a)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",t===e.VERTEX_SHADER?"vertex":"fragment",e.getShaderInfoLog(a),jt(r)),a}function Qe(e){switch(e){case 3E3:return["Linear","( value )"];case 3001:return["sRGB","( value )"];case 3002:return["RGBE","( value )"];case 3004:return["RGBM","( value, 7.0 )"];case 3005:return["RGBM","( value, 16.0 )"];case 3006:return["RGBD","( value, 256.0 )"];case 3007:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw Error("unsupported encoding: "+e);}}function Re(e,t){return t=Qe(t),"vec4 "+e+"( vec4 value ) { return "+t[0]+"ToLinear"+t[1]+"; }"}function Yt(e,t){return t=Qe(t),"vec4 "+e+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function qt(e,t){switch(t){case 1:t="Linear";break;case 2:t="Reinhard";break;case 3:t="Uncharted2";break;case 4:t="OptimizedCineon";break;default:throw Error("unsupported toneMapping: "+t);}return"vec3 "+e+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function Zt(e,t,r){return e=e||{},[e.derivatives||t.envMapCubeUV||t.bumpMap||t.normalMap||t.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(e.fragDepth||t.logarithmicDepthBuffer)&&r.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",e.drawBuffers&&r.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(e.shaderTextureLOD||t.envMap)&&r.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Qt).join("\n")}function Jt(e){var t=[],r;for(r in e){var a=e[r];!1!==a&&t.push("#define "+r+" "+a)}return t.join("\n")}function Qt(e){return""!==e}function Kt(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights)}function Se(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}function Te(e){return e.replace(/^[ \t]*#include +<([\w\d.]+)>/gm,function(e,t){if(e=Ea[t],void 0===e)throw Error("Can not resolve #include <"+t+">");return Te(e)})}function $t(e){return e.replace(/#pragma unroll_loop[\s]+?for \( int i = (\d+); i < (\d+); i \+\+ \) \{([\s\S]+?)(?=\})\}/g,function(t,r,a,o){for(t="",r=parseInt(r);r<parseInt(a);r++)t+=o.replace(/\[ i \]/g,"[ "+r+" ]");return t})}function Ue(t,a,o,i,s,c){var y=t.context,g=i.defines,_=s.vertexShader,E=s.fragmentShader,m="SHADOWMAP_TYPE_BASIC";1===c.shadowMapType?m="SHADOWMAP_TYPE_PCF":2===c.shadowMapType&&(m="SHADOWMAP_TYPE_PCF_SOFT");var T="ENVMAP_TYPE_CUBE",S="ENVMAP_MODE_REFLECTION",u="ENVMAP_BLENDING_MULTIPLY";if(c.envMap){switch(i.envMap.mapping){case 301:case 302:T="ENVMAP_TYPE_CUBE";break;case 306:case 307:T="ENVMAP_TYPE_CUBE_UV";break;case 303:case 304:T="ENVMAP_TYPE_EQUIREC";break;case 305:T="ENVMAP_TYPE_SPHERE";}switch(i.envMap.mapping){case 302:case 304:S="ENVMAP_MODE_REFRACTION";}switch(i.combine){case 0:u="ENVMAP_BLENDING_MULTIPLY";break;case 1:u="ENVMAP_BLENDING_MIX";break;case 2:u="ENVMAP_BLENDING_ADD";}}var M=0<t.gammaFactor?t.gammaFactor:1,r=Zt(i.extensions,c,a),l=Jt(g),x=y.createProgram();i.isRawShaderMaterial?(g=[l].filter(Qt).join("\n"),0<g.length&&(g+="\n"),a=[r,l].filter(Qt).join("\n"),0<a.length&&(a+="\n")):(g=["precision "+c.precision+" float;","precision "+c.precision+" int;","#define SHADER_NAME "+s.name,l,c.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+M,"#define MAX_BONES "+c.maxBones,c.useFog&&c.fog?"#define USE_FOG":"",c.useFog&&c.fogExp?"#define FOG_EXP2":"",c.map?"#define USE_MAP":"",c.envMap?"#define USE_ENVMAP":"",c.envMap?"#define "+S:"",c.lightMap?"#define USE_LIGHTMAP":"",c.aoMap?"#define USE_AOMAP":"",c.emissiveMap?"#define USE_EMISSIVEMAP":"",c.bumpMap?"#define USE_BUMPMAP":"",c.normalMap?"#define USE_NORMALMAP":"",c.displacementMap&&c.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",c.specularMap?"#define USE_SPECULARMAP":"",c.roughnessMap?"#define USE_ROUGHNESSMAP":"",c.metalnessMap?"#define USE_METALNESSMAP":"",c.alphaMap?"#define USE_ALPHAMAP":"",c.vertexColors?"#define USE_COLOR":"",c.flatShading?"#define FLAT_SHADED":"",c.skinning?"#define USE_SKINNING":"",c.useVertexTexture?"#define BONE_TEXTURE":"",c.morphTargets?"#define USE_MORPHTARGETS":"",c.morphNormals&&!1===c.flatShading?"#define USE_MORPHNORMALS":"",c.doubleSided?"#define DOUBLE_SIDED":"",c.flipSided?"#define FLIP_SIDED":"",c.shadowMapEnabled?"#define USE_SHADOWMAP":"",c.shadowMapEnabled?"#define "+m:"",c.sizeAttenuation?"#define USE_SIZEATTENUATION":"",c.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",c.logarithmicDepthBuffer&&a.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Qt).join("\n"),a=[r,"precision "+c.precision+" float;","precision "+c.precision+" int;","#define SHADER_NAME "+s.name,l,c.alphaTest?"#define ALPHATEST "+c.alphaTest:"","#define GAMMA_FACTOR "+M,c.useFog&&c.fog?"#define USE_FOG":"",c.useFog&&c.fogExp?"#define FOG_EXP2":"",c.map?"#define USE_MAP":"",c.envMap?"#define USE_ENVMAP":"",c.envMap?"#define "+T:"",c.envMap?"#define "+S:"",c.envMap?"#define "+u:"",c.lightMap?"#define USE_LIGHTMAP":"",c.aoMap?"#define USE_AOMAP":"",c.emissiveMap?"#define USE_EMISSIVEMAP":"",c.bumpMap?"#define USE_BUMPMAP":"",c.normalMap?"#define USE_NORMALMAP":"",c.specularMap?"#define USE_SPECULARMAP":"",c.roughnessMap?"#define USE_ROUGHNESSMAP":"",c.metalnessMap?"#define USE_METALNESSMAP":"",c.alphaMap?"#define USE_ALPHAMAP":"",c.vertexColors?"#define USE_COLOR":"",c.gradientMap?"#define USE_GRADIENTMAP":"",c.flatShading?"#define FLAT_SHADED":"",c.doubleSided?"#define DOUBLE_SIDED":"",c.flipSided?"#define FLIP_SIDED":"",c.shadowMapEnabled?"#define USE_SHADOWMAP":"",c.shadowMapEnabled?"#define "+m:"",c.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",c.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",c.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",c.logarithmicDepthBuffer&&a.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",c.envMap&&a.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",0===c.toneMapping?"":"#define TONE_MAPPING",0===c.toneMapping?"":Ea.tonemapping_pars_fragment,0===c.toneMapping?"":qt("toneMapping",c.toneMapping),c.dithering?"#define DITHERING":"",c.outputEncoding||c.mapEncoding||c.envMapEncoding||c.emissiveMapEncoding?Ea.encodings_pars_fragment:"",c.mapEncoding?Re("mapTexelToLinear",c.mapEncoding):"",c.envMapEncoding?Re("envMapTexelToLinear",c.envMapEncoding):"",c.emissiveMapEncoding?Re("emissiveMapTexelToLinear",c.emissiveMapEncoding):"",c.outputEncoding?Yt("linearToOutputTexel",c.outputEncoding):"",c.depthPacking?"#define DEPTH_PACKING "+i.depthPacking:"","\n"].filter(Qt).join("\n")),_=Te(_),_=Kt(_,c),_=Se(_,c),E=Te(E),E=Kt(E,c),E=Se(E,c),_=$t(_),E=$t(E),E=a+E,_=Xt(y,y.VERTEX_SHADER,g+_),E=Xt(y,y.FRAGMENT_SHADER,E),y.attachShader(x,_),y.attachShader(x,E),void 0===i.index0AttributeName?!0===c.morphTargets&&y.bindAttribLocation(x,0,"position"):y.bindAttribLocation(x,0,i.index0AttributeName),y.linkProgram(x),c=y.getProgramInfoLog(x).trim(),s=y.getShaderInfoLog(_).trim(),m=y.getShaderInfoLog(E).trim(),S=T=!0,!1===y.getProgramParameter(x,y.LINK_STATUS)?(T=!1,console.error("THREE.WebGLProgram: shader error: ",y.getError(),"gl.VALIDATE_STATUS",y.getProgramParameter(x,y.VALIDATE_STATUS),"gl.getProgramInfoLog",c,s,m)):""===c?(""===s||""===m)&&(S=!1):console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",c),S&&(this.diagnostics={runnable:T,material:i,programLog:c,vertexShader:{log:s,prefix:g},fragmentShader:{log:m,prefix:a}}),y.deleteShader(_),y.deleteShader(E);var p;this.getUniforms=function(){return void 0===p&&(p=new Me(y,x,t)),p};var w;return this.getAttributes=function(){if(void 0===w){for(var e={},t=y.getProgramParameter(x,y.ACTIVE_ATTRIBUTES),r=0,a;r<t;r++)a=y.getActiveAttrib(x,r).name,e[a]=y.getAttribLocation(x,a);w=e}return w},this.destroy=function(){y.deleteProgram(x),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.id=wn++,this.code=o,this.usedTimes=1,this.program=x,this.vertexShader=_,this.fragmentShader=E,this}function er(t,r,a){function o(e,t){if(e)e.isTexture?r=e.encoding:e.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),r=e.texture.encoding);else var r=3E3;return 3E3===r&&t&&(r=3007),r}var i=[],s={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow"},n=["precision","supportsVertexTextures","map","mapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering"];this.getParameters=function(r,i,e,p,d,c,g){var f=s[r.type];if(g.isSkinnedMesh){var y=g.skeleton.bones;if(a.floatVertexTextures)y=1024;else{var x=hn(xn((a.maxVertexUniforms-20)/4),y.length);x<y.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+y.length+" bones. This GPU supports "+x+"."),y=0):y=x}}else y=0;x=a.precision,null!==r.precision&&(x=a.getMaxPrecision(r.precision),x!==r.precision&&console.warn("THREE.WebGLProgram.getParameters:",r.precision,"not supported, using",x,"instead."));var _=t.getRenderTarget();return{shaderID:f,precision:x,supportsVertexTextures:a.vertexTextures,outputEncoding:o(_?_.texture:null,t.gammaOutput),map:!!r.map,mapEncoding:o(r.map,t.gammaInput),envMap:!!r.envMap,envMapMode:r.envMap&&r.envMap.mapping,envMapEncoding:o(r.envMap,t.gammaInput),envMapCubeUV:!!r.envMap&&(306===r.envMap.mapping||307===r.envMap.mapping),lightMap:!!r.lightMap,aoMap:!!r.aoMap,emissiveMap:!!r.emissiveMap,emissiveMapEncoding:o(r.emissiveMap,t.gammaInput),bumpMap:!!r.bumpMap,normalMap:!!r.normalMap,displacementMap:!!r.displacementMap,roughnessMap:!!r.roughnessMap,metalnessMap:!!r.metalnessMap,specularMap:!!r.specularMap,alphaMap:!!r.alphaMap,gradientMap:!!r.gradientMap,combine:r.combine,vertexColors:r.vertexColors,fog:!!p,useFog:r.fog,fogExp:p&&p.isFogExp2,flatShading:r.flatShading,sizeAttenuation:r.sizeAttenuation,logarithmicDepthBuffer:a.logarithmicDepthBuffer,skinning:r.skinning&&0<y,maxBones:y,useVertexTexture:a.floatVertexTextures,morphTargets:r.morphTargets,morphNormals:r.morphNormals,maxMorphTargets:t.maxMorphTargets,maxMorphNormals:t.maxMorphNormals,numDirLights:i.directional.length,numPointLights:i.point.length,numSpotLights:i.spot.length,numRectAreaLights:i.rectArea.length,numHemiLights:i.hemi.length,numClippingPlanes:d,numClipIntersection:c,dithering:r.dithering,shadowMapEnabled:t.shadowMap.enabled&&g.receiveShadow&&0<e.length,shadowMapType:t.shadowMap.type,toneMapping:t.toneMapping,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:r.premultipliedAlpha,alphaTest:r.alphaTest,doubleSided:2===r.side,flipSided:1===r.side,depthPacking:void 0!==r.depthPacking&&r.depthPacking}},this.getProgramCode=function(r,a){var o=[];if(a.shaderID?o.push(a.shaderID):(o.push(r.fragmentShader),o.push(r.vertexShader)),void 0!==r.defines)for(var i in r.defines)o.push(i),o.push(r.defines[i]);for(i=0;i<n.length;i++)o.push(a[n[i]]);return o.push(r.onBeforeCompile.toString()),o.push(t.gammaOutput),o.join()},this.acquireProgram=function(e,a,o,n){for(var s=0,l=i.length,p,d;s<l;s++)if(d=i[s],d.code===n){p=d,++p.usedTimes;break}return void 0===p&&(p=new Ue(t,r,n,e,a,o),i.push(p)),p},this.releaseProgram=function(e){if(0===--e.usedTimes){var t=i.indexOf(e);i[t]=i[i.length-1],i.pop(),e.destroy()}},this.programs=i}function tr(o,t,a,i,s,d,y,e){function c(e,t){if(e.width>t||e.height>t){t/=fn(e.width,e.height);var r=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return r.width=xn(e.width*t),r.height=xn(e.height*t),r.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,r.width,r.height),console.warn("THREE.WebGLRenderer: image is too big ("+e.width+"x"+e.height+"). Resized to "+r.width+"x"+r.height,e),r}return e}function g(e){return vn.isPowerOfTwo(e.width)&&vn.isPowerOfTwo(e.height)}function m(e,t){return e.generateMipmaps&&t&&1003!==e.minFilter&&1006!==e.minFilter}function f(e){return 1003===e||1004===e||1005===e?o.NEAREST:o.LINEAR}function v(e){e=e.target,e.removeEventListener("dispose",v);a:{var t=i.get(e);if(e.image&&t.__image__webglTextureCube)o.deleteTexture(t.__image__webglTextureCube);else{if(void 0===t.__webglInit)break a;o.deleteTexture(t.__webglTexture)}i.remove(e)}e.isVideoTexture&&delete p[e.id],y.textures--}function u(t){t=t.target,t.removeEventListener("dispose",u);var r=i.get(t),a=i.get(t.texture);if(t){if(void 0!==a.__webglTexture&&o.deleteTexture(a.__webglTexture),t.depthTexture&&t.depthTexture.dispose(),t.isWebGLRenderTargetCube)for(a=0;6>a;a++)o.deleteFramebuffer(r.__webglFramebuffer[a]),r.__webglDepthbuffer&&o.deleteRenderbuffer(r.__webglDepthbuffer[a]);else o.deleteFramebuffer(r.__webglFramebuffer),r.__webglDepthbuffer&&o.deleteRenderbuffer(r.__webglDepthbuffer);i.remove(t.texture),i.remove(t)}y.textures--}function n(l,u){var n=i.get(l);if(l.isVideoTexture){var f=l.id,b=e.frame;p[f]!==b&&(p[f]=b,l.update())}if(0<l.version&&n.__version!==l.version)if(f=l.image,void 0===f)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",l);else if(!1===f.complete)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",l);else{void 0===n.__webglInit&&(n.__webglInit=!0,l.addEventListener("dispose",v),n.__webglTexture=o.createTexture(),y.textures++),a.activeTexture(o.TEXTURE0+u),a.bindTexture(o.TEXTURE_2D,n.__webglTexture),o.pixelStorei(o.UNPACK_FLIP_Y_WEBGL,l.flipY),o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,l.premultiplyAlpha),o.pixelStorei(o.UNPACK_ALIGNMENT,l.unpackAlignment);var t=c(l.image,s.maxTextureSize);(1001!==l.wrapS||1001!==l.wrapT||1003!==l.minFilter&&1006!==l.minFilter)&&!1===g(t)&&(u=t,u instanceof HTMLImageElement||u instanceof HTMLCanvasElement||u instanceof ImageBitmap?(void 0===E&&(E=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),E.width=vn.floorPowerOfTwo(u.width),E.height=vn.floorPowerOfTwo(u.height),E.getContext("2d").drawImage(u,0,0,E.width,E.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+u.width+"x"+u.height+"). Resized to "+E.width+"x"+E.height,u),t=E):t=u),u=g(t),f=d.convert(l.format),b=d.convert(l.type),_(o.TEXTURE_2D,l,u);var T=l.mipmaps;if(l.isDepthTexture){if(T=o.DEPTH_COMPONENT,1015===l.type){if(!h)throw Error("Float Depth Texture only supported in WebGL2.0");T=o.DEPTH_COMPONENT32F}else h&&(T=o.DEPTH_COMPONENT16);1026===l.format&&T===o.DEPTH_COMPONENT&&1012!==l.type&&1014!==l.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),l.type=1012,b=d.convert(l.type)),1027===l.format&&(T=o.DEPTH_STENCIL,1020!==l.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),l.type=1020,b=d.convert(l.type))),a.texImage2D(o.TEXTURE_2D,0,T,t.width,t.height,0,f,b,null)}else if(l.isDataTexture){if(0<T.length&&u){for(var x=0,S=T.length;x<S;x++)t=T[x],a.texImage2D(o.TEXTURE_2D,x,f,t.width,t.height,0,f,b,t.data);l.generateMipmaps=!1}else a.texImage2D(o.TEXTURE_2D,0,f,t.width,t.height,0,f,b,t.data);}else if(l.isCompressedTexture)for(x=0,S=T.length;x<S;x++)t=T[x],1023!==l.format&&1022!==l.format?-1<a.getCompressedTextureFormats().indexOf(f)?a.compressedTexImage2D(o.TEXTURE_2D,x,f,t.width,t.height,0,t.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):a.texImage2D(o.TEXTURE_2D,x,f,t.width,t.height,0,f,b,t.data);else if(0<T.length&&u){for(x=0,S=T.length;x<S;x++)t=T[x],a.texImage2D(o.TEXTURE_2D,x,f,f,b,t);l.generateMipmaps=!1}else a.texImage2D(o.TEXTURE_2D,0,f,f,b,t);return m(l,u)&&o.generateMipmap(o.TEXTURE_2D),n.__version=l.version,void(l.onUpdate&&l.onUpdate(l))}a.activeTexture(o.TEXTURE0+u),a.bindTexture(o.TEXTURE_2D,n.__webglTexture)}function _(e,r,a){a?(o.texParameteri(e,o.TEXTURE_WRAP_S,d.convert(r.wrapS)),o.texParameteri(e,o.TEXTURE_WRAP_T,d.convert(r.wrapT)),o.texParameteri(e,o.TEXTURE_MAG_FILTER,d.convert(r.magFilter)),o.texParameteri(e,o.TEXTURE_MIN_FILTER,d.convert(r.minFilter))):(o.texParameteri(e,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(e,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),1001===r.wrapS&&1001===r.wrapT||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",r),o.texParameteri(e,o.TEXTURE_MAG_FILTER,f(r.magFilter)),o.texParameteri(e,o.TEXTURE_MIN_FILTER,f(r.minFilter)),1003!==r.minFilter&&1006!==r.minFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",r)),(a=t.get("EXT_texture_filter_anisotropic"))&&(1015!==r.type||null!==t.get("OES_texture_float_linear"))&&(1016!==r.type||null!==t.get("OES_texture_half_float_linear"))&&(1<r.anisotropy||i.get(r).__currentAnisotropy)&&(o.texParameterf(e,a.TEXTURE_MAX_ANISOTROPY_EXT,hn(r.anisotropy,s.getMaxAnisotropy())),i.get(r).__currentAnisotropy=r.anisotropy)}function r(t,r,e,n){var s=d.convert(r.texture.format),l=d.convert(r.texture.type);a.texImage2D(n,0,s,r.width,r.height,0,s,l,null),o.bindFramebuffer(o.FRAMEBUFFER,t),o.framebufferTexture2D(o.FRAMEBUFFER,e,n,i.get(r.texture).__webglTexture,0),o.bindFramebuffer(o.FRAMEBUFFER,null)}function l(e,t){o.bindRenderbuffer(o.RENDERBUFFER,e),t.depthBuffer&&!t.stencilBuffer?(o.renderbufferStorage(o.RENDERBUFFER,o.DEPTH_COMPONENT16,t.width,t.height),o.framebufferRenderbuffer(o.FRAMEBUFFER,o.DEPTH_ATTACHMENT,o.RENDERBUFFER,e)):t.depthBuffer&&t.stencilBuffer?(o.renderbufferStorage(o.RENDERBUFFER,o.DEPTH_STENCIL,t.width,t.height),o.framebufferRenderbuffer(o.FRAMEBUFFER,o.DEPTH_STENCIL_ATTACHMENT,o.RENDERBUFFER,e)):o.renderbufferStorage(o.RENDERBUFFER,o.RGBA4,t.width,t.height),o.bindRenderbuffer(o.RENDERBUFFER,null)}var h="undefined"!==typeof WebGL2RenderingContext&&o instanceof WebGL2RenderingContext,p={},E;this.setTexture2D=n,this.setTextureCube=function(e,l){var u=i.get(e);if(6===e.image.length)if(0<e.version&&u.__version!==e.version){u.__image__webglTextureCube||(e.addEventListener("dispose",v),u.__image__webglTextureCube=o.createTexture(),y.textures++),a.activeTexture(o.TEXTURE0+l),a.bindTexture(o.TEXTURE_CUBE_MAP,u.__image__webglTextureCube),o.pixelStorei(o.UNPACK_FLIP_Y_WEBGL,e.flipY),l=e&&e.isCompressedTexture;for(var n=e.image[0]&&e.image[0].isDataTexture,r=[],f=0;6>f;f++)r[f]=l||n?n?e.image[f].image:e.image[f]:c(e.image[f],s.maxCubemapSize);var t=g(r[0]),p=d.convert(e.format),h=d.convert(e.type);for(_(o.TEXTURE_CUBE_MAP,e,t),f=0;6>f;f++)if(l)for(var x=r[f].mipmaps,b=0,E=x.length,T;b<E;b++)T=x[b],1023!==e.format&&1022!==e.format?-1<a.getCompressedTextureFormats().indexOf(p)?a.compressedTexImage2D(o.TEXTURE_CUBE_MAP_POSITIVE_X+f,b,p,T.width,T.height,0,T.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):a.texImage2D(o.TEXTURE_CUBE_MAP_POSITIVE_X+f,b,p,T.width,T.height,0,p,h,T.data);else n?a.texImage2D(o.TEXTURE_CUBE_MAP_POSITIVE_X+f,0,p,r[f].width,r[f].height,0,p,h,r[f].data):a.texImage2D(o.TEXTURE_CUBE_MAP_POSITIVE_X+f,0,p,p,h,r[f]);m(e,t)&&o.generateMipmap(o.TEXTURE_CUBE_MAP),u.__version=e.version,e.onUpdate&&e.onUpdate(e)}else a.activeTexture(o.TEXTURE0+l),a.bindTexture(o.TEXTURE_CUBE_MAP,u.__image__webglTextureCube)},this.setTextureCubeDynamic=function(t,r){a.activeTexture(o.TEXTURE0+r),a.bindTexture(o.TEXTURE_CUBE_MAP,i.get(t).__webglTexture)},this.setupRenderTarget=function(t){var s=i.get(t),e=i.get(t.texture);t.addEventListener("dispose",u),e.__webglTexture=o.createTexture(),y.textures++;var p=!0===t.isWebGLRenderTargetCube,d=g(t);if(p){s.__webglFramebuffer=[];for(var c=0;6>c;c++)s.__webglFramebuffer[c]=o.createFramebuffer()}else s.__webglFramebuffer=o.createFramebuffer();if(p){for(a.bindTexture(o.TEXTURE_CUBE_MAP,e.__webglTexture),_(o.TEXTURE_CUBE_MAP,t.texture,d),c=0;6>c;c++)r(s.__webglFramebuffer[c],t,o.COLOR_ATTACHMENT0,o.TEXTURE_CUBE_MAP_POSITIVE_X+c);m(t.texture,d)&&o.generateMipmap(o.TEXTURE_CUBE_MAP),a.bindTexture(o.TEXTURE_CUBE_MAP,null)}else a.bindTexture(o.TEXTURE_2D,e.__webglTexture),_(o.TEXTURE_2D,t.texture,d),r(s.__webglFramebuffer,t,o.COLOR_ATTACHMENT0,o.TEXTURE_2D),m(t.texture,d)&&o.generateMipmap(o.TEXTURE_2D),a.bindTexture(o.TEXTURE_2D,null);if(t.depthBuffer){if(s=i.get(t),e=!0===t.isWebGLRenderTargetCube,t.depthTexture){if(e)throw Error("target.depthTexture not supported in Cube render targets");if(t&&t.isWebGLRenderTargetCube)throw Error("Depth Texture with cube render targets is not supported");if(o.bindFramebuffer(o.FRAMEBUFFER,s.__webglFramebuffer),!t.depthTexture||!t.depthTexture.isDepthTexture)throw Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");if(i.get(t.depthTexture).__webglTexture&&t.depthTexture.image.width===t.width&&t.depthTexture.image.height===t.height||(t.depthTexture.image.width=t.width,t.depthTexture.image.height=t.height,t.depthTexture.needsUpdate=!0),n(t.depthTexture,0),s=i.get(t.depthTexture).__webglTexture,1026===t.depthTexture.format)o.framebufferTexture2D(o.FRAMEBUFFER,o.DEPTH_ATTACHMENT,o.TEXTURE_2D,s,0);else if(1027===t.depthTexture.format)o.framebufferTexture2D(o.FRAMEBUFFER,o.DEPTH_STENCIL_ATTACHMENT,o.TEXTURE_2D,s,0);else throw Error("Unknown depthTexture format")}else if(e)for(s.__webglDepthbuffer=[],e=0;6>e;e++)o.bindFramebuffer(o.FRAMEBUFFER,s.__webglFramebuffer[e]),s.__webglDepthbuffer[e]=o.createRenderbuffer(),l(s.__webglDepthbuffer[e],t);else o.bindFramebuffer(o.FRAMEBUFFER,s.__webglFramebuffer),s.__webglDepthbuffer=o.createRenderbuffer(),l(s.__webglDepthbuffer,t);o.bindFramebuffer(o.FRAMEBUFFER,null)}},this.updateRenderTargetMipmap=function(t){var r=t.texture,e=g(t);m(r,e)&&(t=t.isWebGLRenderTargetCube?o.TEXTURE_CUBE_MAP:o.TEXTURE_2D,r=i.get(r).__webglTexture,a.bindTexture(t,r),o.generateMipmap(t),a.bindTexture(t,null))}}function rr(){var e={};return{get:function(t){t=t.uuid;var r=e[t];return void 0===r&&(r={},e[t]=r),r},remove:function(t){delete e[t.uuid]},update:function(t,r,a){e[t.uuid][r]=a},dispose:function(){e={}}}}function ar(t,a,o){function i(r,a,o){var i=new Uint8Array(4),e=t.createTexture();for(t.bindTexture(r,e),t.texParameteri(r,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(r,t.TEXTURE_MAG_FILTER,t.NEAREST),r=0;r<o;r++)t.texImage2D(a+r,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,i);return e}function s(e){!0!==B[e]&&(t.enable(e),B[e]=!0)}function x(e){!1!==B[e]&&(t.disable(e),B[e]=!1)}function _(e,r,a,i,l,p,d,n){0===e?x(t.BLEND):s(t.BLEND),5===e?(l=l||r,p=p||a,d=d||i,(r!==N||l!==C)&&(t.blendEquationSeparate(o.convert(r),o.convert(l)),N=r,C=l),(a!==Z||i!==F||p!==y||d!==Q)&&(t.blendFuncSeparate(o.convert(a),o.convert(i),o.convert(p),o.convert(d)),Z=a,F=i,y=p,Q=d)):((e!==G||n!==D)&&(2===e?n?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ONE,t.ONE,t.ONE,t.ONE)):(t.blendEquation(t.FUNC_ADD),t.blendFunc(t.SRC_ALPHA,t.ONE)):3===e?n?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ZERO,t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ONE_MINUS_SRC_ALPHA)):(t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ZERO,t.ONE_MINUS_SRC_COLOR)):4===e?n?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA)):(t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ZERO,t.SRC_COLOR)):n?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA)):(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA))),Q=y=C=F=Z=N=null),G=e,D=n}function E(e){z!==e&&(e?t.frontFace(t.CW):t.frontFace(t.CCW),z=e)}function d(e){0===e?x(t.CULL_FACE):(s(t.CULL_FACE),e!==I&&(1===e?t.cullFace(t.BACK):2===e?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))),I=e}function U(e,r,a){e?(s(t.POLYGON_OFFSET_FILL),T!==r||K!==a)&&(t.polygonOffset(r,a),T=r,K=a):x(t.POLYGON_OFFSET_FILL)}function W(e){void 0===e&&(e=t.TEXTURE0+L-1),S!==e&&(t.activeTexture(e),S=e)}var X=new function(){var r=!1,a=new j,o=null,i=new j(0,0,0,0);return{setMask:function(e){o===e||r||(t.colorMask(e,e,e,e),o=e)},setLocked:function(e){r=e},setClear:function(e,r,o,n,s){!0===s&&(e*=n,r*=n,o*=n),a.set(e,r,o,n),!1===i.equals(a)&&(t.clearColor(e,r,o,n),i.copy(a))},reset:function(){r=!1,o=null,i.set(-1,0,0,0)}}},Y=new function(){var e=!1,r=null,a=null,o=null;return{setTest:function(e){e?s(t.DEPTH_TEST):x(t.DEPTH_TEST)},setMask:function(a){r===a||e||(t.depthMask(a),r=a)},setFunc:function(e){a!==e&&(e?0===e?t.depthFunc(t.NEVER):1===e?t.depthFunc(t.ALWAYS):2===e?t.depthFunc(t.LESS):3===e?t.depthFunc(t.LEQUAL):4===e?t.depthFunc(t.EQUAL):5===e?t.depthFunc(t.GEQUAL):6===e?t.depthFunc(t.GREATER):7===e?t.depthFunc(t.NOTEQUAL):t.depthFunc(t.LEQUAL):t.depthFunc(t.LEQUAL),a=e)},setLocked:function(t){e=t},setClear:function(e){o!==e&&(t.clearDepth(e),o=e)},reset:function(){e=!1,o=a=r=null}}},c=new function(){var e=!1,r=null,a=null,o=null,i=null,l=null,p=null,m=null,n=null;return{setTest:function(e){e?s(t.STENCIL_TEST):x(t.STENCIL_TEST)},setMask:function(a){r===a||e||(t.stencilMask(a),r=a)},setFunc:function(r,n,s){(a!==r||o!==n||i!==s)&&(t.stencilFunc(r,n,s),a=r,o=n,i=s)},setOp:function(e,r,a){(l!==e||p!==r||m!==a)&&(t.stencilOp(e,r,a),l=e,p=r,m=a)},setLocked:function(t){e=t},setClear:function(e){n!==e&&(t.clearStencil(e),n=e)},reset:function(){e=!1,n=m=p=l=i=o=a=r=null}}},b=t.getParameter(t.MAX_VERTEX_ATTRIBS),r=new Uint8Array(b),l=new Uint8Array(b),p=new Uint8Array(b),B={},w=null,A=null,G=null,N=null,Z=null,F=null,C=null,y=null,Q=null,D=!1,z=null,I=null,H=null,T=null,K=null,L=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS),P=!1;b=0,b=t.getParameter(t.VERSION),-1===b.indexOf("WebGL")?-1!==b.indexOf("OpenGL ES")&&(b=parseFloat(/^OpenGL ES ([0-9])/.exec(b)[1]),P=2<=b):(b=parseFloat(/^WebGL ([0-9])/.exec(b)[1]),P=1<=b);var S=null,M={},O=new j,R=new j,J={};return J[t.TEXTURE_2D]=i(t.TEXTURE_2D,t.TEXTURE_2D,1),J[t.TEXTURE_CUBE_MAP]=i(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),X.setClear(0,0,0,1),Y.setClear(1),c.setClear(0),s(t.DEPTH_TEST),Y.setFunc(3),E(!1),d(1),s(t.CULL_FACE),s(t.BLEND),_(1),{buffers:{color:X,depth:Y,stencil:c},initAttributes:function(){for(var e=0,t=r.length;e<t;e++)r[e]=0},enableAttribute:function(e){r[e]=1,0===l[e]&&(t.enableVertexAttribArray(e),l[e]=1),0!==p[e]&&(a.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(e,0),p[e]=0)},enableAttributeAndDivisor:function(e,o){r[e]=1,0===l[e]&&(t.enableVertexAttribArray(e),l[e]=1),p[e]!==o&&(a.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(e,o),p[e]=o)},disableUnusedAttributes:function(){for(var e=0,a=l.length;e!==a;++e)l[e]!==r[e]&&(t.disableVertexAttribArray(e),l[e]=0)},enable:s,disable:x,getCompressedTextureFormats:function(){if(null===w&&(w=[],a.get("WEBGL_compressed_texture_pvrtc")||a.get("WEBGL_compressed_texture_s3tc")||a.get("WEBGL_compressed_texture_etc1")||a.get("WEBGL_compressed_texture_astc")))for(var e=t.getParameter(t.COMPRESSED_TEXTURE_FORMATS),r=0;r<e.length;r++)w.push(e[r]);return w},useProgram:function(e){return A!==e&&(t.useProgram(e),A=e,!0)},setBlending:_,setMaterial:function(e,r){2===e.side?x(t.CULL_FACE):s(t.CULL_FACE);var a=1===e.side;r&&(a=!a),E(a),!0===e.transparent?_(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha):_(0),Y.setFunc(e.depthFunc),Y.setTest(e.depthTest),Y.setMask(e.depthWrite),X.setMask(e.colorWrite),U(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits)},setFlipSided:E,setCullFace:d,setLineWidth:function(e){e!==H&&(P&&t.lineWidth(e),H=e)},setPolygonOffset:U,setScissorTest:function(e){e?s(t.SCISSOR_TEST):x(t.SCISSOR_TEST)},activeTexture:W,bindTexture:function(e,r){null===S&&W();var a=M[S];void 0===a&&(a={type:void 0,texture:void 0},M[S]=a),(a.type!==e||a.texture!==r)&&(t.bindTexture(e,r||J[e]),a.type=e,a.texture=r)},compressedTexImage2D:function(){try{t.compressedTexImage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{t.texImage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(e){!1===O.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),O.copy(e))},viewport:function(e){!1===R.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),R.copy(e))},reset:function(){for(var e=0;e<l.length;e++)1===l[e]&&(t.disableVertexAttribArray(e),l[e]=0);B={},S=w=null,M={},I=z=G=A=null,X.reset(),Y.reset(),c.reset()}}}function or(t,a,o){function i(e){if("highp"===e){if(0<t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision&&0<t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision)return"highp";e="mediump"}return"mediump"===e&&0<t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision&&0<t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision?"mediump":"lowp"}var s=void 0===o.precision?"highp":o.precision,p=i(s),y;p!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",p,"instead."),s=p),o=!0===o.logarithmicDepthBuffer,p=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);var e=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),x=t.getParameter(t.MAX_TEXTURE_SIZE),_=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),b=t.getParameter(t.MAX_VERTEX_ATTRIBS),E=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),T=t.getParameter(t.MAX_VARYING_VECTORS),S=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),M=0<e,A=!!a.get("OES_texture_float");return{getMaxAnisotropy:function(){if(void 0!==y)return y;var e=a.get("EXT_texture_filter_anisotropic");return y=null===e?0:t.getParameter(e.MAX_TEXTURE_MAX_ANISOTROPY_EXT)},getMaxPrecision:i,precision:s,logarithmicDepthBuffer:o,maxTextures:p,maxVertexTextures:e,maxTextureSize:x,maxCubemapSize:_,maxAttributes:b,maxVertexUniforms:E,maxVaryings:T,maxFragmentUniforms:S,vertexTextures:M,floatFragmentTextures:A,floatVertexTextures:M&&A}}function ir(e,t,r,a){dt.call(this),this.type="PerspectiveCamera",this.fov=void 0===e?50:e,this.zoom=1,this.near=void 0===r?.1:r,this.far=void 0===a?2E3:a,this.focus=10,this.aspect=void 0===t?1:t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function nr(e){ir.call(this),this.cameras=e||[]}function sr(t){function r(){if(null!==s&&s.isPresenting){var r=s.getEyeParameters("left"),i=r.renderWidth;r=r.renderHeight,n=t.getPixelRatio(),a=t.getSize(),t.setDrawingBufferSize(2*i,r,1)}else o.enabled&&t.setDrawingBufferSize(a.width,a.height,n)}var o=this,s=null,l=null,e=null,p=new i,d=new i;"undefined"!==typeof window&&"VRFrameData"in window&&(l=new window.VRFrameData);var c=new i,g=new ir;g.bounds=new j(0,0,.5,1),g.layers.enable(1);var m=new ir;m.bounds=new j(.5,0,.5,1),m.layers.enable(2);var f=new nr([g,m]);f.layers.enable(1),f.layers.enable(2);var a,n;"undefined"!==typeof window&&window.addEventListener("vrdisplaypresentchange",r,!1),this.enabled=!1,this.userHeight=1.6,this.getDevice=function(){return s},this.setDevice=function(e){void 0!==e&&(s=e)},this.setPoseTarget=function(t){void 0!==t&&(e=t)},this.getCamera=function(t){if(null===s)return t;s.depthNear=t.near,s.depthFar=t.far,s.getFrameData(l);var r=l.pose,a=null===e?t:e;return(null===r.position?a.position.set(0,0,0):a.position.fromArray(r.position),null!==r.orientation&&a.quaternion.fromArray(r.orientation),(r=s.stageParameters)?p.fromArray(r.sittingToStandingTransform):p.makeTranslation(0,o.userHeight,0),a.position.applyMatrix4(p),a.updateMatrixWorld(),!1===s.isPresenting)?t:(g.near=t.near,m.near=t.near,g.far=t.far,m.far=t.far,f.matrixWorld.copy(t.matrixWorld),f.matrixWorldInverse.copy(t.matrixWorldInverse),g.matrixWorldInverse.fromArray(l.leftViewMatrix),m.matrixWorldInverse.fromArray(l.rightViewMatrix),d.getInverse(p),g.matrixWorldInverse.multiply(d),m.matrixWorldInverse.multiply(d),t=a.parent,null!==t&&(c.getInverse(t.matrixWorld),g.matrixWorldInverse.multiply(c),m.matrixWorldInverse.multiply(c)),g.matrixWorld.getInverse(g.matrixWorldInverse),m.matrixWorld.getInverse(m.matrixWorldInverse),g.projectionMatrix.fromArray(l.leftProjectionMatrix),m.projectionMatrix.fromArray(l.rightProjectionMatrix),f.projectionMatrix.copy(g.projectionMatrix),t=s.getLayers(),t.length&&(t=t[0],null!==t.leftBounds&&4===t.leftBounds.length&&g.bounds.fromArray(t.leftBounds),null!==t.rightBounds&&4===t.rightBounds.length&&m.bounds.fromArray(t.rightBounds)),f)},this.getStandingMatrix=function(){return p},this.submitFrame=function(){s&&s.isPresenting&&s.submitFrame()},this.dispose=function(){"undefined"!==typeof window&&window.removeEventListener("vrdisplaypresentchange",r)}}function Ve(e){var t={};return{get:function(r){if(void 0!==t[r])return t[r];switch(r){case"WEBGL_depth_texture":var a=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":a=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":a=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":a=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case"WEBGL_compressed_texture_etc1":a=e.getExtension("WEBGL_compressed_texture_etc1");break;default:a=e.getExtension(r);}return null===a&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),t[r]=a}}}function lr(){function r(){p.value!==i&&(p.value=i,p.needsUpdate=0<s),t.numPlanes=s,t.numIntersection=0}function o(r,a,o,i){var e=null===r?0:r.length,s=null;if(0!==e){if(s=p.value,!0!==i||null===s)for(i=o+4*e,a=a.matrixWorldInverse,l.getNormalMatrix(a),(null===s||s.length<i)&&(s=new Float32Array(i)),i=0;i!==e;++i,o+=4)n.copy(r[i]).applyMatrix4(a,l),n.normal.toArray(s,o),s[o+3]=n.constant;p.value=s,p.needsUpdate=!0}return t.numPlanes=e,s}var t=this,i=null,s=0,e=!1,a=!1,n=new ot,l=new u,p={value:null,needsUpdate:!1};this.uniform=p,this.numIntersection=this.numPlanes=0,this.init=function(t,r,a){var n=0!==t.length||r||0!==s||e;return e=r,i=o(t,a,0),s=t.length,n},this.beginShadows=function(){a=!0,o(null)},this.endShadows=function(){a=!1,r()},this.setState=function(d,c,m,u,g,l){if(!e||null===d||0===d.length||a&&!m)a?o(null):r();else{m=a?0:s;var t=4*m,n=g.clippingState||null;for(p.value=n,n=o(d,u,t,l),d=0;d!==t;++d)n[d]=i[d];g.clippingState=n,this.numIntersection=c?this.numPlanes:0,this.numPlanes+=m}}}function pr(e,t){return{convert:function(r){if(1E3===r)return e.REPEAT;if(1001===r)return e.CLAMP_TO_EDGE;if(1002===r)return e.MIRRORED_REPEAT;if(1003===r)return e.NEAREST;if(1004===r)return e.NEAREST_MIPMAP_NEAREST;if(1005===r)return e.NEAREST_MIPMAP_LINEAR;if(1006===r)return e.LINEAR;if(1007===r)return e.LINEAR_MIPMAP_NEAREST;if(1008===r)return e.LINEAR_MIPMAP_LINEAR;if(1009===r)return e.UNSIGNED_BYTE;if(1017===r)return e.UNSIGNED_SHORT_4_4_4_4;if(1018===r)return e.UNSIGNED_SHORT_5_5_5_1;if(1019===r)return e.UNSIGNED_SHORT_5_6_5;if(1010===r)return e.BYTE;if(1011===r)return e.SHORT;if(1012===r)return e.UNSIGNED_SHORT;if(1013===r)return e.INT;if(1014===r)return e.UNSIGNED_INT;if(1015===r)return e.FLOAT;if(1016===r){var a=t.get("OES_texture_half_float");if(null!==a)return a.HALF_FLOAT_OES}if(1021===r)return e.ALPHA;if(1022===r)return e.RGB;if(1023===r)return e.RGBA;if(1024===r)return e.LUMINANCE;if(1025===r)return e.LUMINANCE_ALPHA;if(1026===r)return e.DEPTH_COMPONENT;if(1027===r)return e.DEPTH_STENCIL;if(100===r)return e.FUNC_ADD;if(101===r)return e.FUNC_SUBTRACT;if(102===r)return e.FUNC_REVERSE_SUBTRACT;if(200===r)return e.ZERO;if(201===r)return e.ONE;if(202===r)return e.SRC_COLOR;if(203===r)return e.ONE_MINUS_SRC_COLOR;if(204===r)return e.SRC_ALPHA;if(205===r)return e.ONE_MINUS_SRC_ALPHA;if(206===r)return e.DST_ALPHA;if(207===r)return e.ONE_MINUS_DST_ALPHA;if(208===r)return e.DST_COLOR;if(209===r)return e.ONE_MINUS_DST_COLOR;if(210===r)return e.SRC_ALPHA_SATURATE;if((33776===r||33777===r||33778===r||33779===r)&&(a=t.get("WEBGL_compressed_texture_s3tc"),null!==a)){if(33776===r)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===r)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===r)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===r)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((35840===r||35841===r||35842===r||35843===r)&&(a=t.get("WEBGL_compressed_texture_pvrtc"),null!==a)){if(35840===r)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===r)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===r)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===r)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===r&&(a=t.get("WEBGL_compressed_texture_etc1"),null!==a))return a.COMPRESSED_RGB_ETC1_WEBGL;if((37808===r||37809===r||37810===r||37811===r||37812===r||37813===r||37814===r||37815===r||37816===r||37817===r||37818===r||37819===r||37820===r||37821===r)&&(a=t.get("WEBGL_compressed_texture_astc"),null!==a))return r;if((103===r||104===r)&&(a=t.get("EXT_blend_minmax"),null!==a)){if(103===r)return a.MIN_EXT;if(104===r)return a.MAX_EXT}return 1020===r&&(a=t.get("WEBGL_depth_texture"),null!==a)?a.UNSIGNED_INT_24_8_WEBGL:0}}}function We(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];switch(t.type){case"DirectionalLight":var r={direction:new _,color:new Ne,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new o};break;case"SpotLight":r={position:new _,direction:new _,color:new Ne,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new o};break;case"PointLight":r={position:new _,color:new Ne,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new o,shadowCameraNear:1,shadowCameraFar:1E3};break;case"HemisphereLight":r={direction:new _,skyColor:new Ne,groundColor:new Ne};break;case"RectAreaLight":r={color:new Ne,position:new _,halfWidth:new _,halfHeight:new _};}return e[t.id]=r}}}function dr(){var r=new We,a={id:Rn++,hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},o=new _,s=new i,d=new i;return{setup:function(e,i,c){var g=0,f=0,m=0,h=0,n=0,u=0,y=0,l=0;c=c.matrixWorldInverse;for(var t=0,p=e.length;t<p;t++){var x=e[t],v=x.color,_=x.intensity,b=x.distance,E=x.shadow&&x.shadow.map?x.shadow.map.texture:null;if(x.isAmbientLight)g+=v.r*_,f+=v.g*_,m+=v.b*_;else if(x.isDirectionalLight){var T=r.get(x);T.color.copy(x.color).multiplyScalar(x.intensity),T.direction.setFromMatrixPosition(x.matrixWorld),o.setFromMatrixPosition(x.target.matrixWorld),T.direction.sub(o),T.direction.transformDirection(c),(T.shadow=x.castShadow)&&(v=x.shadow,T.shadowBias=v.bias,T.shadowRadius=v.radius,T.shadowMapSize=v.mapSize),a.directionalShadowMap[h]=E,a.directionalShadowMatrix[h]=x.shadow.matrix,a.directional[h]=T,h++}else x.isSpotLight?(T=r.get(x),T.position.setFromMatrixPosition(x.matrixWorld),T.position.applyMatrix4(c),T.color.copy(v).multiplyScalar(_),T.distance=b,T.direction.setFromMatrixPosition(x.matrixWorld),o.setFromMatrixPosition(x.target.matrixWorld),T.direction.sub(o),T.direction.transformDirection(c),T.coneCos=gn(x.angle),T.penumbraCos=gn(x.angle*(1-x.penumbra)),T.decay=0===x.distance?0:x.decay,(T.shadow=x.castShadow)&&(v=x.shadow,T.shadowBias=v.bias,T.shadowRadius=v.radius,T.shadowMapSize=v.mapSize),a.spotShadowMap[u]=E,a.spotShadowMatrix[u]=x.shadow.matrix,a.spot[u]=T,u++):x.isRectAreaLight?(T=r.get(x),T.color.copy(v).multiplyScalar(_),T.position.setFromMatrixPosition(x.matrixWorld),T.position.applyMatrix4(c),d.identity(),s.copy(x.matrixWorld),s.premultiply(c),d.extractRotation(s),T.halfWidth.set(.5*x.width,0,0),T.halfHeight.set(0,.5*x.height,0),T.halfWidth.applyMatrix4(d),T.halfHeight.applyMatrix4(d),a.rectArea[y]=T,y++):x.isPointLight?(T=r.get(x),T.position.setFromMatrixPosition(x.matrixWorld),T.position.applyMatrix4(c),T.color.copy(x.color).multiplyScalar(x.intensity),T.distance=x.distance,T.decay=0===x.distance?0:x.decay,(T.shadow=x.castShadow)&&(v=x.shadow,T.shadowBias=v.bias,T.shadowRadius=v.radius,T.shadowMapSize=v.mapSize,T.shadowCameraNear=v.camera.near,T.shadowCameraFar=v.camera.far),a.pointShadowMap[n]=E,a.pointShadowMatrix[n]=x.shadow.matrix,a.point[n]=T,n++):x.isHemisphereLight&&(T=r.get(x),T.direction.setFromMatrixPosition(x.matrixWorld),T.direction.transformDirection(c),T.direction.normalize(),T.skyColor.copy(x.color).multiplyScalar(_),T.groundColor.copy(x.groundColor).multiplyScalar(_),a.hemi[l]=T,l++)}a.ambient[0]=g,a.ambient[1]=f,a.ambient[2]=m,a.directional.length=h,a.spot.length=u,a.rectArea.length=y,a.point.length=n,a.hemi.length=l,a.hash=a.id+","+h+","+n+","+u+","+y+","+l+","+i.length},state:a}}function cr(){var e=new dr,t=[],r=[],o=[];return{init:function(){t.length=0,r.length=0,o.length=0},state:{lightsArray:t,shadowsArray:r,spritesArray:o,lights:e},setupLights:function(a){e.setup(t,r,a)},pushLight:function(e){t.push(e)},pushShadow:function(e){r.push(e)},pushSprite:function(e){o.push(e)}}}function mr(){var e={};return{get:function(t,r){return t=t.id+","+r.id,r=e[t],void 0===r&&(r=new cr,e[t]=r),r},dispose:function(){e={}}}}function ur(r){function a(){E=new Ve(ye),E.get("WEBGL_depth_texture"),E.get("OES_texture_float"),E.get("OES_texture_float_linear"),E.get("OES_texture_half_float"),E.get("OES_texture_half_float_linear"),E.get("OES_standard_derivatives"),E.get("OES_element_index_uint"),E.get("ANGLE_instanced_arrays"),Ue=new pr(ye,E),xe=new or(ye,E,r),ve=new ar(ye,E,Ue),ve.scissor(ae.copy(se).multiplyScalar(ne)),ve.viewport(O.copy(Q).multiplyScalar(ne)),_e=new rr,W=new tr(ye,E,ve,_e,xe,Ue,fe,he),be=new Oe(ye),Ee=new kt(ye,be,fe),Te=new Wt(Ee,he),Le=new Ot(ye),Se=new er(D,E,xe),Ae=new zt,we=new mr,Re=new Dt(D,ve,Ee,B),Ce=new Vt(ye,E,he),Pe=new Ht(ye,E,he),Ie=new Je(D,ye,ve,W,xe),D.info.programs=Se.programs,D.context=ye,D.capabilities=xe,D.extensions=E,D.properties=_e,D.renderLists=Ae,D.state=ve}function o(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),z=!0}function s(){console.log("THREE.WebGLRenderer: Context Restored."),z=!1,a()}function p(t){t=t.target,t.removeEventListener("dispose",p),e(t),_e.remove(t)}function e(e){var t=_e.get(e).program;e.program=void 0,void 0!==t&&Se.releaseProgram(t)}function d(e,t,r){e.render(function(e){D.renderBufferImmediate(e,t,r)})}function c(){var e=De.getDevice();e&&e.isPresenting?e.requestAnimationFrame(g):window.requestAnimationFrame(g)}function g(e){!1!==Be&&(Fe(e),c())}function S(t,r,a){if(!1!==t.visible){if(t.layers.test(r.layers))if(t.isLight)y.pushLight(t),t.castShadow&&y.pushShadow(t);else if(t.isSprite)t.frustumCulled&&!pe.intersectsSprite(t)||y.pushSprite(t);else if(t.isImmediateRenderObject)a&&ge.setFromMatrixPosition(t.matrixWorld).applyMatrix4(ue),ee.push(t,null,t.material,ge.z,null);else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.update(),!t.frustumCulled||pe.intersectsObject(t))){a&&ge.setFromMatrixPosition(t.matrixWorld).applyMatrix4(ue);var o=Te.update(t),i=t.material;if(Array.isArray(i))for(var e=o.groups,s=0,l=e.length;s<l;s++){var p=e[s],d=i[p.materialIndex];d&&d.visible&&ee.push(t,o,d,ge.z,p)}else i.visible&&ee.push(t,o,i,ge.z,null)}for(t=t.children,s=0,l=t.length;s<l;s++)S(t[s],r,a)}}function m(t,a,o,i){for(var n=0,e=t.length;n<e;n++){var s=t[n],p=s.object,d=s.geometry,c=void 0===i?s.material:i;if(s=s.group,o.isArrayCamera){M=o;for(var m=o.cameras,g=0,u=m.length,l;g<u;g++)if(l=m[g],p.layers.test(l.layers)){var h=l.bounds;ve.viewport(O.set(h.x*oe,h.y*ie,h.z*oe,h.w*ie).multiplyScalar(ne)),f(p,a,l,d,c,s)}}else M=null,f(p,a,o,d,c,s)}}function f(t,r,a,o,i,e){if(t.onBeforeRender(D,r,a,o,i,e),y=we.get(r,M||a),t.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),t.isImmediateRenderObject){var n=t.isMesh&&0>t.matrixWorld.determinant();ve.setMaterial(i,n),n=X(a,r.fog,i,t),T="",d(t,n,i)}else D.renderBufferDirect(a,r.fog,o,i,t,e);t.onAfterRender(D,r,a,o,i,e),y=we.get(r,M||a)}function P(t,r,a){var o=_e.get(t),i=y.state.lights;a=Se.getParameters(t,i.state,y.state.shadowsArray,r,de.numPlanes,de.numIntersection,a);var n=Se.getProgramCode(t,a),s=o.program,l=!0;if(void 0===s)t.addEventListener("dispose",p);else if(s.code!==n)e(t);else{if(o.lightsHash!==i.state.hash)_e.update(t,"lightsHash",i.state.hash);else if(void 0!==a.shaderID)return;l=!1}if(l&&(a.shaderID?(s=R[a.shaderID],o.shader={name:t.type,uniforms:I.clone(s.uniforms),vertexShader:s.vertexShader,fragmentShader:s.fragmentShader}):o.shader={name:t.type,uniforms:t.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader},t.onBeforeCompile(o.shader),s=Se.acquireProgram(t,o.shader,a,n),o.program=s,t.program=s),a=s.getAttributes(),t.morphTargets)for(n=t.numSupportedMorphTargets=0;n<D.maxMorphTargets;n++)0<=a["morphTarget"+n]&&t.numSupportedMorphTargets++;if(t.morphNormals)for(n=t.numSupportedMorphNormals=0;n<D.maxMorphNormals;n++)0<=a["morphNormal"+n]&&t.numSupportedMorphNormals++;a=o.shader.uniforms,(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(o.numClippingPlanes=de.numPlanes,o.numIntersection=de.numIntersection,a.clippingPlanes=de.uniform),o.fog=r,o.lightsHash=i.state.hash,t.lights&&(a.ambientLightColor.value=i.state.ambient,a.directionalLights.value=i.state.directional,a.spotLights.value=i.state.spot,a.rectAreaLights.value=i.state.rectArea,a.pointLights.value=i.state.point,a.hemisphereLights.value=i.state.hemi,a.directionalShadowMap.value=i.state.directionalShadowMap,a.directionalShadowMatrix.value=i.state.directionalShadowMatrix,a.spotShadowMap.value=i.state.spotShadowMap,a.spotShadowMatrix.value=i.state.spotShadowMatrix,a.pointShadowMap.value=i.state.pointShadowMap,a.pointShadowMatrix.value=i.state.pointShadowMatrix),t=o.program.getUniforms(),t=Me.seqWithValue(t.seq,a),o.uniformsList=t}function X(t,r,a,o){U=0;var i=_e.get(a),e=y.state.lights;ce&&(me||t!==re)&&de.setState(a.clippingPlanes,a.clipIntersection,a.clipShadows,t,i,t===re&&a.id===L),!1===a.needsUpdate&&(void 0===i.program?a.needsUpdate=!0:a.fog&&i.fog!==r?a.needsUpdate=!0:a.lights&&i.lightsHash!==e.state.hash?a.needsUpdate=!0:void 0===i.numClippingPlanes||i.numClippingPlanes===de.numPlanes&&i.numIntersection===de.numIntersection||(a.needsUpdate=!0)),a.needsUpdate&&(P(a,r,o),a.needsUpdate=!1);var s=!1,p=!1,d=!1;e=i.program;var c=e.getUniforms(),m=i.shader.uniforms;if(ve.useProgram(e.program)&&(d=p=s=!0),a.id!==L&&(L=a.id,p=!0),(s||t!==re)&&(c.setValue(ye,"projectionMatrix",t.projectionMatrix),xe.logarithmicDepthBuffer&&c.setValue(ye,"logDepthBufFC",2/(un(t.far+1)/mn)),re!==(M||t)&&(re=M||t,d=p=!0),(a.isShaderMaterial||a.isMeshPhongMaterial||a.isMeshStandardMaterial||a.envMap)&&(s=c.map.cameraPosition,void 0!==s&&s.setValue(ye,ge.setFromMatrixPosition(t.matrixWorld))),(a.isMeshPhongMaterial||a.isMeshLambertMaterial||a.isMeshBasicMaterial||a.isMeshStandardMaterial||a.isShaderMaterial||a.skinning)&&c.setValue(ye,"viewMatrix",t.matrixWorldInverse)),a.skinning&&(c.setOptional(ye,o,"bindMatrix"),c.setOptional(ye,o,"bindMatrixInverse"),t=o.skeleton))if(s=t.bones,xe.floatVertexTextures){if(void 0===t.boneTexture){s=cn(4*s.length),s=vn.ceilPowerOfTwo(s),s=fn(s,4);var n=new Float32Array(4*(s*s));n.set(t.boneMatrices);var g=new l(n,s,s,1023,1015);g.needsUpdate=!0,t.boneMatrices=n,t.boneTexture=g,t.boneTextureSize=s}c.setValue(ye,"boneTexture",t.boneTexture),c.setValue(ye,"boneTextureSize",t.boneTextureSize)}else c.setOptional(ye,t,"boneMatrices");return p&&(c.setValue(ye,"toneMappingExposure",D.toneMappingExposure),c.setValue(ye,"toneMappingWhitePoint",D.toneMappingWhitePoint),a.lights&&(p=d,m.ambientLightColor.needsUpdate=p,m.directionalLights.needsUpdate=p,m.pointLights.needsUpdate=p,m.spotLights.needsUpdate=p,m.rectAreaLights.needsUpdate=p,m.hemisphereLights.needsUpdate=p),r&&a.fog&&(m.fogColor.value=r.color,r.isFog?(m.fogNear.value=r.near,m.fogFar.value=r.far):r.isFogExp2&&(m.fogDensity.value=r.density)),a.isMeshBasicMaterial?u(m,a):a.isMeshLambertMaterial?(u(m,a),a.emissiveMap&&(m.emissiveMap.value=a.emissiveMap)):a.isMeshPhongMaterial?(u(m,a),a.isMeshToonMaterial?($(m,a),a.gradientMap&&(m.gradientMap.value=a.gradientMap)):$(m,a)):a.isMeshStandardMaterial?(u(m,a),a.isMeshPhysicalMaterial&&(m.clearCoat.value=a.clearCoat,m.clearCoatRoughness.value=a.clearCoatRoughness),m.roughness.value=a.roughness,m.metalness.value=a.metalness,a.roughnessMap&&(m.roughnessMap.value=a.roughnessMap),a.metalnessMap&&(m.metalnessMap.value=a.metalnessMap),a.emissiveMap&&(m.emissiveMap.value=a.emissiveMap),a.bumpMap&&(m.bumpMap.value=a.bumpMap,m.bumpScale.value=a.bumpScale),a.normalMap&&(m.normalMap.value=a.normalMap,m.normalScale.value.copy(a.normalScale)),a.displacementMap&&(m.displacementMap.value=a.displacementMap,m.displacementScale.value=a.displacementScale,m.displacementBias.value=a.displacementBias),a.envMap&&(m.envMapIntensity.value=a.envMapIntensity)):a.isMeshDepthMaterial?(u(m,a),a.displacementMap&&(m.displacementMap.value=a.displacementMap,m.displacementScale.value=a.displacementScale,m.displacementBias.value=a.displacementBias)):a.isMeshDistanceMaterial?(u(m,a),a.displacementMap&&(m.displacementMap.value=a.displacementMap,m.displacementScale.value=a.displacementScale,m.displacementBias.value=a.displacementBias),m.referencePosition.value.copy(a.referencePosition),m.nearDistance.value=a.nearDistance,m.farDistance.value=a.farDistance):a.isMeshNormalMaterial?(u(m,a),a.bumpMap&&(m.bumpMap.value=a.bumpMap,m.bumpScale.value=a.bumpScale),a.normalMap&&(m.normalMap.value=a.normalMap,m.normalScale.value.copy(a.normalScale)),a.displacementMap&&(m.displacementMap.value=a.displacementMap,m.displacementScale.value=a.displacementScale,m.displacementBias.value=a.displacementBias)):a.isLineBasicMaterial?(m.diffuse.value=a.color,m.opacity.value=a.opacity,a.isLineDashedMaterial&&(m.dashSize.value=a.dashSize,m.totalSize.value=a.dashSize+a.gapSize,m.scale.value=a.scale)):a.isPointsMaterial?(m.diffuse.value=a.color,m.opacity.value=a.opacity,m.size.value=a.size*ne,m.scale.value=.5*ie,m.map.value=a.map,null!==a.map&&(!0===a.map.matrixAutoUpdate&&(r=a.map.offset,p=a.map.repeat,d=a.map.center,a.map.matrix.setUvTransform(r.x,r.y,p.x,p.y,a.map.rotation,d.x,d.y)),m.uvTransform.value.copy(a.map.matrix))):a.isShadowMaterial&&(m.color.value=a.color,m.opacity.value=a.opacity),void 0!==m.ltc_1&&(m.ltc_1.value=En.LTC_1),void 0!==m.ltc_2&&(m.ltc_2.value=En.LTC_2),Me.upload(ye,i.uniformsList,m,D)),a.isShaderMaterial&&!0===a.uniformsNeedUpdate&&(Me.upload(ye,i.uniformsList,m,D),a.uniformsNeedUpdate=!1),c.setValue(ye,"modelViewMatrix",o.modelViewMatrix),c.setValue(ye,"normalMatrix",o.normalMatrix),c.setValue(ye,"modelMatrix",o.matrixWorld),e}function u(t,r){if(t.opacity.value=r.opacity,r.color&&(t.diffuse.value=r.color),r.emissive&&t.emissive.value.copy(r.emissive).multiplyScalar(r.emissiveIntensity),r.map&&(t.map.value=r.map),r.alphaMap&&(t.alphaMap.value=r.alphaMap),r.specularMap&&(t.specularMap.value=r.specularMap),r.envMap&&(t.envMap.value=r.envMap,t.flipEnvMap.value=r.envMap&&r.envMap.isCubeTexture?-1:1,t.reflectivity.value=r.reflectivity,t.refractionRatio.value=r.refractionRatio),r.lightMap&&(t.lightMap.value=r.lightMap,t.lightMapIntensity.value=r.lightMapIntensity),r.aoMap&&(t.aoMap.value=r.aoMap,t.aoMapIntensity.value=r.aoMapIntensity),r.map)var a=r.map;else r.specularMap?a=r.specularMap:r.displacementMap?a=r.displacementMap:r.normalMap?a=r.normalMap:r.bumpMap?a=r.bumpMap:r.roughnessMap?a=r.roughnessMap:r.metalnessMap?a=r.metalnessMap:r.alphaMap?a=r.alphaMap:r.emissiveMap&&(a=r.emissiveMap);if(void 0!==a){if(a.isWebGLRenderTarget&&(a=a.texture),!0===a.matrixAutoUpdate){r=a.offset;var o=a.repeat,i=a.center;a.matrix.setUvTransform(r.x,r.y,o.x,o.y,a.rotation,i.x,i.y)}t.uvTransform.value.copy(a.matrix)}}function $(e,t){e.specular.value=t.specular,e.shininess.value=fn(t.shininess,1E-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale)),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}console.log("THREE.WebGLRenderer","91dev"),r=r||{};var t=void 0===r.canvas?document.createElementNS("http://www.w3.org/1999/xhtml","canvas"):r.canvas,n=void 0===r.context?null:r.context,h=void 0!==r.alpha&&r.alpha,x=!(void 0!==r.depth)||r.depth,v=!(void 0!==r.stencil)||r.stencil,b=void 0!==r.antialias&&r.antialias,B=!(void 0!==r.premultipliedAlpha)||r.premultipliedAlpha,k=void 0!==r.preserveDrawingBuffer&&r.preserveDrawingBuffer,q=void 0===r.powerPreference?"default":r.powerPreference,ee=null,y=null;this.domElement=t,this.context=null,this.sortObjects=this.autoClearStencil=this.autoClearDepth=this.autoClearColor=this.autoClear=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.physicallyCorrectLights=this.gammaOutput=this.gammaInput=!1,this.toneMappingWhitePoint=this.toneMappingExposure=this.toneMapping=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var D=this,z=!1,te=null,K=null,L=-1,T="",re=null,M=null,O=new j,ae=new j,Y=null,U=0,oe=t.width,ie=t.height,ne=1,Q=new j(0,0,oe,ie),se=new j(0,0,oe,ie),le=!1,pe=new it,de=new lr,ce=!1,me=!1,ue=new i,ge=new _,fe={geometries:0,textures:0},he={frame:0,calls:0,vertices:0,faces:0,points:0};this.info={render:he,memory:fe,programs:null,autoReset:!0,reset:function(){he.frame++,he.calls=0,he.vertices=0,he.faces=0,he.points=0}};try{h={alpha:h,depth:x,stencil:v,antialias:b,premultipliedAlpha:B,preserveDrawingBuffer:k,powerPreference:q},t.addEventListener("webglcontextlost",o,!1),t.addEventListener("webglcontextrestored",s,!1);var ye=n||t.getContext("webgl",h)||t.getContext("experimental-webgl",h);if(null===ye){if(null!==t.getContext("webgl"))throw Error("Error creating WebGL context with your selected attributes.");throw Error("Error creating WebGL context.")}void 0===ye.getShaderPrecisionFormat&&(ye.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(e){console.error("THREE.WebGLRenderer: "+e.message)}var E,xe,ve,_e,W,be,Ee,Te,Se,Ae,we,Re,Le,Ce,Pe,Ie,Ue;a();var De=new sr(D);this.vr=De;var Ne=new nt(D,Te,xe.maxTextureSize);this.shadowMap=Ne,this.getContext=function(){return ye},this.getContextAttributes=function(){return ye.getContextAttributes()},this.forceContextLoss=function(){var e=E.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=E.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return ne},this.setPixelRatio=function(e){void 0!==e&&(ne=e,this.setSize(oe,ie,!1))},this.getSize=function(){return{width:oe,height:ie}},this.setSize=function(e,r,a){var o=De.getDevice();o&&o.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(oe=e,ie=r,t.width=e*ne,t.height=r*ne,!1!==a&&(t.style.width=e+"px",t.style.height=r+"px"),this.setViewport(0,0,e,r))},this.getDrawingBufferSize=function(){return{width:oe*ne,height:ie*ne}},this.setDrawingBufferSize=function(e,r,a){oe=e,ie=r,ne=a,t.width=e*a,t.height=r*a,this.setViewport(0,0,e,r)},this.getCurrentViewport=function(){return O},this.setViewport=function(e,t,r,a){Q.set(e,ie-t-a,r,a),ve.viewport(O.copy(Q).multiplyScalar(ne))},this.setScissor=function(e,t,r,a){se.set(e,ie-t-a,r,a),ve.scissor(ae.copy(se).multiplyScalar(ne))},this.setScissorTest=function(e){ve.setScissorTest(le=e)},this.getClearColor=function(){return Re.getClearColor()},this.setClearColor=function(){Re.setClearColor.apply(Re,arguments)},this.getClearAlpha=function(){return Re.getClearAlpha()},this.setClearAlpha=function(){Re.setClearAlpha.apply(Re,arguments)},this.clear=function(e,t,r){var a=0;(void 0===e||e)&&(a|=ye.COLOR_BUFFER_BIT),(void 0===t||t)&&(a|=ye.DEPTH_BUFFER_BIT),(void 0===r||r)&&(a|=ye.STENCIL_BUFFER_BIT),ye.clear(a)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(e,t,r,a){this.setRenderTarget(e),this.clear(t,r,a)},this.dispose=function(){t.removeEventListener("webglcontextlost",o,!1),t.removeEventListener("webglcontextrestored",s,!1),Ae.dispose(),we.dispose(),_e.dispose(),Te.dispose(),De.dispose(),Be=!1},this.renderBufferImmediate=function(t,r,a){ve.initAttributes();var o=_e.get(t);if(t.hasPositions&&!o.position&&(o.position=ye.createBuffer()),t.hasNormals&&!o.normal&&(o.normal=ye.createBuffer()),t.hasUvs&&!o.uv&&(o.uv=ye.createBuffer()),t.hasColors&&!o.color&&(o.color=ye.createBuffer()),r=r.getAttributes(),t.hasPositions&&(ye.bindBuffer(ye.ARRAY_BUFFER,o.position),ye.bufferData(ye.ARRAY_BUFFER,t.positionArray,ye.DYNAMIC_DRAW),ve.enableAttribute(r.position),ye.vertexAttribPointer(r.position,3,ye.FLOAT,!1,0,0)),t.hasNormals){if(ye.bindBuffer(ye.ARRAY_BUFFER,o.normal),!a.isMeshPhongMaterial&&!a.isMeshStandardMaterial&&!a.isMeshNormalMaterial&&!0===a.flatShading)for(var i=0,e=3*t.count;i<e;i+=9){var n=t.normalArray,s=(n[i+0]+n[i+3]+n[i+6])/3,l=(n[i+1]+n[i+4]+n[i+7])/3,p=(n[i+2]+n[i+5]+n[i+8])/3;n[i+0]=s,n[i+1]=l,n[i+2]=p,n[i+3]=s,n[i+4]=l,n[i+5]=p,n[i+6]=s,n[i+7]=l,n[i+8]=p}ye.bufferData(ye.ARRAY_BUFFER,t.normalArray,ye.DYNAMIC_DRAW),ve.enableAttribute(r.normal),ye.vertexAttribPointer(r.normal,3,ye.FLOAT,!1,0,0)}t.hasUvs&&a.map&&(ye.bindBuffer(ye.ARRAY_BUFFER,o.uv),ye.bufferData(ye.ARRAY_BUFFER,t.uvArray,ye.DYNAMIC_DRAW),ve.enableAttribute(r.uv),ye.vertexAttribPointer(r.uv,2,ye.FLOAT,!1,0,0)),t.hasColors&&0!==a.vertexColors&&(ye.bindBuffer(ye.ARRAY_BUFFER,o.color),ye.bufferData(ye.ARRAY_BUFFER,t.colorArray,ye.DYNAMIC_DRAW),ve.enableAttribute(r.color),ye.vertexAttribPointer(r.color,3,ye.FLOAT,!1,0,0)),ve.disableUnusedAttributes(),ye.drawArrays(ye.TRIANGLES,0,t.count),t.count=0},this.renderBufferDirect=function(o,a,i,s,d,e){var c=d.isMesh&&0>d.matrixWorld.determinant();ve.setMaterial(s,c);var g=X(o,a,s,d);o=i.id+"_"+g.id+"_"+(!0===s.wireframe);var f=!1;o!==T&&(T=o,f=!0),d.morphTargetInfluences&&(Le.update(d,i,s,g),f=!0),c=i.index;var h=i.attributes.position;if(a=1,!0===s.wireframe&&(c=Ee.getWireframeAttribute(i),a=2),o=Ce,null!==c){var m=be.get(c);o=Pe,o.setIndex(m)}if(f){if(f=void 0,i&&i.isInstancedBufferGeometry&&null===E.get("ANGLE_instanced_arrays"))console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");else{void 0===f&&(f=0),ve.initAttributes();var n=i.attributes;g=g.getAttributes();var y=s.defaultAttributeValues;for(S in g){var u=g[S];if(0<=u){var l=n[S];if(void 0!==l){var r=l.normalized,t=l.itemSize,p=be.get(l);if(void 0!==p){var x=p.buffer,v=p.type;if(p=p.bytesPerElement,l.isInterleavedBufferAttribute){var _=l.data,b=_.stride;l=l.offset,_&&_.isInstancedInterleavedBuffer?(ve.enableAttributeAndDivisor(u,_.meshPerAttribute),void 0===i.maxInstancedCount&&(i.maxInstancedCount=_.meshPerAttribute*_.count)):ve.enableAttribute(u),ye.bindBuffer(ye.ARRAY_BUFFER,x),ye.vertexAttribPointer(u,t,v,r,b*p,(f*b+l)*p)}else l.isInstancedBufferAttribute?(ve.enableAttributeAndDivisor(u,l.meshPerAttribute),void 0===i.maxInstancedCount&&(i.maxInstancedCount=l.meshPerAttribute*l.count)):ve.enableAttribute(u),ye.bindBuffer(ye.ARRAY_BUFFER,x),ye.vertexAttribPointer(u,t,v,r,0,f*t*p)}}else if(void 0!==y&&(r=y[S],void 0!==r))switch(r.length){case 2:ye.vertexAttrib2fv(u,r);break;case 3:ye.vertexAttrib3fv(u,r);break;case 4:ye.vertexAttrib4fv(u,r);break;default:ye.vertexAttrib1fv(u,r);}}}ve.disableUnusedAttributes()}null!==c&&ye.bindBuffer(ye.ELEMENT_ARRAY_BUFFER,m.buffer)}m=Infinity,null===c?void 0!==h&&(m=h.count):m=c.count,c=i.drawRange.start*a,h=null===e?0:e.start*a;var S=fn(c,h);if(e=fn(0,hn(m,c+i.drawRange.count*a,h+(null===e?Infinity:e.count*a))-1-S+1),0!==e){if(!d.isMesh)d.isLine?(s=s.linewidth,void 0===s&&(s=1),ve.setLineWidth(s*(null===te?ne:1)),d.isLineSegments?o.setMode(ye.LINES):d.isLineLoop?o.setMode(ye.LINE_LOOP):o.setMode(ye.LINE_STRIP)):d.isPoints&&o.setMode(ye.POINTS);else if(!0===s.wireframe)ve.setLineWidth(s.wireframeLinewidth*(null===te?ne:1)),o.setMode(ye.LINES);else switch(d.drawMode){case 0:o.setMode(ye.TRIANGLES);break;case 1:o.setMode(ye.TRIANGLE_STRIP);break;case 2:o.setMode(ye.TRIANGLE_FAN);}i&&i.isInstancedBufferGeometry?0<i.maxInstancedCount&&o.renderInstances(i,S,e):o.render(S,e)}},this.compile=function(e,t){y=we.get(e,t),y.init(),e.traverse(function(e){e.isLight&&(y.pushLight(e),e.castShadow&&y.pushShadow(e))}),y.setupLights(t),e.traverse(function(t){if(t.material)if(Array.isArray(t.material))for(var r=0;r<t.material.length;r++)P(t.material[r],e.fog,t);else P(t.material,e.fog,t)})};var Be=!1,Fe=null;this.animate=function(e){Fe=e,null===Fe?Be=!1:Be||(c(),Be=!0)},this.render=function(t,r,a,o){if(!r||!r.isCamera)console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");else if(!z){T="",L=-1,re=null,!0===t.autoUpdate&&t.updateMatrixWorld(),null===r.parent&&r.updateMatrixWorld(),De.enabled&&(r=De.getCamera(r)),y=we.get(t,r),y.init(),t.onBeforeRender(D,t,r,a),ue.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),pe.setFromMatrix(ue),me=this.localClippingEnabled,ce=de.init(this.clippingPlanes,me,r),ee=Ae.get(t,r),ee.init(),S(t,r,D.sortObjects),!0===D.sortObjects&&ee.sort(),ce&&de.beginShadows(),Ne.render(y.state.shadowsArray,t,r),y.setupLights(r),ce&&de.endShadows(),this.info.autoReset&&this.info.reset(),void 0===a&&(a=null),this.setRenderTarget(a),Re.render(ee,t,r,o),o=ee.opaque;var i=ee.transparent;if(t.overrideMaterial){var e=t.overrideMaterial;o.length&&m(o,t,r,e),i.length&&m(i,t,r,e)}else o.length&&m(o,t,r),i.length&&m(i,t,r);Ie.render(y.state.spritesArray,t,r),a&&W.updateRenderTargetMipmap(a),ve.buffers.depth.setTest(!0),ve.buffers.depth.setMask(!0),ve.buffers.color.setMask(!0),ve.setPolygonOffset(!1),t.onAfterRender(D,t,r),De.enabled&&De.submitFrame(),y=ee=null}},this.allocTextureUnit=function(){var e=U;return e>=xe.maxTextures&&console.warn("THREE.WebGLRenderer: Trying to use "+e+" texture units while this GPU supports only "+xe.maxTextures),U+=1,e},this.setTexture2D=function(){var e=!1;return function(t,r){t&&t.isWebGLRenderTarget&&(e||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),e=!0),t=t.texture),W.setTexture2D(t,r)}}(),this.setTexture=function(){var e=!1;return function(t,r){e||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),e=!0),W.setTexture2D(t,r)}}(),this.setTextureCube=function(){var e=!1;return function(t,r){t&&t.isWebGLRenderTargetCube&&(e||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),e=!0),t=t.texture),t&&t.isCubeTexture||Array.isArray(t.image)&&6===t.image.length?W.setTextureCube(t,r):W.setTextureCubeDynamic(t,r)}}(),this.getRenderTarget=function(){return te},this.setRenderTarget=function(e){(te=e)&&void 0===_e.get(e).__webglFramebuffer&&W.setupRenderTarget(e);var t=null,r=!1;e?(t=_e.get(e).__webglFramebuffer,e.isWebGLRenderTargetCube&&(t=t[e.activeCubeFace],r=!0),O.copy(e.viewport),ae.copy(e.scissor),Y=e.scissorTest):(O.copy(Q).multiplyScalar(ne),ae.copy(se).multiplyScalar(ne),Y=le),K!==t&&(ye.bindFramebuffer(ye.FRAMEBUFFER,t),K=t),ve.viewport(O),ve.scissor(ae),ve.setScissorTest(Y),r&&(r=_e.get(e.texture),ye.framebufferTexture2D(ye.FRAMEBUFFER,ye.COLOR_ATTACHMENT0,ye.TEXTURE_CUBE_MAP_POSITIVE_X+e.activeCubeFace,r.__webglTexture,e.activeMipMapLevel))},this.readRenderTargetPixels=function(t,r,a,o,i,e){if(t&&t.isWebGLRenderTarget){var s=_e.get(t).__webglFramebuffer;if(s){var l=!1;s!==K&&(ye.bindFramebuffer(ye.FRAMEBUFFER,s),l=!0);try{var p=t.texture,d=p.format,c=p.type;1023!==d&&Ue.convert(d)!==ye.getParameter(ye.IMPLEMENTATION_COLOR_READ_FORMAT)?console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format."):1009===c||Ue.convert(c)===ye.getParameter(ye.IMPLEMENTATION_COLOR_READ_TYPE)||1015===c&&(E.get("OES_texture_float")||E.get("WEBGL_color_buffer_float"))||1016===c&&E.get("EXT_color_buffer_half_float")?ye.checkFramebufferStatus(ye.FRAMEBUFFER)===ye.FRAMEBUFFER_COMPLETE?0<=r&&r<=t.width-o&&0<=a&&a<=t.height-i&&ye.readPixels(r,a,o,i,Ue.convert(d),Ue.convert(c),e):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete."):console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.")}finally{l&&ye.bindFramebuffer(ye.FRAMEBUFFER,K)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(t,r,a){var o=r.image.width,i=r.image.height,e=Ue.convert(r.format);this.setTexture2D(r,0),ye.copyTexImage2D(ye.TEXTURE_2D,a||0,e,t.x,t.y,o,i,0)}}function gr(e,t){this.name="",this.color=new Ne(e),this.density=void 0===t?2.5E-4:t}function fr(e,t,r){this.name="",this.color=new Ne(e),this.near=void 0===t?1:t,this.far=void 0===r?1E3:r}function hr(){pt.call(this),this.type="Scene",this.overrideMaterial=this.fog=this.background=null,this.autoUpdate=!0}function yr(e){Ke.call(this),this.type="SpriteMaterial",this.color=new Ne(16777215),this.map=null,this.rotation=0,this.lights=this.fog=!1,this.setValues(e)}function xr(e){pt.call(this),this.type="Sprite",this.material=void 0===e?new yr:e,this.center=new o(.5,.5)}function vr(){pt.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function _r(e,t){if(e=e||[],this.bones=e.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else for(console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[],e=0,t=this.bones.length;e<t;e++)this.boneInverses.push(new i)}function br(){pt.call(this),this.type="Bone"}function Er(e,t){Ut.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new i,this.bindMatrixInverse=new i,e=this.initBones(),e=new _r(e),this.bind(e,this.matrixWorld),this.normalizeSkinWeights()}function Tr(e){Ke.call(this),this.type="LineBasicMaterial",this.color=new Ne(16777215),this.linewidth=1,this.linejoin=this.linecap="round",this.lights=!1,this.setValues(e)}function Sr(e,t,r){return 1===r?(console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new Mr(e,t)):void(pt.call(this),this.type="Line",this.geometry=void 0===e?new Tt:e,this.material=void 0===t?new Tr({color:16777215*Math.random()}):t)}function Mr(e,t){Sr.call(this,e,t),this.type="LineSegments"}function Ar(e,t){Sr.call(this,e,t),this.type="LineLoop"}function wr(e){Ke.call(this),this.type="PointsMaterial",this.color=new Ne(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.lights=!1,this.setValues(e)}function Rr(e,t){pt.call(this),this.type="Points",this.geometry=void 0===e?new Tt:e,this.material=void 0===t?new wr({color:16777215*Math.random()}):t}function Lr(){pt.call(this),this.type="Group"}function Cr(t,a,o,i,n,e,s,l,p){r.call(this,t,a,o,i,n,e,s,l,p),this.generateMipmaps=!1}function Pr(t,a,o,i,s,e,l,p,d,u,m,g){r.call(this,null,e,l,p,d,u,i,s,m,g),this.image={width:a,height:o},this.mipmaps=t,this.generateMipmaps=this.flipY=!1}function Ir(t,o,i,n,s,e,l,p,d,c){if(c=void 0===c?1026:c,1026!==c&&1027!==c)throw Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===i&&1026===c&&(i=1012),void 0===i&&1027===c&&(i=1020),r.call(this,null,n,s,e,l,p,c,i,d),this.image={width:t,height:o},this.magFilter=void 0===l?1003:l,this.minFilter=void 0===p?1003:p,this.generateMipmaps=this.flipY=!1}function Ur(t){Tt.call(this),this.type="WireframeGeometry";var r=[],a=[0,0],o={},i=["a","b","c"],s,p,d;if(t&&t.isGeometry){var e=t.faces,c=0;for(p=e.length;c<p;c++){var m=e[c];for(s=0;3>s;s++){var g=m[i[s]],n=m[i[(s+1)%3]];a[0]=hn(g,n),a[1]=fn(g,n),g=a[0]+","+a[1],void 0===o[g]&&(o[g]={index1:a[0],index2:a[1]})}}for(g in o)c=o[g],i=t.vertices[c.index1],r.push(i.x,i.y,i.z),i=t.vertices[c.index2],r.push(i.x,i.y,i.z)}else if(t&&t.isBufferGeometry)if(i=new _,null!==t.index){e=t.attributes.position,m=t.index;var u=t.groups;for(0===u.length&&(u=[{start:0,count:m.count,materialIndex:0}]),t=0,d=u.length;t<d;++t)for(c=u[t],s=c.start,p=c.count,c=s,p=s+p;c<p;c+=3)for(s=0;3>s;s++)g=m.getX(c+s),n=m.getX(c+(s+1)%3),a[0]=hn(g,n),a[1]=fn(g,n),g=a[0]+","+a[1],void 0===o[g]&&(o[g]={index1:a[0],index2:a[1]});for(g in o)c=o[g],i.fromBufferAttribute(e,c.index1),r.push(i.x,i.y,i.z),i.fromBufferAttribute(e,c.index2),r.push(i.x,i.y,i.z)}else for(e=t.attributes.position,c=0,p=e.count/3;c<p;c++)for(s=0;3>s;s++)o=3*c+s,i.fromBufferAttribute(e,o),r.push(i.x,i.y,i.z),o=3*c+(s+1)%3,i.fromBufferAttribute(e,o),r.push(i.x,i.y,i.z);this.addAttribute("position",new bt(r,3))}function Dr(e,t,r){ut.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:r},this.fromBufferGeometry(new Nr(e,t,r)),this.mergeVertices()}function Nr(o,i,s){Tt.call(this),this.type="ParametricBufferGeometry",this.parameters={func:o,slices:i,stacks:s};var p=[],d=[],e=[],f=[],g=new _,h=new _,y=new _,m=new _,v=new _,n=i+1,r,u;for(r=0;r<=s;r++){var l=r/s;for(u=0;u<=i;u++){var t=u/i;h=o(t,l,h),d.push(h.x,h.y,h.z),0<=t-1E-5?(y=o(t-1E-5,l,y),m.subVectors(h,y)):(y=o(t+1E-5,l,y),m.subVectors(y,h)),0<=l-1E-5?(y=o(t,l-1E-5,y),v.subVectors(h,y)):(y=o(t,l+1E-5,y),v.subVectors(y,h)),g.crossVectors(m,v).normalize(),e.push(g.x,g.y,g.z),f.push(t,l)}}for(r=0;r<s;r++)for(u=0;u<i;u++)o=r*n+u+1,g=(r+1)*n+u+1,h=(r+1)*n+u,p.push(r*n+u,o,h),p.push(o,g,h);this.setIndex(p),this.addAttribute("position",new bt(d,3)),this.addAttribute("normal",new bt(e,3)),this.addAttribute("uv",new bt(f,2))}function Br(e,t,r,o){ut.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:o},this.fromBufferGeometry(new Fr(e,t,r,o)),this.mergeVertices()}function Fr(t,r,i,n){function s(e){m.push(e.x,e.y,e.z)}function e(e,r){e*=3,r.x=t[e+0],r.y=t[e+1],r.z=t[e+2]}function p(e,t,r,a){0>a&&1===e.x&&(u[t]=e.x-1),0===r.x&&0===r.z&&(u[t]=a/2/dn+.5)}Tt.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:t,indices:r,radius:i,detail:n},i=i||1,n=n||0;var m=[],u=[];(function(t){for(var a=new _,o=new _,i=new _,n=0;n<r.length;n+=3){e(r[n+0],a),e(r[n+1],o),e(r[n+2],i);var p=a,l=i,d=pn(2,t),c=[],u,g;for(g=0;g<=d;g++){c[g]=[];var m=p.clone().lerp(l,g/d),f=o.clone().lerp(l,g/d),h=d-g;for(u=0;u<=h;u++)c[g][u]=0===u&&g===d?m:m.clone().lerp(f,u/h)}for(g=0;g<d;g++)for(u=0;u<2*(d-g)-1;u++)p=xn(u/2),0===u%2?(s(c[g][p+1]),s(c[g+1][p]),s(c[g][p])):(s(c[g][p+1]),s(c[g+1][p+1]),s(c[g+1][p]))}})(n),function(e){for(var t=new _,r=0;r<m.length;r+=3)t.x=m[r+0],t.y=m[r+1],t.z=m[r+2],t.normalize().multiplyScalar(e),m[r+0]=t.x,m[r+1]=t.y,m[r+2]=t.z}(i),function(){for(var t=new _,r=0;r<m.length;r+=3)t.x=m[r+0],t.y=m[r+1],t.z=m[r+2],u.push(ln(t.z,-t.x)/2/dn+.5,1-(ln(-t.y,cn(t.x*t.x+t.z*t.z))/dn+.5));t=new _,r=new _;for(var a=new _,i=new _,n=new o,e=new o,s=new o,l=0,d=0;l<m.length;l+=9,d+=6){t.set(m[l+0],m[l+1],m[l+2]),r.set(m[l+3],m[l+4],m[l+5]),a.set(m[l+6],m[l+7],m[l+8]),n.set(u[d+0],u[d+1]),e.set(u[d+2],u[d+3]),s.set(u[d+4],u[d+5]),i.copy(t).add(r).add(a).divideScalar(3);var c=ln(i.z,-i.x);p(n,d+0,t,c),p(e,d+2,r,c),p(s,d+4,a,c)}for(t=0;t<u.length;t+=6)r=u[t+0],a=u[t+2],i=u[t+4],n=hn(r,a,i),.9<fn(r,a,i)&&.1>n&&(.2>r&&(u[t+0]+=1),.2>a&&(u[t+2]+=1),.2>i&&(u[t+4]+=1))}(),this.addAttribute("position",new bt(m,3)),this.addAttribute("normal",new bt(m.slice(),3)),this.addAttribute("uv",new bt(u,2)),0===n?this.computeVertexNormals():this.normalizeNormals()}function zr(e,t){ut.call(this),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Gr(e,t)),this.mergeVertices()}function Gr(e,t){Fr.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Or(e,t){ut.call(this),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Hr(e,t)),this.mergeVertices()}function Hr(e,t){Fr.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Vr(e,t){ut.call(this),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new kr(e,t)),this.mergeVertices()}function kr(e,t){var r=(1+2.23606797749979)/2;Fr.call(this,[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Wr(e,t){ut.call(this),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new jr(e,t)),this.mergeVertices()}function jr(e,t){var r=(1+2.23606797749979)/2,o=1/r;Fr.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-o,-r,0,-o,r,0,o,-r,0,o,r,-o,-r,0,-o,r,0,o,-r,0,o,r,0,-r,0,-o,r,0,-o,-r,0,o,r,0,o],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Xr(t,r,o,i,n,s){ut.call(this),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:r,radius:o,radialSegments:i,closed:n},void 0!==s&&console.warn("THREE.TubeGeometry: taper has been removed."),t=new Yr(t,r,o,i,n),this.tangents=t.tangents,this.normals=t.normals,this.binormals=t.binormals,this.fromBufferGeometry(t),this.mergeVertices()}function Yr(i,s,p,u,y){function E(t){S=i.getPointAt(t/s,S);var e=T.normals[t];for(t=T.binormals[t],x=0;x<=u;x++){var r=2*(x/u*dn),a=sn(r);r=-gn(r),h.x=r*e.x+a*t.x,h.y=r*e.y+a*t.y,h.z=r*e.z+a*t.z,h.normalize(),M.push(h.x,h.y,h.z),g.x=S.x+p*h.x,g.y=S.y+p*h.y,g.z=S.z+p*h.z,v.push(g.x,g.y,g.z)}}Tt.call(this),this.type="TubeBufferGeometry",this.parameters={path:i,tubularSegments:s,radius:p,radialSegments:u,closed:y},s=s||64,p=p||1,u=u||8,y=y||!1;var T=i.computeFrenetFrames(s,y);this.tangents=T.tangents,this.normals=T.normals,this.binormals=T.binormals;var g=new _,h=new _,f=new o,S=new _,v=[],M=[],r=[],t=[],m,x;for(m=0;m<s;m++)E(m);for(E(!1===y?s:0),m=0;m<=s;m++)for(x=0;x<=u;x++)f.x=m/s,f.y=x/u,r.push(f.x,f.y);(function(){for(x=1;x<=s;x++)for(m=1;m<=u;m++){var r=(u+1)*x+(m-1),a=(u+1)*x+m,o=(u+1)*(x-1)+m;t.push((u+1)*(x-1)+(m-1),r,o),t.push(r,a,o)}})(),this.setIndex(t),this.addAttribute("position",new bt(v,3)),this.addAttribute("normal",new bt(M,3)),this.addAttribute("uv",new bt(r,2))}function qr(t,r,o,i,n,s,l){ut.call(this),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:r,tubularSegments:o,radialSegments:i,p:n,q:s},void 0!==l&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new Zr(t,r,o,i,n,s)),this.mergeVertices()}function Zr(o,i,s,p,u,y){function E(t,r,a,o,i){var e=sn(t);r=a/r*t,a=gn(r),i.x=.5*(o*(2+a))*gn(t),i.y=.5*(o*(2+a)*e),i.z=.5*(o*sn(r))}Tt.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:o,tube:i,tubularSegments:s,radialSegments:p,p:u,q:y},o=o||1,i=i||.4,s=xn(s)||64,p=xn(p)||8,u=u||2,y=y||3;var g=[],h=[],T=[],m=[],v=new _,l=new _,S=new _,r=new _,t=new _,x=new _,M=new _,w;for(w=0;w<=s;++w){var n=2*(w/s*u*dn);for(E(n,u,y,o,S),E(n+.01,u,y,o,r),x.subVectors(r,S),M.addVectors(r,S),t.crossVectors(x,M),M.crossVectors(t,x),t.normalize(),M.normalize(),n=0;n<=p;++n){var A=2*(n/p*dn),R=-i*gn(A);A=i*sn(A),v.x=S.x+(R*M.x+A*t.x),v.y=S.y+(R*M.y+A*t.y),v.z=S.z+(R*M.z+A*t.z),h.push(v.x,v.y,v.z),l.subVectors(v,S).normalize(),T.push(l.x,l.y,l.z),m.push(w/s),m.push(n/p)}}for(n=1;n<=s;n++)for(w=1;w<=p;w++)o=(p+1)*n+(w-1),i=(p+1)*n+w,u=(p+1)*(n-1)+w,g.push((p+1)*(n-1)+(w-1),o,u),g.push(o,i,u);this.setIndex(g),this.addAttribute("position",new bt(h,3)),this.addAttribute("normal",new bt(T,3)),this.addAttribute("uv",new bt(m,2))}function Jr(t,r,o,i,n){ut.call(this),this.type="TorusGeometry",this.parameters={radius:t,tube:r,radialSegments:o,tubularSegments:i,arc:n},this.fromBufferGeometry(new Qr(t,r,o,i,n)),this.mergeVertices()}function Qr(o,i,s,p,u){Tt.call(this),this.type="TorusBufferGeometry",this.parameters={radius:o,tube:i,radialSegments:s,tubularSegments:p,arc:u},o=o||1,i=i||.4,s=xn(s)||8,p=xn(p)||6,u=u||2*dn;var y=[],f=[],g=[],h=[],x=new _,m=new _,v=new _,n,l;for(n=0;n<=s;n++)for(l=0;l<=p;l++){var E=l/p*u,r=2*(n/s*dn);m.x=(o+i*gn(r))*gn(E),m.y=(o+i*gn(r))*sn(E),m.z=i*sn(r),f.push(m.x,m.y,m.z),x.x=o*gn(E),x.y=o*sn(E),v.subVectors(m,x).normalize(),g.push(v.x,v.y,v.z),h.push(l/p),h.push(n/s)}for(n=1;n<=s;n++)for(l=1;l<=p;l++)o=(p+1)*(n-1)+l-1,i=(p+1)*(n-1)+l,u=(p+1)*n+l,y.push((p+1)*n+l-1,o,u),y.push(o,i,u);this.setIndex(y),this.addAttribute("position",new bt(f,3)),this.addAttribute("normal",new bt(g,3)),this.addAttribute("uv",new bt(h,2))}function Kr(t,r,a,o,i){for(var e=0,n=r,s=a-o,l;n<a;n+=o)e+=(t[s]-t[n])*(t[n+1]+t[s+1]),s=n;if(i===0<e)for(i=r;i<a;i+=o)l=$e(i,t[i],t[i+1],l);else for(i=a-o;i>=r;i-=o)l=$e(i,t[i],t[i+1],l);return l&&sa(l,l.next)&&(Ye(l),l=l.next),l}function Xe(e,t){if(!e)return e;t||(t=e);do{var r=!1;if(e.steiner||!sa(e,e.next)&&0!==ga(e.prev,e,e.next))e=e.next;else{if(Ye(e),e=t=e.prev,e===e.next)break;r=!0}}while(r||e!==t);return t}function $r(t,a,o,i,s,e,d){if(t){if(!d&&e){var c=t,u=c;do null===u.z&&(u.z=pa(u.x,u.y,i,s,e)),u.prevZ=u.prev,u=u.nextZ=u.next;while(u!==c);u.prevZ.nextZ=null,u.prevZ=null,c=u;var f=1,h,m,y,n;do{u=c;var l=c=null;for(m=0;u;){m++;var _=u;for(h=y=0;h<f&&(y++,_=_.nextZ,_);h++);for(n=f;0<y||0<n&&_;)0!==y&&(0===n||!_||u.z<=_.z)?(h=u,u=u.nextZ,y--):(h=_,_=_.nextZ,n--),l?l.nextZ=h:c=h,h.prevZ=l,l=h;u=_}l.nextZ=null,f*=2}while(1<m)}for(c=t;t.prev!==t.next;){if(u=t.prev,_=t.next,e)a:{l=t,n=i;var b=s,x=e;if(m=l.prev,y=l,f=l.next,0<=ga(m,y,f))l=!1;else{var E=m.x>y.x?m.x>f.x?m.x:f.x:y.x>f.x?y.x:f.x,T=m.y>y.y?m.y>f.y?m.y:f.y:y.y>f.y?y.y:f.y;for(h=pa(m.x<y.x?m.x<f.x?m.x:f.x:y.x<f.x?y.x:f.x,m.y<y.y?m.y<f.y?m.y:f.y:y.y<f.y?y.y:f.y,n,b,x),n=pa(E,T,n,b,x),b=l.nextZ;b&&b.z<=n;){if(b!==l.prev&&b!==l.next&&ma(m.x,m.y,y.x,y.y,f.x,f.y,b.x,b.y)&&0<=ga(b.prev,b,b.next)){l=!1;break a}b=b.nextZ}for(b=l.prevZ;b&&b.z>=h;){if(b!==l.prev&&b!==l.next&&ma(m.x,m.y,y.x,y.y,f.x,f.y,b.x,b.y)&&0<=ga(b.prev,b,b.next)){l=!1;break a}b=b.prevZ}l=!0}}else a:if(l=t,m=l.prev,y=l,f=l.next,0<=ga(m,y,f))l=!1;else{for(h=l.next.next;h!==l.prev;){if(ma(m.x,m.y,y.x,y.y,f.x,f.y,h.x,h.y)&&0<=ga(h.prev,h,h.next)){l=!1;break a}h=h.next}l=!0}if(l)a.push(u.i/o),a.push(t.i/o),a.push(_.i/o),Ye(t),c=t=_.next;else if(t=_,t===c){if(!d)$r(Xe(t),a,o,i,s,e,1);else if(1===d){d=a,c=o,u=t;do _=u.prev,l=u.next.next,!sa(_,l)&&ha(_,u,u.next,l)&&Ze(_,l)&&Ze(l,_)&&(d.push(_.i/c),d.push(u.i/c),d.push(l.i/c),Ye(u),Ye(u.next),u=t=l),u=u.next;while(u!==t);t=u,$r(t,a,o,i,s,e,2)}else if(2===d)a:{d=t;do{for(c=d.next.next;c!==d.prev;){if(u=d.i!==c.i){if(u=d,_=c,l=u.next.i!==_.i&&u.prev.i!==_.i){b:{l=u;do{if(l.i!==u.i&&l.next.i!==u.i&&l.i!==_.i&&l.next.i!==_.i&&ha(l,l.next,u,_)){l=!0;break b}l=l.next}while(l!==u);l=!1}l=!l}if(l=l&&Ze(u,_)&&Ze(_,u)){l=u,m=!1,y=(u.x+_.x)/2,_=(u.y+_.y)/2;do l.y>_!==l.next.y>_&&l.next.y!==l.y&&y<(l.next.x-l.x)*(_-l.y)/(l.next.y-l.y)+l.x&&(m=!m),l=l.next;while(l!==u);l=m}u=l}if(u){t=ya(d,c),d=Xe(d,d.next),t=Xe(t,t.next),$r(d,a,o,i,s,e),$r(t,a,o,i,s,e);break a}c=c.next}d=d.next}while(d!==t)}break}}}}function ta(e,t){return e.x-t.x}function ia(t,r){var a=r,o=t.x,i=t.y,e=-Infinity;do{if(i<=a.y&&i>=a.next.y&&a.next.y!==a.y){var n=a.x+(i-a.y)*(a.next.x-a.x)/(a.next.y-a.y);if(n<=o&&n>e){if(e=n,n===o){if(i===a.y)return a;if(i===a.next.y)return a.next}var s=a.x<a.next.x?a:a.next}}a=a.next}while(a!==r);if(!s)return null;if(o===e)return s.prev;r=s,n=s.x;var l=s.y,p=Infinity;for(a=s.next;a!==r;){if(o>=a.x&&a.x>=n&&o!==a.x&&ma(i<l?o:e,i,n,l,i<l?e:o,i,a.x,a.y)){var d=yn(i-a.y)/(o-a.x);(d<p||d===p&&a.x>s.x)&&Ze(a,t)&&(s=a,p=d)}a=a.next}return s}function pa(t,r,a,o,i){return t=32767*(t-a)*i,r=32767*(r-o)*i,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),r=16711935&(r|r<<8),r=252645135&(r|r<<4),r=858993459&(r|r<<2),1431655765&(t|t<<1)|(1431655765&(r|r<<1))<<1}function ca(e){var t=e,r=e;do t.x<r.x&&(r=t),t=t.next;while(t!==e);return r}function ma(t,r,a,o,i,e,n,s){return 0<=(i-n)*(r-s)-(t-n)*(e-s)&&0<=(t-n)*(o-s)-(a-n)*(r-s)&&0<=(a-n)*(e-s)-(i-n)*(o-s)}function ga(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function sa(e,t){return e.x===t.x&&e.y===t.y}function ha(e,t,r,a){return sa(e,t)&&sa(r,a)||sa(e,a)&&sa(r,t)||0<ga(e,t,r)!==0<ga(e,t,a)&&0<ga(r,a,e)!==0<ga(r,a,t)}function Ze(e,t){return 0>ga(e.prev,e,e.next)?0<=ga(e,t,e.next)&&0<=ga(e,e.prev,t):0>ga(e,t,e.prev)||0>ga(e,e.next,t)}function ya(t,r){var a=new xa(t.i,t.x,t.y),o=new xa(r.i,r.x,r.y),i=t.next,e=r.prev;return t.next=r,r.prev=t,a.next=i,i.prev=a,o.next=a,a.prev=o,e.next=o,o.prev=e,o}function $e(e,t,r,a){return e=new xa(e,t,r),a?(e.next=a.next,e.prev=a,a.next.prev=e,a.next=e):(e.prev=e,e.next=e),e}function Ye(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function xa(e,t,r){this.i=e,this.x=t,this.y=r,this.nextZ=this.prevZ=this.z=this.next=this.prev=null,this.steiner=!1}function _a(e){var t=e.length;2<t&&e[t-1].equals(e[0])&&e.pop()}function ba(e,t){for(var r=0;r<t.length;r++)e.push(t[r].x),e.push(t[r].y)}function Ra(e,t){ut.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},this.fromBufferGeometry(new Ca(e,t)),this.mergeVertices()}function Ca(e,t){"undefined"!==typeof e&&(Tt.call(this),this.type="ExtrudeBufferGeometry",e=Array.isArray(e)?e:[e],this.addShapeList(e,t),this.computeVertexNormals())}function Fa(e,t){ut.call(this),this.type="TextGeometry",this.parameters={text:e,parameters:t},this.fromBufferGeometry(new Ga(e,t)),this.mergeVertices()}function Ga(e,t){t=t||{};var r=t.font;return r&&r.isFont?void(e=r.generateShapes(e,t.size,t.curveSegments),t.amount=void 0===t.height?50:t.height,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),Ca.call(this,e,t),this.type="TextBufferGeometry"):(console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new ut)}function Va(t,r,o,i,n,s,l){ut.call(this),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:r,heightSegments:o,phiStart:i,phiLength:n,thetaStart:s,thetaLength:l},this.fromBufferGeometry(new Wa(t,r,o,i,n,s,l)),this.mergeVertices()}function Wa(o,i,s,p,u,y,E){Tt.call(this),this.type="SphereBufferGeometry",this.parameters={radius:o,widthSegments:i,heightSegments:s,phiStart:p,phiLength:u,thetaStart:y,thetaLength:E},o=o||1,i=fn(3,xn(i)||8),s=fn(2,xn(s)||6),p=void 0===p?0:p,u=void 0===u?2*dn:u,y=void 0===y?0:y,E=void 0===E?dn:E;var T=y+E,h=0,v=[],n=new _,l=new _,S=[],r=[],t=[],x=[],M,R;for(R=0;R<=s;R++){var m=[],w=R/s;for(M=0;M<=i;M++){var A=M/i;n.x=-o*gn(p+A*u)*sn(y+w*E),n.y=o*gn(y+w*E),n.z=o*sn(p+A*u)*sn(y+w*E),r.push(n.x,n.y,n.z),l.set(n.x,n.y,n.z).normalize(),t.push(l.x,l.y,l.z),x.push(A,1-w),m.push(h++)}v.push(m)}for(R=0;R<s;R++)for(M=0;M<i;M++)o=v[R][M+1],p=v[R][M],u=v[R+1][M],E=v[R+1][M+1],(0!==R||0<y)&&S.push(o,p,E),(R!==s-1||T<dn)&&S.push(p,u,E);this.setIndex(S),this.addAttribute("position",new bt(r,3)),this.addAttribute("normal",new bt(t,3)),this.addAttribute("uv",new bt(x,2))}function ja(t,r,o,i,n,s){ut.call(this),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:r,thetaSegments:o,phiSegments:i,thetaStart:n,thetaLength:s},this.fromBufferGeometry(new Xa(t,r,o,i,n,s)),this.mergeVertices()}function Xa(i,s,p,u,y,x){Tt.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:i,outerRadius:s,thetaSegments:p,phiSegments:u,thetaStart:y,thetaLength:x},i=i||.5,s=s||1,y=void 0===y?0:y,x=void 0===x?2*dn:x,p=void 0===p?8:fn(3,p),u=void 0===u?1:fn(1,u);var E=[],g=[],h=[],T=[],m=i,v=(s-i)/u,n=new _,l=new o,S,r;for(S=0;S<=u;S++){for(r=0;r<=p;r++)i=y+r/p*x,n.x=m*gn(i),n.y=m*sn(i),g.push(n.x,n.y,n.z),h.push(0,0,1),l.x=(n.x/s+1)/2,l.y=(n.y/s+1)/2,T.push(l.x,l.y);m+=v}for(S=0;S<u;S++)for(s=S*(p+1),r=0;r<p;r++)i=r+s,y=i+p+1,x=i+p+2,m=i+1,E.push(i,y,m),E.push(y,x,m);this.setIndex(E),this.addAttribute("position",new bt(g,3)),this.addAttribute("normal",new bt(h,3)),this.addAttribute("uv",new bt(T,2))}function eo(e,t,r,o){ut.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:o},this.fromBufferGeometry(new to(e,t,r,o)),this.mergeVertices()}function to(t,r,i,s){Tt.call(this),this.type="LatheBufferGeometry",this.parameters={points:t,segments:r,phiStart:i,phiLength:s},r=xn(r)||12,i=i||0,s=s||2*dn,s=vn.clamp(s,0,2*dn);var p=[],e=[],u=[],g=1/r,f=new _,h=new o,m;for(m=0;m<=r;m++){var y=i+m*g*s,n=sn(y),l=gn(y);for(y=0;y<=t.length-1;y++)f.x=t[y].x*n,f.y=t[y].y,f.z=t[y].x*l,e.push(f.x,f.y,f.z),h.x=m/r,h.y=y/(t.length-1),u.push(h.x,h.y)}for(m=0;m<r;m++)for(y=0;y<t.length-1;y++)i=y+m*t.length,g=i+t.length,f=i+t.length+1,h=i+1,p.push(i,g,h),p.push(g,f,h);if(this.setIndex(p),this.addAttribute("position",new bt(e,3)),this.addAttribute("uv",new bt(u,2)),this.computeVertexNormals(),s===2*dn)for(s=this.attributes.normal.array,p=new _,e=new _,u=new _,i=3*(r*t.length),y=m=0;m<t.length;m++,y+=3)p.x=s[y+0],p.y=s[y+1],p.z=s[y+2],e.x=s[i+y+0],e.y=s[i+y+1],e.z=s[i+y+2],u.addVectors(p,e).normalize(),s[y+0]=s[i+y+0]=u.x,s[y+1]=s[i+y+1]=u.y,s[y+2]=s[i+y+2]=u.z}function ro(e,t){ut.call(this),this.type="ShapeGeometry","object"===("undefined"===typeof t?"undefined":babelHelpers.typeof(t))&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),t=t.curveSegments),this.parameters={shapes:e,curveSegments:t},this.fromBufferGeometry(new ao(e,t)),this.mergeVertices()}function ao(t,r){function o(t){var a=n.length/3,o;t=t.extractPoints(r);var u=t.shape,m=t.holes;if(!1===Cn.isClockWise(u))for(u=u.reverse(),t=0,o=m.length;t<o;t++){var l=m[t];!0===Cn.isClockWise(l)&&(m[t]=l.reverse())}var g=Cn.triangulateShape(u,m);for(t=0,o=m.length;t<o;t++)l=m[t],u=u.concat(l);for(t=0,o=u.length;t<o;t++)l=u[t],n.push(l.x,l.y,0),e.push(0,0,1),s.push(l.x,l.y);for(t=0,o=g.length;t<o;t++)u=g[t],i.push(u[0]+a,u[1]+a,u[2]+a),d+=3}Tt.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:t,curveSegments:r},r=r||12;var i=[],n=[],e=[],s=[],l=0,d=0;if(!1===Array.isArray(t))o(t);else for(var p=0;p<t.length;p++)o(t[p]),this.addGroup(l,d,p),l+=d,d=0;this.setIndex(i),this.addAttribute("position",new bt(n,3)),this.addAttribute("normal",new bt(e,3)),this.addAttribute("uv",new bt(s,2))}function oo(e,t){if(t.shapes=[],Array.isArray(e))for(var r=0,a=e.length;r<a;r++)t.shapes.push(e[r].uuid);else t.shapes.push(e.uuid);return t}function io(t,r){Tt.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:r};var a=[];r=gn(vn.DEG2RAD*(void 0===r?1:r));var o=[0,0],i={},e=["a","b","c"];if(t.isBufferGeometry){var s=new ut;s.fromBufferGeometry(t)}else s=t.clone();s.mergeVertices(),s.computeFaceNormals(),t=s.vertices,s=s.faces;for(var p=0,d=s.length;p<d;p++)for(var c=s[p],m=0;3>m;m++){var l=c[e[m]],n=c[e[(m+1)%3]];o[0]=hn(l,n),o[1]=fn(l,n),l=o[0]+","+o[1],void 0===i[l]?i[l]={index1:o[0],index2:o[1],face1:p,face2:void 0}:i[l].face2=p}for(l in i)(o=i[l],void 0===o.face2||s[o.face1].normal.dot(s[o.face2].normal)<=r)&&(e=t[o.index1],a.push(e.x,e.y,e.z),e=t[o.index2],a.push(e.x,e.y,e.z));this.addAttribute("position",new bt(a,3))}function no(t,r,o,i,n,s,l,p){ut.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:r,height:o,radialSegments:i,heightSegments:n,openEnded:s,thetaStart:l,thetaLength:p},this.fromBufferGeometry(new so(t,r,o,i,n,s,l,p)),this.mergeVertices()}function so(i,s,p,E,T,y,S,M){function v(r){var a=new o,p=new _,d=0,c=!0===r?i:s,t=!0===r?1:-1,g=R,f;for(f=1;f<=E;f++)l.push(0,L*t,0),n.push(0,t,0),u.push(.5,.5),R++;var e=R;for(f=0;f<=E;f++){var h=f/E*M+S,y=gn(h);h=sn(h),p.x=c*h,p.y=L*t,p.z=c*y,l.push(p.x,p.y,p.z),n.push(0,t,0),a.x=.5*y+.5,a.y=.5*h*t+.5,u.push(a.x,a.y),R++}for(f=0;f<E;f++)a=g+f,p=e+f,!0===r?m.push(p,p+1,a):m.push(p+1,p,a),d+=3;A.addGroup(x,d,!0===r?1:2),x+=d}Tt.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:i,radiusBottom:s,height:p,radialSegments:E,heightSegments:T,openEnded:y,thetaStart:S,thetaLength:M};var A=this;i=void 0===i?1:i,s=void 0===s?1:s,p=p||1,E=xn(E)||8,T=xn(T)||1,y=void 0!==y&&y,S=void 0===S?0:S,M=void 0===M?2*dn:M;var m=[],l=[],n=[],u=[],R=0,r=[],L=p/2,x=0;(function(){var e=new _,t=new _,a=0,o=(s-i)/p,d,c;for(c=0;c<=T;c++){var g=[],f=c/T,h=f*(s-i)+i;for(d=0;d<=E;d++){var y=d/E,v=y*M+S,b=sn(v);v=gn(v),t.x=h*b,t.y=-f*p+L,t.z=h*v,l.push(t.x,t.y,t.z),e.set(b,o,v).normalize(),n.push(e.x,e.y,e.z),u.push(y,1-f),g.push(R++)}r.push(g)}for(d=0;d<E;d++)for(c=0;c<T;c++)e=r[c+1][d],t=r[c+1][d+1],o=r[c][d+1],m.push(r[c][d],e,o),m.push(e,t,o),a+=6;A.addGroup(x,a,0),x+=a})(),!1===y&&(0<i&&v(!0),0<s&&v(!1)),this.setIndex(m),this.addAttribute("position",new bt(l,3)),this.addAttribute("normal",new bt(n,3)),this.addAttribute("uv",new bt(u,2))}function lo(t,r,o,i,n,s,l){no.call(this,0,t,r,o,i,n,s,l),this.type="ConeGeometry",this.parameters={radius:t,height:r,radialSegments:o,heightSegments:i,openEnded:n,thetaStart:s,thetaLength:l}}function po(t,r,o,i,n,s,l){so.call(this,0,t,r,o,i,n,s,l),this.type="ConeBufferGeometry",this.parameters={radius:t,height:r,radialSegments:o,heightSegments:i,openEnded:n,thetaStart:s,thetaLength:l}}function co(e,t,r,o){ut.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:o},this.fromBufferGeometry(new mo(e,t,r,o)),this.mergeVertices()}function mo(t,r,i,s){Tt.call(this),this.type="CircleBufferGeometry",this.parameters={radius:t,segments:r,thetaStart:i,thetaLength:s},t=t||1,r=void 0===r?8:fn(3,r),i=void 0===i?0:i,s=void 0===s?2*dn:s;var p=[],e=[],f=[],g=[],h=new _,m=new o,l;e.push(0,0,0),f.push(0,0,1),g.push(.5,.5);var y=0;for(l=3;y<=r;y++,l+=3){var n=i+y/r*s;h.x=t*gn(n),h.y=t*sn(n),e.push(h.x,h.y,h.z),f.push(0,0,1),m.x=(e[l]/t+1)/2,m.y=(e[l+1]/t+1)/2,g.push(m.x,m.y)}for(l=1;l<=r;l++)p.push(l,l+1,0);this.setIndex(p),this.addAttribute("position",new bt(e,3)),this.addAttribute("normal",new bt(f,3)),this.addAttribute("uv",new bt(g,2))}function uo(e){Ke.call(this),this.type="ShadowMaterial",this.color=new Ne(0),this.opacity=1,this.transparent=this.lights=!0,this.setValues(e)}function go(e){Lt.call(this,e),this.type="RawShaderMaterial"}function fo(e){Ke.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Ne(16777215),this.metalness=this.roughness=.5,this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ne(0),this.emissiveIntensity=1,this.bumpMap=this.emissiveMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new o(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.envMap=this.alphaMap=this.metalnessMap=this.roughnessMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(e)}function ho(e){fo.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoatRoughness=this.clearCoat=0,this.setValues(e)}function yo(e){Ke.call(this),this.type="MeshPhongMaterial",this.color=new Ne(16777215),this.specular=new Ne(1118481),this.shininess=30,this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ne(0),this.emissiveIntensity=1,this.bumpMap=this.emissiveMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new o(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.envMap=this.alphaMap=this.specularMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(e)}function xo(e){yo.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(e)}function vo(e){Ke.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new o(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.morphNormals=this.morphTargets=this.skinning=this.lights=this.fog=!1,this.setValues(e)}function _o(e){Ke.call(this),this.type="MeshLambertMaterial",this.color=new Ne(16777215),this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ne(0),this.emissiveIntensity=1,this.envMap=this.alphaMap=this.specularMap=this.emissiveMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(e)}function bo(e){Tr.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}function Eo(t,r,a){var o=this,i=!1,e=0,n=0,s;this.onStart=void 0,this.onLoad=t,this.onProgress=r,this.onError=a,this.itemStart=function(t){n++,!1===i&&void 0!==o.onStart&&o.onStart(t,e,n),i=!0},this.itemEnd=function(t){e++,void 0!==o.onProgress&&o.onProgress(t,e,n),e===n&&(i=!1,void 0!==o.onLoad)&&o.onLoad()},this.itemError=function(e){void 0!==o.onError&&o.onError(e)},this.resolveURL=function(e){return s?s(e):e},this.setURLModifier=function(e){return s=e,this}}function ae(e){this.manager=void 0===e?In:e}function Ka(e){this.manager=void 0===e?In:e,this._parser=null}function To(e){this.manager=void 0===e?In:e,this._parser=null}function be(e){this.manager=void 0===e?In:e}function So(e){this.manager=void 0===e?In:e}function ce(e){this.manager=void 0===e?In:e}function Mo(){this.type="Curve",this.arcLengthDivisions=200}function K(t,r,a,o,i,e,n,s){Mo.call(this),this.type="EllipseCurve",this.aX=t||0,this.aY=r||0,this.xRadius=a||1,this.yRadius=o||1,this.aStartAngle=i||0,this.aEndAngle=e||2*dn,this.aClockwise=n||!1,this.aRotation=s||0}function Ao(t,r,a,o,i,e){K.call(this,t,r,a,a,o,i,e),this.type="ArcCurve"}function wo(){var t=0,r=0,a=0,o=0;return{initCatmullRom:function(i,e,n,s,l){i=l*(n-i),s=l*(s-e),t=e,r=i,a=-3*e+3*n-2*i-s,o=2*e-2*n+i+s},initNonuniformCatmullRom:function(i,e,n,s,p,d,c){i=((e-i)/p-(n-i)/(p+d)+(n-e)/d)*d,s=((n-e)/d-(s-e)/(d+c)+(s-n)/c)*d,t=e,r=i,a=-3*e+3*n-2*i-s,o=2*e-2*n+i+s},calc:function(i){var e=i*i;return t+r*i+a*e+o*e*i}}}function de(e,t,r,a){Mo.call(this),this.type="CatmullRomCurve3",this.points=e||[],this.closed=t||!1,this.curveType=r||"centripetal",this.tension=a||.5}function Ro(t,r,a,o,i){r=.5*(o-r),i=.5*(i-a);var e=t*t;return(2*a-2*o+r+i)*t*e+(-3*a+3*o-2*r-i)*e+r*t+a}function Lo(t,r,a,o){var i=1-t;return i*i*r+2*(1-t)*t*a+t*t*o}function Co(t,r,a,o,i){var e=1-t,n=1-t;return e*e*e*r+3*n*n*t*a+3*(1-t)*t*t*o+t*t*t*i}function Po(e,t,r,a){Mo.call(this),this.type="CubicBezierCurve",this.v0=e||new o,this.v1=t||new o,this.v2=r||new o,this.v3=a||new o}function Io(e,t,r,a){Mo.call(this),this.type="CubicBezierCurve3",this.v0=e||new _,this.v1=t||new _,this.v2=r||new _,this.v3=a||new _}function Uo(e,t){Mo.call(this),this.type="LineCurve",this.v1=e||new o,this.v2=t||new o}function Do(e,t){Mo.call(this),this.type="LineCurve3",this.v1=e||new _,this.v2=t||new _}function No(e,t,r){Mo.call(this),this.type="QuadraticBezierCurve",this.v0=e||new o,this.v1=t||new o,this.v2=r||new o}function Bo(e,t,r){Mo.call(this),this.type="QuadraticBezierCurve3",this.v0=e||new _,this.v1=t||new _,this.v2=r||new _}function Fo(e){Mo.call(this),this.type="SplineCurve",this.points=e||[]}function zo(){Mo.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function Go(e){zo.call(this),this.type="Path",this.currentPoint=new o,e&&this.setFromPoints(e)}function Oo(e){Go.call(this,e),this.uuid=vn.generateUUID(),this.type="Shape",this.holes=[]}function Ho(e,t){pt.call(this),this.type="Light",this.color=new Ne(e),this.intensity=void 0===t?1:t,this.receiveShadow=void 0}function Vo(e,t,r){Ho.call(this,e,r),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(pt.DefaultUp),this.updateMatrix(),this.groundColor=new Ne(t)}function ko(e){this.camera=e,this.bias=0,this.radius=1,this.mapSize=new o(512,512),this.map=null,this.matrix=new i}function Wo(){ko.call(this,new ir(50,1,.5,500))}function jo(t,r,a,o,i,e){Ho.call(this,t,r),this.type="SpotLight",this.position.copy(pt.DefaultUp),this.updateMatrix(),this.target=new pt,Object.defineProperty(this,"power",{get:function(){return this.intensity*dn},set:function(e){this.intensity=e/dn}}),this.distance=void 0===a?0:a,this.angle=void 0===o?dn/3:o,this.penumbra=void 0===i?0:i,this.decay=void 0===e?1:e,this.shadow=new Wo}function Xo(e,t,r,a){Ho.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*dn},set:function(e){this.intensity=e/(4*dn)}}),this.distance=void 0===r?0:r,this.decay=void 0===a?1:a,this.shadow=new ko(new ir(90,1,.5,500))}function Yo(){ko.call(this,new ct(-5,5,5,-5,.5,500))}function qo(e,t){Ho.call(this,e,t),this.type="DirectionalLight",this.position.copy(pt.DefaultUp),this.updateMatrix(),this.target=new pt,this.shadow=new Yo}function Zo(e,t){Ho.call(this,e,t),this.type="AmbientLight",this.castShadow=void 0}function Jo(e,t,r,a){Ho.call(this,e,t),this.type="RectAreaLight",this.width=void 0===r?10:r,this.height=void 0===a?10:a}function Qo(e,t,r,a){ni.call(this,e,t,r,a)}function Ko(e,t,r){ni.call(this,e,t,r)}function $o(e,t,r,a){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0===a?new t.constructor(r):a,this.sampleValues=t,this.valueSize=r}function Ba(e,t,r,a){$o.call(this,e,t,r,a)}function ei(e,t,r,a){ni.call(this,e,t,r,a)}function ti(e,t,r,a){ni.call(this,e,t,r,a)}function ri(e,t,r,a){ni.call(this,e,t,r,a)}function ai(e,t,r,a){$o.call(this,e,t,r,a),this._offsetNext=this._weightNext=this._offsetPrev=this._weightPrev=-0}function oi(e,t,r,a){$o.call(this,e,t,r,a)}function ii(e,t,r,a){$o.call(this,e,t,r,a)}function ni(e,t,r,a){if(void 0===e)throw Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Nn.convertArray(t,this.TimeBufferType),this.values=Nn.convertArray(r,this.ValueBufferType),this.setInterpolation(a||this.DefaultInterpolation),this.validate(),this.optimize()}function si(e,t,r,a){ni.call(this,e,t,r,a)}function li(e,t,r){this.name=e,this.tracks=r,this.duration=void 0===t?-1:t,this.uuid=vn.generateUUID(),0>this.duration&&this.resetDuration(),this.optimize()}function wa(e){this.manager=void 0===e?In:e,this.textures={}}function pi(e){this.manager=void 0===e?In:e}function ee(){this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){}}function di(e){"boolean"===typeof e&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),e=void 0),this.manager=void 0===e?In:e,this.withCredentials=!1}function fe(e){this.manager=void 0===e?In:e,this.texturePath=""}function ci(e){"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.manager=void 0===e?In:e,this.options=void 0}function mi(){this.type="ShapePath",this.subPaths=[],this.currentPath=null}function he(e){this.type="Font",this.data=e}function ie(e){this.manager=void 0===e?In:e}function ui(e){this.manager=void 0===e?In:e}function je(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new ir,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new ir,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}function gi(t,r,a){pt.call(this),this.type="CubeCamera";var o=new ir(90,1,t,r);o.up.set(0,-1,0),o.lookAt(new _(1,0,0)),this.add(o);var i=new ir(90,1,t,r);i.up.set(0,-1,0),i.lookAt(new _(-1,0,0)),this.add(i);var e=new ir(90,1,t,r);e.up.set(0,0,1),e.lookAt(new _(0,1,0)),this.add(e);var s=new ir(90,1,t,r);s.up.set(0,0,-1),s.lookAt(new _(0,-1,0)),this.add(s);var l=new ir(90,1,t,r);l.up.set(0,-1,0),l.lookAt(new _(0,0,1)),this.add(l);var p=new ir(90,1,t,r);p.up.set(0,-1,0),p.lookAt(new _(0,0,-1)),this.add(p),this.renderTarget=new n(a,a,{format:1022,magFilter:1006,minFilter:1006}),this.renderTarget.texture.name="CubeCamera",this.update=function(t,r){null===this.parent&&this.updateMatrixWorld();var a=this.renderTarget,n=a.texture.generateMipmaps;a.texture.generateMipmaps=!1,a.activeCubeFace=0,t.render(r,o,a),a.activeCubeFace=1,t.render(r,i,a),a.activeCubeFace=2,t.render(r,e,a),a.activeCubeFace=3,t.render(r,s,a),a.activeCubeFace=4,t.render(r,l,a),a.texture.generateMipmaps=n,a.activeCubeFace=5,t.render(r,p,a),t.setRenderTarget(null)},this.clear=function(t,r,a,o){for(var i=this.renderTarget,e=0;6>e;e++)i.activeCubeFace=e,t.setRenderTarget(i),t.clear(r,a,o);t.setRenderTarget(null)}}function fi(){pt.call(this),this.type="AudioListener",this.context=Gn.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null}function hi(e){pt.call(this),this.type="Audio",this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.loop=!1,this.offset=this.startTime=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function yi(e){hi.call(this,e),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function xi(e,t){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=void 0===t?2048:t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}function ne(e,t,r){this.binding=e,this.valueSize=r,e=Float64Array;"quaternion"===t?t=this._slerp:"string"===t||"bool"===t?(e=Array,t=this._select):t=this._lerp;this.buffer=new e(4*r),this._mixBufferRegion=t,this.referenceCount=this.useCount=this.cumulativeWeight=0}function oe(e,t,r){r=r||vi.parseTrackName(t),this._targetGroup=e,this._bindings=e.subscribe_(t,r)}function vi(e,t,r){this.path=t,this.parsedPath=r||vi.parseTrackName(t),this.node=vi.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}function fa(){this.uuid=vn.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var e={};this._indicesByUUID=e;for(var t=0,r=arguments.length;t!==r;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var a=this;this.stats={objects:{get total(){return a._objects.length},get inUse(){return this.total-a.nCachedObjects_}},get bindingsPerObject(){return a._bindings.length}}}function _i(t,r,a){this._mixer=t,this._clip=r,this._localRoot=a||null,t=r.tracks,r=t.length,a=Array(r);for(var o={endingStart:2400,endingEnd:2400},i=0,e;i!==r;++i)e=t[i].createInterpolant(null),a[i]=e,e.settings=o;this._interpolantSettings=o,this._interpolants=a,this._propertyBindings=Array(r),this._weightInterpolant=this._timeScaleInterpolant=this._byClipCacheIndex=this._cacheIndex=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this._effectiveWeight=this.weight=this._effectiveTimeScale=this.timeScale=1,this.repetitions=Infinity,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtEnd=this.zeroSlopeAtStart=!0}function bi(e){this._root=e,this._initMemoryManager(),this.time=this._accuIndex=0,this.timeScale=1}function Ei(e,t){"string"===typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=t),this.value=e}function Ti(){Tt.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function Si(e,t,r,a){this.uuid=vn.generateUUID(),this.data=e,this.itemSize=t,this.offset=r,this.normalized=!0===a}function re(e,t){this.uuid=vn.generateUUID(),this.array=e,this.stride=t,this.count=void 0===e?0:e.length/t,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=function(){},this.version=0}function Mi(e,t,r){re.call(this,e,t),this.meshPerAttribute=r||1}function Ai(e,t,r){gt.call(this,e,t),this.meshPerAttribute=r||1}function wi(e,t,r,a){this.ray=new Ct(e,t),this.near=r||0,this.far=a||Infinity,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function Ri(e,t){return e.distance-t.distance}function Li(t,r,a,o){if(!1!==t.visible&&(t.raycast(r,a),!0===o)){t=t.children,o=0;for(var i=t.length;o<i;o++)Li(t[o],r,a,!0)}}function ue(e){this.autoStart=!(void 0!==e)||e,this.elapsedTime=this.oldTime=this.startTime=0,this.running=!1}function Ci(e,t,r){return this.radius=void 0===e?1:e,this.phi=void 0===t?0:t,this.theta=void 0===r?0:r,this}function Pi(e,t,r){return this.radius=void 0===e?1:e,this.theta=void 0===t?0:t,this.y=void 0===r?0:r,this}function Ii(e,t){this.min=void 0===e?new o(Infinity,Infinity):e,this.max=void 0===t?new o(-Infinity,-Infinity):t}function ve(e){pt.call(this),this.material=e,this.render=function(){}}function Ui(e,t,r,o){this.object=e,this.size=void 0===t?1:t,e=void 0===r?16711680:r,o=void 0===o?1:o,t=0,(r=this.object.geometry)&&r.isGeometry?t=3*r.faces.length:r&&r.isBufferGeometry&&(t=r.attributes.normal.count),r=new Tt,t=new bt(6*t,3),r.addAttribute("position",t),Mr.call(this,r,new Tr({color:e,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function Di(t,r){pt.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,t=new Tt,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(var a=0,o=1;32>a;a++,o++){var i=2*(a/32*dn),e=2*(o/32*dn);r.push(gn(i),sn(i),1,gn(e),sn(e),1)}t.addAttribute("position",new bt(r,3)),r=new Tr({fog:!1}),this.cone=new Mr(t,r),this.add(this.cone),this.update()}function Ni(e){var t=[];e&&e.isBone&&t.push(e);for(var r=0;r<e.children.length;r++)t.push.apply(t,Ni(e.children[r]));return t}function Bi(t){for(var r=Ni(t),a=new Tt,o=[],i=[],e=new Ne(0,0,1),n=new Ne(0,1,0),s=0,l;s<r.length;s++)l=r[s],l.parent&&l.parent.isBone&&(o.push(0,0,0),o.push(0,0,0),i.push(e.r,e.g,e.b),i.push(n.r,n.g,n.b));a.addAttribute("position",new bt(o,3)),a.addAttribute("color",new bt(i,3)),o=new Tr({vertexColors:2,depthTest:!1,depthWrite:!1,transparent:!0}),Mr.call(this,a,o),this.root=t,this.bones=r,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}function Fi(e,t,r){this.light=e,this.light.updateMatrixWorld(),this.color=r,e=new Wa(t,4,2),t=new Rt({wireframe:!0,fog:!1}),Ut.call(this,e,t),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function zi(e,t){pt.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,e=new Tr({fog:!1}),t=new Tt,t.addAttribute("position",new gt(new Float32Array(15),3)),this.line=new Sr(t,e),this.add(this.line),this.update()}function Gi(e,t,r){pt.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,e=new Hr(t),e.rotateY(.5*dn),this.material=new Rt({wireframe:!0,fog:!1}),void 0===this.color&&(this.material.vertexColors=2),t=e.getAttribute("position"),t=new Float32Array(3*t.count),e.addAttribute("color",new gt(t,3)),this.add(new Ut(e,this.material)),this.update()}function Oi(t,r,a,o){t=t||10,r=r||10,a=new Ne(void 0===a?4473924:a),o=new Ne(void 0===o?8947848:o);var i=r/2,e=t/r,s=t/2;t=[];for(var p=[],d=0,c=0,m=-s;d<=r;d++,m+=e){t.push(-s,0,m,s,0,m),t.push(m,0,-s,m,0,s);var l=d===i?a:o;l.toArray(p,c),c+=3,l.toArray(p,c),c+=3,l.toArray(p,c),c+=3,l.toArray(p,c),c+=3}r=new Tt,r.addAttribute("position",new bt(t,3)),r.addAttribute("color",new bt(p,3)),a=new Tr({vertexColors:2}),Mr.call(this,r,a)}function Hi(t,r,a,o,i,e){t=t||10,r=r||16,a=a||8,o=o||64,i=new Ne(void 0===i?4473924:i),e=new Ne(void 0===e?8947848:e);var s=[],d=[],c;for(c=0;c<=r;c++){var u=2*(c/r)*dn,m=sn(u)*t;u=gn(u)*t,s.push(0,0,0),s.push(m,0,u);var l=1&c?i:e;d.push(l.r,l.g,l.b),d.push(l.r,l.g,l.b)}for(c=0;c<=a;c++){l=1&c?i:e;var n=t-t/a*c;for(r=0;r<o;r++)u=2*(r/o)*dn,m=sn(u)*n,u=gn(u)*n,s.push(m,0,u),d.push(l.r,l.g,l.b),u=2*((r+1)/o)*dn,m=sn(u)*n,u=gn(u)*n,s.push(m,0,u),d.push(l.r,l.g,l.b)}t=new Tt,t.addAttribute("position",new bt(s,3)),t.addAttribute("color",new bt(d,3)),s=new Tr({vertexColors:2}),Mr.call(this,t,s)}function Vi(e,t,r,o){this.object=e,this.size=void 0===t?1:t,e=void 0===r?16776960:r,o=void 0===o?1:o,t=0,(r=this.object.geometry)&&r.isGeometry?t=r.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead."),r=new Tt,t=new bt(6*t,3),r.addAttribute("position",t),Mr.call(this,r,new Tr({color:e,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function ki(e,t,r){pt.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,void 0===t&&(t=1),e=new Tt,e.addAttribute("position",new bt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3)),t=new Tr({fog:!1}),this.lightPlane=new Sr(e,t),this.add(this.lightPlane),e=new Tt,e.addAttribute("position",new bt([0,0,0,0,0,1],3)),this.targetLine=new Sr(e,t),this.add(this.targetLine),this.update()}function Wi(t){function r(e,t,r){o(e,r),o(t,r)}function o(t,r){e.push(0,0,0),s.push(r.r,r.g,r.b),void 0===d[t]&&(d[t]=[]),d[t].push(e.length/3-1)}var a=new Tt,i=new Tr({color:16777215,vertexColors:1}),e=[],s=[],d={},c=new Ne(16755200),u=new Ne(16711680),m=new Ne(43775),l=new Ne(16777215),n=new Ne(3355443);r("n1","n2",c),r("n2","n4",c),r("n4","n3",c),r("n3","n1",c),r("f1","f2",c),r("f2","f4",c),r("f4","f3",c),r("f3","f1",c),r("n1","f1",c),r("n2","f2",c),r("n3","f3",c),r("n4","f4",c),r("p","n1",u),r("p","n2",u),r("p","n3",u),r("p","n4",u),r("u1","u2",m),r("u2","u3",m),r("u3","u1",m),r("c","t",l),r("p","c",n),r("cn1","cn2",n),r("cn3","cn4",n),r("cf1","cf2",n),r("cf3","cf4",n),a.addAttribute("position",new bt(e,3)),a.addAttribute("color",new bt(s,3)),Mr.call(this,a,i),this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=d,this.update()}function ji(e,t){this.object=e,void 0===t&&(t=16776960),e=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);var r=new Float32Array(24),a=new Tt;a.setIndex(new gt(e,1)),a.addAttribute("position",new gt(r,3)),Mr.call(this,a,new Tr({color:t})),this.matrixAutoUpdate=!1,this.update()}function Xi(e,t){this.type="Box3Helper",this.box=e,e=void 0===t?16776960:t,t=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);var r=new Tt;r.setIndex(new gt(t,1)),r.addAttribute("position",new bt([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),Mr.call(this,r,new Tr({color:e})),this.geometry.computeBoundingSphere()}function Yi(e,t,r){this.type="PlaneHelper",this.plane=e,this.size=void 0===t?1:t,e=void 0===r?16776960:r,t=new Tt,t.addAttribute("position",new bt([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),t.computeBoundingSphere(),Sr.call(this,t,new Tr({color:e})),t=new Tt,t.addAttribute("position",new bt([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),t.computeBoundingSphere(),this.add(new Ut(t,new Rt({color:e,opacity:.2,transparent:!0,depthWrite:!1})))}function qi(t,r,a,o,i,e){pt.call(this),void 0===o&&(o=16776960),void 0===a&&(a=1),void 0===i&&(i=.2*a),void 0===e&&(e=.2*i),void 0===On&&(On=new Tt,On.addAttribute("position",new bt([0,0,0,0,1,0],3)),Hn=new so(0,.5,1,5,1),Hn.translate(0,-.5,0)),this.position.copy(r),this.line=new Sr(On,new Tr({color:o})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Ut(Hn,new Rt({color:o})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(a,i,e)}function Zi(e){e=e||1;var t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e];e=new Tt,e.addAttribute("position",new bt(t,3)),e.addAttribute("color",new bt([1,0,0,1,0.6,0,0,1,0,0.6,1,0,0,0,1,0,0.6,1],3)),t=new Tr({vertexColors:2}),Mr.call(this,e,t)}function Ji(e){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),de.call(this,e),this.type="catmullrom",this.closed=!0}function Qi(e){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),de.call(this,e),this.type="catmullrom"}function Ki(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),de.call(this,e),this.type="catmullrom"}var xe=Math.tan,$i=Math.atan,en=Math.acos,tn=Math.round,rn=Math.ceil,an=Math.sign,on=Number.isInteger,nn=Number.EPSILON,sn=Math.sin,ln=Math.atan2,pn=Math.pow,dn=Math.PI,cn=Math.sqrt,mn=Math.LN2,un=Math.log,gn=Math.cos,fn=Math.max,hn=Math.min,yn=Math.abs,xn=Math.floor;void 0===nn&&(nn=2.220446049250313e-16),void 0===on&&(on=function(e){return"number"===typeof e&&isFinite(e)&&xn(e)===e}),void 0===an&&(an=function(e){return 0>e?-1:0<e?1:+e}),!1==="name"in Function.prototype&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&function(){Object.assign=function(t){if(void 0===t||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(t),a=1,o;a<arguments.length;a++)if(o=arguments[a],void 0!==o&&null!==o)for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i]);return r}}(),Object.assign(t.prototype,{addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var r=this._listeners;void 0===r[e]&&(r[e]=[]),-1===r[e].indexOf(t)&&r[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var r=this._listeners;return void 0!==r[e]&&-1!==r[e].indexOf(t)},removeEventListener:function(e,t){void 0!==this._listeners&&(e=this._listeners[e],void 0!==e&&(t=e.indexOf(t),-1!==t&&e.splice(t,1)))},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this,t=t.slice(0);for(var r=0,a=t.length;r<a;r++)t[r].call(this,e)}}}});var vn={DEG2RAD:dn/180,RAD2DEG:180/dn,generateUUID:function(){for(var t=[],e=0;256>e;e++)t[e]=(16>e?"0":"")+e.toString(16).toUpperCase();return function(){var r=0|4294967295*Math.random(),a=0|4294967295*Math.random(),o=0|4294967295*Math.random(),e=0|4294967295*Math.random();return t[255&r]+t[255&r>>8]+t[255&r>>16]+t[255&r>>24]+"-"+t[255&a]+t[255&a>>8]+"-"+t[64|15&a>>16]+t[255&a>>24]+"-"+t[128|63&o]+t[255&o>>8]+"-"+t[255&o>>16]+t[255&o>>24]+t[255&e]+t[255&e>>8]+t[255&e>>16]+t[255&e>>24]}}(),clamp:function(e,t,r){return fn(t,hn(r,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(t,r,a,o,i){return o+(t-r)*(i-o)/(a-r)},lerp:function(e,t,r){return(1-r)*e+r*t},smoothstep:function(e,t,r){return e<=t?0:e>=r?1:(e=(e-t)/(r-t),e*e*(3-2*e))},smootherstep:function(e,t,r){return e<=t?0:e>=r?1:(e=(e-t)/(r-t),e*e*e*(e*(6*e-15)+10))},randInt:function(e,t){return e+xn(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*vn.DEG2RAD},radToDeg:function(e){return e*vn.RAD2DEG},isPowerOfTwo:function(e){return 0===(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return pn(2,rn(un(e)/mn))},floorPowerOfTwo:function(e){return pn(2,xn(un(e)/mn))}};Object.defineProperties(o.prototype,{width:{get:function(){return this.x},set:function(e){this.x=e}},height:{get:function(){return this.y},set:function(e){this.y=e}}}),Object.assign(o.prototype,{isVector2:!0,set:function(e,t){return this.x=e,this.y=t,this},setScalar:function(e){return this.y=this.x=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw Error("index is out of range: "+e);}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+e);}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0===t?(this.x+=e.x,this.y+=e.y,this):(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t))},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this},sub:function(e,t){return void 0===t?(this.x-=e.x,this.y-=e.y,this):(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t))},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},applyMatrix3:function(e){var t=this.x,r=this.y;return e=e.elements,this.x=e[0]*t+e[3]*r+e[6],this.y=e[1]*t+e[4]*r+e[7],this},min:function(e){return this.x=hn(this.x,e.x),this.y=hn(this.y,e.y),this},max:function(e){return this.x=fn(this.x,e.x),this.y=fn(this.y,e.y),this},clamp:function(e,t){return this.x=fn(e.x,hn(t.x,this.x)),this.y=fn(e.y,hn(t.y,this.y)),this},clampScalar:function(){var e=new o,t=new o;return function(r,a){return e.set(r,r),t.set(a,a),this.clamp(e,t)}}(),clampLength:function(e,t){var r=this.length();return this.divideScalar(r||1).multiplyScalar(fn(e,hn(t,r)))},floor:function(){return this.x=xn(this.x),this.y=xn(this.y),this},ceil:function(){return this.x=rn(this.x),this.y=rn(this.y),this},round:function(){return this.x=tn(this.x),this.y=tn(this.y),this},roundToZero:function(){return this.x=0>this.x?rn(this.x):xn(this.x),this.y=0>this.y?rn(this.y):xn(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return cn(this.x*this.x+this.y*this.y)},manhattanLength:function(){return yn(this.x)+yn(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var e=ln(this.y,this.x);return 0>e&&(e+=2*dn),e},distanceTo:function(e){return cn(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x;return e=this.y-e.y,t*t+e*e},manhattanDistanceTo:function(e){return yn(this.x-e.x)+yn(this.y-e.y)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,r){return this.subVectors(t,e).multiplyScalar(r).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromBufferAttribute:function(e,t,r){return void 0!==r&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this},rotateAround:function(t,r){var a=gn(r);r=sn(r);var o=this.x-t.x,i=this.y-t.y;return this.x=o*a-i*r+t.x,this.y=o*r+i*a+t.y,this}}),Object.assign(i.prototype,{isMatrix4:!0,set:function(o,a,i,s,d,e,c,u,g,f,m,l,n,p,h,r){var t=this.elements;return t[0]=o,t[4]=a,t[8]=i,t[12]=s,t[1]=d,t[5]=e,t[9]=c,t[13]=u,t[2]=g,t[6]=f,t[10]=m,t[14]=l,t[3]=n,t[7]=p,t[11]=h,t[15]=r,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return new i().fromArray(this.elements)},copy:function(e){var t=this.elements;return e=e.elements,t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],this},copyPosition:function(e){var t=this.elements;return e=e.elements,t[12]=e[12],t[13]=e[13],t[14]=e[14],this},extractBasis:function(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this},makeBasis:function(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this},extractRotation:function(){var t=new _;return function(r){var a=this.elements,o=r.elements,i=1/t.setFromMatrixColumn(r,0).length(),e=1/t.setFromMatrixColumn(r,1).length();return r=1/t.setFromMatrixColumn(r,2).length(),a[0]=o[0]*i,a[1]=o[1]*i,a[2]=o[2]*i,a[4]=o[4]*e,a[5]=o[5]*e,a[6]=o[6]*e,a[8]=o[8]*r,a[9]=o[9]*r,a[10]=o[10]*r,this}}(),makeRotationFromEuler:function(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var r=this.elements,a=t.x,o=t.y,i=t.z,n=gn(a);a=sn(a);var s=gn(o);o=sn(o);var p=gn(i);if(i=sn(i),"XYZ"===t.order){t=n*p;var u=n*i,h=a*p,m=a*i;r[0]=s*p,r[4]=-s*i,r[8]=o,r[1]=u+h*o,r[5]=t-m*o,r[9]=-a*s,r[2]=m-t*o,r[6]=h+u*o,r[10]=n*s}else"YXZ"===t.order?(t=s*p,u=s*i,h=o*p,m=o*i,r[0]=t+m*a,r[4]=h*a-u,r[8]=n*o,r[1]=n*i,r[5]=n*p,r[9]=-a,r[2]=u*a-h,r[6]=m+t*a,r[10]=n*s):"ZXY"===t.order?(t=s*p,u=s*i,h=o*p,m=o*i,r[0]=t-m*a,r[4]=-n*i,r[8]=h+u*a,r[1]=u+h*a,r[5]=n*p,r[9]=m-t*a,r[2]=-n*o,r[6]=a,r[10]=n*s):"ZYX"===t.order?(t=n*p,u=n*i,h=a*p,m=a*i,r[0]=s*p,r[4]=h*o-u,r[8]=t*o+m,r[1]=s*i,r[5]=m*o+t,r[9]=u*o-h,r[2]=-o,r[6]=a*s,r[10]=n*s):"YZX"===t.order?(t=n*s,u=n*o,h=a*s,m=a*o,r[0]=s*p,r[4]=m-t*i,r[8]=h*i+u,r[1]=i,r[5]=n*p,r[9]=-a*p,r[2]=-o*p,r[6]=u*i+h,r[10]=t-m*i):"XZY"===t.order&&(t=n*s,u=n*o,h=a*s,m=a*o,r[0]=s*p,r[4]=-i,r[8]=o*p,r[1]=t*i+m,r[5]=n*p,r[9]=u*i-h,r[2]=h*i-u,r[6]=a*p,r[10]=m*i+t);return r[3]=0,r[7]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,this},makeRotationFromQuaternion:function(t){var r=this.elements,a=t._x,o=t._y,i=t._z,e=t._w,n=a+a,s=o+o,p=i+i;t=a*n;var d=a*s;a*=p;var c=o*s;return o*=p,i*=p,n*=e,s*=e,e*=p,r[0]=1-(c+i),r[4]=d-e,r[8]=a+s,r[1]=d+e,r[5]=1-(t+i),r[9]=o-n,r[2]=a-s,r[6]=o+n,r[10]=1-(t+c),r[3]=0,r[7]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,this},lookAt:function(){var t=new _,r=new _,a=new _;return function(o,i,e){var n=this.elements;return a.subVectors(o,i),0===a.lengthSq()&&(a.z=1),a.normalize(),t.crossVectors(e,a),0===t.lengthSq()&&(1===yn(e.z)?a.x+=1E-4:a.z+=1E-4,a.normalize(),t.crossVectors(e,a)),t.normalize(),r.crossVectors(a,t),n[0]=t.x,n[4]=r.x,n[8]=a.x,n[1]=t.y,n[5]=r.y,n[9]=a.y,n[2]=t.z,n[6]=r.z,n[10]=a.z,this}}(),multiply:function(e,t){return void 0===t?this.multiplyMatrices(this,e):(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t))},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(o,a){var i=o.elements,s=a.elements;a=this.elements,o=i[0];var d=i[4],e=i[8],c=i[12],u=i[1],g=i[5],f=i[9],m=i[13],l=i[2],n=i[6],p=i[10],h=i[14],r=i[3],t=i[7],x=i[11];i=i[15];var v=s[0],_=s[4],b=s[8],E=s[12],S=s[1],y=s[5],A=s[9],w=s[13],R=s[2],C=s[6],P=s[10],I=s[14],U=s[3],L=s[7],T=s[11];return s=s[15],a[0]=o*v+d*S+e*R+c*U,a[4]=o*_+d*y+e*C+c*L,a[8]=o*b+d*A+e*P+c*T,a[12]=o*E+d*w+e*I+c*s,a[1]=u*v+g*S+f*R+m*U,a[5]=u*_+g*y+f*C+m*L,a[9]=u*b+g*A+f*P+m*T,a[13]=u*E+g*w+f*I+m*s,a[2]=l*v+n*S+p*R+h*U,a[6]=l*_+n*y+p*C+h*L,a[10]=l*b+n*A+p*P+h*T,a[14]=l*E+n*w+p*I+h*s,a[3]=r*v+t*S+x*R+i*U,a[7]=r*_+t*y+x*C+i*L,a[11]=r*b+t*A+x*P+i*T,a[15]=r*E+t*w+x*I+i*s,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},applyToBufferAttribute:function(){var e=new _;return function(t){for(var r=0,a=t.count;r<a;r++)e.x=t.getX(r),e.y=t.getY(r),e.z=t.getZ(r),e.applyMatrix4(this),t.setXYZ(r,e.x,e.y,e.z);return t}}(),determinant:function(){var t=this.elements,r=t[0],a=t[4],o=t[8],i=t[12],s=t[1],c=t[5],u=t[9],g=t[13],f=t[2],m=t[6],l=t[10],n=t[14];return t[3]*(+i*u*m-o*g*m-i*c*l+a*g*l+o*c*n-a*u*n)+t[7]*(+r*u*n-r*g*l+i*s*l-o*s*n+o*g*f-i*u*f)+t[11]*(+r*g*m-r*c*n-i*s*m+a*s*n+i*c*f-a*g*f)+t[15]*(-o*c*f-r*u*m+r*c*l+o*s*m-a*s*l+a*u*f)},transpose:function(){var e=this.elements,t=e[1];return e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},setPosition:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this},getInverse:function(o,a){var i=this.elements,s=o.elements;o=s[0];var d=s[1],e=s[2],c=s[3],u=s[4],g=s[5],f=s[6],m=s[7],l=s[8],n=s[9],p=s[10],h=s[11],r=s[12],t=s[13],x=s[14];s=s[15];var v=n*x*m-t*p*m+t*f*h-g*x*h-n*f*s+g*p*s,_=r*p*m-l*x*m-r*f*h+u*x*h+l*f*s-u*p*s,b=l*t*m-r*n*m+r*g*h-u*t*h-l*g*s+u*n*s,E=r*n*f-l*t*f-r*g*p+u*t*p+l*g*x-u*n*x,T=o*v+d*_+e*b+c*E;if(0===T){if(!0===a)throw Error("THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0");return console.warn("THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0"),this.identity()}return a=1/T,i[0]=v*a,i[1]=(t*p*c-n*x*c-t*e*h+d*x*h+n*e*s-d*p*s)*a,i[2]=(g*x*c-t*f*c+t*e*m-d*x*m-g*e*s+d*f*s)*a,i[3]=(n*f*c-g*p*c-n*e*m+d*p*m+g*e*h-d*f*h)*a,i[4]=_*a,i[5]=(l*x*c-r*p*c+r*e*h-o*x*h-l*e*s+o*p*s)*a,i[6]=(r*f*c-u*x*c-r*e*m+o*x*m+u*e*s-o*f*s)*a,i[7]=(u*p*c-l*f*c+l*e*m-o*p*m-u*e*h+o*f*h)*a,i[8]=b*a,i[9]=(r*n*c-l*t*c-r*d*h+o*t*h+l*d*s-o*n*s)*a,i[10]=(u*t*c-r*g*c+r*d*m-o*t*m-u*d*s+o*g*s)*a,i[11]=(l*g*c-u*n*c-l*d*m+o*n*m+u*d*h-o*g*h)*a,i[12]=E*a,i[13]=(l*t*e-r*n*e+r*d*p-o*t*p-l*d*x+o*n*x)*a,i[14]=(r*g*e-u*t*e-r*d*f+o*t*f+u*d*x-o*g*x)*a,i[15]=(u*n*e-l*g*e+l*d*f-o*n*f-u*d*p+o*g*p)*a,this},scale:function(e){var t=this.elements,r=e.x,a=e.y;return e=e.z,t[0]*=r,t[4]*=a,t[8]*=e,t[1]*=r,t[5]*=a,t[9]*=e,t[2]*=r,t[6]*=a,t[10]*=e,t[3]*=r,t[7]*=a,t[11]*=e,this},getMaxScaleOnAxis:function(){var e=this.elements;return cn(fn(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))},makeTranslation:function(e,t,r){return this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this},makeRotationX:function(e){var t=gn(e);return e=sn(e),this.set(1,0,0,0,0,t,-e,0,0,e,t,0,0,0,0,1),this},makeRotationY:function(e){var t=gn(e);return e=sn(e),this.set(t,0,e,0,0,1,0,0,-e,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=gn(e);return e=sn(e),this.set(t,-e,0,0,e,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,r){var a=gn(r);r=sn(r);var o=1-a,i=t.x,e=t.y;t=t.z;var n=o*i,s=o*e;return this.set(n*i+a,n*e-r*t,n*t+r*e,0,n*e+r*t,s*e+a,s*t-r*i,0,n*t-r*e,s*t+r*i,o*t*t+a,0,0,0,0,1),this},makeScale:function(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this},makeShear:function(e,t,r){return this.set(1,t,r,0,e,1,r,0,e,t,1,0,0,0,0,1),this},compose:function(e,t,r){return this.makeRotationFromQuaternion(t),this.scale(r),this.setPosition(e),this},decompose:function(){var t=new _,r=new i;return function(a,o,i){var e=this.elements,n=t.set(e[0],e[1],e[2]).length(),s=t.set(e[4],e[5],e[6]).length(),l=t.set(e[8],e[9],e[10]).length();0>this.determinant()&&(n=-n),a.x=e[12],a.y=e[13],a.z=e[14],r.copy(this),a=1/n,e=1/s;var p=1/l;return r.elements[0]*=a,r.elements[1]*=a,r.elements[2]*=a,r.elements[4]*=e,r.elements[5]*=e,r.elements[6]*=e,r.elements[8]*=p,r.elements[9]*=p,r.elements[10]*=p,o.setFromRotationMatrix(r),i.x=n,i.y=s,i.z=l,this}}(),makePerspective:function(t,r,a,o,i,e){void 0===e&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var n=this.elements;return n[0]=2*i/(r-t),n[4]=0,n[8]=(r+t)/(r-t),n[12]=0,n[1]=0,n[5]=2*i/(a-o),n[9]=(a+o)/(a-o),n[13]=0,n[2]=0,n[6]=0,n[10]=-(e+i)/(e-i),n[14]=-2*e*i/(e-i),n[3]=0,n[7]=0,n[11]=-1,n[15]=0,this},makeOrthographic:function(t,r,a,o,i,e){var n=this.elements,s=1/(r-t),l=1/(a-o),p=1/(e-i);return n[0]=2*s,n[4]=0,n[8]=0,n[12]=-((r+t)*s),n[1]=0,n[5]=2*l,n[9]=0,n[13]=-((a+o)*l),n[2]=0,n[6]=0,n[10]=-2*p,n[14]=-((e+i)*p),n[3]=0,n[7]=0,n[11]=0,n[15]=1,this},equals:function(e){var t=this.elements;e=e.elements;for(var r=0;16>r;r++)if(t[r]!==e[r])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var r=0;16>r;r++)this.elements[r]=e[r+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}),Object.assign(s,{slerp:function(e,t,r,a){return r.copy(e).slerp(t,a)},slerpFlat:function(t,a,o,i,s,e,d){var c=o[i+0],u=o[i+1],g=o[i+2];o=o[i+3],i=s[e+0];var m=s[e+1],l=s[e+2];if(s=s[e+3],o!==s||c!==i||u!==m||g!==l){e=1-d;var n=c*i+u*m+g*l+o*s,p=0<=n?1:-1,f=1-n*n;f>nn&&(f=cn(f),n=ln(f,n*p),e=sn(e*n)/f,d=sn(d*n)/f),p*=d,c=c*e+i*p,u=u*e+m*p,g=g*e+l*p,o=o*e+s*p,e===1-d&&(d=1/cn(c*c+u*u+g*g+o*o),c*=d,u*=d,g*=d,o*=d)}t[a]=c,t[a+1]=u,t[a+2]=g,t[a+3]=o}}),Object.defineProperties(s.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},w:{get:function(){return this._w},set:function(e){this._w=e,this.onChangeCallback()}}}),Object.assign(s.prototype,{set:function(e,t,r,a){return this._x=e,this._y=t,this._z=r,this._w=a,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this.onChangeCallback(),this},setFromEuler:function(t,r){if(!t||!t.isEuler)throw Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var o=t._x,i=t._y,n=t._z;t=t.order;var e=gn,s=sn,l=e(o/2),p=e(i/2);return e=e(n/2),o=s(o/2),i=s(i/2),n=s(n/2),"XYZ"===t?(this._x=o*p*e+l*i*n,this._y=l*i*e-o*p*n,this._z=l*p*n+o*i*e,this._w=l*p*e-o*i*n):"YXZ"===t?(this._x=o*p*e+l*i*n,this._y=l*i*e-o*p*n,this._z=l*p*n-o*i*e,this._w=l*p*e+o*i*n):"ZXY"===t?(this._x=o*p*e-l*i*n,this._y=l*i*e+o*p*n,this._z=l*p*n+o*i*e,this._w=l*p*e-o*i*n):"ZYX"===t?(this._x=o*p*e-l*i*n,this._y=l*i*e+o*p*n,this._z=l*p*n-o*i*e,this._w=l*p*e+o*i*n):"YZX"===t?(this._x=o*p*e+l*i*n,this._y=l*i*e+o*p*n,this._z=l*p*n-o*i*e,this._w=l*p*e-o*i*n):"XZY"===t&&(this._x=o*p*e-l*i*n,this._y=l*i*e-o*p*n,this._z=l*p*n+o*i*e,this._w=l*p*e+o*i*n),!1!==r&&this.onChangeCallback(),this},setFromAxisAngle:function(e,t){t/=2;var r=sn(t);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=gn(t),this.onChangeCallback(),this},setFromRotationMatrix:function(t){var r=t.elements,a=r[0];t=r[4];var o=r[8],i=r[1],e=r[5],n=r[9],s=r[2],l=r[6];r=r[10];var p=a+e+r;return 0<p?(a=.5/cn(p+1),this._w=.25/a,this._x=(l-n)*a,this._y=(o-s)*a,this._z=(i-t)*a):a>e&&a>r?(a=2*cn(1+a-e-r),this._w=(l-n)/a,this._x=.25*a,this._y=(t+i)/a,this._z=(o+s)/a):e>r?(a=2*cn(1+e-a-r),this._w=(o-s)/a,this._x=(t+i)/a,this._y=.25*a,this._z=(n+l)/a):(a=2*cn(1+r-a-e),this._w=(i-t)/a,this._x=(o+s)/a,this._y=(n+l)/a,this._z=.25*a),this.onChangeCallback(),this},setFromUnitVectors:function(){var e=new _,t;return function(r,a){return void 0===e&&(e=new _),t=r.dot(a)+1,1E-6>t?(t=0,yn(r.x)>yn(r.z)?e.set(-r.y,r.x,0):e.set(0,-r.z,r.y)):e.crossVectors(r,a),this._x=e.x,this._y=e.y,this._z=e.z,this._w=t,this.normalize()}}(),inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return cn(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._z=this._y=this._x=0,this._w=1):(e=1/e,this._x*=e,this._y*=e,this._z*=e,this._w*=e),this.onChangeCallback(),this},multiply:function(e,t){return void 0===t?this.multiplyQuaternions(this,e):(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t))},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(t,r){var a=t._x,o=t._y,i=t._z;t=t._w;var e=r._x,n=r._y,s=r._z;return r=r._w,this._x=a*r+t*e+o*s-i*n,this._y=o*r+t*n+i*e-a*s,this._z=i*r+t*s+a*n-o*e,this._w=t*r-a*e-o*n-i*s,this.onChangeCallback(),this},slerp:function(t,r){if(0===r)return this;if(1===r)return this.copy(t);var a=this._x,o=this._y,i=this._z,e=this._w,n=e*t._w+a*t._x+o*t._y+i*t._z;if(0>n?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,n=-n):this.copy(t),1<=n)return this._w=e,this._x=a,this._y=o,this._z=i,this;if(t=cn(1-n*n),.001>yn(t))return this._w=.5*(e+this._w),this._x=.5*(a+this._x),this._y=.5*(o+this._y),this._z=.5*(i+this._z),this;var s=ln(t,n);return n=sn((1-r)*s)/t,r=sn(r*s)/t,this._w=e*n+this._w*r,this._x=a*n+this._x*r,this._y=o*n+this._y*r,this._z=i*n+this._z*r,this.onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return void 0===t&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}}),Object.assign(_.prototype,{isVector3:!0,set:function(e,t,r){return this.x=e,this.y=t,this.z=r,this},setScalar:function(e){return this.z=this.y=this.x=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw Error("index is out of range: "+e);}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+e);}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0===t?(this.x+=e.x,this.y+=e.y,this.z+=e.z,this):(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t))},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this},sub:function(e,t){return void 0===t?(this.x-=e.x,this.y-=e.y,this.z-=e.z,this):(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t))},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0===t?(this.x*=e.x,this.y*=e.y,this.z*=e.z,this):(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t))},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:function(){var e=new s;return function(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(e.setFromEuler(t))}}(),applyAxisAngle:function(){var e=new s;return function(t,r){return this.applyQuaternion(e.setFromAxisAngle(t,r))}}(),applyMatrix3:function(e){var t=this.x,r=this.y,a=this.z;return e=e.elements,this.x=e[0]*t+e[3]*r+e[6]*a,this.y=e[1]*t+e[4]*r+e[7]*a,this.z=e[2]*t+e[5]*r+e[8]*a,this},applyMatrix4:function(t){var r=this.x,a=this.y,o=this.z;t=t.elements;var i=1/(t[3]*r+t[7]*a+t[11]*o+t[15]);return this.x=(t[0]*r+t[4]*a+t[8]*o+t[12])*i,this.y=(t[1]*r+t[5]*a+t[9]*o+t[13])*i,this.z=(t[2]*r+t[6]*a+t[10]*o+t[14])*i,this},applyQuaternion:function(t){var r=this.x,a=this.y,o=this.z,i=t.x,n=t.y,s=t.z;t=t.w;var l=t*r+n*o-s*a,p=t*a+s*r-i*o,d=t*o+i*a-n*r;return r=-i*r-n*a-s*o,this.x=l*t+r*-i+p*-s-d*-n,this.y=p*t+r*-n+d*-i-l*-s,this.z=d*t+r*-s+l*-n-p*-i,this},project:function(){var e=new i;return function(t){return e.multiplyMatrices(t.projectionMatrix,e.getInverse(t.matrixWorld)),this.applyMatrix4(e)}}(),unproject:function(){var e=new i;return function(t){return e.multiplyMatrices(t.matrixWorld,e.getInverse(t.projectionMatrix)),this.applyMatrix4(e)}}(),transformDirection:function(e){var t=this.x,r=this.y,a=this.z;return e=e.elements,this.x=e[0]*t+e[4]*r+e[8]*a,this.y=e[1]*t+e[5]*r+e[9]*a,this.z=e[2]*t+e[6]*r+e[10]*a,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=hn(this.x,e.x),this.y=hn(this.y,e.y),this.z=hn(this.z,e.z),this},max:function(e){return this.x=fn(this.x,e.x),this.y=fn(this.y,e.y),this.z=fn(this.z,e.z),this},clamp:function(e,t){return this.x=fn(e.x,hn(t.x,this.x)),this.y=fn(e.y,hn(t.y,this.y)),this.z=fn(e.z,hn(t.z,this.z)),this},clampScalar:function(){var e=new _,t=new _;return function(r,a){return e.set(r,r,r),t.set(a,a,a),this.clamp(e,t)}}(),clampLength:function(e,t){var r=this.length();return this.divideScalar(r||1).multiplyScalar(fn(e,hn(t,r)))},floor:function(){return this.x=xn(this.x),this.y=xn(this.y),this.z=xn(this.z),this},ceil:function(){return this.x=rn(this.x),this.y=rn(this.y),this.z=rn(this.z),this},round:function(){return this.x=tn(this.x),this.y=tn(this.y),this.z=tn(this.z),this},roundToZero:function(){return this.x=0>this.x?rn(this.x):xn(this.x),this.y=0>this.y?rn(this.y):xn(this.y),this.z=0>this.z?rn(this.z):xn(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return cn(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return yn(this.x)+yn(this.y)+yn(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,r){return this.subVectors(t,e).multiplyScalar(r).add(e)},cross:function(e,t){return void 0===t?this.crossVectors(this,e):(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t))},crossVectors:function(t,r){var a=t.x,o=t.y;t=t.z;var i=r.x,e=r.y;return r=r.z,this.x=o*r-t*e,this.y=t*i-a*r,this.z=a*e-o*i,this},projectOnVector:function(e){var t=e.dot(this)/e.lengthSq();return this.copy(e).multiplyScalar(t)},projectOnPlane:function(){var e=new _;return function(t){return e.copy(this).projectOnVector(t),this.sub(e)}}(),reflect:function(){var e=new _;return function(t){return this.sub(e.copy(t).multiplyScalar(2*this.dot(t)))}}(),angleTo:function(e){return e=this.dot(e)/cn(this.lengthSq()*e.lengthSq()),en(vn.clamp(e,-1,1))},distanceTo:function(e){return cn(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,r=this.y-e.y;return e=this.z-e.z,t*t+r*r+e*e},manhattanDistanceTo:function(e){return yn(this.x-e.x)+yn(this.y-e.y)+yn(this.z-e.z)},setFromSpherical:function(e){var t=sn(e.phi)*e.radius;return this.x=t*sn(e.theta),this.y=gn(e.phi)*e.radius,this.z=t*gn(e.theta),this},setFromCylindrical:function(e){return this.x=e.radius*sn(e.theta),this.y=e.y,this.z=e.radius*gn(e.theta),this},setFromMatrixPosition:function(e){return e=e.elements,this.x=e[12],this.y=e[13],this.z=e[14],this},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length();return e=this.setFromMatrixColumn(e,2).length(),this.x=t,this.y=r,this.z=e,this},setFromMatrixColumn:function(e,t){return this.fromArray(e.elements,4*t)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromBufferAttribute:function(e,t,r){return void 0!==r&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}}),Object.assign(u.prototype,{isMatrix3:!0,set:function(t,r,a,o,i,e,n,s,l){var p=this.elements;return p[0]=t,p[1]=o,p[2]=n,p[3]=r,p[4]=i,p[5]=s,p[6]=a,p[7]=e,p[8]=l,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return new this.constructor().fromArray(this.elements)},copy:function(e){var t=this.elements;return e=e.elements,t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],this},setFromMatrix4:function(e){return e=e.elements,this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this},applyToBufferAttribute:function(){var e=new _;return function(t){for(var r=0,a=t.count;r<a;r++)e.x=t.getX(r),e.y=t.getY(r),e.z=t.getZ(r),e.applyMatrix3(this),t.setXYZ(r,e.x,e.y,e.z);return t}}(),multiply:function(e){return this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(o,a){var i=o.elements,s=a.elements;a=this.elements,o=i[0];var d=i[3],e=i[6],c=i[1],u=i[4],g=i[7],f=i[2],m=i[5];i=i[8];var l=s[0],n=s[3],p=s[6],h=s[1],r=s[4],t=s[7],y=s[2],x=s[5];return s=s[8],a[0]=o*l+d*h+e*y,a[3]=o*n+d*r+e*x,a[6]=o*p+d*t+e*s,a[1]=c*l+u*h+g*y,a[4]=c*n+u*r+g*x,a[7]=c*p+u*t+g*s,a[2]=f*l+m*h+i*y,a[5]=f*n+m*r+i*x,a[8]=f*p+m*t+i*s,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var t=this.elements,r=t[0],a=t[1],o=t[2],i=t[3],e=t[4],n=t[5],s=t[6],l=t[7];return t=t[8],r*e*t-r*n*l-a*i*t+a*n*s+o*i*l-o*e*s},getInverse:function(t,a){t&&t.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var o=t.elements;t=this.elements;var i=o[0],s=o[1],e=o[2],d=o[3],c=o[4],u=o[5],g=o[6],m=o[7];o=o[8];var l=o*c-u*m,n=u*g-o*d,p=m*d-c*g,f=i*l+s*n+e*p;if(0===f){if(!0===a)throw Error("THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0");return console.warn("THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0"),this.identity()}return a=1/f,t[0]=l*a,t[1]=(e*m-o*s)*a,t[2]=(u*s-e*c)*a,t[3]=n*a,t[4]=(o*i-e*g)*a,t[5]=(e*d-u*i)*a,t[6]=p*a,t[7]=(s*g-m*i)*a,t[8]=(c*i-s*d)*a,this},transpose:function(){var e=this.elements,t=e[1];return e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},setUvTransform:function(t,r,a,o,i,n,s){var l=gn(i);i=sn(i),this.set(a*l,a*i,-a*(l*n+i*s)+n+t,-o*i,o*l,-o*(-i*n+l*s)+s+r,0,0,1)},scale:function(e,t){var r=this.elements;return r[0]*=e,r[3]*=e,r[6]*=e,r[1]*=t,r[4]*=t,r[7]*=t,this},rotate:function(t){var r=gn(t);t=sn(t);var o=this.elements,i=o[0],n=o[3],e=o[6],s=o[1],l=o[4],p=o[7];return o[0]=r*i+t*s,o[3]=r*n+t*l,o[6]=r*e+t*p,o[1]=-t*i+r*s,o[4]=-t*n+r*l,o[7]=-t*e+r*p,this},translate:function(e,t){var r=this.elements;return r[0]+=e*r[2],r[3]+=e*r[5],r[6]+=e*r[8],r[1]+=t*r[2],r[4]+=t*r[5],r[7]+=t*r[8],this},equals:function(e){var t=this.elements;e=e.elements;for(var r=0;9>r;r++)if(t[r]!==e[r])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var r=0;9>r;r++)this.elements[r]=e[r+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}});var S=0;r.DEFAULT_IMAGE=void 0,r.DEFAULT_MAPPING=300,r.prototype=Object.assign(Object.create(t.prototype),{constructor:r,isTexture:!0,clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(t){var r=void 0===t||"string"===typeof t;if(!r&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];var o={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var i=this.image;if(void 0===i.uuid&&(i.uuid=vn.generateUUID()),!r&&void 0===t.images[i.uuid]){var n=t.images,e=i.uuid,s=i.uuid;if(i instanceof HTMLCanvasElement)var l=i;else{l=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),l.width=i.width,l.height=i.height;var p=l.getContext("2d");i instanceof ImageData?p.putImageData(i,0,0):p.drawImage(i,0,0,i.width,i.height)}l=2048<l.width||2048<l.height?l.toDataURL("image/jpeg",.6):l.toDataURL("image/png"),n[e]={uuid:s,url:l}}o.image=i.uuid}return r||(t.textures[this.uuid]=o),o},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(300===this.mapping){if(e.applyMatrix3(this.matrix),0>e.x||1<e.x)switch(this.wrapS){case 1E3:e.x-=xn(e.x);break;case 1001:e.x=0>e.x?0:1;break;case 1002:e.x=1===yn(xn(e.x)%2)?rn(e.x)-e.x:e.x-xn(e.x);}if(0>e.y||1<e.y)switch(this.wrapT){case 1E3:e.y-=xn(e.y);break;case 1001:e.y=0>e.y?0:1;break;case 1002:e.y=1===yn(xn(e.y)%2)?rn(e.y)-e.y:e.y-xn(e.y);}this.flipY&&(e.y=1-e.y)}}}),Object.defineProperty(r.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(j.prototype,{isVector4:!0,set:function(e,t,r,a){return this.x=e,this.y=t,this.z=r,this.w=a,this},setScalar:function(e){return this.w=this.z=this.y=this.x=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw Error("index is out of range: "+e);}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+e);}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0===e.w?1:e.w,this},add:function(e,t){return void 0===t?(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this):(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t))},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this},sub:function(e,t){return void 0===t?(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this):(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t))},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(t){var r=this.x,a=this.y,o=this.z,i=this.w;return t=t.elements,this.x=t[0]*r+t[4]*a+t[8]*o+t[12]*i,this.y=t[1]*r+t[5]*a+t[9]*o+t[13]*i,this.z=t[2]*r+t[6]*a+t[10]*o+t[14]*i,this.w=t[3]*r+t[7]*a+t[11]*o+t[15]*i,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*en(e.w);var t=cn(1-e.w*e.w);return 1E-4>t?(this.x=1,this.z=this.y=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(t){t=t.elements;var r=t[0],a=t[4],o=t[8],i=t[1],e=t[5],n=t[9],s=t[2],l=t[6],p=t[10];return .01>yn(a-i)&&.01>yn(o-s)&&.01>yn(n-l)?.1>yn(a+i)&&.1>yn(o+s)&&.1>yn(n+l)&&.1>yn(r+e+p-3)?(this.set(1,0,0,0),this):(t=dn,r=(r+1)/2,e=(e+1)/2,p=(p+1)/2,a=(a+i)/4,o=(o+s)/4,n=(n+l)/4,r>e&&r>p?.01>r?(l=0,a=s=.707106781):(l=cn(r),s=a/l,a=o/l):e>p?.01>e?(l=.707106781,s=0,a=.707106781):(s=cn(e),l=a/s,a=n/s):.01>p?(s=l=.707106781,a=0):(a=cn(p),l=o/a,s=n/a),this.set(l,s,a,t),this):(t=cn((l-n)*(l-n)+(o-s)*(o-s)+(i-a)*(i-a)),.001>yn(t)&&(t=1),this.x=(l-n)/t,this.y=(o-s)/t,this.z=(i-a)/t,this.w=en((r+e+p-1)/2),this)},min:function(e){return this.x=hn(this.x,e.x),this.y=hn(this.y,e.y),this.z=hn(this.z,e.z),this.w=hn(this.w,e.w),this},max:function(e){return this.x=fn(this.x,e.x),this.y=fn(this.y,e.y),this.z=fn(this.z,e.z),this.w=fn(this.w,e.w),this},clamp:function(e,t){return this.x=fn(e.x,hn(t.x,this.x)),this.y=fn(e.y,hn(t.y,this.y)),this.z=fn(e.z,hn(t.z,this.z)),this.w=fn(e.w,hn(t.w,this.w)),this},clampScalar:function(){var e,t;return function(r,a){return void 0===e&&(e=new j,t=new j),e.set(r,r,r,r),t.set(a,a,a,a),this.clamp(e,t)}}(),clampLength:function(e,t){var r=this.length();return this.divideScalar(r||1).multiplyScalar(fn(e,hn(t,r)))},floor:function(){return this.x=xn(this.x),this.y=xn(this.y),this.z=xn(this.z),this.w=xn(this.w),this},ceil:function(){return this.x=rn(this.x),this.y=rn(this.y),this.z=rn(this.z),this.w=rn(this.w),this},round:function(){return this.x=tn(this.x),this.y=tn(this.y),this.z=tn(this.z),this.w=tn(this.w),this},roundToZero:function(){return this.x=0>this.x?rn(this.x):xn(this.x),this.y=0>this.y?rn(this.y):xn(this.y),this.z=0>this.z?rn(this.z):xn(this.z),this.w=0>this.w?rn(this.w):xn(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return cn(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return yn(this.x)+yn(this.y)+yn(this.z)+yn(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,r){return this.subVectors(t,e).multiplyScalar(r).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromBufferAttribute:function(e,t,r){return void 0!==r&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}}),E.prototype=Object.assign(Object.create(t.prototype),{constructor:E,isWebGLRenderTarget:!0,setSize:function(e,t){(this.width!==e||this.height!==t)&&(this.width=e,this.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),n.prototype=Object.create(E.prototype),n.prototype.constructor=n,n.prototype.isWebGLRenderTargetCube=!0,l.prototype=Object.create(r.prototype),l.prototype.constructor=l,l.prototype.isDataTexture=!0,p.prototype=Object.create(r.prototype),p.prototype.constructor=p,p.prototype.isCubeTexture=!0,Object.defineProperty(p.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}});var _n=new r,He=new p,Ie=[],Ce=[],Ee=new Float32Array(16),Ge=new Float32Array(9);De.prototype.setValue=function(t,r){for(var a=this.seq,o=0,i=a.length,e;o!==i;++o)e=a[o],e.setValue(t,r[e.id])};var Fe=/([\w\d_]+)(\])?(\[|\.)?/g;Me.prototype.setValue=function(e,t,r){t=this.map[t],void 0!==t&&t.setValue(e,r,this.renderer)},Me.prototype.setOptional=function(e,t,r){t=t[r],void 0!==t&&this.setValue(e,r,t)},Me.upload=function(t,r,a,o){for(var i=0,e=r.length;i!==e;++i){var n=r[i],s=a[n.id];!1!==s.needsUpdate&&n.setValue(t,s.value,o)}},Me.seqWithValue=function(t,r){for(var a=[],o=0,i=t.length,e;o!==i;++o)e=t[o],e.id in r&&a.push(e);return a};var bn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Object.assign(Ne.prototype,{isColor:!0,r:1,g:1,b:1,set:function(e){return e&&e.isColor?this.copy(e):"number"===typeof e?this.setHex(e):"string"===typeof e&&this.setStyle(e),this},setScalar:function(e){return this.b=this.g=this.r=e,this},setHex:function(e){return e=xn(e),this.r=(255&e>>16)/255,this.g=(255&e>>8)/255,this.b=(255&e)/255,this},setRGB:function(e,t,r){return this.r=e,this.g=t,this.b=r,this},setHSL:function(){function e(e,t,r){return 0>r&&(r+=1),1<r&&--r,r<1/6?e+6*(t-e)*r:.5>r?t:r<2/3?e+6*(t-e)*(2/3-r):e}return function(t,r,a){return t=vn.euclideanModulo(t,1),r=vn.clamp(r,0,1),a=vn.clamp(a,0,1),0===r?this.r=this.g=this.b=a:(r=.5>=a?a*(1+r):a+r-a*r,a=2*a-r,this.r=e(a,r,t+1/3),this.g=e(a,r,t),this.b=e(a,r,t-1/3)),this}}(),setStyle:function(t){function r(e){void 0!==e&&1>parseFloat(e)&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}var a;if(a=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){var o=a[2];switch(a[1]){case"rgb":case"rgba":if(a=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=hn(255,parseInt(a[1],10))/255,this.g=hn(255,parseInt(a[2],10))/255,this.b=hn(255,parseInt(a[3],10))/255,r(a[5]),this;if(a=/^(\d+)%\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=hn(100,parseInt(a[1],10))/100,this.g=hn(100,parseInt(a[2],10))/100,this.b=hn(100,parseInt(a[3],10))/100,r(a[5]),this;break;case"hsl":case"hsla":if(a=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o)){o=parseFloat(a[1])/360;var i=parseInt(a[2],10)/100,e=parseInt(a[3],10)/100;return r(a[5]),this.setHSL(o,i,e)}}}else if(a=/^#([A-Fa-f0-9]+)$/.exec(t)){if(a=a[1],o=a.length,3===o)return this.r=parseInt(a.charAt(0)+a.charAt(0),16)/255,this.g=parseInt(a.charAt(1)+a.charAt(1),16)/255,this.b=parseInt(a.charAt(2)+a.charAt(2),16)/255,this;if(6===o)return this.r=parseInt(a.charAt(0)+a.charAt(1),16)/255,this.g=parseInt(a.charAt(2)+a.charAt(3),16)/255,this.b=parseInt(a.charAt(4)+a.charAt(5),16)/255,this}return t&&0<t.length&&(a=bn[t],void 0===a?console.warn("THREE.Color: Unknown color "+t):this.setHex(a)),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return void 0===t&&(t=2),this.r=pn(e.r,t),this.g=pn(e.g,t),this.b=pn(e.b,t),this},copyLinearToGamma:function(e,t){return void 0===t&&(t=2),t=0<t?1/t:1,this.r=pn(e.r,t),this.g=pn(e.g,t),this.b=pn(e.b,t),this},convertGammaToLinear:function(){var e=this.r,t=this.g,r=this.b;return this.r=e*e,this.g=t*t,this.b=r*r,this},convertLinearToGamma:function(){return this.r=cn(this.r),this.g=cn(this.g),this.b=cn(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(t){t=t||{h:0,s:0,l:0};var r=this.r,a=this.g,o=this.b,i=fn(r,a,o),e=hn(r,a,o),n=(e+i)/2,s;if(e===i)e=s=0;else{var l=i-e;e=.5>=n?l/(i+e):l/(2-i-e),i===r?s=(a-o)/l+(a<o?6:0):i===a?s=(o-r)/l+2:i===o?s=(r-a)/l+4:void 0,s/=6}return t.h=s,t.s=e,t.l=n,t},getStyle:function(){return"rgb("+(0|255*this.r)+","+(0|255*this.g)+","+(0|255*this.b)+")"},offsetHSL:function(e,t,r){var a=this.getHSL();return a.h+=e,a.s+=t,a.l+=r,this.setHSL(a.h,a.s,a.l),this},add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=fn(0,this.r-e.r),this.g=fn(0,this.g-e.g),this.b=fn(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){return void 0===t&&(t=0),this.r=e[t],this.g=e[t+1],this.b=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e},toJSON:function(){return this.getHex()}});var En={common:{diffuse:{value:new Ne(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new u},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new o(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:2.5E-4},fogNear:{value:1},fogFar:{value:2E3},fogColor:{value:new Ne(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new Ne(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new u}}},I={merge:function(t){for(var r={},a=0;a<t.length;a++){var o=this.clone(t[a]),i;for(i in o)r[i]=o[i]}return r},clone:function(t){var r={},a;for(a in t)for(var o in r[a]={},t[a]){var i=t[a][o];r[a][o]=i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture)?i.clone():Array.isArray(i)?i.slice():i}return r}},Ea={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"\nvec3 transformed = vec3( position );\n",beginnormal_vertex:"\nvec3 objectNormal = vec3( normal );\n",bsdfs:"float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t}\n\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif\n",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\n",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n",defaultnormal_vertex:"vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n",encodings_fragment:"  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM            = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat D      = max( maxRange / maxRGB, 1.0 );\n\tD            = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n\tXp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract(Le);\n\tvResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n\treturn vec4( max(vRGB, 0.0), 1.0 );\n}\n",envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n",envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n",fog_vertex:"\n#ifdef USE_FOG\nfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n  varying float fogDepth;\n#endif\n",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif\n",gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif\n",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n",lights_pars_begin:"uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n",lights_pars_maps:"#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos - halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos + halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos + halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos - halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearCoatRadiance = vec3( 0.0 );\n#endif\n",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, 8 );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\n\t#ifndef STANDARD\n\t\tclearCoatRadiance += getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), 8 );\n\t#endif\n#endif\n",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\tgl_Position.z *= gl_Position.w;\n\t#endif\n#endif\n",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n",map_particle_fragment:"#ifdef USE_MAP\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform mat3 uvTransform;\n\tuniform sampler2D map;\n#endif\n",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif\n",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n#endif\n",normal_fragment_maps:"#ifdef USE_NORMALMAP\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N = normalize( surf_norm );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif\n",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",project_vertex:"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;\n",dithering_fragment:"#if defined( DITHERING )\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif\n",dithering_pars_fragment:"#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif\n",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif\n",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif\n",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",tonemapping_pars_fragment:"#ifndef saturate\n\t#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\n",uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif\n",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n",cube_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}\n",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}\n",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}\n",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",equirect_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}\n",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}\n",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}\n",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <fog_fragment>\n}\n",shadow_vert:"#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n"},R={basic:{uniforms:I.merge([En.common,En.specularmap,En.envmap,En.aomap,En.lightmap,En.fog]),vertexShader:Ea.meshbasic_vert,fragmentShader:Ea.meshbasic_frag},lambert:{uniforms:I.merge([En.common,En.specularmap,En.envmap,En.aomap,En.lightmap,En.emissivemap,En.fog,En.lights,{emissive:{value:new Ne(0)}}]),vertexShader:Ea.meshlambert_vert,fragmentShader:Ea.meshlambert_frag},phong:{uniforms:I.merge([En.common,En.specularmap,En.envmap,En.aomap,En.lightmap,En.emissivemap,En.bumpmap,En.normalmap,En.displacementmap,En.gradientmap,En.fog,En.lights,{emissive:{value:new Ne(0)},specular:{value:new Ne(1118481)},shininess:{value:30}}]),vertexShader:Ea.meshphong_vert,fragmentShader:Ea.meshphong_frag},standard:{uniforms:I.merge([En.common,En.envmap,En.aomap,En.lightmap,En.emissivemap,En.bumpmap,En.normalmap,En.displacementmap,En.roughnessmap,En.metalnessmap,En.fog,En.lights,{emissive:{value:new Ne(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:Ea.meshphysical_vert,fragmentShader:Ea.meshphysical_frag},points:{uniforms:I.merge([En.points,En.fog]),vertexShader:Ea.points_vert,fragmentShader:Ea.points_frag},dashed:{uniforms:I.merge([En.common,En.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Ea.linedashed_vert,fragmentShader:Ea.linedashed_frag},depth:{uniforms:I.merge([En.common,En.displacementmap]),vertexShader:Ea.depth_vert,fragmentShader:Ea.depth_frag},normal:{uniforms:I.merge([En.common,En.bumpmap,En.normalmap,En.displacementmap,{opacity:{value:1}}]),vertexShader:Ea.normal_vert,fragmentShader:Ea.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Ea.cube_vert,fragmentShader:Ea.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Ea.equirect_vert,fragmentShader:Ea.equirect_frag},distanceRGBA:{uniforms:I.merge([En.common,En.displacementmap,{referencePosition:{value:new _},nearDistance:{value:1},farDistance:{value:1E3}}]),vertexShader:Ea.distanceRGBA_vert,fragmentShader:Ea.distanceRGBA_frag},shadow:{uniforms:I.merge([En.lights,En.fog,{color:{value:new Ne(0)},opacity:{value:1}}]),vertexShader:Ea.shadow_vert,fragmentShader:Ea.shadow_frag}};R.physical={uniforms:I.merge([R.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:Ea.meshphysical_vert,fragmentShader:Ea.meshphysical_frag},H.prototype=Object.create(r.prototype),H.prototype.constructor=H;var Tn=0;Ke.prototype=Object.assign(Object.create(t.prototype),{constructor:Ke,isMaterial:!0,onBeforeCompile:function(){},setValues:function(e){if(void 0!==e)for(var t in e){var r=e[t];if(void 0===r)console.warn("THREE.Material: '"+t+"' parameter is undefined.");else if("shading"===t)console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=!(1!==r);else{var a=this[t];void 0===a?console.warn("THREE."+this.type+": '"+t+"' is not a property of this material."):a&&a.isColor?a.set(r):a&&a.isVector3&&r&&r.isVector3?a.copy(r):this[t]="overdraw"===t?+r:r}}},toJSON:function(e){function t(e){var t=[],r;for(r in e){var a=e[r];delete a.metadata,t.push(a)}return t}var r=void 0===e||"string"===typeof e;r&&(e={textures:{},images:{}});var o={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};return o.uuid=this.uuid,o.type=this.type,""!==this.name&&(o.name=this.name),this.color&&this.color.isColor&&(o.color=this.color.getHex()),void 0!==this.roughness&&(o.roughness=this.roughness),void 0!==this.metalness&&(o.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(o.emissive=this.emissive.getHex()),1!==this.emissiveIntensity&&(o.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(o.specular=this.specular.getHex()),void 0!==this.shininess&&(o.shininess=this.shininess),void 0!==this.clearCoat&&(o.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(o.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(o.map=this.map.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(o.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(o.lightMap=this.lightMap.toJSON(e).uuid),this.bumpMap&&this.bumpMap.isTexture&&(o.bumpMap=this.bumpMap.toJSON(e).uuid,o.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(o.normalMap=this.normalMap.toJSON(e).uuid,o.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(o.displacementMap=this.displacementMap.toJSON(e).uuid,o.displacementScale=this.displacementScale,o.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(o.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(o.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(o.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(o.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(o.envMap=this.envMap.toJSON(e).uuid,o.reflectivity=this.reflectivity),this.gradientMap&&this.gradientMap.isTexture&&(o.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.size&&(o.size=this.size),void 0!==this.sizeAttenuation&&(o.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(o.blending=this.blending),!0===this.flatShading&&(o.flatShading=this.flatShading),0!==this.side&&(o.side=this.side),0!==this.vertexColors&&(o.vertexColors=this.vertexColors),1>this.opacity&&(o.opacity=this.opacity),!0===this.transparent&&(o.transparent=this.transparent),o.depthFunc=this.depthFunc,o.depthTest=this.depthTest,o.depthWrite=this.depthWrite,0!==this.rotation&&(o.rotation=this.rotation),1!==this.linewidth&&(o.linewidth=this.linewidth),void 0!==this.dashSize&&(o.dashSize=this.dashSize),void 0!==this.gapSize&&(o.gapSize=this.gapSize),void 0!==this.scale&&(o.scale=this.scale),!0===this.dithering&&(o.dithering=!0),0<this.alphaTest&&(o.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(o.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(o.wireframe=this.wireframe),1<this.wireframeLinewidth&&(o.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(o.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(o.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(o.morphTargets=!0),!0===this.skinning&&(o.skinning=!0),!1===this.visible&&(o.visible=!1),"{}"!==JSON.stringify(this.userData)&&(o.userData=this.userData),r&&(r=t(e.textures),e=t(e.images),0<r.length&&(o.textures=r),0<e.length&&(o.images=e)),o},clone:function(){return new this.constructor().copy(this)},copy:function(t){this.name=t.name,this.fog=t.fog,this.lights=t.lights,this.blending=t.blending,this.side=t.side,this.flatShading=t.flatShading,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.premultipliedAlpha=t.premultipliedAlpha,this.overdraw=t.overdraw,this.visible=t.visible,this.userData=JSON.parse(JSON.stringify(t.userData)),this.clipShadows=t.clipShadows,this.clipIntersection=t.clipIntersection;var r=t.clippingPlanes,a=null;if(null!==r){var o=r.length;a=Array(o);for(var i=0;i!==o;++i)a[i]=r[i].clone()}return this.clippingPlanes=a,this.shadowSide=t.shadowSide,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),et.prototype=Object.create(Ke.prototype),et.prototype.constructor=et,et.prototype.isMeshDepthMaterial=!0,et.prototype.copy=function(e){return Ke.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},tt.prototype=Object.create(Ke.prototype),tt.prototype.constructor=tt,tt.prototype.isMeshDistanceMaterial=!0,tt.prototype.copy=function(e){return Ke.prototype.copy.call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this},Object.assign(rt.prototype,{isBox3:!0,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromArray:function(t){for(var r=Infinity,a=Infinity,o=Infinity,i=-Infinity,e=-Infinity,s=-Infinity,p=0,d=t.length;p<d;p+=3){var c=t[p],m=t[p+1],l=t[p+2];c<r&&(r=c),m<a&&(a=m),l<o&&(o=l),c>i&&(i=c),m>e&&(e=m),l>s&&(s=l)}return this.min.set(r,a,o),this.max.set(i,e,s),this},setFromBufferAttribute:function(t){for(var r=Infinity,a=Infinity,o=Infinity,i=-Infinity,e=-Infinity,s=-Infinity,p=0,d=t.count;p<d;p++){var c=t.getX(p),m=t.getY(p),l=t.getZ(p);c<r&&(r=c),m<a&&(a=m),l<o&&(o=l),c>i&&(i=c),m>e&&(e=m),l>s&&(s=l)}return this.min.set(r,a,o),this.max.set(i,e,s),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new _;return function(t,r){return r=e.copy(r).multiplyScalar(.5),this.min.copy(t).sub(r),this.max.copy(t).add(r),this}}(),setFromObject:function(e){return this.makeEmpty(),this.expandByObject(e)},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=Infinity,this.max.x=this.max.y=this.max.z=-Infinity,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){return e=e||new _,this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return e=e||new _,this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},expandByObject:function(){function t(t){var n=t.geometry;if(void 0!==n)if(n.isGeometry)for(n=n.vertices,o=0,i=n.length;o<i;o++)r.copy(n[o]),r.applyMatrix4(t.matrixWorld),e.expandByPoint(r);else if(n.isBufferGeometry&&(n=n.attributes.position,void 0!==n))for(o=0,i=n.count;o<i;o++)r.fromBufferAttribute(n,o).applyMatrix4(t.matrixWorld),e.expandByPoint(r)}var r=new _,e,o,i;return function(r){return e=this,r.updateMatrixWorld(!0),r.traverse(t),this}}(),containsPoint:function(e){return e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z?!1:!0},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){return(t||new _).set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z?!1:!0},intersectsSphere:function(){var e=new _;return function(t){return this.clampPoint(t.center,e),e.distanceToSquared(t.center)<=t.radius*t.radius}}(),intersectsPlane:function(e){if(0<e.normal.x)var t=e.normal.x*this.min.x,r=e.normal.x*this.max.x;else t=e.normal.x*this.max.x,r=e.normal.x*this.min.x;return 0<e.normal.y?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),0<e.normal.z?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=e.constant&&r>=e.constant},intersectsTriangle:function(){function t(t){var p=0,c;for(c=t.length-3;p<=c;p+=3){s.fromArray(t,p);var e=d.x*yn(s.x)+d.y*yn(s.y)+d.z*yn(s.z),m=r.dot(s),u=o.dot(s),n=i.dot(s);if(fn(-fn(m,u,n),hn(m,u,n))>e)return!1}return!0}var r=new _,o=new _,i=new _,a=new _,e=new _,n=new _,s=new _,p=new _,d=new _,c=new _;return function(s){return!this.isEmpty()&&(this.getCenter(p),d.subVectors(this.max,p),r.subVectors(s.a,p),o.subVectors(s.b,p),i.subVectors(s.c,p),a.subVectors(o,r),e.subVectors(i,o),n.subVectors(r,i),s=[0,-a.z,a.y,0,-e.z,e.y,0,-n.z,n.y,a.z,0,-a.x,e.z,0,-e.x,n.z,0,-n.x,-a.y,a.x,0,-e.y,e.x,0,-n.y,n.x,0],!!t(s))&&(s=[1,0,0,0,1,0,0,0,1],!!t(s))&&(c.crossVectors(a,e),s=[c.x,c.y,c.z],t(s))}}(),clampPoint:function(e,t){return(t||new _).copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new _;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),getBoundingSphere:function(){var e=new _;return function(t){return t=t||new at,this.getCenter(t.center),t.radius=.5*this.getSize(e).length(),t}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:function(){var e=[new _,new _,new _,new _,new _,new _,new _,new _];return function(t){return this.isEmpty()?this:(e[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),e[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),e[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),e[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),e[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),e[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),e[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),e[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(e),this)}}(),translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}),Object.assign(at.prototype,{set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:function(){var t=new rt;return function(r,a){var o=this.center;void 0===a?t.setFromPoints(r).getCenter(o):o.copy(a);for(var i=a=0,e=r.length;i<e;i++)a=fn(a,o.distanceToSquared(r[i]));return this.radius=cn(a),this}}(),clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return 0>=this.radius},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return yn(e.distanceToPoint(this.center))<=this.radius},clampPoint:function(e,t){var r=this.center.distanceToSquared(e);return t=t||new _,t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t},getBoundingBox:function(e){return e=e||new rt,e.set(this.center,this.center),e.expandByScalar(this.radius),e},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius*=e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}}),Object.assign(ot.prototype,{set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,r,a){return this.normal.set(e,t,r),this.constant=a,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(){var t=new _,r=new _;return function(a,o,i){return o=t.subVectors(i,o).cross(r.subVectors(a,o)).normalize(),this.setFromNormalAndCoplanarPoint(o,a),this}}(),clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return(t||new _).copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)},intersectLine:function(){var t=new _;return function(r,a){a=a||new _;var o=r.delta(t),i=this.normal.dot(o);if(0===i){if(0===this.distanceToPoint(r.start))return a.copy(r.start);}else if(i=-(r.start.dot(this.normal)+this.constant)/i,!(0>i||1<i))return a.copy(o).multiplyScalar(i).add(r.start)}}(),intersectsLine:function(e){var t=this.distanceToPoint(e.start);return e=this.distanceToPoint(e.end),0>t&&0<e||0>e&&0<t},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){return(e||new _).copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var e=new _,t=new u;return function(r,a){return a=a||t.getNormalMatrix(r),r=this.coplanarPoint(e).applyMatrix4(r),a=this.normal.applyMatrix3(a).normalize(),this.constant=-r.dot(a),this}}(),translate:function(e){return this.constant-=e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}}),Object.assign(it.prototype,{set:function(t,r,a,o,i,e){var n=this.planes;return n[0].copy(t),n[1].copy(r),n[2].copy(a),n[3].copy(o),n[4].copy(i),n[5].copy(e),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){for(var t=this.planes,r=0;6>r;r++)t[r].copy(e.planes[r]);return this},setFromMatrix:function(o){var a=this.planes,i=o.elements;o=i[0];var s=i[1],d=i[2],e=i[3],c=i[4],u=i[5],g=i[6],f=i[7],m=i[8],l=i[9],n=i[10],p=i[11],h=i[12],r=i[13],t=i[14];return i=i[15],a[0].setComponents(e-o,f-c,p-m,i-h).normalize(),a[1].setComponents(e+o,f+c,p+m,i+h).normalize(),a[2].setComponents(e+s,f+u,p+l,i+r).normalize(),a[3].setComponents(e-s,f-u,p-l,i-r).normalize(),a[4].setComponents(e-d,f-g,p-n,i-t).normalize(),a[5].setComponents(e+d,f+g,p+n,i+t).normalize(),this},intersectsObject:function(){var e=new at;return function(t){var r=t.geometry;return null===r.boundingSphere&&r.computeBoundingSphere(),e.copy(r.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSprite:function(){var e=new at;return function(t){return e.center.set(0,0,0),e.radius=.7071067811865476,e.applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSphere:function(e){var t=this.planes,r=e.center;e=-e.radius;for(var a=0;6>a;a++)if(t[a].distanceToPoint(r)<e)return!1;return!0},intersectsBox:function(){var t=new _,r=new _;return function(a){for(var o=this.planes,i=0,e;6>i;i++){e=o[i],t.x=0<e.normal.x?a.min.x:a.max.x,r.x=0<e.normal.x?a.max.x:a.min.x,t.y=0<e.normal.y?a.min.y:a.max.y,r.y=0<e.normal.y?a.max.y:a.min.y,t.z=0<e.normal.z?a.min.z:a.max.z,r.z=0<e.normal.z?a.max.z:a.min.z;var n=e.distanceToPoint(t);if(e=e.distanceToPoint(r),0>n&&0>e)return!1}return!0}}(),containsPoint:function(e){for(var t=this.planes,r=0;6>r;r++)if(0>t[r].distanceToPoint(e))return!1;return!0}}),st.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],st.DefaultOrder="XYZ",Object.defineProperties(st.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},order:{get:function(){return this._order},set:function(e){this._order=e,this.onChangeCallback()}}}),Object.assign(st.prototype,{isEuler:!0,set:function(e,t,r,a){return this._x=e,this._y=t,this._z=r,this._order=a||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this.onChangeCallback(),this},setFromRotationMatrix:function(t,r,a){var o=Math.asin,i=vn.clamp,s=t.elements;t=s[0];var e=s[4],p=s[8],d=s[1],c=s[5],u=s[9],g=s[2],h=s[6];return s=s[10],r=r||this._order,"XYZ"===r?(this._y=o(i(p,-1,1)),.99999>yn(p)?(this._x=ln(-u,s),this._z=ln(-e,t)):(this._x=ln(h,c),this._z=0)):"YXZ"===r?(this._x=o(-i(u,-1,1)),.99999>yn(u)?(this._y=ln(p,s),this._z=ln(d,c)):(this._y=ln(-g,t),this._z=0)):"ZXY"===r?(this._x=o(i(h,-1,1)),.99999>yn(h)?(this._y=ln(-g,s),this._z=ln(-e,c)):(this._y=0,this._z=ln(d,t))):"ZYX"===r?(this._y=o(-i(g,-1,1)),.99999>yn(g)?(this._x=ln(h,s),this._z=ln(d,t)):(this._x=0,this._z=ln(-e,c))):"YZX"===r?(this._z=o(i(d,-1,1)),.99999>yn(d)?(this._x=ln(-u,c),this._y=ln(-g,t)):(this._x=0,this._y=ln(p,s))):"XZY"===r?(this._z=o(-i(e,-1,1)),.99999>yn(e)?(this._x=ln(h,c),this._y=ln(p,t)):(this._x=ln(-u,s),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+r),this._order=r,!1!==a&&this.onChangeCallback(),this},setFromQuaternion:function(){var e=new i;return function(t,r,a){return e.makeRotationFromQuaternion(t),this.setFromRotationMatrix(e,r,a)}}(),setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:function(){var e=new s;return function(t){return e.setFromEuler(this),this.setFromQuaternion(e,t)}}(),equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new _(this._x,this._y,this._z)},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}}),Object.assign(lt.prototype,{set:function(e){this.mask=0|1<<e},enable:function(e){this.mask=0|(this.mask|1<<e)},toggle:function(e){this.mask^=0|1<<e},disable:function(e){this.mask&=~(0|1<<e)},test:function(e){return 0!==(this.mask&e.mask)}});var Sn=0;pt.DefaultUp=new _(0,1,0),pt.DefaultMatrixAutoUpdate=!0,pt.prototype=Object.assign(Object.create(t.prototype),{constructor:pt,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(e){this.matrix.multiplyMatrices(e,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){return this.quaternion.premultiply(e),this},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(){var e=new s;return function(t,r){return e.setFromAxisAngle(t,r),this.quaternion.multiply(e),this}}(),rotateOnWorldAxis:function(){var e=new s;return function(t,r){return e.setFromAxisAngle(t,r),this.quaternion.premultiply(e),this}}(),rotateX:function(){var e=new _(1,0,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateY:function(){var e=new _(0,1,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateZ:function(){var e=new _(0,0,1);return function(t){return this.rotateOnAxis(e,t)}}(),translateOnAxis:function(){var e=new _;return function(t,r){return e.copy(t).applyQuaternion(this.quaternion),this.position.add(e.multiplyScalar(r)),this}}(),translateX:function(){var e=new _(1,0,0);return function(t){return this.translateOnAxis(e,t)}}(),translateY:function(){var e=new _(0,1,0);return function(t){return this.translateOnAxis(e,t)}}(),translateZ:function(){var e=new _(0,0,1);return function(t){return this.translateOnAxis(e,t)}}(),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var e=new i;return function(t){return t.applyMatrix4(e.getInverse(this.matrixWorld))}}(),lookAt:function(){var t=new i,r=new _;return function(a,o,i){a.isVector3?r.copy(a):r.set(a,o,i),this.isCamera?t.lookAt(this.position,r,this.up):t.lookAt(r,this.position,this.up),this.quaternion.setFromRotationMatrix(t)}}(),add:function(e){if(1<arguments.length){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,e.dispatchEvent({type:"added"}),this.children.push(e)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){if(1<arguments.length){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}return t=this.children.indexOf(e),-1!==t&&(e.parent=null,e.dispatchEvent({type:"removed"}),this.children.splice(t,1)),this},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(t,r){if(this[t]===r)return this;for(var a=0,o=this.children.length,i;a<o;a++)if(i=this.children[a].getObjectByProperty(t,r),void 0!==i)return i},getWorldPosition:function(e){return e=e||new _,this.updateMatrixWorld(!0),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var e=new _,t=new _;return function(r){return r=r||new s,this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,r,t),r}}(),getWorldRotation:function(){var e=new s;return function(t){return t=t||new st,this.getWorldQuaternion(e),t.setFromQuaternion(e,this.rotation.order,!1)}}(),getWorldScale:function(){var e=new _,t=new s;return function(r){return r=r||new _,this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,t,r),r}}(),getWorldDirection:function(){var e=new s;return function(t){return t=t||new _,this.getWorldQuaternion(e),t.set(0,0,1).applyQuaternion(e)}}(),raycast:function(){},traverse:function(e){e(this);for(var t=this.children,r=0,a=t.length;r<a;r++)t[r].traverse(e)},traverseVisible:function(e){if(!1!==this.visible){e(this);for(var t=this.children,r=0,a=t.length;r<a;r++)t[r].traverseVisible(e)}},traverseAncestors:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,r=0,a=t.length;r<a;r++)t[r].updateMatrixWorld(e)},toJSON:function(t){function r(e,r){return void 0===e[r.uuid]&&(e[r.uuid]=r.toJSON(t)),r.uuid}function o(e){var t=[],r;for(r in e){var a=e[r];delete a.metadata,t.push(a)}return t}var i=void 0===t||"string"===typeof t,n={};i&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var e={};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),!0===this.castShadow&&(e.castShadow=!0),!0===this.receiveShadow&&(e.receiveShadow=!0),!1===this.visible&&(e.visible=!1),"{}"!==JSON.stringify(this.userData)&&(e.userData=this.userData),e.matrix=this.matrix.toArray(),void 0!==this.geometry){e.geometry=r(t.geometries,this.geometry);var s=this.geometry.parameters;if(void 0!==s&&void 0!==s.shapes)if(s=s.shapes,Array.isArray(s))for(var l=0,p=s.length;l<p;l++)r(t.shapes,s[l]);else r(t.shapes,s)}if(void 0!==this.material)if(Array.isArray(this.material)){for(s=[],l=0,p=this.material.length;l<p;l++)s.push(r(t.materials,this.material[l]));e.material=s}else e.material=r(t.materials,this.material);if(0<this.children.length)for(e.children=[],l=0;l<this.children.length;l++)e.children.push(this.children[l].toJSON(t).object);if(i){i=o(t.geometries),l=o(t.materials),p=o(t.textures);var d=o(t.images);s=o(t.shapes),0<i.length&&(n.geometries=i),0<l.length&&(n.materials=l),0<p.length&&(n.textures=p),0<d.length&&(n.images=d),0<s.length&&(n.shapes=s)}return n.object=e,n},clone:function(e){return new this.constructor().copy(this,e)},copy:function(e,t){if(void 0===t&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(t=0;t<e.children.length;t++)this.add(e.children[t].clone());return this}}),dt.prototype=Object.assign(Object.create(pt.prototype),{constructor:dt,isCamera:!0,copy:function(e,t){return pt.prototype.copy.call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this},getWorldDirection:function(){var e=new s;return function(t){return t=t||new _,this.getWorldQuaternion(e),t.set(0,0,-1).applyQuaternion(e)}}(),updateMatrixWorld:function(e){pt.prototype.updateMatrixWorld.call(this,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return new this.constructor().copy(this)}}),ct.prototype=Object.assign(Object.create(dt.prototype),{constructor:ct,isOrthographicCamera:!0,copy:function(e,t){return dt.prototype.copy.call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this},setViewOffset:function(t,r,a,o,i,e){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=r,this.view.offsetX=a,this.view.offsetY=o,this.view.width=i,this.view.height=e,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=(this.right-this.left)/(2*this.zoom),r=(this.top-this.bottom)/(2*this.zoom),a=(this.right+this.left)/2,o=(this.top+this.bottom)/2,i=a-t;if(a+=t,t=o+r,r=o-r,null!==this.view&&this.view.enabled){a=this.zoom/(this.view.width/this.view.fullWidth),r=this.zoom/(this.view.height/this.view.fullHeight);var e=(this.right-this.left)/this.view.width;o=(this.top-this.bottom)/this.view.height,i+=this.view.offsetX/a*e,a=i+this.view.width/a*e,t-=this.view.offsetY/r*o,r=t-this.view.height/r*o}this.projectionMatrix.makeOrthographic(i,a,t,r,this.near,this.far)},toJSON:function(e){return e=pt.prototype.toJSON.call(this,e),e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}),Object.assign(mt.prototype,{clone:function(){return new this.constructor().copy(this)},copy:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var t=0,r=e.vertexNormals.length;t<r;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(t=0,r=e.vertexColors.length;t<r;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}});var Mn=0;ut.prototype=Object.assign(Object.create(t.prototype),{constructor:ut,isGeometry:!0,applyMatrix:function(t){for(var r=new u().getNormalMatrix(t),a=0,o=this.vertices.length;a<o;a++)this.vertices[a].applyMatrix4(t);for(a=0,o=this.faces.length;a<o;a++){t=this.faces[a],t.normal.applyMatrix3(r).normalize();for(var i=0,e=t.vertexNormals.length;i<e;i++)t.vertexNormals[i].applyMatrix3(r).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.normalsNeedUpdate=this.verticesNeedUpdate=!0,this},rotateX:function(){var e=new i;return function(t){return e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e=new i;return function(t){return e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new i;return function(t){return e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e=new i;return function(t,r,a){return e.makeTranslation(t,r,a),this.applyMatrix(e),this}}(),scale:function(){var e=new i;return function(t,r,a){return e.makeScale(t,r,a),this.applyMatrix(e),this}}(),lookAt:function(){var e=new pt;return function(t){e.lookAt(t),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),fromBufferGeometry:function(i){function a(t,r,a,o){var e=void 0===c?[]:[m[t].clone(),m[r].clone(),m[a].clone()],i=void 0===g?[]:[s.colors[t].clone(),s.colors[r].clone(),s.colors[a].clone()];o=new mt(t,r,a,e,i,o),s.faces.push(o),void 0!==h&&s.faceVertexUvs[0].push([l[t].clone(),l[r].clone(),l[a].clone()]),void 0!==y&&s.faceVertexUvs[1].push([n[t].clone(),n[r].clone(),n[a].clone()])}var s=this,p=null===i.index?void 0:i.index.array,d=i.attributes,e=d.position.array,c=void 0===d.normal?void 0:d.normal.array,g=void 0===d.color?void 0:d.color.array,h=void 0===d.uv?void 0:d.uv.array,y=void 0===d.uv2?void 0:d.uv2.array;void 0!==y&&(this.faceVertexUvs[1]=[]);for(var m=[],l=[],n=[],u=d=0;d<e.length;d+=3,u+=2)s.vertices.push(new _(e[d],e[d+1],e[d+2])),void 0!==c&&m.push(new _(c[d],c[d+1],c[d+2])),void 0!==g&&s.colors.push(new Ne(g[d],g[d+1],g[d+2])),void 0!==h&&l.push(new o(h[u],h[u+1])),void 0!==y&&n.push(new o(y[u],y[u+1]));var f=i.groups;if(0<f.length)for(d=0;d<f.length;d++){e=f[d];var r=e.start,t=e.count;for(u=r,r+=t;u<r;u+=3)void 0===p?a(u,u+1,u+2,e.materialIndex):a(p[u],p[u+1],p[u+2],e.materialIndex)}else if(void 0!==p)for(d=0;d<p.length;d+=3)a(p[d],p[d+1],p[d+2]);else for(d=0;d<e.length/3;d+=3)a(d,d+1,d+2);return this.computeFaceNormals(),null!==i.boundingBox&&(this.boundingBox=i.boundingBox.clone()),null!==i.boundingSphere&&(this.boundingSphere=i.boundingSphere.clone()),this},center:function(){this.computeBoundingBox();var e=this.boundingBox.getCenter().negate();return this.translate(e.x,e.y,e.z),e},normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius;t=0===t?1:1/t;var r=new i;return r.set(t,0,0,-t*e.x,0,t,0,-t*e.y,0,0,t,-t*e.z,0,0,0,1),this.applyMatrix(r),this},computeFaceNormals:function(){for(var t=new _,r=new _,a=0,o=this.faces.length;a<o;a++){var i=this.faces[a],e=this.vertices[i.a],n=this.vertices[i.b];t.subVectors(this.vertices[i.c],n),r.subVectors(e,n),t.cross(r),t.normalize(),i.normal.copy(t)}},computeVertexNormals:function(t){void 0===t&&(t=!0);var r=Array(this.vertices.length),a=0,o;for(o=this.vertices.length;a<o;a++)r[a]=new _;if(t){var i=new _,e=new _;for(t=0,a=this.faces.length;t<a;t++){o=this.faces[t];var n=this.vertices[o.a],s=this.vertices[o.b],l=this.vertices[o.c];i.subVectors(l,s),e.subVectors(n,s),i.cross(e),r[o.a].add(i),r[o.b].add(i),r[o.c].add(i)}}else for(this.computeFaceNormals(),t=0,a=this.faces.length;t<a;t++)o=this.faces[t],r[o.a].add(o.normal),r[o.b].add(o.normal),r[o.c].add(o.normal);for(a=0,o=this.vertices.length;a<o;a++)r[a].normalize();for(t=0,a=this.faces.length;t<a;t++)o=this.faces[t],n=o.vertexNormals,3===n.length?(n[0].copy(r[o.a]),n[1].copy(r[o.b]),n[2].copy(r[o.c])):(n[0]=r[o.a].clone(),n[1]=r[o.b].clone(),n[2]=r[o.c].clone());0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var e;this.computeFaceNormals();var t=0;for(e=this.faces.length;t<e;t++){var r=this.faces[t],a=r.vertexNormals;3===a.length?(a[0].copy(r.normal),a[1].copy(r.normal),a[2].copy(r.normal)):(a[0]=r.normal.clone(),a[1]=r.normal.clone(),a[2]=r.normal.clone())}0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var t=0,r,a;for(a=this.faces.length;t<a;t++){var o=this.faces[t];o.__originalFaceNormal?o.__originalFaceNormal.copy(o.normal):o.__originalFaceNormal=o.normal.clone(),o.__originalVertexNormals||(o.__originalVertexNormals=[]);var i=0;for(r=o.vertexNormals.length;i<r;i++)o.__originalVertexNormals[i]?o.__originalVertexNormals[i].copy(o.vertexNormals[i]):o.__originalVertexNormals[i]=o.vertexNormals[i].clone()}var e=new ut;for(e.faces=this.faces,i=0,r=this.morphTargets.length;i<r;i++){if(!this.morphNormals[i]){this.morphNormals[i]={},this.morphNormals[i].faceNormals=[],this.morphNormals[i].vertexNormals=[],o=this.morphNormals[i].faceNormals;var n=this.morphNormals[i].vertexNormals;for(t=0,a=this.faces.length;t<a;t++){var s=new _,l={a:new _,b:new _,c:new _};o.push(s),n.push(l)}}for(n=this.morphNormals[i],e.vertices=this.morphTargets[i].vertices,e.computeFaceNormals(),e.computeVertexNormals(),t=0,a=this.faces.length;t<a;t++)o=this.faces[t],s=n.faceNormals[t],l=n.vertexNormals[t],s.copy(o.normal),l.a.copy(o.vertexNormals[0]),l.b.copy(o.vertexNormals[1]),l.c.copy(o.vertexNormals[2])}for(t=0,a=this.faces.length;t<a;t++)o=this.faces[t],o.normal=o.__originalFaceNormal,o.vertexNormals=o.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new rt),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new at),this.boundingSphere.setFromPoints(this.vertices)},merge:function(o,a,i){if(o&&o.isGeometry){var s=this.vertices.length,e=this.vertices,c=o.vertices,g=this.faces,f=o.faces,h=this.faceVertexUvs[0],m=o.faceVertexUvs[0],l=this.colors,n=o.colors,p;void 0===i&&(i=0),void 0!==a&&(p=new u().getNormalMatrix(a)),o=0;for(var d=c.length,y;o<d;o++)y=c[o].clone(),void 0!==a&&y.applyMatrix4(a),e.push(y);for(o=0,d=n.length;o<d;o++)l.push(n[o].clone());for(o=0,d=f.length;o<d;o++){c=f[o];var r=c.vertexNormals;for(n=c.vertexColors,l=new mt(c.a+s,c.b+s,c.c+s),l.normal.copy(c.normal),void 0!==p&&l.normal.applyMatrix3(p).normalize(),a=0,e=r.length;a<e;a++)y=r[a].clone(),void 0!==p&&y.applyMatrix3(p).normalize(),l.vertexNormals.push(y);for(l.color.copy(c.color),a=0,e=n.length;a<e;a++)y=n[a],l.vertexColors.push(y.clone());l.materialIndex=c.materialIndex+i,g.push(l)}for(o=0,d=m.length;o<d;o++)if(i=m[o],p=[],void 0!==i){for(a=0,e=i.length;a<e;a++)p.push(i[a].clone());h.push(p)}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",o)},mergeMesh:function(e){e&&e.isMesh?(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e)},mergeVertices:function(){var t={},r=[],a=[],o=10000,i=0,n;for(n=this.vertices.length;i<n;i++){var e=this.vertices[i];e=tn(e.x*o)+"_"+tn(e.y*o)+"_"+tn(e.z*o),void 0===t[e]?(t[e]=i,r.push(this.vertices[i]),a[i]=r.length-1):a[i]=a[t[e]]}for(t=[],i=0,n=this.faces.length;i<n;i++)for(o=this.faces[i],o.a=a[o.a],o.b=a[o.b],o.c=a[o.c],o=[o.a,o.b,o.c],e=0;3>e;e++)if(o[e]===o[(e+1)%3]){t.push(i);break}for(i=t.length-1;0<=i;i--)for(o=t[i],this.faces.splice(o,1),a=0,n=this.faceVertexUvs.length;a<n;a++)this.faceVertexUvs[a].splice(o,1);return i=this.vertices.length-r.length,this.vertices=r,i},setFromPoints:function(e){this.vertices=[];for(var t=0,r=e.length,a;t<r;t++)a=e[t],this.vertices.push(new _(a.x,a.y,a.z||0));return this},sortFacesByMaterialIndex:function(){for(var t=this.faces,r=t.length,a=0;a<r;a++)t[a]._id=a;t.sort(function(e,t){return e.materialIndex-t.materialIndex});var o=this.faceVertexUvs[0],i=this.faceVertexUvs[1],e,n;for(o&&o.length===r&&(e=[]),i&&i.length===r&&(n=[]),a=0;a<r;a++){var s=t[a]._id;e&&e.push(o[s]),n&&n.push(i[s])}e&&(this.faceVertexUvs[0]=e),n&&(this.faceVertexUvs[1]=n)},toJSON:function(){function o(e,t,r){return r?e|1<<t:e&~(1<<t)}function a(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0===f[t]?(f[t]=g.length/3,g.push(e.x,e.y,e.z),f[t]):f[t]}function i(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0===l[t]?(l[t]=m.length,m.push(e.getHex()),l[t]):l[t]}function s(e){var t=e.x.toString()+e.y.toString();return void 0===p[t]?(p[t]=n.length/2,n.push(e.x,e.y),p[t]):p[t]}var d={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(d.uuid=this.uuid,d.type=this.type,""!==this.name&&(d.name=this.name),void 0!==this.parameters){var e=this.parameters,c;for(c in e)void 0!==e[c]&&(d[c]=e[c]);return d}for(e=[],c=0;c<this.vertices.length;c++){var u=this.vertices[c];e.push(u.x,u.y,u.z)}u=[];var g=[],f={},m=[],l={},n=[],p={};for(c=0;c<this.faces.length;c++){var h=this.faces[c],r=void 0!==this.faceVertexUvs[0][c],t=0<h.normal.length(),y=0<h.vertexNormals.length,x=1!==h.color.r||1!==h.color.g||1!==h.color.b,v=0<h.vertexColors.length,_=0;_=o(_,0,0),_=o(_,1,!0),_=o(_,2,!1),_=o(_,3,r),_=o(_,4,t),_=o(_,5,y),_=o(_,6,x),_=o(_,7,v),u.push(_),u.push(h.a,h.b,h.c),u.push(h.materialIndex),r&&(r=this.faceVertexUvs[0][c],u.push(s(r[0]),s(r[1]),s(r[2]))),t&&u.push(a(h.normal)),y&&(t=h.vertexNormals,u.push(a(t[0]),a(t[1]),a(t[2]))),x&&u.push(i(h.color)),v&&(h=h.vertexColors,u.push(i(h[0]),i(h[1]),i(h[2])))}return d.data={},d.data.vertices=e,d.data.normals=g,0<m.length&&(d.data.colors=m),0<n.length&&(d.data.uvs=[n]),d.data.faces=u,d},clone:function(){return new ut().copy(this)},copy:function(t){var r,a,o;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingSphere=this.boundingBox=null,this.name=t.name;var i=t.vertices,e=0;for(r=i.length;e<r;e++)this.vertices.push(i[e].clone());for(i=t.colors,e=0,r=i.length;e<r;e++)this.colors.push(i[e].clone());for(i=t.faces,e=0,r=i.length;e<r;e++)this.faces.push(i[e].clone());for(e=0,r=t.faceVertexUvs.length;e<r;e++){var n=t.faceVertexUvs[e];for(void 0===this.faceVertexUvs[e]&&(this.faceVertexUvs[e]=[]),i=0,a=n.length;i<a;i++){var s=n[i],l=[],p=0;for(o=s.length;p<o;p++)l.push(s[p].clone());this.faceVertexUvs[e].push(l)}}for(p=t.morphTargets,e=0,r=p.length;e<r;e++){if(o={},o.name=p[e].name,void 0!==p[e].vertices)for(o.vertices=[],i=0,a=p[e].vertices.length;i<a;i++)o.vertices.push(p[e].vertices[i].clone());if(void 0!==p[e].normals)for(o.normals=[],i=0,a=p[e].normals.length;i<a;i++)o.normals.push(p[e].normals[i].clone());this.morphTargets.push(o)}for(p=t.morphNormals,e=0,r=p.length;e<r;e++){if(o={},void 0!==p[e].vertexNormals)for(o.vertexNormals=[],i=0,a=p[e].vertexNormals.length;i<a;i++)n=p[e].vertexNormals[i],s={},s.a=n.a.clone(),s.b=n.b.clone(),s.c=n.c.clone(),o.vertexNormals.push(s);if(void 0!==p[e].faceNormals)for(o.faceNormals=[],i=0,a=p[e].faceNormals.length;i<a;i++)o.faceNormals.push(p[e].faceNormals[i].clone());this.morphNormals.push(o)}for(i=t.skinWeights,e=0,r=i.length;e<r;e++)this.skinWeights.push(i[e].clone());for(i=t.skinIndices,e=0,r=i.length;e<r;e++)this.skinIndices.push(i[e].clone());for(i=t.lineDistances,e=0,r=i.length;e<r;e++)this.lineDistances.push(i[e]);return e=t.boundingBox,null!==e&&(this.boundingBox=e.clone()),e=t.boundingSphere,null!==e&&(this.boundingSphere=e.clone()),this.elementsNeedUpdate=t.elementsNeedUpdate,this.verticesNeedUpdate=t.verticesNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.lineDistancesNeedUpdate=t.lineDistancesNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(gt.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(gt.prototype,{isBufferAttribute:!0,setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0===e?0:e.length/this.itemSize,this.array=e},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.dynamic=e.dynamic,this},copyAt:function(t,r,a){t*=this.itemSize,a*=r.itemSize;for(var o=0,i=this.itemSize;o<i;o++)this.array[t+o]=r.array[a+o];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(t){for(var r=this.array,a=0,o=0,i=t.length,e;o<i;o++)e=t[o],void 0===e&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",o),e=new Ne),r[a++]=e.r,r[a++]=e.g,r[a++]=e.b;return this},copyIndicesArray:function(t){for(var r=this.array,a=0,o=0,i=t.length,e;o<i;o++)e=t[o],r[a++]=e.a,r[a++]=e.b,r[a++]=e.c;return this},copyVector2sArray:function(t){for(var r=this.array,a=0,i=0,n=t.length,e;i<n;i++)e=t[i],void 0===e&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),e=new o),r[a++]=e.x,r[a++]=e.y;return this},copyVector3sArray:function(t){for(var r=this.array,a=0,o=0,i=t.length,e;o<i;o++)e=t[o],void 0===e&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",o),e=new _),r[a++]=e.x,r[a++]=e.y,r[a++]=e.z;return this},copyVector4sArray:function(t){for(var r=this.array,a=0,o=0,i=t.length,e;o<i;o++)e=t[o],void 0===e&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",o),e=new j),r[a++]=e.x,r[a++]=e.y,r[a++]=e.z,r[a++]=e.w;return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this},setXYZ:function(e,t,r,a){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=a,this},setXYZW:function(t,r,a,o,i){return t*=this.itemSize,this.array[t+0]=r,this.array[t+1]=a,this.array[t+2]=o,this.array[t+3]=i,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}}),M.prototype=Object.create(gt.prototype),M.prototype.constructor=M,ft.prototype=Object.create(gt.prototype),ft.prototype.constructor=ft,ht.prototype=Object.create(gt.prototype),ht.prototype.constructor=ht,yt.prototype=Object.create(gt.prototype),yt.prototype.constructor=yt,xt.prototype=Object.create(gt.prototype),xt.prototype.constructor=xt,vt.prototype=Object.create(gt.prototype),vt.prototype.constructor=vt,_t.prototype=Object.create(gt.prototype),_t.prototype.constructor=_t,bt.prototype=Object.create(gt.prototype),bt.prototype.constructor=bt,D.prototype=Object.create(gt.prototype),D.prototype.constructor=D,Object.assign(Et.prototype,{computeGroups:function(t){var r=[],a;t=t.faces;for(var o=0,i;o<t.length;o++)if(i=t[o],i.materialIndex!==a){a=i.materialIndex,void 0!==e&&(e.count=3*o-e.start,r.push(e));var e={start:3*o,materialIndex:a}}void 0!==e&&(e.count=3*o-e.start,r.push(e)),this.groups=r},fromGeometry:function(i){var a=i.faces,s=i.vertices,c=i.faceVertexUvs,d=c[0]&&0<c[0].length,e=c[1]&&0<c[1].length,u=i.morphTargets,g=u.length;if(0<g){for(var f=[],h=0;h<g;h++)f[h]=[];this.morphTargets.position=f}var m=i.morphNormals,l=m.length;if(0<l){var n=[];for(h=0;h<l;h++)n[h]=[];this.morphTargets.normal=n}var p=i.skinIndices,y=i.skinWeights,r=p.length===s.length,t=y.length===s.length;for(h=0;h<a.length;h++){var x=a[h];this.vertices.push(s[x.a],s[x.b],s[x.c]);var v=x.vertexNormals;for(3===v.length?this.normals.push(v[0],v[1],v[2]):(v=x.normal,this.normals.push(v,v,v)),v=x.vertexColors,3===v.length?this.colors.push(v[0],v[1],v[2]):(v=x.color,this.colors.push(v,v,v)),!0===d&&(v=c[0][h],void 0===v?(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",h),this.uvs.push(new o,new o,new o)):this.uvs.push(v[0],v[1],v[2])),!0===e&&(v=c[1][h],void 0===v?(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",h),this.uvs2.push(new o,new o,new o)):this.uvs2.push(v[0],v[1],v[2])),v=0;v<g;v++){var _=u[v].vertices;f[v].push(_[x.a],_[x.b],_[x.c])}for(v=0;v<l;v++)_=m[v].vertexNormals[h],n[v].push(_.a,_.b,_.c);r&&this.skinIndices.push(p[x.a],p[x.b],p[x.c]),t&&this.skinWeights.push(y[x.a],y[x.b],y[x.c])}return this.computeGroups(i),this.verticesNeedUpdate=i.verticesNeedUpdate,this.normalsNeedUpdate=i.normalsNeedUpdate,this.colorsNeedUpdate=i.colorsNeedUpdate,this.uvsNeedUpdate=i.uvsNeedUpdate,this.groupsNeedUpdate=i.groupsNeedUpdate,this}});var An=1;Tt.prototype=Object.assign(Object.create(t.prototype),{constructor:Tt,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){this.index=Array.isArray(e)?new(65535<Pe(e)?_t:xt)(e,1):e},addAttribute:function(e,t,r){if(!(t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute))console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.addAttribute(e,new gt(t,r));else if("index"===e)console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t);else return this.attributes[e]=t,this},getAttribute:function(e){return this.attributes[e]},removeAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,r){this.groups.push({start:e,count:t,materialIndex:void 0===r?0:r})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix:function(e){var t=this.attributes.position;return void 0!==t&&(e.applyToBufferAttribute(t),t.needsUpdate=!0),t=this.attributes.normal,void 0!==t&&(new u().getNormalMatrix(e).applyToBufferAttribute(t),t.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var e=new i;return function(t){return e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e=new i;return function(t){return e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new i;return function(t){return e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e=new i;return function(t,r,a){return e.makeTranslation(t,r,a),this.applyMatrix(e),this}}(),scale:function(){var e=new i;return function(t,r,a){return e.makeScale(t,r,a),this.applyMatrix(e),this}}(),lookAt:function(){var e=new pt;return function(t){e.lookAt(t),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),center:function(){this.computeBoundingBox();var e=this.boundingBox.getCenter().negate();return this.translate(e.x,e.y,e.z),e},setFromObject:function(e){var t=e.geometry;if(e.isPoints||e.isLine){e=new bt(3*t.vertices.length,3);var r=new bt(3*t.colors.length,3);this.addAttribute("position",e.copyVector3sArray(t.vertices)),this.addAttribute("color",r.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length&&(e=new bt(t.lineDistances.length,1),this.addAttribute("lineDistance",e.copyArray(t.lineDistances))),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())}else e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},setFromPoints:function(t){for(var r=[],a=0,o=t.length,i;a<o;a++)i=t[a],r.push(i.x,i.y,i.z||0);return this.addAttribute("position",new bt(r,3)),this},updateFromObject:function(e){var t=e.geometry;if(e.isMesh){var r=t.__directGeometry;if(!0===t.elementsNeedUpdate&&(r=void 0,t.elementsNeedUpdate=!1),void 0===r)return this.fromGeometry(t);r.verticesNeedUpdate=t.verticesNeedUpdate,r.normalsNeedUpdate=t.normalsNeedUpdate,r.colorsNeedUpdate=t.colorsNeedUpdate,r.uvsNeedUpdate=t.uvsNeedUpdate,r.groupsNeedUpdate=t.groupsNeedUpdate,t.verticesNeedUpdate=!1,t.normalsNeedUpdate=!1,t.colorsNeedUpdate=!1,t.uvsNeedUpdate=!1,t.groupsNeedUpdate=!1,t=r}return!0===t.verticesNeedUpdate&&(r=this.attributes.position,void 0!==r&&(r.copyVector3sArray(t.vertices),r.needsUpdate=!0),t.verticesNeedUpdate=!1),!0===t.normalsNeedUpdate&&(r=this.attributes.normal,void 0!==r&&(r.copyVector3sArray(t.normals),r.needsUpdate=!0),t.normalsNeedUpdate=!1),!0===t.colorsNeedUpdate&&(r=this.attributes.color,void 0!==r&&(r.copyColorsArray(t.colors),r.needsUpdate=!0),t.colorsNeedUpdate=!1),t.uvsNeedUpdate&&(r=this.attributes.uv,void 0!==r&&(r.copyVector2sArray(t.uvs),r.needsUpdate=!0),t.uvsNeedUpdate=!1),t.lineDistancesNeedUpdate&&(r=this.attributes.lineDistance,void 0!==r&&(r.copyArray(t.lineDistances),r.needsUpdate=!0),t.lineDistancesNeedUpdate=!1),t.groupsNeedUpdate&&(t.computeGroups(e.geometry),this.groups=t.groups,t.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=new Et().fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(t){var r=new Float32Array(3*t.vertices.length);for(var a in this.addAttribute("position",new gt(r,3).copyVector3sArray(t.vertices)),0<t.normals.length&&(r=new Float32Array(3*t.normals.length),this.addAttribute("normal",new gt(r,3).copyVector3sArray(t.normals))),0<t.colors.length&&(r=new Float32Array(3*t.colors.length),this.addAttribute("color",new gt(r,3).copyColorsArray(t.colors))),0<t.uvs.length&&(r=new Float32Array(2*t.uvs.length),this.addAttribute("uv",new gt(r,2).copyVector2sArray(t.uvs))),0<t.uvs2.length&&(r=new Float32Array(2*t.uvs2.length),this.addAttribute("uv2",new gt(r,2).copyVector2sArray(t.uvs2))),0<t.indices.length&&(r=new(65535<Pe(t.indices)?Uint32Array:Uint16Array)(3*t.indices.length),this.setIndex(new gt(r,1).copyIndicesArray(t.indices))),this.groups=t.groups,t.morphTargets){r=[];for(var o=t.morphTargets[a],i=0,e=o.length;i<e;i++){var n=o[i],s=new bt(3*n.length,3);r.push(s.copyVector3sArray(n))}this.morphAttributes[a]=r}return 0<t.skinIndices.length&&(a=new bt(4*t.skinIndices.length,4),this.addAttribute("skinIndex",a.copyVector4sArray(t.skinIndices))),0<t.skinWeights.length&&(a=new bt(4*t.skinWeights.length,4),this.addAttribute("skinWeight",a.copyVector4sArray(t.skinWeights))),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new rt);var e=this.attributes.position;void 0===e?this.boundingBox.makeEmpty():this.boundingBox.setFromBufferAttribute(e),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error("THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The \"position\" attribute is likely to have NaN values.",this)},computeBoundingSphere:function(){var t=new rt,r=new _;return function(){null===this.boundingSphere&&(this.boundingSphere=new at);var a=this.attributes.position;if(a){var o=this.boundingSphere.center;t.setFromBufferAttribute(a),t.getCenter(o);for(var i=0,e=0,n=a.count;e<n;e++)r.x=a.getX(e),r.y=a.getY(e),r.z=a.getZ(e),i=fn(i,o.distanceToSquared(r));this.boundingSphere.radius=cn(i),isNaN(this.boundingSphere.radius)&&console.error("THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The \"position\" attribute is likely to have NaN values.",this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var o=this.index,a=this.attributes,i=this.groups;if(a.position){var s=a.position.array;if(void 0===a.normal)this.addAttribute("normal",new gt(new Float32Array(s.length),3));else for(var p=a.normal.array,e=0,d=p.length;e<d;e++)p[e]=0;p=a.normal.array;var c=new _,g=new _,f=new _,m=new _,l=new _;if(o){o=o.array,0===i.length&&this.addGroup(0,o.length);for(var n=0,u=i.length;n<u;++n){e=i[n],d=e.start;var h=e.count;for(e=d,d+=h;e<d;e+=3){h=3*o[e+0];var r=3*o[e+1],t=3*o[e+2];c.fromArray(s,h),g.fromArray(s,r),f.fromArray(s,t),m.subVectors(f,g),l.subVectors(c,g),m.cross(l),p[h]+=m.x,p[h+1]+=m.y,p[h+2]+=m.z,p[r]+=m.x,p[r+1]+=m.y,p[r+2]+=m.z,p[t]+=m.x,p[t+1]+=m.y,p[t+2]+=m.z}}}else for(e=0,d=s.length;e<d;e+=9)c.fromArray(s,e),g.fromArray(s,e+3),f.fromArray(s,e+6),m.subVectors(f,g),l.subVectors(c,g),m.cross(l),p[e]=m.x,p[e+1]=m.y,p[e+2]=m.z,p[e+3]=m.x,p[e+4]=m.y,p[e+5]=m.z,p[e+6]=m.x,p[e+7]=m.y,p[e+8]=m.z;this.normalizeNormals(),a.normal.needsUpdate=!0}},merge:function(t,r){if(t&&t.isBufferGeometry){void 0===r&&(r=0);var a=this.attributes,o;for(o in a)if(void 0!==t.attributes[o]){var i=a[o].array,e=t.attributes[o],n=e.array,s=0;for(e=e.itemSize*r;s<n.length;s++,e++)i[e]=n[s]}return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t)},normalizeNormals:function(){var e=new _;return function(){for(var t=this.attributes.normal,r=0,a=t.count;r<a;r++)e.x=t.getX(r),e.y=t.getY(r),e.z=t.getZ(r),e.normalize(),t.setXYZ(r,e.x,e.y,e.z)}}(),toNonIndexed:function(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var t=new Tt,r=this.index.array,a=this.attributes,o;for(o in a){var i=a[o],e=i.array;i=i.itemSize;for(var s=new e.constructor(r.length*i),p=0,d=0,c=r.length,l;d<c;d++){l=r[d]*i;for(var m=0;m<i;m++)s[p++]=e[l++]}t.addAttribute(o,new gt(s,i))}return t},toJSON:function(){var t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),void 0!==this.parameters){var r=this.parameters;for(i in r)void 0!==r[i]&&(t[i]=r[i]);return t}t.data={attributes:{}};var a=this.index;for(i in null!==a&&(r=Array.prototype.slice.call(a.array),t.data.index={type:a.array.constructor.name,array:r}),a=this.attributes,a){var o=a[i];r=Array.prototype.slice.call(o.array),t.data.attributes[i]={itemSize:o.itemSize,type:o.array.constructor.name,array:r,normalized:o.normalized}}var i=this.groups;return 0<i.length&&(t.data.groups=JSON.parse(JSON.stringify(i))),i=this.boundingSphere,null!==i&&(t.data.boundingSphere={center:i.center.toArray(),radius:i.radius}),t},clone:function(){return new Tt().copy(this)},copy:function(t){var r;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingSphere=this.boundingBox=null,this.name=t.name;var a=t.index;for(n in null!==a&&this.setIndex(a.clone()),a=t.attributes,a)this.addAttribute(n,a[n].clone());var o=t.morphAttributes;for(n in o){var i=[],e=o[n];for(a=0,r=e.length;a<r;a++)i.push(e[a].clone());this.morphAttributes[n]=i}var n=t.groups;for(a=0,r=n.length;a<r;a++)o=n[a],this.addGroup(o.start,o.count,o.materialIndex);return n=t.boundingBox,null!==n&&(this.boundingBox=n.clone()),n=t.boundingSphere,null!==n&&(this.boundingSphere=n.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),St.prototype=Object.create(ut.prototype),St.prototype.constructor=St,Mt.prototype=Object.create(Tt.prototype),Mt.prototype.constructor=Mt,At.prototype=Object.create(ut.prototype),At.prototype.constructor=At,wt.prototype=Object.create(Tt.prototype),wt.prototype.constructor=wt,Rt.prototype=Object.create(Ke.prototype),Rt.prototype.constructor=Rt,Rt.prototype.isMeshBasicMaterial=!0,Rt.prototype.copy=function(e){return Ke.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this},Lt.prototype=Object.create(Ke.prototype),Lt.prototype.constructor=Lt,Lt.prototype.isShaderMaterial=!0,Lt.prototype.copy=function(e){return Ke.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=I.clone(e.uniforms),this.defines=e.defines,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=e.extensions,this},Lt.prototype.toJSON=function(e){return e=Ke.prototype.toJSON.call(this,e),e.uniforms=this.uniforms,e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e},Object.assign(Ct.prototype,{set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){return(t||new _).copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:function(){var e=new _;return function(t){return this.origin.copy(this.at(t,e)),this}}(),closestPointToPoint:function(e,t){return t=t||new _,t.subVectors(e,this.origin),e=t.dot(this.direction),0>e?t.copy(this.origin):t.copy(this.direction).multiplyScalar(e).add(this.origin)},distanceToPoint:function(e){return cn(this.distanceSqToPoint(e))},distanceSqToPoint:function(){var e=new _;return function(t){var r=e.subVectors(t,this.origin).dot(this.direction);return 0>r?this.origin.distanceToSquared(t):(e.copy(this.direction).multiplyScalar(r).add(this.origin),e.distanceToSquared(t))}}(),distanceSqToSegment:function(){var t=new _,r=new _,a=new _;return function(o,i,e,s){t.copy(o).add(i).multiplyScalar(.5),r.copy(i).sub(o).normalize(),a.copy(this.origin).sub(t);var c=.5*o.distanceTo(i),u=-this.direction.dot(r),g=a.dot(this.direction),m=-a.dot(r),f=a.lengthSq(),n=yn(1-u*u);if(0<n){o=u*m-g,i=u*g-m;var p=c*n;0<=o?i>=-p?i<=p?(c=1/n,o*=c,i*=c,u=o*(o+u*i+2*g)+i*(u*o+i+2*m)+f):(i=c,o=fn(0,-(u*i+g)),u=-o*o+i*(i+2*m)+f):(i=-c,o=fn(0,-(u*i+g)),u=-o*o+i*(i+2*m)+f):i<=-p?(o=fn(0,-(-u*c+g)),i=0<o?-c:hn(fn(-c,-m),c),u=-o*o+i*(i+2*m)+f):i<=p?(o=0,i=hn(fn(-c,-m),c),u=i*(i+2*m)+f):(o=fn(0,-(u*c+g)),i=0<o?c:hn(fn(-c,-m),c),u=-o*o+i*(i+2*m)+f)}else i=0<u?-c:c,o=fn(0,-(u*i+g)),u=-o*o+i*(i+2*m)+f;return e&&e.copy(this.direction).multiplyScalar(o).add(this.origin),s&&s.copy(r).multiplyScalar(i).add(t),u}}(),intersectSphere:function(){var t=new _;return function(r,a){t.subVectors(r.center,this.origin);var o=t.dot(this.direction),i=t.dot(t)-o*o;return(r=r.radius*r.radius,i>r)?null:(r=cn(r-i),i=o-r,o+=r,0>i&&0>o?null:0>i?this.at(o,a):this.at(i,a))}}(),intersectsSphere:function(e){return this.distanceToPoint(e.center)<=e.radius},distanceToPlane:function(e){var t=e.normal.dot(this.direction);return 0===t?0===e.distanceToPoint(this.origin)?0:null:(e=-(this.origin.dot(e.normal)+e.constant)/t,0<=e?e:null)},intersectPlane:function(e,t){return e=this.distanceToPlane(e),null===e?null:this.at(e,t)},intersectsPlane:function(e){var t=e.distanceToPoint(this.origin);return 0===t||0>e.normal.dot(this.direction)*t},intersectBox:function(t,r){var a=1/this.direction.x,o=1/this.direction.y,i=1/this.direction.z,e=this.origin;if(0<=a){var n=(t.min.x-e.x)*a;a*=t.max.x-e.x}else n=(t.max.x-e.x)*a,a*=t.min.x-e.x;if(0<=o){var s=(t.min.y-e.y)*o;o*=t.max.y-e.y}else s=(t.max.y-e.y)*o,o*=t.min.y-e.y;return n>o||s>a?null:((s>n||n!==n)&&(n=s),(o<a||a!==a)&&(a=o),0<=i?(s=(t.min.z-e.z)*i,t=(t.max.z-e.z)*i):(s=(t.max.z-e.z)*i,t=(t.min.z-e.z)*i),n>t||s>a)?null:((s>n||n!==n)&&(n=s),(t<a||a!==a)&&(a=t),0>a?null:this.at(0<=n?n:a,r))},intersectsBox:function(){var e=new _;return function(t){return null!==this.intersectBox(t,e)}}(),intersectTriangle:function(){var t=new _,r=new _,a=new _,o=new _;return function(i,e,n,s,l){if(r.subVectors(e,i),a.subVectors(n,i),o.crossVectors(r,a),e=this.direction.dot(o),0<e){if(s)return null;s=1}else if(0>e)s=-1,e=-e;else return null;return(t.subVectors(this.origin,i),i=s*this.direction.dot(a.crossVectors(t,a)),0>i)?null:(n=s*this.direction.dot(r.cross(t)),0>n||i+n>e)?null:(i=-s*t.dot(o),0>i?null:this.at(i/e,l))}}(),applyMatrix4:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}}),Object.assign(Pt.prototype,{set:function(e,t){return this.start.copy(e),this.end.copy(t),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},getCenter:function(e){return(e||new _).addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){return(e||new _).subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){return t=t||new _,this.delta(t).multiplyScalar(e).add(this.start)},closestPointToPointParameter:function(){var e=new _,t=new _;return function(r,a){return e.subVectors(r,this.start),t.subVectors(this.end,this.start),r=t.dot(t),r=t.dot(e)/r,a&&(r=vn.clamp(r,0,1)),r}}(),closestPointToPoint:function(e,t,r){return e=this.closestPointToPointParameter(e,t),r=r||new _,this.delta(r).multiplyScalar(e).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}}),Object.assign(It,{normal:function(){var t=new _;return function(r,a,o,i){return i=i||new _,i.subVectors(o,a),t.subVectors(r,a),i.cross(t),r=i.lengthSq(),0<r?i.multiplyScalar(1/cn(r)):i.set(0,0,0)}}(),barycoordFromPoint:function(){var t=new _,r=new _,a=new _;return function(o,i,e,n,s){t.subVectors(n,i),r.subVectors(e,i),a.subVectors(o,i),o=t.dot(t),i=t.dot(r),e=t.dot(a);var l=r.dot(r);n=r.dot(a);var p=o*l-i*i;return(s=s||new _,0===p)?s.set(-2,-1,-1):(p=1/p,l=(l*e-i*n)*p,o=(o*n-i*e)*p,s.set(1-l-o,o,l))}}(),containsPoint:function(){var t=new _;return function(r,a,o,i){return r=It.barycoordFromPoint(r,a,o,i,t),0<=r.x&&0<=r.y&&1>=r.x+r.y}}()}),Object.assign(It.prototype,{set:function(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this},setFromPointsAndIndices:function(e,t,r,a){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[a]),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},area:function(){var e=new _,t=new _;return function(){return e.subVectors(this.c,this.b),t.subVectors(this.a,this.b),.5*e.cross(t).length()}}(),midpoint:function(e){return(e||new _).addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(e){return It.normal(this.a,this.b,this.c,e)},plane:function(e){return(e||new ot).setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(e,t){return It.barycoordFromPoint(e,this.a,this.b,this.c,t)},containsPoint:function(e){return It.containsPoint(e,this.a,this.b,this.c)},intersectsBox:function(e){return e.intersectsTriangle(this)},closestPointToPoint:function(){var t=new ot,r=[new Pt,new Pt,new Pt],a=new _,o=new _;return function(i,e){e=e||new _;var n=Infinity;if(t.setFromCoplanarPoints(this.a,this.b,this.c),t.projectPoint(i,a),!0===this.containsPoint(a))e.copy(a);else for(r[0].set(this.a,this.b),r[1].set(this.b,this.c),r[2].set(this.c,this.a),i=0;i<r.length;i++){r[i].closestPointToPoint(a,!0,o);var s=a.distanceToSquared(o);s<n&&(n=s,e.copy(o))}return e}}(),equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}),Ut.prototype=Object.assign(Object.create(pt.prototype),{constructor:Ut,isMesh:!0,setDrawMode:function(e){this.drawMode=e},copy:function(e){return pt.prototype.copy.call(this,e),this.drawMode=e.drawMode,void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this},updateMorphTargets:function(){var e=this.geometry;if(e.isBufferGeometry){e=e.morphAttributes;var t=Object.keys(e);if(0<t.length){var r=e[t[0]];if(void 0!==r)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=r.length;e<t;e++){var a=r[e].name||e+"";this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=e}}}else if(r=e.morphTargets,void 0!==r&&0<r.length)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=r.length;e<t;e++)a=r[e].name||e+"",this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=e},raycast:function(){function s(t,o,i,n,s,e,l){return It.barycoordFromPoint(t,o,i,n,r),s.multiplyScalar(r.x),e.multiplyScalar(r.y),l.multiplyScalar(r.z),s.add(e).add(l),s.clone()}function a(r,o,i,n,s,e,l,p){return null===(1===o.side?n.intersectTriangle(l,e,s,!0,p):n.intersectTriangle(s,e,l,2!==o.side,p))?null:(t.copy(p),t.applyMatrix4(r.matrixWorld),o=i.ray.origin.distanceTo(t),o<i.near||o>i.far?null:{distance:o,point:t.clone(),object:r})}function b(t,r,o,e,i,d,l,n){return y.fromBufferAttribute(e,d),g.fromBufferAttribute(e,l),h.fromBufferAttribute(e,n),(t=a(t,t.material,r,o,y,g,h,w))&&(i&&(E.fromBufferAttribute(i,d),u.fromBufferAttribute(i,l),T.fromBufferAttribute(i,n),t.uv=s(w,y,g,h,E,u,T)),t.face=new mt(d,l,n,It.normal(y,g,h)),t.faceIndex=d),t}var c=new i,d=new Ct,e=new at,y=new _,g=new _,h=new _,p=new _,m=new _,l=new _,E=new o,u=new o,T=new o,r=new _,w=new _,t=new _;return function(r,o){var i=this.geometry,t=this.material,n=this.matrixWorld;if(void 0!==t&&(null===i.boundingSphere&&i.computeBoundingSphere(),e.copy(i.boundingSphere),e.applyMatrix4(n),!1!==r.ray.intersectsSphere(e)&&(c.getInverse(n),d.copy(r.ray).applyMatrix4(c),null===i.boundingBox||!1!==d.intersectsBox(i.boundingBox)))){var f;if(i.isBufferGeometry){t=i.index;var x=i.attributes.position;n=i.attributes.uv;var v;if(null!==t){var _=0;for(v=t.count;_<v;_+=3){i=t.getX(_);var A=t.getX(_+1),C=t.getX(_+2);(f=b(this,r,d,x,n,i,A,C))&&(f.faceIndex=xn(_/3),o.push(f))}}else if(void 0!==x)for(_=0,v=x.count;_<v;_+=3)(i=_,A=_+1,C=_+2,f=b(this,r,d,x,n,i,A,C))&&(f.index=i,o.push(f))}else if(i.isGeometry){n=Array.isArray(t),_=i.vertices,v=i.faces,A=i.faceVertexUvs[0],0<A.length&&(x=A);for(var U=0,I=v.length,D;U<I;U++)if(D=v[U],f=n?t[D.materialIndex]:t,void 0!==f){A=_[D.a],C=_[D.b];var L=_[D.c];if(!0===f.morphTargets){var M=i.morphTargets,N=this.morphTargetInfluences;y.set(0,0,0),g.set(0,0,0),h.set(0,0,0);for(var P=0,S=M.length,R;P<S;P++)if(R=N[P],0!==R){var B=M[P].vertices;y.addScaledVector(p.subVectors(B[D.a],A),R),g.addScaledVector(m.subVectors(B[D.b],C),R),h.addScaledVector(l.subVectors(B[D.c],L),R)}y.add(A),g.add(C),h.add(L),A=y,C=g,L=h}(f=a(this,f,r,d,A,C,L,w))&&(x&&x[U]&&(M=x[U],E.copy(M[0]),u.copy(M[1]),T.copy(M[2]),f.uv=s(w,A,C,L,E,u,T)),f.face=D,f.faceIndex=U,o.push(f))}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var wn=0;ir.prototype=Object.assign(Object.create(dt.prototype),{constructor:ir,isPerspectiveCamera:!0,copy:function(e,t){return dt.prototype.copy.call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){e=.5*this.getFilmHeight()/e,this.fov=2*vn.RAD2DEG*$i(e),this.updateProjectionMatrix()},getFocalLength:function(){var e=xe(.5*vn.DEG2RAD*this.fov);return .5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*vn.RAD2DEG*$i(xe(.5*vn.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*hn(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/fn(this.aspect,1)},setViewOffset:function(t,r,a,o,i,e){this.aspect=t/r,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=r,this.view.offsetX=a,this.view.offsetY=o,this.view.width=i,this.view.height=e,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=this.near,r=t*xe(.5*vn.DEG2RAD*this.fov)/this.zoom,a=2*r,o=this.aspect*a,i=-.5*o,e=this.view;if(null!==this.view&&this.view.enabled){var n=e.fullWidth,s=e.fullHeight;i+=e.offsetX*o/n,r-=e.offsetY*a/s,o*=e.width/n,a*=e.height/s}e=this.filmOffset,0!==e&&(i+=t*e/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+o,r,r-a,t,this.far)},toJSON:function(e){return e=pt.prototype.toJSON.call(this,e),e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}),nr.prototype=Object.assign(Object.create(ir.prototype),{constructor:nr,isArrayCamera:!0});var Rn=0;gr.prototype.isFogExp2=!0,gr.prototype.clone=function(){return new gr(this.color.getHex(),this.density)},gr.prototype.toJSON=function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}},fr.prototype.isFog=!0,fr.prototype.clone=function(){return new fr(this.color.getHex(),this.near,this.far)},fr.prototype.toJSON=function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}},hr.prototype=Object.assign(Object.create(pt.prototype),{constructor:hr,copy:function(e,t){return pt.prototype.copy.call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},toJSON:function(e){var t=pt.prototype.toJSON.call(this,e);return null!==this.background&&(t.object.background=this.background.toJSON(e)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}),yr.prototype=Object.create(Ke.prototype),yr.prototype.constructor=yr,yr.prototype.isSpriteMaterial=!0,yr.prototype.copy=function(e){return Ke.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.rotation=e.rotation,this},xr.prototype=Object.assign(Object.create(pt.prototype),{constructor:xr,isSprite:!0,raycast:function(){var t=new _,r=new _,a=new _;return function(o,i){r.setFromMatrixPosition(this.matrixWorld),o.ray.closestPointToPoint(r,t),a.setFromMatrixScale(this.matrixWorld);var e=a.x*a.y/4;r.distanceToSquared(t)>e||(e=o.ray.origin.distanceTo(t),e<o.near||e>o.far||i.push({distance:e,point:t.clone(),face:null,object:this}))}}(),clone:function(){return new this.constructor(this.material).copy(this)},copy:function(e){return pt.prototype.copy.call(this,e),void 0!==e.center&&this.center.copy(e.center),this}}),vr.prototype=Object.assign(Object.create(pt.prototype),{constructor:vr,copy:function(e){pt.prototype.copy.call(this,e,!1),e=e.levels;for(var t=0,r=e.length,a;t<r;t++)a=e[t],this.addLevel(a.object.clone(),a.distance);return this},addLevel:function(e,t){void 0===t&&(t=0),t=yn(t);for(var r=this.levels,o=0;o<r.length&&!(t<r[o].distance);o++);r.splice(o,0,{distance:t,object:e}),this.add(e)},getObjectForDistance:function(e){for(var t=this.levels,r=1,a=t.length;r<a&&!(e<t[r].distance);r++);return t[r-1].object},raycast:function(){var e=new _;return function(t,r){e.setFromMatrixPosition(this.matrixWorld);var a=t.ray.origin.distanceTo(e);this.getObjectForDistance(a).raycast(t,r)}}(),update:function(){var t=new _,r=new _;return function(a){var o=this.levels;if(1<o.length){t.setFromMatrixPosition(a.matrixWorld),r.setFromMatrixPosition(this.matrixWorld),a=t.distanceTo(r),o[0].object.visible=!0;for(var i=1,e=o.length;i<e&&a>=o[i].distance;i++)o[i-1].object.visible=!1,o[i].object.visible=!0;for(;i<e;i++)o[i].object.visible=!1}}}(),toJSON:function(t){t=pt.prototype.toJSON.call(this,t),t.object.levels=[];for(var r=this.levels,a=0,o=r.length,i;a<o;a++)i=r[a],t.object.levels.push({object:i.object.uuid,distance:i.distance});return t}}),Object.assign(_r.prototype,{calculateInverses:function(){this.boneInverses=[];for(var e=0,t=this.bones.length,r;e<t;e++)r=new i,this.bones[e]&&r.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(r)},pose:function(){var e=0,t,r;for(r=this.bones.length;e<r;e++)(t=this.bones[e])&&t.matrixWorld.getInverse(this.boneInverses[e]);for(e=0,r=this.bones.length;e<r;e++)(t=this.bones[e])&&(t.parent&&t.parent.isBone?(t.matrix.getInverse(t.parent.matrixWorld),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))},update:function(){var t=new i,r=new i;return function(){for(var a=this.bones,o=this.boneInverses,i=this.boneMatrices,e=this.boneTexture,n=0,s=a.length;n<s;n++)t.multiplyMatrices(a[n]?a[n].matrixWorld:r,o[n]),t.toArray(i,16*n);void 0!==e&&(e.needsUpdate=!0)}}(),clone:function(){return new _r(this.bones,this.boneInverses)},getBoneByName:function(e){for(var t=0,r=this.bones.length,a;t<r;t++)if(a=this.bones[t],a.name===e)return a}}),br.prototype=Object.assign(Object.create(pt.prototype),{constructor:br,isBone:!0}),Er.prototype=Object.assign(Object.create(Ut.prototype),{constructor:Er,isSkinnedMesh:!0,initBones:function(){var t=[],r;if(this.geometry&&void 0!==this.geometry.bones){var a=0;for(r=this.geometry.bones.length;a<r;a++){var o=this.geometry.bones[a],i=new br;t.push(i),i.name=o.name,i.position.fromArray(o.pos),i.quaternion.fromArray(o.rotq),void 0!==o.scl&&i.scale.fromArray(o.scl)}for(a=0,r=this.geometry.bones.length;a<r;a++)o=this.geometry.bones[a],-1!==o.parent&&null!==o.parent&&void 0!==t[o.parent]?t[o.parent].add(t[a]):this.add(t[a])}return this.updateMatrixWorld(!0),t},bind:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){var e;if(this.geometry&&this.geometry.isGeometry)for(e=0;e<this.geometry.skinWeights.length;e++){var t=this.geometry.skinWeights[e],r=1/t.manhattanLength();Infinity===r?t.set(1,0,0,0):t.multiplyScalar(r)}else if(this.geometry&&this.geometry.isBufferGeometry){t=new j;var a=this.geometry.attributes.skinWeight;for(e=0;e<a.count;e++)t.x=a.getX(e),t.y=a.getY(e),t.z=a.getZ(e),t.w=a.getW(e),r=1/t.manhattanLength(),Infinity===r?t.set(1,0,0,0):t.multiplyScalar(r),a.setXYZW(e,t.x,t.y,t.z,t.w)}},updateMatrixWorld:function(e){Ut.prototype.updateMatrixWorld.call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Tr.prototype=Object.create(Ke.prototype),Tr.prototype.constructor=Tr,Tr.prototype.isLineBasicMaterial=!0,Tr.prototype.copy=function(e){return Ke.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this},Sr.prototype=Object.assign(Object.create(pt.prototype),{constructor:Sr,isLine:!0,computeLineDistances:function(){var t=new _,r=new _;return function(){var a=this.geometry;if(a.isBufferGeometry){if(null===a.index){for(var o=a.attributes.position,i=[0],e=1,n=o.count;e<n;e++)t.fromBufferAttribute(o,e-1),r.fromBufferAttribute(o,e),i[e]=i[e-1],i[e]+=t.distanceTo(r);a.addAttribute("lineDistance",new THREE.Float32BufferAttribute(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");}else if(a.isGeometry)for(o=a.vertices,i=a.lineDistances,i[0]=0,e=1,n=o.length;e<n;e++)i[e]=i[e-1],i[e]+=o[e-1].distanceTo(o[e]);return this}}(),raycast:function(){var o=new i,a=new Ct,s=new at;return function(i,p){var e=i.linePrecision;e*=e;var d=this.geometry,c=this.matrixWorld;if(null===d.boundingSphere&&d.computeBoundingSphere(),s.copy(d.boundingSphere),s.applyMatrix4(c),!1!==i.ray.intersectsSphere(s)){o.getInverse(c),a.copy(i.ray).applyMatrix4(o);var f=new _,h=new _;c=new _;var m=new _,l=this&&this.isLineSegments?2:1;if(d.isBufferGeometry){var n=d.index,u=d.attributes.position.array;if(null!==n){n=n.array,d=0;for(var y=n.length-1,r;d<y;d+=l)r=n[d+1],f.fromArray(u,3*n[d]),h.fromArray(u,3*r),r=a.distanceSqToSegment(f,h,m,c),r>e||(m.applyMatrix4(this.matrixWorld),r=i.ray.origin.distanceTo(m),r<i.near||r>i.far||p.push({distance:r,point:c.clone().applyMatrix4(this.matrixWorld),index:d,face:null,faceIndex:null,object:this}))}else for(d=0,y=u.length/3-1;d<y;d+=l)f.fromArray(u,3*d),h.fromArray(u,3*d+3),r=a.distanceSqToSegment(f,h,m,c),r>e||(m.applyMatrix4(this.matrixWorld),r=i.ray.origin.distanceTo(m),r<i.near||r>i.far||p.push({distance:r,point:c.clone().applyMatrix4(this.matrixWorld),index:d,face:null,faceIndex:null,object:this}))}else if(d.isGeometry)for(f=d.vertices,h=f.length,d=0;d<h-1;d+=l)r=a.distanceSqToSegment(f[d],f[d+1],m,c),r>e||(m.applyMatrix4(this.matrixWorld),r=i.ray.origin.distanceTo(m),r<i.near||r>i.far||p.push({distance:r,point:c.clone().applyMatrix4(this.matrixWorld),index:d,face:null,faceIndex:null,object:this}))}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Mr.prototype=Object.assign(Object.create(Sr.prototype),{constructor:Mr,isLineSegments:!0,computeLineDistances:function(){var t=new _,r=new _;return function(){var a=this.geometry;if(a.isBufferGeometry){if(null===a.index){for(var o=a.attributes.position,i=[],e=0,n=o.count;e<n;e+=2)t.fromBufferAttribute(o,e),r.fromBufferAttribute(o,e+1),i[e]=0===e?0:i[e-1],i[e+1]=i[e]+t.distanceTo(r);a.addAttribute("lineDistance",new THREE.Float32BufferAttribute(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");}else if(a.isGeometry)for(o=a.vertices,i=a.lineDistances,e=0,n=o.length;e<n;e+=2)t.copy(o[e]),r.copy(o[e+1]),i[e]=0===e?0:i[e-1],i[e+1]=i[e]+t.distanceTo(r);return this}}()}),Ar.prototype=Object.assign(Object.create(Sr.prototype),{constructor:Ar,isLineLoop:!0}),wr.prototype=Object.create(Ke.prototype),wr.prototype.constructor=wr,wr.prototype.isPointsMaterial=!0,wr.prototype.copy=function(e){return Ke.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this},Rr.prototype=Object.assign(Object.create(pt.prototype),{constructor:Rr,isPoints:!0,raycast:function(){var e=new i,t=new Ct,a=new at;return function(o,i){function s(e,r){var a=t.distanceSqToPoint(e);if(a<m){e=t.closestPointToPoint(e),e.applyMatrix4(y);var n=o.ray.origin.distanceTo(e);n<o.near||n>o.far||i.push({distance:n,distanceToRay:cn(a),point:e.clone(),index:r,face:null,object:p})}}var p=this,d=this.geometry,y=this.matrixWorld,c=o.params.Points.threshold;if(null===d.boundingSphere&&d.computeBoundingSphere(),a.copy(d.boundingSphere),a.applyMatrix4(y),a.radius+=c,!1!==o.ray.intersectsSphere(a)){e.getInverse(y),t.copy(o.ray).applyMatrix4(e),c/=(this.scale.x+this.scale.y+this.scale.z)/3;var m=c*c;if(c=new _,d.isBufferGeometry){var l=d.index;if(d=d.attributes.position.array,null!==l){var n=l.array;l=0;for(var u=n.length,f;l<u;l++)f=n[l],c.fromArray(d,3*f),s(c,f)}else for(l=0,n=d.length/3;l<n;l++)c.fromArray(d,3*l),s(c,l)}else for(c=d.vertices,l=0,n=c.length;l<n;l++)s(c[l],l)}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Lr.prototype=Object.assign(Object.create(pt.prototype),{constructor:Lr,isGroup:!0}),Cr.prototype=Object.assign(Object.create(r.prototype),{constructor:Cr,isVideoTexture:!0,update:function(){var e=this.image;e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),Pr.prototype=Object.create(r.prototype),Pr.prototype.constructor=Pr,Pr.prototype.isCompressedTexture=!0,Ir.prototype=Object.create(r.prototype),Ir.prototype.constructor=Ir,Ir.prototype.isDepthTexture=!0,Ur.prototype=Object.create(Tt.prototype),Ur.prototype.constructor=Ur,Dr.prototype=Object.create(ut.prototype),Dr.prototype.constructor=Dr,Nr.prototype=Object.create(Tt.prototype),Nr.prototype.constructor=Nr,Br.prototype=Object.create(ut.prototype),Br.prototype.constructor=Br,Fr.prototype=Object.create(Tt.prototype),Fr.prototype.constructor=Fr,zr.prototype=Object.create(ut.prototype),zr.prototype.constructor=zr,Gr.prototype=Object.create(Fr.prototype),Gr.prototype.constructor=Gr,Or.prototype=Object.create(ut.prototype),Or.prototype.constructor=Or,Hr.prototype=Object.create(Fr.prototype),Hr.prototype.constructor=Hr,Vr.prototype=Object.create(ut.prototype),Vr.prototype.constructor=Vr,kr.prototype=Object.create(Fr.prototype),kr.prototype.constructor=kr,Wr.prototype=Object.create(ut.prototype),Wr.prototype.constructor=Wr,jr.prototype=Object.create(Fr.prototype),jr.prototype.constructor=jr,Xr.prototype=Object.create(ut.prototype),Xr.prototype.constructor=Xr,Yr.prototype=Object.create(Tt.prototype),Yr.prototype.constructor=Yr,qr.prototype=Object.create(ut.prototype),qr.prototype.constructor=qr,Zr.prototype=Object.create(Tt.prototype),Zr.prototype.constructor=Zr,Jr.prototype=Object.create(ut.prototype),Jr.prototype.constructor=Jr,Qr.prototype=Object.create(Tt.prototype),Qr.prototype.constructor=Qr;var Ln={triangulate:function(t,a,o){o=o||2;var i=a&&a.length,s=i?a[0]*o:t.length,e=Kr(t,0,s,o,!0),d=[];if(!e)return d;var c;if(i){var u=o;i=[];var g=0,l;for(l=a.length;g<l;g++){var m=a[g]*u,n=g<l-1?a[g+1]*u:t.length;m=Kr(t,m,n,u,!1),m===m.next&&(m.steiner=!0),i.push(ca(m))}for(i.sort(ta),g=0;g<i.length;g++)a=i[g],u=e,(u=ia(a,u))&&(a=ya(u,a),Xe(a,a.next)),e=Xe(e,e.next)}if(t.length>80*o){var p=c=t[0],h=i=t[1];for(u=o;u<s;u+=o)g=t[u],a=t[u+1],g<p&&(p=g),a<h&&(h=a),g>c&&(c=g),a>i&&(i=a);c=fn(c-p,i-h),c=0===c?0:1/c}return $r(e,d,o,p,h,c),d}},Cn={area:function(t){for(var r=t.length,a=0,o=r-1,i=0;i<r;o=i++)a+=t[o].x*t[i].y-t[i].x*t[o].y;return .5*a},isClockWise:function(e){return 0>Cn.area(e)},triangulateShape:function(t,r){var a=[],o=[],i=[];_a(t),ba(a,t);var e=t.length;for(r.forEach(_a),t=0;t<r.length;t++)o.push(e),e+=r[t].length,ba(a,r[t]);for(r=Ln.triangulate(a,o),t=0;t<r.length;t+=3)i.push(r.slice(t,t+3));return i}};Ra.prototype=Object.create(ut.prototype),Ra.prototype.constructor=Ra,Ca.prototype=Object.create(Tt.prototype),Ca.prototype.constructor=Ca,Ca.prototype.getArrays=function(){var e=this.getAttribute("position");e=e?Array.prototype.slice.call(e.array):[];var t=this.getAttribute("uv");t=t?Array.prototype.slice.call(t.array):[];var r=this.index;return r=r?Array.prototype.slice.call(r.array):[],{position:e,uv:t,index:r}},Ca.prototype.addShapeList=function(e,t){var r=e.length;t.arrays=this.getArrays();for(var a=0;a<r;a++)this.addShape(e[a],t);this.setIndex(t.arrays.index),this.addAttribute("position",new bt(t.arrays.position,3)),this.addAttribute("uv",new bt(t.arrays.uv,2))},Ca.prototype.addShape=function(i,s){function a(e,t,r){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(r).add(e)}function p(t,r,a){var i=t.x-r.x,n=t.y-r.y,s=a.x-t.x,l=a.y-t.y,p=i*i+n*n;if(yn(i*l-n*s)>nn){var c=cn(p),u=cn(s*s+l*l);if(p=r.x-n/c,r=r.y+i/c,l=((a.x-l/u-p)*l-(a.y+s/u-r)*s)/(i*l-n*s),s=p+i*l-t.x,i=r+n*l-t.y,n=s*s+i*i,2>=n)return new o(s,i);n=cn(n/2)}else t=!1,i>nn?s>nn&&(t=!0):i<-nn?s<-nn&&(t=!0):an(n)===an(l)&&(t=!0),t?(s=-n,n=cn(p)):(s=i,i=n,n=cn(p/2));return new o(s/n,i/n)}function d(r,a){for(H=r.length;0<=--H;){var o=H,i=H-1;0>i&&(i=r.length-1);var s=w+2*t,l;for(l=0;l<s;l++){var d=z*l,c=z*(l+1),m=a+i+d,n=a+i+c;c=a+o+c,v(a+o+d),v(m),v(c),v(m),v(n),v(c),d=E.length/3,d=A.generateSideWallUV(M,E,d-6,d-3,d-2,d-1),h(d[0]),h(d[1]),h(d[3]),h(d[1]),h(d[2]),h(d[3])}}}function e(e,t,r){m.push(e),m.push(t),m.push(r)}function f(e,t,r){v(e),v(t),v(r),e=E.length/3,e=A.generateTopUV(M,E,e-3,e-2,e-1),h(e[0]),h(e[1]),h(e[2])}function v(e){l.push(E.length/3),E.push(m[3*e]),E.push(m[3*e+1]),E.push(m[3*e+2])}function h(e){n.push(e.x),n.push(e.y)}var c=s.arrays?s.arrays:this.getArrays(),E=c.position,l=c.index,n=c.uv,m=[];c=void 0===s.amount?100:s.amount;var u=void 0===s.bevelThickness?6:s.bevelThickness,r=void 0===s.bevelSize?u-2:s.bevelSize,t=void 0===s.bevelSegments?3:s.bevelSegments,g=!(void 0!==s.bevelEnabled)||s.bevelEnabled,x=void 0===s.curveSegments?12:s.curveSegments,w=void 0===s.steps?1:s.steps,b=s.extrudePath,y=!1,A=void 0===s.UVGenerator?Ra.WorldUVGenerator:s.UVGenerator;if(b){var C=b.getSpacedPoints(w);y=!0,g=!1;var D=void 0===s.frames?b.computeFrenetFrames(w,!1):s.frames,I=new _,N=new _,L=new _}g||(r=u=t=0);var M=this,S;x=i.extractPoints(x),i=x.shape;var B=x.holes;if(!Cn.isClockWise(i)){i=i.reverse();var P=0;for(S=B.length;P<S;P++){var T=B[P];Cn.isClockWise(T)&&(B[P]=T.reverse())}}var R=Cn.triangulateShape(i,B),F=i;for(P=0,S=B.length;P<S;P++)T=B[P],i=i.concat(T);var z=i.length,G=R.length,O,U;x=[];var H=0,k=F.length,V=k-1;for(O=H+1;H<k;H++,V++,O++)V===k&&(V=0),O===k&&(O=0),x[H]=p(F[H],F[V],F[O]);b=[];var W=x.concat();for(P=0,S=B.length;P<S;P++){T=B[P];var j=[];for(H=0,k=T.length,V=k-1,O=H+1;H<k;H++,V++,O++)V===k&&(V=0),O===k&&(O=0),j[H]=p(T[H],T[V],T[O]);b.push(j),W=W.concat(j)}for(V=0;V<t;V++){k=V/t;var X=u*gn(k*dn/2);for(O=r*sn(k*dn/2),H=0,k=F.length;H<k;H++){var Y=a(F[H],x[H],O);e(Y.x,Y.y,-X)}for(P=0,S=B.length;P<S;P++)for(T=B[P],j=b[P],H=0,k=T.length;H<k;H++)Y=a(T[H],j[H],O),e(Y.x,Y.y,-X)}for(O=r,H=0;H<z;H++)Y=g?a(i[H],W[H],O):i[H],y?(N.copy(D.normals[0]).multiplyScalar(Y.x),I.copy(D.binormals[0]).multiplyScalar(Y.y),L.copy(C[0]).add(N).add(I),e(L.x,L.y,L.z)):e(Y.x,Y.y,0);for(k=1;k<=w;k++)for(H=0;H<z;H++)Y=g?a(i[H],W[H],O):i[H],y?(N.copy(D.normals[k]).multiplyScalar(Y.x),I.copy(D.binormals[k]).multiplyScalar(Y.y),L.copy(C[k]).add(N).add(I),e(L.x,L.y,L.z)):e(Y.x,Y.y,c/w*k);for(V=t-1;0<=V;V--){for(k=V/t,X=u*gn(k*dn/2),O=r*sn(k*dn/2),H=0,k=F.length;H<k;H++)Y=a(F[H],x[H],O),e(Y.x,Y.y,c+X);for(P=0,S=B.length;P<S;P++)for(T=B[P],j=b[P],H=0,k=T.length;H<k;H++)Y=a(T[H],j[H],O),y?e(Y.x,Y.y+C[w-1].y,C[w-1].x+X):e(Y.x,Y.y,c+X)}(function(){var e=E.length/3;if(g){var r=0*z;for(H=0;H<G;H++)U=R[H],f(U[2]+r,U[1]+r,U[0]+r);for(r=z*(w+2*t),H=0;H<G;H++)U=R[H],f(U[0]+r,U[1]+r,U[2]+r)}else{for(H=0;H<G;H++)U=R[H],f(U[2],U[1],U[0]);for(H=0;H<G;H++)U=R[H],f(U[0]+z*w,U[1]+z*w,U[2]+z*w)}M.addGroup(e,E.length/3-e,void 0===s.material?0:s.material)})(),function(){var e=E.length/3,t=0;for(d(F,t),t+=F.length,P=0,S=B.length;P<S;P++)T=B[P],d(T,t),t+=T.length;M.addGroup(e,E.length/3-e,void 0===s.extrudeMaterial?1:s.extrudeMaterial)}(),s.arrays||(this.setIndex(l),this.addAttribute("position",new bt(E,3)),this.addAttribute("uv",new bt(n,2)))},Ra.WorldUVGenerator={generateTopUV:function(t,r,a,i,n){t=r[3*i],i=r[3*i+1];var e=r[3*n];return n=r[3*n+1],[new o(r[3*a],r[3*a+1]),new o(t,i),new o(e,n)]},generateSideWallUV:function(t,r,a,i,s,e){t=r[3*a];var d=r[3*a+1];a=r[3*a+2];var c=r[3*i],u=r[3*i+1];i=r[3*i+2];var g=r[3*s],m=r[3*s+1];s=r[3*s+2];var l=r[3*e],n=r[3*e+1];return r=r[3*e+2],.01>yn(d-u)?[new o(t,1-a),new o(c,1-i),new o(g,1-s),new o(l,1-r)]:[new o(d,1-a),new o(u,1-i),new o(m,1-s),new o(n,1-r)]}},Fa.prototype=Object.create(ut.prototype),Fa.prototype.constructor=Fa,Ga.prototype=Object.create(Ca.prototype),Ga.prototype.constructor=Ga,Va.prototype=Object.create(ut.prototype),Va.prototype.constructor=Va,Wa.prototype=Object.create(Tt.prototype),Wa.prototype.constructor=Wa,ja.prototype=Object.create(ut.prototype),ja.prototype.constructor=ja,Xa.prototype=Object.create(Tt.prototype),Xa.prototype.constructor=Xa,eo.prototype=Object.create(ut.prototype),eo.prototype.constructor=eo,to.prototype=Object.create(Tt.prototype),to.prototype.constructor=to,ro.prototype=Object.create(ut.prototype),ro.prototype.constructor=ro,ro.prototype.toJSON=function(){var e=ut.prototype.toJSON.call(this);return oo(this.parameters.shapes,e)},ao.prototype=Object.create(Tt.prototype),ao.prototype.constructor=ao,ao.prototype.toJSON=function(){var e=Tt.prototype.toJSON.call(this);return oo(this.parameters.shapes,e)},io.prototype=Object.create(Tt.prototype),io.prototype.constructor=io,no.prototype=Object.create(ut.prototype),no.prototype.constructor=no,so.prototype=Object.create(Tt.prototype),so.prototype.constructor=so,lo.prototype=Object.create(no.prototype),lo.prototype.constructor=lo,po.prototype=Object.create(so.prototype),po.prototype.constructor=po,co.prototype=Object.create(ut.prototype),co.prototype.constructor=co,mo.prototype=Object.create(Tt.prototype),mo.prototype.constructor=mo;var Ya=Object.freeze({WireframeGeometry:Ur,ParametricGeometry:Dr,ParametricBufferGeometry:Nr,TetrahedronGeometry:zr,TetrahedronBufferGeometry:Gr,OctahedronGeometry:Or,OctahedronBufferGeometry:Hr,IcosahedronGeometry:Vr,IcosahedronBufferGeometry:kr,DodecahedronGeometry:Wr,DodecahedronBufferGeometry:jr,PolyhedronGeometry:Br,PolyhedronBufferGeometry:Fr,TubeGeometry:Xr,TubeBufferGeometry:Yr,TorusKnotGeometry:qr,TorusKnotBufferGeometry:Zr,TorusGeometry:Jr,TorusBufferGeometry:Qr,TextGeometry:Fa,TextBufferGeometry:Ga,SphereGeometry:Va,SphereBufferGeometry:Wa,RingGeometry:ja,RingBufferGeometry:Xa,PlaneGeometry:At,PlaneBufferGeometry:wt,LatheGeometry:eo,LatheBufferGeometry:to,ShapeGeometry:ro,ShapeBufferGeometry:ao,ExtrudeGeometry:Ra,ExtrudeBufferGeometry:Ca,EdgesGeometry:io,ConeGeometry:lo,ConeBufferGeometry:po,CylinderGeometry:no,CylinderBufferGeometry:so,CircleGeometry:co,CircleBufferGeometry:mo,BoxGeometry:St,BoxBufferGeometry:Mt});uo.prototype=Object.create(Ke.prototype),uo.prototype.constructor=uo,uo.prototype.isShadowMaterial=!0,go.prototype=Object.create(Lt.prototype),go.prototype.constructor=go,go.prototype.isRawShaderMaterial=!0,fo.prototype=Object.create(Ke.prototype),fo.prototype.constructor=fo,fo.prototype.isMeshStandardMaterial=!0,fo.prototype.copy=function(e){return Ke.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},ho.prototype=Object.create(fo.prototype),ho.prototype.constructor=ho,ho.prototype.isMeshPhysicalMaterial=!0,ho.prototype.copy=function(e){return fo.prototype.copy.call(this,e),this.defines={PHYSICAL:""},this.reflectivity=e.reflectivity,this.clearCoat=e.clearCoat,this.clearCoatRoughness=e.clearCoatRoughness,this},yo.prototype=Object.create(Ke.prototype),yo.prototype.constructor=yo,yo.prototype.isMeshPhongMaterial=!0,yo.prototype.copy=function(e){return Ke.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},xo.prototype=Object.create(yo.prototype),xo.prototype.constructor=xo,xo.prototype.isMeshToonMaterial=!0,xo.prototype.copy=function(e){return yo.prototype.copy.call(this,e),this.gradientMap=e.gradientMap,this},vo.prototype=Object.create(Ke.prototype),vo.prototype.constructor=vo,vo.prototype.isMeshNormalMaterial=!0,vo.prototype.copy=function(e){return Ke.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},_o.prototype=Object.create(Ke.prototype),_o.prototype.constructor=_o,_o.prototype.isMeshLambertMaterial=!0,_o.prototype.copy=function(e){return Ke.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},bo.prototype=Object.create(Tr.prototype),bo.prototype.constructor=bo,bo.prototype.isLineDashedMaterial=!0,bo.prototype.copy=function(e){return Tr.prototype.copy.call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var oa=Object.freeze({ShadowMaterial:uo,SpriteMaterial:yr,RawShaderMaterial:go,ShaderMaterial:Lt,PointsMaterial:wr,MeshPhysicalMaterial:ho,MeshStandardMaterial:fo,MeshPhongMaterial:yo,MeshToonMaterial:xo,MeshNormalMaterial:vo,MeshLambertMaterial:_o,MeshDepthMaterial:et,MeshDistanceMaterial:tt,MeshBasicMaterial:Rt,LineDashedMaterial:bo,LineBasicMaterial:Tr,Material:Ke}),Pn={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},In=new Eo,ra={};Object.assign(ae.prototype,{load:function(t,r,a,o){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var i=this,e=Pn.get(t);if(void 0!==e)return i.manager.itemStart(t),setTimeout(function(){r&&r(e),i.manager.itemEnd(t)},0),e;if(void 0!==ra[t])ra[t].push({onLoad:r,onProgress:a,onError:o});else{var s=t.match(/^data:(.*?)(;base64)?,(.*)$/);if(s){a=s[1];var p=!!s[2];s=s[3],s=window.decodeURIComponent(s),p&&(s=window.atob(s));try{var u=(this.responseType||"").toLowerCase();switch(u){case"arraybuffer":case"blob":var g=new Uint8Array(s.length);for(p=0;p<s.length;p++)g[p]=s.charCodeAt(p);var m="blob"===u?new Blob([g.buffer],{type:a}):g.buffer;break;case"document":m=new DOMParser().parseFromString(s,a);break;case"json":m=JSON.parse(s);break;default:m=s;}window.setTimeout(function(){r&&r(m),i.manager.itemEnd(t)},0)}catch(e){window.setTimeout(function(){o&&o(e),i.manager.itemEnd(t),i.manager.itemError(t)},0)}}else{ra[t]=[],ra[t].push({onLoad:r,onProgress:a,onError:o});var l=new XMLHttpRequest;for(p in l.open("GET",t,!0),l.addEventListener("load",function(e){var r=this.response;Pn.add(t,r);var a=ra[t];if(delete ra[t],200===this.status){for(var o=0,n=a.length,s;o<n;o++)s=a[o],s.onLoad&&s.onLoad(r);i.manager.itemEnd(t)}else if(0===this.status){for(console.warn("THREE.FileLoader: HTTP Status 0 received."),o=0,n=a.length;o<n;o++)(s=a[o],s.onLoad)&&s.onLoad(r);i.manager.itemEnd(t)}else{for(o=0,n=a.length;o<n;o++)(s=a[o],s.onError)&&s.onError(e);i.manager.itemEnd(t),i.manager.itemError(t)}},!1),l.addEventListener("progress",function(r){for(var a=ra[t],o=0,i=a.length,e;o<i;o++)e=a[o],e.onProgress&&e.onProgress(r)},!1),l.addEventListener("error",function(e){var r=ra[t];delete ra[t];for(var a=0,o=r.length,n;a<o;a++)n=r[a],n.onError&&n.onError(e);i.manager.itemEnd(t),i.manager.itemError(t)},!1),void 0!==this.responseType&&(l.responseType=this.responseType),void 0!==this.withCredentials&&(l.withCredentials=this.withCredentials),l.overrideMimeType&&l.overrideMimeType(void 0===this.mimeType?"text/plain":this.mimeType),this.requestHeader)l.setRequestHeader(p,this.requestHeader[p]);l.send(null)}return i.manager.itemStart(t),l}},setPath:function(e){return this.path=e,this},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setMimeType:function(e){return this.mimeType=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}}),Object.assign(Ka.prototype,{load:function(t,r,a,o){function i(i){d.load(t[i],function(e){e=s._parser(e,!0),p[i]={width:e.width,height:e.height,format:e.format,mipmaps:e.mipmaps},c+=1,6===c&&(1===e.mipmapCount&&(u.minFilter=1006),u.format=e.format,u.needsUpdate=!0,r&&r(u))},a,o)}var s=this,p=[],u=new Pr;u.image=p;var d=new ae(this.manager);if(d.setPath(this.path),d.setResponseType("arraybuffer"),Array.isArray(t))for(var c=0,e=0,l=t.length;e<l;++e)i(e);else d.load(t,function(t){if(t=s._parser(t,!0),t.isCubemap)for(var a=t.mipmaps.length/t.mipmapCount,o=0;o<a;o++){p[o]={mipmaps:[]};for(var i=0;i<t.mipmapCount;i++)p[o].mipmaps.push(t.mipmaps[o*t.mipmapCount+i]),p[o].format=t.format,p[o].width=t.width,p[o].height=t.height}else u.image.width=t.width,u.image.height=t.height,u.mipmaps=t.mipmaps;1===t.mipmapCount&&(u.minFilter=1006),u.format=t.format,u.needsUpdate=!0,r&&r(u)},a,o);return u},setPath:function(e){return this.path=e,this}}),Object.assign(To.prototype,{load:function(t,r,a,o){var i=this,e=new l,n=new ae(this.manager);return n.setResponseType("arraybuffer"),n.load(t,function(t){(t=i._parser(t))&&(void 0===t.image?void 0!==t.data&&(e.image.width=t.width,e.image.height=t.height,e.image.data=t.data):e.image=t.image,e.wrapS=void 0===t.wrapS?1001:t.wrapS,e.wrapT=void 0===t.wrapT?1001:t.wrapT,e.magFilter=void 0===t.magFilter?1006:t.magFilter,e.minFilter=void 0===t.minFilter?1008:t.minFilter,e.anisotropy=void 0===t.anisotropy?1:t.anisotropy,void 0!==t.format&&(e.format=t.format),void 0!==t.type&&(e.type=t.type),void 0!==t.mipmaps&&(e.mipmaps=t.mipmaps),1===t.mipmapCount&&(e.minFilter=1006),e.needsUpdate=!0,r&&r(e,t))},a,o),e}}),Object.assign(be.prototype,{crossOrigin:"Anonymous",load:function(t,r,a,o){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var i=this,e=Pn.get(t);return void 0===e?(a=document.createElementNS("http://www.w3.org/1999/xhtml","img"),a.addEventListener("load",function(){Pn.add(t,this),r&&r(this),i.manager.itemEnd(t)},!1),a.addEventListener("error",function(e){o&&o(e),i.manager.itemEnd(t),i.manager.itemError(t)},!1),"data:"!==t.substr(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),i.manager.itemStart(t),a.src=t,a):(i.manager.itemStart(t),setTimeout(function(){r&&r(e),i.manager.itemEnd(t)},0),e)},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(So.prototype,{crossOrigin:"Anonymous",load:function(t,r,a,o){function i(i){n.load(t[i],function(t){e.images[i]=t,s++,6===s&&(e.needsUpdate=!0,r&&r(e))},void 0,o)}var e=new p,n=new be(this.manager);n.setCrossOrigin(this.crossOrigin),n.setPath(this.path);var s=0;for(a=0;a<t.length;++a)i(a);return e},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(ce.prototype,{crossOrigin:"Anonymous",load:function(t,a,o,i){var n=new r,e=new be(this.manager);return e.setCrossOrigin(this.crossOrigin),e.setPath(this.path),e.load(t,function(e){n.image=e,e=0<t.search(/\.(jpg|jpeg)$/)||0===t.search(/^data:image\/jpeg/),n.format=e?1022:1023,n.needsUpdate=!0,void 0!==a&&a(n)},o,i),n},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(Mo.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(e,t){return e=this.getUtoTmapping(e),this.getPoint(e,t)},getPoints:function(e){void 0===e&&(e=5);for(var t=[],r=0;r<=e;r++)t.push(this.getPoint(r/e));return t},getSpacedPoints:function(e){void 0===e&&(e=5);for(var t=[],r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(t){if(void 0===t&&(t=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var r=[],a=this.getPoint(0),o=0,e;for(r.push(0),e=1;e<=t;e++){var i=this.getPoint(e/t);o+=i.distanceTo(a),r.push(o),a=i}return this.cacheArcLengths=r},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(t,r){var a=this.getLengths(),o=a.length;r=r?r:t*a[o-1];for(var i=0,e=o-1,n;i<=e;)if(t=xn(i+(e-i)/2),n=a[t]-r,0>n)i=t+1;else if(0<n)e=t-1;else{e=t;break}return(t=e,a[t]===r)?t/(o-1):(i=a[t],(t+(r-i)/(a[t+1]-i))/(o-1))},getTangent:function(e){var t=e-1E-4;return e+=1E-4,0>t&&(t=0),1<e&&(e=1),t=this.getPoint(t),this.getPoint(e).clone().sub(t).normalize()},getTangentAt:function(e){return e=this.getUtoTmapping(e),this.getTangent(e)},computeFrenetFrames:function(t,r){var a=new _,o=[],s=[],p=[],u=new _,g=new i,h;for(h=0;h<=t;h++){var y=h/t;o[h]=this.getTangentAt(y),o[h].normalize()}s[0]=new _,p[0]=new _,h=Number.MAX_VALUE,y=yn(o[0].x);var m=yn(o[0].y),l=yn(o[0].z);for(y<=h&&(h=y,a.set(1,0,0)),m<=h&&(h=m,a.set(0,1,0)),l<=h&&a.set(0,0,1),u.crossVectors(o[0],a).normalize(),s[0].crossVectors(o[0],u),p[0].crossVectors(o[0],s[0]),h=1;h<=t;h++)s[h]=s[h-1].clone(),p[h]=p[h-1].clone(),u.crossVectors(o[h-1],o[h]),u.length()>nn&&(u.normalize(),a=en(vn.clamp(o[h-1].dot(o[h]),-1,1)),s[h].applyMatrix4(g.makeRotationAxis(u,a))),p[h].crossVectors(o[h],s[h]);if(!0===r)for(a=en(vn.clamp(s[0].dot(s[t]),-1,1)),a/=t,0<o[0].dot(u.crossVectors(s[0],s[t]))&&(a=-a),h=1;h<=t;h++)s[h].applyMatrix4(g.makeRotationAxis(o[h],a*h)),p[h].crossVectors(o[h],s[h]);return{tangents:o,normals:s,binormals:p}},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this},toJSON:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"},arcLengthDivisions:this.arcLengthDivisions,type:this.type};return e},fromJSON:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}),K.prototype=Object.create(Mo.prototype),K.prototype.constructor=K,K.prototype.isEllipseCurve=!0,K.prototype.getPoint=function(t,r){r=r||new o;for(var a=2*dn,i=this.aEndAngle-this.aStartAngle,n=yn(i)<nn;0>i;)i+=a;for(;i>a;)i-=a;i<nn&&(i=n?0:a),!0!==this.aClockwise||n||(i=i===a?-a:i-a),a=this.aStartAngle+t*i,t=this.aX+this.xRadius*gn(a);var e=this.aY+this.yRadius*sn(a);return 0!==this.aRotation&&(a=gn(this.aRotation),i=sn(this.aRotation),n=t-this.aX,e-=this.aY,t=n*a-e*i+this.aX,e=n*i+e*a+this.aY),r.set(t,e)},K.prototype.copy=function(e){return Mo.prototype.copy.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},K.prototype.toJSON=function(){var e=Mo.prototype.toJSON.call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e},K.prototype.fromJSON=function(e){return Mo.prototype.fromJSON.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},Ao.prototype=Object.create(K.prototype),Ao.prototype.constructor=Ao,Ao.prototype.isArcCurve=!0;var Un=new _,Dn=new wo,ye=new wo,ze=new wo;de.prototype=Object.create(Mo.prototype),de.prototype.constructor=de,de.prototype.isCatmullRomCurve3=!0,de.prototype.getPoint=function(t,r){r=r||new _;var a=this.points,o=a.length;t*=o-(this.closed?0:1);var i=xn(t);if(t-=i,this.closed?i+=0<i?0:(xn(yn(i)/a.length)+1)*a.length:0===t&&i===o-1&&(i=o-2,t=1),this.closed||0<i)var e=a[(i-1)%o];else Un.subVectors(a[0],a[1]).add(a[0]),e=Un;var n=a[i%o],s=a[(i+1)%o];if(this.closed||i+2<o?a=a[(i+2)%o]:(Un.subVectors(a[o-1],a[o-2]).add(a[o-1]),a=Un),"centripetal"===this.curveType||"chordal"===this.curveType){var l="chordal"===this.curveType?.5:.25;o=pn(e.distanceToSquared(n),l),i=pn(n.distanceToSquared(s),l),l=pn(s.distanceToSquared(a),l),1E-4>i&&(i=1),1E-4>o&&(o=i),1E-4>l&&(l=i),Dn.initNonuniformCatmullRom(e.x,n.x,s.x,a.x,o,i,l),ye.initNonuniformCatmullRom(e.y,n.y,s.y,a.y,o,i,l),ze.initNonuniformCatmullRom(e.z,n.z,s.z,a.z,o,i,l)}else"catmullrom"===this.curveType&&(Dn.initCatmullRom(e.x,n.x,s.x,a.x,this.tension),ye.initCatmullRom(e.y,n.y,s.y,a.y,this.tension),ze.initCatmullRom(e.z,n.z,s.z,a.z,this.tension));return r.set(Dn.calc(t),ye.calc(t),ze.calc(t)),r},de.prototype.copy=function(e){Mo.prototype.copy.call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++)this.points.push(e.points[t].clone());return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},de.prototype.toJSON=function(){var e=Mo.prototype.toJSON.call(this);e.points=[];for(var t=0,r=this.points.length;t<r;t++)e.points.push(this.points[t].toArray());return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e},de.prototype.fromJSON=function(e){Mo.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,r=e.points.length,a;t<r;t++)a=e.points[t],this.points.push(new _().fromArray(a));return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},Po.prototype=Object.create(Mo.prototype),Po.prototype.constructor=Po,Po.prototype.isCubicBezierCurve=!0,Po.prototype.getPoint=function(t,r){r=r||new o;var a=this.v0,i=this.v1,n=this.v2,e=this.v3;return r.set(Co(t,a.x,i.x,n.x,e.x),Co(t,a.y,i.y,n.y,e.y)),r},Po.prototype.copy=function(e){return Mo.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},Po.prototype.toJSON=function(){var e=Mo.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},Po.prototype.fromJSON=function(e){return Mo.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},Io.prototype=Object.create(Mo.prototype),Io.prototype.constructor=Io,Io.prototype.isCubicBezierCurve3=!0,Io.prototype.getPoint=function(t,r){r=r||new _;var a=this.v0,o=this.v1,i=this.v2,e=this.v3;return r.set(Co(t,a.x,o.x,i.x,e.x),Co(t,a.y,o.y,i.y,e.y),Co(t,a.z,o.z,i.z,e.z)),r},Io.prototype.copy=function(e){return Mo.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},Io.prototype.toJSON=function(){var e=Mo.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},Io.prototype.fromJSON=function(e){return Mo.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},Uo.prototype=Object.create(Mo.prototype),Uo.prototype.constructor=Uo,Uo.prototype.isLineCurve=!0,Uo.prototype.getPoint=function(e,t){return t=t||new o,1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t},Uo.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},Uo.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()},Uo.prototype.copy=function(e){return Mo.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Uo.prototype.toJSON=function(){var e=Mo.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Uo.prototype.fromJSON=function(e){return Mo.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Do.prototype=Object.create(Mo.prototype),Do.prototype.constructor=Do,Do.prototype.isLineCurve3=!0,Do.prototype.getPoint=function(e,t){return t=t||new _,1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t},Do.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},Do.prototype.copy=function(e){return Mo.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Do.prototype.toJSON=function(){var e=Mo.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Do.prototype.fromJSON=function(e){return Mo.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},No.prototype=Object.create(Mo.prototype),No.prototype.constructor=No,No.prototype.isQuadraticBezierCurve=!0,No.prototype.getPoint=function(t,r){r=r||new o;var a=this.v0,i=this.v1,n=this.v2;return r.set(Lo(t,a.x,i.x,n.x),Lo(t,a.y,i.y,n.y)),r},No.prototype.copy=function(e){return Mo.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},No.prototype.toJSON=function(){var e=Mo.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},No.prototype.fromJSON=function(e){return Mo.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Bo.prototype=Object.create(Mo.prototype),Bo.prototype.constructor=Bo,Bo.prototype.isQuadraticBezierCurve3=!0,Bo.prototype.getPoint=function(t,r){r=r||new _;var a=this.v0,o=this.v1,i=this.v2;return r.set(Lo(t,a.x,o.x,i.x),Lo(t,a.y,o.y,i.y),Lo(t,a.z,o.z,i.z)),r},Bo.prototype.copy=function(e){return Mo.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Bo.prototype.toJSON=function(){var e=Mo.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Bo.prototype.fromJSON=function(e){return Mo.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Fo.prototype=Object.create(Mo.prototype),Fo.prototype.constructor=Fo,Fo.prototype.isSplineCurve=!0,Fo.prototype.getPoint=function(t,r){r=r||new o;var a=this.points,i=(a.length-1)*t;t=xn(i),i-=t;var n=a[0===t?t:t-1],e=a[t],s=a[t>a.length-2?a.length-1:t+1];return a=a[t>a.length-3?a.length-1:t+2],r.set(Ro(i,n.x,e.x,s.x,a.x),Ro(i,n.y,e.y,s.y,a.y)),r},Fo.prototype.copy=function(e){Mo.prototype.copy.call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++)this.points.push(e.points[t].clone());return this},Fo.prototype.toJSON=function(){var e=Mo.prototype.toJSON.call(this);e.points=[];for(var t=0,r=this.points.length;t<r;t++)e.points.push(this.points[t].toArray());return e},Fo.prototype.fromJSON=function(e){Mo.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,r=e.points.length,a;t<r;t++)a=e.points[t],this.points.push(new o().fromArray(a));return this};var Ae=Object.freeze({ArcCurve:Ao,CatmullRomCurve3:de,CubicBezierCurve:Po,CubicBezierCurve3:Io,EllipseCurve:K,LineCurve:Uo,LineCurve3:Do,QuadraticBezierCurve:No,QuadraticBezierCurve3:Bo,SplineCurve:Fo});zo.prototype=Object.assign(Object.create(Mo.prototype),{constructor:zo,add:function(e){this.curves.push(e)},closePath:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Uo(t,e))},getPoint:function(e){var t=e*this.getLength(),r=this.getCurveLengths();for(e=0;e<r.length;){if(r[e]>=t)return t=r[e]-t,e=this.curves[e],r=e.getLength(),e.getPointAt(0===r?0:1-t/r);e++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,r=0,a=this.curves.length;r<a;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e},getSpacedPoints:function(e){void 0===e&&(e=40);for(var t=[],r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(t){t=t||12;for(var r=[],a=0,o=this.curves,e,i;a<o.length;a++){i=o[a],i=i.getPoints(i&&i.isEllipseCurve?2*t:i&&i.isLineCurve?1:i&&i.isSplineCurve?t*i.points.length:t);for(var n=0,s;n<i.length;n++)s=i[n],e&&e.equals(s)||(r.push(s),e=s)}return this.autoClose&&1<r.length&&!r[r.length-1].equals(r[0])&&r.push(r[0]),r},copy:function(e){Mo.prototype.copy.call(this,e),this.curves=[];for(var t=0,r=e.curves.length;t<r;t++)this.curves.push(e.curves[t].clone());return this.autoClose=e.autoClose,this},toJSON:function(){var e=Mo.prototype.toJSON.call(this);e.autoClose=this.autoClose,e.curves=[];for(var t=0,r=this.curves.length;t<r;t++)e.curves.push(this.curves[t].toJSON());return e},fromJSON:function(e){Mo.prototype.fromJSON.call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var t=0,r=e.curves.length,a;t<r;t++)a=e.curves[t],this.curves.push(new Ae[a.type]().fromJSON(a));return this}}),Go.prototype=Object.assign(Object.create(zo.prototype),{constructor:Go,setFromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y)},moveTo:function(e,t){this.currentPoint.set(e,t)},lineTo:function(e,t){var r=new Uo(this.currentPoint.clone(),new o(e,t));this.curves.push(r),this.currentPoint.set(e,t)},quadraticCurveTo:function(e,t,r,a){e=new No(this.currentPoint.clone(),new o(e,t),new o(r,a)),this.curves.push(e),this.currentPoint.set(r,a)},bezierCurveTo:function(t,r,a,i,n,e){t=new Po(this.currentPoint.clone(),new o(t,r),new o(a,i),new o(n,e)),this.curves.push(t),this.currentPoint.set(n,e)},splineThru:function(e){var t=[this.currentPoint.clone()].concat(e);t=new Fo(t),this.curves.push(t),this.currentPoint.copy(e[e.length-1])},arc:function(t,r,a,o,i,e){this.absarc(t+this.currentPoint.x,r+this.currentPoint.y,a,o,i,e)},absarc:function(t,r,a,o,i,e){this.absellipse(t,r,a,a,o,i,e)},ellipse:function(t,r,a,o,i,e,n,s){this.absellipse(t+this.currentPoint.x,r+this.currentPoint.y,a,o,i,e,n,s)},absellipse:function(t,r,a,o,i,e,n,s){t=new K(t,r,a,o,i,e,n,s),0<this.curves.length&&(r=t.getPoint(0),r.equals(this.currentPoint)||this.lineTo(r.x,r.y)),this.curves.push(t),t=t.getPoint(1),this.currentPoint.copy(t)},copy:function(e){return zo.prototype.copy.call(this,e),this.currentPoint.copy(e.currentPoint),this},toJSON:function(){var e=zo.prototype.toJSON.call(this);return e.currentPoint=this.currentPoint.toArray(),e},fromJSON:function(e){return zo.prototype.fromJSON.call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}),Oo.prototype=Object.assign(Object.create(Go.prototype),{constructor:Oo,getPointsHoles:function(e){for(var t=[],r=0,a=this.holes.length;r<a;r++)t[r]=this.holes[r].getPoints(e);return t},extractPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},copy:function(e){Go.prototype.copy.call(this,e),this.holes=[];for(var t=0,r=e.holes.length;t<r;t++)this.holes.push(e.holes[t].clone());return this},toJSON:function(){var e=Go.prototype.toJSON.call(this);e.uuid=this.uuid,e.holes=[];for(var t=0,r=this.holes.length;t<r;t++)e.holes.push(this.holes[t].toJSON());return e},fromJSON:function(e){Go.prototype.fromJSON.call(this,e),this.uuid=e.uuid,this.holes=[];for(var t=0,r=e.holes.length,a;t<r;t++)a=e.holes[t],this.holes.push(new Go().fromJSON(a));return this}}),Ho.prototype=Object.assign(Object.create(pt.prototype),{constructor:Ho,isLight:!0,copy:function(e){return pt.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){return e=pt.prototype.toJSON.call(this,e),e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}),Vo.prototype=Object.assign(Object.create(Ho.prototype),{constructor:Vo,isHemisphereLight:!0,copy:function(e){return Ho.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}),Object.assign(ko.prototype,{copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),1!==this.radius&&(e.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}),Wo.prototype=Object.assign(Object.create(ko.prototype),{constructor:Wo,isSpotLightShadow:!0,update:function(e){var t=this.camera,r=2*vn.RAD2DEG*e.angle,a=this.mapSize.width/this.mapSize.height;e=e.distance||t.far,(r!==t.fov||a!==t.aspect||e!==t.far)&&(t.fov=r,t.aspect=a,t.far=e,t.updateProjectionMatrix())}}),jo.prototype=Object.assign(Object.create(Ho.prototype),{constructor:jo,isSpotLight:!0,copy:function(e){return Ho.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),Xo.prototype=Object.assign(Object.create(Ho.prototype),{constructor:Xo,isPointLight:!0,copy:function(e){return Ho.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}),Yo.prototype=Object.assign(Object.create(ko.prototype),{constructor:Yo}),qo.prototype=Object.assign(Object.create(Ho.prototype),{constructor:qo,isDirectionalLight:!0,copy:function(e){return Ho.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),Zo.prototype=Object.assign(Object.create(Ho.prototype),{constructor:Zo,isAmbientLight:!0}),Jo.prototype=Object.assign(Object.create(Ho.prototype),{constructor:Jo,isRectAreaLight:!0,copy:function(e){return Ho.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this},toJSON:function(e){return e=Ho.prototype.toJSON.call(this,e),e.object.width=this.width,e.object.height=this.height,e}}),Qo.prototype=Object.assign(Object.create(ni.prototype),{constructor:Qo,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Ko.prototype=Object.assign(Object.create(ni.prototype),{constructor:Ko,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Object.assign($o.prototype,{evaluate:function(t){var r=this.parameterPositions,a=this._cachedIndex,o=r[a],i=r[a-1];a:{b:{c:{d:if(!(t<o)){for(var e=a+2;;){if(void 0===o){if(t<i)break d;return this._cachedIndex=a=r.length,this.afterEnd_(a-1,t,i)}if(a===e)break;if(i=o,o=r[++a],t<o)break b}o=r.length;break c}if(t>=i)break a;else{for(e=r[1],t<e&&(a=2,i=e),e=a-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,t,o);if(a===e)break;if(o=i,i=r[--a-1],t>=i)break b}o=a,a=0}}for(;a<o;)i=a+o>>>1,t<r[i]?o=i:a=i+1;if(o=r[a],i=r[a-1],void 0===i)return this._cachedIndex=0,this.beforeStart_(0,t,o);if(void 0===o)return this._cachedIndex=a=r.length,this.afterEnd_(a-1,i,t)}this._cachedIndex=a,this.intervalChanged_(a,i,o)}return this.interpolate_(a,i,t,o)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(t){var r=this.resultBuffer,a=this.sampleValues,o=this.valueSize;t*=o;for(var i=0;i!==o;++i)r[i]=a[t+i];return r},interpolate_:function(){throw Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign($o.prototype,{beforeStart_:$o.prototype.copySampleValue_,afterEnd_:$o.prototype.copySampleValue_}),Ba.prototype=Object.assign(Object.create($o.prototype),{constructor:Ba,interpolate_:function(t,r,a,o){var i=this.resultBuffer,e=this.sampleValues,n=this.valueSize;for(t*=n,r=(a-r)/(o-r),a=t+n;t!==a;t+=4)s.slerpFlat(i,0,e,t-n,e,t,r);return i}}),ei.prototype=Object.assign(Object.create(ni.prototype),{constructor:ei,ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(e){return new Ba(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0}),ti.prototype=Object.assign(Object.create(ni.prototype),{constructor:ti,ValueTypeName:"color"}),ri.prototype=Object.assign(Object.create(ni.prototype),{constructor:ri,ValueTypeName:"number"}),ai.prototype=Object.assign(Object.create($o.prototype),{constructor:ai,DefaultSettings_:{endingStart:2400,endingEnd:2400},intervalChanged_:function(t,r,a){var o=this.parameterPositions,i=t-2,e=t+1,n=o[i],s=o[e];if(void 0===n)switch(this.getSettings_().endingStart){case 2401:i=t,n=2*r-a;break;case 2402:i=o.length-2,n=r+o[i]-o[i+1];break;default:i=t,n=a;}if(void 0===s)switch(this.getSettings_().endingEnd){case 2401:e=t,s=2*a-r;break;case 2402:e=1,s=a+o[1]-o[0];break;default:e=t-1,s=r;}t=.5*(a-r),o=this.valueSize,this._weightPrev=t/(r-n),this._weightNext=t/(s-a),this._offsetPrev=i*o,this._offsetNext=e*o},interpolate_:function(t,r,a,o){var i=this.resultBuffer,e=this.sampleValues,s=this.valueSize;t*=s;var d=t-s,c=this._offsetPrev,u=this._offsetNext,m=this._weightPrev,g=this._weightNext,n=(a-r)/(o-r);for(a=n*n,o=a*n,r=-m*o+2*m*a-m*n,m=(1+m)*o+(-1.5-2*m)*a+(-.5+m)*n+1,n=(-1-g)*o+(1.5+g)*a+.5*n,g=g*o-g*a,a=0;a!==s;++a)i[a]=r*e[c+a]+m*e[d+a]+n*e[t+a]+g*e[u+a];return i}}),oi.prototype=Object.assign(Object.create($o.prototype),{constructor:oi,interpolate_:function(t,r,a,o){var i=this.resultBuffer,e=this.sampleValues,n=this.valueSize;t*=n;var s=t-n;for(r=(a-r)/(o-r),a=1-r,o=0;o!==n;++o)i[o]=e[s+o]*a+e[t+o]*r;return i}}),ii.prototype=Object.assign(Object.create($o.prototype),{constructor:ii,interpolate_:function(e){return this.copySampleValue_(e-1)}});var Nn={arraySlice:function(e,t,r){return Nn.isTypedArray(e)?new e.constructor(e.subarray(t,void 0===r?e.length:r)):e.slice(t,r)},convertArray:function(e,t,r){return e&&(r||e.constructor!==t)?"number"===typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e):e},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){for(var t=e.length,r=Array(t),a=0;a!==t;++a)r[a]=a;return r.sort(function(t,r){return e[t]-e[r]}),r},sortedArray:function(t,r,a){for(var o=t.length,i=new t.constructor(o),e=0,n=0;n!==o;++e)for(var s=a[e]*r,l=0;l!==r;++l)i[n++]=t[s+l];return i},flattenJSON:function(t,r,a,o){for(var i=1,e=t[0];void 0!==e&&void 0===e[o];)e=t[i++];if(void 0!==e){var n=e[o];if(void 0!==n)if(Array.isArray(n))do n=e[o],void 0!==n&&(r.push(e.time),a.push.apply(a,n)),e=t[i++];while(void 0!==e);else if(void 0!==n.toArray)do n=e[o],void 0!==n&&(r.push(e.time),n.toArray(a,a.length)),e=t[i++];while(void 0!==e);else do n=e[o],void 0!==n&&(r.push(e.time),a.push(n)),e=t[i++];while(void 0!==e)}}};Object.assign(ni,{parse:function(e){if(void 0===e.type)throw Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=ni._getTrackTypeForValueTypeName(e.type);if(void 0===e.times){var r=[],a=[];Nn.flattenJSON(e.keys,r,a,"value"),e.times=r,e.values=a}return void 0===t.parse?new t(e.name,e.times,e.values,e.interpolation):t.parse(e)},toJSON:function(e){var t=e.constructor;if(void 0!==t.toJSON)t=t.toJSON(e);else{t={name:e.name,times:Nn.convertArray(e.times,Array),values:Nn.convertArray(e.values,Array)};var r=e.getInterpolation();r!==e.DefaultInterpolation&&(t.interpolation=r)}return t.type=e.ValueTypeName,t},_getTrackTypeForValueTypeName:function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return ri;case"vector":case"vector2":case"vector3":case"vector4":return si;case"color":return ti;case"quaternion":return ei;case"bool":case"boolean":return Ko;case"string":return Qo;}throw Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}}),Object.assign(ni.prototype,{constructor:ni,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(e){return new ii(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new oi(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new ai(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){switch(e){case 2300:var t=this.InterpolantFactoryMethodDiscrete;break;case 2301:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth;}if(void 0===t){if(t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name,void 0===this.createInterpolant)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw Error(t);console.warn("THREE.KeyframeTrack:",t)}else this.createInterpolant=t},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302;}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(0!==e)for(var t=this.times,r=0,a=t.length;r!==a;++r)t[r]+=e;return this},scale:function(e){if(1!==e)for(var t=this.times,r=0,a=t.length;r!==a;++r)t[r]*=e;return this},trim:function(t,r){for(var a=this.times,o=a.length,i=0,e=o-1;i!==o&&a[i]<t;)++i;for(;-1!==e&&a[e]>r;)--e;return++e,(0!==i||e!==o)&&(i>=e&&(e=fn(e,1),i=e-1),t=this.getValueSize(),this.times=Nn.arraySlice(a,i,e),this.values=Nn.arraySlice(this.values,i*t,e*t)),this},validate:function(){var t=!0,r=this.getValueSize();0!==r-xn(r)&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);var a=this.times;r=this.values;var o=a.length;0===o&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);for(var i=null,e=0,n;e!==o;e++){if(n=a[e],"number"===typeof n&&isNaN(n)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,e,n),t=!1;break}if(null!==i&&i>n){console.error("THREE.KeyframeTrack: Out of order keys.",this,e,n,i),t=!1;break}i=n}if(void 0!==r&&Nn.isTypedArray(r))for(e=0,a=r.length;e!==a;++e)if(o=r[e],isNaN(o)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,e,o),t=!1;break}return t},optimize:function(){for(var t=this.times,r=this.values,a=this.getValueSize(),o=2302===this.getInterpolation(),i=1,e=t.length-1,s=1;s<e;++s){var d=!1,c=t[s];if(c!==t[s+1]&&(1!==s||c!==c[0]))if(o)d=!0;else{var u=s*a,m=u-a,l=u+a;for(c=0;c!==a;++c){var n=r[u+c];if(n!==r[m+c]||n!==r[l+c]){d=!0;break}}}if(d){if(s!==i)for(t[i]=t[s],d=s*a,u=i*a,c=0;c!==a;++c)r[u+c]=r[d+c];++i}}if(0<e){for(t[i]=t[e],d=e*a,u=i*a,c=0;c!==a;++c)r[u+c]=r[d+c];++i}return i!==t.length&&(this.times=Nn.arraySlice(t,0,i),this.values=Nn.arraySlice(r,0,i*a)),this}}),si.prototype=Object.assign(Object.create(ni.prototype),{constructor:si,ValueTypeName:"vector"}),Object.assign(li,{parse:function(t){for(var r=[],a=t.tracks,o=1/(t.fps||1),i=0,e=a.length;i!==e;++i)r.push(ni.parse(a[i]).scale(o));return new li(t.name,t.duration,r)},toJSON:function(t){var r=[],a=t.tracks;t={name:t.name,duration:t.duration,tracks:r};for(var o=0,i=a.length;o!==i;++o)r.push(ni.toJSON(a[o]));return t},CreateFromMorphTargetSequence:function(t,r,a,o){for(var i=r.length,e=[],n=0;n<i;n++){var s=[],l=[];s.push((n+i-1)%i,n,(n+1)%i),l.push(0,1,0);var p=Nn.getKeyframeOrder(s);s=Nn.sortedArray(s,1,p),l=Nn.sortedArray(l,1,p),o||0!==s[0]||(s.push(i),l.push(l[0])),e.push(new ri(".morphTargetInfluences["+r[n].name+"]",s,l).scale(1/a))}return new li(t,-1,e)},findByName:function(e,t){var r=e;for(Array.isArray(e)||(r=e.geometry&&e.geometry.animations||e.animations),e=0;e<r.length;e++)if(r[e].name===t)return r[e];return null},CreateClipsFromMorphTargetSequences:function(t,r,a){for(var o={},i=/^([\w-]*?)([\d]+)$/,e=0,n=t.length;e<n;e++){var s=t[e],l=s.name.match(i);if(l&&1<l.length){var p=l[1];(l=o[p])||(o[p]=l=[]),l.push(s)}}for(p in t=[],o)t.push(li.CreateFromMorphTargetSequence(p,o[p],r,a));return t},parseAnimation:function(t,o){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;var i=function(t,r,a,o,i){if(0!==a.length){var e=[],n=[];Nn.flattenJSON(a,e,n,o),0!==e.length&&i.push(new t(r,e,n))}},s=[],d=t.name||"default",e=t.length||-1,c=t.fps||30;t=t.hierarchy||[];for(var u=0,g;u<t.length;u++)if(g=t[u].keys,g&&0!==g.length)if(g[0].morphTargets){e={};for(var f=0;f<g.length;f++)if(g[f].morphTargets)for(var m=0;m<g[f].morphTargets.length;m++)e[g[f].morphTargets[m]]=-1;for(var l in e){var n=[],p=[];for(m=0;m!==g[f].morphTargets.length;++m){var h=g[f];n.push(h.time),p.push(h.morphTarget===l?1:0)}s.push(new ri(".morphTargetInfluence["+l+"]",n,p))}e=e.length*(c||1)}else f=".bones["+o[u].name+"]",i(si,f+".position",g,"pos",s),i(ei,f+".quaternion",g,"rot",s),i(si,f+".scale",g,"scl",s);return 0===s.length?null:new li(d,e,s)}}),Object.assign(li.prototype,{resetDuration:function(){for(var e=0,t=0,r=this.tracks.length,a;t!==r;++t)a=this.tracks[t],e=fn(e,a.times[a.times.length-1]);this.duration=e},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}}),Object.assign(wa.prototype,{load:function(t,r,a,o){var i=this;new ae(i.manager).load(t,function(e){r(i.parse(JSON.parse(e)))},a,o)},setTextures:function(e){this.textures=e},parse:function(t){function r(e){return void 0===i[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),i[e]}var i=this.textures,a=new oa[t.type];if(void 0!==t.uuid&&(a.uuid=t.uuid),void 0!==t.name&&(a.name=t.name),void 0!==t.color&&a.color.setHex(t.color),void 0!==t.roughness&&(a.roughness=t.roughness),void 0!==t.metalness&&(a.metalness=t.metalness),void 0!==t.emissive&&a.emissive.setHex(t.emissive),void 0!==t.specular&&a.specular.setHex(t.specular),void 0!==t.shininess&&(a.shininess=t.shininess),void 0!==t.clearCoat&&(a.clearCoat=t.clearCoat),void 0!==t.clearCoatRoughness&&(a.clearCoatRoughness=t.clearCoatRoughness),void 0!==t.uniforms&&(a.uniforms=t.uniforms),void 0!==t.vertexShader&&(a.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(a.fragmentShader=t.fragmentShader),void 0!==t.vertexColors&&(a.vertexColors=t.vertexColors),void 0!==t.fog&&(a.fog=t.fog),void 0!==t.flatShading&&(a.flatShading=t.flatShading),void 0!==t.blending&&(a.blending=t.blending),void 0!==t.side&&(a.side=t.side),void 0!==t.opacity&&(a.opacity=t.opacity),void 0!==t.transparent&&(a.transparent=t.transparent),void 0!==t.alphaTest&&(a.alphaTest=t.alphaTest),void 0!==t.depthTest&&(a.depthTest=t.depthTest),void 0!==t.depthWrite&&(a.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(a.colorWrite=t.colorWrite),void 0!==t.wireframe&&(a.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(a.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(a.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(a.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.rotation&&(a.rotation=t.rotation),1!==t.linewidth&&(a.linewidth=t.linewidth),void 0!==t.dashSize&&(a.dashSize=t.dashSize),void 0!==t.gapSize&&(a.gapSize=t.gapSize),void 0!==t.scale&&(a.scale=t.scale),void 0!==t.polygonOffset&&(a.polygonOffset=t.polygonOffset),void 0!==t.polygonOffsetFactor&&(a.polygonOffsetFactor=t.polygonOffsetFactor),void 0!==t.polygonOffsetUnits&&(a.polygonOffsetUnits=t.polygonOffsetUnits),void 0!==t.skinning&&(a.skinning=t.skinning),void 0!==t.morphTargets&&(a.morphTargets=t.morphTargets),void 0!==t.dithering&&(a.dithering=t.dithering),void 0!==t.visible&&(a.visible=t.visible),void 0!==t.userData&&(a.userData=t.userData),void 0!==t.shading&&(a.flatShading=1===t.shading),void 0!==t.size&&(a.size=t.size),void 0!==t.sizeAttenuation&&(a.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(a.map=r(t.map)),void 0!==t.alphaMap&&(a.alphaMap=r(t.alphaMap),a.transparent=!0),void 0!==t.bumpMap&&(a.bumpMap=r(t.bumpMap)),void 0!==t.bumpScale&&(a.bumpScale=t.bumpScale),void 0!==t.normalMap&&(a.normalMap=r(t.normalMap)),void 0!==t.normalScale){var n=t.normalScale;!1===Array.isArray(n)&&(n=[n,n]),a.normalScale=new o().fromArray(n)}return void 0!==t.displacementMap&&(a.displacementMap=r(t.displacementMap)),void 0!==t.displacementScale&&(a.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(a.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(a.roughnessMap=r(t.roughnessMap)),void 0!==t.metalnessMap&&(a.metalnessMap=r(t.metalnessMap)),void 0!==t.emissiveMap&&(a.emissiveMap=r(t.emissiveMap)),void 0!==t.emissiveIntensity&&(a.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(a.specularMap=r(t.specularMap)),void 0!==t.envMap&&(a.envMap=r(t.envMap)),void 0!==t.reflectivity&&(a.reflectivity=t.reflectivity),void 0!==t.lightMap&&(a.lightMap=r(t.lightMap)),void 0!==t.lightMapIntensity&&(a.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(a.aoMap=r(t.aoMap)),void 0!==t.aoMapIntensity&&(a.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(a.gradientMap=r(t.gradientMap)),a}}),Object.assign(pi.prototype,{load:function(t,r,a,o){var i=this;new ae(i.manager).load(t,function(e){r(i.parse(JSON.parse(e)))},a,o)},parse:function(t){var r=new Tt,a=t.data.index;void 0!==a&&(a=new W[a.type](a.array),r.setIndex(new gt(a,1)));var o=t.data.attributes;for(e in o){var i=o[e];a=new W[i.type](i.array),r.addAttribute(e,new gt(a,i.itemSize,i.normalized))}var e=t.data.groups||t.data.drawcalls||t.data.offsets;if(void 0!==e)for(a=0,o=e.length;a!==o;++a)i=e[a],r.addGroup(i.start,i.count,i.materialIndex);return t=t.data.boundingSphere,void 0!==t&&(e=new _,void 0!==t.center&&e.fromArray(t.center),r.boundingSphere=new at(e,t.radius)),r}});var W={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"===typeof Uint8ClampedArray?Uint8Array:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};ee.Handlers={handlers:[],add:function(e,t){this.handlers.push(e,t)},get:function(t){for(var r=this.handlers,a=0,o=r.length,i;a<o;a+=2)if(i=r[a+1],r[a].test(t))return i;return null}},Object.assign(ee.prototype,{crossOrigin:void 0,initMaterials:function(t,r,a){for(var o=[],i=0;i<t.length;++i)o[i]=this.createMaterial(t[i],r,a);return o},createMaterial:function(){var t={NoBlending:0,NormalBlending:1,AdditiveBlending:2,SubtractiveBlending:3,MultiplyBlending:4,CustomBlending:5},r=new Ne,o=new ce,a=new wa;return function(i,s,p){function e(t,r,a,i,e){t=s+t;var n=ee.Handlers.get(t);return null===n?(o.setCrossOrigin(p),t=o.load(t)):t=n.load(t),void 0!==r&&(t.repeat.fromArray(r),1!==r[0]&&(t.wrapS=1E3),1!==r[1]&&(t.wrapT=1E3)),void 0!==a&&t.offset.fromArray(a),void 0!==i&&("repeat"===i[0]&&(t.wrapS=1E3),"mirror"===i[0]&&(t.wrapS=1002),"repeat"===i[1]&&(t.wrapT=1E3),"mirror"===i[1]&&(t.wrapT=1002)),void 0!==e&&(t.anisotropy=e),r=vn.generateUUID(),c[r]=t,r}var c={},d={uuid:vn.generateUUID(),type:"MeshLambertMaterial"},m;for(m in i){var l=i[m];switch(m){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":d.name=l;break;case"blending":d.blending=t[l];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",m,"is no longer supported.");break;case"colorDiffuse":d.color=r.fromArray(l).getHex();break;case"colorSpecular":d.specular=r.fromArray(l).getHex();break;case"colorEmissive":d.emissive=r.fromArray(l).getHex();break;case"specularCoef":d.shininess=l;break;case"shading":"basic"===l.toLowerCase()&&(d.type="MeshBasicMaterial"),"phong"===l.toLowerCase()&&(d.type="MeshPhongMaterial"),"standard"===l.toLowerCase()&&(d.type="MeshStandardMaterial");break;case"mapDiffuse":d.map=e(l,i.mapDiffuseRepeat,i.mapDiffuseOffset,i.mapDiffuseWrap,i.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":d.emissiveMap=e(l,i.mapEmissiveRepeat,i.mapEmissiveOffset,i.mapEmissiveWrap,i.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":d.lightMap=e(l,i.mapLightRepeat,i.mapLightOffset,i.mapLightWrap,i.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":d.aoMap=e(l,i.mapAORepeat,i.mapAOOffset,i.mapAOWrap,i.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":d.bumpMap=e(l,i.mapBumpRepeat,i.mapBumpOffset,i.mapBumpWrap,i.mapBumpAnisotropy);break;case"mapBumpScale":d.bumpScale=l;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":d.normalMap=e(l,i.mapNormalRepeat,i.mapNormalOffset,i.mapNormalWrap,i.mapNormalAnisotropy);break;case"mapNormalFactor":d.normalScale=[l,l];break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":d.specularMap=e(l,i.mapSpecularRepeat,i.mapSpecularOffset,i.mapSpecularWrap,i.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":d.metalnessMap=e(l,i.mapMetalnessRepeat,i.mapMetalnessOffset,i.mapMetalnessWrap,i.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":d.roughnessMap=e(l,i.mapRoughnessRepeat,i.mapRoughnessOffset,i.mapRoughnessWrap,i.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":d.alphaMap=e(l,i.mapAlphaRepeat,i.mapAlphaOffset,i.mapAlphaWrap,i.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":d.side=1;break;case"doubleSided":d.side=2;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),d.opacity=l;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":d[m]=l;break;case"vertexColors":!0===l&&(d.vertexColors=2),"face"===l&&(d.vertexColors=1);break;default:console.error("THREE.Loader.createMaterial: Unsupported",m,l);}}return"MeshBasicMaterial"===d.type&&delete d.emissive,"MeshPhongMaterial"!==d.type&&delete d.specular,1>d.opacity&&(d.transparent=!0),a.setTextures(c),a.parse(d)}}()});var Bn={decodeText:function(e){if("undefined"!==typeof TextDecoder)return new TextDecoder().decode(e);for(var t="",r=0,a=e.length;r<a;r++)t+=String.fromCharCode(e[r]);return decodeURIComponent(escape(t))},extractUrlBase:function(e){return(e=e.split("/"),1===e.length)?"./":(e.pop(),e.join("/")+"/")}};Object.assign(di.prototype,{load:function(t,r,a,o){var i=this,e=this.texturePath&&"string"===typeof this.texturePath?this.texturePath:Bn.extractUrlBase(t),n=new ae(this.manager);n.setWithCredentials(this.withCredentials),n.load(t,function(a){a=JSON.parse(a);var o=a.metadata;if(void 0!==o&&(o=o.type,void 0!==o)){if("object"===o.toLowerCase())return void console.error("THREE.JSONLoader: "+t+" should be loaded with THREE.ObjectLoader instead.");if("scene"===o.toLowerCase())return void console.error("THREE.JSONLoader: "+t+" should be loaded with THREE.SceneLoader instead.")}a=i.parse(a,e),r(a.geometry,a.materials)},a,o)},setTexturePath:function(e){this.texturePath=e},parse:function(){return function(i,s){void 0!==i.data&&(i=i.data),i.scale=void 0===i.scale?1:1/i.scale;var p=new ut,v=i,d=v.faces,h=v.vertices,b=v.normals,m=v.colors,l=v.scale,n=0,u,e,f;if(void 0!==v.uvs){for(u=0;u<v.uvs.length;u++)v.uvs[u].length&&n++;for(u=0;u<n;u++)p.faceVertexUvs[u]=[]}var g=0;for(f=h.length;g<f;)u=new _,u.x=h[g++]*l,u.y=h[g++]*l,u.z=h[g++]*l,p.vertices.push(u);for(g=0,f=d.length;g<f;){h=d[g++];var E=1&h,r=2&h;u=8&h;var t=16&h,x=32&h;if(l=64&h,h&=128,E){E=new mt,E.a=d[g],E.b=d[g+1],E.c=d[g+3];var T=new mt;if(T.a=d[g+1],T.b=d[g+2],T.c=d[g+3],g+=4,r&&(r=d[g++],E.materialIndex=r,T.materialIndex=r),r=p.faces.length,u)for(u=0;u<n;u++){var S=v.uvs[u];for(p.faceVertexUvs[u][r]=[],p.faceVertexUvs[u][r+1]=[],e=0;4>e;e++){var M=d[g++],y=S[2*M];M=S[2*M+1],y=new o(y,M),2!==e&&p.faceVertexUvs[u][r].push(y),0!==e&&p.faceVertexUvs[u][r+1].push(y)}}if(t&&(t=3*d[g++],E.normal.set(b[t++],b[t++],b[t]),T.normal.copy(E.normal)),x)for(u=0;4>u;u++)t=3*d[g++],x=new _(b[t++],b[t++],b[t]),2!==u&&E.vertexNormals.push(x),0!==u&&T.vertexNormals.push(x);if(l&&(l=d[g++],l=m[l],E.color.setHex(l),T.color.setHex(l)),h)for(u=0;4>u;u++)l=d[g++],l=m[l],2!==u&&E.vertexColors.push(new Ne(l)),0!==u&&T.vertexColors.push(new Ne(l));p.faces.push(E),p.faces.push(T)}else{if(E=new mt,E.a=d[g++],E.b=d[g++],E.c=d[g++],r&&(r=d[g++],E.materialIndex=r),r=p.faces.length,u)for(u=0;u<n;u++)for(S=v.uvs[u],p.faceVertexUvs[u][r]=[],e=0;3>e;e++)M=d[g++],y=S[2*M],M=S[2*M+1],y=new o(y,M),p.faceVertexUvs[u][r].push(y);if(t&&(t=3*d[g++],E.normal.set(b[t++],b[t++],b[t])),x)for(u=0;3>u;u++)t=3*d[g++],x=new _(b[t++],b[t++],b[t]),E.vertexNormals.push(x);if(l&&(l=d[g++],E.color.setHex(m[l])),h)for(u=0;3>u;u++)l=d[g++],E.vertexColors.push(new Ne(m[l]));p.faces.push(E)}}if(v=i,g=void 0===v.influencesPerVertex?2:v.influencesPerVertex,v.skinWeights)for(f=0,d=v.skinWeights.length;f<d;f+=g)p.skinWeights.push(new j(v.skinWeights[f],1<g?v.skinWeights[f+1]:0,2<g?v.skinWeights[f+2]:0,3<g?v.skinWeights[f+3]:0));if(v.skinIndices)for(f=0,d=v.skinIndices.length;f<d;f+=g)p.skinIndices.push(new j(v.skinIndices[f],1<g?v.skinIndices[f+1]:0,2<g?v.skinIndices[f+2]:0,3<g?v.skinIndices[f+3]:0));if(p.bones=v.bones,p.bones&&0<p.bones.length&&(p.skinWeights.length!==p.skinIndices.length||p.skinIndices.length!==p.vertices.length)&&console.warn("When skinning, number of vertices ("+p.vertices.length+"), skinIndices ("+p.skinIndices.length+"), and skinWeights ("+p.skinWeights.length+") should match."),f=i,d=f.scale,void 0!==f.morphTargets)for(v=0,g=f.morphTargets.length;v<g;v++)for(p.morphTargets[v]={},p.morphTargets[v].name=f.morphTargets[v].name,p.morphTargets[v].vertices=[],b=p.morphTargets[v].vertices,m=f.morphTargets[v].vertices,n=0,h=m.length;n<h;n+=3)l=new _,l.x=m[n]*d,l.y=m[n+1]*d,l.z=m[n+2]*d,b.push(l);if(void 0!==f.morphColors&&0<f.morphColors.length)for(console.warn("THREE.JSONLoader: \"morphColors\" no longer supported. Using them as face colors."),d=p.faces,f=f.morphColors[0].colors,v=0,g=d.length;v<g;v++)d[v].color.fromArray(f,3*v);for(f=i,v=[],g=[],void 0!==f.animation&&g.push(f.animation),void 0!==f.animations&&(f.animations.length?g=g.concat(f.animations):g.push(f.animations)),f=0;f<g.length;f++)(d=li.parseAnimation(g[f],p.bones))&&v.push(d);return(p.morphTargets&&(g=li.CreateClipsFromMorphTargetSequences(p.morphTargets,10),v=v.concat(g)),0<v.length&&(p.animations=v),p.computeFaceNormals(),p.computeBoundingSphere(),void 0===i.materials||0===i.materials.length)?{geometry:p}:(i=ee.prototype.initMaterials(i.materials,s,this.crossOrigin),{geometry:p,materials:i})}}()}),Object.assign(fe.prototype,{load:function(t,r,a,o){""===this.texturePath&&(this.texturePath=t.substring(0,t.lastIndexOf("/")+1));var i=this;new ae(i.manager).load(t,function(e){var a=null;try{a=JSON.parse(e)}catch(e){return void 0!==o&&o(e),void console.error("THREE:ObjectLoader: Can't parse "+t+".",e.message)}e=a.metadata,void 0===e||void 0===e.type||"geometry"===e.type.toLowerCase()?console.error("THREE.ObjectLoader: Can't load "+t+". Use THREE.JSONLoader instead."):i.parse(a,r)},a,o)},setTexturePath:function(e){this.texturePath=e},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(t,r){var a=this.parseShape(t.shapes);a=this.parseGeometries(t.geometries,a);var o=this.parseImages(t.images,function(){void 0!==r&&r(i)});o=this.parseTextures(t.textures,o),o=this.parseMaterials(t.materials,o);var i=this.parseObject(t.object,a,o);return t.animations&&(i.animations=this.parseAnimations(t.animations)),void 0!==t.images&&0!==t.images.length||void 0===r||r(i),i},parseShape:function(t){var r={};if(void 0!==t)for(var a=0,o=t.length,i;a<o;a++)i=new Oo().fromJSON(t[a]),r[i.uuid]=i;return r},parseGeometries:function(t,r){var a={};if(void 0!==t)for(var o=new di,i=new pi,e=0,n=t.length,s;e<n;e++){switch(s=t[e],s.type){case"PlaneGeometry":case"PlaneBufferGeometry":var l=new Ya[s.type](s.width,s.height,s.widthSegments,s.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":l=new Ya[s.type](s.width,s.height,s.depth,s.widthSegments,s.heightSegments,s.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":l=new Ya[s.type](s.radius,s.segments,s.thetaStart,s.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":l=new Ya[s.type](s.radiusTop,s.radiusBottom,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":l=new Ya[s.type](s.radius,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":l=new Ya[s.type](s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":l=new Ya[s.type](s.radius,s.detail);break;case"RingGeometry":case"RingBufferGeometry":l=new Ya[s.type](s.innerRadius,s.outerRadius,s.thetaSegments,s.phiSegments,s.thetaStart,s.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":l=new Ya[s.type](s.radius,s.tube,s.radialSegments,s.tubularSegments,s.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":l=new Ya[s.type](s.radius,s.tube,s.tubularSegments,s.radialSegments,s.p,s.q);break;case"LatheGeometry":case"LatheBufferGeometry":l=new Ya[s.type](s.points,s.segments,s.phiStart,s.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":l=new Ya[s.type](s.vertices,s.indices,s.radius,s.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(l=[],e=0,n=s.shapes.length;e<n;e++)l.push(r[s.shapes[e]]);l=new Ya[s.type](l,s.curveSegments);break;case"BufferGeometry":l=i.parse(s);break;case"Geometry":l=o.parse(s,this.texturePath).geometry;break;default:console.warn("THREE.ObjectLoader: Unsupported geometry type \""+s.type+"\"");continue;}l.uuid=s.uuid,void 0!==s.name&&(l.name=s.name),a[s.uuid]=l}return a},parseMaterials:function(t,r){var a={};if(void 0!==t){var o=new wa;o.setTextures(r),r=0;for(var i=t.length,e;r<i;r++)if(e=t[r],"MultiMaterial"===e.type){for(var n=[],s=0;s<e.materials.length;s++)n.push(o.parse(e.materials[s]));a[e.uuid]=n}else a[e.uuid]=o.parse(e)}return a},parseAnimations:function(e){for(var t=[],r=0,a;r<e.length;r++)a=li.parse(e[r]),t.push(a);return t},parseImages:function(t,r){function a(t){return o.manager.itemStart(t),e.load(t,function(){o.manager.itemEnd(t)},void 0,function(){o.manager.itemEnd(t),o.manager.itemError(t)})}var o=this,i={};if(void 0!==t&&0<t.length){r=new Eo(r);var e=new be(r);e.setCrossOrigin(this.crossOrigin),r=0;for(var n=t.length;r<n;r++){var s=t[r],l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(s.url)?s.url:o.texturePath+s.url;i[s.uuid]=a(l)}}return i},parseTextures:function(t,a){function o(e,t){return"number"===typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}var i={};if(void 0!==t)for(var n=0,e=t.length,s;n<e;n++){s=t[n],void 0===s.image&&console.warn("THREE.ObjectLoader: No \"image\" specified for",s.uuid),void 0===a[s.image]&&console.warn("THREE.ObjectLoader: Undefined image",s.image);var l=new r(a[s.image]);l.needsUpdate=!0,l.uuid=s.uuid,void 0!==s.name&&(l.name=s.name),void 0!==s.mapping&&(l.mapping=o(s.mapping,Be)),void 0!==s.offset&&l.offset.fromArray(s.offset),void 0!==s.repeat&&l.repeat.fromArray(s.repeat),void 0!==s.center&&l.center.fromArray(s.center),void 0!==s.rotation&&(l.rotation=s.rotation),void 0!==s.wrap&&(l.wrapS=o(s.wrap[0],Fn),l.wrapT=o(s.wrap[1],Fn)),void 0!==s.minFilter&&(l.minFilter=o(s.minFilter,zn)),void 0!==s.magFilter&&(l.magFilter=o(s.magFilter,zn)),void 0!==s.anisotropy&&(l.anisotropy=s.anisotropy),void 0!==s.flipY&&(l.flipY=s.flipY),i[s.uuid]=l}return i},parseObject:function(t,r,o){function a(e){return void 0===r[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),r[e]}function i(t){if(void 0!==t){if(Array.isArray(t)){for(var r=[],a=0,i=t.length,n;a<i;a++)n=t[a],void 0===o[n]&&console.warn("THREE.ObjectLoader: Undefined material",n),r.push(o[n]);return r}return void 0===o[t]&&console.warn("THREE.ObjectLoader: Undefined material",t),o[t]}}switch(t.type){case"Scene":var e=new hr;void 0!==t.background&&on(t.background)&&(e.background=new Ne(t.background)),void 0!==t.fog&&("Fog"===t.fog.type?e.fog=new fr(t.fog.color,t.fog.near,t.fog.far):"FogExp2"===t.fog.type&&(e.fog=new gr(t.fog.color,t.fog.density)));break;case"PerspectiveCamera":e=new ir(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(e.focus=t.focus),void 0!==t.zoom&&(e.zoom=t.zoom),void 0!==t.filmGauge&&(e.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(e.filmOffset=t.filmOffset),void 0!==t.view&&(e.view=Object.assign({},t.view));break;case"OrthographicCamera":e=new ct(t.left,t.right,t.top,t.bottom,t.near,t.far);break;case"AmbientLight":e=new Zo(t.color,t.intensity);break;case"DirectionalLight":e=new qo(t.color,t.intensity);break;case"PointLight":e=new Xo(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":e=new Jo(t.color,t.intensity,t.width,t.height);break;case"SpotLight":e=new jo(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":e=new Vo(t.color,t.groundColor,t.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":e=a(t.geometry);var n=i(t.material);e=e.bones&&0<e.bones.length?new Er(e,n):new Ut(e,n);break;case"LOD":e=new vr;break;case"Line":e=new Sr(a(t.geometry),i(t.material),t.mode);break;case"LineLoop":e=new Ar(a(t.geometry),i(t.material));break;case"LineSegments":e=new Mr(a(t.geometry),i(t.material));break;case"PointCloud":case"Points":e=new Rr(a(t.geometry),i(t.material));break;case"Sprite":e=new xr(i(t.material));break;case"Group":e=new Lr;break;default:e=new pt;}if(e.uuid=t.uuid,void 0!==t.name&&(e.name=t.name),void 0===t.matrix?(void 0!==t.position&&e.position.fromArray(t.position),void 0!==t.rotation&&e.rotation.fromArray(t.rotation),void 0!==t.quaternion&&e.quaternion.fromArray(t.quaternion),void 0!==t.scale&&e.scale.fromArray(t.scale)):(e.matrix.fromArray(t.matrix),e.matrix.decompose(e.position,e.quaternion,e.scale)),void 0!==t.castShadow&&(e.castShadow=t.castShadow),void 0!==t.receiveShadow&&(e.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.bias&&(e.shadow.bias=t.shadow.bias),void 0!==t.shadow.radius&&(e.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&e.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(e.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(e.visible=t.visible),void 0!==t.userData&&(e.userData=t.userData),void 0!==t.children){n=t.children;for(var s=0;s<n.length;s++)e.add(this.parseObject(n[s],r,o))}if("LOD"===t.type)for(t=t.levels,n=0;n<t.length;n++){s=t[n];var l=e.getObjectByProperty("uuid",s.object);void 0!==l&&e.addLevel(l,s.distance)}return e}});var Be={UVMapping:300,CubeReflectionMapping:301,CubeRefractionMapping:302,EquirectangularReflectionMapping:303,EquirectangularRefractionMapping:304,SphericalReflectionMapping:305,CubeUVReflectionMapping:306,CubeUVRefractionMapping:307},Fn={RepeatWrapping:1E3,ClampToEdgeWrapping:1001,MirroredRepeatWrapping:1002},zn={NearestFilter:1003,NearestMipMapNearestFilter:1004,NearestMipMapLinearFilter:1005,LinearFilter:1006,LinearMipMapNearestFilter:1007,LinearMipMapLinearFilter:1008};ci.prototype={constructor:ci,setOptions:function(e){return this.options=e,this},load:function(t,r,a,o){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t);var i=this,e=Pn.get(t);return void 0===e?void fetch(t).then(function(e){return e.blob()}).then(function(e){return createImageBitmap(e,i.options)}).then(function(e){Pn.add(t,e),r&&r(e),i.manager.itemEnd(t)}).catch(function(e){o&&o(e),i.manager.itemEnd(t),i.manager.itemError(t)}):(i.manager.itemStart(t),setTimeout(function(){r&&r(e),i.manager.itemEnd(t)},0),e)},setCrossOrigin:function(){return this},setPath:function(e){return this.path=e,this}},Object.assign(mi.prototype,{moveTo:function(e,t){this.currentPath=new Go,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t)},lineTo:function(e,t){this.currentPath.lineTo(e,t)},quadraticCurveTo:function(e,t,r,a){this.currentPath.quadraticCurveTo(e,t,r,a)},bezierCurveTo:function(t,r,a,o,i,e){this.currentPath.bezierCurveTo(t,r,a,o,i,e)},splineThru:function(e){this.currentPath.splineThru(e)},toShapes:function(o,a){function i(t){for(var r=[],a=0,o=t.length;a<o;a++){var i=t[a],e=new Oo;e.curves=i.curves,r.push(e)}return r}function s(t,r){for(var a=r.length,o=!1,i=a-1,e=0;e<a;i=e++){var n=r[i],s=r[e],p=s.x-n.x,c=s.y-n.y;if(yn(c)>nn){if(0>c&&(n=r[e],p=-p,s=r[i],c=-c),!(t.y<n.y||t.y>s.y))if(t.y!==n.y){if(i=c*(t.x-n.x)-p*(t.y-n.y),0===i)return!0;0>i||(o=!o)}else if(t.x===n.x)return!0;}else if(t.y===n.y&&(s.x<=t.x&&t.x<=n.x||n.x<=t.x&&t.x<=s.x))return!0}return o}var d=Cn.isClockWise,c=this.subPaths;if(0===c.length)return[];if(!0===a)return i(c);if(a=[],1===c.length){var m=c[0],f=new Oo;return f.curves=m.curves,a.push(f),a}var h=!d(c[0].getPoints());h=o?!h:h,f=[];var y=[],l=[],p=0;y[p]=void 0,l[p]=[];for(var n=0,u=c.length;n<u;n++){m=c[n];var x=m.getPoints(),v=d(x);(v=o?!v:v)?(!h&&y[p]&&p++,y[p]={s:new Oo,p:x},y[p].s.curves=m.curves,h&&p++,l[p]=[]):l[p].push({h:m,p:x[0]})}if(!y[0])return i(c);if(1<y.length){for(n=!1,o=[],d=0,c=y.length;d<c;d++)f[d]=[];for(d=0,c=y.length;d<c;d++)for(m=l[d],v=0;v<m.length;v++){for(h=m[v],p=!0,x=0;x<y.length;x++)s(h.p,y[x].p)&&(d!==x&&o.push({froms:d,tos:x,hole:v}),p?(p=!1,f[x].push(h)):n=!0);p&&f[d].push(h)}0<o.length&&(n||(l=f))}for(n=0,d=y.length;n<d;n++)for(f=y[n].s,a.push(f),o=l[n],c=0,m=o.length;c<m;c++)f.holes.push(o[c].h);return a}}),Object.assign(he.prototype,{isFont:!0,generateShapes:function(o,a,i){void 0===a&&(a=100),i=[];var s=a;a=this.data;var d=(o+"").split("");s/=a.resolution;var e=(a.boundingBox.yMax-a.boundingBox.yMin+a.underlineThickness)*s;o=[];for(var c=0,m=0,g=0,f;g<d.length;g++)if(f=d[g],"\n"===f)c=0,m-=e;else{var l=s,p=c,n=m;if(f=a.glyphs[f]||a.glyphs["?"]){var u=new mi;if(f.o)for(var h=f._cachedOutline||(f._cachedOutline=f.o.split(" ")),r=0,t=h.length;r<t;)switch(h[r++]){case"m":var x=h[r++]*l+p,y=h[r++]*l+n;u.moveTo(x,y);break;case"l":x=h[r++]*l+p,y=h[r++]*l+n,u.lineTo(x,y);break;case"q":var v=h[r++]*l+p,_=h[r++]*l+n,b=h[r++]*l+p,E=h[r++]*l+n;u.quadraticCurveTo(b,E,v,_);break;case"b":v=h[r++]*l+p,_=h[r++]*l+n,b=h[r++]*l+p,E=h[r++]*l+n,x=h[r++]*l+p,y=h[r++]*l+n,u.bezierCurveTo(b,E,x,y,v,_);}l={offsetX:f.ha*l,path:u}}else l=void 0;c+=l.offsetX,o.push(l.path)}for(a=0,d=o.length;a<d;a++)Array.prototype.push.apply(i,o[a].toShapes());return i}}),Object.assign(ie.prototype,{load:function(t,r,a,o){var i=this,e=new ae(this.manager);e.setPath(this.path),e.load(t,function(e){try{var t=JSON.parse(e)}catch(r){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),t=JSON.parse(e.substring(65,e.length-2))}e=i.parse(t),r&&r(e)},a,o)},parse:function(e){return new he(e)},setPath:function(e){return this.path=e,this}});var Gn={getContext:function(){return void 0===le&&(le=new(window.AudioContext||window.webkitAudioContext)),le},setContext:function(e){le=e}},le;Object.assign(ui.prototype,{load:function(t,r,a,o){var i=new ae(this.manager);i.setResponseType("arraybuffer"),i.load(t,function(e){Gn.getContext().decodeAudioData(e,function(e){r(e)})},a,o)}}),Object.assign(je.prototype,{update:function(){var o=new i,s=new i,l,a,u,c,d,e,f,g;return function(i){if(l!==this||a!==i.focus||u!==i.fov||c!==i.aspect*this.aspect||d!==i.near||e!==i.far||f!==i.zoom||g!==this.eyeSep){l=this,a=i.focus,u=i.fov,c=i.aspect*this.aspect,d=i.near,e=i.far,f=i.zoom;var m=i.projectionMatrix.clone();g=this.eyeSep/2;var n=g*d/a,p=d*xe(.5*(vn.DEG2RAD*u))/f;s.elements[12]=-g,o.elements[12]=g;var y=-p*c+n,r=p*c+n;m.elements[0]=2*d/(r-y),m.elements[8]=(r+y)/(r-y),this.cameraL.projectionMatrix.copy(m),y=-p*c-n,r=p*c-n,m.elements[0]=2*d/(r-y),m.elements[8]=(r+y)/(r-y),this.cameraR.projectionMatrix.copy(m)}this.cameraL.matrixWorld.copy(i.matrixWorld).multiply(s),this.cameraR.matrixWorld.copy(i.matrixWorld).multiply(o)}}()}),gi.prototype=Object.create(pt.prototype),gi.prototype.constructor=gi,fi.prototype=Object.assign(Object.create(pt.prototype),{constructor:fi,getInput:function(){return this.gain},removeFilter:function(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null)},getFilter:function(){return this.filter},setFilter:function(e){null===this.filter?this.gain.disconnect(this.context.destination):(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){this.gain.gain.value=e},updateMatrixWorld:function(){var t=new _,r=new s,a=new _,o=new _;return function(i){pt.prototype.updateMatrixWorld.call(this,i),i=this.context.listener;var e=this.up;this.matrixWorld.decompose(t,r,a),o.set(0,0,-1).applyQuaternion(r),i.positionX?(i.positionX.setValueAtTime(t.x,this.context.currentTime),i.positionY.setValueAtTime(t.y,this.context.currentTime),i.positionZ.setValueAtTime(t.z,this.context.currentTime),i.forwardX.setValueAtTime(o.x,this.context.currentTime),i.forwardY.setValueAtTime(o.y,this.context.currentTime),i.forwardZ.setValueAtTime(o.z,this.context.currentTime),i.upX.setValueAtTime(e.x,this.context.currentTime),i.upY.setValueAtTime(e.y,this.context.currentTime),i.upZ.setValueAtTime(e.z,this.context.currentTime)):(i.setPosition(t.x,t.y,t.z),i.setOrientation(o.x,o.y,o.z,e.x,e.y,e.z))}}()}),hi.prototype=Object.assign(Object.create(pt.prototype),{constructor:hi,getOutput:function(){return this.gain},setNodeSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this},setBuffer:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0===this.isPlaying)console.warn("THREE.Audio: Audio is already playing.");else if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else{var e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.onended=this.onEnded.bind(this),e.playbackRate.setValueAtTime(this.playbackRate,this.startTime),this.startTime=this.context.currentTime,e.start(this.startTime,this.offset),this.isPlaying=!0,this.source=e,this.connect()}},pause:function(){return!1===this.hasPlaybackControl?void console.warn("THREE.Audio: this Audio has no playback control."):(!0===this.isPlaying&&(this.source.stop(),this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate,this.isPlaying=!1),this)},stop:function(){return!1===this.hasPlaybackControl?void console.warn("THREE.Audio: this Audio has no playback control."):(this.source.stop(),this.offset=0,this.isPlaying=!1,this)},connect:function(){if(0<this.filters.length){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(0<this.filters.length){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(e){return e||(e=[]),!0===this.isPlaying?(this.disconnect(),this.filters=e,this.connect()):this.filters=e,this},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){return!1===this.hasPlaybackControl?void console.warn("THREE.Audio: this Audio has no playback control."):(this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime),this)},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(e){return!1===this.hasPlaybackControl?void console.warn("THREE.Audio: this Audio has no playback control."):(this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this)},getVolume:function(){return this.gain.gain.value},setVolume:function(e){return this.gain.gain.value=e,this}}),yi.prototype=Object.assign(Object.create(hi.prototype),{constructor:yi,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){this.panner.refDistance=e},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){this.panner.rolloffFactor=e},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){this.panner.distanceModel=e},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){this.panner.maxDistance=e},updateMatrixWorld:function(){var e=new _;return function(t){pt.prototype.updateMatrixWorld.call(this,t),e.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(e.x,e.y,e.z)}}()}),Object.assign(xi.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var e=0,t=this.getFrequencyData(),r=0;r<t.length;r++)e+=t[r];return e/t.length}}),Object.assign(ne.prototype,{accumulate:function(t,r){var a=this.buffer,o=this.valueSize;t=t*o+o;var i=this.cumulativeWeight;if(0===i){for(i=0;i!==o;++i)a[t+i]=a[i];i=r}else i+=r,this._mixBufferRegion(a,t,0,r/i,o);this.cumulativeWeight=i},apply:function(t){var r=this.valueSize,a=this.buffer;t=t*r+r;var o=this.cumulativeWeight,i=this.binding;this.cumulativeWeight=0,1>o&&this._mixBufferRegion(a,t,3*r,1-o,r),o=r;for(;o!==r+r;++o)if(a[o]!==a[o+r]){i.setValue(a,t);break}},saveOriginalState:function(){var e=this.buffer,t=this.valueSize,r=3*t;this.binding.getValue(e,r);for(var a=t;a!==r;++a)e[a]=e[r+a%t];this.cumulativeWeight=0},restoreOriginalState:function(){this.binding.setValue(this.buffer,3*this.valueSize)},_select:function(t,r,a,o,i){if(.5<=o)for(o=0;o!==i;++o)t[r+o]=t[a+o]},_slerp:function(e,t,r,a){s.slerpFlat(e,t,e,t,e,r,a)},_lerp:function(t,r,a,o,i){for(var e=0,n;e!==i;++e)n=r+e,t[n]=t[n]*(1-o)+t[a+e]*o}}),Object.assign(oe.prototype,{getValue:function(e,t){this.bind();var r=this._bindings[this._targetGroup.nCachedObjects_];void 0!==r&&r.getValue(e,t)},setValue:function(t,r){for(var a=this._bindings,o=this._targetGroup.nCachedObjects_,i=a.length;o!==i;++o)a[o].setValue(t,r)},bind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()},unbind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}),Object.assign(vi,{Composite:oe,create:function(e,t,r){return e&&e.isAnimationObjectGroup?new vi.Composite(e,t,r):new vi(e,t,r)},sanitizeNodeName:function(){var e=/[\[\]\.:\/]/g;return function(t){return t.replace(/\s/g,"_").replace(e,"")}}(),parseTrackName:function(){var t="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",r=/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]");t=/(WCOD+)?/.source.replace("WCOD",t);var a=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]"),o=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC","[^\\[\\]\\.:\\/]"),i=new RegExp("^"+r+t+a+o+"$"),e=["material","materials","bones"];return function(t){var r=i.exec(t);if(!r)throw Error("PropertyBinding: Cannot parse trackName: "+t);r={nodeName:r[2],objectName:r[3],objectIndex:r[4],propertyName:r[5],propertyIndex:r[6]};var a=r.nodeName&&r.nodeName.lastIndexOf(".");if(void 0!==a&&-1!==a){var o=r.nodeName.substring(a+1);-1!==e.indexOf(o)&&(r.nodeName=r.nodeName.substring(0,a),r.objectName=o)}if(null===r.propertyName||0===r.propertyName.length)throw Error("PropertyBinding: can not parse propertyName from trackName: "+t);return r}}(),findNode:function(e,t){if(!t||""===t||"root"===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var r=e.skeleton.getBoneByName(t);if(void 0!==r)return r}if(e.children){var a=function r(o){for(var a=0,i;a<o.length;a++)if(i=o[a],i.name===t||i.uuid===t||(i=r(i.children)))return i;return null};if(e=a(e.children))return e}return null}}),Object.assign(vi.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(t,r){for(var a=this.resolvedProperty,o=0,i=a.length;o!==i;++o)t[r++]=a[o]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.targetObject[this.propertyName]=e[t]},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,r){for(var a=this.resolvedProperty,o=0,i=a.length;o!==i;++o)a[o]=t[r++]},function(t,r){for(var a=this.resolvedProperty,o=0,i=a.length;o!==i;++o)a[o]=t[r++];this.targetObject.needsUpdate=!0},function(t,r){for(var a=this.resolvedProperty,o=0,i=a.length;o!==i;++o)a[o]=t[r++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(e,t){this.bind(),this.getValue(e,t)},setValue:function(e,t){this.bind(),this.setValue(e,t)},bind:function(){var t=this.node,r=this.parsedPath,a=r.objectName,o=r.propertyName,i=r.propertyIndex;if(t||(this.node=t=vi.findNode(this.rootNode,r.nodeName)||this.rootNode),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,t){if(a){var e=r.objectIndex;switch(a){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);for(t=t.skeleton.bones,a=0;a<t.length;a++)if(t[a].name===e){e=a;break}break;default:if(void 0===t[a])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[a];}if(void 0!==e){if(void 0===t[e])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[e]}}if(e=t[o],void 0===e)console.error("THREE.PropertyBinding: Trying to update property for track: "+r.nodeName+"."+o+" but it wasn't found.",t);else{if(r=this.Versioning.None,void 0===t.needsUpdate?void 0!==t.matrixWorldNeedsUpdate&&(r=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=t):(r=this.Versioning.NeedsUpdate,this.targetObject=t),a=this.BindingType.Direct,void 0!==i){if("morphTargetInfluences"===o){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(t.geometry.isBufferGeometry){if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);for(a=0;a<this.node.geometry.morphAttributes.position.length;a++)if(t.geometry.morphAttributes.position[a].name===i){i=a;break}}else{if(!t.geometry.morphTargets)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);for(a=0;a<this.node.geometry.morphTargets.length;a++)if(t.geometry.morphTargets[a].name===i){i=a;break}}}a=this.BindingType.ArrayElement,this.resolvedProperty=e,this.propertyIndex=i}else void 0!==e.fromArray&&void 0!==e.toArray?(a=this.BindingType.HasFromToArray,this.resolvedProperty=e):Array.isArray(e)?(a=this.BindingType.EntireArray,this.resolvedProperty=e):this.propertyName=o;this.getValue=this.GetterByBindingType[a],this.setValue=this.SetterByBindingTypeAndVersioning[a][r]}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(vi.prototype,{_getValue_unbound:vi.prototype.getValue,_setValue_unbound:vi.prototype.setValue}),Object.assign(fa.prototype,{isAnimationObjectGroup:!0,add:function(){for(var o=this._objects,a=o.length,i=this.nCachedObjects_,s=this._indicesByUUID,d=this._paths,e=this._parsedPaths,c=this._bindings,m=c.length,g=void 0,f=0,l=arguments.length;f!==l;++f){var p=arguments[f],n=p.uuid,u=s[n];if(void 0===u){u=a++,s[n]=u,o.push(p),n=0;for(var h=m;n!==h;++n)c[n].push(new vi(p,d[n],e[n]))}else if(u<i){g=o[u];var r=--i;for(h=o[r],s[h.uuid]=u,o[u]=h,s[n]=r,o[r]=p,n=0,h=m;n!==h;++n){var t=c[n],x=t[u];t[u]=t[r],void 0===x&&(x=new vi(p,d[n],e[n])),t[r]=x}}else o[u]!==g&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=i},remove:function(){for(var t=this._objects,r=this.nCachedObjects_,a=this._indicesByUUID,o=this._bindings,i=o.length,e=0,s=arguments.length;e!==s;++e){var d=arguments[e],c=d.uuid,m=a[c];if(void 0!==m&&m>=r){var l=r++,p=t[l];for(a[p.uuid]=m,t[m]=p,a[c]=l,t[l]=d,d=0,c=i;d!==c;++d){p=o[d];var n=p[m];p[m]=p[l],p[l]=n}}}this.nCachedObjects_=r},uncache:function(){for(var t=this._objects,a=t.length,o=this.nCachedObjects_,i=this._indicesByUUID,s=this._bindings,e=s.length,d=0,c=arguments.length;d!==c;++d){var m=arguments[d].uuid,g=i[m];if(void 0!==g)if(delete i[m],g<o){m=--o;var l=t[m],p=--a,n=t[p];for(i[l.uuid]=g,t[g]=l,i[n.uuid]=m,t[m]=n,t.pop(),l=0,n=e;l!==n;++l){var u=s[l],f=u[p];u[g]=u[m],u[m]=f,u.pop()}}else for(p=--a,n=t[p],i[n.uuid]=g,t[g]=n,t.pop(),l=0,n=e;l!==n;++l)u=s[l],u[g]=u[p],u.pop()}this.nCachedObjects_=o},subscribe_:function(t,r){var a=this._bindingsIndicesByPath,o=a[t],i=this._bindings;if(void 0!==o)return i[o];var e=this._paths,n=this._parsedPaths,s=this._objects,p=this.nCachedObjects_,d=Array(s.length);for(o=i.length,a[t]=o,e.push(t),n.push(r),i.push(d),a=p,o=s.length;a!==o;++a)d[a]=new vi(s[a],t,r);return d},unsubscribe_:function(t){var r=this._bindingsIndicesByPath,a=r[t];if(void 0!==a){var o=this._paths,i=this._parsedPaths,e=this._bindings,n=e.length-1,s=e[n];r[t[n]]=a,e[a]=s,e.pop(),i[a]=i[n],i.pop(),o[a]=o[n],o.pop()}}}),Object.assign(_i.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){return this._startTime=e,this},setLoop:function(e,t){return this.loop=e,this.repetitions=t,this},setEffectiveWeight:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(t,r,a){if(t.fadeOut(r),this.fadeIn(r),a){a=this._clip.duration;var o=t._clip.duration,i=a/o;t.warp(1,o/a,r),this.warp(i,1,r)}return this},crossFadeTo:function(e,t,r){return e.crossFadeFrom(this,t,r)},stopFading:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},setEffectiveTimeScale:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()},syncWith:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(t,r,a){var o=this._mixer,i=o.time,e=this._timeScaleInterpolant,n=this.timeScale;return null===e&&(this._timeScaleInterpolant=e=o._lendControlInterpolant()),o=e.parameterPositions,e=e.sampleValues,o[0]=i,o[1]=i+a,e[0]=t/n,e[1]=r/n,this},stopWarping:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(t,r,a,o){if(this.enabled){var i=this._startTime;if(null!==i){if(r=(t-i)*a,0>r||0===a)return;this._startTime=null,r*=a}if(r*=this._updateTimeScale(t),a=this._updateTime(r),t=this._updateWeight(t),0<t){r=this._interpolants,i=this._propertyBindings;for(var e=0,n=r.length;e!==n;++e)r[e].evaluate(a),i[e].accumulate(o,t)}}else this._updateWeight(t)},_updateWeight:function(e){var t=0;if(this.enabled){t=this.weight;var r=this._weightInterpolant;if(null!==r){var a=r.evaluate(e)[0];t*=a,e>r.parameterPositions[1]&&(this.stopFading(),0===a&&(this.enabled=!1))}}return this._effectiveWeight=t},_updateTimeScale:function(e){var t=0;if(!this.paused){t=this.timeScale;var r=this._timeScaleInterpolant;if(null!==r){var a=r.evaluate(e)[0];t*=a,e>r.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t},_updateTime:function(t){var r=this.time+t;if(0===t)return r;var o=this._clip.duration,i=this.loop,n=this._loopCount;if(2200===i)a:{if(-1===n&&(this._loopCount=0,this._setEndings(!0,!0,!1)),r>=o)r=o;else if(0>r)r=0;else break a;this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:0>t?-1:1})}else{if(i=2202===i,-1===n&&(0<=t?(n=0,this._setEndings(!0,0===this.repetitions,i)):this._setEndings(0===this.repetitions,!0,i)),r>=o||0>r){var e=xn(r/o);r-=o*e,n+=yn(e);var s=this.repetitions-n;0>s?(this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=0<t?o:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:0<t?1:-1})):(0===s?(t=0>t,this._setEndings(t,!t,i)):this._setEndings(!1,!1,i),this._loopCount=n,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:e}))}if(i&&1===(1&n))return this.time=r,o-r}return this.time=r},_setEndings:function(e,t,r){var a=this._interpolantSettings;r?(a.endingStart=2401,a.endingEnd=2401):(a.endingStart=e?this.zeroSlopeAtStart?2401:2400:2402,a.endingEnd=t?this.zeroSlopeAtEnd?2401:2400:2402)},_scheduleFading:function(t,r,a){var o=this._mixer,i=o.time,e=this._weightInterpolant;return null===e&&(this._weightInterpolant=e=o._lendControlInterpolant()),o=e.parameterPositions,e=e.sampleValues,o[0]=i,e[0]=r,o[1]=i+t,e[1]=a,this}}),bi.prototype=Object.assign(Object.create(t.prototype),{constructor:bi,_bindAction:function(t,r){var a=t._localRoot||this._root,o=t._clip.tracks,i=o.length,e=t._propertyBindings;t=t._interpolants;var s=a.uuid,d=this._bindingsByRootAndName,c=d[s];for(void 0===c&&(c={},d[s]=c),d=0;d!==i;++d){var m=o[d],l=m.name,p=c[l];if(void 0===p){if(p=e[d],void 0!==p){null===p._cacheIndex&&(++p.referenceCount,this._addInactiveBinding(p,s,l));continue}p=new ne(vi.create(a,l,r&&r._propertyBindings[d].binding.parsedPath),m.ValueTypeName,m.getValueSize()),++p.referenceCount,this._addInactiveBinding(p,s,l)}e[d]=p,t[d].resultBuffer=p.buffer}},_activateAction:function(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){var r=(t._localRoot||this._root).uuid,a=t._clip.uuid,o=this._actionsByClip[a];this._bindAction(t,o&&o.knownActions[0]),this._addInactiveAction(t,a,r)}for(r=t._propertyBindings,a=0,o=r.length;a!==o;++a){var i=r[a];0===i.useCount++&&(this._lendBinding(i),i.saveOriginalState())}this._lendAction(t)}},_deactivateAction:function(t){if(this._isActiveAction(t)){for(var r=t._propertyBindings,a=0,o=r.length,i;a!==o;++a)i=r[a],0===--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i));this._takeBackAction(t)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){return e=e._cacheIndex,null!==e&&e<this._nActiveActions},_addInactiveAction:function(t,r,a){var o=this._actions,i=this._actionsByClip,e=i[r];void 0===e?(e={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,i[r]=e):(r=e.knownActions,t._byClipCacheIndex=r.length,r.push(t)),t._cacheIndex=o.length,o.push(t),e.actionByRoot[a]=t},_removeInactiveAction:function(t){var r=this._actions,a=r[r.length-1],o=t._cacheIndex;a._cacheIndex=o,r[o]=a,r.pop(),t._cacheIndex=null,r=t._clip.uuid,a=this._actionsByClip,o=a[r];var i=o.knownActions,e=i[i.length-1],n=t._byClipCacheIndex;e._byClipCacheIndex=n,i[n]=e,i.pop(),t._byClipCacheIndex=null,delete o.actionByRoot[(t._localRoot||this._root).uuid],0===i.length&&delete a[r],this._removeInactiveBindingsForAction(t)},_removeInactiveBindingsForAction:function(e){e=e._propertyBindings;for(var t=0,r=e.length,a;t!==r;++t)a=e[t],0===--a.referenceCount&&this._removeInactiveBinding(a)},_lendAction:function(t){var r=this._actions,a=t._cacheIndex,o=this._nActiveActions++,i=r[o];t._cacheIndex=o,r[o]=t,i._cacheIndex=a,r[a]=i},_takeBackAction:function(t){var r=this._actions,a=t._cacheIndex,o=--this._nActiveActions,i=r[o];t._cacheIndex=o,r[o]=t,i._cacheIndex=a,r[a]=i},_addInactiveBinding:function(t,r,a){var o=this._bindingsByRootAndName,i=o[r],e=this._bindings;void 0===i&&(i={},o[r]=i),i[a]=t,t._cacheIndex=e.length,e.push(t)},_removeInactiveBinding:function(t){var r=this._bindings,a=t.binding,o=a.rootNode.uuid;a=a.path;var i=this._bindingsByRootAndName,e=i[o],n=r[r.length-1];t=t._cacheIndex,n._cacheIndex=t,r[t]=n,r.pop(),delete e[a];a:{for(var s in e)break a;delete i[o]}},_lendBinding:function(t){var r=this._bindings,a=t._cacheIndex,o=this._nActiveBindings++,i=r[o];t._cacheIndex=o,r[o]=t,i._cacheIndex=a,r[a]=i},_takeBackBinding:function(t){var r=this._bindings,a=t._cacheIndex,o=--this._nActiveBindings,i=r[o];t._cacheIndex=o,r[o]=t,i._cacheIndex=a,r[a]=i},_lendControlInterpolant:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,r=e[t];return void 0===r&&(r=new oi(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),r.__cacheIndex=t,e[t]=r),r},_takeBackControlInterpolant:function(t){var r=this._controlInterpolants,a=t.__cacheIndex,o=--this._nActiveControlInterpolants,i=r[o];t.__cacheIndex=o,r[o]=t,i.__cacheIndex=a,r[a]=i},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(t,r){var o=r||this._root,i=o.uuid;o="string"===typeof t?li.findByName(o,t):t,t=null===o?t:o.uuid;var n=this._actionsByClip[t],e=null;if(void 0!==n){if(e=n.actionByRoot[i],void 0!==e)return e;e=n.knownActions[0],null===o&&(o=e._clip)}return null===o?null:(r=new _i(this,o,r),this._bindAction(r,e),this._addInactiveAction(r,t,i),r)},existingAction:function(e,t){var r=t||this._root;return t=r.uuid,r="string"===typeof e?li.findByName(r,e):e,e=this._actionsByClip[r?r.uuid:e],void 0===e?null:e.actionByRoot[t]||null},stopAllAction:function(){for(var t=this._actions,r=this._nActiveActions,a=this._bindings,o=this._nActiveBindings,i=this._nActiveBindings=this._nActiveActions=0;i!==r;++i)t[i].reset();for(i=0;i!==o;++i)a[i].useCount=0;return this},update:function(t){t*=this.timeScale;for(var r=this._actions,a=this._nActiveActions,o=this.time+=t,i=an(t),e=this._accuIndex^=1,n=0;n!==a;++n)r[n]._update(o,t,i,e);for(t=this._bindings,r=this._nActiveBindings,n=0;n!==r;++n)t[n].apply(e);return this},getRoot:function(){return this._root},uncacheClip:function(t){var r=this._actions;t=t.uuid;var a=this._actionsByClip,o=a[t];if(void 0!==o){o=o.knownActions;for(var i=0,e=o.length,n;i!==e;++i){n=o[i],this._deactivateAction(n);var s=n._cacheIndex,l=r[r.length-1];n._cacheIndex=null,n._byClipCacheIndex=null,l._cacheIndex=s,r[s]=l,r.pop(),this._removeInactiveBindingsForAction(n)}delete a[t]}},uncacheRoot:function(t){t=t.uuid;var r=this._actionsByClip;for(o in r){var a=r[o].actionByRoot[t];void 0!==a&&(this._deactivateAction(a),this._removeInactiveAction(a))}var o=this._bindingsByRootAndName[t];if(void 0!==o)for(var i in o)t=o[i],t.restoreOriginalState(),this._removeInactiveBinding(t)},uncacheAction:function(e,t){e=this.existingAction(e,t),null!==e&&(this._deactivateAction(e),this._removeInactiveAction(e))}}),Ei.prototype.clone=function(){return new Ei(void 0===this.value.clone?this.value:this.value.clone())},Ti.prototype=Object.assign(Object.create(Tt.prototype),{constructor:Ti,isInstancedBufferGeometry:!0,copy:function(e){return Tt.prototype.copy.call(this,e),this.maxInstancedCount=e.maxInstancedCount,this},clone:function(){return new this.constructor().copy(this)}}),Object.defineProperties(Si.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(Si.prototype,{isInterleavedBufferAttribute:!0,setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this},setXYZ:function(e,t,r,a){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=a,this},setXYZW:function(t,r,a,o,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=r,this.data.array[t+1]=a,this.data.array[t+2]=o,this.data.array[t+3]=i,this}}),Object.defineProperty(re.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(re.prototype,{isInterleavedBuffer:!0,setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0===e?0:e.length/this.stride,this.array=e},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.dynamic=e.dynamic,this},copyAt:function(t,r,a){t*=this.stride,a*=r.stride;for(var o=0,i=this.stride;o<i;o++)this.array[t+o]=r.array[a+o];return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},clone:function(){return new this.constructor().copy(this)},onUpload:function(e){return this.onUploadCallback=e,this}}),Mi.prototype=Object.assign(Object.create(re.prototype),{constructor:Mi,isInstancedInterleavedBuffer:!0,copy:function(e){return re.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Ai.prototype=Object.assign(Object.create(gt.prototype),{constructor:Ai,isInstancedBufferAttribute:!0,copy:function(e){return gt.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Object.assign(wi.prototype,{linePrecision:1,set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize()):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,t){var r=[];return Li(e,this,r,t),r.sort(Ri),r},intersectObjects:function(t,r){var a=[];if(!1===Array.isArray(t))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),a;for(var o=0,i=t.length;o<i;o++)Li(t[o],this,a,r);return a.sort(Ri),a}}),Object.assign(ue.prototype,{start:function(){this.oldTime=this.startTime=("undefined"===typeof performance?Date:performance).now(),this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.autoStart=this.running=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=("undefined"===typeof performance?Date:performance).now();e=(t-this.oldTime)/1E3,this.oldTime=t,this.elapsedTime+=e}return e}}),Object.assign(Ci.prototype,{set:function(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this},makeSafe:function(){return this.phi=fn(1E-6,hn(dn-1E-6,this.phi)),this},setFromVector3:function(e){return this.radius=e.length(),0===this.radius?this.phi=this.theta=0:(this.theta=ln(e.x,e.z),this.phi=en(vn.clamp(e.y/this.radius,-1,1))),this}}),Object.assign(Pi.prototype,{set:function(e,t,r){return this.radius=e,this.theta=t,this.y=r,this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this},setFromVector3:function(e){return this.radius=cn(e.x*e.x+e.z*e.z),this.theta=ln(e.x,e.z),this.y=e.y,this}}),Object.assign(Ii.prototype,{set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new o;return function(t,r){return r=e.copy(r).multiplyScalar(.5),this.min.copy(t).sub(r),this.max.copy(t).add(r),this}}(),clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=Infinity,this.max.x=this.max.y=-Infinity,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){return e=e||new o,this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return e=e||new o,this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y?!1:!0},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){return(t||new o).set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y?!1:!0},clampPoint:function(e,t){return(t||new o).copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new o;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}),ve.prototype=Object.create(pt.prototype),ve.prototype.constructor=ve,ve.prototype.isImmediateRenderObject=!0,Ui.prototype=Object.create(Mr.prototype),Ui.prototype.constructor=Ui,Ui.prototype.update=function(){var t=new _,a=new _,o=new u;return function(){var i=["a","b","c"];this.object.updateMatrixWorld(!0),o.getNormalMatrix(this.object.matrixWorld);var s=this.object.matrixWorld,e=this.geometry.attributes.position,d=this.object.geometry;if(d&&d.isGeometry)for(var c=d.vertices,m=d.faces,g=d=0,l=m.length;g<l;g++)for(var p=m[g],n=0,u=p.vertexNormals.length,f;n<u;n++)f=p.vertexNormals[n],t.copy(c[p[i[n]]]).applyMatrix4(s),a.copy(f).applyMatrix3(o).normalize().multiplyScalar(this.size).add(t),e.setXYZ(d,t.x,t.y,t.z),d+=1,e.setXYZ(d,a.x,a.y,a.z),d+=1;else if(d&&d.isBufferGeometry)for(i=d.attributes.position,c=d.attributes.normal,n=d=0,u=i.count;n<u;n++)t.set(i.getX(n),i.getY(n),i.getZ(n)).applyMatrix4(s),a.set(c.getX(n),c.getY(n),c.getZ(n)),a.applyMatrix3(o).normalize().multiplyScalar(this.size).add(t),e.setXYZ(d,t.x,t.y,t.z),d+=1,e.setXYZ(d,a.x,a.y,a.z),d+=1;e.needsUpdate=!0}}(),Di.prototype=Object.create(pt.prototype),Di.prototype.constructor=Di,Di.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},Di.prototype.update=function(){var e=new _,t=new _;return function(){this.light.updateMatrixWorld();var r=this.light.distance?this.light.distance:1E3,a=r*xe(this.light.angle);this.cone.scale.set(a,a,r),e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(t.sub(e)),void 0===this.color?this.cone.material.color.copy(this.light.color):this.cone.material.color.set(this.color)}}(),Bi.prototype=Object.create(Mr.prototype),Bi.prototype.constructor=Bi,Bi.prototype.updateMatrixWorld=function(){var t=new _,r=new i,a=new i;return function(o){var i=this.bones,e=this.geometry,n=e.getAttribute("position");a.getInverse(this.root.matrixWorld);for(var s=0,p=0,d;s<i.length;s++)d=i[s],d.parent&&d.parent.isBone&&(r.multiplyMatrices(a,d.matrixWorld),t.setFromMatrixPosition(r),n.setXYZ(p,t.x,t.y,t.z),r.multiplyMatrices(a,d.parent.matrixWorld),t.setFromMatrixPosition(r),n.setXYZ(p+1,t.x,t.y,t.z),p+=2);e.getAttribute("position").needsUpdate=!0,pt.prototype.updateMatrixWorld.call(this,o)}}(),Fi.prototype=Object.create(Ut.prototype),Fi.prototype.constructor=Fi,Fi.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},Fi.prototype.update=function(){void 0===this.color?this.material.color.copy(this.light.color):this.material.color.set(this.color)},zi.prototype=Object.create(pt.prototype),zi.prototype.constructor=zi,zi.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},zi.prototype.update=function(){var e=.5*this.light.width,t=.5*this.light.height,r=this.line.geometry.attributes.position,o=r.array;o[0]=e,o[1]=-t,o[2]=0,o[3]=e,o[4]=t,o[5]=0,o[6]=-e,o[7]=t,o[8]=0,o[9]=-e,o[10]=-t,o[11]=0,o[12]=e,o[13]=-t,o[14]=0,r.needsUpdate=!0,void 0===this.color?this.line.material.color.copy(this.light.color):this.line.material.color.set(this.color)},Gi.prototype=Object.create(pt.prototype),Gi.prototype.constructor=Gi,Gi.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},Gi.prototype.update=function(){var t=new _,r=new Ne,a=new Ne;return function(){var o=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var i=o.geometry.getAttribute("color");r.copy(this.light.color),a.copy(this.light.groundColor);for(var e=0,n=i.count,s;e<n;e++)s=e<n/2?r:a,i.setXYZ(e,s.r,s.g,s.b);i.needsUpdate=!0}o.lookAt(t.setFromMatrixPosition(this.light.matrixWorld).negate())}}(),Oi.prototype=Object.create(Mr.prototype),Oi.prototype.constructor=Oi,Hi.prototype=Object.create(Mr.prototype),Hi.prototype.constructor=Hi,Vi.prototype=Object.create(Mr.prototype),Vi.prototype.constructor=Vi,Vi.prototype.update=function(){var t=new _,r=new _,a=new u;return function(){this.object.updateMatrixWorld(!0),a.getNormalMatrix(this.object.matrixWorld);var o=this.object.matrixWorld,i=this.geometry.attributes.position,e=this.object.geometry,s=e.vertices;e=e.faces;for(var d=0,c=0,m=e.length;c<m;c++){var l=e[c],p=l.normal;t.copy(s[l.a]).add(s[l.b]).add(s[l.c]).divideScalar(3).applyMatrix4(o),r.copy(p).applyMatrix3(a).normalize().multiplyScalar(this.size).add(t),i.setXYZ(d,t.x,t.y,t.z),d+=1,i.setXYZ(d,r.x,r.y,r.z),d+=1}i.needsUpdate=!0}}(),ki.prototype=Object.create(pt.prototype),ki.prototype.constructor=ki,ki.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},ki.prototype.update=function(){var e=new _,t=new _,r=new _;return function(){e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),r.subVectors(t,e),this.lightPlane.lookAt(r),void 0===this.color?(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)):(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)),this.targetLine.lookAt(r),this.targetLine.scale.z=r.length()}}(),Wi.prototype=Object.create(Mr.prototype),Wi.prototype.constructor=Wi,Wi.prototype.update=function(){function t(t,n,s,l){if(r.set(n,s,l).unproject(o),t=i[t],void 0!==t)for(n=e.getAttribute("position"),s=0,l=t.length;s<l;s++)n.setXYZ(t[s],r.x,r.y,r.z)}var r=new _,o=new dt,e,i;return function(){e=this.geometry,i=this.pointMap,o.projectionMatrix.copy(this.camera.projectionMatrix),t("c",0,0,-1),t("t",0,0,1),t("n1",-1,-1,-1),t("n2",1,-1,-1),t("n3",-1,1,-1),t("n4",1,1,-1),t("f1",-1,-1,1),t("f2",1,-1,1),t("f3",-1,1,1),t("f4",1,1,1),t("u1",.7,1.1,-1),t("u2",-.7,1.1,-1),t("u3",0,2,-1),t("cf1",-1,0,1),t("cf2",1,0,1),t("cf3",0,-1,1),t("cf4",0,1,1),t("cn1",-1,0,-1),t("cn2",1,0,-1),t("cn3",0,-1,-1),t("cn4",0,1,-1),e.getAttribute("position").needsUpdate=!0}}(),ji.prototype=Object.create(Mr.prototype),ji.prototype.constructor=ji,ji.prototype.update=function(){var t=new rt;return function(r){if(void 0!==r&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&t.setFromObject(this.object),!t.isEmpty()){r=t.min;var a=t.max,o=this.geometry.attributes.position,i=o.array;i[0]=a.x,i[1]=a.y,i[2]=a.z,i[3]=r.x,i[4]=a.y,i[5]=a.z,i[6]=r.x,i[7]=r.y,i[8]=a.z,i[9]=a.x,i[10]=r.y,i[11]=a.z,i[12]=a.x,i[13]=a.y,i[14]=r.z,i[15]=r.x,i[16]=a.y,i[17]=r.z,i[18]=r.x,i[19]=r.y,i[20]=r.z,i[21]=a.x,i[22]=r.y,i[23]=r.z,o.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}(),ji.prototype.setFromObject=function(e){return this.object=e,this.update(),this},Xi.prototype=Object.create(Mr.prototype),Xi.prototype.constructor=Xi,Xi.prototype.updateMatrixWorld=function(e){var t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),pt.prototype.updateMatrixWorld.call(this,e))},Yi.prototype=Object.create(Sr.prototype),Yi.prototype.constructor=Yi,Yi.prototype.updateMatrixWorld=function(e){var t=-this.plane.constant;1e-8>yn(t)&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.lookAt(this.plane.normal),pt.prototype.updateMatrixWorld.call(this,e)};var On,Hn;qi.prototype=Object.create(pt.prototype),qi.prototype.constructor=qi,qi.prototype.setDirection=function(){var e=new _,t;return function(r){.99999<r.y?this.quaternion.set(0,0,0,1):-.99999>r.y?this.quaternion.set(1,0,0,0):(e.set(r.z,0,-r.x).normalize(),t=en(r.y),this.quaternion.setFromAxisAngle(e,t))}}(),qi.prototype.setLength=function(e,t,r){void 0===t&&(t=.2*e),void 0===r&&(r=.2*t),this.line.scale.set(1,fn(0,e-t),1),this.line.updateMatrix(),this.cone.scale.set(r,t,r),this.cone.position.y=e,this.cone.updateMatrix()},qi.prototype.setColor=function(e){this.line.material.color.copy(e),this.cone.material.color.copy(e)},Zi.prototype=Object.create(Mr.prototype),Zi.prototype.constructor=Zi,Mo.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(Mo.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},Object.assign(zo.prototype,{createPointsGeometry:function(e){return console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead."),e=this.getPoints(e),this.createGeometry(e)},createSpacedPointsGeometry:function(e){return console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead."),e=this.getSpacedPoints(e),this.createGeometry(e)},createGeometry:function(t){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var r=new ut,a=0,o=t.length,i;a<o;a++)i=t[a],r.vertices.push(new _(i.x,i.y,i.z||0));return r}}),Object.assign(Go.prototype,{fromPoints:function(e){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)}}),Ji.prototype=Object.create(de.prototype),Qi.prototype=Object.create(de.prototype),Ki.prototype=Object.create(de.prototype),Object.assign(Ki.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),Oi.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Bi.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(ee.prototype,{extractUrlBase:function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),Bn.extractUrlBase(e)}}),Object.assign(Ii.prototype,{center:function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(rt.prototype,{center:function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}}),Pt.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},Object.assign(vn,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(e){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),vn.floorPowerOfTwo(e)},nextPowerOfTwo:function(e){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),vn.ceilPowerOfTwo(e)}}),Object.assign(u.prototype,{flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(i.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},getPosition:function(){var e;return function(){return void 0===e&&(e=new _),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),e.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(t,r,a,o,i,e){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(t,r,o,a,i,e)}}),ot.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},s.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},Object.assign(Ct.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}}),Object.assign(Oo.prototype,{extractAllPoints:function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},extrude:function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Ra(this,e)},makeGeometry:function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new ro(this,e)}}),Object.assign(o.prototype,{fromAttribute:function(e,t,r){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,r)},distanceToManhattan:function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(_.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},applyProjection:function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},fromAttribute:function(e,t,r){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,r)},distanceToManhattan:function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(j.prototype,{fromAttribute:function(e,t,r){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,r)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(ut.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}}),Object.assign(pt.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)}}),Object.defineProperties(pt.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(vr.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(_r.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),Object.defineProperty(Mo.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(e){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=e}}),ir.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(Ho.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(gt.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}}}),Object.assign(Tt.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addDrawCall:function(e,t,r){void 0!==r&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(Tt.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(Ei.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(Ke.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Ne}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===e}}}),Object.defineProperties(yo.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(Lt.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),Object.assign(ur.prototype,{getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")}}),Object.defineProperties(ur.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(nt.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(E.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),Object.defineProperties(sr.prototype,{standing:{set:function(){console.warn("THREE.WebVRManager: .standing has been removed.")}}}),hi.prototype.load=function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this;return new ui().load(e,function(e){t.setBuffer(e)}),this},xi.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},gi.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)},e.WebGLRenderTargetCube=n,e.WebGLRenderTarget=E,e.WebGLRenderer=ur,e.ShaderLib=R,e.UniformsLib=En,e.UniformsUtils=I,e.ShaderChunk=Ea,e.FogExp2=gr,e.Fog=fr,e.Scene=hr,e.Sprite=xr,e.LOD=vr,e.SkinnedMesh=Er,e.Skeleton=_r,e.Bone=br,e.Mesh=Ut,e.LineSegments=Mr,e.LineLoop=Ar,e.Line=Sr,e.Points=Rr,e.Group=Lr,e.VideoTexture=Cr,e.DataTexture=l,e.CompressedTexture=Pr,e.CubeTexture=p,e.CanvasTexture=H,e.DepthTexture=Ir,e.Texture=r,e.CompressedTextureLoader=Ka,e.DataTextureLoader=To,e.CubeTextureLoader=So,e.TextureLoader=ce,e.ObjectLoader=fe,e.MaterialLoader=wa,e.BufferGeometryLoader=pi,e.DefaultLoadingManager=In,e.LoadingManager=Eo,e.JSONLoader=di,e.ImageLoader=be,e.ImageBitmapLoader=ci,e.FontLoader=ie,e.FileLoader=ae,e.Loader=ee,e.LoaderUtils=Bn,e.Cache=Pn,e.AudioLoader=ui,e.SpotLightShadow=Wo,e.SpotLight=jo,e.PointLight=Xo,e.RectAreaLight=Jo,e.HemisphereLight=Vo,e.DirectionalLightShadow=Yo,e.DirectionalLight=qo,e.AmbientLight=Zo,e.LightShadow=ko,e.Light=Ho,e.StereoCamera=je,e.PerspectiveCamera=ir,e.OrthographicCamera=ct,e.CubeCamera=gi,e.ArrayCamera=nr,e.Camera=dt,e.AudioListener=fi,e.PositionalAudio=yi,e.AudioContext=Gn,e.AudioAnalyser=xi,e.Audio=hi,e.VectorKeyframeTrack=si,e.StringKeyframeTrack=Qo,e.QuaternionKeyframeTrack=ei,e.NumberKeyframeTrack=ri,e.ColorKeyframeTrack=ti,e.BooleanKeyframeTrack=Ko,e.PropertyMixer=ne,e.PropertyBinding=vi,e.KeyframeTrack=ni,e.AnimationUtils=Nn,e.AnimationObjectGroup=fa,e.AnimationMixer=bi,e.AnimationClip=li,e.Uniform=Ei,e.InstancedBufferGeometry=Ti,e.BufferGeometry=Tt,e.Geometry=ut,e.InterleavedBufferAttribute=Si,e.InstancedInterleavedBuffer=Mi,e.InterleavedBuffer=re,e.InstancedBufferAttribute=Ai,e.Face3=mt,e.Object3D=pt,e.Raycaster=wi,e.Layers=lt,e.EventDispatcher=t,e.Clock=ue,e.QuaternionLinearInterpolant=Ba,e.LinearInterpolant=oi,e.DiscreteInterpolant=ii,e.CubicInterpolant=ai,e.Interpolant=$o,e.Triangle=It,e.Math=vn,e.Spherical=Ci,e.Cylindrical=Pi,e.Plane=ot,e.Frustum=it,e.Sphere=at,e.Ray=Ct,e.Matrix4=i,e.Matrix3=u,e.Box3=rt,e.Box2=Ii,e.Line3=Pt,e.Euler=st,e.Vector4=j,e.Vector3=_,e.Vector2=o,e.Quaternion=s,e.Color=Ne,e.ImmediateRenderObject=ve,e.VertexNormalsHelper=Ui,e.SpotLightHelper=Di,e.SkeletonHelper=Bi,e.PointLightHelper=Fi,e.RectAreaLightHelper=zi,e.HemisphereLightHelper=Gi,e.GridHelper=Oi,e.PolarGridHelper=Hi,e.FaceNormalsHelper=Vi,e.DirectionalLightHelper=ki,e.CameraHelper=Wi,e.BoxHelper=ji,e.Box3Helper=Xi,e.PlaneHelper=Yi,e.ArrowHelper=qi,e.AxesHelper=Zi,e.Shape=Oo,e.Path=Go,e.ShapePath=mi,e.Font=he,e.CurvePath=zo,e.Curve=Mo,e.ShapeUtils=Cn,e.WebGLUtils=pr,e.WireframeGeometry=Ur,e.ParametricGeometry=Dr,e.ParametricBufferGeometry=Nr,e.TetrahedronGeometry=zr,e.TetrahedronBufferGeometry=Gr,e.OctahedronGeometry=Or,e.OctahedronBufferGeometry=Hr,e.IcosahedronGeometry=Vr,e.IcosahedronBufferGeometry=kr,e.DodecahedronGeometry=Wr,e.DodecahedronBufferGeometry=jr,e.PolyhedronGeometry=Br,e.PolyhedronBufferGeometry=Fr,e.TubeGeometry=Xr,e.TubeBufferGeometry=Yr,e.TorusKnotGeometry=qr,e.TorusKnotBufferGeometry=Zr,e.TorusGeometry=Jr,e.TorusBufferGeometry=Qr,e.TextGeometry=Fa,e.TextBufferGeometry=Ga,e.SphereGeometry=Va,e.SphereBufferGeometry=Wa,e.RingGeometry=ja,e.RingBufferGeometry=Xa,e.PlaneGeometry=At,e.PlaneBufferGeometry=wt,e.LatheGeometry=eo,e.LatheBufferGeometry=to,e.ShapeGeometry=ro,e.ShapeBufferGeometry=ao,e.ExtrudeGeometry=Ra,e.ExtrudeBufferGeometry=Ca,e.EdgesGeometry=io,e.ConeGeometry=lo,e.ConeBufferGeometry=po,e.CylinderGeometry=no,e.CylinderBufferGeometry=so,e.CircleGeometry=co,e.CircleBufferGeometry=mo,e.BoxGeometry=St,e.BoxBufferGeometry=Mt,e.ShadowMaterial=uo,e.SpriteMaterial=yr,e.RawShaderMaterial=go,e.ShaderMaterial=Lt,e.PointsMaterial=wr,e.MeshPhysicalMaterial=ho,e.MeshStandardMaterial=fo,e.MeshPhongMaterial=yo,e.MeshToonMaterial=xo,e.MeshNormalMaterial=vo,e.MeshLambertMaterial=_o,e.MeshDepthMaterial=et,e.MeshDistanceMaterial=tt,e.MeshBasicMaterial=Rt,e.LineDashedMaterial=bo,e.LineBasicMaterial=Tr,e.Material=Ke,e.Float64BufferAttribute=D,e.Float32BufferAttribute=bt,e.Uint32BufferAttribute=_t,e.Int32BufferAttribute=vt,e.Uint16BufferAttribute=xt,e.Int16BufferAttribute=yt,e.Uint8ClampedBufferAttribute=ht,e.Uint8BufferAttribute=ft,e.Int8BufferAttribute=M,e.BufferAttribute=gt,e.ArcCurve=Ao,e.CatmullRomCurve3=de,e.CubicBezierCurve=Po,e.CubicBezierCurve3=Io,e.EllipseCurve=K,e.LineCurve=Uo,e.LineCurve3=Do,e.QuadraticBezierCurve=No,e.QuadraticBezierCurve3=Bo,e.SplineCurve=Fo,e.REVISION="91dev",e.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2},e.CullFaceNone=0,e.CullFaceBack=1,e.CullFaceFront=2,e.CullFaceFrontBack=3,e.FrontFaceDirectionCW=0,e.FrontFaceDirectionCCW=1,e.BasicShadowMap=0,e.PCFShadowMap=1,e.PCFSoftShadowMap=2,e.FrontSide=0,e.BackSide=1,e.DoubleSide=2,e.FlatShading=1,e.SmoothShading=2,e.NoColors=0,e.FaceColors=1,e.VertexColors=2,e.NoBlending=0,e.NormalBlending=1,e.AdditiveBlending=2,e.SubtractiveBlending=3,e.MultiplyBlending=4,e.CustomBlending=5,e.AddEquation=100,e.SubtractEquation=101,e.ReverseSubtractEquation=102,e.MinEquation=103,e.MaxEquation=104,e.ZeroFactor=200,e.OneFactor=201,e.SrcColorFactor=202,e.OneMinusSrcColorFactor=203,e.SrcAlphaFactor=204,e.OneMinusSrcAlphaFactor=205,e.DstAlphaFactor=206,e.OneMinusDstAlphaFactor=207,e.DstColorFactor=208,e.OneMinusDstColorFactor=209,e.SrcAlphaSaturateFactor=210,e.NeverDepth=0,e.AlwaysDepth=1,e.LessDepth=2,e.LessEqualDepth=3,e.EqualDepth=4,e.GreaterEqualDepth=5,e.GreaterDepth=6,e.NotEqualDepth=7,e.MultiplyOperation=0,e.MixOperation=1,e.AddOperation=2,e.NoToneMapping=0,e.LinearToneMapping=1,e.ReinhardToneMapping=2,e.Uncharted2ToneMapping=3,e.CineonToneMapping=4,e.UVMapping=300,e.CubeReflectionMapping=301,e.CubeRefractionMapping=302,e.EquirectangularReflectionMapping=303,e.EquirectangularRefractionMapping=304,e.SphericalReflectionMapping=305,e.CubeUVReflectionMapping=306,e.CubeUVRefractionMapping=307,e.RepeatWrapping=1E3,e.ClampToEdgeWrapping=1001,e.MirroredRepeatWrapping=1002,e.NearestFilter=1003,e.NearestMipMapNearestFilter=1004,e.NearestMipMapLinearFilter=1005,e.LinearFilter=1006,e.LinearMipMapNearestFilter=1007,e.LinearMipMapLinearFilter=1008,e.UnsignedByteType=1009,e.ByteType=1010,e.ShortType=1011,e.UnsignedShortType=1012,e.IntType=1013,e.UnsignedIntType=1014,e.FloatType=1015,e.HalfFloatType=1016,e.UnsignedShort4444Type=1017,e.UnsignedShort5551Type=1018,e.UnsignedShort565Type=1019,e.UnsignedInt248Type=1020,e.AlphaFormat=1021,e.RGBFormat=1022,e.RGBAFormat=1023,e.LuminanceFormat=1024,e.LuminanceAlphaFormat=1025,e.RGBEFormat=1023,e.DepthFormat=1026,e.DepthStencilFormat=1027,e.RGB_S3TC_DXT1_Format=33776,e.RGBA_S3TC_DXT1_Format=33777,e.RGBA_S3TC_DXT3_Format=33778,e.RGBA_S3TC_DXT5_Format=33779,e.RGB_PVRTC_4BPPV1_Format=35840,e.RGB_PVRTC_2BPPV1_Format=35841,e.RGBA_PVRTC_4BPPV1_Format=35842,e.RGBA_PVRTC_2BPPV1_Format=35843,e.RGB_ETC1_Format=36196,e.RGBA_ASTC_4x4_Format=37808,e.RGBA_ASTC_5x4_Format=37809,e.RGBA_ASTC_5x5_Format=37810,e.RGBA_ASTC_6x5_Format=37811,e.RGBA_ASTC_6x6_Format=37812,e.RGBA_ASTC_8x5_Format=37813,e.RGBA_ASTC_8x6_Format=37814,e.RGBA_ASTC_8x8_Format=37815,e.RGBA_ASTC_10x5_Format=37816,e.RGBA_ASTC_10x6_Format=37817,e.RGBA_ASTC_10x8_Format=37818,e.RGBA_ASTC_10x10_Format=37819,e.RGBA_ASTC_12x10_Format=37820,e.RGBA_ASTC_12x12_Format=37821,e.LoopOnce=2200,e.LoopRepeat=2201,e.LoopPingPong=2202,e.InterpolateDiscrete=2300,e.InterpolateLinear=2301,e.InterpolateSmooth=2302,e.ZeroCurvatureEnding=2400,e.ZeroSlopeEnding=2401,e.WrapAroundEnding=2402,e.TrianglesDrawMode=0,e.TriangleStripDrawMode=1,e.TriangleFanDrawMode=2,e.LinearEncoding=3E3,e.sRGBEncoding=3001,e.GammaEncoding=3007,e.RGBEEncoding=3002,e.LogLuvEncoding=3003,e.RGBM7Encoding=3004,e.RGBM16Encoding=3005,e.RGBDEncoding=3006,e.BasicDepthPacking=3200,e.RGBADepthPacking=3201,e.CubeGeometry=St,e.Face4=function(t,r,a,o,i,e,n){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new mt(t,r,a,i,e,n)},e.LineStrip=0,e.LinePieces=1,e.MeshFaceMaterial=function(e){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),e},e.MultiMaterial=function(e){return void 0===e&&(e=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),e.isMultiMaterial=!0,e.materials=e,e.clone=function(){return e.slice()},e},e.PointCloud=function(e,t){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new Rr(e,t)},e.Particle=function(e){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new xr(e)},e.ParticleSystem=function(e,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new Rr(e,t)},e.PointCloudMaterial=function(e){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new wr(e)},e.ParticleBasicMaterial=function(e){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new wr(e)},e.ParticleSystemMaterial=function(e){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new wr(e)},e.Vertex=function(e,t,r){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new _(e,t,r)},e.DynamicBufferAttribute=function(e,t){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new gt(e,t).setDynamic(!0)},e.Int8Attribute=function(e,t){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new M(e,t)},e.Uint8Attribute=function(e,t){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new ft(e,t)},e.Uint8ClampedAttribute=function(e,t){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new ht(e,t)},e.Int16Attribute=function(e,t){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new yt(e,t)},e.Uint16Attribute=function(e,t){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new xt(e,t)},e.Int32Attribute=function(e,t){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new vt(e,t)},e.Uint32Attribute=function(e,t){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new _t(e,t)},e.Float32Attribute=function(e,t){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new bt(e,t)},e.Float64Attribute=function(e,t){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new D(e,t)},e.ClosedSplineCurve3=Ji,e.SplineCurve3=Qi,e.Spline=Ki,e.AxisHelper=function(e){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new Zi(e)},e.BoundingBoxHelper=function(e,t){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new ji(e,t)},e.EdgesHelper=function(e,t){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new Mr(new io(e.geometry),new Tr({color:void 0===t?16777215:t}))},e.WireframeHelper=function(e,t){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new Mr(new Ur(e.geometry),new Tr({color:void 0===t?16777215:t}))},e.XHRLoader=function(e){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new ae(e)},e.BinaryTextureLoader=function(e){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new To(e)},e.GeometryUtils={merge:function(e,t,r){if(console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),t.isMesh){t.matrixAutoUpdate&&t.updateMatrix();var a=t.matrix;t=t.geometry}e.merge(t,a,r)},center:function(e){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),e.center()}},e.ImageUtils={crossOrigin:void 0,loadTexture:function(t,r,a,o){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var i=new ce;return i.setCrossOrigin(this.crossOrigin),t=i.load(t,a,void 0,o),r&&(t.mapping=r),t},loadTextureCube:function(t,r,a,o){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var i=new So;return i.setCrossOrigin(this.crossOrigin),t=i.load(t,a,void 0,o),r&&(t.mapping=r),t},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")}},e.Projector=function(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(e,t){console.warn("THREE.Projector: .projectVector() is now vector.project()."),e.project(t)},this.unprojectVector=function(e,t){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),e.unproject(t)},this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}},e.CanvasRenderer=function(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"),this.domElement=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),this.clear=function(){},this.render=function(){},this.setClearColor=function(){},this.setSize=function(){}},e.SceneUtils={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")}},e.LensFlare=function(){console.error("THREE.LensFlare has been moved to /examples/js/objects/Lensflare.js")},Object.defineProperty(e,"__esModule",{value:!0})});</script><script>THREE.STLLoader=function(a){this.manager=a===void 0?THREE.DefaultLoadingManager:a},THREE.STLLoader.prototype={constructor:THREE.STLLoader,load:function(a,b,c,d){var e=this,f=new THREE.FileLoader(e.manager);f.setResponseType('arraybuffer'),f.load(a,function(a){try{b(e.parse(a))}catch(a){d&&d(a)}},c,d)},parse:function(a){var b=function(a){if('string'===typeof a){for(var b=new Uint8Array(a.length),c=0;c<a.length;c++)b[c]=255&a.charCodeAt(c);return b.buffer||b}return a}(a);return function(a){var b,c,d,e;if(e=new DataView(a),c=50,d=e.getUint32(80,!0),b=84+d*c,b===e.byteLength)return!0;for(var f=[115,111,108,105,100],g=0;5>g;g++)if(f[g]!=e.getUint8(g,!1))return!0;return!1}(b)?function(a){for(var c,d,e,b,f,g,h,j,k=new DataView(a),l=k.getUint32(80,!0),m=!1,n=0;70>n;n++)1129270351==k.getUint32(n,!1)&&82==k.getUint8(n+4)&&61==k.getUint8(n+5)&&(m=!0,b=[],f=k.getUint8(n+6)/255,g=k.getUint8(n+7)/255,h=k.getUint8(n+8)/255,j=k.getUint8(n+9)/255);for(var o=new THREE.BufferGeometry,p=[],q=[],r=0;r<l;r++){var s=84+r*50,t=k.getFloat32(s,!0),u=k.getFloat32(s+4,!0),v=k.getFloat32(s+8,!0);if(m){var w=k.getUint16(s+48,!0);0===(32768&w)?(c=(31&w)/31,d=(31&w>>5)/31,e=(31&w>>10)/31):(c=f,d=g,e=h)}for(var x,y=1;3>=y;y++)x=s+12*y,p.push(k.getFloat32(x,!0)),p.push(k.getFloat32(x+4,!0)),p.push(k.getFloat32(x+8,!0)),q.push(t,u,v),m&&b.push(c,d,e)}return o.addAttribute('position',new THREE.BufferAttribute(new Float32Array(p),3)),o.addAttribute('normal',new THREE.BufferAttribute(new Float32Array(q),3)),m&&(o.addAttribute('color',new THREE.BufferAttribute(new Float32Array(b),3)),o.hasColors=!0,o.alpha=j),o}(b):function(a){for(var b,c=new THREE.BufferGeometry,d=/facet([\s\S]*?)endfacet/g,e=0,f=/[\s]+([+-]?(?:\d+.\d+|\d+.|\d+|.\d+)(?:[eE][+-]?\d+)?)/.source,g=new RegExp('vertex'+f+f+f,'g'),h=new RegExp('normal'+f+f+f,'g'),i=[],j=[],k=new THREE.Vector3;null!==(b=d.exec(a));){for(var l=0,m=0,n=b[0];null!==(b=h.exec(n));)k.x=parseFloat(b[1]),k.y=parseFloat(b[2]),k.z=parseFloat(b[3]),m++;for(;null!==(b=g.exec(n));)i.push(parseFloat(b[1]),parseFloat(b[2]),parseFloat(b[3])),j.push(k.x,k.y,k.z),l++;1!==m&&console.error('THREE.STLLoader: Something isn\'t right with the normal of face number '+e),3!==l&&console.error('THREE.STLLoader: Something isn\'t right with the vertices of face number '+e),e++}return c.addAttribute('position',new THREE.Float32BufferAttribute(i,3)),c.addAttribute('normal',new THREE.Float32BufferAttribute(j,3)),c}(function(a){return'string'===typeof a?a:THREE.LoaderUtils.decodeText(new Uint8Array(a))}(a))}};</script><script>THREE.VTKLoader=function(a){this.manager=a===void 0?THREE.DefaultLoadingManager:a},Object.assign(THREE.VTKLoader.prototype,THREE.EventDispatcher.prototype,{load:function(a,b,c,d){var e=this,f=new THREE.FileLoader(e.manager);f.setResponseType('arraybuffer'),f.load(a,function(a){b(e.parse(a))},c,d)},parse:function(a){function b(a,b){var c=a.length,d=new Float32Array(c+b.length);return d.set(a),d.set(b,c),d}function c(a,b){var c=a.length,d=new Int32Array(c+b.length);return d.set(a),d.set(b,c),d}function d(a){for(var b='',c=new Uint8Array(a),d=0,f=c.length;f--;)b+=e(c[d++]);return b}var e=String.fromCharCode,f=THREE.LoaderUtils.decodeText(new Uint8Array(a,0,250)).split('\n');return-1===f[0].indexOf('xml')?f[2].includes('ASCII')?function(a){var c,d=[],e=[],f=[],h=[],l=/(\-?\d+\.?[\d\-\+e]*)\s+(\-?\d+\.?[\d\-\+e]*)\s+(\-?\d+\.?[\d\-\+e]*)/g,m=/^(\d+)\s+([\s\d]*)/,n=/^POINTS /,o=/^POLYGONS /,p=/^TRIANGLE_STRIPS /,q=/^POINT_DATA[ ]+(\d+)/,s=/^CELL_DATA[ ]+(\d+)/,t=/^COLOR_SCALARS[ ]+(\w+)[ ]+3/,u=/^NORMALS[ ]+(\w+)[ ]+(\w+)/,v=!1,w=!1,A=!1,B=!1,C=!1,D=!1,E=!1,F=a.split('\n');for(var G in F){var i=F[G];if(v)for(;null!==(c=l.exec(i));){var H=parseFloat(c[1]),x=parseFloat(c[2]),y=parseFloat(c[3]);e.push(H,x,y)}else if(w){if(null!==(c=m.exec(i))){var z=parseInt(c[1]),I=c[2].split(/\s+/);if(3<=z)for(var J,K,L=parseInt(I[0]),M=1,k=0;k<z-2;++k)J=parseInt(I[M]),K=parseInt(I[M+1]),d.push(L,J,K),M++}}else if(A){if(null!==(c=m.exec(i))){var z=parseInt(c[1]),I=c[2].split(/\s+/);if(3<=z)for(var L,J,K,k=0;k<z-2;k++)1===k%2?(L=parseInt(I[k]),J=parseInt(I[k+2]),K=parseInt(I[k+1]),d.push(L,J,K)):(L=parseInt(I[k]),J=parseInt(I[k+1]),K=parseInt(I[k+2]),d.push(L,J,K))}}else if(B||C)if(D)for(;null!==(c=l.exec(i));){var j=parseFloat(c[1]),r=parseFloat(c[2]),g=parseFloat(c[3]);f.push(j,r,g)}else if(E)for(;null!==(c=l.exec(i));){var b=parseFloat(c[1]),N=parseFloat(c[2]),O=parseFloat(c[3]);h.push(b,N,O)}null===o.exec(i)?null===n.exec(i)?null===p.exec(i)?null===q.exec(i)?null===s.exec(i)?null===t.exec(i)?null!==u.exec(i)&&(E=!0,D=!1,v=!1,w=!1,A=!1):(D=!0,E=!1,v=!1,w=!1,A=!1):(C=!0,v=!1,w=!1,A=!1):(B=!0,v=!1,w=!1,A=!1):(w=!1,v=!1,A=!0):(w=!1,v=!0,A=!1):(w=!0,v=!1,A=!1)}var P,Q='point';if(f.length===d.length&&(Q='cell'),'point'===Q)P=new THREE.BufferGeometry,P.setIndex(new THREE.BufferAttribute(new Uint32Array(d),1)),P.addAttribute('position',new THREE.BufferAttribute(new Float32Array(e),3)),f.length===e.length&&P.addAttribute('color',new THREE.BufferAttribute(new Float32Array(f),3)),h.length===e.length&&P.addAttribute('normal',new THREE.BufferAttribute(new Float32Array(h),3));else{P=new THREE.Geometry;for(var R,S,T,U,H,x,y,j,r,g,V=d.length/3,W=e.length/3,k=0;k<W;++k)H=e[3*k+0],x=e[3*k+1],y=e[3*k+2],P.vertices.push(new THREE.Vector3(H,x,y));for(var G=0;G<V;++G)S=d[3*G+0],T=d[3*G+1],U=d[3*G+2],P.faces.push(new THREE.Face3(S,T,U));if(f.length===3*V)for(var G=0;G<V;++G)R=P.faces[G],j=f[3*G+0],r=f[3*G+1],g=f[3*G+2],R.color=new THREE.Color().setRGB(j,r,g)}return P}(d(a)):function(a){function b(a,b){for(var d=b,f=a[d],c=[];10!==f;)c.push(e(f)),d++,f=a[d];return{start:b,end:d,next:d+1,parsedString:c.join('')}}for(var c,d,f,g,h,i,k,l=new Uint8Array(a),m=new DataView(a),n=[],o=[],p=[],q=[],r=0;;){if(i=b(l,r),k=i.parsedString,0===k.indexOf('POINTS')){for(q.push(k),g=parseInt(k.split(' ')[1],10),c=3*(4*g),n=new Float32Array(3*g),d=i.next,f=0;f<g;f++)n[3*f]=m.getFloat32(d,!1),n[3*f+1]=m.getFloat32(d+4,!1),n[3*f+2]=m.getFloat32(d+8,!1),d+=12;i.next=i.next+c+1}else if(0===k.indexOf('TRIANGLE_STRIPS')){var s=parseInt(k.split(' ')[1],10),t=parseInt(k.split(' ')[2],10);c=4*t,p=new Uint32Array(3*t-9*s);var u=0;for(d=i.next,f=0;f<s;f++){var v=m.getInt32(d,!1),w=[];for(d+=4,h=0;h<v;h++)w.push(m.getInt32(d,!1)),d+=4;for(var x=0;x<v-2;x++)x%2?(p[u++]=w[x],p[u++]=w[x+2],p[u++]=w[x+1]):(p[u++]=w[x],p[u++]=w[x+1],p[u++]=w[x+2])}i.next=i.next+c+1}else if(0===k.indexOf('POLYGONS')){var s=parseInt(k.split(' ')[1],10),t=parseInt(k.split(' ')[2],10);c=4*t,p=new Uint32Array(3*t-9*s);var u=0;for(d=i.next,f=0;f<s;f++){var v=m.getInt32(d,!1),w=[];for(d+=4,h=0;h<v;h++)w.push(m.getInt32(d,!1)),d+=4;for(var x=1;x<v-1;x++)p[u++]=w[0],p[u++]=w[x],p[u++]=w[x+1]}i.next=i.next+c+1}else if(0===k.indexOf('POINT_DATA')){for(g=parseInt(k.split(' ')[1],10),i=b(l,i.next),c=3*(4*g),o=new Float32Array(3*g),d=i.next,f=0;f<g;f++)o[3*f]=m.getFloat32(d,!1),o[3*f+1]=m.getFloat32(d+4,!1),o[3*f+2]=m.getFloat32(d+8,!1),d+=12;i.next+=c}if(r=i.next,r>=l.byteLength)break}var j=new THREE.BufferGeometry;return j.setIndex(new THREE.BufferAttribute(p,1)),j.addAttribute('position',new THREE.BufferAttribute(n,3)),o.length===n.length&&j.addAttribute('normal',new THREE.BufferAttribute(o,3)),j}(a):function(a){function d(a){var b={};if(!(1===a.nodeType))3===a.nodeType&&(b=a.nodeValue.trim());else if(a.attributes&&0<a.attributes.length){b.attributes={};for(var c,e=0;e<a.attributes.length;e++)c=a.attributes.item(e),b.attributes[c.nodeName]=c.nodeValue.trim()}if(a.hasChildNodes())for(var f=0;f<a.childNodes.length;f++){var g=a.childNodes.item(f),h=g.nodeName;if('undefined'===typeof b[h]){var i=d(g);''!==i&&(b[h]=i)}else{if('undefined'===typeof b[h].push){var j=b[h];b[h]=[j]}var i=d(g);''!==i&&b[h].push(i)}}return b}function e(a){var b,c='undefined'===typeof Uint8Array?Array:Uint8Array,d=[],e=[],f='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/',g=f.length;for(b=0;b<g;b++)d[b]=f[b];for(b=0;b<g;++b)e[f.charCodeAt(b)]=b;e[45]=62,e[95]=63;var h,i,j,k,l,g=a.length;if(0<g%4)throw new Error('Invalid string. Length must be a multiple of 4');k='='===a[g-2]?2:'='===a[g-1]?1:0,l=new c(3*g/4-k),i=0<k?g-4:g;var m=0;for(b=0,h=0;b<i;b+=4,h+=3)j=e[a.charCodeAt(b)]<<18|e[a.charCodeAt(b+1)]<<12|e[a.charCodeAt(b+2)]<<6|e[a.charCodeAt(b+3)],l[m++]=(16711680&j)>>16,l[m++]=(65280&j)>>8,l[m++]=255&j;return 2===k?(j=e[a.charCodeAt(b)]<<2|e[a.charCodeAt(b+1)]>>4,l[m++]=255&j):1===k&&(j=e[a.charCodeAt(b)]<<10|e[a.charCodeAt(b+1)]<<4|e[a.charCodeAt(b+2)]>>2,l[m++]=255&j>>8,l[m++]=255&j),l}function f(a,d){var f=0;if('UInt64'===k.attributes.header_type?f=8:'UInt32'===k.attributes.header_type&&(f=4),'binary'===a.attributes.format&&d){var g,h,l,m,n,o,p,q,r;if('Float32'===a.attributes.type)var s=new Float32Array;else if('Int64'===a.attributes.type)var s=new Int32Array;g=a['#text'],l=e(g),m=l[0];for(var t=1;t<f-1;t++)m|=l[t]<<t*f;o=(m+3)*f,p=0<o%3?3-o%3:0,o+=p,q=[],r=o,q.push(r),n=3*f;for(var i,t=0;t<m;t++){i=l[t*f+n];for(var u=1;u<f-1;u++)i|=l[t*f+n+u]<<8*u;r+=i,q.push(r)}for(var j,t=0;t<q.length-1;t++)j=new Zlib.Inflate(l.slice(q[t],q[t+1]),{resize:!0,verify:!0}),h=j.decompress(),h=h.buffer,'Float32'===a.attributes.type?(h=new Float32Array(h),s=b(s,h)):'Int64'===a.attributes.type&&(h=new Int32Array(h),s=c(s,h));delete a['#text'],'Float32'===a.attributes.type?'binary'===a.attributes.format&&!d&&(s=s.filter(function(a,b){if(0!==b)return!0})):'Int64'===a.attributes.type&&'binary'===a.attributes.format&&(!d&&(s=s.filter(function(a,b){if(0!==b)return!0})),s=s.filter(function(a,b){if(1!==b%2)return!0}))}else{if('binary'===a.attributes.format&&!d){var h=e(a['#text']);h=h.slice(f).buffer}else if(a['#text'])var h=a['#text'].split(/\s+/).filter(function(a){if(''!==a)return a});else var h=new Int32Array(0).buffer;if(delete a['#text'],'Float32'===a.attributes.type)var s=new Float32Array(h);else if('Int32'===a.attributes.type)var s=new Int32Array(h);else if('Int64'===a.attributes.type){var s=new Int32Array(h);'binary'===a.attributes.format&&(s=s.filter(function(a,b){if(1!==b%2)return!0}))}}return s}var g=null;if(window.DOMParser)try{g=new DOMParser().parseFromString(a,'text/xml')}catch(a){g=null}else if(window.ActiveXObject)try{if(g=new ActiveXObject('Microsoft.XMLDOM'),g.async=!1,!g.loadXML())throw new Error(g.parseError.reason+g.parseError.srcText)}catch(a){g=null}else throw new Error('Cannot parse xml string!');var h=g.documentElement,k=d(h),l=[],m=[],n=[];if(k.PolyData){for(var o,p=k.PolyData.Piece,q=k.attributes.hasOwnProperty('compressor'),r=['PointData','Points','Strips','Polys'],t=0,u=r.length;t<u;){if(o=p[r[t]],o&&o.DataArray){if('[object Array]'===Object.prototype.toString.call(o.DataArray))var v=o.DataArray;else var v=[o.DataArray];for(var w=0,x=v.length;w<x;)'#text'in v[w]&&0<v[w]['#text'].length&&(v[w].text=f(v[w],q)),w++;switch(r[t]){case'PointData':var y=parseInt(p.attributes.NumberOfPoints),z=o.attributes.Normals;if(0<y)for(var A=0,i=v.length;A<i;A++)if(z===v[A].attributes.Name){var B=v[A].attributes.NumberOfComponents;m=new Float32Array(y*B),m.set(v[A].text,0)}break;case'Points':var y=parseInt(p.attributes.NumberOfPoints);if(0<y){var B=o.DataArray.attributes.NumberOfComponents;l=new Float32Array(y*B),l.set(o.DataArray.text,0)}break;case'Strips':var C=parseInt(p.attributes.NumberOfStrips);if(0<C){var D=new Int32Array(o.DataArray[0].text.length),E=new Int32Array(o.DataArray[1].text.length);D.set(o.DataArray[0].text,0),E.set(o.DataArray[1].text,0);var F=C+D.length;n=new Uint32Array(3*F-9*C);for(var G,H=0,A=0,i=C;A<i;A++){G=[];for(var I=0,s=E[A],J=0;I<s-J;I++)G.push(D[I]),0<A&&(J=E[A-1]);for(var K=0,s=E[A],J=0;K<s-J-2;K++)K%2?(n[H++]=G[K],n[H++]=G[K+2],n[H++]=G[K+1]):(n[H++]=G[K],n[H++]=G[K+1],n[H++]=G[K+2]),0<A&&(J=E[A-1])}}break;case'Polys':var j=parseInt(p.attributes.NumberOfPolys);if(0<j){var D=new Int32Array(o.DataArray[0].text.length),E=new Int32Array(o.DataArray[1].text.length);D.set(o.DataArray[0].text,0),E.set(o.DataArray[1].text,0);var F=j+D.length;n=new Uint32Array(3*F-9*j);for(var H=0,L=0,A=0,i=j,J=0;A<i;){for(var M=[],I=0,s=E[A];I<s-J;)M.push(D[L++]),I++;for(var K=1;K<s-J-1;)n[H++]=M[0],n[H++]=M[K],n[H++]=M[K+1],K++;A++,J=E[A-1]}}break;default:}}t++}var N=new THREE.BufferGeometry;return N.setIndex(new THREE.BufferAttribute(n,1)),N.addAttribute('position',new THREE.BufferAttribute(l,3)),m.length===l.length&&N.addAttribute('normal',new THREE.BufferAttribute(m,3)),N}}(d(a))}});</script><script>!function(a,t){"object"==("undefined"===typeof exports?"undefined":babelHelpers.typeof(exports))&&"object"==("undefined"===typeof module?"undefined":babelHelpers.typeof(module))?module.exports=t():"function"==typeof define&&define.amd?define("AMI",[],t):"object"==("undefined"===typeof exports?"undefined":babelHelpers.typeof(exports))?exports.AMI=t():a.AMI=t()}(this,function(){var a=Number.isNaN,l=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY,F=String.fromCharCode,b=Number.MAX_VALUE,P=Math.round,k=Math.atan2,Gn=Math.PI,S=Math.pow,T=Math.ceil,O=Math.sqrt,o=Math.LN2,i=Math.log,C=Math.max,U=Math.min,N=Math.abs,B=Math.floor;return function(a){function o(t){if(e[t])return e[t].exports;var n=e[t]={i:t,l:!1,exports:{}};return a[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}var e={};return o.m=a,o.c=e,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:a})},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(a,t){return Object.prototype.hasOwnProperty.call(a,t)},o.p="",o(o.s=84)}([function(Hn,t,e){"use strict";function n(){}function el(a,t){this.x=a||0,this.y=t||0}function tl(o,t,e,r,n,a,i,l,s,c){Object.defineProperty(this,"id",{value:La++}),this.uuid=rd.generateUUID(),this.name="",this.image=void 0===o?tl.DEFAULT_IMAGE:o,this.mipmaps=[],this.mapping=void 0===t?tl.DEFAULT_MAPPING:t,this.wrapS=void 0===e?Xc:e,this.wrapT=void 0===r?Xc:r,this.magFilter=void 0===n?Kc:n,this.minFilter=void 0===a?$c:a,this.anisotropy=void 0===s?1:s,this.format=void 0===i?td:i,this.type=void 0===l?ed:l,this.offset=new el(0,0),this.repeat=new el(1,1),this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0===c?wa:c,this.version=0,this.onUpdate=null}function al(a,t,e,o){this.x=a||0,this.y=t||0,this.z=e||0,this.w=void 0===o?1:o}function a(a,t,e){this.uuid=rd.generateUUID(),this.width=a,this.height=t,this.scissor=new al(0,0,a,t),this.scissorTest=!1,this.viewport=new al(0,0,a,t),void 0===(e=e||{}).minFilter&&(e.minFilter=Kc),this.texture=new tl(void 0,void 0,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.encoding),this.depthBuffer=void 0===e.depthBuffer||e.depthBuffer,this.stencilBuffer=void 0===e.stencilBuffer||e.stencilBuffer,this.depthTexture=void 0===e.depthTexture?null:e.depthTexture}function ol(o,t,e){a.call(this,o,t,e),this.activeCubeFace=0,this.activeMipMapLevel=0}function rl(a,t,e,o){this._x=a||0,this._y=t||0,this._z=e||0,this._w=void 0===o?1:o}function nl(a,t,e){this.x=a||0,this.y=t||0,this.z=e||0}function il(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],0<arguments.length&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function l(o,d,m,_,i,r,a,s,l,c,h,u){tl.call(this,null,r,a,s,l,c,_,i,h,u),this.image={data:o,width:d,height:m},this.magFilter=void 0===l?Yc:l,this.minFilter=void 0===c?Yc:c,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}function c(o,t,e,n,i,r,a,s,l,c){o=void 0===o?[]:o,t=void 0===t?To:t,tl.call(this,o,t,e,n,i,r,a,s,l,c),this.flipY=!1}function s(){this.seq=[],this.map={}}function r(l,t,e){var n=l[0];if(0>=n||0<n)return l;var i=t*e,r=ka[i];if(void 0===r&&(r=new Float32Array(i),ka[i]=r),0!==t){n.toArray(r,0);for(var o=1,a=0;o!==t;++o)a+=e,l[o].toArray(r,a)}return r}function d(a,t){var e=Oa[t];void 0===e&&(e=new Int32Array(t),Oa[t]=e);for(var o=0;o!==t;++o)e[o]=a.allocTextureUnit();return e}function p(a,t){a.uniform1f(this.addr,t)}function u(a,t){a.uniform1i(this.addr,t)}function m(a,t){void 0===t.x?a.uniform2fv(this.addr,t):a.uniform2f(this.addr,t.x,t.y)}function _(a,t){void 0===t.x?void 0===t.r?a.uniform3fv(this.addr,t):a.uniform3f(this.addr,t.r,t.g,t.b):a.uniform3f(this.addr,t.x,t.y,t.z)}function h(a,t){void 0===t.x?a.uniform4fv(this.addr,t):a.uniform4f(this.addr,t.x,t.y,t.z,t.w)}function g(a,t){a.uniformMatrix2fv(this.addr,!1,t.elements||t)}function f(a,t){void 0===t.elements?a.uniformMatrix3fv(this.addr,!1,t):(Ua.set(t.elements),a.uniformMatrix3fv(this.addr,!1,Ua))}function y(a,t){void 0===t.elements?a.uniformMatrix4fv(this.addr,!1,t):(Fa.set(t.elements),a.uniformMatrix4fv(this.addr,!1,Fa))}function x(a,t,e){var o=e.allocTextureUnit();a.uniform1i(this.addr,o),e.setTexture2D(t||Ra,o)}function v(a,t,e){var o=e.allocTextureUnit();a.uniform1i(this.addr,o),e.setTextureCube(t||Da,o)}function w(a,t){a.uniform2iv(this.addr,t)}function E(a,t){a.uniform3iv(this.addr,t)}function M(a,t){a.uniform4iv(this.addr,t)}function A(e){return 5126===e?p:35664===e?m:35665===e?_:35666===e?h:35674===e?g:35675===e?f:35676===e?y:35678===e||36198===e?x:35680===e?v:5124===e||35670===e?u:35667===e||35671===e?w:35668===e||35672===e?E:35669===e||35673===e?M:void 0}function I(a,t){a.uniform1fv(this.addr,t)}function L(a,t){a.uniform1iv(this.addr,t)}function R(a,t){a.uniform2fv(this.addr,r(t,this.size,2))}function D(a,t){a.uniform3fv(this.addr,r(t,this.size,3))}function ll(a,t){a.uniform4fv(this.addr,r(t,this.size,4))}function sl(a,t){a.uniformMatrix2fv(this.addr,!1,r(t,this.size,4))}function F(a,t){a.uniformMatrix3fv(this.addr,!1,r(t,this.size,9))}function cl(a,t){a.uniformMatrix4fv(this.addr,!1,r(t,this.size,16))}function dl(a,t,e){var n=t.length,i=d(e,n);a.uniform1iv(this.addr,i);for(var r=0;r!==n;++r)e.setTexture2D(t[r]||Ra,i[r])}function pl(a,t,e){var n=t.length,i=d(e,n);a.uniform1iv(this.addr,i);for(var r=0;r!==n;++r)e.setTextureCube(t[r]||Da,i[r])}function z(e){return 5126===e?I:35664===e?R:35665===e?D:35666===e?ll:35674===e?sl:35675===e?F:35676===e?cl:35678===e?dl:35680===e?pl:5124===e||35670===e?L:35667===e||35671===e?w:35668===e||35672===e?E:35669===e||35673===e?M:void 0}function G(a,t,e){this.id=a,this.addr=e,this.setValue=A(t.type)}function j(a,t,e){this.id=a,this.addr=e,this.size=t.size,this.setValue=z(t.type)}function H(e){this.id=e,s.call(this)}function V(a,t){a.seq.push(t),a.map[t.id]=t}function W(d,t,e){var n=d.name,i=n.length;for(Na.lastIndex=0;;){var r=Na.exec(n),o=Na.lastIndex,a=r[1],s="]"===r[2],l=r[3];if(s&&(a|=0),void 0===l||"["===l&&o+2===i){V(e,void 0===l?new G(a,d,t):new j(a,d,t));break}var c=e.map[a];void 0===c&&V(e,c=new H(a)),e=c}}function q(l,t,e){s.call(this),this.renderer=e;for(var n=l.getProgramParameter(t,l.ACTIVE_UNIFORMS),i=0;i<n;++i){var r=l.getActiveUniform(t,i),o=r.name;W(r,l.getUniformLocation(t,o),this)}}function X(a,t,e){return void 0===t&&void 0===e?this.set(a):this.setRGB(a,t,e)}function Y(a,t){this.min=void 0===a?new el(1/0,1/0):a,this.max=void 0===t?new el(-1/0,-1/0):t}function ul(r,h,e,t,g){function o(){var o=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),t=new Uint16Array([0,1,2,0,2,3]);n=h.createBuffer(),l=h.createBuffer(),h.bindBuffer(h.ARRAY_BUFFER,n),h.bufferData(h.ARRAY_BUFFER,o,h.STATIC_DRAW),h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,l),h.bufferData(h.ELEMENT_ARRAY_BUFFER,t,h.STATIC_DRAW),f=h.createTexture(),m=h.createTexture(),e.bindTexture(h.TEXTURE_2D,f),h.texImage2D(h.TEXTURE_2D,0,h.RGB,16,16,0,h.RGB,h.UNSIGNED_BYTE,null),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.CLAMP_TO_EDGE),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.CLAMP_TO_EDGE),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.NEAREST),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.NEAREST),e.bindTexture(h.TEXTURE_2D,m),h.texImage2D(h.TEXTURE_2D,0,h.RGBA,16,16,0,h.RGBA,h.UNSIGNED_BYTE,null),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.CLAMP_TO_EDGE),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.CLAMP_TO_EDGE),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.NEAREST),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.NEAREST),s={vertexShader:"uniform lowp int renderType;\nuniform vec3 screenPosition;\nuniform vec2 scale;\nuniform float rotation;\nuniform sampler2D occlusionMap;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nvUV = uv;\nvec2 pos = position;\nif ( renderType == 2 ) {\nvec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );\nvVisibility =        visibility.r / 9.0;\nvVisibility *= 1.0 - visibility.g / 9.0;\nvVisibility *=       visibility.b / 9.0;\nvVisibility *= 1.0 - visibility.a / 9.0;\npos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\npos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\n}\ngl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\n}",fragmentShader:"uniform lowp int renderType;\nuniform sampler2D map;\nuniform float opacity;\nuniform vec3 color;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nif ( renderType == 0 ) {\ngl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );\n} else if ( renderType == 1 ) {\ngl_FragColor = texture2D( map, vUV );\n} else {\nvec4 texture = texture2D( map, vUV );\ntexture.a *= opacity * vVisibility;\ngl_FragColor = texture;\ngl_FragColor.rgb *= color;\n}\n}"},c=a(s),p={vertex:h.getAttribLocation(c,"position"),uv:h.getAttribLocation(c,"uv")},d={renderType:h.getUniformLocation(c,"renderType"),map:h.getUniformLocation(c,"map"),occlusionMap:h.getUniformLocation(c,"occlusionMap"),opacity:h.getUniformLocation(c,"opacity"),color:h.getUniformLocation(c,"color"),scale:h.getUniformLocation(c,"scale"),rotation:h.getUniformLocation(c,"rotation"),screenPosition:h.getUniformLocation(c,"screenPosition")}}function a(e){var t=h.createProgram(),o=h.createShader(h.FRAGMENT_SHADER),n=h.createShader(h.VERTEX_SHADER),r="precision "+g.precision+" float;\n";return h.shaderSource(o,r+e.fragmentShader),h.shaderSource(n,r+e.vertexShader),h.compileShader(o),h.compileShader(n),h.attachShader(t,o),h.attachShader(t,n),h.linkProgram(t),t}var n,l,s,c,p,d,f,m;this.render=function(a,r,i,s){if(0!==a.length){var u=new nl,_=s.w/s.z,g=.5*s.z,y=.5*s.w,b=16/s.w,v=new el(b*_,b),x=new nl(1,1,0),S=new el(1,1),w=new Y;w.min.set(s.x,s.y),w.max.set(s.x+(s.z-16),s.y+(s.w-16)),void 0===c&&o(),e.useProgram(c),e.initAttributes(),e.enableAttribute(p.vertex),e.enableAttribute(p.uv),e.disableUnusedAttributes(),h.uniform1i(d.occlusionMap,0),h.uniform1i(d.map,1),h.bindBuffer(h.ARRAY_BUFFER,n),h.vertexAttribPointer(p.vertex,2,h.FLOAT,!1,16,0),h.vertexAttribPointer(p.uv,2,h.FLOAT,!1,16,8),h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,l),e.disable(h.CULL_FACE),e.buffers.depth.setMask(!1);for(var E=0,T=a.length;E<T;E++){b=16/s.w,v.set(b*_,b);var M=a[E];if(u.set(M.matrixWorld.elements[12],M.matrixWorld.elements[13],M.matrixWorld.elements[14]),u.applyMatrix4(i.matrixWorldInverse),u.applyMatrix4(i.projectionMatrix),x.copy(u),S.x=s.x+x.x*g+g-8,S.y=s.y+x.y*y+y-8,!0===w.containsPoint(S)){e.activeTexture(h.TEXTURE0),e.bindTexture(h.TEXTURE_2D,null),e.activeTexture(h.TEXTURE1),e.bindTexture(h.TEXTURE_2D,f),h.copyTexImage2D(h.TEXTURE_2D,0,h.RGB,S.x,S.y,16,16,0),h.uniform1i(d.renderType,0),h.uniform2f(d.scale,v.x,v.y),h.uniform3f(d.screenPosition,x.x,x.y,x.z),e.disable(h.BLEND),e.enable(h.DEPTH_TEST),h.drawElements(h.TRIANGLES,6,h.UNSIGNED_SHORT,0),e.activeTexture(h.TEXTURE0),e.bindTexture(h.TEXTURE_2D,m),h.copyTexImage2D(h.TEXTURE_2D,0,h.RGBA,S.x,S.y,16,16,0),h.uniform1i(d.renderType,1),e.disable(h.DEPTH_TEST),e.activeTexture(h.TEXTURE1),e.bindTexture(h.TEXTURE_2D,f),h.drawElements(h.TRIANGLES,6,h.UNSIGNED_SHORT,0),M.positionScreen.copy(x),M.customUpdateCallback?M.customUpdateCallback(M):M.updateLensFlares(),h.uniform1i(d.renderType,2),e.enable(h.BLEND);for(var P=0,A=M.lensFlares.length,C;P<A;P++)C=M.lensFlares[P],.001<C.opacity&&.001<C.scale&&(x.x=C.x,x.y=C.y,x.z=C.z,b=C.size*C.scale/s.w,v.x=b*_,v.y=b,h.uniform3f(d.screenPosition,x.x,x.y,x.z),h.uniform2f(d.scale,v.x,v.y),h.uniform1f(d.rotation,C.rotation),h.uniform1f(d.opacity,C.opacity),h.uniform3f(d.color,C.color.r,C.color.g,C.color.b),e.setBlending(C.blending,C.blendEquation,C.blendSrc,C.blendDst),t.setTexture2D(C.texture,1),h.drawElements(h.TRIANGLES,6,h.UNSIGNED_SHORT,0))}}e.enable(h.CULL_FACE),e.enable(h.DEPTH_TEST),e.buffers.depth.setMask(!0),e.reset()}}}function Z(o,t,e,n,i,r,a,s,l){tl.call(this,o,t,e,n,i,r,a,s,l),this.needsUpdate=!0}function J(b,P,e,t,c){function n(){var e=new Float32Array([-0.5,-0.5,0,0,0.5,-0.5,1,0,0.5,0.5,1,1,-0.5,0.5,0,1]),t=new Uint16Array([0,1,2,0,2,3]);g=P.createBuffer(),l=P.createBuffer(),P.bindBuffer(P.ARRAY_BUFFER,g),P.bufferData(P.ARRAY_BUFFER,e,P.STATIC_DRAW),P.bindBuffer(P.ELEMENT_ARRAY_BUFFER,l),P.bufferData(P.ELEMENT_ARRAY_BUFFER,t,P.STATIC_DRAW),u=o(),p={position:P.getAttribLocation(u,"position"),uv:P.getAttribLocation(u,"uv")},d={uvOffset:P.getUniformLocation(u,"uvOffset"),uvScale:P.getUniformLocation(u,"uvScale"),rotation:P.getUniformLocation(u,"rotation"),scale:P.getUniformLocation(u,"scale"),color:P.getUniformLocation(u,"color"),map:P.getUniformLocation(u,"map"),opacity:P.getUniformLocation(u,"opacity"),modelViewMatrix:P.getUniformLocation(u,"modelViewMatrix"),projectionMatrix:P.getUniformLocation(u,"projectionMatrix"),fogType:P.getUniformLocation(u,"fogType"),fogDensity:P.getUniformLocation(u,"fogDensity"),fogNear:P.getUniformLocation(u,"fogNear"),fogFar:P.getUniformLocation(u,"fogFar"),fogColor:P.getUniformLocation(u,"fogColor"),alphaTest:P.getUniformLocation(u,"alphaTest")};var a=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");a.width=8,a.height=8;var n=a.getContext("2d");n.fillStyle="white",n.fillRect(0,0,8,8),f=new Z(a)}function o(){var e=P.createProgram(),t=P.createShader(P.VERTEX_SHADER),a=P.createShader(P.FRAGMENT_SHADER);return P.shaderSource(t,["precision "+c.precision+" float;","#define SHADER_NAME SpriteMaterial","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","vUV = uvOffset + uv * uvScale;","vec2 alignedPosition = position * scale;","vec2 rotatedPosition;","rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","vec4 finalPosition;","finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","finalPosition.xy += rotatedPosition;","finalPosition = projectionMatrix * finalPosition;","gl_Position = finalPosition;","}"].join("\n")),P.shaderSource(a,["precision "+c.precision+" float;","#define SHADER_NAME SpriteMaterial","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","void main() {","vec4 texture = texture2D( map, vUV );","if ( texture.a < alphaTest ) discard;","gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","if ( fogType > 0 ) {","float depth = gl_FragCoord.z / gl_FragCoord.w;","float fogFactor = 0.0;","if ( fogType == 1 ) {","fogFactor = smoothstep( fogNear, fogFar, depth );","} else {","const float LOG2 = 1.442695;","fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );","fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","}","gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );","}","}"].join("\n")),P.compileShader(t),P.compileShader(a),P.attachShader(e,t),P.attachShader(e,a),P.linkProgram(e),e}function i(a,t){return a.renderOrder===t.renderOrder?a.z===t.z?t.id-a.id:t.z-a.z:a.renderOrder-t.renderOrder}var r=new nl,s=new rl,_=new nl,g,l,u,p,d,f;this.render=function(o,m,a){if(0!==o.length){void 0===u&&n(),e.useProgram(u),e.initAttributes(),e.enableAttribute(p.position),e.enableAttribute(p.uv),e.disableUnusedAttributes(),e.disable(P.CULL_FACE),e.enable(P.BLEND),P.bindBuffer(P.ARRAY_BUFFER,g),P.vertexAttribPointer(p.position,2,P.FLOAT,!1,16,0),P.vertexAttribPointer(p.uv,2,P.FLOAT,!1,16,8),P.bindBuffer(P.ELEMENT_ARRAY_BUFFER,l),P.uniformMatrix4fv(d.projectionMatrix,!1,a.projectionMatrix.elements),e.activeTexture(P.TEXTURE0),P.uniform1i(d.map,0);var c=0,h=0,y=m.fog;y?(P.uniform3f(d.fogColor,y.color.r,y.color.g,y.color.b),y.isFog?(P.uniform1f(d.fogNear,y.near),P.uniform1f(d.fogFar,y.far),P.uniform1i(d.fogType,1),c=1,h=1):y.isFogExp2&&(P.uniform1f(d.fogDensity,y.density),P.uniform1i(d.fogType,2),c=2,h=2)):(P.uniform1i(d.fogType,0),c=0,h=0);for(var v=0,w=o.length;v<w;v++)(S=o[v]).modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,S.matrixWorld),S.z=-S.modelViewMatrix.elements[14];o.sort(i);for(var x=[],v=0,w=o.length;v<w;v++){var S=o[v],E=S.material;if(!1!==E.visible){S.onBeforeRender(b,m,a,void 0,E,void 0),P.uniform1f(d.alphaTest,E.alphaTest),P.uniformMatrix4fv(d.modelViewMatrix,!1,S.modelViewMatrix.elements),S.matrixWorld.decompose(r,s,_),x[0]=_.x,x[1]=_.y;var M=0;m.fog&&E.fog&&(M=h),c!==M&&(P.uniform1i(d.fogType,M),c=M),null===E.map?(P.uniform2f(d.uvOffset,0,0),P.uniform2f(d.uvScale,1,1)):(P.uniform2f(d.uvOffset,E.map.offset.x,E.map.offset.y),P.uniform2f(d.uvScale,E.map.repeat.x,E.map.repeat.y)),P.uniform1f(d.opacity,E.opacity),P.uniform3f(d.color,E.color.r,E.color.g,E.color.b),P.uniform1f(d.rotation,E.rotation),P.uniform2fv(d.scale,x),e.setBlending(E.blending,E.blendEquation,E.blendSrc,E.blendDst,E.blendEquationAlpha,E.blendSrcAlpha,E.blendDstAlpha,E.premultipliedAlpha),e.buffers.depth.setTest(E.depthTest),e.buffers.depth.setMask(E.depthWrite),t.setTexture2D(E.map||f,0),P.drawElements(P.TRIANGLES,6,P.UNSIGNED_SHORT,0),S.onAfterRender(b,m,a,void 0,E,void 0)}}e.enable(P.CULL_FACE),e.reset()}}}function K(){Object.defineProperty(this,"id",{value:Va++}),this.uuid=rd.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=Dc,this.side=Or,this.flatShading=!1,this.vertexColors=Nr,this.opacity=1,this.transparent=!1,this.blendSrc=no,this.blendDst=io,this.blendEquation=Nc,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=po,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.overdraw=0,this.visible=!0,this.userData={},this.needsUpdate=!0}function Q(e){K.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}function ml(e){K.call(this),this.type="MeshDepthMaterial",this.depthPacking=Pa,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(e)}function _l(e){K.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new nl,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.lights=!1,this.setValues(e)}function hl(a,t){this.min=void 0===a?new nl(1/0,1/0,1/0):a,this.max=void 0===t?new nl(-1/0,-1/0,-1/0):t}function it(a,t){this.center=void 0===a?new nl:a,this.radius=void 0===t?0:t}function rt(){this.elements=[1,0,0,0,1,0,0,0,1],0<arguments.length&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}function ot(a,t){this.normal=void 0===a?new nl(1,0,0):a,this.constant=void 0===t?0:t}function gl(a,t,e,n,i,r){this.planes=[void 0===a?new ot:a,void 0===t?new ot:t,void 0===e?new ot:e,void 0===n?new ot:n,void 0===i?new ot:i,void 0===r?new ot:r]}function st(R,t,e){function r(t,e,n,b,r,o){var a=t.geometry,s=null,l=_,c=t.customDepthMaterial;if(n&&(l=g,c=t.customDistanceMaterial),c)s=c;else{var h=!1;e.morphTargets&&(a&&a.isBufferGeometry?h=a.morphAttributes&&a.morphAttributes.position&&0<a.morphAttributes.position.length:a&&a.isGeometry&&(h=a.morphTargets&&0<a.morphTargets.length)),t.isSkinnedMesh&&!1===e.skinning&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",t);var u=t.isSkinnedMesh&&e.skinning,v=0;h&&(v|=i),u&&(v|=m),s=l[v]}if(R.localClippingEnabled&&!0===e.clipShadows&&0!==e.clippingPlanes.length){var d=s.uuid,f=e.uuid,w=p[d];void 0===w&&(w={},p[d]=w);var y=w[f];void 0===y&&(y=s.clone(),w[f]=y),s=y}s.visible=e.visible,s.wireframe=e.wireframe;var x=e.side;return E.renderSingleSided&&x==Lc&&(x=Or),E.renderReverseSided&&(x===Or?x=Fr:x===Fr&&(x=Or)),s.side=x,s.clipShadows=e.clipShadows,s.clippingPlanes=e.clippingPlanes,s.clipIntersection=e.clipIntersection,s.wireframeLinewidth=e.wireframeLinewidth,s.linewidth=e.linewidth,n&&s.isMeshDistanceMaterial&&(s.referencePosition.copy(b),s.nearDistance=r,s.farDistance=o),s}function u(e,n,i,a){if(!1!==e.visible){if(e.layers.test(n.layers)&&(e.isMesh||e.isLine||e.isPoints)&&e.castShadow&&(!e.frustumCulled||o.intersectsObject(e))){e.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,e.matrixWorld);var l=t.update(e),s=e.material;if(Array.isArray(s))for(var c=l.groups,m=0,p=c.length;m<p;m++){var d=c[m],h=s[d.materialIndex];h&&h.visible&&(_=r(e,h,a,D,i.near,i.far),R.renderBufferDirect(i,null,l,_,e,d))}else if(s.visible){var _=r(e,s,a,D,i.near,i.far);R.renderBufferDirect(i,null,l,_,e,null)}}for(var g=e.children,f=0,y=g.length;f<y;f++)u(g[f],n,i,a)}}for(var o=new gl,l=new il,s=new el,c=new el(e,e),d=new nl,D=new nl,i=1,m=2,_=[,,,,],g=[,,,,],p={},n=[new nl(1,0,0),new nl(-1,0,0),new nl(0,0,1),new nl(0,0,-1),new nl(0,1,0),new nl(0,-1,0)],h=[new nl(0,1,0),new nl(0,1,0),new nl(0,1,0),new nl(0,1,0),new nl(0,0,1),new nl(0,0,-1)],f=[new al,new al,new al,new al,new al,new al],y=0;y!==1+(i|m);++y){var b=0!=(y&i),x=0!=(y&m),v=new ml({depthPacking:Ia,morphTargets:b,skinning:x});_[y]=v;var S=new _l({morphTargets:b,skinning:x});g[y]=S}var E=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Dr,this.renderReverseSided=!0,this.renderSingleSided=!0,this.render=function(t,e,p){if(!1!==E.enabled&&(!1!==E.autoUpdate||!1!==E.needsUpdate)&&0!==t.length){var i=R.context,r=R.state;r.disable(i.BLEND),r.buffers.color.setClear(1,1,1,1),r.buffers.depth.setTest(!0),r.setScissorTest(!1);for(var m=0,x=t.length,_;m<x;m++){var S=t[m],g=S.shadow,y=S&&S.isPointLight;if(void 0!==g){var v=g.camera;if(s.copy(g.mapSize),s.min(c),y){var b=s.x,w=s.y;f[0].set(2*b,w,b,w),f[1].set(0,w,b,w),f[2].set(3*b,w,b,w),f[3].set(b,w,b,w),f[4].set(3*b,0,b,w),f[5].set(b,0,b,w),s.x*=4,s.y*=2}if(null===g.map){g.map=new a(s.x,s.y,{minFilter:Yc,magFilter:Yc,format:td}),g.map.texture.name=S.name+".shadowMap",v.updateProjectionMatrix()}g.isSpotLightShadow&&g.update(S);var T=g.map,M=g.matrix;D.setFromMatrixPosition(S.matrixWorld),v.position.copy(D),y?(_=6,M.makeTranslation(-D.x,-D.y,-D.z)):(_=1,d.setFromMatrixPosition(S.target.matrixWorld),v.lookAt(d),v.updateMatrixWorld(),M.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),M.multiply(v.projectionMatrix),M.multiply(v.matrixWorldInverse)),R.setRenderTarget(T),R.clear();for(var P=0;P<_;P++){if(y){d.copy(v.position),d.add(n[P]),v.up.copy(h[P]),v.lookAt(d),v.updateMatrixWorld();var C=f[P];r.viewport(C)}l.multiplyMatrices(v.projectionMatrix,v.matrixWorldInverse),o.setFromMatrix(l),u(e,p,v,y)}}else console.warn("THREE.WebGLShadowMap:",S,"has no shadow.")}E.needsUpdate=!1}}}function lt(l){function a(t,s){var n=t.array,i=t.dynamic?l.DYNAMIC_DRAW:l.STATIC_DRAW,r=l.createBuffer();l.bindBuffer(s,r),l.bufferData(s,n,i),t.onUploadCallback();var c=l.FLOAT;return n instanceof Float32Array?c=l.FLOAT:n instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):n instanceof Uint16Array?c=l.UNSIGNED_SHORT:n instanceof Int16Array?c=l.SHORT:n instanceof Uint32Array?c=l.UNSIGNED_INT:n instanceof Int32Array?c=l.INT:n instanceof Int8Array?c=l.BYTE:n instanceof Uint8Array&&(c=l.UNSIGNED_BYTE),{buffer:r,type:c,bytesPerElement:n.BYTES_PER_ELEMENT,version:t.version}}function e(t,e,a){var i=e.array,r=e.updateRange;l.bindBuffer(a,t),!1===e.dynamic?l.bufferData(a,i,l.STATIC_DRAW):-1===r.count?l.bufferSubData(a,0,i):0===r.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(l.bufferSubData(a,r.offset*i.BYTES_PER_ELEMENT,i.subarray(r.offset,r.offset+r.count)),r.count=-1)}var s={};return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),s[e.uuid]},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);var e=s[t.uuid];e&&(l.deleteBuffer(e.buffer),delete s[t.uuid])},update:function(n,t){n.isInterleavedBufferAttribute&&(n=n.data);var r=s[n.uuid];void 0===r?s[n.uuid]=a(n,t):r.version<n.version&&(e(r.buffer,n,t),r.version=n.version)}}}function at(a,t,e,o){this._x=a||0,this._y=t||0,this._z=e||0,this._order=o||at.DefaultOrder}function ct(){this.mask=1}function ut(){Object.defineProperty(this,"id",{value:Wa++}),this.uuid=rd.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=ut.DefaultUp.clone();var a=new nl,o=new at,r=new rl,l=new nl(1,1,1);o.onChange(function(){r.setFromEuler(o,!1)}),r.onChange(function(){o.setFromQuaternion(r,void 0,!1)}),Object.defineProperties(this,{position:{enumerable:!0,value:a},rotation:{enumerable:!0,value:o},quaternion:{enumerable:!0,value:r},scale:{enumerable:!0,value:l},modelViewMatrix:{value:new il},normalMatrix:{value:new rt}}),this.matrix=new il,this.matrixWorld=new il,this.matrixAutoUpdate=ut.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new ct,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function pt(){ut.call(this),this.type="Camera",this.matrixWorldInverse=new il,this.projectionMatrix=new il}function ht(a,t,e,n,i,r){pt.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=a,this.right=t,this.top=e,this.bottom=n,this.near=void 0===i?.1:i,this.far=void 0===r?2e3:r,this.updateProjectionMatrix()}function fl(a,t,e,o){pt.call(this),this.type="PerspectiveCamera",this.fov=void 0===a?50:a,this.zoom=1,this.near=void 0===e?.1:e,this.far=void 0===o?2e3:o,this.focus=10,this.aspect=void 0===t?1:t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function yl(a,t,e,n,i,r){this.a=a,this.b=t,this.c=e,this.normal=n&&n.isVector3?n:new nl,this.vertexNormals=Array.isArray(n)?n:[],this.color=i&&i.isColor?i:new X,this.vertexColors=Array.isArray(i)?i:[],this.materialIndex=void 0===r?0:r}function _t(){return qa++}function gt(){Object.defineProperty(this,"id",{value:_t()}),this.uuid=rd.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function yt(a,t,e){if(Array.isArray(a))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.uuid=rd.generateUUID(),this.name="",this.array=a,this.itemSize=t,this.count=void 0===a?0:a.length/t,this.normalized=!0===e,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=function(){},this.version=0}function vt(a,t){yt.call(this,new Int8Array(a),t)}function bt(a,t){yt.call(this,new Uint8Array(a),t)}function wt(a,t){yt.call(this,new Uint8ClampedArray(a),t)}function xt(a,t){yt.call(this,new Int16Array(a),t)}function St(a,t){yt.call(this,new Uint16Array(a),t)}function Et(a,t){yt.call(this,new Int32Array(a),t)}function Mt(a,t){yt.call(this,new Uint32Array(a),t)}function Tt(a,t){yt.call(this,new Float32Array(a),t)}function At(a,t){yt.call(this,new Float64Array(a),t)}function Pt(){this.indices=[],this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function It(a){if(0===a.length)return-1/0;for(var t=a[0],e=1,o=a.length;e<o;++e)a[e]>t&&(t=a[e]);return t}function bl(){Object.defineProperty(this,"id",{value:_t()}),this.uuid=rd.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0}}function Ct(a,l,s,c,d,p){gt.call(this),this.type="BoxGeometry",this.parameters={width:a,height:l,depth:s,widthSegments:c,heightSegments:d,depthSegments:p},this.fromBufferGeometry(new Lt(a,l,s,c,d,p)),this.mergeVertices()}function Lt(m,_,h,g,y,b){function x(u,t,e,n,i,r,o,h,m,_,g){var f=m+1,y=0,x=0,w=new nl,E,v;for(v=0;v<_+1;v++){var b=v*(o/_)-o/2;for(E=0;E<f;E++){var T=E*(r/m)-r/2;w[u]=T*n,w[t]=b*i,w[e]=h/2,l.push(w.x,w.y,w.z),w[u]=0,w[t]=0,w[e]=0<h?1:-1,s.push(w.x,w.y,w.z),c.push(E/m),c.push(1-v/_),y+=1}}for(v=0;v<_;v++)for(E=0;E<m;E++){var M=p+E+f*v,P=p+E+f*(v+1),C=p+(E+1)+f*(v+1),A=p+(E+1)+f*v;a.push(M,P,A),a.push(P,C,A),x+=6}S.addGroup(d,x,g),d+=x,p+=y}bl.call(this),this.type="BoxBufferGeometry",this.parameters={width:m,height:_,depth:h,widthSegments:g,heightSegments:y,depthSegments:b};var S=this;g=B(g)||1,y=B(y)||1;var a=[],l=[],s=[],c=[],p=0,d=0;x("z","y","x",-1,-1,h,_,m,b=B(b)||1,y,0),x("z","y","x",1,-1,h,_,-m,b,y,1),x("x","z","y",1,1,m,h,_,g,b,2),x("x","z","y",1,-1,m,h,-_,g,b,3),x("x","y","z",1,-1,m,_,h,g,y,4),x("x","y","z",-1,-1,m,_,-h,g,y,5),this.setIndex(a),this.addAttribute("position",new Tt(l,3)),this.addAttribute("normal",new Tt(s,3)),this.addAttribute("uv",new Tt(c,2))}function xl(a,o,r,l){gt.call(this),this.type="PlaneGeometry",this.parameters={width:a,height:o,widthSegments:r,heightSegments:l},this.fromBufferGeometry(new vl(a,o,r,l)),this.mergeVertices()}function vl(a,s,d,p){bl.call(this),this.type="PlaneBufferGeometry",this.parameters={width:a,height:s,widthSegments:d,heightSegments:p};var u=B(d)||1,l=B(p)||1,c=u+1,h=[],f=[],m=[],_=[],g,r;for(r=0;r<l+1;r++){var o=r*(s/l)-s/2;for(g=0;g<c;g++){var E=g*(a/u)-a/2;f.push(E,-o,0),m.push(0,0,1),_.push(g/u),_.push(1-r/l)}}for(r=0;r<l;r++)for(g=0;g<u;g++){var v=g+c*r,b=g+c*(r+1),w=g+1+c*(r+1),x=g+1+c*r;h.push(v,b,x),h.push(b,w,x)}this.setIndex(h),this.addAttribute("position",new Tt(f,3)),this.addAttribute("normal",new Tt(m,3)),this.addAttribute("uv",new Tt(_,2))}function Sl(e){K.call(this),this.type="MeshBasicMaterial",this.color=new X(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=yo,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(e)}function wl(a,t){this.origin=void 0===a?new nl:a,this.direction=void 0===t?new nl:t}function Ut(a,t){this.start=void 0===a?new nl:a,this.end=void 0===t?new nl:t}function Nt(a,t,e){this.a=void 0===a?new nl:a,this.b=void 0===t?new nl:t,this.c=void 0===e?new nl:e}function Bt(a,t){ut.call(this),this.type="Mesh",this.geometry=void 0===a?new bl:a,this.material=void 0===t?new Sl({color:16777215*Math.random()}):t,this.drawMode=od,this.updateMorphTargets()}function El(d,p,t,e){function n(a,t){p.buffers.color.setClear(a.r,a.g,a.b,t,e)}var r=new X(0),l=0,c,o,a;return{getClearColor:function(){return r},setClearColor:function(a,t){r.set(a),n(r,l=void 0===t?1:t)},getClearAlpha:function(){return l},setClearAlpha:function(e){n(r,l=e)},render:function(s,e,i,m){var u=e.background;null===u?n(r,l):u&&u.isColor&&(n(u,1),m=!0),(d.autoClear||m)&&d.clear(d.autoClearColor,d.autoClearDepth,d.autoClearStencil),u&&u.isCubeTexture?(void 0===a&&((a=new Bt(new Lt(1,1,1),new Q({uniforms:Ha.cube.uniforms,vertexShader:Ha.cube.vertexShader,fragmentShader:Ha.cube.fragmentShader,side:Fr,depthTest:!0,depthWrite:!1,polygonOffset:!0,fog:!1}))).geometry.removeAttribute("normal"),a.geometry.removeAttribute("uv"),a.onBeforeRender=function(a,t,e){var o=e.far;this.matrixWorld.makeScale(o,o,o),this.matrixWorld.copyPosition(e.matrixWorld),this.material.polygonOffsetUnits=10*o},t.update(a.geometry)),a.material.uniforms.tCube.value=u,s.push(a,a.geometry,a.material,0,null)):u&&u.isTexture&&(void 0===c&&(c=new ht(-1,1,1,-1,0,1),o=new Bt(new vl(2,2),new Sl({depthTest:!1,depthWrite:!1,fog:!1})),t.update(o.geometry)),o.material.map=u,d.renderBufferDirect(c,null,o.geometry,o.material,o,null))}}}function Gt(a,t){return a.renderOrder===t.renderOrder?a.program&&t.program&&a.program!==t.program?a.program.id-t.program.id:a.material.id===t.material.id?a.z===t.z?a.id-t.id:a.z-t.z:a.material.id-t.material.id:a.renderOrder-t.renderOrder}function jt(a,t){return a.renderOrder===t.renderOrder?a.z===t.z?a.id-t.id:t.z-a.z:a.renderOrder-t.renderOrder}function Ht(){var d=[],t=0,e=[],p=[];return{opaque:e,transparent:p,init:function(){t=0,e.length=0,p.length=0},push:function(n,i,u,m,_){var h=d[t];void 0===h?(h={id:n.id,object:n,geometry:i,material:u,program:u.program,renderOrder:n.renderOrder,z:m,group:_},d[t]=h):(h.id=n.id,h.object=n,h.geometry=i,h.material=u,h.program=u.program,h.renderOrder=n.renderOrder,h.z=m,h.group=_),(!0===u.transparent?p:e).push(h),t++},sort:function(){1<e.length&&e.sort(Gt),1<p.length&&p.sort(jt)}}}function Tl(){var a={};return{get:function(t,e){var o=t.id+","+e.id,n=a[o];return void 0===n&&(n=new Ht,a[o]=n),n},dispose:function(){a={}}}}function Vt(a,t){return N(t[1])-N(a[1])}function Wt(_){var t={},e=new Float32Array(8);return{update:function(n,i,r,o){var a=n.morphTargetInfluences,s=a.length,l=t[i.id];if(void 0===l){for(l=[],u=0;u<s;u++)l[u]=[u,0];t[i.id]=l}for(var c=r.morphTargets&&i.morphAttributes.position,h=r.morphNormals&&i.morphAttributes.normal,u=0;u<s;u++)0!==(p=l[u])[1]&&(c&&i.removeAttribute("morphTarget"+u),h&&i.removeAttribute("morphNormal"+u));for(u=0;u<s;u++)(p=l[u])[0]=u,p[1]=a[u];for(l.sort(Vt),u=0;8>u;u++){var p=l[u];if(p){var d=p[0],g=p[1];if(g){c&&i.addAttribute("morphTarget"+u,c[d]),h&&i.addAttribute("morphNormal"+u,h[d]),e[u]=g;continue}}e[u]=0}o.getUniforms().setValue(_,"morphTargetInfluences",e)}}}function Xt(d,t,p){var n,i,r;this.setMode=function(e){n=e},this.setIndex=function(e){i=e.type,r=e.bytesPerElement},this.render=function(t,e){d.drawElements(n,e,i,t*r),p.calls++,p.vertices+=e,n===d.TRIANGLES?p.faces+=e/3:n===d.POINTS&&(p.points+=e)},this.renderInstances=function(e,a,o){var l=t.get("ANGLE_instanced_arrays");null===l?console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays."):(l.drawElementsInstancedANGLE(n,o,i,a*r,e.maxInstancedCount),p.calls++,p.vertices+=o*e.maxInstancedCount,n===d.TRIANGLES?p.faces+=e.maxInstancedCount*o/3:n===d.POINTS&&(p.points+=e.maxInstancedCount*o))}}function Yt(c,t,d){var n;this.setMode=function(e){n=e},this.render=function(t,e){c.drawArrays(n,t,e),d.calls++,d.vertices+=e,n===c.TRIANGLES?d.faces+=e/3:n===c.POINTS&&(d.points+=e)},this.renderInstances=function(e,r,o){var a=t.get("ANGLE_instanced_arrays");if(null!==a){var i=e.attributes.position;i.isInterleavedBufferAttribute?(o=i.data.count,a.drawArraysInstancedANGLE(n,0,o,e.maxInstancedCount)):a.drawArraysInstancedANGLE(n,r,o,e.maxInstancedCount),d.calls++,d.vertices+=o*e.maxInstancedCount,n===c.TRIANGLES?d.faces+=e.maxInstancedCount*o/3:n===c.POINTS&&(d.points+=e.maxInstancedCount*o)}else console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.")}}function Zt(m,_,d){function n(o){var t=o.target,a=i[t.id];for(var r in null!==a.index&&_.remove(a.index),a.attributes)_.remove(a.attributes[r]);t.removeEventListener("dispose",n),delete i[t.id];var l=e[t.id];l&&(_.remove(l),delete e[t.id]),(l=e[a.id])&&(_.remove(l),delete e[a.id]),d.geometries--}var i={},e={};return{get:function(a,t){var e=i[t.id];return e||(t.addEventListener("dispose",n),t.isBufferGeometry?e=t:t.isGeometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=new bl().setFromObject(a)),e=t._bufferGeometry),i[t.id]=e,d.geometries++,e)},update:function(e){var t=e.index,n=e.attributes;for(var r in null!==t&&_.update(t,m.ELEMENT_ARRAY_BUFFER),n)_.update(n[r],m.ARRAY_BUFFER);var o=e.morphAttributes;for(var r in o)for(var a=o[r],i=0,l=a.length;i<l;i++)_.update(a[i],m.ARRAY_BUFFER)},getWireframeAttribute:function(t){var o=e[t.id];if(o)return o;var n=[],r=t.index,a=t.attributes;if(null!==r)for(var i=0,l=(p=r.array).length;i<l;i+=3){var s=p[i+0],c=p[i+1],u=p[i+2];n.push(s,c,c,u,u,s)}else for(var p=a.position.array,i=0,l=p.length/3-1;i<l;i+=3){var s=i+0,c=i+1,u=i+2;n.push(s,c,c,u,u,s)}return o=new(65535<It(n)?Mt:St)(n,1),_.update(o,m.ELEMENT_ARRAY_BUFFER),e[t.id]=o,o}}}function qt(){var a={};return{get:function(t){if(void 0!==a[t.id])return a[t.id];var e;switch(t.type){case"DirectionalLight":e={direction:new nl,color:new X,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new el};break;case"SpotLight":e={position:new nl,direction:new nl,color:new X,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new el};break;case"PointLight":e={position:new nl,color:new X,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new el,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":e={direction:new nl,skyColor:new X,groundColor:new X};break;case"RectAreaLight":e={color:new X,position:new nl,halfWidth:new nl,halfHeight:new nl};}return a[t.id]=e,e}}}function Jt(){var a=new qt,t={hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},s=new nl,n=new il,i=new il;return{setup:function(e,o,r){for(var T=0,l=0,c=0,h=0,u=0,p=0,d=0,f=0,m=r.matrixWorldInverse,_=0,g=e.length;_<g;_++){var y=e[_],v=y.color,b=y.intensity,w=y.distance,x=y.shadow&&y.shadow.map?y.shadow.map.texture:null;if(y.isAmbientLight)T+=v.r*b,l+=v.g*b,c+=v.b*b;else if(y.isDirectionalLight)(E=a.get(y)).color.copy(y.color).multiplyScalar(y.intensity),E.direction.setFromMatrixPosition(y.matrixWorld),s.setFromMatrixPosition(y.target.matrixWorld),E.direction.sub(s),E.direction.transformDirection(m),E.shadow=y.castShadow,y.castShadow&&(S=y.shadow,E.shadowBias=S.bias,E.shadowRadius=S.radius,E.shadowMapSize=S.mapSize),t.directionalShadowMap[h]=x,t.directionalShadowMatrix[h]=y.shadow.matrix,t.directional[h]=E,h++;else if(y.isSpotLight)(E=a.get(y)).position.setFromMatrixPosition(y.matrixWorld),E.position.applyMatrix4(m),E.color.copy(v).multiplyScalar(b),E.distance=w,E.direction.setFromMatrixPosition(y.matrixWorld),s.setFromMatrixPosition(y.target.matrixWorld),E.direction.sub(s),E.direction.transformDirection(m),E.coneCos=Cc(y.angle),E.penumbraCos=Cc(y.angle*(1-y.penumbra)),E.decay=0===y.distance?0:y.decay,E.shadow=y.castShadow,y.castShadow&&(S=y.shadow,E.shadowBias=S.bias,E.shadowRadius=S.radius,E.shadowMapSize=S.mapSize),t.spotShadowMap[p]=x,t.spotShadowMatrix[p]=y.shadow.matrix,t.spot[p]=E,p++;else if(y.isRectAreaLight)(E=a.get(y)).color.copy(v).multiplyScalar(b/(y.width*y.height)),E.position.setFromMatrixPosition(y.matrixWorld),E.position.applyMatrix4(m),i.identity(),n.copy(y.matrixWorld),n.premultiply(m),i.extractRotation(n),E.halfWidth.set(.5*y.width,0,0),E.halfHeight.set(0,.5*y.height,0),E.halfWidth.applyMatrix4(i),E.halfHeight.applyMatrix4(i),t.rectArea[d]=E,d++;else if(y.isPointLight){if((E=a.get(y)).position.setFromMatrixPosition(y.matrixWorld),E.position.applyMatrix4(m),E.color.copy(y.color).multiplyScalar(y.intensity),E.distance=y.distance,E.decay=0===y.distance?0:y.decay,E.shadow=y.castShadow,y.castShadow){var S=y.shadow;E.shadowBias=S.bias,E.shadowRadius=S.radius,E.shadowMapSize=S.mapSize,E.shadowCameraNear=S.camera.near,E.shadowCameraFar=S.camera.far}t.pointShadowMap[u]=x,t.pointShadowMatrix[u]=y.shadow.matrix,t.point[u]=E,u++}else if(y.isHemisphereLight){var E=a.get(y);E.direction.setFromMatrixPosition(y.matrixWorld),E.direction.transformDirection(m),E.direction.normalize(),E.skyColor.copy(y.color).multiplyScalar(b),E.groundColor.copy(y.groundColor).multiplyScalar(b),t.hemi[f]=E,f++}}t.ambient[0]=T,t.ambient[1]=l,t.ambient[2]=c,t.directional.length=h,t.spot.length=p,t.rectArea.length=d,t.point.length=u,t.hemi.length=f,t.hash=h+","+u+","+p+","+d+","+f+","+o.length},state:t}}function Qt(l,t){var e={};return{update:function(n){var i=t.frame,r=n.geometry,o=l.get(n,r);return e[o.id]!==i&&(r.isGeometry&&o.updateFromObject(n),l.update(o),e[o.id]=i),o},clear:function(){e={}}}}function Kt(a){for(var t=a.split("\n"),e=0;e<t.length;e++)t[e]=e+1+": "+t[e];return t.join("\n")}function te(a,t,e){var o=a.createShader(t);return a.shaderSource(o,e),a.compileShader(o),!1===a.getShaderParameter(o,a.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==a.getShaderInfoLog(o)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",t===a.VERTEX_SHADER?"vertex":"fragment",a.getShaderInfoLog(o),Kt(e)),o}function ee(e){switch(e){case wa:return["Linear","( value )"];case xa:return["sRGB","( value )"];case Ea:return["RGBE","( value )"];case Ma:return["RGBM","( value, 7.0 )"];case Ta:return["RGBM","( value, 16.0 )"];case Aa:return["RGBD","( value, 256.0 )"];case Sa:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+e);}}function ne(a,t){var e=ee(t);return"vec4 "+a+"( vec4 value ) { return "+e[0]+"ToLinear"+e[1]+"; }"}function ie(a,t){var e=ee(t);return"vec4 "+a+"( vec4 value ) { return LinearTo"+e[0]+e[1]+"; }"}function re(a,t){var e;switch(t){case xo:e="Linear";break;case So:e="Reinhard";break;case Eo:e="Uncharted2";break;case Mo:e="OptimizedCineon";break;default:throw new Error("unsupported toneMapping: "+t);}return"vec3 "+a+"( vec3 color ) { return "+e+"ToneMapping( color ); }"}function oe(a,t,e){return[(a=a||{}).derivatives||t.envMapCubeUV||t.bumpMap||t.normalMap||t.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(a.fragDepth||t.logarithmicDepthBuffer)&&e.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",a.drawBuffers&&e.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(a.shaderTextureLOD||t.envMap)&&e.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(le).join("\n")}function ae(a){var t=[];for(var e in a){var o=a[e];!1!==o&&t.push("#define "+e+" "+o)}return t.join("\n")}function se(n,t){for(var e={},i=n.getProgramParameter(t,n.ACTIVE_ATTRIBUTES),r=0,o;r<i;r++)o=n.getActiveAttrib(t,r).name,e[o]=n.getAttribLocation(t,o);return e}function le(e){return""!==e}function ce(a,t){return a.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights)}function he(a){var t=/^[ \t]*#include +<([\w\d.]+)>/gm;return a.replace(t,function(a,t){var e=ja[t];if(void 0===e)throw new Error("Can not resolve #include <"+t+">");return he(e)})}function ue(a){var t=/for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g;return a.replace(t,function(a,t,e,n){for(var i="",r=parseInt(t);r<parseInt(e);r++)i+=n.replace(/\[ i \]/g,"[ "+r+" ]");return i})}function pe(L,t,e,n,R,r){var o=L.context,a=n.defines,s=R.vertexShader,l=R.fragmentShader,c="SHADOWMAP_TYPE_BASIC";r.shadowMapType===Dr?c="SHADOWMAP_TYPE_PCF":r.shadowMapType===kr&&(c="SHADOWMAP_TYPE_PCF_SOFT");var h="ENVMAP_TYPE_CUBE",u="ENVMAP_MODE_REFLECTION",p="ENVMAP_BLENDING_MULTIPLY";if(r.envMap){switch(n.envMap.mapping){case To:case Bc:h="ENVMAP_TYPE_CUBE";break;case Vc:case Wc:h="ENVMAP_TYPE_CUBE_UV";break;case zc:case Gc:h="ENVMAP_TYPE_EQUIREC";break;case Hc:h="ENVMAP_TYPE_SPHERE";}switch(n.envMap.mapping){case Bc:case Gc:u="ENVMAP_MODE_REFRACTION";}switch(n.combine){case yo:p="ENVMAP_BLENDING_MULTIPLY";break;case vo:p="ENVMAP_BLENDING_MIX";break;case bo:p="ENVMAP_BLENDING_ADD";}}var d=0<L.gammaFactor?L.gammaFactor:1,_=oe(n.extensions,r,t),g=ae(a),y=o.createProgram(),v,D;n.isRawShaderMaterial?(v=[g,"\n"].filter(le).join("\n"),D=[_,g,"\n"].filter(le).join("\n")):(v=["precision "+r.precision+" float;","precision "+r.precision+" int;","#define SHADER_NAME "+R.name,g,r.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+d,"#define MAX_BONES "+r.maxBones,r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+u:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.displacementMap&&r.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.vertexColors?"#define USE_COLOR":"",r.flatShading?"#define FLAT_SHADED":"",r.skinning?"#define USE_SKINNING":"",r.useVertexTexture?"#define BONE_TEXTURE":"",r.morphTargets?"#define USE_MORPHTARGETS":"",r.morphNormals&&!1===r.flatShading?"#define USE_MORPHNORMALS":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+r.numClippingPlanes,r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+c:"",r.sizeAttenuation?"#define USE_SIZEATTENUATION":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&t.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(le).join("\n"),D=[_,"precision "+r.precision+" float;","precision "+r.precision+" int;","#define SHADER_NAME "+R.name,g,r.alphaTest?"#define ALPHATEST "+r.alphaTest:"","#define GAMMA_FACTOR "+d,r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+h:"",r.envMap?"#define "+u:"",r.envMap?"#define "+p:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.vertexColors?"#define USE_COLOR":"",r.gradientMap?"#define USE_GRADIENTMAP":"",r.flatShading?"#define FLAT_SHADED":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+r.numClippingPlanes,"#define UNION_CLIPPING_PLANES "+(r.numClippingPlanes-r.numClipIntersection),r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+c:"",r.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",r.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&t.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",r.envMap&&t.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",r.toneMapping===wo?"":"#define TONE_MAPPING",r.toneMapping===wo?"":ja.tonemapping_pars_fragment,r.toneMapping===wo?"":re("toneMapping",r.toneMapping),r.dithering?"#define DITHERING":"",r.outputEncoding||r.mapEncoding||r.envMapEncoding||r.emissiveMapEncoding?ja.encodings_pars_fragment:"",r.mapEncoding?ne("mapTexelToLinear",r.mapEncoding):"",r.envMapEncoding?ne("envMapTexelToLinear",r.envMapEncoding):"",r.emissiveMapEncoding?ne("emissiveMapTexelToLinear",r.emissiveMapEncoding):"",r.outputEncoding?ie("linearToOutputTexel",r.outputEncoding):"",r.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(le).join("\n")),s=ce(s=he(s),r),l=ce(l=he(l),r),n.isShaderMaterial||(s=ue(s),l=ue(l));var F=v+s,b=D+l,w=te(o,o.VERTEX_SHADER,F),x=te(o,o.FRAGMENT_SHADER,b);o.attachShader(y,w),o.attachShader(y,x),void 0===n.index0AttributeName?!0===r.morphTargets&&o.bindAttribLocation(y,0,"position"):o.bindAttribLocation(y,0,n.index0AttributeName),o.linkProgram(y);var S=o.getProgramInfoLog(y),k=o.getShaderInfoLog(w),O=o.getShaderInfoLog(x),U=!0,N=!0;!1===o.getProgramParameter(y,o.LINK_STATUS)?(U=!1,console.error("THREE.WebGLProgram: shader error: ",o.getError(),"gl.VALIDATE_STATUS",o.getProgramParameter(y,o.VALIDATE_STATUS),"gl.getProgramInfoLog",S,k,O)):""===S?""!==k&&""!==O||(N=!1):console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",S),N&&(this.diagnostics={runnable:U,material:n,programLog:S,vertexShader:{log:k,prefix:v},fragmentShader:{log:O,prefix:D}}),o.deleteShader(w),o.deleteShader(x);var P;this.getUniforms=function(){return void 0===P&&(P=new q(o,y,L)),P};var I;return this.getAttributes=function(){return void 0===I&&(I=se(o,y)),I},this.destroy=function(){o.deleteProgram(y),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.id=Xa++,this.code=e,this.usedTimes=1,this.program=y,this.vertexShader=w,this.fragmentShader=x,this}function de(_,t,g){function n(a){var t=a.skeleton.bones;if(g.floatVertexTextures)return 1024;var e=g.maxVertexUniforms,n=B((e-20)/4),r=U(n,t.length);return r<t.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+t.length+" bones. This GPU supports "+r+"."),0):r}function i(a,t){var e;return a?a.isTexture?e=a.encoding:a.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),e=a.texture.encoding):e=wa,e===wa&&t&&(e=Sa),e}var d=[],r={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow"},e=["precision","supportsVertexTextures","map","mapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering"];this.getParameters=function(t,e,a,o,s,y,b){var u=r[t.type],x=b.isSkinnedMesh?n(b):0,v=g.precision;null!==t.precision&&(v=g.getMaxPrecision(t.precision))!==t.precision&&console.warn("THREE.WebGLProgram.getParameters:",t.precision,"not supported, using",v,"instead.");var S=_.getRenderTarget();return{shaderID:u,precision:v,supportsVertexTextures:g.vertexTextures,outputEncoding:i(S?S.texture:null,_.gammaOutput),map:!!t.map,mapEncoding:i(t.map,_.gammaInput),envMap:!!t.envMap,envMapMode:t.envMap&&t.envMap.mapping,envMapEncoding:i(t.envMap,_.gammaInput),envMapCubeUV:!!t.envMap&&(t.envMap.mapping===Vc||t.envMap.mapping===Wc),lightMap:!!t.lightMap,aoMap:!!t.aoMap,emissiveMap:!!t.emissiveMap,emissiveMapEncoding:i(t.emissiveMap,_.gammaInput),bumpMap:!!t.bumpMap,normalMap:!!t.normalMap,displacementMap:!!t.displacementMap,roughnessMap:!!t.roughnessMap,metalnessMap:!!t.metalnessMap,specularMap:!!t.specularMap,alphaMap:!!t.alphaMap,gradientMap:!!t.gradientMap,combine:t.combine,vertexColors:t.vertexColors,fog:!!o,useFog:t.fog,fogExp:o&&o.isFogExp2,flatShading:t.flatShading,sizeAttenuation:t.sizeAttenuation,logarithmicDepthBuffer:g.logarithmicDepthBuffer,skinning:t.skinning&&0<x,maxBones:x,useVertexTexture:g.floatVertexTextures,morphTargets:t.morphTargets,morphNormals:t.morphNormals,maxMorphTargets:_.maxMorphTargets,maxMorphNormals:_.maxMorphNormals,numDirLights:e.directional.length,numPointLights:e.point.length,numSpotLights:e.spot.length,numRectAreaLights:e.rectArea.length,numHemiLights:e.hemi.length,numClippingPlanes:s,numClipIntersection:y,dithering:t.dithering,shadowMapEnabled:_.shadowMap.enabled&&b.receiveShadow&&0<a.length,shadowMapType:_.shadowMap.type,toneMapping:_.toneMapping,physicallyCorrectLights:_.physicallyCorrectLights,premultipliedAlpha:t.premultipliedAlpha,alphaTest:t.alphaTest,doubleSided:t.side===Lc,flipSided:t.side===Fr,depthPacking:void 0!==t.depthPacking&&t.depthPacking}},this.getProgramCode=function(t,a){var n=[];if(a.shaderID?n.push(a.shaderID):(n.push(t.fragmentShader),n.push(t.vertexShader)),void 0!==t.defines)for(var i in t.defines)n.push(i),n.push(t.defines[i]);for(var r=0;r<e.length;r++)n.push(a[e[r]]);return n.push(t.onBeforeCompile.toString()),n.push(_.gammaOutput),n.join()},this.acquireProgram=function(e,o,n,r){for(var a=0,i=d.length,l,s;a<i;a++)if(s=d[a],s.code===r){++(l=s).usedTimes;break}return void 0===l&&(l=new pe(_,t,r,e,o,n),d.push(l)),l},this.releaseProgram=function(a){if(0==--a.usedTimes){var t=d.indexOf(a);d[t]=d[d.length-1],d.pop(),a.destroy()}},this.programs=d}function fe(T,t,M,P,A,L,n){function a(a,t){if(a.width>t||a.height>t){var e=t/C(a.width,a.height),o=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return o.width=B(a.width*e),o.height=B(a.height*e),o.getContext("2d").drawImage(a,0,0,a.width,a.height,0,0,o.width,o.height),console.warn("THREE.WebGLRenderer: image is too big ("+a.width+"x"+a.height+"). Resized to "+o.width+"x"+o.height,a),o}return a}function I(e){return rd.isPowerOfTwo(e.width)&&rd.isPowerOfTwo(e.height)}function o(a){if(a instanceof HTMLImageElement||a instanceof HTMLCanvasElement){var t=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return t.width=rd.nearestPowerOfTwo(a.width),t.height=rd.nearestPowerOfTwo(a.height),t.getContext("2d").drawImage(a,0,0,t.width,t.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+a.width+"x"+a.height+"). Resized to "+t.width+"x"+t.height,a),t}return a}function r(e){return e.wrapS!==Xc||e.wrapT!==Xc||e.minFilter!==Yc&&e.minFilter!==Kc}function l(a,t){return a.generateMipmaps&&t&&a.minFilter!==Yc&&a.minFilter!==Kc}function e(t){return t===Yc||t===Zc||t===Jc?T.NEAREST:T.LINEAR}function s(a){var t=a.target;t.removeEventListener("dispose",s),c(t),n.textures--}function i(a){var t=a.target;t.removeEventListener("dispose",i),d(t),n.textures--}function c(t){var e=P.get(t);if(t.image&&e.__image__webglTextureCube)T.deleteTexture(e.__image__webglTextureCube);else{if(void 0===e.__webglInit)return;T.deleteTexture(e.__webglTexture)}P.remove(t)}function d(t){var e=P.get(t),a=P.get(t.texture);if(t){if(void 0!==a.__webglTexture&&T.deleteTexture(a.__webglTexture),t.depthTexture&&t.depthTexture.dispose(),t.isWebGLRenderTargetCube)for(var r=0;6>r;r++)T.deleteFramebuffer(e.__webglFramebuffer[r]),e.__webglDepthbuffer&&T.deleteRenderbuffer(e.__webglDepthbuffer[r]);else T.deleteFramebuffer(e.__webglFramebuffer),e.__webglDepthbuffer&&T.deleteRenderbuffer(e.__webglDepthbuffer);P.remove(t.texture),P.remove(t)}}function p(t,e){var r=P.get(t);if(0<t.version&&r.__version!==t.version){var o=t.image;if(void 0===o)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",t);else{if(!1!==o.complete)return void m(r,t,e);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",t)}}M.activeTexture(T.TEXTURE0+e),M.bindTexture(T.TEXTURE_2D,r.__webglTexture)}function u(o,r,a){var n;if(a?(T.texParameteri(o,T.TEXTURE_WRAP_S,L.convert(r.wrapS)),T.texParameteri(o,T.TEXTURE_WRAP_T,L.convert(r.wrapT)),T.texParameteri(o,T.TEXTURE_MAG_FILTER,L.convert(r.magFilter)),T.texParameteri(o,T.TEXTURE_MIN_FILTER,L.convert(r.minFilter))):(T.texParameteri(o,T.TEXTURE_WRAP_S,T.CLAMP_TO_EDGE),T.texParameteri(o,T.TEXTURE_WRAP_T,T.CLAMP_TO_EDGE),r.wrapS===Xc&&r.wrapT===Xc||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",r),T.texParameteri(o,T.TEXTURE_MAG_FILTER,e(r.magFilter)),T.texParameteri(o,T.TEXTURE_MIN_FILTER,e(r.minFilter)),r.minFilter!==Yc&&r.minFilter!==Kc&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",r)),n=t.get("EXT_texture_filter_anisotropic")){if(r.type===Yo&&null===t.get("OES_texture_float_linear"))return;if(r.type===Zo&&null===t.get("OES_texture_half_float_linear"))return;(1<r.anisotropy||P.get(r).__currentAnisotropy)&&(T.texParameterf(o,n.TEXTURE_MAX_ANISOTROPY_EXT,U(r.anisotropy,A.getMaxAnisotropy())),P.get(r).__currentAnisotropy=r.anisotropy)}}function m(t,e,i){void 0===t.__webglInit&&(t.__webglInit=!0,e.addEventListener("dispose",s),t.__webglTexture=T.createTexture(),n.textures++),M.activeTexture(T.TEXTURE0+i),M.bindTexture(T.TEXTURE_2D,t.__webglTexture),T.pixelStorei(T.UNPACK_FLIP_Y_WEBGL,e.flipY),T.pixelStorei(T.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.premultiplyAlpha),T.pixelStorei(T.UNPACK_ALIGNMENT,e.unpackAlignment);var c=a(e.image,A.maxTextureSize);r(e)&&!1===I(c)&&(c=o(c));var d=I(c),p=L.convert(e.format),m=L.convert(e.type);u(T.TEXTURE_2D,e,d);var _=e.mipmaps,h;if(e.isDepthTexture){var g=T.DEPTH_COMPONENT;if(e.type===Yo){if(!y)throw new Error("Float Depth Texture only supported in WebGL2.0");g=T.DEPTH_COMPONENT32F}else y&&(g=T.DEPTH_COMPONENT16);e.format===oa&&g===T.DEPTH_COMPONENT&&e.type!==Wo&&e.type!==Xo&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),e.type=Wo,m=L.convert(e.type)),e.format===aa&&(g=T.DEPTH_STENCIL,e.type!==$o&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),e.type=$o,m=L.convert(e.type))),M.texImage2D(T.TEXTURE_2D,0,g,c.width,c.height,0,p,m,null)}else if(e.isDataTexture){if(0<_.length&&d){for(var f=0,b=_.length;f<b;f++)h=_[f],M.texImage2D(T.TEXTURE_2D,f,p,h.width,h.height,0,p,m,h.data);e.generateMipmaps=!1}else M.texImage2D(T.TEXTURE_2D,0,p,c.width,c.height,0,p,m,c.data);}else if(e.isCompressedTexture)for(var f=0,b=_.length;f<b;f++)h=_[f],e.format!==td&&e.format!==ea?-1<M.getCompressedTextureFormats().indexOf(p)?M.compressedTexImage2D(T.TEXTURE_2D,f,p,h.width,h.height,0,h.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):M.texImage2D(T.TEXTURE_2D,f,p,h.width,h.height,0,p,m,h.data);else if(0<_.length&&d){for(var f=0,b=_.length;f<b;f++)h=_[f],M.texImage2D(T.TEXTURE_2D,f,p,p,m,h);e.generateMipmaps=!1}else M.texImage2D(T.TEXTURE_2D,0,p,p,m,c);l(e,d)&&T.generateMipmap(T.TEXTURE_2D),t.__version=e.version,e.onUpdate&&e.onUpdate(e)}function _(t,e,o,a){var r=L.convert(e.texture.format),n=L.convert(e.texture.type);M.texImage2D(a,0,r,e.width,e.height,0,r,n,null),T.bindFramebuffer(T.FRAMEBUFFER,t),T.framebufferTexture2D(T.FRAMEBUFFER,o,a,P.get(e.texture).__webglTexture,0),T.bindFramebuffer(T.FRAMEBUFFER,null)}function h(t,e){T.bindRenderbuffer(T.RENDERBUFFER,t),e.depthBuffer&&!e.stencilBuffer?(T.renderbufferStorage(T.RENDERBUFFER,T.DEPTH_COMPONENT16,e.width,e.height),T.framebufferRenderbuffer(T.FRAMEBUFFER,T.DEPTH_ATTACHMENT,T.RENDERBUFFER,t)):e.depthBuffer&&e.stencilBuffer?(T.renderbufferStorage(T.RENDERBUFFER,T.DEPTH_STENCIL,e.width,e.height),T.framebufferRenderbuffer(T.FRAMEBUFFER,T.DEPTH_STENCIL_ATTACHMENT,T.RENDERBUFFER,t)):T.renderbufferStorage(T.RENDERBUFFER,T.RGBA4,e.width,e.height),T.bindRenderbuffer(T.RENDERBUFFER,null)}function g(t,e){if(e&&e.isWebGLRenderTargetCube)throw new Error("Depth Texture with cube render targets is not supported");if(T.bindFramebuffer(T.FRAMEBUFFER,t),!e.depthTexture||!e.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");P.get(e.depthTexture).__webglTexture&&e.depthTexture.image.width===e.width&&e.depthTexture.image.height===e.height||(e.depthTexture.image.width=e.width,e.depthTexture.image.height=e.height,e.depthTexture.needsUpdate=!0),p(e.depthTexture,0);var a=P.get(e.depthTexture).__webglTexture;if(e.depthTexture.format===oa)T.framebufferTexture2D(T.FRAMEBUFFER,T.DEPTH_ATTACHMENT,T.TEXTURE_2D,a,0);else{if(e.depthTexture.format!==aa)throw new Error("Unknown depthTexture format");T.framebufferTexture2D(T.FRAMEBUFFER,T.DEPTH_STENCIL_ATTACHMENT,T.TEXTURE_2D,a,0)}}function f(t){var e=P.get(t),a=!0===t.isWebGLRenderTargetCube;if(t.depthTexture){if(a)throw new Error("target.depthTexture not supported in Cube render targets");g(e.__webglFramebuffer,t)}else if(a){e.__webglDepthbuffer=[];for(var r=0;6>r;r++)T.bindFramebuffer(T.FRAMEBUFFER,e.__webglFramebuffer[r]),e.__webglDepthbuffer[r]=T.createRenderbuffer(),h(e.__webglDepthbuffer[r],t)}else T.bindFramebuffer(T.FRAMEBUFFER,e.__webglFramebuffer),e.__webglDepthbuffer=T.createRenderbuffer(),h(e.__webglDepthbuffer,t);T.bindFramebuffer(T.FRAMEBUFFER,null)}var y="undefined"!=typeof WebGL2RenderingContext&&T instanceof WebGL2RenderingContext;this.setTexture2D=p,this.setTextureCube=function(t,e){var o=P.get(t);if(6===t.image.length)if(0<t.version&&o.__version!==t.version){o.__image__webglTextureCube||(t.addEventListener("dispose",s),o.__image__webglTextureCube=T.createTexture(),n.textures++),M.activeTexture(T.TEXTURE0+e),M.bindTexture(T.TEXTURE_CUBE_MAP,o.__image__webglTextureCube),T.pixelStorei(T.UNPACK_FLIP_Y_WEBGL,t.flipY);for(var r=t&&t.isCompressedTexture,i=t.image[0]&&t.image[0].isDataTexture,c=[],d=0;6>d;d++)c[d]=r||i?i?t.image[d].image:t.image[d]:a(t.image[d],A.maxCubemapSize);var p=I(c[0]),m=L.convert(t.format),_=L.convert(t.type);for(u(T.TEXTURE_CUBE_MAP,t,p),d=0;6>d;d++)if(r)for(var h=c[d].mipmaps,g=0,f=h.length,y;g<f;g++)y=h[g],t.format!==td&&t.format!==ea?-1<M.getCompressedTextureFormats().indexOf(m)?M.compressedTexImage2D(T.TEXTURE_CUBE_MAP_POSITIVE_X+d,g,m,y.width,y.height,0,y.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):M.texImage2D(T.TEXTURE_CUBE_MAP_POSITIVE_X+d,g,m,y.width,y.height,0,m,_,y.data);else i?M.texImage2D(T.TEXTURE_CUBE_MAP_POSITIVE_X+d,0,m,c[d].width,c[d].height,0,m,_,c[d].data):M.texImage2D(T.TEXTURE_CUBE_MAP_POSITIVE_X+d,0,m,m,_,c[d]);l(t,p)&&T.generateMipmap(T.TEXTURE_CUBE_MAP),o.__version=t.version,t.onUpdate&&t.onUpdate(t)}else M.activeTexture(T.TEXTURE0+e),M.bindTexture(T.TEXTURE_CUBE_MAP,o.__image__webglTextureCube)},this.setTextureCubeDynamic=function(t,e){M.activeTexture(T.TEXTURE0+e),M.bindTexture(T.TEXTURE_CUBE_MAP,P.get(t).__webglTexture)},this.setupRenderTarget=function(t){var e=P.get(t),a=P.get(t.texture);t.addEventListener("dispose",i),a.__webglTexture=T.createTexture(),n.textures++;var o=!0===t.isWebGLRenderTargetCube,r=I(t);if(o)for(e.__webglFramebuffer=[],s=0;6>s;s++)e.__webglFramebuffer[s]=T.createFramebuffer();else e.__webglFramebuffer=T.createFramebuffer();if(o){M.bindTexture(T.TEXTURE_CUBE_MAP,a.__webglTexture),u(T.TEXTURE_CUBE_MAP,t.texture,r);for(var s=0;6>s;s++)_(e.__webglFramebuffer[s],t,T.COLOR_ATTACHMENT0,T.TEXTURE_CUBE_MAP_POSITIVE_X+s);l(t.texture,r)&&T.generateMipmap(T.TEXTURE_CUBE_MAP),M.bindTexture(T.TEXTURE_CUBE_MAP,null)}else M.bindTexture(T.TEXTURE_2D,a.__webglTexture),u(T.TEXTURE_2D,t.texture,r),_(e.__webglFramebuffer,t,T.COLOR_ATTACHMENT0,T.TEXTURE_2D),l(t.texture,r)&&T.generateMipmap(T.TEXTURE_2D),M.bindTexture(T.TEXTURE_2D,null);t.depthBuffer&&f(t)},this.updateRenderTargetMipmap=function(t){var e=t.texture;if(l(e,I(t))){var r=t.isWebGLRenderTargetCube?T.TEXTURE_CUBE_MAP:T.TEXTURE_2D,o=P.get(e).__webglTexture;M.bindTexture(r,o),T.generateMipmap(r),M.bindTexture(r,null)}}}function me(){var a={};return{get:function(t){var e=t.uuid,o=a[e];return void 0===o&&(o={},a[e]=o),o},remove:function(t){delete a[t.uuid]},clear:function(){a={}}}}function _e(H,t,V){function e(t,e,n){var l=new Uint8Array(4),r=H.createTexture();H.bindTexture(t,r),H.texParameteri(t,H.TEXTURE_MIN_FILTER,H.NEAREST),H.texParameteri(t,H.TEXTURE_MAG_FILTER,H.NEAREST);for(var o=0;o<n;o++)H.texImage2D(e+o,0,H.RGBA,1,1,0,H.RGBA,H.UNSIGNED_BYTE,l);return r}function W(t){!0!==y[t]&&(H.enable(t),y[t]=!0)}function X(t){!1!==y[t]&&(H.disable(t),y[t]=!1)}function a(t,e,o,a,r,n,i,l){(t===Rc?X(H.BLEND):W(H.BLEND),t!==Uc)?((t!==w||l!==P)&&(t===Fc?l?(H.blendEquationSeparate(H.FUNC_ADD,H.FUNC_ADD),H.blendFuncSeparate(H.ONE,H.ONE,H.ONE,H.ONE)):(H.blendEquation(H.FUNC_ADD),H.blendFunc(H.SRC_ALPHA,H.ONE)):t===kc?l?(H.blendEquationSeparate(H.FUNC_ADD,H.FUNC_ADD),H.blendFuncSeparate(H.ZERO,H.ZERO,H.ONE_MINUS_SRC_COLOR,H.ONE_MINUS_SRC_ALPHA)):(H.blendEquation(H.FUNC_ADD),H.blendFunc(H.ZERO,H.ONE_MINUS_SRC_COLOR)):t===Oc?l?(H.blendEquationSeparate(H.FUNC_ADD,H.FUNC_ADD),H.blendFuncSeparate(H.ZERO,H.SRC_COLOR,H.ZERO,H.SRC_ALPHA)):(H.blendEquation(H.FUNC_ADD),H.blendFunc(H.ZERO,H.SRC_COLOR)):l?(H.blendEquationSeparate(H.FUNC_ADD,H.FUNC_ADD),H.blendFuncSeparate(H.ONE,H.ONE_MINUS_SRC_ALPHA,H.ONE,H.ONE_MINUS_SRC_ALPHA)):(H.blendEquationSeparate(H.FUNC_ADD,H.FUNC_ADD),H.blendFuncSeparate(H.SRC_ALPHA,H.ONE_MINUS_SRC_ALPHA,H.ONE,H.ONE_MINUS_SRC_ALPHA))),x=null,S=null,E=null,M=null,T=null,A=null):(r=r||e,n=n||o,i=i||a,e===x&&r===M||(H.blendEquationSeparate(V.convert(e),V.convert(r)),x=e,M=r),o===S&&a===E&&n===T&&i===A||(H.blendFuncSeparate(V.convert(o),V.convert(a),V.convert(n),V.convert(i)),S=o,E=a,T=n,A=i));w=t,P=l}function n(t){I!==t&&(t?H.frontFace(H.CW):H.frontFace(H.CCW),I=t)}function i(t){t===Ir?X(H.CULL_FACE):(W(H.CULL_FACE),t!==C&&(t===Cr?H.cullFace(H.BACK):t===Lr?H.cullFace(H.FRONT):H.cullFace(H.FRONT_AND_BACK))),C=t}function q(t,e,a){t?(W(H.POLYGON_OFFSET_FILL),R===e&&D===a||(H.polygonOffset(e,a),R=e,D=a)):X(H.POLYGON_OFFSET_FILL)}function Y(t){void 0===t&&(t=H.TEXTURE0+k-1),U!==t&&(H.activeTexture(t),U=t)}var Z=new function(){var a=!1,t=new al,e=null,n=new al(0,0,0,0);return{setMask:function(t){e===t||a||(H.colorMask(t,t,t,t),e=t)},setLocked:function(e){a=e},setClear:function(r,e,i,o,a){!0===a&&(r*=o,e*=o,i*=o),t.set(r,e,i,o),!1===n.equals(t)&&(H.clearColor(r,e,i,o),n.copy(t))},reset:function(){a=!1,e=null,n.set(-1,0,0,0)}}},J=new function(){var o=!1,e=null,t=null,r=null;return{setTest:function(t){t?W(H.DEPTH_TEST):X(H.DEPTH_TEST)},setMask:function(t){e===t||o||(H.depthMask(t),e=t)},setFunc:function(a){t!==a&&(a?a===co?H.depthFunc(H.NEVER):a===ho?H.depthFunc(H.ALWAYS):a===uo?H.depthFunc(H.LESS):a===po?H.depthFunc(H.LEQUAL):a===fo?H.depthFunc(H.EQUAL):a===mo?H.depthFunc(H.GEQUAL):a===_o?H.depthFunc(H.GREATER):a===go?H.depthFunc(H.NOTEQUAL):H.depthFunc(H.LEQUAL):H.depthFunc(H.LEQUAL),t=a)},setLocked:function(e){o=e},setClear:function(t){r!==t&&(H.clearDepth(t),r=t)},reset:function(){o=!1,e=null,t=null,r=null}}},K=new function(){var o=!1,e=null,t=null,i=null,a=null,r=null,l=null,s=null,n=null;return{setTest:function(t){t?W(H.STENCIL_TEST):X(H.STENCIL_TEST)},setMask:function(t){e===t||o||(H.stencilMask(t),e=t)},setFunc:function(o,e,n){t===o&&i===e&&a===n||(H.stencilFunc(o,e,n),t=o,i=e,a=n)},setOp:function(t,e,a){r===t&&l===e&&s===a||(H.stencilOp(t,e,a),r=t,l=e,s=a)},setLocked:function(e){o=e},setClear:function(t){n!==t&&(H.clearStencil(t),n=t)},reset:function(){o=!1,e=null,t=null,i=null,a=null,r=null,l=null,s=null,n=null}}},Q=H.getParameter(H.MAX_VERTEX_ATTRIBS),m=new Uint8Array(Q),_=new Uint8Array(Q),g=new Uint8Array(Q),y={},v=null,b=null,w=null,x=null,S=null,E=null,M=null,T=null,A=null,P=!1,I=null,C=null,L=null,R=null,D=null,k=H.getParameter(H.MAX_COMBINED_TEXTURE_IMAGE_UNITS),O=parseFloat(/^WebGL\ ([0-9])/.exec(H.getParameter(H.VERSION))[1]),F=1<=parseFloat(O),U=null,N={},B=new al,z=new al,G={};return G[H.TEXTURE_2D]=e(H.TEXTURE_2D,H.TEXTURE_2D,1),G[H.TEXTURE_CUBE_MAP]=e(H.TEXTURE_CUBE_MAP,H.TEXTURE_CUBE_MAP_POSITIVE_X,6),Z.setClear(0,0,0,1),J.setClear(1),K.setClear(0),W(H.DEPTH_TEST),J.setFunc(po),n(!1),i(Cr),W(H.CULL_FACE),W(H.BLEND),a(Dc),{buffers:{color:Z,depth:J,stencil:K},initAttributes:function(){for(var a=0,t=m.length;a<t;a++)m[a]=0},enableAttribute:function(e){m[e]=1,0===_[e]&&(H.enableVertexAttribArray(e),_[e]=1),0!==g[e]&&(t.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(e,0),g[e]=0)},enableAttributeAndDivisor:function(e,a){m[e]=1,0===_[e]&&(H.enableVertexAttribArray(e),_[e]=1),g[e]!==a&&(t.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(e,a),g[e]=a)},disableUnusedAttributes:function(){for(var t=0,e=_.length;t!==e;++t)_[t]!==m[t]&&(H.disableVertexAttribArray(t),_[t]=0)},enable:W,disable:X,getCompressedTextureFormats:function(){if(null===v&&(v=[],t.get("WEBGL_compressed_texture_pvrtc")||t.get("WEBGL_compressed_texture_s3tc")||t.get("WEBGL_compressed_texture_etc1")))for(var e=H.getParameter(H.COMPRESSED_TEXTURE_FORMATS),a=0;a<e.length;a++)v.push(e[a]);return v},useProgram:function(t){return b!==t&&(H.useProgram(t),b=t,!0)},setBlending:a,setMaterial:function(t){t.side===Lc?X(H.CULL_FACE):W(H.CULL_FACE),n(t.side===Fr),!0===t.transparent?a(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha):a(Rc),J.setFunc(t.depthFunc),J.setTest(t.depthTest),J.setMask(t.depthWrite),Z.setMask(t.colorWrite),q(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)},setFlipSided:n,setCullFace:i,setLineWidth:function(t){t!==L&&(F&&H.lineWidth(t),L=t)},setPolygonOffset:q,setScissorTest:function(t){t?W(H.SCISSOR_TEST):X(H.SCISSOR_TEST)},activeTexture:Y,bindTexture:function(t,e){null===U&&Y();var a=N[U];void 0===a&&(a={type:void 0,texture:void 0},N[U]=a),a.type===t&&a.texture===e||(H.bindTexture(t,e||G[t]),a.type=t,a.texture=e)},compressedTexImage2D:function(){try{H.compressedTexImage2D.apply(H,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{H.texImage2D.apply(H,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(t){!1===B.equals(t)&&(H.scissor(t.x,t.y,t.z,t.w),B.copy(t))},viewport:function(t){!1===z.equals(t)&&(H.viewport(t.x,t.y,t.z,t.w),z.copy(t))},reset:function(){for(var t=0;t<_.length;t++)1===_[t]&&(H.disableVertexAttribArray(t),_[t]=0);y={},v=null,U=null,N={},b=null,w=null,I=null,C=null,Z.reset(),J.reset(),K.reset()}}}function ge(y,t,e){function n(t){if("highp"===t){if(0<y.getShaderPrecisionFormat(y.VERTEX_SHADER,y.HIGH_FLOAT).precision&&0<y.getShaderPrecisionFormat(y.FRAGMENT_SHADER,y.HIGH_FLOAT).precision)return"highp";t="mediump"}return"mediump"===t&&0<y.getShaderPrecisionFormat(y.VERTEX_SHADER,y.MEDIUM_FLOAT).precision&&0<y.getShaderPrecisionFormat(y.FRAGMENT_SHADER,y.MEDIUM_FLOAT).precision?"mediump":"lowp"}var b=void 0===e.precision?"highp":e.precision,x=n(b),a;x!==b&&(console.warn("THREE.WebGLRenderer:",b,"not supported, using",x,"instead."),b=x);var r=!0===e.logarithmicDepthBuffer&&!!t.get("EXT_frag_depth"),v=y.getParameter(y.MAX_TEXTURE_IMAGE_UNITS),S=y.getParameter(y.MAX_VERTEX_TEXTURE_IMAGE_UNITS),w=y.getParameter(y.MAX_TEXTURE_SIZE),E=y.getParameter(y.MAX_CUBE_MAP_TEXTURE_SIZE),T=y.getParameter(y.MAX_VERTEX_ATTRIBS),M=y.getParameter(y.MAX_VERTEX_UNIFORM_VECTORS),P=y.getParameter(y.MAX_VARYING_VECTORS),C=y.getParameter(y.MAX_FRAGMENT_UNIFORM_VECTORS),A=0<S,L=!!t.get("OES_texture_float");return{getMaxAnisotropy:function(){if(void 0!==a)return a;var e=t.get("EXT_texture_filter_anisotropic");return a=null===e?0:y.getParameter(e.MAX_TEXTURE_MAX_ANISOTROPY_EXT)},getMaxPrecision:n,precision:b,logarithmicDepthBuffer:r,maxTextures:v,maxVertexTextures:S,maxTextureSize:w,maxCubemapSize:E,maxAttributes:T,maxVertexUniforms:M,maxVaryings:P,maxFragmentUniforms:C,vertexTextures:A,floatFragmentTextures:L,floatVertexTextures:A&&L}}function ye(e){fl.call(this),this.cameras=e||[]}function $t(a){function t(){if(null!==m&&m.isPresenting){var t=m.getEyeParameters("left"),i=t.renderWidth,r=t.renderHeight;d=a.getPixelRatio(),n=a.getSize(),a.setDrawingBufferSize(2*i,r,1)}else u.enabled&&a.setDrawingBufferSize(n.width,n.height,d)}var u=this,m=null,i=null;"VRFrameData"in window&&(i=new window.VRFrameData);var r=new il,o=new il,s=new il,l=new fl;l.bounds=new al(0,0,.5,1),l.layers.enable(1);var c=new fl;c.bounds=new al(.5,0,.5,1),c.layers.enable(2);var _=new ye([l,c]);_.layers.enable(1),_.layers.enable(2);var n,d;window.addEventListener("vrdisplaypresentchange",t,!1),this.enabled=!1,this.standing=!1,this.getDevice=function(){return m},this.setDevice=function(e){void 0!==e&&(m=e)},this.getCamera=function(p){if(null===m)return p;m.depthNear=p.near,m.depthFar=p.far,m.getFrameData(i);var t=i.pose;null===t.position?p.position.set(0,0,0):p.position.fromArray(t.position),null!==t.orientation&&p.quaternion.fromArray(t.orientation),p.updateMatrixWorld();var e=m.stageParameters;if(this.standing&&e&&(o.fromArray(e.sittingToStandingTransform),s.getInverse(o),p.matrixWorld.multiply(o),p.matrixWorldInverse.multiply(s)),!1===m.isPresenting)return p;l.near=p.near,c.near=p.near,l.far=p.far,c.far=p.far,_.matrixWorld.copy(p.matrixWorld),_.matrixWorldInverse.copy(p.matrixWorldInverse),l.matrixWorldInverse.fromArray(i.leftViewMatrix),c.matrixWorldInverse.fromArray(i.rightViewMatrix),this.standing&&e&&(l.matrixWorldInverse.multiply(s),c.matrixWorldInverse.multiply(s));var n=p.parent;null!==n&&(r.getInverse(n.matrixWorld),l.matrixWorldInverse.multiply(r),c.matrixWorldInverse.multiply(r)),l.matrixWorld.getInverse(l.matrixWorldInverse),c.matrixWorld.getInverse(c.matrixWorldInverse),l.projectionMatrix.fromArray(i.leftProjectionMatrix),c.projectionMatrix.fromArray(i.rightProjectionMatrix),_.projectionMatrix.copy(l.projectionMatrix);var a=m.getLayers();if(a.length){var u=a[0];null!==u.leftBounds&&4===u.leftBounds.length&&l.bounds.fromArray(u.leftBounds),null!==u.rightBounds&&4===u.rightBounds.length&&c.bounds.fromArray(u.rightBounds)}return _},this.getStandingMatrix=function(){return o},this.submitFrame=function(){m&&m.isPresenting&&m.submitFrame()},this.dispose=function(){window.removeEventListener("vrdisplaypresentchange",t)}}function be(a){var t={};return{get:function(e){if(void 0!==t[e])return t[e];var o;return o="WEBGL_depth_texture"===e?a.getExtension("WEBGL_depth_texture")||a.getExtension("MOZ_WEBGL_depth_texture")||a.getExtension("WEBKIT_WEBGL_depth_texture"):"EXT_texture_filter_anisotropic"===e?a.getExtension("EXT_texture_filter_anisotropic")||a.getExtension("MOZ_EXT_texture_filter_anisotropic")||a.getExtension("WEBKIT_EXT_texture_filter_anisotropic"):"WEBGL_compressed_texture_s3tc"===e?a.getExtension("WEBGL_compressed_texture_s3tc")||a.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||a.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc"):"WEBGL_compressed_texture_pvrtc"===e?a.getExtension("WEBGL_compressed_texture_pvrtc")||a.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"):"WEBGL_compressed_texture_etc1"===e?a.getExtension("WEBGL_compressed_texture_etc1"):a.getExtension(e),null===o&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t[e]=o,o}}}function we(){function g(){l.value!==e&&(l.value=e,l.needsUpdate=0<i),m.numPlanes=i,m.numIntersection=0}function y(c,t,_,i){var r=null===c?0:c.length,o=null;if(0!==r){if(o=l.value,!0!==i||null===o){var a=_+4*r,h=t.matrixWorldInverse;s.getNormalMatrix(h),(null===o||o.length<a)&&(o=new Float32Array(a));for(var u=0,p=_;u!==r;++u,p+=4)n.copy(c[u]).applyMatrix4(h,s),n.normal.toArray(o,p),o[p+3]=n.constant}l.value=o,l.needsUpdate=!0}return m.numPlanes=r,o}var m=this,e=null,i=0,r=!1,t=!1,n=new ot,s=new rt,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(o,t,n){var a=0!==o.length||t||0!==i||r;return r=t,e=y(o,n,0),i=o.length,a},this.beginShadows=function(){t=!0,y(null)},this.endShadows=function(){t=!1,g()},this.setState=function(a,n,s,c,h,u){if(!r||null===a||0===a.length||t&&!s)t?y(null):g();else{var p=t?0:i,d=4*p,f=h.clippingState||null;l.value=f,f=y(a,c,d,u);for(var m=0;m!==d;++m)f[m]=e[m];h.clippingState=f,this.numIntersection=n?this.numPlanes:0,this.numPlanes+=p}}}function xe(a,t){return{convert:function(e){var o;if(e===jc)return a.REPEAT;if(e===Xc)return a.CLAMP_TO_EDGE;if(e===qc)return a.MIRRORED_REPEAT;if(e===Yc)return a.NEAREST;if(e===Zc)return a.NEAREST_MIPMAP_NEAREST;if(e===Jc)return a.NEAREST_MIPMAP_LINEAR;if(e===Kc)return a.LINEAR;if(e===Qc)return a.LINEAR_MIPMAP_NEAREST;if(e===$c)return a.LINEAR_MIPMAP_LINEAR;if(e===ed)return a.UNSIGNED_BYTE;if(e===Jo)return a.UNSIGNED_SHORT_4_4_4_4;if(e===Ko)return a.UNSIGNED_SHORT_5_5_5_1;if(e===Qo)return a.UNSIGNED_SHORT_5_6_5;if(e===Ho)return a.BYTE;if(e===Vo)return a.SHORT;if(e===Wo)return a.UNSIGNED_SHORT;if(e===qo)return a.INT;if(e===Xo)return a.UNSIGNED_INT;if(e===Yo)return a.FLOAT;if(e===Zo&&null!==(o=t.get("OES_texture_half_float")))return o.HALF_FLOAT_OES;if(e===ta)return a.ALPHA;if(e===ea)return a.RGB;if(e===td)return a.RGBA;if(e===ad)return a.LUMINANCE;if(e===ra)return a.LUMINANCE_ALPHA;if(e===oa)return a.DEPTH_COMPONENT;if(e===aa)return a.DEPTH_STENCIL;if(e===Nc)return a.FUNC_ADD;if(e===Yr)return a.FUNC_SUBTRACT;if(e===Zr)return a.FUNC_REVERSE_SUBTRACT;if(e===Qr)return a.ZERO;if(e===$r)return a.ONE;if(e===to)return a.SRC_COLOR;if(e===eo)return a.ONE_MINUS_SRC_COLOR;if(e===no)return a.SRC_ALPHA;if(e===io)return a.ONE_MINUS_SRC_ALPHA;if(e===ro)return a.DST_ALPHA;if(e===oo)return a.ONE_MINUS_DST_ALPHA;if(e===ao)return a.DST_COLOR;if(e===so)return a.ONE_MINUS_DST_COLOR;if(e===lo)return a.SRC_ALPHA_SATURATE;if((e===sa||e===la||e===ca||e===ha)&&null!==(o=t.get("WEBGL_compressed_texture_s3tc"))){if(e===sa)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===la)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===ca)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===ha)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((e===ua||e===pa||e===da||e===fa)&&null!==(o=t.get("WEBGL_compressed_texture_pvrtc"))){if(e===ua)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===pa)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===da)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===fa)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(e===ma&&null!==(o=t.get("WEBGL_compressed_texture_etc1")))return o.COMPRESSED_RGB_ETC1_WEBGL;if((e===Jr||e===Kr)&&null!==(o=t.get("EXT_blend_minmax"))){if(e===Jr)return o.MIN_EXT;if(e===Kr)return o.MAX_EXT}return e===$o&&null!==(o=t.get("WEBGL_depth_texture"))?o.UNSIGNED_INT_24_8_WEBGL:0}}}function Se(a){function t(){return null===ye?Re:1}function e(){(Xe=new be(We)).get("WEBGL_depth_texture"),Xe.get("OES_texture_float"),Xe.get("OES_texture_float_linear"),Xe.get("OES_texture_half_float"),Xe.get("OES_texture_half_float_linear"),Xe.get("OES_standard_derivatives"),Xe.get("ANGLE_instanced_arrays"),Xe.get("OES_element_index_uint")&&(bl.MaxIndex=4294967296),mt=new xe(We,Xe),qe=new ge(We,Xe,a),(Ye=new _e(We,Xe,mt)).scissor(Pe.copy(Fe).multiplyScalar(Re)),Ye.viewport(Me.copy(De).multiplyScalar(Re)),Ze=new me,Je=new fe(We,Xe,Ye,Ze,qe,mt,He),Ke=new lt(We),Qe=new Zt(We,Ke,He),$e=new Qt(Qe,Ve),rt=new Wt(We),tt=new de(Y,Xe,qe),et=new Jt,at=new Tl,ot=new El(Y,Ye,Qe,k),nt=new Yt(We,Xe,Ve),it=new Xt(We,Xe,Ve),ct=new ul(Y,We,Ye,Je,qe),ut=new J(Y,We,Ye,Je,qe),Y.info.programs=tt.programs,Y.context=We,Y.capabilities=qe,Y.extensions=Xe,Y.properties=Ze,Y.renderLists=at,Y.state=Ye}function n(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),Z=!0}function p(){console.log("THREE.WebGLRenderer: Context Restored."),Z=!1,e()}function X(a){var t=a.target;t.removeEventListener("dispose",X),r(t)}function r(e){Q(e),Ze.remove(e)}function Q(a){var t=Ze.get(a).program;a.program=void 0,void 0!==t&&tt.releaseProgram(t)}function s(a,o,e){a.render(function(a){Y.renderBufferImmediate(a,o,e)})}function ae(b,t,e,n){if(e&&e.isInstancedBufferGeometry&&null===Xe.get("ANGLE_instanced_arrays"))console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");else{void 0===n&&(n=0),Ye.initAttributes();var i=e.attributes,r=t.getAttributes(),o=b.defaultAttributeValues;for(var a in r){var s=r[a];if(0<=s){var l=i[a];if(void 0!==l){var c=l.normalized,h=l.itemSize,u=Ke.get(l);if(void 0===u)continue;var p=u.buffer,x=u.type,f=u.bytesPerElement;if(l.isInterleavedBufferAttribute){var m=l.data,_=m.stride,g=l.offset;m&&m.isInstancedInterleavedBuffer?(Ye.enableAttributeAndDivisor(s,m.meshPerAttribute),void 0===e.maxInstancedCount&&(e.maxInstancedCount=m.meshPerAttribute*m.count)):Ye.enableAttribute(s),We.bindBuffer(We.ARRAY_BUFFER,p),We.vertexAttribPointer(s,h,x,c,_*f,(n*_+g)*f)}else l.isInstancedBufferAttribute?(Ye.enableAttributeAndDivisor(s,l.meshPerAttribute),void 0===e.maxInstancedCount&&(e.maxInstancedCount=l.meshPerAttribute*l.count)):Ye.enableAttribute(s),We.bindBuffer(We.ARRAY_BUFFER,p),We.vertexAttribPointer(s,h,x,c,0,n*h*f)}else if(void 0!==o){var y=o[a];if(void 0!==y)switch(y.length){case 2:We.vertexAttrib2fv(s,y);break;case 3:We.vertexAttrib3fv(s,y);break;case 4:We.vertexAttrib4fv(s,y);break;default:We.vertexAttrib1fv(s,y);}}}}Ye.disableUnusedAttributes()}}function c(){ne||(te.getDevice()||window).requestAnimationFrame(d)}function d(e){null!==ie&&ie(e),(te.getDevice()||window).requestAnimationFrame(d)}function u(d,t,e){if(d.visible){if(d.layers.test(t.layers))if(d.isLight)ue.push(d),d.castShadow&&H.push(d);else if(d.isSprite)d.frustumCulled&&!Oe.intersectsSprite(d)||W.push(d);else if(d.isLensFlare)he.push(d);else if(d.isImmediateRenderObject)e&&Ge.setFromMatrixPosition(d.matrixWorld).applyMatrix4(ze),V.push(d,null,d.material,Ge.z,null);else if((d.isMesh||d.isLine||d.isPoints)&&(d.isSkinnedMesh&&d.skeleton.update(),!d.frustumCulled||Oe.intersectsObject(d))){e&&Ge.setFromMatrixPosition(d.matrixWorld).applyMatrix4(ze);var n=$e.update(d),i=d.material;if(Array.isArray(i))for(var r=n.groups,o=0,a=r.length;o<a;o++){var s=r[o],l=i[s.materialIndex];l&&l.visible&&V.push(d,n,l,Ge.z,s)}else i.visible&&V.push(d,n,i,Ge.z,null)}for(var c=d.children,o=0,a=c.length;o<a;o++)u(c[o],t,e)}}function m(y,t,e,n){for(var i=0,r=y.length;i<r;i++){var o=y[i],a=o.object,s=o.geometry,l=void 0===n?o.material:n,c=o.group;if(e.isArrayCamera){Te=e;for(var h=e.cameras,u=0,p=h.length,d;u<p;u++)if(d=h[u],a.layers.test(d.layers)){var f=d.bounds,m=f.x*Le,_=f.y*Ie,x=f.z*Le,v=f.w*Ie;Ye.viewport(Me.set(m,_,x,v).multiplyScalar(Re)),oe(a,t,d,s,l,c)}}else Te=null,oe(a,t,e,s,l,c)}}function oe(l,t,e,n,i,r){if(l.onBeforeRender(Y,t,e,n,i,r),l.modelViewMatrix.multiplyMatrices(e.matrixWorldInverse,l.matrixWorld),l.normalMatrix.getNormalMatrix(l.modelViewMatrix),l.isImmediateRenderObject){Ye.setMaterial(i);var o=se(e,t.fog,i,l);Se="",s(l,o,i)}else Y.renderBufferDirect(e,t.fog,n,i,l,r);l.onAfterRender(Y,t,e,n,i,r)}function le(o,t,e){var n=Ze.get(o),i=tt.getParameters(o,et.state,H,t,Ue.numPlanes,Ue.numIntersection,e),r=tt.getProgramCode(o,i),a=n.program,l=!0;if(void 0===a)o.addEventListener("dispose",X);else if(a.code!==r)Q(o);else{if(void 0!==i.shaderID)return;l=!1}if(l){if(i.shaderID){var s=Ha[i.shaderID];n.shader={name:o.type,uniforms:Ga.clone(s.uniforms),vertexShader:s.vertexShader,fragmentShader:s.fragmentShader}}else n.shader={name:o.type,uniforms:o.uniforms,vertexShader:o.vertexShader,fragmentShader:o.fragmentShader};o.onBeforeCompile(n.shader),a=tt.acquireProgram(o,n.shader,i,r),n.program=a,o.program=a}var c=a.getAttributes();if(o.morphTargets)for(o.numSupportedMorphTargets=0,u=0;u<Y.maxMorphTargets;u++)0<=c["morphTarget"+u]&&o.numSupportedMorphTargets++;if(o.morphNormals){o.numSupportedMorphNormals=0;for(var u=0;u<Y.maxMorphNormals;u++)0<=c["morphNormal"+u]&&o.numSupportedMorphNormals++}var p=n.shader.uniforms;(o.isShaderMaterial||o.isRawShaderMaterial)&&!0!==o.clipping||(n.numClippingPlanes=Ue.numPlanes,n.numIntersection=Ue.numIntersection,p.clippingPlanes=Ue.uniform),n.fog=t,n.lightsHash=et.state.hash,o.lights&&(p.ambientLightColor.value=et.state.ambient,p.directionalLights.value=et.state.directional,p.spotLights.value=et.state.spot,p.rectAreaLights.value=et.state.rectArea,p.pointLights.value=et.state.point,p.hemisphereLights.value=et.state.hemi,p.directionalShadowMap.value=et.state.directionalShadowMap,p.directionalShadowMatrix.value=et.state.directionalShadowMatrix,p.spotShadowMap.value=et.state.spotShadowMap,p.spotShadowMatrix.value=et.state.spotShadowMatrix,p.pointShadowMap.value=et.state.pointShadowMap,p.pointShadowMatrix.value=et.state.pointShadowMatrix);var d=n.program.getUniforms(),_=q.seqWithValue(d.seq,p);n.uniformsList=_}function se(p,t,e,n){Ae=0;var F=Ze.get(e);if(Ne&&(Be||p!==Ee)){var r=p===Ee&&e.id===ve;Ue.setState(e.clippingPlanes,e.clipIntersection,e.clipShadows,p,F,r)}!1===e.needsUpdate&&(void 0===F.program?e.needsUpdate=!0:e.fog&&F.fog!==t?e.needsUpdate=!0:e.lights&&F.lightsHash!==et.state.hash?e.needsUpdate=!0:void 0===F.numClippingPlanes||F.numClippingPlanes===Ue.numPlanes&&F.numIntersection===Ue.numIntersection||(e.needsUpdate=!0)),e.needsUpdate&&(le(e,t,n),e.needsUpdate=!1);var k=!1,a=!1,s=!1,U=F.program,c=U.getUniforms(),h=F.shader.uniforms;if(Ye.useProgram(U.program)&&(k=!0,a=!0,s=!0),e.id!==ve&&(ve=e.id,a=!0),k||p!==Ee){if(c.setValue(We,"projectionMatrix",p.projectionMatrix),qe.logarithmicDepthBuffer&&c.setValue(We,"logDepthBufFC",2/(i(p.far+1)/o)),Ee!==(Te||p)&&(Ee=Te||p,a=!0,s=!0),e.isShaderMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.envMap){var u=c.map.cameraPosition;void 0!==u&&u.setValue(We,Ge.setFromMatrixPosition(p.matrixWorld))}(e.isMeshPhongMaterial||e.isMeshLambertMaterial||e.isMeshBasicMaterial||e.isMeshStandardMaterial||e.isShaderMaterial||e.skinning)&&c.setValue(We,"viewMatrix",p.matrixWorldInverse)}if(e.skinning){c.setOptional(We,n,"bindMatrix"),c.setOptional(We,n,"bindMatrixInverse");var d=n.skeleton;if(d){var f=d.bones;if(qe.floatVertexTextures){if(void 0===d.boneTexture){var m=O(4*f.length);m=rd.nextPowerOfTwo(T(m)),m=C(m,4);var _=new Float32Array(4*(m*m));_.set(d.boneMatrices);var g=new l(_,m,m,td,Yo);d.boneMatrices=_,d.boneTexture=g,d.boneTextureSize=m}c.setValue(We,"boneTexture",d.boneTexture),c.setValue(We,"boneTextureSize",d.boneTextureSize)}else c.setOptional(We,d,"boneMatrices")}}return a&&(c.setValue(We,"toneMappingExposure",Y.toneMappingExposure),c.setValue(We,"toneMappingWhitePoint",Y.toneMappingWhitePoint),e.lights&&D(h,s),t&&e.fog&&w(h,t),e.isMeshBasicMaterial?b(h,e):e.isMeshLambertMaterial?(b(h,e),E(h,e)):e.isMeshPhongMaterial?(b(h,e),e.isMeshToonMaterial?A(h,e):M(h,e)):e.isMeshStandardMaterial?(b(h,e),e.isMeshPhysicalMaterial?I(h,e):P(h,e)):e.isMeshDepthMaterial?(b(h,e),ce(h,e)):e.isMeshDistanceMaterial?(b(h,e),L(h,e)):e.isMeshNormalMaterial?(b(h,e),R(h,e)):e.isLineBasicMaterial?(v(h,e),e.isLineDashedMaterial&&x(h,e)):e.isPointsMaterial?S(h,e):e.isShadowMaterial&&(h.color.value=e.color,h.opacity.value=e.opacity),void 0!==h.ltcMat&&(h.ltcMat.value=za.LTC_MAT_TEXTURE),void 0!==h.ltcMag&&(h.ltcMag.value=za.LTC_MAG_TEXTURE),q.upload(We,F.uniformsList,h,Y)),c.setValue(We,"modelViewMatrix",n.modelViewMatrix),c.setValue(We,"normalMatrix",n.normalMatrix),c.setValue(We,"modelMatrix",n.matrixWorld),U}function b(a,t){a.opacity.value=t.opacity,t.color&&(a.diffuse.value=t.color),t.emissive&&a.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity),t.map&&(a.map.value=t.map),t.alphaMap&&(a.alphaMap.value=t.alphaMap),t.specularMap&&(a.specularMap.value=t.specularMap),t.envMap&&(a.envMap.value=t.envMap,a.flipEnvMap.value=t.envMap&&t.envMap.isCubeTexture?-1:1,a.reflectivity.value=t.reflectivity,a.refractionRatio.value=t.refractionRatio),t.lightMap&&(a.lightMap.value=t.lightMap,a.lightMapIntensity.value=t.lightMapIntensity),t.aoMap&&(a.aoMap.value=t.aoMap,a.aoMapIntensity.value=t.aoMapIntensity);var e;if(t.map?e=t.map:t.specularMap?e=t.specularMap:t.displacementMap?e=t.displacementMap:t.normalMap?e=t.normalMap:t.bumpMap?e=t.bumpMap:t.roughnessMap?e=t.roughnessMap:t.metalnessMap?e=t.metalnessMap:t.alphaMap?e=t.alphaMap:t.emissiveMap&&(e=t.emissiveMap),void 0!==e){e.isWebGLRenderTarget&&(e=e.texture);var o=e.offset,n=e.repeat;a.offsetRepeat.value.set(o.x,o.y,n.x,n.y)}}function v(a,t){a.diffuse.value=t.color,a.opacity.value=t.opacity}function x(a,t){a.dashSize.value=t.dashSize,a.totalSize.value=t.dashSize+t.gapSize,a.scale.value=t.scale}function S(a,t){if(a.diffuse.value=t.color,a.opacity.value=t.opacity,a.size.value=t.size*Re,a.scale.value=.5*Ie,a.map.value=t.map,null!==t.map){var e=t.map.offset,o=t.map.repeat;a.offsetRepeat.value.set(e.x,e.y,o.x,o.y)}}function w(a,t){a.fogColor.value=t.color,t.isFog?(a.fogNear.value=t.near,a.fogFar.value=t.far):t.isFogExp2&&(a.fogDensity.value=t.density)}function E(a,t){t.emissiveMap&&(a.emissiveMap.value=t.emissiveMap)}function M(a,t){a.specular.value=t.specular,a.shininess.value=C(t.shininess,1e-4),t.emissiveMap&&(a.emissiveMap.value=t.emissiveMap),t.bumpMap&&(a.bumpMap.value=t.bumpMap,a.bumpScale.value=t.bumpScale),t.normalMap&&(a.normalMap.value=t.normalMap,a.normalScale.value.copy(t.normalScale)),t.displacementMap&&(a.displacementMap.value=t.displacementMap,a.displacementScale.value=t.displacementScale,a.displacementBias.value=t.displacementBias)}function A(a,t){M(a,t),t.gradientMap&&(a.gradientMap.value=t.gradientMap)}function P(a,t){a.roughness.value=t.roughness,a.metalness.value=t.metalness,t.roughnessMap&&(a.roughnessMap.value=t.roughnessMap),t.metalnessMap&&(a.metalnessMap.value=t.metalnessMap),t.emissiveMap&&(a.emissiveMap.value=t.emissiveMap),t.bumpMap&&(a.bumpMap.value=t.bumpMap,a.bumpScale.value=t.bumpScale),t.normalMap&&(a.normalMap.value=t.normalMap,a.normalScale.value.copy(t.normalScale)),t.displacementMap&&(a.displacementMap.value=t.displacementMap,a.displacementScale.value=t.displacementScale,a.displacementBias.value=t.displacementBias),t.envMap&&(a.envMapIntensity.value=t.envMapIntensity)}function I(a,t){a.clearCoat.value=t.clearCoat,a.clearCoatRoughness.value=t.clearCoatRoughness,P(a,t)}function ce(a,t){t.displacementMap&&(a.displacementMap.value=t.displacementMap,a.displacementScale.value=t.displacementScale,a.displacementBias.value=t.displacementBias)}function L(a,t){t.displacementMap&&(a.displacementMap.value=t.displacementMap,a.displacementScale.value=t.displacementScale,a.displacementBias.value=t.displacementBias),a.referencePosition.value.copy(t.referencePosition),a.nearDistance.value=t.nearDistance,a.farDistance.value=t.farDistance}function R(a,t){t.bumpMap&&(a.bumpMap.value=t.bumpMap,a.bumpScale.value=t.bumpScale),t.normalMap&&(a.normalMap.value=t.normalMap,a.normalScale.value.copy(t.normalScale)),t.displacementMap&&(a.displacementMap.value=t.displacementMap,a.displacementScale.value=t.displacementScale,a.displacementBias.value=t.displacementBias)}function D(a,t){a.ambientLightColor.needsUpdate=t,a.directionalLights.needsUpdate=t,a.pointLights.needsUpdate=t,a.spotLights.needsUpdate=t,a.rectAreaLights.needsUpdate=t,a.hemisphereLights.needsUpdate=t}console.log("THREE.WebGLRenderer",Ac);var _=void 0===(a=a||{}).canvas?document.createElementNS("http://www.w3.org/1999/xhtml","canvas"):a.canvas,h=void 0===a.context?null:a.context,g=void 0!==a.alpha&&a.alpha,f=void 0===a.depth||a.depth,y=void 0===a.stencil||a.stencil,F=void 0!==a.antialias&&a.antialias,k=void 0===a.premultipliedAlpha||a.premultipliedAlpha,pe=void 0!==a.preserveDrawingBuffer&&a.preserveDrawingBuffer,ue=[],H=[],V=null,W=[],he=[];this.domElement=_,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=xo,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var Y=this,Z=!1,ye=null,$=null,ve=-1,Se="",Ee=null,Te=null,Me=new al,Pe=new al,Ce=null,Ae=0,Le=_.width,Ie=_.height,Re=1,De=new al(0,0,Le,Ie),Fe=new al(0,0,Le,Ie),ke=!1,Oe=new gl,Ue=new we,Ne=!1,Be=!1,ze=new il,Ge=new nl,He={geometries:0,textures:0},Ve={frame:0,calls:0,vertices:0,faces:0,points:0};this.info={render:Ve,memory:He,programs:null};var We;try{var je={alpha:g,depth:f,stencil:y,antialias:F,premultipliedAlpha:k,preserveDrawingBuffer:pe};if(null===(We=h||_.getContext("webgl",je)||_.getContext("experimental-webgl",je)))throw null===_.getContext("webgl")?"Error creating WebGL context.":"Error creating WebGL context with your selected attributes.";void 0===We.getShaderPrecisionFormat&&(We.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}}),_.addEventListener("webglcontextlost",n,!1),_.addEventListener("webglcontextrestored",p,!1)}catch(e){console.error("THREE.WebGLRenderer: "+e)}var Xe,qe,Ye,Ze,Je,Ke,Qe,$e,et,tt,at,ot,rt,nt,it,ct,ut,mt;e();var te=new $t(Y);this.vr=te;var ee=new st(Y,$e,qe.maxTextureSize);this.shadowMap=ee,this.getContext=function(){return We},this.getContextAttributes=function(){return We.getContextAttributes()},this.forceContextLoss=function(){var e=Xe.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=Xe.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return Re},this.setPixelRatio=function(e){void 0!==e&&(Re=e,this.setSize(Le,Ie,!1))},this.getSize=function(){return{width:Le,height:Ie}},this.setSize=function(a,t,e){var o=te.getDevice();o&&o.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(Le=a,Ie=t,_.width=a*Re,_.height=t*Re,!1!==e&&(_.style.width=a+"px",_.style.height=t+"px"),this.setViewport(0,0,a,t))},this.getDrawingBufferSize=function(){return{width:Le*Re,height:Ie*Re}},this.setDrawingBufferSize=function(a,t,e){Le=a,Ie=t,Re=e,_.width=a*e,_.height=t*e,this.setViewport(0,0,a,t)},this.setViewport=function(a,t,e,o){De.set(a,Ie-t-o,e,o),Ye.viewport(Me.copy(De).multiplyScalar(Re))},this.setScissor=function(a,t,e,o){Fe.set(a,Ie-t-o,e,o),Ye.scissor(Pe.copy(Fe).multiplyScalar(Re))},this.setScissorTest=function(e){Ye.setScissorTest(ke=e)},this.getClearColor=ot.getClearColor,this.setClearColor=ot.setClearColor,this.getClearAlpha=ot.getClearAlpha,this.setClearAlpha=ot.setClearAlpha,this.clear=function(a,t,e){var o=0;(void 0===a||a)&&(o|=We.COLOR_BUFFER_BIT),(void 0===t||t)&&(o|=We.DEPTH_BUFFER_BIT),(void 0===e||e)&&(o|=We.STENCIL_BUFFER_BIT),We.clear(o)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(a,t,e,o){this.setRenderTarget(a),this.clear(t,e,o)},this.dispose=function(){_.removeEventListener("webglcontextlost",n,!1),_.removeEventListener("webglcontextrestored",p,!1),at.dispose(),te.dispose()},this.renderBufferImmediate=function(d,t,e){Ye.initAttributes();var n=Ze.get(d);d.hasPositions&&!n.position&&(n.position=We.createBuffer()),d.hasNormals&&!n.normal&&(n.normal=We.createBuffer()),d.hasUvs&&!n.uv&&(n.uv=We.createBuffer()),d.hasColors&&!n.color&&(n.color=We.createBuffer());var i=t.getAttributes();if(d.hasPositions&&(We.bindBuffer(We.ARRAY_BUFFER,n.position),We.bufferData(We.ARRAY_BUFFER,d.positionArray,We.DYNAMIC_DRAW),Ye.enableAttribute(i.position),We.vertexAttribPointer(i.position,3,We.FLOAT,!1,0,0)),d.hasNormals){if(We.bindBuffer(We.ARRAY_BUFFER,n.normal),!e.isMeshPhongMaterial&&!e.isMeshStandardMaterial&&!e.isMeshNormalMaterial&&!0===e.flatShading)for(var r=0,o=3*d.count;r<o;r+=9){var a=d.normalArray,s=(a[r+0]+a[r+3]+a[r+6])/3,l=(a[r+1]+a[r+4]+a[r+7])/3,c=(a[r+2]+a[r+5]+a[r+8])/3;a[r+0]=s,a[r+1]=l,a[r+2]=c,a[r+3]=s,a[r+4]=l,a[r+5]=c,a[r+6]=s,a[r+7]=l,a[r+8]=c}We.bufferData(We.ARRAY_BUFFER,d.normalArray,We.DYNAMIC_DRAW),Ye.enableAttribute(i.normal),We.vertexAttribPointer(i.normal,3,We.FLOAT,!1,0,0)}d.hasUvs&&e.map&&(We.bindBuffer(We.ARRAY_BUFFER,n.uv),We.bufferData(We.ARRAY_BUFFER,d.uvArray,We.DYNAMIC_DRAW),Ye.enableAttribute(i.uv),We.vertexAttribPointer(i.uv,2,We.FLOAT,!1,0,0)),d.hasColors&&e.vertexColors!==Nr&&(We.bindBuffer(We.ARRAY_BUFFER,n.color),We.bufferData(We.ARRAY_BUFFER,d.colorArray,We.DYNAMIC_DRAW),Ye.enableAttribute(i.color),We.vertexAttribPointer(i.color,3,We.FLOAT,!1,0,0)),Ye.disableUnusedAttributes(),We.drawArrays(We.TRIANGLES,0,d.count),d.count=0},this.renderBufferDirect=function(e,d,n,i,r,o){Ye.setMaterial(i);var a=se(e,d,i,r),s=n.id+"_"+a.id+"_"+(!0===i.wireframe),l=!1;s!==Se&&(Se=s,l=!0),r.morphTargetInfluences&&(rt.update(r,n,i,a),l=!0);var c=n.index,h=n.attributes.position,u=1;!0===i.wireframe&&(c=Qe.getWireframeAttribute(n),u=2);var p=nt,m;null!==c&&(m=Ke.get(c),(p=it).setIndex(m)),l&&(ae(i,a,n),null!==c&&We.bindBuffer(We.ELEMENT_ARRAY_BUFFER,m.buffer));var f=0;null===c?void 0!==h&&(f=h.count):f=c.count;var _=n.drawRange.start*u,g=n.drawRange.count*u,y=null===o?0:o.start*u,b=null===o?1/0:o.count*u,v=C(_,y),x=U(f,_+g,y+b)-1,S=C(0,x-v+1);if(0!==S){if(r.isMesh){if(!0===i.wireframe)Ye.setLineWidth(i.wireframeLinewidth*t()),p.setMode(We.LINES);else switch(r.drawMode){case od:p.setMode(We.TRIANGLES);break;case va:p.setMode(We.TRIANGLE_STRIP);break;case ba:p.setMode(We.TRIANGLE_FAN);}}else if(r.isLine){var w=i.linewidth;void 0===w&&(w=1),Ye.setLineWidth(w*t()),r.isLineSegments?p.setMode(We.LINES):r.isLineLoop?p.setMode(We.LINE_LOOP):p.setMode(We.LINE_STRIP)}else r.isPoints&&p.setMode(We.POINTS);n&&n.isInstancedBufferGeometry?0<n.maxInstancedCount&&p.renderInstances(n,v,S):p.render(v,S)}},this.compile=function(a,t){ue.length=0,H.length=0,a.traverse(function(e){e.isLight&&(ue.push(e),e.castShadow&&H.push(e))}),et.setup(ue,H,t),a.traverse(function(t){if(t.material)if(Array.isArray(t.material))for(var e=0;e<t.material.length;e++)le(t.material[e],a.fog,t);else le(t.material,a.fog,t)})};var ne=!1,ie=null;this.animate=function(e){ie=e,c()},this.render=function(l,t,e,n){if(!(t&&t.isCamera))console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");else if(!Z){Se="",ve=-1,Ee=null,!0===l.autoUpdate&&l.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),te.enabled&&(t=te.getCamera(t)),ze.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),Oe.setFromMatrix(ze),ue.length=0,H.length=0,W.length=0,he.length=0,Be=this.localClippingEnabled,Ne=Ue.init(this.clippingPlanes,Be,t),(V=at.get(l,t)).init(),u(l,t,Y.sortObjects),!0===Y.sortObjects&&V.sort(),Ne&&Ue.beginShadows(),ee.render(H,l,t),et.setup(ue,H,t),Ne&&Ue.endShadows(),Ve.frame++,Ve.calls=0,Ve.vertices=0,Ve.faces=0,Ve.points=0,void 0===e&&(e=null),this.setRenderTarget(e),ot.render(V,l,t,n);var i=V.opaque,r=V.transparent;if(l.overrideMaterial){var o=l.overrideMaterial;i.length&&m(i,l,t,o),r.length&&m(r,l,t,o)}else i.length&&m(i,l,t),r.length&&m(r,l,t);ut.render(W,l,t),ct.render(he,l,t,Me),e&&Je.updateRenderTargetMipmap(e),Ye.buffers.depth.setTest(!0),Ye.buffers.depth.setMask(!0),Ye.buffers.color.setMask(!0),Ye.setPolygonOffset(!1),te.enabled&&te.submitFrame()}},this.setFaceCulling=function(a,t){Ye.setCullFace(a),Ye.setFlipSided(t===Rr)},this.allocTextureUnit=function(){var e=Ae;return e>=qe.maxTextures&&console.warn("THREE.WebGLRenderer: Trying to use "+e+" texture units while this GPU supports only "+qe.maxTextures),Ae+=1,e},this.setTexture2D=function(){var a=!1;return function(t,e){t&&t.isWebGLRenderTarget&&(a||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),a=!0),t=t.texture),Je.setTexture2D(t,e)}}(),this.setTexture=function(){var a=!1;return function(t,e){a||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),a=!0),Je.setTexture2D(t,e)}}(),this.setTextureCube=function(){var a=!1;return function(t,e){t&&t.isWebGLRenderTargetCube&&(a||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),a=!0),t=t.texture),t&&t.isCubeTexture||Array.isArray(t.image)&&6===t.image.length?Je.setTextureCube(t,e):Je.setTextureCubeDynamic(t,e)}}(),this.getRenderTarget=function(){return ye},this.setRenderTarget=function(a){ye=a,a&&void 0===Ze.get(a).__webglFramebuffer&&Je.setupRenderTarget(a);var t=null,e=!1;if(a){var o=Ze.get(a).__webglFramebuffer;a.isWebGLRenderTargetCube?(t=o[a.activeCubeFace],e=!0):t=o,Me.copy(a.viewport),Pe.copy(a.scissor),Ce=a.scissorTest}else Me.copy(De).multiplyScalar(Re),Pe.copy(Fe).multiplyScalar(Re),Ce=ke;if($!==t&&(We.bindFramebuffer(We.FRAMEBUFFER,t),$=t),Ye.viewport(Me),Ye.scissor(Pe),Ye.setScissorTest(Ce),e){var n=Ze.get(a.texture);We.framebufferTexture2D(We.FRAMEBUFFER,We.COLOR_ATTACHMENT0,We.TEXTURE_CUBE_MAP_POSITIVE_X+a.activeCubeFace,n.__webglTexture,a.activeMipMapLevel)}},this.readRenderTargetPixels=function(d,t,e,n,i,r){if(d&&d.isWebGLRenderTarget){var o=Ze.get(d).__webglFramebuffer;if(o){var a=!1;o!==$&&(We.bindFramebuffer(We.FRAMEBUFFER,o),a=!0);try{var s=d.texture,l=s.format,c=s.type;if(l!==td&&mt.convert(l)!==We.getParameter(We.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(c===ed||mt.convert(c)===We.getParameter(We.IMPLEMENTATION_COLOR_READ_TYPE)||c===Yo&&(Xe.get("OES_texture_float")||Xe.get("WEBGL_color_buffer_float"))||c===Zo&&Xe.get("EXT_color_buffer_half_float")))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");We.checkFramebufferStatus(We.FRAMEBUFFER)===We.FRAMEBUFFER_COMPLETE?0<=t&&t<=d.width-n&&0<=e&&e<=d.height-i&&We.readPixels(t,e,n,i,mt.convert(l),mt.convert(c),r):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{a&&We.bindFramebuffer(We.FRAMEBUFFER,$)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")}}function Ee(a,t){this.name="",this.color=new X(a),this.density=void 0===t?25e-5:t}function Me(a,t,e){this.name="",this.color=new X(a),this.near=void 0===t?1:t,this.far=void 0===e?1e3:e}function Te(){ut.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}function Ml(a,t,e,o,n){ut.call(this),this.lensFlares=[],this.positionScreen=new nl,this.customUpdateCallback=void 0,void 0!==a&&this.add(a,t,e,o,n)}function Pl(e){K.call(this),this.type="SpriteMaterial",this.color=new X(16777215),this.map=null,this.rotation=0,this.fog=!1,this.lights=!1,this.setValues(e)}function Cl(e){ut.call(this),this.type="Sprite",this.material=void 0===e?new Pl:e}function Al(){ut.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function Ll(a,t){if(a=a||[],this.bones=a.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var e=0,o=this.bones.length;e<o;e++)this.boneInverses.push(new il)}}function Re(){ut.call(this),this.type="Bone"}function Il(a,t){Bt.call(this,a,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new il,this.bindMatrixInverse=new il;var e=new Ll(this.initBones());this.bind(e,this.matrixWorld),this.normalizeSkinWeights()}function Rl(e){K.call(this),this.type="LineBasicMaterial",this.color=new X(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(e)}function Dl(a,t,e){return 1===e?(console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new Fl(a,t)):void(ut.call(this),this.type="Line",this.geometry=void 0===a?new bl:a,this.material=void 0===t?new Rl({color:16777215*Math.random()}):t)}function Fl(a,t){Dl.call(this,a,t),this.type="LineSegments"}function kl(a,t){Dl.call(this,a,t),this.type="LineLoop"}function Ol(e){K.call(this),this.type="PointsMaterial",this.color=new X(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.lights=!1,this.setValues(e)}function Ul(a,t){ut.call(this),this.type="Points",this.geometry=void 0===a?new bl:a,this.material=void 0===t?new Ol({color:16777215*Math.random()}):t}function Nl(){ut.call(this),this.type="Group"}function Bl(o,t,e,n,i,r,a,s,l){function c(){requestAnimationFrame(c),o.readyState>=o.HAVE_CURRENT_DATA&&(d.needsUpdate=!0)}tl.call(this,o,t,e,n,i,r,a,s,l),this.generateMipmaps=!1;var d=this;c()}function je(o,t,d,m,i,r,a,s,l,c,_,u){tl.call(this,null,r,a,s,l,c,m,i,_,u),this.image={width:t,height:d},this.mipmaps=o,this.flipY=!1,this.generateMipmaps=!1}function He(o,d,p,n,i,r,a,s,l,c){if((c=void 0===c?oa:c)!==oa&&c!==aa)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===p&&c===oa&&(p=Wo),void 0===p&&c===aa&&(p=$o),tl.call(this,null,n,i,r,a,s,c,p,l),this.image={width:o,height:d},this.magFilter=void 0===a?Yc:a,this.minFilter=void 0===s?Yc:s,this.flipY=!1,this.generateMipmaps=!1}function Ve(h){bl.call(this),this.type="WireframeGeometry";var t=[],p=[0,0],d={},f=["a","b","c"],m,e,n,i,r,o,a,s,l,c;if(h&&h.isGeometry){var u=h.faces;for(m=0,n=u.length;m<n;m++){var _=u[m];for(e=0;3>e;e++)a=_[f[e]],s=_[f[(e+1)%3]],p[0]=U(a,s),p[1]=C(a,s),void 0===d[l=p[0]+","+p[1]]&&(d[l]={index1:p[0],index2:p[1]})}for(l in d)o=d[l],c=h.vertices[o.index1],t.push(c.x,c.y,c.z),c=h.vertices[o.index2],t.push(c.x,c.y,c.z)}else if(h&&h.isBufferGeometry){var g,y,v,b,w,x,S;if(c=new nl,null!==h.index){for(g=h.attributes.position,y=h.index,0===(v=h.groups).length&&(v=[{start:0,count:y.count,materialIndex:0}]),i=0,r=v.length;i<r;++i)for(m=w=(b=v[i]).start,n=w+b.count;m<n;m+=3)for(e=0;3>e;e++)a=y.getX(m+e),s=y.getX(m+(e+1)%3),p[0]=U(a,s),p[1]=C(a,s),void 0===d[l=p[0]+","+p[1]]&&(d[l]={index1:p[0],index2:p[1]});for(l in d)o=d[l],c.fromBufferAttribute(g,o.index1),t.push(c.x,c.y,c.z),c.fromBufferAttribute(g,o.index2),t.push(c.x,c.y,c.z)}else for(m=0,n=(g=h.attributes.position).count/3;m<n;m++)for(e=0;3>e;e++)x=3*m+e,c.fromBufferAttribute(g,x),t.push(c.x,c.y,c.z),S=3*m+(e+1)%3,c.fromBufferAttribute(g,S),t.push(c.x,c.y,c.z)}this.addAttribute("position",new Tt(t,3))}function zl(a,o,r){gt.call(this),this.type="ParametricGeometry",this.parameters={func:a,slices:o,stacks:r},this.fromBufferGeometry(new Gl(a,o,r)),this.mergeVertices()}function Gl(h,x,S){bl.call(this),this.type="ParametricBufferGeometry",this.parameters={func:h,slices:x,stacks:S};var E=[],o=[],a=[],s=[],l=new nl,c=new nl,u=new nl,p=new nl,d=new nl,f=x+1,m,i;for(m=0;m<=S;m++){var r=m/S;for(i=0;i<=x;i++){var _=i/x;c=h(_,r,c),o.push(c.x,c.y,c.z),0<=_-1e-5?(u=h(_-1e-5,r,u),p.subVectors(c,u)):(u=h(_+1e-5,r,u),p.subVectors(u,c)),0<=r-1e-5?(u=h(_,r-1e-5,u),d.subVectors(c,u)):(u=h(_,r+1e-5,u),d.subVectors(u,c)),l.crossVectors(p,d).normalize(),a.push(l.x,l.y,l.z),s.push(_,r)}}for(m=0;m<S;m++)for(i=0;i<x;i++){var g=m*f+i,y=m*f+i+1,v=(m+1)*f+i+1,b=(m+1)*f+i;E.push(g,y,b),E.push(y,v,b)}this.setIndex(E),this.addAttribute("position",new Tt(o,3)),this.addAttribute("normal",new Tt(a,3)),this.addAttribute("uv",new Tt(s,2))}function Hl(a,o,r,l){gt.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:a,indices:o,radius:r,detail:l},this.fromBufferGeometry(new Vl(a,o,r,l)),this.mergeVertices()}function Vl(r,_,h,g){function y(s,t,e,n){var i=S(2,n),d=[],l,r;for(l=0;l<=i;l++){d[l]=[];var m=s.clone().lerp(e,l/i),c=t.clone().lerp(e,l/i),_=i-l;for(r=0;r<=_;r++)d[l][r]=0===r&&l===i?m:m.clone().lerp(c,r/_)}for(l=0;l<i;l++)for(r=0;r<2*(i-l)-1;r++){var u=B(r/2);0==r%2?(a(d[l][u+1]),a(d[l+1][u]),a(d[l][u])):(a(d[l][u+1]),a(d[l+1][u+1]),a(d[l+1][u]))}}function o(){for(var a=0;a<f.length;a+=6){var t=f[a+0],e=f[a+2],n=f[a+4],i=C(t,e,n),r=U(t,e,n);.9<i&&.1>r&&(.2>t&&(f[a+0]+=1),.2>e&&(f[a+2]+=1),.2>n&&(f[a+4]+=1))}}function a(e){p.push(e.x,e.y,e.z)}function s(t,e){var a=3*t;e.x=r[a+0],e.y=r[a+1],e.z=r[a+2]}function l(){for(var r=new nl,t=new nl,e=new nl,n=new nl,i=new el,o=new el,a=new el,s=0,l=0;s<p.length;s+=9,l+=6){r.set(p[s+0],p[s+1],p[s+2]),t.set(p[s+3],p[s+4],p[s+5]),e.set(p[s+6],p[s+7],p[s+8]),i.set(f[l+0],f[l+1]),o.set(f[l+2],f[l+3]),a.set(f[l+4],f[l+5]),n.copy(r).add(t).add(e).divideScalar(3);var m=u(n);b(i,l+0,r,m),b(o,l+2,t,m),b(a,l+4,e,m)}}function b(a,t,e,o){0>o&&1===a.x&&(f[t]=a.x-1),0===e.x&&0===e.z&&(f[t]=o/2/Gn+.5)}function u(e){return k(e.z,-e.x)}function c(e){return k(-e.y,O(e.x*e.x+e.z*e.z))}bl.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:r,indices:_,radius:h,detail:g},h=h||1;var p=[],f=[];!function(e){for(var t=new nl,o=new nl,n=new nl,r=0;r<_.length;r+=3)s(_[r+0],t),s(_[r+1],o),s(_[r+2],n),y(t,o,n,e)}(g=g||0),function(a){for(var t=new nl,e=0;e<p.length;e+=3)t.x=p[e+0],t.y=p[e+1],t.z=p[e+2],t.normalize().multiplyScalar(a),p[e+0]=t.x,p[e+1]=t.y,p[e+2]=t.z}(h),function(){for(var a=new nl,t=0;t<p.length;t+=3){a.x=p[t+0],a.y=p[t+1],a.z=p[t+2];var e=u(a)/2/Gn+.5,r=c(a)/Gn+.5;f.push(e,1-r)}l(),o()}(),this.addAttribute("position",new Tt(p,3)),this.addAttribute("normal",new Tt(p.slice(),3)),this.addAttribute("uv",new Tt(f,2)),0===g?this.computeVertexNormals():this.normalizeNormals()}function Wl(a,o){gt.call(this),this.type="TetrahedronGeometry",this.parameters={radius:a,detail:o},this.fromBufferGeometry(new jl(a,o)),this.mergeVertices()}function jl(a,o){Vl.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],a,o),this.type="TetrahedronBufferGeometry",this.parameters={radius:a,detail:o}}function Xl(a,o){gt.call(this),this.type="OctahedronGeometry",this.parameters={radius:a,detail:o},this.fromBufferGeometry(new ql(a,o)),this.mergeVertices()}function ql(a,o){Vl.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],a,o),this.type="OctahedronBufferGeometry",this.parameters={radius:a,detail:o}}function Yl(a,o){gt.call(this),this.type="IcosahedronGeometry",this.parameters={radius:a,detail:o},this.fromBufferGeometry(new Zl(a,o)),this.mergeVertices()}function Zl(a,o){var r=(1+2.23606797749979)/2;Vl.call(this,[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],a,o),this.type="IcosahedronBufferGeometry",this.parameters={radius:a,detail:o}}function Jl(a,o){gt.call(this),this.type="DodecahedronGeometry",this.parameters={radius:a,detail:o},this.fromBufferGeometry(new Kl(a,o)),this.mergeVertices()}function Kl(a,o){var r=(1+2.23606797749979)/2,l=1/r;Vl.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-l,-r,0,-l,r,0,l,-r,0,l,r,-l,-r,0,-l,r,0,l,-r,0,l,r,0,-r,0,-l,r,0,-l,-r,0,l,r,0,l],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],a,o),this.type="DodecahedronBufferGeometry",this.parameters={radius:a,detail:o}}function Ql(l,s,c,d,p,u){gt.call(this),this.type="TubeGeometry",this.parameters={path:l,tubularSegments:s,radius:c,radialSegments:d,closed:p},void 0!==u&&console.warn("THREE.TubeGeometry: taper has been removed.");var o=new $l(l,s,c,d,p);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals,this.fromBufferGeometry(o),this.mergeVertices()}function $l(b,x,r,S,h){function w(e){var t=b.getPointAt(e/x),o=E.normals[e],n=E.binormals[e];for(v=0;v<=S;v++){var i=2*(v/S*Gn),l=Pc(i),s=-Cc(i);d.x=s*o.x+l*n.x,d.y=s*o.y+l*n.y,d.z=s*o.z+l*n.z,d.normalize(),_.push(d.x,d.y,d.z),c.x=t.x+r*d.x,c.y=t.y+r*d.y,c.z=t.z+r*d.z,m.push(c.x,c.y,c.z)}}function a(){for(v=1;v<=x;v++)for(y=1;y<=S;y++){var e=(S+1)*(v-1)+(y-1),t=(S+1)*v+(y-1),a=(S+1)*v+y,r=(S+1)*(v-1)+y;f.push(e,t,r),f.push(t,a,r)}}function s(){for(y=0;y<=x;y++)for(v=0;v<=S;v++)l.x=y/x,l.y=v/S,g.push(l.x,l.y)}bl.call(this),this.type="TubeBufferGeometry",this.parameters={path:b,tubularSegments:x,radius:r,radialSegments:S,closed:h},x=x||64,r=r||1,S=S||8,h=h||!1;var E=b.computeFrenetFrames(x,h);this.tangents=E.tangents,this.normals=E.normals,this.binormals=E.binormals;var c=new nl,d=new nl,l=new el,m=[],_=[],g=[],f=[],y,v;!function(){for(y=0;y<x;y++)w(y);w(!1===h?x:0),s(),a()}(),this.setIndex(f),this.addAttribute("position",new Tt(m,3)),this.addAttribute("normal",new Tt(_,3)),this.addAttribute("uv",new Tt(g,2))}function ms(l,s,c,d,p,u,m){gt.call(this),this.type="TorusKnotGeometry",this.parameters={radius:l,tube:s,tubularSegments:c,radialSegments:d,p:p,q:u},void 0!==m&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new _s(l,s,c,d,p,u)),this.mergeVertices()}function _s(h,C,L,I,R,D){function F(c,t,e,n,i){var r=Cc(c),o=Pc(c),d=e/t*c,s=Cc(d);i.x=.5*(n*(2+s))*r,i.y=.5*(n*(2+s)*o),i.z=.5*(n*Pc(d))}bl.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:h,tube:C,tubularSegments:L,radialSegments:I,p:R,q:D},h=h||100,C=C||40,L=B(L)||64,I=B(I)||8,R=R||2,D=D||3;var a=[],c=[],u=[],p=[],d=new nl,f=new nl,m=new nl,_=new nl,g=new nl,y=new nl,v=new nl,b,s;for(b=0;b<=L;++b){var l=2*(b/L*R*Gn);for(F(l,R,D,h,m),F(l+.01,R,D,h,_),y.subVectors(_,m),v.addVectors(_,m),g.crossVectors(y,v),v.crossVectors(g,y),g.normalize(),v.normalize(),s=0;s<=I;++s){var w=2*(s/I*Gn),x=-C*Cc(w),S=C*Pc(w);d.x=m.x+(x*v.x+S*g.x),d.y=m.y+(x*v.y+S*g.y),d.z=m.z+(x*v.z+S*g.z),c.push(d.x,d.y,d.z),f.subVectors(d,m).normalize(),u.push(f.x,f.y,f.z),p.push(b/L),p.push(s/I)}}for(s=1;s<=L;s++)for(b=1;b<=I;b++){var E=(I+1)*(s-1)+(b-1),M=(I+1)*s+(b-1),T=(I+1)*s+b,A=(I+1)*(s-1)+b;a.push(E,M,A),a.push(M,T,A)}this.setIndex(a),this.addAttribute("position",new Tt(c,3)),this.addAttribute("normal",new Tt(u,3)),this.addAttribute("uv",new Tt(p,2))}function gs(a,o,l,s,c){gt.call(this),this.type="TorusGeometry",this.parameters={radius:a,tube:o,radialSegments:l,tubularSegments:s,arc:c},this.fromBufferGeometry(new ys(a,o,l,s,c)),this.mergeVertices()}function ys(h,x,S,w,E){bl.call(this),this.type="TorusBufferGeometry",this.parameters={radius:h,tube:x,radialSegments:S,tubularSegments:w,arc:E},h=h||100,x=x||40,S=B(S)||8,w=B(w)||6,E=E||2*Gn;var T=[],s=[],l=[],c=[],u=new nl,p=new nl,d=new nl,f,o;for(f=0;f<=S;f++)for(o=0;o<=w;o++){var a=o/w*E,m=2*(f/S*Gn);p.x=(h+x*Cc(m))*Cc(a),p.y=(h+x*Cc(m))*Pc(a),p.z=x*Pc(m),s.push(p.x,p.y,p.z),u.x=h*Cc(a),u.y=h*Pc(a),d.subVectors(p,u).normalize(),l.push(d.x,d.y,d.z),c.push(o/w),c.push(f/S)}for(f=1;f<=S;f++)for(o=1;o<=w;o++){var _=(w+1)*f+o-1,g=(w+1)*(f-1)+o-1,y=(w+1)*(f-1)+o,v=(w+1)*f+o;T.push(_,g,v),T.push(g,y,v)}this.setIndex(T),this.addAttribute("position",new Tt(s,3)),this.addAttribute("normal",new Tt(l,3)),this.addAttribute("uv",new Tt(c,2))}function bs(a,o){gt.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:a,options:o},this.fromBufferGeometry(new xs(a,o)),this.mergeVertices()}function xs(a,t){void 0!==a&&(bl.call(this),this.type="ExtrudeBufferGeometry",a=Array.isArray(a)?a:[a],this.addShapeList(a,t),this.computeVertexNormals())}function vs(a,o){gt.call(this),this.type="TextGeometry",this.parameters={text:a,parameters:o},this.fromBufferGeometry(new Ss(a,o)),this.mergeVertices()}function Ss(a,t){var e=(t=t||{}).font;if(!e||!e.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new gt;var o=e.generateShapes(a,t.size,t.curveSegments);t.amount=void 0===t.height?50:t.height,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),xs.call(this,o,t),this.type="TextBufferGeometry"}function ws(l,s,c,d,p,u,m){gt.call(this),this.type="SphereGeometry",this.parameters={radius:l,widthSegments:s,heightSegments:c,phiStart:d,phiLength:p,thetaStart:u,thetaLength:m},this.fromBufferGeometry(new Es(l,s,c,d,p,u,m)),this.mergeVertices()}function Es(h,T,P,A,L,I,R){bl.call(this),this.type="SphereBufferGeometry",this.parameters={radius:h,widthSegments:T,heightSegments:P,phiStart:A,phiLength:L,thetaStart:I,thetaLength:R},h=h||50,T=C(3,B(T)||8),P=C(2,B(P)||6),A=void 0===A?0:A,L=void 0===L?2*Gn:L;var D=(I=void 0===I?0:I)+(R=void 0===R?Gn:R),c=0,u=[],p=new nl,d=new nl,f=[],m=[],_=[],g=[],y,s;for(s=0;s<=P;s++){var l=[],v=s/P;for(y=0;y<=T;y++){var b=y/T;p.x=-h*Cc(A+b*L)*Pc(I+v*R),p.y=h*Cc(I+v*R),p.z=h*Pc(A+b*L)*Pc(I+v*R),m.push(p.x,p.y,p.z),d.set(p.x,p.y,p.z).normalize(),_.push(d.x,d.y,d.z),g.push(b,1-v),l.push(c++)}u.push(l)}for(s=0;s<P;s++)for(y=0;y<T;y++){var w=u[s][y+1],x=u[s][y],S=u[s+1][y],E=u[s+1][y+1];(0!==s||0<I)&&f.push(w,x,E),(s!==P-1||D<Gn)&&f.push(x,S,E)}this.setIndex(f),this.addAttribute("position",new Tt(m,3)),this.addAttribute("normal",new Tt(_,3)),this.addAttribute("uv",new Tt(g,2))}function Ts(a,l,s,c,d,p){gt.call(this),this.type="RingGeometry",this.parameters={innerRadius:a,outerRadius:l,thetaSegments:s,phiSegments:c,thetaStart:d,thetaLength:p},this.fromBufferGeometry(new Ms(a,l,s,c,d,p)),this.mergeVertices()}function Ms(r,h,E,T,M,P){bl.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:r,outerRadius:h,thetaSegments:E,phiSegments:T,thetaStart:M,thetaLength:P},r=r||20,h=h||50,M=void 0===M?0:M,P=void 0===P?2*Gn:P,E=void 0===E?8:C(3,E);var A=[],u=[],p=[],d=[],f=r,m=(h-r)/(T=void 0===T?1:C(1,T)),_=new nl,g=new el,y,s,l;for(s=0;s<=T;s++){for(l=0;l<=E;l++)y=M+l/E*P,_.x=f*Cc(y),_.y=f*Pc(y),u.push(_.x,_.y,_.z),p.push(0,0,1),g.x=(_.x/h+1)/2,g.y=(_.y/h+1)/2,d.push(g.x,g.y);f+=m}for(s=0;s<T;s++){var c=s*(E+1);for(l=0;l<E;l++){var v=y=l+c,b=y+E+1,w=y+E+2,x=y+1;A.push(v,b,x),A.push(b,w,x)}}this.setIndex(A),this.addAttribute("position",new Tt(u,3)),this.addAttribute("normal",new Tt(p,3)),this.addAttribute("uv",new Tt(d,2))}function Ps(a,o,r,l){gt.call(this),this.type="LatheGeometry",this.parameters={points:a,segments:o,phiStart:r,phiLength:l},this.fromBufferGeometry(new Cs(a,o,r,l)),this.mergeVertices()}function Cs(r,h,T,P){bl.call(this),this.type="LatheBufferGeometry",this.parameters={points:r,segments:h,phiStart:T,phiLength:P},h=B(h)||12,T=T||0,P=P||2*Gn,P=rd.clamp(P,0,2*Gn);var C=[],l=[],c=[],u=1/h,p=new nl,d=new el,f,o,a;for(o=0;o<=h;o++){var s=T+o*u*P,m=Pc(s),_=Cc(s);for(a=0;a<=r.length-1;a++)p.x=r[a].x*m,p.y=r[a].y,p.z=r[a].x*_,l.push(p.x,p.y,p.z),d.x=o/h,d.y=a/(r.length-1),c.push(d.x,d.y)}for(o=0;o<h;o++)for(a=0;a<r.length-1;a++){var g=f=a+o*r.length,y=f+r.length,v=f+r.length+1,b=f+1;C.push(g,y,b),C.push(y,v,b)}if(this.setIndex(C),this.addAttribute("position",new Tt(l,3)),this.addAttribute("uv",new Tt(c,2)),this.computeVertexNormals(),P===2*Gn){var w=this.attributes.normal.array,x=new nl,S=new nl,E=new nl;for(f=3*(h*r.length),o=0,a=0;o<r.length;o++,a+=3)x.x=w[a+0],x.y=w[a+1],x.z=w[a+2],S.x=w[f+a+0],S.y=w[f+a+1],S.z=w[f+a+2],E.addVectors(x,S).normalize(),w[a+0]=w[f+a+0]=E.x,w[a+1]=w[f+a+1]=E.y,w[a+2]=w[f+a+2]=E.z}}function As(a,o){gt.call(this),this.type="ShapeGeometry","object"==("undefined"===typeof o?"undefined":babelHelpers.typeof(o))&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),o=o.curveSegments),this.parameters={shapes:a,curveSegments:o},this.fromBufferGeometry(new Ls(a,o)),this.mergeVertices()}function Ls(d,b){function p(e){var t=i.length/3,a=e.extractPoints(b),l=a.shape,p=a.holes,d,h,x;if(!1===Ya.isClockWise(l))for(l=l.reverse(),d=0,h=p.length;d<h;d++)x=p[d],!0===Ya.isClockWise(x)&&(p[d]=x.reverse());var c=Ya.triangulateShape(l,p);for(d=0,h=p.length;d<h;d++)x=p[d],l=l.concat(x);for(d=0,h=l.length;d<h;d++){var f=l[d];i.push(f.x,f.y,0),r.push(0,0,1),o.push(f.x,f.y)}for(d=0,h=c.length;d<h;d++){var m=c[d],_=m[0]+t,g=m[1]+t,y=m[2]+t;u.push(_,g,y),s+=3}}bl.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:d,curveSegments:b},b=b||12;var u=[],i=[],r=[],o=[],a=0,s=0;if(!1===Array.isArray(d))p(d);else for(var n=0;n<d.length;n++)p(d[n]),this.addGroup(a,s,n),a+=s,s=0;this.setIndex(u),this.addAttribute("position",new Tt(i,3)),this.addAttribute("normal",new Tt(r,3)),this.addAttribute("uv",new Tt(o,2))}function Is(b,t){bl.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:t},t=void 0===t?1:t;var x=[],a=Cc(rd.DEG2RAD*t),s=[0,0],l={},c=["a","b","c"],h,n,i,r;b.isBufferGeometry?(r=new gt).fromBufferGeometry(b):r=b.clone(),r.mergeVertices(),r.computeFaceNormals();for(var o=r.vertices,u=r.faces,p=0,v=u.length;p<v;p++)for(var f=u[p],m=0;3>m;m++)h=f[c[m]],n=f[c[(m+1)%3]],s[0]=U(h,n),s[1]=C(h,n),void 0===l[i=s[0]+","+s[1]]?l[i]={index1:s[0],index2:s[1],face1:p,face2:void 0}:l[i].face2=p;for(i in l){var _=l[i];if(void 0===_.face2||u[_.face1].normal.dot(u[_.face2].normal)<=a){var g=o[_.index1];x.push(g.x,g.y,g.z),g=o[_.index2],x.push(g.x,g.y,g.z)}}this.addAttribute("position",new Tt(x,3))}function Rs(l,c,d,p,u,m,_,h){gt.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:l,radiusBottom:c,height:d,radialSegments:p,heightSegments:u,openEnded:m,thetaStart:_,thetaLength:h},this.fromBufferGeometry(new Ds(l,c,d,p,u,m,_,h)),this.mergeVertices()}function Ds(h,F,k,O,U,r,w,C){function b(e){var t=new el,r=new nl,n=0,i=!0===e?h:F,l=!0===e?1:-1,s,o,a;for(o=m,s=1;s<=O;s++)p.push(0,L*l,0),d.push(0,l,0),f.push(.5,.5),m++;for(a=m,s=0;s<=O;s++){var _=s/O*C+w,g=Cc(_),b=Pc(_);r.x=i*b,r.y=L*l,r.z=i*g,p.push(r.x,r.y,r.z),d.push(0,l,0),t.x=.5*g+.5,t.y=.5*b*l+.5,f.push(t.x,t.y),m++}for(s=0;s<O;s++){var x=o+s,v=a+s;!0===e?u.push(v,v+1,x):u.push(v+1,v,x),n+=3}N.addGroup(y,n,!0===e?1:2),y+=n}bl.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:h,radiusBottom:F,height:k,radialSegments:O,heightSegments:U,openEnded:r,thetaStart:w,thetaLength:C};var N=this;h=void 0===h?20:h,F=void 0===F?20:F,k=void 0===k?100:k,O=B(O)||8,U=B(U)||1,r=void 0!==r&&r,w=void 0===w?0:w,C=void 0===C?2*Gn:C;var u=[],p=[],d=[],f=[],m=0,_=[],L=k/2,y=0;!function(){var e=new nl,t=new nl,o=0,n=(F-h)/k,i,r;for(r=0;r<=U;r++){var a=[],l=r/U,s=l*(F-h)+h;for(i=0;i<=O;i++){var c=i/O,g=c*C+w,b=Pc(g),x=Cc(g);t.x=s*b,t.y=-l*k+L,t.z=s*x,p.push(t.x,t.y,t.z),e.set(b,n,x).normalize(),d.push(e.x,e.y,e.z),f.push(c,1-l),a.push(m++)}_.push(a)}for(i=0;i<O;i++)for(r=0;r<U;r++){var v=_[r][i],S=_[r+1][i],T=_[r+1][i+1],M=_[r][i+1];u.push(v,S,M),u.push(S,T,M),o+=6}N.addGroup(y,o,0),y+=o}(),!1===r&&(0<h&&b(!0),0<F&&b(!1)),this.setIndex(u),this.addAttribute("position",new Tt(p,3)),this.addAttribute("normal",new Tt(d,3)),this.addAttribute("uv",new Tt(f,2))}function Fs(l,s,c,d,p,u,m){Rs.call(this,0,l,s,c,d,p,u,m),this.type="ConeGeometry",this.parameters={radius:l,height:s,radialSegments:c,heightSegments:d,openEnded:p,thetaStart:u,thetaLength:m}}function ks(l,s,c,d,p,u,m){Ds.call(this,0,l,s,c,d,p,u,m),this.type="ConeBufferGeometry",this.parameters={radius:l,height:s,radialSegments:c,heightSegments:d,openEnded:p,thetaStart:u,thetaLength:m}}function Os(a,o,r,l){gt.call(this),this.type="CircleGeometry",this.parameters={radius:a,segments:o,thetaStart:r,thetaLength:l},this.fromBufferGeometry(new Us(a,o,r,l)),this.mergeVertices()}function Us(r,m,_,h){bl.call(this),this.type="CircleBufferGeometry",this.parameters={radius:r,segments:m,thetaStart:_,thetaLength:h},r=r||50,m=void 0===m?8:C(3,m),_=void 0===_?0:_,h=void 0===h?2*Gn:h;var g=[],s=[],l=[],c=[],u=new nl,p=new el,d,o;for(s.push(0,0,0),l.push(0,0,1),c.push(.5,.5),o=0,d=3;o<=m;o++,d+=3){var a=_+o/m*h;u.x=r*Cc(a),u.y=r*Pc(a),s.push(u.x,u.y,u.z),l.push(0,0,1),p.x=(s[d]/r+1)/2,p.y=(s[d+1]/r+1)/2,c.push(p.x,p.y)}for(d=1;d<=m;d++)g.push(d,d+1,0);this.setIndex(g),this.addAttribute("position",new Tt(s,3)),this.addAttribute("normal",new Tt(l,3)),this.addAttribute("uv",new Tt(c,2))}function Ns(e){K.call(this),this.type="ShadowMaterial",this.color=new X(0),this.opacity=1,this.lights=!0,this.transparent=!0,this.setValues(e)}function Bs(e){Q.call(this,e),this.type="RawShaderMaterial"}function zs(e){K.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new X(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new X(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new el(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Gs(e){zs.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(e)}function Hs(e){K.call(this),this.type="MeshPhongMaterial",this.color=new X(16777215),this.specular=new X(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new X(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new el(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=yo,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Vs(e){Hs.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(e)}function Ws(e){K.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new el(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function js(e){K.call(this),this.type="MeshLambertMaterial",this.color=new X(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new X(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=yo,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Xs(e){Rl.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}function qs(l,t,e){var n=this,i=!1,r=0,o=0;this.onStart=void 0,this.onLoad=l,this.onProgress=t,this.onError=e,this.itemStart=function(e){o++,!1===i&&void 0!==n.onStart&&n.onStart(e,r,o),i=!0},this.itemEnd=function(e){r++,void 0!==n.onProgress&&n.onProgress(e,r,o),r===o&&(i=!1,void 0!==n.onLoad&&n.onLoad())},this.itemError=function(e){void 0!==n.onError&&n.onError(e)}}function Bn(e){this.manager=void 0===e?Qa:e}function zn(e){this.manager=void 0===e?Qa:e}function jn(e){this.manager=void 0===e?Qa:e}function Vn(a,t){ut.call(this),this.type="Light",this.color=new X(a),this.intensity=void 0===t?1:t,this.receiveShadow=void 0}function Ys(a,t,e){Vn.call(this,a,e),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(ut.DefaultUp),this.updateMatrix(),this.groundColor=new X(t)}function Zs(e){this.camera=e,this.bias=0,this.radius=1,this.mapSize=new el(512,512),this.map=null,this.matrix=new il}function Xn(){Zs.call(this,new fl(50,1,.5,500))}function Js(a,t,e,n,i,r){Vn.call(this,a,t),this.type="SpotLight",this.position.copy(ut.DefaultUp),this.updateMatrix(),this.target=new ut,Object.defineProperty(this,"power",{get:function(){return this.intensity*Gn},set:function(e){this.intensity=e/Gn}}),this.distance=void 0===e?0:e,this.angle=void 0===n?Gn/3:n,this.penumbra=void 0===i?0:i,this.decay=void 0===r?1:r,this.shadow=new Xn}function Ks(a,t,e,o){Vn.call(this,a,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Gn},set:function(e){this.intensity=e/(4*Gn)}}),this.distance=void 0===e?0:e,this.decay=void 0===o?1:o,this.shadow=new Zs(new fl(90,1,.5,500))}function Qs(){Zs.call(this,new ht(-5,5,5,-5,.5,500))}function $s(a,t){Vn.call(this,a,t),this.type="DirectionalLight",this.position.copy(ut.DefaultUp),this.updateMatrix(),this.target=new ut,this.shadow=new Qs}function ec(a,t){Vn.call(this,a,t),this.type="AmbientLight",this.castShadow=void 0}function tc(a,t,e,o){Vn.call(this,a,t),this.type="RectAreaLight",this.position.set(0,1,0),this.updateMatrix(),this.width=void 0===e?10:e,this.height=void 0===o?10:o}function ac(a,t,e,o){this.parameterPositions=a,this._cachedIndex=0,this.resultBuffer=void 0===o?new t.constructor(e):o,this.sampleValues=t,this.valueSize=e}function ei(a,t,e,o){ac.call(this,a,t,e,o),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function oc(a,t,e,o){ac.call(this,a,t,e,o)}function rc(a,t,e,o){ac.call(this,a,t,e,o)}function nc(a,t,e,o){if(void 0===a)throw new Error("track name is undefined");if(void 0===t||0===t.length)throw new Error("no keyframes in track named "+a);this.name=a,this.times=$a.convertArray(t,this.TimeBufferType),this.values=$a.convertArray(e,this.ValueBufferType),this.setInterpolation(o||this.DefaultInterpolation),this.validate(),this.optimize()}function oi(a,t,e,o){nc.call(this,a,t,e,o)}function ic(a,t,e,o){ac.call(this,a,t,e,o)}function lc(a,t,e,o){nc.call(this,a,t,e,o)}function sc(a,t,e,o){nc.call(this,a,t,e,o)}function cc(a,t,e,o){nc.call(this,a,t,e,o)}function dc(a,t,e){nc.call(this,a,t,e)}function pc(a,t,e,o){nc.call(this,a,t,e,o)}function uc(){nc.apply(this,arguments)}function di(a,t,e){this.name=a,this.tracks=e,this.duration=void 0===t?-1:t,this.uuid=rd.generateUUID(),0>this.duration&&this.resetDuration(),this.optimize()}function fi(e){this.manager=void 0===e?Qa:e,this.textures={}}function mi(e){this.manager=void 0===e?Qa:e}function _i(){this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){}}function gi(e){"boolean"==typeof e&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),e=void 0),this.manager=void 0===e?Qa:e,this.withCredentials=!1}function yi(l,t,e,n,i){var r=.5*(n-t),o=.5*(i-e),a=l*l;return(2*e-2*n+r+o)*(l*a)+(-3*e+3*n-2*r-o)*a+r*l+e}function vi(a,t){var e=1-a;return e*e*t}function bi(a,t){return 2*(1-a)*a*t}function wi(a,t){return a*a*t}function xi(a,t,e,o){return vi(a,t)+bi(a,e)+wi(a,o)}function Si(a,t){var e=1-a;return e*e*e*t}function Ei(a,t){var e=1-a;return 3*e*e*a*t}function Mi(a,t){return 3*(1-a)*a*a*t}function Ti(a,t){return a*a*a*t}function Ai(a,t,e,o,n){return Si(a,t)+Ei(a,e)+Mi(a,o)+Ti(a,n)}function Pi(){this.arcLengthDivisions=200}function Ii(a,t){Pi.call(this),this.v1=a,this.v2=t}function Ci(){Pi.call(this),this.curves=[],this.autoClose=!1}function mc(l,t,e,n,i,r,o,a){Pi.call(this),this.aX=l,this.aY=t,this.xRadius=e,this.yRadius=n,this.aStartAngle=i,this.aEndAngle=r,this.aClockwise=o,this.aRotation=a||0}function Ri(e){Pi.call(this),this.points=void 0===e?[]:e}function Di(a,t,e,o){Pi.call(this),this.v0=a,this.v1=t,this.v2=e,this.v3=o}function ki(a,t,e){Pi.call(this),this.v0=a,this.v1=t,this.v2=e}function Oi(e){Ci.call(this),this.currentPoint=new el,e&&this.fromPoints(e)}function Fi(){Oi.apply(this,arguments),this.holes=[]}function _c(){this.subPaths=[],this.currentPath=null}function Ni(e){this.data=e}function Bi(e){this.manager=void 0===e?Qa:e}function zi(l,t,e){ut.call(this),this.type="CubeCamera";var d=new fl(90,1,l,t);d.up.set(0,-1,0),d.lookAt(new nl(1,0,0)),this.add(d);var i=new fl(90,1,l,t);i.up.set(0,-1,0),i.lookAt(new nl(-1,0,0)),this.add(i);var r=new fl(90,1,l,t);r.up.set(0,0,1),r.lookAt(new nl(0,1,0)),this.add(r);var o=new fl(90,1,l,t);o.up.set(0,0,-1),o.lookAt(new nl(0,-1,0)),this.add(o);var a=new fl(90,1,l,t);a.up.set(0,-1,0),a.lookAt(new nl(0,0,1)),this.add(a);var s=new fl(90,1,l,t);s.up.set(0,-1,0),s.lookAt(new nl(0,0,-1)),this.add(s);this.renderTarget=new ol(e,e,{format:ea,magFilter:Kc,minFilter:Kc}),this.renderTarget.texture.name="CubeCamera",this.update=function(c,t){null===this.parent&&this.updateMatrixWorld();var e=this.renderTarget,n=e.texture.generateMipmaps;e.texture.generateMipmaps=!1,e.activeCubeFace=0,c.render(t,d,e),e.activeCubeFace=1,c.render(t,i,e),e.activeCubeFace=2,c.render(t,r,e),e.activeCubeFace=3,c.render(t,o,e),e.activeCubeFace=4,c.render(t,a,e),e.texture.generateMipmaps=n,e.activeCubeFace=5,c.render(t,s,e),c.setRenderTarget(null)},this.clear=function(a,t,e,n){for(var i=this.renderTarget,r=0;6>r;r++)i.activeCubeFace=r,a.setRenderTarget(i),a.clear(t,e,n);a.setRenderTarget(null)}}function Gi(){ut.call(this),this.type="AudioListener",this.context=as.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null}function hc(e){ut.call(this),this.type="Audio",this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.loop=!1,this.startTime=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function gc(e){hc.call(this,e),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function fc(a,t){this.analyser=a.context.createAnalyser(),this.analyser.fftSize=void 0===t?2048:t,this.data=new Uint8Array(this.analyser.frequencyBinCount),a.getOutput().connect(this.analyser)}function Wi(a,t,e){this.binding=a,this.valueSize=e;var o=Float64Array,r;"quaternion"===t?r=this._slerp:"string"===t||"bool"===t?(o=Array,r=this._select):r=this._lerp;this.buffer=new o(4*e),this._mixBufferRegion=r,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}function qi(a,t,e){var o=e||yc.parseTrackName(t);this._targetGroup=a,this._bindings=a.subscribe_(t,o)}function yc(a,t,e){this.path=t,this.parsedPath=e||yc.parseTrackName(t),this.node=yc.findNode(a,this.parsedPath.nodeName)||a,this.rootNode=a}function Yi(c,t,e){this._mixer=c,this._clip=t,this._localRoot=e||null;for(var n=t.tracks,i=n.length,r=Array(i),o={endingStart:ga,endingEnd:ga},a=0,s;a!==i;++a)s=n[a].createInterpolant(null),r[a]=s,s.settings=o;this._interpolantSettings=o,this._interpolants=r,this._propertyBindings=Array(i),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=_a,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function Zi(e){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}function Ji(){bl.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function bc(a,t,e,o){this.uuid=rd.generateUUID(),this.data=a,this.itemSize=t,this.offset=e,this.normalized=!0===o}function Qi(a,t){this.uuid=rd.generateUUID(),this.array=a,this.stride=t,this.count=void 0===a?0:a.length/t,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=function(){},this.version=0}function $i(a,t,e){Qi.call(this,a,t),this.meshPerAttribute=e||1}function xc(a,t,e){yt.call(this,a,t),this.meshPerAttribute=e||1}function vc(a,t){return a.distance-t.distance}function nr(l,t,e,n){if(!1!==l.visible&&(l.raycast(t,e),!0===n))for(var i=l.children,r=0,o=i.length;r<o;r++)nr(i[r],t,e,!0)}function ir(e){ut.call(this),this.material=e,this.render=function(){}}function rr(d,t,e,n){this.object=d,this.size=void 0===t?1:t;var i=void 0===e?16711680:e,p=void 0===n?1:n,u=0,a=this.object.geometry;a&&a.isGeometry?u=3*a.faces.length:a&&a.isBufferGeometry&&(u=a.attributes.normal.count);var s=new bl,l=new Tt(3*(2*u),3);s.addAttribute("position",l),Fl.call(this,s,new Rl({color:i,linewidth:p})),this.matrixAutoUpdate=!1,this.update()}function or(c,t){ut.call(this),this.light=c,this.light.updateMatrixWorld(),this.matrix=c.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;for(var e=new bl,n=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],i=0,r=1;32>i;i++,r++){var o=2*(i/32*Gn),a=2*(r/32*Gn);n.push(Cc(o),Pc(o),1,Cc(a),Pc(a),1)}e.addAttribute("position",new Tt(n,3));var s=new Rl({fog:!1});this.cone=new Fl(e,s),this.add(this.cone),this.update()}function ar(a){var t=[];a&&a.isBone&&t.push(a);for(var e=0;e<a.children.length;e++)t.push.apply(t,ar(a.children[e]));return t}function sr(d){for(var t=ar(d),e=new bl,n=[],i=[],r=new X(0,0,1),o=new X(0,1,0),a=0,s;a<t.length;a++)s=t[a],s.parent&&s.parent.isBone&&(n.push(0,0,0),n.push(0,0,0),i.push(r.r,r.g,r.b),i.push(o.r,o.g,o.b));e.addAttribute("position",new Tt(n,3)),e.addAttribute("color",new Tt(i,3));var l=new Rl({vertexColors:Ic,depthTest:!1,depthWrite:!1,transparent:!0});Fl.call(this,e,l),this.root=d,this.bones=t,this.matrix=d.matrixWorld,this.matrixAutoUpdate=!1,this.onBeforeRender()}function lr(a,t,e){this.light=a,this.light.updateMatrixWorld(),this.color=e;var o=new Es(t,4,2),n=new Sl({wireframe:!0,fog:!1});Bt.call(this,o,n),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function cr(a,t){ut.call(this),this.light=a,this.light.updateMatrixWorld(),this.matrix=a.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;var e=new Rl({fog:!1}),o=new bl;o.addAttribute("position",new yt(new Float32Array(15),3)),this.line=new Dl(o,e),this.add(this.line),this.update()}function hr(a,t,e){ut.call(this),this.light=a,this.light.updateMatrixWorld(),this.matrix=a.matrixWorld,this.matrixAutoUpdate=!1,this.color=e;var n=new ql(t);n.rotateY(.5*Gn),this.material=new Sl({wireframe:!0,fog:!1}),void 0===this.color&&(this.material.vertexColors=Ic);var i=n.getAttribute("position"),r=new Float32Array(3*i.count);n.addAttribute("color",new yt(r,3)),this.add(new Bt(n,this.material)),this.update()}function ur(m,t,e,n){m=m||10,t=t||10,e=new X(void 0===e?4473924:e),n=new X(void 0===n?8947848:n);for(var i=t/2,r=m/t,o=m/2,_=[],s=[],l=0,c=0,h=-o;l<=t;l++,h+=r){_.push(-o,0,h,o,0,h),_.push(h,0,-o,h,0,o);var u=l===i?e:n;u.toArray(s,c),c+=3,u.toArray(s,c),c+=3,u.toArray(s,c),c+=3,u.toArray(s,c),c+=3}var p=new bl;p.addAttribute("position",new Tt(_,3)),p.addAttribute("color",new Tt(s,3));var d=new Rl({vertexColors:Ic});Fl.call(this,p,d)}function pr(g,t,e,n,i,r){g=g||10,t=t||16,e=e||8,n=n||64,i=new X(void 0===i?4473924:i),r=new X(void 0===r?8947848:r);var o=[],d=[],f,a,s,l,c,h,u;for(l=0;l<=t;l++)s=l/t*(2*Gn),f=Pc(s)*g,a=Cc(s)*g,o.push(0,0,0),o.push(f,0,a),u=1&l?i:r,d.push(u.r,u.g,u.b),d.push(u.r,u.g,u.b);for(l=0;l<=e;l++)for(u=1&l?i:r,h=g-g/e*l,c=0;c<n;c++)s=c/n*(2*Gn),f=Pc(s)*h,a=Cc(s)*h,o.push(f,0,a),d.push(u.r,u.g,u.b),s=(c+1)/n*(2*Gn),f=Pc(s)*h,a=Cc(s)*h,o.push(f,0,a),d.push(u.r,u.g,u.b);var p=new bl;p.addAttribute("position",new Tt(o,3)),p.addAttribute("color",new Tt(d,3));var m=new Rl({vertexColors:Ic});Fl.call(this,p,m)}function dr(d,t,e,n){this.object=d,this.size=void 0===t?1:t;var i=void 0===e?16776960:e,p=void 0===n?1:n,u=0,a=this.object.geometry;a&&a.isGeometry?u=a.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var s=new bl,l=new Tt(3*(2*u),3);s.addAttribute("position",l),Fl.call(this,s,new Rl({color:i,linewidth:p})),this.matrixAutoUpdate=!1,this.update()}function fr(a,t,o){ut.call(this),this.light=a,this.light.updateMatrixWorld(),this.matrix=a.matrixWorld,this.matrixAutoUpdate=!1,this.color=o,void 0===t&&(t=1);var n=new bl;n.addAttribute("position",new Tt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));var i=new Rl({fog:!1});this.lightPlane=new Dl(n,i),this.add(this.lightPlane),(n=new bl).addAttribute("position",new Tt([0,0,0,0,0,1],3)),this.targetLine=new Dl(n,i),this.add(this.targetLine),this.update()}function mr(d){function t(a,t,o){m(a,o),m(t,o)}function m(n,t){r.push(0,0,0),o.push(t.r,t.g,t.b),void 0===a[n]&&(a[n]=[]),a[n].push(r.length/3-1)}var e=new bl,n=new Rl({color:16777215,vertexColors:Br}),r=[],o=[],a={},i=new X(16755200),l=new X(16711680),s=new X(43775),c=new X(16777215),u=new X(3355443);t("n1","n2",i),t("n2","n4",i),t("n4","n3",i),t("n3","n1",i),t("f1","f2",i),t("f2","f4",i),t("f4","f3",i),t("f3","f1",i),t("n1","f1",i),t("n2","f2",i),t("n3","f3",i),t("n4","f4",i),t("p","n1",l),t("p","n2",l),t("p","n3",l),t("p","n4",l),t("u1","u2",s),t("u2","u3",s),t("u3","u1",s),t("c","t",c),t("p","c",u),t("cn1","cn2",u),t("cn3","cn4",u),t("cf1","cf2",u),t("cf3","cf4",u),e.addAttribute("position",new Tt(r,3)),e.addAttribute("color",new Tt(o,3)),Fl.call(this,e,n),this.camera=d,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=d.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update()}function _r(a,t){this.object=a,void 0===t&&(t=16776960);var o=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),n=new Float32Array(24),i=new bl;i.setIndex(new yt(o,1)),i.addAttribute("position",new yt(n,3)),Fl.call(this,i,new Rl({color:t})),this.matrixAutoUpdate=!1,this.update()}function gr(a,t){this.type="Box3Helper",this.box=a;var e=void 0===t?16776960:t,r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new bl;i.setIndex(new yt(r,1)),i.addAttribute("position",new Tt([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),Fl.call(this,i,new Rl({color:e})),this.geometry.computeBoundingSphere(),this.onBeforeRender()}function yr(a,t,e){this.type="PlaneHelper",this.plane=a,this.size=void 0===t?1:t;var r=void 0===e?16776960:e,n=new bl;n.addAttribute("position",new Tt([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),n.computeBoundingSphere(),Dl.call(this,n,new Rl({color:r}));var o=new bl;o.addAttribute("position",new Tt([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),o.computeBoundingSphere(),this.add(new Bt(o,new Sl({color:r,opacity:.2,transparent:!0,depthWrite:!1}))),this.onBeforeRender()}function vr(a,t,e,n,l,r){ut.call(this),void 0===n&&(n=16776960),void 0===e&&(e=1),void 0===l&&(l=.2*e),void 0===r&&(r=.2*l),void 0===ss&&((ss=new bl).addAttribute("position",new Tt([0,0,0,0,1,0],3)),(cs=new Ds(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(t),this.line=new Dl(ss,new Rl({color:n})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Bt(cs,new Sl({color:n})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(a),this.setLength(e,l,r)}function br(a){var t=[0,0,0,a=a||1,0,0,0,0,0,0,a,0,0,0,0,0,0,a],e=new bl;e.addAttribute("position",new Tt(t,3)),e.addAttribute("color",new Tt([1,0,0,1,0.6,0,0,1,0,0.6,1,0,0,0,1,0,0.6,1],3));var o=new Rl({vertexColors:Ic});Fl.call(this,e,o)}function wr(){function d(r,c,o,a){l=r,e=o,n=-3*r+3*c-2*o-a,i=2*r-2*c+o+a}var l=0,e=0,n=0,i=0;return{initCatmullRom:function(t,e,a,n,r){d(e,a,r*(a-t),r*(n-e))},initNonuniformCatmullRom:function(t,e,n,i,r,o,a){var s=(e-t)/r-(n-t)/(r+o)+(n-e)/o,l=(n-e)/o-(i-e)/(o+a)+(i-n)/a;d(e,n,s*=o,l*=o)},calc:function(a){var t=a*a;return l+e*a+n*t+i*(t*a)}}}function xr(e){Pi.call(this),2>e.length&&console.warn("THREE.CatmullRomCurve3: Points array needs at least two entries."),this.points=e||[],this.closed=!1}function Sr(a,t,e,o){Pi.call(this),this.v0=a,this.v1=t,this.v2=e,this.v3=o}function Er(a,t,e){Pi.call(this),this.v0=a,this.v1=t,this.v2=e}function Mr(a,t){Pi.call(this),this.v1=a,this.v2=t}function Tr(a,t,e,n,i,r){mc.call(this,a,t,e,e,n,i,r)}function Ar(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),xr.call(this,e),this.type="catmullrom"}var Pr=Math.tan,Sc=Math.atan,wc=Math.acos,Ec=Math.sign,Tc=Number.isInteger,Mc=Number.EPSILON,Pc=Math.sin,Cc=Math.cos;e.d(t,"b",function(){return n}),e.d(t,"c",function(){return il}),e.d(t,"g",function(){return al}),e.d(t,"f",function(){return nl}),e.d(t,"e",function(){return el}),e.d(t,"d",function(){return rl}),e.d(t,"a",function(){return X}),void 0===Mc&&(Mc=2.220446049250313e-16),void 0===Tc&&(Tc=function(e){return"number"==typeof e&&isFinite(e)&&B(e)===e}),void 0===Ec&&(Ec=function(e){return 0>e?-1:0<e?1:+e}),void 0===Function.prototype.name&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(a){if(void 0===a||null===a)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(a),e=1,o;e<arguments.length;e++)if(o=arguments[e],void 0!==o&&null!==o)for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n]);return t}),Object.assign(n.prototype,{addEventListener:function(a,t){void 0===this._listeners&&(this._listeners={});var e=this._listeners;void 0===e[a]&&(e[a]=[]),-1===e[a].indexOf(t)&&e[a].push(t)},hasEventListener:function(a,t){if(void 0===this._listeners)return!1;var e=this._listeners;return void 0!==e[a]&&-1!==e[a].indexOf(t)},removeEventListener:function(a,t){if(void 0!==this._listeners){var e=this._listeners[a];if(void 0!==e){var o=e.indexOf(t);-1!==o&&e.splice(o,1)}}},dispatchEvent:function(a){if(void 0!==this._listeners){var t=this._listeners[a.type];if(void 0!==t){a.target=this;for(var e=t.slice(0),o=0,n=e.length;o<n;o++)e[o].call(this,a)}}}});var Ac="87",Ir=0,Cr=1,Lr=2,Rr=0,Dr=1,kr=2,Or=0,Fr=1,Lc=2,Nr=0,Br=1,Ic=2,Rc=0,Dc=1,Fc=2,kc=3,Oc=4,Uc=5,Nc=100,Yr=101,Zr=102,Jr=103,Kr=104,Qr=200,$r=201,to=202,eo=203,no=204,io=205,ro=206,oo=207,ao=208,so=209,lo=210,co=0,ho=1,uo=2,po=3,fo=4,mo=5,_o=6,go=7,yo=0,vo=1,bo=2,wo=0,xo=1,So=2,Eo=3,Mo=4,To=301,Bc=302,zc=303,Gc=304,Hc=305,Vc=306,Wc=307,jc=1e3,Xc=1001,qc=1002,Yc=1003,Zc=1004,Jc=1005,Kc=1006,Qc=1007,$c=1008,ed=1009,Ho=1010,Vo=1011,Wo=1012,qo=1013,Xo=1014,Yo=1015,Zo=1016,Jo=1017,Ko=1018,Qo=1019,$o=1020,ta=1021,ea=1022,td=1023,ad=1024,ra=1025,oa=1026,aa=1027,sa=2001,la=2002,ca=2003,ha=2004,ua=2100,pa=2101,da=2102,fa=2103,ma=2151,_a=2201,ga=2400,od=0,va=1,ba=2,wa=3e3,xa=3001,Sa=3007,Ea=3002,Ma=3004,Ta=3005,Aa=3006,Pa=3200,Ia=3201,rd={DEG2RAD:Gn/180,RAD2DEG:180/Gn,generateUUID:function(){var a=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],e=Array(36),o=0,n;return function(){for(var t=0;36>t;t++)8===t||13===t||18===t||23===t?e[t]="-":14===t?e[t]="4":(2>=o&&(o=0|33554432+16777216*Math.random()),n=15&o,o>>=4,e[t]=a[19===t?8|3&n:n]);return e.join("")}}(),clamp:function(a,t,e){return C(t,U(e,a))},euclideanModulo:function(a,t){return(a%t+t)%t},mapLinear:function(a,t,e,o,n){return o+(a-t)*(n-o)/(e-t)},lerp:function(a,t,e){return(1-e)*a+e*t},smoothstep:function(a,t,e){return a<=t?0:a>=e?1:(a=(a-t)/(e-t))*a*(3-2*a)},smootherstep:function(a,t,e){return a<=t?0:a>=e?1:(a=(a-t)/(e-t))*a*a*(a*(6*a-15)+10)},randInt:function(a,t){return a+B(Math.random()*(t-a+1))},randFloat:function(a,t){return a+Math.random()*(t-a)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*rd.DEG2RAD},radToDeg:function(e){return e*rd.RAD2DEG},isPowerOfTwo:function(e){return 0==(e&e-1)&&0!==e},nearestPowerOfTwo:function(e){return S(2,P(i(e)/o))},nextPowerOfTwo:function(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e}};Object.defineProperties(el.prototype,{width:{get:function(){return this.x},set:function(e){this.x=e}},height:{get:function(){return this.y},set:function(e){this.y=e}}}),Object.assign(el.prototype,{isVector2:!0,set:function(a,t){return this.x=a,this.y=t,this},setScalar:function(e){return this.x=e,this.y=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(a,t){switch(a){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+a);}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e);}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(a,t){return void 0===t?(this.x+=a.x,this.y+=a.y,this):(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,t))},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(a,t){return this.x=a.x+t.x,this.y=a.y+t.y,this},addScaledVector:function(a,t){return this.x+=a.x*t,this.y+=a.y*t,this},sub:function(a,t){return void 0===t?(this.x-=a.x,this.y-=a.y,this):(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,t))},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(a,t){return this.x=a.x-t.x,this.y=a.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=U(this.x,e.x),this.y=U(this.y,e.y),this},max:function(e){return this.x=C(this.x,e.x),this.y=C(this.y,e.y),this},clamp:function(a,t){return this.x=C(a.x,U(t.x,this.x)),this.y=C(a.y,U(t.y,this.y)),this},clampScalar:function(){var a=new el,t=new el;return function(e,o){return a.set(e,e),t.set(o,o),this.clamp(a,t)}}(),clampLength:function(a,t){var e=this.length();return this.divideScalar(e||1).multiplyScalar(C(a,U(t,e)))},floor:function(){return this.x=B(this.x),this.y=B(this.y),this},ceil:function(){return this.x=T(this.x),this.y=T(this.y),this},round:function(){return this.x=P(this.x),this.y=P(this.y),this},roundToZero:function(){return this.x=0>this.x?T(this.x):B(this.x),this.y=0>this.y?T(this.y):B(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return O(this.x*this.x+this.y*this.y)},lengthManhattan:function(){return N(this.x)+N(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var e=k(this.y,this.x);return 0>e&&(e+=2*Gn),e},distanceTo:function(e){return O(this.distanceToSquared(e))},distanceToSquared:function(a){var t=this.x-a.x,e=this.y-a.y;return t*t+e*e},distanceToManhattan:function(e){return N(this.x-e.x)+N(this.y-e.y)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(a,t){return this.x+=(a.x-this.x)*t,this.y+=(a.y-this.y)*t,this},lerpVectors:function(a,t,e){return this.subVectors(t,a).multiplyScalar(e).add(a)},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(a,t){return void 0===t&&(t=0),this.x=a[t],this.y=a[t+1],this},toArray:function(a,t){return void 0===a&&(a=[]),void 0===t&&(t=0),a[t]=this.x,a[t+1]=this.y,a},fromBufferAttribute:function(a,t,e){return void 0!==e&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=a.getX(t),this.y=a.getY(t),this},rotateAround:function(a,t){var e=Cc(t),n=Pc(t),i=this.x-a.x,r=this.y-a.y;return this.x=i*e-r*n+a.x,this.y=i*n+r*e+a.y,this}});var La=0;tl.DEFAULT_IMAGE=void 0,tl.DEFAULT_MAPPING=300,Object.defineProperty(tl.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(tl.prototype,n.prototype,{constructor:tl,isTexture:!0,clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(a){if(void 0!==a.textures[this.uuid])return a.textures[this.uuid];var t={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var e=this.image;void 0===e.uuid&&(e.uuid=rd.generateUUID()),void 0===a.images[e.uuid]&&(a.images[e.uuid]={uuid:e.uuid,url:function(a){var t;if(a instanceof HTMLCanvasElement)t=a;else{(t=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")).width=a.width,t.height=a.height;var e=t.getContext("2d");a instanceof ImageData?e.putImageData(a,0,0):e.drawImage(a,0,0,a.width,a.height)}return 2048<t.width||2048<t.height?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}(e)}),t.image=e.uuid}return a.textures[this.uuid]=t,t},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(300===this.mapping){if(e.multiply(this.repeat),e.add(this.offset),0>e.x||1<e.x)switch(this.wrapS){case jc:e.x-=B(e.x);break;case Xc:e.x=0>e.x?0:1;break;case qc:1===N(B(e.x)%2)?e.x=T(e.x)-e.x:e.x-=B(e.x);}if(0>e.y||1<e.y)switch(this.wrapT){case jc:e.y-=B(e.y);break;case Xc:e.y=0>e.y?0:1;break;case qc:1===N(B(e.y)%2)?e.y=T(e.y)-e.y:e.y-=B(e.y);}this.flipY&&(e.y=1-e.y)}}}),Object.assign(al.prototype,{isVector4:!0,set:function(a,t,e,o){return this.x=a,this.y=t,this.z=e,this.w=o,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(a,t){switch(a){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+a);}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e);}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0===e.w?1:e.w,this},add:function(a,t){return void 0===t?(this.x+=a.x,this.y+=a.y,this.z+=a.z,this.w+=a.w,this):(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,t))},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(a,t){return this.x=a.x+t.x,this.y=a.y+t.y,this.z=a.z+t.z,this.w=a.w+t.w,this},addScaledVector:function(a,t){return this.x+=a.x*t,this.y+=a.y*t,this.z+=a.z*t,this.w+=a.w*t,this},sub:function(a,t){return void 0===t?(this.x-=a.x,this.y-=a.y,this.z-=a.z,this.w-=a.w,this):(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,t))},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(a,t){return this.x=a.x-t.x,this.y=a.y-t.y,this.z=a.z-t.z,this.w=a.w-t.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(a){var t=this.x,e=this.y,n=this.z,i=this.w,r=a.elements;return this.x=r[0]*t+r[4]*e+r[8]*n+r[12]*i,this.y=r[1]*t+r[5]*e+r[9]*n+r[13]*i,this.z=r[2]*t+r[6]*e+r[10]*n+r[14]*i,this.w=r[3]*t+r[7]*e+r[11]*n+r[15]*i,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(a){this.w=2*wc(a.w);var t=O(1-a.w*a.w);return 1e-4>t?(this.x=1,this.y=0,this.z=0):(this.x=a.x/t,this.y=a.y/t,this.z=a.z/t),this},setAxisAngleFromRotationMatrix:function(x){var t=x.elements,o=t[0],a=t[4],s=t[8],l=t[1],c=t[5],h=t[9],u=t[2],p=t[6],d=t[10],f,e,n,i;if(.01>N(a-l)&&.01>N(s-u)&&.01>N(h-p)){if(.1>N(a+l)&&.1>N(s+u)&&.1>N(h+p)&&.1>N(o+c+d-3))return this.set(1,0,0,0),this;f=Gn;var r=(o+1)/2,m=(c+1)/2,_=(d+1)/2,g=(a+l)/4,y=(s+u)/4,v=(h+p)/4;return r>m&&r>_?.01>r?(e=0,n=.707106781,i=.707106781):(n=g/(e=O(r)),i=y/e):m>_?.01>m?(e=.707106781,n=0,i=.707106781):(e=g/(n=O(m)),i=v/n):.01>_?(e=.707106781,n=.707106781,i=0):(e=y/(i=O(_)),n=v/i),this.set(e,n,i,f),this}var b=O((p-h)*(p-h)+(s-u)*(s-u)+(l-a)*(l-a));return .001>N(b)&&(b=1),this.x=(p-h)/b,this.y=(s-u)/b,this.z=(l-a)/b,this.w=wc((o+c+d-1)/2),this},min:function(e){return this.x=U(this.x,e.x),this.y=U(this.y,e.y),this.z=U(this.z,e.z),this.w=U(this.w,e.w),this},max:function(e){return this.x=C(this.x,e.x),this.y=C(this.y,e.y),this.z=C(this.z,e.z),this.w=C(this.w,e.w),this},clamp:function(a,t){return this.x=C(a.x,U(t.x,this.x)),this.y=C(a.y,U(t.y,this.y)),this.z=C(a.z,U(t.z,this.z)),this.w=C(a.w,U(t.w,this.w)),this},clampScalar:function(){var a,t;return function(e,o){return void 0===a&&(a=new al,t=new al),a.set(e,e,e,e),t.set(o,o,o,o),this.clamp(a,t)}}(),clampLength:function(a,t){var e=this.length();return this.divideScalar(e||1).multiplyScalar(C(a,U(t,e)))},floor:function(){return this.x=B(this.x),this.y=B(this.y),this.z=B(this.z),this.w=B(this.w),this},ceil:function(){return this.x=T(this.x),this.y=T(this.y),this.z=T(this.z),this.w=T(this.w),this},round:function(){return this.x=P(this.x),this.y=P(this.y),this.z=P(this.z),this.w=P(this.w),this},roundToZero:function(){return this.x=0>this.x?T(this.x):B(this.x),this.y=0>this.y?T(this.y):B(this.y),this.z=0>this.z?T(this.z):B(this.z),this.w=0>this.w?T(this.w):B(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return O(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return N(this.x)+N(this.y)+N(this.z)+N(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(a,t){return this.x+=(a.x-this.x)*t,this.y+=(a.y-this.y)*t,this.z+=(a.z-this.z)*t,this.w+=(a.w-this.w)*t,this},lerpVectors:function(a,t,e){return this.subVectors(t,a).multiplyScalar(e).add(a)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(a,t){return void 0===t&&(t=0),this.x=a[t],this.y=a[t+1],this.z=a[t+2],this.w=a[t+3],this},toArray:function(a,t){return void 0===a&&(a=[]),void 0===t&&(t=0),a[t]=this.x,a[t+1]=this.y,a[t+2]=this.z,a[t+3]=this.w,a},fromBufferAttribute:function(a,t,e){return void 0!==e&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=a.getX(t),this.y=a.getY(t),this.z=a.getZ(t),this.w=a.getW(t),this}}),Object.assign(a.prototype,n.prototype,{isWebGLRenderTarget:!0,setSize:function(a,t){this.width===a&&this.height===t||(this.width=a,this.height=t,this.dispose()),this.viewport.set(0,0,a,t),this.scissor.set(0,0,a,t)},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),ol.prototype=Object.create(a.prototype),ol.prototype.constructor=ol,ol.prototype.isWebGLRenderTargetCube=!0,Object.assign(rl,{slerp:function(a,t,e,o){return e.copy(a).slerp(t,o)},slerpFlat:function(S,t,e,n,i,r,o){var a=e[n+0],s=e[n+1],l=e[n+2],c=e[n+3],h=i[r+0],u=i[r+1],p=i[r+2],d=i[r+3];if(c!==d||a!==h||s!==u||l!==p){var f=1-o,m=a*h+s*u+l*p+c*d,_=0<=m?1:-1,g=1-m*m;if(g>Mc){var y=O(g),v=k(y,m*_);f=Pc(f*v)/y,o=Pc(o*v)/y}var b=o*_;if(a=a*f+h*b,s=s*f+u*b,l=l*f+p*b,c=c*f+d*b,f===1-o){var w=1/O(a*a+s*s+l*l+c*c);a*=w,s*=w,l*=w,c*=w}}S[t]=a,S[t+1]=s,S[t+2]=l,S[t+3]=c}}),Object.defineProperties(rl.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},w:{get:function(){return this._w},set:function(e){this._w=e,this.onChangeCallback()}}}),Object.assign(rl.prototype,{set:function(a,t,e,o){return this._x=a,this._y=t,this._z=e,this._w=o,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this.onChangeCallback(),this},setFromEuler:function(m,_){if(!m||!m.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var e=m._x,n=m._y,i=m._z,r=m.order,o=Cc,a=Pc,s=o(e/2),l=o(n/2),c=o(i/2),h=a(e/2),u=a(n/2),p=a(i/2);return"XYZ"===r?(this._x=h*l*c+s*u*p,this._y=s*u*c-h*l*p,this._z=s*l*p+h*u*c,this._w=s*l*c-h*u*p):"YXZ"===r?(this._x=h*l*c+s*u*p,this._y=s*u*c-h*l*p,this._z=s*l*p-h*u*c,this._w=s*l*c+h*u*p):"ZXY"===r?(this._x=h*l*c-s*u*p,this._y=s*u*c+h*l*p,this._z=s*l*p+h*u*c,this._w=s*l*c-h*u*p):"ZYX"===r?(this._x=h*l*c-s*u*p,this._y=s*u*c+h*l*p,this._z=s*l*p-h*u*c,this._w=s*l*c+h*u*p):"YZX"===r?(this._x=h*l*c+s*u*p,this._y=s*u*c+h*l*p,this._z=s*l*p-h*u*c,this._w=s*l*c-h*u*p):"XZY"===r&&(this._x=h*l*c-s*u*p,this._y=s*u*c-h*l*p,this._z=s*l*p+h*u*c,this._w=s*l*c+h*u*p),!1!==_&&this.onChangeCallback(),this},setFromAxisAngle:function(a,t){var e=t/2,o=Pc(e);return this._x=a.x*o,this._y=a.y*o,this._z=a.z*o,this._w=Cc(e),this.onChangeCallback(),this},setFromRotationMatrix:function(d){var t=d.elements,n=t[0],i=t[4],r=t[8],o=t[1],a=t[5],s=t[9],l=t[2],c=t[6],m=t[10],u=n+a+m,p;return 0<u?(p=.5/O(u+1),this._w=.25/p,this._x=(c-s)*p,this._y=(r-l)*p,this._z=(o-i)*p):n>a&&n>m?(p=2*O(1+n-a-m),this._w=(c-s)/p,this._x=.25*p,this._y=(i+o)/p,this._z=(r+l)/p):a>m?(p=2*O(1+a-n-m),this._w=(r-l)/p,this._x=(i+o)/p,this._y=.25*p,this._z=(s+c)/p):(p=2*O(1+m-n-a),this._w=(o-i)/p,this._x=(r+l)/p,this._y=(s+c)/p,this._z=.25*p),this.onChangeCallback(),this},setFromUnitVectors:function(){var a=new nl,e;return function(t,o){return void 0===a&&(a=new nl),1e-6>(e=t.dot(o)+1)?(e=0,N(t.x)>N(t.z)?a.set(-t.y,t.x,0):a.set(0,-t.z,t.y)):a.crossVectors(t,o),this._x=a.x,this._y=a.y,this._z=a.z,this._w=e,this.normalize()}}(),inverse:function(){return this.conjugate().normalize()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return O(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x*=e,this._y*=e,this._z*=e,this._w*=e),this.onChangeCallback(),this},multiply:function(a,t){return void 0===t?this.multiplyQuaternions(this,a):(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(a,t))},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(d,t){var e=d._x,n=d._y,i=d._z,r=d._w,o=t._x,a=t._y,s=t._z,l=t._w;return this._x=e*l+r*o+n*s-i*a,this._y=n*l+r*a+i*o-e*s,this._z=i*l+r*s+e*a-n*o,this._w=r*l-e*o-n*a-i*s,this.onChangeCallback(),this},slerp:function(d,t){if(0===t)return this;if(1===t)return this.copy(d);var e=this._x,n=this._y,i=this._z,r=this._w,o=r*d._w+e*d._x+n*d._y+i*d._z;if(0>o?(this._w=-d._w,this._x=-d._x,this._y=-d._y,this._z=-d._z,o=-o):this.copy(d),1<=o)return this._w=r,this._x=e,this._y=n,this._z=i,this;var p=O(1-o*o);if(.001>N(p))return this._w=.5*(r+this._w),this._x=.5*(e+this._x),this._y=.5*(n+this._y),this._z=.5*(i+this._z),this;var s=k(p,o),l=Pc((1-t)*s)/p,c=Pc(t*s)/p;return this._w=r*l+this._w*c,this._x=e*l+this._x*c,this._y=n*l+this._y*c,this._z=i*l+this._z*c,this.onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(a,t){return void 0===t&&(t=0),this._x=a[t],this._y=a[t+1],this._z=a[t+2],this._w=a[t+3],this.onChangeCallback(),this},toArray:function(a,t){return void 0===a&&(a=[]),void 0===t&&(t=0),a[t]=this._x,a[t+1]=this._y,a[t+2]=this._z,a[t+3]=this._w,a},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}}),Object.assign(nl.prototype,{isVector3:!0,set:function(a,t,e){return this.x=a,this.y=t,this.z=e,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(a,t){switch(a){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+a);}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e);}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(a,t){return void 0===t?(this.x+=a.x,this.y+=a.y,this.z+=a.z,this):(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,t))},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(a,t){return this.x=a.x+t.x,this.y=a.y+t.y,this.z=a.z+t.z,this},addScaledVector:function(a,t){return this.x+=a.x*t,this.y+=a.y*t,this.z+=a.z*t,this},sub:function(a,t){return void 0===t?(this.x-=a.x,this.y-=a.y,this.z-=a.z,this):(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,t))},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(a,t){return this.x=a.x-t.x,this.y=a.y-t.y,this.z=a.z-t.z,this},multiply:function(a,t){return void 0===t?(this.x*=a.x,this.y*=a.y,this.z*=a.z,this):(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(a,t))},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(a,t){return this.x=a.x*t.x,this.y=a.y*t.y,this.z=a.z*t.z,this},applyEuler:function(){var a=new rl;return function(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(a.setFromEuler(t))}}(),applyAxisAngle:function(){var a=new rl;return function(t,e){return this.applyQuaternion(a.setFromAxisAngle(t,e))}}(),applyMatrix3:function(a){var t=this.x,e=this.y,o=this.z,n=a.elements;return this.x=n[0]*t+n[3]*e+n[6]*o,this.y=n[1]*t+n[4]*e+n[7]*o,this.z=n[2]*t+n[5]*e+n[8]*o,this},applyMatrix4:function(a){var t=this.x,e=this.y,n=this.z,i=a.elements,r=1/(i[3]*t+i[7]*e+i[11]*n+i[15]);return this.x=(i[0]*t+i[4]*e+i[8]*n+i[12])*r,this.y=(i[1]*t+i[5]*e+i[9]*n+i[13])*r,this.z=(i[2]*t+i[6]*e+i[10]*n+i[14])*r,this},applyQuaternion:function(d){var t=this.x,e=this.y,n=this.z,i=d.x,p=d.y,m=d.z,_=d.w,s=_*t+p*n-m*e,l=_*e+m*t-i*n,c=_*n+i*e-p*t,h=-i*t-p*e-m*n;return this.x=s*_+h*-i+l*-m-c*-p,this.y=l*_+h*-p+c*-i-s*-m,this.z=c*_+h*-m+s*-p-l*-i,this},project:function(){var a=new il;return function(t){return a.multiplyMatrices(t.projectionMatrix,a.getInverse(t.matrixWorld)),this.applyMatrix4(a)}}(),unproject:function(){var a=new il;return function(t){return a.multiplyMatrices(t.matrixWorld,a.getInverse(t.projectionMatrix)),this.applyMatrix4(a)}}(),transformDirection:function(a){var t=this.x,e=this.y,o=this.z,n=a.elements;return this.x=n[0]*t+n[4]*e+n[8]*o,this.y=n[1]*t+n[5]*e+n[9]*o,this.z=n[2]*t+n[6]*e+n[10]*o,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=U(this.x,e.x),this.y=U(this.y,e.y),this.z=U(this.z,e.z),this},max:function(e){return this.x=C(this.x,e.x),this.y=C(this.y,e.y),this.z=C(this.z,e.z),this},clamp:function(a,t){return this.x=C(a.x,U(t.x,this.x)),this.y=C(a.y,U(t.y,this.y)),this.z=C(a.z,U(t.z,this.z)),this},clampScalar:function(){var a=new nl,t=new nl;return function(e,o){return a.set(e,e,e),t.set(o,o,o),this.clamp(a,t)}}(),clampLength:function(a,t){var e=this.length();return this.divideScalar(e||1).multiplyScalar(C(a,U(t,e)))},floor:function(){return this.x=B(this.x),this.y=B(this.y),this.z=B(this.z),this},ceil:function(){return this.x=T(this.x),this.y=T(this.y),this.z=T(this.z),this},round:function(){return this.x=P(this.x),this.y=P(this.y),this.z=P(this.z),this},roundToZero:function(){return this.x=0>this.x?T(this.x):B(this.x),this.y=0>this.y?T(this.y):B(this.y),this.z=0>this.z?T(this.z):B(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return O(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return N(this.x)+N(this.y)+N(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(a,t){return this.x+=(a.x-this.x)*t,this.y+=(a.y-this.y)*t,this.z+=(a.z-this.z)*t,this},lerpVectors:function(a,t,e){return this.subVectors(t,a).multiplyScalar(e).add(a)},cross:function(a,t){if(void 0!==t)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(a,t);var e=this.x,o=this.y,n=this.z;return this.x=o*a.z-n*a.y,this.y=n*a.x-e*a.z,this.z=e*a.y-o*a.x,this},crossVectors:function(l,t){var e=l.x,n=l.y,i=l.z,r=t.x,o=t.y,a=t.z;return this.x=n*a-i*o,this.y=i*r-e*a,this.z=e*o-n*r,this},projectOnVector:function(a){var t=a.dot(this)/a.lengthSq();return this.copy(a).multiplyScalar(t)},projectOnPlane:function(){var a=new nl;return function(t){return a.copy(this).projectOnVector(t),this.sub(a)}}(),reflect:function(){var a=new nl;return function(t){return this.sub(a.copy(t).multiplyScalar(2*this.dot(t)))}}(),angleTo:function(a){var t=this.dot(a)/O(this.lengthSq()*a.lengthSq());return wc(rd.clamp(t,-1,1))},distanceTo:function(e){return O(this.distanceToSquared(e))},distanceToSquared:function(a){var t=this.x-a.x,e=this.y-a.y,o=this.z-a.z;return t*t+e*e+o*o},distanceToManhattan:function(e){return N(this.x-e.x)+N(this.y-e.y)+N(this.z-e.z)},setFromSpherical:function(a){var t=Pc(a.phi)*a.radius;return this.x=t*Pc(a.theta),this.y=Cc(a.phi)*a.radius,this.z=t*Cc(a.theta),this},setFromCylindrical:function(e){return this.x=e.radius*Pc(e.theta),this.y=e.y,this.z=e.radius*Cc(e.theta),this},setFromMatrixPosition:function(a){var t=a.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this},setFromMatrixScale:function(a){var t=this.setFromMatrixColumn(a,0).length(),e=this.setFromMatrixColumn(a,1).length(),o=this.setFromMatrixColumn(a,2).length();return this.x=t,this.y=e,this.z=o,this},setFromMatrixColumn:function(a,t){return this.fromArray(a.elements,4*t)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(a,t){return void 0===t&&(t=0),this.x=a[t],this.y=a[t+1],this.z=a[t+2],this},toArray:function(a,t){return void 0===a&&(a=[]),void 0===t&&(t=0),a[t]=this.x,a[t+1]=this.y,a[t+2]=this.z,a},fromBufferAttribute:function(a,t,e){return void 0!==e&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=a.getX(t),this.y=a.getY(t),this.z=a.getZ(t),this}}),Object.assign(il.prototype,{isMatrix4:!0,set:function(g,t,e,n,i,r,o,a,s,l,c,h,u,p,d,f){var m=this.elements;return m[0]=g,m[4]=t,m[8]=e,m[12]=n,m[1]=i,m[5]=r,m[9]=o,m[13]=a,m[2]=s,m[6]=l,m[10]=c,m[14]=h,m[3]=u,m[7]=p,m[11]=d,m[15]=f,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return new il().fromArray(this.elements)},copy:function(a){var t=this.elements,e=a.elements;return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],this},copyPosition:function(a){var t=this.elements,e=a.elements;return t[12]=e[12],t[13]=e[13],t[14]=e[14],this},extractBasis:function(a,t,e){return a.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),e.setFromMatrixColumn(this,2),this},makeBasis:function(a,t,e){return this.set(a.x,t.x,e.x,0,a.y,t.y,e.y,0,a.z,t.z,e.z,0,0,0,0,1),this},extractRotation:function(){var l=new nl;return function(t){var e=this.elements,n=t.elements,i=1/l.setFromMatrixColumn(t,0).length(),r=1/l.setFromMatrixColumn(t,1).length(),o=1/l.setFromMatrixColumn(t,2).length();return e[0]=n[0]*i,e[1]=n[1]*i,e[2]=n[2]*i,e[4]=n[4]*r,e[5]=n[5]*r,e[6]=n[6]*r,e[8]=n[8]*o,e[9]=n[9]*o,e[10]=n[10]*o,this}}(),makeRotationFromEuler:function(S){S&&S.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,e=S.x,n=S.y,i=S.z,r=Cc(e),E=Pc(e),T=Cc(n),M=Pc(n),P=Cc(i),c=Pc(i);if("XYZ"===S.order){var C=r*P,u=r*c,p=E*P,d=E*c;t[0]=T*P,t[4]=-T*c,t[8]=M,t[1]=u+p*M,t[5]=C-d*M,t[9]=-E*T,t[2]=d-C*M,t[6]=p+u*M,t[10]=r*T}else if("YXZ"===S.order){var f=T*P,m=T*c,_=M*P,g=M*c;t[0]=f+g*E,t[4]=_*E-m,t[8]=r*M,t[1]=r*c,t[5]=r*P,t[9]=-E,t[2]=m*E-_,t[6]=g+f*E,t[10]=r*T}else if("ZXY"===S.order){var f=T*P,m=T*c,_=M*P,g=M*c;t[0]=f-g*E,t[4]=-r*c,t[8]=_+m*E,t[1]=m+_*E,t[5]=r*P,t[9]=g-f*E,t[2]=-r*M,t[6]=E,t[10]=r*T}else if("ZYX"===S.order){var C=r*P,u=r*c,p=E*P,d=E*c;t[0]=T*P,t[4]=p*M-u,t[8]=C*M+d,t[1]=T*c,t[5]=d*M+C,t[9]=u*M-p,t[2]=-M,t[6]=E*T,t[10]=r*T}else if("YZX"===S.order){var y=r*T,v=r*M,b=E*T,w=E*M;t[0]=T*P,t[4]=w-y*c,t[8]=b*c+v,t[1]=c,t[5]=r*P,t[9]=-E*P,t[2]=-M*P,t[6]=v*c+b,t[10]=y-w*c}else if("XZY"===S.order){var y=r*T,v=r*M,b=E*T,w=E*M;t[0]=T*P,t[4]=-c,t[8]=M*P,t[1]=y*c+w,t[5]=r*P,t[9]=v*c-b,t[2]=b*c-v,t[6]=E*P,t[10]=w*c+y}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromQuaternion:function(y){var t=this.elements,e=y._x,n=y._y,i=y._z,r=y._w,o=e+e,a=n+n,s=i+i,l=e*o,c=e*a,h=e*s,u=n*a,p=n*s,d=i*s,f=r*o,m=r*a,_=r*s;return t[0]=1-(u+d),t[4]=c-_,t[8]=h+m,t[1]=c+_,t[5]=1-(l+d),t[9]=p-f,t[2]=h-m,t[6]=p+f,t[10]=1-(l+u),t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},lookAt:function(){var l=new nl,t=new nl,e=new nl;return function(n,i,r){var o=this.elements;return e.subVectors(n,i),0===e.lengthSq()&&(e.z=1),e.normalize(),l.crossVectors(r,e),0===l.lengthSq()&&(1===N(r.z)?e.x+=1e-4:e.z+=1e-4,e.normalize(),l.crossVectors(r,e)),l.normalize(),t.crossVectors(e,l),o[0]=l.x,o[4]=t.x,o[8]=e.x,o[1]=l.y,o[5]=t.y,o[9]=e.y,o[2]=l.z,o[6]=t.z,o[10]=e.z,this}}(),multiply:function(a,t){return void 0===t?this.multiplyMatrices(this,a):(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(a,t))},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(U,t){var e=U.elements,n=t.elements,i=this.elements,r=e[0],o=e[4],a=e[8],s=e[12],l=e[1],c=e[5],h=e[9],u=e[13],p=e[2],d=e[6],f=e[10],m=e[14],_=e[3],g=e[7],y=e[11],v=e[15],b=n[0],w=n[4],x=n[8],S=n[12],E=n[1],M=n[5],T=n[9],A=n[13],P=n[2],I=n[6],C=n[10],L=n[14],R=n[3],D=n[7],k=n[11],O=n[15];return i[0]=r*b+o*E+a*P+s*R,i[4]=r*w+o*M+a*I+s*D,i[8]=r*x+o*T+a*C+s*k,i[12]=r*S+o*A+a*L+s*O,i[1]=l*b+c*E+h*P+u*R,i[5]=l*w+c*M+h*I+u*D,i[9]=l*x+c*T+h*C+u*k,i[13]=l*S+c*A+h*L+u*O,i[2]=p*b+d*E+f*P+m*R,i[6]=p*w+d*M+f*I+m*D,i[10]=p*x+d*T+f*C+m*k,i[14]=p*S+d*A+f*L+m*O,i[3]=_*b+g*E+y*P+v*R,i[7]=_*w+g*M+y*I+v*D,i[11]=_*x+g*T+y*C+v*k,i[15]=_*S+g*A+y*L+v*O,this},multiplyScalar:function(a){var t=this.elements;return t[0]*=a,t[4]*=a,t[8]*=a,t[12]*=a,t[1]*=a,t[5]*=a,t[9]*=a,t[13]*=a,t[2]*=a,t[6]*=a,t[10]*=a,t[14]*=a,t[3]*=a,t[7]*=a,t[11]*=a,t[15]*=a,this},applyToBufferAttribute:function(){var a=new nl;return function(t){for(var e=0,o=t.count;e<o;e++)a.x=t.getX(e),a.y=t.getY(e),a.z=t.getZ(e),a.applyMatrix4(this),t.setXYZ(e,a.x,a.y,a.z);return t}}(),determinant:function(){var d=this.elements,t=d[0],m=d[4],n=d[8],_=d[12],g=d[1],o=d[5],a=d[9],s=d[13],l=d[2],c=d[6],h=d[10],u=d[14];return d[3]*(+_*a*c-n*s*c-_*o*h+m*s*h+n*o*u-m*a*u)+d[7]*(+t*a*u-t*s*h+_*g*h-n*g*u+n*s*l-_*a*l)+d[11]*(+t*s*c-t*o*u-_*g*c+m*g*u+_*o*l-m*s*l)+d[15]*(-n*o*l-t*a*c+t*o*h+n*g*c-m*g*h+m*a*l)},transpose:function(){var a=this.elements,e;return e=a[1],a[1]=a[4],a[4]=e,e=a[2],a[2]=a[8],a[8]=e,e=a[6],a[6]=a[9],a[9]=e,e=a[3],a[3]=a[12],a[12]=e,e=a[7],a[7]=a[13],a[13]=e,e=a[11],a[11]=a[14],a[14]=e,this},setPosition:function(a){var t=this.elements;return t[12]=a.x,t[13]=a.y,t[14]=a.z,this},getInverse:function(P,t){var e=this.elements,n=P.elements,i=n[0],r=n[1],o=n[2],a=n[3],s=n[4],l=n[5],c=n[6],h=n[7],u=n[8],p=n[9],d=n[10],f=n[11],m=n[12],_=n[13],g=n[14],y=n[15],v=p*g*h-_*d*h+_*c*f-l*g*f-p*c*y+l*d*y,b=m*d*h-u*g*h-m*c*f+s*g*f+u*c*y-s*d*y,w=u*_*h-m*p*h+m*l*f-s*_*f-u*l*y+s*p*y,x=m*p*c-u*_*c-m*l*d+s*_*d+u*l*g-s*p*g,S=i*v+r*b+o*w+a*x;if(0===S){var E="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(!0===t)throw new Error(E);return console.warn(E),this.identity()}var M=1/S;return e[0]=v*M,e[1]=(_*d*a-p*g*a-_*o*f+r*g*f+p*o*y-r*d*y)*M,e[2]=(l*g*a-_*c*a+_*o*h-r*g*h-l*o*y+r*c*y)*M,e[3]=(p*c*a-l*d*a-p*o*h+r*d*h+l*o*f-r*c*f)*M,e[4]=b*M,e[5]=(u*g*a-m*d*a+m*o*f-i*g*f-u*o*y+i*d*y)*M,e[6]=(m*c*a-s*g*a-m*o*h+i*g*h+s*o*y-i*c*y)*M,e[7]=(s*d*a-u*c*a+u*o*h-i*d*h-s*o*f+i*c*f)*M,e[8]=w*M,e[9]=(m*p*a-u*_*a-m*r*f+i*_*f+u*r*y-i*p*y)*M,e[10]=(s*_*a-m*l*a+m*r*h-i*_*h-s*r*y+i*l*y)*M,e[11]=(u*l*a-s*p*a-u*r*h+i*p*h+s*r*f-i*l*f)*M,e[12]=x*M,e[13]=(u*_*o-m*p*o+m*r*d-i*_*d-u*r*g+i*p*g)*M,e[14]=(m*l*o-s*_*o-m*r*c+i*_*c+s*r*g-i*l*g)*M,e[15]=(s*p*o-u*l*o+u*r*c-i*p*c-s*r*d+i*l*d)*M,this},scale:function(a){var t=this.elements,e=a.x,o=a.y,n=a.z;return t[0]*=e,t[4]*=o,t[8]*=n,t[1]*=e,t[5]*=o,t[9]*=n,t[2]*=e,t[6]*=o,t[10]*=n,t[3]*=e,t[7]*=o,t[11]*=n,this},getMaxScaleOnAxis:function(){var a=this.elements,t=a[0]*a[0]+a[1]*a[1]+a[2]*a[2],e=a[4]*a[4]+a[5]*a[5]+a[6]*a[6],o=a[8]*a[8]+a[9]*a[9]+a[10]*a[10];return O(C(t,e,o))},makeTranslation:function(a,t,e){return this.set(1,0,0,a,0,1,0,t,0,0,1,e,0,0,0,1),this},makeRotationX:function(a){var t=Cc(a),e=Pc(a);return this.set(1,0,0,0,0,t,-e,0,0,e,t,0,0,0,0,1),this},makeRotationY:function(a){var t=Cc(a),e=Pc(a);return this.set(t,0,e,0,0,1,0,0,-e,0,t,0,0,0,0,1),this},makeRotationZ:function(a){var t=Cc(a),e=Pc(a);return this.set(t,-e,0,0,e,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(d,t){var e=Cc(t),n=Pc(t),i=1-e,r=d.x,o=d.y,a=d.z,s=i*r,l=i*o;return this.set(s*r+e,s*o-n*a,s*a+n*o,0,s*o+n*a,l*o+e,l*a-n*r,0,s*a-n*o,l*a+n*r,i*a*a+e,0,0,0,0,1),this},makeScale:function(a,t,e){return this.set(a,0,0,0,0,t,0,0,0,0,e,0,0,0,0,1),this},makeShear:function(a,t,e){return this.set(1,t,e,0,a,1,e,0,a,t,1,0,0,0,0,1),this},compose:function(a,t,e){return this.makeRotationFromQuaternion(t),this.scale(e),this.setPosition(a),this},decompose:function(){var d=new nl,t=new il;return function(e,n,i){var r=this.elements,o=d.set(r[0],r[1],r[2]).length(),p=d.set(r[4],r[5],r[6]).length(),s=d.set(r[8],r[9],r[10]).length();0>this.determinant()&&(o=-o),e.x=r[12],e.y=r[13],e.z=r[14],t.copy(this);var l=1/o,c=1/p,m=1/s;return t.elements[0]*=l,t.elements[1]*=l,t.elements[2]*=l,t.elements[4]*=c,t.elements[5]*=c,t.elements[6]*=c,t.elements[8]*=m,t.elements[9]*=m,t.elements[10]*=m,n.setFromRotationMatrix(t),i.x=o,i.y=p,i.z=s,this}}(),makePerspective:function(l,t,e,n,i,r){void 0===r&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var o=this.elements;return o[0]=2*i/(t-l),o[4]=0,o[8]=(t+l)/(t-l),o[12]=0,o[1]=0,o[5]=2*i/(e-n),o[9]=(e+n)/(e-n),o[13]=0,o[2]=0,o[6]=0,o[10]=-(r+i)/(r-i),o[14]=-2*r*i/(r-i),o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this},makeOrthographic:function(d,t,e,n,i,r){var o=this.elements,a=1/(t-d),s=1/(e-n),l=1/(r-i);return o[0]=2*a,o[4]=0,o[8]=0,o[12]=-((t+d)*a),o[1]=0,o[5]=2*s,o[9]=0,o[13]=-((e+n)*s),o[2]=0,o[6]=0,o[10]=-2*l,o[14]=-((r+i)*l),o[3]=0,o[7]=0,o[11]=0,o[15]=1,this},equals:function(a){for(var t=this.elements,e=a.elements,o=0;16>o;o++)if(t[o]!==e[o])return!1;return!0},fromArray:function(a,t){void 0===t&&(t=0);for(var e=0;16>e;e++)this.elements[e]=a[e+t];return this},toArray:function(a,t){void 0===a&&(a=[]),void 0===t&&(t=0);var e=this.elements;return a[t]=e[0],a[t+1]=e[1],a[t+2]=e[2],a[t+3]=e[3],a[t+4]=e[4],a[t+5]=e[5],a[t+6]=e[6],a[t+7]=e[7],a[t+8]=e[8],a[t+9]=e[9],a[t+10]=e[10],a[t+11]=e[11],a[t+12]=e[12],a[t+13]=e[13],a[t+14]=e[14],a[t+15]=e[15],a}}),l.prototype=Object.create(tl.prototype),l.prototype.constructor=l,l.prototype.isDataTexture=!0,(c.prototype=Object.create(tl.prototype)).constructor=c,c.prototype.isCubeTexture=!0,Object.defineProperty(c.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}});var Ra=new tl,Da=new c,ka=[],Oa=[],Fa=new Float32Array(16),Ua=new Float32Array(9);H.prototype.setValue=function(a,t){for(var e=this.seq,n=0,i=e.length,r;n!==i;++n)r=e[n],r.setValue(a,t[r.id])};var Na=/([\w\d_]+)(\])?(\[|\.)?/g;q.prototype.setValue=function(a,t,e){var o=this.map[t];void 0!==o&&o.setValue(a,e,this.renderer)},q.prototype.setOptional=function(a,t,e){var o=t[e];void 0!==o&&this.setValue(a,e,o)},q.upload=function(l,t,e,n){for(var i=0,r=t.length;i!==r;++i){var o=t[i],a=e[o.id];!1!==a.needsUpdate&&o.setValue(l,a.value,n)}},q.seqWithValue=function(a,t){for(var e=[],n=0,i=a.length,r;n!==i;++n)r=a[n],r.id in t&&e.push(r);return e};var Ba={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Object.assign(X.prototype,{isColor:!0,r:1,g:1,b:1,set:function(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this},setScalar:function(e){return this.r=e,this.g=e,this.b=e,this},setHex:function(e){return e=B(e),this.r=(255&e>>16)/255,this.g=(255&e>>8)/255,this.b=(255&e)/255,this},setRGB:function(a,t,e){return this.r=a,this.g=t,this.b=e,this},setHSL:function(){function a(a,o,e){return 0>e&&(e+=1),1<e&&(e-=1),e<1/6?a+6*(o-a)*e:.5>e?o:e<2/3?a+6*(o-a)*(2/3-e):a}return function(t,e,n){if(t=rd.euclideanModulo(t,1),e=rd.clamp(e,0,1),n=rd.clamp(n,0,1),0===e)this.r=this.g=this.b=n;else{var i=.5>=n?n*(1+e):n+e-n*e,r=2*n-i;this.r=a(r,i,t+1/3),this.g=a(r,i,t),this.b=a(r,i,t-1/3)}return this}}(),setStyle:function(d){function t(t){void 0!==t&&1>parseFloat(t)&&console.warn("THREE.Color: Alpha component of "+d+" will be ignored.")}var e;if(e=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(d)){var n=e[1],r=e[2],o;switch(n){case"rgb":case"rgba":if(o=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(r))return this.r=U(255,parseInt(o[1],10))/255,this.g=U(255,parseInt(o[2],10))/255,this.b=U(255,parseInt(o[3],10))/255,t(o[5]),this;if(o=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(r))return this.r=U(100,parseInt(o[1],10))/100,this.g=U(100,parseInt(o[2],10))/100,this.b=U(100,parseInt(o[3],10))/100,t(o[5]),this;break;case"hsl":case"hsla":if(o=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(r)){var i=parseFloat(o[1])/360,a=parseInt(o[2],10)/100,s=parseInt(o[3],10)/100;return t(o[5]),this.setHSL(i,a,s)}}}else if(e=/^\#([A-Fa-f0-9]+)$/.exec(d)){var l=(c=e[1]).length;if(3===l)return this.r=parseInt(c.charAt(0)+c.charAt(0),16)/255,this.g=parseInt(c.charAt(1)+c.charAt(1),16)/255,this.b=parseInt(c.charAt(2)+c.charAt(2),16)/255,this;if(6===l)return this.r=parseInt(c.charAt(0)+c.charAt(1),16)/255,this.g=parseInt(c.charAt(2)+c.charAt(3),16)/255,this.b=parseInt(c.charAt(4)+c.charAt(5),16)/255,this}if(d&&0<d.length){var c=Ba[d];void 0===c?console.warn("THREE.Color: Unknown color "+d):this.setHex(c)}return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(a,t){return void 0===t&&(t=2),this.r=S(a.r,t),this.g=S(a.g,t),this.b=S(a.b,t),this},copyLinearToGamma:function(a,t){void 0===t&&(t=2);var e=0<t?1/t:1;return this.r=S(a.r,e),this.g=S(a.g,e),this.b=S(a.b,e),this},convertGammaToLinear:function(){var a=this.r,t=this.g,e=this.b;return this.r=a*a,this.g=t*t,this.b=e*e,this},convertLinearToGamma:function(){return this.r=O(this.r),this.g=O(this.g),this.b=O(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(d){var t=d||{h:0,s:0,l:0},i=this.r,r=this.g,o=this.b,a=C(i,r,o),s=U(i,r,o),l=(s+a)/2,c,e;if(s===a)c=0,e=0;else{var n=a-s;switch(e=.5>=l?n/(a+s):n/(2-a-s),a){case i:c=(r-o)/n+(r<o?6:0);break;case r:c=(o-i)/n+2;break;case o:c=(i-r)/n+4;}c/=6}return t.h=c,t.s=e,t.l=l,t},getStyle:function(){return"rgb("+(0|255*this.r)+","+(0|255*this.g)+","+(0|255*this.b)+")"},offsetHSL:function(a,t,e){var o=this.getHSL();return o.h+=a,o.s+=t,o.l+=e,this.setHSL(o.h,o.s,o.l),this},add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(a,t){return this.r=a.r+t.r,this.g=a.g+t.g,this.b=a.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=C(0,this.r-e.r),this.g=C(0,this.g-e.g),this.b=C(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(a,t){return this.r+=(a.r-this.r)*t,this.g+=(a.g-this.g)*t,this.b+=(a.b-this.b)*t,this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(a,t){return void 0===t&&(t=0),this.r=a[t],this.g=a[t+1],this.b=a[t+2],this},toArray:function(a,t){return void 0===a&&(a=[]),void 0===t&&(t=0),a[t]=this.r,a[t+1]=this.g,a[t+2]=this.b,a},toJSON:function(){return this.getHex()}});var za={common:{diffuse:{value:new X(15658734)},opacity:{value:1},map:{value:null},offsetRepeat:{value:new al(0,0,1,1)},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new el(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new X(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new X(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},offsetRepeat:{value:new al(0,0,1,1)}}},Ga={merge:function(a){for(var t={},e=0,o;e<a.length;e++)for(var n in o=this.clone(a[e]),o)t[n]=o[n];return t},clone:function(a){var t={};for(var e in a)for(var o in t[e]={},a[e]){var n=a[e][o];t[e][o]=n&&(n.isColor||n.isMatrix3||n.isMatrix4||n.isVector2||n.isVector3||n.isVector4||n.isTexture)?n.clone():Array.isArray(n)?n.slice():n}return t}},ja={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"\nvec3 transformed = vec3( position );\n",beginnormal_vertex:"\nvec3 objectNormal = vec3( normal );\n",bsdfs:"float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t}\n\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat theta = acos( dot( N, V ) );\n\tvec2 uv = vec2(\n\t\tsqrt( saturate( roughness ) ),\n\t\tsaturate( theta / ( 0.5 * PI ) ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.86267 + (0.49788 + 0.01436 * y ) * y;\n\tfloat b = 3.45068 + (4.18814 + y) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = (x > 0.0) ? v : 0.5 * inversesqrt( 1.0 - x * x ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transpose( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tvec3 result = vec3( LTC_ClippedSphereFormFactor( vectorFormFactor ) );\n\treturn result;\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; ++ i ) {\n\t\tvec4 plane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t\t\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; ++ i ) {\n\t\t\tvec4 plane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t\n\t#endif\n#endif\n",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transpose( const in mat3 v ) {\n\tmat3 tmp;\n\ttmp[0] = vec3(v[0].x, v[1].x, v[2].x);\n\ttmp[1] = vec3(v[0].y, v[1].y, v[2].y);\n\ttmp[2] = vec3(v[0].z, v[1].z, v[2].z);\n\treturn tmp;\n}\n",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n",defaultnormal_vertex:"vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n",encodings_fragment:"  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM            = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat D      = max( maxRange / maxRGB, 1.0 );\n\tD            = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n\tXp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract(Le);\n\tvResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n\treturn vec4( max(vRGB, 0.0), 1.0 );\n}\n",envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n",envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n",fog_vertex:"\n#ifdef USE_FOG\nfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n  varying float fogDepth;\n#endif\n",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif\n",gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif\n",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n",lights_pars:"uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltcMat;\tuniform sampler2D ltcMag;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar - 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos - halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos + halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos + halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos - halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tfloat norm = texture2D( ltcMag, uv ).a;\n\t\tvec4 t = texture2D( ltcMat, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3(   1,   0, t.y ),\n\t\t\tvec3(   0, t.z,   0 ),\n\t\t\tvec3( t.w,   0, t.x )\n\t\t);\n\t\treflectedLight.directSpecular += lightColor * material.specularColor * norm * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",lights_template:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, 8 );\n\t#endif\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tvec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\n\t#ifndef STANDARD\n\t\tvec3 clearCoatRadiance = getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), 8 );\n\t#else\n\t\tvec3 clearCoatRadiance = vec3( 0.0 );\n\t#endif\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",logdepthbuf_fragment:"#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\tgl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\t#endif\n#endif\n",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n",map_particle_fragment:"#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform vec4 offsetRepeat;\n\tuniform sampler2D map;\n#endif\n",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif\n",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n",normal_fragment:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n#endif\n#ifdef USE_NORMALMAP\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N = normalize( surf_norm );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif\n",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 1.0 - 2.0 * rgb.xyz;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",project_vertex:"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;\n",dithering_fragment:"#if defined( DITHERING )\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif\n",dithering_pars_fragment:"#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif\n",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif\n",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif\n",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",tonemapping_pars_fragment:"#define saturate(a) clamp( a, 0.0, 1.0 )\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform vec4 offsetRepeat;\n#endif\n",uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( PHYSICAL ) || defined( LAMBERT ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif\n",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n",cube_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}\n",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}\n",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",equirect_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}\n",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}\n",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}\n",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <bsdfs>\n#include <lights_pars>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n}\n",shadow_vert:"#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n"},Ha={basic:{uniforms:Ga.merge([za.common,za.specularmap,za.envmap,za.aomap,za.lightmap,za.fog]),vertexShader:ja.meshbasic_vert,fragmentShader:ja.meshbasic_frag},lambert:{uniforms:Ga.merge([za.common,za.specularmap,za.envmap,za.aomap,za.lightmap,za.emissivemap,za.fog,za.lights,{emissive:{value:new X(0)}}]),vertexShader:ja.meshlambert_vert,fragmentShader:ja.meshlambert_frag},phong:{uniforms:Ga.merge([za.common,za.specularmap,za.envmap,za.aomap,za.lightmap,za.emissivemap,za.bumpmap,za.normalmap,za.displacementmap,za.gradientmap,za.fog,za.lights,{emissive:{value:new X(0)},specular:{value:new X(1118481)},shininess:{value:30}}]),vertexShader:ja.meshphong_vert,fragmentShader:ja.meshphong_frag},standard:{uniforms:Ga.merge([za.common,za.envmap,za.aomap,za.lightmap,za.emissivemap,za.bumpmap,za.normalmap,za.displacementmap,za.roughnessmap,za.metalnessmap,za.fog,za.lights,{emissive:{value:new X(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:ja.meshphysical_vert,fragmentShader:ja.meshphysical_frag},points:{uniforms:Ga.merge([za.points,za.fog]),vertexShader:ja.points_vert,fragmentShader:ja.points_frag},dashed:{uniforms:Ga.merge([za.common,za.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ja.linedashed_vert,fragmentShader:ja.linedashed_frag},depth:{uniforms:Ga.merge([za.common,za.displacementmap]),vertexShader:ja.depth_vert,fragmentShader:ja.depth_frag},normal:{uniforms:Ga.merge([za.common,za.bumpmap,za.normalmap,za.displacementmap,{opacity:{value:1}}]),vertexShader:ja.normal_vert,fragmentShader:ja.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ja.cube_vert,fragmentShader:ja.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ja.equirect_vert,fragmentShader:ja.equirect_frag},distanceRGBA:{uniforms:Ga.merge([za.common,za.displacementmap,{referencePosition:{value:new nl},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ja.distanceRGBA_vert,fragmentShader:ja.distanceRGBA_frag},shadow:{uniforms:Ga.merge([za.lights,{color:{value:new X(0)},opacity:{value:1}}]),vertexShader:ja.shadow_vert,fragmentShader:ja.shadow_frag}};Ha.physical={uniforms:Ga.merge([Ha.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:ja.meshphysical_vert,fragmentShader:ja.meshphysical_frag},Object.assign(Y.prototype,{set:function(a,t){return this.min.copy(a),this.max.copy(t),this},setFromPoints:function(a){this.makeEmpty();for(var t=0,e=a.length;t<e;t++)this.expandByPoint(a[t]);return this},setFromCenterAndSize:function(){var a=new el;return function(t,e){var o=a.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(o),this.max.copy(t).add(o),this}}(),clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(a){var t=a||new el;return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(a){var t=a||new el;return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(a,t){return(t||new el).set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(a,t){return(t||new el).copy(a).clamp(this.min,this.max)},distanceToPoint:function(){var a=new el;return function(t){return a.copy(t).clamp(this.min,this.max).sub(t).length()}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}),Z.prototype=Object.create(tl.prototype),Z.prototype.constructor=Z;var Va=0;Object.assign(K.prototype,n.prototype,{isMaterial:!0,onBeforeCompile:function(){},setValues:function(a){if(void 0!==a)for(var t in a){var e=a[t];if(!(void 0!==e))console.warn("THREE.Material: '"+t+"' parameter is undefined.");else if("shading"!==t){var o=this[t];void 0===o?console.warn("THREE."+this.type+": '"+t+"' is not a property of this material."):o&&o.isColor?o.set(e):o&&o.isVector3&&e&&e.isVector3?o.copy(e):this[t]="overdraw"===t?+e:e}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===e}},toJSON:function(a){function t(a){var t=[];for(var o in a){var r=a[o];delete r.metadata,t.push(r)}return t}var e=void 0===a;e&&(a={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearCoat&&(n.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(n.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(a).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(a).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(a).uuid),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(a).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(a).uuid,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(a).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(a).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(a).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(a).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(a).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(a).uuid,n.reflectivity=this.reflectivity),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(a).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==Dc&&(n.blending=this.blending),!0===this.flatShading&&(n.flatShading=this.flatShading),this.side!==Or&&(n.side=this.side),this.vertexColors!==Nr&&(n.vertexColors=this.vertexColors),1>this.opacity&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,!0===this.dithering&&(n.dithering=!0),0<this.alphaTest&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),1<this.wireframeLinewidth&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.skinning&&(n.skinning=!0),!1===this.visible&&(n.visible=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),e){var i=t(a.textures),r=t(a.images);0<i.length&&(n.textures=i),0<r.length&&(n.images=r)}return n},clone:function(){return new this.constructor().copy(this)},copy:function(a){this.name=a.name,this.fog=a.fog,this.lights=a.lights,this.blending=a.blending,this.side=a.side,this.flatShading=a.flatShading,this.vertexColors=a.vertexColors,this.opacity=a.opacity,this.transparent=a.transparent,this.blendSrc=a.blendSrc,this.blendDst=a.blendDst,this.blendEquation=a.blendEquation,this.blendSrcAlpha=a.blendSrcAlpha,this.blendDstAlpha=a.blendDstAlpha,this.blendEquationAlpha=a.blendEquationAlpha,this.depthFunc=a.depthFunc,this.depthTest=a.depthTest,this.depthWrite=a.depthWrite,this.colorWrite=a.colorWrite,this.precision=a.precision,this.polygonOffset=a.polygonOffset,this.polygonOffsetFactor=a.polygonOffsetFactor,this.polygonOffsetUnits=a.polygonOffsetUnits,this.dithering=a.dithering,this.alphaTest=a.alphaTest,this.premultipliedAlpha=a.premultipliedAlpha,this.overdraw=a.overdraw,this.visible=a.visible,this.userData=JSON.parse(JSON.stringify(a.userData)),this.clipShadows=a.clipShadows,this.clipIntersection=a.clipIntersection;var t=a.clippingPlanes,e=null;if(null!==t){var o=t.length;e=Array(o);for(var n=0;n!==o;++n)e[n]=t[n].clone()}return this.clippingPlanes=e,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Q.prototype=Object.create(K.prototype),Q.prototype.constructor=Q,Q.prototype.isShaderMaterial=!0,Q.prototype.copy=function(e){return K.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Ga.clone(e.uniforms),this.defines=e.defines,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=e.extensions,this},Q.prototype.toJSON=function(a){var t=K.prototype.toJSON.call(this,a);return t.uniforms=this.uniforms,t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t},ml.prototype=Object.create(K.prototype),ml.prototype.constructor=ml,ml.prototype.isMeshDepthMaterial=!0,ml.prototype.copy=function(e){return K.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},_l.prototype=Object.create(K.prototype),_l.prototype.constructor=_l,_l.prototype.isMeshDistanceMaterial=!0,_l.prototype.copy=function(e){return K.prototype.copy.call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this},Object.assign(hl.prototype,{isBox3:!0,set:function(a,t){return this.min.copy(a),this.max.copy(t),this},setFromArray:function(d){for(var t=1/0,e=1/0,n=1/0,i=-1/0,r=-1/0,o=-1/0,a=0,s=d.length;a<s;a+=3){var l=d[a],c=d[a+1],p=d[a+2];l<t&&(t=l),c<e&&(e=c),p<n&&(n=p),l>i&&(i=l),c>r&&(r=c),p>o&&(o=p)}return this.min.set(t,e,n),this.max.set(i,r,o),this},setFromBufferAttribute:function(d){for(var t=1/0,e=1/0,n=1/0,i=-1/0,r=-1/0,o=-1/0,a=0,s=d.count;a<s;a++){var l=d.getX(a),c=d.getY(a),p=d.getZ(a);l<t&&(t=l),c<e&&(e=c),p<n&&(n=p),l>i&&(i=l),c>r&&(r=c),p>o&&(o=p)}return this.min.set(t,e,n),this.max.set(i,r,o),this},setFromPoints:function(a){this.makeEmpty();for(var t=0,e=a.length;t<e;t++)this.expandByPoint(a[t]);return this},setFromCenterAndSize:function(){var a=new nl;return function(t,e){var o=a.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(o),this.max.copy(t).add(o),this}}(),setFromObject:function(e){return this.makeEmpty(),this.expandByObject(e)},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(a){var t=a||new nl;return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(a){var t=a||new nl;return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},expandByObject:function(){var o=new nl;return function(t){var l=this;return t.updateMatrixWorld(!0),t.traverse(function(t){var e=t.geometry,n,i;if(void 0!==e)if(e.isGeometry){var r=e.vertices;for(n=0,i=r.length;n<i;n++)o.copy(r[n]),o.applyMatrix4(t.matrixWorld),l.expandByPoint(o)}else if(e.isBufferGeometry){var a=e.attributes.position;if(void 0!==a)for(n=0,i=a.count;n<i;n++)o.fromBufferAttribute(a,n).applyMatrix4(t.matrixWorld),l.expandByPoint(o)}}),this}}(),containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(a,t){return(t||new nl).set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y),(a.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},intersectsSphere:function(){var a=new nl;return function(t){return this.clampPoint(t.center,a),a.distanceToSquared(t.center)<=t.radius*t.radius}}(),intersectsPlane:function(a){var t,e;return 0<a.normal.x?(t=a.normal.x*this.min.x,e=a.normal.x*this.max.x):(t=a.normal.x*this.max.x,e=a.normal.x*this.min.x),0<a.normal.y?(t+=a.normal.y*this.min.y,e+=a.normal.y*this.max.y):(t+=a.normal.y*this.max.y,e+=a.normal.y*this.min.y),0<a.normal.z?(t+=a.normal.z*this.min.z,e+=a.normal.z*this.max.z):(t+=a.normal.z*this.max.z,e+=a.normal.z*this.min.z),t<=a.constant&&e>=a.constant},clampPoint:function(a,t){return(t||new nl).copy(a).clamp(this.min,this.max)},distanceToPoint:function(){var a=new nl;return function(t){return a.copy(t).clamp(this.min,this.max).sub(t).length()}}(),getBoundingSphere:function(){var a=new nl;return function(t){var e=t||new it;return this.getCenter(e.center),e.radius=.5*this.getSize(a).length(),e}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:function(){var a=[new nl,new nl,new nl,new nl,new nl,new nl,new nl,new nl];return function(t){return this.isEmpty()?this:(a[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),a[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),a[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),a[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),a[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),a[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),a[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),a[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(a),this)}}(),translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}),Object.assign(it.prototype,{set:function(a,t){return this.center.copy(a),this.radius=t,this},setFromPoints:function(){var l=new hl;return function(t,e){var n=this.center;void 0===e?l.setFromPoints(t).getCenter(n):n.copy(e);for(var i=0,r=0,o=t.length;r<o;r++)i=C(i,n.distanceToSquared(t[r]));return this.radius=O(i),this}}(),clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return 0>=this.radius},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(a){var t=this.radius+a.radius;return a.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return N(e.distanceToPoint(this.center))<=this.radius},clampPoint:function(a,t){var e=this.center.distanceToSquared(a),o=t||new nl;return o.copy(a),e>this.radius*this.radius&&(o.sub(this.center).normalize(),o.multiplyScalar(this.radius).add(this.center)),o},getBoundingBox:function(a){var t=a||new hl;return t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius*=e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}}),Object.assign(rt.prototype,{isMatrix3:!0,set:function(d,t,e,n,i,r,o,a,s){var l=this.elements;return l[0]=d,l[1]=n,l[2]=o,l[3]=t,l[4]=i,l[5]=a,l[6]=e,l[7]=r,l[8]=s,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return new this.constructor().fromArray(this.elements)},copy:function(a){var t=this.elements,e=a.elements;return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],this},setFromMatrix4:function(a){var t=a.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},applyToBufferAttribute:function(){var a=new nl;return function(t){for(var e=0,o=t.count;e<o;e++)a.x=t.getX(e),a.y=t.getY(e),a.z=t.getZ(e),a.applyMatrix3(this),t.setXYZ(e,a.x,a.y,a.z);return t}}(),multiply:function(e){return this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(S,t){var e=S.elements,n=t.elements,i=this.elements,r=e[0],o=e[3],a=e[6],s=e[1],l=e[4],c=e[7],h=e[2],u=e[5],p=e[8],d=n[0],f=n[3],m=n[6],_=n[1],g=n[4],y=n[7],v=n[2],b=n[5],w=n[8];return i[0]=r*d+o*_+a*v,i[3]=r*f+o*g+a*b,i[6]=r*m+o*y+a*w,i[1]=s*d+l*_+c*v,i[4]=s*f+l*g+c*b,i[7]=s*m+l*y+c*w,i[2]=h*d+u*_+p*v,i[5]=h*f+u*g+p*b,i[8]=h*m+u*y+p*w,this},multiplyScalar:function(a){var t=this.elements;return t[0]*=a,t[3]*=a,t[6]*=a,t[1]*=a,t[4]*=a,t[7]*=a,t[2]*=a,t[5]*=a,t[8]*=a,this},determinant:function(){var d=this.elements,t=d[0],e=d[1],n=d[2],i=d[3],r=d[4],o=d[5],a=d[6],s=d[7],l=d[8];return t*r*l-t*o*s-e*i*l+e*o*a+n*i*s-n*r*a},getInverse:function(b,t){b&&b.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var e=b.elements,n=this.elements,i=e[0],r=e[1],o=e[2],a=e[3],s=e[4],l=e[5],c=e[6],h=e[7],u=e[8],p=u*s-l*h,d=l*c-u*a,f=h*a-s*c,m=i*p+r*d+o*f;if(0===m){var _="THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";if(!0===t)throw new Error(_);return console.warn(_),this.identity()}var g=1/m;return n[0]=p*g,n[1]=(o*h-u*r)*g,n[2]=(l*r-o*s)*g,n[3]=d*g,n[4]=(u*i-o*c)*g,n[5]=(o*a-l*i)*g,n[6]=f*g,n[7]=(r*c-h*i)*g,n[8]=(s*i-r*a)*g,this},transpose:function(){var a=this.elements,e;return e=a[1],a[1]=a[3],a[3]=e,e=a[2],a[2]=a[6],a[6]=e,e=a[5],a[5]=a[7],a[7]=e,this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(a){var t=this.elements;return a[0]=t[0],a[1]=t[3],a[2]=t[6],a[3]=t[1],a[4]=t[4],a[5]=t[7],a[6]=t[2],a[7]=t[5],a[8]=t[8],this},equals:function(a){for(var t=this.elements,e=a.elements,o=0;9>o;o++)if(t[o]!==e[o])return!1;return!0},fromArray:function(a,t){void 0===t&&(t=0);for(var e=0;9>e;e++)this.elements[e]=a[e+t];return this},toArray:function(a,t){void 0===a&&(a=[]),void 0===t&&(t=0);var e=this.elements;return a[t]=e[0],a[t+1]=e[1],a[t+2]=e[2],a[t+3]=e[3],a[t+4]=e[4],a[t+5]=e[5],a[t+6]=e[6],a[t+7]=e[7],a[t+8]=e[8],a}}),Object.assign(ot.prototype,{set:function(a,t){return this.normal.copy(a),this.constant=t,this},setComponents:function(a,t,e,o){return this.normal.set(a,t,e),this.constant=o,this},setFromNormalAndCoplanarPoint:function(a,t){return this.normal.copy(a),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(){var a=new nl,t=new nl;return function(e,n,i){var r=a.subVectors(i,n).cross(t.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}}(),clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(a,t){return(t||new nl).copy(this.normal).multiplyScalar(-this.distanceToPoint(a)).add(a)},intersectLine:function(){var l=new nl;return function(t,e){var n=e||new nl,i=t.delta(l),r=this.normal.dot(i);if(0!==r){var o=-(t.start.dot(this.normal)+this.constant)/r;if(!(0>o||1<o))return n.copy(i).multiplyScalar(o).add(t.start)}else if(0===this.distanceToPoint(t.start))return n.copy(t.start)}}(),intersectsLine:function(a){var t=this.distanceToPoint(a.start),e=this.distanceToPoint(a.end);return 0>t&&0<e||0>e&&0<t},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){return(e||new nl).copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var l=new nl,t=new rt;return function(e,n){var i=n||t.getNormalMatrix(e),r=this.coplanarPoint(l).applyMatrix4(e),o=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(o),this}}(),translate:function(e){return this.constant-=e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}}),Object.assign(gl.prototype,{set:function(l,t,e,n,i,r){var o=this.planes;return o[0].copy(l),o[1].copy(t),o[2].copy(e),o[3].copy(n),o[4].copy(i),o[5].copy(r),this},clone:function(){return new this.constructor().copy(this)},copy:function(a){for(var t=this.planes,e=0;6>e;e++)t[e].copy(a.planes[e]);return this},setFromMatrix:function(b){var t=this.planes,e=b.elements,n=e[0],i=e[1],r=e[2],o=e[3],a=e[4],s=e[5],l=e[6],c=e[7],h=e[8],u=e[9],p=e[10],d=e[11],f=e[12],m=e[13],_=e[14],g=e[15];return t[0].setComponents(o-n,c-a,d-h,g-f).normalize(),t[1].setComponents(o+n,c+a,d+h,g+f).normalize(),t[2].setComponents(o+i,c+s,d+u,g+m).normalize(),t[3].setComponents(o-i,c-s,d-u,g-m).normalize(),t[4].setComponents(o-r,c-l,d-p,g-_).normalize(),t[5].setComponents(o+r,c+l,d+p,g+_).normalize(),this},intersectsObject:function(){var a=new it;return function(t){var e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),a.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(a)}}(),intersectsSprite:function(){var a=new it;return function(t){return a.center.set(0,0,0),a.radius=.7071067811865476,a.applyMatrix4(t.matrixWorld),this.intersectsSphere(a)}}(),intersectsSphere:function(a){for(var t=this.planes,e=a.center,o=-a.radius,n=0;6>n;n++)if(t[n].distanceToPoint(e)<o)return!1;return!0},intersectsBox:function(){var l=new nl,t=new nl;return function(e){for(var n=this.planes,i=0,r;6>i;i++){r=n[i],l.x=0<r.normal.x?e.min.x:e.max.x,t.x=0<r.normal.x?e.max.x:e.min.x,l.y=0<r.normal.y?e.min.y:e.max.y,t.y=0<r.normal.y?e.max.y:e.min.y,l.z=0<r.normal.z?e.min.z:e.max.z,t.z=0<r.normal.z?e.max.z:e.min.z;var o=r.distanceToPoint(l),a=r.distanceToPoint(t);if(0>o&&0>a)return!1}return!0}}(),containsPoint:function(a){for(var t=this.planes,e=0;6>e;e++)if(0>t[e].distanceToPoint(a))return!1;return!0}}),at.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],at.DefaultOrder="XYZ",Object.defineProperties(at.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},order:{get:function(){return this._order},set:function(e){this._order=e,this.onChangeCallback()}}}),Object.assign(at.prototype,{isEuler:!0,set:function(a,t,e,o){return this._x=a,this._y=t,this._z=e,this._order=o||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this.onChangeCallback(),this},setFromRotationMatrix:function(m,t,e){var n=Math.asin,_=rd.clamp,i=m.elements,r=i[0],o=i[4],g=i[8],s=i[1],l=i[5],c=i[9],f=i[2],y=i[6],p=i[10];return"XYZ"===(t=t||this._order)?(this._y=n(_(g,-1,1)),.99999>N(g)?(this._x=k(-c,p),this._z=k(-o,r)):(this._x=k(y,l),this._z=0)):"YXZ"===t?(this._x=n(-_(c,-1,1)),.99999>N(c)?(this._y=k(g,p),this._z=k(s,l)):(this._y=k(-f,r),this._z=0)):"ZXY"===t?(this._x=n(_(y,-1,1)),.99999>N(y)?(this._y=k(-f,p),this._z=k(-o,l)):(this._y=0,this._z=k(s,r))):"ZYX"===t?(this._y=n(-_(f,-1,1)),.99999>N(f)?(this._x=k(y,p),this._z=k(s,r)):(this._x=0,this._z=k(-o,l))):"YZX"===t?(this._z=n(_(s,-1,1)),.99999>N(s)?(this._x=k(-c,l),this._y=k(-f,r)):(this._x=0,this._y=k(g,p))):"XZY"===t?(this._z=n(-_(o,-1,1)),.99999>N(o)?(this._x=k(y,l),this._y=k(g,r)):(this._x=k(-c,p),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t),this._order=t,!1!==e&&this.onChangeCallback(),this},setFromQuaternion:function(){var a=new il;return function(t,e,o){return a.makeRotationFromQuaternion(t),this.setFromRotationMatrix(a,e,o)}}(),setFromVector3:function(a,t){return this.set(a.x,a.y,a.z,t||this._order)},reorder:function(){var a=new rl;return function(t){return a.setFromEuler(this),this.setFromQuaternion(a,t)}}(),equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this.onChangeCallback(),this},toArray:function(a,t){return void 0===a&&(a=[]),void 0===t&&(t=0),a[t]=this._x,a[t+1]=this._y,a[t+2]=this._z,a[t+3]=this._order,a},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new nl(this._x,this._y,this._z)},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}}),Object.assign(ct.prototype,{set:function(e){this.mask=0|1<<e},enable:function(e){this.mask|=0|1<<e},toggle:function(e){this.mask^=0|1<<e},disable:function(e){this.mask&=~(0|1<<e)},test:function(e){return 0!=(this.mask&e.mask)}});var Wa=0;ut.DefaultUp=new nl(0,1,0),ut.DefaultMatrixAutoUpdate=!0,Object.assign(ut.prototype,n.prototype,{isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(e){this.matrix.multiplyMatrices(e,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){return this.quaternion.premultiply(e),this},setRotationFromAxisAngle:function(a,t){this.quaternion.setFromAxisAngle(a,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(){var a=new rl;return function(t,e){return a.setFromAxisAngle(t,e),this.quaternion.multiply(a),this}}(),rotateX:function(){var a=new nl(1,0,0);return function(t){return this.rotateOnAxis(a,t)}}(),rotateY:function(){var a=new nl(0,1,0);return function(t){return this.rotateOnAxis(a,t)}}(),rotateZ:function(){var a=new nl(0,0,1);return function(t){return this.rotateOnAxis(a,t)}}(),translateOnAxis:function(){var a=new nl;return function(t,e){return a.copy(t).applyQuaternion(this.quaternion),this.position.add(a.multiplyScalar(e)),this}}(),translateX:function(){var a=new nl(1,0,0);return function(t){return this.translateOnAxis(a,t)}}(),translateY:function(){var a=new nl(0,1,0);return function(t){return this.translateOnAxis(a,t)}}(),translateZ:function(){var a=new nl(0,0,1);return function(t){return this.translateOnAxis(a,t)}}(),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var a=new il;return function(t){return t.applyMatrix4(a.getInverse(this.matrixWorld))}}(),lookAt:function(){var a=new il;return function(t){this.isCamera?a.lookAt(this.position,t,this.up):a.lookAt(t,this.position,this.up),this.quaternion.setFromRotationMatrix(a)}}(),add:function(a){if(1<arguments.length){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return a===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",a),this):(a&&a.isObject3D?(null!==a.parent&&a.parent.remove(a),a.parent=this,a.dispatchEvent({type:"added"}),this.children.push(a)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",a),this)},remove:function(a){if(1<arguments.length){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var e=this.children.indexOf(a);return-1!==e&&(a.parent=null,a.dispatchEvent({type:"removed"}),this.children.splice(e,1)),this},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(a,t){if(this[a]===t)return this;for(var e=0,o=this.children.length,n;e<o;e++)if(n=this.children[e].getObjectByProperty(a,t),void 0!==n)return n},getWorldPosition:function(a){var t=a||new nl;return this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var a=new nl,t=new nl;return function(e){var o=e||new rl;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(a,o,t),o}}(),getWorldRotation:function(){var a=new rl;return function(t){var e=t||new at;return this.getWorldQuaternion(a),e.setFromQuaternion(a,this.rotation.order,!1)}}(),getWorldScale:function(){var a=new nl,t=new rl;return function(e){var o=e||new nl;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(a,t,o),o}}(),getWorldDirection:function(){var a=new rl;return function(t){var e=t||new nl;return this.getWorldQuaternion(a),e.set(0,0,1).applyQuaternion(a)}}(),raycast:function(){},traverse:function(a){a(this);for(var t=this.children,e=0,o=t.length;e<o;e++)t[e].traverse(a)},traverseVisible:function(a){if(!1!==this.visible){a(this);for(var t=this.children,e=0,o=t.length;e<o;e++)t[e].traverseVisible(a)}},traverseAncestors:function(a){var t=this.parent;null!==t&&(a(t),t.traverseAncestors(a))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(a){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||a)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,a=!0);for(var t=this.children,e=0,o=t.length;e<o;e++)t[e].updateMatrixWorld(a)},toJSON:function(d){function t(t,a){return void 0===t[a.uuid]&&(t[a.uuid]=a.toJSON(d)),a.uuid}function e(a){var t=[];for(var e in a){var o=a[e];delete o.metadata,t.push(o)}return t}var n=void 0===d||""===d,i={};n&&(d={geometries:{},materials:{},textures:{},images:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var r={};if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.matrix=this.matrix.toArray(),void 0!==this.geometry&&(r.geometry=t(d.geometries,this.geometry)),void 0!==this.material)if(Array.isArray(this.material)){for(var o=[],a=0,s=this.material.length;a<s;a++)o.push(t(d.materials,this.material[a]));r.material=o}else r.material=t(d.materials,this.material);if(0<this.children.length)for(r.children=[],a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(d).object);if(n){var l=e(d.geometries),c=e(d.materials),m=e(d.textures),u=e(d.images);0<l.length&&(i.geometries=l),0<c.length&&(i.materials=c),0<m.length&&(i.textures=m),0<u.length&&(i.images=u)}return i.object=r,i},clone:function(e){return new this.constructor().copy(this,e)},copy:function(a,t){if(void 0===t&&(t=!0),this.name=a.name,this.up.copy(a.up),this.position.copy(a.position),this.quaternion.copy(a.quaternion),this.scale.copy(a.scale),this.matrix.copy(a.matrix),this.matrixWorld.copy(a.matrixWorld),this.matrixAutoUpdate=a.matrixAutoUpdate,this.matrixWorldNeedsUpdate=a.matrixWorldNeedsUpdate,this.layers.mask=a.layers.mask,this.visible=a.visible,this.castShadow=a.castShadow,this.receiveShadow=a.receiveShadow,this.frustumCulled=a.frustumCulled,this.renderOrder=a.renderOrder,this.userData=JSON.parse(JSON.stringify(a.userData)),!0===t)for(var e=0,o;e<a.children.length;e++)o=a.children[e],this.add(o.clone());return this}}),pt.prototype=Object.assign(Object.create(ut.prototype),{constructor:pt,isCamera:!0,copy:function(a,t){return ut.prototype.copy.call(this,a,t),this.matrixWorldInverse.copy(a.matrixWorldInverse),this.projectionMatrix.copy(a.projectionMatrix),this},getWorldDirection:function(){var a=new rl;return function(t){var e=t||new nl;return this.getWorldQuaternion(a),e.set(0,0,-1).applyQuaternion(a)}}(),updateMatrixWorld:function(e){ut.prototype.updateMatrixWorld.call(this,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return new this.constructor().copy(this)}}),ht.prototype=Object.assign(Object.create(pt.prototype),{constructor:ht,isOrthographicCamera:!0,copy:function(a,t){return pt.prototype.copy.call(this,a,t),this.left=a.left,this.right=a.right,this.top=a.top,this.bottom=a.bottom,this.near=a.near,this.far=a.far,this.zoom=a.zoom,this.view=null===a.view?null:Object.assign({},a.view),this},setViewOffset:function(a,l,s,c,d,p){this.view={fullWidth:a,fullHeight:l,offsetX:s,offsetY:c,width:d,height:p},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var d=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),e=(this.right+this.left)/2,n=(this.top+this.bottom)/2,i=e-d,r=e+d,o=n+t,a=n-t;if(null!==this.view){var s=this.zoom/(this.view.width/this.view.fullWidth),l=this.zoom/(this.view.height/this.view.fullHeight),c=(this.right-this.left)/this.view.width,p=(this.top-this.bottom)/this.view.height;r=(i+=c*(this.view.offsetX/s))+c*(this.view.width/s),a=(o-=p*(this.view.offsetY/l))-p*(this.view.height/l)}this.projectionMatrix.makeOrthographic(i,r,o,a,this.near,this.far)},toJSON:function(a){var t=ut.prototype.toJSON.call(this,a);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}),fl.prototype=Object.assign(Object.create(pt.prototype),{constructor:fl,isPerspectiveCamera:!0,copy:function(a,t){return pt.prototype.copy.call(this,a,t),this.fov=a.fov,this.zoom=a.zoom,this.near=a.near,this.far=a.far,this.focus=a.focus,this.aspect=a.aspect,this.view=null===a.view?null:Object.assign({},a.view),this.filmGauge=a.filmGauge,this.filmOffset=a.filmOffset,this},setFocalLength:function(a){var t=.5*this.getFilmHeight()/a;this.fov=2*rd.RAD2DEG*Sc(t),this.updateProjectionMatrix()},getFocalLength:function(){var e=Pr(.5*rd.DEG2RAD*this.fov);return .5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*rd.RAD2DEG*Sc(Pr(.5*rd.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*U(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/C(this.aspect,1)},setViewOffset:function(a,l,s,c,d,p){this.aspect=a/l,this.view={fullWidth:a,fullHeight:l,offsetX:s,offsetY:c,width:d,height:p},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var c=this.near,t=c*Pr(.5*rd.DEG2RAD*this.fov)/this.zoom,e=2*t,n=this.aspect*e,i=-.5*n,r=this.view;if(null!==r){var o=r.fullWidth,a=r.fullHeight;i+=r.offsetX*n/o,t-=r.offsetY*e/a,n*=r.width/o,e*=r.height/a}var s=this.filmOffset;0!==s&&(i+=c*s/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+n,t,t-e,c,this.far)},toJSON:function(a){var t=ut.prototype.toJSON.call(this,a);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}),Object.assign(yl.prototype,{clone:function(){return new this.constructor().copy(this)},copy:function(a){this.a=a.a,this.b=a.b,this.c=a.c,this.normal.copy(a.normal),this.color.copy(a.color),this.materialIndex=a.materialIndex;for(var t=0,e=a.vertexNormals.length;t<e;t++)this.vertexNormals[t]=a.vertexNormals[t].clone();for(var t=0,e=a.vertexColors.length;t<e;t++)this.vertexColors[t]=a.vertexColors[t].clone();return this}});var qa=0;Object.assign(gt.prototype,n.prototype,{isGeometry:!0,applyMatrix:function(l){for(var t=new rt().getNormalMatrix(l),e=0,n=this.vertices.length;e<n;e++)this.vertices[e].applyMatrix4(l);for(var e=0,n=this.faces.length,i;e<n;e++){i=this.faces[e],i.normal.applyMatrix3(t).normalize();for(var r=0,o=i.vertexNormals.length;r<o;r++)i.vertexNormals[r].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var a=new il;return function(t){return a.makeRotationX(t),this.applyMatrix(a),this}}(),rotateY:function(){var a=new il;return function(t){return a.makeRotationY(t),this.applyMatrix(a),this}}(),rotateZ:function(){var a=new il;return function(t){return a.makeRotationZ(t),this.applyMatrix(a),this}}(),translate:function(){var a=new il;return function(t,e,o){return a.makeTranslation(t,e,o),this.applyMatrix(a),this}}(),scale:function(){var a=new il;return function(t,e,o){return a.makeScale(t,e,o),this.applyMatrix(a),this}}(),lookAt:function(){var a=new ut;return function(t){a.lookAt(t),a.updateMatrix(),this.applyMatrix(a.matrix)}}(),fromBufferGeometry:function(r){function t(n,t,m,i){var r=new yl(n,t,m,void 0===a?[]:[u[n].clone(),u[t].clone(),u[m].clone()],void 0===s?[]:[h.colors[n].clone(),h.colors[t].clone(),h.colors[m].clone()],i);h.faces.push(r),void 0!==l&&h.faceVertexUvs[0].push([p[n].clone(),p[t].clone(),p[m].clone()]),void 0!==c&&h.faceVertexUvs[1].push([d[n].clone(),d[t].clone(),d[m].clone()])}var h=this,e=null===r.index?void 0:r.index.array,n=r.attributes,o=n.position.array,a=void 0===n.normal?void 0:n.normal.array,s=void 0===n.color?void 0:n.color.array,l=void 0===n.uv?void 0:n.uv.array,c=void 0===n.uv2?void 0:n.uv2.array;void 0!==c&&(this.faceVertexUvs[1]=[]);for(var u=[],p=[],d=[],i=0,m=0;i<o.length;i+=3,m+=2)h.vertices.push(new nl(o[i],o[i+1],o[i+2])),void 0!==a&&u.push(new nl(a[i],a[i+1],a[i+2])),void 0!==s&&h.colors.push(new X(s[i],s[i+1],s[i+2])),void 0!==l&&p.push(new el(l[m],l[m+1])),void 0!==c&&d.push(new el(c[m],c[m+1]));var _=r.groups;if(0<_.length)for(i=0;i<_.length;i++)for(var g=_[i],f=g.start,m=f,y=f+g.count;m<y;m+=3)void 0===e?t(m,m+1,m+2,g.materialIndex):t(e[m],e[m+1],e[m+2],g.materialIndex);else if(void 0!==e)for(i=0;i<e.length;i+=3)t(e[i],e[i+1],e[i+2]);else for(i=0;i<o.length/3;i+=3)t(i,i+1,i+2);return this.computeFaceNormals(),null!==r.boundingBox&&(this.boundingBox=r.boundingBox.clone()),null!==r.boundingSphere&&(this.boundingSphere=r.boundingSphere.clone()),this},center:function(){this.computeBoundingBox();var e=this.boundingBox.getCenter().negate();return this.translate(e.x,e.y,e.z),e},normalize:function(){this.computeBoundingSphere();var a=this.boundingSphere.center,t=this.boundingSphere.radius,e=0===t?1:1/t,o=new il;return o.set(e,0,0,-e*a.x,0,e,0,-e*a.y,0,0,e,-e*a.z,0,0,0,1),this.applyMatrix(o),this},computeFaceNormals:function(){for(var l=new nl,t=new nl,e=0,n=this.faces.length;e<n;e++){var i=this.faces[e],r=this.vertices[i.a],o=this.vertices[i.b],a=this.vertices[i.c];l.subVectors(a,o),t.subVectors(r,o),l.cross(t),l.normalize(),i.normal.copy(l)}},computeVertexNormals:function(m){void 0===m&&(m=!0);var t,e,n,i,r,o;for(o=Array(this.vertices.length),t=0,e=this.vertices.length;t<e;t++)o[t]=new nl;if(m){var a=new nl,u=new nl,p,s,l;for(n=0,i=this.faces.length;n<i;n++)r=this.faces[n],p=this.vertices[r.a],s=this.vertices[r.b],l=this.vertices[r.c],a.subVectors(l,s),u.subVectors(p,s),a.cross(u),o[r.a].add(a),o[r.b].add(a),o[r.c].add(a)}else for(this.computeFaceNormals(),n=0,i=this.faces.length;n<i;n++)o[(r=this.faces[n]).a].add(r.normal),o[r.b].add(r.normal),o[r.c].add(r.normal);for(t=0,e=this.vertices.length;t<e;t++)o[t].normalize();for(n=0,i=this.faces.length;n<i;n++){var c=(r=this.faces[n]).vertexNormals;3===c.length?(c[0].copy(o[r.a]),c[1].copy(o[r.b]),c[2].copy(o[r.c])):(c[0]=o[r.a].clone(),c[1]=o[r.b].clone(),c[2]=o[r.c].clone())}0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var a,t,e;for(this.computeFaceNormals(),a=0,t=this.faces.length;a<t;a++){var o=(e=this.faces[a]).vertexNormals;3===o.length?(o[0].copy(e.normal),o[1].copy(e.normal),o[2].copy(e.normal)):(o[0]=e.normal.clone(),o[1]=e.normal.clone(),o[2]=e.normal.clone())}0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var d,t,e,n,i;for(e=0,n=this.faces.length;e<n;e++)for((i=this.faces[e]).__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]),d=0,t=i.vertexNormals.length;d<t;d++)i.__originalVertexNormals[d]?i.__originalVertexNormals[d].copy(i.vertexNormals[d]):i.__originalVertexNormals[d]=i.vertexNormals[d].clone();var r=new gt;for(r.faces=this.faces,d=0,t=this.morphTargets.length;d<t;d++){if(!this.morphNormals[d]){this.morphNormals[d]={},this.morphNormals[d].faceNormals=[],this.morphNormals[d].vertexNormals=[];var o=this.morphNormals[d].faceNormals,a=this.morphNormals[d].vertexNormals;for(e=0,n=this.faces.length;e<n;e++)l=new nl,c={a:new nl,b:new nl,c:new nl},o.push(l),a.push(c)}var s=this.morphNormals[d];r.vertices=this.morphTargets[d].vertices,r.computeFaceNormals(),r.computeVertexNormals();var l,c;for(e=0,n=this.faces.length;e<n;e++)i=this.faces[e],l=s.faceNormals[e],c=s.vertexNormals[e],l.copy(i.normal),c.a.copy(i.vertexNormals[0]),c.b.copy(i.vertexNormals[1]),c.c.copy(i.vertexNormals[2])}for(e=0,n=this.faces.length;e<n;e++)(i=this.faces[e]).normal=i.__originalFaceNormal,i.vertexNormals=i.__originalVertexNormals},computeLineDistances:function(){for(var a=0,t=this.vertices,e=0,o=t.length;e<o;e++)0<e&&(a+=t[e].distanceTo(t[e-1])),this.lineDistances[e]=a},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new hl),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new it),this.boundingSphere.setFromPoints(this.vertices)},merge:function(T,t,e){if(T&&T.isGeometry){var n=this.vertices.length,r=this.vertices,o=T.vertices,a=this.faces,s=T.faces,l=this.faceVertexUvs[0],c=T.faceVertexUvs[0],h=this.colors,u=T.colors,p;void 0===e&&(e=0),void 0!==t&&(p=new rt().getNormalMatrix(t));for(var i=0,d=o.length,f;i<d;i++)f=o[i].clone(),void 0!==t&&f.applyMatrix4(t),r.push(f);for(var i=0,d=u.length;i<d;i++)h.push(u[i].clone());for(i=0,d=s.length;i<d;i++){var m=s[i],v=m.vertexNormals,b=m.vertexColors,w,_,g;(w=new yl(m.a+n,m.b+n,m.c+n)).normal.copy(m.normal),void 0!==p&&w.normal.applyMatrix3(p).normalize();for(var y=0,x=v.length;y<x;y++)_=v[y].clone(),void 0!==p&&_.applyMatrix3(p).normalize(),w.vertexNormals.push(_);w.color.copy(m.color);for(var y=0,x=b.length;y<x;y++)g=b[y],w.vertexColors.push(g.clone());w.materialIndex=m.materialIndex+e,a.push(w)}for(i=0,d=c.length;i<d;i++){var S=c[i],E=[];if(void 0!==S){for(var y=0,x=S.length;y<x;y++)E.push(S[y].clone());l.push(E)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",T)},mergeMesh:function(e){e&&e.isMesh?(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e)},mergeVertices:function(){var _={},l=[],c=[],h=10000,u,t,e,n,i,r,o,a;for(e=0,n=this.vertices.length;e<n;e++)u=this.vertices[e],void 0===_[t=P(u.x*h)+"_"+P(u.y*h)+"_"+P(u.z*h)]?(_[t]=e,l.push(this.vertices[e]),c[e]=l.length-1):c[e]=c[_[t]];var s=[];for(e=0,n=this.faces.length;e<n;e++){(i=this.faces[e]).a=c[i.a],i.b=c[i.b],i.c=c[i.c],r=[i.a,i.b,i.c];for(var p=0;3>p;p++)if(r[p]===r[(p+1)%3]){s.push(e);break}}for(e=s.length-1;0<=e;e--){var d=s[e];for(this.faces.splice(d,1),o=0,a=this.faceVertexUvs.length;o<a;o++)this.faceVertexUvs[o].splice(d,1)}var g=this.vertices.length-l.length;return this.vertices=l,g},sortFacesByMaterialIndex:function(){for(var l=this.faces,t=l.length,e=0;e<t;e++)l[e]._id=e;l.sort(function(a,t){return a.materialIndex-t.materialIndex});var n=this.faceVertexUvs[0],o=this.faceVertexUvs[1],a,i;for(n&&n.length===t&&(a=[]),o&&o.length===t&&(i=[]),e=0;e<t;e++){var r=l[e]._id;a&&a.push(n[r]),i&&i.push(o[r])}a&&(this.faceVertexUvs[0]=a),i&&(this.faceVertexUvs[1]=i)},toJSON:function(){function P(a,o,e){return e?a|1<<o:a&~(1<<o)}function t(a){var t=a.x.toString()+a.y.toString()+a.z.toString();return void 0===u[t]?(u[t]=h.length/3,h.push(a.x,a.y,a.z),u[t]):u[t]}function e(a){var t=a.r.toString()+a.g.toString()+a.b.toString();return void 0===d[t]?(d[t]=p.length,p.push(a.getHex()),d[t]):d[t]}function n(a){var t=a.x.toString()+a.y.toString();return void 0===m[t]?(m[t]=f.length/2,f.push(a.x,a.y),m[t]):m[t]}var i={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),void 0!==this.parameters){var r=this.parameters;for(var o in r)void 0!==r[o]&&(i[o]=r[o]);return i}for(var a=[],s=0,l;s<this.vertices.length;s++)l=this.vertices[s],a.push(l.x,l.y,l.z);for(var c=[],h=[],u={},p=[],d={},f=[],m={},s=0;s<this.faces.length;s++){var _=this.faces[s],g=void 0!==this.faceVertexUvs[0][s],y=0<_.normal.length(),v=0<_.vertexNormals.length,b=1!==_.color.r||1!==_.color.g||1!==_.color.b,w=0<_.vertexColors.length,x=0;if(x=P(x,0,0),x=P(x,1,!0),x=P(x,2,!1),x=P(x,3,g),x=P(x,4,y),x=P(x,5,v),x=P(x,6,b),x=P(x,7,w),c.push(x),c.push(_.a,_.b,_.c),c.push(_.materialIndex),g){var S=this.faceVertexUvs[0][s];c.push(n(S[0]),n(S[1]),n(S[2]))}if(y&&c.push(t(_.normal)),v){var E=_.vertexNormals;c.push(t(E[0]),t(E[1]),t(E[2]))}if(b&&c.push(e(_.color)),w){var M=_.vertexColors;c.push(e(M[0]),e(M[1]),e(M[2]))}}return i.data={},i.data.vertices=a,i.data.normals=h,0<p.length&&(i.data.colors=p),0<f.length&&(i.data.uvs=[f]),i.data.faces=c,i},clone:function(){return new gt().copy(this)},copy:function(T){var t,e,n,i,r,o;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=T.name;var a=T.vertices;for(t=0,e=a.length;t<e;t++)this.vertices.push(a[t].clone());var s=T.colors;for(t=0,e=s.length;t<e;t++)this.colors.push(s[t].clone());var l=T.faces;for(t=0,e=l.length;t<e;t++)this.faces.push(l[t].clone());for(t=0,e=T.faceVertexUvs.length;t<e;t++){var c=T.faceVertexUvs[t];for(void 0===this.faceVertexUvs[t]&&(this.faceVertexUvs[t]=[]),n=0,i=c.length;n<i;n++){var h=c[n],u=[];for(r=0,o=h.length;r<o;r++){var p=h[r];u.push(p.clone())}this.faceVertexUvs[t].push(u)}}var d=T.morphTargets;for(t=0,e=d.length;t<e;t++){var f={};if(f.name=d[t].name,void 0!==d[t].vertices)for(f.vertices=[],n=0,i=d[t].vertices.length;n<i;n++)f.vertices.push(d[t].vertices[n].clone());if(void 0!==d[t].normals)for(f.normals=[],n=0,i=d[t].normals.length;n<i;n++)f.normals.push(d[t].normals[n].clone());this.morphTargets.push(f)}var m=T.morphNormals;for(t=0,e=m.length;t<e;t++){var _={};if(void 0!==m[t].vertexNormals)for(_.vertexNormals=[],n=0,i=m[t].vertexNormals.length;n<i;n++){var g=m[t].vertexNormals[n],y={};y.a=g.a.clone(),y.b=g.b.clone(),y.c=g.c.clone(),_.vertexNormals.push(y)}if(void 0!==m[t].faceNormals)for(_.faceNormals=[],n=0,i=m[t].faceNormals.length;n<i;n++)_.faceNormals.push(m[t].faceNormals[n].clone());this.morphNormals.push(_)}var v=T.skinWeights;for(t=0,e=v.length;t<e;t++)this.skinWeights.push(v[t].clone());var b=T.skinIndices;for(t=0,e=b.length;t<e;t++)this.skinIndices.push(b[t].clone());var w=T.lineDistances;for(t=0,e=w.length;t<e;t++)this.lineDistances.push(w[t]);var x=T.boundingBox;null!==x&&(this.boundingBox=x.clone());var S=T.boundingSphere;return null!==S&&(this.boundingSphere=S.clone()),this.elementsNeedUpdate=T.elementsNeedUpdate,this.verticesNeedUpdate=T.verticesNeedUpdate,this.uvsNeedUpdate=T.uvsNeedUpdate,this.normalsNeedUpdate=T.normalsNeedUpdate,this.colorsNeedUpdate=T.colorsNeedUpdate,this.lineDistancesNeedUpdate=T.lineDistancesNeedUpdate,this.groupsNeedUpdate=T.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(yt.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(yt.prototype,{isBufferAttribute:!0,setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0===e?0:e.length/this.itemSize,this.array=e},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.dynamic=e.dynamic,this},copyAt:function(a,t,e){a*=this.itemSize,e*=t.itemSize;for(var o=0,n=this.itemSize;o<n;o++)this.array[a+o]=t.array[e+o];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(a){for(var t=this.array,e=0,n=0,i=a.length,r;n<i;n++)r=a[n],void 0===r&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",n),r=new X),t[e++]=r.r,t[e++]=r.g,t[e++]=r.b;return this},copyIndicesArray:function(a){for(var t=this.array,e=0,n=0,i=a.length,r;n<i;n++)r=a[n],t[e++]=r.a,t[e++]=r.b,t[e++]=r.c;return this},copyVector2sArray:function(r){for(var t=this.array,e=0,n=0,i=r.length,o;n<i;n++)o=r[n],void 0===o&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",n),o=new el),t[e++]=o.x,t[e++]=o.y;return this},copyVector3sArray:function(a){for(var t=this.array,e=0,n=0,i=a.length,r;n<i;n++)r=a[n],void 0===r&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",n),r=new nl),t[e++]=r.x,t[e++]=r.y,t[e++]=r.z;return this},copyVector4sArray:function(a){for(var t=this.array,e=0,n=0,i=a.length,r;n<i;n++)r=a[n],void 0===r&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",n),r=new al),t[e++]=r.x,t[e++]=r.y,t[e++]=r.z,t[e++]=r.w;return this},set:function(a,t){return void 0===t&&(t=0),this.array.set(a,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(a,t){return this.array[a*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(a,t){return this.array[a*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(a,t){return this.array[a*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(a,t){return this.array[a*this.itemSize+3]=t,this},setXY:function(a,t,e){return a*=this.itemSize,this.array[a+0]=t,this.array[a+1]=e,this},setXYZ:function(a,t,e,o){return a*=this.itemSize,this.array[a+0]=t,this.array[a+1]=e,this.array[a+2]=o,this},setXYZW:function(a,t,e,o,n){return a*=this.itemSize,this.array[a+0]=t,this.array[a+1]=e,this.array[a+2]=o,this.array[a+3]=n,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}}),vt.prototype=Object.create(yt.prototype),vt.prototype.constructor=vt,bt.prototype=Object.create(yt.prototype),bt.prototype.constructor=bt,wt.prototype=Object.create(yt.prototype),wt.prototype.constructor=wt,xt.prototype=Object.create(yt.prototype),xt.prototype.constructor=xt,St.prototype=Object.create(yt.prototype),St.prototype.constructor=St,Et.prototype=Object.create(yt.prototype),Et.prototype.constructor=Et,Mt.prototype=Object.create(yt.prototype),Mt.prototype.constructor=Mt,Tt.prototype=Object.create(yt.prototype),Tt.prototype.constructor=Tt,At.prototype=Object.create(yt.prototype),At.prototype.constructor=At,Object.assign(Pt.prototype,{computeGroups:function(l){for(var t=[],n=void 0,s=l.faces,r=0,o,e;r<s.length;r++)e=s[r],e.materialIndex!==n&&(n=e.materialIndex,void 0!==o&&(o.count=3*r-o.start,t.push(o)),o={start:3*r,materialIndex:n});void 0!==o&&(o.count=3*r-o.start,t.push(o)),this.groups=t},fromGeometry:function(r){var t=r.faces,n=r.vertices,i=r.faceVertexUvs,o=i[0]&&0<i[0].length,a=i[1]&&0<i[1].length,s=r.morphTargets,l=s.length,c;if(0<l){for(c=[],_=0;_<l;_++)c[_]=[];this.morphTargets.position=c}var e=r.morphNormals,u=e.length,p;if(0<u){for(p=[],_=0;_<u;_++)p[_]=[];this.morphTargets.normal=p}for(var h=r.skinIndices,d=r.skinWeights,f=h.length===n.length,m=d.length===n.length,_=0,g;_<t.length;_++){g=t[_],this.vertices.push(n[g.a],n[g.b],n[g.c]);var y=g.vertexNormals;if(3===y.length)this.normals.push(y[0],y[1],y[2]);else{var v=g.normal;this.normals.push(v,v,v)}var b=g.vertexColors;if(3===b.length)this.colors.push(b[0],b[1],b[2]);else{var w=g.color;this.colors.push(w,w,w)}if(!0===o&&(void 0===(x=i[0][_])?(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",_),this.uvs.push(new el,new el,new el)):this.uvs.push(x[0],x[1],x[2])),!0===a){var x=i[1][_];void 0===x?(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",_),this.uvs2.push(new el,new el,new el)):this.uvs2.push(x[0],x[1],x[2])}for(E=0;E<l;E++){var S=s[E].vertices;c[E].push(S[g.a],S[g.b],S[g.c])}for(var E=0,M;E<u;E++)M=e[E].vertexNormals[_],p[E].push(M.a,M.b,M.c);f&&this.skinIndices.push(h[g.a],h[g.b],h[g.c]),m&&this.skinWeights.push(d[g.a],d[g.b],d[g.c])}return this.computeGroups(r),this.verticesNeedUpdate=r.verticesNeedUpdate,this.normalsNeedUpdate=r.normalsNeedUpdate,this.colorsNeedUpdate=r.colorsNeedUpdate,this.uvsNeedUpdate=r.uvsNeedUpdate,this.groupsNeedUpdate=r.groupsNeedUpdate,this}}),bl.MaxIndex=65535,Object.assign(bl.prototype,n.prototype,{isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){this.index=Array.isArray(e)?new(65535<It(e)?Mt:St)(e,1):e},addAttribute:function(a,t){return t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===a?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),void this.setIndex(t)):(this.attributes[a]=t,this):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),void this.addAttribute(a,new yt(arguments[1],arguments[2])))},getAttribute:function(e){return this.attributes[e]},removeAttribute:function(e){return delete this.attributes[e],this},addGroup:function(a,o,r){this.groups.push({start:a,count:o,materialIndex:void 0===r?0:r})},clearGroups:function(){this.groups=[]},setDrawRange:function(a,t){this.drawRange.start=a,this.drawRange.count=t},applyMatrix:function(a){var t=this.attributes.position;void 0!==t&&(a.applyToBufferAttribute(t),t.needsUpdate=!0);var e=this.attributes.normal;return void 0!==e&&(new rt().getNormalMatrix(a).applyToBufferAttribute(e),e.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var a=new il;return function(t){return a.makeRotationX(t),this.applyMatrix(a),this}}(),rotateY:function(){var a=new il;return function(t){return a.makeRotationY(t),this.applyMatrix(a),this}}(),rotateZ:function(){var a=new il;return function(t){return a.makeRotationZ(t),this.applyMatrix(a),this}}(),translate:function(){var a=new il;return function(t,e,o){return a.makeTranslation(t,e,o),this.applyMatrix(a),this}}(),scale:function(){var a=new il;return function(t,e,o){return a.makeScale(t,e,o),this.applyMatrix(a),this}}(),lookAt:function(){var a=new ut;return function(t){a.lookAt(t),a.updateMatrix(),this.applyMatrix(a.matrix)}}(),center:function(){this.computeBoundingBox();var e=this.boundingBox.getCenter().negate();return this.translate(e.x,e.y,e.z),e},setFromObject:function(a){var t=a.geometry;if(a.isPoints||a.isLine){var e=new Tt(3*t.vertices.length,3),o=new Tt(3*t.colors.length,3);if(this.addAttribute("position",e.copyVector3sArray(t.vertices)),this.addAttribute("color",o.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){var n=new Tt(t.lineDistances.length,1);this.addAttribute("lineDistance",n.copyArray(t.lineDistances))}null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())}else a.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},updateFromObject:function(a){var t=a.geometry;if(a.isMesh){var e=t.__directGeometry;if(!0===t.elementsNeedUpdate&&(e=void 0,t.elementsNeedUpdate=!1),void 0===e)return this.fromGeometry(t);e.verticesNeedUpdate=t.verticesNeedUpdate,e.normalsNeedUpdate=t.normalsNeedUpdate,e.colorsNeedUpdate=t.colorsNeedUpdate,e.uvsNeedUpdate=t.uvsNeedUpdate,e.groupsNeedUpdate=t.groupsNeedUpdate,t.verticesNeedUpdate=!1,t.normalsNeedUpdate=!1,t.colorsNeedUpdate=!1,t.uvsNeedUpdate=!1,t.groupsNeedUpdate=!1,t=e}var o;return!0===t.verticesNeedUpdate&&(void 0!==(o=this.attributes.position)&&(o.copyVector3sArray(t.vertices),o.needsUpdate=!0),t.verticesNeedUpdate=!1),!0===t.normalsNeedUpdate&&(void 0!==(o=this.attributes.normal)&&(o.copyVector3sArray(t.normals),o.needsUpdate=!0),t.normalsNeedUpdate=!1),!0===t.colorsNeedUpdate&&(void 0!==(o=this.attributes.color)&&(o.copyColorsArray(t.colors),o.needsUpdate=!0),t.colorsNeedUpdate=!1),t.uvsNeedUpdate&&(void 0!==(o=this.attributes.uv)&&(o.copyVector2sArray(t.uvs),o.needsUpdate=!0),t.uvsNeedUpdate=!1),t.lineDistancesNeedUpdate&&(void 0!==(o=this.attributes.lineDistance)&&(o.copyArray(t.lineDistances),o.needsUpdate=!0),t.lineDistancesNeedUpdate=!1),t.groupsNeedUpdate&&(t.computeGroups(a.geometry),this.groups=t.groups,t.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=new Pt().fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(_){var t=new Float32Array(3*_.vertices.length);if(this.addAttribute("position",new yt(t,3).copyVector3sArray(_.vertices)),0<_.normals.length){var e=new Float32Array(3*_.normals.length);this.addAttribute("normal",new yt(e,3).copyVector3sArray(_.normals))}if(0<_.colors.length){var n=new Float32Array(3*_.colors.length);this.addAttribute("color",new yt(n,3).copyColorsArray(_.colors))}if(0<_.uvs.length){var i=new Float32Array(2*_.uvs.length);this.addAttribute("uv",new yt(i,2).copyVector2sArray(_.uvs))}if(0<_.uvs2.length){var r=new Float32Array(2*_.uvs2.length);this.addAttribute("uv2",new yt(r,2).copyVector2sArray(_.uvs2))}if(0<_.indices.length){var o=new(65535<It(_.indices)?Uint32Array:Uint16Array)(3*_.indices.length);this.setIndex(new yt(o,1).copyIndicesArray(_.indices))}for(var a in this.groups=_.groups,_.morphTargets){for(var s=[],l=_.morphTargets[a],c=0,h=l.length;c<h;c++){var u=l[c],p=new Tt(3*u.length,3);s.push(p.copyVector3sArray(u))}this.morphAttributes[a]=s}if(0<_.skinIndices.length){var d=new Tt(4*_.skinIndices.length,4);this.addAttribute("skinIndex",d.copyVector4sArray(_.skinIndices))}if(0<_.skinWeights.length){var g=new Tt(4*_.skinWeights.length,4);this.addAttribute("skinWeight",g.copyVector4sArray(_.skinWeights))}return null!==_.boundingSphere&&(this.boundingSphere=_.boundingSphere.clone()),null!==_.boundingBox&&(this.boundingBox=_.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new hl);var e=this.attributes.position;void 0===e?this.boundingBox.makeEmpty():this.boundingBox.setFromBufferAttribute(e),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error("THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The \"position\" attribute is likely to have NaN values.",this)},computeBoundingSphere:function(){var l=new hl,t=new nl;return function(){null===this.boundingSphere&&(this.boundingSphere=new it);var e=this.attributes.position;if(e){var n=this.boundingSphere.center;l.setFromBufferAttribute(e),l.getCenter(n);for(var i=0,r=0,o=e.count;r<o;r++)t.x=e.getX(r),t.y=e.getY(r),t.z=e.getZ(r),i=C(i,n.distanceToSquared(t));this.boundingSphere.radius=O(i),isNaN(this.boundingSphere.radius)&&console.error("THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The \"position\" attribute is likely to have NaN values.",this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var h=this.index,t=this.attributes,e=this.groups;if(t.position){var n=t.position.array;if(void 0===t.normal)this.addAttribute("normal",new yt(new Float32Array(n.length),3));else for(var i=t.normal.array,r=0,o=i.length;r<o;r++)i[r]=0;var a=t.normal.array,u=new nl,p=new nl,d=new nl,f=new nl,m=new nl,_,s,l;if(h){var c=h.array;0===e.length&&this.addGroup(0,c.length);for(var g=0,y=e.length;g<y;++g)for(var x=e[g],b=x.start,r=b,o=b+x.count;r<o;r+=3)_=3*c[r+0],s=3*c[r+1],l=3*c[r+2],u.fromArray(n,_),p.fromArray(n,s),d.fromArray(n,l),f.subVectors(d,p),m.subVectors(u,p),f.cross(m),a[_]+=f.x,a[_+1]+=f.y,a[_+2]+=f.z,a[s]+=f.x,a[s+1]+=f.y,a[s+2]+=f.z,a[l]+=f.x,a[l+1]+=f.y,a[l+2]+=f.z}else for(var r=0,o=n.length;r<o;r+=9)u.fromArray(n,r),p.fromArray(n,r+3),d.fromArray(n,r+6),f.subVectors(d,p),m.subVectors(u,p),f.cross(m),a[r]=f.x,a[r+1]=f.y,a[r+2]=f.z,a[r+3]=f.x,a[r+4]=f.y,a[r+5]=f.z,a[r+6]=f.x,a[r+7]=f.y,a[r+8]=f.z;this.normalizeNormals(),t.normal.needsUpdate=!0}},merge:function(c,t){if(c&&c.isBufferGeometry){void 0===t&&(t=0);var e=this.attributes;for(var n in e)if(void 0!==c.attributes[n])for(var i=e[n].array,r=c.attributes[n],o=r.array,a=0,s=r.itemSize*t;a<o.length;a++,s++)i[s]=o[a];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",c)},normalizeNormals:function(){var a=new nl;return function(){for(var t=this.attributes.normal,e=0,o=t.count;e<o;e++)a.x=t.getX(e),a.y=t.getY(e),a.z=t.getZ(e),a.normalize(),t.setXYZ(e,a.x,a.y,a.z)}}(),toNonIndexed:function(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var d=new bl,t=this.index.array,e=this.attributes;for(var n in e){for(var i=e[n],r=i.array,o=i.itemSize,a=new r.constructor(t.length*o),s=0,l=0,c=0,m=t.length;c<m;c++){s=t[c]*o;for(var u=0;u<o;u++)a[l++]=r[s++]}d.addAttribute(n,new yt(a,o))}return d},toJSON:function(){var c={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(c.uuid=this.uuid,c.type=this.type,""!==this.name&&(c.name=this.name),void 0!==this.parameters){var t=this.parameters;for(var e in t)void 0!==t[e]&&(c[e]=t[e]);return c}c.data={attributes:{}};var n=this.index;null!==n&&(o=Array.prototype.slice.call(n.array),c.data.index={type:n.array.constructor.name,array:o});var i=this.attributes;for(var e in i){var r=i[e],o=Array.prototype.slice.call(r.array);c.data.attributes[e]={itemSize:r.itemSize,type:r.array.constructor.name,array:o,normalized:r.normalized}}var d=this.groups;0<d.length&&(c.data.groups=JSON.parse(JSON.stringify(d)));var s=this.boundingSphere;return null!==s&&(c.data.boundingSphere={center:s.center.toArray(),radius:s.radius}),c},clone:function(){return new bl().copy(this)},copy:function(m){var t,e,n;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=m.name;var i=m.index;null!==i&&this.setIndex(i.clone());var r=m.attributes;for(t in r){var o=r[t];this.addAttribute(t,o.clone())}var a=m.morphAttributes;for(t in a){var s=[],l=a[t];for(e=0,n=l.length;e<n;e++)s.push(l[e].clone());this.morphAttributes[t]=s}var c=m.groups;for(e=0,n=c.length;e<n;e++){var _=c[e];this.addGroup(_.start,_.count,_.materialIndex)}var u=m.boundingBox;null!==u&&(this.boundingBox=u.clone());var p=m.boundingSphere;return null!==p&&(this.boundingSphere=p.clone()),this.drawRange.start=m.drawRange.start,this.drawRange.count=m.drawRange.count,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),(Ct.prototype=Object.create(gt.prototype)).constructor=Ct,Lt.prototype=Object.create(bl.prototype),Lt.prototype.constructor=Lt,(xl.prototype=Object.create(gt.prototype)).constructor=xl,vl.prototype=Object.create(bl.prototype),vl.prototype.constructor=vl,Sl.prototype=Object.create(K.prototype),Sl.prototype.constructor=Sl,Sl.prototype.isMeshBasicMaterial=!0,Sl.prototype.copy=function(e){return K.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this},Object.assign(wl.prototype,{set:function(a,t){return this.origin.copy(a),this.direction.copy(t),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(a,t){return(t||new nl).copy(this.direction).multiplyScalar(a).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:function(){var a=new nl;return function(t){return this.origin.copy(this.at(t,a)),this}}(),closestPointToPoint:function(a,t){var e=t||new nl;e.subVectors(a,this.origin);var o=e.dot(this.direction);return 0>o?e.copy(this.origin):e.copy(this.direction).multiplyScalar(o).add(this.origin)},distanceToPoint:function(e){return O(this.distanceSqToPoint(e))},distanceSqToPoint:function(){var a=new nl;return function(t){var e=a.subVectors(t,this.origin).dot(this.direction);return 0>e?this.origin.distanceToSquared(t):(a.copy(this.direction).multiplyScalar(e).add(this.origin),a.distanceToSquared(t))}}(),distanceSqToSegment:function(){var y=new nl,t=new nl,e=new nl;return function(n,i,r,o){y.copy(n).add(i).multiplyScalar(.5),t.copy(i).sub(n).normalize(),e.copy(this.origin).sub(y);var a=.5*n.distanceTo(i),b=-this.direction.dot(t),x=e.dot(this.direction),d=-e.dot(t),v=e.lengthSq(),m=N(1-b*b),_,s,l,c;if(!(0<m))s=0<b?-a:a,l=-(_=C(0,-(b*s+x)))*_+s*(s+2*d)+v;else if(_=b*d-x,s=b*x-d,c=a*m,!(0<=_))s<=-c?l=-(_=C(0,-(-b*a+x)))*_+(s=0<_?-a:U(C(-a,-d),a))*(s+2*d)+v:s<=c?(_=0,l=(s=U(C(-a,-d),a))*(s+2*d)+v):l=-(_=C(0,-(b*a+x)))*_+(s=0<_?a:U(C(-a,-d),a))*(s+2*d)+v;else if(!(s>=-c))s=-a,l=-(_=C(0,-(b*s+x)))*_+s*(s+2*d)+v;else if(s<=c){var S=1/m;l=(_*=S)*(_+b*(s*=S)+2*x)+s*(b*_+s+2*d)+v}else s=a,l=-(_=C(0,-(b*s+x)))*_+s*(s+2*d)+v;return r&&r.copy(this.direction).multiplyScalar(_).add(this.origin),o&&o.copy(t).multiplyScalar(s).add(y),l}}(),intersectSphere:function(){var c=new nl;return function(t,e){c.subVectors(t.center,this.origin);var n=c.dot(this.direction),i=c.dot(c)-n*n,r=t.radius*t.radius;if(i>r)return null;var o=O(r-i),a=n-o,s=n+o;return 0>a&&0>s?null:0>a?this.at(s,e):this.at(a,e)}}(),intersectsSphere:function(e){return this.distanceToPoint(e.center)<=e.radius},distanceToPlane:function(a){var t=a.normal.dot(this.direction);if(0===t)return 0===a.distanceToPoint(this.origin)?0:null;var e=-(this.origin.dot(a.normal)+a.constant)/t;return 0<=e?e:null},intersectPlane:function(a,t){var e=this.distanceToPlane(a);return null===e?null:this.at(e,t)},intersectsPlane:function(a){var t=a.distanceToPoint(this.origin);return 0===t||0>a.normal.dot(this.direction)*t},intersectBox:function(d,t){var e=1/this.direction.x,l=1/this.direction.y,c=1/this.direction.z,p=this.origin,u,n,i,r,o,a;return 0<=e?(u=(d.min.x-p.x)*e,n=(d.max.x-p.x)*e):(u=(d.max.x-p.x)*e,n=(d.min.x-p.x)*e),0<=l?(i=(d.min.y-p.y)*l,r=(d.max.y-p.y)*l):(i=(d.max.y-p.y)*l,r=(d.min.y-p.y)*l),u>r||i>n?null:((i>u||u!==u)&&(u=i),(r<n||n!==n)&&(n=r),0<=c?(o=(d.min.z-p.z)*c,a=(d.max.z-p.z)*c):(o=(d.max.z-p.z)*c,a=(d.min.z-p.z)*c),u>a||o>n?null:((o>u||u!==u)&&(u=o),(a<n||n!==n)&&(n=a),0>n?null:this.at(0<=u?u:n,t)))},intersectsBox:function(){var a=new nl;return function(t){return null!==this.intersectBox(t,a)}}(),intersectTriangle:function(){var m=new nl,t=new nl,e=new nl,n=new nl;return function(i,r,o,a,s){t.subVectors(r,i),e.subVectors(o,i),n.crossVectors(t,e);var l=this.direction.dot(n),_;if(0<l){if(a)return null;_=1}else{if(!(0>l))return null;_=-1,l=-l}m.subVectors(this.origin,i);var g=_*this.direction.dot(e.crossVectors(m,e));if(0>g)return null;var u=_*this.direction.dot(t.cross(m));if(0>u)return null;if(g+u>l)return null;var p=-_*m.dot(n);return 0>p?null:this.at(p/l,s)}}(),applyMatrix4:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}}),Object.assign(Ut.prototype,{set:function(a,t){return this.start.copy(a),this.end.copy(t),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},getCenter:function(e){return(e||new nl).addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){return(e||new nl).subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(a,t){var e=t||new nl;return this.delta(e).multiplyScalar(a).add(this.start)},closestPointToPointParameter:function(){var a=new nl,t=new nl;return function(e,n){a.subVectors(e,this.start),t.subVectors(this.end,this.start);var i=t.dot(t),r=t.dot(a)/i;return n&&(r=rd.clamp(r,0,1)),r}}(),closestPointToPoint:function(a,t,e){var o=this.closestPointToPointParameter(a,t),n=e||new nl;return this.delta(n).multiplyScalar(o).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}}),Object.assign(Nt,{normal:function(){var l=new nl;return function(t,e,n,i){var r=i||new nl;r.subVectors(n,e),l.subVectors(t,e),r.cross(l);var o=r.lengthSq();return 0<o?r.multiplyScalar(1/O(o)):r.set(0,0,0)}}(),barycoordFromPoint:function(){var h=new nl,t=new nl,e=new nl;return function(n,i,r,o,a){h.subVectors(o,i),t.subVectors(r,i),e.subVectors(n,i);var s=h.dot(h),l=h.dot(t),c=h.dot(e),u=t.dot(t),p=t.dot(e),d=s*u-l*l,f=a||new nl;if(0===d)return f.set(-2,-1,-1);var m=1/d,_=(u*c-l*p)*m,g=(s*p-l*c)*m;return f.set(1-_-g,g,_)}}(),containsPoint:function(){var a=new nl;return function(t,e,n,i){var r=Nt.barycoordFromPoint(t,e,n,i,a);return 0<=r.x&&0<=r.y&&1>=r.x+r.y}}()}),Object.assign(Nt.prototype,{set:function(a,t,e){return this.a.copy(a),this.b.copy(t),this.c.copy(e),this},setFromPointsAndIndices:function(a,t,e,o){return this.a.copy(a[t]),this.b.copy(a[e]),this.c.copy(a[o]),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},area:function(){var a=new nl,t=new nl;return function(){return a.subVectors(this.c,this.b),t.subVectors(this.a,this.b),.5*a.cross(t).length()}}(),midpoint:function(e){return(e||new nl).addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(e){return Nt.normal(this.a,this.b,this.c,e)},plane:function(e){return(e||new ot).setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(a,t){return Nt.barycoordFromPoint(a,this.a,this.b,this.c,t)},containsPoint:function(e){return Nt.containsPoint(e,this.a,this.b,this.c)},closestPointToPoint:function(){var d=new ot,t=[new Ut,new Ut,new Ut],e=new nl,o=new nl;return function(n,r){var i=r||new nl,a=1/0;if(d.setFromCoplanarPoints(this.a,this.b,this.c),d.projectPoint(n,e),!0===this.containsPoint(e))i.copy(e);else{t[0].set(this.a,this.b),t[1].set(this.b,this.c),t[2].set(this.c,this.a);for(var s=0;s<t.length;s++){t[s].closestPointToPoint(e,!0,o);var l=e.distanceToSquared(o);l<a&&(a=l,i.copy(o))}}return i}}(),equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}),Bt.prototype=Object.assign(Object.create(ut.prototype),{constructor:Bt,isMesh:!0,setDrawMode:function(e){this.drawMode=e},copy:function(e){return ut.prototype.copy.call(this,e),this.drawMode=e.drawMode,this},updateMorphTargets:function(){var l=this.geometry,i,t,e;if(l.isBufferGeometry){var n=l.morphAttributes,r=Object.keys(n);if(0<r.length){var o=n[r[0]];if(void 0!==o)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},i=0,t=o.length;i<t;i++)e=o[i].name||i+"",this.morphTargetInfluences.push(0),this.morphTargetDictionary[e]=i}}else{var a=l.morphTargets;if(void 0!==a&&0<a.length)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},i=0,t=a.length;i<t;i++)e=a[i].name||i+"",this.morphTargetInfluences.push(0),this.morphTargetDictionary[e]=i}},raycast:function(){function x(l,s,e,n,i,r,o){return Nt.barycoordFromPoint(l,s,e,n,d),i.multiplyScalar(d.x),r.multiplyScalar(d.y),o.multiplyScalar(d.z),i.add(r).add(o),i.clone()}function t(c,d,u,n,i,r,o,a){if(null===(d.side===Fr?n.intersectTriangle(o,r,i,!0,a):n.intersectTriangle(i,r,o,d.side!==Lc,a)))return null;p.copy(a),p.applyMatrix4(c.matrixWorld);var s=u.ray.origin.distanceTo(p);return s<u.near||s>u.far?null:{distance:s,point:p.clone(),object:c}}function e(e,c,i,r,o,a,h,u){S.fromBufferAttribute(r,a),s.fromBufferAttribute(r,h),l.fromBufferAttribute(r,u);var p=t(e,e.material,c,i,S,s,l,g);return p&&(o&&(f.fromBufferAttribute(o,a),m.fromBufferAttribute(o,h),_.fromBufferAttribute(o,u),p.uv=x(g,S,s,l,f,m,_)),p.face=new yl(a,h,u,Nt.normal(S,s,l)),p.faceIndex=a),p}var n=new il,i=new wl,o=new it,S=new nl,s=new nl,l=new nl,a=new nl,r=new nl,c=new nl,f=new el,m=new el,_=new el,d=new nl,g=new nl,p=new nl;return function(d,p){var h=this.geometry,u=this.material,y=this.matrixWorld;if(void 0!==u&&(null===h.boundingSphere&&h.computeBoundingSphere(),o.copy(h.boundingSphere),o.applyMatrix4(y),!1!==d.ray.intersectsSphere(o)&&(n.getInverse(y),i.copy(d.ray).applyMatrix4(n),null===h.boundingBox||!1!==i.intersectsBox(h.boundingBox)))){var b;if(h.isBufferGeometry){var v=h.index,w=h.attributes.position,P=h.attributes.uv,A,I,Z,E,M;if(null!==v)for(E=0,M=v.count;E<M;E+=3)A=v.getX(E),I=v.getX(E+1),Z=v.getX(E+2),(b=e(this,d,i,w,P,A,I,Z))&&(b.faceIndex=B(E/3),p.push(b));else for(E=0,M=w.count;E<M;E+=3)(b=e(this,d,i,w,P,A=E,I=E+1,Z=E+2))&&(b.index=A,p.push(b))}else if(h.isGeometry){var T=Array.isArray(u),k=h.vertices,O=h.faces,F=h.faceVertexUvs[0],U,C,L,R;0<F.length&&(R=F);for(var D=0,N=O.length;D<N;D++){var J=O[D],z=T?u[J.materialIndex]:u;if(void 0!==z){if(U=k[J.a],C=k[J.b],L=k[J.c],!0===z.morphTargets){var G=h.morphTargets,j=this.morphTargetInfluences;S.set(0,0,0),s.set(0,0,0),l.set(0,0,0);for(var H=0,V=G.length,W;H<V;H++)if(W=j[H],0!==W){var q=G[H].vertices;S.addScaledVector(a.subVectors(q[J.a],U),W),s.addScaledVector(r.subVectors(q[J.b],C),W),l.addScaledVector(c.subVectors(q[J.c],L),W)}S.add(U),s.add(C),l.add(L),U=S,C=s,L=l}if(b=t(this,z,d,i,U,C,L,g)){if(R&&R[D]){var X=R[D];f.copy(X[0]),m.copy(X[1]),_.copy(X[2]),b.uv=x(g,U,C,L,f,m,_)}b.face=J,b.faceIndex=D,p.push(b)}}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var Xa=0;ye.prototype=Object.assign(Object.create(fl.prototype),{constructor:ye,isArrayCamera:!0}),Ee.prototype.isFogExp2=!0,Ee.prototype.clone=function(){return new Ee(this.color.getHex(),this.density)},Ee.prototype.toJSON=function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}},Me.prototype.isFog=!0,Me.prototype.clone=function(){return new Me(this.color.getHex(),this.near,this.far)},Me.prototype.toJSON=function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}},Te.prototype=Object.assign(Object.create(ut.prototype),{constructor:Te,copy:function(a,t){return ut.prototype.copy.call(this,a,t),null!==a.background&&(this.background=a.background.clone()),null!==a.fog&&(this.fog=a.fog.clone()),null!==a.overrideMaterial&&(this.overrideMaterial=a.overrideMaterial.clone()),this.autoUpdate=a.autoUpdate,this.matrixAutoUpdate=a.matrixAutoUpdate,this},toJSON:function(a){var t=ut.prototype.toJSON.call(this,a);return null!==this.background&&(t.object.background=this.background.toJSON(a)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}),Ml.prototype=Object.assign(Object.create(ut.prototype),{constructor:Ml,isLensFlare:!0,copy:function(a){ut.prototype.copy.call(this,a),this.positionScreen.copy(a.positionScreen),this.customUpdateCallback=a.customUpdateCallback;for(var t=0,e=a.lensFlares.length;t<e;t++)this.lensFlares.push(a.lensFlares[t]);return this},add:function(a,l,s,c,d,p){void 0===l&&(l=-1),void 0===s&&(s=0),void 0===p&&(p=1),void 0===d&&(d=new X(16777215)),void 0===c&&(c=Dc),s=U(s,C(0,s)),this.lensFlares.push({texture:a,size:l,distance:s,x:0,y:0,z:0,scale:1,rotation:0,opacity:p,color:d,blending:c})},updateLensFlares:function(){var a=this.lensFlares.length,o=2*-this.positionScreen.x,n=2*-this.positionScreen.y,r,t;for(r=0;r<a;r++)(t=this.lensFlares[r]).x=this.positionScreen.x+o*t.distance,t.y=this.positionScreen.y+n*t.distance,t.wantedRotation=.25*(t.x*Gn),t.rotation+=.25*(t.wantedRotation-t.rotation)}}),Pl.prototype=Object.create(K.prototype),Pl.prototype.constructor=Pl,Pl.prototype.isSpriteMaterial=!0,Pl.prototype.copy=function(e){return K.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.rotation=e.rotation,this},Cl.prototype=Object.assign(Object.create(ut.prototype),{constructor:Cl,isSprite:!0,raycast:function(){var l=new nl,t=new nl,e=new nl;return function(n,i){t.setFromMatrixPosition(this.matrixWorld),n.ray.closestPointToPoint(t,l),e.setFromMatrixScale(this.matrixWorld);var r=e.x*e.y/4;if(!(t.distanceToSquared(l)>r)){var o=n.ray.origin.distanceTo(l);o<n.near||o>n.far||i.push({distance:o,point:l.clone(),face:null,object:this})}}}(),clone:function(){return new this.constructor(this.material).copy(this)}}),Al.prototype=Object.assign(Object.create(ut.prototype),{constructor:Al,copy:function(a){ut.prototype.copy.call(this,a,!1);for(var t=a.levels,e=0,o=t.length,n;e<o;e++)n=t[e],this.addLevel(n.object.clone(),n.distance);return this},addLevel:function(a,o){void 0===o&&(o=0),o=N(o);for(var r=this.levels,n=0;n<r.length&&!(o<r[n].distance);n++);r.splice(n,0,{distance:o,object:a}),this.add(a)},getObjectForDistance:function(a){for(var t=this.levels,e=1,o=t.length;e<o&&!(a<t[e].distance);e++);return t[e-1].object},raycast:function(){var a=new nl;return function(t,e){a.setFromMatrixPosition(this.matrixWorld);var o=t.ray.origin.distanceTo(a);this.getObjectForDistance(o).raycast(t,e)}}(),update:function(){var l=new nl,t=new nl;return function(e){var n=this.levels;if(1<n.length){l.setFromMatrixPosition(e.matrixWorld),t.setFromMatrixPosition(this.matrixWorld);var i=l.distanceTo(t);n[0].object.visible=!0;for(var r=1,o=n.length;r<o&&i>=n[r].distance;r++)n[r-1].object.visible=!1,n[r].object.visible=!0;for(;r<o;r++)n[r].object.visible=!1}}}(),toJSON:function(a){var t=ut.prototype.toJSON.call(this,a);t.object.levels=[];for(var e=this.levels,n=0,i=e.length,r;n<i;n++)r=e[n],t.object.levels.push({object:r.object.uuid,distance:r.distance});return t}}),Object.assign(Ll.prototype,{calculateInverses:function(){this.boneInverses=[];for(var a=0,t=this.bones.length,e;a<t;a++)e=new il,this.bones[a]&&e.getInverse(this.bones[a].matrixWorld),this.boneInverses.push(e)},pose:function(){var a,t,e;for(t=0,e=this.bones.length;t<e;t++)(a=this.bones[t])&&a.matrixWorld.getInverse(this.boneInverses[t]);for(t=0,e=this.bones.length;t<e;t++)(a=this.bones[t])&&(a.parent&&a.parent.isBone?(a.matrix.getInverse(a.parent.matrixWorld),a.matrix.multiply(a.matrixWorld)):a.matrix.copy(a.matrixWorld),a.matrix.decompose(a.position,a.quaternion,a.scale))},update:function(){var o=new il,t=new il;return function(){for(var e=this.bones,n=this.boneInverses,i=this.boneMatrices,r=this.boneTexture,c=0,a=e.length,s;c<a;c++)s=e[c]?e[c].matrixWorld:t,o.multiplyMatrices(s,n[c]),o.toArray(i,16*c);void 0!==r&&(r.needsUpdate=!0)}}(),clone:function(){return new Ll(this.bones,this.boneInverses)}}),Re.prototype=Object.assign(Object.create(ut.prototype),{constructor:Re,isBone:!0}),Il.prototype=Object.assign(Object.create(Bt.prototype),{constructor:Il,isSkinnedMesh:!0,initBones:function(){var a=[],o,t,e,r;if(this.geometry&&void 0!==this.geometry.bones){for(e=0,r=this.geometry.bones.length;e<r;e++)t=this.geometry.bones[e],o=new Re,a.push(o),o.name=t.name,o.position.fromArray(t.pos),o.quaternion.fromArray(t.rotq),void 0!==t.scl&&o.scale.fromArray(t.scl);for(e=0,r=this.geometry.bones.length;e<r;e++)-1!==(t=this.geometry.bones[e]).parent&&null!==t.parent&&void 0!==a[t.parent]?a[t.parent].add(a[e]):this.add(a[e])}return this.updateMatrixWorld(!0),a},bind:function(a,t){this.skeleton=a,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){var a,t;if(this.geometry&&this.geometry.isGeometry)for(t=0;t<this.geometry.skinWeights.length;t++){var e=this.geometry.skinWeights[t];(a=1/e.lengthManhattan())===1/0?e.set(1,0,0,0):e.multiplyScalar(a)}else if(this.geometry&&this.geometry.isBufferGeometry){var o=new al,n=this.geometry.attributes.skinWeight;for(t=0;t<n.count;t++)o.x=n.getX(t),o.y=n.getY(t),o.z=n.getZ(t),o.w=n.getW(t),(a=1/o.lengthManhattan())===1/0?o.set(1,0,0,0):o.multiplyScalar(a),n.setXYZW(t,o.x,o.y,o.z,o.w)}},updateMatrixWorld:function(e){Bt.prototype.updateMatrixWorld.call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Rl.prototype=Object.create(K.prototype),Rl.prototype.constructor=Rl,Rl.prototype.isLineBasicMaterial=!0,Rl.prototype.copy=function(e){return K.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this},Dl.prototype=Object.assign(Object.create(ut.prototype),{constructor:Dl,isLine:!0,raycast:function(){var o=new il,t=new wl,e=new it;return function(n,i){var r=n.linePrecision,h=r*r,a=this.geometry,s=this.matrixWorld;if(null===a.boundingSphere&&a.computeBoundingSphere(),e.copy(a.boundingSphere),e.applyMatrix4(s),!1!==n.ray.intersectsSphere(e)){o.getInverse(s),t.copy(n.ray).applyMatrix4(o);var l=new nl,c=new nl,u=new nl,p=new nl,d=this&&this.isLineSegments?2:1;if(a.isBufferGeometry){var f=a.index,m=a.attributes.position.array;if(null!==f)for(var _=f.array,g=0,T=_.length-1;g<T;g+=d){var v=_[g],b=_[g+1];l.fromArray(m,3*v),c.fromArray(m,3*b),(S=t.distanceSqToSegment(l,c,p,u))>h||(p.applyMatrix4(this.matrixWorld),(E=n.ray.origin.distanceTo(p))<n.near||E>n.far||i.push({distance:E,point:u.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this}))}else for(var g=0,T=m.length/3-1;g<T;g+=d)l.fromArray(m,3*g),c.fromArray(m,3*g+3),(S=t.distanceSqToSegment(l,c,p,u))>h||(p.applyMatrix4(this.matrixWorld),(E=n.ray.origin.distanceTo(p))<n.near||E>n.far||i.push({distance:E,point:u.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this}))}else if(a.isGeometry)for(var w=a.vertices,x=w.length,g=0,S;g<x-1;g+=d)if(S=t.distanceSqToSegment(w[g],w[g+1],p,u),!(S>h)){p.applyMatrix4(this.matrixWorld);var E=n.ray.origin.distanceTo(p);E<n.near||E>n.far||i.push({distance:E,point:u.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this})}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Fl.prototype=Object.assign(Object.create(Dl.prototype),{constructor:Fl,isLineSegments:!0}),kl.prototype=Object.assign(Object.create(Dl.prototype),{constructor:kl,isLineLoop:!0}),Ol.prototype=Object.create(K.prototype),Ol.prototype.constructor=Ol,Ol.prototype.isPointsMaterial=!0,Ol.prototype.copy=function(e){return K.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this},Ul.prototype=Object.assign(Object.create(ut.prototype),{constructor:Ul,isPoints:!0,raycast:function(){var a=new il,h=new wl,e=new it;return function(x,i){function t(e,t){var l=h.distanceSqToPoint(e);if(l<u){var d=h.closestPointToPoint(e);d.applyMatrix4(S);var s=x.ray.origin.distanceTo(d);if(s<x.near||s>x.far)return;i.push({distance:s,distanceToRay:O(l),point:d.clone(),index:t,face:null,object:r})}}var r=this,o=this.geometry,S=this.matrixWorld,n=x.params.Points.threshold;if(null===o.boundingSphere&&o.computeBoundingSphere(),e.copy(o.boundingSphere),e.applyMatrix4(S),e.radius+=n,!1!==x.ray.intersectsSphere(e)){a.getInverse(S),h.copy(x.ray).applyMatrix4(a);var l=n/((this.scale.x+this.scale.y+this.scale.z)/3),u=l*l,s=new nl;if(o.isBufferGeometry){var c=o.index,d=o.attributes.position.array;if(null!==c)for(var p=c.array,m=0,_=p.length,g;m<_;m++)g=p[m],s.fromArray(d,3*g),t(s,g);else for(var m=0,f=d.length/3;m<f;m++)s.fromArray(d,3*m),t(s,m)}else for(var y=o.vertices,m=0,f=y.length;m<f;m++)t(y[m],m)}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Nl.prototype=Object.assign(Object.create(ut.prototype),{constructor:Nl}),(Bl.prototype=Object.create(tl.prototype)).constructor=Bl,(je.prototype=Object.create(tl.prototype)).constructor=je,je.prototype.isCompressedTexture=!0,(He.prototype=Object.create(tl.prototype)).constructor=He,He.prototype.isDepthTexture=!0,Ve.prototype=Object.create(bl.prototype),Ve.prototype.constructor=Ve,(zl.prototype=Object.create(gt.prototype)).constructor=zl,(Gl.prototype=Object.create(bl.prototype)).constructor=Gl,(Hl.prototype=Object.create(gt.prototype)).constructor=Hl,Vl.prototype=Object.create(bl.prototype),Vl.prototype.constructor=Vl,(Wl.prototype=Object.create(gt.prototype)).constructor=Wl,(jl.prototype=Object.create(Vl.prototype)).constructor=jl,(Xl.prototype=Object.create(gt.prototype)).constructor=Xl,ql.prototype=Object.create(Vl.prototype),ql.prototype.constructor=ql,(Yl.prototype=Object.create(gt.prototype)).constructor=Yl,(Zl.prototype=Object.create(Vl.prototype)).constructor=Zl,(Jl.prototype=Object.create(gt.prototype)).constructor=Jl,(Kl.prototype=Object.create(Vl.prototype)).constructor=Kl,(Ql.prototype=Object.create(gt.prototype)).constructor=Ql,($l.prototype=Object.create(bl.prototype)).constructor=$l,(ms.prototype=Object.create(gt.prototype)).constructor=ms,(_s.prototype=Object.create(bl.prototype)).constructor=_s,(gs.prototype=Object.create(gt.prototype)).constructor=gs,(ys.prototype=Object.create(bl.prototype)).constructor=ys;var Ya={area:function(a){for(var t=a.length,e=0,o=t-1,n=0;n<t;o=n++)e+=a[o].x*a[n].y-a[n].x*a[o].y;return .5*e},triangulate:function(){function i(C,L,e,n,i,r){var o,a,s,l,c,h,u,p,d;if(a=C[r[L]].x,s=C[r[L]].y,l=C[r[e]].x,c=C[r[e]].y,h=C[r[n]].x,u=C[r[n]].y,0>=(l-a)*(u-s)-(c-s)*(h-a))return!1;var f,m,_,g,y,v,b,w,x,S,E,M,T,A,P;for(f=h-l,m=u-c,_=a-h,g=s-u,y=l-a,v=c-s,o=0;o<i;o++)if(p=C[r[o]].x,d=C[r[o]].y,(p!==a||d!==s)&&(p!==l||d!==c)&&(p!==h||d!==u)&&(b=p-a,w=d-s,x=p-l,S=d-c,E=p-h,M=d-u,P=f*S-m*x,T=y*w-v*b,A=_*M-g*E,P>=-Mc&&A>=-Mc&&T>=-Mc))return!1;return!0}return function(t,e){var n=t.length;if(3>n)return null;var g=[],s=[],l=[],c,r,o;if(0<Ya.area(t))for(r=0;r<n;r++)s[r]=r;else for(r=0;r<n;r++)s[r]=n-1-r;var a=n,h=2*a;for(r=a-1;2<a;){if(0>=h--)return console.warn("THREE.ShapeUtils: Unable to triangulate polygon! in triangulate()"),e?l:g;if(c=r,a<=c&&(c=0),r=c+1,a<=r&&(r=0),o=r+1,a<=o&&(o=0),i(t,c,r,o,a,s)){var u,p,d,f,m;for(u=s[c],p=s[r],d=s[o],g.push([t[u],t[p],t[d]]),l.push([s[c],s[r],s[o]]),f=r,m=r+1;m<a;f++,m++)s[f]=s[m];h=2*--a}}return e?l:g}}(),triangulateShape:function(y,t){function e(a){var t=a.length;2<t&&a[t-1].equals(a[0])&&a.pop()}function T(a,t,e){return a.x===t.x?a.y<t.y?a.y<=e.y&&e.y<=t.y:t.y<=e.y&&e.y<=a.y:a.x<t.x?a.x<=e.x&&e.x<=t.x:t.x<=e.x&&e.x<=a.x}function b(i,t,e,n,P){var o=t.x-i.x,a=t.y-i.y,s=n.x-e.x,l=n.y-e.y,c=i.x-e.x,h=i.y-e.y,u=a*s-o*l,p=a*c-o*h;if(N(u)>Mc){var d;if(0<u){if(0>p||p>u)return[];if(0>(d=l*c-s*h)||d>u)return[]}else{if(0<p||p<u)return[];if(0<(d=l*c-s*h)||d<u)return[]}if(0===d)return P&&(0===p||p===u)?[]:[i];if(d===u)return P&&(0===p||p===u)?[]:[t];if(0===p)return[e];if(p===u)return[n];var f=d/u;return[{x:i.x+f*o,y:i.y+f*a}]}if(0!==p||l*c!=s*h)return[];var m=0===o&&0===a,_=0===s&&0===l;if(m&&_)return i.x!==e.x||i.y!==e.y?[]:[i];if(m)return T(e,n,i)?[i]:[];if(_)return T(i,t,e)?[e]:[];var g,y,v,b,w,x,S,E;return 0===o?(i.y<t.y?(g=i,v=i.y,y=t,b=t.y):(g=t,v=t.y,y=i,b=i.y),e.y<n.y?(w=e,S=e.y,x=n,E=n.y):(w=n,S=n.y,x=e,E=e.y)):(i.x<t.x?(g=i,v=i.x,y=t,b=t.x):(g=t,v=t.x,y=i,b=i.x),e.x<n.x?(w=e,S=e.x,x=n,E=n.x):(w=n,S=n.x,x=e,E=e.x)),v<=S?b<S?[]:b===S?P?[]:[w]:b<=E?[w,y]:[w,x]:v>E?[]:v===E?P?[]:[g]:b<=E?[g,y]:[g,x]}function x(d,t,e,n){var i=t.x-d.x,r=t.y-d.y,m=e.x-d.x,a=e.y-d.y,s=n.x-d.x,l=n.y-d.y,c=i*a-r*m,_=i*l-r*s;if(N(c)>Mc){var u=s*a-l*m;return 0<c?0<=_&&0<=u:0<=_||0<=u}return 0<_}e(y),t.forEach(e);for(var o={},r=y.concat(),n=0,i=t.length,d,a,s,l,c,p;n<i;n++)Array.prototype.push.apply(r,t[n]);for(d=0,a=r.length;d<a;d++)void 0!==o[c=r[d].x+":"+r[d].y]&&console.warn("THREE.ShapeUtils: Duplicate point",c,d),o[c]=d;var u=function(o,r){for(var S=o.concat(),e=[],t=[],m=0,_=r.length,g,n,i,a,s,l,c,h,u,p,d;m<_;m++)e.push(m);for(var f=0,y=2*e.length;0<e.length;){if(0>--y){console.log("THREE.ShapeUtils: Infinite Loop! Holes left:\" + indepHoles.length + \", Probably Hole outside Shape!");break}for(i=f;i<S.length;i++){for(a=S[i],n=-1,m=0;m<e.length;m++)if(l=e[m],c=a.x+":"+a.y+":"+l,void 0===t[c]){g=r[l];for(var v=0;v<g.length;v++)if(s=g[v],function(o,t){var e=S.length-1,n=o-1;0>n&&(n=e);var r=o+1;r>e&&(r=0);var a=x(S[o],S[n],S[r],g[t]);if(!a)return!1;var i=g.length-1,l=t-1;0>l&&(l=i);var c=t+1;return c>i&&(c=0),!!(a=x(g[t],g[l],g[c],S[o]))}(i,v)&&!function(a,t){var e,o;for(e=0;e<S.length;e++)if(o=e+1,o%=S.length,0<b(a,t,S[e],S[o],!0).length)return!0;return!1}(a,s)&&!function(l,t){var n,i,o,a;for(n=0;n<e.length;n++)for(i=r[e[n]],o=0;o<i.length;o++)if(a=o+1,a%=i.length,0<b(l,t,i[o],i[a],!0).length)return!0;return!1}(a,s)){n=v,e.splice(m,1),h=S.slice(0,i+1),u=S.slice(i),p=g.slice(n),d=g.slice(0,n+1),S=h.concat(p).concat(d).concat(u),f=i;break}if(0<=n)break;t[c]=!0}if(0<=n)break}}return S}(y,t),m=Ya.triangulate(u,!1);for(d=0,a=m.length;d<a;d++)for(l=m[d],s=0;3>s;s++)void 0!==(p=o[c=l[s].x+":"+l[s].y])&&(l[s]=p);return m.concat()},isClockWise:function(e){return 0>Ya.area(e)}};(bs.prototype=Object.create(gt.prototype)).constructor=bs,xs.prototype=Object.create(bl.prototype),xs.prototype.constructor=xs,xs.prototype.getArrays=function(){var a=this.getAttribute("position"),t=a?Array.prototype.slice.call(a.array):[],o=this.getAttribute("uv"),n=o?Array.prototype.slice.call(o.array):[],l=this.index;return{position:t,uv:n,index:l?Array.prototype.slice.call(l.array):[]}},xs.prototype.addShapeList=function(a,t){var e=a.length;t.arrays=this.getArrays();for(var o=0,n;o<e;o++)n=a[o],this.addShape(n,t);this.setIndex(t.arrays.index),this.addAttribute("position",new Tt(t.arrays.position,3)),this.addAttribute("uv",new Tt(t.arrays.uv,2))},xs.prototype.addShape=function(r,h){function e(a,t,e){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(e).add(a)}function t(r,t,e){var n=r.x-t.x,s=r.y-t.y,p=e.x-r.x,c=e.y-r.y,h=n*n+s*s,u,b,o;if(N(n*c-s*p)>Mc){var a=O(h),d=O(p*p+c*c),f=t.x-s/a,m=t.y+n/a,_=((e.x-c/d-f)*c-(e.y+p/d-m)*p)/(n*c-s*p),g=(u=f+n*_-r.x)*u+(b=m+s*_-r.y)*b;if(2>=g)return new el(u,b);o=O(g/2)}else{var y=!1;n>Mc?p>Mc&&(y=!0):n<-Mc?p<-Mc&&(y=!0):Ec(s)===Ec(c)&&(y=!0),y?(u=-s,b=n,o=O(h)):(u=n,b=s,o=O(h/2))}return new el(u/o,b/o)}function i(l,t){var e,n;for(Z=l.length;0<=--Z;){e=Z,0>(n=Z-1)&&(n=l.length-1);var i=0,r=T+2*S;for(i=0;i<r;i++){var c=z*i,a=z*(i+1);ee(t+e+c,t+n+c,t+n+a,t+e+a,l,i,r,e,n)}}}function o(a,t,e){y.push(a),y.push(t),y.push(e)}function a(a,t,e){l(a),l(t),l(e);var o=c.length/3,n=C.generateTopUV(_,c,o-3,o-2,o-1);s(n[0]),s(n[1]),s(n[2])}function ee(a,t,e,o){l(a),l(t),l(o),l(t),l(e),l(o);var r=c.length/3,n=C.generateSideWallUV(_,c,r-6,r-3,r-2,r-1);s(n[0]),s(n[1]),s(n[3]),s(n[1]),s(n[2]),s(n[3])}function l(e){u.push(c.length/3),c.push(y[3*e+0]),c.push(y[3*e+1]),c.push(y[3*e+2])}function s(e){g.push(e.x),g.push(e.y)}var n=h.arrays?h.arrays:this.getArrays(),c=n.position,u=n.index,g=n.uv,y=[],b=void 0===h.amount?100:h.amount,x=void 0===h.bevelThickness?6:h.bevelThickness,v=void 0===h.bevelSize?x-2:h.bevelSize,S=void 0===h.bevelSegments?3:h.bevelSegments,w=void 0===h.bevelEnabled||h.bevelEnabled,E=void 0===h.curveSegments?12:h.curveSegments,T=void 0===h.steps?1:h.steps,M=h.extrudePath,P=!1,C=void 0===h.UVGenerator?bs.WorldUVGenerator:h.UVGenerator,A,p,d,f,m;M&&(A=M.getSpacedPoints(T),P=!0,w=!1,p=void 0===h.frames?M.computeFrenetFrames(T,!1):h.frames,d=new nl,f=new nl,m=new nl),w||(S=0,x=0,v=0);var _=this,L=r.extractPoints(E),I=L.shape,F=L.holes,U,R,D;if(!Ya.isClockWise(I))for(I=I.reverse(),R=0,D=F.length;R<D;R++)U=F[R],Ya.isClockWise(U)&&(F[R]=U.reverse());var k=Ya.triangulateShape(I,F),B=I;for(R=0,D=F.length;R<D;R++)U=F[R],I=I.concat(U);for(var z=I.length,X=k.length,Y=[],Z=0,J=B.length,K=J-1,Q=Z+1,$,G,j,H,te,W;Z<J;Z++,K++,Q++)K===J&&(K=0),Q===J&&(Q=0),Y[Z]=t(B[Z],B[K],B[Q]);var q=[],ae=Y.concat(),oe;for(R=0,D=F.length;R<D;R++){for(U=F[R],oe=[],Z=0,K=(J=U.length)-1,Q=Z+1;Z<J;Z++,K++,Q++)K===J&&(K=0),Q===J&&(Q=0),oe[Z]=t(U[Z],U[K],U[Q]);q.push(oe),ae=ae.concat(oe)}for($=0;$<S;$++){for(j=$/S,H=x*Cc(j*Gn/2),G=v*Pc(j*Gn/2),Z=0,J=B.length;Z<J;Z++)o((te=e(B[Z],Y[Z],G)).x,te.y,-H);for(R=0,D=F.length;R<D;R++)for(U=F[R],oe=q[R],Z=0,J=U.length;Z<J;Z++)o((te=e(U[Z],oe[Z],G)).x,te.y,-H)}for(G=v,Z=0;Z<z;Z++)te=w?e(I[Z],ae[Z],G):I[Z],P?(f.copy(p.normals[0]).multiplyScalar(te.x),d.copy(p.binormals[0]).multiplyScalar(te.y),m.copy(A[0]).add(f).add(d),o(m.x,m.y,m.z)):o(te.x,te.y,0);var re;for(re=1;re<=T;re++)for(Z=0;Z<z;Z++)te=w?e(I[Z],ae[Z],G):I[Z],P?(f.copy(p.normals[re]).multiplyScalar(te.x),d.copy(p.binormals[re]).multiplyScalar(te.y),m.copy(A[re]).add(f).add(d),o(m.x,m.y,m.z)):o(te.x,te.y,b/T*re);for($=S-1;0<=$;$--){for(j=$/S,H=x*Cc(j*Gn/2),G=v*Pc(j*Gn/2),Z=0,J=B.length;Z<J;Z++)o((te=e(B[Z],Y[Z],G)).x,te.y,b+H);for(R=0,D=F.length;R<D;R++)for(U=F[R],oe=q[R],Z=0,J=U.length;Z<J;Z++)te=e(U[Z],oe[Z],G),P?o(te.x,te.y+A[T-1].y,A[T-1].x+H):o(te.x,te.y,b+H)}!function(){var e=c.length/3;if(w){var t=0,o=z*t;for(Z=0;Z<X;Z++)a((W=k[Z])[2]+o,W[1]+o,W[0]+o);for(o=z*(t=T+2*S),Z=0;Z<X;Z++)a((W=k[Z])[0]+o,W[1]+o,W[2]+o)}else{for(Z=0;Z<X;Z++)a((W=k[Z])[2],W[1],W[0]);for(Z=0;Z<X;Z++)a((W=k[Z])[0]+z*T,W[1]+z*T,W[2]+z*T)}_.addGroup(e,c.length/3-e,void 0===h.material?0:h.material)}(),function(){var e=c.length/3,t=0;for(i(B,t),t+=B.length,R=0,D=F.length;R<D;R++)i(U=F[R],t),t+=U.length;_.addGroup(e,c.length/3-e,void 0===h.extrudeMaterial?1:h.extrudeMaterial)}(),h.arrays||(this.setIndex(u),this.addAttribute("position",new Tt(c,3)),this.addAttribute("uv",new Tt(h.arrays.uv,2)))},bs.WorldUVGenerator={generateTopUV:function(r,t,e,n,i){var o=t[3*e],a=t[3*e+1],s=t[3*n],l=t[3*n+1],c=t[3*i],d=t[3*i+1];return[new el(o,a),new el(s,l),new el(c,d)]},generateSideWallUV:function(r,t,e,n,i,o){var a=t[3*e],s=t[3*e+1],l=t[3*e+2],c=t[3*n],h=t[3*n+1],u=t[3*n+2],p=t[3*i],d=t[3*i+1],f=t[3*i+2],m=t[3*o],_=t[3*o+1],g=t[3*o+2];return .01>N(s-h)?[new el(a,1-l),new el(c,1-u),new el(p,1-f),new el(m,1-g)]:[new el(s,1-l),new el(h,1-u),new el(d,1-f),new el(_,1-g)]}},(vs.prototype=Object.create(gt.prototype)).constructor=vs,(Ss.prototype=Object.create(xs.prototype)).constructor=Ss,(ws.prototype=Object.create(gt.prototype)).constructor=ws,Es.prototype=Object.create(bl.prototype),Es.prototype.constructor=Es,(Ts.prototype=Object.create(gt.prototype)).constructor=Ts,(Ms.prototype=Object.create(bl.prototype)).constructor=Ms,(Ps.prototype=Object.create(gt.prototype)).constructor=Ps,(Cs.prototype=Object.create(bl.prototype)).constructor=Cs,(As.prototype=Object.create(gt.prototype)).constructor=As,(Ls.prototype=Object.create(bl.prototype)).constructor=Ls,Is.prototype=Object.create(bl.prototype),Is.prototype.constructor=Is,Rs.prototype=Object.create(gt.prototype),Rs.prototype.constructor=Rs,Ds.prototype=Object.create(bl.prototype),Ds.prototype.constructor=Ds,(Fs.prototype=Object.create(Rs.prototype)).constructor=Fs,(ks.prototype=Object.create(Ds.prototype)).constructor=ks,(Os.prototype=Object.create(gt.prototype)).constructor=Os,(Us.prototype=Object.create(bl.prototype)).constructor=Us;var Za=Object.freeze({WireframeGeometry:Ve,ParametricGeometry:zl,ParametricBufferGeometry:Gl,TetrahedronGeometry:Wl,TetrahedronBufferGeometry:jl,OctahedronGeometry:Xl,OctahedronBufferGeometry:ql,IcosahedronGeometry:Yl,IcosahedronBufferGeometry:Zl,DodecahedronGeometry:Jl,DodecahedronBufferGeometry:Kl,PolyhedronGeometry:Hl,PolyhedronBufferGeometry:Vl,TubeGeometry:Ql,TubeBufferGeometry:$l,TorusKnotGeometry:ms,TorusKnotBufferGeometry:_s,TorusGeometry:gs,TorusBufferGeometry:ys,TextGeometry:vs,TextBufferGeometry:Ss,SphereGeometry:ws,SphereBufferGeometry:Es,RingGeometry:Ts,RingBufferGeometry:Ms,PlaneGeometry:xl,PlaneBufferGeometry:vl,LatheGeometry:Ps,LatheBufferGeometry:Cs,ShapeGeometry:As,ShapeBufferGeometry:Ls,ExtrudeGeometry:bs,ExtrudeBufferGeometry:xs,EdgesGeometry:Is,ConeGeometry:Fs,ConeBufferGeometry:ks,CylinderGeometry:Rs,CylinderBufferGeometry:Ds,CircleGeometry:Os,CircleBufferGeometry:Us,BoxGeometry:Ct,BoxBufferGeometry:Lt});(Ns.prototype=Object.create(K.prototype)).constructor=Ns,Ns.prototype.isShadowMaterial=!0,(Bs.prototype=Object.create(Q.prototype)).constructor=Bs,Bs.prototype.isRawShaderMaterial=!0,zs.prototype=Object.create(K.prototype),zs.prototype.constructor=zs,zs.prototype.isMeshStandardMaterial=!0,zs.prototype.copy=function(e){return K.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},(Gs.prototype=Object.create(zs.prototype)).constructor=Gs,Gs.prototype.isMeshPhysicalMaterial=!0,Gs.prototype.copy=function(e){return zs.prototype.copy.call(this,e),this.defines={PHYSICAL:""},this.reflectivity=e.reflectivity,this.clearCoat=e.clearCoat,this.clearCoatRoughness=e.clearCoatRoughness,this},Hs.prototype=Object.create(K.prototype),Hs.prototype.constructor=Hs,Hs.prototype.isMeshPhongMaterial=!0,Hs.prototype.copy=function(e){return K.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},(Vs.prototype=Object.create(Hs.prototype)).constructor=Vs,Vs.prototype.isMeshToonMaterial=!0,Vs.prototype.copy=function(e){return Hs.prototype.copy.call(this,e),this.gradientMap=e.gradientMap,this},(Ws.prototype=Object.create(K.prototype)).constructor=Ws,Ws.prototype.isMeshNormalMaterial=!0,Ws.prototype.copy=function(e){return K.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},(js.prototype=Object.create(K.prototype)).constructor=js,js.prototype.isMeshLambertMaterial=!0,js.prototype.copy=function(e){return K.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},(Xs.prototype=Object.create(Rl.prototype)).constructor=Xs,Xs.prototype.isLineDashedMaterial=!0,Xs.prototype.copy=function(e){return Rl.prototype.copy.call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var Ja=Object.freeze({ShadowMaterial:Ns,SpriteMaterial:Pl,RawShaderMaterial:Bs,ShaderMaterial:Q,PointsMaterial:Ol,MeshPhysicalMaterial:Gs,MeshStandardMaterial:zs,MeshPhongMaterial:Hs,MeshToonMaterial:Vs,MeshNormalMaterial:Ws,MeshLambertMaterial:js,MeshDepthMaterial:ml,MeshDistanceMaterial:_l,MeshBasicMaterial:Sl,LineDashedMaterial:Xs,LineBasicMaterial:Rl,Material:K}),Ka={enabled:!1,files:{},add:function(a,t){!1!==this.enabled&&(this.files[a]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},Qa=new qs;Object.assign(Bn.prototype,{load:function(y,t,e,b){void 0===y&&(y=""),void 0!==this.path&&(y=this.path+y);var i=this,r=Ka.get(y);if(void 0!==r)return i.manager.itemStart(y),setTimeout(function(){t&&t(r),i.manager.itemEnd(y)},0),r;var o=/^data:(.*?)(;base64)?,(.*)$/,a=y.match(o);if(a){var n=a[1],s=!!a[2],c=a[3];c=window.decodeURIComponent(c),s&&(c=window.atob(c));try{var h=(this.responseType||"").toLowerCase(),p;switch(h){case"arraybuffer":case"blob":p=new ArrayBuffer(c.length);for(var u=new Uint8Array(p),d=0;d<c.length;d++)u[d]=c.charCodeAt(d);"blob"===h&&(p=new Blob([p],{type:n}));break;case"document":var f=new DOMParser;p=f.parseFromString(c,n);break;case"json":p=JSON.parse(c);break;default:p=c;}window.setTimeout(function(){t&&t(p),i.manager.itemEnd(y)},0)}catch(t){window.setTimeout(function(){b&&b(t),i.manager.itemEnd(y),i.manager.itemError(y)},0)}}else{var m=new XMLHttpRequest;for(var _ in m.open("GET",y,!0),m.addEventListener("load",function(e){var a=e.target.response;Ka.add(y,a),200===this.status?(t&&t(a),i.manager.itemEnd(y)):0===this.status?(console.warn("THREE.FileLoader: HTTP Status 0 received."),t&&t(a),i.manager.itemEnd(y)):(b&&b(e),i.manager.itemEnd(y),i.manager.itemError(y))},!1),void 0!==e&&m.addEventListener("progress",function(a){e(a)},!1),m.addEventListener("error",function(t){b&&b(t),i.manager.itemEnd(y),i.manager.itemError(y)},!1),void 0!==this.responseType&&(m.responseType=this.responseType),void 0!==this.withCredentials&&(m.withCredentials=this.withCredentials),m.overrideMimeType&&m.overrideMimeType(void 0===this.mimeType?"text/plain":this.mimeType),this.requestHeader)m.setRequestHeader(_,this.requestHeader[_]);m.send(null)}return i.manager.itemStart(y),m},setPath:function(e){return this.path=e,this},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setMimeType:function(e){return this.mimeType=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}}),Object.assign(function(e){this.manager=void 0===e?Qa:e,this._parser=null}.prototype,{load:function(d,p,e,t){var u=this,r=[],o=new je;o.image=r;var a=new Bn(this.manager);if(a.setPath(this.path),a.setResponseType("arraybuffer"),Array.isArray(d))for(var i=0,n=0,l=d.length;n<l;++n)!function(l){a.load(d[l],function(e){var t=u._parser(e,!0);r[l]={width:t.width,height:t.height,format:t.format,mipmaps:t.mipmaps},6===(i+=1)&&(1===t.mipmapCount&&(o.minFilter=Kc),o.format=t.format,o.needsUpdate=!0,p&&p(o))},e,t)}(n);else a.load(d,function(e){var t=u._parser(e,!0);if(t.isCubemap)for(var a=t.mipmaps.length/t.mipmapCount,n=0;n<a;n++){r[n]={mipmaps:[]};for(var i=0;i<t.mipmapCount;i++)r[n].mipmaps.push(t.mipmaps[n*t.mipmapCount+i]),r[n].format=t.format,r[n].width=t.width,r[n].height=t.height}else o.image.width=t.width,o.image.height=t.height,o.mipmaps=t.mipmaps;1===t.mipmapCount&&(o.minFilter=Kc),o.format=t.format,o.needsUpdate=!0,p&&p(o)},e,t);return o},setPath:function(e){return this.path=e,this}}),Object.assign(function(e){this.manager=void 0===e?Qa:e,this._parser=null}.prototype,{load:function(s,c,e,t){var i=this,r=new l,o=new Bn(this.manager);return o.setResponseType("arraybuffer"),o.load(s,function(e){var t=i._parser(e);t&&(void 0===t.image?void 0!==t.data&&(r.image.width=t.width,r.image.height=t.height,r.image.data=t.data):r.image=t.image,r.wrapS=void 0===t.wrapS?Xc:t.wrapS,r.wrapT=void 0===t.wrapT?Xc:t.wrapT,r.magFilter=void 0===t.magFilter?Kc:t.magFilter,r.minFilter=void 0===t.minFilter?$c:t.minFilter,r.anisotropy=void 0===t.anisotropy?1:t.anisotropy,void 0!==t.format&&(r.format=t.format),void 0!==t.type&&(r.type=t.type),void 0!==t.mipmaps&&(r.mipmaps=t.mipmaps),1===t.mipmapCount&&(r.minFilter=Kc),r.needsUpdate=!0,c&&c(r,t))},e,t),r}}),Object.assign(zn.prototype,{crossOrigin:"Anonymous",load:function(l,t,e,n){void 0===l&&(l=""),void 0!==this.path&&(l=this.path+l);var i=this,r=Ka.get(l);if(void 0!==r)return i.manager.itemStart(l),setTimeout(function(){t&&t(r),i.manager.itemEnd(l)},0),r;var o=document.createElementNS("http://www.w3.org/1999/xhtml","img");return o.addEventListener("load",function(){Ka.add(l,this),t&&t(this),i.manager.itemEnd(l)},!1),o.addEventListener("error",function(t){n&&n(t),i.manager.itemEnd(l),i.manager.itemError(l)},!1),"data:"!==l.substr(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),i.manager.itemStart(l),o.src=l,o},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(function(e){this.manager=void 0===e?Qa:e}.prototype,{crossOrigin:"Anonymous",load:function(l,d,e,t){var i=new c,r=new zn(this.manager);r.setCrossOrigin(this.crossOrigin),r.setPath(this.path);for(var o=0,a=0;a<l.length;++a)!function(e){r.load(l[e],function(a){i.images[e]=a,6==++o&&(i.needsUpdate=!0,d&&d(i))},void 0,t)}(a);return i},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(jn.prototype,{crossOrigin:"Anonymous",load:function(o,t,e,n){var i=new zn(this.manager);i.setCrossOrigin(this.crossOrigin),i.setPath(this.path);var r=new tl;return r.image=i.load(o,function(){var e=0<o.search(/\.(jpg|jpeg)$/)||0===o.search(/^data\:image\/jpeg/);r.format=e?ea:td,r.needsUpdate=!0,void 0!==t&&t(r)},e,n),r},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Vn.prototype=Object.assign(Object.create(ut.prototype),{constructor:Vn,isLight:!0,copy:function(e){return ut.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(a){var t=ut.prototype.toJSON.call(this,a);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}),Ys.prototype=Object.assign(Object.create(Vn.prototype),{constructor:Ys,isHemisphereLight:!0,copy:function(e){return Vn.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}),Object.assign(Zs.prototype,{copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}),Xn.prototype=Object.assign(Object.create(Zs.prototype),{constructor:Xn,isSpotLightShadow:!0,update:function(a){var t=this.camera,e=2*rd.RAD2DEG*a.angle,o=this.mapSize.width/this.mapSize.height,n=a.distance||t.far;e===t.fov&&o===t.aspect&&n===t.far||(t.fov=e,t.aspect=o,t.far=n,t.updateProjectionMatrix())}}),Js.prototype=Object.assign(Object.create(Vn.prototype),{constructor:Js,isSpotLight:!0,copy:function(e){return Vn.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),Ks.prototype=Object.assign(Object.create(Vn.prototype),{constructor:Ks,isPointLight:!0,copy:function(e){return Vn.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}),Qs.prototype=Object.assign(Object.create(Zs.prototype),{constructor:Qs}),$s.prototype=Object.assign(Object.create(Vn.prototype),{constructor:$s,isDirectionalLight:!0,copy:function(e){return Vn.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),ec.prototype=Object.assign(Object.create(Vn.prototype),{constructor:ec,isAmbientLight:!0}),tc.prototype=Object.assign(Object.create(Vn.prototype),{constructor:tc,isRectAreaLight:!0,copy:function(e){return Vn.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this},toJSON:function(a){var t=Vn.prototype.toJSON.call(this,a);return t.object.width=this.width,t.object.height=this.height,t}});var $a={arraySlice:function(a,t,e){return $a.isTypedArray(a)?new a.constructor(a.subarray(t,void 0===e?a.length:e)):a.slice(t,e)},convertArray:function(a,t,e){return a&&(e||a.constructor!==t)?"number"==typeof t.BYTES_PER_ELEMENT?new t(a):Array.prototype.slice.call(a):a},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(a){for(var t=a.length,e=Array(t),o=0;o!==t;++o)e[o]=o;return e.sort(function(t,e){return a[t]-a[e]}),e},sortedArray:function(c,t,e){for(var n=c.length,i=new c.constructor(n),r=0,o=0;o!==n;++r)for(var a=e[r]*t,s=0;s!==t;++s)i[o++]=c[a+s];return i},flattenJSON:function(l,t,e,n){for(var i=1,r=l[0];void 0!==r&&void 0===r[n];)r=l[i++];if(void 0!==r){var o=r[n];if(void 0!==o)if(Array.isArray(o))do void 0!==(o=r[n])&&(t.push(r.time),e.push.apply(e,o)),r=l[i++];while(void 0!==r);else if(void 0!==o.toArray)do void 0!==(o=r[n])&&(t.push(r.time),o.toArray(e,e.length)),r=l[i++];while(void 0!==r);else do void 0!==(o=r[n])&&(t.push(r.time),e.push(o)),r=l[i++];while(void 0!==r)}}};Object.assign(ac.prototype,{evaluate:function(c){var t=this.parameterPositions,e=this._cachedIndex,n=t[e],i=t[e-1];t:{e:{var r;n:{i:if(!(c<n)){for(a=e+2;;){if(void 0===n){if(c<i)break i;return e=t.length,this._cachedIndex=e,this.afterEnd_(e-1,c,i)}if(e===a)break;if(i=n,n=t[++e],c<n)break e}r=t.length;break n}if(c>=i)break t;var o=t[1];c<o&&(e=2,i=o);for(var a=e-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,c,n);if(e===a)break;if(n=i,i=t[--e-1],c>=i)break e}r=e,e=0}for(;e<r;){var s=e+r>>>1;c<t[s]?r=s:e=s+1}if(n=t[e],void 0===(i=t[e-1]))return this._cachedIndex=0,this.beforeStart_(0,c,n);if(void 0===n)return e=t.length,this._cachedIndex=e,this.afterEnd_(e-1,i,c)}this._cachedIndex=e,this.intervalChanged_(e,i,n)}return this.interpolate_(e,i,c,n)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(a){for(var t=this.resultBuffer,e=this.sampleValues,r=this.valueSize,n=0;n!==r;++n)t[n]=e[a*r+n];return t},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(ac.prototype,{beforeStart_:ac.prototype.copySampleValue_,afterEnd_:ac.prototype.copySampleValue_}),ei.prototype=Object.assign(Object.create(ac.prototype),{constructor:ei,DefaultSettings_:{endingStart:ga,endingEnd:ga},intervalChanged_:function(d,t,e){var n=this.parameterPositions,i=d-2,r=d+1,o=n[i],a=n[r];if(void 0===o)switch(this.getSettings_().endingStart){case 2401:i=d,o=2*t-e;break;case 2402:o=t+n[i=n.length-2]-n[i+1];break;default:i=d,o=e;}if(void 0===a)switch(this.getSettings_().endingEnd){case 2401:r=d,a=2*e-t;break;case 2402:r=1,a=e+n[1]-n[0];break;default:r=d-1,a=t;}var s=.5*(e-t),l=this.valueSize;this._weightPrev=s/(t-o),this._weightNext=s/(a-e),this._offsetPrev=i*l,this._offsetNext=r*l},interpolate_:function(l,t,e,n){for(var i=this.resultBuffer,r=this.sampleValues,o=this.valueSize,a=l*o,s=this._offsetPrev,c=this._offsetNext,_=this._weightPrev,h=this._weightNext,p=(e-t)/(n-t),d=p*p,g=d*p,m=0;m!==o;++m)i[m]=(-_*g+2*_*d-_*p)*r[s+m]+((1+_)*g+(-1.5-2*_)*d+(-.5+_)*p+1)*r[a-o+m]+((-1-h)*g+(1.5+h)*d+.5*p)*r[a+m]+(h*g-h*d)*r[c+m];return i}}),oc.prototype=Object.assign(Object.create(ac.prototype),{constructor:oc,interpolate_:function(l,t,e,n){for(var i=this.resultBuffer,r=this.sampleValues,o=this.valueSize,a=l*o,s=(e-t)/(n-t),c=0;c!==o;++c)i[c]=r[a-o+c]*(1-s)+r[a+c]*s;return i}}),rc.prototype=Object.assign(Object.create(ac.prototype),{constructor:rc,interpolate_:function(e){return this.copySampleValue_(e-1)}});var ts;ts={TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(e){return new rc(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new oc(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new ei(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(a){var t;if(2300===a?t=this.InterpolantFactoryMethodDiscrete:2301===a?t=this.InterpolantFactoryMethodLinear:2302===a?t=this.InterpolantFactoryMethodSmooth:void 0,void 0!==t)this.createInterpolant=t;else{var e="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(a===this.DefaultInterpolation)throw new Error(e);this.setInterpolation(this.DefaultInterpolation)}console.warn("THREE.KeyframeTrackPrototype:",e)}},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302;}},getValueSize:function(){return this.values.length/this.times.length},shift:function(a){if(0!==a)for(var t=this.times,e=0,o=t.length;e!==o;++e)t[e]+=a;return this},scale:function(a){if(1!==a)for(var t=this.times,e=0,o=t.length;e!==o;++e)t[e]*=a;return this},trim:function(l,t){for(var e=this.times,n=e.length,i=0,r=n-1;i!==n&&e[i]<l;)++i;for(;-1!==r&&e[r]>t;)--r;if(++r,0!==i||r!==n){i>=r&&(r=C(r,1),i=r-1);var o=this.getValueSize();this.times=$a.arraySlice(e,i,r),this.values=$a.arraySlice(this.values,i*o,r*o)}return this},validate:function(){var d=!0,t=this.getValueSize();0!=t-B(t)&&(console.error("THREE.KeyframeTrackPrototype: Invalid value size in track.",this),d=!1);var e=this.times,n=this.values,i=e.length;0===i&&(console.error("THREE.KeyframeTrackPrototype: Track is empty.",this),d=!1);for(var r=null,o=0,a;o!==i;o++){if(a=e[o],"number"==typeof a&&isNaN(a)){console.error("THREE.KeyframeTrackPrototype: Time is not a valid number.",this,o,a),d=!1;break}if(null!==r&&r>a){console.error("THREE.KeyframeTrackPrototype: Out of order keys.",this,o,a,r),d=!1;break}r=a}if(void 0!==n&&$a.isTypedArray(n))for(var o=0,p=n.length,l;o!==p;++o)if(l=n[o],isNaN(l)){console.error("THREE.KeyframeTrackPrototype: Value is not a valid number.",this,o,l),d=!1;break}return d},optimize:function(){for(var u=this.times,t=this.values,e=this.getValueSize(),n=2302===this.getInterpolation(),i=1,r=u.length-1,o=1;o<r;++o){var a=!1,s=u[o];if(s!==u[o+1]&&(1!==o||s!==s[0]))if(n)a=!0;else for(var l=o*e,c=0,p;c!==e;++c)if(p=t[l+c],p!==t[l-e+c]||p!==t[l+e+c]){a=!0;break}if(a){if(o!==i){u[i]=u[o];for(var d=o*e,_=i*e,c=0;c!==e;++c)t[_+c]=t[d+c]}++i}}if(0<r){u[i]=u[r];for(var d=r*e,_=i*e,c=0;c!==e;++c)t[_+c]=t[d+c];++i}return i!==u.length&&(this.times=$a.arraySlice(u,0,i),this.values=$a.arraySlice(t,0,i*e)),this}},oi.prototype=Object.assign(Object.create(ts),{constructor:oi,ValueTypeName:"vector"}),ic.prototype=Object.assign(Object.create(ac.prototype),{constructor:ic,interpolate_:function(l,t,e,n){for(var i=this.resultBuffer,r=this.sampleValues,o=this.valueSize,a=l*o,s=a+o;a!==s;a+=4)rl.slerpFlat(i,0,r,a-o,r,a,(e-t)/(n-t));return i}}),lc.prototype=Object.assign(Object.create(ts),{constructor:lc,ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(e){return new ic(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0}),sc.prototype=Object.assign(Object.create(ts),{constructor:sc,ValueTypeName:"number"}),cc.prototype=Object.assign(Object.create(ts),{constructor:cc,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),dc.prototype=Object.assign(Object.create(ts),{constructor:dc,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),pc.prototype=Object.assign(Object.create(ts),{constructor:pc,ValueTypeName:"color"}),uc.prototype=ts,ts.constructor=uc,Object.assign(uc,{parse:function(a){if(void 0===a.type)throw new Error("track type undefined, can not parse");var t=uc._getTrackTypeForValueTypeName(a.type);if(void 0===a.times){var e=[],o=[];$a.flattenJSON(a.keys,e,o,"value"),a.times=e,a.values=o}return void 0===t.parse?new t(a.name,a.times,a.values,a.interpolation):t.parse(a)},toJSON:function(a){var t=a.constructor,o;if(void 0!==t.toJSON)o=t.toJSON(a);else{o={name:a.name,times:$a.convertArray(a.times,Array),values:$a.convertArray(a.values,Array)};var e=a.getInterpolation();e!==a.DefaultInterpolation&&(o.interpolation=e)}return o.type=a.ValueTypeName,o},_getTrackTypeForValueTypeName:function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return sc;case"vector":case"vector2":case"vector3":case"vector4":return oi;case"color":return pc;case"quaternion":return lc;case"bool":case"boolean":return dc;case"string":return cc;}throw new Error("Unsupported typeName: "+e)}}),Object.assign(di,{parse:function(a){for(var t=[],e=a.tracks,n=1/(a.fps||1),i=0,r=e.length;i!==r;++i)t.push(uc.parse(e[i]).scale(n));return new di(a.name,a.duration,t)},toJSON:function(a){for(var t=[],l=a.tracks,n={name:a.name,duration:a.duration,tracks:t},i=0,r=l.length;i!==r;++i)t.push(uc.toJSON(l[i]));return n},CreateFromMorphTargetSequence:function(d,t,e,n){for(var i=t.length,r=[],o=0;o<i;o++){var a=[],s=[];a.push((o+i-1)%i,o,(o+1)%i),s.push(0,1,0);var l=$a.getKeyframeOrder(a);a=$a.sortedArray(a,1,l),s=$a.sortedArray(s,1,l),n||0!==a[0]||(a.push(i),s.push(s[0])),r.push(new sc(".morphTargetInfluences["+t[o].name+"]",a,s).scale(1/e))}return new di(d,-1,r)},findByName:function(a,t){var e=a;if(!Array.isArray(a)){var o=a;e=o.geometry&&o.geometry.animations||o.animations}for(var n=0;n<e.length;n++)if(e[n].name===t)return e[n];return null},CreateClipsFromMorphTargetSequences:function(d,t,e){for(var n={},i=/^([\w-]*?)([\d]+)$/,r=0,o=d.length;r<o;r++){var a=d[r],s=a.name.match(i);if(s&&1<s.length){var l=n[p=s[1]];l||(n[p]=l=[]),l.push(a)}}var c=[];for(var p in n)c.push(di.CreateFromMorphTargetSequence(p,n[p],t,e));return c},parseAnimation:function(y,b){if(!y)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var e=function(n,t,e,l,i){if(0!==e.length){var r=[],o=[];$a.flattenJSON(e,r,o,l),0!==r.length&&i.push(new n(t,r,o))}},n=[],i=y.name||"default",r=y.length||-1,o=y.fps||30,a=y.hierarchy||[],s=0,l;s<a.length;s++)if(l=a[s].keys,l&&0!==l.length)if(l[0].morphTargets){for(var c={},h=0;h<l.length;h++)if(l[h].morphTargets)for(f=0;f<l[h].morphTargets.length;f++)c[l[h].morphTargets[f]]=-1;for(var u in c){for(var p=[],d=[],f=0,m;f!==l[h].morphTargets.length;++f)m=l[h],p.push(m.time),d.push(m.morphTarget===u?1:0);n.push(new sc(".morphTargetInfluence["+u+"]",p,d))}r=c.length*(o||1)}else{var _=".bones["+b[s].name+"]";e(oi,_+".position",l,"pos",n),e(lc,_+".quaternion",l,"rot",n),e(oi,_+".scale",l,"scl",n)}return 0===n.length?null:new di(i,r,n)}}),Object.assign(di.prototype,{resetDuration:function(){for(var a=0,t=0,e=this.tracks.length,o;t!==e;++t)o=this.tracks[t],a=C(a,o.times[o.times.length-1]);this.duration=a},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}}),Object.assign(fi.prototype,{load:function(a,o,e,t){var n=this;new Bn(n.manager).load(a,function(e){o(n.parse(JSON.parse(e)))},e,t)},setTextures:function(e){this.textures=e},parse:function(a){function t(a){return void 0===e[a]&&console.warn("THREE.MaterialLoader: Undefined texture",a),e[a]}var e=this.textures,r=new Ja[a.type];if(void 0!==a.uuid&&(r.uuid=a.uuid),void 0!==a.name&&(r.name=a.name),void 0!==a.color&&r.color.setHex(a.color),void 0!==a.roughness&&(r.roughness=a.roughness),void 0!==a.metalness&&(r.metalness=a.metalness),void 0!==a.emissive&&r.emissive.setHex(a.emissive),void 0!==a.specular&&r.specular.setHex(a.specular),void 0!==a.shininess&&(r.shininess=a.shininess),void 0!==a.clearCoat&&(r.clearCoat=a.clearCoat),void 0!==a.clearCoatRoughness&&(r.clearCoatRoughness=a.clearCoatRoughness),void 0!==a.uniforms&&(r.uniforms=a.uniforms),void 0!==a.vertexShader&&(r.vertexShader=a.vertexShader),void 0!==a.fragmentShader&&(r.fragmentShader=a.fragmentShader),void 0!==a.vertexColors&&(r.vertexColors=a.vertexColors),void 0!==a.fog&&(r.fog=a.fog),void 0!==a.flatShading&&(r.flatShading=a.flatShading),void 0!==a.blending&&(r.blending=a.blending),void 0!==a.side&&(r.side=a.side),void 0!==a.opacity&&(r.opacity=a.opacity),void 0!==a.transparent&&(r.transparent=a.transparent),void 0!==a.alphaTest&&(r.alphaTest=a.alphaTest),void 0!==a.depthTest&&(r.depthTest=a.depthTest),void 0!==a.depthWrite&&(r.depthWrite=a.depthWrite),void 0!==a.colorWrite&&(r.colorWrite=a.colorWrite),void 0!==a.wireframe&&(r.wireframe=a.wireframe),void 0!==a.wireframeLinewidth&&(r.wireframeLinewidth=a.wireframeLinewidth),void 0!==a.wireframeLinecap&&(r.wireframeLinecap=a.wireframeLinecap),void 0!==a.wireframeLinejoin&&(r.wireframeLinejoin=a.wireframeLinejoin),void 0!==a.skinning&&(r.skinning=a.skinning),void 0!==a.morphTargets&&(r.morphTargets=a.morphTargets),void 0!==a.dithering&&(r.dithering=a.dithering),void 0!==a.visible&&(r.visible=a.visible),void 0!==a.userData&&(r.userData=a.userData),void 0!==a.shading&&(r.flatShading=1===a.shading),void 0!==a.size&&(r.size=a.size),void 0!==a.sizeAttenuation&&(r.sizeAttenuation=a.sizeAttenuation),void 0!==a.map&&(r.map=t(a.map)),void 0!==a.alphaMap&&(r.alphaMap=t(a.alphaMap),r.transparent=!0),void 0!==a.bumpMap&&(r.bumpMap=t(a.bumpMap)),void 0!==a.bumpScale&&(r.bumpScale=a.bumpScale),void 0!==a.normalMap&&(r.normalMap=t(a.normalMap)),void 0!==a.normalScale){var n=a.normalScale;!1===Array.isArray(n)&&(n=[n,n]),r.normalScale=new el().fromArray(n)}return void 0!==a.displacementMap&&(r.displacementMap=t(a.displacementMap)),void 0!==a.displacementScale&&(r.displacementScale=a.displacementScale),void 0!==a.displacementBias&&(r.displacementBias=a.displacementBias),void 0!==a.roughnessMap&&(r.roughnessMap=t(a.roughnessMap)),void 0!==a.metalnessMap&&(r.metalnessMap=t(a.metalnessMap)),void 0!==a.emissiveMap&&(r.emissiveMap=t(a.emissiveMap)),void 0!==a.emissiveIntensity&&(r.emissiveIntensity=a.emissiveIntensity),void 0!==a.specularMap&&(r.specularMap=t(a.specularMap)),void 0!==a.envMap&&(r.envMap=t(a.envMap)),void 0!==a.reflectivity&&(r.reflectivity=a.reflectivity),void 0!==a.lightMap&&(r.lightMap=t(a.lightMap)),void 0!==a.lightMapIntensity&&(r.lightMapIntensity=a.lightMapIntensity),void 0!==a.aoMap&&(r.aoMap=t(a.aoMap)),void 0!==a.aoMapIntensity&&(r.aoMapIntensity=a.aoMapIntensity),void 0!==a.gradientMap&&(r.gradientMap=t(a.gradientMap)),r}}),Object.assign(mi.prototype,{load:function(a,o,e,t){var n=this;new Bn(n.manager).load(a,function(e){o(n.parse(JSON.parse(e)))},e,t)},parse:function(m){var t=new bl,e=m.data.index;void 0!==e&&(o=new es[e.type](e.array),t.setIndex(new yt(o,1)));var n=m.data.attributes;for(var i in n){var r=n[i],o=new es[r.type](r.array);t.addAttribute(i,new yt(o,r.itemSize,r.normalized))}var a=m.data.groups||m.data.drawcalls||m.data.offsets;if(void 0!==a)for(var s=0,l=a.length,c;s!==l;++s)c=a[s],t.addGroup(c.start,c.count,c.materialIndex);var u=m.data.boundingSphere;if(void 0!==u){var p=new nl;void 0!==u.center&&p.fromArray(u.center),t.boundingSphere=new it(p,u.radius)}return t}});var es={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"==typeof Uint8ClampedArray?Uint8Array:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};_i.Handlers={handlers:[],add:function(a,t){this.handlers.push(a,t)},get:function(a){for(var t=this.handlers,e=0,n=t.length;e<n;e+=2){var i=t[e],r=t[e+1];if(i.test(a))return r}return null}},Object.assign(_i.prototype,{crossOrigin:void 0,extractUrlBase:function(a){var t=a.split("/");return 1===t.length?"./":(t.pop(),t.join("/")+"/")},initMaterials:function(a,t,e){for(var o=[],n=0;n<a.length;++n)o[n]=this.createMaterial(a[n],t,e);return o},createMaterial:function(){var a={NoBlending:Rc,NormalBlending:Dc,AdditiveBlending:Fc,SubtractiveBlending:kc,MultiplyBlending:Oc,CustomBlending:Uc},t=new X,d=new jn,e=new fi;return function(n,m,o){function r(a,t,e,n,r){var i=m+a,l=_i.Handlers.get(i),u;null===l?(d.setCrossOrigin(o),u=d.load(i)):u=l.load(i),void 0!==t&&(u.repeat.fromArray(t),1!==t[0]&&(u.wrapS=jc),1!==t[1]&&(u.wrapT=jc)),void 0!==e&&u.offset.fromArray(e),void 0!==n&&("repeat"===n[0]&&(u.wrapS=jc),"mirror"===n[0]&&(u.wrapS=qc),"repeat"===n[1]&&(u.wrapT=jc),"mirror"===n[1]&&(u.wrapT=qc)),void 0!==r&&(u.anisotropy=r);var c=rd.generateUUID();return _[c]=u,c}var _={},i={uuid:rd.generateUUID(),type:"MeshLambertMaterial"};for(var l in n){var s=n[l];switch(l){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":i.name=s;break;case"blending":i.blending=a[s];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",l,"is no longer supported.");break;case"colorDiffuse":i.color=t.fromArray(s).getHex();break;case"colorSpecular":i.specular=t.fromArray(s).getHex();break;case"colorEmissive":i.emissive=t.fromArray(s).getHex();break;case"specularCoef":i.shininess=s;break;case"shading":"basic"===s.toLowerCase()&&(i.type="MeshBasicMaterial"),"phong"===s.toLowerCase()&&(i.type="MeshPhongMaterial"),"standard"===s.toLowerCase()&&(i.type="MeshStandardMaterial");break;case"mapDiffuse":i.map=r(s,n.mapDiffuseRepeat,n.mapDiffuseOffset,n.mapDiffuseWrap,n.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":i.emissiveMap=r(s,n.mapEmissiveRepeat,n.mapEmissiveOffset,n.mapEmissiveWrap,n.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":i.lightMap=r(s,n.mapLightRepeat,n.mapLightOffset,n.mapLightWrap,n.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":i.aoMap=r(s,n.mapAORepeat,n.mapAOOffset,n.mapAOWrap,n.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":i.bumpMap=r(s,n.mapBumpRepeat,n.mapBumpOffset,n.mapBumpWrap,n.mapBumpAnisotropy);break;case"mapBumpScale":i.bumpScale=s;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":i.normalMap=r(s,n.mapNormalRepeat,n.mapNormalOffset,n.mapNormalWrap,n.mapNormalAnisotropy);break;case"mapNormalFactor":i.normalScale=[s,s];break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":i.specularMap=r(s,n.mapSpecularRepeat,n.mapSpecularOffset,n.mapSpecularWrap,n.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":i.metalnessMap=r(s,n.mapMetalnessRepeat,n.mapMetalnessOffset,n.mapMetalnessWrap,n.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":i.roughnessMap=r(s,n.mapRoughnessRepeat,n.mapRoughnessOffset,n.mapRoughnessWrap,n.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":i.alphaMap=r(s,n.mapAlphaRepeat,n.mapAlphaOffset,n.mapAlphaWrap,n.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":i.side=Fr;break;case"doubleSided":i.side=Lc;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),i.opacity=s;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":i[l]=s;break;case"vertexColors":!0===s&&(i.vertexColors=Ic),"face"===s&&(i.vertexColors=Br);break;default:console.error("THREE.Loader.createMaterial: Unsupported",l,s);}}return"MeshBasicMaterial"===i.type&&delete i.emissive,"MeshPhongMaterial"!==i.type&&delete i.specular,1>i.opacity&&(i.transparent=!0),e.setTextures(_),e.parse(i)}}()}),Object.assign(gi.prototype,{load:function(l,t,e,n){var c=this,r=this.texturePath&&"string"==typeof this.texturePath?this.texturePath:_i.prototype.extractUrlBase(l),o=new Bn(this.manager);o.setWithCredentials(this.withCredentials),o.load(l,function(e){var o=JSON.parse(e),n=o.metadata;if(void 0!==n){var a=n.type;if(void 0!==a){if("object"===a.toLowerCase())return void console.error("THREE.JSONLoader: "+l+" should be loaded with THREE.ObjectLoader instead.");if("scene"===a.toLowerCase())return void console.error("THREE.JSONLoader: "+l+" should be loaded with THREE.SceneLoader instead.")}}var i=c.parse(o,r);t(i.geometry,i.materials)},e,n)},setTexturePath:function(e){this.texturePath=e},parse:function(){function l(r,h){function e(a,t){return a&1<<t}var n=r.faces,C=r.vertices,L=r.normals,R=r.colors,D=r.scale,F=0,k,i,o,a,s,l,c,u,p,d,f,m,_,g,y,v,b,w,x,S,E,M,T,A,P;if(void 0!==r.uvs){for(k=0;k<r.uvs.length;k++)r.uvs[k].length&&F++;for(k=0;k<F;k++)h.faceVertexUvs[k]=[]}for(a=0,s=C.length;a<s;)(w=new nl).x=C[a++]*D,w.y=C[a++]*D,w.z=C[a++]*D,h.vertices.push(w);for(a=0,s=n.length;a<s;)if(d=n[a++],f=e(d,0),m=e(d,1),_=e(d,3),g=e(d,4),y=e(d,5),v=e(d,6),b=e(d,7),f){if(S=new yl,S.a=n[a],S.b=n[a+1],S.c=n[a+3],E=new yl,E.a=n[a+1],E.b=n[a+2],E.c=n[a+3],a+=4,m&&(p=n[a++],S.materialIndex=p,E.materialIndex=p),o=h.faces.length,_)for(k=0;k<F;k++)for(A=r.uvs[k],h.faceVertexUvs[k][o]=[],h.faceVertexUvs[k][o+1]=[],i=0;4>i;i++)P=new el(A[2*(u=n[a++])],A[2*u+1]),2!==i&&h.faceVertexUvs[k][o].push(P),0!==i&&h.faceVertexUvs[k][o+1].push(P);if(g&&(c=3*n[a++],S.normal.set(L[c++],L[c++],L[c]),E.normal.copy(S.normal)),y)for(k=0;4>k;k++)c=3*n[a++],T=new nl(L[c++],L[c++],L[c]),2!==k&&S.vertexNormals.push(T),0!==k&&E.vertexNormals.push(T);if(v&&(M=R[l=n[a++]],S.color.setHex(M),E.color.setHex(M)),b)for(k=0;4>k;k++)M=R[l=n[a++]],2!==k&&S.vertexColors.push(new X(M)),0!==k&&E.vertexColors.push(new X(M));h.faces.push(S),h.faces.push(E)}else{if(x=new yl,x.a=n[a++],x.b=n[a++],x.c=n[a++],m&&(p=n[a++],x.materialIndex=p),o=h.faces.length,_)for(k=0;k<F;k++)for(A=r.uvs[k],h.faceVertexUvs[k][o]=[],i=0;3>i;i++)P=new el(A[2*(u=n[a++])],A[2*u+1]),h.faceVertexUvs[k][o].push(P);if(g&&(c=3*n[a++],x.normal.set(L[c++],L[c++],L[c])),y)for(k=0;3>k;k++)c=3*n[a++],T=new nl(L[c++],L[c++],L[c]),x.vertexNormals.push(T);if(v&&(l=n[a++],x.color.setHex(R[l])),b)for(k=0;3>k;k++)l=n[a++],x.vertexColors.push(new X(R[l]));h.faces.push(x)}}function t(a,t){var m=void 0===a.influencesPerVertex?2:a.influencesPerVertex;if(a.skinWeights)for(var n=0,i=a.skinWeights.length;n<i;n+=m){var r=a.skinWeights[n],o=1<m?a.skinWeights[n+1]:0,s=2<m?a.skinWeights[n+2]:0,l=3<m?a.skinWeights[n+3]:0;t.skinWeights.push(new al(r,o,s,l))}if(a.skinIndices)for(var n=0,i=a.skinIndices.length;n<i;n+=m){var c=a.skinIndices[n],_=1<m?a.skinIndices[n+1]:0,u=2<m?a.skinIndices[n+2]:0,p=3<m?a.skinIndices[n+3]:0;t.skinIndices.push(new al(c,_,u,p))}t.bones=a.bones,t.bones&&0<t.bones.length&&(t.skinWeights.length!==t.skinIndices.length||t.skinIndices.length!==t.vertices.length)&&console.warn("When skinning, number of vertices ("+t.vertices.length+"), skinIndices ("+t.skinIndices.length+"), and skinWeights ("+t.skinWeights.length+") should match.")}function e(d,t){var e=d.scale;if(void 0!==d.morphTargets)for(var m=0,i=d.morphTargets.length;m<i;m++){t.morphTargets[m]={},t.morphTargets[m].name=d.morphTargets[m].name,t.morphTargets[m].vertices=[];for(var r=t.morphTargets[m].vertices,o=d.morphTargets[m].vertices,a=0,s=o.length,l;a<s;a+=3)l=new nl,l.x=o[a]*e,l.y=o[a+1]*e,l.z=o[a+2]*e,r.push(l)}if(void 0!==d.morphColors&&0<d.morphColors.length){console.warn("THREE.JSONLoader: \"morphColors\" no longer supported. Using them as face colors.");for(var c=t.faces,u=d.morphColors[0].colors,m=0,i=c.length;m<i;m++)c[m].color.fromArray(u,3*m)}}function n(l,t){var e=[],n=[];void 0!==l.animation&&n.push(l.animation),void 0!==l.animations&&(l.animations.length?n=n.concat(l.animations):n.push(l.animations));for(var s=0,r;s<n.length;s++)r=di.parseAnimation(n[s],t.bones),r&&e.push(r);if(t.morphTargets){var o=di.CreateClipsFromMorphTargetSequences(t.morphTargets,10);e=e.concat(o)}0<e.length&&(t.animations=e)}return function(i,r){void 0!==i.data&&(i=i.data),i.scale=void 0===i.scale?1:1/i.scale;var o=new gt;return l(i,o),t(i,o),e(i,o),n(i,o),o.computeFaceNormals(),o.computeBoundingSphere(),void 0===i.materials||0===i.materials.length?{geometry:o}:{geometry:o,materials:_i.prototype.initMaterials(i.materials,r,this.crossOrigin)}}}()}),Object.assign(function(e){this.manager=void 0===e?Qa:e,this.texturePath=""}.prototype,{load:function(l,t,e,a){""===this.texturePath&&(this.texturePath=l.substring(0,l.lastIndexOf("/")+1));var i=this;new Bn(i.manager).load(l,function(e){var r=null;try{r=JSON.parse(e)}catch(t){return void 0!==a&&a(t),void console.error("THREE:ObjectLoader: Can't parse "+l+".",t.message)}var o=r.metadata;void 0!==o&&void 0!==o.type&&"geometry"!==o.type.toLowerCase()?i.parse(r,t):console.error("THREE.ObjectLoader: Can't load "+l+". Use THREE.JSONLoader instead.")},e,a)},setTexturePath:function(e){this.texturePath=e},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(l,t){var e=this.parseGeometries(l.geometries),n=this.parseImages(l.images,function(){void 0!==t&&t(o)}),i=this.parseTextures(l.textures,n),r=this.parseMaterials(l.materials,i),o=this.parseObject(l.object,e,r);return l.animations&&(o.animations=this.parseAnimations(l.animations)),void 0!==l.images&&0!==l.images.length||void 0!==t&&t(o),o},parseGeometries:function(l){var t={};if(void 0!==l)for(var e=new gi,n=new mi,i=0,r=l.length;i<r;i++){var o=l[i],s;switch(o.type){case"PlaneGeometry":case"PlaneBufferGeometry":s=new Za[o.type](o.width,o.height,o.widthSegments,o.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":s=new Za[o.type](o.width,o.height,o.depth,o.widthSegments,o.heightSegments,o.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":s=new Za[o.type](o.radius,o.segments,o.thetaStart,o.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":s=new Za[o.type](o.radiusTop,o.radiusBottom,o.height,o.radialSegments,o.heightSegments,o.openEnded,o.thetaStart,o.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":s=new Za[o.type](o.radius,o.height,o.radialSegments,o.heightSegments,o.openEnded,o.thetaStart,o.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":s=new Za[o.type](o.radius,o.widthSegments,o.heightSegments,o.phiStart,o.phiLength,o.thetaStart,o.thetaLength);break;case"DodecahedronGeometry":case"IcosahedronGeometry":case"OctahedronGeometry":case"TetrahedronGeometry":s=new Za[o.type](o.radius,o.detail);break;case"RingGeometry":case"RingBufferGeometry":s=new Za[o.type](o.innerRadius,o.outerRadius,o.thetaSegments,o.phiSegments,o.thetaStart,o.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":s=new Za[o.type](o.radius,o.tube,o.radialSegments,o.tubularSegments,o.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":s=new Za[o.type](o.radius,o.tube,o.tubularSegments,o.radialSegments,o.p,o.q);break;case"LatheGeometry":case"LatheBufferGeometry":s=new Za[o.type](o.points,o.segments,o.phiStart,o.phiLength);break;case"BufferGeometry":s=n.parse(o);break;case"Geometry":s=e.parse(o,this.texturePath).geometry;break;default:console.warn("THREE.ObjectLoader: Unsupported geometry type \""+o.type+"\"");continue;}s.uuid=o.uuid,void 0!==o.name&&(s.name=o.name),t[o.uuid]=s}return t},parseMaterials:function(c,t){var e={};if(void 0!==c){var n=new fi;n.setTextures(t);for(var i=0,r=c.length,o;i<r;i++)if(o=c[i],"MultiMaterial"===o.type){for(var a=[],s=0;s<o.materials.length;s++)a.push(n.parse(o.materials[s]));e[o.uuid]=a}else e[o.uuid]=n.parse(o)}return e},parseAnimations:function(a){for(var t=[],e=0,o;e<a.length;e++)o=di.parse(a[e]),t.push(o);return t},parseImages:function(c,t){var e=this,n={};if(void 0!==c&&0<c.length){var i=new zn(new qs(t));i.setCrossOrigin(this.crossOrigin);for(var r=0,o=c.length;r<o;r++){var a=c[r],s=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a.url)?a.url:e.texturePath+a.url;n[a.uuid]=function(a){return e.manager.itemStart(a),i.load(a,function(){e.manager.itemEnd(a)},void 0,function(){e.manager.itemEnd(a),e.manager.itemError(a)})}(s)}}return n},parseTextures:function(o,t){function e(a,o){return"number"==typeof a?a:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",a),o[a])}var n={};if(void 0!==o)for(var i=0,r=o.length,a;i<r;i++){a=o[i],void 0===a.image&&console.warn("THREE.ObjectLoader: No \"image\" specified for",a.uuid),void 0===t[a.image]&&console.warn("THREE.ObjectLoader: Undefined image",a.image);var s=new tl(t[a.image]);s.needsUpdate=!0,s.uuid=a.uuid,void 0!==a.name&&(s.name=a.name),void 0!==a.mapping&&(s.mapping=e(a.mapping,ns)),void 0!==a.offset&&s.offset.fromArray(a.offset),void 0!==a.repeat&&s.repeat.fromArray(a.repeat),void 0!==a.wrap&&(s.wrapS=e(a.wrap[0],is),s.wrapT=e(a.wrap[1],is)),void 0!==a.minFilter&&(s.minFilter=e(a.minFilter,rs)),void 0!==a.magFilter&&(s.magFilter=e(a.magFilter,rs)),void 0!==a.anisotropy&&(s.anisotropy=a.anisotropy),void 0!==a.flipY&&(s.flipY=a.flipY),n[a.uuid]=s}return n},parseObject:function(){var m=new il;return function(t,e,_){function n(a){return void 0===e[a]&&console.warn("THREE.ObjectLoader: Undefined geometry",a),e[a]}function r(a){if(void 0!==a){if(Array.isArray(a)){for(var t=[],e=0,n=a.length,r;e<n;e++)r=a[e],void 0===_[r]&&console.warn("THREE.ObjectLoader: Undefined material",r),t.push(_[r]);return t}return void 0===_[a]&&console.warn("THREE.ObjectLoader: Undefined material",a),_[a]}}var o;switch(t.type){case"Scene":o=new Te,void 0!==t.background&&Tc(t.background)&&(o.background=new X(t.background)),void 0!==t.fog&&("Fog"===t.fog.type?o.fog=new Me(t.fog.color,t.fog.near,t.fog.far):"FogExp2"===t.fog.type&&(o.fog=new Ee(t.fog.color,t.fog.density)));break;case"PerspectiveCamera":o=new fl(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(o.focus=t.focus),void 0!==t.zoom&&(o.zoom=t.zoom),void 0!==t.filmGauge&&(o.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(o.filmOffset=t.filmOffset),void 0!==t.view&&(o.view=Object.assign({},t.view));break;case"OrthographicCamera":o=new ht(t.left,t.right,t.top,t.bottom,t.near,t.far);break;case"AmbientLight":o=new ec(t.color,t.intensity);break;case"DirectionalLight":o=new $s(t.color,t.intensity);break;case"PointLight":o=new Ks(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":o=new tc(t.color,t.intensity,t.width,t.height);break;case"SpotLight":o=new Js(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":o=new Ys(t.color,t.groundColor,t.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var a=n(t.geometry),i=r(t.material);o=a.bones&&0<a.bones.length?new Il(a,i):new Bt(a,i);break;case"LOD":o=new Al;break;case"Line":o=new Dl(n(t.geometry),r(t.material),t.mode);break;case"LineLoop":o=new kl(n(t.geometry),r(t.material));break;case"LineSegments":o=new Fl(n(t.geometry),r(t.material));break;case"PointCloud":case"Points":o=new Ul(n(t.geometry),r(t.material));break;case"Sprite":o=new Cl(r(t.material));break;case"Group":o=new Nl;break;default:o=new ut;}if(o.uuid=t.uuid,void 0!==t.name&&(o.name=t.name),void 0===t.matrix?(void 0!==t.position&&o.position.fromArray(t.position),void 0!==t.rotation&&o.rotation.fromArray(t.rotation),void 0!==t.quaternion&&o.quaternion.fromArray(t.quaternion),void 0!==t.scale&&o.scale.fromArray(t.scale)):(m.fromArray(t.matrix),m.decompose(o.position,o.quaternion,o.scale)),void 0!==t.castShadow&&(o.castShadow=t.castShadow),void 0!==t.receiveShadow&&(o.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.bias&&(o.shadow.bias=t.shadow.bias),void 0!==t.shadow.radius&&(o.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&o.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(o.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(o.visible=t.visible),void 0!==t.userData&&(o.userData=t.userData),void 0!==t.children)for(var l=t.children,s=0;s<l.length;s++)o.add(this.parseObject(l[s],e,_));if("LOD"===t.type)for(var c=t.levels,u=0;u<c.length;u++){var p=c[u],d=o.getObjectByProperty("uuid",p.object);void 0!==d&&o.addLevel(d,p.distance)}return o}}()});var ns={UVMapping:300,CubeReflectionMapping:To,CubeRefractionMapping:Bc,EquirectangularReflectionMapping:zc,EquirectangularRefractionMapping:Gc,SphericalReflectionMapping:Hc,CubeUVReflectionMapping:Vc,CubeUVRefractionMapping:Wc},is={RepeatWrapping:jc,ClampToEdgeWrapping:Xc,MirroredRepeatWrapping:qc},rs={NearestFilter:Yc,NearestMipMapNearestFilter:Zc,NearestMipMapLinearFilter:Jc,LinearFilter:Kc,LinearMipMapNearestFilter:Qc,LinearMipMapLinearFilter:$c};Object.assign(Pi.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(a){var t=this.getUtoTmapping(a);return this.getPoint(t)},getPoints:function(a){void 0===a&&(a=5);for(var t=[],e=0;e<=a;e++)t.push(this.getPoint(e/a));return t},getSpacedPoints:function(a){void 0===a&&(a=5);for(var t=[],e=0;e<=a;e++)t.push(this.getPointAt(e/a));return t},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(a){if(void 0===a&&(a=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===a+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t=[],i=this.getPoint(0),r=0,o,e;for(t.push(0),e=1;e<=a;e++)r+=(o=this.getPoint(e/a)).distanceTo(i),t.push(r),i=o;return this.cacheArcLengths=t,t},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(d,t){var e=this.getLengths(),i=0,r=e.length,o;o=t||d*e[r-1];for(var n=0,s=r-1,l;n<=s;)if(i=B(n+(s-n)/2),0>(l=e[i]-o))n=i+1;else{if(!(0<l)){s=i;break}s=i-1}if(i=s,e[i]===o)return i/(r-1);var a=e[i];return(i+(o-a)/(e[i+1]-a))/(r-1)},getTangent:function(a){var t=a-1e-4,e=a+1e-4;0>t&&(t=0),1<e&&(e=1);var o=this.getPoint(t);return this.getPoint(e).clone().sub(o).normalize()},getTangentAt:function(a){var t=this.getUtoTmapping(a);return this.getTangent(t)},computeFrenetFrames:function(u,t){var e=new nl,o=[],h=[],g=[],y=new nl,c=new il,p,n,i;for(p=0;p<=u;p++)n=p/u,o[p]=this.getTangentAt(n),o[p].normalize();h[0]=new nl,g[0]=new nl;var x=b,d=N(o[0].x),f=N(o[0].y),m=N(o[0].z);for(d<=x&&(x=d,e.set(1,0,0)),f<=x&&(x=f,e.set(0,1,0)),m<=x&&e.set(0,0,1),y.crossVectors(o[0],e).normalize(),h[0].crossVectors(o[0],y),g[0].crossVectors(o[0],h[0]),p=1;p<=u;p++)h[p]=h[p-1].clone(),g[p]=g[p-1].clone(),y.crossVectors(o[p-1],o[p]),y.length()>Mc&&(y.normalize(),i=wc(rd.clamp(o[p-1].dot(o[p]),-1,1)),h[p].applyMatrix4(c.makeRotationAxis(y,i))),g[p].crossVectors(o[p],h[p]);if(!0===t)for(i=wc(rd.clamp(h[0].dot(h[u]),-1,1)),i/=u,0<o[0].dot(y.crossVectors(h[0],h[u]))&&(i=-i),p=1;p<=u;p++)h[p].applyMatrix4(c.makeRotationAxis(o[p],i*p)),g[p].crossVectors(o[p],h[p]);return{tangents:o,normals:h,binormals:g}}}),(Ii.prototype=Object.create(Pi.prototype)).constructor=Ii,Ii.prototype.isLineCurve=!0,Ii.prototype.getPoint=function(a){if(1===a)return this.v2.clone();var t=this.v2.clone().sub(this.v1);return t.multiplyScalar(a).add(this.v1),t},Ii.prototype.getPointAt=function(e){return this.getPoint(e)},Ii.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()},Ci.prototype=Object.assign(Object.create(Pi.prototype),{constructor:Ci,add:function(e){this.curves.push(e)},closePath:function(){var a=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);a.equals(t)||this.curves.push(new Ii(t,a))},getPoint:function(l){for(var t=l*this.getLength(),e=this.getCurveLengths(),n=0;n<e.length;){if(e[n]>=t){var i=e[n]-t,r=this.curves[n],o=r.getLength(),a=0===o?0:1-i/o;return r.getPointAt(a)}n++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var a=[],t=0,e=0,o=this.curves.length;e<o;e++)t+=this.curves[e].getLength(),a.push(t);return this.cacheLengths=a,a},getSpacedPoints:function(a){void 0===a&&(a=40);for(var t=[],e=0;e<=a;e++)t.push(this.getPoint(e/a));return this.autoClose&&t.push(t[0]),t},getPoints:function(d){d=d||12;for(var t=[],n=0,i=this.curves,r;n<i.length;n++)for(var e=i[n],o=e&&e.isEllipseCurve?2*d:e&&e.isLineCurve?1:e&&e.isSplineCurve?d*e.points.length:d,a=e.getPoints(o),s=0,l;s<a.length;s++)l=a[s],r&&r.equals(l)||(t.push(l),r=l);return this.autoClose&&1<t.length&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t},createPointsGeometry:function(a){var t=this.getPoints(a);return this.createGeometry(t)},createSpacedPointsGeometry:function(a){var t=this.getSpacedPoints(a);return this.createGeometry(t)},createGeometry:function(a){for(var t=new gt,e=0,o=a.length,n;e<o;e++)n=a[e],t.vertices.push(new nl(n.x,n.y,n.z||0));return t}}),mc.prototype=Object.create(Pi.prototype),mc.prototype.constructor=mc,mc.prototype.isEllipseCurve=!0,mc.prototype.getPoint=function(r){for(var t=2*Gn,d=this.aEndAngle-this.aStartAngle,n=N(d)<Mc;0>d;)d+=t;for(;d>t;)d-=t;d<Mc&&(d=n?0:t),!0!==this.aClockwise||n||(d===t?d=-t:d-=t);var i=this.aStartAngle+r*d,o=this.aX+this.xRadius*Cc(i),a=this.aY+this.yRadius*Pc(i);if(0!==this.aRotation){var s=Cc(this.aRotation),l=Pc(this.aRotation),c=o-this.aX,p=a-this.aY;o=c*s-p*l+this.aX,a=c*l+p*s+this.aY}return new el(o,a)},(Ri.prototype=Object.create(Pi.prototype)).constructor=Ri,Ri.prototype.isSplineCurve=!0,Ri.prototype.getPoint=function(r){var t=this.points,e=(t.length-1)*r,n=B(e),i=e-n,o=t[0===n?n:n-1],a=t[n],s=t[n>t.length-2?t.length-1:n+1],l=t[n>t.length-3?t.length-1:n+2];return new el(yi(i,o.x,a.x,s.x,l.x),yi(i,o.y,a.y,s.y,l.y))},(Di.prototype=Object.create(Pi.prototype)).constructor=Di,Di.prototype.getPoint=function(a){var t=this.v0,e=this.v1,r=this.v2,n=this.v3;return new el(Ai(a,t.x,e.x,r.x,n.x),Ai(a,t.y,e.y,r.y,n.y))},(ki.prototype=Object.create(Pi.prototype)).constructor=ki,ki.prototype.getPoint=function(a){var t=this.v0,e=this.v1,o=this.v2;return new el(xi(a,t.x,e.x,o.x),xi(a,t.y,e.y,o.y))};var os=Object.assign(Object.create(Ci.prototype),{fromPoints:function(a){this.moveTo(a[0].x,a[0].y);for(var t=1,e=a.length;t<e;t++)this.lineTo(a[t].x,a[t].y)},moveTo:function(a,t){this.currentPoint.set(a,t)},lineTo:function(a,t){var e=new Ii(this.currentPoint.clone(),new el(a,t));this.curves.push(e),this.currentPoint.set(a,t)},quadraticCurveTo:function(a,t,e,r){var n=new ki(this.currentPoint.clone(),new el(a,t),new el(e,r));this.curves.push(n),this.currentPoint.set(e,r)},bezierCurveTo:function(r,t,e,n,i,o){var a=new Di(this.currentPoint.clone(),new el(r,t),new el(e,n),new el(i,o));this.curves.push(a),this.currentPoint.set(i,o)},splineThru:function(a){var t=new Ri([this.currentPoint.clone()].concat(a));this.curves.push(t),this.currentPoint.copy(a[a.length-1])},arc:function(l,t,e,n,i,r){var o=this.currentPoint.x,a=this.currentPoint.y;this.absarc(l+o,t+a,e,n,i,r)},absarc:function(a,t,e,n,i,r){this.absellipse(a,t,e,e,n,i,r)},ellipse:function(d,t,e,n,i,r,o,a){var s=this.currentPoint.x,l=this.currentPoint.y;this.absellipse(d+s,t+l,e,n,i,r,o,a)},absellipse:function(d,t,e,n,i,r,o,a){var s=new mc(d,t,e,n,i,r,o,a);if(0<this.curves.length){var l=s.getPoint(0);l.equals(this.currentPoint)||this.lineTo(l.x,l.y)}this.curves.push(s);var c=s.getPoint(1);this.currentPoint.copy(c)}});Oi.prototype=os,os.constructor=Oi,Fi.prototype=Object.assign(Object.create(os),{constructor:Fi,getPointsHoles:function(a){for(var t=[],e=0,o=this.holes.length;e<o;e++)t[e]=this.holes[e].getPoints(a);return t},extractAllPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},extractPoints:function(e){return this.extractAllPoints(e)}}),Object.assign(_c.prototype,{moveTo:function(a,t){this.currentPath=new Oi,this.subPaths.push(this.currentPath),this.currentPath.moveTo(a,t)},lineTo:function(a,t){this.currentPath.lineTo(a,t)},quadraticCurveTo:function(a,t,e,o){this.currentPath.quadraticCurveTo(a,t,e,o)},bezierCurveTo:function(a,t,e,n,i,r){this.currentPath.bezierCurveTo(a,t,e,n,i,r)},splineThru:function(e){this.currentPath.splineThru(e)},toShapes:function(C,t){function e(a){for(var t=[],e=0,l=a.length;e<l;e++){var i=a[e],r=new Fi;r.curves=i.curves,t.push(r)}return t}var n=Ya.isClockWise,i=this.subPaths;if(0===i.length)return[];if(!0===t)return e(i);var r=[],l,L,R;if(1===i.length)return L=i[0],R=new Fi,R.curves=L.curves,r.push(R),r;var s=!n(i[0].getPoints());s=C?!s:s;var D=[],u=[],p=[],d=0,f;u[d]=void 0,p[d]=[];for(var F=0,m=i.length;F<m;F++)l=n(f=(L=i[F]).getPoints()),(l=C?!l:l)?(!s&&u[d]&&d++,u[d]={s:new Fi,p:f},u[d].s.curves=L.curves,s&&d++,p[d]=[]):p[d].push({h:L,p:f[0]});if(!u[0])return e(i);if(1<u.length){for(var _=!1,g=[],y=0,k=u.length;y<k;y++)D[y]=[];for(var y=0,k=u.length;y<k;y++)for(var b=p[y],w=0;w<b.length;w++){for(var O=b[w],S=!0,E=0;E<u.length;E++)(function(d,t){for(var e=t.length,n=!1,p=e-1,r=0;r<e;p=r++){var o=t[p],a=t[r],s=a.x-o.x,u=a.y-o.y;if(N(u)>Mc){if(0>u&&(o=t[r],s=-s,a=t[p],u=-u),d.y<o.y||d.y>a.y)continue;if(d.y!==o.y){var m=u*(d.x-o.x)-s*(d.y-o.y);if(0===m)return!0;if(0>m)continue;n=!n}else if(d.x===o.x)return!0}else{if(d.y!==o.y)continue;if(a.x<=d.x&&d.x<=o.x||o.x<=d.x&&d.x<=a.x)return!0}}return n})(O.p,u[E].p)&&(y!==E&&g.push({froms:y,tos:E,hole:w}),S?(S=!1,D[E].push(O)):_=!0);S&&D[y].push(O)}0<g.length&&(_||(p=D))}for(var F=0,U=u.length,A;F<U;F++){R=u[F].s,r.push(R);for(var T=0,P=(A=p[F]).length;T<P;T++)R.holes.push(A[T].h)}return r}}),Object.assign(Ni.prototype,{isFont:!0,generateShapes:function(c,d,e){function t(r,t,n,M){var o=T.glyphs[r]||T.glyphs["?"];if(o){var a=new _c,P=[],v,s,l,c,h,u,p,d,f,m,_;if(o.o)for(var g=o._cachedOutline||(o._cachedOutline=o.o.split(" ")),b=0,w=g.length;b<w;)switch(g[b++]){case"m":v=g[b++]*t+n,s=g[b++]*t+M,a.moveTo(v,s);break;case"l":v=g[b++]*t+n,s=g[b++]*t+M,a.lineTo(v,s);break;case"q":if(l=g[b++]*t+n,c=g[b++]*t+M,p=g[b++]*t+n,d=g[b++]*t+M,a.quadraticCurveTo(p,d,l,c),_=P[P.length-1])for(h=_.x,u=_.y,x=1;x<=e;x++)xi(S=x/e,h,p,l),xi(S,u,d,c);break;case"b":if(l=g[b++]*t+n,c=g[b++]*t+M,p=g[b++]*t+n,d=g[b++]*t+M,f=g[b++]*t+n,m=g[b++]*t+M,a.bezierCurveTo(p,d,f,m,l,c),_=P[P.length-1]){h=_.x,u=_.y;for(var x=1,S;x<=e;x++)S=x/e,Ai(S,h,p,f,l),Ai(S,u,d,m,c)}}return{offsetX:o.ha*t,path:a}}}void 0===d&&(d=100),void 0===e&&(e=4);for(var T=this.data,r=function(e){for(var r=(e+"").split(""),n=d/T.resolution,o=(T.boundingBox.yMax-T.boundingBox.yMin+T.underlineThickness)*n,a=0,i=0,l=[],s=0,c;s<r.length;s++)if(c=r[s],"\n"===c)a=0,i-=o;else{var u=t(c,n,a,i);a+=u.offsetX,l.push(u.path)}return l}(c),o=[],a=0,n=r.length;a<n;a++)Array.prototype.push.apply(o,r[a].toShapes());return o}}),Object.assign(function(e){this.manager=void 0===e?Qa:e}.prototype,{load:function(a,o,e,t){var l=this;new Bn(this.manager).load(a,function(e){var t;try{t=JSON.parse(e)}catch(a){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),t=JSON.parse(e.substring(65,e.length-2))}var a=l.parse(t);o&&o(a)},e,t)},parse:function(e){return new Ni(e)}});var as={getContext:function(){return void 0===ls&&(ls=new(window.AudioContext||window.webkitAudioContext)),ls},setContext:function(e){ls=e}},ls;Object.assign(Bi.prototype,{load:function(a,o,e,t){var n=new Bn(this.manager);n.setResponseType("arraybuffer"),n.load(a,function(e){as.getContext().decodeAudioData(e,function(e){o(e)})},e,t)}}),Object.assign(function(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new fl,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new fl,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}.prototype,{update:function(){var _=new il,l=new il,c,t,e,n,i,r,o,a;return function(g){if(c!==this||t!==g.focus||e!==g.fov||n!==g.aspect*this.aspect||i!==g.near||r!==g.far||o!==g.zoom||a!==this.eyeSep){c=this,t=g.focus,e=g.fov,n=g.aspect*this.aspect,i=g.near,r=g.far,o=g.zoom;var h=g.projectionMatrix.clone(),d=(a=this.eyeSep/2)*i/t,f=i*Pr(.5*(rd.DEG2RAD*e))/o,y,u;l.elements[12]=-a,_.elements[12]=a,y=-f*n+d,u=f*n+d,h.elements[0]=2*i/(u-y),h.elements[8]=(u+y)/(u-y),this.cameraL.projectionMatrix.copy(h),y=-f*n-d,u=f*n-d,h.elements[0]=2*i/(u-y),h.elements[8]=(u+y)/(u-y),this.cameraR.projectionMatrix.copy(h)}this.cameraL.matrixWorld.copy(g.matrixWorld).multiply(l),this.cameraR.matrixWorld.copy(g.matrixWorld).multiply(_)}}()}),(zi.prototype=Object.create(ut.prototype)).constructor=zi,Gi.prototype=Object.assign(Object.create(ut.prototype),{constructor:Gi,getInput:function(){return this.gain},removeFilter:function(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null)},getFilter:function(){return this.filter},setFilter:function(e){null===this.filter?this.gain.disconnect(this.context.destination):(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){this.gain.gain.value=e},updateMatrixWorld:function(){var l=new nl,t=new rl,e=new nl,n=new nl;return function(i){ut.prototype.updateMatrixWorld.call(this,i);var r=this.context.listener,o=this.up;this.matrixWorld.decompose(l,t,e),n.set(0,0,-1).applyQuaternion(t),r.positionX?(r.positionX.setValueAtTime(l.x,this.context.currentTime),r.positionY.setValueAtTime(l.y,this.context.currentTime),r.positionZ.setValueAtTime(l.z,this.context.currentTime),r.forwardX.setValueAtTime(n.x,this.context.currentTime),r.forwardY.setValueAtTime(n.y,this.context.currentTime),r.forwardZ.setValueAtTime(n.z,this.context.currentTime),r.upX.setValueAtTime(o.x,this.context.currentTime),r.upY.setValueAtTime(o.y,this.context.currentTime),r.upZ.setValueAtTime(o.z,this.context.currentTime)):(r.setPosition(l.x,l.y,l.z),r.setOrientation(n.x,n.y,n.z,o.x,o.y,o.z))}}()}),hc.prototype=Object.assign(Object.create(ut.prototype),{constructor:hc,getOutput:function(){return this.gain},setNodeSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this},setBuffer:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){var e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.onended=this.onEnded.bind(this),e.playbackRate.setValueAtTime(this.playbackRate,this.startTime),e.start(0,this.startTime),this.isPlaying=!0,this.source=e,this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")},pause:function(){return!1===this.hasPlaybackControl?void console.warn("THREE.Audio: this Audio has no playback control."):(this.source.stop(),this.startTime=this.context.currentTime,this.isPlaying=!1,this)},stop:function(){return!1===this.hasPlaybackControl?void console.warn("THREE.Audio: this Audio has no playback control."):(this.source.stop(),this.startTime=0,this.isPlaying=!1,this)},connect:function(){if(0<this.filters.length){this.source.connect(this.filters[0]);for(var a=1,t=this.filters.length;a<t;a++)this.filters[a-1].connect(this.filters[a]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(0<this.filters.length){this.source.disconnect(this.filters[0]);for(var a=1,t=this.filters.length;a<t;a++)this.filters[a-1].disconnect(this.filters[a]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(e){return e||(e=[]),!0===this.isPlaying?(this.disconnect(),this.filters=e,this.connect()):this.filters=e,this},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){return!1===this.hasPlaybackControl?void console.warn("THREE.Audio: this Audio has no playback control."):(this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime),this)},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(e){return!1===this.hasPlaybackControl?void console.warn("THREE.Audio: this Audio has no playback control."):(this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this)},getVolume:function(){return this.gain.gain.value},setVolume:function(e){return this.gain.gain.value=e,this}}),gc.prototype=Object.assign(Object.create(hc.prototype),{constructor:gc,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){this.panner.refDistance=e},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){this.panner.rolloffFactor=e},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){this.panner.distanceModel=e},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){this.panner.maxDistance=e},updateMatrixWorld:function(){var a=new nl;return function(t){ut.prototype.updateMatrixWorld.call(this,t),a.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(a.x,a.y,a.z)}}()}),Object.assign(fc.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var a=0,t=this.getFrequencyData(),e=0;e<t.length;e++)a+=t[e];return a/t.length}}),Object.assign(Wi.prototype,{accumulate:function(l,t){var e=this.buffer,n=this.valueSize,i=l*n+n,r=this.cumulativeWeight;if(0===r){for(var o=0;o!==n;++o)e[i+o]=e[o];r=t}else{var a=t/(r+=t);this._mixBufferRegion(e,i,0,a,n)}this.cumulativeWeight=r},apply:function(a){var t=this.valueSize,e=this.buffer,n=a*t+t,i=this.cumulativeWeight,r=this.binding;if(this.cumulativeWeight=0,1>i){this._mixBufferRegion(e,n,3*t,1-i,t)}for(var o=t;o!==t+t;++o)if(e[o]!==e[o+t]){r.setValue(e,n);break}},saveOriginalState:function(){var a=this.binding,t=this.buffer,e=this.valueSize,o=3*e;a.getValue(t,o);for(var n=e;n!==o;++n)t[n]=t[o+n%e];this.cumulativeWeight=0},restoreOriginalState:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)},_select:function(a,t,e,n,i){if(.5<=n)for(var r=0;r!==i;++r)a[t+r]=a[e+r]},_slerp:function(a,t,e,o){rl.slerpFlat(a,t,a,t,a,e,o)},_lerp:function(o,t,e,n,i){for(var r=0,a;r!==i;++r)a=t+r,o[a]=o[a]*(1-n)+o[e+r]*n}}),Object.assign(qi.prototype,{getValue:function(a,t){this.bind();var e=this._targetGroup.nCachedObjects_,o=this._bindings[e];void 0!==o&&o.getValue(a,t)},setValue:function(a,t){for(var e=this._bindings,o=this._targetGroup.nCachedObjects_,n=e.length;o!==n;++o)e[o].setValue(a,t)},bind:function(){for(var a=this._bindings,t=this._targetGroup.nCachedObjects_,e=a.length;t!==e;++t)a[t].bind()},unbind:function(){for(var a=this._bindings,t=this._targetGroup.nCachedObjects_,e=a.length;t!==e;++t)a[t].unbind()}}),Object.assign(yc,{Composite:qi,create:function(a,t,e){return a&&a.isAnimationObjectGroup?new yc.Composite(a,t,e):new yc(a,t,e)},sanitizeNodeName:function(e){return e.replace(/\s/g,"_").replace(/[^\w-]/g,"")},parseTrackName:function(){var a=/((?:[\w-]+[\/:])*)/,t=/([\w-\.]+)?/,e=/(?:\.([\w-]+)(?:\[(.+)\])?)?/,n=/\.([\w-]+)(?:\[(.+)\])?/,l=new RegExp("^"+a.source+t.source+e.source+n.source+"$"),r=["material","materials","bones"];return function(o){var t=l.exec(o);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+o);var s={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},n=s.nodeName&&s.nodeName.lastIndexOf(".");if(void 0!==n&&-1!==n){var i=s.nodeName.substring(n+1);-1!==r.indexOf(i)&&(s.nodeName=s.nodeName.substring(0,n),s.objectName=i)}if(null===s.propertyName||0===s.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+o);return s}}(),findNode:function(a,l){if(!l||""===l||"root"===l||"."===l||-1===l||l===a.name||l===a.uuid)return a;if(a.skeleton){var t=function(e){for(var t=0,a;t<e.bones.length;t++)if(a=e.bones[t],a.name===l)return a;return null}(a.skeleton);if(t)return t}if(a.children){var o=function e(a){for(var t=0,n;t<a.length;t++){if(n=a[t],n.name===l||n.uuid===l)return n;var r=e(n.children);if(r)return r}return null},n=o(a.children);if(n)return n}return null}}),Object.assign(yc.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(a,t){a[t]=this.node[this.propertyName]},function(a,t){for(var e=this.resolvedProperty,o=0,n=e.length;o!==n;++o)a[t++]=e[o]},function(a,t){a[t]=this.resolvedProperty[this.propertyIndex]},function(a,t){this.resolvedProperty.toArray(a,t)}],SetterByBindingTypeAndVersioning:[[function(a,t){this.node[this.propertyName]=a[t]},function(a,t){this.node[this.propertyName]=a[t],this.targetObject.needsUpdate=!0},function(a,t){this.node[this.propertyName]=a[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(a,t){for(var e=this.resolvedProperty,o=0,n=e.length;o!==n;++o)e[o]=a[t++]},function(a,t){for(var e=this.resolvedProperty,o=0,n=e.length;o!==n;++o)e[o]=a[t++];this.targetObject.needsUpdate=!0},function(a,t){for(var e=this.resolvedProperty,o=0,n=e.length;o!==n;++o)e[o]=a[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(a,t){this.resolvedProperty[this.propertyIndex]=a[t]},function(a,t){this.resolvedProperty[this.propertyIndex]=a[t],this.targetObject.needsUpdate=!0},function(a,t){this.resolvedProperty[this.propertyIndex]=a[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(a,t){this.resolvedProperty.fromArray(a,t)},function(a,t){this.resolvedProperty.fromArray(a,t),this.targetObject.needsUpdate=!0},function(a,t){this.resolvedProperty.fromArray(a,t),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(a,t){this.bind(),this.getValue(a,t)},setValue:function(a,t){this.bind(),this.setValue(a,t)},bind:function(){var d=this.node,t=this.parsedPath,e=t.objectName,n=t.propertyName,i=t.propertyIndex;if(d||(d=yc.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=d),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,d){if(e){var r=t.objectIndex;switch(e){case"materials":if(!d.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!d.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);d=d.material.materials;break;case"bones":if(!d.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);for(d=d.skeleton.bones,l=0;l<d.length;l++)if(d[l].name===r){r=l;break}break;default:if(void 0===d[e])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);d=d[e];}if(void 0!==r){if(void 0===d[r])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,d);d=d[r]}}var o=d[n];if(void 0!==o){var a=this.Versioning.None;void 0===d.needsUpdate?void 0!==d.matrixWorldNeedsUpdate&&(a=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=d):(a=this.Versioning.NeedsUpdate,this.targetObject=d);var s=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===n){if(!d.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(d.geometry.isBufferGeometry){if(!d.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);for(l=0;l<this.node.geometry.morphAttributes.position.length;l++)if(d.geometry.morphAttributes.position[l].name===i){i=l;break}}else{if(!d.geometry.morphTargets)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);for(var l=0;l<this.node.geometry.morphTargets.length;l++)if(d.geometry.morphTargets[l].name===i){i=l;break}}}s=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=i}else void 0!==o.fromArray&&void 0!==o.toArray?(s=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(s=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=n;this.getValue=this.GetterByBindingType[s],this.setValue=this.SetterByBindingTypeAndVersioning[s][a]}else{var c=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+n+" but it wasn't found.",d)}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(yc.prototype,{_getValue_unbound:yc.prototype.getValue,_setValue_unbound:yc.prototype.setValue}),Object.assign(function(){this.uuid=rd.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var e=0,a=arguments.length;e!==a;++e)t[arguments[e].uuid]=e;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var o=this;this.stats={objects:{get total(){return o._objects.length},get inUse(){return this.total-o.nCachedObjects_}},get bindingsPerObject(){return o._bindings.length}}}.prototype,{isAnimationObjectGroup:!0,add:function(){for(var t=this._objects,e=t.length,n=this.nCachedObjects_,i=this._indicesByUUID,r=this._paths,o=this._parsedPaths,a=this._bindings,s=a.length,l=0,c=arguments.length;l!==c;++l){var h=arguments[l],u=h.uuid,p=i[u],d=void 0;if(void 0===p){p=e++,i[u]=p,t.push(h);for(var f=0,m=s;f!==m;++f)a[f].push(new yc(h,r[f],o[f]))}else if(p<n){d=t[p];var _=--n,g=t[_];i[g.uuid]=p,t[p]=g,i[u]=_,t[_]=h;for(var f=0,m=s;f!==m;++f){var y=a[f],x=y[_],b=y[p];y[p]=x,void 0===b&&(b=new yc(h,r[f],o[f])),y[_]=b}}else t[p]!==d&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=n},remove:function(){for(var t=this._objects,e=this.nCachedObjects_,n=this._indicesByUUID,i=this._bindings,r=i.length,o=0,a=arguments.length;o!==a;++o){var s=arguments[o],l=s.uuid,c=n[l];if(void 0!==c&&c>=e){var h=e++,u=t[h];n[u.uuid]=c,t[c]=u,n[l]=h,t[h]=s;for(var p=0;p!==r;++p){var d=i[p],m=d[h],_=d[c];d[c]=m,d[h]=_}}}this.nCachedObjects_=e},uncache:function(){for(var t=this._objects,e=t.length,n=this.nCachedObjects_,i=this._indicesByUUID,r=this._bindings,o=r.length,a=0,s=arguments.length;a!==s;++a){var l=arguments[a].uuid,c=i[l];if(void 0!==c)if(delete i[l],c<n){var h=--n,u=t[h],p=t[g=--e];i[u.uuid]=c,t[c]=u,i[p.uuid]=h,t[h]=p,t.pop();for(var d=0,f=o;d!==f;++d){var m=(y=r[d])[h],_=y[g];y[c]=m,y[h]=_,y.pop()}}else{var g=--e;i[(p=t[g]).uuid]=c,t[c]=p,t.pop();for(var d=0,f=o,y;d!==f;++d)y=r[d],y[c]=y[g],y.pop()}}this.nCachedObjects_=n},subscribe_:function(m,t){var e=this._bindingsIndicesByPath,n=e[m],i=this._bindings;if(void 0!==n)return i[n];var r=this._paths,o=this._parsedPaths,a=this._objects,s=a.length,l=this.nCachedObjects_,c=Array(s);n=i.length,e[m]=n,r.push(m),o.push(t),i.push(c);for(var _=l,u=a.length,p;_!==u;++_)p=a[_],c[_]=new yc(p,m,t);return c},unsubscribe_:function(l){var t=this._bindingsIndicesByPath,e=t[l];if(void 0!==e){var n=this._paths,i=this._parsedPaths,r=this._bindings,o=r.length-1,a=r[o];t[l[o]]=e,r[e]=a,r.pop(),i[e]=i[o],i.pop(),n[e]=n[o],n.pop()}}}),Object.assign(Yi.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){return this._startTime=e,this},setLoop:function(a,t){return this.loop=a,this.repetitions=t,this},setEffectiveWeight:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(a,t,e){if(a.fadeOut(t),this.fadeIn(t),e){var o=this._clip.duration,n=a._clip.duration;a.warp(1,n/o,t),this.warp(o/n,1,t)}return this},crossFadeTo:function(a,t,e){return a.crossFadeFrom(this,t,e)},stopFading:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},setEffectiveTimeScale:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()},syncWith:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(c,t,e){var n=this._mixer,i=n.time,r=this._timeScaleInterpolant,o=this.timeScale;null===r&&(r=n._lendControlInterpolant(),this._timeScaleInterpolant=r);var a=r.parameterPositions,s=r.sampleValues;return a[0]=i,a[1]=i+e,s[0]=c/o,s[1]=t/o,this},stopWarping:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(d,t,e,n){if(this.enabled){var i=this._startTime;if(null!==i){var r=(d-i)*e;if(0>r||0===e)return;this._startTime=null,t=e*r}t*=this._updateTimeScale(d);var o=this._updateTime(t),a=this._updateWeight(d);if(0<a)for(var s=this._interpolants,l=this._propertyBindings,c=0,p=s.length;c!==p;++c)s[c].evaluate(o),l[c].accumulate(n,a)}else this._updateWeight(d)},_updateWeight:function(a){var t=0;if(this.enabled){t=this.weight;var e=this._weightInterpolant;if(null!==e){var o=e.evaluate(a)[0];t*=o,a>e.parameterPositions[1]&&(this.stopFading(),0===o&&(this.enabled=!1))}}return this._effectiveWeight=t,t},_updateTimeScale:function(a){var t=0;if(!this.paused){t=this.timeScale;var e=this._timeScaleInterpolant;null!==e&&(t*=e.evaluate(a)[0],a>e.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t},_updateTime:function(c){var t=this.time+c;if(0===c)return t;var e=this._clip.duration,n=this.loop,i=this._loopCount;if(2200===n){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(t>=e)t=e;else{if(!(0>t))break t;t=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:0>c?-1:1})}}else{var r=2202===n;if(-1===i&&(0<=c?(i=0,this._setEndings(!0,0===this.repetitions,r)):this._setEndings(0===this.repetitions,!0,r)),t>=e||0>t){var o=B(t/e);t-=e*o,i+=N(o);var d=this.repetitions-i;if(0>d)this.clampWhenFinished?this.paused=!0:this.enabled=!1,t=0<c?e:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:0<c?1:-1});else{if(0===d){var s=0>c;this._setEndings(s,!s,r)}else this._setEndings(!1,!1,r);this._loopCount=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}if(r&&1==(1&i))return this.time=t,e-t}return this.time=t,t},_setEndings:function(a,t,e){var o=this._interpolantSettings;e?(o.endingStart=2401,o.endingEnd=2401):(o.endingStart=a?this.zeroSlopeAtStart?2401:ga:2402,o.endingEnd=t?this.zeroSlopeAtEnd?2401:ga:2402)},_scheduleFading:function(l,t,e){var n=this._mixer,i=n.time,r=this._weightInterpolant;null===r&&(r=n._lendControlInterpolant(),this._weightInterpolant=r);var o=r.parameterPositions,a=r.sampleValues;return o[0]=i,a[0]=t,o[1]=i+l,a[1]=e,this}}),Object.assign(function(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}.prototype,n.prototype,{_bindAction:function(m,t){var e=m._localRoot||this._root,n=m._clip.tracks,i=n.length,r=m._propertyBindings,o=m._interpolants,a=e.uuid,s=this._bindingsByRootAndName,l=s[a];void 0===l&&(l={},s[a]=l);for(var c=0;c!==i;++c){var _=n[c],u=_.name,p=l[u];if(void 0!==p)r[c]=p;else{if(void 0!==(p=r[c])){null===p._cacheIndex&&(++p.referenceCount,this._addInactiveBinding(p,a,u));continue}var d=t&&t._propertyBindings[c].binding.parsedPath;++(p=new Wi(yc.create(e,u,d),_.ValueTypeName,_.getValueSize())).referenceCount,this._addInactiveBinding(p,a,u),r[c]=p}o[c].resultBuffer=p.buffer}},_activateAction:function(l){if(!this._isActiveAction(l)){if(null===l._cacheIndex){var t=(l._localRoot||this._root).uuid,e=l._clip.uuid,n=this._actionsByClip[e];this._bindAction(l,n&&n.knownActions[0]),this._addInactiveAction(l,e,t)}for(var i=l._propertyBindings,r=0,o=i.length,a;r!==o;++r)a=i[r],0==a.useCount++&&(this._lendBinding(a),a.saveOriginalState());this._lendAction(l)}},_deactivateAction:function(a){if(this._isActiveAction(a)){for(var t=a._propertyBindings,e=0,o=t.length,n;e!==o;++e)n=t[e],0==--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n));this._takeBackAction(a)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(a){var t=a._cacheIndex;return null!==t&&t<this._nActiveActions},_addInactiveAction:function(l,t,e){var n=this._actions,i=this._actionsByClip,r=i[t];if(void 0===r)r={knownActions:[l],actionByRoot:{}},l._byClipCacheIndex=0,i[t]=r;else{var o=r.knownActions;l._byClipCacheIndex=o.length,o.push(l)}l._cacheIndex=n.length,n.push(l),r.actionByRoot[e]=l},_removeInactiveAction:function(d){var t=this._actions,e=t[t.length-1],n=d._cacheIndex;e._cacheIndex=n,t[n]=e,t.pop(),d._cacheIndex=null;var i=d._clip.uuid,r=this._actionsByClip,o=r[i],a=o.knownActions,s=a[a.length-1],l=d._byClipCacheIndex;s._byClipCacheIndex=l,a[l]=s,a.pop(),d._byClipCacheIndex=null,delete o.actionByRoot[(d._localRoot||this._root).uuid],0===a.length&&delete r[i],this._removeInactiveBindingsForAction(d)},_removeInactiveBindingsForAction:function(a){for(var t=a._propertyBindings,e=0,o=t.length,n;e!==o;++e)n=t[e],0==--n.referenceCount&&this._removeInactiveBinding(n)},_lendAction:function(a){var t=this._actions,e=a._cacheIndex,o=this._nActiveActions++,n=t[o];a._cacheIndex=o,t[o]=a,n._cacheIndex=e,t[e]=n},_takeBackAction:function(a){var t=this._actions,e=a._cacheIndex,o=--this._nActiveActions,n=t[o];a._cacheIndex=o,t[o]=a,n._cacheIndex=e,t[e]=n},_addInactiveBinding:function(a,t,e){var n=this._bindingsByRootAndName,i=n[t],r=this._bindings;void 0===i&&(i={},n[t]=i),i[e]=a,a._cacheIndex=r.length,r.push(a)},_removeInactiveBinding:function(d){var t=this._bindings,e=d.binding,n=e.rootNode.uuid,i=e.path,r=this._bindingsByRootAndName,o=r[n],a=t[t.length-1],s=d._cacheIndex;a._cacheIndex=s,t[s]=a,t.pop(),delete o[i];t:{for(var l in o)break t;delete r[n]}},_lendBinding:function(a){var t=this._bindings,e=a._cacheIndex,o=this._nActiveBindings++,n=t[o];a._cacheIndex=o,t[o]=a,n._cacheIndex=e,t[e]=n},_takeBackBinding:function(a){var t=this._bindings,e=a._cacheIndex,o=--this._nActiveBindings,n=t[o];a._cacheIndex=o,t[o]=a,n._cacheIndex=e,t[e]=n},_lendControlInterpolant:function(){var a=this._controlInterpolants,t=this._nActiveControlInterpolants++,e=a[t];return void 0===e&&((e=new oc(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=t,a[t]=e),e},_takeBackControlInterpolant:function(a){var t=this._controlInterpolants,e=a.__cacheIndex,o=--this._nActiveControlInterpolants,n=t[o];a.__cacheIndex=o,t[o]=a,n.__cacheIndex=e,t[e]=n},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(d,p){var e=p||this._root,n=e.uuid,i="string"==typeof d?di.findByName(e,d):d,r=null===i?d:i.uuid,o=this._actionsByClip[r],a=null;if(void 0!==o){var s=o.actionByRoot[n];if(void 0!==s)return s;a=o.knownActions[0],null===i&&(i=a._clip)}if(null===i)return null;var l=new Yi(this,i,p);return this._bindAction(l,a),this._addInactiveAction(l,r,n),l},existingAction:function(l,s){var e=s||this._root,n=e.uuid,i="string"==typeof l?di.findByName(e,l):l,r=i?i.uuid:l,o=this._actionsByClip[r];return void 0===o?null:o.actionByRoot[n]||null},stopAllAction:function(){var a=this._actions,t=this._nActiveActions,e=this._bindings,o=this._nActiveBindings;for(this._nActiveActions=0,this._nActiveBindings=0,n=0;n!==t;++n)a[n].reset();for(var n=0;n!==o;++n)e[n].useCount=0;return this},update:function(c){c*=this.timeScale;for(var t=this._actions,e=this._nActiveActions,n=this.time+=c,i=Ec(c),r=this._accuIndex^=1,o=0;o!==e;++o)t[o]._update(n,c,i,r);for(var a=this._bindings,s=this._nActiveBindings,o=0;o!==s;++o)a[o].apply(r);return this},getRoot:function(){return this._root},uncacheClip:function(d){var t=this._actions,e=d.uuid,n=this._actionsByClip,i=n[e];if(void 0!==i){for(var r=i.knownActions,o=0,a=r.length,s;o!==a;++o){s=r[o],this._deactivateAction(s);var l=s._cacheIndex,c=t[t.length-1];s._cacheIndex=null,s._byClipCacheIndex=null,c._cacheIndex=l,t[l]=c,t.pop(),this._removeInactiveBindingsForAction(s)}delete n[e]}},uncacheRoot:function(l){var t=l.uuid,e=this._actionsByClip;for(var n in e){var i=e[n].actionByRoot[t];void 0!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}var r=this._bindingsByRootAndName[t];if(void 0!==r)for(var o in r){var a=r[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}},uncacheAction:function(a,t){var e=this.existingAction(a,t);null!==e&&(this._deactivateAction(e),this._removeInactiveAction(e))}}),Zi.prototype.clone=function(){return new Zi(void 0===this.value.clone?this.value:this.value.clone())},Ji.prototype=Object.assign(Object.create(bl.prototype),{constructor:Ji,isInstancedBufferGeometry:!0,addGroup:function(a,o,r){this.groups.push({start:a,count:o,materialIndex:r})},copy:function(c){var t=c.index;null!==t&&this.setIndex(t.clone());var e=c.attributes;for(var n in e){var i=e[n];this.addAttribute(n,i.clone())}for(var r=c.groups,o=0,a=r.length,s;o<a;o++)s=r[o],this.addGroup(s.start,s.count,s.materialIndex);return this}}),Object.defineProperties(bc.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(bc.prototype,{isInterleavedBufferAttribute:!0,setX:function(a,t){return this.data.array[a*this.data.stride+this.offset]=t,this},setY:function(a,t){return this.data.array[a*this.data.stride+this.offset+1]=t,this},setZ:function(a,t){return this.data.array[a*this.data.stride+this.offset+2]=t,this},setW:function(a,t){return this.data.array[a*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(a,t,e){return a=a*this.data.stride+this.offset,this.data.array[a+0]=t,this.data.array[a+1]=e,this},setXYZ:function(a,t,e,o){return a=a*this.data.stride+this.offset,this.data.array[a+0]=t,this.data.array[a+1]=e,this.data.array[a+2]=o,this},setXYZW:function(a,t,e,o,n){return a=a*this.data.stride+this.offset,this.data.array[a+0]=t,this.data.array[a+1]=e,this.data.array[a+2]=o,this.data.array[a+3]=n,this}}),Object.defineProperty(Qi.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(Qi.prototype,{isInterleavedBuffer:!0,setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0===e?0:e.length/this.stride,this.array=e},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.dynamic=e.dynamic,this},copyAt:function(a,t,e){a*=this.stride,e*=t.stride;for(var o=0,n=this.stride;o<n;o++)this.array[a+o]=t.array[e+o];return this},set:function(a,t){return void 0===t&&(t=0),this.array.set(a,t),this},clone:function(){return new this.constructor().copy(this)},onUpload:function(e){return this.onUploadCallback=e,this}}),$i.prototype=Object.assign(Object.create(Qi.prototype),{constructor:$i,isInstancedInterleavedBuffer:!0,copy:function(e){return Qi.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),xc.prototype=Object.assign(Object.create(yt.prototype),{constructor:xc,isInstancedBufferAttribute:!0,copy:function(e){return yt.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Object.assign(function(a,t,e,o){this.ray=new wl(a,t),this.near=e||0,this.far=o||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}.prototype,{linePrecision:1,set:function(a,t){this.ray.set(a,t)},setFromCamera:function(a,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(a.x,a.y,.5).unproject(t).sub(this.ray.origin).normalize()):t&&t.isOrthographicCamera?(this.ray.origin.set(a.x,a.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(a,t){var e=[];return nr(a,this,e,t),e.sort(vc),e},intersectObjects:function(a,t){var e=[];if(!1===Array.isArray(a))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),e;for(var o=0,n=a.length;o<n;o++)nr(a[o],this,e,t);return e.sort(vc),e}}),Object.assign(function(e){this.autoStart=void 0===e||e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}.prototype,{start:function(){this.startTime=("undefined"==typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var a=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=("undefined"==typeof performance?Date:performance).now();a=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=a}return a}}),Object.assign(function(a,t,e){return this.radius=void 0===a?1:a,this.phi=void 0===t?0:t,this.theta=void 0===e?0:e,this}.prototype,{set:function(a,t,e){return this.radius=a,this.phi=t,this.theta=e,this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this},makeSafe:function(){return this.phi=C(1e-6,U(Gn-1e-6,this.phi)),this},setFromVector3:function(e){return this.radius=e.length(),0===this.radius?(this.theta=0,this.phi=0):(this.theta=k(e.x,e.z),this.phi=wc(rd.clamp(e.y/this.radius,-1,1))),this}}),Object.assign(function(a,t,e){return this.radius=void 0===a?1:a,this.theta=void 0===t?0:t,this.y=void 0===e?0:e,this}.prototype,{set:function(a,t,e){return this.radius=a,this.theta=t,this.y=e,this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this},setFromVector3:function(e){return this.radius=O(e.x*e.x+e.z*e.z),this.theta=k(e.x,e.z),this.y=e.y,this}}),(ir.prototype=Object.create(ut.prototype)).constructor=ir,ir.prototype.isImmediateRenderObject=!0,(rr.prototype=Object.create(Fl.prototype)).constructor=rr,rr.prototype.update=function(){var l=new nl,t=new nl,e=new rt;return function(){var n=["a","b","c"];this.object.updateMatrixWorld(!0),e.getNormalMatrix(this.object.matrixWorld);var i=this.object.matrixWorld,r=this.geometry.attributes.position,o=this.object.geometry;if(o&&o.isGeometry)for(var a=o.vertices,s=o.faces,b=0,c=0,h=s.length;c<h;c++)for(var u=s[c],p=0,d=u.vertexNormals.length;p<d;p++){var f=a[u[n[p]]],m=u.vertexNormals[p];l.copy(f).applyMatrix4(i),t.copy(m).applyMatrix3(e).normalize().multiplyScalar(this.size).add(l),r.setXYZ(b,l.x,l.y,l.z),b+=1,r.setXYZ(b,t.x,t.y,t.z),b+=1}else if(o&&o.isBufferGeometry)for(var _=o.attributes.position,g=o.attributes.normal,b=0,p=0,d=_.count;p<d;p++)l.set(_.getX(p),_.getY(p),_.getZ(p)).applyMatrix4(i),t.set(g.getX(p),g.getY(p),g.getZ(p)),t.applyMatrix3(e).normalize().multiplyScalar(this.size).add(l),r.setXYZ(b,l.x,l.y,l.z),b+=1,r.setXYZ(b,t.x,t.y,t.z),b+=1;r.needsUpdate=!0}}(),(or.prototype=Object.create(ut.prototype)).constructor=or,or.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},or.prototype.update=function(){var a=new nl,t=new nl;return function(){this.light.updateMatrixWorld();var e=this.light.distance?this.light.distance:1e3,o=e*Pr(this.light.angle);this.cone.scale.set(o,o,e),a.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(t.sub(a)),void 0===this.color?this.cone.material.color.copy(this.light.color):this.cone.material.color.set(this.color)}}(),(sr.prototype=Object.create(Fl.prototype)).constructor=sr,sr.prototype.onBeforeRender=function(){var r=new nl,t=new il,e=new il;return function(){var n=this.bones,i=this.geometry,c=i.getAttribute("position");e.getInverse(this.root.matrixWorld);for(var o=0,a=0,s;o<n.length;o++)s=n[o],s.parent&&s.parent.isBone&&(t.multiplyMatrices(e,s.matrixWorld),r.setFromMatrixPosition(t),c.setXYZ(a,r.x,r.y,r.z),t.multiplyMatrices(e,s.parent.matrixWorld),r.setFromMatrixPosition(t),c.setXYZ(a+1,r.x,r.y,r.z),a+=2);i.getAttribute("position").needsUpdate=!0}}(),(lr.prototype=Object.create(Bt.prototype)).constructor=lr,lr.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},lr.prototype.update=function(){void 0===this.color?this.material.color.copy(this.light.color):this.material.color.set(this.color)},(cr.prototype=Object.create(ut.prototype)).constructor=cr,cr.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},cr.prototype.update=function(){var a=.5*this.light.width,o=.5*this.light.height,r=this.line.geometry.attributes.position,n=r.array;n[0]=a,n[1]=-o,n[2]=0,n[3]=a,n[4]=o,n[5]=0,n[6]=-a,n[7]=o,n[8]=0,n[9]=-a,n[10]=-o,n[11]=0,n[12]=a,n[13]=-o,n[14]=0,r.needsUpdate=!0,void 0===this.color?this.line.material.color.copy(this.light.color):this.line.material.color.set(this.color)},(hr.prototype=Object.create(ut.prototype)).constructor=hr,hr.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},hr.prototype.update=function(){var l=new nl,t=new X,e=new X;return function(){var n=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var i=n.geometry.getAttribute("color");t.copy(this.light.color),e.copy(this.light.groundColor);for(var r=0,o=i.count,a;r<o;r++)a=r<o/2?t:e,i.setXYZ(r,a.r,a.g,a.b);i.needsUpdate=!0}n.lookAt(l.setFromMatrixPosition(this.light.matrixWorld).negate())}}(),(ur.prototype=Object.create(Fl.prototype)).constructor=ur,(pr.prototype=Object.create(Fl.prototype)).constructor=pr,(dr.prototype=Object.create(Fl.prototype)).constructor=dr,dr.prototype.update=function(){var o=new nl,t=new nl,e=new rt;return function(){this.object.updateMatrixWorld(!0),e.getNormalMatrix(this.object.matrixWorld);for(var n=this.object.matrixWorld,i=this.geometry.attributes.position,r=this.object.geometry,d=r.vertices,a=r.faces,s=0,l=0,c=a.length;l<c;l++){var m=a[l],u=m.normal;o.copy(d[m.a]).add(d[m.b]).add(d[m.c]).divideScalar(3).applyMatrix4(n),t.copy(u).applyMatrix3(e).normalize().multiplyScalar(this.size).add(o),i.setXYZ(s,o.x,o.y,o.z),s+=1,i.setXYZ(s,t.x,t.y,t.z),s+=1}i.needsUpdate=!0}}(),(fr.prototype=Object.create(ut.prototype)).constructor=fr,fr.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},fr.prototype.update=function(){var a=new nl,t=new nl,e=new nl;return function(){a.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),e.subVectors(t,a),this.lightPlane.lookAt(e),void 0===this.color?(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)):(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)),this.targetLine.lookAt(e),this.targetLine.scale.z=e.length()}}(),(mr.prototype=Object.create(Fl.prototype)).constructor=mr,mr.prototype.update=function(){function a(r,n,o,a){d.set(n,o,a).unproject(i);var s=e[r];if(void 0!==s)for(var l=t.getAttribute("position"),c=0,p=s.length;c<p;c++)l.setXYZ(s[c],d.x,d.y,d.z)}var d=new nl,i=new pt,t,e;return function(){t=this.geometry,e=this.pointMap,i.projectionMatrix.copy(this.camera.projectionMatrix),a("c",0,0,-1),a("t",0,0,1),a("n1",-1,-1,-1),a("n2",1,-1,-1),a("n3",-1,1,-1),a("n4",1,1,-1),a("f1",-1,-1,1),a("f2",1,-1,1),a("f3",-1,1,1),a("f4",1,1,1),a("u1",.7,1.1,-1),a("u2",-.7,1.1,-1),a("u3",0,2,-1),a("cf1",-1,0,1),a("cf2",1,0,1),a("cf3",0,-1,1),a("cf4",0,1,1),a("cn1",-1,0,-1),a("cn2",1,0,-1),a("cn3",0,-1,-1),a("cn4",0,1,-1),t.getAttribute("position").needsUpdate=!0}}(),_r.prototype=Object.create(Fl.prototype),_r.prototype.constructor=_r,_r.prototype.update=function(){var a=new hl;return function(t){if(void 0!==t&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&a.setFromObject(this.object),!a.isEmpty()){var e=a.min,n=a.max,i=this.geometry.attributes.position,r=i.array;r[0]=n.x,r[1]=n.y,r[2]=n.z,r[3]=e.x,r[4]=n.y,r[5]=n.z,r[6]=e.x,r[7]=e.y,r[8]=n.z,r[9]=n.x,r[10]=e.y,r[11]=n.z,r[12]=n.x,r[13]=n.y,r[14]=e.z,r[15]=e.x,r[16]=n.y,r[17]=e.z,r[18]=e.x,r[19]=e.y,r[20]=e.z,r[21]=n.x,r[22]=e.y,r[23]=e.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}(),_r.prototype.setFromObject=function(e){return this.object=e,this.update(),this},(gr.prototype=Object.create(Fl.prototype)).constructor=gr,gr.prototype.onBeforeRender=function(){var e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5))},(yr.prototype=Object.create(Dl.prototype)).constructor=yr,yr.prototype.onBeforeRender=function(){var e=-this.plane.constant;1e-8>N(e)&&(e=1e-8),this.scale.set(.5*this.size,.5*this.size,e),this.lookAt(this.plane.normal),this.updateMatrixWorld()};var ss,cs;(vr.prototype=Object.create(ut.prototype)).constructor=vr,vr.prototype.setDirection=function(){var a=new nl,e;return function(t){.99999<t.y?this.quaternion.set(0,0,0,1):-.99999>t.y?this.quaternion.set(1,0,0,0):(a.set(t.z,0,-t.x).normalize(),e=wc(t.y),this.quaternion.setFromAxisAngle(a,e))}}(),vr.prototype.setLength=function(a,t,e){void 0===t&&(t=.2*a),void 0===e&&(e=.2*t),this.line.scale.set(1,C(0,a-t),1),this.line.updateMatrix(),this.cone.scale.set(e,t,e),this.cone.position.y=a,this.cone.updateMatrix()},vr.prototype.setColor=function(e){this.line.material.color.copy(e),this.cone.material.color.copy(e)},(br.prototype=Object.create(Fl.prototype)).constructor=br;var hs=new nl,us=new wr,ps=new wr,ds=new wr;xr.prototype=Object.create(Pi.prototype),xr.prototype.constructor=xr,xr.prototype.getPoint=function(_){var t=this.points,e=t.length,n=(e-(this.closed?0:1))*_,i=B(n),r=n-i;this.closed?i+=0<i?0:(B(N(i)/t.length)+1)*t.length:0===r&&i===e-1&&(i=e-2,r=1);var o,a,s,l;if(this.closed||0<i?o=t[(i-1)%e]:(hs.subVectors(t[0],t[1]).add(t[0]),o=hs),a=t[i%e],s=t[(i+1)%e],this.closed||i+2<e?l=t[(i+2)%e]:(hs.subVectors(t[e-1],t[e-2]).add(t[e-1]),l=hs),void 0===this.type||"centripetal"===this.type||"chordal"===this.type){var c="chordal"===this.type?.5:.25,u=S(o.distanceToSquared(a),c),p=S(a.distanceToSquared(s),c),d=S(s.distanceToSquared(l),c);1e-4>p&&(p=1),1e-4>u&&(u=p),1e-4>d&&(d=p),us.initNonuniformCatmullRom(o.x,a.x,s.x,l.x,u,p,d),ps.initNonuniformCatmullRom(o.y,a.y,s.y,l.y,u,p,d),ds.initNonuniformCatmullRom(o.z,a.z,s.z,l.z,u,p,d)}else if("catmullrom"===this.type){var h=void 0===this.tension?.5:this.tension;us.initCatmullRom(o.x,a.x,s.x,l.x,h),ps.initCatmullRom(o.y,a.y,s.y,l.y,h),ds.initCatmullRom(o.z,a.z,s.z,l.z,h)}return new nl(us.calc(r),ps.calc(r),ds.calc(r))},(Sr.prototype=Object.create(Pi.prototype)).constructor=Sr,Sr.prototype.getPoint=function(a){var t=this.v0,e=this.v1,o=this.v2,n=this.v3;return new nl(Ai(a,t.x,e.x,o.x,n.x),Ai(a,t.y,e.y,o.y,n.y),Ai(a,t.z,e.z,o.z,n.z))},(Er.prototype=Object.create(Pi.prototype)).constructor=Er,Er.prototype.getPoint=function(a){var t=this.v0,e=this.v1,o=this.v2;return new nl(xi(a,t.x,e.x,o.x),xi(a,t.y,e.y,o.y),xi(a,t.z,e.z,o.z))},(Mr.prototype=Object.create(Pi.prototype)).constructor=Mr,Mr.prototype.getPoint=function(a){if(1===a)return this.v2.clone();var t=new nl;return t.subVectors(this.v2,this.v1),t.multiplyScalar(a),t.add(this.v1),t},(Tr.prototype=Object.create(mc.prototype)).constructor=Tr,Pi.create=function(a,t){return console.log("THREE.Curve.create() has been deprecated"),a.prototype=Object.create(Pi.prototype),a.prototype.constructor=a,a.prototype.getPoint=t,a},function(e){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),xr.call(this,e),this.type="catmullrom",this.closed=!0}.prototype=Object.create(xr.prototype),function(e){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),xr.call(this,e),this.type="catmullrom"}.prototype=Object.create(xr.prototype),Ar.prototype=Object.create(xr.prototype),Object.assign(Ar.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),ur.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},sr.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(Y.prototype,{center:function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(hl.prototype,{center:function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}}),Ut.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},rd.random16=function(){return console.warn("THREE.Math.random16() has been deprecated. Use Math.random() instead."),Math.random()},Object.assign(rt.prototype,{flattenToArrayOffset:function(a,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(a,t)},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(il.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},flattenToArrayOffset:function(a,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(a,t)},getPosition:function(){var e;return function(){return void 0===e&&(e=new nl),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),e.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(a,t,e,n,i,r){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(a,t,n,e,i,r)}}),ot.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},rl.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},Object.assign(wl.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}}),Object.assign(Fi.prototype,{extrude:function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new bs(this,e)},makeGeometry:function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new As(this,e)}}),Object.assign(el.prototype,{fromAttribute:function(a,t,e){return console.error("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(a,t,e)}}),Object.assign(nl.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(a,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,a)},applyProjection:function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},fromAttribute:function(a,t,e){return console.error("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(a,t,e)}}),Object.assign(al.prototype,{fromAttribute:function(a,t,e){return console.error("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(a,t,e)}}),gt.prototype.computeTangents=function(){console.warn("THREE.Geometry: .computeTangents() has been removed.")},Object.assign(ut.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(a,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,a)}}),Object.defineProperties(ut.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(Al.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(Ll.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),Object.defineProperty(Pi.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(e){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=e}}),fl.prototype.setLens=function(a,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(a)},Object.defineProperties(Vn.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(yt.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}}}),Object.assign(bl.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addDrawCall:function(a,t,e){void 0!==e&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(a,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(bl.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(Zi.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(K.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new X}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=e===THREE.FlatShading}}}),Object.defineProperties(Hs.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(Q.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),Object.assign(Se.prototype,{getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")}}),Object.defineProperties(Se.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){return this.shadowMap.cullFace},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace."),this.shadowMap.cullFace=e}}}),Object.defineProperties(st.prototype,{cullFace:{get:function(){return this.renderReverseSided?Lr:Cr},set:function(a){var t=a!==Cr;console.warn("WebGLRenderer: .shadowMap.cullFace is deprecated. Set .shadowMap.renderReverseSided to "+t+"."),this.renderReverseSided=t}}}),Object.defineProperties(a.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),hc.prototype.load=function(a){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var o=this;return new Bi().load(a,function(e){o.setBuffer(e)}),this},fc.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},zi.prototype.updateCubeMap=function(a,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(a,t)}},function(e){var t=function(){return this}();try{t=t||Function("return this")()||(0,eval)("this")}catch(e){"object"==("undefined"===typeof window?"undefined":babelHelpers.typeof(window))&&(t=window)}e.exports=t},function(a,n){"use strict";var e="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;n.assign=function(a){for(var t=Array.prototype.slice.call(arguments,1),e;t.length;)if(e=t.shift(),e){if("object"!=("undefined"===typeof e?"undefined":babelHelpers.typeof(e)))throw new TypeError(e+"must be non-object");for(var o in e)e.hasOwnProperty(o)&&(a[o]=e[o])}return a},n.shrinkBuf=function(a,t){return a.length===t?a:a.subarray?a.subarray(0,t):(a.length=t,a)};var i={arraySet:function(a,t,e,n,i){if(t.subarray&&a.subarray)a.set(t.subarray(e,e+n),i);else for(var r=0;r<n;r++)a[i+r]=t[e+r]},flattenChunks:function(l){var t,e,n,i,r,o;for(n=0,t=0,e=l.length;t<e;t++)n+=l[t].length;for(o=new Uint8Array(n),i=0,t=0,e=l.length;t<e;t++)r=l[t],o.set(r,i),i+=r.length;return o}},r={arraySet:function(a,t,e,n,i){for(var r=0;r<n;r++)a[i+r]=t[e+r]},flattenChunks:function(e){return[].concat.apply([],e)}};n.setTyped=function(e){e?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,i)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,r))},n.setTyped(e)},function(c,t,e){"use strict";function n(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}var i=e(15),d=e(0),o="function"==typeof Symbol&&"symbol"==babelHelpers.typeof(Symbol.iterator)?function(e){return"undefined"===typeof e?"undefined":babelHelpers.typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":"undefined"===typeof e?"undefined":babelHelpers.typeof(e)},a=e(88),r=function(){function e(){n(this,e)}return e.bbox=function(a,t){return i.a.vector3(a)&&i.a.vector3(t)?0<=t.x&&0<=t.y&&0<=t.z?{min:a.clone().sub(t),max:a.clone().add(t)}:(window.console.log("halfDimensions must be >= 0."),window.console.log(t),!1):(window.console.log("Invalid center or plane halfDimensions."),!1)},e.minMax=function(){for(var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=[65535,-32768],e=a.length,o=0,n;o<e;o++)n=a[o],t[0]=U(t[0],n),t[1]=C(t[1],n);return t},e.isElement=function(e){try{return e instanceof HTMLElement}catch(t){return"object"===(void 0===e?"undefined":o(e))&&1===e.nodeType&&"object"===o(e.style)&&"object"===o(e.ownerDocument)}},e.isString=function(e){return"string"==typeof e||e instanceof String},e.parseUrl=function(o){var t={filename:"",extension:"",pathname:"",query:""},e=a.parse(o);return t.pathname=e.pathname,t.query=e.query,t.query&&(t.filename=t.query.split("&").reduce(function(a,t){var e=t.split("=");return 0<e.length&&"filename"==e[0]&&(a=e[1]),a})),t.filename||(t.filename=t.pathname.split("/").pop()),t.extension=1>=t.filename.split(".").length?"dicom":t.filename.split(".").pop(),isNaN(t.extension)||(t.extension="dicom"),t.query&&t.query.includes("contentType=application%2Fdicom")&&(t.extension="dicom"),t},e.ijk2LPS=function(o,t,e,n,i){var r=5<arguments.length&&void 0!==arguments[5]?arguments[5]:new d.c,a=new d.c;return a.set(o.x*n.y,t.x*n.x,e.x*n.z,i.x,o.y*n.y,t.y*n.x,e.y*n.z,i.y,o.z*n.y,t.z*n.x,e.z*n.z,i.z,0,0,0,1),a.premultiply(r),a},e.aabb2LPS=function(a,t,e,o){var n=new d.c;return n.set(a.x,t.x,e.x,o.x,a.y,t.y,e.y,o.y,a.z,t.z,e.z,o.z,0,0,0,1),n},e.worldToData=function(a,t){var e=new d.f().copy(t).applyMatrix4(a);return e.addScalar(.5).floor(),e},e.value=function(a,t){window.console.warn("value is deprecated, please use getPixelData instead"),this.getPixelData(a,t)},e.getPixelData=function(a,t){return 0<=t.z&&t.z<a._frame.length?a._frame[t.z].getPixelData(t.x,t.y):null},e.setPixelData=function(a,t,e){return 0<=t.z&&t.z<a._frame.length?void a._frame[t.z].setPixelData(t.x,t.y,e):null},e.rescaleSlopeIntercept=function(a,t,e){return a*t+e},e}();t.a=r},function(e){function g(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function i(e){if(c===setTimeout)return setTimeout(e,0);if((c===g||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function r(e){if(p===clearTimeout)return clearTimeout(e);if((p===n||!p)&&clearTimeout)return p=clearTimeout,clearTimeout(e);try{return p(e)}catch(t){try{return p.call(null,e)}catch(t){return p.call(this,e)}}}function o(){f&&_&&(f=!1,_.length?y=_.concat(y):b=-1,y.length&&a())}function a(){if(!f){var a=i(o);f=!0;for(var t=y.length;t;){for(_=y,y=[];++b<t;)_&&_[b].run();b=-1,t=y.length}_=null,f=!1,r(a)}}function s(a,t){this.fun=a,this.array=t}function t(){}var l=e.exports={},c,p;!function(){try{c="function"==typeof setTimeout?setTimeout:g}catch(e){c=g}try{p="function"==typeof clearTimeout?clearTimeout:n}catch(e){p=n}}();var y=[],f=!1,b=-1,_;l.nextTick=function(o){var t=Array(arguments.length-1);if(1<arguments.length)for(var e=1;e<arguments.length;e++)t[e-1]=arguments[e];y.push(new s(o,t)),1!==y.length||f||i(a)},s.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=t,l.addListener=t,l.once=t,l.off=t,l.removeListener=t,l.removeAllListeners=t,l.emit=t,l.prependListener=t,l.prependOnceListener=t,l.listeners=function(){return[]},l.binding=function(){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},function(a,ee,e){"use strict";(function(n){function te(){return oe.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function ae(a,t){if(te()<t)throw new RangeError("Invalid typed array length");return oe.TYPED_ARRAY_SUPPORT?(a=new Uint8Array(t)).__proto__=oe.prototype:(null===a&&(a=new oe(t)),a.length=t),a}function oe(a,r,l){if(!(oe.TYPED_ARRAY_SUPPORT||this instanceof oe))return new oe(a,r,l);if("number"==typeof a){if("string"==typeof r)throw new Error("If encoding is specified then the first argument must be a string");return i(this,a)}return o(this,a,r,l)}function o(a,t,o,r){if("number"==typeof t)throw new TypeError("\"value\" argument must not be a number");return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?c(a,t,o,r):"string"==typeof t?l(a,t,o):p(a,t)}function a(e){if("number"!=typeof e)throw new TypeError("\"size\" argument must be a number");if(0>e)throw new RangeError("\"size\" argument must not be negative")}function r(o,t,e,r){return a(t),0>=t?ae(o,t):void 0===e?ae(o,t):"string"==typeof r?ae(o,t).fill(e,r):ae(o,t).fill(e)}function i(o,t){if(a(t),o=ae(o,0>t?0:0|d(t)),!oe.TYPED_ARRAY_SUPPORT)for(var e=0;e<t;++e)o[e]=0;return o}function l(o,t,e){if("string"==typeof e&&""!==e||(e="utf8"),!oe.isEncoding(e))throw new TypeError("\"encoding\" must be a valid string encoding");var r=0|u(t,e),i=(o=ae(o,r)).write(t,e);return i!==r&&(o=o.slice(0,i)),o}function s(a,t){var e=0>t.length?0:0|d(t.length);a=ae(a,e);for(var o=0;o<e;o+=1)a[o]=255&t[o];return a}function c(a,t,e,o){if(t.byteLength,0>e||t.byteLength<e)throw new RangeError("'offset' is out of bounds");if(t.byteLength<e+(o||0))throw new RangeError("'length' is out of bounds");return t=void 0===e&&void 0===o?new Uint8Array(t):void 0===o?new Uint8Array(t,e):new Uint8Array(t,e,o),oe.TYPED_ARRAY_SUPPORT?(a=t).__proto__=oe.prototype:a=s(a,t),a}function p(a,t){if(oe.isBuffer(t)){var e=0|d(t.length);return 0===(a=ae(a,e)).length?a:(t.copy(a,0,0,e),a)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||X(t.length)?ae(a,0):s(a,t);if("Buffer"===t.type&&J(t.data))return s(a,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function d(e){if(e>=te())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+te().toString(16)+" bytes");return 0|e}function u(a,o){if(oe.isBuffer(a))return a.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(a)||a instanceof ArrayBuffer))return a.byteLength;"string"!=typeof a&&(a=""+a);var e=a.length;if(0===e)return 0;for(var r=!1;;)switch(o){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":case void 0:return j(a).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*e;case"hex":return e>>>1;case"base64":return W(a).length;default:if(r)return j(a).length;o=(""+o).toLowerCase(),r=!0;}}function m(a,t,e){var o=!1;if((void 0===t||0>t)&&(t=0),t>this.length)return"";if((void 0===e||e>this.length)&&(e=this.length),0>=e)return"";if(e>>>=0,t>>>=0,e<=t)return"";for(a||(a="utf8");;)switch(a){case"hex":return C(this,t,e);case"utf8":case"utf-8":return T(this,t,e);case"ascii":return P(this,t,e);case"latin1":case"binary":return A(this,t,e);case"base64":return E(this,t,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,t,e);default:if(o)throw new TypeError("Unknown encoding: "+a);a=(a+"").toLowerCase(),o=!0;}}function _(a,t,e){var o=a[t];a[t]=a[e],a[e]=o}function h(a,t,o,l,i){if(0===a.length)return-1;if("string"==typeof o?(l=o,o=0):2147483647<o?o=2147483647:-2147483648>o&&(o=-2147483648),o=+o,isNaN(o)&&(o=i?0:a.length-1),0>o&&(o=a.length+o),o>=a.length){if(i)return-1;o=a.length-1}else if(0>o){if(!i)return-1;o=0}if("string"==typeof t&&(t=oe.from(t,l)),oe.isBuffer(t))return 0===t.length?-1:g(a,t,o,l,i);if("number"==typeof t)return t&=255,oe.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(a,t,o):Uint8Array.prototype.lastIndexOf.call(a,t,o):g(a,[t],o,l,i);throw new TypeError("val must be string, number or Buffer")}function g(d,t,e,n,i){function r(a,t){return 1===o?a[t]:a.readUInt16BE(t*o)}var o=1,a=d.length,s=t.length;if(void 0!==n&&("ucs2"===(n=(n+"").toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(2>d.length||2>t.length)return-1;o=2,a/=2,s/=2,e/=2}var l;if(i){var c=-1;for(l=e;l<a;l++)if(!(r(d,l)===r(t,-1===c?0:l-c)))-1!==c&&(l-=l-c),c=-1;else if(-1===c&&(c=l),l-c+1===s)return c*o}else for(e+s>a&&(e=a-s),l=e;0<=l;l--){for(var m=!0,u=0;u<s;u++)if(r(d,l+u)!==r(t,u)){m=!1;break}if(m)return l}return-1}function f(l,t,e,c){e=+e||0;var d=l.length-e;c?(c=+c)>d&&(c=d):c=d;var r=t.length;if(0!=r%2)throw new TypeError("Invalid hex string");c>r/2&&(c=r/2);for(var o=0,a;o<c;++o){if(a=parseInt(t.substr(2*o,2),16),isNaN(a))return o;l[e+o]=a}return o}function y(a,t,e,o){return q(j(t,a.length-e),a,e,o)}function b(a,t,e,o){return q(H(t),a,e,o)}function x(a,t,e,o){return b(a,t,e,o)}function v(a,t,e,o){return q(W(t),a,e,o)}function w(a,t,e,o){return q(V(t,a.length-e),a,e,o)}function E(a,t,e){return 0===t&&e===a.length?Y.fromByteArray(a):Y.fromByteArray(a.slice(t,e))}function T(d,t,e){e=U(d.length,e);for(var n=[],i=t;i<e;){var r=d[i],o=null,a=239<r?4:223<r?3:191<r?2:1;if(i+a<=e){var s,l,c,p;1===a?128>r&&(o=r):2===a?128==(192&(s=d[i+1]))&&127<(p=(31&r)<<6|63&s)&&(o=p):3===a?(s=d[i+1],l=d[i+2],128==(192&s)&&128==(192&l)&&2047<(p=(15&r)<<12|(63&s)<<6|63&l)&&(55296>p||57343<p)&&(o=p)):4===a?(s=d[i+1],l=d[i+2],c=d[i+3],128==(192&s)&&128==(192&l)&&128==(192&c)&&65535<(p=(15&r)<<18|(63&s)<<12|(63&l)<<6|63&c)&&1114112>p&&(o=p)):void 0}null===o?(o=65533,a=1):65535<o&&(o-=65536,n.push(55296|1023&o>>>10),o=56320|1023&o),n.push(o),i+=a}return M(n)}function M(a){var t=a.length;if(t<=K)return F.apply(String,a);for(var e="",o=0;o<t;)e+=F.apply(String,a.slice(o,o+=K));return e}function P(a,t,e){var o="";e=U(a.length,e);for(var n=t;n<e;++n)o+=F(127&a[n]);return o}function A(a,t,e){var o="";e=U(a.length,e);for(var n=t;n<e;++n)o+=F(a[n]);return o}function C(a,t,l){var s=a.length;(!t||0>t)&&(t=0),(!l||0>l||l>s)&&(l=s);for(var i="",r=t;r<l;++r)i+=G(a[r]);return i}function L(a,t,e){for(var n=a.slice(t,e),i="",r=0;r<n.length;r+=2)i+=F(n[r]+256*n[r+1]);return i}function I(a,t,e){if(0!=a%1||0>a)throw new RangeError("offset is not uint");if(a+t>e)throw new RangeError("Trying to access beyond buffer length")}function R(o,t,e,n,i,r){if(!oe.isBuffer(o))throw new TypeError("\"buffer\" argument must be a Buffer instance");if(t>i||t<r)throw new RangeError("\"value\" argument is out of bounds");if(e+n>o.length)throw new RangeError("Index out of range")}function D(a,t,e,n){0>t&&(t=65535+t+1);for(var i=0,r=U(a.length-e,2);i<r;++i)a[e+i]=(t&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function k(a,t,e,n){0>t&&(t=4294967295+t+1);for(var i=0,r=U(a.length-e,4);i<r;++i)a[e+i]=255&t>>>8*(n?i:3-i)}function O(a,t,e,o){if(e+o>a.length)throw new RangeError("Index out of range");if(0>e)throw new RangeError("Index out of range")}function re(a,t,e,o,n){return n||O(a,t,e,4,3.4028234663852886e38,-3.4028234663852886e38),Z.write(a,t,e,o,23,4),e+4}function N(a,t,e,o,n){return n||O(a,t,e,8,1.7976931348623157e308,-1.7976931348623157e308),Z.write(a,t,e,o,52,8),e+8}function ne(e){if(2>(e=z(e).replace(Q,"")).length)return"";for(;0!=e.length%4;)e+="=";return e}function z(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function G(e){return 16>e?"0"+e.toString(16):e.toString(16)}function j(l,t){t=t||1/0;for(var e=l.length,i=null,s=[],o=0,a;o<e;++o){if(55295<(a=l.charCodeAt(o))&&57344>a){if(!i){if(56319<a){-1<(t-=3)&&s.push(239,191,189);continue}if(o+1===e){-1<(t-=3)&&s.push(239,191,189);continue}i=a;continue}if(56320>a){-1<(t-=3)&&s.push(239,191,189),i=a;continue}a=65536+(i-55296<<10|a-56320)}else i&&-1<(t-=3)&&s.push(239,191,189);if(i=null,128>a){if(0>(t-=1))break;s.push(a)}else if(2048>a){if(0>(t-=2))break;s.push(192|a>>6,128|63&a)}else if(65536>a){if(0>(t-=3))break;s.push(224|a>>12,128|63&a>>6,128|63&a)}else{if(!(1114112>a))throw new Error("Invalid code point");if(0>(t-=4))break;s.push(240|a>>18,128|63&a>>12,128|63&a>>6,128|63&a)}}return s}function H(a){for(var t=[],e=0;e<a.length;++e)t.push(255&a.charCodeAt(e));return t}function V(l,t){for(var e=[],o=0,a,n,i;o<l.length&&!(0>(t-=2));++o)n=(a=l.charCodeAt(o))>>8,i=a%256,e.push(i),e.push(n);return e}function W(e){return Y.toByteArray(ne(e))}function q(a,t,e,o){for(var n=0;n<o&&!(n+e>=t.length||n>=a.length);++n)t[n+e]=a[n];return n}function X(e){return e!==e}var Y=e(133),Z=e(134),J=e(135);ee.Buffer=oe,ee.SlowBuffer=function(e){return+e!=e&&(e=0),oe.alloc(+e)},ee.INSPECT_MAX_BYTES=50,oe.TYPED_ARRAY_SUPPORT=void 0===n.TYPED_ARRAY_SUPPORT?function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}():n.TYPED_ARRAY_SUPPORT,ee.kMaxLength=te(),oe.poolSize=8192,oe._augment=function(e){return e.__proto__=oe.prototype,e},oe.from=function(a,t,e){return o(null,a,t,e)},oe.TYPED_ARRAY_SUPPORT&&(oe.prototype.__proto__=Uint8Array.prototype,oe.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&oe[Symbol.species]===oe&&Object.defineProperty(oe,Symbol.species,{value:null,configurable:!0})),oe.alloc=function(a,t,e){return r(null,a,t,e)},oe.allocUnsafe=function(e){return i(null,e)},oe.allocUnsafeSlow=function(e){return i(null,e)},oe.isBuffer=function(e){return null!=e&&e._isBuffer},oe.compare=function(o,t){if(!oe.isBuffer(o)||!oe.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(o===t)return 0;for(var e=o.length,n=t.length,i=0,r=U(e,n);i<r;++i)if(o[i]!==t[i]){e=o[i],n=t[i];break}return e<n?-1:n<e?1:0},oe.isEncoding=function(e){switch((e+"").toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1;}},oe.concat=function(o,t){if(!J(o))throw new TypeError("\"list\" argument must be an Array of Buffers");if(0===o.length)return oe.alloc(0);var e;if(void 0===t)for(t=0,e=0;e<o.length;++e)t+=o[e].length;var n=oe.allocUnsafe(t),i=0;for(e=0;e<o.length;++e){var r=o[e];if(!oe.isBuffer(r))throw new TypeError("\"list\" argument must be an Array of Buffers");r.copy(n,i),i+=r.length}return n},oe.byteLength=u,oe.prototype._isBuffer=!0,oe.prototype.swap16=function(){var a=this.length;if(0!=a%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<a;t+=2)_(this,t,t+1);return this},oe.prototype.swap32=function(){var a=this.length;if(0!=a%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<a;t+=4)_(this,t,t+3),_(this,t+1,t+2);return this},oe.prototype.swap64=function(){var a=this.length;if(0!=a%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<a;t+=8)_(this,t,t+7),_(this,t+1,t+6),_(this,t+2,t+5),_(this,t+3,t+4);return this},oe.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?T(this,0,e):m.apply(this,arguments)},oe.prototype.equals=function(e){if(!oe.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===oe.compare(this,e)},oe.prototype.inspect=function(){var e="",t=ee.INSPECT_MAX_BYTES;return 0<this.length&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},oe.prototype.compare=function(o,t,e,n,i){if(!oe.isBuffer(o))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===e&&(e=o?o.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),0>t||e>o.length||0>n||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=e)return 0;if(n>=i)return-1;if(t>=e)return 1;if(t>>>=0,e>>>=0,n>>>=0,i>>>=0,this===o)return 0;for(var r=i-n,a=e-t,s=U(r,a),l=this.slice(n,i),c=o.slice(t,e),d=0;d<s;++d)if(l[d]!==c[d]){r=l[d],a=c[d];break}return r<a?-1:a<r?1:0},oe.prototype.includes=function(a,t,e){return-1!==this.indexOf(a,t,e)},oe.prototype.indexOf=function(a,t,e){return h(this,a,t,e,!0)},oe.prototype.lastIndexOf=function(a,t,e){return h(this,a,t,e,!1)},oe.prototype.write=function(a,t,l,n){if(void 0===t)n="utf8",l=this.length,t=0;else if(void 0===l&&"string"==typeof t)n=t,l=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(l)?(l|=0,void 0===n&&(n="utf8")):(n=l,l=void 0)}var i=this.length-t;if((void 0===l||l>i)&&(l=i),0<a.length&&(0>l||0>t)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var r=!1;;)switch(n){case"hex":return f(this,a,t,l);case"utf8":case"utf-8":return y(this,a,t,l);case"ascii":return b(this,a,t,l);case"latin1":case"binary":return x(this,a,t,l);case"base64":return v(this,a,t,l);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return w(this,a,t,l);default:if(r)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),r=!0;}},oe.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var K=4096;oe.prototype.slice=function(o,l){var s=this.length;o=~~o,l=void 0===l?s:~~l,0>o?0>(o+=s)&&(o=0):o>s&&(o=s),0>l?0>(l+=s)&&(l=0):l>s&&(l=s),l<o&&(l=o);var n;if(oe.TYPED_ARRAY_SUPPORT)(n=this.subarray(o,l)).__proto__=oe.prototype;else{var i=l-o;n=new oe(i,void 0);for(var r=0;r<i;++r)n[r]=this[r+o]}return n},oe.prototype.readUIntLE=function(a,t,e){a|=0,t|=0,e||I(a,t,this.length);for(var n=this[a],i=1,r=0;++r<t&&(i*=256);)n+=this[a+r]*i;return n},oe.prototype.readUIntBE=function(a,t,e){a|=0,t|=0,e||I(a,t,this.length);for(var o=this[a+--t],n=1;0<t&&(n*=256);)o+=this[a+--t]*n;return o},oe.prototype.readUInt8=function(a,t){return t||I(a,1,this.length),this[a]},oe.prototype.readUInt16LE=function(a,t){return t||I(a,2,this.length),this[a]|this[a+1]<<8},oe.prototype.readUInt16BE=function(a,t){return t||I(a,2,this.length),this[a]<<8|this[a+1]},oe.prototype.readUInt32LE=function(a,t){return t||I(a,4,this.length),(this[a]|this[a+1]<<8|this[a+2]<<16)+16777216*this[a+3]},oe.prototype.readUInt32BE=function(a,t){return t||I(a,4,this.length),16777216*this[a]+(this[a+1]<<16|this[a+2]<<8|this[a+3])},oe.prototype.readIntLE=function(a,t,e){a|=0,t|=0,e||I(a,t,this.length);for(var n=this[a],i=1,r=0;++r<t&&(i*=256);)n+=this[a+r]*i;return i*=128,n>=i&&(n-=S(2,8*t)),n},oe.prototype.readIntBE=function(a,t,e){a|=0,t|=0,e||I(a,t,this.length);for(var n=t,i=1,r=this[a+--n];0<n&&(i*=256);)r+=this[a+--n]*i;return i*=128,r>=i&&(r-=S(2,8*t)),r},oe.prototype.readInt8=function(a,t){return t||I(a,1,this.length),128&this[a]?-1*(255-this[a]+1):this[a]},oe.prototype.readInt16LE=function(a,t){t||I(a,2,this.length);var e=this[a]|this[a+1]<<8;return 32768&e?4294901760|e:e},oe.prototype.readInt16BE=function(a,t){t||I(a,2,this.length);var e=this[a+1]|this[a]<<8;return 32768&e?4294901760|e:e},oe.prototype.readInt32LE=function(a,t){return t||I(a,4,this.length),this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24},oe.prototype.readInt32BE=function(a,t){return t||I(a,4,this.length),this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]},oe.prototype.readFloatLE=function(a,t){return t||I(a,4,this.length),Z.read(this,a,!0,23,4)},oe.prototype.readFloatBE=function(a,t){return t||I(a,4,this.length),Z.read(this,a,!1,23,4)},oe.prototype.readDoubleLE=function(a,t){return t||I(a,8,this.length),Z.read(this,a,!0,52,8)},oe.prototype.readDoubleBE=function(a,t){return t||I(a,8,this.length),Z.read(this,a,!1,52,8)},oe.prototype.writeUIntLE=function(a,l,e,n){a=+a,l|=0,e|=0,n||R(this,a,l,e,S(2,8*e)-1,0);var i=1,r=0;for(this[l]=255&a;++r<e&&(i*=256);)this[l+r]=255&a/i;return l+e},oe.prototype.writeUIntBE=function(a,l,e,n){a=+a,l|=0,e|=0,n||R(this,a,l,e,S(2,8*e)-1,0);var i=e-1,r=1;for(this[l+i]=255&a;0<=--i&&(r*=256);)this[l+i]=255&a/r;return l+e},oe.prototype.writeUInt8=function(a,o,e){return a=+a,o|=0,e||R(this,a,o,1,255,0),oe.TYPED_ARRAY_SUPPORT||(a=B(a)),this[o]=255&a,o+1},oe.prototype.writeUInt16LE=function(a,o,e){return a=+a,o|=0,e||R(this,a,o,2,65535,0),oe.TYPED_ARRAY_SUPPORT?(this[o]=255&a,this[o+1]=a>>>8):D(this,a,o,!0),o+2},oe.prototype.writeUInt16BE=function(a,o,e){return a=+a,o|=0,e||R(this,a,o,2,65535,0),oe.TYPED_ARRAY_SUPPORT?(this[o]=a>>>8,this[o+1]=255&a):D(this,a,o,!1),o+2},oe.prototype.writeUInt32LE=function(a,o,e){return a=+a,o|=0,e||R(this,a,o,4,4294967295,0),oe.TYPED_ARRAY_SUPPORT?(this[o+3]=a>>>24,this[o+2]=a>>>16,this[o+1]=a>>>8,this[o]=255&a):k(this,a,o,!0),o+4},oe.prototype.writeUInt32BE=function(a,o,e){return a=+a,o|=0,e||R(this,a,o,4,4294967295,0),oe.TYPED_ARRAY_SUPPORT?(this[o]=a>>>24,this[o+1]=a>>>16,this[o+2]=a>>>8,this[o+3]=255&a):k(this,a,o,!1),o+4},oe.prototype.writeIntLE=function(l,c,e,n){if(l=+l,c|=0,!n){var d=S(2,8*e-1);R(this,l,c,e,d-1,-d)}var p=0,o=1,a=0;for(this[c]=255&l;++p<e&&(o*=256);)0>l&&0===a&&0!==this[c+p-1]&&(a=1),this[c+p]=255&(l/o>>0)-a;return c+e},oe.prototype.writeIntBE=function(l,c,e,n){if(l=+l,c|=0,!n){var d=S(2,8*e-1);R(this,l,c,e,d-1,-d)}var p=e-1,o=1,a=0;for(this[c+p]=255&l;0<=--p&&(o*=256);)0>l&&0===a&&0!==this[c+p+1]&&(a=1),this[c+p]=255&(l/o>>0)-a;return c+e},oe.prototype.writeInt8=function(a,o,e){return a=+a,o|=0,e||R(this,a,o,1,127,-128),oe.TYPED_ARRAY_SUPPORT||(a=B(a)),0>a&&(a=255+a+1),this[o]=255&a,o+1},oe.prototype.writeInt16LE=function(a,o,e){return a=+a,o|=0,e||R(this,a,o,2,32767,-32768),oe.TYPED_ARRAY_SUPPORT?(this[o]=255&a,this[o+1]=a>>>8):D(this,a,o,!0),o+2},oe.prototype.writeInt16BE=function(a,o,e){return a=+a,o|=0,e||R(this,a,o,2,32767,-32768),oe.TYPED_ARRAY_SUPPORT?(this[o]=a>>>8,this[o+1]=255&a):D(this,a,o,!1),o+2},oe.prototype.writeInt32LE=function(a,o,e){return a=+a,o|=0,e||R(this,a,o,4,2147483647,-2147483648),oe.TYPED_ARRAY_SUPPORT?(this[o]=255&a,this[o+1]=a>>>8,this[o+2]=a>>>16,this[o+3]=a>>>24):k(this,a,o,!0),o+4},oe.prototype.writeInt32BE=function(a,o,e){return a=+a,o|=0,e||R(this,a,o,4,2147483647,-2147483648),0>a&&(a=4294967295+a+1),oe.TYPED_ARRAY_SUPPORT?(this[o]=a>>>24,this[o+1]=a>>>16,this[o+2]=a>>>8,this[o+3]=255&a):k(this,a,o,!1),o+4},oe.prototype.writeFloatLE=function(a,t,e){return re(this,a,t,!0,e)},oe.prototype.writeFloatBE=function(a,t,e){return re(this,a,t,!1,e)},oe.prototype.writeDoubleLE=function(a,t,e){return N(this,a,t,!0,e)},oe.prototype.writeDoubleBE=function(a,t,e){return N(this,a,t,!1,e)},oe.prototype.copy=function(o,t,e,n){if(e||(e=0),n||0===n||(n=this.length),t>=o.length&&(t=o.length),t||(t=0),0<n&&n<e&&(n=e),n===e)return 0;if(0===o.length||0===this.length)return 0;if(0>t)throw new RangeError("targetStart out of bounds");if(0>e||e>=this.length)throw new RangeError("sourceStart out of bounds");if(0>n)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),o.length-t<n-e&&(n=o.length-t+e);var i=n-e,a;if(this===o&&e<t&&t<n)for(a=i-1;0<=a;--a)o[a+t]=this[a+e];else if(1e3>i||!oe.TYPED_ARRAY_SUPPORT)for(a=0;a<i;++a)o[a+t]=this[a+e];else Uint8Array.prototype.set.call(o,this.subarray(e,e+i),t);return i},oe.prototype.fill=function(o,c,d,p){if("string"==typeof o){if("string"==typeof c?(p=c,c=0,d=this.length):"string"==typeof d&&(p=d,d=this.length),1===o.length){var u=o.charCodeAt(0);256>u&&(o=u)}if(void 0!==p&&"string"!=typeof p)throw new TypeError("encoding must be a string");if("string"==typeof p&&!oe.isEncoding(p))throw new TypeError("Unknown encoding: "+p)}else"number"==typeof o&&(o&=255);if(0>c||this.length<c||this.length<d)throw new RangeError("Out of range index");if(d<=c)return this;c>>>=0,d=void 0===d?this.length:d>>>0,o||(o=0);var r;if("number"==typeof o)for(r=c;r<d;++r)this[r]=o;else{var a=oe.isBuffer(o)?o:j(new oe(o,p).toString()),s=a.length;for(r=0;r<d-c;++r)this[r+c]=a[r%s]}return this};var Q=/[^+\/0-9A-Za-z-_]/g}).call(ee,e(1))},function(m,t,e){"use strict";function n(e){return this instanceof n?void(l.call(this,e),c.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",i)):new n(e)}function i(){this.allowHalfOpen||this._writableState.ended||o(r,this)}function r(e){e.end()}var o=e(16),a=Object.keys||function(a){var t=[];for(var e in a)t.push(e);return t};m.exports=n;var s=e(12);s.inherits=e(13);var l=e(62),c=e(65);s.inherits(n,l);for(var _=a(c.prototype),u=0,p;u<_.length;u++)p=_[u],n.prototype[p]||(n.prototype[p]=c.prototype[p]);Object.defineProperty(n.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),n.prototype._destroy=function(a,t){this.push(null),this.end(),o(t,a)}},function(e){"use strict";var a=a||{};a.lossless=a.lossless||{},a.lossless.DataStream=a.lossless.DataStream||function(a,t,e){this.buffer=new DataView(a,t,e),this.index=0},a.lossless.DataStream.prototype.get16=function(){var e=this.buffer.getUint16(this.index,!1);return this.index+=2,e},a.lossless.DataStream.prototype.get8=function(){var e=this.buffer.getUint8(this.index);return this.index+=1,e},"undefined"!==typeof e&&e.exports&&(e.exports=a.lossless.DataStream)},function(n,t){"use strict";function l(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function i(a,o){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o&&("object"==("undefined"===typeof o?"undefined":babelHelpers.typeof(o))||"function"==typeof o)?o:a}function r(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof o?"undefined":babelHelpers.typeof(o)));a.prototype=Object.create(o&&o.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(a,o):a.__proto__=o)}var o=function(){function a(a,o){for(var e=0,r;e<o.length;e++)r=o[e],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}return function(t,e,o){return e&&a(t.prototype,e),o&&a(t,o),t}}(),e=function(a){function t(e){l(this,t);var r=i(this,a.call(this));return r._enabled=!0,r._selected=!1,r._hovered=!1,r._active=!1,r._colors={default:"#00B0FF",active:"#FFEB3B",hover:"#F50057",select:"#76FF03"},r._color=r._colors.default,r._dragged=!1,r._displayed=!0,r._container=e,r}return r(t,a),t.prototype.initOffsets=function(){var c=this._container.getBoundingClientRect(),t=document.body,e=document.documentElement,n=window.pageYOffset||e.scrollTop||t.scrollTop,i=window.pageXOffset||e.scrollLeft||t.scrollLeft,r=e.clientTop||t.clientTop||0,o=e.clientLeft||t.clientLeft||0,a=c.top+n-r,s=c.left+i-o;this._offsets={top:P(a),left:P(s)}},t.prototype.offsetChanged=function(){this.initOffsets(),this.update()},t.prototype.getMouseOffsets=function(a,t){return{x:2*((a.clientX-this._offsets.left)/t.offsetWidth)-1,y:2*(-(a.clientY-this._offsets.top)/t.offsetHeight)+1,screenX:a.clientX-this._offsets.left,screenY:a.clientY-this._offsets.top}},t.prototype.update=function(){window.console.log("update() should be overloaded!")},t.prototype.free=function(){this._container=null},t.prototype.updateColor=function(){this._color=this._active?this._colors.active:this._hovered?this._colors.hover:this._selected?this._colors.select:this._colors.default},o(t,[{key:"enabled",get:function(){return this._enabled},set:function(e){this._enabled=e,this.update()}},{key:"selected",get:function(){return this._selected},set:function(e){this._selected=e,this.update()}},{key:"hovered",get:function(){return this._hovered},set:function(e){this._hovered=e,this.update()}},{key:"dragged",get:function(){return this._dragged},set:function(e){this._dragged=e,this.update()}},{key:"displayed",get:function(){return this._displayed},set:function(e){this._displayed=e,this.update()}},{key:"active",get:function(){return this._active},set:function(e){this._active=e,this.update()}},{key:"color",get:function(){return this._color},set:function(e){this._color=e,this.update()}}]),t}(THREE.Object3D);t.a=e},function(l,t,e){"use strict";function n(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}var _=e(3),r=e(15),g=e(0),a=function(){function e(){n(this,e)}return e.aabbPlane=function(a,t){var e=[];if(!this.validateAabb(a)||!this.validatePlane(t))return window.console.log("Invalid aabb or plane provided."),!1;var r=new g.c;r.getInverse(a.toAABB);var n=t.direction.clone().applyMatrix4(a.toAABB),o=new g.f(0,0,0).applyMatrix4(a.toAABB),i=this.posdir(t.position.clone().applyMatrix4(a.toAABB),new g.f(n.x-o.x,n.y-o.y,n.z-o.z).normalize()),l=_.a.bbox(a.center,a.halfDimensions),s=new g.f(new g.f(1,0,0),new g.f(0,1,0),new g.f(0,0,1)),c=this.posdir(new g.f(a.center.x-a.halfDimensions.x,a.center.y-a.halfDimensions.y,a.center.z-a.halfDimensions.z),s.x);this.rayPlaneInBBox(c,i,l,e),c.direction=s.y,this.rayPlaneInBBox(c,i,l,e),c.direction=s.z,this.rayPlaneInBBox(c,i,l,e);var u=this.posdir(new g.f(a.center.x+a.halfDimensions.x,a.center.y+a.halfDimensions.y,a.center.z+a.halfDimensions.z),s.x);this.rayPlaneInBBox(u,i,l,e),u.direction=s.y,this.rayPlaneInBBox(u,i,l,e),u.direction=s.z,this.rayPlaneInBBox(u,i,l,e);var p=this.posdir(new g.f(a.center.x+a.halfDimensions.x,a.center.y-a.halfDimensions.y,a.center.z-a.halfDimensions.z),s.y);this.rayPlaneInBBox(p,i,l,e),p.direction=s.z,this.rayPlaneInBBox(p,i,l,e);var d=this.posdir(new g.f(a.center.x-a.halfDimensions.x,a.center.y+a.halfDimensions.y,a.center.z-a.halfDimensions.z),s.x);this.rayPlaneInBBox(d,i,l,e),d.direction=s.z,this.rayPlaneInBBox(d,i,l,e);var h=this.posdir(new g.f(a.center.x-a.halfDimensions.x,a.center.y-a.halfDimensions.y,a.center.z+a.halfDimensions.z),s.x);return this.rayPlaneInBBox(h,i,l,e),h.direction=s.y,this.rayPlaneInBBox(h,i,l,e),e.map(function(e){return e.applyMatrix4(r)}),e},e.rayPlane=function(a,t){if(0!==a.direction.dot(t.direction)){var e=(t.direction.x*(t.position.x-a.position.x)+t.direction.y*(t.position.y-a.position.y)+t.direction.z*(t.position.z-a.position.z))/(t.direction.x*a.direction.x+t.direction.y*a.direction.y+t.direction.z*a.direction.z);return new g.f(a.position.x+e*a.direction.x,a.position.y+e*a.direction.y,a.position.z+e*a.direction.z)}return null},e.rayBox=function(a,t){var e=[],r=_.a.bbox(t.center,t.halfDimensions),n=this.posdir(new g.f(r.min.x,t.center.y,t.center.z),new g.f(-1,0,0));return this.rayPlaneInBBox(a,n,r,e),n=this.posdir(new g.f(r.max.x,t.center.y,t.center.z),new g.f(1,0,0)),this.rayPlaneInBBox(a,n,r,e),n=this.posdir(new g.f(t.center.x,r.min.y,t.center.z),new g.f(0,-1,0)),this.rayPlaneInBBox(a,n,r,e),n=this.posdir(new g.f(t.center.x,r.max.y,t.center.z),new g.f(0,1,0)),this.rayPlaneInBBox(a,n,r,e),n=this.posdir(new g.f(t.center.x,t.center.y,r.min.z),new g.f(0,0,-1)),this.rayPlaneInBBox(a,n,r,e),n=this.posdir(new g.f(t.center.x,t.center.y,r.max.z),new g.f(0,0,1)),this.rayPlaneInBBox(a,n,r,e),e},e.rayPlaneInBBox=function(a,t,e,o){var n=this.rayPlane(a,t);n&&this.inBBox(n,e)&&(o.find(this.findIntersection(n))||o.push(n))},e.findIntersection=function(a){return function(t){return a.x===t.x&&a.y===t.y&&a.z===t.z}},e.inBBox=function(a,t){return!!(a&&a.x>=t.min.x-1e-4&&a.y>=t.min.y-1e-4&&a.z>=t.min.z-1e-4&&a.x<=t.max.x+1e-4&&a.y<=t.max.y+1e-4&&a.z<=t.max.z+1e-4)},e.posdir=function(a,o){return{position:a,direction:o}},e.validatePlane=function(e){return null===e?(window.console.log("Invalid plane."),window.console.log(e),!1):r.a.vector3(e.position)?!!r.a.vector3(e.direction)||(window.console.log("Invalid plane.direction."),window.console.log(e.direction),!1):(window.console.log("Invalid plane.position."),window.console.log(e.position),!1)},e.validateAabb=function(e){return null===e?(window.console.log("Invalid aabb."),window.console.log(e),!1):r.a.matrix4(e.toAABB)?r.a.vector3(e.center)?!!(r.a.vector3(e.halfDimensions)&&0<=e.halfDimensions.x&&0<=e.halfDimensions.y&&0<=e.halfDimensions.z)||(window.console.log("Invalid aabb.halfDimensions."),window.console.log(e.halfDimensions),!1):(window.console.log("Invalid aabb.center."),window.console.log(e.center),!1):(window.console.log("Invalid aabb.toAABB: "),window.console.log(e.toAABB),!1)},e}();t.a=a},function(a,t){"use strict";function e(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function a(a,o){for(var e=0,r;e<o.length;e++)r=o[e],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}return function(t,e,o){return e&&a(t.prototype,e),o&&a(t,o),t}}(),r=function(){function a(){e(this,a),this._name="shadersBase",this._base={_functions:{},_uniforms:{}},this._definition=""}return n(a,[{key:"name",get:function(){return this._name},set:function(e){this._name=e}}]),a}();t.a=r},function(a,t){"use strict";function e(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function a(){e(this,a),this._rightHanded=!0}return a.prototype.pixelRepresentation=function(){return 0},a.prototype.modality=function(){return"unknown"},a.prototype.segmentationType=function(){return"unknown"},a.prototype.segmentationSegments=function(){return[]},a.prototype.referencedSegmentNumber=function(){return-1},a.prototype.rightHanded=function(){return this._rightHanded},a.prototype.spacingBetweenSlices=function(){return null},a.prototype.numberOfChannels=function(){return 1},a.prototype.sliceThickness=function(){return null},a.prototype.dimensionIndexValues=function(){return 0<arguments.length&&void 0!==arguments[0]&&arguments[0],null},a.prototype.instanceNumber=function(){return 0<arguments.length&&void 0!==arguments[0]?arguments[0]:0},a.prototype.windowCenter=function(){return 0<arguments.length&&void 0!==arguments[0]&&arguments[0],null},a.prototype.windowWidth=function(){return 0<arguments.length&&void 0!==arguments[0]&&arguments[0],null},a.prototype.rescaleSlope=function(){return 0<arguments.length&&void 0!==arguments[0]&&arguments[0],1},a.prototype.rescaleIntercept=function(){return 0<arguments.length&&void 0!==arguments[0]&&arguments[0],0},a.prototype._decompressUncompressed=function(){},a.prototype._swap16=function(e){return(255&e)<<8|255&e>>8},a.prototype._swap32=function(e){return(255&e)<<24|(65280&e)<<8|65280&e>>8|255&e>>24},a.prototype.invert=function(){return!1},a.prototype.transferSyntaxUID=function(){return"no value provided"},a.prototype.studyDate=function(){return"no value provided"},a.prototype.studyDescription=function(){return"no value provided"},a.prototype.seriesDate=function(){return"no value provided"},a.prototype.seriesDescription=function(){return"no value provided"},a.prototype.patientID=function(){return"no value provided"},a.prototype.patientName=function(){return"no value provided"},a.prototype.patientAge=function(){return"no value provided"},a.prototype.patientBirthdate=function(){return"no value provided"},a.prototype.patientSex=function(){return"no value provided"},a.prototype.minMaxPixelData=function(){for(var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=[s,l],e=a.length,o=0,n;o<e;o++)n=a[o],t[0]=U(t[0],n),t[1]=C(t[1],n);return t},a}();t.a=o},function(a,o,e){(function(e){function a(e){return Object.prototype.toString.call(e)}o.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===a(e)},o.isBoolean=function(e){return"boolean"==typeof e},o.isNull=function(e){return null===e},o.isNullOrUndefined=function(e){return null==e},o.isNumber=function(e){return"number"==typeof e},o.isString=function(e){return"string"==typeof e},o.isSymbol=function(e){return"symbol"==("undefined"===typeof e?"undefined":babelHelpers.typeof(e))},o.isUndefined=function(e){return void 0===e},o.isRegExp=function(e){return"[object RegExp]"===a(e)},o.isObject=function(e){return"object"==("undefined"===typeof e?"undefined":babelHelpers.typeof(e))&&null!==e},o.isDate=function(e){return"[object Date]"===a(e)},o.isError=function(e){return"[object Error]"===a(e)||e instanceof Error},o.isFunction=function(e){return"function"==typeof e},o.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==("undefined"===typeof e?"undefined":babelHelpers.typeof(e))||void 0===e},o.isBuffer=e.isBuffer}).call(o,e(5).Buffer)},function(e){e.exports="function"==typeof Object.create?function(a,o){a.super_=o,a.prototype=Object.create(o.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})}:function(a,t){a.super_=t;var e=function(){};e.prototype=t.prototype,a.prototype=new e,a.prototype.constructor=a}},function(d,t,e){"use strict";function p(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function i(a,o){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o&&("object"==("undefined"===typeof o?"undefined":babelHelpers.typeof(o))||"function"==typeof o)?o:a}function r(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof o?"undefined":babelHelpers.typeof(o)));a.prototype=Object.create(o&&o.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(a,o):a.__proto__=o)}var o=e(8),a=e(9),u=e(0),n=function(){function a(a,o){for(var e=0,r;e<o.length;e++)r=o[e],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}return function(t,e,o){return e&&a(t.prototype,e),o&&a(t,o),t}}(),l=function(l){function t(e,r,o,a){p(this,t);var n=i(this,l.call(this,a));return n._targetMesh=e,n._controls=r,n._camera=o,n._plane={position:new u.f,direction:new u.f},n._offset=new u.f,n._raycaster=new THREE.Raycaster,n._tracking=!1,n._mouse=new u.e,n._lastEvent=null,n._worldPosition=new u.f,n._screenPosition=new u.e,n._material=null,n._geometry=null,n._mesh=null,n._meshDisplayed=!0,n._meshHovered=!1,n._meshStyle="sphere",n._dom=null,n._domDisplayed=!0,n._domHovered=!1,n._domStyle="circle",null!==n._targetMesh&&n._worldPosition.copy(n._targetMesh.position),n._screenPosition=n.worldToScreen(n._worldPosition,n._camera,n._container),n.create(),n.initOffsets(),n.onMove=n.onMove.bind(n),n.onHover=n.onHover.bind(n),n.onEndControl=n.onEndControl.bind(n),n.addEventListeners(),n}return r(t,l),t.prototype.addEventListeners=function(){this._dom.addEventListener("mouseenter",this.onHover),this._dom.addEventListener("mouseleave",this.onHover),this._container.addEventListener("mousewheel",this.onMove),this._container.addEventListener("DOMMouseScroll",this.onMove),this._controls.addEventListener("end",this.onEndControl)},t.prototype.removeEventListeners=function(){this._dom.removeEventListener("mouseenter",this.onHover),this._dom.removeEventListener("mouseleave",this.onHover),this._container.removeEventListener("mousewheel",this.onMove),this._container.removeEventListener("DOMMouseScroll",this.onMove),this._controls.removeEventListener("end",this.onEndControl)},t.prototype.create=function(){this.createMesh(),this.createDOM()},t.prototype.onStart=function(o){this._lastEvent=o,o.preventDefault();var t=this.getMouseOffsets(o,this._container);if(this._mouse.set(t.x,t.y),this._raycaster.setFromCamera(this._mouse,this._camera),this._raycaster.ray.position=this._raycaster.ray.origin,this._hovered){if(this._active=!0,this._controls.enabled=!1,this._targetMesh){var e=this._raycaster.intersectObject(this._targetMesh);0<e.length&&this._offset.copy(e[0].point).sub(this._worldPosition)}else{this._plane.position.copy(this._worldPosition),this._plane.direction.copy(this._camera.getWorldDirection());var r=a.a.rayPlane(this._raycaster.ray,this._plane);null!==r&&this._offset.copy(r).sub(this._plane.position)}this.update()}},t.prototype.onEnd=function(e){this._lastEvent=e,e.preventDefault(),!0!==this._tracking&&(!this._dragged&&this._active&&(this._selected=!this._selected),this._active=!1,this._dragged=!1,this._controls.enabled=!0,this.update())},t.prototype.onEndControl=function(){var e=this;this._lastEvent&&window.requestAnimationFrame(function(){e.onMove(e._lastEvent)})},t.prototype.onMove=function(o){this._lastEvent=o,o.preventDefault();var t=this.getMouseOffsets(o,this._container);if(!(this._mouse.set(t.x,t.y),this._raycaster.setFromCamera(this._mouse,this._camera),this._raycaster.ray.position=this._raycaster.ray.origin,this._active))this.onHover(null);else if(this._dragged=!0,null!==this._targetMesh){var e=this._raycaster.intersectObject(this._targetMesh);0<e.length&&this._worldPosition.copy(e[0].point.sub(this._offset))}else{0===this._plane.direction.length()&&(this._plane.position.copy(this._worldPosition),this._plane.direction.copy(this._camera.getWorldDirection()));var r=a.a.rayPlane(this._raycaster.ray,this._plane);null!==r&&this._worldPosition.copy(r.sub(this._offset))}this.update()},t.prototype.onHover=function(e){e&&(this._lastEvent=e,e.preventDefault(),this.hoverDom(e)),this.hoverMesh(),this._hovered=this._meshHovered||this._domHovered,this._container.style.cursor=this._hovered?"pointer":"default"},t.prototype.update=function(){this.updateColor(),this._screenPosition=this.worldToScreen(this._worldPosition,this._camera,this._container),this.updateMeshColor(),this.updateMeshPosition(),this.updateDOMColor(),this.updateDOMPosition()},t.prototype.updateMeshColor=function(){this._material&&this._material.color.set(this._color)},t.prototype.updateMeshPosition=function(){this._mesh&&(this._mesh.position.x=this._worldPosition.x,this._mesh.position.y=this._worldPosition.y,this._mesh.position.z=this._worldPosition.z)},t.prototype.hoverMesh=function(){var e=this._raycaster.intersectObject(this._mesh);this._meshHovered=0<e.length},t.prototype.hoverDom=function(e){this._domHovered="mouseenter"===e.type},t.prototype.worldToScreen=function(a,t,e){var o=a.clone();return o.project(t),o.x=P((o.x+1)*e.offsetWidth/2),o.y=P((1-o.y)*e.offsetHeight/2),o.z=0,o},t.prototype.createMesh=function(){this._geometry=new THREE.SphereGeometry(1,16,16),this._material=new THREE.MeshBasicMaterial({wireframe:!0,wireframeLinewidth:2}),this._mesh=new THREE.Mesh(this._geometry,this._material),this._mesh.position.x=this._worldPosition.x,this._mesh.position.y=this._worldPosition.y,this._mesh.position.z=this._worldPosition.z,this._mesh.visible=!0,this.updateMeshColor(),this.add(this._mesh)},t.prototype.createDOM=function(){this._dom=document.createElement("div"),this._dom.setAttribute("id",this.uuid),this._dom.setAttribute("class","AMI Widget Handle"),this._dom.style.border="2px solid",this._dom.style.backgroundColor="#F9F9F9",this._dom.style.color="#F9F9F9",this._dom.style.position="absolute",this._dom.style.width="12px",this._dom.style.height="12px",this._dom.style.margin="-6px",this._dom.style.borderRadius="50%",this._dom.style.transformOrigin="0 100%";var e=this._screenPosition.y-this._container.offsetHeight;this._dom.style.transform="translate3D("+this._screenPosition.x+"px, "+e+"px, 0)",this.updateDOMColor(),this._container.appendChild(this._dom)},t.prototype.updateDOMPosition=function(){if(this._dom){var e=this._screenPosition.y-this._container.offsetHeight;this._dom.style.transform="translate3D("+this._screenPosition.x+"px, "+e+"px, 0)"}},t.prototype.updateDOMColor=function(){this._dom.style.borderColor=""+this._color},t.prototype.free=function(){this._container.removeChild(this._dom),this.removeEventListeners(),l.prototype.free.call(this)},t.prototype.hideDOM=function(){this._dom.style.display="none"},t.prototype.showDOM=function(){this._dom.style.display=""},t.prototype.hideMesh=function(){this.visible=!1},t.prototype.showMesh=function(){this.visible=!0},t.prototype.show=function(){this.showDOM(),this.showMesh()},t.prototype.hide=function(){this.hideDOM(),this.hideMesh()},n(t,[{key:"worldPosition",set:function(e){this._worldPosition.copy(e),this.update()},get:function(){return this._worldPosition}},{key:"screenPosition",set:function(e){this._screenPosition=e},get:function(){return this._screenPosition}},{key:"active",get:function(){return this._active},set:function(e){this._active=e,this._controls.enabled=!this._active,this.update()}},{key:"tracking",get:function(){return this._tracking},set:function(e){this._tracking=e,this.update()}}]),t}(o.a);t.a=l},function(a,t){"use strict";function e(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function a(){e(this,a)}return a.matrix4=function(e){return null!==e&&void 0!==e&&e.hasOwnProperty("elements")&&16===e.elements.length&&"function"==typeof e.identity&&"function"==typeof e.copy&&"function"==typeof e.determinant},a.vector3=function(e){return null!==e&&void 0!==e&&e.hasOwnProperty("x")&&e.hasOwnProperty("y")&&e.hasOwnProperty("z")&&!e.hasOwnProperty("w")},a.box=function(e){return!!(null!==e&&void 0!==e&&e.hasOwnProperty("center")&&this.vector3(e.center)&&e.hasOwnProperty("halfDimensions")&&this.vector3(e.halfDimensions)&&0<=e.halfDimensions.x&&0<=e.halfDimensions.y&&0<=e.halfDimensions.z)},a.ray=function(e){return!!(null!==e&&void 0!==e&&e.hasOwnProperty("position")&&this.vector3(e.position)&&e.hasOwnProperty("direction")&&this.vector3(e.direction))},a}();t.a=o},function(a,t,e){"use strict";(function(l){a.exports=l.version&&0!==l.version.indexOf("v0.")&&(0!==l.version.indexOf("v1.")||0===l.version.indexOf("v1.8."))?l.nextTick:function(e,c,n,i){if("function"!=typeof e)throw new TypeError("\"callback\" argument must be a function");var r=arguments.length,s,o;switch(r){case 0:case 1:return l.nextTick(e);case 2:return l.nextTick(function(){e.call(null,c)});case 3:return l.nextTick(function(){e.call(null,c,n)});case 4:return l.nextTick(function(){e.call(null,c,n,i)});default:for(s=Array(r-1),o=0;o<s.length;)s[o++]=arguments[o];return l.nextTick(function(){e.apply(null,s)});}}}).call(t,e(4))},function(a,n){"use strict";var e="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;n.assign=function(a){for(var t=Array.prototype.slice.call(arguments,1),e;t.length;)if(e=t.shift(),e){if("object"!=("undefined"===typeof e?"undefined":babelHelpers.typeof(e)))throw new TypeError(e+"must be non-object");for(var o in e)e.hasOwnProperty(o)&&(a[o]=e[o])}return a},n.shrinkBuf=function(a,t){return a.length===t?a:a.subarray?a.subarray(0,t):(a.length=t,a)};var i={arraySet:function(a,t,e,n,i){if(t.subarray&&a.subarray)a.set(t.subarray(e,e+n),i);else for(var r=0;r<n;r++)a[i+r]=t[e+r]},flattenChunks:function(l){var t,e,n,i,r,o;for(n=0,t=0,e=l.length;t<e;t++)n+=l[t].length;for(o=new Uint8Array(n),i=0,t=0,e=l.length;t<e;t++)r=l[t],o.set(r,i),i+=r.length;return o}},r={arraySet:function(a,t,e,n,i){for(var r=0;r<n;r++)a[i+r]=t[e+r]},flattenChunks:function(e){return[].concat.apply([],e)}};n.setTyped=function(e){e?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,i)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,r))},n.setTyped(e)},function(e){"use strict";var a=a||{};a.lossless=a.lossless||{},a.lossless.Utils=a.lossless.Utils||{},a.lossless.Utils.createArray=function(o){var t=Array(o||0),e=o;if(1<arguments.length)for(var n=Array.prototype.slice.call(arguments,1);e--;)t[o-1-e]=a.lossless.Utils.createArray.apply(this,n);return t},a.lossless.Utils.makeCRCTable=function(){for(var a=[],e=0,o;256>e;e++){o=e;for(var t=0;8>t;t++)o=1&o?3988292384^o>>>1:o>>>1;a[e]=o}return a},a.lossless.Utils.crc32=function(o){for(var t=a.lossless.Utils.crcTable||(a.lossless.Utils.crcTable=a.lossless.Utils.makeCRCTable()),e=-1,n=0;n<o.byteLength;n++)e=e>>>8^t[255&(e^o.getUint8(n))];return(-1^e)>>>0},"undefined"!==typeof e&&e.exports&&(e.exports=a.lossless.Utils)},function(a,t,e){"use strict";var o={};(0,e(2).assign)(o,e(113),e(116),e(56)),a.exports=o},function(e){"use strict";e.exports={0:"",1:"stream end",2:"need dictionary","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(e){function l(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function d(e){return"function"==typeof e}function n(e){return"number"==typeof e}function i(e){return"object"==("undefined"===typeof e?"undefined":babelHelpers.typeof(e))&&null!==e}function o(e){return void 0===e}e.exports=l,l.EventEmitter=l,l.prototype._events=void 0,l.prototype._maxListeners=void 0,l.defaultMaxListeners=10,l.prototype.setMaxListeners=function(e){if(!n(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},l.prototype.emit=function(a){var t,e,n,r,s,l;if(this._events||(this._events={}),"error"===a&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var c=new Error("Uncaught, unspecified \"error\" event. ("+t+")");throw c.context=t,c}if(e=this._events[a],o(e))return!1;if(d(e))switch(arguments.length){case 1:e.call(this);break;case 2:e.call(this,arguments[1]);break;case 3:e.call(this,arguments[1],arguments[2]);break;default:r=Array.prototype.slice.call(arguments,1),e.apply(this,r);}else if(i(e))for(r=Array.prototype.slice.call(arguments,1),n=(l=e.slice()).length,s=0;s<n;s++)l[s].apply(this,r);return!0},l.prototype.addListener=function(a,t){var e;if(!d(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",a,d(t.listener)?t.listener:t),this._events[a]?i(this._events[a])?this._events[a].push(t):this._events[a]=[this._events[a],t]:this._events[a]=t,i(this._events[a])&&!this._events[a].warned&&(e=o(this._maxListeners)?l.defaultMaxListeners:this._maxListeners)&&0<e&&this._events[a].length>e&&(this._events[a].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[a].length),"function"==typeof console.trace&&console.trace()),this},l.prototype.on=l.prototype.addListener,l.prototype.once=function(a,t){function e(){this.removeListener(a,e),o||(o=!0,t.apply(this,arguments))}if(!d(t))throw TypeError("listener must be a function");var o=!1;return e.listener=t,this.on(a,e),this},l.prototype.removeListener=function(o,t){var e,n,r,a;if(!d(t))throw TypeError("listener must be a function");if(!this._events||!this._events[o])return this;if(e=this._events[o],r=e.length,n=-1,e===t||d(e.listener)&&e.listener===t)delete this._events[o],this._events.removeListener&&this.emit("removeListener",o,t);else if(i(e)){for(a=r;0<a--;)if(e[a]===t||e[a].listener&&e[a].listener===t){n=a;break}if(0>n)return this;1===e.length?(e.length=0,delete this._events[o]):e.splice(n,1),this._events.removeListener&&this.emit("removeListener",o,t)}return this},l.prototype.removeAllListeners=function(a){var t,e;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[a]&&delete this._events[a],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(e=this._events[a],d(e))this.removeListener(a,e);else if(e)for(;e.length;)this.removeListener(a,e[e.length-1]);return delete this._events[a],this},l.prototype.listeners=function(e){return this._events&&this._events[e]?d(this._events[e])?[this._events[e]]:this._events[e].slice():[]},l.prototype.listenerCount=function(a){if(this._events){var t=this._events[a];if(d(t))return 1;if(t)return t.length}return 0},l.listenerCount=function(a,t){return a.listenerCount(t)}},function(a,t){"use strict";function e(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function a(){e(this,a),this._id=-1}return a.prototype.mergeModels=function(a,t){if(!this._validateModelArray(a)||!this._validateModelArray(t))return window.console.log("invalid inputs provided."),!1;for(var e=0;e<t.length;e++)for(var o=0;o<a.length&&!a[o].merge(t[e]);o++)o===a.length-1&&a.push(t[e]);return!0},a.prototype.merge=function(e){return!!this.validate(e)&&this._id===e._id},a.prototype.validate=function(e){return e&&null!==e&&"function"==typeof e.merge},a.prototype._validateModelArray=function(a){if(null===a||Array!==a.constructor)return window.console.log("invalid model array provided."),!1;for(var t=0;t<a.length;t++)if(!a[t]||null===a[t]||"function"!=typeof a[t].validate||!a[t].validate(a[t]))return!1;return!0},a}();t.a=o},function(d,t,e){"use strict";function m(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function i(a,o){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o&&("object"==("undefined"===typeof o?"undefined":babelHelpers.typeof(o))||"function"==typeof o)?o:a}function r(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof o?"undefined":babelHelpers.typeof(o)));a.prototype=Object.create(o&&o.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(a,o):a.__proto__=o)}var _=e(0),n=e(30),o=e(3),g=e(22),c=function(){function a(a,o){for(var e=0,r;e<o.length;e++)r=o[e],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}return function(t,e,o){return e&&a(t.prototype,e),o&&a(t,o),t}}(),h=e(122),u=function(d){function t(){m(this,t);var e=i(this,d.call(this));return e._uid=null,e._stackID=-1,e._frame=[],e._numberOfFrames=0,e._rows=0,e._columns=0,e._numberOfChannels=1,e._bitsAllocated=8,e._pixelType=0,e._pixelRepresentation=0,e._textureSize=4096,e._nbTextures=7,e._rawData=[],e._windowCenter=0,e._windowWidth=0,e._rescaleSlope=1,e._rescaleIntercept=0,e._minMax=[s,l],e._regMatrix=new _.c,e._ijk2LPS=null,e._lps2IJK=null,e._aabb2LPS=null,e._lps2AABB=null,e._dimensionsIJK=null,e._halfDimensionsIJK=null,e._spacing=new _.f(1,1,1),e._spacingBetweenSlices=0,e._sliceThickness=0,e._origin=null,e._rightHanded=!0,e._xCosine=new _.f(1,0,0),e._yCosine=new _.f(0,1,0),e._zCosine=new _.f(0,0,1),e._prepared=!1,e._packed=!1,e._packedPerPixel=1,e._modality="Modality not set",e._segmentationType=null,e._segmentationSegments=[],e._segmentationDefaultColor=[63,174,128],e._frameSegment=[],e._segmentationLUT=[],e._segmentationLUTO=[],e._invert=!1,e}return r(t,d),t.prototype.prepareSegmentation=function(){this._frameSegment=this._frame;var l=[];this.computeCosines(),this._frame.map(this._computeDistanceArrayMap.bind(null,this._zCosine)),this._frame.sort(this._sortDistanceArraySort);for(var t=-1,e=0;e<this._frame.length;e++){if(l[t]&&l[t]._dist==this._frame[e]._dist)for(var s=0;s<l[t]._rows*l[t]._columns;s++)l[t]._pixelData[s]+=this._frame[e].pixelData[s]*this._frame[e]._referencedSegmentNumber;else{l.push(this._frame[e]),t++;for(var i=0;i<l[t]._rows*l[t]._columns;i++)l[t]._pixelData[i]*=this._frame[e]._referencedSegmentNumber}l[t].minMax=o.a.minMax(l[t]._pixelData)}for(var r={},m=0,a=0;a<this._segmentationSegments.length;a++){m=C(m,parseInt(this._segmentationSegments[a].segmentNumber,10));var c=this._segmentationSegments[a].recommendedDisplayCIELab;r[this._segmentationSegments[a].segmentNumber]=null===c?this._segmentationDefaultColor:n.a.cielab2RGB.apply(n.a,c)}for(var _=0;_<=m;_++){var u=_/m,p=_?1:0,d=[0,0,0];r.hasOwnProperty(_.toString())&&(d=r[_.toString()]),d[0]/=255,d[1]/=255,d[2]/=255,this._segmentationLUT.push([u].concat(d)),this._segmentationLUTO.push([u,p])}this._frame=l},t.prototype.prepare=function(){if("SEG"===this._modality&&this.prepareSegmentation(),!(this._frame&&0<this._frame.length))return window.console.log("_frame doesn't contain anything...."),window.console.log(this._frame),!1;this._numberOfFrames=this._frame.length,this._rows=this._frame[0].rows,this._columns=this._frame[0].columns,this._dimensionsIJK=new _.f(this._columns,this._rows,this._numberOfFrames),this._halfDimensionsIJK=new _.f(this._dimensionsIJK.x/2,this._dimensionsIJK.y/2,this._dimensionsIJK.z/2),this._spacingBetweenSlices=this._frame[0].spacingBetweenSlices,this._sliceThickness=this._frame[0].sliceThickness,this.computeCosines(),this.orderFrames(),this.computeSpacing(),this._frame[0].imagePosition||(this._frame[0].imagePosition=[0,0,0]),this._frame[0].imageOrientation||(this._frame[0].imageOrientation=[1,0,0,0,1,0]),this._origin=this._arrayToVector3(this._frame[0].imagePosition,0),this.computeIJK2LPS(),this.computeLPS2AABB();var a=B(this._frame.length/2),t=this._frame[a];this._rescaleSlope=t.rescaleSlope||1,this._rescaleIntercept=t.rescaleIntercept||0,this.computeMinMaxIntensities(),this._minMax[0]=o.a.rescaleSlopeIntercept(this._minMax[0],this._rescaleSlope,this._rescaleIntercept),this._minMax[1]=o.a.rescaleSlopeIntercept(this._minMax[1],this._rescaleSlope,this._rescaleIntercept);var e=t.windowWidth*this._rescaleSlope||this._minMax[1]-this._minMax[0];this._windowWidth=e+this._rescaleIntercept;var r=t.windowCenter*this._rescaleSlope||this._minMax[0]+e/2;this._windowCenter=r+this._rescaleIntercept,this._bitsAllocated=t.bitsAllocated,this._prepared=!0},t.prototype.packEchos=function(){for(var a=[],t=0;t<this._frame.length;t+=4){for(var e=this._frame[t],o=0;o<this._rows*this._columns;o++){for(var n=1;4>n;n++)e.pixelData[o]+=this._frame[t+n].pixelData[o];e.pixelData[o]/=4}a.push(e)}this._frame=a,this._numberOfFrames=this._frame.length,this._dimensionsIJK=new _.f(this._columns,this._rows,this._numberOfFrames),this._halfDimensionsIJK=new _.f(this._dimensionsIJK.x/2,this._dimensionsIJK.y/2,this._dimensionsIJK.z/2)},t.prototype.computeCosines=function(){if(this._frame&&this._frame[0]){var e=this._frame[0].cosines();this._xCosine=e[0],this._yCosine=e[1],this._zCosine=e[2]}},t.prototype.orderFrames=function(){this._frame[0].dimensionIndexValues?this._frame.sort(this._orderFrameOnDimensionIndicesArraySort):this._frame[0].imagePosition&&this._frame[0].imageOrientation&&this._frame[1]&&this._frame[1].imagePosition&&this._frame[1].imageOrientation&&this._frame[0].imagePosition.join()!==this._frame[1].imagePosition.join()?(this._frame.map(this._computeDistanceArrayMap.bind(null,this._zCosine)),this._frame.sort(this._sortDistanceArraySort)):null!==this._frame[0].instanceNumber&&this._frame[1]&&null!==this._frame[1].instanceNumber&&this._frame[0].instanceNumber!==this._frame[1].instanceNumber?this._frame.sort(this._sortInstanceNumberArraySort):this._frame[0].sopInstanceUID&&this._frame[1]&&this._frame[1].sopInstanceUID&&this._frame[0].sopInstanceUID!==this._frame[1].sopInstanceUID?this._frame.sort(this._sortSopInstanceUIDArraySort):window.console.log("do not know how to order the frames...")},t.prototype.computeSpacing=function(){this.xySpacing(),this.zSpacing()},t.prototype.zSpacing=function(){1<this._numberOfFrames&&(this._frame[0].pixelSpacing&&this._frame[0].pixelSpacing[2]?this._spacing.z=this._frame[0].pixelSpacing[2]:(this._frame.map(this._computeDistanceArrayMap.bind(null,this._zCosine)),this._frame[1].dist===this._frame[0].dist?this._spacingBetweenSlices?this._spacing.z=this._spacingBetweenSlices:this._frame[0].sliceThickness&&(this._spacing.z=this._frame[0].sliceThickness):(this._frame.sort(this._sortDistanceArraySort),this._spacing.z=this._frame[1].dist-this._frame[0].dist))),0===this._spacing.z&&(this._spacing.z=1)},t.prototype.xySpacing=function(){if(this._frame&&this._frame[0]){var e=this._frame[0].spacingXY();this._spacing.x=e[0],this._spacing.y=e[1]}},t.prototype.computeMinMaxIntensities=function(){for(var o=0,t;o<this._frame.length;o++){t=this._frame[o].minMax[0],a(t)||(this._minMax[0]=U(this._minMax[0],t));var e=this._frame[o].minMax[1];a(e)||(this._minMax[1]=C(this._minMax[1],e))}},t.prototype.computeIJK2LPS=function(){this._ijk2LPS=o.a.ijk2LPS(this._xCosine,this._yCosine,this._zCosine,this._spacing,this._origin,this._regMatrix),this._lps2IJK=new _.c,this._lps2IJK.getInverse(this._ijk2LPS)},t.prototype.computeLPS2AABB=function(){this._aabb2LPS=o.a.aabb2LPS(this._xCosine,this._yCosine,this._zCosine,this._origin),this._lps2AABB=new _.c,this._lps2AABB.getInverse(this._aabb2LPS)},t.prototype.merge=function(e){return this._stackID===e.stackID&&this.mergeModels(this._frame,e.frame)},t.prototype.pack=function(){var l=this._dimensionsIJK.x*this._dimensionsIJK.y*this._dimensionsIJK.z;16===this._bitsAllocated&&1===this._numberOfChannels&&(this._packedPerPixel=2);var t=this._textureSize*this._textureSize,e=T(l/(t*this._packedPerPixel)),n=0,i=this._packedPerPixel*t;i>l&&(i=l);for(var r=0,o;r<e;r++)o=this._packTo8Bits(this._numberOfChannels,this._frame,this._textureSize,n,i),this._textureType=o.textureType,this._rawData.push(o.data),n+=this._packedPerPixel*t,(i+=this._packedPerPixel*t)>l&&(i=l);this._packed=!0},t.prototype._packTo8Bits=function(u,t,e,n,i){var r={textureType:null,data:null},o=t[0].bitsAllocated,L=t[0].pixelType,s=0;0>this._minMax[0]&&(s-=this._minMax[0]);var l=0,c=0,R=0,p=t[0].rows*t[0].columns;if(8===o&&1===u||1===o){for(var d=new Uint8Array(1*(e*e)),f=n;f<i;f++){R=f%p;var m=t[c=~~(f/p)].pixelData[R]+=s;a(m)||(d[l]=m),l++}r.textureType=THREE.LuminanceFormat,r.data=d}else if(16===o&&1===u){for(var _=new Uint8Array(4*(e*e)),g=0,y=0,v=n;v<i;v++){R=v%p;var b=t[c=~~(v/p)].pixelData[R]+s;a(b)||(_[4*g+2*y]=255&b,_[4*g+2*y+1]=255&b>>>8),l++,g=B(l/2),y=l%2}r.textureType=THREE.RGBAFormat,r.data=_}else if(32===o&&1===u&&0===L){for(var w=new Uint8Array(4*(e*e)),x=n;x<i;x++){R=x%p;var S=t[c=~~(x/p)].pixelData[R]+s;a(S)||(w[4*l]=255&S,w[4*l+1]=255&S>>>8,w[4*l+2]=255&S>>>16,w[4*l+3]=255&S>>>24),l++}r.textureType=THREE.RGBAFormat,r.data=w}else if(32===o&&1===u&&1===L){for(var E=new Uint8Array(4*(e*e)),M=n;M<i;M++){R=M%p;var T=t[c=~~(M/p)].pixelData[R]+s;if(!a(T)){var A=h(T).match(/.{1,8}/g);E[4*l]=parseInt(A[0],2),E[4*l+1]=parseInt(A[1],2),E[4*l+2]=parseInt(A[2],2),E[4*l+3]=parseInt(A[3],2)}l++}r.textureType=THREE.RGBAFormat,r.data=E}else if(8===o&&3===u){for(var P=new Uint8Array(3*(e*e)),I=n;I<i;I++)c=~~(I/p),R=I%p,P[3*l]=t[c].pixelData[3*R],P[3*l+1]=t[c].pixelData[3*R+1],P[3*l+2]=t[c].pixelData[3*R+2],l++;r.textureType=THREE.RGBFormat,r.data=P}return r},t.prototype.worldCenter=function(){return this._halfDimensionsIJK.clone().addScalar(-.5).applyMatrix4(this._ijk2LPS)},t.prototype.worldBoundingBox=function(){for(var a=[s,l,s,l,s,l],t=this._dimensionsIJK,e=0;e<=t.x;e+=t.x)for(var n=0;n<=t.y;n+=t.y)for(var i=0,r;i<=t.z;i+=t.z)r=new _.f(e,n,i).applyMatrix4(this._ijk2LPS),a=[U(a[0],r.x),C(a[1],r.x),U(a[2],r.y),C(a[3],r.y),U(a[4],r.z),C(a[5],r.z)];return a},t.prototype.AABBox=function(){var a=new _.f().addScalar(-.5).applyMatrix4(this._ijk2LPS).applyMatrix4(this._lps2AABB),t=this._dimensionsIJK.clone().addScalar(-.5).applyMatrix4(this._ijk2LPS).applyMatrix4(this._lps2AABB);return new _.f(N(a.x-t.x),N(a.y-t.y),N(a.z-t.z))},t.prototype.centerAABBox=function(){var e=this.worldCenter();return e.applyMatrix4(this._lps2AABB),e},t.indexInDimensions=function(a,t){return 0<=a.x&&0<=a.y&&0<=a.z&&a.x<t.x&&a.y<t.y&&a.z<t.z},t.prototype._arrayToVector3=function(a,t){return new _.f(a[t],a[t+1],a[t+2])},t.prototype._orderFrameOnDimensionIndicesArraySort=function(a,t){if("dimensionIndexValues"in a&&"[object Array]"===Object.prototype.toString.call(a.dimensionIndexValues)&&"dimensionIndexValues"in t&&"[object Array]"===Object.prototype.toString.call(t.dimensionIndexValues))for(var e=0;e<a.dimensionIndexValues.length;e++){if(parseInt(a.dimensionIndexValues[e],10)>parseInt(t.dimensionIndexValues[e],10))return 1;if(parseInt(a.dimensionIndexValues[e],10)<parseInt(t.dimensionIndexValues[e],10))return-1}else window.console.log("One of the frames doesn't have a dimensionIndexValues array."),window.console.log(a),window.console.log(t);return 0},t.prototype._computeDistanceArrayMap=function(a,t){return t.dist=t.imagePosition[0]*a.x+t.imagePosition[1]*a.y+t.imagePosition[2]*a.z,t},t.prototype._sortDistanceArraySort=function(a,t){return a.dist-t.dist},t.prototype._sortInstanceNumberArraySort=function(a,t){return a.instanceNumber-t.instanceNumber},t.prototype._sortSopInstanceUIDArraySort=function(a,t){return a.sopInstanceUID-t.sopInstanceUID},t.value=function(a,t){return window.console.warn("models.stack.value is deprecated.\n       Please use core.utils.value instead."),o.a.value(a,t)},t.valueRescaleSlopeIntercept=function(a,t,e){return window.console.warn("models.stack.valueRescaleSlopeIntercept is deprecated.\n       Please use core.utils.rescaleSlopeIntercept instead."),o.a.rescaleSlopeIntercept(a,t,e)},t.worldToData=function(a,t){return window.console.warn("models.stack.worldToData is deprecated.\n       Please use core.utils.worldToData instead."),o.a.worldToData(a._lps2IJK,t)},c(t,[{key:"numberOfChannels",set:function(e){this._numberOfChannels=e},get:function(){return this._numberOfChannels}},{key:"frame",set:function(e){this._frame=e},get:function(){return this._frame}},{key:"prepared",set:function(e){this._prepared=e},get:function(){return this._prepared}},{key:"packed",set:function(e){this._packed=e},get:function(){return this._packed}},{key:"packedPerPixel",set:function(e){this._packedPerPixel=e},get:function(){return this._packedPerPixel}},{key:"dimensionsIJK",set:function(e){this._dimensionsIJK=e},get:function(){return this._dimensionsIJK}},{key:"halfDimensionsIJK",set:function(e){this._halfDimensionsIJK=e},get:function(){return this._halfDimensionsIJK}},{key:"regMatrix",set:function(e){this._regMatrix=e},get:function(){return this._regMatrix}},{key:"ijk2LPS",set:function(e){this._ijk2LPS=e},get:function(){return this._ijk2LPS}},{key:"lps2IJK",set:function(e){this._lps2IJK=e},get:function(){return this._lps2IJK}},{key:"lps2AABB",set:function(e){this._lps2AABB=e},get:function(){return this._lps2AABB}},{key:"textureSize",set:function(e){this._textureSize=e},get:function(){return this._textureSize}},{key:"textureType",set:function(e){this._textureType=e},get:function(){return this._textureType}},{key:"bitsAllocated",set:function(e){this._bitsAllocated=e},get:function(){return this._bitsAllocated}},{key:"rawData",set:function(e){this._rawData=e},get:function(){return this._rawData}},{key:"windowWidth",get:function(){return this._windowWidth},set:function(e){this._windowWidth=e}},{key:"windowCenter",get:function(){return this._windowCenter},set:function(e){this._windowCenter=e}},{key:"rescaleSlope",get:function(){return this._rescaleSlope},set:function(e){this._rescaleSlope=e}},{key:"rescaleIntercept",get:function(){return this._rescaleIntercept},set:function(e){this._rescaleIntercept=e}},{key:"xCosine",get:function(){return this._xCosine},set:function(e){this._xCosine=e}},{key:"yCosine",get:function(){return this._yCosine},set:function(e){this._yCosine=e}},{key:"zCosine",get:function(){return this._zCosine},set:function(e){this._zCosine=e}},{key:"minMax",get:function(){return this._minMax},set:function(e){this._minMax=e}},{key:"stackID",get:function(){return this._stackID},set:function(e){this._stackID=e}},{key:"pixelType",get:function(){return this._pixelType},set:function(e){this._pixelType=e}},{key:"pixelRepresentation",get:function(){return this._pixelRepresentation},set:function(e){this._pixelRepresentation=e}},{key:"invert",set:function(e){this._invert=e},get:function(){return this._invert}},{key:"modality",set:function(e){this._modality=e},get:function(){return this._modality}},{key:"rightHanded",get:function(){return this._rightHanded},set:function(e){this._rightHanded=e}},{key:"spacingBetweenSlices",get:function(){return this._spacingBetweenSlices},set:function(e){this._spacingBetweenSlices=e}},{key:"segmentationSegments",set:function(e){this._segmentationSegments=e},get:function(){return this._segmentationSegments}},{key:"segmentationType",set:function(e){this._segmentationType=e},get:function(){return this._segmentationType}},{key:"segmentationLUT",set:function(e){this._segmentationLUT=e},get:function(){return this._segmentationLUT}},{key:"segmentationLUTO",set:function(e){this._segmentationLUTO=e},get:function(){return this._segmentationLUTO}}]),t}(g.a);t.a=u},function(e){"use strict";e.exports=function(e){return"string"==typeof e}},function(a,t,e){"use strict";var o=e(127);a.exports=function(e){return o(e)&&0<=e}},function(a,t,e){"use strict";var o=e(24),i=e(25);a.exports=function(r,t){var e,n;if(!o(r))throw new TypeError("invalid input argument. First argument must be a string. Value: `"+r+"`.");if(!i(t))throw new TypeError("invalid input argument. Second argument must be a nonnegative integer. Value: `"+t+"`.");if(0===r.length||0===t)return"";if(r.length*t>9007199254740991)throw new RangeError("invalid input argument. Output string length exceeds maximum allowed string length.");for(e="",n=t;1==(1&n)&&(e+=r),0!=(n>>>=1);)r+=r;return e}},function(l,t,e){function n(a,t){for(var e in a)t[e]=a[e]}function i(a,t,e){return o(a,t,e)}var r=e(5),o=r.Buffer;o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?l.exports=r:(n(r,t),t.Buffer=i),n(o,i),i.from=function(a,r,e){if("number"==typeof a)throw new TypeError("Argument must not be a number");return o(a,r,e)},i.alloc=function(a,r,e){if("number"!=typeof a)throw new TypeError("Argument must be a number");var l=o(a);return void 0===r?l.fill(0):"string"==typeof e?l.fill(r,e):l.fill(r),l},i.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return o(e)},i.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},function(e){"use strict";var a=a||{};a.Utils=a.Utils||{},a.Utils.crcTable=null,a.Utils.GUNZIP_MAGIC_COOKIE1=31,a.Utils.GUNZIP_MAGIC_COOKIE2=139,a.Utils.getStringAt=function(a,t,e){var n="",o,i;for(o=t;o<e;o+=1)0!==(i=a.getUint8(o))&&(n+=F(i));return n},a.Utils.getByteAt=function(a,t){return a.getInt8(t)},a.Utils.getShortAt=function(a,t,e){return a.getInt16(t,e)},a.Utils.getIntAt=function(a,t,e){return a.getInt32(t,e)},a.Utils.getFloatAt=function(a,t,e){return a.getFloat32(t,e)},a.Utils.getDoubleAt=function(a,t,e){return a.getFloat64(t,e)},a.Utils.getLongAt=function(i,t,e){var n=[],o=0,l;for(l=0;8>l;l+=1)n[l]=a.Utils.getByteAt(i,t+l,e);for(l=n.length-1;0<=l;l--)o=256*o+n[l];return o},a.Utils.toArrayBuffer=function(a){var t,e,o;for(t=new ArrayBuffer(a.length),e=new Uint8Array(t),o=0;o<a.length;o+=1)e[o]=a[o];return t},a.Utils.isString=function(e){return"string"==typeof e||e instanceof String},a.Utils.formatNumber=function(o,r){var e=0;return e=a.Utils.isString(o)?+o:o,e=r?e.toPrecision(5):e.toPrecision(7),parseFloat(e)},a.Utils.makeCRCTable=function(){for(var a=[],e=0,o;256>e;e++){o=e;for(var t=0;8>t;t++)o=1&o?3988292384^o>>>1:o>>>1;a[e]=o}return a},a.Utils.crc32=function(o){for(var t=a.Utils.crcTable||(a.Utils.crcTable=a.Utils.makeCRCTable()),e=-1,n=0;n<o.byteLength;n++)e=e>>>8^t[255&(e^o.getUint8(n))];return(-1^e)>>>0},"undefined"!==typeof e&&e.exports&&(e.exports=a.Utils)},function(e){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(a,t){"use strict";function e(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function a(){e(this,a)}return a.cielab2XYZ=function(a,t,e){var n=(a+16)/116,i=t/500+n,r=n-e/200;return n=.008856<S(n,3)?S(n,3):(n-16/116)/7.787,i=.008856<S(i,3)?S(i,3):(i-16/116)/7.787,r=.008856<S(r,3)?S(r,3):(r-16/116)/7.787,[95.047*i,100*n,108.883*r]},a.xyz2RGB=function(a,t,e){var n=3.2406*(a/=100)+-1.5372*(t/=100)+-.4986*(e/=100),i=-.9689*a+1.8758*t+.0415*e,r=.0557*a+-.204*t+1.057*e;return .0031308<n?n=1.055*S(n,1/2.4)-.055:n*=12.92,.0031308<i?i=1.055*S(i,1/2.4)-.055:i*=12.92,.0031308<r?r=1.055*S(r,1/2.4)-.055:r*=12.92,n*=255,i*=255,r*=255,[n,i,r]},a.cielab2RGB=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:50,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;if(!(0<=a&&100>=a))return null;var o=this.cielab2XYZ(a,t,e);return this.xyz2RGB.apply(this,o)},a}();t.a=o},function(c,t,e){"use strict";function g(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function i(a,o){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o&&("object"==("undefined"===typeof o?"undefined":babelHelpers.typeof(o))||"function"==typeof o)?o:a}function r(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof o?"undefined":babelHelpers.typeof(o)));a.prototype=Object.create(o&&o.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(a,o):a.__proto__=o)}var y=e(9),b=e(0),a=function(a){function s(e,t,r,x){var v=4<arguments.length&&void 0!==arguments[4]?arguments[4]:new b.c;g(this,s);var S={halfDimensions:e,center:t,toAABB:v},u={position:r,direction:x},p=y.a.aabbPlane(S,u);if(3>p.length)throw window.console.log("WARNING: Less than 3 intersections between AABB and Plane."),window.console.log("AABB"),window.console.log(S),window.console.log("Plane"),window.console.log(u),window.console.log("exiting..."),new Error("geometries.slice has less than 3 intersections, can not create a valid geometry.");var d=s.orderIntersections(p,x),f=s.shape(d),m=i(this,a.call(this,f));return m.type="SliceGeometry",m.vertices=d,m.verticesNeedUpdate=!0,m}return r(s,a),s.shape=function(a){var t=new THREE.Shape;t.moveTo(a[0].xy.x,a[0].xy.y);for(var e=1;e<a.length;e++)t.lineTo(a[e].xy.x,a[e].xy.y);return t.lineTo(a[0].xy.x,a[0].xy.y),t},s.centerOfMass=function(a){for(var t=new b.f(0,0,0),e=0;e<a.length;e++)t.x+=a[e].x,t.y+=a[e].y,t.z+=a[e].z;return t.divideScalar(a.length),t},s.orderIntersections=function(e,t){for(var n=s.centerOfMass(e),i=new b.f(e[0].x-n.x,e[0].y-n.y,e[0].z-n.z).normalize(),r=new b.f(0,0,0).crossVectors(i,t).normalize(),o=[],a=0,l;a<e.length;a++){l=new b.f(e[a].x,e[a].y,e[a].z),l.direction=new b.f(e[a].x-n.x,e[a].y-n.y,e[a].z-n.z).normalize();var c=i.dot(l.direction),m=r.dot(l.direction);l.xy={x:c,y:m};var _=k(m,c)*(180/Gn);l.angle=_,o.push(l)}o.sort(function(a,t){return a.angle-t.angle});for(var p=[o[0]],d=1;d<o.length;d++)1e-4<N(o[d-1].angle-o[d].angle)&&p.push(o[d]);return p},s}(THREE.ShapeGeometry);t.a=a},function(c,t,e){"use strict";function d(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function i(a,o){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o&&("object"==("undefined"===typeof o?"undefined":babelHelpers.typeof(o))||"function"==typeof o)?o:a}function r(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof o?"undefined":babelHelpers.typeof(o)));a.prototype=Object.create(o&&o.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(a,o):a.__proto__=o)}var p=e(0),a=function(){function a(a,o){for(var e=0,r;e<o.length;e++)r=o[e],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}return function(t,e,o){return e&&a(t.prototype,e),o&&a(t,o),t}}(),o=function(l){function t(e){d(this,t);var a=i(this,l.call(this,1,1,1));return a._location=e,a.applyMatrix(new p.c().makeTranslation(a._location.x,a._location.y,a._location.z)),a.verticesNeedUpdate=!0,a}return r(t,l),t.prototype.resetVertices=function(){this.vertices[0].set(.5,.5,.5),this.vertices[1].set(.5,.5,-.5),this.vertices[2].set(.5,-.5,.5),this.vertices[3].set(.5,-.5,-.5),this.vertices[4].set(-.5,.5,-.5),this.vertices[5].set(-.5,.5,.5),this.vertices[6].set(-.5,-.5,-.5),this.vertices[7].set(-.5,-.5,.5)},a(t,[{key:"location",set:function(e){this._location=e,this.vertices[0].set(.5,.5,.5),this.vertices[1].set(.5,.5,-.5),this.vertices[2].set(.5,-.5,.5),this.vertices[3].set(.5,-.5,-.5),this.vertices[4].set(-.5,.5,-.5),this.vertices[5].set(-.5,.5,.5),this.vertices[6].set(-.5,-.5,-.5),this.vertices[7].set(-.5,-.5,.5),this.applyMatrix(new p.c().makeTranslation(this._location.x,this._location.y,this._location.z)),this.verticesNeedUpdate=!0},get:function(){return this._location}}]),t}(THREE.BoxGeometry);t.a=o},function(n,t){"use strict";function l(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function i(a,o){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o&&("object"==("undefined"===typeof o?"undefined":babelHelpers.typeof(o))||"function"==typeof o)?o:a}function r(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof o?"undefined":babelHelpers.typeof(o)));a.prototype=Object.create(o&&o.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(a,o):a.__proto__=o)}var o=function(){function a(a,o){for(var e=0,r;e<o.length;e++)r=o[e],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}return function(t,e,o){return e&&a(t.prototype,e),o&&a(t,o),t}}(),e=function(a){function t(e){l(this,t);var r=i(this,a.call(this));return r._helpersSlice=e,r._visible=!0,r._color=16711680,r._material=null,r._geometry=null,r._mesh=null,r._create(),r}return r(t,a),t.prototype._create=function(){if(this._material||(this._material=new THREE.LineBasicMaterial({color:this._color,linewidth:1})),this._helpersSlice.geometry.vertices){this._geometry=new THREE.Geometry;for(var e=0;e<this._helpersSlice.geometry.vertices.length;e++)this._geometry.vertices.push(this._helpersSlice.geometry.vertices[e]);this._geometry.vertices.push(this._helpersSlice.geometry.vertices[0]),this._mesh=new THREE.Line(this._geometry,this._material),"IJK"===this._helpersSlice.aabbSpace&&this._mesh.applyMatrix(this._helpersSlice.stack.ijk2LPS),this._mesh.visible=this._visible,this.add(this._mesh)}},t.prototype._update=function(){this._mesh&&(this.remove(this._mesh),this._mesh.geometry.dispose(),this._mesh=null),this._create()},t.prototype.dispose=function(){this._mesh.material.dispose(),this._mesh.material=null,this._geometry.dispose(),this._geometry=null,this._material.dispose(),this._material=null},o(t,[{key:"helpersSlice",set:function(e){this._helpersSlice=e,this._update()},get:function(){return this._helpersSlice}},{key:"visible",set:function(e){this._visible=e,this._mesh&&(this._mesh.visible=this._visible)},get:function(){return this._visible}},{key:"color",set:function(e){this._color=e,this._material&&this._material.color.set(this._color)},get:function(){return this._color}}]),t}(THREE.Object3D);t.a=e},function(c,t,e){"use strict";function d(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function i(a,o){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o&&("object"==("undefined"===typeof o?"undefined":babelHelpers.typeof(o))||"function"==typeof o)?o:a}function r(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof o?"undefined":babelHelpers.typeof(o)));a.prototype=Object.create(o&&o.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(a,o):a.__proto__=o)}var o=e(0),a=function(){function a(a,o){for(var e=0,r;e<o.length;e++)r=o[e],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}return function(t,e,o){return e&&a(t.prototype,e),o&&a(t,o),t}}(),n=function(l){function t(e){d(this,t);var a=i(this,l.call(this));return a._stack=e,a._visible=!0,a._color=16777215,a._material=null,a._geometry=null,a._mesh=null,a._meshStack=null,a._create(),a}return r(t,l),t.prototype._create=function(){var a=this._stack.dimensionsIJK,t=this._stack.halfDimensionsIJK,e=new o.f(-.5,-.5,-.5),n=new THREE.BoxGeometry(a.x,a.y,a.z);n.applyMatrix(new o.c().makeTranslation(t.x+e.x,t.y+e.y,t.z+e.z)),this._geometry=n,this._material=new THREE.MeshBasicMaterial({wireframe:!0});var i=new THREE.Mesh(this._geometry,null);i.applyMatrix(this._stack.ijk2LPS),i.visible=this._visible,this._meshStack=i,this._mesh=new THREE.BoxHelper(this._meshStack,this._color),this._material=this._mesh.material,this.add(this._mesh)},t.prototype._update=function(){this._mesh&&(this.remove(this._mesh),this._mesh.geometry.dispose(),this._mesh.geometry=null,this._mesh.material.dispose(),this._mesh.material=null,this._mesh=null),this._create()},t.prototype.dispose=function(){this._mesh.material.dispose(),this._mesh.material=null,this._geometry.dispose(),this._geometry=null,this._material.dispose(),this._material=null},a(t,[{key:"visible",set:function(e){this._visible=e,this._mesh&&(this._mesh.visible=this._visible)},get:function(){return this._visible}},{key:"color",set:function(e){this._color=e,this._material&&this._material.color.set(this._color)},get:function(){return this._color}}]),t}(THREE.Object3D);t.a=n},function(a,t){"use strict";function e(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function a(){e(this,a)}return a.uniforms=function(){return{uCanvasWidth:{type:"f",value:0,typeGLSL:"float"},uCanvasHeight:{type:"f",value:0,typeGLSL:"float"},uWidth:{type:"f",value:1,typeGLSL:"float"},uOpacity:{type:"f",value:1,typeGLSL:"float"},uTextureFilled:{type:"t",value:[],typeGLSL:"sampler2D"}}},a}();t.a=o},function(a,t){"use strict";function e(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function a(){e(this,a)}return a.prototype.compute=function(){return"\nvarying vec4 vProjectedCoords;\n\n//\n// main\n//\nvoid main() {\n\n  vec4 vPos = modelMatrix * vec4(position, 1.0 );\n  mat4 vProjectionViewMatrix = projectionMatrix * viewMatrix;\n  vProjectedCoords =  projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0 );\n\n}\n        "},a}();t.a=o},function(a,t){"use strict";function o(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}var e=function(){function a(t){o(this,a),this._uniforms=t,this._functions={},this._main=""}return a.prototype.functions=function(){""===this._main&&this.main();var a="";for(var t in this._functions)a+=this._functions[t]+"\n";return a},a.prototype.uniforms=function(){var a="";for(var t in this._uniforms){var e=this._uniforms[t];a+="uniform "+e.typeGLSL+" "+t,e&&e.length&&(a+="["+e.length+"]"),a+=";\n"}return a},a.prototype.main=function(){this._main="\n\nfloat luma (vec3 rgb) {\n  return (rgb.r + rgb.g + rgb.b)/3.0;\n}\n\nconst float T = 0.04;\nconst float M = 1.0;\nconst float L = 0.002;\n\nvoid main(void) {\n\n  vec2 texCoord = vec2(((vProjectedCoords.x / vProjectedCoords.w) + 1.0 ) / 2.0,\n                ((vProjectedCoords.y / vProjectedCoords.w) + 1.0 ) / 2.0 );\n\n  float borderWidth = uWidth; // in px\n  float step_u = borderWidth * 1.0 / uCanvasWidth;\n  float step_v = borderWidth * 1.0 / uCanvasHeight;\n  vec4 centerPixel = texture2D(uTextureFilled, texCoord);\n\n  vec4 rightPixel  = texture2D(uTextureFilled, texCoord + vec2(step_u, 0.0));\n  vec4 bottomPixel = texture2D(uTextureFilled, texCoord + vec2(0.0, step_v));\n\n  // now manually compute the derivatives\n  float _dFdX = length(rightPixel - centerPixel) / step_u;\n  float _dFdY = length(bottomPixel - centerPixel) / step_v;\n\n  // gl_FragColor.r = _dFdX;\n  // gl_FragColor.g = _dFdY;\n  gl_FragColor.r = max(max(centerPixel.r, rightPixel.r), bottomPixel.r);\n  gl_FragColor.g = max(max(centerPixel.g, rightPixel.g), bottomPixel.g);\n  gl_FragColor.b = max(max(centerPixel.b, rightPixel.b), bottomPixel.b);\n  float maxDerivative = max(_dFdX, _dFdY);\n  float clampedDerivative = clamp(maxDerivative, 0., 1.);\n  gl_FragColor.a = uOpacity * clampedDerivative;\n\n  return;\n  // float h = 1./uCanvasHeight;\n  // float w = 1./uCanvasWidth;\n  // vec4 n[9];\n  // n[0] = texture2D(uTextureFilled, vProjectedTextCoords + vec2( -w, -h));\n  // n[1] = texture2D(uTextureFilled, vProjectedTextCoords + vec2(0.0, -h));\n  // n[2] = texture2D(uTextureFilled, vProjectedTextCoords + vec2(  w, -h));\n  // n[3] = texture2D(uTextureFilled, vProjectedTextCoords + vec2( -w, 0.0));\n  // n[4] = texture2D(uTextureFilled, vProjectedTextCoords);\n  // n[5] = texture2D(uTextureFilled, texCoord + vec2(  w, 0.0));\n  // n[6] = texture2D(uTextureFilled, texCoord + vec2( -w, h));\n  // n[7] = texture2D(uTextureFilled, texCoord + vec2(0.0, h));\n  // n[8] = texture2D(uTextureFilled, texCoord + vec2(  w, h));\n  // vec4 sobel_horizEdge = n[2] + (2.0*n[5]) + n[8] - (n[0] + (2.0*n[3]) + n[6]);\n  // vec4 sobel_vertEdge  = n[0] + (2.0*n[1]) + n[2] - (n[6] + (2.0*n[7]) + n[8]);\n  // vec3 sobel = sqrt((sobel_horizEdge.rgb * sobel_horizEdge.rgb) + (sobel_vertEdge.rgb * sobel_vertEdge.rgb));\n  // gl_FragColor = vec4( sobel, max(max(sobel.r, sobel.g), sobel.b) );\n\n  // return;\n}\n   "},a.prototype.compute=function(){return"\n// uniforms\n"+this.uniforms()+"\n\n// varying (should fetch it from vertex directly)\nvarying vec4      vProjectedCoords;\n\n// tailored functions\n"+this.functions()+"\n\n// main loop\n"+this._main+"\n      "},a}();t.a=e},function(a,t){"use strict";function e(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function a(){e(this,a)}return a.uniforms=function(){return{uCanvasWidth:{type:"f",value:0,typeGLSL:"float"},uCanvasHeight:{type:"f",value:0,typeGLSL:"float"},uSlice:{type:"v4",value:[0,0,0,0],typeGLSL:"vec4"},uPlane1:{type:"v4",value:[0,0,0,0],typeGLSL:"vec4"},uPlaneColor1:{type:"v3",value:[1,1,0],typeGLSL:"vec3"},uPlane2:{type:"v4",value:[0,0,0,0],typeGLSL:"vec4"},uPlaneColor2:{type:"v3",value:[1,1,0],typeGLSL:"vec3"},uPlane3:{type:"v4",value:[0,0,0,0],typeGLSL:"vec4"},uPlaneColor3:{type:"v3",value:[1,1,0],typeGLSL:"vec3"}}},a}();t.a=o},function(a,t){"use strict";function e(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function a(){e(this,a)}return a.prototype.compute=function(){return"\nvarying vec4 vPos;\nvarying mat4 vProjectionViewMatrix;\n\n//\n// main\n//\nvoid main() {\n\n  vPos = modelMatrix * vec4(position, 1.0 );\n  vProjectionViewMatrix = projectionMatrix * viewMatrix;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0 );\n\n}\n        "},a}();t.a=o},function(a,t){"use strict";function o(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}var e=function(){function a(t){o(this,a),this._uniforms=t,this._functions={},this._main=""}return a.prototype.functions=function(){""===this._main&&this.main();var a="";for(var t in this._functions)a+=this._functions[t]+"\n";return a},a.prototype.uniforms=function(){var a="";for(var t in this._uniforms){var e=this._uniforms[t];a+="uniform "+e.typeGLSL+" "+t,e&&e.length&&(a+="["+e.length+"]"),a+=";\n"}return a},a.prototype.main=function(){this._main="\nvoid intersectionProjection(\n  in vec4 plane,\n  in vec4 slice,\n  out vec3 intersectionProjection){\n\n      vec3 intersectionDirection = normalize(cross(plane.xyz, slice.xyz));\n      vec3 intersectionPoint = \n        cross(intersectionDirection,slice.xyz) * plane.w +\n        cross(plane.xyz, intersectionDirection) * slice.w;\n\n      intersectionProjection =\n        intersectionPoint.xyz +\n        (dot(vPos.xyz - intersectionPoint, intersectionDirection)\n          * intersectionDirection);\n\n}\n\nvoid main(void) {\n      vec4 c1 = vec4(0., 0., 0., 0.);\n      vec4 c2 = vec4(0., 0., 0., 0.);\n      vec4 c3 = vec4(0., 0., 0., 0.);\n\n      // localizer #1\n      // must be normalized!\n      if(length(uPlane1.xyz) > 0.5) {\n        vec3 projection1 = vec3(1.);\n        intersectionProjection(\n          uPlane1,\n          uSlice,\n          projection1\n        );\n\n        vec4 projInter1 = (vProjectionViewMatrix * vec4(projection1, 1.));\n        vec3 ndc1 = projInter1.xyz / projInter1.w;\n        vec2 screenSpace1 = (ndc1.xy * .5 + .5) * vec2(uCanvasWidth, uCanvasHeight);\n\n        float d1 = distance(gl_FragCoord.xy, screenSpace1.xy);\n        c1 = vec4(uPlaneColor1, 1. - smoothstep(.5, .7, d1));\n      }\n\n      // localizer #2\n      if(length(uPlane2.xyz) > 0.5) {\n        vec3 projection2 = vec3(1.);\n        intersectionProjection(\n          uPlane2,\n          uSlice,\n          projection2\n        );\n\n        vec4 projInter2 = (vProjectionViewMatrix * vec4(projection2, 1.));\n        vec3 ndc2 = projInter2.xyz / projInter2.w;\n        vec2 screenSpace2 = (ndc2.xy * .5 + .5) * vec2(uCanvasWidth, uCanvasHeight);\n\n        float d2 = distance(gl_FragCoord.xy, screenSpace2.xy);\n        c2 = vec4(uPlaneColor2, 1. - smoothstep(.5, .7, d2));\n      }\n\n      // localizer #3\n      if(length(uPlane3.xyz) > 0.5) {\n        vec3 projection3 = vec3(1.);\n        intersectionProjection(\n          uPlane3,\n          uSlice,\n          projection3\n        );\n\n        vec4 projInter3 = (vProjectionViewMatrix * vec4(projection3, 1.));\n        vec3 ndc3 = projInter3.xyz / projInter3.w;\n        vec2 screenSpace3 = (ndc3.xy * .5 + .5) * vec2(uCanvasWidth, uCanvasHeight);\n\n        float d3 = distance(gl_FragCoord.xy, screenSpace3.xy);\n        c3 = vec4(uPlaneColor3, 1. - smoothstep(.5, .7, d3));\n      }\n\n      // float uBorderDashLength = 10.0;\n      // float uBorderWidth = 2.0;\n      // float valueX = mod(gl_FragCoord.x, 2. * uBorderDashLength);\n      // float valueY = mod(gl_FragCoord.y, 2. * uBorderDashLength);\n      // if( valueX < uBorderDashLength || valueY < uBorderDashLength ){\n        vec3 colorMix = c1.xyz*c1.w + c2.xyz*c2.w + c3.xyz*c3.w;\n        gl_FragColor = vec4(colorMix, max(max(c1.w, c2.w),c3.w)*0.5);\n        return;\n      // }\n      \n      // gl_FragColor = vec4(0., 0., 0., 0.);\n      // return;\n}\n   "},a.prototype.compute=function(){return"\n// uniforms\n"+this.uniforms()+"\n\n// varying (should fetch it from vertex directly)\nvarying vec4 vPos;\nvarying mat4 vProjectionViewMatrix;\n\n// tailored functions\n"+this.functions()+"\n\n// main loop\n"+this._main+"\n      "},a}();t.a=e},function(a,t){"use strict";function o(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}var e=function(){function a(t){o(this,a),this._container=t,this._modes={load:{name:"load",color:"#FFF56F"},parse:{name:"parse",color:"#2196F3"}},this.requestAnimationFrameID=null,this._mode=null,this._value=null,this._total=null,this.init()}return a.prototype.free=function(){var e=this._container.getElementsByClassName("progress container");0<e.length&&e[0].parentNode.removeChild(e[0]),e=null,window.cancelAnimationFrame(this.requestAnimationFrameID)},a.prototype.init=function(){var a=this._domContainer();for(var t in this._modes)if(this._modes.hasOwnProperty(t)){var e=this._domBar(this._modes[t]);a.appendChild(e),e=null}this._container.appendChild(a),a=null,this.updateUI()},a.prototype.update=function(a,t,e){this._mode=e,this._value=a,0===t?(this._total=a,this._value=Math.random()*a):this._total=t},a.prototype.updateUI=function(){var a=this;if(this.requestAnimationFrameID=requestAnimationFrame(function(){a.updateUI()}),!(this._modes.hasOwnProperty(this._mode)&&this._modes[this._mode].hasOwnProperty("name")&&this._modes[this._mode].hasOwnProperty("color")))return!1;var t=P(100*(this._value/this._total)),e=this._modes[this._mode].color,o=this._container.getElementsByClassName("progress "+this._modes[this._mode].name);0<o.length&&(o[0].style.borderColor=e,o[0].style.width=t+"%"),o=null},a.prototype._domContainer=function(){var e=document.createElement("div");return e.classList.add("progress"),e.classList.add("container"),e.style.width="100%",e.style.height="8px",e.style.position="absolute",e.style.backgroundColor="rgba(158, 158, 158, 0.5)",e.style.top="0",e.style.zIndex="1",e},a.prototype._domBar=function(a){if(!a.hasOwnProperty("name")||!a.hasOwnProperty("color"))return window.console.log("Invalid mode provided."),window.console.log(a),!1;var t=document.createElement("div");return t.classList.add(a.name),t.classList.add("progress"),t.style.border="2px solid "+a.color,t.style.width="0%",t},a}();t.a=e},function(m,t,e){"use strict";function _(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function i(a,o){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o&&("object"==("undefined"===typeof o?"undefined":babelHelpers.typeof(o))||"function"==typeof o)?o:a}function r(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof o?"undefined":babelHelpers.typeof(o)));a.prototype=Object.create(o&&o.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(a,o):a.__proto__=o)}var o=e(31),g=e(43),s=e(44),l=e(45),a=e(48),c=e(0),n=function(){function a(a,o){for(var e=0,r;e<o.length;e++)r=o[e],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}return function(t,e,o){return e&&a(t.prototype,e),o&&a(t,o),t}}(),p=function(u){function t(e){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:new c.f(0,0,0),a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:new c.f(0,0,1),n=4<arguments.length&&void 0!==arguments[4]?arguments[4]:"IJK";_(this,t);var p=i(this,u.call(this));return p._stack=e,p._invert=p._stack.invert,p._lut="none",p._lutTexture=null,p._intensityAuto=!0,p._interpolation=1,p._index=r,p._windowWidth=null,p._windowCenter=null,p._rescaleSlope=null,p._rescaleIntercept=null,p._canvasWidth=0,p._canvasHeight=0,p._borderColor=null,p._planePosition=o,p._planeDirection=a,p._aaBBspace=n,p._material=null,p._textures=[],p._shadersFragment=l.a,p._shadersVertex=s.a,p._uniforms=g.a.uniforms(),p._geometry=null,p._mesh=null,p._visible=!0,p._init(),p._create(),p}return r(t,u),t.prototype._init=function(){if(this._stack&&this._stack._prepared&&this._stack._packed)if("IJK"===this._aaBBspace)this._halfDimensions=this._stack.halfDimensionsIJK,this._center=new c.f(this._stack.halfDimensionsIJK.x-.5,this._stack.halfDimensionsIJK.y-.5,this._stack.halfDimensionsIJK.z-.5),this._toAABB=new c.c;else{var e=this._stack.AABBox();this._halfDimensions=e.clone().multiplyScalar(.5),this._center=this._stack.centerAABBox(),this._toAABB=this._stack.lps2AABB}},t.prototype._create=function(){if(this._stack&&this._stack.prepared&&this._stack.packed){try{this._geometry=new o.a(this._halfDimensions,this._center,this._planePosition,this._planeDirection,this._toAABB)}catch(e){return window.console.log(e),void window.console.log("invalid slice geometry - exiting...")}this._geometry.vertices&&(this._material||(this._uniforms.uTextureSize.value=this._stack.textureSize,this._uniforms.uDataDimensions.value=[this._stack.dimensionsIJK.x,this._stack.dimensionsIJK.y,this._stack.dimensionsIJK.z],this._uniforms.uWorldToData.value=this._stack.lps2IJK,this._uniforms.uNumberOfChannels.value=this._stack.numberOfChannels,this._uniforms.uPixelType.value=this._stack.pixelType,this._uniforms.uBitsAllocated.value=this._stack.bitsAllocated,this._uniforms.uPackedPerPixel.value=this._stack.packedPerPixel,this._prepareTexture(),this._uniforms.uTextureContainer.value=this._textures,this._createMaterial({side:THREE.DoubleSide})),this.updateIntensitySettings(),this.updateIntensitySettingsUniforms(),this._mesh=new THREE.Mesh(this._geometry,this._material),"IJK"===this._aaBBspace&&this._mesh.applyMatrix(this._stack.ijk2LPS),this._mesh.visible=this._visible,this.add(this._mesh))}},t.prototype.updateIntensitySettings=function(){this._intensityAuto?(this.updateIntensitySetting("windowCenter"),this.updateIntensitySetting("windowWidth"),this.updateIntensitySetting("rescaleSlope"),this.updateIntensitySetting("rescaleIntercept")):(null===this._windowCenter&&(this._windowCenter=this._stack.windowCenter),null===this.__windowWidth&&(this._windowWidth=this._stack.windowWidth),null===this._rescaleSlope&&(this._rescaleSlope=this._stack.rescaleSlope),null===this._rescaleIntercept&&(this._rescaleIntercept=this._stack.rescaleIntercept))},t.prototype.updateIntensitySettingsUniforms=function(){var e=0;0>this._stack._minMax[0]&&(e-=this._stack._minMax[0]),this._uniforms.uRescaleSlopeIntercept.value=[this._rescaleSlope,this._rescaleIntercept],this._uniforms.uWindowCenterWidth.value=[e+this._windowCenter,this._windowWidth],this._uniforms.uInvert.value=!0===this._invert?1:0,this._uniforms.uInterpolation.value=this._interpolation,"none"===this._lut?this._uniforms.uLut.value=0:(this._uniforms.uLut.value=1,this._uniforms.uTextureLUT.value=this._lutTexture)},t.prototype.updateIntensitySetting=function(e){this["_"+e]=this._stack.frame[this._index]&&this._stack.frame[this._index][e]?this._stack.frame[this._index][e]:this._stack[e]},t.prototype._update=function(){this._mesh&&(this.remove(this._mesh),this._mesh.geometry.dispose(),this._mesh.geometry=null,this._mesh=null),this._create()},t.prototype.dispose=function(){for(var e=0;e<this._textures.length;e++)this._textures[e].dispose(),this._textures[e]=null;this._textures=null,this._shadersFragment=null,this._shadersVertex=null,this._uniforms=null,this.remove(this._mesh),this._mesh.geometry.dispose(),this._mesh.geometry=null,this._mesh.material.dispose(),this._mesh.material=null,this._mesh=null,this._geometry.dispose(),this._geometry=null,this._material.vertexShader=null,this._material.fragmentShader=null,this._material.uniforms=null,this._material.dispose(),this._material=null,this._stack=null},t.prototype.cartesianEquation=function(){if(!this._geometry||!this._geometry.vertices||3>this._geometry.vertices.length)return new c.g;var l=this._geometry.vertices,t=this._stack.ijk2LPS,e=new c.f(l[0].x,l[0].y,l[0].z).applyMatrix4(t),n=new c.f(l[1].x,l[1].y,l[1].z).applyMatrix4(t),i=new c.f(l[2].x,l[2].y,l[2].z).applyMatrix4(t),r=new c.f,o=new c.f,a=r.subVectors(i,n).cross(o.subVectors(e,n)).normalize();return new c.g(a.x,a.y,a.z,-a.dot(e))},n(t,[{key:"stack",get:function(){return this._stack},set:function(e){this._stack=e}},{key:"windowWidth",get:function(){return this._windowWidth},set:function(e){this._windowWidth=e,this.updateIntensitySettingsUniforms()}},{key:"windowCenter",get:function(){return this._windowCenter},set:function(e){this._windowCenter=e,this.updateIntensitySettingsUniforms()}},{key:"rescaleSlope",get:function(){return this._rescaleSlope},set:function(e){this._rescaleSlope=e,this.updateIntensitySettingsUniforms()}},{key:"rescaleIntercept",get:function(){return this._rescaleIntercept},set:function(e){this._rescaleIntercept=e,this.updateIntensitySettingsUniforms()}},{key:"invert",get:function(){return this._invert},set:function(e){this._invert=e,this.updateIntensitySettingsUniforms()}},{key:"lut",get:function(){return this._lut},set:function(e){this._lut=e}},{key:"lutTexture",get:function(){return this._lutTexture},set:function(e){this._lutTexture=e,this.updateIntensitySettingsUniforms()}},{key:"intensityAuto",get:function(){return this._intensityAuto},set:function(e){this._intensityAuto=e,this.updateIntensitySettings(),this.updateIntensitySettingsUniforms()}},{key:"interpolation",get:function(){return this._interpolation},set:function(e){this._interpolation=e,this.updateIntensitySettingsUniforms(),this._updateMaterial()}},{key:"index",get:function(){return this._index},set:function(e){this._index=e,this._update()}},{key:"planePosition",set:function(e){this._planePosition=e,this._update()},get:function(){return this._planePosition}},{key:"planeDirection",set:function(e){this._planeDirection=e,this._update()},get:function(){return this._planeDirection}},{key:"halfDimensions",set:function(e){this._halfDimensions=e},get:function(){return this._halfDimensions}},{key:"center",set:function(e){this._center=e},get:function(){return this._center}},{key:"aabbSpace",set:function(e){this._aaBBspace=e,this._init()},get:function(){return this._aaBBspace}},{key:"mesh",set:function(e){this._mesh=e},get:function(){return this._mesh}},{key:"geometry",set:function(e){this._geometry=e},get:function(){return this._geometry}},{key:"canvasWidth",set:function(e){this._canvasWidth=e,this._uniforms.uCanvasWidth.value=this._canvasWidth},get:function(){return this._canvasWidth}},{key:"canvasHeight",set:function(e){this._canvasHeight=e,this._uniforms.uCanvasHeight.value=this._canvasHeight},get:function(){return this._canvasHeight}},{key:"borderColor",set:function(e){this._borderColor=e,this._uniforms.uBorderColor.value=new c.a(e)},get:function(){return this._borderColor}}]),t}(Object(a.a)(THREE.Object3D));t.a=p},function(a,t,e){"use strict";function n(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}var i=e(0),r=function(){function e(){n(this,e)}return e.uniforms=function(){return{uTextureSize:{type:"i",value:0,typeGLSL:"int"},uTextureContainer:{type:"tv",value:[],typeGLSL:"sampler2D",length:7},uDataDimensions:{type:"iv",value:[0,0,0],typeGLSL:"ivec3"},uWorldToData:{type:"m4",value:new i.c,typeGLSL:"mat4"},uWindowCenterWidth:{type:"fv1",value:[0,0],typeGLSL:"float",length:2},uRescaleSlopeIntercept:{type:"fv1",value:[0,0],typeGLSL:"float",length:2},uNumberOfChannels:{type:"i",value:1,typeGLSL:"int"},uBitsAllocated:{type:"i",value:8,typeGLSL:"int"},uInvert:{type:"i",value:0,typeGLSL:"int"},uLut:{type:"i",value:0,typeGLSL:"int"},uTextureLUT:{type:"t",value:[],typeGLSL:"sampler2D"},uLutSegmentation:{type:"i",value:0,typeGLSL:"int"},uTextureLUTSegmentation:{type:"t",value:[],typeGLSL:"sampler2D"},uPixelType:{type:"i",value:0,typeGLSL:"int"},uPackedPerPixel:{type:"i",value:1,typeGLSL:"int"},uInterpolation:{type:"i",value:1,typeGLSL:"int"},uCanvasWidth:{type:"f",value:0,typeGLSL:"float"},uCanvasHeight:{type:"f",value:0,typeGLSL:"float"},uBorderColor:{type:"v3",value:[1,0,0.5],typeGLSL:"vec3"},uBorderWidth:{type:"f",value:2,typeGLSL:"float"},uBorderMargin:{type:"f",value:2,typeGLSL:"float"},uBorderDashLength:{type:"f",value:10,typeGLSL:"float"}}},e}();t.a=r},function(a,t){"use strict";function e(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function a(){e(this,a)}return a.prototype.compute=function(){return"\nvarying vec4 vPos;\n\n//\n// main\n//\nvoid main() {\n\n  vPos = modelMatrix * vec4(position, 1.0 );\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0 );\n\n}\n        "},a}();t.a=o},function(a,t,e){"use strict";function n(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}var i=e(46),r=function(){function a(t){n(this,a),this._uniforms=t,this._functions={},this._main=""}return a.prototype.functions=function(){""===this._main&&this.main();var a="";for(var t in this._functions)a+=this._functions[t]+"\n";return a},a.prototype.uniforms=function(){var a="";for(var t in this._uniforms){var e=this._uniforms[t];a+="uniform "+e.typeGLSL+" "+t,e&&e.length&&(a+="["+e.length+"]"),a+=";\n"}return a},a.prototype.main=function(){this._main="\nvoid main(void) {\n\n  // draw border if slice is cropped\n  // float uBorderDashLength = 10.;\n\n  if( uCanvasWidth > 0. &&\n      ((gl_FragCoord.x > uBorderMargin && (gl_FragCoord.x - uBorderMargin) < uBorderWidth) ||\n       (gl_FragCoord.x < (uCanvasWidth - uBorderMargin) && (gl_FragCoord.x + uBorderMargin) > (uCanvasWidth - uBorderWidth) ))){\n    float valueY = mod(gl_FragCoord.y, 2. * uBorderDashLength);\n    if( valueY < uBorderDashLength && gl_FragCoord.y > uBorderMargin && gl_FragCoord.y < (uCanvasHeight - uBorderMargin) ){\n      gl_FragColor = vec4(uBorderColor, 1.);\n      return;\n    }\n  }\n\n  if( uCanvasHeight > 0. &&\n      ((gl_FragCoord.y > uBorderMargin && (gl_FragCoord.y - uBorderMargin) < uBorderWidth) ||\n       (gl_FragCoord.y < (uCanvasHeight - uBorderMargin) && (gl_FragCoord.y + uBorderMargin) > (uCanvasHeight - uBorderWidth) ))){\n    float valueX = mod(gl_FragCoord.x, 2. * uBorderDashLength);\n    if( valueX < uBorderDashLength && gl_FragCoord.x > uBorderMargin && gl_FragCoord.x < (uCanvasWidth - uBorderMargin) ){\n      gl_FragColor = vec4(uBorderColor, 1.);\n      return;\n    }\n  }\n\n  // get texture coordinates of current pixel\n  vec4 dataCoordinates = uWorldToData * vPos;\n  vec3 currentVoxel = dataCoordinates.xyz;\n  vec4 dataValue = vec4(0., 0., 0., 0.);\n  vec3 gradient = vec3(0., 0., 0.);\n  "+Object(i.a)(this,"currentVoxel","dataValue","gradient")+"\n\n  // how do we deal wil more than 1 channel?\n  float intensity = dataValue.r;\n  if(uNumberOfChannels == 1){\n    float normalizedIntensity = dataValue.r;\n\n    // rescale/slope\n    normalizedIntensity =\n      normalizedIntensity*uRescaleSlopeIntercept[0] + uRescaleSlopeIntercept[1];\n\n    float windowMin = uWindowCenterWidth[0] - uWindowCenterWidth[1] * 0.5;\n    normalizedIntensity =\n      ( normalizedIntensity - windowMin ) / uWindowCenterWidth[1];\n\n    dataValue.r = dataValue.g = dataValue.b = normalizedIntensity;\n    dataValue.a = 1.0;\n  }\n\n  // Apply LUT table...\n  //\n  if(uLut == 1){\n    // should opacity be grabbed there?\n    dataValue = texture2D( uTextureLUT, vec2( dataValue.r , 1.0) );\n  }\n\n  if(uLutSegmentation == 1){\n    // should opacity be grabbed there?\n    //\n    float textureWidth = 256.;\n    float textureHeight = 128.;\n    float min = 0.;\n    // start at 0!\n    int adjustedIntensity = int(floor(intensity + 0.5));\n\n    // Get row and column in the texture\n    int colIndex = int(mod(float(adjustedIntensity), textureWidth));\n    int rowIndex = int(floor(float(adjustedIntensity)/textureWidth));\n\n    float texWidth = 1./textureWidth;\n    float texHeight = 1./textureHeight;\n  \n    // Map row and column to uv\n    vec2 uv = vec2(0,0);\n    uv.x = 0.5 * texWidth + (texWidth * float(colIndex));\n    uv.y = 1. - (0.5 * texHeight + float(rowIndex) * texHeight);\n\n    dataValue = texture2D( uTextureLUTSegmentation, uv );\n    // uv.x = (0.5 + float(colIndex)) / textureWidth;\n    // uv.y = 1. - (0.5 + float(rowIndex)) / textureHeight;\n    // dataValue = texture2D( uTextureLUTSegmentation, uv );\n  }\n\n  if(uInvert == 1){\n    dataValue = vec4(1.) - dataValue;\n    // how do we deal with that and opacity?\n    dataValue.a = 1.;\n  }\n\n  gl_FragColor = dataValue;\n\n    // if on edge, draw line\n  // float xPos = gl_FragCoord.x/512.;\n  // float yPos = gl_FragCoord.y/512.;\n  // if( xPos < 0.05 || xPos > .95 || yPos < 0.05 || yPos > .95){\n  //   gl_FragColor = vec4(xPos, yPos, 0., 1.);//dataValue;\n  //   //return;\n  // }\n\n}\n   "},a.prototype.compute=function(){return"\n// uniforms\n"+this.uniforms()+"\n\n// varying (should fetch it from vertex directly)\nvarying vec4      vPos;\n\n// tailored functions\n"+this.functions()+"\n\n// main loop\n"+this._main+"\n      "},a}();t.a=r},function(a,t,e){"use strict";var l=e(47),i=e(107);t.a=function(a,t,e,r){switch(a._uniforms.uInterpolation.value){case 0:return l.a.api(a,t,e);case 1:return i.a.api(a,t,e,r);default:return l.a.api(a,t,e);}}},function(d,t,e){"use strict";function p(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function i(a,o){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o&&("object"==("undefined"===typeof o?"undefined":babelHelpers.typeof(o))||"function"==typeof o)?o:a}function r(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof o?"undefined":babelHelpers.typeof(o)));a.prototype=Object.create(o&&o.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(a,o):a.__proto__=o)}var o=e(10),a=e(105),n=e(106),l=function(o){function t(){p(this,t);var e=i(this,o.call(this));return e.name="interpolationIdentity",e._currentVoxel="currentVoxel",e._dataValue="dataValue",e}return r(t,o),t.prototype.api=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._base,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this._currentVoxel,e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this._dataValue;return this._base=a,this.compute(t,e)},t.prototype.compute=function(a,t){return this.computeDefinition(),this._base._functions[this._name]=this._definition,this._name+"("+a+", "+t+");"},t.prototype.computeDefinition=function(){this._definition="\nvoid "+this._name+"(in vec3 currentVoxel, out vec4 dataValue){\n  // lower bound\n  vec3 rcurrentVoxel = vec3(floor(currentVoxel.x + 0.5 ), floor(currentVoxel.y + 0.5 ), floor(currentVoxel.z + 0.5 ));\n  ivec3 voxel = ivec3(int(rcurrentVoxel.x), int(rcurrentVoxel.y), int(rcurrentVoxel.z));\n\n  vec4 tmp = vec4(0., 0., 0., 0.);\n  int offset = 0;\n\n  "+n.a.api(this._base,"voxel","tmp","offset")+"\n  "+a.a.api(this._base,"tmp","offset","dataValue")+"\n}\n    "},t}(o.a);t.a=new l},function(a,t){"use strict";function n(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function i(a,o){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o&&("object"==("undefined"===typeof o?"undefined":babelHelpers.typeof(o))||"function"==typeof o)?o:a}function r(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof o?"undefined":babelHelpers.typeof(o)));a.prototype=Object.create(o&&o.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(a,o):a.__proto__=o)}t.a=function(e){return function(a){function t(){return n(this,t),i(this,a.apply(this,arguments))}return r(t,a),t.prototype._createMaterial=function(a){var t=new this._shadersFragment(this._uniforms),e=new this._shadersVertex,o={uniforms:this._uniforms,vertexShader:e.compute(),fragmentShader:t.compute()},n=Object.assign(a,o);this._material=new THREE.ShaderMaterial(n),this._material.needsUpdate=!0},t.prototype._updateMaterial=function(){var a=new this._shadersFragment(this._uniforms),t=new this._shadersVertex;this._material.vertexShader=t.compute(),this._material.fragmentShader=a.compute(),this._material.needsUpdate=!0},t.prototype._prepareTexture=function(){this._textures=[];for(var a=0,t;a<this._stack._rawData.length;a++)t=new THREE.DataTexture(this._stack.rawData[a],this._stack.textureSize,this._stack.textureSize,this._stack.textureType,THREE.UnsignedByteType,THREE.UVMapping,THREE.ClampToEdgeWrapping,THREE.ClampToEdgeWrapping,THREE.NearestFilter,THREE.NearestFilter),t.needsUpdate=!0,t.flipY=!0,this._textures.push(t)},t}(e)}},function(a,t,e){"use strict";function n(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}var i=e(0),r=function(){function e(){n(this,e)}return e.uniforms=function(){return{uTextureSize:{type:"i",value:0,typeGLSL:"int"},uTextureContainer:{type:"tv",value:[],typeGLSL:"sampler2D",length:7},uDataDimensions:{type:"iv",value:[0,0,0],typeGLSL:"ivec3"},uWorldToData:{type:"m4",value:new i.c,typeGLSL:"mat4"},uWindowCenterWidth:{type:"fv1",value:[0,0],typeGLSL:"float",length:2},uRescaleSlopeIntercept:{type:"fv1",value:[0,0],typeGLSL:"float",length:2},uNumberOfChannels:{type:"i",value:1,typeGLSL:"int"},uBitsAllocated:{type:"i",value:8,typeGLSL:"int"},uInvert:{type:"i",value:0,typeGLSL:"int"},uLut:{type:"i",value:0,typeGLSL:"int"},uTextureLUT:{type:"t",value:[],typeGLSL:"sampler2D"},uPixelType:{type:"i",value:0,typeGLSL:"int"},uPackedPerPixel:{type:"i",value:1,typeGLSL:"int"},uInterpolation:{type:"i",value:1,typeGLSL:"int"},uWorldBBox:{type:"fv1",value:[0,0,0,0,0,0],typeGLSL:"float",length:6},uSteps:{type:"i",value:256,typeGLSL:"int"},uAlphaCorrection:{type:"f",value:.5,typeGLSL:"float"},uFrequence:{type:"f",value:0,typeGLSL:"float"},uAmplitude:{type:"f",value:0,typeGLSL:"float"},uShading:{type:"i",value:1,typeGLSL:"int"},uAmbient:{type:"f",value:.1,typeGLSL:"float"},uAmbientColor:{type:"v3",value:[1,1,0],typeGLSL:"vec3"},uSampleColorToAmbient:{type:"i",value:1,typeGLSL:"int"},uSpecular:{type:"f",value:1,typeGLSL:"float"},uSpecularColor:{type:"v3",value:[1,1,1],typeGLSL:"vec3"},uDiffuse:{type:"f",value:.3,typeGLSL:"float"},uDiffuseColor:{type:"v3",value:[1,1,0],typeGLSL:"vec3"},uSampleColorToDiffuse:{type:"i",value:1,typeGLSL:"int"},uShininess:{type:"f",value:5,typeGLSL:"float"},uLightPosition:{type:"v3",value:[0,0,0],typeGLSL:"vec3"},uLightPositionInCamera:{type:"i",value:1,typeGLSL:"int"},uIntensity:{type:"v3",value:[0.8,0.8,0.8],typeGLSL:"vec3"},uAlgorithm:{type:"i",value:0,typeGLSL:"int"}}},e}();t.a=r},function(a,t){"use strict";function e(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function a(){e(this,a)}return a.prototype.compute=function(){return"\nvarying vec4 vPos;\n\n//\n// main\n//\nvoid main() {\n\n  vPos = modelMatrix * vec4(position, 1.0 );\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0 );\n\n}\n        "},a}();t.a=o},function(l,t,e){"use strict";function n(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}var i=e(46),r=e(110),o=function(){function a(t){n(this,a),this._uniforms=t,this._functions={},this._main=""}return a.prototype.functions=function(){""===this._main&&this.main();var a="";for(var t in this._functions)a+=this._functions[t]+"\n";return a},a.prototype.uniforms=function(){var a="";for(var t in this._uniforms){var e=this._uniforms[t];a+="uniform "+e.typeGLSL+" "+t,e&&e.length&&(a+="["+e.length+"]"),a+=";\n"}return a},a.prototype.main=function(){this._main="\nvoid getIntensity(in vec3 dataCoordinates, out float intensity, out vec3 gradient){\n\n  vec4 dataValue = vec4(0., 0., 0., 0.);\n  "+Object(i.a)(this,"dataCoordinates","dataValue","gradient")+"\n\n  intensity = dataValue.r;\n\n  // rescale/slope\n  intensity = intensity*uRescaleSlopeIntercept[0] + uRescaleSlopeIntercept[1];\n  // window level\n  float windowMin = uWindowCenterWidth[0] - uWindowCenterWidth[1] * 0.5;\n  intensity = ( intensity - windowMin ) / uWindowCenterWidth[1];\n}\n\nmat4 inverse(mat4 m) {\n  float\n    a00 = m[0][0], a01 = m[0][1], a02 = m[0][2], a03 = m[0][3],\n    a10 = m[1][0], a11 = m[1][1], a12 = m[1][2], a13 = m[1][3],\n    a20 = m[2][0], a21 = m[2][1], a22 = m[2][2], a23 = m[2][3],\n    a30 = m[3][0], a31 = m[3][1], a32 = m[3][2], a33 = m[3][3],\n\n    b00 = a00 * a11 - a01 * a10,\n    b01 = a00 * a12 - a02 * a10,\n    b02 = a00 * a13 - a03 * a10,\n    b03 = a01 * a12 - a02 * a11,\n    b04 = a01 * a13 - a03 * a11,\n    b05 = a02 * a13 - a03 * a12,\n    b06 = a20 * a31 - a21 * a30,\n    b07 = a20 * a32 - a22 * a30,\n    b08 = a20 * a33 - a23 * a30,\n    b09 = a21 * a32 - a22 * a31,\n    b10 = a21 * a33 - a23 * a31,\n    b11 = a22 * a33 - a23 * a32,\n\n    det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  return mat4(\n    a11 * b11 - a12 * b10 + a13 * b09,\n    a02 * b10 - a01 * b11 - a03 * b09,\n    a31 * b05 - a32 * b04 + a33 * b03,\n    a22 * b04 - a21 * b05 - a23 * b03,\n    a12 * b08 - a10 * b11 - a13 * b07,\n    a00 * b11 - a02 * b08 + a03 * b07,\n    a32 * b02 - a30 * b05 - a33 * b01,\n    a20 * b05 - a22 * b02 + a23 * b01,\n    a10 * b10 - a11 * b08 + a13 * b06,\n    a01 * b08 - a00 * b10 - a03 * b06,\n    a30 * b04 - a31 * b02 + a33 * b00,\n    a21 * b02 - a20 * b04 - a23 * b00,\n    a11 * b07 - a10 * b09 - a12 * b06,\n    a00 * b09 - a01 * b07 + a02 * b06,\n    a31 * b01 - a30 * b03 - a32 * b00,\n    a20 * b03 - a21 * b01 + a22 * b00) / det;\n}\n\n/**\n * Adapted from original sources\n * \n * Original code: \n * http://jamie-wong.com/2016/07/15/ray-marching-signed-distance-functions/\n * https://www.shadertoy.com/view/lt33z7\n * \n * The vec3 returned is the RGB color of the light's contribution.\n *\n * k_a: Ambient color\n * k_d: Diffuse color\n * k_s: Specular color\n * alpha: Shininess coefficient\n * p: position of point being lit\n * eye: the position of the camera\n * lightPos: the position of the light\n * lightIntensity: color/intensity of the light\n *\n * See https://en.wikipedia.org/wiki/Phong_reflection_model#Description\n */\nvec3 phongShading(vec3 k_a, vec3 k_d, vec3 k_s, float shininess, vec3 p, vec3 eye,\n  vec3 lightPos, vec3 lightIntensity, vec3 normal) {\n  vec3 N = normal;\n  vec3 L = lightPos - p;\n  if (length(L) > 0.) {\n    L = L / length(L);\n  }\n  vec3 V = eye - p;\n  if (length(V) > 0.) {\n    V = V / length(V);\n  }\n  vec3 R = reflect(-L, N);\n  if (length(R) > 0.) {\n    R = R / length(R);\n  }\n\n  // https://en.wikipedia.org/wiki/Blinn%E2%80%93Phong_shading_model\n  vec3 h = L + V;\n  vec3 H = h;\n  if (length(h) > 0.) {\n    H = H / length(h);\n  }\n\n  float dotLN = dot(L, N);\n  float dotRV = dot(R, V);\n\n  if (dotLN < 0.) {\n    // Light not visible from this point on the surface\n    return k_a;\n  } \n\n  if (dotRV < 0.) {\n    // Light reflection in opposite direction as viewer, apply only diffuse\n    // component\n    return k_a + lightIntensity * (k_d * dotLN);\n  }\n\n  float specAngle = max(dot(H, normal), 0.0);\n  float specular = pow(dotRV, shininess); //pow(specAngle, shininess); // \n  return k_a + lightIntensity * (k_d * dotLN  + k_s * specular);\n}\n\n\nfloat PHI = 1.61803398874989484820459 * 00000.1; // Golden Ratio   \nfloat PI  = 3.14159265358979323846264 * 00000.1; // PI\nfloat SRT = 1.41421356237309504880169 * 10000.0; // Square Root of Two\n\n// Gold Noise function ?  Should use a texture\n//\nfloat gold_noise(in vec2 coordinate, in float seed)\n{\n    return fract(sin(dot(coordinate*seed, vec2(PHI, PI)))*SRT);\n}\n\nvoid main(void) {\n  const int maxSteps = 1024;\n\n  // the ray\n  vec3 rayOrigin = cameraPosition;\n  vec3 rayDirection = normalize(vPos.xyz - rayOrigin);\n\n  vec3 lightOrigin = uLightPositionInCamera == 1 ? cameraPosition : uLightPosition;\n\n  // the Axe-Aligned B-Box\n  vec3 AABBMin = vec3(uWorldBBox[0], uWorldBBox[2], uWorldBBox[4]);\n  vec3 AABBMax = vec3(uWorldBBox[1], uWorldBBox[3], uWorldBBox[5]);\n\n  // Intersection ray/bbox\n  float tNear, tFar;\n  bool intersect = false;\n  "+r.a.api(this,"rayOrigin","rayDirection","AABBMin","AABBMax","tNear","tFar","intersect")+"\n  if (tNear < 0.0) tNear = 0.0;\n\n  // init the ray marching\n  float tCurrent = tNear;\n  float tStep = (tFar - tNear) / float(uSteps);\n  vec4 accumulatedColor = vec4(0.0);\n  float accumulatedAlpha = 0.0;\n\n  // MIP volume rendering\n  float maxIntensity = 0.0;\n\n  mat4 dataToWorld = inverse(uWorldToData);\n\n  // rayOrigin -= rayDirection * 0.1; // gold_noise(vPos.xz, vPos.y) / 100.;  \n\n  for(int rayStep = 0; rayStep < maxSteps; rayStep++){\n    vec3 currentPosition = rayOrigin + rayDirection * tCurrent;\n    // some non-linear FUN\n    // some occlusion issue to be fixed\n    vec3 transformedPosition = currentPosition; //transformPoint(currentPosition, uAmplitude, uFrequence);\n    // world to data coordinates\n    // rounding trick\n    // first center of first voxel in data space is CENTERED on (0,0,0)\n    vec4 dataCoordinatesRaw = uWorldToData * vec4(transformedPosition, 1.0);\n    vec3 currentVoxel = vec3(dataCoordinatesRaw.x, dataCoordinatesRaw.y, dataCoordinatesRaw.z);\n    float intensity = 0.0;\n    vec3 gradient = vec3(0., 0., 0.);\n    getIntensity(currentVoxel, intensity, gradient);\n    // map gradient to world space and normalize before using\n    // we avoid to call \"normalize\" as it may be undefined if vector length == 0.\n    gradient = (vec3(dataToWorld * vec4(gradient, 0.)));\n    if (length(gradient) > 0.0) {\n      gradient = normalize(gradient);\n    }\n\n    vec4 colorSample;\n    float alphaSample;\n    if(uLut == 1){\n      vec4 colorFromLUT = texture2D( uTextureLUT, vec2( intensity, 1.0) );\n      // 256 colors\n      colorSample = colorFromLUT;\n      alphaSample = colorFromLUT.a;\n    }\n    else{\n      alphaSample = intensity;\n      colorSample.r = colorSample.g = colorSample.b = intensity;\n    }\n\n    // ray marching algorithm\n    // shading on\n    // interpolation on\n    if (uAlgorithm == 0 && uShading == 1 && uInterpolation != 0) {\n      //  && alphaSample > .3\n      vec3 ambientComponent = uSampleColorToAmbient == 1 ? colorSample.xyz : uAmbientColor;\n      ambientComponent *= uAmbient;\n      vec3 diffuseComponent = uSampleColorToDiffuse == 1 ? colorSample.xyz : uDiffuseColor;\n      diffuseComponent *= uDiffuse;\n      vec3 specularComponent = uSpecular * uSpecularColor;\n      float shininess = uShininess;\n      vec3 vIntensity = uIntensity;\n\n      colorSample.xyz += phongShading(\n        ambientComponent,\n        diffuseComponent,\n        specularComponent,\n        shininess,\n        currentPosition.xyz,\n        rayOrigin.xyz,\n        lightOrigin.xyz,\n        vIntensity,\n        gradient);\n    }\n\n    alphaSample = 1.0 - pow((1.0- alphaSample),tStep*uAlphaCorrection);\n    alphaSample *= (1.0 - accumulatedAlpha);\n\n    accumulatedColor += alphaSample * colorSample;\n    accumulatedAlpha += alphaSample;\n\n    tCurrent += tStep;\n\n    if (tCurrent > tFar || (uAlgorithm == 0 && accumulatedAlpha >= 1.0)) break;\n\n    if (uAlgorithm == 1 && (intensity >= maxIntensity)) {\n      maxIntensity = intensity;\n      accumulatedColor = colorSample;\n      accumulatedAlpha = 1.;\n    }\n  }\n\n  gl_FragColor = vec4(accumulatedColor.xyz, accumulatedAlpha);\n}\n   "},a.prototype.compute=function(){return"\n// uniforms\n"+this.uniforms()+"\n\n// varying (should fetch it from vertex directly)\nvarying vec4      vPos;\n\n// tailored functions\n"+this.functions()+"\n\n// main loop\n"+this._main+"\n      "},a}();t.a=o},function(e){"use strict";e.exports=function(l,t,e,n){for(var i=0|65535&l,r=0|65535&l>>>16,o=0;0!==e;){e-=o=2e3<e?2e3:e;do r=0|r+(i=0|i+t[n++]);while(--o);i%=65521,r%=65521}return 0|(i|r<<16)}},function(e){"use strict";var a=function(){for(var a=[],e=0,o;256>e;e++){o=e;for(var t=0;8>t;t++)o=1&o?3988292384^o>>>1:o>>>1;a[e]=o}return a}();e.exports=function(o,t,e,n){o^=-1;for(var r=n;r<n+e;r++)o=o>>>8^a[255&(o^t[r])];return-1^o}},function(c,t,e){"use strict";function d(a,t){if(65537>t&&(a.subarray&&o||!a.subarray&&r))return F.apply(null,p.shrinkBuf(a,t));for(var e="",n=0;n<t;n++)e+=F(a[n]);return e}var p=e(2),r=!0,o=!0;try{F.apply(null,[0])}catch(e){r=!1}try{F.apply(null,new Uint8Array(1))}catch(e){o=!1}for(var i=new p.Buf8(256),a=0;256>a;a++)i[a]=252<=a?6:248<=a?5:240<=a?4:224<=a?3:192<=a?2:1;i[254]=i[254]=1,t.string2buf=function(r){var t=r.length,s=0,l,e,n,i,o;for(i=0;i<t;i++)55296==(64512&(e=r.charCodeAt(i)))&&i+1<t&&56320==(64512&(n=r.charCodeAt(i+1)))&&(e=65536+(e-55296<<10)+(n-56320),i++),s+=128>e?1:2048>e?2:65536>e?3:4;for(l=new p.Buf8(s),o=0,i=0;o<s;i++)55296==(64512&(e=r.charCodeAt(i)))&&i+1<t&&56320==(64512&(n=r.charCodeAt(i+1)))&&(e=65536+(e-55296<<10)+(n-56320),i++),128>e?l[o++]=e:2048>e?(l[o++]=192|e>>>6,l[o++]=128|63&e):65536>e?(l[o++]=224|e>>>12,l[o++]=128|63&e>>>6,l[o++]=128|63&e):(l[o++]=240|e>>>18,l[o++]=128|63&e>>>12,l[o++]=128|63&e>>>6,l[o++]=128|63&e);return l},t.buf2binstring=function(e){return d(e,e.length)},t.binstring2buf=function(a){for(var t=new p.Buf8(a.length),e=0,o=t.length;e<o;e++)t[e]=a.charCodeAt(e);return t},t.buf2string=function(s,t){var e=t||s.length,l=Array(2*e),c,n,r,o;for(n=0,c=0;c<e;)if(128>(r=s[c++]))l[n++]=r;else if(4<(o=i[r]))l[n++]=65533,c+=o-1;else{for(r&=2===o?31:3===o?15:7;1<o&&c<e;)r=r<<6|63&s[c++],o--;1<o?l[n++]=65533:65536>r?l[n++]=r:(r-=65536,l[n++]=55296|1023&r>>10,l[n++]=56320|1023&r)}return d(l,n)},t.utf8border=function(a,t){var e;for((t=t||a.length)>a.length&&(t=a.length),e=t-1;0<=e&&128==(192&a[e]);)e--;return 0>e?t:0===e?t:e+i[a[e]]>t?e:t}},function(e){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},function(e){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(c,t,e){"use strict";function d(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function i(a,o){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o&&("object"==("undefined"===typeof o?"undefined":babelHelpers.typeof(o))||"function"==typeof o)?o:a}function r(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof o?"undefined":babelHelpers.typeof(o)));a.prototype=Object.create(o&&o.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(a,o):a.__proto__=o)}var o=e(22),a=function(){function a(a,o){for(var e=0,r;e<o.length;e++)r=o[e],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}return function(t,e,o){return e&&a(t.prototype,e),o&&a(t,o),t}}(),n=function(o){function t(){d(this,t);var e=i(this,o.call(this));return e._concatenationUID=-1,e._seriesInstanceUID=-1,e._transferSyntaxUID="",e._seriesNumber=-1,e._seriesDescription="",e._seriesDate="",e._studyDescription="",e._studyDate="",e._accessionNumber=-1,e._modality="Modality not set",e._dimensionIndexSequence=[],e._numberOfFrames=0,e._numberOfChannels=1,e._patientID="",e._patientName="",e._patientAge="",e._patientBirthdate="",e._patientSex="",e._segmentationType=null,e._segmentationSegments=[],e._stack=[],e}return r(t,o),t.prototype.validate=function(t){return!!(o.prototype.validate.call(this,t)&&"function"==typeof t.mergeSeries&&t.hasOwnProperty("_seriesInstanceUID")&&t.hasOwnProperty("_numberOfFrames")&&t.hasOwnProperty("_numberOfChannels")&&t.hasOwnProperty("_stack")&&void 0!==t._stack&&Array===t._stack.constructor)},t.prototype.merge=function(e){return!!this.validate(e)&&this._seriesInstanceUID===e.seriesInstanceUID&&this.mergeModels(this._stack,e.stack)},t.prototype.mergeSeries=function(a){var t=[this];return this.mergeModels(t,a),t},a(t,[{key:"seriesInstanceUID",set:function(e){this._seriesInstanceUID=e},get:function(){return this._seriesInstanceUID}},{key:"transferSyntaxUID",set:function(e){this._transferSyntaxUID=e},get:function(){return this._transferSyntaxUID}},{key:"transferSyntaxUIDLabel",get:function(){switch(this._transferSyntaxUID){case"1.2.840.10008.1.2.4.90":return"JPEG 2000 Lossless";case"1.2.840.10008.1.2.4.91":return"JPEG 2000 Lossy";case"1.2.840.10008.1.2.4.57":return"JPEG Lossless, Nonhierarchical (Processes 14)";case"1.2.840.10008.1.2.4.70":return"JPEG Lossless, Nonhierarchical (Processes 14 [Selection 1])";case"1.2.840.10008.1.2.4.50":return"JPEG Baseline lossy process 1 (8 bit)";case"1.2.840.10008.1.2.4.51":return"JPEG Baseline lossy process 2 & 4 (12 bit)";case"1.2.840.10008.1.2":return"Implicit VR Little Endian";case"1.2.840.10008.1.2.1":return"Explicit VR Little Endian";case"1.2.840.10008.1.2.2":return"Explicit VR Big Endian";default:return"Unknown transfersyntax: "+this._transferSyntaxUID;}}},{key:"studyDate",set:function(e){this._studyDate=e},get:function(){return this._studyDate}},{key:"studyDescription",set:function(e){this._studyDescription=e},get:function(){return this._studyDescription}},{key:"seriesDate",set:function(e){this._seriesDate=e},get:function(){return this._seriesDate}},{key:"seriesDescription",set:function(e){this._seriesDescription=e},get:function(){return this._seriesDescription}},{key:"patientID",set:function(e){this._patientID=e},get:function(){return this._patientID}},{key:"patientName",set:function(e){this._patientName=e},get:function(){return this._patientName}},{key:"patientAge",set:function(e){this._patientAge=e},get:function(){return this._patientAge}},{key:"patientBirthdate",set:function(e){this._patientBirthdate=e},get:function(){return this._patientBirthdate}},{key:"patientSex",set:function(e){this._patientSex=e},get:function(){return this._patientSex}},{key:"numberOfFrames",set:function(e){this._numberOfFrames=e},get:function(){return this._numberOfFrames}},{key:"numberOfChannels",set:function(e){this._numberOfChannels=e},get:function(){return this._numberOfChannels}},{key:"stack",set:function(e){this._stack=e},get:function(){return this._stack}},{key:"modality",set:function(e){this._modality=e},get:function(){return this._modality}},{key:"segmentationType",set:function(e){this._segmentationType=e},get:function(){return this._segmentationType}},{key:"segmentationSegments",set:function(e){this._segmentationSegments=e},get:function(){return this._segmentationSegments}}]),t}(o.a);t.a=n},function(e){"use strict";e.exports=B},function(e){"use strict";e.exports=T},function(d,t,e){"use strict";function p(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function i(a,o){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o&&("object"==("undefined"===typeof o?"undefined":babelHelpers.typeof(o))||"function"==typeof o)?o:a}function r(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof o?"undefined":babelHelpers.typeof(o)));a.prototype=Object.create(o&&o.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(a,o):a.__proto__=o)}var o=e(22),a=e(0),n=function(){function a(a,o){for(var e=0,r;e<o.length;e++)r=o[e],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}return function(t,e,o){return e&&a(t.prototype,e),o&&a(t,o),t}}(),l=function(o){function t(){p(this,t);var e=i(this,o.call(this));return e._sopInstanceUID=null,e._url=null,e._stackID=-1,e._rows=0,e._columns=0,e._dimensionIndexValues=[],e._imagePosition=null,e._imageOrientation=null,e._rightHanded=!0,e._sliceThickness=1,e._spacingBetweenSlices=null,e._pixelRepresentation=0,e._pixelType=0,e._pixelSpacing=null,e._pixelAspectRatio=null,e._pixelData=null,e._instanceNumber=null,e._windowCenter=null,e._windowWidth=null,e._rescaleSlope=null,e._rescaleIntercept=null,e._bitsAllocated=8,e._minMax=null,e._dist=null,e._index=-1,e._referencedSegmentNumber=-1,e}return r(t,o),t.prototype.validate=function(t){return!!(o.prototype.validate.call(this,t)&&"function"==typeof t.cosines&&"function"==typeof t.spacingXY&&t.hasOwnProperty("_sopInstanceUID")&&t.hasOwnProperty("_dimensionIndexValues")&&t.hasOwnProperty("_imageOrientation")&&t.hasOwnProperty("_imagePosition"))},t.prototype.merge=function(e){return!!this.validate(e)&&!!(this._compareArrays(this._dimensionIndexValues,e.dimensionIndexValues)&&this._compareArrays(this._imageOrientation,e.imageOrientation)&&this._compareArrays(this._imagePosition,e.imagePosition)&&this._instanceNumber===e.instanceNumber&&this._sopInstanceUID===e.sopInstanceUID)},t.prototype.cosines=function(){var o=[new a.f(1,0,0),new a.f(0,1,0),new a.f(0,0,1)];if(this._imageOrientation&&6===this._imageOrientation.length){var t=new a.f(this._imageOrientation[0],this._imageOrientation[1],this._imageOrientation[2]),e=new a.f(this._imageOrientation[3],this._imageOrientation[4],this._imageOrientation[5]);0<t.length()&&0<e.length()&&(o[0]=t,o[1]=e,o[2]=new a.f(0,0,0).crossVectors(o[0],o[1]).normalize())}else window.console.log("No valid image orientation for frame"),window.console.log(this),window.console.log("Returning default orientation.");return this._rightHanded||o[2].negate(),o},t.prototype.spacingXY=function(){var e=[1,1];return this.pixelSpacing?(e[0]=this.pixelSpacing[0],e[1]=this.pixelSpacing[1]):this.pixelAspectRatio&&(e[0]=1,e[1]=1*this.pixelAspectRatio[1]/this.pixelAspectRatio[0]),e},t.prototype.getPixelData=function(a,t){return this.pixelData[a+this._columns*t]},t.prototype.setPixelData=function(a,t,e){this.pixelData[a+this._columns*t]=e},t.prototype._compareArrays=function(a,t){return a===t||a&&t&&a.join()===t.join()},n(t,[{key:"rows",get:function(){return this._rows},set:function(e){this._rows=e}},{key:"columns",get:function(){return this._columns},set:function(e){this._columns=e}},{key:"spacingBetweenSlices",get:function(){return this._spacingBetweenSlices},set:function(e){this._spacingBetweenSlices=e}},{key:"sliceThickness",get:function(){return this._sliceThickness},set:function(e){this._sliceThickness=e}},{key:"imagePosition",get:function(){return this._imagePosition},set:function(e){this._imagePosition=e}},{key:"imageOrientation",get:function(){return this._imageOrientation},set:function(e){this._imageOrientation=e}},{key:"windowWidth",get:function(){return this._windowWidth},set:function(e){this._windowWidth=e}},{key:"windowCenter",get:function(){return this._windowCenter},set:function(e){this._windowCenter=e}},{key:"rescaleSlope",get:function(){return this._rescaleSlope},set:function(e){this._rescaleSlope=e}},{key:"rescaleIntercept",get:function(){return this._rescaleIntercept},set:function(e){this._rescaleIntercept=e}},{key:"bitsAllocated",get:function(){return this._bitsAllocated},set:function(e){this._bitsAllocated=e}},{key:"dist",get:function(){return this._dist},set:function(e){this._dist=e}},{key:"pixelSpacing",get:function(){return this._pixelSpacing},set:function(e){this._pixelSpacing=e}},{key:"pixelAspectRatio",get:function(){return this._pixelAspectRatio},set:function(e){this._pixelAspectRatio=e}},{key:"minMax",get:function(){return this._minMax},set:function(e){this._minMax=e}},{key:"dimensionIndexValues",get:function(){return this._dimensionIndexValues},set:function(e){this._dimensionIndexValues=e}},{key:"instanceNumber",get:function(){return this._instanceNumber},set:function(e){this._instanceNumber=e}},{key:"pixelData",get:function(){return this._pixelData},set:function(e){this._pixelData=e}},{key:"sopInstanceUID",set:function(e){this._sopInstanceUID=e},get:function(){return this._sopInstanceUID}},{key:"pixelRepresentation",get:function(){return this._pixelRepresentation},set:function(e){this._pixelRepresentation=e}},{key:"pixelType",get:function(){return this._pixelType},set:function(e){this._pixelType=e}},{key:"url",get:function(){return this._url},set:function(e){this._url=e}},{key:"referencedSegmentNumber",get:function(){return this._referencedSegmentNumber},set:function(e){this._referencedSegmentNumber=e}},{key:"rightHanded",get:function(){return this._rightHanded},set:function(e){this._rightHanded=e}},{key:"index",get:function(){return this._index},set:function(e){this._index=e}}]),t}(o.a);t.a=l},function(d,t,e){"use strict";function p(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function i(a,o){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o&&("object"==("undefined"===typeof o?"undefined":babelHelpers.typeof(o))||"function"==typeof o)?o:a}function r(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof o?"undefined":babelHelpers.typeof(o)));a.prototype=Object.create(o&&o.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(a,o):a.__proto__=o)}var o=e(11),m=e(132),a=e(156),l=e(158),s=e(159),n=function(c){function t(e,r){p(this,t);var o=i(this,c.call(this));o._id=r,o._arrayBuffer=e.buffer;var a=new Uint8Array(o._arrayBuffer);o._dataSet=null;try{o._dataSet=m.parseDicom(a)}catch(e){throw window.console.log(e),new Error("parsers.dicom could not parse the file")}return o}return r(t,c),t.prototype.seriesInstanceUID=function(){return this._dataSet.string("x0020000e")},t.prototype.studyInstanceUID=function(){return this._dataSet.string("x0020000d")},t.prototype.modality=function(){return this._dataSet.string("x00080060")},t.prototype.segmentationType=function(){return this._dataSet.string("x00620001")},t.prototype.segmentationSegments=function(){var l=[],t=this._dataSet.elements.x00620002;if(!t)return l;for(var c=0;c<t.items.length;c++){var n=this._recommendedDisplayCIELab(t.items[c]),d=this._segmentationCode(t.items[c]),r=t.items[c].dataSet.uint16("x00620004"),p=t.items[c].dataSet.string("x00620005"),u=t.items[c].dataSet.string("x00620008");l.push({recommendedDisplayCIELab:n,segmentationCodeDesignator:d.segmentationCodeDesignator,segmentationCodeValue:d.segmentationCodeValue,segmentationCodeMeaning:d.segmentationCodeMeaning,segmentNumber:r,segmentLabel:p,segmentAlgorithmType:u})}return l},t.prototype._segmentationCode=function(a){var t="unknown",o="unknown",l="unknown",s=a.dataSet.elements.x00082218;return s&&s.items&&0<s.items.length&&(t=s.items[0].dataSet.string("x00080102"),o=s.items[0].dataSet.string("x00080100"),l=s.items[0].dataSet.string("x00080104")),{segmentationCodeDesignator:t,segmentationCodeValue:o,segmentationCodeMeaning:l}},t.prototype._recommendedDisplayCIELab=function(a){if(!a.dataSet.elements.x0062000d)return null;for(var t=a.dataSet.elements.x0062000d.dataOffset,e=a.dataSet.elements.x0062000d.length,n=a.dataSet.byteArray.slice(t,t+e),i=new Uint16Array(e/2),r=0;r<e/2;r++)i[r]=(n[2*r+1]<<8)+n[2*r];return[100*(i[0]/65535),255*(i[1]/65535)-128,255*(i[2]/65535)-128]},t.prototype.sopInstanceUID=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=this._findStringEverywhere("x2005140f","x00080018",a);return t},t.prototype.transferSyntaxUID=function(){return this._dataSet.string("x00020010")},t.prototype.studyDate=function(){return this._dataSet.string("x00080020")},t.prototype.studyDescription=function(){return this._dataSet.string("x00081030")},t.prototype.seriesDate=function(){return this._dataSet.string("x00080021")},t.prototype.seriesDescription=function(){return this._dataSet.string("x0008103e")},t.prototype.patientName=function(){return this._dataSet.string("x00100010")},t.prototype.patientID=function(){return this._dataSet.string("x00100020")},t.prototype.patientBirthdate=function(){return this._dataSet.string("x00100030")},t.prototype.patientSex=function(){return this._dataSet.string("x00100040")},t.prototype.patientAge=function(){return this._dataSet.string("x00101010")},t.prototype.photometricInterpretation=function(){return this._dataSet.string("x00280004")},t.prototype.planarConfiguration=function(){var e=this._dataSet.uint16("x00280006");return void 0===e&&(e=null),e},t.prototype.samplesPerPixel=function(){return this._dataSet.uint16("x00280002")},t.prototype.numberOfFrames=function(){var e=this._dataSet.intString("x00280008");return void 0===e&&(e=null),e},t.prototype.numberOfChannels=function(){var a=1,t=this.photometricInterpretation();return"RGB"!==t&&"PALETTE COLOR"!==t&&"YBR_FULL"!==t&&"YBR_FULL_422"!==t&&"YBR_PARTIAL_422"!==t&&"YBR_PARTIAL_420"!==t&&"YBR_RCT"!==t||(a=3),a},t.prototype.invert=function(){return"MONOCHROME1"===this.photometricInterpretation()},t.prototype.imageOrientation=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=this._findStringEverywhere("x00209116","x00200037",a);return t&&(t=t.split("\\").map(Number)),t},t.prototype.referencedSegmentNumber=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=-1,e=this._findInGroupSequence("x52009230","x0062000a",a);return null!==e&&(t=e.uint16("x0062000b")),t},t.prototype.pixelAspectRatio=function(){var e=[this._dataSet.intString("x00280034",0),this._dataSet.intString("x00280034",1)];return void 0===e[0]&&(e=null),e},t.prototype.imagePosition=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=this._findStringEverywhere("x00209113","x00200032",a);return t&&(t=t.split("\\").map(Number)),t},t.prototype.instanceNumber=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=null,e=this._dataSet.elements.x52009230;return void 0!==e&&e.items[a].dataSet.elements.x2005140f?t=e.items[a].dataSet.elements.x2005140f.items[0].dataSet.intString("x00200013"):(t=this._dataSet.intString("x00200013"),void 0===t&&(t=null)),t},t.prototype.pixelSpacing=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=this._findStringEverywhere("x00289110","x00280030",a);return t&&(t=t.split("\\").map(Number)),t},t.prototype.rows=function(){0<arguments.length&&void 0!==arguments[0]&&arguments[0];var e=this._dataSet.uint16("x00280010");return void 0===e&&(e=null),e},t.prototype.columns=function(){0<arguments.length&&void 0!==arguments[0]&&arguments[0];var e=this._dataSet.uint16("x00280011");return void 0===e&&(e=null),e},t.prototype.pixelType=function(){return 0<arguments.length&&void 0!==arguments[0]&&arguments[0],0},t.prototype.pixelRepresentation=function(){0<arguments.length&&void 0!==arguments[0]&&arguments[0];var e=this._dataSet.uint16("x00280103");return e},t.prototype.bitsAllocated=function(){0<arguments.length&&void 0!==arguments[0]&&arguments[0];var e=this._dataSet.uint16("x00280100");return e},t.prototype.highBit=function(){0<arguments.length&&void 0!==arguments[0]&&arguments[0];var e=this._dataSet.uint16("x00280102");return e},t.prototype.rescaleIntercept=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;return this._findFloatStringInFrameGroupSequence("x00289145","x00281052",e)},t.prototype.rescaleSlope=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;return this._findFloatStringInFrameGroupSequence("x00289145","x00281053",e)},t.prototype.windowCenter=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;return this._findFloatStringInFrameGroupSequence("x00289132","x00281050",e)},t.prototype.windowWidth=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;return this._findFloatStringInFrameGroupSequence("x00289132","x00281051",e)},t.prototype.sliceThickness=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;return this._findFloatStringInFrameGroupSequence("x00289110","x00180050",e)},t.prototype.spacingBetweenSlices=function(){0<arguments.length&&void 0!==arguments[0]&&arguments[0];var e=this._dataSet.intString("x00180088");return void 0===e&&(e=null),e},t.prototype.dimensionIndexValues=function(){var l=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=null,e=this._dataSet.elements.x52009230;if(void 0!==e){var n=e.items[l].dataSet.elements.x00209111;if(void 0!==n&&null!==n){var i=(n=n.items[0].dataSet).elements.x00209157;if(void 0!==i&&null!==i){var r=i.length/4;t=[];for(var o=0;o<r;o++)t.push(n.uint32("x00209157",o))}}}return t},t.prototype.inStackPositionNumber=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=null,e=this._dataSet.elements.x52009230;return t=void 0===e?null:e.items[a].dataSet.elements.x00209111.items[0].dataSet.uint32("x00209057"),t},t.prototype.stackID=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=null,e=this._dataSet.elements.x52009230;return t=void 0===e?null:e.items[a].dataSet.elements.x00209111.items[0].dataSet.intString("x00209056"),t},t.prototype.extractPixelData=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=this._decodePixelData(a);return 1<this.numberOfChannels()?this._convertColorSpace(t):t},t.prototype._findInGroupSequence=function(a,t,e){var o=this._dataSet.elements[a];if(void 0!==o){var n=o.items[e].dataSet.elements[t];if(void 0!==n)return n.items[0].dataSet}return null},t.prototype._findStringInGroupSequence=function(a,t,e,o){var n=this._findInGroupSequence(a,t,o);return null===n?null:n.string(e)},t.prototype._findStringInFrameGroupSequence=function(a,t,e){return this._findStringInGroupSequence("x52009229",a,t,0)||this._findStringInGroupSequence("x52009230",a,t,e)},t.prototype._findStringEverywhere=function(a,t,e){var o=this._findStringInFrameGroupSequence(a,t,e);return null===o&&(o=this._dataSet.string(t)),void 0===o&&(o=null),o},t.prototype._findFloatStringInGroupSequence=function(a,t,e,o){var n=this._dataSet.floatString(e);return void 0===n?null===(n=this._findInGroupSequence(a,t,o))?null:n.floatString(e):n},t.prototype._findFloatStringInFrameGroupSequence=function(a,t,e){return this._findFloatStringInGroupSequence("x52009229",a,t,0)||this._findFloatStringInGroupSequence("x52009230",a,t,e)},t.prototype._decodePixelData=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=this.transferSyntaxUID();if("1.2.840.10008.1.2.4.90"===t||"1.2.840.10008.1.2.4.91"===t)return this._decodeJ2K(a);if("1.2.840.10008.1.2.4.57"===t||"1.2.840.10008.1.2.4.70"===t)return this._decodeJPEGLossless(a);if("1.2.840.10008.1.2.4.50"===t||"1.2.840.10008.1.2.4.51"===t)return this._decodeJPEGBaseline(a);if("1.2.840.10008.1.2"===t||"1.2.840.10008.1.2.1"===t)return this._decodeUncompressed(a);if("1.2.840.10008.1.2.2"===t){var e=this._decodeUncompressed(a);return this._swapFrame(e)}throw{error:"no decoder for transfer syntax "+t}},t.prototype.framesAreFragmented=function(e){return e.intString("x00280008")!==e.elements.x7fe00010.fragments.length},t.prototype._decodeJ2K=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=null;if(this._dataSet.elements.x7fe00010.basicOffsetTable.length)t=m.readEncapsulatedImageFrame(this._dataSet,this._dataSet.elements.x7fe00010,a);else if(this.framesAreFragmented(this._dataSet)){var e=m.createJPEGBasicOffsetTable(this._dataSet,this._dataSet.elements.x7fe00010);t=m.readEncapsulatedImageFrame(this._dataSet,this._dataSet.elements.x7fe00010,a,e)}else t=m.readEncapsulatedPixelDataFromFragments(this._dataSet,this._dataSet.elements.x7fe00010,a);var o=new s;if(o.parse(t),1!==o.componentsCount)throw new Error("JPEG2000 decoder returned a componentCount of ${componentsCount}, when 1 is expected");if(1!==o.tiles.length)throw new Error("JPEG2000 decoder returned a tileCount of ${tileCount}, when 1 is expected");return o.tiles[0].items},t.prototype._decodeJPEGLossless=function(){var o=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=m.readEncapsulatedPixelData(this._dataSet,this._dataSet.elements.x7fe00010,o),e=this.pixelRepresentation(o),n=8>=this.bitsAllocated(o)?1:2,i=new a.lossless.Decoder().decode(t.buffer,t.byteOffset,t.length,n);return 0===e?2===n?new Uint16Array(i.buffer):new Uint8Array(i.buffer):new Int16Array(i.buffer)},t.prototype._decodeJPEGBaseline=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=m.readEncapsulatedPixelData(this._dataSet,this._dataSet.elements.x7fe00010,a),e=this.rows(a),n=this.columns(a),i=this.bitsAllocated(a),r=new l;return r.parse(t),8===i?r.getData(n,e):16===i?r.getData16(n,e):void 0},t.prototype._decodeUncompressed=function(){var p=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=this.pixelRepresentation(p),e=this.bitsAllocated(p),n=this._dataSet.elements.x7fe00010.dataOffset,i=this.numberOfChannels(),r=this.rows(p)*this.columns(p)*i,o=0,a=this._dataSet.byteArray.buffer;if(0===t&&8===e)return o=n+p*r,new Uint8Array(a,o,r);if(0===t&&16===e)return o=n+2*(p*r),new Uint16Array(a,o,r);if(1===t&&16===e)return o=n+2*(p*r),new Int16Array(a,o,r);if(0===t&&32===e)return o=n+4*(p*r),new Uint32Array(a,o,r);if(0===t&&1===e){var s=new ArrayBuffer(r),l=new Uint8Array(s);o=n+p*r;for(var c=0,h=p*r,u=B(h/8),d=h-8*u,f=T((p*r+r)/8),m=new Uint8Array(a,n),_=u;_<=f;_++){for(;8>d;)if(0===d?l[c]=1&m[_]:1===d?l[c]=1&m[_]>>>1:2===d?l[c]=1&m[_]>>>2:3===d?l[c]=1&m[_]>>>3:4===d?l[c]=1&m[_]>>>4:5===d?l[c]=1&m[_]>>>5:6===d?l[c]=1&m[_]>>>6:7===d?l[c]=1&m[_]>>>7:void 0,d++,++c>=r)return l;d=0}}},t.prototype._convertColorSpace=function(g){var t=null,e=this.photometricInterpretation(),n=this.planarConfiguration();if("RGB"===e&&0===n)t=g;else if("RGB"===e&&1===n){if(g instanceof Int8Array)t=new Int8Array(g.length);else if(g instanceof Uint8Array)t=new Uint8Array(g.length);else if(g instanceof Int16Array)t=new Int16Array(g.length);else{if(!(g instanceof Uint16Array))throw new Error("unsuported typed array: "+g);t=new Uint16Array(g.length)}for(var i=g.length/3,r=0,o=0,a=i,s=2*i,l=0;l<i;l++)t[r++]=g[o++],t[r++]=g[a++],t[r++]=g[s++]}else{if("YBR_FULL"!==e)throw new Error("photometric interpolation not supported: "+e);if(g instanceof Int8Array)t=new Int8Array(g.length);else if(g instanceof Uint8Array)t=new Uint8Array(g.length);else if(g instanceof Int16Array)t=new Int16Array(g.length);else{if(!(g instanceof Uint16Array))throw new Error("unsuported typed array: "+g);t=new Uint16Array(g.length)}for(var c=g.length/3,h=0,u=0,p=0;p<c;p++){var d=g[h++],f=g[h++],m=g[h++];t[u++]=d+1.402*(m-128),t[u++]=d-.34414*(f-128)-.71414*(m-128),t[u++]=d+1.772*(f-128)}}return t},t.prototype._swapFrame=function(a){var t=this.bitsAllocated();if(16===t)for(var e=0;e<a.length;e++)a[e]=this._swap16(a[e]);else if(32===t)for(var o=0;o<a.length;o++)a[o]=this._swap32(a[o]);return a},t}(o.a);t.a=n},function(X,t,Y){"use strict";(function(t,Z){function J(e){return D.from(e)}function r(e){return D.isBuffer(e)||e instanceof F}function i(a,t,e){return"function"==typeof a.prependListener?a.prependListener(t,e):void(a._events&&a._events[t]?A(a._events[t])?a._events[t].unshift(e):a._events[t]=[e,a._events[t]]:a.on(t,e))}function e(a,t){L=L||Y(6),a=a||{},this.objectMode=!!a.objectMode,t instanceof L&&(this.objectMode=this.objectMode||!!a.readableObjectMode);var e=a.highWaterMark,o=this.objectMode?16:16384;this.highWaterMark=e||0===e?e:o,this.highWaterMark=B(this.highWaterMark),this.buffer=new N,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=a.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,a.encoding&&(G||(G=Y(66).StringDecoder),this.decoder=new G(a.encoding),this.encoding=a.encoding)}function a(o){return(L=L||Y(6),!(this instanceof a))?new a(o):void(this._readableState=new e(o,this),this.readable=!0,o&&("function"==typeof o.read&&(this._read=o.read),"function"==typeof o.destroy&&(this._destroy=o.destroy)),R.call(this))}function o(r,t,p,m,i){var o=r._readableState;if(null===t)o.reading=!1,d(r,o);else{var a;i||(a=c(o,t)),a?r.emit("error",a):o.objectMode||t&&0<t.length?("string"==typeof t||o.objectMode||Object.getPrototypeOf(t)===D.prototype||(t=J(t)),m?o.endEmitted?r.emit("error",new Error("stream.unshift() after end event")):l(r,o,t,!0):o.ended?r.emit("error",new Error("stream.push() after EOF")):(o.reading=!1,o.decoder&&!p?(t=o.decoder.write(t),o.objectMode||0!==t.length?l(r,o,t,!1):_(r,o)):l(r,o,t,!1))):m||(o.reading=!1)}return u(o)}function l(a,t,e,o){t.flowing&&0===t.length&&!t.sync?(a.emit("data",e),a.read(0)):(t.length+=t.objectMode?1:e.length,o?t.buffer.unshift(e):t.buffer.push(e),t.needReadable&&p(a)),_(a,t)}function c(a,t){var o;return r(t)||"string"==typeof t||void 0===t||a.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o}function u(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function n(e){return e>=V?e=V:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function s(a,t){return 0>=a||0===t.length&&t.ended?0:t.objectMode?1:a===a?(a>t.highWaterMark&&(t.highWaterMark=n(a)),a<=t.length?a:t.ended?t.length:(t.needReadable=!0,0)):t.flowing&&t.length?t.buffer.head.data.length:t.length}function d(a,t){if(!t.ended){if(t.decoder){var e=t.decoder.end();e&&e.length&&(t.buffer.push(e),t.length+=t.objectMode?1:e.length)}t.ended=!0,p(a)}}function p(a){var t=a._readableState;t.needReadable=!1,t.emittedReadable||(U("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?C(m,a):m(a))}function m(e){U("emit readable"),e.emit("readable"),x(e)}function _(a,t){t.readingMore||(t.readingMore=!0,C(h,a,t))}function h(a,t){for(var e=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(U("maybeReadMore read 0"),a.read(0),e!==t.length);)e=t.length;t.readingMore=!1}function y(a){return function(){var t=a._readableState;U("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&I(a,"data")&&(t.flowing=!0,x(a))}}function g(e){U("readable nexttick read 0"),e.read(0)}function f(a,t){t.resumeScheduled||(t.resumeScheduled=!0,C(b,a,t))}function b(a,t){t.reading||(U("resume read 0"),a.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,a.emit("resume"),x(a),t.flowing&&!t.reading&&a.read(0)}function x(a){var t=a._readableState;for(U("flow",t.flowing);t.flowing&&null!==a.read(););}function v(a,o){if(0===o.length)return null;var e;return o.objectMode?e=o.buffer.shift():!a||a>=o.length?(e=o.decoder?o.buffer.join(""):1===o.buffer.length?o.buffer.head.data:o.buffer.concat(o.length),o.buffer.clear()):e=S(a,o.buffer,o.decoder),e}function S(a,t,e){var o;return a<t.head.data.length?(o=t.head.data.slice(0,a),t.head.data=t.head.data.slice(a)):o=a===t.head.data.length?t.shift():e?w(a,t):E(a,t),o}function w(l,t){var e=t.head,n=1,i=e.data;for(l-=i.length;e=e.next;){var r=e.data,o=l>r.length?r.length:l;if(i+=o===r.length?r:r.slice(0,l),0===(l-=o)){o===r.length?(++n,t.head=e.next?e.next:t.tail=null):(t.head=e,e.data=r.slice(o));break}++n}return t.length-=n,i}function E(l,t){var e=D.allocUnsafe(l),n=t.head,i=1;for(n.data.copy(e),l-=n.data.length;n=n.next;){var r=n.data,o=l>r.length?r.length:l;if(r.copy(e,e.length-l,0,o),0===(l-=o)){o===r.length?(++i,t.head=n.next?n.next:t.tail=null):(t.head=n,n.data=r.slice(o));break}++i}return t.length-=i,e}function T(a){var t=a._readableState;if(0<t.length)throw new Error("\"endReadable()\" called on non-empty stream");t.endEmitted||(t.ended=!0,C(M,t,a))}function M(a,t){a.endEmitted||0!==a.length||(a.endEmitted=!0,t.readable=!1,t.emit("end"))}function P(a,t){for(var e=0,o=a.length;e<o;e++)if(a[e]===t)return e;return-1}var C=Y(16);X.exports=a;var A=Y(139),L;a.ReadableState=e,Y(21).EventEmitter;var I=function(a,t){return a.listeners(t).length},R=Y(63),D=Y(27).Buffer,F=t.Uint8Array||function(){},k=Y(12);k.inherits=Y(13);var O=Y(140),U;U=O&&O.debuglog?O.debuglog("stream"):function(){};var N=Y(141),z=Y(64),G;k.inherits(a,R);var H=["error","close","destroy","pause","resume"];Object.defineProperty(a.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),a.prototype.destroy=z.destroy,a.prototype._undestroy=z.undestroy,a.prototype._destroy=function(a,t){this.push(null),t(a)},a.prototype.push=function(a,r){var e=this._readableState,i;return e.objectMode?i=!0:"string"==typeof a&&((r=r||e.defaultEncoding)!==e.encoding&&(a=D.from(a,r),r=""),i=!0),o(this,a,r,!1,i)},a.prototype.unshift=function(e){return o(this,e,null,!0,!1)},a.prototype.isPaused=function(){return!1===this._readableState.flowing},a.prototype.setEncoding=function(e){return G||(G=Y(66).StringDecoder),this._readableState.decoder=new G(e),this._readableState.encoding=e,this};var V=8388608;a.prototype.read=function(a){U("read",a),a=parseInt(a,10);var t=this._readableState,e=a;if(0!==a&&(t.emittedReadable=!1),0===a&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return U("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?T(this):p(this),null;if(0===(a=s(a,t))&&t.ended)return 0===t.length&&T(this),null;var o=t.needReadable;U("need readable",o),(0===t.length||t.length-a<t.highWaterMark)&&U("length less than watermark",o=!0),t.ended||t.reading?U("reading or ended",o=!1):o&&(U("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(a=s(e,t)));var n;return null===(n=0<a?v(a,t):null)?(t.needReadable=!0,a=0):t.length-=a,0===t.length&&(t.ended||(t.needReadable=!0),e!==a&&t.ended&&T(this)),null!==n&&this.emit("data",n),n},a.prototype._read=function(){this.emit("error",new Error("_read() is not implemented"))},a.prototype.pipe=function(a,t){function e(a,t){U("onunpipe"),a===u&&t&&!1===t.hasUnpiped&&(t.hasUnpiped=!0,r())}function n(){U("onend"),a.end()}function r(){U("cleanup"),a.removeListener("close",l),a.removeListener("finish",c),a.removeListener("drain",f),a.removeListener("error",s),a.removeListener("unpipe",e),u.removeListener("end",n),u.removeListener("end",h),u.removeListener("data",o),m=!0,p.awaitDrain&&(!a._writableState||a._writableState.needDrain)&&f()}function o(t){U("ondata"),b=!1,!1!==a.write(t)||b||((1===p.pipesCount&&p.pipes===a||1<p.pipesCount&&-1!==P(p.pipes,a))&&!m&&(U("false write response, pause",u._readableState.awaitDrain),u._readableState.awaitDrain++,b=!0),u.pause())}function s(t){U("onerror",t),h(),a.removeListener("error",s),0===I(a,"error")&&a.emit("error",t)}function l(){a.removeListener("finish",c),h()}function c(){U("onfinish"),a.removeListener("close",l),h()}function h(){U("unpipe"),u.unpipe(a)}var u=this,p=this._readableState;switch(p.pipesCount){case 0:p.pipes=a;break;case 1:p.pipes=[p.pipes,a];break;default:p.pipes.push(a);}p.pipesCount+=1,U("pipe count=%d opts=%j",p.pipesCount,t);var d=t&&!1===t.end||a===Z.stdout||a===Z.stderr?h:n;p.endEmitted?C(d):u.once("end",d),a.on("unpipe",e);var f=y(u);a.on("drain",f);var m=!1,b=!1;return u.on("data",o),i(a,"error",s),a.once("close",l),a.once("finish",c),a.emit("pipe",u),p.flowing||(U("pipe resume"),u.resume()),a},a.prototype.unpipe=function(l){var s=this._readableState,e={hasUnpiped:!1};if(0===s.pipesCount)return this;if(1===s.pipesCount)return l&&l!==s.pipes?this:(l||(l=s.pipes),s.pipes=null,s.pipesCount=0,s.flowing=!1,l&&l.emit("unpipe",this,e),this);if(!l){var n=s.pipes,i=s.pipesCount;s.pipes=null,s.pipesCount=0,s.flowing=!1;for(var r=0;r<i;r++)n[r].emit("unpipe",this,e);return this}var o=P(s.pipes,l);return-1===o?this:(s.pipes.splice(o,1),s.pipesCount-=1,1===s.pipesCount&&(s.pipes=s.pipes[0]),l.emit("unpipe",this,e),this)},a.prototype.on=function(a,t){var e=R.prototype.on.call(this,a,t);if("data"===a)!1!==this._readableState.flowing&&this.resume();else if("readable"===a){var o=this._readableState;o.endEmitted||o.readableListening||(o.readableListening=o.needReadable=!0,o.emittedReadable=!1,o.reading?o.length&&p(this):C(g,this))}return e},a.prototype.addListener=a.prototype.on,a.prototype.resume=function(){var e=this._readableState;return e.flowing||(U("resume"),e.flowing=!0,f(this,e)),this},a.prototype.pause=function(){return U("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(U("pause"),this._readableState.flowing=!1,this.emit("pause")),this},a.prototype.wrap=function(a){var l=this._readableState,t=!1,e=this;for(var n in a.on("end",function(){if(U("wrapped end"),l.decoder&&!l.ended){var a=l.decoder.end();a&&a.length&&e.push(a)}e.push(null)}),a.on("data",function(o){U("wrapped data"),l.decoder&&(o=l.decoder.write(o)),(!l.objectMode||null!==o&&void 0!==o)&&(l.objectMode||o&&o.length)&&(e.push(o)||(t=!0,a.pause()))}),a)void 0===this[n]&&"function"==typeof a[n]&&(this[n]=function(t){return function(){return a[t].apply(a,arguments)}}(n));for(var r=0;r<H.length;r++)a.on(H[r],e.emit.bind(e,H[r]));return e._read=function(o){U("wrapped _read",o),t&&(t=!1,a.resume())},e},a._fromList=v}).call(t,Y(1),Y(4))},function(a,t,e){a.exports=e(21).EventEmitter},function(a,t,e){"use strict";function l(a,t){a.emit("error",t)}var i=e(16);a.exports={destroy:function(r,s){var c=this,n=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;n||o?s?s(r):!r||this._writableState&&this._writableState.errorEmitted||i(l,this,r):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(r||null,function(a){!s&&a?(i(l,c,a),c._writableState&&(c._writableState.errorEmitted=!0)):s&&s(a)}))},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(N,t,z){"use strict";(function(t,e,n){function G(a){var t=this;this.next=null,this.entry=null,this.finish=function(){w(t,a)}}function H(e){return L.from(e)}function a(e){return L.isBuffer(e)||e instanceof I}function s(){}function o(o,n){M=M||z(6),o=o||{},this.objectMode=!!o.objectMode,n instanceof M&&(this.objectMode=this.objectMode||!!o.writableObjectMode);var e=o.highWaterMark,t=this.objectMode?16:16384;this.highWaterMark=e||0===e?e:t,this.highWaterMark=B(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var r=!1===o.decodeStrings;this.decodeStrings=!r,this.defaultEncoding=o.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){i(n,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new G(this)}function r(e){return(M=M||z(6),!(D.call(r,this)||this instanceof M))?new r(e):void(this._writableState=new o(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),A.call(this))}function l(a,t){var e=new Error("write after end");a.emit("error",e),E(t,e)}function c(a,t,e,l){var i=!0,r=!1;return null===e?r=new TypeError("May not write null values to stream"):"string"==typeof e||void 0===e||t.objectMode||(r=new TypeError("Invalid non-string/buffer chunk")),r&&(a.emit("error",r),E(l,r),i=!1),i}function p(a,t,o){return a.objectMode||!1===a.decodeStrings||"string"!=typeof t||(t=L.from(t,o)),t}function d(d,t,e,u,m,_){if(!e){var h=p(t,u,m);u!==h&&(e=!0,m="buffer",u=h)}var a=t.objectMode?1:u.length;t.length+=a;var s=t.length<t.highWaterMark;if(s||(t.needDrain=!0),t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:u,encoding:m,isBuf:e,callback:_,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else f(d,t,!1,a,u,m,_);return s}function f(l,t,e,n,i,r,o){t.writelen=n,t.writecb=o,t.writing=!0,t.sync=!0,e?l._writev(i,t.onwrite):l._write(i,r,t.onwrite),t.sync=!1}function u(a,t,e,o,n){--t.pendingcb,e?(E(n,o),E(v,a,t),a._writableState.errorEmitted=!0,a.emit("error",o)):(n(o),a._writableState.errorEmitted=!0,a.emit("error",o),v(a,t))}function m(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function i(a,t){var e=a._writableState,n=e.sync,i=e.writecb;if(m(e),t)u(a,e,n,t,i);else{var r=y(e);r||e.corked||e.bufferProcessing||!e.bufferedRequest||g(a,e),n?T(_,a,e,r,i):_(a,e,r,i)}}function _(a,t,e,o){e||h(a,t),t.pendingcb--,o(),v(a,t)}function h(a,t){0===t.length&&t.needDrain&&(t.needDrain=!1,a.emit("drain"))}function g(o,t){t.bufferProcessing=!0;var e=t.bufferedRequest;if(o._writev&&e&&e.next){var n=t.bufferedRequestCount,i=Array(n),r=t.corkedRequestsFree;r.entry=e;for(var a=0,s=!0;e;)i[a]=e,e.isBuf||(s=!1),e=e.next,a+=1;i.allBuffers=s,f(o,t,!0,t.length,i,"",r.finish),t.pendingcb++,t.lastBufferedRequest=null,r.next?(t.corkedRequestsFree=r.next,r.next=null):t.corkedRequestsFree=new G(t)}else{for(;e;){var l=e.chunk,c=e.encoding,d=e.callback;if(f(o,t,!1,t.objectMode?1:l.length,l,c,d),e=e.next,t.writing)break}null===e&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=e,t.bufferProcessing=!1}function y(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function b(a,t){a._final(function(e){t.pendingcb--,e&&a.emit("error",e),t.prefinished=!0,a.emit("prefinish"),v(a,t)})}function x(a,t){t.prefinished||t.finalCalled||("function"==typeof a._final?(t.pendingcb++,t.finalCalled=!0,E(b,a,t)):(t.prefinished=!0,a.emit("prefinish")))}function v(a,t){var e=y(t);return e&&(x(a,t),0===t.pendingcb&&(t.finished=!0,a.emit("finish"))),e}function S(a,t,e){t.ending=!0,v(a,t),e&&(t.finished?E(e):a.once("finish",e)),t.ended=!0,a.writable=!1}function w(a,t,e){var o=a.entry;for(a.entry=null;o;){var n=o.callback;t.pendingcb--,n(e),o=o.next}t.corkedRequestsFree?t.corkedRequestsFree.next=a:t.corkedRequestsFree=a}var E=z(16);N.exports=r;var T=!t.browser&&-1<["v0.10","v0.9."].indexOf(t.version.slice(0,5))?e:E,M;r.WritableState=o;var P=z(12);P.inherits=z(13);var C={deprecate:z(144)},A=z(63),L=z(27).Buffer,I=n.Uint8Array||function(){},R=z(64);P.inherits(r,A),o.prototype.getBuffer=function(){for(var a=this.bufferedRequest,t=[];a;)t.push(a),a=a.next;return t},function(){try{Object.defineProperty(o.prototype,"buffer",{get:C.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}();var D;"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(D=Function.prototype[Symbol.hasInstance],Object.defineProperty(r,Symbol.hasInstance,{value:function(e){return!!D.call(this,e)||e&&e._writableState instanceof o}})):D=function(e){return e instanceof this},r.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},r.prototype.write=function(p,t,u){var m=this._writableState,i=!1,r=a(p)&&!m.objectMode;return r&&!L.isBuffer(p)&&(p=H(p)),"function"==typeof t&&(u=t,t=null),r?t="buffer":t||(t=m.defaultEncoding),"function"!=typeof u&&(u=s),m.ended?l(this,u):(r||c(this,m,p,u))&&(m.pendingcb++,i=d(this,m,r,p,t,u)),i},r.prototype.cork=function(){this._writableState.corked++},r.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||g(this,e))},r.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},r.prototype._write=function(a,t,e){e(new Error("_write() is not implemented"))},r.prototype._writev=null,r.prototype.end=function(a,o,r){var n=this._writableState;"function"==typeof a?(r=a,a=null,o=null):"function"==typeof o&&(r=o,o=null),null!==a&&void 0!==a&&this.write(a,o),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||S(this,n,r)},Object.defineProperty(r.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),r.prototype.destroy=R.destroy,r.prototype._undestroy=R.undestroy,r.prototype._destroy=function(a,t){this.end(),t(a)}}).call(t,z(4),z(142).setImmediate,z(1))},function(d,t,e){function n(e){if(e&&!s(e))throw new Error("Unknown encoding: "+e)}function i(e){return e.toString(this.encoding)}function r(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function o(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}var a=e(5).Buffer,s=a.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1;}},l=t.StringDecoder=function(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),n(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=r;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=o;break;default:return void(this.write=i);}this.charBuffer=new a(6),this.charReceived=0,this.charLength=0};l.prototype.write=function(a){for(var t="",e;this.charLength;){if(e=a.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:a.length,a.copy(this.charBuffer,this.charReceived,0,e),this.charReceived+=e,this.charReceived<this.charLength)return"";if(a=a.slice(e,a.length),!(55296<=(i=(t=this.charBuffer.slice(0,this.charLength).toString(this.encoding)).charCodeAt(t.length-1))&&56319>=i)){if(this.charReceived=this.charLength=0,0===a.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(a),n=a.length,this.charLength&&(a.copy(this.charBuffer,0,a.length-this.charReceived,n),n-=this.charReceived);var n=(t+=a.toString(this.encoding,0,n)).length-1,i=t.charCodeAt(n);if(55296<=i&&56319>=i){var r=this.surrogateSize;return this.charLength+=r,this.charReceived+=r,this.charBuffer.copy(this.charBuffer,r,0,r),a.copy(this.charBuffer,0,0,r),t.substring(0,n)}return t},l.prototype.detectIncompleteChar=function(a){for(var t=3<=a.length?3:a.length,e;0<t;t--){if(e=a[a.length-t],1==t&&6==e>>5){this.charLength=2;break}if(2>=t&&14==e>>4){this.charLength=3;break}if(3>=t&&30==e>>3){this.charLength=4;break}}this.charReceived=t},l.prototype.end=function(a){var t="";if(a&&a.length&&(t=this.write(a)),this.charReceived){var e=this.charReceived,o=this.charBuffer,n=this.encoding;t+=o.slice(0,e).toString(n)}return t}},function(c,t,e){"use strict";function n(a){this.afterTransform=function(t,e){return i(a,t,e)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function i(a,t,e){var n=a._transformState;n.transforming=!1;var i=n.writecb;if(!i)return a.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!==e&&void 0!==e&&a.push(e),i(t);var l=a._readableState;l.reading=!1,(l.needReadable||l.length<l.highWaterMark)&&a._read(l.highWaterMark)}function r(i){if(!(this instanceof r))return new r(i);a.call(this,i),this._transformState=new n(this);var l=this;this._readableState.needReadable=!0,this._readableState.sync=!1,i&&("function"==typeof i.transform&&(this._transform=i.transform),"function"==typeof i.flush&&(this._flush=i.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(e,t){o(l,e,t)}):o(l)})}function o(a,t,e){if(t)return a.emit("error",t);null!==e&&void 0!==e&&a.push(e);var o=a._writableState,n=a._transformState;if(o.length)throw new Error("Calling transform done when ws.length != 0");if(n.transforming)throw new Error("Calling transform done when still transforming");return a.push(null)}c.exports=r;var a=e(6),s=e(12);s.inherits=e(13),s.inherits(r,a),r.prototype.push=function(o,t){return this._transformState.needTransform=!1,a.prototype.push.call(this,o,t)},r.prototype._transform=function(){throw new Error("_transform() is not implemented")},r.prototype._write=function(a,t,e){var o=this._transformState;if(o.writecb=e,o.writechunk=a,o.writeencoding=t,!o.transforming){var n=this._readableState;(o.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}},r.prototype._read=function(){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},r.prototype._destroy=function(o,r){var e=this;a.prototype._destroy.call(this,o,function(a){r(a),e.emit("close")})}},function(e){"use strict";e.exports={0:"",1:"stream end",2:"need dictionary","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(e){"use strict";e.exports=function(l,t,e,n){for(var i=0|65535&l,r=0|65535&l>>>16,o=0;0!==e;){e-=o=2e3<e?2e3:e;do r=0|r+(i=0|i+t[n++]);while(--o);i%=65521,r%=65521}return 0|(i|r<<16)}},function(e){"use strict";var a=function(){for(var a=[],e=0,o;256>e;e++){o=e;for(var t=0;8>t;t++)o=1&o?3988292384^o>>>1:o>>>1;a[e]=o}return a}();e.exports=function(o,t,e,n){o^=-1;for(var r=n;r<n+e;r++)o=o>>>8^a[255&(o^t[r])];return-1^o}},function(a,D,e){(function(F,k){function O(e,t){var n={seen:[],stylize:o};return 3<=arguments.length&&(n.depth=arguments[2]),4<=arguments.length&&(n.colors=arguments[3]),h(t)?n.showHidden=t:t&&D._extend(n,t),g(n.showHidden)&&(n.showHidden=!1),g(n.depth)&&(n.depth=2),g(n.colors)&&(n.colors=!1),g(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=r),N(n,e,n.depth)}function r(a,t){var e=O.styles[t];return e?"\x1B["+O.colors[e][0]+"m"+a+"\x1B["+O.colors[e][1]+"m":a}function o(e){return e}function U(a){var o={};return a.forEach(function(e){o[e]=!0}),o}function N(h,t,n){if(h.customInspect&&t&&S(t.inspect)&&t.inspect!==D.inspect&&(!t.constructor||t.constructor.prototype!==t)){var e=t.inspect(n,h);return _(e)||(e=N(h,e,n)),e}var r=l(h,t);if(r)return r;var o=Object.keys(t),a=U(o);if(h.showHidden&&(o=Object.getOwnPropertyNames(t)),x(t)&&(0<=o.indexOf("message")||0<=o.indexOf("description")))return s(t);if(0===o.length){if(S(t)){var i=t.name?": "+t.name:"";return h.stylize("[Function"+i+"]","special")}if(f(t))return h.stylize(RegExp.prototype.toString.call(t),"regexp");if(b(t))return h.stylize(Date.prototype.toString.call(t),"date");if(x(t))return s(t)}var m="",g=!1,y=["{","}"];if(d(t)&&(g=!0,y=["[","]"]),S(t)&&(m=" [Function"+(t.name?": "+t.name:"")+"]"),f(t)&&(m=" "+RegExp.prototype.toString.call(t)),b(t)&&(m=" "+Date.prototype.toUTCString.call(t)),x(t)&&(m=" "+s(t)),0===o.length&&(!g||0==t.length))return y[0]+m+y[1];if(0>n)return f(t)?h.stylize(RegExp.prototype.toString.call(t),"regexp"):h.stylize("[Object]","special");h.seen.push(t);var w;return w=g?c(h,t,n,a,o):o.map(function(o){return u(h,t,n,a,o,g)}),h.seen.pop(),p(w,m,y)}function l(a,t){if(g(t))return a.stylize("undefined","undefined");if(_(t)){var e="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,"\"")+"'";return a.stylize(e,"string")}return i(t)?a.stylize(""+t,"number"):h(t)?a.stylize(""+t,"boolean"):m(t)?a.stylize("null","null"):void 0}function s(e){return"["+Error.prototype.toString.call(e)+"]"}function c(l,t,e,n,i){for(var c=[],o=0,a=t.length;o<a;++o)w(t,o+"")?c.push(u(l,t,e,n,o+"",!0)):c.push("");return i.forEach(function(a){a.match(/^\d+$/)||c.push(u(l,t,e,n,a,!0))}),c}function u(l,t,e,n,i,r){var o,a,s;if((s=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?a=s.set?l.stylize("[Getter/Setter]","special"):l.stylize("[Getter]","special"):s.set&&(a=l.stylize("[Setter]","special")),w(n,i)||(o="["+i+"]"),a||(0>l.seen.indexOf(s.value)?-1<(a=m(e)?N(l,s.value,null):N(l,s.value,e-1)).indexOf("\n")&&(a=r?a.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+a.split("\n").map(function(e){return"   "+e}).join("\n")):a=l.stylize("[Circular]","special")),g(o)){if(r&&i.match(/^\d+$/))return a;(o=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=l.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,"\"").replace(/(^"|"$)/g,"'"),o=l.stylize(o,"string"))}return o+": "+a}function p(a,t,e){var o=0;return 60<a.reduce(function(a,t){return o++,0<=t.indexOf("\n")&&o++,a+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)?e[0]+(""===t?"":t+"\n ")+" "+a.join(",\n  ")+" "+e[1]:e[0]+t+" "+a.join(", ")+" "+e[1]}function d(e){return Array.isArray(e)}function h(e){return"boolean"==typeof e}function m(e){return null===e}function i(e){return"number"==typeof e}function _(e){return"string"==typeof e}function g(e){return void 0===e}function f(e){return y(e)&&"[object RegExp]"===n(e)}function y(e){return"object"==("undefined"===typeof e?"undefined":babelHelpers.typeof(e))&&null!==e}function b(e){return y(e)&&"[object Date]"===n(e)}function x(e){return y(e)&&("[object Error]"===n(e)||e instanceof Error)}function S(e){return"function"==typeof e}function n(e){return Object.prototype.toString.call(e)}function v(e){return 10>e?"0"+e.toString(10):e.toString(10)}function t(){var a=new Date,t=[v(a.getHours()),v(a.getMinutes()),v(a.getSeconds())].join(":");return[a.getDate(),P[a.getMonth()],t].join(" ")}function w(a,t){return Object.prototype.hasOwnProperty.call(a,t)}var E=/%[sdj%]/g;D.format=function(r){if(!_(r)){for(var t=[],e=0;e<arguments.length;e++)t.push(O(arguments[e]));return t.join(" ")}for(var e=1,n=arguments,i=n.length,o=(r+"").replace(E,function(a){if("%%"===a)return"%";if(e>=i)return a;switch(a){case"%s":return n[e++]+"";case"%d":return+n[e++];case"%j":try{return JSON.stringify(n[e++])}catch(e){return"[Circular]"}default:return a;}}),a=n[e];e<i;a=n[++e])o+=m(a)||!y(a)?" "+a:" "+O(a);return o},D.deprecate=function(e,t){if(g(F.process))return function(){return D.deprecate(e,t).apply(this,arguments)};if(!0===k.noDeprecation)return e;var a=!1;return function(){if(!a){if(k.throwDeprecation)throw new Error(t);k.traceDeprecation?console.trace(t):console.error(t),a=!0}return e.apply(this,arguments)}};var T={},M;D.debuglog=function(e){if(g(M)&&(M={NODE_ENV:"production"}.NODE_DEBUG||""),e=e.toUpperCase(),!T[e])if(new RegExp("\\b"+e+"\\b","i").test(M)){var t=k.pid;T[e]=function(){var a=D.format.apply(D,arguments);console.error("%s %d: %s",e,t,a)}}else T[e]=function(){};return T[e]},D.inspect=O,O.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},O.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},D.isArray=d,D.isBoolean=h,D.isNull=m,D.isNullOrUndefined=function(e){return null==e},D.isNumber=i,D.isString=_,D.isSymbol=function(e){return"symbol"==("undefined"===typeof e?"undefined":babelHelpers.typeof(e))},D.isUndefined=g,D.isRegExp=f,D.isObject=y,D.isDate=b,D.isError=x,D.isFunction=S,D.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==("undefined"===typeof e?"undefined":babelHelpers.typeof(e))||void 0===e},D.isBuffer=e(154);var P=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];D.log=function(){console.log("%s - %s",t(),D.format.apply(D,arguments))},D.inherits=e(155),D._extend=function(a,t){if(!t||!y(t))return a;for(var o=Object.keys(t),r=o.length;r--;)a[o[r]]=t[o[r]];return a}}).call(D,e(1),e(4))},function(P,t,C){"use strict";(function(n){function A(a,t){if(a===t)return 0;for(var e=a.length,n=t.length,l=0,r=U(e,n);l<r;++l)if(a[l]!==t[l]){e=a[l],n=t[l];break}return e<n?-1:n<e?1:0}function i(e){return n.Buffer&&"function"==typeof n.Buffer.isBuffer?n.Buffer.isBuffer(e):null!=e&&e._isBuffer}function r(e){return Object.prototype.toString.call(e)}function o(e){return!i(e)&&"function"==typeof n.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer)))}function L(a){if(g.isFunction(a)){if(b)return a.name;var t=a.toString().match(v);return t&&t[1]}}function e(a,o){return"string"==typeof a?a.length<o?a:a.slice(0,o):a}function a(a){if(b||!g.isFunction(a))return g.inspect(a);var t=L(a);return"[Function"+(t?": "+t:"")+"]"}function l(o){return e(a(o.actual),128)+" "+o.operator+" "+e(a(o.expected),128)}function c(a,o,l,s,c){throw new x.AssertionError({message:l,actual:a,expected:o,operator:s,stackStartFunction:c})}function t(a,t){a||c(a,!0,t,"==",x.ok)}function p(a,c,d,n){if(a===c)return!0;if(i(a)&&i(c))return 0===A(a,c);if(g.isDate(a)&&g.isDate(c))return a.getTime()===c.getTime();if(g.isRegExp(a)&&g.isRegExp(c))return a.source===c.source&&a.global===c.global&&a.multiline===c.multiline&&a.lastIndex===c.lastIndex&&a.ignoreCase===c.ignoreCase;if(null!==a&&"object"==("undefined"===typeof a?"undefined":babelHelpers.typeof(a))||null!==c&&"object"==("undefined"===typeof c?"undefined":babelHelpers.typeof(c))){if(o(a)&&o(c)&&r(a)===r(c)&&!(a instanceof Float32Array||a instanceof Float64Array))return 0===A(new Uint8Array(a.buffer),new Uint8Array(c.buffer));if(i(a)!==i(c))return!1;var s=(n=n||{actual:[],expected:[]}).actual.indexOf(a);return-1!==s&&s===n.expected.indexOf(c)||(n.actual.push(a),n.expected.push(c),u(a,c,d,n))}return d?a===c:a==c}function d(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function u(u,t,e,n){if(null===u||void 0===u||null===t||void 0===t)return!1;if(g.isPrimitive(u)||g.isPrimitive(t))return u===t;if(e&&Object.getPrototypeOf(u)!==Object.getPrototypeOf(t))return!1;var i=d(u),m=d(t);if(i&&!m||!i&&m)return!1;if(i)return u=y.call(u),t=y.call(t),p(u,t,e);var _=S(u),l=S(t),c,a;if(_.length!==l.length)return!1;for(_.sort(),l.sort(),a=_.length-1;0<=a;a--)if(_[a]!==l[a])return!1;for(a=_.length-1;0<=a;a--)if(c=_[a],!p(u[c],t[c],e,n))return!1;return!0}function s(a,t,e){p(a,t,!0)&&c(a,t,e,"notDeepStrictEqual",s)}function m(a,o){if(!a||!o)return!1;if("[object RegExp]"==Object.prototype.toString.call(o))return o.test(a);try{if(a instanceof o)return!0}catch(e){}return!Error.isPrototypeOf(o)&&!0===o.call({},a)}function _(a){var o;try{a()}catch(e){o=e}return o}function h(l,d,p,u){var h;if("function"!=typeof d)throw new TypeError("\"block\" argument must be a function");"string"==typeof p&&(u=p,p=null),h=_(d),u=(p&&p.name?" ("+p.name+").":".")+(u?" "+u:"."),l&&!h&&c(h,p,"Missing expected exception"+u);var f="string"==typeof u,o=!l&&g.isError(h),a=!l&&h&&!p;if((o&&f&&m(h,p)||a)&&c(h,p,"Got unwanted exception"+u),l&&h&&p&&!m(h,p)||!l&&h)throw h}var g=C(71),f=Object.prototype.hasOwnProperty,y=Array.prototype.slice,b="foo"===function(){}.name,x=P.exports=t,v=/\s*function\s+([^\(\s]*)\s*/;x.AssertionError=function(s){this.name="AssertionError",this.actual=s.actual,this.expected=s.expected,this.operator=s.operator,s.message?(this.message=s.message,this.generatedMessage=!1):(this.message=l(this),this.generatedMessage=!0);var t=s.stackStartFunction||c;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var e=new Error;if(e.stack){var n=e.stack,i=L(t),r=n.indexOf("\n"+i);if(0<=r){var o=n.indexOf("\n",r+1);n=n.substring(o+1)}this.stack=n}}},g.inherits(x.AssertionError,Error),x.fail=c,x.ok=t,x.equal=function(a,t,e){a!=t&&c(a,t,e,"==",x.equal)},x.notEqual=function(a,t,e){a==t&&c(a,t,e,"!=",x.notEqual)},x.deepEqual=function(a,t,e){p(a,t,!1)||c(a,t,e,"deepEqual",x.deepEqual)},x.deepStrictEqual=function(a,t,e){p(a,t,!0)||c(a,t,e,"deepStrictEqual",x.deepStrictEqual)},x.notDeepEqual=function(a,t,e){p(a,t,!1)&&c(a,t,e,"notDeepEqual",x.notDeepEqual)},x.notDeepStrictEqual=s,x.strictEqual=function(a,t,e){a!==t&&c(a,t,e,"===",x.strictEqual)},x.notStrictEqual=function(a,t,e){a===t&&c(a,t,e,"!==",x.notStrictEqual)},x.throws=function(a,t,e){h(!0,a,t,e)},x.doesNotThrow=function(a,t,e){h(!1,a,t,e)},x.ifError=function(e){if(e)throw e};var S=Object.keys||function(a){var t=[];for(var e in a)f.call(a,e)&&t.push(e);return t}}).call(t,C(1))},function(e){"use strict";var a=a||{};a.lossless=a.lossless||{},a.lossless.ComponentSpec=a.lossless.ComponentSpec||function(){this.hSamp=0,this.quantTableSel=0,this.vSamp=0},"undefined"!==typeof e&&e.exports&&(e.exports=a.lossless.ComponentSpec)},function(a,o,e){"use strict";var r=r||{};r.lossless=r.lossless||{},r.lossless.DataStream=r.lossless.DataStream||e(7),r.lossless.Utils=r.lossless.Utils||e(18),r.lossless.HuffmanTable=r.lossless.HuffmanTable||function(){this.l=r.lossless.Utils.createArray(4,2,16),this.th=[],this.v=r.lossless.Utils.createArray(4,2,16,200),this.tc=r.lossless.Utils.createArray(4,2),this.tc[0][0]=0,this.tc[1][0]=0,this.tc[2][0]=0,this.tc[3][0]=0,this.tc[0][1]=0,this.tc[1][1]=0,this.tc[2][1]=0,this.tc[3][1]=0,this.th[0]=0,this.th[1]=0,this.th[2]=0,this.th[3]=0},r.lossless.HuffmanTable.MSB=2147483648,r.lossless.HuffmanTable.prototype.read=function(c,t){var e=0,l,n,i,r,o,a;for(l=c.get16(),e+=2;e<l;){if(n=c.get8(),e+=1,3<(i=15&n))throw new Error("ERROR: Huffman table ID > 3");if(2<(r=n>>4))throw new Error("ERROR: Huffman table [Table class > 2 ]");for(this.th[i]=1,this.tc[i][r]=1,o=0;16>o;o+=1)this.l[i][r][o]=c.get8(),e+=1;for(o=0;16>o;o+=1)for(a=0;a<this.l[i][r][o];a+=1){if(e>l)throw new Error("ERROR: Huffman table format error [count>Lh]");this.v[i][r][o][a]=c.get8(),e+=1}}if(e!==l)throw new Error("ERROR: Huffman table format error [count!=Lf]");for(o=0;4>o;o+=1)for(a=0;2>a;a+=1)0!==this.tc[o][a]&&this.buildHuffTable(t[o][a],this.l[o][a],this.v[o][a]);return 1},r.lossless.HuffmanTable.prototype.buildHuffTable=function(i,t,e){var n,c,o,a,s;for(256,c=0,o=0;8>o;o+=1)for(a=0;a<t[o];a+=1)for(s=0;s<256>>o+1;s+=1)i[c]=e[o][a]|o+1<<8,c+=1;for(o=1;256>c;o+=1,c+=1)i[c]=o|r.lossless.HuffmanTable.MSB;for(n=1,c=0,o=8;16>o;o+=1)for(a=0;a<t[o];a+=1){for(s=0;s<256>>o-7;s+=1)i[256*n+c]=e[o][a]|o+1<<8,c+=1;if(256<=c){if(256<c)throw new Error("ERROR: Huffman table error(1)!");c=0,n+=1}}},"undefined"!==typeof a&&a.exports&&(a.exports=r.lossless.HuffmanTable)},function(a,o,e){"use strict";var r=r||{};r.lossless=r.lossless||{},r.lossless.DataStream=r.lossless.DataStream||e(7),r.lossless.Utils=r.lossless.Utils||e(18),r.lossless.QuantizationTable=r.lossless.QuantizationTable||function(){this.precision=[],this.tq=[],this.quantTables=r.lossless.Utils.createArray(4,64),this.tq[0]=0,this.tq[1]=0,this.tq[2]=0,this.tq[3]=0},r.lossless.QuantizationTable.enhanceQuantizationTable=function(a,t){var e;for(e=0;8>e;e+=1)a[t[0+e]]*=90,a[t[32+e]]*=90,a[t[16+e]]*=118,a[t[48+e]]*=49,a[t[40+e]]*=71,a[t[8+e]]*=126,a[t[56+e]]*=25,a[t[24+e]]*=106;for(e=0;8>e;e+=1)a[t[0+8*e]]*=90,a[t[4+8*e]]*=90,a[t[2+8*e]]*=118,a[t[6+8*e]]*=49,a[t[5+8*e]]*=71,a[t[1+8*e]]*=126,a[t[7+8*e]]*=25,a[t[3+8*e]]*=106;for(e=0;64>e;e+=1)a[e]>>=6},r.lossless.QuantizationTable.prototype.read=function(i,t){var e=0,l,n,s,o;for(l=i.get16(),e+=2;e<l;){if(n=i.get8(),e+=1,3<(s=15&n))throw new Error("ERROR: Quantization table ID > 3");if(this.precision[s]=n>>4,0===this.precision[s])this.precision[s]=8;else{if(1!==this.precision[s])throw new Error("ERROR: Quantization table precision error");this.precision[s]=16}if(this.tq[s]=1,8===this.precision[s]){for(o=0;64>o;o+=1){if(e>l)throw new Error("ERROR: Quantization table format error");this.quantTables[s][o]=i.get8(),e+=1}r.lossless.QuantizationTable.enhanceQuantizationTable(this.quantTables[s],t)}else{for(o=0;64>o;o+=1){if(e>l)throw new Error("ERROR: Quantization table format error");this.quantTables[s][o]=i.get16(),e+=2}r.lossless.QuantizationTable.enhanceQuantizationTable(this.quantTables[s],t)}}if(e!==l)throw new Error("ERROR: Quantization table error [count!=Lq]");return 1},"undefined"!==typeof a&&a.exports&&(a.exports=r.lossless.QuantizationTable)},function(a,o,e){"use strict";var l=l||{};l.lossless=l.lossless||{},l.lossless.DataStream=l.lossless.DataStream||e(7),l.lossless.ScanComponent=l.lossless.ScanComponent||e(77),l.lossless.ScanHeader=l.lossless.ScanHeader||function(){this.ah=0,this.al=0,this.numComp=0,this.selection=0,this.spectralEnd=0,this.components=[]},l.lossless.ScanHeader.prototype.read=function(a){var t=0,o,e,n;for(o=a.get16(),t+=2,this.numComp=a.get8(),t+=1,e=0;e<this.numComp;e+=1){if(this.components[e]=new l.lossless.ScanComponent,t>o)throw new Error("ERROR: scan header format error");this.components[e].scanCompSel=a.get8(),t+=1,n=a.get8(),t+=1,this.components[e].dcTabSel=n>>4,this.components[e].acTabSel=15&n}if(this.selection=a.get8(),t+=1,this.spectralEnd=a.get8(),t+=1,n=a.get8(),this.ah=n>>4,this.al=15&n,(t+=1)!==o)throw new Error("ERROR: scan header format error [count!=Ns]");return 1},"undefined"!==typeof a&&a.exports&&(a.exports=l.lossless.ScanHeader)},function(e){"use strict";var a=a||{};a.lossless=a.lossless||{},a.lossless.ScanComponent=a.lossless.ScanComponent||function(){this.acTabSel=0,this.dcTabSel=0,this.scanCompSel=0},"undefined"!==typeof e&&e.exports&&(e.exports=a.lossless.ScanComponent)},function(a,o,e){"use strict";var n=n||{};n.lossless=n.lossless||{},n.lossless.ComponentSpec=n.lossless.ComponentSpec||e(73),n.lossless.DataStream=n.lossless.DataStream||e(7),n.lossless.FrameHeader=n.lossless.FrameHeader||function(){this.components=[],this.dimX=0,this.dimY=0,this.numComp=0,this.precision=0},n.lossless.FrameHeader.prototype.read=function(i){var t=0,a,e,l,r;for(a=i.get16(),t+=2,this.precision=i.get8(),t+=1,this.dimY=i.get16(),t+=2,this.dimX=i.get16(),t+=2,this.numComp=i.get8(),t+=1,e=1;e<=this.numComp;e+=1){if(t>a)throw new Error("ERROR: frame format error");if(l=i.get8(),(t+=1)>=a)throw new Error("ERROR: frame format error [c>=Lf]");r=i.get8(),t+=1,this.components[l]||(this.components[l]=new n.lossless.ComponentSpec),this.components[l].hSamp=r>>4,this.components[l].vSamp=15&r,this.components[l].quantTableSel=i.get8(),t+=1}if(t!==a)throw new Error("ERROR: frame format error [Lf!=count]");return 1},"undefined"!==typeof a&&a.exports&&(a.exports=n.lossless.FrameHeader)},function(c,t,e){"use strict";function d(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function i(a,o){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o&&("object"==("undefined"===typeof o?"undefined":babelHelpers.typeof(o))||"function"==typeof o)?o:a}function r(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof o?"undefined":babelHelpers.typeof(o)));a.prototype=Object.create(o&&o.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(a,o):a.__proto__=o)}var o=e(11),p=e(161),a=function(l){function t(e,r){d(this,t);var o=i(this,l.call(this));if(o._id=r,o._arrayBuffer=e.buffer,o._url=e.url,o._dataSet=null,o._niftiHeader=null,o._niftiImage=null,o._ordered=!0,o._orderedData=null,o._qfac=1,!p.isNIFTI(o._arrayBuffer))throw new Error("parsers.nifti could not parse the file");return o._dataSet=p.readHeader(o._arrayBuffer),o._niftiImage=p.readImage(o._dataSet,o._arrayBuffer),o}return r(t,l),t.prototype.seriesInstanceUID=function(){return this._url},t.prototype.numberOfFrames=function(){return this._dataSet.dims[3]},t.prototype.numberOfChannels=function(){var e=1;return 5<=this._dataSet.dims[0]?(e=this._dataSet.dims[5],this._ordered=!1):128===this._dataSet.datatypeCode?e=3:2304===this._dataSet.datatypeCode&&(e=4),e},t.prototype.sopInstanceUID=function(){return 0<arguments.length&&void 0!==arguments[0]?arguments[0]:0},t.prototype.rows=function(){return 0<arguments.length&&void 0!==arguments[0]&&arguments[0],this._dataSet.dims[2]},t.prototype.columns=function(){return 0<arguments.length&&void 0!==arguments[0]&&arguments[0],this._dataSet.dims[1]},t.prototype.pixelType=function(){0<arguments.length&&void 0!==arguments[0]&&arguments[0];var e=0;return 16!==this._dataSet.datatypeCode&&64!==this._dataSet.datatypeCode&&1536!==this._dataSet.datatypeCode||(e=1),e},t.prototype.bitsAllocated=function(){return 0<arguments.length&&void 0!==arguments[0]&&arguments[0],this._dataSet.numBitsPerVoxel},t.prototype.pixelSpacing=function(){return 0<arguments.length&&void 0!==arguments[0]&&arguments[0],[this._dataSet.pixDims[1],this._dataSet.pixDims[2],this._dataSet.pixDims[3]]},t.prototype.sliceThickness=function(){return null},t.prototype.imageOrientation=function(){if(0<arguments.length&&void 0!==arguments[0]&&arguments[0],0<this._dataSet.qform_code){var a=0,t=this._dataSet.quatern_b,e=this._dataSet.quatern_c,o=this._dataSet.quatern_d;return 1e-7>(a=1-(t*t+e*e+o*o))?(t*=a=1/O(t*t+e*e+o*o),e*=a,o*=a,a=0):a=O(a),0>this._dataSet.pixDims[0]&&(this._rightHanded=!1),[-(a*a+t*t-e*e-o*o),-2*(t*e+a*o),2*(t*o-a*e),-2*(t*e-a*o),-(a*a+e*e-t*t-o*o),2*(e*o+a*t)]}return 0<this._dataSet.sform_code||this._dataSet.qform_code,[1,0,0,0,1,0]},t.prototype.imagePosition=function(){return 0<arguments.length&&void 0!==arguments[0]&&arguments[0],[-this._dataSet.qoffset_x,-this._dataSet.qoffset_y,this._dataSet.qoffset_z]},t.prototype.dimensionIndexValues=function(){return 0<arguments.length&&void 0!==arguments[0]&&arguments[0],null},t.prototype.instanceNumber=function(){return 0<arguments.length&&void 0!==arguments[0]?arguments[0]:0},t.prototype.windowCenter=function(){return 0<arguments.length&&void 0!==arguments[0]&&arguments[0],null},t.prototype.windowWidth=function(){return 0<arguments.length&&void 0!==arguments[0]&&arguments[0],null},t.prototype.rescaleSlope=function(){return 0<arguments.length&&void 0!==arguments[0]&&arguments[0],this._dataSet.scl_slope},t.prototype.rescaleIntercept=function(){return 0<arguments.length&&void 0!==arguments[0]&&arguments[0],this._dataSet.scl_intercept},t.prototype.extractPixelData=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;return this._decompressUncompressed(e)},t.prototype._decompressUncompressed=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=this.numberOfChannels(),e=this.rows(a)*this.columns(a)*t,o=a*e,n=this._niftiImage;return this._ordered||null!==this._orderedData||this._reorderData(),null===this._orderedData?2===this._dataSet.datatypeCode?new Uint8Array(n,o,e):256===this._dataSet.datatypeCode?new Int8Array(n,o,e):512===this._dataSet.datatypeCode?(o*=2,new Uint16Array(n,o,e)):4===this._dataSet.datatypeCode?(o*=2,new Int16Array(n,o,e)):8===this._dataSet.datatypeCode?(o*=4,new Int32Array(n,o,e)):16===this._dataSet.datatypeCode?(o*=4,new Float32Array(n,o,e)):void window.console.warning("Unknown data type: datatypeCode : "+this._dataSet.datatypeCode):this._orderedData.slice(o,o+e)},t.prototype._reorderData=function(){var d=this.numberOfChannels(),t=this.rows()*this.columns()*d,e=this._niftiImage,n=t*this.numberOfFrames(),i=null;this._orderedData=null,2===this._dataSet.datatypeCode?(i=new Uint8Array(e,0,n),this._orderedData=new Uint8Array(i.length)):256===this._dataSet.datatypeCode?(i=new Int8Array(e,0,n),this._orderedData=new Int8Array(i.length)):512===this._dataSet.datatypeCode?(i=new Uint16Array(e,0,n),this._orderedData=new Uint16Array(i.length)):4===this._dataSet.datatypeCode?(i=new Int16Array(e,0,n),this._orderedData=new Int16Array(i.length)):16===this._dataSet.datatypeCode&&(i=new Float32Array(e,0,n),this._orderedData=new Float32Array(i.length));for(var r=i.length/3,o=0,a=0,s=r,l=2*r,c=0;c<r;c++)this._orderedData[o++]=i[a++],this._orderedData[o++]=i[s++],this._orderedData[o++]=i[l++];this._ordered=!0},t}(o.a);t.a=a},function(a,o,e){"use strict";var l=l||{};l.Utils=l.Utils||e(28),l.NIFTI1=l.NIFTI1||function(){this.littleEndian=!1,this.dim_info=0,this.dims=[],this.intent_p1=0,this.intent_p2=0,this.intent_p3=0,this.intent_code=0,this.datatypeCode=0,this.numBitsPerVoxel=0,this.slice_start=0,this.slice_end=0,this.slice_code=0,this.pixDims=[],this.vox_offset=0,this.scl_slope=1,this.scl_inter=0,this.xyzt_units=0,this.cal_max=0,this.cal_min=0,this.slice_duration=0,this.toffset=0,this.description="",this.aux_file="",this.intent_name="",this.qform_code=0,this.sform_code=0,this.quatern_b=0,this.quatern_c=0,this.quatern_d=0,this.qoffset_x=0,this.qoffset_y=0,this.qoffset_z=0,this.affine=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],this.magic=0,this.isHDR=!1,this.extensionFlag=[0,0,0,0],this.extensionSize=0,this.extensionCode=0},l.NIFTI1.TYPE_NONE=0,l.NIFTI1.TYPE_BINARY=1,l.NIFTI1.TYPE_UINT8=2,l.NIFTI1.TYPE_INT16=4,l.NIFTI1.TYPE_INT32=8,l.NIFTI1.TYPE_FLOAT32=16,l.NIFTI1.TYPE_COMPLEX64=32,l.NIFTI1.TYPE_FLOAT64=64,l.NIFTI1.TYPE_RGB24=128,l.NIFTI1.TYPE_INT8=256,l.NIFTI1.TYPE_UINT16=512,l.NIFTI1.TYPE_UINT32=768,l.NIFTI1.TYPE_INT64=1024,l.NIFTI1.TYPE_UINT64=1280,l.NIFTI1.TYPE_FLOAT128=1536,l.NIFTI1.TYPE_COMPLEX128=1792,l.NIFTI1.TYPE_COMPLEX256=2048,l.NIFTI1.XFORM_UNKNOWN=0,l.NIFTI1.XFORM_SCANNER_ANAT=1,l.NIFTI1.XFORM_ALIGNED_ANAT=2,l.NIFTI1.XFORM_TALAIRACH=3,l.NIFTI1.XFORM_MNI_152=4,l.NIFTI1.SPATIAL_UNITS_MASK=7,l.NIFTI1.TEMPORAL_UNITS_MASK=56,l.NIFTI1.UNITS_UNKNOWN=0,l.NIFTI1.UNITS_METER=1,l.NIFTI1.UNITS_MM=2,l.NIFTI1.UNITS_MICRON=3,l.NIFTI1.UNITS_SEC=8,l.NIFTI1.UNITS_MSEC=16,l.NIFTI1.UNITS_USEC=24,l.NIFTI1.UNITS_HZ=32,l.NIFTI1.UNITS_PPM=40,l.NIFTI1.UNITS_RADS=48,l.NIFTI1.MAGIC_COOKIE=348,l.NIFTI1.MAGIC_NUMBER_LOCATION=344,l.NIFTI1.MAGIC_NUMBER=[110,43,49],l.NIFTI1.MAGIC_NUMBER2=[110,105,49],l.NIFTI1.EXTENSION_HEADER_SIZE=8,l.NIFTI1.prototype.readHeader=function(i){var t=new DataView(i),a=l.Utils.getIntAt(t,0,this.littleEndian),s,e,n,r;if(a!==l.NIFTI1.MAGIC_COOKIE&&(this.littleEndian=!0,a=l.Utils.getIntAt(t,0,this.littleEndian)),a!==l.NIFTI1.MAGIC_COOKIE)throw new Error("This does not appear to be a NIFTI file!");for(this.dim_info=l.Utils.getByteAt(t,39),s=0;8>s;s+=1)r=40+2*s,this.dims[s]=l.Utils.getShortAt(t,r,this.littleEndian);for(this.intent_p1=l.Utils.getFloatAt(t,56,this.littleEndian),this.intent_p2=l.Utils.getFloatAt(t,60,this.littleEndian),this.intent_p3=l.Utils.getFloatAt(t,64,this.littleEndian),this.intent_code=l.Utils.getShortAt(t,68,this.littleEndian),this.datatypeCode=l.Utils.getShortAt(t,70,this.littleEndian),this.numBitsPerVoxel=l.Utils.getShortAt(t,72,this.littleEndian),this.slice_start=l.Utils.getShortAt(t,74,this.littleEndian),s=0;8>s;s+=1)r=76+4*s,this.pixDims[s]=l.Utils.getFloatAt(t,r,this.littleEndian);for(this.vox_offset=l.Utils.getFloatAt(t,108,this.littleEndian),this.scl_slope=l.Utils.getFloatAt(t,112,this.littleEndian),this.scl_inter=l.Utils.getFloatAt(t,116,this.littleEndian),this.slice_end=l.Utils.getShortAt(t,120,this.littleEndian),this.slice_code=l.Utils.getByteAt(t,122),this.xyzt_units=l.Utils.getByteAt(t,123),this.cal_max=l.Utils.getFloatAt(t,124,this.littleEndian),this.cal_min=l.Utils.getFloatAt(t,128,this.littleEndian),this.slice_duration=l.Utils.getFloatAt(t,132,this.littleEndian),this.toffset=l.Utils.getFloatAt(t,136,this.littleEndian),this.description=l.Utils.getStringAt(t,148,228),this.aux_file=l.Utils.getStringAt(t,228,252),this.qform_code=l.Utils.getShortAt(t,252,this.littleEndian),this.sform_code=l.Utils.getShortAt(t,254,this.littleEndian),this.quatern_b=l.Utils.getFloatAt(t,256,this.littleEndian),this.quatern_c=l.Utils.getFloatAt(t,260,this.littleEndian),this.quatern_d=l.Utils.getFloatAt(t,264,this.littleEndian),this.qoffset_x=l.Utils.getFloatAt(t,268,this.littleEndian),this.qoffset_y=l.Utils.getFloatAt(t,272,this.littleEndian),this.qoffset_z=l.Utils.getFloatAt(t,276,this.littleEndian),e=0;3>e;e+=1)for(n=0;4>n;n+=1)r=280+4*(4*e+n),this.affine[e][n]=l.Utils.getFloatAt(t,r,this.littleEndian);this.affine[3][0]=0,this.affine[3][1]=0,this.affine[3][2]=0,this.affine[3][3]=1,this.intent_name=l.Utils.getStringAt(t,328,344),this.magic=l.Utils.getStringAt(t,344,348),this.isHDR=this.magic===l.NIFTI1.MAGIC_NUMBER2,t.byteLength>l.NIFTI1.MAGIC_COOKIE&&(this.extensionFlag[0]=l.Utils.getByteAt(t,348),this.extensionFlag[1]=l.Utils.getByteAt(t,349),this.extensionFlag[2]=l.Utils.getByteAt(t,350),this.extensionFlag[3]=l.Utils.getByteAt(t,351),this.extensionFlag[0]&&(this.extensionSize=this.getExtensionSize(t),this.extensionCode=this.getExtensionCode(t)))},l.NIFTI1.prototype.toFormattedString=function(){var a=l.Utils.formatNumber,t="";return t+="Dim Info = "+this.dim_info+"\n",t+="Image Dimensions (1-8): "+this.dims[0]+", "+this.dims[1]+", "+this.dims[2]+", "+this.dims[3]+", "+this.dims[4]+", "+this.dims[5]+", "+this.dims[6]+", "+this.dims[7]+"\n",t+="Intent Parameters (1-3): "+this.intent_p1+", "+this.intent_p2+", "+this.intent_p3+"\n",t+="Intent Code = "+this.intent_code+"\n",t+="Datatype = "+this.datatypeCode+" ("+this.getDatatypeCodeString(this.datatypeCode)+")\n",t+="Bits Per Voxel = "+this.numBitsPerVoxel+"\n",t+="Slice Start = "+this.slice_start+"\n",t+="Voxel Dimensions (1-8): "+a(this.pixDims[0])+", "+a(this.pixDims[1])+", "+a(this.pixDims[2])+", "+a(this.pixDims[3])+", "+a(this.pixDims[4])+", "+a(this.pixDims[5])+", "+a(this.pixDims[6])+", "+a(this.pixDims[7])+"\n",t+="Image Offset = "+this.vox_offset+"\n",t+="Data Scale:  Slope = "+a(this.scl_slope)+"  Intercept = "+a(this.scl_inter)+"\n",t+="Slice End = "+this.slice_end+"\n",t+="Slice Code = "+this.slice_code+"\n",t+="Units Code = "+this.xyzt_units+" ("+this.getUnitsCodeString(l.NIFTI1.SPATIAL_UNITS_MASK&this.xyzt_units)+", "+this.getUnitsCodeString(l.NIFTI1.TEMPORAL_UNITS_MASK&this.xyzt_units)+")\n",t+="Display Range:  Max = "+a(this.cal_max)+"  Min = "+a(this.cal_min)+"\n",t+="Slice Duration = "+this.slice_duration+"\n",t+="Time Axis Shift = "+this.toffset+"\n",t+="Description: \""+this.description+"\"\n",t+="Auxiliary File: \""+this.aux_file+"\"\n",t+="Q-Form Code = "+this.qform_code+" ("+this.getTransformCodeString(this.qform_code)+")\n",t+="S-Form Code = "+this.sform_code+" ("+this.getTransformCodeString(this.sform_code)+")\n",t+="Quaternion Parameters:  b = "+a(this.quatern_b)+"  c = "+a(this.quatern_c)+"  d = "+a(this.quatern_d)+"\n",t+="Quaternion Offsets:  x = "+this.qoffset_x+"  y = "+this.qoffset_y+"  z = "+this.qoffset_z+"\n",t+="S-Form Parameters X: "+a(this.affine[0][0])+", "+a(this.affine[0][1])+", "+a(this.affine[0][2])+", "+a(this.affine[0][3])+"\n",t+="S-Form Parameters Y: "+a(this.affine[1][0])+", "+a(this.affine[1][1])+", "+a(this.affine[1][2])+", "+a(this.affine[1][3])+"\n",t+="S-Form Parameters Z: "+a(this.affine[2][0])+", "+a(this.affine[2][1])+", "+a(this.affine[2][2])+", "+a(this.affine[2][3])+"\n",t+="Intent Name: \""+this.intent_name+"\"\n",this.extensionFlag[0]&&(t+="Extension: Size = "+this.extensionSize+"  Code = "+this.extensionCode+"\n"),t},l.NIFTI1.prototype.getDatatypeCodeString=function(e){return e===l.NIFTI1.TYPE_UINT8?"1-Byte Unsigned Integer":e===l.NIFTI1.TYPE_INT16?"2-Byte Signed Integer":e===l.NIFTI1.TYPE_INT32?"4-Byte Signed Integer":e===l.NIFTI1.TYPE_FLOAT32?"4-Byte Float":e===l.NIFTI1.TYPE_FLOAT64?"8-Byte Float":e===l.NIFTI1.TYPE_RGB24?"RGB":e===l.NIFTI1.TYPE_INT8?"1-Byte Signed Integer":e===l.NIFTI1.TYPE_UINT16?"2-Byte Unsigned Integer":e===l.NIFTI1.TYPE_UINT32?"4-Byte Unsigned Integer":e===l.NIFTI1.TYPE_INT64?"8-Byte Signed Integer":e===l.NIFTI1.TYPE_UINT64?"8-Byte Unsigned Integer":"Unknown"},l.NIFTI1.prototype.getTransformCodeString=function(e){return e===l.NIFTI1.XFORM_SCANNER_ANAT?"Scanner":e===l.NIFTI1.XFORM_ALIGNED_ANAT?"Aligned":e===l.NIFTI1.XFORM_TALAIRACH?"Talairach":e===l.NIFTI1.XFORM_MNI_152?"MNI":"Unknown"},l.NIFTI1.prototype.getUnitsCodeString=function(e){return e===l.NIFTI1.UNITS_METER?"Meters":e===l.NIFTI1.UNITS_MM?"Millimeters":e===l.NIFTI1.UNITS_MICRON?"Microns":e===l.NIFTI1.UNITS_SEC?"Seconds":e===l.NIFTI1.UNITS_MSEC?"Milliseconds":e===l.NIFTI1.UNITS_USEC?"Microseconds":e===l.NIFTI1.UNITS_HZ?"Hz":e===l.NIFTI1.UNITS_PPM?"PPM":e===l.NIFTI1.UNITS_RADS?"Rads":"Unknown"},l.NIFTI1.prototype.getQformMat=function(){return this.convertNiftiQFormToNiftiSForm(this.quatern_b,this.quatern_c,this.quatern_d,this.qoffset_x,this.qoffset_y,this.qoffset_z,this.pixDims[1],this.pixDims[2],this.pixDims[3],this.pixDims[0])},l.NIFTI1.prototype.convertNiftiQFormToNiftiSForm=function(y,t,e,n,i,r,o,a,s,l){var c=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],f=y,m=t,_=e,g,h,u,p;return c[3][0]=c[3][1]=c[3][2]=0,c[3][3]=1,1e-7>(g=1-(f*f+m*m+_*_))?(f*=g=1/O(f*f+m*m+_*_),m*=g,_*=g,g=0):g=O(g),h=0<o?o:1,u=0<a?a:1,p=0<s?s:1,0>l&&(p=-p),c[0][0]=(g*g+f*f-m*m-_*_)*h,c[0][1]=2*(f*m-g*_)*u,c[0][2]=2*(f*_+g*m)*p,c[1][0]=2*(f*m+g*_)*h,c[1][1]=(g*g+m*m-f*f-_*_)*u,c[1][2]=2*(m*_-g*f)*p,c[2][0]=2*(f*_-g*m)*h,c[2][1]=2*(m*_+g*f)*u,c[2][2]=(g*g+_*_-m*m-f*f)*p,c[0][3]=n,c[1][3]=i,c[2][3]=r,c},l.NIFTI1.prototype.convertNiftiSFormToNEMA=function(F){var t,e,n,i,r,o,a,s,l,c,h,u,p,d,f,m,_,g,y,v,b,w,x,S,E,M,T,A,P,I,C,L,R;if(d=0,M=[[0,0,0],[0,0,0],[0,0,0]],T=[[0,0,0],[0,0,0],[0,0,0]],t=F[0][0],e=F[0][1],n=F[0][2],i=F[1][0],r=F[1][1],o=F[1][2],a=F[2][0],s=F[2][1],l=F[2][2],0===(c=O(t*t+i*i+a*a)))return null;if(t/=c,i/=c,a/=c,0===(c=O(e*e+r*r+s*s)))return null;if(e/=c,r/=c,s/=c,c=t*e+i*r+a*s,1e-4<N(c)){if(e-=c*t,r-=c*i,s-=c*a,0===(c=O(e*e+r*r+s*s)))return null;e/=c,r/=c,s/=c}if(0===(c=O(n*n+o*o+l*l))?(n=i*s-a*r,o=a*e-s*t,l=t*r-i*e):(n/=c,o/=c,l/=c),c=t*n+i*o+a*l,1e-4<N(c)){if(n-=c*t,o-=c*i,l-=c*a,0===(c=O(n*n+o*o+l*l)))return null;n/=c,o/=c,l/=c}if(c=e*n+r*o+s*l,1e-4<N(c)){if(n-=c*e,o-=c*r,l-=c*s,0===(c=O(n*n+o*o+l*l)))return null;n/=c,o/=c,l/=c}if(M[0][0]=t,M[0][1]=e,M[0][2]=n,M[1][0]=i,M[1][1]=r,M[1][2]=o,M[2][0]=a,M[2][1]=s,M[2][2]=l,0===(h=this.nifti_mat33_determ(M)))return null;for(E=-666,g=b=w=x=1,y=2,v=3,u=1;3>=u;u+=1)for(p=1;3>=p;p+=1)if(u!==p)for(d=1;3>=d;d+=1)if(u!==d&&p!==d)for(T[0][0]=T[0][1]=T[0][2]=T[1][0]=T[1][1]=T[1][2]=T[2][0]=T[2][1]=T[2][2]=0,f=-1;1>=f;f+=2)for(m=-1;1>=m;m+=2)for(_=-1;1>=_;_+=2)T[0][u-1]=f,T[1][p-1]=m,T[2][d-1]=_,0<this.nifti_mat33_determ(T)*h&&(c=(S=this.nifti_mat33_mul(T,M))[0][0]+S[1][1]+S[2][2])>E&&(E=c,g=u,y=p,v=d,b=f,w=m,x=_);switch(A=P=I=C=L=R=0,g*b){case 1:A="X",C="+";break;case-1:A="X",C="-";break;case 2:A="Y",C="+";break;case-2:A="Y",C="-";break;case 3:A="Z",C="+";break;case-3:A="Z",C="-";}switch(y*w){case 1:P="X",L="+";break;case-1:P="X",L="-";break;case 2:P="Y",L="+";break;case-2:P="Y",L="-";break;case 3:P="Z",L="+";break;case-3:P="Z",L="-";}switch(v*x){case 1:I="X",R="+";break;case-1:I="X",R="-";break;case 2:I="Y",R="+";break;case-2:I="Y",R="-";break;case 3:I="Z",R="+";break;case-3:I="Z",R="-";}return A+P+I+C+L+R},l.NIFTI1.prototype.nifti_mat33_mul=function(a,t){var e=[[0,0,0],[0,0,0],[0,0,0]],o,r;for(o=0;3>o;o+=1)for(r=0;3>r;r+=1)e[o][r]=a[o][0]*t[0][r]+a[o][1]*t[1][r]+a[o][2]*t[2][r];return e},l.NIFTI1.prototype.nifti_mat33_determ=function(d){var t,e,n,i,r,o,a,s,l;return t=d[0][0],e=d[0][1],n=d[0][2],i=d[1][0],r=d[1][1],o=d[1][2],a=d[2][0],s=d[2][1],l=d[2][2],t*r*l-t*s*o-i*e*l+i*s*n+a*e*o-a*r*n},l.NIFTI1.prototype.getExtensionLocation=function(){return l.NIFTI1.MAGIC_COOKIE+4},l.NIFTI1.prototype.getExtensionSize=function(e){return l.Utils.getIntAt(e,this.getExtensionLocation(),this.littleEndian)},l.NIFTI1.prototype.getExtensionCode=function(e){return l.Utils.getIntAt(e,this.getExtensionLocation()+4,this.littleEndian)},"undefined"!==typeof a&&a.exports&&(a.exports=l.NIFTI1)},function(d,t,e){"use strict";function p(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function i(a,o){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o&&("object"==("undefined"===typeof o?"undefined":babelHelpers.typeof(o))||"function"==typeof o)?o:a}function r(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof o?"undefined":babelHelpers.typeof(o)));a.prototype=Object.create(o&&o.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(a,o):a.__proto__=o)}var o=e(11),a=e(0),n=e(19),l=e(163),s=function(s){function t(e,r){p(this,t);var o=i(this,s.call(this));o._id=r,o._arrayBuffer=e.buffer,o._url=e.url,o._dataSet=null,o._unpackedData=null;try{o._dataSet=l.parse(o._arrayBuffer)}catch(e){window.console.log("ooops... :(")}return o}return r(t,s),t.prototype.rightHanded=function(){return this._rightHanded=this._dataSet.space.match(/^right-anterior-superior/)||this._dataSet.space.match(/^left-posterior-superior/),this._rightHanded},t.prototype.seriesInstanceUID=function(){return this._url},t.prototype.numberOfFrames=function(){return this._dataSet.sizes[2]},t.prototype.numberOfChannels=function(){return 1},t.prototype.sopInstanceUID=function(){return 0<arguments.length&&void 0!==arguments[0]?arguments[0]:0},t.prototype.rows=function(){return 0<arguments.length&&void 0!==arguments[0]&&arguments[0],this._dataSet.sizes[1]},t.prototype.columns=function(){return 0<arguments.length&&void 0!==arguments[0]&&arguments[0],this._dataSet.sizes[0]},t.prototype.pixelType=function(){0<arguments.length&&void 0!==arguments[0]&&arguments[0];var e=0;return"float"===this._dataSet.type&&(e=1),e},t.prototype.bitsAllocated=function(){0<arguments.length&&void 0!==arguments[0]&&arguments[0];var e=1;return"int8"===this._dataSet.type||"uint8"===this._dataSet.type||"char"===this._dataSet.type?e=8:"int16"===this._dataSet.type||"uint16"===this._dataSet.type||"short"===this._dataSet.type?e=16:"int32"!==this._dataSet.type&&"uint32"!==this._dataSet.type&&"float"!==this._dataSet.type||(e=32),e},t.prototype.pixelSpacing=function(){0<arguments.length&&void 0!==arguments[0]&&arguments[0];var o=new a.f(this._dataSet.spaceDirections[0][0],this._dataSet.spaceDirections[0][1],this._dataSet.spaceDirections[0][2]),t=new a.f(this._dataSet.spaceDirections[1][0],this._dataSet.spaceDirections[1][1],this._dataSet.spaceDirections[1][2]),e=new a.f(this._dataSet.spaceDirections[2][0],this._dataSet.spaceDirections[2][1],this._dataSet.spaceDirections[2][2]);return[o.length(),t.length(),e.length()]},t.prototype.imageOrientation=function(){0<arguments.length&&void 0!==arguments[0]&&arguments[0];var o=this._dataSet.space.match(/right/)?-1:1,t=this._dataSet.space.match(/anterior/)?-1:1,e=new a.f(this._dataSet.spaceDirections[0][0]*o,this._dataSet.spaceDirections[0][1]*t,this._dataSet.spaceDirections[0][2]);e.normalize();var r=new a.f(this._dataSet.spaceDirections[1][0]*o,this._dataSet.spaceDirections[1][1]*t,this._dataSet.spaceDirections[1][2]);return r.normalize(),[e.x,e.y,e.z,r.x,r.y,r.z]},t.prototype.imagePosition=function(){return 0<arguments.length&&void 0!==arguments[0]&&arguments[0],[this._dataSet.spaceOrigin[0],this._dataSet.spaceOrigin[1],this._dataSet.spaceOrigin[2]]},t.prototype.extractPixelData=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;return this._decompressUncompressed(e)},t.prototype._decompressUncompressed=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=this._dataSet.buffer,e=this.numberOfChannels(),l=this.rows(a)*this.columns(a)*e;this.rightHanded()||(a=this.numberOfFrames()-1-a);var i=a*l;if(null===this._unpackedData&&"gzip"===this._dataSet.encoding){var r=n.inflate(this._dataSet.buffer);this._unpackedData=r.buffer,t=this._unpackedData}else"gzip"===this._dataSet.encoding&&(t=this._unpackedData);return"int8"===this._dataSet.type||"char"===this._dataSet.type?new Int8Array(t,i,l):"uint8"===this._dataSet.type?new Uint8Array(t,i,l):"int16"===this._dataSet.type||"short"===this._dataSet.type?(i*=2,new Int16Array(t,i,l)):"uint16"===this._dataSet.type?(i*=2,new Uint16Array(t,i,l)):"int32"===this._dataSet.type?(i*=4,new Int32Array(t,i,l)):"uint32"===this._dataSet.type?(i*=4,new Uint32Array(t,i,l)):"float"===this._dataSet.type?(i*=4,new Float32Array(t,i,l)):void 0},t}(o.a);t.a=s},function(c,t,e){"use strict";function x(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function i(a,o){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o&&("object"==("undefined"===typeof o?"undefined":babelHelpers.typeof(o))||"function"==typeof o)?o:a}function r(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof o?"undefined":babelHelpers.typeof(o)));a.prototype=Object.create(o&&o.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(a,o):a.__proto__=o)}var o=e(11),S=e(0),a=function(s){function E(e,t){x(this,E);var o=i(this,s.call(this));if(o._id=t,o._url=e.url,o._buffer=null,o._bufferPos=0,o._dataPos=0,o._pixelData=null,o._version=1,o._width=0,o._height=0,o._depth=0,o._nframes=0,o._type=E.MRI_UCHAR,o._dof=0,o._goodRASFlag=0,o._spacingXYZ=[1,1,1],o._Xras=[-1,0,0],o._Yras=[0,0,-1],o._Zras=[0,1,0],o._Cras=[0,0,0],o._tr=0,o._flipAngle=0,o._te=0,o._ti=0,o._fov=0,o._tags=[],o._origin=[0,0,0],o._imageOrient=[0,0,0,0,0,0],o._buffer=e.buffer,o._version=o._readInt(),o._swapEndian=!1,1==o._version);else{if(16777216!=o._version)throw new Error("MGH/MGZ parser: Unknown Endian.  Version reports: "+o._version);o._swapEndian=!0,o._version=o._swap32(o._version)}o._width=o._readInt(),o._height=o._readInt(),o._depth=o._readInt(),o._nframes=o._readInt(),o._type=o._readInt(),o._dof=o._readInt(),o._goodRASFlag=o._readShort(),o._spacingXYZ=o._readFloat(3),o._Xras=o._readFloat(3),o._Yras=o._readFloat(3),o._Zras=o._readFloat(3),o._Cras=o._readFloat(3),o._bufferPos=284;var a=o._width*o._height*o._depth*o._nframes;switch(o._width,o._height,o._depth,o._type){case E.MRI_UCHAR:o._pixelData=o._readUChar(a);break;case E.MRI_INT:o._pixelData=o._readInt(a);break;case E.MRI_FLOAT:o._pixelData=o._readFloat(a);break;case E.MRI_SHORT:o._pixelData=o._readShort(a);break;default:throw Error("MGH/MGZ parser: Unknown _type.  _type reports: "+o._type);}o._tr=o._readFloat(1),o._flipAngle=o._readFloat(1),o._te=o._readFloat(1),o._ti=o._readFloat(1),o._fov=o._readFloat(1);for(var r=new TextDecoder,n=o._tagReadStart();void 0!=n[0];){var l=n[0],c=n[1],p=void 0;p=l===E.TAG_OLD_MGH_XFORM||l===E.TAG_MGH_XFORM?o._readChar(c):o._readChar(c),p=r.decode(p),o._tags.push({tagType:l,tagValue:p}),n=o._tagReadStart()}var h=new S.f().fromArray(o._Xras),f=new S.f().fromArray(o._Yras),m=new S.f().crossVectors(h,f),_=new S.f().fromArray(o._Zras);m.angleTo(_)>Gn/2&&(o._rightHanded=!1),o._imageOrient=[-o._Xras[0],-o._Xras[1],o._Xras[2],-o._Yras[0],-o._Yras[1],o._Yras[2]];for(var g=o._width/2,y=o._height/2,v=o._depth/2,b=0;3>b;++b)o._origin[b]=o._Cras[b]-(o._Xras[b]*o._spacingXYZ[0]*g+o._Yras[b]*o._spacingXYZ[1]*y+o._Zras[b]*o._spacingXYZ[2]*v);return o._origin=[-o._origin[0],-o._origin[1],o._origin[2]],o}return r(E,s),E.prototype.seriesInstanceUID=function(){return this._url},E.prototype.numberOfFrames=function(){return this._depth},E.prototype.sopInstanceUID=function(){return 0<arguments.length&&void 0!==arguments[0]?arguments[0]:0},E.prototype.rows=function(){return 0<arguments.length&&void 0!==arguments[0]&&arguments[0],this._width},E.prototype.columns=function(){return 0<arguments.length&&void 0!==arguments[0]&&arguments[0],this._height},E.prototype.pixelType=function(){switch(0<arguments.length&&void 0!==arguments[0]&&arguments[0],this._type){case E.MRI_UCHAR:case E.MRI_INT:case E.MRI_SHORT:return 0;case E.MRI_FLOAT:return 1;default:throw Error("MGH/MGZ parser: Unknown _type.  _type reports: "+this._type);}},E.prototype.bitsAllocated=function(){switch(0<arguments.length&&void 0!==arguments[0]&&arguments[0],this._type){case E.MRI_UCHAR:return 8;case E.MRI_SHORT:return 16;case E.MRI_INT:case E.MRI_FLOAT:return 32;default:throw Error("MGH/MGZ parser: Unknown _type.  _type reports: "+this._type);}},E.prototype.pixelSpacing=function(){return 0<arguments.length&&void 0!==arguments[0]&&arguments[0],this._spacingXYZ},E.prototype.imageOrientation=function(){return 0<arguments.length&&void 0!==arguments[0]&&arguments[0],this._imageOrient},E.prototype.imagePosition=function(){return 0<arguments.length&&void 0!==arguments[0]&&arguments[0],this._origin},E.prototype.extractPixelData=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=this._width*this._height;return this._pixelData.slice(a*t,(a+1)*t)},E.prototype._readInt=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,t=new DataView(this._buffer.slice(this._bufferPos,this._bufferPos+4*a));this._bufferPos+=4*a;var e;if(1==a)e=t.getInt32(0,this._swapEndian);else{e=new Int32Array(a);for(var o=0;o<a;o++)e[o]=t.getInt32(4*o,this._swapEndian)}return e},E.prototype._readShort=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,t=new DataView(this._buffer.slice(this._bufferPos,this._bufferPos+2*a));this._bufferPos+=2*a;var e;if(1==a)e=t.getInt16(0,this._swapEndian);else{e=new Int16Array(a);for(var o=0;o<a;o++)e[o]=t.getInt16(2*o,this._swapEndian)}return e},E.prototype._readLong=function(){var l=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,t=new DataView(this._buffer.slice(this._bufferPos,this._bufferPos+8*l));this._bufferPos+=8*l;for(var e=new Uint16Array(l),n=0;n<l;n++){var i=0,r=0;this._swapendian?i=4:r=4;var o=t.getInt32(8*n+i,this._swapEndian),a=t.getInt32(8*n+r,this._swapEndian);0!=o&&(console.log("Unable to read Int64 with high word: "+o+"low word: "+a),a=void 0),e[n]=a}return 0==l?void 0:1==l?e[0]:e},E.prototype._readChar=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,t=new DataView(this._buffer.slice(this._bufferPos,this._bufferPos+a));this._bufferPos+=a;var e;if(1==a)e=t.getInt8(0,this._swapEndian);else{e=new Int8Array(a);for(var o=0;o<a;o++)e[o]=t.getInt8(o,this._swapEndian)}return e},E.prototype._readUChar=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,t=new DataView(this._buffer.slice(this._bufferPos,this._bufferPos+a));this._bufferPos+=a;var e;if(1==a)e=t.getUint8(0,this._swapEndian);else{e=new Uint8Array(a);for(var o=0;o<a;o++)e[o]=t.getUint8(o,this._swapEndian)}return e},E.prototype._readFloat=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,t=new DataView(this._buffer.slice(this._bufferPos,this._bufferPos+4*a));this._bufferPos+=4*a;var e;if(1==a)e=t.getFloat32(0,this._swapEndian);else{e=new Float32Array(a);for(var o=0;o<a;o++)e[o]=t.getFloat32(4*o,this._swapEndian)}return e},E.prototype._tagReadStart=function(){if(this._bufferPos>=this._buffer.byteLength)return[void 0,void 0];var e=this._readInt(),t;return e===E.TAG_OLD_MGH_XFORM?(t=this._readInt(),t-=1):e===E.TAG_OLD_SURF_GEOM||e===E.TAG_OLD_USEREALRAS||e===E.TAG_OLD_COLORTABLE?t=0:t=this._readLong(),void 0==t&&(e=void 0),[e,t]},E}(o.a);t.a=a,a.MRI_UCHAR=0,a.MRI_INT=1,a.MRI_LONG=2,a.MRI_FLOAT=3,a.MRI_SHORT=4,a.MRI_BITMAP=5,a.MRI_TENSOR=6,a.MRI_FLOAT_COMPLEX=7,a.MRI_DOUBLE_COMPLEX=8,a.MRI_RGB=9,a.TAG_OLD_COLORTABLE=1,a.TAG_OLD_USEREALRAS=2,a.TAG_CMDLINE=3,a.TAG_USEREALRAS=4,a.TAG_COLORTABLE=5,a.TAG_GCAMORPH_GEOM=10,a.TAG_GCAMORPH_TYPE=11,a.TAG_GCAMORPH_LABELS=12,a.TAG_OLD_SURF_GEOM=20,a.TAG_SURF_GEOM=21,a.TAG_OLD_MGH_XFORM=30,a.TAG_MGH_XFORM=31,a.TAG_GROUP_AVG_SURFACE_AREA=32,a.TAG_AUTO_ALIGN=33,a.TAG_SCALAR_DOUBLE=40,a.TAG_PEDIR=41,a.TAG_MRI_FRAME=42,a.TAG_FIELDSTRENGTH=43},function(a,t){"use strict";function e(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function a(a,o){for(var e=0,r;e<o.length;e++)r=o[e],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}return function(t,e,o){return e&&a(t.prototype,e),o&&a(t,o),t}}(),r=function(){function a(){e(this,a),this._id=-1,this._worldCoordinates=null,this._dataCoordinates=null,this._screenCoordinates=null,this._value=null}return n(a,[{key:"worldCoordinates",set:function(e){this._worldCoordinates=e},get:function(){return this._worldCoordinates}},{key:"dataCoordinates",set:function(e){this._dataCoordinates=e},get:function(){return this._dataCoordinates}},{key:"screenCoordinates",set:function(e){this._screenCoordinates=e},get:function(){return this._screenCoordinates}},{key:"value",set:function(e){this._value=e},get:function(){return this._value}},{key:"id",set:function(e){this._id=e},get:function(){return this._id}}]),a}();t.a=r},function(a,t,e){a.exports=e(85)},function(m,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=e(86);e.d(t,"OrthographicCamera",function(){return n.a});var i=e(94);e.d(t,"TrackballControl",function(){return i.a}),e.d(t,"TrackballOrthoControl",function(){return i.b});var r=e(97);e.d(t,"ColorsCore",function(){return r.a}),e.d(t,"IntersectionsCore",function(){return r.b}),e.d(t,"UtilsCore",function(){return r.c}),e.d(t,"ValidatorsCore",function(){return r.d});var o=e(98);e.d(t,"SliceGeometry",function(){return o.a}),e.d(t,"VoxelGeometry",function(){return o.b});var a=e(99);e.d(t,"BorderHelper",function(){return a.a}),e.d(t,"BoundingBoxHelper",function(){return a.b}),e.d(t,"ContourHelper",function(){return a.c}),e.d(t,"LocalizerHelper",function(){return a.d}),e.d(t,"LutHelper",function(){return a.e}),e.d(t,"SegmentationLutHelper",function(){return a.h}),e.d(t,"ProgressBarHelper",function(){return a.g}),e.d(t,"ProgressBarEventBasedHelper",function(){return a.f}),e.d(t,"SliceHelper",function(){return a.i}),e.d(t,"StackHelper",function(){return a.j}),e.d(t,"VolumeRenderingHelper",function(){return a.k});var s=e(111);e.d(t,"VolumeLoader",function(){return s.a});var l=e(164);e.d(t,"FrameModel",function(){return l.a}),e.d(t,"StackModel",function(){return l.c}),e.d(t,"SeriesModel",function(){return l.b}),e.d(t,"VoxelModel",function(){return l.d});var c=e(165);e.d(t,"DicomParser",function(){return c.a}),e.d(t,"MghParser",function(){return c.b}),e.d(t,"NiftiParser",function(){return c.c}),e.d(t,"NrrdParser",function(){return c.d});var _=e(166);e.d(t,"SegmentationPreset",function(){return _.a});var u=e(169);e.d(t,"ContourUniformShader",function(){return u.b}),e.d(t,"ContourFragmentShader",function(){return u.a}),e.d(t,"ContourVertexShader",function(){return u.c}),e.d(t,"DataUniformShader",function(){return u.e}),e.d(t,"DataFragmentShader",function(){return u.d}),e.d(t,"DataVertexShader",function(){return u.f}),e.d(t,"VRUniformShader",function(){return u.n}),e.d(t,"VRFragmentShader",function(){return u.m}),e.d(t,"VRVertexShader",function(){return u.o}),e.d(t,"LayerUniformShader",function(){return u.h}),e.d(t,"LayerFragmentShader",function(){return u.g}),e.d(t,"LayerVertexShader",function(){return u.i}),e.d(t,"LocalizerUniformShader",function(){return u.k}),e.d(t,"LocalizerFragmentShader",function(){return u.j}),e.d(t,"LocalizerVertexShader",function(){return u.l});var p=e(173);e.d(t,"AnnotationWidget",function(){return p.a}),e.d(t,"BiRulerWidget",function(){return p.b}),e.d(t,"HandleWidget",function(){return p.c}),e.d(t,"RoiWidget",function(){return p.d}),e.d(t,"RulerWidget",function(){return p.e}),e.d(t,"VoxelProbeWidget",function(){return p.f});var d=e(179);window.console.log("AMI "+d.version+" ( ThreeJS "+d.config.threeVersion+")")},function(a,t,e){"use strict";var o=e(87);e.d(t,"a",function(){return o.a})},function(d,t,e){"use strict";function p(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function i(a,o){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o&&("object"==("undefined"===typeof o?"undefined":babelHelpers.typeof(o))||"function"==typeof o)?o:a}function r(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof o?"undefined":babelHelpers.typeof(o)));a.prototype=Object.create(o&&o.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(a,o):a.__proto__=o)}var u=e(9),a=e(15),m=e(0),o=function(){function a(a,o){for(var e=0,r;e<o.length;e++)r=o[e],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}return function(t,e,o){return e&&a(t.prototype,e),o&&a(t,o),t}}(),n=function(l){function t(e,r,o,a,n,s){p(this,t);var c=i(this,l.call(this,e,r,o,a,n,s));return c._front=null,c._back=null,c._directions=[new m.f(1,0,0),new m.f(0,1,0),new m.f(0,0,1)],c._directionsLabel=["A","P","L","R","I","S"],c._orientation="default",c._convention="radio",c._stackOrientation=0,c._right=null,c._up=null,c._direction=null,c._controls=null,c._box=null,c._canvas={width:null,height:null},c._fromFront=!0,c._angle=0,c}return r(t,l),t.prototype.init=function(l,t,e,n,i,r){if(window.console.warn("cameras.orthographic.init(...) is deprecated.\n      Use .cosines, .controls, .box and .canvas instead."),!(a.a.vector3(l)&&a.a.vector3(t)&&a.a.vector3(e)&&a.a.box(i)&&n))return window.console.log("Invalid input provided."),!1;this._right=l,this._up=this._adjustTopDirection(l,t),this._direction=new m.f().crossVectors(this._right,this._up),this._controls=n,this._box=i,this._canvas=r;var o={position:this._box.center,direction:this._direction},s=this._orderIntersections(u.a.rayBox(o,this._box),this._direction);this._front=s[0],this._back=s[1],this.up.set(this._up.x,this._up.y,this._up.z),this._updateCanvas(),this._updatePositionAndTarget(this._front,this._back),this._updateMatrices(),this._updateDirections()},t.prototype.update=function(){if("default"===this._orientation)switch(this._getMaxIndex(this._directions[2])){case 0:this._orientation="sagittal";break;case 1:this._orientation="coronal";break;case 2:this._orientation="axial";break;default:this._orientation="free";}if("free"===this._orientation)this._right=this._directions[0],this._up=this._directions[1],this._direction=this._directions[2];else{var a=this.leftDirection(),t=this._directions[a],e=this.posteriorDirection(),n=this._directions[e],i=this.superiorDirection(),r=this._directions[i];if("radio"===this._convention)switch(this._orientation){case"axial":0<n.y&&n.negate(),0>r.z&&r.negate(),this._right=t,this._up=n,this._direction=r;break;case"coronal":0>r.z&&r.negate(),0>n.y&&n.negate(),this._right=t,this._up=r,this._direction=n;break;case"sagittal":0>r.z&&r.negate(),0<t.x&&t.negate(),this._right=n,this._up=r,this._direction=t;break;default:window.console.warn("\""+this._orientation+"\" orientation is not valid.\n                (choices: axial, coronal, sagittal)");}else if("neuro"===this._convention)switch(this._orientation){case"axial":0<n.y&&n.negate(),0<r.z&&r.negate(),this._right=t,this._up=n,this._direction=r;break;case"coronal":0>r.z&&r.negate(),0<n.y&&n.negate(),this._right=t,this._up=r,this._direction=n;break;case"sagittal":0>r.z&&r.negate(),0<t.x&&t.negate(),this._right=n,this._up=r,this._direction=t;break;default:window.console.warn("\""+this._orientation+"\" orientation is not valid.\n                (choices: axial, coronal, sagittal)");}else window.console.warn(this._convention+" is not valid (choices: radio, neuro)")}var o={position:this._box.center,direction:this._direction},s=this._orderIntersections(u.a.rayBox(o,this._box),this._direction);this._front=s[0],this._back=s[1],this.up.set(this._up.x,this._up.y,this._up.z),this._updateCanvas(),this._updatePositionAndTarget(this._front,this._back),this._updateMatrices(),this._updateDirections()},t.prototype.leftDirection=function(){return this._findMaxIndex(this._directions,0)},t.prototype.posteriorDirection=function(){return this._findMaxIndex(this._directions,1)},t.prototype.superiorDirection=function(){return this._findMaxIndex(this._directions,2)},t.prototype.invertRows=function(){this.up.multiplyScalar(-1),this.invertColumns(),this._updateDirections()},t.prototype.invertColumns=function(){this.center();var e=this._oppositePosition(this.position);this._updatePositionAndTarget(e,this.position.clone()),this._updateMatrices(),this._fromFront=!this._fromFront,this._angle%=360,this._angle=360-this._angle,this._updateDirections()},t.prototype.center=function(){this._fromFront?this._updatePositionAndTarget(this._front,this._back):this._updatePositionAndTarget(this._back,this._front),this._updateMatrices(),this._updateDirections()},t.prototype.rotate=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;this.center();var t=90,e=1;this._fromFront||(e=-1),null===a?(t*=-e,this._angle+=90):(t=360-e*(a-this._angle),this._angle=a),this._angle%=360;var o=new m.c().makeRotationAxis(this._direction,t*Gn/180);this.up.applyMatrix4(o),this._updateMatrices(),this._updateDirections()},t.prototype.fitBox=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1.5,e=1;return 0===a?e=t*this._computeZoom(this._canvas.width,this._right):1===a?e=t*this._computeZoom(this._canvas.height,this._up):2===a?e=t*U(this._computeZoom(this._canvas.width,this._right),this._computeZoom(this._canvas.height,this._up)):void 0,!!e&&void(this.zoom=e,this.center())},t.prototype._adjustTopDirection=function(a,t){var e=this._getMaxIndex(t);return(2===e&&0>t.getComponent(e)||1===e&&0<t.getComponent(e)||0===e&&0<t.getComponent(e))&&t.negate(),t},t.prototype._getMaxIndex=function(a){var t=N(a.x),e=0;return N(a.y)>t&&(t=N(a.y),e=1),N(a.z)>t&&(e=2),e},t.prototype._findMaxIndex=function(a,t){for(var e=this._getMaxIndices(a),o=0;o<e.length;o++)if(e[o]===t)return o},t.prototype._getMaxIndices=function(a){var t=[];return t.push(this._getMaxIndex(a[0])),t.push(this._getMaxIndex(a[1])),t.push(this._getMaxIndex(a[2])),t},t.prototype._orderIntersections=function(a,t){return a[0].dot(t)<a[1].dot(t)?a:[a[1],a[0]]},t.prototype._updateCanvas=function(){this.left=-this._canvas.width/2,this.right=this._canvas.width/2,this.top=this._canvas.height/2,this.bottom=-this._canvas.height/2,this._updateMatrices(),this.controls.handleResize()},t.prototype._oppositePosition=function(a){var t=a.clone();t.sub(this._box.center);var e=new m.c().makeRotationAxis(this.up,Math.PI);return t.applyMatrix4(e),t.add(this._box.center),t},t.prototype._computeZoom=function(a,t){if(!(a&&0<a))return window.console.log("Invalid dimension provided."),window.console.log(a),!1;var o={position:this._box.center.clone(),direction:t},r=u.a.rayBox(o,this._box);return 2>r.length?(window.console.log("Can not adjust the camera ( < 2 intersections)."),window.console.log(o),window.console.log(this._box),!1):a/r[0].distanceTo(r[1])},t.prototype._updatePositionAndTarget=function(a,t){this.position.set(a.x,a.y,a.z),this.lookAt(t.x,t.y,t.z),this._controls.target.set(t.x,t.y,t.z)},t.prototype._updateMatrices=function(){this._controls.update(),this.updateProjectionMatrix(),this.updateMatrixWorld()},t.prototype._updateLabels=function(){this._directionsLabel=[this._vector2Label(this._up),this._vector2Label(this._up.clone().negate()),this._vector2Label(this._right),this._vector2Label(this._right.clone().negate()),this._vector2Label(this._direction),this._vector2Label(this._direction.clone().negate())]},t.prototype._vector2Label=function(a){for(var t=this._getMaxIndex(a),e=a.clone().divideScalar(N(a.getComponent(t))),o="",n=0;3>n;n++)0===n&&(1<=e.getComponent(n)+.2?o+="L":-1>=e.getComponent(n)-.2&&(o+="R")),1===n&&(1<=e.getComponent(n)+.2?o+="P":-1>=e.getComponent(n)-.2&&(o+="A")),2===n&&(1<=e.getComponent(n)+.2?o+="S":-1>=e.getComponent(n)-.2&&(o+="I"));return o},t.prototype._updateDirections=function(){this._up=this.up.clone();var e=new m.f(0,0,-1).applyMatrix4(this.matrixWorld);this._direction=e.sub(this.position).normalize(),this._right=new m.f().crossVectors(this._direction,this.up),this._updateLabels()},o(t,[{key:"controls",set:function(e){this._controls=e},get:function(){return this._controls}},{key:"box",set:function(e){this._box=e},get:function(){return this._box}},{key:"canvas",set:function(e){this._canvas=e,this._updateCanvas()},get:function(){return this._canvas}},{key:"angle",set:function(e){this.rotate(e)},get:function(){return this._angle}},{key:"directions",set:function(e){this._directions=e},get:function(){return this._directions}},{key:"convention",set:function(e){this._convention=e},get:function(){return this._convention}},{key:"orientation",set:function(e){this._orientation=e},get:function(){return this._orientation}},{key:"directionsLabel",set:function(e){this._directionsLabel=e},get:function(){return this._directionsLabel}},{key:"stackOrientation",set:function(a){if(this._stackOrientation=a,0===this._stackOrientation)this._orientation="default";else{var t=this._getMaxIndex(this._directions[(this._stackOrientation+2)%3]);0===t?this._orientation="sagittal":1===t?this._orientation="coronal":2===t&&(this._orientation="axial")}},get:function(){if("default"===this._orientation)this._stackOrientation=0;else{var e=this._getMaxIndex(this._direction);e===this._getMaxIndex(this._directions[2])?this._stackOrientation=0:e===this._getMaxIndex(this._directions[0])?this._stackOrientation=1:e===this._getMaxIndex(this._directions[1])&&(this._stackOrientation=2)}return this._stackOrientation}}]),t}(THREE.OrthographicCamera);t.a=n},function(h,t,e){"use strict";function x(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function n(a,t,e){if(a&&X.isObject(a)&&a instanceof x)return a;var o=new x;return o.parse(a,t,e),o}var r=e(89),X=e(90);t.parse=n,t.resolve=function(a,t){return n(a,!1,!0).resolve(t)},t.resolveObject=function(a,t){return a?n(a,!1,!0).resolveObject(t):t},t.format=function(e){return X.isString(e)&&(e=n(e)),e instanceof x?e.format():x.prototype.format.call(e)},t.Url=x;var a=/^([a-z0-9.+-]+:)/i,o=/:[0-9]*$/,i=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,l=["{","}","|","\\","^","`"].concat(["<",">","\"","`"," ","\r","\n","\t"]),s=["'"].concat(l),c=["%","/","?",";","#"].concat(s),d=["/","?","#"],p=/^[+a-z0-9A-Z_-]{0,63}$/,m=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,_={javascript:!0,"javascript:":!0},g={javascript:!0,"javascript:":!0},y={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},f=e(91);x.prototype.parse=function(o,b,e){if(!X.isString(o))throw new TypeError("Parameter 'url' must be a string, not "+("undefined"===typeof o?"undefined":babelHelpers.typeof(o)));var v=o.indexOf("?"),Y=-1!==v&&v<o.indexOf("#")?"?":"#",Z=o.split(Y),l=/\\/g;Z[0]=Z[0].replace(l,"/");var h=o=Z.join(Y);if(h=h.trim(),!e&&1===o.split("#").length){var u=i.exec(h);if(u)return this.path=h,this.href=h,this.pathname=u[1],u[2]?(this.search=u[2],this.query=b?f.parse(this.search.substr(1)):this.search.substr(1)):b&&(this.search="",this.query={}),this}var w=a.exec(h);if(w){var x=(w=w[0]).toLowerCase();this.protocol=x,h=h.substr(w.length)}if(e||w||h.match(/^\/\/[^@\/]+@[^@\/]+/)){var S="//"===h.substr(0,2);!S||w&&g[w]||(h=h.substr(2),this.slashes=!0)}if(!g[w]&&(S||w&&!y[w])){for(var J=-1,M=0;M<d.length;M++)-1!==(P=h.indexOf(d[M]))&&(-1===J||P<J)&&(J=P);var T,A;for(-1!==(A=-1===J?h.lastIndexOf("@"):h.lastIndexOf("@",J))&&(T=h.slice(0,A),h=h.slice(A+1),this.auth=decodeURIComponent(T)),J=-1,M=0;M<c.length;M++){var P=h.indexOf(c[M]);-1!==P&&(-1===J||P<J)&&(J=P)}-1===J&&(J=h.length),this.host=h.slice(0,J),h=h.slice(J),this.parseHost(),this.hostname=this.hostname||"";var I="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!I)for(var K=this.hostname.split(/\./),M=0,L=K.length,R;M<L;M++)if(R=K[M],R&&!R.match(p)){for(var D="",k=0,O=R.length;k<O;k++)D+=127<R.charCodeAt(k)?"x":R[k];if(!D.match(p)){var F=K.slice(0,M),U=K.slice(M+1),N=R.match(m);N&&(F.push(N[1]),U.unshift(N[2])),U.length&&(h="/"+U.join(".")+h),this.hostname=F.join(".");break}}this.hostname=255<this.hostname.length?"":this.hostname.toLowerCase(),I||(this.hostname=r.toASCII(this.hostname));var B=this.port?":"+this.port:"",z=this.hostname||"";this.host=z+B,this.href+=this.host,I&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==h[0]&&(h="/"+h))}if(!_[x])for(var M=0,L=s.length,G;M<L;M++)if(G=s[M],-1!==h.indexOf(G)){var j=encodeURIComponent(G);j===G&&(j=escape(G)),h=h.split(G).join(j)}var H=h.indexOf("#");-1!==H&&(this.hash=h.substr(H),h=h.slice(0,H));var V=h.indexOf("?");if(-1===V?b&&(this.search="",this.query={}):(this.search=h.substr(V),this.query=h.substr(V+1),b&&(this.query=f.parse(this.query)),h=h.slice(0,V)),h&&(this.pathname=h),y[x]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var B=this.pathname||"",W=this.search||"";this.path=B+W}return this.href=this.format(),this},x.prototype.format=function(){var a=this.auth||"";a&&(a=(a=encodeURIComponent(a)).replace(/%3A/i,":"),a+="@");var t=this.protocol||"",l=this.pathname||"",n=this.hash||"",i=!1,r="";this.host?i=a+this.host:this.hostname&&(i=a+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&X.isObject(this.query)&&Object.keys(this.query).length&&(r=f.stringify(this.query));var o=this.search||r&&"?"+r||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||y[t])&&!1!==i?(i="//"+(i||""),l&&"/"!==l.charAt(0)&&(l="/"+l)):i||(i=""),n&&"#"!==n.charAt(0)&&(n="#"+n),o&&"?"!==o.charAt(0)&&(o="?"+o),l=l.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),o=o.replace("#","%23"),t+i+l+o+n},x.prototype.resolve=function(e){return this.resolveObject(n(e,!1,!0)).format()},x.prototype.resolveObject=function(a){if(X.isString(a)){var t=new x;t.parse(a,!1,!0),a=t}for(var e=new x,n=Object.keys(this),r=0,o;r<n.length;r++)o=n[r],e[o]=this[o];if(e.hash=a.hash,""===a.href)return e.href=e.format(),e;if(a.slashes&&!a.protocol){for(var i=Object.keys(a),l=0,s;l<i.length;l++)s=i[l],"protocol"!==s&&(e[s]=a[s]);return y[e.protocol]&&e.hostname&&!e.pathname&&(e.path=e.pathname="/"),e.href=e.format(),e}if(a.protocol&&a.protocol!==e.protocol){if(!y[a.protocol]){for(var c=Object.keys(a),u=0,p;u<c.length;u++)p=c[u],e[p]=a[p];return e.href=e.format(),e}if(e.protocol=a.protocol,a.host||g[a.protocol])e.pathname=a.pathname;else{for(R=(a.pathname||"").split("/");R.length&&!(a.host=R.shift()););a.host||(a.host=""),a.hostname||(a.hostname=""),""!==R[0]&&R.unshift(""),2>R.length&&R.unshift(""),e.pathname=R.join("/")}if(e.search=a.search,e.query=a.query,e.host=a.host||"",e.auth=a.auth,e.hostname=a.hostname||a.host,e.port=a.port,e.pathname||e.search){var d=e.pathname||"",h=e.search||"";e.path=d+h}return e.slashes=e.slashes||a.slashes,e.href=e.format(),e}var m=e.pathname&&"/"===e.pathname.charAt(0),_=a.host||a.pathname&&"/"===a.pathname.charAt(0),f=_||m||e.host&&a.pathname,v=f,L=e.pathname&&e.pathname.split("/")||[],R=a.pathname&&a.pathname.split("/")||[],S=e.protocol&&!y[e.protocol];if(S&&(e.hostname="",e.port=null,e.host&&(""===L[0]?L[0]=e.host:L.unshift(e.host)),e.host="",a.protocol&&(a.hostname=null,a.port=null,a.host&&(""===R[0]?R[0]=a.host:R.unshift(a.host)),a.host=null),f=f&&(""===R[0]||""===L[0])),_)e.host=a.host||""===a.host?a.host:e.host,e.hostname=a.hostname||""===a.hostname?a.hostname:e.hostname,e.search=a.search,e.query=a.query,L=R;else if(R.length)L||(L=[]),L.pop(),L=L.concat(R),e.search=a.search,e.query=a.query;else if(!X.isNullOrUndefined(a.search))return S&&(e.hostname=e.host=L.shift(),(D=!!(e.host&&0<e.host.indexOf("@"))&&e.host.split("@"))&&(e.auth=D.shift(),e.host=e.hostname=D.shift())),e.search=a.search,e.query=a.query,X.isNull(e.pathname)&&X.isNull(e.search)||(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.href=e.format(),e;if(!L.length)return e.pathname=null,e.path=e.search?"/"+e.search:null,e.href=e.format(),e;for(var E=L.slice(-1)[0],M=(e.host||a.host||1<L.length)&&("."===E||".."===E)||""===E,T=0,A=L.length;0<=A;A--)"."===(E=L[A])?L.splice(A,1):".."===E?(L.splice(A,1),T++):T&&(L.splice(A,1),T--);if(!f&&!v)for(;T--;T)L.unshift("..");!f||""===L[0]||L[0]&&"/"===L[0].charAt(0)||L.unshift(""),M&&"/"!==L.join("/").substr(-1)&&L.push("");var P=""===L[0]||L[0]&&"/"===L[0].charAt(0);if(S){e.hostname=e.host=P?"":L.length?L.shift():"";var D=!!(e.host&&0<e.host.indexOf("@"))&&e.host.split("@");D&&(e.auth=D.shift(),e.host=e.hostname=D.shift())}return(f=f||e.host&&L.length)&&!P&&L.unshift(""),L.length?e.pathname=L.join("/"):(e.pathname=null,e.path=null),X.isNull(e.pathname)&&X.isNull(e.search)||(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.auth=a.auth||e.auth,e.slashes=e.slashes||a.slashes,e.href=e.format(),e},x.prototype.parseHost=function(){var a=this.host,t=o.exec(a);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),a=a.substr(0,a.length-t.length)),a&&(this.hostname=a)}},function(a,o,k){(function(n,O){var U;!function(){function N(e){throw new RangeError(A[e])}function a(a,t){for(var e=a.length,o=[];e--;)o[e]=t(a[e]);return o}function r(o,t){var e=o.split("@"),r="";return 1<e.length&&(r=e[0]+"@",o=e[1]),r+a((o=o.replace(P,".")).split("."),t).join(".")}function l(a){for(var t=[],i=0,r=a.length,o,e;i<r;)55296<=(o=a.charCodeAt(i++))&&56319>=o&&i<r?56320==(64512&(e=a.charCodeAt(i++)))?t.push(((1023&o)<<10)+(1023&e)+65536):(t.push(o),i--):t.push(o);return t}function z(e){return a(e,function(a){var t="";return 65535<a&&(t+=I(55296|1023&(a-=65536)>>>10),a=56320|1023&a),t+=I(a)}).join("")}function G(e){return 10>e-48?e-22:26>e-65?e-65:26>e-97?e-97:y}function s(a,t){return a+22+75*(26>a)-((0!=t)<<5)}function H(a,t,e){var o=0;for(a=e?L(a/x):a>>1,a+=L(a/t);a>C*b>>1;o+=y)a=L(a/C);return L(o+(C+1)*a/(a+_))}function d(a){var t=[],d=a.length,u=0,m=E,_=w,h,e,n,i,r,o,s,l,c,p;for(0>(e=a.lastIndexOf(M))&&(e=0),n=0;n<e;++n)128<=a.charCodeAt(n)&&N("not-basic"),t.push(a.charCodeAt(n));for(i=0<e?e+1:0;i<d;){for(r=u,o=1,s=y;i>=d&&N("invalid-input"),((l=G(a.charCodeAt(i++)))>=y||l>L((V-u)/o))&&N("overflow"),u+=l*o,c=s<=_?v:s>=_+b?b:s-_,!(l<c);s+=y)o>L(V/(p=y-c))&&N("overflow"),o*=p;_=H(u-r,h=t.length+1,0==r),L(u/h)>V-m&&N("overflow"),m+=L(u/h),u%=h,t.splice(u++,0,m)}return z(t)}function p(a){var t=[],c,e,n,i,r,o,d,p,h,u,f,T,_,g,x;for(T=(a=l(a)).length,c=E,e=0,r=w,o=0;o<T;++o)128>(f=a[o])&&t.push(I(f));for(n=i=t.length,i&&t.push(M);n<T;){for(d=V,o=0;o<T;++o)(f=a[o])>=c&&f<d&&(d=f);for(d-c>L((V-e)/(_=n+1))&&N("overflow"),e+=(d-c)*_,c=d,o=0;o<T;++o)if((f=a[o])<c&&++e>V&&N("overflow"),f==c){for(p=e,h=y;u=h<=r?v:h>=r+b?b:h-r,!(p<u);h+=y)x=p-u,g=y-u,t.push(I(s(u+x%g,0))),p=L(x/g);t.push(I(s(p,0))),r=H(e,_,n==i),e=0,++n}++e,++c}return t.join("")}"object"==("undefined"===typeof o?"undefined":babelHelpers.typeof(o))&&o&&o.nodeType,"object"==("undefined"===typeof n?"undefined":babelHelpers.typeof(n))&&n&&n.nodeType;var u="object"==("undefined"===typeof O?"undefined":babelHelpers.typeof(O))&&O,V=2147483647,y=36,v=1,b=26,_=38,x=700,w=72,E=128,M="-",S=/^xn--/,T=/[^\x20-\x7E]/,P=/[\x2E\u3002\uFF0E\uFF61]/g,A={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},C=y-v,L=B,I=F,R;R={version:"1.4.1",ucs2:{decode:l,encode:z},decode:d,encode:p,toASCII:function(e){return r(e,function(e){return T.test(e)?"xn--"+p(e):e})},toUnicode:function(e){return r(e,function(e){return S.test(e)?d(e.slice(4).toLowerCase()):e})}},void 0!==(U=function(){return R}.call(o,k,o,n))&&(n.exports=U)}()}).call(o,k(29)(a),k(1))},function(e){"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==("undefined"===typeof e?"undefined":babelHelpers.typeof(e))&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(a,t,e){"use strict";t.decode=t.parse=e(92),t.encode=t.stringify=e(93)},function(e){"use strict";function o(a,t){return Object.prototype.hasOwnProperty.call(a,t)}e.exports=function(r,g,e,n){g=g||"&",e=e||"=";var y={};if("string"!=typeof r||0===r.length)return y;var a=/\+/g;r=r.split(g);var s=1e3;n&&"number"==typeof n.maxKeys&&(s=n.maxKeys);var l=r.length;0<s&&l>s&&(l=s);for(var c=0;c<l;++c){var h=r[c].replace(a,"%20"),m=h.indexOf(e),_,u,p,d;0<=m?(_=h.substr(0,m),u=h.substr(m+1)):(_=h,u=""),p=decodeURIComponent(_),d=decodeURIComponent(u),o(y,p)?i(y[p])?y[p].push(d):y[p]=[y[p],d]:y[p]=d}return y};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e){"use strict";function l(a,t){if(a.map)return a.map(t);for(var e=[],o=0;o<a.length;o++)e.push(t(a[o],o));return e}var i=function(e){switch("undefined"===typeof e?"undefined":babelHelpers.typeof(e)){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return"";}};e.exports=function(c,d,e,a){return d=d||"&",e=e||"=",null===c&&(c=void 0),"object"==("undefined"===typeof c?"undefined":babelHelpers.typeof(c))?l(o(c),function(t){var a=encodeURIComponent(i(t))+e;return r(c[t])?l(c[t],function(e){return a+encodeURIComponent(i(e))}).join(d):a+encodeURIComponent(i(c[t]))}).join(d):a?encodeURIComponent(i(a))+e+encodeURIComponent(i(c)):""};var r=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},o=Object.keys||function(a){var t=[];for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&t.push(e);return t}},function(a,t,e){"use strict";var o=e(95),n=e(96);e.d(t,"a",function(){return o.a}),e.d(t,"b",function(){return n.a})},function(l,t,e){"use strict";function F(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function i(a,o){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o&&("object"==("undefined"===typeof o?"undefined":babelHelpers.typeof(o))||"function"==typeof o)?o:a}function r(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof o?"undefined":babelHelpers.typeof(o)));a.prototype=Object.create(o&&o.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(a,o):a.__proto__=o)}var U=e(0),a=function(a){function t(e,r){function o(e){!1!==u.enabled&&(window.removeEventListener("keydown",o),m=h,h===p.NONE&&(e.keyCode!==u.keys[p.ROTATE]||u.noRotate?e.keyCode!==u.keys[p.ZOOM]||u.noZoom?e.keyCode!==u.keys[p.PAN]||u.noPan||(h=p.PAN):h=p.ZOOM:h=p.ROTATE))}function n(e){!1!==u.enabled&&(e.preventDefault(),e.stopPropagation(),h!==p.ROTATE||u.noRotate?h!==p.ZOOM||u.noZoom?h!==p.PAN||u.noPan?h!==p.CUSTOM||u.noCustom||P.copy(I(e.pageX,e.pageY)):T.copy(I(e.pageX,e.pageY)):x.copy(I(e.pageX,e.pageY)):(g.copy(f),f.copy(R(e.pageX,e.pageY))))}function l(e){!1!==u.enabled&&(e.preventDefault(),e.stopPropagation(),-1===u.forceState&&(h=p.NONE),document.removeEventListener("mousemove",n),document.removeEventListener("mouseup",l),u.dispatchEvent(L))}function s(a){if(!1!==u.enabled){a.preventDefault(),a.stopPropagation();var t=0;a.wheelDelta?t=a.wheelDelta/40:a.detail&&(t=-a.detail/3),h===p.CUSTOM?h===p.CUSTOM&&(M.y+=.01*t):v.y+=.01*t,u.dispatchEvent(C),u.dispatchEvent(L)}}F(this,t);var c=i(this,a.call(this)),u=c,p={NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM:4,TOUCH_PAN:5,CUSTOM:99};c.object=e,c.domElement=void 0===r?document:r,c.enabled=!0,c.screen={left:0,top:0,width:0,height:0},c.rotateSpeed=1,c.zoomSpeed=1.2,c.panSpeed=.3,c.noRotate=!1,c.noZoom=!1,c.noPan=!1,c.noCustom=!1,c.forceState=-1,c.staticMoving=!1,c.dynamicDampingFactor=.2,c.minDistance=0,c.maxDistance=1/0,c.keys=[65,83,68],c.target=new U.f;var d=new U.f,h=p.NONE,m=p.NONE,_=new U.f,g=new U.e,f=new U.e,y=new U.f,b=0,v=new U.e,x=new U.e,S=0,w=0,E=new U.e,T=new U.e,M=new U.e,P=new U.e;c.target0=c.target.clone(),c.position0=c.object.position.clone(),c.up0=c.object.up.clone();var A={type:"change"},C={type:"start"},L={type:"end"};c.handleResize=function(){if(this.domElement===document)this.screen.left=0,this.screen.top=0,this.screen.width=window.innerWidth,this.screen.height=window.innerHeight;else{var a=this.domElement.getBoundingClientRect(),t=this.domElement.ownerDocument.documentElement;this.screen.left=a.left+window.pageXOffset-t.clientLeft,this.screen.top=a.top+window.pageYOffset-t.clientTop,this.screen.width=a.width,this.screen.height=a.height}},c.handleEvent=function(e){"function"==typeof this[e.type]&&this[e.type](e)};var I=function(){var a=new U.e;return function(t,e){return a.set((t-u.screen.left)/u.screen.width,(e-u.screen.top)/u.screen.height),a}}(),R=function(){var a=new U.e;return function(t,e){return a.set((t-.5*u.screen.width-u.screen.left)/(.5*u.screen.width),(u.screen.height+2*(u.screen.top-e))/u.screen.width),a}}();return c.rotateCamera=function(){var a=new U.f,t=new U.d,e=new U.f,n=new U.f,i=new U.f,r=new U.f,o;return function(){r.set(f.x-g.x,f.y-g.y,0),(o=r.length())?(_.copy(u.object.position).sub(u.target),e.copy(_).normalize(),n.copy(u.object.up).normalize(),i.crossVectors(n,e).normalize(),n.setLength(f.y-g.y),i.setLength(f.x-g.x),r.copy(n.add(i)),a.crossVectors(r,_).normalize(),o*=u.rotateSpeed,t.setFromAxisAngle(a,o),_.applyQuaternion(t),u.object.up.applyQuaternion(t),y.copy(a),b=o):!u.staticMoving&&b&&(b*=O(1-u.dynamicDampingFactor),_.copy(u.object.position).sub(u.target),t.setFromAxisAngle(y,b),_.applyQuaternion(t),u.object.up.applyQuaternion(t)),g.copy(f)}}(),c.zoomCamera=function(){var e;h===p.TOUCH_ZOOM?(e=S/w,S=w,_.multiplyScalar(e)):1!==(e=1+(x.y-v.y)*u.zoomSpeed)&&0<e&&(_.multiplyScalar(e),u.staticMoving?v.copy(x):v.y+=(x.y-v.y)*this.dynamicDampingFactor)},c.panCamera=function(){var a=new U.e,t=new U.f,e=new U.f;return function(){a.copy(T).sub(E),a.lengthSq()&&(a.multiplyScalar(_.length()*u.panSpeed),e.copy(_).cross(u.object.up).setLength(a.x),e.add(t.copy(u.object.up).setLength(a.y)),u.object.position.add(e),u.target.add(e),u.staticMoving?E.copy(T):E.add(a.subVectors(T,E).multiplyScalar(u.dynamicDampingFactor)))}}(),c.checkDistances=function(){u.noZoom&&u.noPan||(_.lengthSq()>u.maxDistance*u.maxDistance&&u.object.position.addVectors(u.target,_.setLength(u.maxDistance)),_.lengthSq()<u.minDistance*u.minDistance&&u.object.position.addVectors(u.target,_.setLength(u.minDistance)))},c.update=function(){_.subVectors(u.object.position,u.target),u.noRotate||u.rotateCamera(),u.noZoom||u.zoomCamera(),u.noPan||u.panCamera(),u.noCustom||u.custom(M,P),u.object.position.addVectors(u.target,_),u.checkDistances(),u.object.lookAt(u.target),1e-6<d.distanceToSquared(u.object.position)&&(u.dispatchEvent(A),d.copy(u.object.position))},c.reset=function(){h=p.NONE,m=p.NONE,u.target.copy(u.target0),u.object.position.copy(u.position0),u.object.up.copy(u.up0),_.subVectors(u.object.position,u.target),u.object.lookAt(u.target),u.dispatchEvent(A),d.copy(u.object.position)},c.setState=function(e){u.forceState=e,m=e,h=e},c.custom=function(){},c.domElement.addEventListener("contextmenu",function(e){e.preventDefault()},!1),c.domElement.addEventListener("mousedown",function(e){!1!==u.enabled&&(e.preventDefault(),e.stopPropagation(),h===p.NONE&&(h=e.button),h!==p.ROTATE||u.noRotate?h!==p.ZOOM||u.noZoom?h!==p.PAN||u.noPan?h!==p.CUSTOM||u.noCustom||(M.copy(I(e.pageX,e.pageY)),P.copy(E)):(E.copy(I(e.pageX,e.pageY)),T.copy(E)):(v.copy(I(e.pageX,e.pageY)),x.copy(v)):(f.copy(R(e.pageX,e.pageY)),g.copy(f)),document.addEventListener("mousemove",n,!1),document.addEventListener("mouseup",l,!1),u.dispatchEvent(C))},!1),c.domElement.addEventListener("mousewheel",s,!1),c.domElement.addEventListener("DOMMouseScroll",s,!1),c.domElement.addEventListener("touchstart",function(a){if(!1!==u.enabled){if(-1===u.forceState)switch(a.touches.length){case 1:h=p.TOUCH_ROTATE,f.copy(R(a.touches[0].pageX,a.touches[0].pageY)),g.copy(f);break;case 2:h=p.TOUCH_ZOOM;var t=a.touches[0].pageX-a.touches[1].pageX,e=a.touches[0].pageY-a.touches[1].pageY;w=S=O(t*t+e*e);var o=(a.touches[0].pageX+a.touches[1].pageX)/2,n=(a.touches[0].pageY+a.touches[1].pageY)/2;E.copy(I(o,n)),T.copy(E);break;default:h=p.NONE;}else switch(h){case 0:h=p.TOUCH_ROTATE,f.copy(R(a.touches[0].pageX,a.touches[0].pageY)),g.copy(f);break;case 1:case 4:if(2<=a.touches.length){h=p.TOUCH_ZOOM;var t=a.touches[0].pageX-a.touches[1].pageX,e=a.touches[0].pageY-a.touches[1].pageY;w=S=O(t*t+e*e)}else h=p.ZOOM,v.copy(I(a.touches[0].pageX,a.touches[0].pageY)),x.copy(v);break;case 2:case 5:if(2<=a.touches.length){h=p.TOUCH_PAN;var o=(a.touches[0].pageX+a.touches[1].pageX)/2,n=(a.touches[0].pageY+a.touches[1].pageY)/2;E.copy(I(o,n)),T.copy(E)}else h=p.PAN,E.copy(I(a.touches[0].pageX,a.touches[0].pageY)),T.copy(E);break;case 99:h=p.CUSTOM;var o=(a.touches[0].pageX+a.touches[1].pageX)/2,n=(a.touches[0].pageY+a.touches[1].pageY)/2;M.copy(I(o,n)),P.copy(M);break;default:h=p.NONE;}u.dispatchEvent(C)}},!1),c.domElement.addEventListener("touchend",function(a){if(!1!==u.enabled){if(-1===u.forceState){switch(a.touches.length){case 1:g.copy(f),f.copy(R(a.touches[0].pageX,a.touches[0].pageY));break;case 2:S=w=0;var t=(a.touches[0].pageX+a.touches[1].pageX)/2,e=(a.touches[0].pageY+a.touches[1].pageY)/2;T.copy(I(t,e)),E.copy(T);}h=p.NONE}else switch(h){case 0:g.copy(f),f.copy(R(a.touches[0].pageX,a.touches[0].pageY));break;case 1:case 2:break;case 4:S=w=0,h=p.ZOOM;break;case 5:if(2<=a.touches.length){var t=(a.touches[0].pageX+a.touches[1].pageX)/2,e=(a.touches[0].pageY+a.touches[1].pageY)/2;T.copy(I(t,e)),E.copy(T)}h=p.PAN;break;case 99:var t=(a.touches[0].pageX+a.touches[1].pageX)/2,e=(a.touches[0].pageY+a.touches[1].pageY)/2;P.copy(I(t,e)),M.copy(P);break;default:h=p.NONE;}u.dispatchEvent(L)}},!1),c.domElement.addEventListener("touchmove",function(a){if(!1!==u.enabled)if(a.preventDefault(),a.stopPropagation(),-1===u.forceState)switch(a.touches.length){case 1:g.copy(f),f.copy(R(a.touches[0].pageX,a.touches[0].pageY));break;case 2:var t=a.touches[0].pageX-a.touches[1].pageX,e=a.touches[0].pageY-a.touches[1].pageY;w=O(t*t+e*e);var o=(a.touches[0].pageX+a.touches[1].pageX)/2,n=(a.touches[0].pageY+a.touches[1].pageY)/2;T.copy(I(o,n));break;default:h=p.NONE;}else switch(h){case 0:g.copy(f),f.copy(R(a.touches[0].pageX,a.touches[0].pageY));break;case 1:x.copy(I(a.touches[0].pageX,a.touches[0].pageY));break;case 2:T.copy(I(a.touches[0].pageX,a.touches[0].pageY));break;case 4:var t=a.touches[0].pageX-a.touches[1].pageX,e=a.touches[0].pageY-a.touches[1].pageY;w=O(t*t+e*e);break;case 5:var o=(a.touches[0].pageX+a.touches[1].pageX)/2,n=(a.touches[0].pageY+a.touches[1].pageY)/2;T.copy(I(o,n));break;case 99:var o=(a.touches[0].pageX+a.touches[1].pageX)/2,n=(a.touches[0].pageY+a.touches[1].pageY)/2;P.copy(I(o,n));break;default:h=p.NONE;}},!1),window.addEventListener("keydown",o,!1),window.addEventListener("keyup",function(){!1!==u.enabled&&(h=m,window.addEventListener("keydown",o,!1))},!1),c.handleResize(),c.update(),c}return r(t,a),t}(U.b);t.a=a},function(l,t,e){"use strict";function F(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function i(a,o){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o&&("object"==("undefined"===typeof o?"undefined":babelHelpers.typeof(o))||"function"==typeof o)?o:a}function r(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof o?"undefined":babelHelpers.typeof(o)));a.prototype=Object.create(o&&o.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(a,o):a.__proto__=o)}var B=e(0),a=function(a){function t(e,r){function o(e){!1!==f.enabled&&(window.removeEventListener("keydown",o),x=v,v===y.NONE&&(e.keyCode!==f.keys[y.ROTATE]||f.noRotate?e.keyCode!==f.keys[y.ZOOM]||f.noZoom?e.keyCode!==f.keys[y.PAN]||f.noPan||(v=y.PAN):v=y.ZOOM:v=y.ROTATE))}function n(){!1!==f.enabled&&(v=x,window.addEventListener("keydown",o,!1))}function l(e){!1!==f.enabled&&(e.preventDefault(),e.stopPropagation(),v===y.NONE&&(v=e.button),(v!==y.ROTATE||f.noRotate)&&(v!==y.ZOOM||f.noZoom?v!==y.PAN||f.noPan||(P.copy(R(e.pageX,e.pageY)),A.copy(P)):(w.copy(R(e.pageX,e.pageY)),E.copy(w))),document.addEventListener("mousemove",s,!1),document.addEventListener("mouseup",c,!1),f.dispatchEvent(L))}function s(e){!1!==f.enabled&&(e.preventDefault(),e.stopPropagation(),(v!==y.ROTATE||f.noRotate)&&(v!==y.ZOOM||f.noZoom?v!==y.PAN||f.noPan||A.copy(R(e.pageX,e.pageY)):E.copy(R(e.pageX,e.pageY))))}function c(e){!1!==f.enabled&&(e.preventDefault(),e.stopPropagation(),v=y.NONE,document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",c),f.dispatchEvent(I))}function u(a){if(!1!==f.enabled){a.preventDefault(),a.stopPropagation();var t=0;a.wheelDelta?t=a.wheelDelta/40:a.detail&&(t=-a.detail/3),f.dispatchEvent({type:"OnScroll",delta:t}),f.dispatchEvent(L),f.dispatchEvent(I)}}function p(a){if(!1!==f.enabled){switch(a.touches.length){case 1:v=y.TOUCH_ROTATE;break;case 2:v=y.TOUCH_ZOOM_PAN;var t=a.touches[0].pageX-a.touches[1].pageX,e=a.touches[0].pageY-a.touches[1].pageY;M=T=O(t*t+e*e);var o=(a.touches[0].pageX+a.touches[1].pageX)/2,n=(a.touches[0].pageY+a.touches[1].pageY)/2;P.copy(R(o,n)),A.copy(P);break;default:v=y.NONE;}f.dispatchEvent(L)}}function d(a){if(!1!==f.enabled)switch(a.preventDefault(),a.stopPropagation(),a.touches.length){case 1:break;case 2:var t=a.touches[0].pageX-a.touches[1].pageX,e=a.touches[0].pageY-a.touches[1].pageY;M=O(t*t+e*e);var o=(a.touches[0].pageX+a.touches[1].pageX)/2,n=(a.touches[0].pageY+a.touches[1].pageY)/2;A.copy(R(o,n));break;default:v=y.NONE;}}function h(a){if(!1!==f.enabled){switch(a.touches.length){case 1:break;case 2:T=M=0;var t=(a.touches[0].pageX+a.touches[1].pageX)/2,e=(a.touches[0].pageY+a.touches[1].pageY)/2;A.copy(R(t,e)),P.copy(A);}v=y.NONE,f.dispatchEvent(I)}}function m(e){e.preventDefault()}var _=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{NONE:-1,ROTATE:1,ZOOM:2,PAN:0,SCROLL:4,TOUCH_ROTATE:4,TOUCH_ZOOM_PAN:5};F(this,t);var g=i(this,a.call(this)),f=g,y=_;g.object=e,g.domElement=void 0===r?document:r,g.enabled=!0,g.screen={left:0,top:0,width:0,height:0},g.radius=0,g.zoomSpeed=1.2,g.noZoom=!1,g.noPan=!1,g.staticMoving=!1,g.dynamicDampingFactor=.2,g.keys=[65,83,68],g.target=new B.f;var b=!0,v=y.NONE,x=y.NONE,S=new B.f,w=new B.e,E=new B.e,T=0,M=0,P=new B.e,A=new B.e;g.target0=g.target.clone(),g.position0=g.object.position.clone(),g.up0=g.object.up.clone(),g.left0=g.object.left,g.right0=g.object.right,g.top0=g.object.top,g.bottom0=g.object.bottom;var C={type:"change"},L={type:"start"},I={type:"end"};g.handleResize=function(){if(this.domElement===document)this.screen.left=0,this.screen.top=0,this.screen.width=window.innerWidth,this.screen.height=window.innerHeight;else{var a=this.domElement.getBoundingClientRect(),t=this.domElement.ownerDocument.documentElement;this.screen.left=a.left+window.pageXOffset-t.clientLeft,this.screen.top=a.top+window.pageYOffset-t.clientTop,this.screen.width=a.width,this.screen.height=a.height}this.radius=.5*U(this.screen.width,this.screen.height),this.left0=this.object.left,this.right0=this.object.right,this.top0=this.object.top,this.bottom0=this.object.bottom},g.handleEvent=function(e){"function"==typeof this[e.type]&&this[e.type](e)};var R=function(){var a=new B.e;return function(t,e){return a.set((t-f.screen.left)/f.screen.width,(e-f.screen.top)/f.screen.height),a}}();return g.zoomCamera=function(){if(v===y.TOUCH_ZOOM_PAN)e=M/T,T=M,f.object.zoom*=e,b=!0;else{var e=1+(E.y-w.y)*f.zoomSpeed;1e-6<N(e-1)&&0<e&&(f.object.zoom/=e,f.staticMoving?w.copy(E):w.y+=(E.y-w.y)*this.dynamicDampingFactor,b=!0)}},g.panCamera=function(){var a=new B.e,t=new B.f,e=new B.f;return function(){if(a.copy(A).sub(P),a.lengthSq()){var o=(f.object.right-f.object.left)/f.object.zoom,n=(f.object.top-f.object.bottom)/f.object.zoom;a.x*=o,a.y*=n,e.copy(S).cross(f.object.up).setLength(a.x),e.add(t.copy(f.object.up).setLength(a.y)),f.object.position.add(e),f.target.add(e),f.staticMoving?P.copy(A):P.add(a.subVectors(A,P).multiplyScalar(f.dynamicDampingFactor)),b=!0}}}(),g.update=function(){S.subVectors(f.object.position,f.target),f.noZoom||(f.zoomCamera(),b&&f.object.updateProjectionMatrix()),f.noPan||f.panCamera(),f.object.position.addVectors(f.target,S),f.object.lookAt(f.target),b&&(f.dispatchEvent(C),b=!1)},g.reset=function(){v=y.NONE,x=y.NONE,f.target.copy(f.target0),f.object.position.copy(f.position0),f.object.up.copy(f.up0),S.subVectors(f.object.position,f.target),f.object.left=f.left0,f.object.right=f.right0,f.object.top=f.top0,f.object.bottom=f.bottom0,f.object.lookAt(f.target),f.dispatchEvent(C),b=!1},g.dispose=function(){this.domElement.removeEventListener("contextmenu",m,!1),this.domElement.removeEventListener("mousedown",l,!1),this.domElement.removeEventListener("mousewheel",u,!1),this.domElement.removeEventListener("MozMousePixelScroll",u,!1),this.domElement.removeEventListener("touchstart",p,!1),this.domElement.removeEventListener("touchend",h,!1),this.domElement.removeEventListener("touchmove",d,!1),document.removeEventListener("mousemove",s,!1),document.removeEventListener("mouseup",c,!1),window.removeEventListener("keydown",o,!1),window.removeEventListener("keyup",n,!1)},g.domElement.addEventListener("contextmenu",m,!1),g.domElement.addEventListener("mousedown",l,!1),g.domElement.addEventListener("mousewheel",u,!1),g.domElement.addEventListener("MozMousePixelScroll",u,!1),g.domElement.addEventListener("touchstart",p,!1),g.domElement.addEventListener("touchend",h,!1),g.domElement.addEventListener("touchmove",d,!1),window.addEventListener("keydown",o,!1),window.addEventListener("keyup",n,!1),g.handleResize(),g.update(),g}return r(t,a),t}(B.b);t.a=a},function(l,t,e){"use strict";var n=e(30),i=e(9),r=e(15),o=e(3);e.d(t,"a",function(){return n.a}),e.d(t,"b",function(){return i.a}),e.d(t,"c",function(){return o.a}),e.d(t,"d",function(){return r.a})},function(a,t,e){"use strict";var o=e(31),n=e(32);e.d(t,"a",function(){return o.a}),e.d(t,"b",function(){return n.a})},function(m,t,e){"use strict";var n=e(33),i=e(34),r=e(100),o=e(101),a=e(102),s=e(103),l=e(41),c=e(104),_=e(42),u=e(108),p=e(109);e.d(t,"a",function(){return n.a}),e.d(t,"b",function(){return i.a}),e.d(t,"c",function(){return r.a}),e.d(t,"d",function(){return o.a}),e.d(t,"e",function(){return a.a}),e.d(t,"h",function(){return s.a}),e.d(t,"g",function(){return l.a}),e.d(t,"f",function(){return c.a}),e.d(t,"i",function(){return _.a}),e.d(t,"j",function(){return u.a}),e.d(t,"k",function(){return p.a})},function(d,t,e){"use strict";function p(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function i(a,o){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o&&("object"==("undefined"===typeof o?"undefined":babelHelpers.typeof(o))||"function"==typeof o)?o:a}function r(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof o?"undefined":babelHelpers.typeof(o)));a.prototype=Object.create(o&&o.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(a,o):a.__proto__=o)}var u=e(35),a=e(36),s=e(37),o=function(){function a(a,o){for(var e=0,r;e<o.length;e++)r=o[e],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}return function(t,e,o){return e&&a(t.prototype,e),o&&a(t,o),t}}(),n=function(l){function t(e,r,o){p(this,t);var n=i(this,l.call(this));return n._stack=e,n._textureToFilter=o,n._contourWidth=1,n._contourOpacity=1,n._canvasWidth=0,n._canvasHeight=0,n._shadersFragment=s.a,n._shadersVertex=a.a,n._uniforms=u.a.uniforms(),n._material=null,n._geometry=r,n._create(),n}return r(t,l),t.prototype._create=function(){this._prepareMaterial(),this._mesh=new THREE.Mesh(this._geometry,this._material),this._mesh.applyMatrix(this._stack._ijk2LPS),this.add(this._mesh)},t.prototype._prepareMaterial=function(){if(!this._material){this._uniforms.uWidth.value=this._contourWidth,this._uniforms.uOpacity.value=this._contourOpacity,this._uniforms.uCanvasWidth.value=this._canvasWidth,this._uniforms.uCanvasHeight.value=this._canvasHeight;var o=new s.a(this._uniforms),t=new a.a;this._material=new THREE.ShaderMaterial({side:THREE.DoubleSide,uniforms:this._uniforms,vertexShader:t.compute(),fragmentShader:o.compute(),transparent:!0})}},t.prototype.update=function(){this._mesh&&(this.remove(this._mesh),this._mesh.geometry.dispose(),this._mesh.geometry=null,this._mesh=null),this._create()},t.prototype.dispose=function(){null!==this._textureToFilter&&(this._textureToFilter.dispose(),this._textureToFilter=null),this._shadersFragment=null,this._shadersVertex=null,this._uniforms=null,this.remove(this._mesh),this._mesh.geometry.dispose(),this._mesh.geometry=null,this._mesh.material.dispose(),this._mesh.material=null,this._mesh=null,this._geometry.dispose(),this._geometry=null,this._material.vertexShader=null,this._material.fragmentShader=null,this._material.uniforms=null,this._material.dispose(),this._material=null,this._stack=null},o(t,[{key:"geometry",get:function(){return this._geometry},set:function(e){this._mesh&&(this.remove(this._mesh),this._mesh.geometry.dispose(),this._mesh.geometry=null,this._mesh=null,this._geometry.dispose(),this._geometry=null),this._geometry=e,this._create()}},{key:"textureToFilter",get:function(){return this._textureToFilter},set:function(e){this._textureToFilter=e,this._uniforms.uTextureFilled.value=e,this._material.needsUpdate=!0}},{key:"contourOpacity",get:function(){return this._contourOpacity},set:function(e){this._contourOpacity=e,this._uniforms.uOpacity.value=this._contourOpacity}},{key:"contourWidth",get:function(){return this._contourWidth},set:function(e){this._contourWidth=e,this._uniforms.uWidth.value=this._contourWidth}},{key:"canvasWidth",get:function(){return this._canvasWidth},set:function(e){this._canvasWidth=e,this._uniforms.uCanvasWidth.value=this._canvasWidth}},{key:"canvasHeight",get:function(){return this._canvasHeight},set:function(e){this._canvasHeight=e,this._uniforms.uCanvasHeight.value=this._canvasHeight}}]),t}(THREE.Object3D);t.a=n},function(d,t,e){"use strict";function p(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function i(a,o){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o&&("object"==("undefined"===typeof o?"undefined":babelHelpers.typeof(o))||"function"==typeof o)?o:a}function r(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof o?"undefined":babelHelpers.typeof(o)));a.prototype=Object.create(o&&o.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(a,o):a.__proto__=o)}var u=e(38),a=e(39),s=e(40),o=function(){function a(a,o){for(var e=0,r;e<o.length;e++)r=o[e],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}return function(t,e,o){return e&&a(t.prototype,e),o&&a(t,o),t}}(),n=function(l){function t(e,r,o){p(this,t);var n=i(this,l.call(this));return n._stack=e,n._referencePlane=o,n._plane1=null,n._color1=null,n._plane2=null,n._color2=null,n._plane3=null,n._color3=null,n._canvasWidth=0,n._canvasHeight=0,n._shadersFragment=s.a,n._shadersVertex=a.a,n._uniforms=u.a.uniforms(),n._material=null,n._geometry=r,n._create(),n}return r(t,l),t.prototype._create=function(){this._prepareMaterial(),this._mesh=new THREE.Mesh(this._geometry,this._material),this._mesh.applyMatrix(this._stack._ijk2LPS),this.add(this._mesh)},t.prototype._prepareMaterial=function(){if(!this._material){this._uniforms.uSlice.value=this._referencePlane,this._plane1&&(this._uniforms.uPlane1.value=this._plane1,this._uniforms.uPlaneColor1.value=this._color1),this._plane2&&(this._uniforms.uPlane2.value=this._plane2,this._uniforms.uPlaneColor2.value=this._color2),this._plane3&&(this._uniforms.uPlane3.value=this._plane3,this._uniforms.uPlaneColor3.value=this._color3),this._uniforms.uCanvasWidth.value=this._canvasWidth,this._uniforms.uCanvasHeight.value=this._canvasHeight;var o=new s.a(this._uniforms),t=new a.a;this._material=new THREE.ShaderMaterial({side:THREE.DoubleSide,uniforms:this._uniforms,vertexShader:t.compute(),fragmentShader:o.compute()}),this._material.transparent=!0}},t.prototype.update=function(){this._mesh&&(this.remove(this._mesh),this._mesh.geometry.dispose(),this._mesh.geometry=null,this._mesh=null),this._create()},t.prototype.dispose=function(){this._referencePlane=null,this._plane1=null,this._color1=null,this._plane2=null,this._color2=null,this._plane3=null,this._color3=null,this._shadersFragment=null,this._shadersVertex=null,this._uniforms=null,this.remove(this._mesh),this._mesh.geometry.dispose(),this._mesh.geometry=null,this._mesh.material.dispose(),this._mesh.material=null,this._mesh=null,this._geometry.dispose(),this._geometry=null,this._material.vertexShader=null,this._material.fragmentShader=null,this._material.uniforms=null,this._material.dispose(),this._material=null,this._stack=null},o(t,[{key:"geometry",get:function(){return this._geometry},set:function(e){this._mesh&&(this.remove(this._mesh),this._mesh.geometry.dispose(),this._mesh.geometry=null,this._mesh=null,this._geometry.dispose(),this._geometry=null),this._geometry=e,this._create()}},{key:"referencePlane",get:function(){return this._referencePlane},set:function(e){this._referencePlane=e,this._uniforms.uSlice.value=this._referencePlane}},{key:"plane1",get:function(){return this._plane1},set:function(e){this._plane1=e,this._uniforms.uPlane1.value=this._plane1}},{key:"color1",get:function(){return this._color1},set:function(e){this._color1=e,this._uniforms.uPlaneColor1.value=this._color1}},{key:"plane2",get:function(){return this._plane2},set:function(e){this._plane2=e,this._uniforms.uPlane2.value=this._plane2}},{key:"color2",get:function(){return this._color2},set:function(e){this._color2=e,this._uniforms.uPlaneColor2.value=this._color2}},{key:"plane3",get:function(){return this._plane3},set:function(e){this._plane3=e,this._uniforms.uPlane3.value=this._plane3}},{key:"color3",get:function(){return this._color3},set:function(e){this._color3=e,this._uniforms.uPlaneColor3.value=this._color3}},{key:"canvasWidth",get:function(){return this._canvasWidth},set:function(e){this._canvasWidth=e,this._uniforms.uCanvasWidth.value=this._canvasWidth}},{key:"canvasHeight",get:function(){return this._canvasHeight},set:function(e){this._canvasHeight=e,this._uniforms.uCanvasHeight.value=this._canvasHeight}}]),t}(THREE.Object3D);t.a=n},function(l,t,e){"use strict";function d(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}var i=e(3),r=function(){function a(a,o){for(var e=0,r;e<o.length;e++)r=o[e],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}return function(t,e,o){return e&&a(t.prototype,e),o&&a(t,o),t}}(),o=function(){function p(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"default",a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"linear",r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:[[0,0,0,0],[1,1,1,1]],l=4<arguments.length&&void 0!==arguments[4]?arguments[4]:[[0,0],[1,1]],s=5<arguments.length&&void 0!==arguments[5]&&arguments[5],c,n;d(this,p),this._dom=i.a.isString(t)?document.getElementById(t):t,this._discrete=s,this._color=r,this._lut=e,this._luts=(c={},c[e]=r,c),this._opacity=l,this._lutO=a,this._lutsO=(n={},n[a]=l,n),this.initCanvas(),this.paintCanvas()}return p.prototype.initCanvas=function(){this._canvasContainer=this.initCanvasContainer(this._dom),this._canvasBg=this.createCanvas(),this._canvasContainer.appendChild(this._canvasBg),this._canvas=this.createCanvas(),this._canvasContainer.appendChild(this._canvas)},p.prototype.initCanvasContainer=function(a){var t=a;return t.style.border="1px solid #F9F9F9",t},p.prototype.createCanvas=function(){var e=document.createElement("canvas");return e.height=1,e.width=256,e.style.width="256px",e.style.height="16px",e},p.prototype.paintCanvas=function(){var d=this._canvas.getContext("2d");if(d.clearRect(0,0,this._canvas.width,this._canvas.height),d.globalCompositeOperation="source-over",this._discrete){d.lineWidth=2*this._canvas.height;for(var t=0;t<this._color.length;t++){var e=this._color[t][0],n=1;t<this._color.length-1&&(n=this._color[t+1][0]);var i=0;0<t&&(i=this._color[t-1][0]);var r=i+(e-i)/2,o=e+(n-e)/2,a=this._color[t],s=this._opacity[t]?this._opacity[t][1]:1;d.beginPath(),d.strokeStyle="rgba( "+P(255*a[1])+", "+P(255*a[2])+", "+P(255*a[3])+", "+s+")",d.moveTo(r*this._canvas.width,0),d.lineTo(o*this._canvas.width,0),d.stroke(),d.closePath()}}else{for(var l=d.createLinearGradient(0,0,this._canvas.width,0),c=0;c<this._color.length;c++)l.addColorStop(this._color[c][0],"rgba( "+P(255*this._color[c][1])+", "+P(255*this._color[c][2])+", "+P(255*this._color[c][3])+", 1)");d.fillStyle=l,d.fillRect(0,0,this._canvas.width,this._canvas.height),d.globalCompositeOperation="destination-in";for(var m=d.createLinearGradient(0,0,this._canvas.width,0),u=0;u<this._opacity.length;u++)m.addColorStop(this._opacity[u][0],"rgba(255, 255, 255, "+this._opacity[u][1]+")");d.fillStyle=m,d.fillRect(0,0,this._canvas.width,this._canvas.height)}},p.prototype.lutsAvailable=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"color",t=[],e=this._luts;for(var o in"color"!==a&&(e=this._lutsO),e)t.push(o);return t},p.presetLuts=function(){return{default:[[0,0,0,0],[1,1,1,1]],spectrum:[[0,0,0,0],[0.1,0,0,1],[0.33,0,1,1],[0.5,0,1,0],[0.66,1,1,0],[0.9,1,0,0],[1,1,1,1]],hot_and_cold:[[0,0,0,1],[0.15,0,1,1],[0.3,0,1,0],[0.45,0,0,0],[0.5,0,0,0],[0.55,0,0,0],[0.7,1,1,0],[0.85,1,0,0],[1,1,1,1]],gold:[[0,0,0,0],[0.13,0.19,0.03,0],[0.25,0.39,0.12,0],[0.38,0.59,0.26,0],[0.5,0.8,0.46,0.08],[0.63,0.99,0.71,0.21],[0.75,0.99,0.88,0.34],[0.88,0.99,0.99,0.48],[1,0.9,0.95,0.61]],red:[[0,0.75,0,0],[0.5,1,0.5,0],[0.95,1,1,0],[1,1,1,1]],green:[[0,0,0.75,0],[0.5,0.5,1,0],[0.95,1,1,0],[1,1,1,1]],blue:[[0,0,0,1],[0.5,0,0.5,1],[0.95,0,1,1],[1,1,1,1]],walking_dead:[[0,0.1,1,1],[1,1,1,1]],random:[[0,0,0,0],[0.27,0.18,0.18,0.18],[0.41,1,1,1],[0.7,1,0,0],[1,1,1,1]],muscle_bone:[[0,0,0,0],[0.00392156862745098,0.00784313725490196,0,0],[0.00784313725490196,0.0196078431372549,0,0],[0.011764705882352941,0.03137254901960784,0,0],[0.01568627450980392,0.0392156862745098,0,0.00392156862745098],[0.0196078431372549,0.050980392156862744,0.00392156862745098,0.00392156862745098],[0.023529411764705882,0.06274509803921569,0.00392156862745098,0.00392156862745098],[0.027450980392156862,0.07058823529411765,0.00392156862745098,0.00784313725490196],[0.03137254901960784,0.08235294117647059,0.00392156862745098,0.00784313725490196],[0.03529411764705882,0.09411764705882353,0.00784313725490196,0.00784313725490196],[0.0392156862745098,0.10196078431372549,0.00784313725490196,0.00784313725490196],[0.043137254901960784,0.11372549019607843,0.00784313725490196,0.011764705882352941],[0.047058823529411764,0.12549019607843137,0.00784313725490196,0.011764705882352941],[0.050980392156862744,0.13333333333333333,0.011764705882352941,0.011764705882352941],[0.054901960784313725,0.1450980392156863,0.011764705882352941,0.01568627450980392],[0.058823529411764705,0.1568627450980392,0.011764705882352941,0.01568627450980392],[0.06274509803921569,0.16470588235294117,0.011764705882352941,0.01568627450980392],[0.06666666666666667,0.17647058823529413,0.011764705882352941,0.0196078431372549],[0.07058823529411765,0.18823529411764706,0.01568627450980392,0.0196078431372549],[0.07450980392156863,0.2,0.01568627450980392,0.0196078431372549],[0.0784313725490196,0.20784313725490197,0.01568627450980392,0.0196078431372549],[0.08235294117647059,0.2196078431372549,0.01568627450980392,0.023529411764705882],[0.08627450980392157,0.23137254901960785,0.0196078431372549,0.023529411764705882],[0.09019607843137255,0.23921568627450981,0.0196078431372549,0.023529411764705882],[0.09411764705882353,0.25098039215686274,0.0196078431372549,0.027450980392156862],[0.09803921568627451,0.2627450980392157,0.0196078431372549,0.027450980392156862],[0.10196078431372549,0.27058823529411763,0.023529411764705882,0.027450980392156862],[0.10588235294117647,0.2823529411764706,0.023529411764705882,0.027450980392156862],[0.10980392156862745,0.29411764705882354,0.023529411764705882,0.03137254901960784],[0.11372549019607843,0.30196078431372547,0.023529411764705882,0.03137254901960784],[0.11764705882352941,0.3137254901960784,0.023529411764705882,0.03137254901960784],[0.12156862745098039,0.3254901960784314,0.027450980392156862,0.03529411764705882],[0.12549019607843137,0.3333333333333333,0.027450980392156862,0.03529411764705882],[0.12941176470588237,0.34509803921568627,0.027450980392156862,0.03529411764705882],[0.13333333333333333,0.3568627450980392,0.027450980392156862,0.0392156862745098],[0.13725490196078433,0.36470588235294116,0.03137254901960784,0.0392156862745098],[0.1411764705882353,0.3764705882352941,0.03137254901960784,0.0392156862745098],[0.1450980392156863,0.38823529411764707,0.03137254901960784,0.0392156862745098],[0.14901960784313725,0.4,0.03137254901960784,0.043137254901960784],[0.15294117647058825,0.40784313725490196,0.03529411764705882,0.043137254901960784],[0.1568627450980392,0.4196078431372549,0.03529411764705882,0.043137254901960784],[0.1607843137254902,0.43137254901960786,0.03529411764705882,0.047058823529411764],[0.16470588235294117,0.4392156862745098,0.03529411764705882,0.047058823529411764],[0.16862745098039217,0.45098039215686275,0.03529411764705882,0.047058823529411764],[0.17254901960784313,0.4627450980392157,0.0392156862745098,0.047058823529411764],[0.17647058823529413,0.47058823529411764,0.0392156862745098,0.050980392156862744],[0.1803921568627451,0.4823529411764706,0.0392156862745098,0.050980392156862744],[0.1843137254901961,0.49411764705882355,0.0392156862745098,0.050980392156862744],[0.18823529411764706,0.5019607843137255,0.043137254901960784,0.054901960784313725],[0.19215686274509805,0.5137254901960784,0.043137254901960784,0.054901960784313725],[0.19607843137254902,0.5254901960784314,0.043137254901960784,0.054901960784313725],[0.2,0.5333333333333333,0.043137254901960784,0.058823529411764705],[0.20392156862745098,0.5450980392156862,0.047058823529411764,0.058823529411764705],[0.20784313725490197,0.5568627450980392,0.047058823529411764,0.058823529411764705],[0.21176470588235294,0.5647058823529412,0.047058823529411764,0.058823529411764705],[0.21568627450980393,0.5764705882352941,0.047058823529411764,0.06274509803921569],[0.2196078431372549,0.5882352941176471,0.047058823529411764,0.06274509803921569],[0.2235294117647059,0.6,0.050980392156862744,0.06274509803921569],[0.22745098039215686,0.6078431372549019,0.050980392156862744,0.06666666666666667],[0.23137254901960785,0.6196078431372549,0.050980392156862744,0.06666666666666667],[0.23529411764705882,0.6313725490196078,0.050980392156862744,0.06666666666666667],[0.23921568627450981,0.6392156862745098,0.054901960784313725,0.06666666666666667],[0.24313725490196078,0.6509803921568628,0.054901960784313725,0.07058823529411765],[0.24705882352941178,0.6627450980392157,0.054901960784313725,0.07058823529411765],[0.25098039215686274,0.6705882352941176,0.054901960784313725,0.07058823529411765],[0.2549019607843137,0.6823529411764706,0.058823529411764705,0.07450980392156863],[0.25882352941176473,0.6941176470588235,0.058823529411764705,0.07450980392156863],[0.2627450980392157,0.7019607843137254,0.058823529411764705,0.07450980392156863],[0.26666666666666666,0.7137254901960784,0.058823529411764705,0.0784313725490196],[0.27058823529411763,0.7254901960784313,0.058823529411764705,0.0784313725490196],[0.27450980392156865,0.7333333333333333,0.06274509803921569,0.0784313725490196],[0.2784313725490196,0.7450980392156863,0.06274509803921569,0.0784313725490196],[0.2823529411764706,0.7568627450980392,0.06274509803921569,0.08235294117647059],[0.28627450980392155,0.7647058823529411,0.06274509803921569,0.08235294117647059],[0.2901960784313726,0.7764705882352941,0.06666666666666667,0.08235294117647059],[0.29411764705882354,0.788235294117647,0.06666666666666667,0.08627450980392157],[0.2980392156862745,0.8,0.06666666666666667,0.08627450980392157],[0.30196078431372547,0.807843137254902,0.06666666666666667,0.08627450980392157],[0.3058823529411765,0.8196078431372549,0.07058823529411765,0.08627450980392157],[0.30980392156862746,0.8313725490196079,0.07058823529411765,0.09019607843137255],[0.3137254901960784,0.8392156862745098,0.07058823529411765,0.09019607843137255],[0.3176470588235294,0.8509803921568627,0.07058823529411765,0.09019607843137255],[0.3215686274509804,0.8627450980392157,0.07058823529411765,0.09411764705882353],[0.3254901960784314,0.8705882352941177,0.07450980392156863,0.09411764705882353],[0.32941176470588235,0.8823529411764706,0.07450980392156863,0.09411764705882353],[0.3333333333333333,0.8941176470588236,0.07450980392156863,0.09803921568627451],[0.33725490196078434,0.9019607843137255,0.07450980392156863,0.09803921568627451],[0.3411764705882353,0.9137254901960784,0.0784313725490196,0.09803921568627451],[0.34509803921568627,0.9254901960784314,0.0784313725490196,0.09803921568627451],[0.34901960784313724,0.9333333333333333,0.0784313725490196,0.10196078431372549],[0.35294117647058826,0.9450980392156862,0.0784313725490196,0.10196078431372549],[0.3568627450980392,0.9568627450980393,0.08235294117647059,0.10196078431372549],[0.3607843137254902,0.9647058823529412,0.08235294117647059,0.10588235294117647],[0.36470588235294116,0.9764705882352941,0.08235294117647059,0.10588235294117647],[0.3686274509803922,0.9882352941176471,0.08235294117647059,0.10588235294117647],[0.37254901960784315,1,0.08235294117647059,0.10588235294117647],[0.3764705882352941,1,0.09411764705882353,0.10588235294117647],[0.3803921568627451,1,0.10588235294117647,0.10588235294117647],[0.3843137254901961,1,0.11764705882352941,0.10196078431372549],[0.38823529411764707,1,0.12941176470588237,0.10196078431372549],[0.39215686274509803,1,0.1411764705882353,0.10196078431372549],[0.396078431372549,1,0.15294117647058825,0.09803921568627451],[0.4,1,0.16470588235294117,0.09803921568627451],[0.403921568627451,1,0.17647058823529413,0.09803921568627451],[0.40784313725490196,1,0.18823529411764706,0.09411764705882353],[0.4117647058823529,1,0.2,0.09411764705882353],[0.41568627450980394,1,0.21176470588235294,0.09411764705882353],[0.4196078431372549,1,0.2235294117647059,0.09019607843137255],[0.4235294117647059,1,0.23529411764705882,0.09019607843137255],[0.42745098039215684,1,0.24705882352941178,0.08627450980392157],[0.43137254901960786,1,0.25882352941176473,0.08627450980392157],[0.43529411764705883,1,0.27058823529411763,0.08627450980392157],[0.4392156862745098,1,0.2823529411764706,0.08235294117647059],[0.44313725490196076,1,0.29411764705882354,0.08235294117647059],[0.4470588235294118,1,0.3058823529411765,0.08235294117647059],[0.45098039215686275,1,0.3176470588235294,0.0784313725490196],[0.4549019607843137,1,0.32941176470588235,0.0784313725490196],[0.4588235294117647,1,0.3411764705882353,0.0784313725490196],[0.4627450980392157,1,0.35294117647058826,0.07450980392156863],[0.4666666666666667,1,0.36470588235294116,0.07450980392156863],[0.47058823529411764,1,0.3764705882352941,0.07450980392156863],[0.4745098039215686,1,0.38823529411764707,0.07058823529411765],[0.47843137254901963,1,0.4,0.07058823529411765],[0.4823529411764706,1,0.4117647058823529,0.07058823529411765],[0.48627450980392156,1,0.4235294117647059,0.06666666666666667],[0.49019607843137253,1,0.43529411764705883,0.06666666666666667],[0.49411764705882355,1,0.4470588235294118,0.06274509803921569],[0.4980392156862745,1,0.4588235294117647,0.06274509803921569],[0.5019607843137255,1,0.47058823529411764,0.06274509803921569],[0.5058823529411764,1,0.4823529411764706,0.058823529411764705],[0.5098039215686274,1,0.49411764705882355,0.058823529411764705],[0.5137254901960784,1,0.5058823529411764,0.058823529411764705],[0.5176470588235295,1,0.5137254901960784,0.054901960784313725],[0.5215686274509804,1,0.5254901960784314,0.054901960784313725],[0.5254901960784314,1,0.5372549019607843,0.054901960784313725],[0.5294117647058824,1,0.5490196078431373,0.050980392156862744],[0.5333333333333333,1,0.5607843137254902,0.050980392156862744],[0.5372549019607843,1,0.5725490196078431,0.050980392156862744],[0.5411764705882353,1,0.5843137254901961,0.047058823529411764],[0.5450980392156862,1,0.596078431372549,0.047058823529411764],[0.5490196078431373,1,0.6078431372549019,0.043137254901960784],[0.5529411764705883,1,0.6196078431372549,0.043137254901960784],[0.5568627450980392,1,0.6313725490196078,0.043137254901960784],[0.5607843137254902,1,0.6431372549019608,0.0392156862745098],[0.5647058823529412,1,0.6549019607843137,0.0392156862745098],[0.5686274509803921,1,0.6666666666666666,0.0392156862745098],[0.5725490196078431,1,0.6784313725490196,0.03529411764705882],[0.5764705882352941,1,0.6901960784313725,0.03529411764705882],[0.5803921568627451,1,0.6941176470588235,0.0392156862745098],[0.5843137254901961,1,0.7019607843137254,0.0392156862745098],[0.5882352941176471,1,0.7058823529411765,0.043137254901960784],[0.592156862745098,1,0.7098039215686275,0.043137254901960784],[0.596078431372549,1,0.7137254901960784,0.047058823529411764],[0.6,1,0.7176470588235294,0.047058823529411764],[0.6039215686274509,1,0.7254901960784313,0.050980392156862744],[0.6078431372549019,1,0.7294117647058823,0.050980392156862744],[0.611764705882353,1,0.7333333333333333,0.054901960784313725],[0.615686274509804,1,0.7372549019607844,0.058823529411764705],[0.6196078431372549,1,0.7411764705882353,0.058823529411764705],[0.6235294117647059,1,0.7490196078431373,0.06274509803921569],[0.6274509803921569,1,0.7529411764705882,0.06274509803921569],[0.6313725490196078,1,0.7568627450980392,0.06666666666666667],[0.6352941176470588,1,0.7607843137254902,0.06666666666666667],[0.6392156862745098,1,0.7647058823529411,0.07058823529411765],[0.6431372549019608,1,0.7725490196078432,0.07058823529411765],[0.6470588235294118,1,0.7764705882352941,0.07450980392156863],[0.6509803921568628,1,0.7803921568627451,0.07450980392156863],[0.6549019607843137,1,0.7843137254901961,0.0784313725490196],[0.6588235294117647,1,0.788235294117647,0.08235294117647059],[0.6627450980392157,1,0.796078431372549,0.08235294117647059],[0.6666666666666666,1,0.8,0.08627450980392157],[0.6705882352941176,1,0.803921568627451,0.08627450980392157],[0.6745098039215687,1,0.807843137254902,0.09019607843137255],[0.6784313725490196,1,0.8117647058823529,0.09019607843137255],[0.6823529411764706,1,0.8196078431372549,0.09411764705882353],[0.6862745098039216,1,0.8235294117647058,0.09411764705882353],[0.6901960784313725,1,0.8274509803921568,0.09803921568627451],[0.6941176470588235,1,0.8313725490196079,0.10196078431372549],[0.6980392156862745,1,0.8352941176470589,0.10196078431372549],[0.7019607843137254,1,0.8431372549019608,0.10588235294117647],[0.7058823529411765,1,0.8470588235294118,0.10588235294117647],[0.7098039215686275,1,0.8509803921568627,0.10980392156862745],[0.7137254901960784,1,0.8549019607843137,0.10980392156862745],[0.7176470588235294,1,0.8627450980392157,0.11372549019607843],[0.7215686274509804,1,0.8666666666666667,0.11372549019607843],[0.7254901960784313,1,0.8705882352941177,0.11764705882352941],[0.7294117647058823,1,0.8745098039215686,0.12156862745098039],[0.7333333333333333,1,0.8784313725490196,0.12156862745098039],[0.7372549019607844,1,0.8862745098039215,0.12549019607843137],[0.7411764705882353,1,0.8901960784313725,0.12549019607843137],[0.7450980392156863,1,0.8941176470588236,0.12941176470588237],[0.7490196078431373,1,0.8980392156862745,0.12941176470588237],[0.7529411764705882,1,0.9019607843137255,0.13333333333333333],[0.7568627450980392,1,0.9098039215686274,0.13333333333333333],[0.7607843137254902,1,0.9137254901960784,0.13725490196078433],[0.7647058823529411,1,0.9176470588235294,0.1411764705882353],[0.7686274509803922,1,0.9215686274509803,0.1411764705882353],[0.7725490196078432,1,0.9254901960784314,0.1450980392156863],[0.7764705882352941,1,0.9333333333333333,0.1450980392156863],[0.7803921568627451,1,0.9372549019607843,0.14901960784313725],[0.7843137254901961,1,0.9411764705882353,0.14901960784313725],[0.788235294117647,1,0.9450980392156862,0.15294117647058825],[0.792156862745098,1,0.9450980392156862,0.16862745098039217],[0.796078431372549,1,0.9490196078431372,0.1843137254901961],[0.8,1,0.9490196078431372,0.2],[0.803921568627451,1,0.9490196078431372,0.21568627450980393],[0.807843137254902,1,0.9490196078431372,0.22745098039215686],[0.8117647058823529,1,0.9529411764705882,0.24313725490196078],[0.8156862745098039,1,0.9529411764705882,0.25882352941176473],[0.8196078431372549,1,0.9529411764705882,0.27450980392156865],[0.8235294117647058,1,0.9529411764705882,0.2901960784313726],[0.8274509803921568,1,0.9568627450980393,0.3058823529411765],[0.8313725490196079,1,0.9568627450980393,0.3215686274509804],[0.8352941176470589,1,0.9568627450980393,0.33725490196078434],[0.8392156862745098,1,0.9568627450980393,0.35294117647058826],[0.8431372549019608,1,0.9607843137254902,0.3686274509803922],[0.8470588235294118,1,0.9607843137254902,0.3843137254901961],[0.8509803921568627,1,0.9607843137254902,0.4],[0.8549019607843137,1,0.9607843137254902,0.4117647058823529],[0.8588235294117647,1,0.9647058823529412,0.42745098039215684],[0.8627450980392157,1,0.9647058823529412,0.44313725490196076],[0.8666666666666667,1,0.9647058823529412,0.4588235294117647],[0.8705882352941177,1,0.9647058823529412,0.4745098039215686],[0.8745098039215686,1,0.9686274509803922,0.49019607843137253],[0.8784313725490196,1,0.9686274509803922,0.5058823529411764],[0.8823529411764706,1,0.9686274509803922,0.5215686274509804],[0.8862745098039215,1,0.9686274509803922,0.5372549019607843],[0.8901960784313725,1,0.9725490196078431,0.5529411764705883],[0.8941176470588236,1,0.9725490196078431,0.5686274509803921],[0.8980392156862745,1,0.9725490196078431,0.5843137254901961],[0.9019607843137255,1,0.9725490196078431,0.6],[0.9058823529411765,1,0.9725490196078431,0.611764705882353],[0.9098039215686274,1,0.9764705882352941,0.6274509803921569],[0.9137254901960784,1,0.9764705882352941,0.6431372549019608],[0.9176470588235294,1,0.9764705882352941,0.6588235294117647],[0.9215686274509803,1,0.9764705882352941,0.6745098039215687],[0.9254901960784314,1,0.9803921568627451,0.6901960784313725],[0.9294117647058824,1,0.9803921568627451,0.7058823529411765],[0.9333333333333333,1,0.9803921568627451,0.7215686274509804],[0.9372549019607843,1,0.9803921568627451,0.7372549019607844],[0.9411764705882353,1,0.984313725490196,0.7529411764705882],[0.9450980392156862,1,0.984313725490196,0.7686274509803922],[0.9490196078431372,1,0.984313725490196,0.7843137254901961],[0.9529411764705882,1,0.984313725490196,0.8],[0.9568627450980393,1,0.9882352941176471,0.8117647058823529],[0.9607843137254902,1,0.9882352941176471,0.8274509803921568],[0.9647058823529412,1,0.9882352941176471,0.8431372549019608],[0.9686274509803922,1,0.9882352941176471,0.8588235294117647],[0.9725490196078431,1,0.9921568627450981,0.8745098039215686],[0.9764705882352941,1,0.9921568627450981,0.8901960784313725],[0.9803921568627451,1,0.9921568627450981,0.9058823529411765],[0.984313725490196,1,0.9921568627450981,0.9215686274509803],[0.9882352941176471,1,0.996078431372549,0.9372549019607843],[0.9921568627450981,1,0.996078431372549,0.9529411764705882],[0.996078431372549,1,0.996078431372549,0.9686274509803922],[1,1,0.996078431372549,0.984313725490196]]}},p.presetLutsO=function(){return{linear:[[0,0],[1,1]],lowpass:[[0,0.8],[0.2,0.6],[0.3,0.1],[1,0]],bandpass:[[0,0],[0.4,0.8],[0.6,0.8],[1,0]],highpass:[[0,0],[0.7,0.1],[0.8,0.6],[1,0.8]],flat:[[0,0.7],[1,1]],random:[[0,0],[0.38,0],[0.55,1],[0.72,1],[1,0.05]],linear_full:[[0,0],[0.00392156862745098,0.00392156862745098],[0.00784313725490196,0.00784313725490196],[0.011764705882352941,0.011764705882352941],[0.01568627450980392,0.01568627450980392],[0.0196078431372549,0.0196078431372549],[0.023529411764705882,0.023529411764705882],[0.027450980392156862,0.027450980392156862],[0.03137254901960784,0.03137254901960784],[0.03529411764705882,0.03529411764705882],[0.0392156862745098,0.0392156862745098],[0.043137254901960784,0.043137254901960784],[0.047058823529411764,0.047058823529411764],[0.050980392156862744,0.050980392156862744],[0.054901960784313725,0.054901960784313725],[0.058823529411764705,0.058823529411764705],[0.06274509803921569,0.06274509803921569],[0.06666666666666667,0.06666666666666667],[0.07058823529411765,0.07058823529411765],[0.07450980392156863,0.07450980392156863],[0.0784313725490196,0.0784313725490196],[0.08235294117647059,0.08235294117647059],[0.08627450980392157,0.08627450980392157],[0.09019607843137255,0.09019607843137255],[0.09411764705882353,0.09411764705882353],[0.09803921568627451,0.09803921568627451],[0.10196078431372549,0.10196078431372549],[0.10588235294117647,0.10588235294117647],[0.10980392156862745,0.10980392156862745],[0.11372549019607843,0.11372549019607843],[0.11764705882352941,0.11764705882352941],[0.12156862745098039,0.12156862745098039],[0.12549019607843137,0.12549019607843137],[0.12941176470588237,0.12941176470588237],[0.13333333333333333,0.13333333333333333],[0.13725490196078433,0.13725490196078433],[0.1411764705882353,0.1411764705882353],[0.1450980392156863,0.1450980392156863],[0.14901960784313725,0.14901960784313725],[0.15294117647058825,0.15294117647058825],[0.1568627450980392,0.1568627450980392],[0.1607843137254902,0.1607843137254902],[0.16470588235294117,0.16470588235294117],[0.16862745098039217,0.16862745098039217],[0.17254901960784313,0.17254901960784313],[0.17647058823529413,0.17647058823529413],[0.1803921568627451,0.1803921568627451],[0.1843137254901961,0.1843137254901961],[0.18823529411764706,0.18823529411764706],[0.19215686274509805,0.19215686274509805],[0.19607843137254902,0.19607843137254902],[0.2,0.2],[0.20392156862745098,0.20392156862745098],[0.20784313725490197,0.20784313725490197],[0.21176470588235294,0.21176470588235294],[0.21568627450980393,0.21568627450980393],[0.2196078431372549,0.2196078431372549],[0.2235294117647059,0.2235294117647059],[0.22745098039215686,0.22745098039215686],[0.23137254901960785,0.23137254901960785],[0.23529411764705882,0.23529411764705882],[0.23921568627450981,0.23921568627450981],[0.24313725490196078,0.24313725490196078],[0.24705882352941178,0.24705882352941178],[0.25098039215686274,0.25098039215686274],[0.2549019607843137,0.2549019607843137],[0.25882352941176473,0.25882352941176473],[0.2627450980392157,0.2627450980392157],[0.26666666666666666,0.26666666666666666],[0.27058823529411763,0.27058823529411763],[0.27450980392156865,0.27450980392156865],[0.2784313725490196,0.2784313725490196],[0.2823529411764706,0.2823529411764706],[0.28627450980392155,0.28627450980392155],[0.2901960784313726,0.2901960784313726],[0.29411764705882354,0.29411764705882354],[0.2980392156862745,0.2980392156862745],[0.30196078431372547,0.30196078431372547],[0.3058823529411765,0.3058823529411765],[0.30980392156862746,0.30980392156862746],[0.3137254901960784,0.3137254901960784],[0.3176470588235294,0.3176470588235294],[0.3215686274509804,0.3215686274509804],[0.3254901960784314,0.3254901960784314],[0.32941176470588235,0.32941176470588235],[0.3333333333333333,0.3333333333333333],[0.33725490196078434,0.33725490196078434],[0.3411764705882353,0.3411764705882353],[0.34509803921568627,0.34509803921568627],[0.34901960784313724,0.34901960784313724],[0.35294117647058826,0.35294117647058826],[0.3568627450980392,0.3568627450980392],[0.3607843137254902,0.3607843137254902],[0.36470588235294116,0.36470588235294116],[0.3686274509803922,0.3686274509803922],[0.37254901960784315,0.37254901960784315],[0.3764705882352941,0.3764705882352941],[0.3803921568627451,0.3803921568627451],[0.3843137254901961,0.3843137254901961],[0.38823529411764707,0.38823529411764707],[0.39215686274509803,0.39215686274509803],[0.396078431372549,0.396078431372549],[0.4,0.4],[0.403921568627451,0.403921568627451],[0.40784313725490196,0.40784313725490196],[0.4117647058823529,0.4117647058823529],[0.41568627450980394,0.41568627450980394],[0.4196078431372549,0.4196078431372549],[0.4235294117647059,0.4235294117647059],[0.42745098039215684,0.42745098039215684],[0.43137254901960786,0.43137254901960786],[0.43529411764705883,0.43529411764705883],[0.4392156862745098,0.4392156862745098],[0.44313725490196076,0.44313725490196076],[0.4470588235294118,0.4470588235294118],[0.45098039215686275,0.45098039215686275],[0.4549019607843137,0.4549019607843137],[0.4588235294117647,0.4588235294117647],[0.4627450980392157,0.4627450980392157],[0.4666666666666667,0.4666666666666667],[0.47058823529411764,0.47058823529411764],[0.4745098039215686,0.4745098039215686],[0.47843137254901963,0.47843137254901963],[0.4823529411764706,0.4823529411764706],[0.48627450980392156,0.48627450980392156],[0.49019607843137253,0.49019607843137253],[0.49411764705882355,0.49411764705882355],[0.4980392156862745,0.4980392156862745],[0.5019607843137255,0.5019607843137255],[0.5058823529411764,0.5058823529411764],[0.5098039215686274,0.5098039215686274],[0.5137254901960784,0.5137254901960784],[0.5176470588235295,0.5176470588235295],[0.5215686274509804,0.5215686274509804],[0.5254901960784314,0.5254901960784314],[0.5294117647058824,0.5294117647058824],[0.5333333333333333,0.5333333333333333],[0.5372549019607843,0.5372549019607843],[0.5411764705882353,0.5411764705882353],[0.5450980392156862,0.5450980392156862],[0.5490196078431373,0.5490196078431373],[0.5529411764705883,0.5529411764705883],[0.5568627450980392,0.5568627450980392],[0.5607843137254902,0.5607843137254902],[0.5647058823529412,0.5647058823529412],[0.5686274509803921,0.5686274509803921],[0.5725490196078431,0.5725490196078431],[0.5764705882352941,0.5764705882352941],[0.5803921568627451,0.5803921568627451],[0.5843137254901961,0.5843137254901961],[0.5882352941176471,0.5882352941176471],[0.592156862745098,0.592156862745098],[0.596078431372549,0.596078431372549],[0.6,0.6],[0.6039215686274509,0.6039215686274509],[0.6078431372549019,0.6078431372549019],[0.611764705882353,0.611764705882353],[0.615686274509804,0.615686274509804],[0.6196078431372549,0.6196078431372549],[0.6235294117647059,0.6235294117647059],[0.6274509803921569,0.6274509803921569],[0.6313725490196078,0.6313725490196078],[0.6352941176470588,0.6352941176470588],[0.6392156862745098,0.6392156862745098],[0.6431372549019608,0.6431372549019608],[0.6470588235294118,0.6470588235294118],[0.6509803921568628,0.6509803921568628],[0.6549019607843137,0.6549019607843137],[0.6588235294117647,0.6588235294117647],[0.6627450980392157,0.6627450980392157],[0.6666666666666666,0.6666666666666666],[0.6705882352941176,0.6705882352941176],[0.6745098039215687,0.6745098039215687],[0.6784313725490196,0.6784313725490196],[0.6823529411764706,0.6823529411764706],[0.6862745098039216,0.6862745098039216],[0.6901960784313725,0.6901960784313725],[0.6941176470588235,0.6941176470588235],[0.6980392156862745,0.6980392156862745],[0.7019607843137254,0.7019607843137254],[0.7058823529411765,0.7058823529411765],[0.7098039215686275,0.7098039215686275],[0.7137254901960784,0.7137254901960784],[0.7176470588235294,0.7176470588235294],[0.7215686274509804,0.7215686274509804],[0.7254901960784313,0.7254901960784313],[0.7294117647058823,0.7294117647058823],[0.7333333333333333,0.7333333333333333],[0.7372549019607844,0.7372549019607844],[0.7411764705882353,0.7411764705882353],[0.7450980392156863,0.7450980392156863],[0.7490196078431373,0.7490196078431373],[0.7529411764705882,0.7529411764705882],[0.7568627450980392,0.7568627450980392],[0.7607843137254902,0.7607843137254902],[0.7647058823529411,0.7647058823529411],[0.7686274509803922,0.7686274509803922],[0.7725490196078432,0.7725490196078432],[0.7764705882352941,0.7764705882352941],[0.7803921568627451,0.7803921568627451],[0.7843137254901961,0.7843137254901961],[0.788235294117647,0.788235294117647],[0.792156862745098,0.792156862745098],[0.796078431372549,0.796078431372549],[0.8,0.8],[0.803921568627451,0.803921568627451],[0.807843137254902,0.807843137254902],[0.8117647058823529,0.8117647058823529],[0.8156862745098039,0.8156862745098039],[0.8196078431372549,0.8196078431372549],[0.8235294117647058,0.8235294117647058],[0.8274509803921568,0.8274509803921568],[0.8313725490196079,0.8313725490196079],[0.8352941176470589,0.8352941176470589],[0.8392156862745098,0.8392156862745098],[0.8431372549019608,0.8431372549019608],[0.8470588235294118,0.8470588235294118],[0.8509803921568627,0.8509803921568627],[0.8549019607843137,0.8549019607843137],[0.8588235294117647,0.8588235294117647],[0.8627450980392157,0.8627450980392157],[0.8666666666666667,0.8666666666666667],[0.8705882352941177,0.8705882352941177],[0.8745098039215686,0.8745098039215686],[0.8784313725490196,0.8784313725490196],[0.8823529411764706,0.8823529411764706],[0.8862745098039215,0.8862745098039215],[0.8901960784313725,0.8901960784313725],[0.8941176470588236,0.8941176470588236],[0.8980392156862745,0.8980392156862745],[0.9019607843137255,0.9019607843137255],[0.9058823529411765,0.9058823529411765],[0.9098039215686274,0.9098039215686274],[0.9137254901960784,0.9137254901960784],[0.9176470588235294,0.9176470588235294],[0.9215686274509803,0.9215686274509803],[0.9254901960784314,0.9254901960784314],[0.9294117647058824,0.9294117647058824],[0.9333333333333333,0.9333333333333333],[0.9372549019607843,0.9372549019607843],[0.9411764705882353,0.9411764705882353],[0.9450980392156862,0.9450980392156862],[0.9490196078431372,0.9490196078431372],[0.9529411764705882,0.9529411764705882],[0.9568627450980393,0.9568627450980393],[0.9607843137254902,0.9607843137254902],[0.9647058823529412,0.9647058823529412],[0.9686274509803922,0.9686274509803922],[0.9725490196078431,0.9725490196078431],[0.9764705882352941,0.9764705882352941],[0.9803921568627451,0.9803921568627451],[0.984313725490196,0.984313725490196],[0.9882352941176471,0.9882352941176471],[0.9921568627450981,0.9921568627450981],[0.996078431372549,0.996078431372549],[1,1]]}},r(p,[{key:"texture",get:function(){var e=new THREE.Texture(this._canvas);return e.mapping=THREE.UVMapping,e.wrapS=e.wrapT=THREE.ClampToEdgeWrapping,e.magFilter=e.minFilter=THREE.NearestFilter,e.premultiplyAlpha=!0,e.needsUpdate=!0,e}},{key:"lut",set:function(e){this._color=this._luts[e],this._lut=e,this.paintCanvas()},get:function(){return this._lut}},{key:"luts",set:function(e){this._luts=e},get:function(){return this._luts}},{key:"lutO",set:function(e){this._opacity=this._lutsO[e],this._lutO=e,this.paintCanvas()},get:function(){return this._lutO}},{key:"lutsO",set:function(e){this._lutsO=e},get:function(){return this._lutsO}},{key:"discrete",set:function(e){this._discrete=e,this.paintCanvas()},get:function(){return this._discrete}}]),p}();t.a=o},function(l,t,e){"use strict";function c(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}var i=e(3),r=function(){function a(a,o){for(var e=0,r;e<o.length;e++)r=o[e],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}return function(t,e,o){return e&&a(t.prototype,e),o&&a(t,o),t}}(),o={0:{color:[0,0,0],opacity:0,label:"background"},1:{color:[255,0,0],opacity:1,label:"white matter"}},a=function(){function a(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:o;c(this,a),this._dom=i.a.isString(t)?document.getElementById(t):t,this._segmentation=e,this.initCanvas(),this.paintCanvas()}return a.prototype.initCanvas=function(){this._canvasContainer=this.initCanvasContainer(this._dom),this._canvasBg=this.createCanvas(),this._canvasContainer.appendChild(this._canvasBg),this._canvas=this.createCanvas(),this._canvasContainer.appendChild(this._canvas)},a.prototype.initCanvasContainer=function(a){var t=a;return t.style.width="256 px",t.style.height="128 px",t.style.border="1px solid #F9F9F9",t},a.prototype.createCanvas=function(){var e=document.createElement("canvas");return e.height=128,e.width=256,e},a.prototype.paintCanvas=function(){var a=this._canvas.getContext("2d");for(var t in a.clearRect(0,0,this._canvas.width,this._canvas.height),a.globalCompositeOperation="source-over",a.lineWidth=1,this._segmentation){var e=t%this._canvas.width,n=B(t/this._canvas.width),i=void 0===this._segmentation[t].opacity?1:this._segmentation[t].opacity,r=this._segmentation[t].color;a.fillStyle="rgba( "+P(r[0])+", "+P(r[1])+", "+P(r[2])+", "+i+")",a.fillRect(e,n,1,1)}},r(a,[{key:"texture",get:function(){var e=new THREE.Texture(this._canvas);return e.mapping=THREE.UVMapping,e.wrapS=e.wrapT=THREE.ClampToEdgeWrapping,e.magFilter=e.minFilter=THREE.NearestFilter,e.premultiplyAlpha=!0,e.needsUpdate=!0,e}},{key:"segmentation",set:function(e){this._segmentation=e,this.paintCanvas()},get:function(){return this._segmentation}}]),a}();t.a=a},function(a,t,e){"use strict";function l(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}var i=e(3),r=function(){function a(t,e){l(this,a),t&&this._isFunction(t.emit)?(this._dom=i.a.isString(e)?document.getElementById(e):e,i.a.isElement(this._dom)?(this._emitter=t,this.initContainerDom(),this.initEventListenner(),this.loaded=0,this.totalFile=0):window.console.error("please give the id of container dom or directly a dom instance")):window.console.error("please give the this._emitter instance")}return a.prototype._isFunction=function(e){return"[object Function]"===Object.prototype.toString.call(e)},a.prototype.initEventListenner=function(){var a=this;this._emitter.on("load-start",function(t){var e=t.totalFiles;a.totalFile=e,a._domTotalFile.innerHTML=e}),this._emitter.on("fetch-start",function(t){var e=document.createElement("li"),o=document.createElement("div");o.innerHTML="file: "+t.file,o.style.color="#ffffff",e.append(o),e.className="fetch-file",e.id="file-"+t.file,e.style.marginBottom="7px",e.style.border="1px solid #ffffff;",e.style.width="60%";var n=document.createElement("div");n.id="file-fetch-"+t.file,n.style.width="0%",e.append(n),a._domProcessList.append(e)}),this._emitter.on("fetch-progress",function(a){var t="file-fetch-"+a.file,e=document.getElementById(t);e.style.width=100*(a.loaded/a.total)+"%",e.style.border="1px solid red"}),this._emitter.on("fetch-success",function(a){var t=document.getElementById("file-"+a.file),e=document.createElement("div");e.id="file-result-"+a.file,e.innerHTML="fetch-success",e.style.color="#ffffff",t.append(e)}),this._emitter.on("fetch-error",function(){}),this._emitter.on("fetch-abort",function(){}),this._emitter.on("fetch-end",function(){}),this._emitter.on("fetch-timeout",function(){}),this._emitter.on("parse-start",function(a){var t=document.getElementById("file-"+a.file),e=document.createElement("div");e.id="file-parse-"+a.file,e.style.width="0%",t.append(e)}),this._emitter.on("parsing",function(a){var t="file-parse-"+a.file,e=document.getElementById(t);e.style.width=100*(a.parsed/a.total)+"%",e.style.border="1px solid yellow"}),this._emitter.on("parse-success",function(t){a.loaded+=1,a._domCurrentFile.innerHTML=a.loaded,a._domCurrentProgress.style.width=100*(a.loaded/a.totalFile)+"%";var e=document.getElementById("file-"+t.file),o=document.createElement("div");o.id="file-result-"+t.file,o.innerHTML="parse-success",o.style.color="#ffffff",e.append(o)})},a.prototype.initContainerDom=function(){var e=document.createElement("div");e.innerHTML="\n      <div id=\"ami-progress-bar-container\" style=\"background-color: rgb(33, 33, 33); color: #ffffff;\">\n      <div>\n      <label for=\"progress-bar\" id=\"progress-label\" style=\"width: 60%; border: 1px solid #ffffff; text-align: center;\">\n      <span id=\"current-file-index\">0</span>\n      <span id=\"total-file\">0</span>\n      </label>\n      <div id=\"progress-bar\" style=\"width: 60%; border: 1px solid #ffffff; text-align: center;\">\n      <div id=\"current-progress\" style=\"border: 1px solid red; width: 0%;\"></div>\n      </div>\n      </div>\n      <ul id=\"process-list\" style=\"list-style-type: none; padding: 0; overflow-y: auto;\">\n      </ul>\n      </div>",this._dom.append(e),this._domCurrentFile=document.getElementById("current-file-index"),this._domTotalFile=document.getElementById("total-file"),this._domProcessList=document.getElementById("process-list"),this._domCurrentProgress=document.getElementById("current-progress")},a}();t.a=r},function(l,t,e){"use strict";function s(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function i(a,o){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o&&("object"==("undefined"===typeof o?"undefined":babelHelpers.typeof(o))||"function"==typeof o)?o:a}function r(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof o?"undefined":babelHelpers.typeof(o)));a.prototype=Object.create(o&&o.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(a,o):a.__proto__=o)}var o=function(a){function t(){s(this,t);var e=i(this,a.call(this));return e.name="unpack",e._packedData="packedData",e._offset="offset",e._unpackedData="unpackedData",e._base._uniforms={uNumberOfChannels:{value:1},uBitsAllocated:{value:16},uPixelType:{value:0}},e}return r(t,a),t.prototype.api=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._base,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this._packedData,e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this._offset,o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:this._unpackedData;return this._base=a,this.compute(t,e,o)},t.prototype.compute=function(a,t,e){return this.computeDefinition(),this._base._functions[this._name]=this._definition,this._name+"("+a+", "+t+", "+e+");"},t.prototype.computeDefinition=function(){var e="";if(1===this._base._uniforms.uNumberOfChannels.value)switch(this._base._uniforms.uBitsAllocated.value){case 1:case 8:e=this.upack8();break;case 16:e=this.upack16();break;case 32:e=this.upack32();break;default:e=this.upackIdentity();}else e=this.upackIdentity();this._definition="\nvoid "+this._name+"(in vec4 packedData, in int offset, out vec4 unpackedData){\n\n"+e+"\n\n}  \n    "},t.prototype.upack8=function(){return this._base._functions.uInt8=this.uInt8(),"\nuInt8(\n  packedData.r,\n  unpackedData.x);\n    "},t.prototype.upack16=function(){return this._base._functions.uInt16=this.uInt16(),"\nuInt16(\n  packedData.r * float( 1 - offset) + packedData.b * float(offset),\n  packedData.g * float( 1 - offset) + packedData.a * float(offset),\n  unpackedData.x);\n    "},t.prototype.upack32=function(){return 0===this._base._uniforms.uPixelType.value?(this._base._functions.uInt32=this.uInt32(),"\nuInt32(\n  packedData.r,\n  packedData.g,\n  packedData.b,\n  packedData.a,\n  unpackedData.x);\n      "):(this._base._functions.uFloat32=this.uFloat32(),"\nuFloat32(\n  packedData.r,\n  packedData.g,\n  packedData.b,\n  packedData.a,\n  unpackedData.x);\n      ")},t.prototype.upackIdentity=function(){return"\nunpackedData = packedData;\n      "},t.prototype.uInt8=function(){return"\nvoid uInt8(in float r, out float value){\n  value = r * 255.;\n}\n    "},t.prototype.uInt16=function(){return"\nvoid uInt16(in float r, in float a, out float value){\n  value = r * 255. + a * 255. * 256.;\n}\n    "},t.prototype.uInt32=function(){return"\nvoid uInt32(in float r, in float g, in float b, in float a, out float value){\n  value = r * 255. + g * 255. * 256. + b * 255. * 256. * 256. + a * 255. * 256. * 256. * 256.;\n  // value = r * 255. + g * 65025. + b * 16581375. + a * 4228250625.;\n}\n    "},t.prototype.uFloat32=function(){return"\nvoid uFloat32(in float r, in float g, in float b, in float a, out float value){\n\n  // create arrays containing bits for rgba values\n  // value between 0 and 255\n  value = r * 255.;\n  int bytemeR[8];\n  bytemeR[0] = int(floor(value / 128.));\n  value -= float(bytemeR[0] * 128);\n  bytemeR[1] = int(floor(value / 64.));\n  value -= float(bytemeR[1] * 64);\n  bytemeR[2] = int(floor(value / 32.));\n  value -= float(bytemeR[2] * 32);\n  bytemeR[3] = int(floor(value / 16.));\n  value -= float(bytemeR[3] * 16);\n  bytemeR[4] = int(floor(value / 8.));\n  value -= float(bytemeR[4] * 8);\n  bytemeR[5] = int(floor(value / 4.));\n  value -= float(bytemeR[5] * 4);\n  bytemeR[6] = int(floor(value / 2.));\n  value -= float(bytemeR[6] * 2);\n  bytemeR[7] = int(floor(value));\n\n  value = g * 255.;\n  int bytemeG[8];\n  bytemeG[0] = int(floor(value / 128.));\n  value -= float(bytemeG[0] * 128);\n  bytemeG[1] = int(floor(value / 64.));\n  value -= float(bytemeG[1] * 64);\n  bytemeG[2] = int(floor(value / 32.));\n  value -= float(bytemeG[2] * 32);\n  bytemeG[3] = int(floor(value / 16.));\n  value -= float(bytemeG[3] * 16);\n  bytemeG[4] = int(floor(value / 8.));\n  value -= float(bytemeG[4] * 8);\n  bytemeG[5] = int(floor(value / 4.));\n  value -= float(bytemeG[5] * 4);\n  bytemeG[6] = int(floor(value / 2.));\n  value -= float(bytemeG[6] * 2);\n  bytemeG[7] = int(floor(value));\n\n  value = b * 255.;\n  int bytemeB[8];\n  bytemeB[0] = int(floor(value / 128.));\n  value -= float(bytemeB[0] * 128);\n  bytemeB[1] = int(floor(value / 64.));\n  value -= float(bytemeB[1] * 64);\n  bytemeB[2] = int(floor(value / 32.));\n  value -= float(bytemeB[2] * 32);\n  bytemeB[3] = int(floor(value / 16.));\n  value -= float(bytemeB[3] * 16);\n  bytemeB[4] = int(floor(value / 8.));\n  value -= float(bytemeB[4] * 8);\n  bytemeB[5] = int(floor(value / 4.));\n  value -= float(bytemeB[5] * 4);\n  bytemeB[6] = int(floor(value / 2.));\n  value -= float(bytemeB[6] * 2);\n  bytemeB[7] = int(floor(value));\n\n  value = a * 255.;\n  int bytemeA[8];\n  bytemeA[0] = int(floor(value / 128.));\n  value -= float(bytemeA[0] * 128);\n  bytemeA[1] = int(floor(value / 64.));\n  value -= float(bytemeA[1] * 64);\n  bytemeA[2] = int(floor(value / 32.));\n  value -= float(bytemeA[2] * 32);\n  bytemeA[3] = int(floor(value / 16.));\n  value -= float(bytemeA[3] * 16);\n  bytemeA[4] = int(floor(value / 8.));\n  value -= float(bytemeA[4] * 8);\n  bytemeA[5] = int(floor(value / 4.));\n  value -= float(bytemeA[5] * 4);\n  bytemeA[6] = int(floor(value / 2.));\n  value -= float(bytemeA[6] * 2);\n  bytemeA[7] = int(floor(value));\n\n  // compute float32 value from bit arrays\n\n  // sign\n  int issigned = 1 - 2 * bytemeR[0];\n  //   issigned = int(pow(-1., float(bytemeR[0])));\n\n  // exponent\n  int exponent = 0;\n\n  exponent += bytemeR[1] * int(pow(2., 7.));\n  exponent += bytemeR[2] * int(pow(2., 6.));\n  exponent += bytemeR[3] * int(pow(2., 5.));\n  exponent += bytemeR[4] * int(pow(2., 4.));\n  exponent += bytemeR[5] * int(pow(2., 3.));\n  exponent += bytemeR[6] * int(pow(2., 2.));\n  exponent += bytemeR[7] * int(pow(2., 1.));\n\n  exponent += bytemeG[0];\n\n\n  // fraction\n  float fraction = 0.;\n\n  fraction = float(bytemeG[1]) * pow(2., -1.);\n  fraction += float(bytemeG[2]) * pow(2., -2.);\n  fraction += float(bytemeG[3]) * pow(2., -3.);\n  fraction += float(bytemeG[4]) * pow(2., -4.);\n  fraction += float(bytemeG[5]) * pow(2., -5.);\n  fraction += float(bytemeG[6]) * pow(2., -6.);\n  fraction += float(bytemeG[7]) * pow(2., -7.);\n\n  fraction += float(bytemeB[0]) * pow(2., -8.);\n  fraction += float(bytemeB[1]) * pow(2., -9.);\n  fraction += float(bytemeB[2]) * pow(2., -10.);\n  fraction += float(bytemeB[3]) * pow(2., -11.);\n  fraction += float(bytemeB[4]) * pow(2., -12.);\n  fraction += float(bytemeB[5]) * pow(2., -13.);\n  fraction += float(bytemeB[6]) * pow(2., -14.);\n  fraction += float(bytemeB[7]) * pow(2., -15.);\n\n  fraction += float(bytemeA[0]) * pow(2., -16.);\n  fraction += float(bytemeA[1]) * pow(2., -17.);\n  fraction += float(bytemeA[2]) * pow(2., -18.);\n  fraction += float(bytemeA[3]) * pow(2., -19.);\n  fraction += float(bytemeA[4]) * pow(2., -20.);\n  fraction += float(bytemeA[5]) * pow(2., -21.);\n  fraction += float(bytemeA[6]) * pow(2., -22.);\n  fraction += float(bytemeA[7]) * pow(2., -23.);\n\n  value = float(issigned) * pow( 2., float(exponent - 127)) * (1. + fraction);\n}\n    "},t}(e(10).a);t.a=new o},function(l,t,e){"use strict";function s(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function i(a,o){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o&&("object"==("undefined"===typeof o?"undefined":babelHelpers.typeof(o))||"function"==typeof o)?o:a}function r(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof o?"undefined":babelHelpers.typeof(o)));a.prototype=Object.create(o&&o.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(a,o):a.__proto__=o)}var o=function(a){function t(){s(this,t);var e=i(this,a.call(this));return e.name="texture3d",e._dataCoordinates="dataCoordinates",e._dataValue="dataValue",e._offset="offset",e}return r(t,a),t.prototype.api=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._base,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this._dataCoordinates,e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this._dataValue,o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:this._offset;return this._base=a,this.compute(t,e,o)},t.prototype.compute=function(a,t,e){return this.computeDefinition(),this._base._functions[this._name]=this._definition,this._name+"("+a+", "+t+", "+e+");"},t.prototype.computeDefinition=function(){this._definition="\nvoid "+this._name+"(in ivec3 dataCoordinates, out vec4 dataValue, out int offset){\n    \n  int index = dataCoordinates.x\n            + dataCoordinates.y * uDataDimensions.x\n            + dataCoordinates.z * uDataDimensions.y * uDataDimensions.x;\n  int indexP = int(index/uPackedPerPixel);\n  offset = index - 2*indexP;\n\n  // Map data index to right sampler2D texture\n  int voxelsPerTexture = uTextureSize*uTextureSize;\n  int textureIndex = int(floor(float(indexP) / float(voxelsPerTexture)));\n  // modulo seems incorrect sometimes...\n  // int inTextureIndex = int(mod(float(index), float(textureSize*textureSize)));\n  int inTextureIndex = indexP - voxelsPerTexture*textureIndex;\n\n  // Get row and column in the texture\n  int colIndex = int(mod(float(inTextureIndex), float(uTextureSize)));\n  int rowIndex = int(floor(float(inTextureIndex)/float(uTextureSize)));\n\n  // Map row and column to uv\n  vec2 uv = vec2(0,0);\n  uv.x = (0.5 + float(colIndex)) / float(uTextureSize);\n  uv.y = 1. - (0.5 + float(rowIndex)) / float(uTextureSize);\n\n  //\n  if(textureIndex == 0){ dataValue = texture2D(uTextureContainer[0], uv); }\n  else if(textureIndex == 1){dataValue = texture2D(uTextureContainer[1], uv);}\n  else if(textureIndex == 2){ dataValue = texture2D(uTextureContainer[2], uv); }\n  else if(textureIndex == 3){ dataValue = texture2D(uTextureContainer[3], uv); }\n  else if(textureIndex == 4){ dataValue = texture2D(uTextureContainer[4], uv); }\n  else if(textureIndex == 5){ dataValue = texture2D(uTextureContainer[5], uv); }\n  else if(textureIndex == 6){ dataValue = texture2D(uTextureContainer[6], uv); }\n  else {\n    dataValue = vec4(0.);\n  }\n\n}\n    "},t}(e(10).a);t.a=new o},function(c,t,e){"use strict";function d(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function i(a,o){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o&&("object"==("undefined"===typeof o?"undefined":babelHelpers.typeof(o))||"function"==typeof o)?o:a}function r(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof o?"undefined":babelHelpers.typeof(o)));a.prototype=Object.create(o&&o.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(a,o):a.__proto__=o)}var o=e(10),a=e(47),n=function(o){function t(){d(this,t);var e=i(this,o.call(this));return e.name="interpolationTrilinear",e._currentVoxel="currentVoxel",e._dataValue="dataValue",e._gradient="gradient",e}return r(t,o),t.prototype.api=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._base,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this._currentVoxel,e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this._dataValue,o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:this._gradient;return this._base=a,this.compute(t,e,o)},t.prototype.compute=function(a,t,e){return this.computeDefinition(),this._base._functions[this._name]=this._definition,this._name+"("+a+", "+t+", "+e+");"},t.prototype.computeDefinition=function(){this._definition="\nvoid trilinearInterpolation(\n  in vec3 normalizedPosition,\n  out vec4 interpolatedValue,\n  in vec4 v000, in vec4 v100,\n  in vec4 v001, in vec4 v101,\n  in vec4 v010, in vec4 v110,\n  in vec4 v011, in vec4 v111) {\n\n  // https://en.wikipedia.org/wiki/Trilinear_interpolation\n\n  vec4 c00 = v000 * ( 1.0 - normalizedPosition.x ) + v100 * normalizedPosition.x;\n  vec4 c01 = v001 * ( 1.0 - normalizedPosition.x ) + v101 * normalizedPosition.x;\n  vec4 c10 = v010 * ( 1.0 - normalizedPosition.x ) + v110 * normalizedPosition.x;\n  vec4 c11 = v011 * ( 1.0 - normalizedPosition.x ) + v111 * normalizedPosition.x;\n\n  // c0 and c1\n  vec4 c0 = c00 * ( 1.0 - normalizedPosition.y) + c10 * normalizedPosition.y;\n  vec4 c1 = c01 * ( 1.0 - normalizedPosition.y) + c11 * normalizedPosition.y;\n\n  // c\n  vec4 c = c0 * ( 1.0 - normalizedPosition.z) + c1 * normalizedPosition.z;\n  interpolatedValue = c;\n}\n\nvoid "+this._name+"(in vec3 currentVoxel, out vec4 dataValue, out vec3 gradient){\n\n  vec3 lower_bound = floor(currentVoxel);\n  if(lower_bound.x < 0.){\n    lower_bound.x = 0.;\n  }\n  if(lower_bound.y < 0.){\n    lower_bound.y = 0.;\n  }\n  if(lower_bound.z < 0.){\n    lower_bound.z = 0.;\n  }\n  \n  vec3 higher_bound = lower_bound + vec3(1.);\n  vec3 normalizedPosition = (currentVoxel - lower_bound);\n  vec4 interpolatedValue = vec4(0.);\n\n  //\n  // fetch values required for interpolation\n  //\n  vec4 v000 = vec4(0.0, 0.0, 0.0, 0.0);\n  vec3 c000 = vec3(lower_bound.x, lower_bound.y, lower_bound.z);\n  "+a.a.api(this._base,"c000","v000")+"\n\n  //\n  vec4 v100 = vec4(0.0, 0.0, 0.0, 0.0);\n  vec3 c100 = vec3(higher_bound.x, lower_bound.y, lower_bound.z);\n  "+a.a.api(this._base,"c100","v100")+"\n\n  //\n  vec4 v001 = vec4(0.0, 0.0, 0.0, 0.0);\n  vec3 c001 = vec3(lower_bound.x, lower_bound.y, higher_bound.z);\n  "+a.a.api(this._base,"c001","v001")+"\n\n  //\n  vec4 v101 = vec4(0.0, 0.0, 0.0, 0.0);\n  vec3 c101 = vec3(higher_bound.x, lower_bound.y, higher_bound.z);\n  "+a.a.api(this._base,"c101","v101")+"\n  \n  //\n  vec4 v010 = vec4(0.0, 0.0, 0.0, 0.0);\n  vec3 c010 = vec3(lower_bound.x, higher_bound.y, lower_bound.z);\n  "+a.a.api(this._base,"c010","v010")+"\n\n  vec4 v110 = vec4(0.0, 0.0, 0.0, 0.0);\n  vec3 c110 = vec3(higher_bound.x, higher_bound.y, lower_bound.z);\n  "+a.a.api(this._base,"c110","v110")+"\n\n  //\n  vec4 v011 = vec4(0.0, 0.0, 0.0, 0.0);\n  vec3 c011 = vec3(lower_bound.x, higher_bound.y, higher_bound.z);\n  "+a.a.api(this._base,"c011","v011")+"\n\n  vec4 v111 = vec4(0.0, 0.0, 0.0, 0.0);\n  vec3 c111 = vec3(higher_bound.x, higher_bound.y, higher_bound.z);\n  "+a.a.api(this._base,"c111","v111")+"\n\n  // compute interpolation at position\n  trilinearInterpolation(normalizedPosition, interpolatedValue ,v000, v100, v001, v101, v010,v110, v011,v111);\n  dataValue = interpolatedValue;\n\n  // compute gradient\n  float gradientStep = 0.005;\n\n  // x axis\n  vec3 g100 = vec3(1., 0., 0.);\n  vec3 ng100 = normalizedPosition + g100 * gradientStep;\n  if (ng100.x > 1.) {\n    ng100.x = 1.;\n  }\n  vec4 vg100 = vec4(0.);\n  trilinearInterpolation(ng100, vg100 ,v000, v100, v001, v101, v010,v110, v011,v111);\n\n  vec3 go100 = -g100;\n  vec3 ngo100 = normalizedPosition + go100 * gradientStep;\n  if (ngo100.x < 0.) {\n    ngo100.x = 0.;\n  }\n  vec4 vgo100 = vec4(0.);\n  trilinearInterpolation(ngo100, vgo100 ,v000, v100, v001, v101, v010,v110, v011,v111);\n\n  gradient.x = (g100.x * vg100.x + go100.x * vgo100.x);\n\n  // y axis\n  vec3 g010 = vec3(0., 1., 0.);\n  vec3 ng010 = normalizedPosition + g010 * gradientStep;\n  if (ng010.y > 1.) {\n    ng010.y = 1.;\n  }\n  vec4 vg010 = vec4(0.);\n  trilinearInterpolation(ng010, vg010 ,v000, v100, v001, v101, v010,v110, v011,v111);\n\n  vec3 go010 = -g010;\n  vec3 ngo010 = normalizedPosition + go010 * gradientStep;\n  if (ngo010.y < 0.) {\n    ngo010.y = 0.;\n  }\n  vec4 vgo010 = vec4(0.);\n  trilinearInterpolation(ngo010, vgo010 ,v000, v100, v001, v101, v010,v110, v011,v111);\n\n  gradient.y = (g010.y * vg010.x + go010.y * vgo010.x);\n\n  // z axis\n  vec3 g001 = vec3(0., 0., 1.);\n  vec3 ng001 = normalizedPosition + g001 * gradientStep;\n  if (ng001.z > 1.) {\n    ng001.z = 1.;\n  }\n  vec4 vg001 = vec4(0.);\n  trilinearInterpolation(ng001, vg001 ,v000, v100, v001, v101, v010,v110, v011,v111);\n\n  vec3 go001 = -g001;\n  vec3 ngo001 = normalizedPosition + go001 * gradientStep;\n  if (ngo001.z < 0.) {\n    ngo001.z = 0.;\n  }\n  vec4 vgo001 = vec4(0.);\n  trilinearInterpolation(ngo001, vgo001 ,v000, v100, v001, v101, v010,v110, v011,v111);\n\n  gradient.z = (g001.z * vg001.x + go001.z * vgo001.x);\n\n  // normalize gradient\n  float gradientMagnitude = length(gradient);\n  if (gradientMagnitude > 0.0) {\n    gradient = -(1. / gradientMagnitude) * gradient;\n  }\n}\n    "},t}(o.a);t.a=new n},function(d,t,e){"use strict";function p(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function i(a,o){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o&&("object"==("undefined"===typeof o?"undefined":babelHelpers.typeof(o))||"function"==typeof o)?o:a}function r(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof o?"undefined":babelHelpers.typeof(o)));a.prototype=Object.create(o&&o.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(a,o):a.__proto__=o)}var o=e(33),a=e(34),s=e(42),l=e(0),n=function(){function a(a,o){for(var e=0,r;e<o.length;e++)r=o[e],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}return function(t,e,o){return e&&a(t.prototype,e),o&&a(t,o),t}}(),c=function(c){function t(e){p(this,t);var a=i(this,c.call(this));return a._stack=e,a._bBox=null,a._slice=null,a._border=null,a._dummy=null,a._orientation=0,a._index=0,a._uniforms=null,a._autoWindowLevel=!1,a._outOfBounds=!1,a._orientationMaxIndex=0,a._canvasWidth=0,a._canvasHeight=0,a._borderColor=null,a._create(),a}return r(t,c),t.prototype._create=function(){this._stack?(this._prepareStack(),this._prepareBBox(),this._prepareSlice(),this._prepareBorder()):window.console.log("no stack to be prepared...")},t.prototype._computeOrientationMaxIndex=function(){var e=this._stack.dimensionsIJK;switch(this._orientationMaxIndex=0,this._orientation){case 0:this._orientationMaxIndex=e.z-1;break;case 1:this._orientationMaxIndex=e.x-1;break;case 2:this._orientationMaxIndex=e.y-1;}},t.prototype._isIndexOutOfBounds=function(){this._computeOrientationMaxIndex(),this._outOfBounds=this._index>=this._orientationMaxIndex||0>this._index},t.prototype._prepareStack=function(){this._stack.prepared||this._stack.prepare(),this._stack.packed||this._stack.pack()},t.prototype._prepareBBox=function(){this._bBox=new a.a(this._stack),this.add(this._bBox)},t.prototype._prepareBorder=function(){this._border=new o.a(this._slice),this.add(this._border)},t.prototype._prepareSlice=function(){var a=this._stack.halfDimensionsIJK;this._index=this._prepareSliceIndex(a);var t=this._prepareSlicePosition(a,this._index),e=this._prepareDirection(this._orientation);this._slice=new s.a(this._stack,this._index,t,e),this.add(this._slice)},t.prototype._prepareSliceIndex=function(a){var t=0;switch(this._orientation){case 0:t=B(a.z);break;case 1:t=B(a.x);break;case 2:t=B(a.y);}return t},t.prototype._prepareSlicePosition=function(a,t){var e=new l.f(0,0,0);switch(this._orientation){case 0:e=new l.f(B(a.x),B(a.y),t);break;case 1:e=new l.f(t,B(a.y),B(a.z));break;case 2:e=new l.f(B(a.x),t,B(a.z));}return e},t.prototype._prepareDirection=function(a){var t=new l.f(0,0,1);return 0===a?t=new l.f(0,0,1):1===a?t=new l.f(1,0,0):2===a?t=new l.f(0,1,0):void 0,t},t.prototype.dispose=function(){this.remove(this._slice),this._slice.dispose(),this._slice=null,this._bBox.dispose(),this._bBox=null,this._border.dispose(),this._border=null},n(t,[{key:"stack",get:function(){return this._stack},set:function(e){this._stack=e}},{key:"bbox",get:function(){return this._bBox}},{key:"slice",get:function(){return this._slice}},{key:"border",get:function(){return this._border}},{key:"index",get:function(){return this._index},set:function(a){this._index=a,this._slice.index=a;var t=this._stack.halfDimensionsIJK;this._slice.planePosition=this._prepareSlicePosition(t,this._index),this._border.helpersSlice=this._slice,this._isIndexOutOfBounds()}},{key:"orientation",set:function(e){this._orientation=e,this._computeOrientationMaxIndex(),this._slice.planeDirection=this._prepareDirection(this._orientation),this._border.helpersSlice=this._slice},get:function(){return this._orientation}},{key:"outOfBounds",set:function(e){this._outOfBounds=e},get:function(){return this._outOfBounds}},{key:"orientationMaxIndex",set:function(e){this._orientationMaxIndex=e},get:function(){return this._orientationMaxIndex}},{key:"canvasWidth",set:function(e){this._canvasWidth=e,this._slice.canvasWidth=this._canvasWidth},get:function(){return this._canvasWidth}},{key:"canvasHeight",set:function(e){this._canvasHeight=e,this._slice.canvasHeight=this._canvasHeight},get:function(){return this._canvasHeight}},{key:"borderColor",set:function(e){this._borderColor=e,this._border.color=e,this._slice.borderColor=this._borderColor},get:function(){return this._borderColor}}]),t}(THREE.Object3D);t.a=c},function(d,t,e){"use strict";function m(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function i(a,o){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o&&("object"==("undefined"===typeof o?"undefined":babelHelpers.typeof(o))||"function"==typeof o)?o:a}function r(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof o?"undefined":babelHelpers.typeof(o)));a.prototype=Object.create(o&&o.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(a,o):a.__proto__=o)}var _=e(49),a=e(50),s=e(51),o=e(48),n=e(0),l=function(){function a(a,o){for(var e=0,r;e<o.length;e++)r=o[e],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}return function(t,e,o){return e&&a(t.prototype,e),o&&a(t,o),t}}(),c=function(c){function t(e){m(this,t);var r=i(this,c.call(this));return r._stack=e,r._textures=[],r._shadersFragment=s.a,r._shadersVertex=a.a,r._uniforms=_.a.uniforms(),r._material=null,r._geometry=null,r._algorithm=0,r._interpolation=1,r._shading=1,r._shininess=10,r._create(),r}return r(t,c),t.prototype._create=function(){this._prepareStack(),this._prepareTexture(),this._prepareMaterial(),this._prepareGeometry(),this._mesh=new THREE.Mesh(this._geometry,this._material),this.add(this._mesh)},t.prototype._prepareStack=function(){this._stack.prepared||this._stack.prepare(),this._stack.packed||this._stack.pack()},t.prototype._prepareMaterial=function(){var e=0;0>this._stack._minMax[0]&&(e=this._stack._minMax[0]),this._uniforms=_.a.uniforms(),this._uniforms.uWorldBBox.value=this._stack.worldBoundingBox(),this._uniforms.uTextureSize.value=this._stack.textureSize,this._uniforms.uTextureContainer.value=this._textures,this._uniforms.uWorldToData.value=this._stack.lps2IJK,this._uniforms.uNumberOfChannels.value=this._stack.numberOfChannels,this._uniforms.uPixelType.value=this._stack.pixelType,this._uniforms.uBitsAllocated.value=this._stack.bitsAllocated,this._uniforms.uPackedPerPixel.value=this._stack.packedPerPixel,this._uniforms.uWindowCenterWidth.value=[e+this._stack.windowCenter,.8*this._stack.windowWidth],this._uniforms.uRescaleSlopeIntercept.value=[this._stack.rescaleSlope,this._stack.rescaleIntercept],this._uniforms.uDataDimensions.value=[this._stack.dimensionsIJK.x,this._stack.dimensionsIJK.y,this._stack.dimensionsIJK.z],this._uniforms.uInterpolation.value=this._interpolation,this._uniforms.uShading.value=this._shading,this._uniforms.uShininess.value=this._shininess,this._uniforms.uAlgorithm.value=this._algorithm,this._createMaterial({side:THREE.BackSide,transparent:!0})},t.prototype._prepareGeometry=function(){var a=this._stack.worldBoundingBox(),t=this._stack.worldCenter();this._geometry=new THREE.BoxGeometry(a[1]-a[0],a[3]-a[2],a[5]-a[4]),this._geometry.applyMatrix(new n.c().makeTranslation(t.x,t.y,t.z))},l(t,[{key:"uniforms",get:function(){return this._uniforms},set:function(e){this._uniforms=e}},{key:"stack",get:function(){return this._stack},set:function(e){this._stack=e}},{key:"interpolation",get:function(){return this._interpolation},set:function(e){this._interpolation=e,this._uniforms.uInterpolation.value=this._interpolation,this._updateMaterial()}},{key:"shading",get:function(){return this._shading},set:function(e){this._shading=e,this._uniforms.uShading.value=this._shading}},{key:"shininess",get:function(){return this._shininess},set:function(e){this._shininess=e,this._uniforms.uShininess.value=this._shininess}},{key:"algorithm",get:function(){return this._algorithm},set:function(e){this._algorithm=e,this._uniforms.uAlgorithm.value=this._algorithm}}]),t}(Object(o.a)(THREE.Object3D));t.a=c},function(l,t,e){"use strict";function s(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function i(a,o){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o&&("object"==("undefined"===typeof o?"undefined":babelHelpers.typeof(o))||"function"==typeof o)?o:a}function r(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof o?"undefined":babelHelpers.typeof(o)));a.prototype=Object.create(o&&o.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(a,o):a.__proto__=o)}var o=function(a){function t(){s(this,t);var e=i(this,a.call(this));return e.name="intersectBox",e._rayOrigin="rayOrigin",e._rayDirection="rayDirection",e._aabbMin="aabbMin",e._aabbMax="aabbMax",e._tNear="tNear",e._tFar="tFar",e._intersect="intersect",e}return r(t,a),t.prototype.api=function(){var l=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._base,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this._rayOrigin,e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this._rayDirection,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:this._aabbMin,i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:this._aabbMax,r=5<arguments.length&&void 0!==arguments[5]?arguments[5]:this._tNear,o=6<arguments.length&&void 0!==arguments[6]?arguments[6]:this._tFar,a=7<arguments.length&&void 0!==arguments[7]?arguments[7]:this._intersect;return this._base=l,this.compute(t,e,n,i,r,o,a)},t.prototype.compute=function(l,t,e,n,i,r,o){return this.computeDefinition(),this._base._functions[this._name]=this._definition,this._name+"("+l+", "+t+", "+e+", "+n+", "+i+", "+r+", "+o+");"},t.prototype.computeDefinition=function(){this._definition="\nvoid "+this._name+"(vec3 rayOrigin, vec3 rayDirection, vec3 boxMin, vec3 boxMax, out float tNear, out float tFar, out bool intersect){\n  // compute intersection of ray with all six bbox planes\n  vec3 invRay = vec3(1.) / rayDirection;\n  vec3 tBot = invRay * (boxMin - rayOrigin);\n  vec3 tTop = invRay * (boxMax - rayOrigin);\n  // re-order intersections to find smallest and largest on each axis\n  vec3 tMin = min(tTop, tBot);\n  vec3 tMax = max(tTop, tBot);\n  // find the largest tMin and the smallest tMax\n  float largest_tMin = max(max(tMin.x, tMin.y), max(tMin.x, tMin.z));\n  float smallest_tMax = min(min(tMax.x, tMax.y), min(tMax.x, tMax.z));\n  tNear = largest_tMin;\n  tFar = smallest_tMax;\n  intersect = smallest_tMax > largest_tMin;\n}\n\n    "},t}(e(10).a);t.a=new o},function(a,t,e){"use strict";var o=e(112);e.d(t,"a",function(){return o.a})},function(y,t,e){"use strict";function n(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function i(a,o){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o&&("object"==("undefined"===typeof o?"undefined":babelHelpers.typeof(o))||"function"==typeof o)?o:a}function r(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof o?"undefined":babelHelpers.typeof(o)));a.prototype=Object.create(o&&o.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(a,o):a.__proto__=o)}var o=e(121),a=e(3),b=e(57),l=e(23),c=e(60),s=e(61),u=e(160),p=e(79),d=e(81),h=e(82),m=e(19),_=function(o){function t(){return n(this,t),i(this,o.apply(this,arguments))}return r(t,o),t.prototype.parse=function(c){var d=this;return this.emit("parse-start",{file:c.url,time:new Date}),this._progressBar&&this._progressBar.update(0,100,"parse"),new Promise(function(e){window.setTimeout(function(){e(new Promise(function(e,t){var n=c;if(Array.isArray(n)||(n=[n]),n.forEach(function(e){d._preprocess(e)}),1===n.length)n=n[0];else{var r=n.filter(d._filterByExtension.bind(null,"MHD")),o=n.filter(d._filterByExtension.bind(null,"RAW"));2===n.length&&1===r.length&&1===o.length&&(n.url=r[0].url,n.extension=r[0].extension,n.mhdBuffer=r[0].buffer,n.rawBuffer=o[0].buffer)}var a=d._parser(n.extension);a||(d.emit("parse-error",{file:c.url,time:new Date,error:n.filename+"can not be parsed."}),t(n.filename+" can not be parsed."));var i=null;try{i=new a(n,0)}catch(e){window.console.log(e),d.emit("parse-error",{file:c.url,time:new Date,error:e}),t(e)}var s=new b.a;s.seriesInstanceUID=i.seriesInstanceUID(),s.transferSyntaxUID=i.transferSyntaxUID(),s.seriesDate=i.seriesDate(),s.seriesDescription=i.seriesDescription(),s.studyDate=i.studyDate(),s.studyDescription=i.studyDescription(),s.numberOfFrames=i.numberOfFrames(),s.numberOfFrames||(s.numberOfFrames=1),s.numberOfChannels=i.numberOfChannels(),s.modality=i.modality(),"SEG"===s.modality&&(s.segmentationType=i.segmentationType(),s.segmentationSegments=i.segmentationSegments()),s.patientID=i.patientID(),s.patientName=i.patientName(),s.patientAge=i.patientAge(),s.patientBirthdate=i.patientBirthdate(),s.patientSex=i.patientSex();var u=new l.a;u.numberOfChannels=i.numberOfChannels(),u.pixelRepresentation=i.pixelRepresentation(),u.pixelType=i.pixelType(),u.invert=i.invert(),u.spacingBetweenSlices=i.spacingBetweenSlices(),u.modality=s.modality,"SEG"===u.modality&&(u.segmentationType=s.segmentationType,u.segmentationSegments=s.segmentationSegments),s.stack.push(u),setTimeout(d.parseFrame(s,u,c.url,0,i,e,t),0)}))},10)})},t.prototype.parseFrame=function(l,t,e,d,i,r,o){var a=new c.a;a.sopInstanceUID=i.sopInstanceUID(d),a.url=e,a.index=d,a.rows=i.rows(d),a.columns=i.columns(d),a.numberOfChannels=t.numberOfChannels,a.pixelRepresentation=t.pixelRepresentation,a.pixelType=t.pixelType,a.pixelData=i.extractPixelData(d),a.pixelSpacing=i.pixelSpacing(d),a.spacingBetweenSlices=i.spacingBetweenSlices(d),a.sliceThickness=i.sliceThickness(d),a.imageOrientation=i.imageOrientation(d),a.rightHanded=i.rightHanded(),t.rightHanded=a.rightHanded,null===a.imageOrientation&&(a.imageOrientation=[1,0,0,0,1,0]),a.imagePosition=i.imagePosition(d),null===a.imagePosition&&(a.imagePosition=[0,0,d]),a.dimensionIndexValues=i.dimensionIndexValues(d),a.bitsAllocated=i.bitsAllocated(d),a.instanceNumber=i.instanceNumber(d),a.windowCenter=i.windowCenter(d),a.windowWidth=i.windowWidth(d),a.rescaleSlope=i.rescaleSlope(d),a.rescaleIntercept=i.rescaleIntercept(d),a.minMax=i.minMaxPixelData(a.pixelData),"SEG"===l.modality&&(a.referencedSegmentNumber=i.referencedSegmentNumber(d)),t.frame.push(a),this._parsed=d+1,this._totalParsed=l.numberOfFrames,this._progressBar&&this._progressBar.update(this._parsed,this._totalParsed,"parse"),this.emit("parsing",{file:e,total:this._totalParsed,parsed:this._parsed,time:new Date}),this._parsed===this._totalParsed?(this.emit("parse-success",{file:e,total:this._totalParsed,parsed:this._parsed,time:new Date}),r(l)):setTimeout(this.parseFrame(l,t,e,this._parsed,i,r,o),0)},t.prototype._parser=function(a){var t=null;switch(a.toUpperCase()){case"NII":case"NII_":t=p.a;break;case"DCM":case"DICOM":case"IMA":case"":t=s.a;break;case"MHD":t=u.a;break;case"NRRD":t=d.a;break;case"MGH":case"MGZ":t=h.a;break;default:return window.console.log("unsupported extension: "+a),!1;}return t},t.prototype._preprocess=function(o){var t=a.a.parseUrl(o.url);if(o.filename=t.filename,o.extension=t.extension,o.pathname=t.pathname,o.query=t.query,"gz"===o.extension){o.gzcompressed=!0,o.extension=o.filename.split(".gz").shift().split(".").pop();var e=m.inflate(o.buffer);o.buffer=e.buffer}else if("mgz"===o.extension){o.gzcompressed=!0,o.extension="mgh";var r=m.inflate(o.buffer);o.buffer=r.buffer}else o.gzcompressed=!1},t.prototype._filterByExtension=function(a,t){return t.extension.toUpperCase()===a.toUpperCase()},t}(o.a);t.a=_},function(m,t,e){"use strict";function _(m){if(!(this instanceof _))return new _(m);this.options=o.assign({level:u,method:y,chunkSize:16384,windowBits:15,memLevel:8,strategy:h,to:""},m||{});var t=this.options;t.raw&&0<t.windowBits?t.windowBits=-t.windowBits:t.gzip&&0<t.windowBits&&16>t.windowBits&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var e=g.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(e!==c)throw new Error(i[e]);if(t.header&&g.deflateSetHeader(this.strm,t.header),t.dictionary){var n;if(n="string"==typeof t.dictionary?a.string2buf(t.dictionary):"[object ArrayBuffer]"===s.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(e=g.deflateSetDictionary(this.strm,n))!==c)throw new Error(i[e]);this._dict_set=!0}}function n(a,t){var e=new _(t);if(e.push(a,!0),e.err)throw e.msg;return e.result}var g=e(114),o=e(2),a=e(54),i=e(20),l=e(55),s=Object.prototype.toString,c=0,u=-1,h=0,y=8;_.prototype.push=function(d,p){var u=this.strm,r=this.options.chunkSize,l,n;if(this.ended)return!1;n=p===~~p?p:!0===p?4:0,u.input="string"==typeof d?a.string2buf(d):"[object ArrayBuffer]"===s.call(d)?new Uint8Array(d):d,u.next_in=0,u.avail_in=u.input.length;do{if(0===u.avail_out&&(u.output=new o.Buf8(r),u.next_out=0,u.avail_out=r),1!==(l=g.deflate(u,n))&&l!==c)return this.onEnd(l),this.ended=!0,!1;0!==u.avail_out&&(0!==u.avail_in||4!==n&&2!==n)||("string"===this.options.to?this.onData(a.buf2binstring(o.shrinkBuf(u.output,u.next_out))):this.onData(o.shrinkBuf(u.output,u.next_out)))}while((0<u.avail_in||0===u.avail_out)&&1!==l);return 4===n?(l=g.deflateEnd(this.strm),this.onEnd(l),this.ended=!0,l===c):2!==n||(this.onEnd(c),u.avail_out=0,!0)},_.prototype.onData=function(e){this.chunks.push(e)},_.prototype.onEnd=function(e){e===c&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Deflate=_,t.deflate=n,t.deflateRaw=function(a,t){return t=t||{},t.raw=!0,n(a,t)},t.gzip=function(a,t){return t=t||{},t.gzip=!0,n(a,t)}},function(C,t,e){"use strict";function L(a,t){return a.msg=w[t],t}function i(e){return(e<<1)-(4<e?9:0)}function U(a){for(var t=a.length;0<=--t;)a[t]=0}function o(a){var t=a.state,e=t.pending;e>a.avail_out&&(e=a.avail_out),0!==e&&(y.arraySet(a.output,t.pending_buf,t.pending_out,e,a.next_out),a.next_out+=e,t.pending_out+=e,a.total_out+=e,a.avail_out-=e,t.pending-=e,0===t.pending&&(t.pending_out=0))}function V(a,t){b._tr_flush_block(a,0<=a.block_start?a.block_start:-1,a.strstart-a.block_start,t),a.block_start=a.strstart,o(a.strm)}function a(a,t){a.pending_buf[a.pending++]=t}function r(a,t){a.pending_buf[a.pending++]=255&t>>>8,a.pending_buf[a.pending++]=255&t}function l(a,t,e,o){var n=a.avail_in;return n>o&&(n=o),0===n?0:(a.avail_in-=n,y.arraySet(t,a.input,a.next_in,n,e),1===a.state.wrap?a.adler=x(a.adler,t,n,e):2===a.state.wrap&&(a.adler=v(a.adler,t,n,e)),a.next_in+=n,a.total_in+=n,n)}function s(m,t){var e=m.max_chain_length,r=m.strstart,o=m.prev_length,a=m.nice_match,s=m.strstart>m.w_size-J?m.strstart-(m.w_size-J):0,l=m.window,c=m.w_mask,_=m.prev,h=m.strstart+Z,p=l[r+o-1],d=l[r+o],g,n;m.prev_length>=m.good_match&&(e>>=2),a>m.lookahead&&(a=m.lookahead);do if(g=t,l[g+o]===d&&l[g+o-1]===p&&l[g]===l[r]&&l[++g]===l[r+1]){r+=2,g++;do;while(l[++r]===l[++g]&&l[++r]===l[++g]&&l[++r]===l[++g]&&l[++r]===l[++g]&&l[++r]===l[++g]&&l[++r]===l[++g]&&l[++r]===l[++g]&&l[++r]===l[++g]&&r<h);if(n=Z-(h-r),r=h-Z,n>o){if(m.match_start=t,o=n,n>=a)break;p=l[r+o-1],d=l[r+o]}}while((t=_[t&c])>s&&0!=--e);return o<=m.lookahead?o:m.lookahead}function j(s){var t=s.w_size,a,e,n,i,r;do{if(i=s.window_size-s.lookahead-s.strstart,s.strstart>=t+(t-J)){y.arraySet(s.window,s.window,t,t,0),s.match_start-=t,s.strstart-=t,s.block_start-=t,a=e=s.hash_size;do n=s.head[--a],s.head[a]=n>=t?n-t:0;while(--e);a=e=t;do n=s.prev[--a],s.prev[a]=n>=t?n-t:0;while(--e);i+=t}if(0===s.strm.avail_in)break;if(e=l(s.strm,s.window,s.strstart+s.lookahead,i),s.lookahead+=e,s.lookahead+s.insert>=Y)for(r=s.strstart-s.insert,s.ins_h=s.window[r],s.ins_h=(s.ins_h<<s.hash_shift^s.window[r+1])&s.hash_mask;s.insert&&(s.ins_h=(s.ins_h<<s.hash_shift^s.window[r+Y-1])&s.hash_mask,s.prev[r&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=r,r++,s.insert--,!(s.lookahead+s.insert<Y)););}while(s.lookahead<J&&0!==s.strm.avail_in)}function n(a,t){for(var e,o;;){if(a.lookahead<J){if(j(a),a.lookahead<J&&t===E)return re;if(0===a.lookahead)break}if(e=0,a.lookahead>=Y&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+Y-1])&a.hash_mask,e=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),0!==e&&a.strstart-e<=a.w_size-J&&(a.match_length=s(a,e)),!(a.match_length>=Y))o=b._tr_tally(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++;else if(o=b._tr_tally(a,a.strstart-a.match_start,a.match_length-Y),a.lookahead-=a.match_length,a.match_length<=a.max_lazy_match&&a.lookahead>=Y){a.match_length--;do a.strstart++,a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+Y-1])&a.hash_mask,e=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart;while(0!=--a.match_length);a.strstart++}else a.strstart+=a.match_length,a.match_length=0,a.ins_h=a.window[a.strstart],a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+1])&a.hash_mask;if(o&&(V(a,!1),0===a.strm.avail_out))return re}return a.insert=a.strstart<Y-1?a.strstart:Y-1,t===T?(V(a,!0),0===a.strm.avail_out?ie:le):a.last_lit&&(V(a,!1),0===a.strm.avail_out)?re:ne}function c(a,t){for(var e,o,n;;){if(a.lookahead<J){if(j(a),a.lookahead<J&&t===E)return re;if(0===a.lookahead)break}if(e=0,a.lookahead>=Y&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+Y-1])&a.hash_mask,e=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),a.prev_length=a.match_length,a.prev_match=a.match_start,a.match_length=Y-1,0!==e&&a.prev_length<a.max_lazy_match&&a.strstart-e<=a.w_size-J&&(a.match_length=s(a,e),5>=a.match_length&&(a.strategy===F||a.match_length===Y&&4096<a.strstart-a.match_start)&&(a.match_length=Y-1)),a.prev_length>=Y&&a.match_length<=a.prev_length){n=a.strstart+a.lookahead-Y,o=b._tr_tally(a,a.strstart-1-a.prev_match,a.prev_length-Y),a.lookahead-=a.prev_length-1,a.prev_length-=2;do++a.strstart<=n&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+Y-1])&a.hash_mask,e=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart);while(0!=--a.prev_length);if(a.match_available=0,a.match_length=Y-1,a.strstart++,o&&(V(a,!1),0===a.strm.avail_out))return re}else if(!a.match_available)a.match_available=1,a.strstart++,a.lookahead--;else if((o=b._tr_tally(a,0,a.window[a.strstart-1]))&&V(a,!1),a.strstart++,a.lookahead--,0===a.strm.avail_out)return re}return a.match_available&&(o=b._tr_tally(a,0,a.window[a.strstart-1]),a.match_available=0),a.insert=a.strstart<Y-1?a.strstart:Y-1,t===T?(V(a,!0),0===a.strm.avail_out?ie:le):a.last_lit&&(V(a,!1),0===a.strm.avail_out)?re:ne}function p(l,t){for(var e=l.window,a,n,i,r;;){if(l.lookahead<=Z){if(j(l),l.lookahead<=Z&&t===E)return re;if(0===l.lookahead)break}if(l.match_length=0,l.lookahead>=Y&&0<l.strstart&&(i=l.strstart-1,(n=e[i])===e[++i]&&n===e[++i]&&n===e[++i])){r=l.strstart+Z;do;while(n===e[++i]&&n===e[++i]&&n===e[++i]&&n===e[++i]&&n===e[++i]&&n===e[++i]&&n===e[++i]&&n===e[++i]&&i<r);l.match_length=Z-(r-i),l.match_length>l.lookahead&&(l.match_length=l.lookahead)}if(l.match_length>=Y?(a=b._tr_tally(l,1,l.match_length-Y),l.lookahead-=l.match_length,l.strstart+=l.match_length,l.match_length=0):(a=b._tr_tally(l,0,l.window[l.strstart]),l.lookahead--,l.strstart++),a&&(V(l,!1),0===l.strm.avail_out))return re}return l.insert=0,t===T?(V(l,!0),0===l.strm.avail_out?ie:le):l.last_lit&&(V(l,!1),0===l.strm.avail_out)?re:ne}function u(a,t){for(var e;;){if(0===a.lookahead&&(j(a),0===a.lookahead)){if(t===E)return re;break}if(a.match_length=0,e=b._tr_tally(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++,e&&(V(a,!1),0===a.strm.avail_out))return re}return a.insert=0,t===T?(V(a,!0),0===a.strm.avail_out?ie:le):a.last_lit&&(V(a,!1),0===a.strm.avail_out)?re:ne}function d(a,t,e,o,n){this.good_length=a,this.max_lazy=t,this.nice_length=e,this.max_chain=o,this.func=n}function m(e){e.window_size=2*e.w_size,U(e.head),e.max_lazy_match=se[e.level].max_lazy,e.good_match=se[e.level].good_length,e.nice_match=se[e.level].nice_length,e.max_chain_length=se[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=Y-1,e.match_available=0,e.ins_h=0}function _(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=B,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new y.Buf16(2*X),this.dyn_dtree=new y.Buf16(2*(2*H+1)),this.bl_tree=new y.Buf16(2*(2*W+1)),U(this.dyn_ltree),U(this.dyn_dtree),U(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new y.Buf16(q+1),this.heap=new y.Buf16(2*G+1),U(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new y.Buf16(2*G+1),U(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function h(a){var t;return a&&a.state?(a.total_in=a.total_out=0,a.data_type=N,t=a.state,t.pending=0,t.pending_out=0,0>t.wrap&&(t.wrap=-t.wrap),t.status=t.wrap?K:ae,a.adler=2===t.wrap?0:1,t.last_flush=E,b._tr_init(t),P):L(a,I)}function g(a){var t=h(a);return t===P&&m(a.state),t}function f(i,c,e,n,d,o){if(!i)return I;var a=1;if(c===D&&(c=6),0>n?(a=0,n=-n):15<n&&(a=2,n-=16),1>d||d>z||e!==B||8>n||15<n||0>c||9<c||0>o||o>O)return L(i,I);8===n&&(n=9);var s=new _;return i.state=s,s.strm=i,s.wrap=a,s.gzhead=null,s.w_bits=n,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=d+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+Y-1)/Y),s.window=new y.Buf8(2*s.w_size),s.head=new y.Buf16(s.hash_size),s.prev=new y.Buf16(s.w_size),s.lit_bufsize=1<<d+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new y.Buf8(s.pending_buf_size),s.d_buf=s.lit_bufsize>>1,s.l_buf=3*s.lit_bufsize,s.level=c,s.strategy=o,s.method=e,g(i)}var y=e(2),b=e(115),x=e(52),v=e(53),w=e(20),E=0,T=4,M=5,P=0,A=1,I=-2,R=-5,D=-1,F=1,k=2,O=4,N=2,B=8,z=9,G=286,H=30,W=19,X=2*G+1,q=15,Y=3,Z=258,J=Z+Y+1,K=42,Q=69,$=73,ee=91,te=103,ae=113,oe=666,re=1,ne=2,ie=3,le=4,se;se=[new d(0,0,0,0,function(a,t){var e=65535;for(e>a.pending_buf_size-5&&(e=a.pending_buf_size-5);;){if(1>=a.lookahead){if(j(a),0===a.lookahead&&t===E)return re;if(0===a.lookahead)break}a.strstart+=a.lookahead,a.lookahead=0;var o=a.block_start+e;if((0===a.strstart||a.strstart>=o)&&(a.lookahead=a.strstart-o,a.strstart=o,V(a,!1),0===a.strm.avail_out))return re;if(a.strstart-a.block_start>=a.w_size-J&&(V(a,!1),0===a.strm.avail_out))return re}return a.insert=0,t===T?(V(a,!0),0===a.strm.avail_out?ie:le):(a.strstart>a.block_start&&(V(a,!1),a.strm.avail_out),re)}),new d(4,4,8,4,n),new d(4,5,16,8,n),new d(4,6,32,32,n),new d(4,4,16,16,c),new d(8,16,32,32,c),new d(8,16,128,128,c),new d(8,32,128,256,c),new d(32,128,258,1024,c),new d(32,258,258,4096,c)],t.deflateInit=function(a,t){return f(a,t,B,15,8,0)},t.deflateInit2=f,t.deflateReset=g,t.deflateResetKeep=h,t.deflateSetHeader=function(a,t){return a&&a.state?2===a.state.wrap?(a.state.gzhead=t,P):I:I},t.deflate=function(l,c){var e,n,s,m;if(!l||!l.state||c>M||0>c)return l?L(l,I):I;if(n=l.state,!l.output||!l.input&&0!==l.avail_in||n.status===oe&&c!==T)return L(l,0===l.avail_out?R:I);if(n.strm=l,e=n.last_flush,n.last_flush=c,n.status===K)if(2===n.wrap)l.adler=0,a(n,31),a(n,139),a(n,8),n.gzhead?(a(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),a(n,255&n.gzhead.time),a(n,255&n.gzhead.time>>8),a(n,255&n.gzhead.time>>16),a(n,255&n.gzhead.time>>24),a(n,9===n.level?2:n.strategy>=k||2>n.level?4:0),a(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(a(n,255&n.gzhead.extra.length),a(n,255&n.gzhead.extra.length>>8)),n.gzhead.hcrc&&(l.adler=v(l.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=Q):(a(n,0),a(n,0),a(n,0),a(n,0),a(n,0),a(n,9===n.level?2:n.strategy>=k||2>n.level?4:0),a(n,3),n.status=ae);else{var _=B+(n.w_bits-8<<4)<<8;_|=(n.strategy>=k||2>n.level?0:6>n.level?1:6===n.level?2:3)<<6,0!==n.strstart&&(_|=32),_+=31-_%31,n.status=ae,r(n,_),0!==n.strstart&&(r(n,l.adler>>>16),r(n,65535&l.adler)),l.adler=1}if(n.status===Q)if(n.gzhead.extra){for(s=n.pending;n.gzindex<(65535&n.gzhead.extra.length)&&(n.pending!==n.pending_buf_size||(n.gzhead.hcrc&&n.pending>s&&(l.adler=v(l.adler,n.pending_buf,n.pending-s,s)),o(l),s=n.pending,n.pending!==n.pending_buf_size));)a(n,255&n.gzhead.extra[n.gzindex]),n.gzindex++;n.gzhead.hcrc&&n.pending>s&&(l.adler=v(l.adler,n.pending_buf,n.pending-s,s)),n.gzindex===n.gzhead.extra.length&&(n.gzindex=0,n.status=$)}else n.status=$;if(n.status===$)if(n.gzhead.name){s=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>s&&(l.adler=v(l.adler,n.pending_buf,n.pending-s,s)),o(l),s=n.pending,n.pending===n.pending_buf_size)){m=1;break}m=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,a(n,m)}while(0!==m);n.gzhead.hcrc&&n.pending>s&&(l.adler=v(l.adler,n.pending_buf,n.pending-s,s)),0===m&&(n.gzindex=0,n.status=ee)}else n.status=ee;if(n.status===ee)if(n.gzhead.comment){s=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>s&&(l.adler=v(l.adler,n.pending_buf,n.pending-s,s)),o(l),s=n.pending,n.pending===n.pending_buf_size)){m=1;break}m=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,a(n,m)}while(0!==m);n.gzhead.hcrc&&n.pending>s&&(l.adler=v(l.adler,n.pending_buf,n.pending-s,s)),0===m&&(n.status=te)}else n.status=te;if(n.status===te&&(n.gzhead.hcrc?(n.pending+2>n.pending_buf_size&&o(l),n.pending+2<=n.pending_buf_size&&(a(n,255&l.adler),a(n,255&l.adler>>8),l.adler=0,n.status=ae)):n.status=ae),0!==n.pending){if(o(l),0===l.avail_out)return n.last_flush=-1,P;}else if(0===l.avail_in&&i(c)<=i(e)&&c!==T)return L(l,R);if(n.status===oe&&0!==l.avail_in)return L(l,R);if(0!==l.avail_in||0!==n.lookahead||c!==E&&n.status!==oe){var h=n.strategy===k?u(n,c):n.strategy===3?p(n,c):se[n.level].func(n,c);if(h!==ie&&h!==le||(n.status=oe),h===re||h===ie)return 0===l.avail_out&&(n.last_flush=-1),P;if(h===ne&&(c===1?b._tr_align(n):c!==M&&(b._tr_stored_block(n,0,0,!1),c===3&&(U(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),o(l),0===l.avail_out))return n.last_flush=-1,P}return c===T?0>=n.wrap?A:(2===n.wrap?(a(n,255&l.adler),a(n,255&l.adler>>8),a(n,255&l.adler>>16),a(n,255&l.adler>>24),a(n,255&l.total_in),a(n,255&l.total_in>>8),a(n,255&l.total_in>>16),a(n,255&l.total_in>>24)):(r(n,l.adler>>>16),r(n,65535&l.adler)),o(l),0<n.wrap&&(n.wrap=-n.wrap),0===n.pending?A:P):P},t.deflateEnd=function(a){var t;return a&&a.state?(t=a.state.status)!==K&&t!==Q&&t!==$&&t!==ee&&t!==te&&t!==ae&&t!==oe?L(a,I):(a.state=null,t===ae?L(a,-3):P):I},t.deflateSetDictionary=function(o,d){var e=d.length,p,n,i,r,a,s,l,c;if(!o||!o.state)return I;if(p=o.state,2===(r=p.wrap)||1===r&&p.status!==K||p.lookahead)return I;for(1===r&&(o.adler=x(o.adler,d,e,0)),p.wrap=0,e>=p.w_size&&(0===r&&(U(p.head),p.strstart=0,p.block_start=0,p.insert=0),c=new y.Buf8(p.w_size),y.arraySet(c,d,e-p.w_size,p.w_size,0),d=c,e=p.w_size),a=o.avail_in,s=o.next_in,l=o.input,o.avail_in=e,o.next_in=0,o.input=d,j(p);p.lookahead>=Y;){n=p.strstart,i=p.lookahead-(Y-1);do p.ins_h=(p.ins_h<<p.hash_shift^p.window[n+Y-1])&p.hash_mask,p.prev[n&p.w_mask]=p.head[p.ins_h],p.head[p.ins_h]=n,n++;while(--i);p.strstart=n,p.lookahead=Y-1,j(p)}return p.strstart+=p.lookahead,p.block_start=p.strstart,p.insert=p.lookahead,p.lookahead=0,p.match_length=p.prev_length=Y-1,p.match_available=0,o.next_in=s,o.input=l,o.avail_in=a,p.wrap=r,P},t.deflateInfo="pako deflate (from Nodeca project)"},function(I,t,e){"use strict";function n(a){for(var t=a.length;0<=--t;)a[t]=0}function R(a,t,e,o,n){this.static_tree=a,this.extra_bits=t,this.extra_base=e,this.elems=o,this.max_length=n,this.has_stree=a&&a.length}function r(a,t){this.dyn_tree=a,this.max_code=0,this.stat_desc=t}function O(e){return 256>e?K[e]:K[256+(e>>>7)]}function a(a,t){a.pending_buf[a.pending++]=255&t,a.pending_buf[a.pending++]=255&t>>>8}function ee(o,t,e){o.bi_valid>B-e?(o.bi_buf|=65535&t<<o.bi_valid,a(o,o.bi_buf),o.bi_buf=t>>B-o.bi_valid,o.bi_valid+=e-B):(o.bi_buf|=65535&t<<o.bi_valid,o.bi_valid+=e)}function l(a,t,e){ee(a,e[2*t],e[2*t+1])}function i(a,t){var e=0;do e|=1&a,a>>>=1,e<<=1;while(0<--t);return e>>>1}function o(e){16===e.bi_valid?(a(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}function u(_,t){var e=t.dyn_tree,l=t.max_code,c=t.stat_desc.static_tree,h=t.stat_desc.has_stree,u=t.stat_desc.extra_bits,g=t.stat_desc.extra_base,d=t.stat_desc.max_length,f=0,m,n,i,r,o,a;for(r=0;r<=N;r++)_.bl_count[r]=0;for(e[2*_.heap[_.heap_max]+1]=0,m=_.heap_max+1;m<U;m++)(r=e[2*e[2*(n=_.heap[m])+1]+1]+1)>d&&(r=d,f++),e[2*n+1]=r,n>l||(_.bl_count[r]++,o=0,n>=g&&(o=u[n-g]),a=e[2*n],_.opt_len+=a*(r+o),h&&(_.static_len+=a*(c[2*n+1]+o)));if(0!==f){do{for(r=d-1;0===_.bl_count[r];)r--;_.bl_count[r]--,_.bl_count[r+1]+=2,_.bl_count[d]--,f-=2}while(0<f);for(r=d;0!==r;r--)for(n=_.bl_count[r];0!==n;)(i=_.heap[--m])>l||(e[2*i+1]!==r&&(_.opt_len+=(r-e[2*i+1])*e[2*i],e[2*i+1]=r),n--)}}function p(l,t,e){var n=Array(N+1),o=0,a,c;for(a=1;a<=N;a++)n[a]=o=o+e[a-1]<<1;for(c=0;c<=t;c++){var r=l[2*c+1];0!==r&&(l[2*c]=i(n[r]++,r))}}function s(){var r=Array(N+1),a,t,e,n,l;for(e=0,n=0;n<A-1;n++)for($[n]=e,a=0;a<1<<j[n];a++)Q[e++]=n;for(Q[e-1]=n,l=0,n=0;16>n;n++)for(te[n]=l,a=0;a<1<<X[n];a++)K[l++]=n;for(l>>=7;n<F;n++)for(te[n]=l<<7,a=0;a<1<<X[n]-7;a++)K[256+l++]=n;for(t=0;t<=N;t++)r[t]=0;for(a=0;143>=a;)Z[2*a+1]=8,a++,r[8]++;for(;255>=a;)Z[2*a+1]=9,a++,r[9]++;for(;279>=a;)Z[2*a+1]=7,a++,r[7]++;for(;287>=a;)Z[2*a+1]=8,a++,r[8]++;for(p(Z,D+1,r),a=0;a<F;a++)J[2*a+1]=5,J[2*a]=i(a,5);oe=new R(Z,j,L+1,D,N),re=new R(J,X,0,F,N),ne=new R([],q,0,k,z)}function c(a){var t;for(t=0;t<D;t++)a.dyn_ltree[2*t]=0;for(t=0;t<F;t++)a.dyn_dtree[2*t]=0;for(t=0;t<k;t++)a.bl_tree[2*t]=0;a.dyn_ltree[2*G]=1,a.opt_len=a.static_len=0,a.last_lit=a.matches=0}function d(e){8<e.bi_valid?a(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function m(o,t,e,r){d(o),r&&(a(o,e),a(o,~e)),E.arraySet(o.pending_buf,o.window,t,e,o.pending),o.pending+=e}function _(a,t,e,n){var i=2*t,r=2*e;return a[i]<a[r]||a[i]===a[r]&&n[t]<=n[e]}function h(a,t,e){for(var o=a.heap[e],n=e<<1;n<=a.heap_len&&(n<a.heap_len&&_(t,a.heap[n+1],a.heap[n],a.depth)&&n++,!_(t,o,a.heap[n],a.depth));)a.heap[e]=a.heap[n],e=n,n<<=1;a.heap[e]=o}function g(a,t,e){var n=0,c,i,r,o;if(0!==a.last_lit)do c=a.pending_buf[a.d_buf+2*n]<<8|a.pending_buf[a.d_buf+2*n+1],i=a.pending_buf[a.l_buf+n],n++,0===c?l(a,i,t):(l(a,(r=Q[i])+L+1,t),0!==(o=j[r])&&ee(a,i-=$[r],o),l(a,r=O(--c),e),0!==(o=X[r])&&ee(a,c-=te[r],o));while(n<a.last_lit);l(a,G,t)}function f(d,t){var e=t.dyn_tree,o=t.stat_desc.static_tree,a=t.stat_desc.has_stree,s=t.stat_desc.elems,l=-1,c,n,i;for(d.heap_len=0,d.heap_max=U,c=0;c<s;c++)0===e[2*c]?e[2*c+1]=0:(d.heap[++d.heap_len]=l=c,d.depth[c]=0);for(;2>d.heap_len;)e[2*(i=d.heap[++d.heap_len]=2>l?++l:0)]=1,d.depth[i]=0,d.opt_len--,a&&(d.static_len-=o[2*i+1]);for(t.max_code=l,c=d.heap_len>>1;1<=c;c--)h(d,e,c);i=s;do c=d.heap[1],d.heap[1]=d.heap[d.heap_len--],h(d,e,1),n=d.heap[1],d.heap[--d.heap_max]=c,d.heap[--d.heap_max]=n,e[2*i]=e[2*c]+e[2*n],d.depth[i]=(d.depth[c]>=d.depth[n]?d.depth[c]:d.depth[n])+1,e[2*c+1]=e[2*n+1]=i,d.heap[1]=i++,h(d,e,1);while(2<=d.heap_len);d.heap[--d.heap_max]=d.heap[1],u(d,t),p(e,l,d.bl_count)}function y(d,t,e){var n=-1,o=t[1],a=0,s=7,l=4,c,i;for(0===o&&(s=138,l=3),t[2*(e+1)+1]=65535,c=0;c<=e;c++)i=o,o=t[2*(c+1)+1],++a<s&&i===o||(a<l?d.bl_tree[2*i]+=a:0===i?10>=a?d.bl_tree[2*V]++:d.bl_tree[2*W]++:(i!==n&&d.bl_tree[2*i]++,d.bl_tree[2*H]++),a=0,n=i,0===o?(s=138,l=3):i===o?(s=6,l=3):(s=7,l=4))}function b(c,t,e){var n=-1,o=t[1],a=0,s=7,d=4,p,i;for(0===o&&(s=138,d=3),p=0;p<=e;p++)if(i=o,o=t[2*(p+1)+1],!(++a<s&&i===o)){if(a<d)do l(c,i,c.bl_tree);while(0!=--a);else 0===i?10>=a?(l(c,V,c.bl_tree),ee(c,a-3,3)):(l(c,W,c.bl_tree),ee(c,a-11,7)):(i!==n&&(l(c,i,c.bl_tree),a--),l(c,H,c.bl_tree),ee(c,a-3,2));a=0,n=i,0===o?(s=138,d=3):i===o?(s=6,d=3):(s=7,d=4)}}function x(a){var t;for(y(a,a.dyn_ltree,a.l_desc.max_code),y(a,a.dyn_dtree,a.d_desc.max_code),f(a,a.bl_desc),t=k-1;3<=t&&0===a.bl_tree[2*Y[t]+1];t--);return a.opt_len+=3*(t+1)+5+5+4,t}function v(a,t,e,o){var n;for(ee(a,t-257,5),ee(a,e-1,5),ee(a,o-4,4),n=0;n<o;n++)ee(a,a.bl_tree[2*Y[n]+1],3);b(a,a.dyn_ltree,t-1),b(a,a.dyn_dtree,e-1)}function S(a){var t=4093624447,o;for(o=0;31>=o;o++,t>>>=1)if(1&t&&0!==a.dyn_ltree[2*o])return T;if(0!==a.dyn_ltree[18]||0!==a.dyn_ltree[20]||0!==a.dyn_ltree[26])return M;for(o=32;o<L;o++)if(0!==a.dyn_ltree[2*o])return M;return T}function w(a,t,e,o){ee(a,(P<<1)+(o?1:0),3),m(a,t,e,!0)}var E=e(2),T=0,M=1,P=0,C=1,A=29,L=256,D=L+1+A,F=30,k=19,U=2*D+1,N=15,B=16,z=7,G=256,H=16,V=17,W=18,j=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],X=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],q=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Y=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Z=Array(2*(D+2));n(Z);var J=Array(2*F);n(J);var K=Array(512);n(K);var Q=Array(256);n(Q);var $=Array(A);n($);var te=Array(F);n(te);var ae=!1,oe,re,ne;t._tr_init=function(e){ae||(s(),ae=!0),e.l_desc=new r(e.dyn_ltree,oe),e.d_desc=new r(e.dyn_dtree,re),e.bl_desc=new r(e.bl_tree,ne),e.bi_buf=0,e.bi_valid=0,c(e)},t._tr_stored_block=w,t._tr_flush_block=function(l,t,e,n){var i=0,a,r;0<l.level?(l.strm.data_type===2&&(l.strm.data_type=S(l)),f(l,l.l_desc),f(l,l.d_desc),i=x(l),a=l.opt_len+3+7>>>3,(r=l.static_len+3+7>>>3)<=a&&(a=r)):a=r=e+5,e+4<=a&&-1!==t?w(l,t,e,n):l.strategy===4||r===a?(ee(l,(C<<1)+(n?1:0),3),g(l,Z,J)):(ee(l,(2<<1)+(n?1:0),3),v(l,l.l_desc.max_code+1,l.d_desc.max_code+1,i+1),g(l,l.dyn_ltree,l.dyn_dtree)),c(l),n&&d(l)},t._tr_tally=function(a,t,e){return a.pending_buf[a.d_buf+2*a.last_lit]=255&t>>>8,a.pending_buf[a.d_buf+2*a.last_lit+1]=255&t,a.pending_buf[a.l_buf+a.last_lit]=255&e,a.last_lit++,0===t?a.dyn_ltree[2*e]++:(a.matches++,t--,a.dyn_ltree[2*(Q[e]+L+1)]++,a.dyn_dtree[2*O(t)]++),a.last_lit===a.lit_bufsize-1},t._tr_align=function(e){ee(e,C<<1,3),l(e,G,Z),o(e)}},function(d,t,e){"use strict";function m(a){if(!(this instanceof m))return new m(a);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},a||{});var t=this.options;t.raw&&0<=t.windowBits&&16>t.windowBits&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(0<=t.windowBits&&16>t.windowBits)||a&&a.windowBits||(t.windowBits+=32),15<t.windowBits&&48>t.windowBits&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new i,this.strm.avail_out=0;var e=g.inflateInit2(this.strm,t.windowBits);if(e!==s.Z_OK)throw new Error(r[e]);this.header=new l,g.inflateGetHeader(this.strm,this.header)}function n(a,t){var e=new m(t);if(e.push(a,!0),e.err)throw e.msg;return e.result}var g=e(117),o=e(2),a=e(54),s=e(56),r=e(20),i=e(55),l=e(120),y=Object.prototype.toString;m.prototype.push=function(l,p){var b=this.strm,d=this.options.chunkSize,f=this.options.dictionary,x=!1,_,n,i,r,c,h;if(this.ended)return!1;n=p===~~p?p:!0===p?s.Z_FINISH:s.Z_NO_FLUSH,b.input="string"==typeof l?a.binstring2buf(l):"[object ArrayBuffer]"===y.call(l)?new Uint8Array(l):l,b.next_in=0,b.avail_in=b.input.length;do{if(0===b.avail_out&&(b.output=new o.Buf8(d),b.next_out=0,b.avail_out=d),(_=g.inflate(b,s.Z_NO_FLUSH))===s.Z_NEED_DICT&&f&&(h="string"==typeof f?a.string2buf(f):"[object ArrayBuffer]"===y.call(f)?new Uint8Array(f):f,_=g.inflateSetDictionary(this.strm,h)),_===s.Z_BUF_ERROR&&!0===x&&(_=s.Z_OK,x=!1),_!==s.Z_STREAM_END&&_!==s.Z_OK)return this.onEnd(_),this.ended=!0,!1;b.next_out&&(0!==b.avail_out&&_!==s.Z_STREAM_END&&(0!==b.avail_in||n!==s.Z_FINISH&&n!==s.Z_SYNC_FLUSH)||("string"===this.options.to?(i=a.utf8border(b.output,b.next_out),r=b.next_out-i,c=a.buf2string(b.output,i),b.next_out=r,b.avail_out=d-r,r&&o.arraySet(b.output,b.output,i,r,0),this.onData(c)):this.onData(o.shrinkBuf(b.output,b.next_out)))),0===b.avail_in&&0===b.avail_out&&(x=!0)}while((0<b.avail_in||0===b.avail_out)&&_!==s.Z_STREAM_END);return _===s.Z_STREAM_END&&(n=s.Z_FINISH),n===s.Z_FINISH?(_=g.inflateEnd(this.strm),this.onEnd(_),this.ended=!0,_===s.Z_OK):n!==s.Z_SYNC_FLUSH||(this.onEnd(s.Z_OK),b.avail_out=0,!0)},m.prototype.onData=function(e){this.chunks.push(e)},m.prototype.onEnd=function(e){e===s.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Inflate=m,t.inflate=n,t.inflateRaw=function(a,t){return t=t||{},t.raw=!0,n(a,t)},t.ungzip=n},function(y,t,e){"use strict";function x(e){return(255&e>>>24)+(65280&e>>>8)+((65280&e)<<8)+((255&e)<<24)}function T(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new h.Buf16(320),this.work=new h.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function r(a){var t;return a&&a.state?(t=a.state,a.total_in=a.total_out=t.total=0,a.msg="",t.wrap&&(a.adler=1&t.wrap),t.mode=A,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new h.Buf32(l),t.distcode=t.distdyn=new h.Buf32(s),t.sane=1,t.back=-1,S):E}function o(a){var t;return a&&a.state?(t=a.state,t.wsize=0,t.whave=0,t.wnext=0,r(a)):E}function a(a,t){var r,n;return a&&a.state?(n=a.state,0>t?(r=0,t=-t):(r=1+(t>>4),48>t&&(t&=15)),t&&(8>t||15<t)?E:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,o(a))):E}function n(o,t){var e,r;return o?(r=new T,o.state=r,r.window=null,(e=a(o,t))!==S&&(o.state=null),e):E}function i(a){if(le){var t;for(se=new h.Buf32(512),u=new h.Buf32(32),t=0;144>t;)a.lens[t++]=8;for(;256>t;)a.lens[t++]=9;for(;280>t;)a.lens[t++]=7;for(;288>t;)a.lens[t++]=8;for(_(g,a.lens,0,288,se,0,a.work,{bits:9}),t=0;32>t;)a.lens[t++]=5;_(v,a.lens,0,32,u,0,a.work,{bits:5}),le=!1}a.lencode=se,a.lenbits=9,a.distcode=u,a.distbits=5}function c(a,t,e,n){var i=a.state,o;return null===i.window&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new h.Buf8(i.wsize)),n>=i.wsize?(h.arraySet(i.window,t,e-i.wsize,i.wsize,0),i.wnext=0,i.whave=i.wsize):((o=i.wsize-i.wnext)>n&&(o=n),h.arraySet(i.window,t,e-n,o,i.wnext),(n-=o)?(h.arraySet(i.window,t,e-n,n,0),i.wnext=n,i.whave=i.wsize):(i.wnext+=o,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=o))),0}var h=e(2),d=e(52),f=e(53),m=e(118),_=e(119),g=1,v=2,b=4,w=6,S=0,E=-2,M=-3,P=-4,C=8,A=1,L=2,I=3,R=4,D=5,k=6,O=7,U=8,N=9,B=10,z=11,G=12,H=13,V=14,W=15,j=16,X=17,q=18,Y=19,Z=20,J=21,K=22,Q=23,$=24,ee=25,te=26,ae=27,oe=28,re=29,ne=30,ie=31,l=852,s=592,le=!0,se,u;t.inflateReset=o,t.inflateReset2=a,t.inflateResetKeep=r,t.inflateInit=function(e){return n(e,15)},t.inflateInit2=n,t.inflate=function(y,T){var e=0,le=new h.Buf8(4),se=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ce,n,r,o,a,s,l,u,p,de,pe,ue,me,_e,he,ge,fe,ye,be,xe,ve,Se,we,Ee;if(!y||!y.state||!y.output||!y.input&&0!==y.avail_in)return E;(ce=y.state).mode===G&&(ce.mode=H),a=y.next_out,r=y.output,l=y.avail_out,o=y.next_in,n=y.input,s=y.avail_in,u=ce.hold,p=ce.bits,de=s,pe=l,Se=S;t:for(;;)switch(ce.mode){case A:if(0===ce.wrap){ce.mode=H;break}for(;16>p;){if(0===s)break t;s--,u+=n[o++]<<p,p+=8}if(2&ce.wrap&&35615===u){ce.check=0,le[0]=255&u,le[1]=255&u>>>8,ce.check=f(ce.check,le,2,0),u=0,p=0,ce.mode=L;break}if(ce.flags=0,ce.head&&(ce.head.done=!1),!(1&ce.wrap)||(((255&u)<<8)+(u>>8))%31){y.msg="incorrect header check",ce.mode=ne;break}if((15&u)!==C){y.msg="unknown compression method",ce.mode=ne;break}if(u>>>=4,p-=4,ve=8+(15&u),0===ce.wbits)ce.wbits=ve;else if(ve>ce.wbits){y.msg="invalid window size",ce.mode=ne;break}ce.dmax=1<<ve,y.adler=ce.check=1,ce.mode=512&u?B:G,u=0,p=0;break;case L:for(;16>p;){if(0===s)break t;s--,u+=n[o++]<<p,p+=8}if(ce.flags=u,(255&ce.flags)!==C){y.msg="unknown compression method",ce.mode=ne;break}if(57344&ce.flags){y.msg="unknown header flags set",ce.mode=ne;break}ce.head&&(ce.head.text=1&u>>8),512&ce.flags&&(le[0]=255&u,le[1]=255&u>>>8,ce.check=f(ce.check,le,2,0)),u=0,p=0,ce.mode=I;case I:for(;32>p;){if(0===s)break t;s--,u+=n[o++]<<p,p+=8}ce.head&&(ce.head.time=u),512&ce.flags&&(le[0]=255&u,le[1]=255&u>>>8,le[2]=255&u>>>16,le[3]=255&u>>>24,ce.check=f(ce.check,le,4,0)),u=0,p=0,ce.mode=R;case R:for(;16>p;){if(0===s)break t;s--,u+=n[o++]<<p,p+=8}ce.head&&(ce.head.xflags=255&u,ce.head.os=u>>8),512&ce.flags&&(le[0]=255&u,le[1]=255&u>>>8,ce.check=f(ce.check,le,2,0)),u=0,p=0,ce.mode=D;case D:if(1024&ce.flags){for(;16>p;){if(0===s)break t;s--,u+=n[o++]<<p,p+=8}ce.length=u,ce.head&&(ce.head.extra_len=u),512&ce.flags&&(le[0]=255&u,le[1]=255&u>>>8,ce.check=f(ce.check,le,2,0)),u=0,p=0}else ce.head&&(ce.head.extra=null);ce.mode=k;case k:if(1024&ce.flags&&((ue=ce.length)>s&&(ue=s),ue&&(ce.head&&(ve=ce.head.extra_len-ce.length,ce.head.extra||(ce.head.extra=Array(ce.head.extra_len)),h.arraySet(ce.head.extra,n,o,ue,ve)),512&ce.flags&&(ce.check=f(ce.check,n,ue,o)),s-=ue,o+=ue,ce.length-=ue),ce.length))break t;ce.length=0,ce.mode=O;case O:if(2048&ce.flags){if(0===s)break t;ue=0;do ve=n[o+ue++],ce.head&&ve&&65536>ce.length&&(ce.head.name+=F(ve));while(ve&&ue<s);if(512&ce.flags&&(ce.check=f(ce.check,n,ue,o)),s-=ue,o+=ue,ve)break t}else ce.head&&(ce.head.name=null);ce.length=0,ce.mode=U;case U:if(4096&ce.flags){if(0===s)break t;ue=0;do ve=n[o+ue++],ce.head&&ve&&65536>ce.length&&(ce.head.comment+=F(ve));while(ve&&ue<s);if(512&ce.flags&&(ce.check=f(ce.check,n,ue,o)),s-=ue,o+=ue,ve)break t}else ce.head&&(ce.head.comment=null);ce.mode=N;case N:if(512&ce.flags){for(;16>p;){if(0===s)break t;s--,u+=n[o++]<<p,p+=8}if(u!==(65535&ce.check)){y.msg="header crc mismatch",ce.mode=ne;break}u=0,p=0}ce.head&&(ce.head.hcrc=1&ce.flags>>9,ce.head.done=!0),y.adler=ce.check=0,ce.mode=G;break;case B:for(;32>p;){if(0===s)break t;s--,u+=n[o++]<<p,p+=8}y.adler=ce.check=x(u),u=0,p=0,ce.mode=z;case z:if(0===ce.havedict)return y.next_out=a,y.avail_out=l,y.next_in=o,y.avail_in=s,ce.hold=u,ce.bits=p,2;y.adler=ce.check=1,ce.mode=G;case G:if(T===5||T===w)break t;case H:if(ce.last){u>>>=7&p,p-=7&p,ce.mode=ae;break}for(;3>p;){if(0===s)break t;s--,u+=n[o++]<<p,p+=8}switch(ce.last=1&u,u>>>=1,p-=1,3&u){case 0:ce.mode=V;break;case 1:if(i(ce),ce.mode=Z,T===w){u>>>=2,p-=2;break t}break;case 2:ce.mode=X;break;case 3:y.msg="invalid block type",ce.mode=ne;}u>>>=2,p-=2;break;case V:for(u>>>=7&p,p-=7&p;32>p;){if(0===s)break t;s--,u+=n[o++]<<p,p+=8}if((65535&u)!=(65535^u>>>16)){y.msg="invalid stored block lengths",ce.mode=ne;break}if(ce.length=65535&u,u=0,p=0,ce.mode=W,T===w)break t;case W:ce.mode=j;case j:if(ue=ce.length){if(ue>s&&(ue=s),ue>l&&(ue=l),0===ue)break t;h.arraySet(r,n,o,ue,a),s-=ue,o+=ue,l-=ue,a+=ue,ce.length-=ue;break}ce.mode=G;break;case X:for(;14>p;){if(0===s)break t;s--,u+=n[o++]<<p,p+=8}if(ce.nlen=257+(31&u),u>>>=5,p-=5,ce.ndist=1+(31&u),u>>>=5,p-=5,ce.ncode=4+(15&u),u>>>=4,p-=4,286<ce.nlen||30<ce.ndist){y.msg="too many length or distance symbols",ce.mode=ne;break}ce.have=0,ce.mode=q;case q:for(;ce.have<ce.ncode;){for(;3>p;){if(0===s)break t;s--,u+=n[o++]<<p,p+=8}ce.lens[se[ce.have++]]=7&u,u>>>=3,p-=3}for(;19>ce.have;)ce.lens[se[ce.have++]]=0;if(ce.lencode=ce.lendyn,ce.lenbits=7,we={bits:ce.lenbits},Se=_(0,ce.lens,0,19,ce.lencode,0,ce.work,we),ce.lenbits=we.bits,Se){y.msg="invalid code lengths set",ce.mode=ne;break}ce.have=0,ce.mode=Y;case Y:for(;ce.have<ce.nlen+ce.ndist;){for(;e=ce.lencode[u&(1<<ce.lenbits)-1],he=e>>>24,ge=255&e>>>16,fe=65535&e,!(he<=p);){if(0===s)break t;s--,u+=n[o++]<<p,p+=8}if(16>fe)u>>>=he,p-=he,ce.lens[ce.have++]=fe;else{if(16===fe){for(Ee=he+2;p<Ee;){if(0===s)break t;s--,u+=n[o++]<<p,p+=8}if(u>>>=he,p-=he,0===ce.have){y.msg="invalid bit length repeat",ce.mode=ne;break}ve=ce.lens[ce.have-1],ue=3+(3&u),u>>>=2,p-=2}else if(17===fe){for(Ee=he+3;p<Ee;){if(0===s)break t;s--,u+=n[o++]<<p,p+=8}p-=he,ve=0,ue=3+(7&(u>>>=he)),u>>>=3,p-=3}else{for(Ee=he+7;p<Ee;){if(0===s)break t;s--,u+=n[o++]<<p,p+=8}p-=he,ve=0,ue=11+(127&(u>>>=he)),u>>>=7,p-=7}if(ce.have+ue>ce.nlen+ce.ndist){y.msg="invalid bit length repeat",ce.mode=ne;break}for(;ue--;)ce.lens[ce.have++]=ve}}if(ce.mode===ne)break;if(0===ce.lens[256]){y.msg="invalid code -- missing end-of-block",ce.mode=ne;break}if(ce.lenbits=9,we={bits:ce.lenbits},Se=_(g,ce.lens,0,ce.nlen,ce.lencode,0,ce.work,we),ce.lenbits=we.bits,Se){y.msg="invalid literal/lengths set",ce.mode=ne;break}if(ce.distbits=6,ce.distcode=ce.distdyn,we={bits:ce.distbits},Se=_(v,ce.lens,ce.nlen,ce.ndist,ce.distcode,0,ce.work,we),ce.distbits=we.bits,Se){y.msg="invalid distances set",ce.mode=ne;break}if(ce.mode=Z,T===w)break t;case Z:ce.mode=J;case J:if(6<=s&&258<=l){y.next_out=a,y.avail_out=l,y.next_in=o,y.avail_in=s,ce.hold=u,ce.bits=p,m(y,pe),a=y.next_out,r=y.output,l=y.avail_out,o=y.next_in,n=y.input,s=y.avail_in,u=ce.hold,p=ce.bits,ce.mode===G&&(ce.back=-1);break}for(ce.back=0;e=ce.lencode[u&(1<<ce.lenbits)-1],he=e>>>24,ge=255&e>>>16,fe=65535&e,!(he<=p);){if(0===s)break t;s--,u+=n[o++]<<p,p+=8}if(ge&&0==(240&ge)){for(ye=he,be=ge,xe=fe;e=ce.lencode[xe+((u&(1<<ye+be)-1)>>ye)],he=e>>>24,ge=255&e>>>16,fe=65535&e,!(ye+he<=p);){if(0===s)break t;s--,u+=n[o++]<<p,p+=8}u>>>=ye,p-=ye,ce.back+=ye}if(u>>>=he,p-=he,ce.back+=he,ce.length=fe,0===ge){ce.mode=te;break}if(32&ge){ce.back=-1,ce.mode=G;break}if(64&ge){y.msg="invalid literal/length code",ce.mode=ne;break}ce.extra=15&ge,ce.mode=K;case K:if(ce.extra){for(Ee=ce.extra;p<Ee;){if(0===s)break t;s--,u+=n[o++]<<p,p+=8}ce.length+=u&(1<<ce.extra)-1,u>>>=ce.extra,p-=ce.extra,ce.back+=ce.extra}ce.was=ce.length,ce.mode=Q;case Q:for(;e=ce.distcode[u&(1<<ce.distbits)-1],he=e>>>24,ge=255&e>>>16,fe=65535&e,!(he<=p);){if(0===s)break t;s--,u+=n[o++]<<p,p+=8}if(0==(240&ge)){for(ye=he,be=ge,xe=fe;e=ce.distcode[xe+((u&(1<<ye+be)-1)>>ye)],he=e>>>24,ge=255&e>>>16,fe=65535&e,!(ye+he<=p);){if(0===s)break t;s--,u+=n[o++]<<p,p+=8}u>>>=ye,p-=ye,ce.back+=ye}if(u>>>=he,p-=he,ce.back+=he,64&ge){y.msg="invalid distance code",ce.mode=ne;break}ce.offset=fe,ce.extra=15&ge,ce.mode=$;case $:if(ce.extra){for(Ee=ce.extra;p<Ee;){if(0===s)break t;s--,u+=n[o++]<<p,p+=8}ce.offset+=u&(1<<ce.extra)-1,u>>>=ce.extra,p-=ce.extra,ce.back+=ce.extra}if(ce.offset>ce.dmax){y.msg="invalid distance too far back",ce.mode=ne;break}ce.mode=ee;case ee:if(0===l)break t;if(ue=pe-l,ce.offset>ue){if((ue=ce.offset-ue)>ce.whave&&ce.sane){y.msg="invalid distance too far back",ce.mode=ne;break}ue>ce.wnext?(ue-=ce.wnext,me=ce.wsize-ue):me=ce.wnext-ue,ue>ce.length&&(ue=ce.length),_e=ce.window}else _e=r,me=a-ce.offset,ue=ce.length;ue>l&&(ue=l),l-=ue,ce.length-=ue;do r[a++]=_e[me++];while(--ue);0===ce.length&&(ce.mode=J);break;case te:if(0===l)break t;r[a++]=ce.length,l--,ce.mode=J;break;case ae:if(ce.wrap){for(;32>p;){if(0===s)break t;s--,u|=n[o++]<<p,p+=8}if(pe-=l,y.total_out+=pe,ce.total+=pe,pe&&(y.adler=ce.check=ce.flags?f(ce.check,r,pe,a-pe):d(ce.check,r,pe,a-pe)),pe=l,(ce.flags?u:x(u))!==ce.check){y.msg="incorrect data check",ce.mode=ne;break}u=0,p=0}ce.mode=oe;case oe:if(ce.wrap&&ce.flags){for(;32>p;){if(0===s)break t;s--,u+=n[o++]<<p,p+=8}if(u!==(4294967295&ce.total)){y.msg="incorrect length check",ce.mode=ne;break}u=0,p=0}ce.mode=re;case re:Se=1;break t;case ne:Se=M;break t;case ie:return P;case 32:default:return E;}return y.next_out=a,y.avail_out=l,y.next_in=o,y.avail_in=s,ce.hold=u,ce.bits=p,(ce.wsize||pe!==y.avail_out&&ce.mode<ne&&(ce.mode<ae||T!==b))&&c(y,y.output,y.next_out,pe-y.avail_out)?(ce.mode=ie,P):(de-=y.avail_in,pe-=y.avail_out,y.total_in+=de,y.total_out+=pe,ce.total+=pe,ce.wrap&&pe&&(y.adler=ce.check=ce.flags?f(ce.check,r,pe,y.next_out-pe):d(ce.check,r,pe,y.next_out-pe)),y.data_type=ce.bits+(ce.last?64:0)+(ce.mode===G?128:0)+(ce.mode===Z||ce.mode===W?256:0),(0===de&&0===pe||T===b)&&Se===S&&(Se=-5),Se)},t.inflateEnd=function(a){if(!a||!a.state)return E;var o=a.state;return o.window&&(o.window=null),a.state=null,S},t.inflateGetHeader=function(a,t){var e;return a&&a.state?0==(2&(e=a.state).wrap)?E:(e.head=t,t.done=!1,S):E},t.inflateSetDictionary=function(a,t){var e=t.length,o,r;return a&&a.state?0!==(o=a.state).wrap&&o.mode!==z?E:o.mode===z&&(r=1,(r=d(r,t,e,0))!==o.check)?M:c(a,t,e,e)?(o.mode=ie,P):(o.havedict=1,S):E},t.inflateInfo="pako inflate (from Nodeca project)"},function(e){"use strict";e.exports=function(P,t){var e,n,i,r,o,a,s,l,c,h,u,p,d,f,m,_,g,y,v,b,w,x,S,E,M;e=P.state,n=P.next_in,E=P.input,i=n+(P.avail_in-5),r=P.next_out,M=P.output,o=r-(t-P.avail_out),a=r+(P.avail_out-257),s=e.dmax,l=e.wsize,c=e.whave,h=e.wnext,u=e.window,p=e.hold,d=e.bits,f=e.lencode,m=e.distcode,_=(1<<e.lenbits)-1,g=(1<<e.distbits)-1;t:do{15>d&&(p+=E[n++]<<d,d+=8,p+=E[n++]<<d,d+=8),y=f[p&_];e:for(;;){if(v=y>>>24,p>>>=v,d-=v,0===(v=255&y>>>16))M[r++]=65535&y;else{if(!(16&v)){if(0==(64&v)){y=f[(65535&y)+(p&(1<<v)-1)];continue e}if(32&v){e.mode=12;break t}P.msg="invalid literal/length code",e.mode=30;break t}b=65535&y,(v&=15)&&(d<v&&(p+=E[n++]<<d,d+=8),b+=p&(1<<v)-1,p>>>=v,d-=v),15>d&&(p+=E[n++]<<d,d+=8,p+=E[n++]<<d,d+=8),y=m[p&g];n:for(;;){if(v=y>>>24,p>>>=v,d-=v,!(16&(v=255&y>>>16))){if(0==(64&v)){y=m[(65535&y)+(p&(1<<v)-1)];continue n}P.msg="invalid distance code",e.mode=30;break t}if(w=65535&y,v&=15,d<v&&(p+=E[n++]<<d,(d+=8)<v&&(p+=E[n++]<<d,d+=8)),(w+=p&(1<<v)-1)>s){P.msg="invalid distance too far back",e.mode=30;break t}if(p>>>=v,d-=v,v=r-o,w>v){if((v=w-v)>c&&e.sane){P.msg="invalid distance too far back",e.mode=30;break t}if(x=0,S=u,0===h){if(x+=l-v,v<b){b-=v;do M[r++]=u[x++];while(--v);x=r-w,S=M}}else if(h<v){if(x+=l+h-v,(v-=h)<b){b-=v;do M[r++]=u[x++];while(--v);if(x=0,h<b){b-=v=h;do M[r++]=u[x++];while(--v);x=r-w,S=M}}}else if(x+=h-v,v<b){b-=v;do M[r++]=u[x++];while(--v);x=r-w,S=M}for(;2<b;)M[r++]=S[x++],M[r++]=S[x++],M[r++]=S[x++],b-=3;b&&(M[r++]=S[x++],1<b&&(M[r++]=S[x++]))}else{x=r-w;do M[r++]=M[x++],M[r++]=M[x++],M[r++]=M[x++],b-=3;while(2<b);b&&(M[r++]=M[x++],1<b&&(M[r++]=M[x++]))}break}}break}}while(n<i&&r<a);n-=b=d>>3,p&=(1<<(d-=b<<3))-1,P.next_in=n,P.next_out=r,P.avail_in=n<i?i-n+5:5-(n-i),P.avail_out=r<a?a-r+257:257-(r-a),e.hold=p,e.bits=d}},function(l,t,e){"use strict";var B=e(2),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],r=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],o=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],a=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];l.exports=function(s,t,e,n,l,c,h,u){var p=u.bits,x=0,S=0,E=0,M=0,T=0,A=0,P=0,I=0,C=0,L=0,R=null,D=0,k=new B.Buf16(16),O=new B.Buf16(16),F=null,U=0,N,d,f,m,_,g,y,v,b;for(x=0;15>=x;x++)k[x]=0;for(S=0;S<n;S++)k[t[e+S]]++;for(T=p,M=15;1<=M&&0===k[M];M--);if(T>M&&(T=M),0===M)return l[c++]=20971520,l[c++]=20971520,u.bits=1,0;for(E=1;E<M&&0===k[E];E++);for(T<E&&(T=E),I=1,x=1;15>=x;x++)if(I<<=1,0>(I-=k[x]))return-1;if(0<I&&(0===s||1!==M))return-1;for(O[1]=0,x=1;15>x;x++)O[x+1]=O[x]+k[x];for(S=0;S<n;S++)0!==t[e+S]&&(h[O[t[e+S]]++]=S);if(0===s?(R=F=h,g=19):1===s?(R=i,D-=257,F=r,U-=257,g=256):(R=o,F=a,g=-1),L=0,S=0,x=E,_=c,A=T,P=0,f=-1,C=1<<T,m=C-1,1===s&&852<C||2===s&&592<C)return 1;for(;;){0,y=x-P,h[S]<g?(v=0,b=h[S]):h[S]>g?(v=F[U+h[S]],b=R[D+h[S]]):(v=96,b=0),N=1<<x-P,E=d=1<<A;do l[_+(L>>P)+(d-=N)]=0|(y<<24|v<<16|b);while(0!==d);for(N=1<<x-1;L&N;)N>>=1;if(0===N?L=0:(L&=N-1,L+=N),S++,0==--k[x]){if(x===M)break;x=t[e+h[S]]}if(x>T&&(L&m)!==f){for(0===P&&(P=T),_+=E,I=1<<(A=x-P);A+P<M&&!(0>=(I-=k[A+P]));)A++,I<<=1;if(C+=1<<A,1===s&&852<C||2===s&&592<C)return 1;l[f=L&m]=0|(T<<24|A<<16|_-c)}}return 0!==L&&(l[_+L]=0|(x-P<<24|4194304)),u.bits=T,0}},function(e){"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},function(d,t,e){"use strict";function p(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function i(a,o){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o&&("object"==("undefined"===typeof o?"undefined":babelHelpers.typeof(o))||"function"==typeof o)?o:a}function r(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof o?"undefined":babelHelpers.typeof(o)));a.prototype=Object.create(o&&o.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(a,o):a.__proto__=o)}var u=e(41),a=e(21),o=e.n(a),n=function(){function a(a,o){for(var e=0,r;e<o.length;e++)r=o[e],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}return function(t,e,o){return e&&a(t.prototype,e),o&&a(t,o),t}}(),l=function(a){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:u.a;p(this,t);var o=i(this,a.call(this));return o._loaded=-1,o._totalLoaded=-1,o._parsed=-1,o._totalParsed=-1,o._data=[],o._container=e,o._progressBar=null,o._container&&r&&(o._progressBar=new r(o._container)),o}return r(t,a),t.prototype.free=function(){this._container=null,this._progressBar&&(this._progressBar.free(),this._progressBar=null)},t.prototype.fetch=function(l){var s=this;return new Promise(function(e,n){var i=new XMLHttpRequest;i.open("GET",l),i.crossOrigin=!0,i.responseType="arraybuffer",i.onloadstart=function(){s.emit("fetch-start",{file:l,time:new Date})},i.onload=function(r){if(200===i.status){s._loaded=r.loaded,s._totalLoaded=r.total,s._progressBar&&s._progressBar.update(s._loaded,s._totalLoaded,"load");var o=i.response;s.emit("fetch-success",{file:l,time:new Date,totalLoaded:r.total}),e({url:l,buffer:o})}else n(i.statusText)},i.onerror=function(){s.emit("fetch-error",{file:l,time:new Date}),n(i.statusText)},i.onabort=function(){s.emit("fetch-abort",{file:l,time:new Date}),n(i.statusText)},i.ontimeout=function(){s.emit("fetch-timeout",{file:l,time:new Date}),n(i.statusText)},i.onprogress=function(e){s._loaded=e.loaded,s._totalLoaded=e.total,s.emit("fetch-progress",{file:l,total:e.total,loaded:e.loaded,time:new Date}),s._progressBar&&s._progressBar.update(s._loaded,s._totalLoaded,"load")},i.onloadend=function(){s.emit("fetch-end",{file:l,time:new Date})},i.send()})},t.prototype.parse=function(a){return new Promise(function(t){t(a)})},t.prototype.loadSequenceGroup=function(a){var o=this,e=[];return a.forEach(function(a){e.push(o.fetch(a))}),Promise.all(e).then(function(e){return o.parse(e)}).then(function(e){return o._data.push(e),e}).catch(function(e){window.console.log("oops... something went wrong..."),window.console.log(e)})},t.prototype.loadSequence=function(a){var o=this;return this.fetch(a).then(function(e){return o.parse(e)}).then(function(e){return o._data.push(e),e}).catch(function(e){window.console.log("oops... something went wrong..."),window.console.log(e)})},t.prototype.load=function(a){var o=this;Array.isArray(a)||(a=[a]),this.emit("load-start",{files:a,time:new Date});var e=[];return a.forEach(function(a){Array.isArray(a)?e.push(o.loadSequenceGroup(a)):e.push(o.loadSequence(a))}),Promise.all(e)},n(t,[{key:"data",set:function(e){this._data=e},get:function(){return this._data}}]),t}(o.a);t.a=l},function(d,t,e){"use strict";var y=e(123),i=e(124),r=e(125),o=e(58),a=e(126),s=e(129),l=e(26),c=e(130),h=e(131),u=127;d.exports=function(b){var t,x,n,d,f,m,_;if(x=0>b||1/b===i?"1":"0",b===y||b===i)return d=l("1",8),n=l("0",23),x+d+n;if(b!==b)return d=l("1",8),n="1"+l("0",22),x+d+n;if(0===b)return d=l("0",8),n=l("0",23),x+d+n;if(b=r(b),f=o(b),m=b-f,f=c(f),m=h(m),f)d=f.length-1;else{for(_=0;_<m.length;_++)if("1"===m[_]){t=_+1;break}d=-t}return n=f+m,0>d?(d<=-u&&(t=u-1),n=n.substring(t)):n=n.substring(1),d=c(d+u),d=s(d,8,"0"),n=a(n,23,"0").substring(0,23),x+d+n}},function(e){"use strict";var t=new Float32Array(1);new Uint32Array(t.buffer)[0]=2139095040,e.exports=t[0]},function(e){"use strict";var t=new Float32Array(1);new Uint32Array(t.buffer)[0]=4286578688,e.exports=t[0]},function(e){"use strict";e.exports=function(e){return 0>e?-e:0===e?0:e}},function(l,t,e){"use strict";var s=e(24),i=e(25),r=e(59),o=e(26);l.exports=function(a,t,e){var n,l;if(!s(a))throw new TypeError("invalid input argument. First argument must be a string. Value: `"+a+"`.");if(!i(t))throw new TypeError("invalid input argument. Second argument must be a nonnegative integer. Value: `"+t+"`.");if(2<arguments.length){if(l=e,!s(l))throw new TypeError("invalid input argument. Third argument must be a string. Value: `"+l+"`.");if(0===l.length)throw new RangeError("invalid input argument. Pad string must not be an empty string.")}else l=" ";if(t>9007199254740991)throw new RangeError("invalid input argument. Output string length exceeds maximum allowed string length.");return 0>=(n=(t-a.length)/l.length)?a:(n=r(n),a+o(l,n))}},function(a,t,e){"use strict";var o=e(128);a.exports=function(e){return o(e)&&0==e%1}},function(e){"use strict";e.exports=function(e){return("number"==typeof e||"[object Number]"===Object.prototype.toString.call(e))&&e.valueOf()===e.valueOf()}},function(l,t,e){"use strict";var s=e(24),i=e(25),r=e(59),o=e(26);l.exports=function(a,t,e){var n,l;if(!s(a))throw new TypeError("invalid input argument. First argument must be a string. Value: `"+a+"`.");if(!i(t))throw new TypeError("invalid input argument. Second argument must be a nonnegative integer. Value: `"+t+"`.");if(2<arguments.length){if(l=e,!s(l))throw new TypeError("invalid input argument. Third argument must be a string. Value: `"+l+"`.");if(0===l.length)throw new RangeError("invalid input argument. Pad string must not be an empty string.")}else l=" ";if(t>9007199254740991)throw new RangeError("invalid input argument. Output string length exceeds maximum allowed string length.");return 0>=(n=(t-a.length)/l.length)?a:(n=r(n),o(l,n)+a)}},function(a,t,e){"use strict";var o=e(58);a.exports=function(a){for(var t="",r;0<a;)t=(r=a/2)===(a=o(r))?"0"+t:"1"+t;return t}},function(e){"use strict";var r=149;e.exports=function(i){var t,e,n,o;if(t="",0===i)return t;for(o=r,n=0;n<r&&(1<=(e=2*i)?(i=e-1,t+="1",o===r&&(o=n)):(i=e,t+="0"),!(1===e||n-o>24));n++);return t}},function(a,l,t){(function(m,s){var e,r,o;!function(t,a){void 0!==m&&m.exports?m.exports=a():(r=[],void 0!==(o="function"==typeof(e=a)?e.apply(l,r):e)&&(m.exports=o))}(0,function(){var a=function(_){return void 0===_&&(_={}),_.parseDicom=function(e,n){function r(a){if(void 0===a.elements.x00020010)throw"dicomParser.parseDicom: missing required meta header attribute 0002,0010";var t=a.elements.x00020010;return _.readFixedString(e,t.dataOffset,t.length)}function o(e){return"1.2.840.10008.1.2"!==e}function a(r,o){if("1.2.840.10008.1.2.1.99"===r){if(n&&n.inflater){var a=n.inflater(e,o);return new _.ByteStream(_.littleEndianByteArrayParser,a,0)}if(void 0!==m&&this.module!==m){var i=t(136),l=_.sharedCopy(e,o,e.length-o),c=i.inflateRawSync(l),h=_.alloc(e,c.length+o);return e.copy(h,0,0,o),c.copy(h,o),new _.ByteStream(_.littleEndianByteArrayParser,h,0)}if("undefined"!=typeof pako){var u=e.slice(o),p=pako.inflateRaw(u),d=_.alloc(e,p.length+o);return d.set(e.slice(0,o),0),d.set(p,o),new _.ByteStream(_.littleEndianByteArrayParser,d,0)}throw"dicomParser.parseDicom: no inflater available to handle deflate transfer syntax"}return"1.2.840.10008.1.2.2"===r?new _.ByteStream(_.bigEndianByteArrayParser,e,o):new _.ByteStream(_.littleEndianByteArrayParser,e,o)}function i(a,t){for(var e in a.elements)a.elements.hasOwnProperty(e)&&(t.elements[e]=a.elements[e]);return void 0!==a.warnings&&(t.warnings=a.warnings.concat(t.warnings)),t}function l(e){var t=r(e),s=o(t),i=a(t,e.position),l=new _.DataSet(i.byteArrayParser,i.byteArray,{});l.warnings=i.warnings;try{s?_.parseDicomDataSetExplicit(l,i,i.byteArray.length,n):_.parseDicomDataSetImplicit(l,i,i.byteArray.length,n)}catch(e){throw{exception:e,dataSet:l}}return l}if(void 0===e)throw"dicomParser.parseDicom: missing required parameter 'byteArray'";return function(){var a=_.readPart10Header(e,n);return i(a,l(a))}()},_}(a);return a=function(e){"use strict";return void 0===e&&(e={}),e.version="1.7.3",e}(a=function(e){"use strict";return void 0===e&&(e={}),e.sharedCopy=function(a,t,e){if(void 0!==s&&a instanceof s)return a.slice(t,t+e);if(a instanceof Uint8Array)return new Uint8Array(a.buffer,a.byteOffset+t,e);throw"dicomParser.from: unknown type for byteArray"},e}(a=function(e){"use strict";return void 0===e&&(e={}),e.readTag=function(e){if(void 0===e)throw"dicomParser.readTag: missing required parameter 'byteStream'";return"x"+("00000000"+(256*(256*e.readUint16())+e.readUint16()).toString(16)).substr(-8)},e}(a=function(a){"use strict";return void 0===a&&(a={}),a.readSequenceItem=function(t){if(void 0===t)throw"dicomParser.readSequenceItem: missing required parameter 'byteStream'";var e={tag:a.readTag(t),length:t.readUint32(),dataOffset:t.position};if("xfffee000"!==e.tag)throw"dicomParser.readSequenceItem: item tag (FFFE,E000) not found at offset "+t.position;return e},a}(a=function(l){"use strict";function t(t,a){for(var o={},n;t.position<t.byteArray.length;)if(n=l.readDicomElementImplicit(t,void 0,a),o[n.tag]=n,"xfffee00d"===n.tag)return new l.DataSet(t.byteArrayParser,t.byteArray,o);return t.warnings.push("eof encountered before finding sequence item delimiter in sequence item of undefined length"),new l.DataSet(t.byteArrayParser,t.byteArray,o)}function s(e,a){var o=l.readSequenceItem(e);return 4294967295===o.length?(o.hadUndefinedLength=!0,o.dataSet=t(e,a),o.length=e.position-o.dataOffset):(o.dataSet=new l.DataSet(e.byteArrayParser,e.byteArray,{}),l.parseDicomDataSetImplicit(o.dataSet,e,e.position+o.length,{vrCallback:a})),o}function a(t,e,n){for(;t.position+4<=t.byteArray.length;){var r=l.readTag(t);if(t.seek(-4),"xfffee0dd"===r)return e.length=t.position-e.dataOffset,t.seek(8),e;var o=s(t,n);e.items.push(o)}t.warnings.push("eof encountered before finding sequence delimiter in sequence of undefined length"),e.length=t.byteArray.length-e.dataOffset}function o(a,t,e){for(var n=t.dataOffset+t.length,i;a.position<n;)i=s(a,e),t.items.push(i)}return void 0===l&&(l={}),l.readSequenceItemsImplicit=function(r,t,e){if(void 0===r)throw"dicomParser.readSequenceItemsImplicit: missing required parameter 'byteStream'";if(void 0===t)throw"dicomParser.readSequenceItemsImplicit: missing required parameter 'element'";t.items=[],4294967295===t.length?a(r,t,e):o(r,t,e)},l}(a=function(l){"use strict";function t(t,a){for(var o={},n;t.position<t.byteArray.length;)if(n=l.readDicomElementExplicit(t,a),o[n.tag]=n,"xfffee00d"===n.tag)return new l.DataSet(t.byteArrayParser,t.byteArray,o);return a.push("eof encountered before finding item delimiter tag while reading sequence item of undefined length"),new l.DataSet(t.byteArrayParser,t.byteArray,o)}function s(e,a){var o=l.readSequenceItem(e);return 4294967295===o.length?(o.hadUndefinedLength=!0,o.dataSet=t(e,a),o.length=e.position-o.dataOffset):(o.dataSet=new l.DataSet(e.byteArrayParser,e.byteArray,{}),l.parseDicomDataSetExplicit(o.dataSet,e,e.position+o.length)),o}function a(t,e,n){for(;t.position+4<=t.byteArray.length;){var r=l.readTag(t);if(t.seek(-4),"xfffee0dd"===r)return e.length=t.position-e.dataOffset,t.seek(8),e;var o=s(t,n);e.items.push(o)}n.push("eof encountered before finding sequence delimitation tag while reading sequence of undefined length"),e.length=t.position-e.dataOffset}function o(a,t,e){for(var n=t.dataOffset+t.length,i;a.position<n;)i=s(a,e),t.items.push(i)}return void 0===l&&(l={}),l.readSequenceItemsExplicit=function(r,t,e){if(void 0===r)throw"dicomParser.readSequenceItemsExplicit: missing required parameter 'byteStream'";if(void 0===t)throw"dicomParser.readSequenceItemsExplicit: missing required parameter 'element'";t.items=[],4294967295===t.length?a(r,t,e):o(r,t,e)},l}(a=function(l){return void 0===l&&(l={}),l.readPart10Header=function(t){function c(){if(i.seek(128),"DICM"!==i.readFixedString(4))throw"dicomParser.readPart10Header: DICM prefix not found at location 132 - this is not a valid DICOM P10 file."}if(void 0===t)throw"dicomParser.readPart10Header: missing required parameter 'byteArray'";var i=new l.ByteStream(l.littleEndianByteArrayParser,t);return function(){c();for(var t=[],e={};i.position<i.byteArray.length;){var r=i.position,o=l.readDicomElementExplicit(i,t);if("x0002ffff"<o.tag){i.position=r;break}o.parser=l.littleEndianByteArrayParser,e[o.tag]=o}var a=new l.DataSet(i.byteArrayParser,i.byteArray,e);return a.warnings=i.warnings,a.position=i.position,a}()},l}(a=function(_){"use strict";function t(a,t,o){for(var n=0,i=t;i<t+o;i++)n+=a[i].length;return n}return void 0===_&&(_={}),_.readEncapsulatedPixelDataFromFragments=function(e,n,i,r,o){if(r=r||1,o=o||n.fragments,void 0===e)throw"dicomParser.readEncapsulatedPixelDataFromFragments: missing required parameter 'dataSet'";if(void 0===n)throw"dicomParser.readEncapsulatedPixelDataFromFragments: missing required parameter 'pixelDataElement'";if(void 0===i)throw"dicomParser.readEncapsulatedPixelDataFromFragments: missing required parameter 'startFragmentIndex'";if(void 0===r)throw"dicomParser.readEncapsulatedPixelDataFromFragments: missing required parameter 'numFragments'";if("x7fe00010"!==n.tag)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'pixelDataElement' refers to non pixel data tag (expected tag = x7fe00010'";if(!0!==n.encapsulatedPixelData)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(!0!==n.hadUndefinedLength)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(void 0===n.basicOffsetTable)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(void 0===n.fragments)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(0>=n.fragments.length)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(0>i)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'startFragmentIndex' must be >= 0";if(i>=n.fragments.length)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'startFragmentIndex' must be < number of fragments";if(1>r)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'numFragments' must be > 0";if(i+r>n.fragments.length)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'startFragment' + 'numFragments' < number of fragments";var a=new _.ByteStream(e.byteArrayParser,e.byteArray,n.dataOffset),s=_.readSequenceItem(a);if("xfffee000"!==s.tag)throw"dicomParser.readEncapsulatedPixelData: missing basic offset table xfffee000";a.seek(s.length);var l=a.position;if(1===r)return _.sharedCopy(a.byteArray,l+o[i].offset+8,o[i].length);for(var c=t(o,i,r),h=_.alloc(a.byteArray,c),u=0,p=i;p<i+r;p++)for(var d=l+o[p].offset+8,g=0;g<o[p].length;g++)h[u++]=a.byteArray[d++];return h},_}(a=function(d){"use strict";function t(a,t){for(var o=0;o<a.length;o++)if(a[o].offset===t)return o}function e(a,t,e,l){if(a===t.length-1)return e.length-l;for(var i=t[a+1],r=l+1;r<e.length;r++)if(e[r].offset===i)return r-l;throw"dicomParser.calculateNumberOfFragmentsForFrame: could not find fragment with offset matching basic offset table"}return void 0===d&&(d={}),d.readEncapsulatedImageFrame=function(n,i,r,o,a){if(o=o||i.basicOffsetTable,a=a||i.fragments,void 0===n)throw"dicomParser.readEncapsulatedImageFrame: missing required parameter 'dataSet'";if(void 0===i)throw"dicomParser.readEncapsulatedImageFrame: missing required parameter 'pixelDataElement'";if(void 0===r)throw"dicomParser.readEncapsulatedImageFrame: missing required parameter 'frameIndex'";if(void 0===o)throw"dicomParser.readEncapsulatedImageFrame: parameter 'pixelDataElement' does not have basicOffsetTable";if("x7fe00010"!==i.tag)throw"dicomParser.readEncapsulatedImageFrame: parameter 'pixelDataElement' refers to non pixel data tag (expected tag = x7fe00010'";if(!0!==i.encapsulatedPixelData)throw"dicomParser.readEncapsulatedImageFrame: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(!0!==i.hadUndefinedLength)throw"dicomParser.readEncapsulatedImageFrame: parameter 'pixelDataElement' refers to pixel data element that does not have undefined length";if(void 0===i.fragments)throw"dicomParser.readEncapsulatedImageFrame: parameter 'pixelDataElement' refers to pixel data element that does not have fragments";if(0===o.length)throw"dicomParser.readEncapsulatedImageFrame: basicOffsetTable has zero entries";if(0>r)throw"dicomParser.readEncapsulatedImageFrame: parameter 'frameIndex' must be >= 0";if(r>=o.length)throw"dicomParser.readEncapsulatedImageFrame: parameter 'frameIndex' must be < basicOffsetTable.length";var s=t(a,o[r]);if(void 0===s)throw"dicomParser.readEncapsulatedImageFrame: unable to find fragment that matches basic offset table entry";var l=e(r,o,a,s);return d.readEncapsulatedPixelDataFromFragments(n,i,s,l,a)},d}(a=function(a){"use strict";function t(t,o,n){if(void 0!==n)return"SQ"===n(t.tag);if(o.position+4<=o.byteArray.length){var i=a.readTag(o);return o.seek(-4),"xfffee000"===i||"xfffee0dd"===i}return o.warnings.push("eof encountered before finding sequence item tag or sequence delimiter tag in peeking to determine VR"),!1}return void 0===a&&(a={}),a.readDicomElementImplicit=function(e,n,i){if(void 0===e)throw"dicomParser.readDicomElementImplicit: missing required parameter 'byteStream'";var r={tag:a.readTag(e),length:e.readUint32(),dataOffset:e.position};return 4294967295===r.length&&(r.hadUndefinedLength=!0),r.tag===n?r:t(r,e,i)?(a.readSequenceItemsImplicit(e,r),r):r.hadUndefinedLength?(a.findItemDelimitationItemAndSetElementLength(e,r),r):(e.seek(r.length),r)},a}(a=function(a){"use strict";function t(e){return"OB"===e||"OW"===e||"SQ"===e||"OF"===e||"UT"===e||"UN"===e?4:2}return void 0===a&&(a={}),a.readDicomElementExplicit=function(e,n,i){if(void 0===e)throw"dicomParser.readDicomElementExplicit: missing required parameter 'byteStream'";var r={tag:a.readTag(e),vr:e.readFixedString(2)};return 2===t(r.vr)?(r.length=e.readUint16(),r.dataOffset=e.position):(e.seek(2),r.length=e.readUint32(),r.dataOffset=e.position),4294967295===r.length&&(r.hadUndefinedLength=!0),r.tag===i?r:"SQ"===r.vr?(a.readSequenceItemsExplicit(e,r,n),r):4294967295===r.length?"x7fe00010"===r.tag?(a.findEndOfEncapsulatedElement(e,r,n),r):"UN"===r.vr?(a.findAndSetUNElementLength(e,r),r):(a.readSequenceItemsImplicit(e,r),r):(e.seek(r.length),r)},a}(a=function(l){"use strict";return void 0===l&&(l={}),l.parseDicomDataSetExplicit=function(t,e,n,i){if(n=void 0===n?e.byteArray.length:n,i=i||{},void 0===e)throw"dicomParser.parseDicomDataSetExplicit: missing required parameter 'byteStream'";if(n<e.position||n>e.byteArray.length)throw"dicomParser.parseDicomDataSetExplicit: invalid value for parameter 'maxPosition'";for(var r=t.elements,o;e.position<n;)if(o=l.readDicomElementExplicit(e,t.warnings,i.untilTag),r[o.tag]=o,o.tag===i.untilTag)return;if(e.position>n)throw"dicomParser:parseDicomDataSetExplicit: buffer overrun"},l.parseDicomDataSetImplicit=function(t,e,n,i){if(n=void 0===n?t.byteArray.length:n,i=i||{},void 0===e)throw"dicomParser.parseDicomDataSetImplicit: missing required parameter 'byteStream'";if(n<e.position||n>e.byteArray.length)throw"dicomParser.parseDicomDataSetImplicit: invalid value for parameter 'maxPosition'";for(var r=t.elements,o;e.position<n;)if(o=l.readDicomElementImplicit(e,i.untilTag,i.vrCallback),r[o.tag]=o,o.tag===i.untilTag)return},l}(a=function(e){"use strict";return void 0===e&&(e={}),e.littleEndianByteArrayParser={readUint16:function(a,t){if(0>t)throw"littleEndianByteArrayParser.readUint16: position cannot be less than 0";if(t+2>a.length)throw"littleEndianByteArrayParser.readUint16: attempt to read past end of buffer";return a[t]+256*a[t+1]},readInt16:function(a,t){if(0>t)throw"littleEndianByteArrayParser.readInt16: position cannot be less than 0";if(t+2>a.length)throw"littleEndianByteArrayParser.readInt16: attempt to read past end of buffer";var e=a[t]+(a[t+1]<<8);return 32768&e&&(e=e-65535-1),e},readUint32:function(a,t){if(0>t)throw"littleEndianByteArrayParser.readUint32: position cannot be less than 0";if(t+4>a.length)throw"littleEndianByteArrayParser.readUint32: attempt to read past end of buffer";return a[t]+256*a[t+1]+256*(256*a[t+2])+256*(256*(256*a[t+3]))},readInt32:function(a,t){if(0>t)throw"littleEndianByteArrayParser.readInt32: position cannot be less than 0";if(t+4>a.length)throw"littleEndianByteArrayParser.readInt32: attempt to read past end of buffer";return a[t]+(a[t+1]<<8)+(a[t+2]<<16)+(a[t+3]<<24)},readFloat:function(a,t){if(0>t)throw"littleEndianByteArrayParser.readFloat: position cannot be less than 0";if(t+4>a.length)throw"littleEndianByteArrayParser.readFloat: attempt to read past end of buffer";var e=new Uint8Array(4);return e[0]=a[t],e[1]=a[t+1],e[2]=a[t+2],e[3]=a[t+3],new Float32Array(e.buffer)[0]},readDouble:function(a,t){if(0>t)throw"littleEndianByteArrayParser.readDouble: position cannot be less than 0";if(t+8>a.length)throw"littleEndianByteArrayParser.readDouble: attempt to read past end of buffer";var e=new Uint8Array(8);return e[0]=a[t],e[1]=a[t+1],e[2]=a[t+2],e[3]=a[t+3],e[4]=a[t+4],e[5]=a[t+5],e[6]=a[t+6],e[7]=a[t+7],new Float64Array(e.buffer)[0]}},e}(a=function(e){"use strict";return void 0===e&&(e={}),e.findItemDelimitationItemAndSetElementLength=function(a,t){if(void 0===a)throw"dicomParser.readDicomElementImplicit: missing required parameter 'byteStream'";for(var e=a.byteArray.length-8;a.position<=e;)if(65534===a.readUint16()&&57357===a.readUint16())return 0!==a.readUint32()&&a.warnings("encountered non zero length following item delimiter at position"+a.position-4+" while reading element of undefined length with tag ' + element.tag"),void(t.length=a.position-t.dataOffset);t.length=a.byteArray.length-t.dataOffset,a.seek(a.byteArray.length-a.position)},e}(a=function(d){"use strict";return void 0===d&&(d={}),d.findEndOfEncapsulatedElement=function(t,e,n){if(void 0===t)throw"dicomParser.findEndOfEncapsulatedElement: missing required parameter 'byteStream'";if(void 0===e)throw"dicomParser.findEndOfEncapsulatedElement: missing required parameter 'element'";if(e.encapsulatedPixelData=!0,e.basicOffsetTable=[],e.fragments=[],"xfffee000"!==d.readTag(t))throw"dicomParser.findEndOfEncapsulatedElement: basic offset table not found";for(var i=t.readUint32()/4,r=0,o;r<i;r++)o=t.readUint32(),e.basicOffsetTable.push(o);for(var a=t.position;t.position<t.byteArray.length;){var s=d.readTag(t),l=t.readUint32();if("xfffee0dd"===s)return t.seek(l),void(e.length=t.position-e.dataOffset);if("xfffee000"!==s)return n&&n.push("unexpected tag "+s+" while searching for end of pixel data element with undefined length"),l>t.byteArray.length-t.position&&(l=t.byteArray.length-t.position),e.fragments.push({offset:t.position-a-8,position:t.position,length:l}),t.seek(l),void(e.length=t.position-e.dataOffset);e.fragments.push({offset:t.position-a-8,position:t.position,length:l}),t.seek(l)}n&&n.push("pixel data element "+e.tag+" missing sequence delimiter tag xfffee0dd")},d}(a=function(e){"use strict";return void 0===e&&(e={}),e.findAndSetUNElementLength=function(a,t){if(void 0===a)throw"dicomParser.findAndSetUNElementLength: missing required parameter 'byteStream'";for(var e=a.byteArray.length-8;a.position<=e;)if(65534===a.readUint16()&&57565===a.readUint16())return 0!==a.readUint32()&&a.warnings("encountered non zero length following item delimiter at position"+a.position-4+" while reading element of undefined length with tag ' + element.tag"),void(t.length=a.position-t.dataOffset);t.length=a.byteArray.length-t.dataOffset,a.seek(a.byteArray.length-a.position)},e}(a=function(a){"use strict";function o(a,t){return void 0===a.parser?t:a.parser}return void 0===a&&(a={}),a.DataSet=function(a,t,e){this.byteArrayParser=a,this.byteArray=t,this.elements=e},a.DataSet.prototype.uint16=function(e,t){var a=this.elements[e];if(t=void 0===t?0:t,a&&0!==a.length)return o(a,this.byteArrayParser).readUint16(this.byteArray,a.dataOffset+2*t)},a.DataSet.prototype.int16=function(e,t){var a=this.elements[e];if(t=void 0===t?0:t,a&&0!==a.length)return o(a,this.byteArrayParser).readInt16(this.byteArray,a.dataOffset+2*t)},a.DataSet.prototype.uint32=function(e,t){var a=this.elements[e];if(t=void 0===t?0:t,a&&0!==a.length)return o(a,this.byteArrayParser).readUint32(this.byteArray,a.dataOffset+4*t)},a.DataSet.prototype.int32=function(e,t){var a=this.elements[e];if(t=void 0===t?0:t,a&&0!==a.length)return o(a,this.byteArrayParser).readInt32(this.byteArray,a.dataOffset+4*t)},a.DataSet.prototype.float=function(e,t){var a=this.elements[e];if(t=void 0===t?0:t,a&&0!==a.length)return o(a,this.byteArrayParser).readFloat(this.byteArray,a.dataOffset+4*t)},a.DataSet.prototype.double=function(e,t){var a=this.elements[e];if(t=void 0===t?0:t,a&&0!==a.length)return o(a,this.byteArrayParser).readDouble(this.byteArray,a.dataOffset+8*t)},a.DataSet.prototype.numStringValues=function(t){var e=this.elements[t];if(e&&0<e.length){var o=a.readFixedString(this.byteArray,e.dataOffset,e.length).match(/\\/g);return null===o?1:o.length+1}},a.DataSet.prototype.string=function(t,e){var o=this.elements[t];if(o&&0<o.length){var n=a.readFixedString(this.byteArray,o.dataOffset,o.length);return 0<=e?n.split("\\")[e].trim():n.trim()}},a.DataSet.prototype.text=function(t,e){var o=this.elements[t];if(o&&0<o.length){var n=a.readFixedString(this.byteArray,o.dataOffset,o.length);return 0<=e?n.split("\\")[e].replace(/ +$/,""):n.replace(/ +$/,"")}},a.DataSet.prototype.floatString=function(a,t){var e=this.elements[a];if(e&&0<e.length){t=void 0===t?0:t;var o=this.string(a,t);if(void 0!==o)return parseFloat(o)}},a.DataSet.prototype.intString=function(a,t){var e=this.elements[a];if(e&&0<e.length){t=void 0===t?0:t;var o=this.string(a,t);if(void 0!==o)return parseInt(o)}},a}(a=function(a){"use strict";return void 0===a&&(a={}),a.ByteStream=function(a,t,e){if(void 0===a)throw"dicomParser.ByteStream: missing required parameter 'byteArrayParser'";if(void 0===t)throw"dicomParser.ByteStream: missing required parameter 'byteArray'";if(!1==t instanceof Uint8Array&&!1==t instanceof s)throw"dicomParser.ByteStream: parameter byteArray is not of type Uint8Array or Buffer";if(0>e)throw"dicomParser.ByteStream: parameter 'position' cannot be less than 0";if(e>=t.length)throw"dicomParser.ByteStream: parameter 'position' cannot be greater than or equal to 'byteArray' length";this.byteArrayParser=a,this.byteArray=t,this.position=e||0,this.warnings=[]},a.ByteStream.prototype.seek=function(e){if(0>this.position+e)throw"dicomParser.ByteStream.prototype.seek: cannot seek to position < 0";this.position+=e},a.ByteStream.prototype.readByteStream=function(t){if(this.position+t>this.byteArray.length)throw"dicomParser.ByteStream.prototype.readByteStream: readByteStream - buffer overread";var e=a.sharedCopy(this.byteArray,this.position,t);return this.position+=t,new a.ByteStream(this.byteArrayParser,e)},a.ByteStream.prototype.readUint16=function(){var e=this.byteArrayParser.readUint16(this.byteArray,this.position);return this.position+=2,e},a.ByteStream.prototype.readUint32=function(){var e=this.byteArrayParser.readUint32(this.byteArray,this.position);return this.position+=4,e},a.ByteStream.prototype.readFixedString=function(t){var e=a.readFixedString(this.byteArray,this.position,t);return this.position+=t,e},a}(a=function(e){"use strict";return void 0===e&&(e={}),e.readFixedString=function(a,t,e){if(0>e)throw"dicomParser.readFixedString - length cannot be less than 0";if(t+e>a.length)throw"dicomParser.readFixedString: attempt to read past end of buffer";for(var n="",r=0,o;r<e;r++){if(0===(o=a[t+r]))return t+=e,n;n+=F(o)}return n},e}(a=function(e){"use strict";return void 0===e&&(e={}),e.bigEndianByteArrayParser={readUint16:function(a,t){if(0>t)throw"bigEndianByteArrayParser.readUint16: position cannot be less than 0";if(t+2>a.length)throw"bigEndianByteArrayParser.readUint16: attempt to read past end of buffer";return(a[t]<<8)+a[t+1]},readInt16:function(a,t){if(0>t)throw"bigEndianByteArrayParser.readInt16: position cannot be less than 0";if(t+2>a.length)throw"bigEndianByteArrayParser.readInt16: attempt to read past end of buffer";var e=(a[t]<<8)+a[t+1];return 32768&e&&(e=e-65535-1),e},readUint32:function(a,t){if(0>t)throw"bigEndianByteArrayParser.readUint32: position cannot be less than 0";if(t+4>a.length)throw"bigEndianByteArrayParser.readUint32: attempt to read past end of buffer";return 256*(256*(256*a[t]+a[t+1])+a[t+2])+a[t+3]},readInt32:function(a,t){if(0>t)throw"bigEndianByteArrayParser.readInt32: position cannot be less than 0";if(t+4>a.length)throw"bigEndianByteArrayParser.readInt32: attempt to read past end of buffer";return(a[t]<<24)+(a[t+1]<<16)+(a[t+2]<<8)+a[t+3]},readFloat:function(a,t){if(0>t)throw"bigEndianByteArrayParser.readFloat: position cannot be less than 0";if(t+4>a.length)throw"bigEndianByteArrayParser.readFloat: attempt to read past end of buffer";var e=new Uint8Array(4);return e[3]=a[t],e[2]=a[t+1],e[1]=a[t+2],e[0]=a[t+3],new Float32Array(e.buffer)[0]},readDouble:function(a,t){if(0>t)throw"bigEndianByteArrayParser.readDouble: position cannot be less than 0";if(t+8>a.length)throw"bigEndianByteArrayParser.readDouble: attempt to read past end of buffer";var e=new Uint8Array(8);return e[7]=a[t],e[6]=a[t+1],e[5]=a[t+2],e[4]=a[t+3],e[3]=a[t+4],e[2]=a[t+5],e[1]=a[t+6],e[0]=a[t+7],new Float64Array(e.buffer)[0]}},e}(a=function(e){"use strict";return void 0===e&&(e={}),e.alloc=function(a,t){if(void 0!==s&&a instanceof s)return s.alloc(t);if(a instanceof Uint8Array)return new Uint8Array(t);throw"dicomParser.alloc: unknown type for byteArray"},e}(a=function(a){"use strict";void 0===a&&(a={});var t=!1;return a.readEncapsulatedPixelData=function(e,o,n){if(t||(t=!0,console&&console.log&&console.log("WARNING: dicomParser.readEncapsulatedPixelData() has been deprecated")),void 0===e)throw"dicomParser.readEncapsulatedPixelData: missing required parameter 'dataSet'";if(void 0===o)throw"dicomParser.readEncapsulatedPixelData: missing required parameter 'element'";if(void 0===n)throw"dicomParser.readEncapsulatedPixelData: missing required parameter 'frame'";if("x7fe00010"!==o.tag)throw"dicomParser.readEncapsulatedPixelData: parameter 'element' refers to non pixel data tag (expected tag = x7fe00010'";if(!0!==o.encapsulatedPixelData)throw"dicomParser.readEncapsulatedPixelData: parameter 'element' refers to pixel data element that does not have encapsulated pixel data";if(!0!==o.hadUndefinedLength)throw"dicomParser.readEncapsulatedPixelData: parameter 'element' refers to pixel data element that does not have encapsulated pixel data";if(void 0===o.basicOffsetTable)throw"dicomParser.readEncapsulatedPixelData: parameter 'element' refers to pixel data element that does not have encapsulated pixel data";if(void 0===o.fragments)throw"dicomParser.readEncapsulatedPixelData: parameter 'element' refers to pixel data element that does not have encapsulated pixel data";if(0>n)throw"dicomParser.readEncapsulatedPixelData: parameter 'frame' must be >= 0";return 0===o.basicOffsetTable.length?a.readEncapsulatedPixelDataFromFragments(e,o,0,o.fragments.length):a.readEncapsulatedImageFrame(e,o,n)},a}(a=function(a){"use strict";void 0===a&&(a={});var o={AE:!0,AS:!0,AT:!1,CS:!0,DA:!0,DS:!0,DT:!0,FL:!1,FD:!1,IS:!0,LO:!0,LT:!0,OB:!1,OD:!1,OF:!1,OW:!1,PN:!0,SH:!0,SL:!1,SQ:!1,SS:!1,ST:!0,TM:!0,UI:!0,UL:!1,UN:void 0,UR:!0,US:!1,UT:!0};return a.isStringVr=function(e){return o[e]},a.isPrivateTag=function(e){return 1==parseInt(e[4])%2},a.parsePN=function(a){if(void 0!==a){var t=a.split("^");return{familyName:t[0],givenName:t[1],middleName:t[2],prefix:t[3],suffix:t[4]}}},a}(a=function(e){"use strict";return void 0===e&&(e={}),e.parseTM=function(a,t){if(2<=a.length){var e=parseInt(a.substring(0,2),10),l=4<=a.length?parseInt(a.substring(2,4),10):void 0,s=6<=a.length?parseInt(a.substring(4,6),10):void 0,c=8<=a.length?parseInt(a.substring(7,13),10):void 0;if(t&&(isNaN(e)||void 0!==l&&isNaN(l)||void 0!==s&&isNaN(s)||void 0!==c&&isNaN(c)||0>e||23<e||l&&(0>l||59<l)||s&&(0>s||59<s)||c&&(0>c||999999<c)))throw"invalid TM '"+a+"'";return{hours:e,minutes:l,seconds:s,fractionalSeconds:c}}if(t)throw"invalid TM '"+a+"'"},e}(a=function(a){"use strict";function o(a,t){return 2===a?0==t%4&&t%100||0==t%400?29:28:9===a||4===a||6===a||11===a?30:31}function l(e,t,a){return!isNaN(a)&&0<t&&12>=t&&0<e&&e<=o(t,a)}return void 0===a&&(a={}),a.parseDA=function(a,t){if(a&&8===a.length){var e=parseInt(a.substring(0,4),10),n=parseInt(a.substring(4,6),10),s=parseInt(a.substring(6,8),10);if(t&&!0!==l(s,n,e))throw"invalid DA '"+a+"'";return{year:e,month:n,day:s}}if(t)throw"invalid DA '"+a+"'"},a}(a=function(l){"use strict";return void 0===l&&(l={}),l.explicitElementToString=function(c,e){function t(e,t){for(var a="",n=0;n<e;n++)0!==n&&(a+="/"),a+=t.call(c,o,n).toString();return a}if(void 0===c||void 0===e)throw"dicomParser.explicitElementToString: missing required parameters";if(void 0===e.vr)throw"dicomParser.explicitElementToString: cannot convert implicit element to string";var n=e.vr,o=e.tag,a;if(!0===l.isStringVr(n))a=c.string(o);else{if("AT"==n){var r=c.uint32(o);return void 0===r?void 0:(0>r&&(r=4294967295+r+1),"x"+r.toString(16).toUpperCase())}"US"==n?a=t(e.length/2,c.uint16):"SS"===n?a=t(e.length/2,c.int16):"UL"==n?a=t(e.length/4,c.uint32):"SL"===n?a=t(e.length/4,c.int32):"FD"==n?a=t(e.length/8,c.double):"FL"==n&&(a=t(e.length/4,c.float))}return a},l}(a=function(c){"use strict";return void 0===c&&(c={}),c.explicitDataSetToJS=function(t,e){if(void 0===t)throw"dicomParser.explicitDataSetToJS: missing required parameter dataSet";e=e||{omitPrivateAttibutes:!0,maxElementLength:128};var n={};for(var i in t.elements){var r=t.elements[i];if(!0!==e.omitPrivateAttibutes||!c.isPrivateTag(i))if(r.items){for(var o=[],a=0;a<r.items.length;a++)o.push(c.explicitDataSetToJS(r.items[a].dataSet,e));n[i]=o}else{var s;s=void 0,r.length<e.maxElementLength&&(s=c.explicitElementToString(t,r)),n[i]=void 0===s?{dataOffset:r.dataOffset,length:r.length}:s}}return n},c}(a=function(a){"use strict";function o(a,t){return 255===a.byteArray[t]&&217===a.byteArray[t+1]}function l(e,t,a){var i=t.fragments[a];return o(e,i.position+i.length-2)||o(e,i.position+i.length-3)}function n(a,t,e){for(var o=e;o<t.fragments.length;o++)if(l(a,t,o))return o}return void 0===a&&(a={}),a.createJPEGBasicOffsetTable=function(i,t,e){if(void 0===i)throw"dicomParser.createJPEGBasicOffsetTable: missing required parameter dataSet";if(void 0===t)throw"dicomParser.createJPEGBasicOffsetTable: missing required parameter pixelDataElement";if("x7fe00010"!==t.tag)throw"dicomParser.createJPEGBasicOffsetTable: parameter 'pixelDataElement' refers to non pixel data tag (expected tag = x7fe00010'";if(!0!==t.encapsulatedPixelData)throw"dicomParser.createJPEGBasicOffsetTable: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(!0!==t.hadUndefinedLength)throw"dicomParser.createJPEGBasicOffsetTable: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(void 0===t.basicOffsetTable)throw"dicomParser.createJPEGBasicOffsetTable: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(void 0===t.fragments)throw"dicomParser.createJPEGBasicOffsetTable: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(0>=t.fragments.length)throw"dicomParser.createJPEGBasicOffsetTable: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(e&&0>=e.length)throw"dicomParser.createJPEGBasicOffsetTable: parameter 'fragments' must not be zero length";e=e||t.fragments;for(var l=[],r=0;;){l.push(t.fragments[r].offset);var o=n(i,t,r);if(void 0===o||o===t.fragments.length-1)return l;r=o+1}},a}(a))))))))))))))))))))))))))))})}).call(l,t(29)(a),t(5).Buffer)},function(n,t){"use strict";function d(a){var t=a.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");return"="===a[t-2]?2:"="===a[t-1]?1:0}function p(e){return o[63&e>>18]+o[63&e>>12]+o[63&e>>6]+o[63&e]}function e(r,t,e){for(var n=[],l=t,a;l<e;l+=3)a=(r[l]<<16)+(r[l+1]<<8)+r[l+2],n.push(p(a));return n.join("")}t.byteLength=function(e){return 3*e.length/4-d(e)},t.toByteArray=function(l){var t=l.length,c,e,n,r,o;r=d(l),o=new s(3*t/4-r),e=0<r?t-4:t;var a=0;for(c=0;c<e;c+=4)n=i[l.charCodeAt(c)]<<18|i[l.charCodeAt(c+1)]<<12|i[l.charCodeAt(c+2)]<<6|i[l.charCodeAt(c+3)],o[a++]=255&n>>16,o[a++]=255&n>>8,o[a++]=255&n;return 2===r?(n=i[l.charCodeAt(c)]<<2|i[l.charCodeAt(c+1)]>>4,o[a++]=255&n):1===r&&(n=i[l.charCodeAt(c)]<<10|i[l.charCodeAt(c+1)]<<4|i[l.charCodeAt(c+2)]>>2,o[a++]=255&n>>8,o[a++]=255&n),o},t.fromByteArray=function(a){for(var t=a.length,n=t%3,i="",r=[],s=0,l=t-n,c;s<l;s+=16383)r.push(e(a,s,s+16383>l?l:s+16383));return 1===n?(c=a[t-1],i+=o[c>>2],i+=o[63&c<<4],i+="=="):2===n&&(c=(a[t-2]<<8)+a[t-1],i+=o[c>>10],i+=o[63&c>>4],i+=o[63&c<<2],i+="="),r.push(i),r.join("")};for(var o=[],i=[],s="undefined"==typeof Uint8Array?Array:Uint8Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=0,l=a.length;r<l;++r)o[r]=a[r],i[a.charCodeAt(r)]=r;i[45]=62,i[95]=63},function(a,t){t.read=function(m,t,e,n,i){var r=8*i-n-1,s=(1<<r)-1,l=s>>1,c=-7,_=e?i-1:0,u=e?-1:1,p=m[t+_],d,o;for(_+=u,d=p&(1<<-c)-1,p>>=-c,c+=r;0<c;d=256*d+m[t+_],_+=u,c-=8);for(o=d&(1<<-c)-1,d>>=-c,c+=n;0<c;o=256*o+m[t+_],_+=u,c-=8);if(0===d)d=1-l;else{if(d===s)return o?NaN:1/0*(p?-1:1);o+=S(2,n),d-=l}return(p?-1:1)*o*S(2,d-n)},t.write=function(_,t,e,n,g,r){var y=8*r-g-1,c=(1<<y)-1,h=c>>1,u=23===g?5.960464477539063e-8-6.617444900424222e-24:0,p=n?0:r-1,d=n?1:-1,f=0>t||0===t&&0>1/t?1:0,m,b,s;for(t=N(t),isNaN(t)||t===1/0?(b=isNaN(t)?1:0,m=c):(m=B(i(t)/o),1>t*(s=S(2,-m))&&(m--,s*=2),2<=(t+=1<=m+h?u/s:u*S(2,1-h))*s&&(m++,s/=2),m+h>=c?(b=0,m=c):1<=m+h?(b=(t*s-1)*S(2,g),m+=h):(b=t*S(2,h-1)*S(2,g),m=0));8<=g;_[e+p]=255&b,p+=d,b/=256,g-=8);for(m=m<<g|b,y+=g;0<y;_[e+p]=255&m,p+=d,m/=256,y-=8);_[e+p-d]|=128*f}},function(e){var a={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==a.call(e)}},function(a,y,e){(function(b,x){function i(l,e,c){function n(){for(var e;null!==(e=l.read());)o.push(e),a+=e.length;l.once("readable",n)}function i(){var e=b.concat(o,a);o=[],c(null,e),l.close()}var o=[],a=0;l.on("error",function(e){l.removeListener("end",i),l.removeListener("readable",n),c(e)}),l.on("end",i),l.end(e),n()}function r(t,e){if("string"==typeof e&&(e=new b(e)),!b.isBuffer(e))throw new TypeError("Not a string or buffer");var a=d.Z_FINISH;return t._processChunk(e,a)}function o(e){return this instanceof o?void n.call(this,e,d.DEFLATE):new o(e)}function a(e){return this instanceof a?void n.call(this,e,d.INFLATE):new a(e)}function s(e){return this instanceof s?void n.call(this,e,d.GZIP):new s(e)}function l(e){return this instanceof l?void n.call(this,e,d.GUNZIP):new l(e)}function c(e){return this instanceof c?void n.call(this,e,d.DEFLATERAW):new c(e)}function h(e){return this instanceof h?void n.call(this,e,d.INFLATERAW):new h(e)}function u(e){return this instanceof u?void n.call(this,e,d.UNZIP):new u(e)}function n(e,n){if(this._opts=e=e||{},this._chunkSize=e.chunkSize||y.Z_DEFAULT_CHUNK,t.call(this,e),e.flush&&e.flush!==d.Z_NO_FLUSH&&e.flush!==d.Z_PARTIAL_FLUSH&&e.flush!==d.Z_SYNC_FLUSH&&e.flush!==d.Z_FULL_FLUSH&&e.flush!==d.Z_FINISH&&e.flush!==d.Z_BLOCK)throw new Error("Invalid flush flag: "+e.flush);if(this._flushFlag=e.flush||d.Z_NO_FLUSH,e.chunkSize&&(e.chunkSize<y.Z_MIN_CHUNK||e.chunkSize>y.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+e.chunkSize);if(e.windowBits&&(e.windowBits<y.Z_MIN_WINDOWBITS||e.windowBits>y.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+e.windowBits);if(e.level&&(e.level<y.Z_MIN_LEVEL||e.level>y.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+e.level);if(e.memLevel&&(e.memLevel<y.Z_MIN_MEMLEVEL||e.memLevel>y.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+e.memLevel);if(e.strategy&&e.strategy!=y.Z_FILTERED&&e.strategy!=y.Z_HUFFMAN_ONLY&&e.strategy!=y.Z_RLE&&e.strategy!=y.Z_FIXED&&e.strategy!=y.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+e.strategy);if(e.dictionary&&!b.isBuffer(e.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._binding=new d.Zlib(n);var l=this;this._hadError=!1,this._binding.onerror=function(e,t){l._binding=null,l._hadError=!0;var a=new Error(e);a.errno=t,a.code=y.codes[t],l.emit("error",a)};var r=y.Z_DEFAULT_COMPRESSION;"number"==typeof e.level&&(r=e.level);var o=y.Z_DEFAULT_STRATEGY;"number"==typeof e.strategy&&(o=e.strategy),this._binding.init(e.windowBits||y.Z_DEFAULT_WINDOWBITS,r,e.memLevel||y.Z_DEFAULT_MEMLEVEL,o,e.dictionary),this._buffer=new b(this._chunkSize),this._offset=0,this._closed=!1,this._level=r,this._strategy=o,this.once("end",this.close)}var t=e(137),d=e(146),p=e(71),v=e(72).ok;d.Z_MIN_WINDOWBITS=8,d.Z_MAX_WINDOWBITS=15,d.Z_DEFAULT_WINDOWBITS=15,d.Z_MIN_CHUNK=64,d.Z_MAX_CHUNK=1/0,d.Z_DEFAULT_CHUNK=16384,d.Z_MIN_MEMLEVEL=1,d.Z_MAX_MEMLEVEL=9,d.Z_DEFAULT_MEMLEVEL=8,d.Z_MIN_LEVEL=-1,d.Z_MAX_LEVEL=9,d.Z_DEFAULT_LEVEL=d.Z_DEFAULT_COMPRESSION,Object.keys(d).forEach(function(e){e.match(/^Z/)&&(y[e]=d[e])}),y.codes={Z_OK:d.Z_OK,Z_STREAM_END:d.Z_STREAM_END,Z_NEED_DICT:d.Z_NEED_DICT,Z_ERRNO:d.Z_ERRNO,Z_STREAM_ERROR:d.Z_STREAM_ERROR,Z_DATA_ERROR:d.Z_DATA_ERROR,Z_MEM_ERROR:d.Z_MEM_ERROR,Z_BUF_ERROR:d.Z_BUF_ERROR,Z_VERSION_ERROR:d.Z_VERSION_ERROR},Object.keys(y.codes).forEach(function(e){y.codes[y.codes[e]]=e}),y.Deflate=o,y.Inflate=a,y.Gzip=s,y.Gunzip=l,y.DeflateRaw=c,y.InflateRaw=h,y.Unzip=u,y.createDeflate=function(e){return new o(e)},y.createInflate=function(e){return new a(e)},y.createDeflateRaw=function(e){return new c(e)},y.createInflateRaw=function(e){return new h(e)},y.createGzip=function(e){return new s(e)},y.createGunzip=function(e){return new l(e)},y.createUnzip=function(e){return new u(e)},y.deflate=function(a,t,r){return"function"==typeof t&&(r=t,t={}),i(new o(t),a,r)},y.deflateSync=function(a,t){return r(new o(t),a)},y.gzip=function(a,t,o){return"function"==typeof t&&(o=t,t={}),i(new s(t),a,o)},y.gzipSync=function(a,t){return r(new s(t),a)},y.deflateRaw=function(a,t,o){return"function"==typeof t&&(o=t,t={}),i(new c(t),a,o)},y.deflateRawSync=function(a,t){return r(new c(t),a)},y.unzip=function(a,t,o){return"function"==typeof t&&(o=t,t={}),i(new u(t),a,o)},y.unzipSync=function(a,t){return r(new u(t),a)},y.inflate=function(o,t,r){return"function"==typeof t&&(r=t,t={}),i(new a(t),o,r)},y.inflateSync=function(o,t){return r(new a(t),o)},y.gunzip=function(a,t,o){return"function"==typeof t&&(o=t,t={}),i(new l(t),a,o)},y.gunzipSync=function(a,t){return r(new l(t),a)},y.inflateRaw=function(a,t,o){return"function"==typeof t&&(o=t,t={}),i(new h(t),a,o)},y.inflateRawSync=function(a,t){return r(new h(t),a)},p.inherits(n,t),n.prototype.params=function(e,t,a){if(e<y.Z_MIN_LEVEL||e>y.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+e);if(t!=y.Z_FILTERED&&t!=y.Z_HUFFMAN_ONLY&&t!=y.Z_RLE&&t!=y.Z_FIXED&&t!=y.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+t);if(this._level!==e||this._strategy!==t){var r=this;this.flush(d.Z_SYNC_FLUSH,function(){r._binding.params(e,t),r._hadError||(r._level=e,r._strategy=t,a&&a())})}else x.nextTick(a)},n.prototype.reset=function(){return this._binding.reset()},n.prototype._flush=function(t){this._transform(new b(0),"",t)},n.prototype.flush=function(t,a){var i=this._writableState;if(("function"==typeof t||void 0===t&&!a)&&(a=t,t=d.Z_FULL_FLUSH),i.ended)a&&x.nextTick(a);else if(i.ending)a&&this.once("end",a);else if(i.needDrain){var r=this;this.once("drain",function(){r.flush(a)})}else this._flushFlag=t,this.write(new b(0),"",a)},n.prototype.close=function(a){if(a&&x.nextTick(a),!this._closed){this._closed=!0,this._binding.close();var t=this;x.nextTick(function(){t.emit("close")})}},n.prototype._transform=function(t,l,n){var i=this._writableState,o=(i.ending||i.ended)&&(!t||i.length===t.length),a;return null!==!t||b.isBuffer(t)?void(o?a=d.Z_FINISH:(a=this._flushFlag,t.length>=i.length&&(this._flushFlag=this._opts.flush||d.Z_NO_FLUSH)),this._processChunk(t,a,n)):n(new Error("invalid input"))},n.prototype._processChunk=function(t,e,n){function g(i,p){if(!s._hadError){var d=o-p;if(v(0<=d,"have should not go down"),0<d){var h=s._buffer.slice(s._offset,s._offset+d);s._offset+=d,l?s.push(h):(_.push(h),u+=h.length)}if((0===p||s._offset>=s._chunkSize)&&(o=s._chunkSize,s._offset=0,s._buffer=new b(s._chunkSize)),0===p){if(a+=r-i,r=i,!l)return!0;var m=s._binding.write(e,t,a,r,s._buffer,s._offset,s._chunkSize);return m.callback=g,void(m.buffer=t)}if(!l)return!1;n()}}var r=t&&t.length,o=this._chunkSize-this._offset,a=0,s=this,l="function"==typeof n;if(!l){var _=[],u=0,p;this.on("error",function(e){p=e});do var h=this._binding.writeSync(e,t,a,r,this._buffer,this._offset,o);while(!this._hadError&&g(h[0],h[1]));if(this._hadError)throw p;var d=b.concat(_,u);return this.close(),d}var f=this._binding.write(e,t,a,r,this._buffer,this._offset,o);f.buffer=t,f.callback=g},p.inherits(o,n),p.inherits(a,n),p.inherits(s,n),p.inherits(l,n),p.inherits(c,n),p.inherits(h,n),p.inherits(u,n)}).call(y,e(5).Buffer,e(4))},function(a,t,e){a.exports=e(138).Transform},function(a,t,e){(t=a.exports=e(62)).Stream=t,t.Readable=t,t.Writable=e(65),t.Duplex=e(6),t.Transform=e(67),t.PassThrough=e(145)},function(e){var a={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==a.call(e)}},function(){},function(a,t,e){"use strict";function n(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function l(a,t,e){a.copy(t,e)}var r=e(27).Buffer;a.exports=function(){function e(){n(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(a){var o={data:a,next:null};0<this.length?this.tail.next=o:this.head=o,this.tail=o,++this.length},e.prototype.unshift=function(a){var o={data:a,next:this.head};0===this.length&&(this.tail=o),this.head=o,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(a){if(0===this.length)return"";for(var t=this.head,e=""+t.data;t=t.next;)e+=a+t.data;return e},e.prototype.concat=function(a){if(0===this.length)return r.alloc(0);if(1===this.length)return this.head.data;for(var t=r.allocUnsafe(a>>>0),e=this.head,o=0;e;)l(e.data,t,o),o+=e.data.length,e=e.next;return t},e}()},function(a,t,e){function o(a,t){this._id=a,this._clearFn=t}var n=Function.prototype.apply;t.setTimeout=function(){return new o(n.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new o(n.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(a,t){clearTimeout(a._idleTimeoutId),a._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(a){clearTimeout(a._idleTimeoutId);var t=a._idleTimeout;0<=t&&(a._idleTimeoutId=setTimeout(function(){a._onTimeout&&a._onTimeout()},t))},e(143),t.setImmediate=setImmediate,t.clearImmediate=clearImmediate},function(a,t,e){(function(a,r){!function(d,t){"use strict";function e(e){delete s[e]}function n(a){var o=a.callback,e=a.args;switch(e.length){case 0:o();break;case 1:o(e[0]);break;case 2:o(e[0],e[1]);break;case 3:o(e[0],e[1],e[2]);break;default:o.apply(t,e);}}function i(a){if(l)setTimeout(i,0,a);else{var t=s[a];if(t){l=!0;try{n(t)}finally{e(a),l=!1}}}}if(!d.setImmediate){var o=1,s={},l=!1,c=d.document,p=Object.getPrototypeOf&&Object.getPrototypeOf(d),u;p=p&&p.setTimeout?p:d,"[object process]"==={}.toString.call(d.process)?u=function(e){r.nextTick(function(){i(e)})}:function(){if(d.postMessage&&!d.importScripts){var t=!0,e=d.onmessage;return d.onmessage=function(){t=!1},d.postMessage("","*"),d.onmessage=e,t}}()?function(){var t="setImmediate$"+Math.random()+"$",e=function(e){e.source===d&&"string"==typeof e.data&&0===e.data.indexOf(t)&&i(+e.data.slice(t.length))};d.addEventListener?d.addEventListener("message",e,!1):d.attachEvent("onmessage",e),u=function(e){d.postMessage(t+e,"*")}}():d.MessageChannel?function(){var a=new MessageChannel;a.port1.onmessage=function(e){i(e.data)},u=function(t){a.port2.postMessage(t)}}():c&&"onreadystatechange"in c.createElement("script")?function(){var a=c.documentElement;u=function(t){var e=c.createElement("script");e.onreadystatechange=function(){i(t),e.onreadystatechange=null,a.removeChild(e),e=null},a.appendChild(e)}}():u=function(e){setTimeout(i,0,e)},p.setImmediate=function(a){"function"!=typeof a&&(a=new Function(""+a));for(var r=Array(arguments.length-1),l=0;l<r.length;l++)r[l]=arguments[l+1];var n={callback:a,args:r};return s[o]=n,u(o),o++},p.clearImmediate=e}}("undefined"==typeof self?void 0===a?this:a:self)}).call(t,e(1),e(4))},function(a,t,e){(function(o){function r(e){try{if(!o.localStorage)return!1}catch(e){return!1}var t=o.localStorage[e];return null!=t&&"true"===(t+"").toLowerCase()}a.exports=function(a,t){if(r("noDeprecation"))return a;var e=!1;return function(){if(!e){if(r("throwDeprecation"))throw new Error(t);r("traceDeprecation")?console.trace(t):console.warn(t),e=!0}return a.apply(this,arguments)}}}).call(t,e(1))},function(a,t,e){"use strict";function n(e){return this instanceof n?void i.call(this,e):new n(e)}a.exports=n;var i=e(67),r=e(12);r.inherits=e(13),r.inherits(n,i),n.prototype._transform=function(a,t,e){e(null,a)}},function(a,m,e){(function(d,_){function t(e){if(e<m.DEFLATE||e>m.UNZIP)throw new TypeError("Bad argument");this.mode=e,this.init_done=!1,this.write_in_progress=!1,this.pending_close=!1,this.windowBits=0,this.level=0,this.memLevel=0,this.strategy=0,this.dictionary=null}function i(a,t){for(var e=0;e<a.length;e++)this[t+e]=a[e]}var o=e(68),p=e(147),g=e(148),l=e(150),a=e(153);for(var r in a)m[r]=a[r];m.NONE=0,m.DEFLATE=1,m.INFLATE=2,m.GZIP=3,m.GUNZIP=4,m.DEFLATERAW=5,m.INFLATERAW=6,m.UNZIP=7,t.prototype.init=function(e,t,o,n){switch(this.windowBits=e,this.level=t,this.memLevel=o,this.strategy=n,this.mode!==m.GZIP&&this.mode!==m.GUNZIP||(this.windowBits+=16),this.mode===m.UNZIP&&(this.windowBits+=32),this.mode!==m.DEFLATERAW&&this.mode!==m.INFLATERAW||(this.windowBits=-this.windowBits),this.strm=new p,this.mode){case m.DEFLATE:case m.GZIP:case m.DEFLATERAW:r=g.deflateInit2(this.strm,this.level,m.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case m.INFLATE:case m.GUNZIP:case m.INFLATERAW:case m.UNZIP:var r=l.inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode);}r===m.Z_OK?(this.write_in_progress=!1,this.init_done=!0):this._error(r)},t.prototype.params=function(){throw new Error("deflateParams Not supported")},t.prototype._writeCheck=function(){if(!this.init_done)throw new Error("write before init");if(this.mode===m.NONE)throw new Error("already finalized");if(this.write_in_progress)throw new Error("write already in progress");if(this.pending_close)throw new Error("close is pending")},t.prototype.write=function(c,e,n,i,r,o,a){this._writeCheck(),this.write_in_progress=!0;var s=this;return d.nextTick(function(){s.write_in_progress=!1;var l=s._write(c,e,n,i,r,o,a);s.callback(l[0],l[1]),s.pending_close&&s.close()}),this},t.prototype.writeSync=function(l,t,e,n,i,r,o){return this._writeCheck(),this._write(l,t,e,n,i,r,o)},t.prototype._write=function(e,t,o,r,a,n,s){if(this.write_in_progress=!0,e!==m.Z_NO_FLUSH&&e!==m.Z_PARTIAL_FLUSH&&e!==m.Z_SYNC_FLUSH&&e!==m.Z_FULL_FLUSH&&e!==m.Z_FINISH&&e!==m.Z_BLOCK)throw new Error("Invalid flush value");null==t&&(t=new _(0),r=0,o=0),a.set=a._set?a._set:i;var c=this.strm;switch(c.avail_in=r,c.input=t,c.next_in=o,c.avail_out=s,c.output=a,c.next_out=n,this.mode){case m.DEFLATE:case m.GZIP:case m.DEFLATERAW:p=g.deflate(c,e);break;case m.UNZIP:case m.INFLATE:case m.GUNZIP:case m.INFLATERAW:var p=l.inflate(c,e);break;default:throw new Error("Unknown mode "+this.mode);}return p!==m.Z_STREAM_END&&p!==m.Z_OK&&this._error(p),this.write_in_progress=!1,[c.avail_in,c.avail_out]},t.prototype.close=function(){this.write_in_progress?this.pending_close=!0:(this.pending_close=!1,this.mode===m.DEFLATE||this.mode===m.GZIP||this.mode===m.DEFLATERAW?g.deflateEnd(this.strm):l.inflateEnd(this.strm),this.mode=m.NONE)},t.prototype.reset=function(){switch(this.mode){case m.DEFLATE:case m.DEFLATERAW:e=g.deflateReset(this.strm);break;case m.INFLATE:case m.INFLATERAW:var e=l.inflateReset(this.strm);}e!==m.Z_OK&&this._error(e)},t.prototype._error=function(e){this.onerror(o[e]+": "+this.strm.msg,e),this.write_in_progress=!1,this.pending_close&&this.close()},m.Zlib=t}).call(m,e(4),e(5).Buffer)},function(e){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},function(C,t,e){"use strict";function L(a,t){return a.msg=w[t],t}function i(e){return(e<<1)-(4<e?9:0)}function U(a){for(var t=a.length;0<=--t;)a[t]=0}function o(a){var t=a.state,e=t.pending;e>a.avail_out&&(e=a.avail_out),0!==e&&(y.arraySet(a.output,t.pending_buf,t.pending_out,e,a.next_out),a.next_out+=e,t.pending_out+=e,a.total_out+=e,a.avail_out-=e,t.pending-=e,0===t.pending&&(t.pending_out=0))}function V(a,t){b._tr_flush_block(a,0<=a.block_start?a.block_start:-1,a.strstart-a.block_start,t),a.block_start=a.strstart,o(a.strm)}function a(a,t){a.pending_buf[a.pending++]=t}function r(a,t){a.pending_buf[a.pending++]=255&t>>>8,a.pending_buf[a.pending++]=255&t}function l(a,t,e,o){var n=a.avail_in;return n>o&&(n=o),0===n?0:(a.avail_in-=n,y.arraySet(t,a.input,a.next_in,n,e),1===a.state.wrap?a.adler=x(a.adler,t,n,e):2===a.state.wrap&&(a.adler=v(a.adler,t,n,e)),a.next_in+=n,a.total_in+=n,n)}function s(m,t){var e=m.max_chain_length,r=m.strstart,o=m.prev_length,a=m.nice_match,s=m.strstart>m.w_size-J?m.strstart-(m.w_size-J):0,l=m.window,c=m.w_mask,_=m.prev,h=m.strstart+Z,p=l[r+o-1],d=l[r+o],g,n;m.prev_length>=m.good_match&&(e>>=2),a>m.lookahead&&(a=m.lookahead);do if(g=t,l[g+o]===d&&l[g+o-1]===p&&l[g]===l[r]&&l[++g]===l[r+1]){r+=2,g++;do;while(l[++r]===l[++g]&&l[++r]===l[++g]&&l[++r]===l[++g]&&l[++r]===l[++g]&&l[++r]===l[++g]&&l[++r]===l[++g]&&l[++r]===l[++g]&&l[++r]===l[++g]&&r<h);if(n=Z-(h-r),r=h-Z,n>o){if(m.match_start=t,o=n,n>=a)break;p=l[r+o-1],d=l[r+o]}}while((t=_[t&c])>s&&0!=--e);return o<=m.lookahead?o:m.lookahead}function j(s){var t=s.w_size,a,e,n,i,r;do{if(i=s.window_size-s.lookahead-s.strstart,s.strstart>=t+(t-J)){y.arraySet(s.window,s.window,t,t,0),s.match_start-=t,s.strstart-=t,s.block_start-=t,a=e=s.hash_size;do n=s.head[--a],s.head[a]=n>=t?n-t:0;while(--e);a=e=t;do n=s.prev[--a],s.prev[a]=n>=t?n-t:0;while(--e);i+=t}if(0===s.strm.avail_in)break;if(e=l(s.strm,s.window,s.strstart+s.lookahead,i),s.lookahead+=e,s.lookahead+s.insert>=Y)for(r=s.strstart-s.insert,s.ins_h=s.window[r],s.ins_h=(s.ins_h<<s.hash_shift^s.window[r+1])&s.hash_mask;s.insert&&(s.ins_h=(s.ins_h<<s.hash_shift^s.window[r+Y-1])&s.hash_mask,s.prev[r&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=r,r++,s.insert--,!(s.lookahead+s.insert<Y)););}while(s.lookahead<J&&0!==s.strm.avail_in)}function n(a,t){for(var e,o;;){if(a.lookahead<J){if(j(a),a.lookahead<J&&t===E)return re;if(0===a.lookahead)break}if(e=0,a.lookahead>=Y&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+Y-1])&a.hash_mask,e=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),0!==e&&a.strstart-e<=a.w_size-J&&(a.match_length=s(a,e)),!(a.match_length>=Y))o=b._tr_tally(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++;else if(o=b._tr_tally(a,a.strstart-a.match_start,a.match_length-Y),a.lookahead-=a.match_length,a.match_length<=a.max_lazy_match&&a.lookahead>=Y){a.match_length--;do a.strstart++,a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+Y-1])&a.hash_mask,e=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart;while(0!=--a.match_length);a.strstart++}else a.strstart+=a.match_length,a.match_length=0,a.ins_h=a.window[a.strstart],a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+1])&a.hash_mask;if(o&&(V(a,!1),0===a.strm.avail_out))return re}return a.insert=a.strstart<Y-1?a.strstart:Y-1,t===T?(V(a,!0),0===a.strm.avail_out?ie:le):a.last_lit&&(V(a,!1),0===a.strm.avail_out)?re:ne}function c(a,t){for(var e,o,n;;){if(a.lookahead<J){if(j(a),a.lookahead<J&&t===E)return re;if(0===a.lookahead)break}if(e=0,a.lookahead>=Y&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+Y-1])&a.hash_mask,e=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),a.prev_length=a.match_length,a.prev_match=a.match_start,a.match_length=Y-1,0!==e&&a.prev_length<a.max_lazy_match&&a.strstart-e<=a.w_size-J&&(a.match_length=s(a,e),5>=a.match_length&&(a.strategy===F||a.match_length===Y&&4096<a.strstart-a.match_start)&&(a.match_length=Y-1)),a.prev_length>=Y&&a.match_length<=a.prev_length){n=a.strstart+a.lookahead-Y,o=b._tr_tally(a,a.strstart-1-a.prev_match,a.prev_length-Y),a.lookahead-=a.prev_length-1,a.prev_length-=2;do++a.strstart<=n&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+Y-1])&a.hash_mask,e=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart);while(0!=--a.prev_length);if(a.match_available=0,a.match_length=Y-1,a.strstart++,o&&(V(a,!1),0===a.strm.avail_out))return re}else if(!a.match_available)a.match_available=1,a.strstart++,a.lookahead--;else if((o=b._tr_tally(a,0,a.window[a.strstart-1]))&&V(a,!1),a.strstart++,a.lookahead--,0===a.strm.avail_out)return re}return a.match_available&&(o=b._tr_tally(a,0,a.window[a.strstart-1]),a.match_available=0),a.insert=a.strstart<Y-1?a.strstart:Y-1,t===T?(V(a,!0),0===a.strm.avail_out?ie:le):a.last_lit&&(V(a,!1),0===a.strm.avail_out)?re:ne}function p(l,t){for(var e=l.window,a,n,i,r;;){if(l.lookahead<=Z){if(j(l),l.lookahead<=Z&&t===E)return re;if(0===l.lookahead)break}if(l.match_length=0,l.lookahead>=Y&&0<l.strstart&&(i=l.strstart-1,(n=e[i])===e[++i]&&n===e[++i]&&n===e[++i])){r=l.strstart+Z;do;while(n===e[++i]&&n===e[++i]&&n===e[++i]&&n===e[++i]&&n===e[++i]&&n===e[++i]&&n===e[++i]&&n===e[++i]&&i<r);l.match_length=Z-(r-i),l.match_length>l.lookahead&&(l.match_length=l.lookahead)}if(l.match_length>=Y?(a=b._tr_tally(l,1,l.match_length-Y),l.lookahead-=l.match_length,l.strstart+=l.match_length,l.match_length=0):(a=b._tr_tally(l,0,l.window[l.strstart]),l.lookahead--,l.strstart++),a&&(V(l,!1),0===l.strm.avail_out))return re}return l.insert=0,t===T?(V(l,!0),0===l.strm.avail_out?ie:le):l.last_lit&&(V(l,!1),0===l.strm.avail_out)?re:ne}function u(a,t){for(var e;;){if(0===a.lookahead&&(j(a),0===a.lookahead)){if(t===E)return re;break}if(a.match_length=0,e=b._tr_tally(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++,e&&(V(a,!1),0===a.strm.avail_out))return re}return a.insert=0,t===T?(V(a,!0),0===a.strm.avail_out?ie:le):a.last_lit&&(V(a,!1),0===a.strm.avail_out)?re:ne}function d(a,t,e,o,n){this.good_length=a,this.max_lazy=t,this.nice_length=e,this.max_chain=o,this.func=n}function m(e){e.window_size=2*e.w_size,U(e.head),e.max_lazy_match=se[e.level].max_lazy,e.good_match=se[e.level].good_length,e.nice_match=se[e.level].nice_length,e.max_chain_length=se[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=Y-1,e.match_available=0,e.ins_h=0}function _(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=B,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new y.Buf16(2*X),this.dyn_dtree=new y.Buf16(2*(2*H+1)),this.bl_tree=new y.Buf16(2*(2*W+1)),U(this.dyn_ltree),U(this.dyn_dtree),U(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new y.Buf16(q+1),this.heap=new y.Buf16(2*G+1),U(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new y.Buf16(2*G+1),U(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function h(a){var t;return a&&a.state?(a.total_in=a.total_out=0,a.data_type=N,t=a.state,t.pending=0,t.pending_out=0,0>t.wrap&&(t.wrap=-t.wrap),t.status=t.wrap?K:ae,a.adler=2===t.wrap?0:1,t.last_flush=E,b._tr_init(t),P):L(a,I)}function g(a){var t=h(a);return t===P&&m(a.state),t}function f(i,c,e,n,d,o){if(!i)return I;var a=1;if(c===D&&(c=6),0>n?(a=0,n=-n):15<n&&(a=2,n-=16),1>d||d>z||e!==B||8>n||15<n||0>c||9<c||0>o||o>O)return L(i,I);8===n&&(n=9);var s=new _;return i.state=s,s.strm=i,s.wrap=a,s.gzhead=null,s.w_bits=n,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=d+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+Y-1)/Y),s.window=new y.Buf8(2*s.w_size),s.head=new y.Buf16(s.hash_size),s.prev=new y.Buf16(s.w_size),s.lit_bufsize=1<<d+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new y.Buf8(s.pending_buf_size),s.d_buf=1*s.lit_bufsize,s.l_buf=3*s.lit_bufsize,s.level=c,s.strategy=o,s.method=e,g(i)}var y=e(17),b=e(149),x=e(69),v=e(70),w=e(68),E=0,T=4,M=5,P=0,A=1,I=-2,R=-5,D=-1,F=1,k=2,O=4,N=2,B=8,z=9,G=286,H=30,W=19,X=2*G+1,q=15,Y=3,Z=258,J=Z+Y+1,K=42,Q=69,$=73,ee=91,te=103,ae=113,oe=666,re=1,ne=2,ie=3,le=4,se;se=[new d(0,0,0,0,function(a,t){var e=65535;for(e>a.pending_buf_size-5&&(e=a.pending_buf_size-5);;){if(1>=a.lookahead){if(j(a),0===a.lookahead&&t===E)return re;if(0===a.lookahead)break}a.strstart+=a.lookahead,a.lookahead=0;var o=a.block_start+e;if((0===a.strstart||a.strstart>=o)&&(a.lookahead=a.strstart-o,a.strstart=o,V(a,!1),0===a.strm.avail_out))return re;if(a.strstart-a.block_start>=a.w_size-J&&(V(a,!1),0===a.strm.avail_out))return re}return a.insert=0,t===T?(V(a,!0),0===a.strm.avail_out?ie:le):(a.strstart>a.block_start&&(V(a,!1),a.strm.avail_out),re)}),new d(4,4,8,4,n),new d(4,5,16,8,n),new d(4,6,32,32,n),new d(4,4,16,16,c),new d(8,16,32,32,c),new d(8,16,128,128,c),new d(8,32,128,256,c),new d(32,128,258,1024,c),new d(32,258,258,4096,c)],t.deflateInit=function(a,t){return f(a,t,B,15,8,0)},t.deflateInit2=f,t.deflateReset=g,t.deflateResetKeep=h,t.deflateSetHeader=function(a,t){return a&&a.state?2===a.state.wrap?(a.state.gzhead=t,P):I:I},t.deflate=function(l,c){var e,n,s,m;if(!l||!l.state||c>M||0>c)return l?L(l,I):I;if(n=l.state,!l.output||!l.input&&0!==l.avail_in||n.status===oe&&c!==T)return L(l,0===l.avail_out?R:I);if(n.strm=l,e=n.last_flush,n.last_flush=c,n.status===K)if(2===n.wrap)l.adler=0,a(n,31),a(n,139),a(n,8),n.gzhead?(a(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),a(n,255&n.gzhead.time),a(n,255&n.gzhead.time>>8),a(n,255&n.gzhead.time>>16),a(n,255&n.gzhead.time>>24),a(n,9===n.level?2:n.strategy>=k||2>n.level?4:0),a(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(a(n,255&n.gzhead.extra.length),a(n,255&n.gzhead.extra.length>>8)),n.gzhead.hcrc&&(l.adler=v(l.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=Q):(a(n,0),a(n,0),a(n,0),a(n,0),a(n,0),a(n,9===n.level?2:n.strategy>=k||2>n.level?4:0),a(n,3),n.status=ae);else{var _=B+(n.w_bits-8<<4)<<8;_|=(n.strategy>=k||2>n.level?0:6>n.level?1:6===n.level?2:3)<<6,0!==n.strstart&&(_|=32),_+=31-_%31,n.status=ae,r(n,_),0!==n.strstart&&(r(n,l.adler>>>16),r(n,65535&l.adler)),l.adler=1}if(n.status===Q)if(n.gzhead.extra){for(s=n.pending;n.gzindex<(65535&n.gzhead.extra.length)&&(n.pending!==n.pending_buf_size||(n.gzhead.hcrc&&n.pending>s&&(l.adler=v(l.adler,n.pending_buf,n.pending-s,s)),o(l),s=n.pending,n.pending!==n.pending_buf_size));)a(n,255&n.gzhead.extra[n.gzindex]),n.gzindex++;n.gzhead.hcrc&&n.pending>s&&(l.adler=v(l.adler,n.pending_buf,n.pending-s,s)),n.gzindex===n.gzhead.extra.length&&(n.gzindex=0,n.status=$)}else n.status=$;if(n.status===$)if(n.gzhead.name){s=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>s&&(l.adler=v(l.adler,n.pending_buf,n.pending-s,s)),o(l),s=n.pending,n.pending===n.pending_buf_size)){m=1;break}m=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,a(n,m)}while(0!==m);n.gzhead.hcrc&&n.pending>s&&(l.adler=v(l.adler,n.pending_buf,n.pending-s,s)),0===m&&(n.gzindex=0,n.status=ee)}else n.status=ee;if(n.status===ee)if(n.gzhead.comment){s=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>s&&(l.adler=v(l.adler,n.pending_buf,n.pending-s,s)),o(l),s=n.pending,n.pending===n.pending_buf_size)){m=1;break}m=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,a(n,m)}while(0!==m);n.gzhead.hcrc&&n.pending>s&&(l.adler=v(l.adler,n.pending_buf,n.pending-s,s)),0===m&&(n.status=te)}else n.status=te;if(n.status===te&&(n.gzhead.hcrc?(n.pending+2>n.pending_buf_size&&o(l),n.pending+2<=n.pending_buf_size&&(a(n,255&l.adler),a(n,255&l.adler>>8),l.adler=0,n.status=ae)):n.status=ae),0!==n.pending){if(o(l),0===l.avail_out)return n.last_flush=-1,P;}else if(0===l.avail_in&&i(c)<=i(e)&&c!==T)return L(l,R);if(n.status===oe&&0!==l.avail_in)return L(l,R);if(0!==l.avail_in||0!==n.lookahead||c!==E&&n.status!==oe){var h=n.strategy===k?u(n,c):n.strategy===3?p(n,c):se[n.level].func(n,c);if(h!==ie&&h!==le||(n.status=oe),h===re||h===ie)return 0===l.avail_out&&(n.last_flush=-1),P;if(h===ne&&(c===1?b._tr_align(n):c!==M&&(b._tr_stored_block(n,0,0,!1),c===3&&(U(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),o(l),0===l.avail_out))return n.last_flush=-1,P}return c===T?0>=n.wrap?A:(2===n.wrap?(a(n,255&l.adler),a(n,255&l.adler>>8),a(n,255&l.adler>>16),a(n,255&l.adler>>24),a(n,255&l.total_in),a(n,255&l.total_in>>8),a(n,255&l.total_in>>16),a(n,255&l.total_in>>24)):(r(n,l.adler>>>16),r(n,65535&l.adler)),o(l),0<n.wrap&&(n.wrap=-n.wrap),0===n.pending?A:P):P},t.deflateEnd=function(a){var t;return a&&a.state?(t=a.state.status)!==K&&t!==Q&&t!==$&&t!==ee&&t!==te&&t!==ae&&t!==oe?L(a,I):(a.state=null,t===ae?L(a,-3):P):I},t.deflateSetDictionary=function(o,d){var e=d.length,p,n,i,r,a,s,l,c;if(!o||!o.state)return I;if(p=o.state,2===(r=p.wrap)||1===r&&p.status!==K||p.lookahead)return I;for(1===r&&(o.adler=x(o.adler,d,e,0)),p.wrap=0,e>=p.w_size&&(0===r&&(U(p.head),p.strstart=0,p.block_start=0,p.insert=0),c=new y.Buf8(p.w_size),y.arraySet(c,d,e-p.w_size,p.w_size,0),d=c,e=p.w_size),a=o.avail_in,s=o.next_in,l=o.input,o.avail_in=e,o.next_in=0,o.input=d,j(p);p.lookahead>=Y;){n=p.strstart,i=p.lookahead-(Y-1);do p.ins_h=(p.ins_h<<p.hash_shift^p.window[n+Y-1])&p.hash_mask,p.prev[n&p.w_mask]=p.head[p.ins_h],p.head[p.ins_h]=n,n++;while(--i);p.strstart=n,p.lookahead=Y-1,j(p)}return p.strstart+=p.lookahead,p.block_start=p.strstart,p.insert=p.lookahead,p.lookahead=0,p.match_length=p.prev_length=Y-1,p.match_available=0,o.next_in=s,o.input=l,o.avail_in=a,p.wrap=r,P},t.deflateInfo="pako deflate (from Nodeca project)"},function(I,t,e){"use strict";function n(a){for(var t=a.length;0<=--t;)a[t]=0}function R(a,t,e,o,n){this.static_tree=a,this.extra_bits=t,this.extra_base=e,this.elems=o,this.max_length=n,this.has_stree=a&&a.length}function r(a,t){this.dyn_tree=a,this.max_code=0,this.stat_desc=t}function O(e){return 256>e?K[e]:K[256+(e>>>7)]}function a(a,t){a.pending_buf[a.pending++]=255&t,a.pending_buf[a.pending++]=255&t>>>8}function ee(o,t,e){o.bi_valid>B-e?(o.bi_buf|=65535&t<<o.bi_valid,a(o,o.bi_buf),o.bi_buf=t>>B-o.bi_valid,o.bi_valid+=e-B):(o.bi_buf|=65535&t<<o.bi_valid,o.bi_valid+=e)}function l(a,t,e){ee(a,e[2*t],e[2*t+1])}function i(a,t){var e=0;do e|=1&a,a>>>=1,e<<=1;while(0<--t);return e>>>1}function o(e){16===e.bi_valid?(a(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}function u(_,t){var e=t.dyn_tree,l=t.max_code,c=t.stat_desc.static_tree,h=t.stat_desc.has_stree,u=t.stat_desc.extra_bits,g=t.stat_desc.extra_base,d=t.stat_desc.max_length,f=0,m,n,i,r,o,a;for(r=0;r<=N;r++)_.bl_count[r]=0;for(e[2*_.heap[_.heap_max]+1]=0,m=_.heap_max+1;m<U;m++)(r=e[2*e[2*(n=_.heap[m])+1]+1]+1)>d&&(r=d,f++),e[2*n+1]=r,n>l||(_.bl_count[r]++,o=0,n>=g&&(o=u[n-g]),a=e[2*n],_.opt_len+=a*(r+o),h&&(_.static_len+=a*(c[2*n+1]+o)));if(0!==f){do{for(r=d-1;0===_.bl_count[r];)r--;_.bl_count[r]--,_.bl_count[r+1]+=2,_.bl_count[d]--,f-=2}while(0<f);for(r=d;0!==r;r--)for(n=_.bl_count[r];0!==n;)(i=_.heap[--m])>l||(e[2*i+1]!==r&&(_.opt_len+=(r-e[2*i+1])*e[2*i],e[2*i+1]=r),n--)}}function p(l,t,e){var n=Array(N+1),o=0,a,c;for(a=1;a<=N;a++)n[a]=o=o+e[a-1]<<1;for(c=0;c<=t;c++){var r=l[2*c+1];0!==r&&(l[2*c]=i(n[r]++,r))}}function s(){var r=Array(N+1),a,t,e,n,l;for(e=0,n=0;n<A-1;n++)for($[n]=e,a=0;a<1<<j[n];a++)Q[e++]=n;for(Q[e-1]=n,l=0,n=0;16>n;n++)for(te[n]=l,a=0;a<1<<X[n];a++)K[l++]=n;for(l>>=7;n<F;n++)for(te[n]=l<<7,a=0;a<1<<X[n]-7;a++)K[256+l++]=n;for(t=0;t<=N;t++)r[t]=0;for(a=0;143>=a;)Z[2*a+1]=8,a++,r[8]++;for(;255>=a;)Z[2*a+1]=9,a++,r[9]++;for(;279>=a;)Z[2*a+1]=7,a++,r[7]++;for(;287>=a;)Z[2*a+1]=8,a++,r[8]++;for(p(Z,D+1,r),a=0;a<F;a++)J[2*a+1]=5,J[2*a]=i(a,5);oe=new R(Z,j,L+1,D,N),re=new R(J,X,0,F,N),ne=new R([],q,0,k,z)}function c(a){var t;for(t=0;t<D;t++)a.dyn_ltree[2*t]=0;for(t=0;t<F;t++)a.dyn_dtree[2*t]=0;for(t=0;t<k;t++)a.bl_tree[2*t]=0;a.dyn_ltree[2*G]=1,a.opt_len=a.static_len=0,a.last_lit=a.matches=0}function d(e){8<e.bi_valid?a(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function m(o,t,e,r){d(o),r&&(a(o,e),a(o,~e)),E.arraySet(o.pending_buf,o.window,t,e,o.pending),o.pending+=e}function _(a,t,e,n){var i=2*t,r=2*e;return a[i]<a[r]||a[i]===a[r]&&n[t]<=n[e]}function h(a,t,e){for(var o=a.heap[e],n=e<<1;n<=a.heap_len&&(n<a.heap_len&&_(t,a.heap[n+1],a.heap[n],a.depth)&&n++,!_(t,o,a.heap[n],a.depth));)a.heap[e]=a.heap[n],e=n,n<<=1;a.heap[e]=o}function g(a,t,e){var n=0,c,i,r,o;if(0!==a.last_lit)do c=a.pending_buf[a.d_buf+2*n]<<8|a.pending_buf[a.d_buf+2*n+1],i=a.pending_buf[a.l_buf+n],n++,0===c?l(a,i,t):(l(a,(r=Q[i])+L+1,t),0!==(o=j[r])&&ee(a,i-=$[r],o),l(a,r=O(--c),e),0!==(o=X[r])&&ee(a,c-=te[r],o));while(n<a.last_lit);l(a,G,t)}function f(d,t){var e=t.dyn_tree,o=t.stat_desc.static_tree,a=t.stat_desc.has_stree,s=t.stat_desc.elems,l=-1,c,n,i;for(d.heap_len=0,d.heap_max=U,c=0;c<s;c++)0===e[2*c]?e[2*c+1]=0:(d.heap[++d.heap_len]=l=c,d.depth[c]=0);for(;2>d.heap_len;)e[2*(i=d.heap[++d.heap_len]=2>l?++l:0)]=1,d.depth[i]=0,d.opt_len--,a&&(d.static_len-=o[2*i+1]);for(t.max_code=l,c=d.heap_len>>1;1<=c;c--)h(d,e,c);i=s;do c=d.heap[1],d.heap[1]=d.heap[d.heap_len--],h(d,e,1),n=d.heap[1],d.heap[--d.heap_max]=c,d.heap[--d.heap_max]=n,e[2*i]=e[2*c]+e[2*n],d.depth[i]=(d.depth[c]>=d.depth[n]?d.depth[c]:d.depth[n])+1,e[2*c+1]=e[2*n+1]=i,d.heap[1]=i++,h(d,e,1);while(2<=d.heap_len);d.heap[--d.heap_max]=d.heap[1],u(d,t),p(e,l,d.bl_count)}function y(d,t,e){var n=-1,o=t[1],a=0,s=7,l=4,c,i;for(0===o&&(s=138,l=3),t[2*(e+1)+1]=65535,c=0;c<=e;c++)i=o,o=t[2*(c+1)+1],++a<s&&i===o||(a<l?d.bl_tree[2*i]+=a:0===i?10>=a?d.bl_tree[2*V]++:d.bl_tree[2*W]++:(i!==n&&d.bl_tree[2*i]++,d.bl_tree[2*H]++),a=0,n=i,0===o?(s=138,l=3):i===o?(s=6,l=3):(s=7,l=4))}function b(c,t,e){var n=-1,o=t[1],a=0,s=7,d=4,p,i;for(0===o&&(s=138,d=3),p=0;p<=e;p++)if(i=o,o=t[2*(p+1)+1],!(++a<s&&i===o)){if(a<d)do l(c,i,c.bl_tree);while(0!=--a);else 0===i?10>=a?(l(c,V,c.bl_tree),ee(c,a-3,3)):(l(c,W,c.bl_tree),ee(c,a-11,7)):(i!==n&&(l(c,i,c.bl_tree),a--),l(c,H,c.bl_tree),ee(c,a-3,2));a=0,n=i,0===o?(s=138,d=3):i===o?(s=6,d=3):(s=7,d=4)}}function x(a){var t;for(y(a,a.dyn_ltree,a.l_desc.max_code),y(a,a.dyn_dtree,a.d_desc.max_code),f(a,a.bl_desc),t=k-1;3<=t&&0===a.bl_tree[2*Y[t]+1];t--);return a.opt_len+=3*(t+1)+5+5+4,t}function v(a,t,e,o){var n;for(ee(a,t-257,5),ee(a,e-1,5),ee(a,o-4,4),n=0;n<o;n++)ee(a,a.bl_tree[2*Y[n]+1],3);b(a,a.dyn_ltree,t-1),b(a,a.dyn_dtree,e-1)}function S(a){var t=4093624447,o;for(o=0;31>=o;o++,t>>>=1)if(1&t&&0!==a.dyn_ltree[2*o])return T;if(0!==a.dyn_ltree[18]||0!==a.dyn_ltree[20]||0!==a.dyn_ltree[26])return M;for(o=32;o<L;o++)if(0!==a.dyn_ltree[2*o])return M;return T}function w(a,t,e,o){ee(a,(P<<1)+(o?1:0),3),m(a,t,e,!0)}var E=e(17),T=0,M=1,P=0,C=1,A=29,L=256,D=L+1+A,F=30,k=19,U=2*D+1,N=15,B=16,z=7,G=256,H=16,V=17,W=18,j=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],X=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],q=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Y=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Z=Array(2*(D+2));n(Z);var J=Array(2*F);n(J);var K=Array(512);n(K);var Q=Array(256);n(Q);var $=Array(A);n($);var te=Array(F);n(te);var ae=!1,oe,re,ne;t._tr_init=function(e){ae||(s(),ae=!0),e.l_desc=new r(e.dyn_ltree,oe),e.d_desc=new r(e.dyn_dtree,re),e.bl_desc=new r(e.bl_tree,ne),e.bi_buf=0,e.bi_valid=0,c(e)},t._tr_stored_block=w,t._tr_flush_block=function(l,t,e,n){var i=0,a,r;0<l.level?(l.strm.data_type===2&&(l.strm.data_type=S(l)),f(l,l.l_desc),f(l,l.d_desc),i=x(l),a=l.opt_len+3+7>>>3,(r=l.static_len+3+7>>>3)<=a&&(a=r)):a=r=e+5,e+4<=a&&-1!==t?w(l,t,e,n):l.strategy===4||r===a?(ee(l,(C<<1)+(n?1:0),3),g(l,Z,J)):(ee(l,(2<<1)+(n?1:0),3),v(l,l.l_desc.max_code+1,l.d_desc.max_code+1,i+1),g(l,l.dyn_ltree,l.dyn_dtree)),c(l),n&&d(l)},t._tr_tally=function(a,t,e){return a.pending_buf[a.d_buf+2*a.last_lit]=255&t>>>8,a.pending_buf[a.d_buf+2*a.last_lit+1]=255&t,a.pending_buf[a.l_buf+a.last_lit]=255&e,a.last_lit++,0===t?a.dyn_ltree[2*e]++:(a.matches++,t--,a.dyn_ltree[2*(Q[e]+L+1)]++,a.dyn_dtree[2*O(t)]++),a.last_lit===a.lit_bufsize-1},t._tr_align=function(e){ee(e,C<<1,3),l(e,G,Z),o(e)}},function(y,t,e){"use strict";function x(e){return(255&e>>>24)+(65280&e>>>8)+((65280&e)<<8)+((255&e)<<24)}function T(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new h.Buf16(320),this.work=new h.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function r(a){var t;return a&&a.state?(t=a.state,a.total_in=a.total_out=t.total=0,a.msg="",t.wrap&&(a.adler=1&t.wrap),t.mode=A,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new h.Buf32(l),t.distcode=t.distdyn=new h.Buf32(s),t.sane=1,t.back=-1,S):E}function o(a){var t;return a&&a.state?(t=a.state,t.wsize=0,t.whave=0,t.wnext=0,r(a)):E}function a(a,t){var r,n;return a&&a.state?(n=a.state,0>t?(r=0,t=-t):(r=1+(t>>4),48>t&&(t&=15)),t&&(8>t||15<t)?E:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,o(a))):E}function n(o,t){var e,r;return o?(r=new T,o.state=r,r.window=null,(e=a(o,t))!==S&&(o.state=null),e):E}function i(a){if(le){var t;for(se=new h.Buf32(512),u=new h.Buf32(32),t=0;144>t;)a.lens[t++]=8;for(;256>t;)a.lens[t++]=9;for(;280>t;)a.lens[t++]=7;for(;288>t;)a.lens[t++]=8;for(_(g,a.lens,0,288,se,0,a.work,{bits:9}),t=0;32>t;)a.lens[t++]=5;_(v,a.lens,0,32,u,0,a.work,{bits:5}),le=!1}a.lencode=se,a.lenbits=9,a.distcode=u,a.distbits=5}function c(a,t,e,n){var i=a.state,o;return null===i.window&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new h.Buf8(i.wsize)),n>=i.wsize?(h.arraySet(i.window,t,e-i.wsize,i.wsize,0),i.wnext=0,i.whave=i.wsize):((o=i.wsize-i.wnext)>n&&(o=n),h.arraySet(i.window,t,e-n,o,i.wnext),(n-=o)?(h.arraySet(i.window,t,e-n,n,0),i.wnext=n,i.whave=i.wsize):(i.wnext+=o,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=o))),0}var h=e(17),d=e(69),f=e(70),m=e(151),_=e(152),g=1,v=2,b=4,w=6,S=0,E=-2,M=-3,P=-4,C=8,A=1,L=2,I=3,R=4,D=5,k=6,O=7,U=8,N=9,B=10,z=11,G=12,H=13,V=14,W=15,j=16,X=17,q=18,Y=19,Z=20,J=21,K=22,Q=23,$=24,ee=25,te=26,ae=27,oe=28,re=29,ne=30,ie=31,l=852,s=592,le=!0,se,u;t.inflateReset=o,t.inflateReset2=a,t.inflateResetKeep=r,t.inflateInit=function(e){return n(e,15)},t.inflateInit2=n,t.inflate=function(y,T){var e=0,le=new h.Buf8(4),se=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ce,n,r,o,a,s,l,u,p,de,pe,ue,me,_e,he,ge,fe,ye,be,xe,ve,Se,we,Ee;if(!y||!y.state||!y.output||!y.input&&0!==y.avail_in)return E;(ce=y.state).mode===G&&(ce.mode=H),a=y.next_out,r=y.output,l=y.avail_out,o=y.next_in,n=y.input,s=y.avail_in,u=ce.hold,p=ce.bits,de=s,pe=l,Se=S;t:for(;;)switch(ce.mode){case A:if(0===ce.wrap){ce.mode=H;break}for(;16>p;){if(0===s)break t;s--,u+=n[o++]<<p,p+=8}if(2&ce.wrap&&35615===u){ce.check=0,le[0]=255&u,le[1]=255&u>>>8,ce.check=f(ce.check,le,2,0),u=0,p=0,ce.mode=L;break}if(ce.flags=0,ce.head&&(ce.head.done=!1),!(1&ce.wrap)||(((255&u)<<8)+(u>>8))%31){y.msg="incorrect header check",ce.mode=ne;break}if((15&u)!==C){y.msg="unknown compression method",ce.mode=ne;break}if(u>>>=4,p-=4,ve=8+(15&u),0===ce.wbits)ce.wbits=ve;else if(ve>ce.wbits){y.msg="invalid window size",ce.mode=ne;break}ce.dmax=1<<ve,y.adler=ce.check=1,ce.mode=512&u?B:G,u=0,p=0;break;case L:for(;16>p;){if(0===s)break t;s--,u+=n[o++]<<p,p+=8}if(ce.flags=u,(255&ce.flags)!==C){y.msg="unknown compression method",ce.mode=ne;break}if(57344&ce.flags){y.msg="unknown header flags set",ce.mode=ne;break}ce.head&&(ce.head.text=1&u>>8),512&ce.flags&&(le[0]=255&u,le[1]=255&u>>>8,ce.check=f(ce.check,le,2,0)),u=0,p=0,ce.mode=I;case I:for(;32>p;){if(0===s)break t;s--,u+=n[o++]<<p,p+=8}ce.head&&(ce.head.time=u),512&ce.flags&&(le[0]=255&u,le[1]=255&u>>>8,le[2]=255&u>>>16,le[3]=255&u>>>24,ce.check=f(ce.check,le,4,0)),u=0,p=0,ce.mode=R;case R:for(;16>p;){if(0===s)break t;s--,u+=n[o++]<<p,p+=8}ce.head&&(ce.head.xflags=255&u,ce.head.os=u>>8),512&ce.flags&&(le[0]=255&u,le[1]=255&u>>>8,ce.check=f(ce.check,le,2,0)),u=0,p=0,ce.mode=D;case D:if(1024&ce.flags){for(;16>p;){if(0===s)break t;s--,u+=n[o++]<<p,p+=8}ce.length=u,ce.head&&(ce.head.extra_len=u),512&ce.flags&&(le[0]=255&u,le[1]=255&u>>>8,ce.check=f(ce.check,le,2,0)),u=0,p=0}else ce.head&&(ce.head.extra=null);ce.mode=k;case k:if(1024&ce.flags&&((ue=ce.length)>s&&(ue=s),ue&&(ce.head&&(ve=ce.head.extra_len-ce.length,ce.head.extra||(ce.head.extra=Array(ce.head.extra_len)),h.arraySet(ce.head.extra,n,o,ue,ve)),512&ce.flags&&(ce.check=f(ce.check,n,ue,o)),s-=ue,o+=ue,ce.length-=ue),ce.length))break t;ce.length=0,ce.mode=O;case O:if(2048&ce.flags){if(0===s)break t;ue=0;do ve=n[o+ue++],ce.head&&ve&&65536>ce.length&&(ce.head.name+=F(ve));while(ve&&ue<s);if(512&ce.flags&&(ce.check=f(ce.check,n,ue,o)),s-=ue,o+=ue,ve)break t}else ce.head&&(ce.head.name=null);ce.length=0,ce.mode=U;case U:if(4096&ce.flags){if(0===s)break t;ue=0;do ve=n[o+ue++],ce.head&&ve&&65536>ce.length&&(ce.head.comment+=F(ve));while(ve&&ue<s);if(512&ce.flags&&(ce.check=f(ce.check,n,ue,o)),s-=ue,o+=ue,ve)break t}else ce.head&&(ce.head.comment=null);ce.mode=N;case N:if(512&ce.flags){for(;16>p;){if(0===s)break t;s--,u+=n[o++]<<p,p+=8}if(u!==(65535&ce.check)){y.msg="header crc mismatch",ce.mode=ne;break}u=0,p=0}ce.head&&(ce.head.hcrc=1&ce.flags>>9,ce.head.done=!0),y.adler=ce.check=0,ce.mode=G;break;case B:for(;32>p;){if(0===s)break t;s--,u+=n[o++]<<p,p+=8}y.adler=ce.check=x(u),u=0,p=0,ce.mode=z;case z:if(0===ce.havedict)return y.next_out=a,y.avail_out=l,y.next_in=o,y.avail_in=s,ce.hold=u,ce.bits=p,2;y.adler=ce.check=1,ce.mode=G;case G:if(T===5||T===w)break t;case H:if(ce.last){u>>>=7&p,p-=7&p,ce.mode=ae;break}for(;3>p;){if(0===s)break t;s--,u+=n[o++]<<p,p+=8}switch(ce.last=1&u,u>>>=1,p-=1,3&u){case 0:ce.mode=V;break;case 1:if(i(ce),ce.mode=Z,T===w){u>>>=2,p-=2;break t}break;case 2:ce.mode=X;break;case 3:y.msg="invalid block type",ce.mode=ne;}u>>>=2,p-=2;break;case V:for(u>>>=7&p,p-=7&p;32>p;){if(0===s)break t;s--,u+=n[o++]<<p,p+=8}if((65535&u)!=(65535^u>>>16)){y.msg="invalid stored block lengths",ce.mode=ne;break}if(ce.length=65535&u,u=0,p=0,ce.mode=W,T===w)break t;case W:ce.mode=j;case j:if(ue=ce.length){if(ue>s&&(ue=s),ue>l&&(ue=l),0===ue)break t;h.arraySet(r,n,o,ue,a),s-=ue,o+=ue,l-=ue,a+=ue,ce.length-=ue;break}ce.mode=G;break;case X:for(;14>p;){if(0===s)break t;s--,u+=n[o++]<<p,p+=8}if(ce.nlen=257+(31&u),u>>>=5,p-=5,ce.ndist=1+(31&u),u>>>=5,p-=5,ce.ncode=4+(15&u),u>>>=4,p-=4,286<ce.nlen||30<ce.ndist){y.msg="too many length or distance symbols",ce.mode=ne;break}ce.have=0,ce.mode=q;case q:for(;ce.have<ce.ncode;){for(;3>p;){if(0===s)break t;s--,u+=n[o++]<<p,p+=8}ce.lens[se[ce.have++]]=7&u,u>>>=3,p-=3}for(;19>ce.have;)ce.lens[se[ce.have++]]=0;if(ce.lencode=ce.lendyn,ce.lenbits=7,we={bits:ce.lenbits},Se=_(0,ce.lens,0,19,ce.lencode,0,ce.work,we),ce.lenbits=we.bits,Se){y.msg="invalid code lengths set",ce.mode=ne;break}ce.have=0,ce.mode=Y;case Y:for(;ce.have<ce.nlen+ce.ndist;){for(;e=ce.lencode[u&(1<<ce.lenbits)-1],he=e>>>24,ge=255&e>>>16,fe=65535&e,!(he<=p);){if(0===s)break t;s--,u+=n[o++]<<p,p+=8}if(16>fe)u>>>=he,p-=he,ce.lens[ce.have++]=fe;else{if(16===fe){for(Ee=he+2;p<Ee;){if(0===s)break t;s--,u+=n[o++]<<p,p+=8}if(u>>>=he,p-=he,0===ce.have){y.msg="invalid bit length repeat",ce.mode=ne;break}ve=ce.lens[ce.have-1],ue=3+(3&u),u>>>=2,p-=2}else if(17===fe){for(Ee=he+3;p<Ee;){if(0===s)break t;s--,u+=n[o++]<<p,p+=8}p-=he,ve=0,ue=3+(7&(u>>>=he)),u>>>=3,p-=3}else{for(Ee=he+7;p<Ee;){if(0===s)break t;s--,u+=n[o++]<<p,p+=8}p-=he,ve=0,ue=11+(127&(u>>>=he)),u>>>=7,p-=7}if(ce.have+ue>ce.nlen+ce.ndist){y.msg="invalid bit length repeat",ce.mode=ne;break}for(;ue--;)ce.lens[ce.have++]=ve}}if(ce.mode===ne)break;if(0===ce.lens[256]){y.msg="invalid code -- missing end-of-block",ce.mode=ne;break}if(ce.lenbits=9,we={bits:ce.lenbits},Se=_(g,ce.lens,0,ce.nlen,ce.lencode,0,ce.work,we),ce.lenbits=we.bits,Se){y.msg="invalid literal/lengths set",ce.mode=ne;break}if(ce.distbits=6,ce.distcode=ce.distdyn,we={bits:ce.distbits},Se=_(v,ce.lens,ce.nlen,ce.ndist,ce.distcode,0,ce.work,we),ce.distbits=we.bits,Se){y.msg="invalid distances set",ce.mode=ne;break}if(ce.mode=Z,T===w)break t;case Z:ce.mode=J;case J:if(6<=s&&258<=l){y.next_out=a,y.avail_out=l,y.next_in=o,y.avail_in=s,ce.hold=u,ce.bits=p,m(y,pe),a=y.next_out,r=y.output,l=y.avail_out,o=y.next_in,n=y.input,s=y.avail_in,u=ce.hold,p=ce.bits,ce.mode===G&&(ce.back=-1);break}for(ce.back=0;e=ce.lencode[u&(1<<ce.lenbits)-1],he=e>>>24,ge=255&e>>>16,fe=65535&e,!(he<=p);){if(0===s)break t;s--,u+=n[o++]<<p,p+=8}if(ge&&0==(240&ge)){for(ye=he,be=ge,xe=fe;e=ce.lencode[xe+((u&(1<<ye+be)-1)>>ye)],he=e>>>24,ge=255&e>>>16,fe=65535&e,!(ye+he<=p);){if(0===s)break t;s--,u+=n[o++]<<p,p+=8}u>>>=ye,p-=ye,ce.back+=ye}if(u>>>=he,p-=he,ce.back+=he,ce.length=fe,0===ge){ce.mode=te;break}if(32&ge){ce.back=-1,ce.mode=G;break}if(64&ge){y.msg="invalid literal/length code",ce.mode=ne;break}ce.extra=15&ge,ce.mode=K;case K:if(ce.extra){for(Ee=ce.extra;p<Ee;){if(0===s)break t;s--,u+=n[o++]<<p,p+=8}ce.length+=u&(1<<ce.extra)-1,u>>>=ce.extra,p-=ce.extra,ce.back+=ce.extra}ce.was=ce.length,ce.mode=Q;case Q:for(;e=ce.distcode[u&(1<<ce.distbits)-1],he=e>>>24,ge=255&e>>>16,fe=65535&e,!(he<=p);){if(0===s)break t;s--,u+=n[o++]<<p,p+=8}if(0==(240&ge)){for(ye=he,be=ge,xe=fe;e=ce.distcode[xe+((u&(1<<ye+be)-1)>>ye)],he=e>>>24,ge=255&e>>>16,fe=65535&e,!(ye+he<=p);){if(0===s)break t;s--,u+=n[o++]<<p,p+=8}u>>>=ye,p-=ye,ce.back+=ye}if(u>>>=he,p-=he,ce.back+=he,64&ge){y.msg="invalid distance code",ce.mode=ne;break}ce.offset=fe,ce.extra=15&ge,ce.mode=$;case $:if(ce.extra){for(Ee=ce.extra;p<Ee;){if(0===s)break t;s--,u+=n[o++]<<p,p+=8}ce.offset+=u&(1<<ce.extra)-1,u>>>=ce.extra,p-=ce.extra,ce.back+=ce.extra}if(ce.offset>ce.dmax){y.msg="invalid distance too far back",ce.mode=ne;break}ce.mode=ee;case ee:if(0===l)break t;if(ue=pe-l,ce.offset>ue){if((ue=ce.offset-ue)>ce.whave&&ce.sane){y.msg="invalid distance too far back",ce.mode=ne;break}ue>ce.wnext?(ue-=ce.wnext,me=ce.wsize-ue):me=ce.wnext-ue,ue>ce.length&&(ue=ce.length),_e=ce.window}else _e=r,me=a-ce.offset,ue=ce.length;ue>l&&(ue=l),l-=ue,ce.length-=ue;do r[a++]=_e[me++];while(--ue);0===ce.length&&(ce.mode=J);break;case te:if(0===l)break t;r[a++]=ce.length,l--,ce.mode=J;break;case ae:if(ce.wrap){for(;32>p;){if(0===s)break t;s--,u|=n[o++]<<p,p+=8}if(pe-=l,y.total_out+=pe,ce.total+=pe,pe&&(y.adler=ce.check=ce.flags?f(ce.check,r,pe,a-pe):d(ce.check,r,pe,a-pe)),pe=l,(ce.flags?u:x(u))!==ce.check){y.msg="incorrect data check",ce.mode=ne;break}u=0,p=0}ce.mode=oe;case oe:if(ce.wrap&&ce.flags){for(;32>p;){if(0===s)break t;s--,u+=n[o++]<<p,p+=8}if(u!==(4294967295&ce.total)){y.msg="incorrect length check",ce.mode=ne;break}u=0,p=0}ce.mode=re;case re:Se=1;break t;case ne:Se=M;break t;case ie:return P;case 32:default:return E;}return y.next_out=a,y.avail_out=l,y.next_in=o,y.avail_in=s,ce.hold=u,ce.bits=p,(ce.wsize||pe!==y.avail_out&&ce.mode<ne&&(ce.mode<ae||T!==b))&&c(y,y.output,y.next_out,pe-y.avail_out)?(ce.mode=ie,P):(de-=y.avail_in,pe-=y.avail_out,y.total_in+=de,y.total_out+=pe,ce.total+=pe,ce.wrap&&pe&&(y.adler=ce.check=ce.flags?f(ce.check,r,pe,y.next_out-pe):d(ce.check,r,pe,y.next_out-pe)),y.data_type=ce.bits+(ce.last?64:0)+(ce.mode===G?128:0)+(ce.mode===Z||ce.mode===W?256:0),(0===de&&0===pe||T===b)&&Se===S&&(Se=-5),Se)},t.inflateEnd=function(a){if(!a||!a.state)return E;var o=a.state;return o.window&&(o.window=null),a.state=null,S},t.inflateGetHeader=function(a,t){var e;return a&&a.state?0==(2&(e=a.state).wrap)?E:(e.head=t,t.done=!1,S):E},t.inflateSetDictionary=function(a,t){var e=t.length,o,r;return a&&a.state?0!==(o=a.state).wrap&&o.mode!==z?E:o.mode===z&&(r=1,(r=d(r,t,e,0))!==o.check)?M:c(a,t,e,e)?(o.mode=ie,P):(o.havedict=1,S):E},t.inflateInfo="pako inflate (from Nodeca project)"},function(e){"use strict";e.exports=function(P,t){var e,n,i,r,o,a,s,l,c,h,u,p,d,f,m,_,g,y,v,b,w,x,S,E,M;e=P.state,n=P.next_in,E=P.input,i=n+(P.avail_in-5),r=P.next_out,M=P.output,o=r-(t-P.avail_out),a=r+(P.avail_out-257),s=e.dmax,l=e.wsize,c=e.whave,h=e.wnext,u=e.window,p=e.hold,d=e.bits,f=e.lencode,m=e.distcode,_=(1<<e.lenbits)-1,g=(1<<e.distbits)-1;t:do{15>d&&(p+=E[n++]<<d,d+=8,p+=E[n++]<<d,d+=8),y=f[p&_];e:for(;;){if(v=y>>>24,p>>>=v,d-=v,0===(v=255&y>>>16))M[r++]=65535&y;else{if(!(16&v)){if(0==(64&v)){y=f[(65535&y)+(p&(1<<v)-1)];continue e}if(32&v){e.mode=12;break t}P.msg="invalid literal/length code",e.mode=30;break t}b=65535&y,(v&=15)&&(d<v&&(p+=E[n++]<<d,d+=8),b+=p&(1<<v)-1,p>>>=v,d-=v),15>d&&(p+=E[n++]<<d,d+=8,p+=E[n++]<<d,d+=8),y=m[p&g];n:for(;;){if(v=y>>>24,p>>>=v,d-=v,!(16&(v=255&y>>>16))){if(0==(64&v)){y=m[(65535&y)+(p&(1<<v)-1)];continue n}P.msg="invalid distance code",e.mode=30;break t}if(w=65535&y,v&=15,d<v&&(p+=E[n++]<<d,(d+=8)<v&&(p+=E[n++]<<d,d+=8)),(w+=p&(1<<v)-1)>s){P.msg="invalid distance too far back",e.mode=30;break t}if(p>>>=v,d-=v,v=r-o,w>v){if((v=w-v)>c&&e.sane){P.msg="invalid distance too far back",e.mode=30;break t}if(x=0,S=u,0===h){if(x+=l-v,v<b){b-=v;do M[r++]=u[x++];while(--v);x=r-w,S=M}}else if(h<v){if(x+=l+h-v,(v-=h)<b){b-=v;do M[r++]=u[x++];while(--v);if(x=0,h<b){b-=v=h;do M[r++]=u[x++];while(--v);x=r-w,S=M}}}else if(x+=h-v,v<b){b-=v;do M[r++]=u[x++];while(--v);x=r-w,S=M}for(;2<b;)M[r++]=S[x++],M[r++]=S[x++],M[r++]=S[x++],b-=3;b&&(M[r++]=S[x++],1<b&&(M[r++]=S[x++]))}else{x=r-w;do M[r++]=M[x++],M[r++]=M[x++],M[r++]=M[x++],b-=3;while(2<b);b&&(M[r++]=M[x++],1<b&&(M[r++]=M[x++]))}break}}break}}while(n<i&&r<a);n-=b=d>>3,p&=(1<<(d-=b<<3))-1,P.next_in=n,P.next_out=r,P.avail_in=n<i?i-n+5:5-(n-i),P.avail_out=r<a?a-r+257:257-(r-a),e.hold=p,e.bits=d}},function(l,t,e){"use strict";var B=e(17),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],r=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],o=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],a=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];l.exports=function(s,t,e,n,l,c,h,u){var p=u.bits,x=0,S=0,E=0,M=0,T=0,A=0,P=0,I=0,C=0,L=0,R=null,D=0,k=new B.Buf16(16),O=new B.Buf16(16),F=null,U=0,N,d,f,m,_,g,y,v,b;for(x=0;15>=x;x++)k[x]=0;for(S=0;S<n;S++)k[t[e+S]]++;for(T=p,M=15;1<=M&&0===k[M];M--);if(T>M&&(T=M),0===M)return l[c++]=20971520,l[c++]=20971520,u.bits=1,0;for(E=1;E<M&&0===k[E];E++);for(T<E&&(T=E),I=1,x=1;15>=x;x++)if(I<<=1,0>(I-=k[x]))return-1;if(0<I&&(0===s||1!==M))return-1;for(O[1]=0,x=1;15>x;x++)O[x+1]=O[x]+k[x];for(S=0;S<n;S++)0!==t[e+S]&&(h[O[t[e+S]]++]=S);if(0===s?(R=F=h,g=19):1===s?(R=i,D-=257,F=r,U-=257,g=256):(R=o,F=a,g=-1),L=0,S=0,x=E,_=c,A=T,P=0,f=-1,C=1<<T,m=C-1,1===s&&852<C||2===s&&592<C)return 1;for(;;){0,y=x-P,h[S]<g?(v=0,b=h[S]):h[S]>g?(v=F[U+h[S]],b=R[D+h[S]]):(v=96,b=0),N=1<<x-P,E=d=1<<A;do l[_+(L>>P)+(d-=N)]=0|(y<<24|v<<16|b);while(0!==d);for(N=1<<x-1;L&N;)N>>=1;if(0===N?L=0:(L&=N-1,L+=N),S++,0==--k[x]){if(x===M)break;x=t[e+h[S]]}if(x>T&&(L&m)!==f){for(0===P&&(P=T),_+=E,I=1<<(A=x-P);A+P<M&&!(0>=(I-=k[A+P]));)A++,I<<=1;if(C+=1<<A,1===s&&852<C||2===s&&592<C)return 1;l[f=L&m]=0|(T<<24|A<<16|_-c)}}return 0!==L&&(l[_+L]=0|(x-P<<24|4194304)),u.bits=T,0}},function(e){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(e){e.exports=function(e){return e&&"object"==("undefined"===typeof e?"undefined":babelHelpers.typeof(e))&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e){e.exports="function"==typeof Object.create?function(a,o){a.super_=o,a.prototype=Object.create(o.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})}:function(a,t){a.super_=t;var e=function(){};e.prototype=t.prototype,a.prototype=new e,a.prototype.constructor=a}},function(a,o,e){"use strict";var r=r||{};r.lossless=r.lossless||{},r.lossless.ComponentSpec=r.lossless.ComponentSpec||e(73),r.lossless.DataStream=r.lossless.DataStream||e(7),r.lossless.Decoder=r.lossless.Decoder||e(157),r.lossless.FrameHeader=r.lossless.FrameHeader||e(78),r.lossless.HuffmanTable=r.lossless.HuffmanTable||e(74),r.lossless.QuantizationTable=r.lossless.QuantizationTable||e(75),r.lossless.ScanComponent=r.lossless.ScanComponent||e(77),r.lossless.ScanHeader=r.lossless.ScanHeader||e(76),r.lossless.Utils=r.lossless.Utils||e(18),"undefined"!==typeof a&&a.exports&&(a.exports=r)},function(a,o,e){"use strict";var d=d||{};d.lossless=d.lossless||{},d.lossless.DataStream=d.lossless.DataStream||e(7),d.lossless.HuffmanTable=d.lossless.HuffmanTable||e(74),d.lossless.QuantizationTable=d.lossless.QuantizationTable||e(75),d.lossless.ScanHeader=d.lossless.ScanHeader||e(76),d.lossless.FrameHeader=d.lossless.FrameHeader||e(78),d.lossless.Utils=d.lossless.Utils||e(18),d.lossless.Decoder=d.lossless.Decoder||function(a,t){this.buffer=a,this.frame=new d.lossless.FrameHeader,this.huffTable=new d.lossless.HuffmanTable,this.quantTable=new d.lossless.QuantizationTable,this.scan=new d.lossless.ScanHeader,this.DU=d.lossless.Utils.createArray(10,4,64),this.HuffTab=d.lossless.Utils.createArray(4,2,12800),this.IDCT_Source=[],this.nBlock=[],this.acTab=d.lossless.Utils.createArray(10,1),this.dcTab=d.lossless.Utils.createArray(10,1),this.qTab=d.lossless.Utils.createArray(10,1),this.marker=0,this.markerIndex=0,this.numComp=0,this.restartInterval=0,this.selection=0,this.xDim=0,this.yDim=0,this.xLoc=0,this.yLoc=0,this.numBytes=0,this.outputData=null,this.restarting=!1,this.mask=0,void 0!==t&&(this.numBytes=t)},d.lossless.Decoder.IDCT_P=[0,5,40,16,45,2,7,42,21,56,8,61,18,47,1,4,41,23,58,13,32,24,37,10,63,17,44,3,6,43,20,57,15,34,29,48,53,26,39,9,60,19,46,22,59,12,33,31,50,55,25,36,11,62,14,35,28,49,52,27,38,30,51,54],d.lossless.Decoder.TABLE=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],d.lossless.Decoder.MAX_HUFFMAN_SUBTREE=50,d.lossless.Decoder.MSB=2147483648,d.lossless.Decoder.RESTART_MARKER_BEGIN=65488,d.lossless.Decoder.RESTART_MARKER_END=65495,d.lossless.Decoder.prototype.decompress=function(a,t,e){return this.decode(a,t,e).buffer},d.lossless.Decoder.prototype.decode=function(i,t,e,n){var r=0,c=[],m=[],u=[],p,o,a,s;if(void 0!==i&&(this.buffer=i),void 0!==n&&(this.numBytes=n),this.stream=new d.lossless.DataStream(this.buffer,t,e),this.buffer=null,this.xLoc=0,this.yLoc=0,65496!==(p=this.stream.get16()))throw new Error("Not a JPEG file");for(p=this.stream.get16();4092!=p>>4||65476===p;){switch(p){case 65476:this.huffTable.read(this.stream,this.HuffTab);break;case 65484:throw new Error("Program doesn't support arithmetic coding. (format throw new IOException)");case 65499:this.quantTable.read(this.stream,d.lossless.Decoder.TABLE);break;case 65501:this.restartInterval=this.readNumber();break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:this.readApp();break;case 65534:this.readComment();break;default:if(255!=p>>8)throw new Error("ERROR: format throw new IOException! (decode)");}p=this.stream.get16()}if(65472>p||65479<p)throw new Error("ERROR: could not handle arithmetic code!");this.frame.read(this.stream),p=this.stream.get16();do{for(;65498!==p;){switch(p){case 65476:this.huffTable.read(this.stream,this.HuffTab);break;case 65484:throw new Error("Program doesn't support arithmetic coding. (format throw new IOException)");case 65499:this.quantTable.read(this.stream,d.lossless.Decoder.TABLE);break;case 65501:this.restartInterval=this.readNumber();break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:this.readApp();break;case 65534:this.readComment();break;default:if(255!=p>>8)throw new Error("ERROR: format throw new IOException! (Parser.decode)");}p=this.stream.get16()}switch(this.precision=this.frame.precision,this.components=this.frame.components,this.numBytes||(this.numBytes=parseInt(T(this.precision/8))),this.mask=1==this.numBytes?255:65535,this.scan.read(this.stream),this.numComp=this.scan.numComp,this.selection=this.scan.selection,1===this.numBytes?3===this.numComp?(this.getter=this.getValueRGB,this.setter=this.setValueRGB,this.output=this.outputRGB):(this.getter=this.getValue8,this.setter=this.setValue8,this.output=this.outputSingle):(this.getter=this.getValue16,this.setter=this.setValue16,this.output=this.outputSingle),this.selection){case 2:this.selector=this.select2;break;case 3:this.selector=this.select3;break;case 4:this.selector=this.select4;break;case 5:this.selector=this.select5;break;case 6:this.selector=this.select6;break;case 7:this.selector=this.select7;break;default:this.selector=this.select1;}for(this.scanComps=this.scan.components,this.quantTables=this.quantTable.quantTables,o=0;o<this.numComp;o+=1)a=this.scanComps[o].scanCompSel,this.qTab[o]=this.quantTables[this.components[a].quantTableSel],this.nBlock[o]=this.components[a].vSamp*this.components[a].hSamp,this.dcTab[o]=this.HuffTab[this.scanComps[o].dcTabSel][0],this.acTab[o]=this.HuffTab[this.scanComps[o].acTabSel][1];for(this.xDim=this.frame.dimX,this.yDim=this.frame.dimY,this.outputData=new DataView(new ArrayBuffer(this.xDim*this.yDim*this.numBytes*this.numComp)),r+=1;;){for(m[0]=0,u[0]=0,o=0;10>o;o+=1)c[o]=1<<this.precision-1;if(0===this.restartInterval){for(p=this.decodeUnit(c,m,u);0===p&&this.xLoc<this.xDim&&this.yLoc<this.yDim;)this.output(c),p=this.decodeUnit(c,m,u);break}for(s=0;s<this.restartInterval&&(this.restarting=0==s,p=this.decodeUnit(c,m,u),this.output(c),0===p);s+=1);if(0===p&&(0===this.markerIndex?p=this.stream.get16():(p=65280|this.marker,this.markerIndex=0)),!(p>=d.lossless.Decoder.RESTART_MARKER_BEGIN&&p<=d.lossless.Decoder.RESTART_MARKER_END))break}65500===p&&1===r&&(this.readNumber(),p=this.stream.get16())}while(65497!==p&&this.xLoc<this.xDim&&this.yLoc<this.yDim&&0===r);return this.outputData},d.lossless.Decoder.prototype.decodeUnit=function(a,t,e){return 1==this.numComp?this.decodeSingle(a,t,e):3==this.numComp?this.decodeRGB(a,t,e):-1},d.lossless.Decoder.prototype.select1=function(e){return this.getPreviousX(e)},d.lossless.Decoder.prototype.select2=function(e){return this.getPreviousY(e)},d.lossless.Decoder.prototype.select3=function(e){return this.getPreviousXY(e)},d.lossless.Decoder.prototype.select4=function(e){return this.getPreviousX(e)+this.getPreviousY(e)-this.getPreviousXY(e)},d.lossless.Decoder.prototype.select5=function(e){return this.getPreviousX(e)+(this.getPreviousY(e)-this.getPreviousXY(e)>>1)},d.lossless.Decoder.prototype.select6=function(e){return this.getPreviousY(e)+(this.getPreviousX(e)-this.getPreviousXY(e)>>1)},d.lossless.Decoder.prototype.select7=function(e){return(this.getPreviousX(e)+this.getPreviousY(e))/2},d.lossless.Decoder.prototype.decodeRGB=function(i,t,e){var n,r,o,a,s,l,c,p;for(i[0]=this.selector(0),i[1]=this.selector(1),i[2]=this.selector(2),s=0;s<this.numComp;s+=1)for(a=this.qTab[s],r=this.acTab[s],o=this.dcTab[s],l=0;l<this.nBlock[s];l+=1){for(c=0;c<this.IDCT_Source.length;c+=1)this.IDCT_Source[c]=0;if(65280<=(n=this.getHuffmanValue(o,t,e)))return n;for(i[s]=this.IDCT_Source[0]=i[s]+this.getn(e,n,t,e),this.IDCT_Source[0]*=a[0],p=1;64>p;p+=1){if(65280<=(n=this.getHuffmanValue(r,t,e)))return n;if(p+=n>>4,0!=(15&n))this.IDCT_Source[d.lossless.Decoder.IDCT_P[p]]=this.getn(e,15&n,t,e)*a[p];else if(0==n>>4)break}}return 0},d.lossless.Decoder.prototype.decodeSingle=function(i,t,e){var n,r,o,a;for(this.restarting?(this.restarting=!1,i[0]=1<<this.frame.precision-1):i[0]=this.selector(),r=0;r<this.nBlock[0];r+=1){if(65280<=(n=this.getHuffmanValue(this.dcTab[0],t,e)))return n;if(o=this.getn(i,n,t,e),(a=o>>8)>=d.lossless.Decoder.RESTART_MARKER_BEGIN&&a<=d.lossless.Decoder.RESTART_MARKER_END)return a;i[0]+=o}return 0},d.lossless.Decoder.prototype.getHuffmanValue=function(a,t,e){var n,r;if(65535,8>e[0]?(t[0]<<=8,255===(r=this.stream.get8())&&(this.marker=this.stream.get8(),0!==this.marker&&(this.markerIndex=9)),t[0]|=r):e[0]-=8,0!=((n=a[t[0]>>e[0]])&d.lossless.Decoder.MSB)){if(0!==this.markerIndex)return this.markerIndex=0,65280|this.marker;t[0]&=65535>>16-e[0],t[0]<<=8,255===(r=this.stream.get8())&&(this.marker=this.stream.get8(),0!==this.marker&&(this.markerIndex=9)),t[0]|=r,n=a[256*(255&n)+(t[0]>>e[0])],e[0]+=8}if(e[0]+=8-(n>>8),0>e[0])throw new Error("index="+e[0]+" temp="+t[0]+" code="+n+" in HuffmanValue()");return e[0]<this.markerIndex?(this.markerIndex=0,65280|this.marker):(t[0]&=65535>>16-e[0],255&n)},d.lossless.Decoder.prototype.getn=function(a,t,e,n){var i,r;if(1,-1,65535,0===t)return 0;if(16===t)return 0<=a[0]?-32768:32768;if(n[0]-=t,0<=n[0]){if(n[0]<this.markerIndex&&!this.isLastPixel())return this.markerIndex=0,(65280|this.marker)<<8;i=e[0]>>n[0],e[0]&=65535>>16-n[0]}else{if(e[0]<<=8,255===(r=this.stream.get8())&&(this.marker=this.stream.get8(),0!==this.marker&&(this.markerIndex=9)),e[0]|=r,n[0]+=8,0>n[0]){if(0!==this.markerIndex)return this.markerIndex=0,(65280|this.marker)<<8;e[0]<<=8,255===(r=this.stream.get8())&&(this.marker=this.stream.get8(),0!==this.marker&&(this.markerIndex=9)),e[0]|=r,n[0]+=8}if(0>n[0])throw new Error("index="+n[0]+" in getn()");if(n[0]<this.markerIndex)return this.markerIndex=0,(65280|this.marker)<<8;i=e[0]>>n[0],e[0]&=65535>>16-n[0]}return i<1<<t-1&&(i+=1+(-1<<t)),i},d.lossless.Decoder.prototype.getPreviousX=function(e){return 0<this.xLoc?this.getter(this.yLoc*this.xDim+this.xLoc-1,e):0<this.yLoc?this.getPreviousY(e):1<<this.frame.precision-1},d.lossless.Decoder.prototype.getPreviousXY=function(e){return 0<this.xLoc&&0<this.yLoc?this.getter((this.yLoc-1)*this.xDim+this.xLoc-1,e):this.getPreviousY(e)},d.lossless.Decoder.prototype.getPreviousY=function(e){return 0<this.yLoc?this.getter((this.yLoc-1)*this.xDim+this.xLoc,e):this.getPreviousX(e)},d.lossless.Decoder.prototype.isLastPixel=function(){return this.xLoc===this.xDim-1&&this.yLoc===this.yDim-1},d.lossless.Decoder.prototype.outputSingle=function(e){this.xLoc<this.xDim&&this.yLoc<this.yDim&&(this.setter(this.yLoc*this.xDim+this.xLoc,this.mask&e[0]),this.xLoc+=1,this.xLoc>=this.xDim&&(this.yLoc+=1,this.xLoc=0))},d.lossless.Decoder.prototype.outputRGB=function(a){var t=this.yLoc*this.xDim+this.xLoc;this.xLoc<this.xDim&&this.yLoc<this.yDim&&(this.setter(t,a[0],0),this.setter(t,a[1],1),this.setter(t,a[2],2),this.xLoc+=1,this.xLoc>=this.xDim&&(this.yLoc+=1,this.xLoc=0))},d.lossless.Decoder.prototype.setValue16=function(a,t){this.outputData.setInt16(2*a,t,!0)},d.lossless.Decoder.prototype.getValue16=function(e){return this.outputData.getInt16(2*e,!0)},d.lossless.Decoder.prototype.setValue8=function(a,t){this.outputData.setInt8(a,t)},d.lossless.Decoder.prototype.getValue8=function(e){return this.outputData.getInt8(e)},d.lossless.Decoder.prototype.setValueRGB=function(a,t,e){this.outputData.setUint8(3*a+e,t)},d.lossless.Decoder.prototype.getValueRGB=function(a,t){return this.outputData.getUint8(3*a+t)},d.lossless.Decoder.prototype.readApp=function(){var a=0,t=this.stream.get16();for(a+=2;a<t;)this.stream.get8(),a+=1;return t},d.lossless.Decoder.prototype.readComment=function(){var a="",e=0,o;for(o=this.stream.get16(),e+=2;e<o;)a+=this.stream.get8(),e+=1;return a},d.lossless.Decoder.prototype.readNumber=function(){if(4!==this.stream.get16())throw new Error("ERROR: Define number format throw new IOException [Ld!=4]");return this.stream.get16()},"undefined"!==typeof a&&a.exports&&(a.exports=d.lossless.Decoder)},function(e){var a={Unkown:0,Grayscale:1,AdobeRGB:2,RGB:3,CYMK:4},o=function(){"use strict";function n(){}function g(c,t){for(var d=0,r=[],o=16,a,n;0<o&&!c[o-1];)o--;r.push({children:[],index:0});var i=r[0],l;for(a=0;a<o;a++){for(n=0;n<c[a];n++){for((i=r.pop()).children[i.index]=t[d];0<i.index;)i=r.pop();for(i.index++,r.push(i);r.length<=a;)r.push(l={children:[],index:0}),i.children[i.index]=l.children,i=l;d++}a+1<o&&(r.push(l={children:[],index:0}),i.children[i.index]=l.children,i=l)}return r[0].children}function y(a,t,e){return 64*((a.blocksPerLine+1)*t+e)}function e(i,t,e,n,l,F,a,o,s){function h(){if(0<S)return S--,1&x>>S;if(255==(x=i[t++])){var e=i[t++];if(e)throw"unexpected marker: "+(x<<8|e).toString(16)}return S=7,x>>>7}function O(a){for(var t=a,o;null!==(o=h());){if("number"==typeof(t=t[o]))return t;if("object"!=("undefined"===typeof t?"undefined":babelHelpers.typeof(t)))throw"invalid huffman sequence"}return null}function p(a){for(var t=0,e;0<a;){if(e=h(),null===e)return;t=t<<1|e,a--}return t}function d(a){var t=p(a);return t>=1<<a-1?t:t+(-1<<a)+1}e.precision,e.samplesPerLine,e.scanLines;var c=e.mcusPerLine,u=e.progressive,f=(e.maxH,e.maxV,t),x=0,S=0,E=0,T=0,M=n.length,P,m,_,g,A,v,I;I=u?0===F?0===o?function(a,t){var e=O(a.huffmanTableDC),o=0===e?0:d(e)<<s;a.blockData[t]=a.pred+=o}:function(a,t){a.blockData[t]|=h()<<s}:0===o?function(i,t){if(0<E)E--;else for(var e=F;e<=a;){var n=O(i.huffmanTableAC),r=15&n,o=n>>4;if(0!==r){var l=b[e+=o];i.blockData[t+l]=d(r)*(1<<s),e++}else{if(15>o){E=p(o)+(1<<o)-1;break}e+=16}}}:function(i,t){for(var e=F,n=0,r;e<=a;){switch(r=b[e],T){case 0:var o=O(i.huffmanTableAC),l=15&o;if(n=o>>4,0===l)15>n?(E=p(n)+(1<<n),T=4):(n=16,T=1);else{if(1!==l)throw"invalid ACn encoding";P=d(l),T=n?2:3}continue;case 1:case 2:i.blockData[t+r]?i.blockData[t+r]+=h()<<s:0==--n&&(T=2==T?3:0);break;case 3:i.blockData[t+r]?i.blockData[t+r]+=h()<<s:(i.blockData[t+r]=P<<s,T=0);break;case 4:i.blockData[t+r]&&(i.blockData[t+r]+=h()<<s);}e++}4===T&&0==--E&&(T=0)}:function(l,t){var e=O(l.huffmanTableDC),n=0===e?0:d(e);l.blockData[t]=l.pred+=n;for(var i=1;64>i;){var r=O(l.huffmanTableAC),o=15&r,a=r>>4;if(0!==o){var s=b[i+=a];l.blockData[t+s]=d(o),i++}else{if(15>a)break;i+=16}}};var w=0,R,C;C=1==M?n[0].blocksPerLine*n[0].blocksPerColumn:c*e.mcusPerColumn,l||(l=C);for(var L,D;w<C;){for(_=0;_<M;_++)n[_].pred=0;if(E=0,1==M)for(m=n[0],v=0;v<l;v++)!function(a,t,e){t(a,y(a,0|e/a.blocksPerLine,e%a.blocksPerLine))}(m,I,w),w++;else for(v=0;v<l;v++){for(_=0;_<M;_++)for(L=(m=n[_]).h,D=m.v,g=0;g<D;g++)for(A=0;A<L;A++)!function(a,t,e,n,r){t(a,y(a,(0|e/c)*a.v+n,e%c*a.h+r))}(m,I,w,g,A);w++}if(S=0,65280>=(R=i[t]<<8|i[t+1]))throw"marker was not found";if(!(65488<=R&&65495>=R))break;t+=2}return t-f}function t(_,t,e){var n=_.quantizationTable,T,i,r,P,a,s,l,g,y,v;for(v=0;64>v;v++)e[v]=_.blockData[t+v]*n[v];for(v=0;8>v;++v){var b=8*v;0!==e[1+b]||0!==e[2+b]||0!==e[3+b]||0!==e[4+b]||0!==e[5+b]||0!==e[6+b]||0!==e[7+b]?(T=f*e[0+b]+128>>8,i=f*e[4+b]+128>>8,r=e[2+b],P=e[6+b],a=m*(e[1+b]-e[7+b])+128>>8,g=m*(e[1+b]+e[7+b])+128>>8,s=e[3+b]<<4,l=e[5+b]<<4,y=T-i+1>>1,T=T+i+1>>1,i=y,y=r*d+P*p+128>>8,r=r*p-P*d+128>>8,P=y,y=a-l+1>>1,a=a+l+1>>1,l=y,y=g+s+1>>1,s=g-s+1>>1,g=y,y=T-P+1>>1,T=T+P+1>>1,P=y,y=i-r+1>>1,i=i+r+1>>1,r=y,y=a*u+g*h+2048>>12,a=a*h-g*u+2048>>12,g=y,y=s*c+l*w+2048>>12,s=s*w-l*c+2048>>12,l=y,e[0+b]=T+g,e[7+b]=T-g,e[1+b]=i+l,e[6+b]=i-l,e[2+b]=r+s,e[5+b]=r-s,e[3+b]=P+a,e[4+b]=P-a):(y=f*e[0+b]+512>>10,e[0+b]=y,e[1+b]=y,e[2+b]=y,e[3+b]=y,e[4+b]=y,e[5+b]=y,e[6+b]=y,e[7+b]=y)}for(v=0;8>v;++v){var x=v;0!==e[8+x]||0!==e[16+x]||0!==e[24+x]||0!==e[32+x]||0!==e[40+x]||0!==e[48+x]||0!==e[56+x]?(T=f*e[0+x]+2048>>12,i=f*e[32+x]+2048>>12,r=e[16+x],P=e[48+x],a=m*(e[8+x]-e[56+x])+2048>>12,g=m*(e[8+x]+e[56+x])+2048>>12,s=e[24+x],l=e[40+x],y=T-i+1>>1,T=T+i+1>>1,i=y,y=r*d+P*p+2048>>12,r=r*p-P*d+2048>>12,P=y,y=a-l+1>>1,a=a+l+1>>1,l=y,y=g+s+1>>1,s=g-s+1>>1,g=y,y=T-P+1>>1,T=T+P+1>>1,P=y,y=i-r+1>>1,i=i+r+1>>1,r=y,y=a*u+g*h+2048>>12,a=a*h-g*u+2048>>12,g=y,y=s*c+l*w+2048>>12,s=s*w-l*c+2048>>12,l=y,e[0+x]=T+g,e[56+x]=T-g,e[8+x]=i+l,e[48+x]=i-l,e[16+x]=r+s,e[40+x]=r-s,e[24+x]=P+a,e[32+x]=P-a):(y=f*e[v+0]+8192>>14,e[0+x]=y,e[8+x]=y,e[16+x]=y,e[24+x]=y,e[32+x]=y,e[40+x]=y,e[48+x]=y,e[56+x]=y)}for(v=0;64>v;++v){var S=t+v,E=e[v];E=E<=-2056/_.bitConversion?0:E>=2024/_.bitConversion?255/_.bitConversion:E+2056/_.bitConversion>>4,_.blockData[S]=E}}function r(o,i){for(var e=i.blocksPerLine,n=i.blocksPerColumn,r=new Int32Array(64),c=0;c<n;c++)for(var s=0;s<e;s++)t(i,y(i,c,s),r);return i.blockData}function o(e){return 0>=e?0:255<=e?255:0|e}var b=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),w=4017,c=799,h=3406,u=2276,p=1567,d=3784,f=5793,m=2896;return n.prototype={load:function(l){var s=function(e){this.parse(e),this.onload&&this.onload()}.bind(this);if(-1<l.indexOf("data:")){for(var e=l.indexOf("base64,")+7,t=atob(l.substring(e)),n=new Uint8Array(t.length),r=t.length-1;0<=r;r--)n[r]=t.charCodeAt(r);s(t)}else{var o=new XMLHttpRequest;o.open("GET",l,!0),o.responseType="arraybuffer",o.onload=function(){var e=new Uint8Array(o.response);s(e)}.bind(this),o.send(null)}},parse:function(l){function t(){var t=l[i]<<8|l[i+1];return i+=2,t}var i=0,n=(l.length,null),c=null,u=[],p=[],d=[],h=t(),m,o;if(65496!=h)throw"SOI not found";for(h=t();65497!=h;){var s,_;switch(h){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var f=function(){var a=t(),e=l.subarray(i,i+a-2);return i+=e.length,e}();65504===h&&74===f[0]&&70===f[1]&&73===f[2]&&70===f[3]&&0===f[4]&&(n={version:{major:f[5],minor:f[6]},densityUnits:f[7],xDensity:f[8]<<8|f[9],yDensity:f[10]<<8|f[11],thumbWidth:f[12],thumbHeight:f[13],thumbData:f.subarray(14,14+3*f[12]*f[13])}),65518===h&&65===f[0]&&100===f[1]&&111===f[2]&&98===f[3]&&101===f[4]&&0===f[5]&&(c={version:f[6],flags0:f[7]<<8|f[8],flags1:f[9]<<8|f[10],transformCode:f[11]});break;case 65499:for(var y=t()+i-2;i<y;){var v=l[i++],V=new Int32Array(64);if(0==v>>4)for(s=0;64>s;s++)V[b[s]]=l[i++];else{if(1!=v>>4)throw"DQT: invalid table spec";for(s=0;64>s;s++)V[b[s]]=t()}u[15&v]=V}break;case 65472:case 65473:case 65474:if(m)throw"Only single frame JPEGs supported";t(),(m={}).extended=65473===h,m.progressive=65474===h,m.precision=l[i++],m.scanLines=t(),m.samplesPerLine=t(),m.components=[],m.componentIds={};var w=l[i++],S=0,E=0,M;for(j=0;j<w;j++){M=l[i];var x=l[i+1]>>4,W=15&l[i+1];S<x&&(S=x),E<W&&(E=W);var X=l[i+2];_=m.components.push({h:x,v:W,quantizationTable:u[X],quantizationTableId:X,bitConversion:255/((1<<m.precision)-1)}),m.componentIds[M]=_-1,i+=3}m.maxH=S,m.maxV=E,function(l){for(var t=T(l.samplesPerLine/8/l.maxH),e=T(l.scanLines/8/l.maxV),n=0;n<l.components.length;n++){F=l.components[n];var i=T(T(l.samplesPerLine/8)*F.h/l.maxH),r=T(T(l.scanLines/8)*F.v/l.maxV),o=t*F.h,a=64*(e*F.v)*(o+1);F.blockData=new Int16Array(a),F.blocksPerLine=i,F.blocksPerColumn=r}l.mcusPerLine=t,l.mcusPerColumn=e}(m);break;case 65476:var q=t();for(j=2;j<q;){var I=l[i++],C=new Uint8Array(16),L=0;for(s=0;16>s;s++,i++)L+=C[s]=l[i];var R=new Uint8Array(L);for(s=0;s<L;s++,i++)R[s]=l[i];j+=17+L,(0==I>>4?d:p)[15&I]=g(C,R)}break;case 65501:t(),o=t();break;case 65498:t();var D=l[i++],O=[],F;for(j=0;j<D;j++){var k=m.componentIds[l[i++]];F=m.components[k];var U=l[i++];F.huffmanTableDC=d[U>>4],F.huffmanTableAC=p[15&U],O.push(F)}var N=l[i++],B=l[i++],z=l[i++],G=e(l,i,m,O,o,N,B,z>>4,15&z);i+=G;break;default:if(255==l[i-3]&&192<=l[i-2]&&254>=l[i-2]){i-=3;break}throw"unknown JPEG marker "+h.toString(16);}h=t()}switch(this.width=m.samplesPerLine,this.height=m.scanLines,this.jfif=n,this.adobe=c,this.components=[],m.components.length){case 1:this.colorspace=a.Grayscale;break;case 3:this.colorspace=this.adobe?a.AdobeRGB:a.RGB;break;case 4:this.colorspace=a.CYMK;break;default:this.colorspace=a.Unknown;}for(var j=0;j<m.components.length;j++)(F=m.components[j]).quantizationTable||null===F.quantizationTableId||(F.quantizationTable=u[F.quantizationTableId]),this.components.push({output:r(0,F),scaleX:F.h/m.maxH,scaleY:F.v/m.maxV,blocksPerLine:F.blocksPerLine,blocksPerColumn:F.blocksPerColumn,bitConversion:F.bitConversion})},getData16:function(i,t){if(1!==this.components.length)throw"Unsupported color mode";var e=this.width/i,c=this.height/t,d=0,u=this.components.length,p=new Uint16Array(i*t*u),h=new Uint16Array(8*((this.components[0].blocksPerLine<<3)*this.components[0].blocksPerColumn)),m,n,r,o,a,s;for(s=0;s<u;s++){for(var l=(m=this.components[s]).blocksPerLine,f=m.blocksPerColumn,v=l<<3,b=0,w=0,x,_;w<f;w++)for(var g=w<<3,S=0;S<l;S++){var E=y(m,w,S),d=0,M=S<<3;for(x=0;8>x;x++)for(b=(g+x)*v,_=0;8>_;_++)h[b+M+_]=m.output[E+d++]}n=m.scaleX*e,r=m.scaleY*c,d=s;var T;for(a=0;a<t;a++)for(o=0;o<i;o++)T=(0|a*r)*v+(0|o*n),p[d]=h[T],d+=u}return p},getData:function(i,t){var e=this.width/i,s=this.height/t,b=0,v=this.components.length,x=i*t*v,S=new Uint8Array(x),w=new Uint8Array(8*((this.components[0].blocksPerLine<<3)*this.components[0].blocksPerColumn)),E,n,r,M,a,l,c,h,u,p,d,f,m,_,g;for(l=0;l<v;l++){for(var N=(E=this.components[l]).blocksPerLine,P=E.blocksPerColumn,I=N<<3,C=0,L=0,R,T;L<P;L++)for(var A=L<<3,D=0;D<N;D++){var k=y(E,L,D),b=0,O=D<<3;for(R=0;8>R;R++)for(C=(A+R)*I,T=0;8>T;T++)w[C+O+T]=E.output[k+b++]*E.bitConversion}n=E.scaleX*e,r=E.scaleY*s,b=l;var F;for(a=0;a<t;a++)for(M=0;M<i;M++)F=(0|a*r)*I+(0|M*n),S[b]=w[F],b+=v}switch(v){case 1:case 2:break;case 3:if(g=!0,this.adobe&&this.adobe.transformCode?g=!0:void 0!==this.colorTransform&&(g=!!this.colorTransform),g)for(l=0;l<x;l+=v)c=S[l],h=S[l+1],f=o(c-179.456+1.402*(u=S[l+2])),m=o(c+135.459-.344*h-.714*u),_=o(c-226.816+1.772*h),S[l]=f,S[l+1]=m,S[l+2]=_;break;case 4:if(!this.adobe)throw"Unsupported color mode (4 components)";if(g=!1,this.adobe&&this.adobe.transformCode?g=!0:void 0!==this.colorTransform&&(g=!!this.colorTransform),g)for(l=0;l<x;l+=v)c=S[l],h=S[l+1],p=o(434.456-c-1.402*(u=S[l+2])),d=o(119.541-c+.344*h+.714*u),c=o(481.816-c-1.772*h),S[l]=p,S[l+1]=d,S[l+2]=c;break;default:throw"Unsupported color mode";}return S}},n}();"undefined"!==typeof e&&e.exports&&(e.exports=o)},function(e){"use strict";function n(e){PDFJS.verbosity>=PDFJS.VERBOSITY_LEVELS.infos&&console.log("Info: "+e)}function M(e){PDFJS.verbosity>=PDFJS.VERBOSITY_LEVELS.warnings&&console.log("Warning: "+e)}function P(a){if(1<arguments.length){var t=["Error:"];t.push.apply(t,arguments),console.log.apply(console,t),a=[].join.call(arguments," ")}else console.log("Error: "+a);throw console.log(o()),_.notify(m.unknown),new Error(a)}function o(){try{throw new Error}catch(e){return e.stack?e.stack.split("\n").slice(2).join("\n"):""}}function a(a,t,e){return Object.defineProperty(a,t,{value:e,enumerable:!0,configurable:!0,writable:!1}),e}function A(a){for(var t=1,e=0;a>t;)t<<=1,e++;return e}function r(a,t){return a[t]<<8|a[t+1]}function i(a,t){return(a[t]<<24|a[t+1]<<16|a[t+2]<<8|a[t+3])>>>0}function l(){var e=new Uint8Array(2);return e[0]=1,1===new Uint16Array(e.buffer)[0]}function s(){var e=document.createElement("canvas");return e.width=e.height=1,void 0!==e.getContext("2d").createImageData(1,1).data.buffer}function c(){var a={};return a.promise=new Promise(function(t,e){a.resolve=t,a.reject=e}),a}var d=function(){function l(){this.failOnCorruptedImage=!1}function c(a,t){a.x0=T(t.XOsiz/a.XRsiz),a.x1=T(t.Xsiz/a.XRsiz),a.y0=T(t.YOsiz/a.YRsiz),a.y1=T(t.Ysiz/a.YRsiz),a.width=a.x1-a.x0,a.height=a.y1-a.y0}function e(m,t){for(var e=m.SIZ,i=[],r=T((e.Xsiz-e.XTOsiz)/e.XTsiz),o=T((e.Ysiz-e.YTOsiz)/e.YTsiz),a=0,s;a<o;a++)for(var _=0;_<r;_++)(s={}).tx0=C(e.XTOsiz+_*e.XTsiz,e.XOsiz),s.ty0=C(e.YTOsiz+a*e.YTsiz,e.YOsiz),s.tx1=U(e.XTOsiz+(_+1)*e.XTsiz,e.Xsiz),s.ty1=U(e.YTOsiz+(a+1)*e.YTsiz,e.Ysiz),s.width=s.tx1-s.tx0,s.height=s.ty1-s.ty0,s.components=[],i.push(s);m.tiles=i;for(var l=0,c=e.Csiz;l<c;l++)for(var h=t[l],u=0,p=i.length,d;u<p;u++)d={},s=i[u],d.tcx0=T(s.tx0/h.XRsiz),d.tcy0=T(s.ty0/h.YRsiz),d.tcx1=T(s.tx1/h.XRsiz),d.tcy1=T(s.ty1/h.YRsiz),d.width=d.tcx1-d.tcx0,d.height=d.tcy1-d.tcy0,s.components[l]=d}function D(a,t,e){var o=t.codingStyleParameters,n={};return o.entropyCoderWithCustomPrecincts?(n.PPx=o.precinctsSizes[e].PPx,n.PPy=o.precinctsSizes[e].PPy):(n.PPx=15,n.PPy=15),n.xcb_=0<e?U(o.xcb,n.PPx-1):U(o.xcb,n.PPx),n.ycb_=0<e?U(o.ycb,n.PPy-1):U(o.ycb,n.PPy),n}function o(d,t,e){var n=1<<e.PPx,p=1<<e.PPy,u=0===t.resLevel,o=1<<e.PPx+(u?0:-1),m=1<<e.PPy+(u?0:-1),_=t.trx1>t.trx0?T(t.trx1/n)-B(t.trx0/n):0,h=t.try1>t.try0?T(t.try1/p)-B(t.try0/p):0;t.precinctParameters={precinctWidth:n,precinctHeight:p,numprecinctswide:_,numprecinctshigh:h,numprecincts:_*h,precinctWidthInSubband:o,precinctHeightInSubband:m}}function a(b,t,e){var n=e.xcb_,x=e.ycb_,v=1<<n,c=1<<x,h=t.tbx0>>n,u=t.tby0>>x,p=t.tbx1+v-1>>n,d=t.tby1+c-1>>x,f=t.resolution.precinctParameters,m=[],_=[],g,S,w,o;for(S=u;S<d;S++)for(g=h;g<p;g++)if((w={cbx:g,cby:S,tbx0:v*g,tby0:c*S,tbx1:v*(g+1),tby1:c*(S+1)}).tbx0_=C(t.tbx0,w.tbx0),w.tby0_=C(t.tby0,w.tby0),w.tbx1_=U(t.tbx1,w.tbx1),w.tby1_=U(t.tby1,w.tby1),o=B((w.tbx0_-t.tbx0)/f.precinctWidthInSubband)+B((w.tby0_-t.tby0)/f.precinctHeightInSubband)*f.numprecinctswide,w.precinctNumber=o,w.subbandType=t.type,w.Lblock=3,!(w.tbx1_<=w.tbx0_||w.tby1_<=w.tby0_)){m.push(w);var a=_[o];void 0===a?_[o]=a={cbxMin:g,cbyMin:S,cbxMax:g,cbyMax:S}:(g<a.cbxMin?a.cbxMin=g:g>a.cbxMax&&(a.cbxMax=g),S<a.cbyMin?a.cbxMin=S:S>a.cbyMax&&(a.cbyMax=S)),w.precinct=a}t.codeblockParameters={codeblockWidth:n,codeblockHeight:x,numcodeblockwide:p-h+1,numcodeblockhigh:d-u+1},t.codeblocks=m,t.precincts=_}function h(d,t,e){for(var p=[],u=d.subbands,r=0,o=u.length;r<o;r++)for(var a=u[r].codeblocks,s=0,l=a.length,c;s<l;s++)c=a[s],c.precinctNumber===t&&p.push(c);return{layerNumber:e,codeblocks:p}}function s(d){for(var t=d.SIZ,e=d.currentTile.index,u=d.tiles[e],i=u.codingStyleDefaultParameters.layersCount,r=t.Csiz,o=0,a=0;a<r;a++)o=C(o,u.components[a].codingStyleParameters.decompositionLevelsCount);var m=0,l=0,c=0,_=0;this.nextPacket=function(){for(;m<i;m++){for(;l<=o;l++){for(;c<r;c++){var a=u.components[c];if(!(l>a.codingStyleParameters.decompositionLevelsCount)){for(var t=a.resolutions[l],e=t.precinctParameters.numprecincts,n;_<e;)return n=h(t,_,m),_++,n;_=0}}c=0}l=0}}}function p(d){for(var t=d.SIZ,e=d.currentTile.index,u=d.tiles[e],i=u.codingStyleDefaultParameters.layersCount,r=t.Csiz,o=0,a=0;a<r;a++)o=C(o,u.components[a].codingStyleParameters.decompositionLevelsCount);var m=0,l=0,c=0,_=0;this.nextPacket=function(){for(;m<=o;m++){for(;l<i;l++){for(;c<r;c++){var a=u.components[c];if(!(m>a.codingStyleParameters.decompositionLevelsCount)){for(var t=a.resolutions[m],e=t.precinctParameters.numprecincts,n;_<e;)return n=h(t,_,l),_++,n;_=0}}c=0}l=0}}}function d(u){var t=u.SIZ,o=u.currentTile.index,_=u.tiles[o],a=_.codingStyleDefaultParameters.layersCount,l=t.Csiz,s=0,c,e,n,i;for(n=0;n<l;n++){var r=_.components[n];s=C(s,r.codingStyleParameters.decompositionLevelsCount)}var g=new Int32Array(s+1);for(e=0;e<=s;++e){var d=0;for(n=0;n<l;++n){var p=_.components[n].resolutions;e<p.length&&(d=C(d,p[e].precinctParameters.numprecincts))}g[e]=d}c=0,e=0,n=0,i=0,this.nextPacket=function(){for(;e<=s;e++){for(;i<g[e];i++){for(;n<l;n++){var r=_.components[n];if(!(e>r.codingStyleParameters.decompositionLevelsCount)){var t=r.resolutions[e],o=t.precinctParameters.numprecincts;if(!(i>=o)){for(;c<a;){var d=h(t,i,c);return c++,d}c=0}}}n=0}i=0}}}function m(u){var t=u.SIZ,e=u.currentTile.index,y=u.tiles[e],i=y.codingStyleDefaultParameters.layersCount,r=t.Csiz,o=f(y),a=o,s=0,l=0,c=0,b=0,p=0;this.nextPacket=function(){for(;p<a.maxNumHigh;p++){for(;b<a.maxNumWide;b++){for(;c<r;c++){for(var d=y.components[c],t=d.codingStyleParameters.decompositionLevelsCount;l<=t;l++){var e=d.resolutions[l],n=o.components[c].resolutions[l],u=g(b,p,n,a,e);if(null!==u){for(;s<i;){var m=h(e,u,s);return s++,m}s=0}}l=0}c=0}b=0}}}function _(d){var t=d.SIZ,e=d.currentTile.index,u=d.tiles[e],n=u.codingStyleDefaultParameters.layersCount,r=t.Csiz,o=f(u),a=0,i=0,l=0,s=0,c=0;this.nextPacket=function(){for(;l<r;++l){for(var p=u.components[l],t=o.components[l],e=p.codingStyleParameters.decompositionLevelsCount;c<t.maxNumHigh;c++){for(;s<t.maxNumWide;s++){for(;i<=e;i++){var y=p.resolutions[i],d=t.resolutions[i],f=g(s,c,d,t,y);if(null!==f){for(;a<n;){var m=h(y,f,a);return a++,m}a=0}}i=0}s=0}c=0}}}function g(l,t,e,n,i){var r=l*n.minWidth,o=t*n.minHeight;if(0!=r%e.width||0!=o%e.height)return null;var a=o/e.width*i.precinctParameters.numprecinctswide;return r/e.height+a}function f(x){for(var t=x.components.length,e=b,S=b,w=0,E=0,T=Array(t),M=0;M<t;M++){for(var s=x.components[M],l=s.codingStyleParameters.decompositionLevelsCount,c=Array(l+1),P=b,A=b,L=0,I=0,R=1,m=l;0<=m;--m){var _=s.resolutions[m],g=R*_.precinctParameters.precinctWidth,D=R*_.precinctParameters.precinctHeight;P=U(P,g),A=U(A,D),L=C(L,_.precinctParameters.numprecinctswide),I=C(I,_.precinctParameters.numprecinctshigh),c[m]={width:g,height:D},R<<=1}e=U(e,P),S=U(S,A),w=C(w,L),E=C(E,I),T[M]={resolutions:c,minWidth:P,minHeight:A,maxNumWide:L,maxNumHigh:I}}return{components:T,minWidth:e,minHeight:S,maxNumWide:w,maxNumHigh:E}}function N(g){for(var t=g.SIZ,e=g.currentTile.index,n=g.tiles[e],i=t.Csiz,r=0;r<i;r++){for(var l=n.components[r],c=l.codingStyleParameters.decompositionLevelsCount,h=[],u=[],f=0;f<=c;f++){var y=D(g,l,f),v={},P=1<<c-f;v.trx0=T(l.tcx0/P),v.try0=T(l.tcy0/P),v.trx1=T(l.tcx1/P),v.try1=T(l.tcy1/P),v.resLevel=f,o(g,v,y),h.push(v);var w;if(0===f)(w={}).type="LL",w.tbx0=T(l.tcx0/P),w.tby0=T(l.tcy0/P),w.tbx1=T(l.tcx1/P),w.tby1=T(l.tcy1/P),w.resolution=v,a(g,w,y),u.push(w),v.subbands=[w];else{var x=1<<c-f+1,S=[];(w={}).type="HL",w.tbx0=T(l.tcx0/x-.5),w.tby0=T(l.tcy0/x),w.tbx1=T(l.tcx1/x-.5),w.tby1=T(l.tcy1/x),w.resolution=v,a(g,w,y),u.push(w),S.push(w),(w={}).type="LH",w.tbx0=T(l.tcx0/x),w.tby0=T(l.tcy0/x-.5),w.tbx1=T(l.tcx1/x),w.tby1=T(l.tcy1/x-.5),w.resolution=v,a(g,w,y),u.push(w),S.push(w),(w={}).type="HH",w.tbx0=T(l.tcx0/x-.5),w.tby0=T(l.tcy0/x-.5),w.tbx1=T(l.tcx1/x-.5),w.tby1=T(l.tcy1/x-.5),w.resolution=v,a(g,w,y),u.push(w),S.push(w),v.subbands=S}}l.resolutions=h,l.subbands=u}var E=n.codingStyleDefaultParameters.progressionOrder;switch(E){case 0:n.packetsIterator=new s(g);break;case 1:n.packetsIterator=new p(g);break;case 2:n.packetsIterator=new d(g);break;case 3:n.packetsIterator=new m(g);break;case 4:n.packetsIterator=new _(g);break;default:throw new Error("JPX Error: Unsupported progression order "+E);}}function z(l,P,B,t){function n(e){for(;h<e;){if(B+s>=P.length)throw new Error("Unexpected EOF");var t=P[B+s];s++,u?(g=g<<7|t,h+=7,u=!1):(g=g<<8|t,h+=8),255===t&&(u=!0)}return h-=e,g>>>h&(1<<e)-1}function r(e){return 255===P[B+s-1]&&P[B+s]===e?(o(1),!0):255===P[B+s]&&P[B+s+1]===e&&(o(2),!0)}function o(e){s+=e}function a(){h=0,u&&(s++,u=!1)}for(var s=0,h=0,u=!1,i=l.currentTile.index,d=l.tiles[i],p=l.COD.sopMarkerUsed,m=l.COD.ephMarkerUsed,_=d.packetsIterator,g;s<t;)try{a(),p&&r(145)&&o(4);var c=_.nextPacket();if(void 0===c)return;if(!n(1))continue;for(var f=c.layerNumber,y=[],b=0,x=c.codeblocks.length,S;b<x;b++){var z=(S=c.codeblocks[b]).precinct,E=S.cbx-z.cbxMin,M=S.cby-z.cbyMin,T=!1,I=!1;if(void 0!==S.included)T=!!n(1);else{var C,L;if(void 0!==(z=S.precinct).inclusionTree)C=z.inclusionTree;else{var R=z.cbxMax-z.cbxMin+1,D=z.cbyMax-z.cbyMin+1;C=new O(R,D),L=new v(R,D),z.inclusionTree=C,z.zeroBitPlanesTree=L}for(C.reset(E,M,f);;){if(s>=P.length)return;if(C.isAboveThreshold())break;if(C.isKnown())C.nextLevel();else if(n(1)){if(C.setKnown(),C.isLeaf()){S.included=!0,T=I=!0;break}C.nextLevel()}else C.incrementValue()}}if(T){if(I){for((L=z.zeroBitPlanesTree).reset(E,M);;){if(s>=P.length)return;if(!n(1))L.incrementValue();else if(!L.nextLevel())break}S.zeroBitPlanes=L.value}for(var k=function(){if(0===n(1))return 1;if(0===n(1))return 2;var e=n(2);return 3>e?e+3:31>(e=n(5))?e+6:(e=n(7))+37}();n(1);)S.Lblock++;var G=A(k),F=n((k<1<<G?G-1:G)+S.Lblock);y.push({codeblock:S,codingpasses:k,dataLength:F})}}for(a(),m&&r(146);0<y.length;){var H=y.shift();void 0===(S=H.codeblock).data&&(S.data=[]),S.data.push({data:P,start:B+s,end:B+s+H.dataLength,codingpasses:H.codingpasses}),s+=H.dataLength}}catch(e){return}return s}function t(m,t,e,n,i,r,o,a){for(var s=n.tbx0,l=n.tby0,c=n.tbx1-n.tbx0,h=n.codeblocks,I="H"===n.type.charAt(0)?1:0,p="H"===n.type.charAt(1)?t:0,d=0,f=h.length;d<f;++d){var _=h[d],g=_.tbx1_-_.tbx0_,y=_.tby1_-_.tby0_;if(0!==g&&0!==y&&void 0!==_.data){var v,b;v=new V(g,y,_.subbandType,_.zeroBitPlanes,r),b=2;var w=_.data,M=0,T=0,A,W,S;for(A=0,W=w.length;A<W;A++)M+=(S=w[A]).end-S.start,T+=S.codingpasses;var E=new Int16Array(M),P=0;for(A=0,W=w.length;A<W;A++){var C=(S=w[A]).data.subarray(S.start,S.end);E.set(C,P),P+=C.length}var L=new u(E,0,M);for(v.setDecoder(L),A=0;A<T;A++)0===b?v.runSignificancePropogationPass():1===b?v.runMagnitudeRefinementPass():2===b?(v.runCleanupPass(),a&&v.checkSegmentationSymbol()):void 0,b=(b+1)%3;var R=_.tbx0_-s+(_.tby0_-l)*c,F=v.coefficentsSign,U=v.coefficentsMagnitude,N=v.bitsDecoded,B=o?0:.5,z,D,X;P=0;var O="LL"!==n.type;for(A=0;A<y;A++){var G=2*(0|R/c)*(t-c)+I+p;for(z=0;z<g;z++){if(0!==(D=U[P])){D=(D+B)*i,0!==F[P]&&(D=-D),X=N[P];var j=O?G+(R<<1):R;m[j]=o&&X>=r?D:D*(1<<r-X)}R++,P++}R+=c-g}}}}function y(T,C,e){for(var n=C.components[e],i=n.codingStyleParameters,r=n.quantizationParameters,o=i.decompositionLevelsCount,a=r.SPqcds,s=r.scalarExpounded,l=r.guardBits,c=i.segmentationSymbolUsed,h=T.components[e].precision,u=i.reversibleTransformation,p=u?new L:new I,d=[],f=0,m=0;m<=o;m++){for(var _=n.resolutions[m],g=_.trx1-_.trx0,R=_.try1-_.try0,D=new Float32Array(g*R),F=0,w=_.subbands.length;F<w;F++){var k,E;s?(k=a[f].mu,E=a[f].epsilon,f++):(k=a[0].mu,E=a[0].epsilon+(0<m?1-m:0));var M=_.subbands[F],A=x[M.type];t(D,g,R,M,u?1:S(2,h+A-E)*(1+k/2048),l+E-1,u,c)}d.push({width:g,height:R,items:D})}var P=p.calculate(d,n.tcx0,n.tcy0);return{left:n.tcx0,top:n.tcy0,width:P.width,height:P.height,items:P.items}}function w(z){for(var t=z.SIZ,e=z.components,n=t.Csiz,i=[],r=0,o=z.tiles.length;r<o;r++){var a=z.tiles[r],l=[],c;for(c=0;c<n;c++)l[c]=y(z,a,c);var s=l[0];if(F=e[0].isSigned)h=new Int16Array(s.items.length*n);else var h=new Uint16Array(s.items.length*n);var G={left:s.left,top:s.top,width:s.width,height:s.height,items:h},P=0,I,p,d,f,m,_,g,H,v,b,w,x,V,M,T;if(a.codingStyleDefaultParameters.multipleComponentTransform){var A=4===n,W=l[0].items,L=l[1].items,R=l[2].items,D=A?l[3].items:null;p=.5+(128<<(I=e[0].precision-8)),f=-(m=.5*(d=255*(1<<I)));var k=a.components[0],O=n-3;if(g=W.length,k.codingStyleParameters.reversibleTransformation)for(_=0;_<g;_++,P+=O)H=W[_]+p,v=L[_],w=(x=H-((b=R[_])+v>>2))+b,V=x+v,h[P++]=0>=w?0:w>=d?255:w>>I,h[P++]=0>=x?0:x>=d?255:x>>I,h[P++]=0>=V?0:V>=d?255:V>>I;else for(_=0;_<g;_++,P+=O)H=W[_]+p,v=L[_],w=H+1.402*(b=R[_]),x=H-.34413*v-.71414*b,V=H+1.772*v,h[P++]=0>=w?0:w>=d?255:w>>I,h[P++]=0>=x?0:x>=d?255:x>>I,h[P++]=0>=V?0:V>=d?255:V>>I;if(A)for(_=0,P=3;_<g;_++,P+=4)M=D[_],h[P]=M<=f?0:M>=m?255:M+p>>I}else for(c=0;c<n;c++)if(8===e[c].precision)for(j=l[c].items,p=.5+(128<<(I=e[c].precision-8)),f=-(d=127.5*(1<<I)),P=c,_=0,g=j.length;_<g;_++)T=j[_],h[P]=T<=f?0:T>=d?255:T+p>>I,P+=n;else{var F=e[c].isSigned,j=l[c].items;if(F)for(P=c,_=0,g=j.length;_<g;_++)h[P]=j[_],P+=n;else{p=.5+(128<<(I=e[c].precision-8));var N=S(2,e[c].precision)-1;for(P=c,_=0,g=j.length;_<g;_++)T=j[_],h[P]=C(U(T+p,N),0),P+=n}}i.push(G)}return i}function E(l,t){for(var e=l.SIZ.Csiz,n=l.tiles[t],i=0;i<e;i++){var r=n.components[i],o=void 0===l.currentTile.QCC[i]?l.currentTile.QCD:l.currentTile.QCC[i];r.quantizationParameters=o;var a=void 0===l.currentTile.COC[i]?l.currentTile.COD:l.currentTile.COC[i];r.codingStyleParameters=a}n.codingStyleDefaultParameters=l.currentTile.COD}var x={LL:0,LH:1,HL:1,HH:2};l.prototype={parse:function(c){if(65359!==r(c,0))for(var t=0,e=c.length;t<e;){var m=8,o=i(c,t),a=i(c,t+4);if(t+=m,1===o&&(o=4294967296*i(c,t)+i(c,t+4),t+=8,m+=8),0===o&&(o=e-t+m),o<m)throw new Error("JPX Error: Invalid box field size");var s=o-m,l=!0;switch(a){case 1785737832:l=!1;break;case 1668246642:var u=c[t];if(c[t+1],c[t+2],1===u){var p=i(c,t+3);switch(p){case 16:case 17:case 18:break;default:M("Unknown colorspace "+p);}}else 2===u&&n("ICC profile not supported");break;case 1785737827:this.parseCodestream(c,t,t+s);break;case 1783636e3:218793738!==i(c,t)&&M("Invalid JP2 signature");break;case 1783634458:case 1718909296:case 1920099697:case 1919251232:case 1768449138:break;default:M("Unsupported header type "+a+" ("+F(255&a>>24,255&a>>16,255&a>>8,255&a)+")");}l&&(t+=s)}else this.parseCodestream(c,0,c.length)},parseImageProperties:function(l){for(var t=l.getByte();0<=t;)if(65361===(t<<8|(t=l.getByte()))){l.skip(4);var e=l.getInt32()>>>0,n=l.getInt32()>>>0,i=l.getInt32()>>>0,r=l.getInt32()>>>0;l.skip(16);var o=l.getUint16();return this.width=e-i,this.height=n-r,this.componentsCount=o,void(this.bitsPerComponent=8)}throw new Error("JPX Error: No size marker found in JPX stream")},parseCodestream:function(n,t,h){var o={};try{for(var a=!1,s=t,l;s+1<h;){l=r(n,s),s+=2;var u=0,y,p,d,f,m,_;switch(l){case 65359:o.mainHeader=!0;break;case 65497:break;case 65361:u=r(n,s);var g={};g.Xsiz=i(n,s+4),g.Ysiz=i(n,s+8),g.XOsiz=i(n,s+12),g.YOsiz=i(n,s+16),g.XTsiz=i(n,s+20),g.YTsiz=i(n,s+24),g.XTOsiz=i(n,s+28),g.YTOsiz=i(n,s+32);var b=r(n,s+36);g.Csiz=b;var x=[];y=s+38;for(var v=0,S;v<b;v++)S={precision:1+(127&n[y]),isSigned:!!(128&n[y]),XRsiz:n[y+1],YRsiz:n[y+1]},c(S,g),x.push(S);o.SIZ=g,o.components=x,e(o,x),o.QCC=[],o.COC=[];break;case 65372:u=r(n,s);var T={};switch(y=s+2,31&(p=n[y++])){case 0:f=8,m=!0;break;case 1:f=16,m=!1;break;case 2:f=16,m=!0;break;default:throw new Error("JPX Error: Invalid SQcd value "+p);}for(T.noQuantization=8===f,T.scalarExpounded=m,T.guardBits=p>>5,d=[];y<u+s;){var P={};8===f?(P.epsilon=n[y++]>>3,P.mu=0):(P.epsilon=n[y]>>3,P.mu=(7&n[y])<<8|n[y+1],y+=2),d.push(P)}T.SPqcds=d,o.mainHeader?o.QCD=T:(o.currentTile.QCD=T,o.currentTile.QCC=[]);break;case 65373:u=r(n,s);var A={};y=s+2;var C;switch(257>o.SIZ.Csiz?C=n[y++]:(C=r(n,y),y+=2),31&(p=n[y++])){case 0:f=8,m=!0;break;case 1:f=16,m=!1;break;case 2:f=16,m=!0;break;default:throw new Error("JPX Error: Invalid SQcd value "+p);}for(A.noQuantization=8===f,A.scalarExpounded=m,A.guardBits=p>>5,d=[];y<u+s;)P={},8===f?(P.epsilon=n[y++]>>3,P.mu=0):(P.epsilon=n[y]>>3,P.mu=(7&n[y])<<8|n[y+1],y+=2),d.push(P);A.SPqcds=d,o.mainHeader?o.QCC[C]=A:o.currentTile.QCC[C]=A;break;case 65362:u=r(n,s);var L={};y=s+2;var I=n[y++];L.entropyCoderWithCustomPrecincts=!!(1&I),L.sopMarkerUsed=!!(2&I),L.ephMarkerUsed=!!(4&I),L.progressionOrder=n[y++],L.layersCount=r(n,y),y+=2,L.multipleComponentTransform=n[y++],L.decompositionLevelsCount=n[y++],L.xcb=2+(15&n[y++]),L.ycb=2+(15&n[y++]);var R=n[y++];if(L.selectiveArithmeticCodingBypass=!!(1&R),L.resetContextProbabilities=!!(2&R),L.terminationOnEachCodingPass=!!(4&R),L.verticalyStripe=!!(8&R),L.predictableTermination=!!(16&R),L.segmentationSymbolUsed=!!(32&R),L.reversibleTransformation=n[y++],L.entropyCoderWithCustomPrecincts){for(var D=[],k;y<u+s;)k=n[y++],D.push({PPx:15&k,PPy:k>>4});L.precinctsSizes=D}var F=[];if(L.selectiveArithmeticCodingBypass&&F.push("selectiveArithmeticCodingBypass"),L.resetContextProbabilities&&F.push("resetContextProbabilities"),L.terminationOnEachCodingPass&&F.push("terminationOnEachCodingPass"),L.verticalyStripe&&F.push("verticalyStripe"),L.predictableTermination&&F.push("predictableTermination"),0<F.length)throw a=!0,new Error("JPX Error: Unsupported COD options ("+F.join(", ")+")");o.mainHeader?o.COD=L:(o.currentTile.COD=L,o.currentTile.COC=[]);break;case 65424:u=r(n,s),(_={}).index=r(n,s+2),_.length=i(n,s+4),_.dataEnd=_.length+s-2,_.partIndex=n[s+8],_.partsCount=n[s+9],o.mainHeader=!1,0===_.partIndex&&(_.COD=o.COD,_.COC=o.COC.slice(0),_.QCD=o.QCD,_.QCC=o.QCC.slice(0)),o.currentTile=_;break;case 65427:0===(_=o.currentTile).partIndex&&(E(o,_.index),N(o)),z(o,n,s,u=_.dataEnd-s);break;case 65365:case 65367:case 65368:case 65380:u=r(n,s);break;case 65363:throw new Error("JPX Error: Codestream code 0xFF53 (COC) is not implemented");default:throw new Error("JPX Error: Unknown codestream code: "+l.toString(16));}s+=u}}catch(e){if(a||this.failOnCorruptedImage)throw e;M("Trying to recover from "+e.message)}this.tiles=w(o),this.width=o.SIZ.Xsiz-o.SIZ.XOsiz,this.height=o.SIZ.Ysiz-o.SIZ.YOsiz,this.componentsCount=o.SIZ.Csiz}};var v=function(){function e(a,o){var l=A(C(a,o))+1;this.levels=[];for(var n=0,i;n<l;n++)i={width:a,height:o,items:[]},this.levels.push(i),a=T(a/2),o=T(o/2)}return e.prototype={reset:function(a,t){for(var e=0,i=0,r,n;e<this.levels.length;){if(n=a+t*(r=this.levels[e]).width,void 0!==r.items[n]){i=r.items[n];break}r.index=n,a>>=1,t>>=1,e++}e--,(r=this.levels[e]).items[r.index]=i,this.currentLevel=e,delete this.value},incrementValue:function(){var e=this.levels[this.currentLevel];e.items[e.index]++},nextLevel:function(){var a=this.currentLevel,t=this.levels[a],e=t.items[t.index];return 0>--a?(this.value=e,!1):(this.currentLevel=a,t=this.levels[a],t.items[t.index]=e,!0)}},e}(),O=function(){function e(l,d){var p=A(C(l,d))+1;this.levels=[];for(var n=0;n<p;n++){for(var i=new Uint8Array(l*d),u=new Uint8Array(l*d),m=0,a=i.length;m<a;m++)i[m]=0,u[m]=0;var s={width:l,height:d,items:i,status:u};this.levels.push(s),l=T(l/2),d=T(d/2)}}return e.prototype={reset:function(a,t,e){this.currentStopValue=e;for(var n=0;n<this.levels.length;){var i=this.levels[n],r=a+t*i.width;i.index=r,a>>=1,t>>=1,n++}this.currentLevel=this.levels.length-1,this.minValue=this.levels[this.currentLevel].items[0]},incrementValue:function(){var e=this.levels[this.currentLevel];e.items[e.index]=e.items[e.index]+1,e.items[e.index]>this.minValue&&(this.minValue=e.items[e.index])},nextLevel:function(){var a=this.currentLevel;if(0>--a)return!1;this.currentLevel=a;var t=this.levels[a];return t.items[t.index]<this.minValue?t.items[t.index]=this.minValue:t.items[t.index]>this.minValue&&(this.minValue=t.items[t.index]),!0},isLeaf:function(){return 0===this.currentLevel},isAboveThreshold:function(){var a=this.currentLevel,t=this.levels[a];return t.items[t.index]>this.currentStopValue},isKnown:function(){var a=this.currentLevel,t=this.levels[a];return 0<t.status[t.index]},setKnown:function(){var a=this.currentLevel,t=this.levels[a];t.status[t.index]=1}},e}(),V=function(){function a(i,p,r,o,a){this.width=i,this.height=p,this.contextLabelTable="HH"===r?n:"HL"===r?e:d;var s=i*p;this.neighborsSignificance=new Uint8Array(s),this.coefficentsSign=new Uint8Array(s),this.coefficentsMagnitude=14<a?new Uint32Array(s):6<a?new Uint16Array(s):new Uint8Array(s),this.processingFlags=new Uint8Array(s);var l=new Uint8Array(s);if(0!==o)for(var c=0;c<s;c++)l[c]=o;this.bitsDecoded=l,this.reset()}var d=new Uint8Array([0,5,8,0,3,7,8,0,4,7,8,0,0,0,0,0,1,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8]),e=new Uint8Array([0,3,4,0,5,7,7,0,8,8,8,0,0,0,0,0,1,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8]),n=new Uint8Array([0,1,2,0,1,2,2,0,2,2,2,0,0,0,0,0,3,4,5,0,4,5,5,0,5,5,5,0,0,0,0,0,6,7,7,0,7,7,7,0,7,7,7,0,0,0,0,0,8,8,8,0,8,8,8,0,8,8,8,0,0,0,0,0,8,8,8,0,8,8,8,0,8,8,8]);return a.prototype={setDecoder:function(e){this.decoder=e},reset:function(){this.contexts=new Int8Array(19),this.contexts[0]=8,this.contexts[17]=92,this.contexts[18]=6},setNeighborsSignificance:function(c,t,e){var n=this.neighborsSignificance,r=this.width,o=this.height,a=0<t,s=t+1<r,l;0<c&&(l=e-r,a&&(n[l-1]+=16),s&&(n[l+1]+=16),n[l]+=4),c+1<o&&(l=e+r,a&&(n[l-1]+=16),s&&(n[l+1]+=16),n[l]+=4),a&&(n[e-1]+=1),s&&(n[e+1]+=1),n[e]|=128},runSignificancePropogationPass:function(){for(var g=this.decoder,t=this.width,e=this.height,n=this.coefficentsMagnitude,i=this.coefficentsSign,r=this.neighborsSignificance,o=this.processingFlags,a=this.contexts,s=this.contextLabelTable,l=this.bitsDecoded,c=0;c<e;c+=4)for(var h=0;h<t;h++)for(var u=c*t+h,p=0,d;4>p&&(d=c+p,!(d>=e));p++,u+=t)if(o[u]&=-2,!n[u]&&r[u]){var f=s[r[u]];if(g.readBit(a,f)){var m=this.decodeSignBit(d,h,u);i[u]=m,n[u]=1,this.setNeighborsSignificance(d,h,u),o[u]|=2}l[u]++,o[u]|=1}},decodeSignBit:function(m,t,e){var n=this.width,c=this.height,_=this.coefficentsMagnitude,u=this.coefficentsSign,p,i,r,o,a,s;o=0<t&&0!==_[e-1],t+1<n&&0!==_[e+1]?(r=u[e+1],p=o?1-r-(i=u[e-1]):1-r-r):p=o?1-(i=u[e-1])-i:0;var l=3*p;return o=0<m&&0!==_[e-n],m+1<c&&0!==_[e+n]?(r=u[e+n],p=o?1-r-(i=u[e-n])+l:1-r-r+l):p=o?1-(i=u[e-n])-i+l:l,0<=p?(a=9+p,s=this.decoder.readBit(this.contexts,a)):(a=9-p,s=1^this.decoder.readBit(this.contexts,a)),s},runMagnitudeRefinementPass:function(){for(var _=this.decoder,e=this.width,n=this.height,i=this.coefficentsMagnitude,r=this.neighborsSignificance,o=this.contexts,a=this.bitsDecoded,s=this.processingFlags,l=e*n,c=0,u;c<l;c=u){u=U(l,c+4*e);for(var t=0;t<e;t++)for(var p=c+t;p<u;p+=e)if(i[p]&&0==(1&s[p])){var d=16;0!=(2&s[p])&&(s[p]^=2,d=0===(127&r[p])?15:14);var h=_.readBit(o,d);i[p]=i[p]<<1|h,a[p]++,s[p]|=1}}},runCleanupPass:function(){for(var T=this.decoder,e=this.width,n=this.height,i=this.neighborsSignificance,r=this.coefficentsMagnitude,o=this.coefficentsSign,a=this.contexts,s=this.contextLabelTable,l=this.bitsDecoded,c=this.processingFlags,h=e,u=2*e,p=3*e,d=0,f;d<n;d=f){f=U(d+4,n);for(var t=d*e,m=d+3<n,_=0;_<e;_++){var g=t+_,v=0,b=g,w=d,x;if(m&&0===c[g]&&0===c[g+h]&&0===c[g+u]&&0===c[g+p]&&0===i[g]&&0===i[g+h]&&0===i[g+u]&&0===i[g+p]){if(!T.readBit(a,18)){l[g]++,l[g+h]++,l[g+u]++,l[g+p]++;continue}0!==(v=T.readBit(a,17)<<1|T.readBit(a,17))&&(w=d+v,b+=v*e),x=this.decodeSignBit(w,_,b),o[b]=x,r[b]=1,this.setNeighborsSignificance(w,_,b),c[b]|=2,b=g;for(var y=d;y<=w;y++,b+=e)l[b]++;v++}for(w=d+v;w<f;w++,b+=e)if(!r[b]&&0==(1&c[b])){var S=s[i[b]];1===T.readBit(a,S)&&(x=this.decodeSignBit(w,_,b),o[b]=x,r[b]=1,this.setNeighborsSignificance(w,_,b),c[b]|=2),l[b]++}}}},checkSegmentationSymbol:function(){var a=this.decoder,t=this.contexts;if(10!==(a.readBit(t,17)<<3|a.readBit(t,17)<<2|a.readBit(t,17)<<1|a.readBit(t,17)))throw new Error("JPX Error: Invalid segmentation symbol")}},a}(),P=function(){function e(){}return e.prototype.calculate=function(a,t,e){for(var n=a[0],i=1,r=a.length;i<r;i++)n=this.iterate(n,a[i],t,e);return n},e.prototype.extend=function(l,t,e){var n=t-1,i=t+1,r=t+e-2,o=t+e;l[n--]=l[i++],l[o++]=l[r--],l[n--]=l[i++],l[o++]=l[r--],l[n--]=l[i++],l[o++]=l[r--],l[n]=l[i],l[o]=l[r]},e.prototype.iterate=function(x,t,e,n){var i=x.width,h=x.height,u=x.items,p=t.width,S=t.height,E=t.items,T,r,o,a,s,l;for(o=0,T=0;T<h;T++)for(a=2*T*p,r=0;r<i;r++,o++,a+=2)E[a]=u[o];u=x.items=null;var c=new Float32Array(p+8);if(!(1===p))for(l=0,o=0;l<S;l++,o+=p)c.set(E.subarray(o,o+p),4),this.extend(c,4,p),this.filter(c,4,p),E.set(c.subarray(4,4+p),o);else if(0!=(1&e))for(l=0,o=0;l<S;l++,o+=p)E[o]*=.5;var _=16,g=[];for(T=0;T<_;T++)g.push(new Float32Array(S+8));var y=0,b;if(!(x=4+S,1===S))for(s=0;s<p;s++){if(0===y){for(_=U(p-s,_),o=s,a=4;a<x;o+=p,a++)for(b=0;b<_;b++)g[b][a]=E[o+b];y=_}var v=g[--y];if(this.extend(v,4,S),this.filter(v,4,S),0===y)for(o=s-_+1,a=4;a<x;o+=p,a++)for(b=0;b<_;b++)E[o+b]=g[b][a]}else if(0!=(1&n))for(s=0;s<p;s++)E[s]*=.5;return{width:p,height:S,items:E}},e}(),I=function(){function e(){P.call(this)}return e.prototype=Object.create(P.prototype),e.prototype.filter=function(d,t,e){var n=e>>1,s=-1.586134342059924,l=-.052980118572961,c=.882911075530934,m=.443506852043971,u=1.230174104914001,p,i,r,o;for(p=(t|=0)-3,i=n+4;i--;p+=2)d[p]*=.8128930661159609;for(r=m*d[(p=t-2)-1],i=n+3;i--&&(o=m*d[p+1],d[p]=u*d[p]-r-o,i--);p+=2)r=m*d[(p+=2)+1],d[p]=u*d[p]-r-o;for(r=c*d[(p=t-1)-1],i=n+2;i--&&(o=c*d[p+1],d[p]-=r+o,i--);p+=2)r=c*d[(p+=2)+1],d[p]-=r+o;for(r=l*d[(p=t)-1],i=n+1;i--&&(o=l*d[p+1],d[p]-=r+o,i--);p+=2)r=l*d[(p+=2)+1],d[p]-=r+o;if(0!==n)for(r=s*d[(p=t+1)-1],i=n;i--&&(o=s*d[p+1],d[p]-=r+o,i--);p+=2)r=s*d[(p+=2)+1],d[p]-=r+o},e}(),L=function(){function e(){P.call(this)}return e.prototype=Object.create(P.prototype),e.prototype.filter=function(a,t,e){var n=e>>1,o,i;for(o=t|=0,i=n+1;i--;o+=2)a[o]-=a[o-1]+a[o+1]+2>>2;for(o=t+1,i=n;i--;o+=2)a[o]+=a[o-1]+a[o+1]>>1},e}();return l}(),u=function(){function a(a,o,e){this.data=a,this.bp=o,this.dataEnd=e,this.chigh=a[o],this.clow=0,this.byteIn(),this.chigh=65535&this.chigh<<7|127&this.clow>>9,this.clow=65535&this.clow<<7,this.ct-=7,this.a=32768}var c=[{qe:22017,nmps:1,nlps:1,switchFlag:1},{qe:13313,nmps:2,nlps:6,switchFlag:0},{qe:6145,nmps:3,nlps:9,switchFlag:0},{qe:2753,nmps:4,nlps:12,switchFlag:0},{qe:1313,nmps:5,nlps:29,switchFlag:0},{qe:545,nmps:38,nlps:33,switchFlag:0},{qe:22017,nmps:7,nlps:6,switchFlag:1},{qe:21505,nmps:8,nlps:14,switchFlag:0},{qe:18433,nmps:9,nlps:14,switchFlag:0},{qe:14337,nmps:10,nlps:14,switchFlag:0},{qe:12289,nmps:11,nlps:17,switchFlag:0},{qe:9217,nmps:12,nlps:18,switchFlag:0},{qe:7169,nmps:13,nlps:20,switchFlag:0},{qe:5633,nmps:29,nlps:21,switchFlag:0},{qe:22017,nmps:15,nlps:14,switchFlag:1},{qe:21505,nmps:16,nlps:14,switchFlag:0},{qe:20737,nmps:17,nlps:15,switchFlag:0},{qe:18433,nmps:18,nlps:16,switchFlag:0},{qe:14337,nmps:19,nlps:17,switchFlag:0},{qe:13313,nmps:20,nlps:18,switchFlag:0},{qe:12289,nmps:21,nlps:19,switchFlag:0},{qe:10241,nmps:22,nlps:19,switchFlag:0},{qe:9217,nmps:23,nlps:20,switchFlag:0},{qe:8705,nmps:24,nlps:21,switchFlag:0},{qe:7169,nmps:25,nlps:22,switchFlag:0},{qe:6145,nmps:26,nlps:23,switchFlag:0},{qe:5633,nmps:27,nlps:24,switchFlag:0},{qe:5121,nmps:28,nlps:25,switchFlag:0},{qe:4609,nmps:29,nlps:26,switchFlag:0},{qe:4353,nmps:30,nlps:27,switchFlag:0},{qe:2753,nmps:31,nlps:28,switchFlag:0},{qe:2497,nmps:32,nlps:29,switchFlag:0},{qe:2209,nmps:33,nlps:30,switchFlag:0},{qe:1313,nmps:34,nlps:31,switchFlag:0},{qe:1089,nmps:35,nlps:32,switchFlag:0},{qe:673,nmps:36,nlps:33,switchFlag:0},{qe:545,nmps:37,nlps:34,switchFlag:0},{qe:321,nmps:38,nlps:35,switchFlag:0},{qe:273,nmps:39,nlps:36,switchFlag:0},{qe:133,nmps:40,nlps:37,switchFlag:0},{qe:73,nmps:41,nlps:38,switchFlag:0},{qe:37,nmps:42,nlps:39,switchFlag:0},{qe:21,nmps:43,nlps:40,switchFlag:0},{qe:9,nmps:44,nlps:41,switchFlag:0},{qe:5,nmps:45,nlps:42,switchFlag:0},{qe:1,nmps:45,nlps:43,switchFlag:0},{qe:22017,nmps:46,nlps:46,switchFlag:0}];return a.prototype={byteIn:function(){var a=this.data,t=this.bp;255===a[t]?143<a[t+1]?(this.clow+=65280,this.ct=8):(t++,this.clow+=a[t]<<9,this.ct=7,this.bp=t):(t++,this.clow+=t<this.dataEnd?a[t]<<8:65280,this.ct=8,this.bp=t),65535<this.clow&&(this.chigh+=this.clow>>16,this.clow&=65535)},readBit:function(e,t){var n=e[t]>>1,r=1&e[t],o=c[n],a=o.qe,s=this.a-a,l;if(this.chigh<a)s<a?(s=a,l=r,n=o.nmps):(s=a,l=1^r,1===o.switchFlag&&(r=l),n=o.nlps);else{if(this.chigh-=a,0!=(32768&s))return this.a=s,r;s<a?(l=1^r,1===o.switchFlag&&(r=l),n=o.nlps):(l=r,n=o.nmps)}do 0===this.ct&&this.byteIn(),s<<=1,this.chigh=65535&this.chigh<<1|1&this.clow>>15,this.clow=65535&this.clow<<1,this.ct--;while(0==(32768&s));return this.a=s,e[t]=n<<1|r,l}},a}(),p="undefined"==typeof window?this:window;p.PDFJS||(p.PDFJS={}),p.PDFJS.pdfBug=!1,PDFJS.VERBOSITY_LEVELS={errors:0,warnings:1,infos:5},PDFJS.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};var m=PDFJS.UNSUPPORTED_FEATURES={unknown:"unknown",forms:"forms",javaScript:"javaScript",smask:"smask",shadingPattern:"shadingPattern",font:"font"},_=PDFJS.UnsupportedManager=function(){var a=[];return{listen:function(t){a.push(t)},notify:function(t){M("Unsupported feature \""+t+"\"");for(var e=0,o=a.length;e<o;e++)a[e](t)}}}();PDFJS.isValidUrl=function(a,o){if(!a)return!1;var e=/^[a-z][a-z0-9+\-.]*(?=:)/i.exec(a);if(!e)return o;switch(e=e[0].toLowerCase()){case"http":case"https":case"ftp":case"mailto":case"tel":return!0;default:return!1;}},PDFJS.shadow=a,PDFJS.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};var h=function(){function e(a,o){this.name="PasswordException",this.message=a,this.code=o}return e.prototype=new Error,e.constructor=e,e}();PDFJS.PasswordException=h;var g=function(){function e(a,o){this.name="UnknownErrorException",this.message=a,this.details=o}return e.prototype=new Error,e.constructor=e,e}();PDFJS.UnknownErrorException=g;var f=function(){function e(e){this.name="InvalidPDFException",this.message=e}return e.prototype=new Error,e.constructor=e,e}();PDFJS.InvalidPDFException=f;var y=function(){function e(e){this.name="MissingPDFException",this.message=e}return e.prototype=new Error,e.constructor=e,e}();PDFJS.MissingPDFException=y;var x=function(){function e(a,o){this.name="UnexpectedResponseException",this.message=a,this.status=o}return e.prototype=new Error,e.constructor=e,e}();PDFJS.UnexpectedResponseException=x,function(){function e(e){this.message=e}e.prototype=new Error,e.prototype.name="NotImplementedException",e.constructor=e}(),function(){function e(a,o){this.begin=a,this.end=o,this.message="Missing data ["+a+", "+o+")"}e.prototype=new Error,e.prototype.name="MissingDataException",e.constructor=e}(),function(){function e(e){this.message=e}e.prototype=new Error,e.prototype.name="XRefParseException",e.constructor=e}(),Object.defineProperty(PDFJS,"isLittleEndian",{configurable:!0,get:function(){return a(PDFJS,"isLittleEndian",l())}}),Object.defineProperty(PDFJS,"hasCanvasTypedArrays",{configurable:!0,get:function(){return a(PDFJS,"hasCanvasTypedArrays",s())}}),!function(){function a(a,r){this.buffer=a,this.byteLength=a.length,this.length=void 0===r?this.byteLength>>2:r,o(this.length)}function t(a){return{get:function(){var t=this.buffer,e=a<<2;return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0},set:function(t){var e=this.buffer,o=a<<2;e[o]=255&t,e[o+1]=255&t>>8,e[o+2]=255&t>>16,e[o+3]=255&t>>>24}}}function o(o){for(;e<o;)Object.defineProperty(a.prototype,e,t(e)),e++}a.prototype=Object.create(null);var e=0}();var v=PDFJS.Util=function(){function l(){}var a=["rgb(",0,",",0,",",0,")"];return l.makeCssRgb=function(e,t,o){return a[1]=e,a[3]=t,a[5]=o,a.join("")},l.transform=function(a,t){return[a[0]*t[0]+a[2]*t[1],a[1]*t[0]+a[3]*t[1],a[0]*t[2]+a[2]*t[3],a[1]*t[2]+a[3]*t[3],a[0]*t[4]+a[2]*t[5]+a[4],a[1]*t[4]+a[3]*t[5]+a[5]]},l.applyTransform=function(a,t){return[a[0]*t[0]+a[1]*t[2]+t[4],a[0]*t[1]+a[1]*t[3]+t[5]]},l.applyInverseTransform=function(a,t){var e=t[0]*t[3]-t[1]*t[2];return[(a[0]*t[3]-a[1]*t[2]+t[2]*t[5]-t[4]*t[3])/e,(-a[0]*t[1]+a[1]*t[0]+t[4]*t[1]-t[5]*t[0])/e]},l.getAxialAlignedBoundingBox=function(t,e){var n=l.applyTransform(t,e),i=l.applyTransform(t.slice(2,4),e),r=l.applyTransform([t[0],t[3]],e),o=l.applyTransform([t[2],t[1]],e);return[U(n[0],i[0],r[0],o[0]),U(n[1],i[1],r[1],o[1]),C(n[0],i[0],r[0],o[0]),C(n[1],i[1],r[1],o[1])]},l.inverseTransform=function(a){var t=a[0]*a[3]-a[1]*a[2];return[a[3]/t,-a[1]/t,-a[2]/t,a[0]/t,(a[2]*a[5]-a[4]*a[3])/t,(a[4]*a[1]-a[5]*a[0])/t]},l.apply3dTransform=function(a,t){return[a[0]*t[0]+a[1]*t[1]+a[2]*t[2],a[3]*t[0]+a[4]*t[1]+a[5]*t[2],a[6]*t[0]+a[7]*t[1]+a[8]*t[2]]},l.singularValueDecompose2dScale=function(l){var t=[l[0],l[2],l[1],l[3]],e=l[0]*t[0]+l[1]*t[2],n=l[0]*t[1]+l[1]*t[3],i=l[2]*t[0]+l[3]*t[2],r=l[2]*t[1]+l[3]*t[3],o=(e+r)/2,a=O((e+r)*(e+r)-4*(e*r-i*n))/2;return[O(o+a||1),O(o-a||1)]},l.normalizeRect=function(a){var t=a.slice(0);return a[0]>a[2]&&(t[0]=a[2],t[2]=a[0]),a[1]>a[3]&&(t[1]=a[3],t[3]=a[1]),t},l.intersect=function(t,e){function n(a,t){return a-t}var i=[t[0],t[2],e[0],e[2]].sort(n),r=[t[1],t[3],e[1],e[3]].sort(n),o=[];return t=l.normalizeRect(t),e=l.normalizeRect(e),(i[0]===t[0]&&i[1]===e[0]||i[0]===e[0]&&i[1]===t[0])&&(o[0]=i[1],o[2]=i[2],(r[0]===t[1]&&r[1]===e[1]||r[0]===e[1]&&r[1]===t[1])&&(o[1]=r[1],o[3]=r[2],o))},l.sign=function(e){return 0>e?-1:1},l.appendToArray=function(a,t){Array.prototype.push.apply(a,t)},l.prependToArray=function(a,t){Array.prototype.unshift.apply(a,t)},l.extendObj=function(a,t){for(var e in t)a[e]=t[e]},l.getInheritableProperty=function(a,t){for(;a&&!a.has(t);)a=a.get("Parent");return a?a.get(t):null},l.inherit=function(a,t,e){for(var o in a.prototype=Object.create(t.prototype),a.prototype.constructor=a,e)a.prototype[o]=e[o]},l.loadScript=function(a,t){var e=document.createElement("script"),o=!1;e.setAttribute("src",a),t&&(e.onload=function(){o||t(),o=!0}),document.getElementsByTagName("head")[0].appendChild(e)},l}();PDFJS.PageViewport=function(){function a(_,g,e,n,i,r){this.viewBox=_,this.scale=g,this.rotation=e,this.offsetX=n,this.offsetY=i;var o=(_[2]+_[0])/2,h=(_[3]+_[1])/2,u,a,s,y;switch(e%=360,e=0>e?e+360:e){case 180:u=-1,a=0,s=0,y=1;break;case 90:u=0,a=1,s=1,y=0;break;case 270:u=0,a=-1,s=-1,y=0;break;default:u=1,a=0,s=0,y=-1;}r&&(s=-s,y=-y);var b,p,d,f;0===u?(b=N(h-_[1])*g+n,p=N(o-_[0])*g+i,d=N(_[3]-_[1])*g,f=N(_[2]-_[0])*g):(b=N(o-_[0])*g+n,p=N(h-_[1])*g+i,d=N(_[2]-_[0])*g,f=N(_[3]-_[1])*g),this.transform=[u*g,a*g,s*g,y*g,b-u*g*o-s*g*h,p-a*g*o-y*g*h],this.width=d,this.height=f,this.fontScale=g}return a.prototype={clone:function(t){var e="scale"in(t=t||{})?t.scale:this.scale,o="rotation"in t?t.rotation:this.rotation;return new a(this.viewBox.slice(),e,o,this.offsetX,this.offsetY,t.dontFlip)},convertToViewportPoint:function(a,t){return v.applyTransform([a,t],this.transform)},convertToViewportRectangle:function(a){var t=v.applyTransform([a[0],a[1]],this.transform),e=v.applyTransform([a[2],a[3]],this.transform);return[t[0],t[1],e[0],e[1]]},convertToPdfPoint:function(a,t){return v.applyInverseTransform([a,t],this.transform)}},a}(),PDFJS.createPromiseCapability=c,function(){function d(e){this._status=a,this._handlers=[];try{e.call(this,this._resolve.bind(this),this._reject.bind(this))}catch(e){this._reject(e)}}if(p.Promise)return"function"!=typeof p.Promise.all&&(p.Promise.all=function(a){var l=0,i=[],t=new p.Promise(function(a,t){r=a,e=t}),r,e;return a.forEach(function(a,n){l++,a.then(function(e){i[n]=e,0===--l&&r(i)},e)}),0===l&&r(i),t}),"function"!=typeof p.Promise.resolve&&(p.Promise.resolve=function(a){return new p.Promise(function(t){t(a)})}),"function"!=typeof p.Promise.reject&&(p.Promise.reject=function(a){return new p.Promise(function(t,e){e(a)})}),void("function"!=typeof p.Promise.prototype.catch&&(p.Promise.prototype.catch=function(e){return p.Promise.prototype.then(void 0,e)}));var a=0,l=2,t={handlers:[],running:!1,unhandledRejections:[],pendingRejectionCheck:!1,scheduleHandlers:function(e){e._status!==a&&(this.handlers=this.handlers.concat(e._handlers),e._handlers=[],this.running||(this.running=!0,setTimeout(this.runHandlers.bind(this),0)))},runHandlers:function(){for(var a=Date.now()+1;0<this.handlers.length;){var t=this.handlers.shift(),e=t.thisPromise._status,o=t.thisPromise._value;try{1===e?"function"==typeof t.onResolve&&(o=t.onResolve(o)):"function"==typeof t.onReject&&(o=t.onReject(o),e=1,t.thisPromise._unhandledRejection&&this.removeUnhandeledRejection(t.thisPromise))}catch(a){e=l,o=a}if(t.nextPromise._updateStatus(e,o),Date.now()>=a)break}0<this.handlers.length?setTimeout(this.runHandlers.bind(this),0):this.running=!1},addUnhandledRejection:function(e){this.unhandledRejections.push({promise:e,time:Date.now()}),this.scheduleRejectionCheck()},removeUnhandeledRejection:function(a){a._unhandledRejection=!1;for(var t=0;t<this.unhandledRejections.length;t++)this.unhandledRejections[t].promise===a&&(this.unhandledRejections.splice(t),t--)},scheduleRejectionCheck:function(){this.pendingRejectionCheck||(this.pendingRejectionCheck=!0,setTimeout(function(){this.pendingRejectionCheck=!1;for(var a=Date.now(),t=0;t<this.unhandledRejections.length;t++)if(500<a-this.unhandledRejections[t].time){var e=this.unhandledRejections[t].promise._value,o="Unhandled rejection: "+e;e.stack&&(o+="\n"+e.stack),M(o),this.unhandledRejections.splice(t),t--}this.unhandledRejections.length&&this.scheduleRejectionCheck()}.bind(this),500))}};d.all=function(t){var n=new d(function(a,t){s=a,i=t}),o=t.length,a=[],s,i;if(0===o)return s(a),n;for(var e=0,r=t.length;e<r;++e){var c=t[e],p=function(r){return function(t){n._status!==l&&(a[r]=t,0===--o&&s(a))}}(e);d.isPromise(c)?c.then(p,function(e){n._status!==l&&(a=[],i(e))}):p(c)}return n},d.isPromise=function(e){return e&&"function"==typeof e.then},d.resolve=function(a){return new d(function(e){e(a)})},d.reject=function(a){return new d(function(e,t){t(a)})},d.prototype={_status:null,_value:null,_handlers:null,_unhandledRejection:null,_updateStatus:function(a,e){1!==this._status&&this._status!==l&&(1===a&&d.isPromise(e)?e.then(this._updateStatus.bind(this,1),this._updateStatus.bind(this,l)):(this._status=a,this._value=e,a===l&&0===this._handlers.length&&(this._unhandledRejection=!0,t.addUnhandledRejection(this)),t.scheduleHandlers(this)))},_resolve:function(e){this._updateStatus(1,e)},_reject:function(e){this._updateStatus(l,e)},then:function(a,o){var i=new d(function(a,t){this.resolve=a,this.reject=t});return this._handlers.push({thisPromise:this,onResolve:a,onReject:o,nextPromise:i}),t.scheduleHandlers(this),i},catch:function(e){return this.then(void 0,e)}},p.Promise=d}(),!function(){function a(a,o,e){for(;a.length<e;)a+=o;return a}(function(){this.started={},this.times=[],this.enabled=!0}).prototype={time:function(e){this.enabled&&(e in this.started&&M("Timer is already running for "+e),this.started[e]=Date.now())},timeEnd:function(e){this.enabled&&(e in this.started||M("Timer has not been started for "+e),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e])},toString:function(){var t=this.times,i="",r=0,o,e;for(o=0,e=t.length;o<e;++o){var n=t[o].name;n.length>r&&(r=n.length)}for(o=0,e=t.length;o<e;++o){var c=t[o],s=c.end-c.start;i+=a(c.name," ",r)+" "+s+"ms\n"}return i}}}(),PDFJS.createBlob=function(a,t){if("undefined"!=typeof Blob)return new Blob([a],{type:t});var o=new MozBlobBuilder;return o.append(a),o.getBlob(t)},PDFJS.createObjectURL=function(){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return function(t,e){if(!PDFJS.disableCreateObjectURL&&"undefined"!=typeof URL&&URL.createObjectURL){var u=PDFJS.createBlob(t,e);return URL.createObjectURL(u)}for(var i="data:"+e+";base64,",r=0,o=t.length;r<o;r+=3){var a=255&t[r],s=255&t[r+1],l=255&t[r+2],c=r+1<o?(15&s)<<2|l>>6:64,p=r+2<o?63&l:64;i+=n[a>>2]+n[(3&a)<<4|s>>4]+n[c]+n[p]}return i}}(),function(a,o){this.name=a,this.comObj=o,this.callbackIndex=1,this.postMessageTransfers=!0;var e=this.callbacksCapabilities={},n=this.actionHandler={};n.console_log=[function(e){console.log.apply(console,e)}],n.console_error=[function(e){console.error.apply(console,e)}],n._unsupported_feature=[function(e){_.notify(e)}],o.onmessage=function(i){var c=i.data;if(c.isReply){var t=c.callbackId;if(c.callbackId in e){var a=e[t];delete e[t],"error"in c?a.reject(c.error):a.resolve(c.data)}else P("Cannot resolve callback "+t)}else if(c.action in n){var r=n[c.action];c.callbackId?Promise.resolve().then(function(){return r[0].call(r[1],c.data)}).then(function(e){o.postMessage({isReply:!0,callbackId:c.callbackId,data:e})},function(e){o.postMessage({isReply:!0,callbackId:c.callbackId,error:e})}):r[0].call(r[1],c.data)}else P("Unknown action from worker: "+c.action)}}.prototype={on:function(a,t,e){var o=this.actionHandler;o[a]&&P("There is already an actionName called \""+a+"\""),o[a]=[t,e]},send:function(a,o,r){this.postMessage({action:a,data:o},r)},sendWithPromise:function(a,r,l){var n=this.callbackIndex++,s=c();this.callbacksCapabilities[n]=s;try{this.postMessage({action:a,data:r,callbackId:n},l)}catch(e){s.reject(e)}return s.promise},postMessage:function(a,t){t&&this.postMessageTransfers?this.comObj.postMessage(a,t):this.comObj.postMessage(a)}},"undefined"!==typeof e&&e.exports&&(e.exports=d)},function(c,t,e){"use strict";function d(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function i(a,o){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o&&("object"==("undefined"===typeof o?"undefined":babelHelpers.typeof(o))||"function"==typeof o)?o:a}function r(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof o?"undefined":babelHelpers.typeof(o)));a.prototype=Object.create(o&&o.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(a,o):a.__proto__=o)}var o=e(11),a=e(0),n=function(l){function t(e,r){d(this,t);var o=i(this,l.call(this));o._id=r,o._url=e.url,o._header={},o._buffer=null;try{new TextDecoder().decode(e.mhdBuffer).split("\n").forEach(function(a){var t=a.split("=");2===t.length&&(o._header[t[0].trim()]=t[1].trim())}),o._header.DimSize=o._header.DimSize.split(" "),o._header.ElementSpacing=o._header.ElementSpacing.split(" "),o._header.TransformMatrix=o._header.TransformMatrix.split(" "),o._header.Offset=o._header.Offset.split(" "),o._buffer=e.rawBuffer}catch(e){window.console.log("ooops... :(")}return o}return r(t,l),t.prototype.rightHanded=function(){var e=this._header.AnatomicalOrientation;return this._rightHanded="RAS"===e||"RPI"===e||"LPS"===e||"LAI"===e,this._rightHanded},t.prototype.seriesInstanceUID=function(){return this._url},t.prototype.numberOfFrames=function(){return parseInt(this._header.DimSize[2],10)},t.prototype.sopInstanceUID=function(){return 0<arguments.length&&void 0!==arguments[0]?arguments[0]:0},t.prototype.rows=function(){return 0<arguments.length&&void 0!==arguments[0]&&arguments[0],parseInt(this._header.DimSize[1],10)},t.prototype.columns=function(){return 0<arguments.length&&void 0!==arguments[0]&&arguments[0],parseInt(this._header.DimSize[0],10)},t.prototype.pixelType=function(){return 0<arguments.length&&void 0!==arguments[0]&&arguments[0],0},t.prototype.bitsAllocated=function(){0<arguments.length&&void 0!==arguments[0]&&arguments[0];var e=1;return"MET_UCHAR"===this._header.ElementType||"MET_CHAR"===this._header.ElementType?e=8:"MET_USHORT"===this._header.ElementType||"MET_SHORT"===this._header.ElementType?e=16:"MET_UFLOAT"!==this._header.ElementType&&"MET_FLOAT"!==this._header.ElementType||(e=32),e},t.prototype.pixelSpacing=function(){return 0<arguments.length&&void 0!==arguments[0]&&arguments[0],[parseFloat(this._header.ElementSpacing[1],10),parseFloat(this._header.ElementSpacing[0],10),parseFloat(this._header.ElementSpacing[2],10)]},t.prototype.imageOrientation=function(){0<arguments.length&&void 0!==arguments[0]&&arguments[0];var o=this._header.AnatomicalOrientation.match(/L/)?-1:1,t=this._header.AnatomicalOrientation.match(/P/)?-1:1,e=new a.f(parseFloat(this._header.TransformMatrix[0])*o,parseFloat(this._header.TransformMatrix[1])*t,parseFloat(this._header.TransformMatrix[2]));e.normalize();var r=new a.f(parseFloat(this._header.TransformMatrix[3])*o,parseFloat(this._header.TransformMatrix[4])*t,parseFloat(this._header.TransformMatrix[5]));return r.normalize(),[e.x,e.y,e.z,r.x,r.y,r.z]},t.prototype.imagePosition=function(){return 0<arguments.length&&void 0!==arguments[0]&&arguments[0],[parseFloat(this._header.Offset[0]),parseFloat(this._header.Offset[1]),parseFloat(this._header.Offset[2])]},t.prototype.extractPixelData=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;return this._decompressUncompressed(e)},t.prototype._decompressUncompressed=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=this._buffer,e=this.numberOfChannels(),o=this.rows(a)*this.columns(a)*e;this.rightHanded()||(a=this.numberOfFrames()-1-a);var n=a*o;return"MET_CHAR"===this._header.ElementType?new Int8Array(t,n,o):"MET_UCHAR"===this._header.ElementType?new Uint8Array(t,n,o):"MET_SHORT"===this._header.ElementType?(n*=2,new Int16Array(t,n,o)):"MET_USHORT"===this._header.ElementType?(n*=2,new Uint16Array(t,n,o)):"MET_FLOAT"===this._header.ElementType?(n*=4,new Float32Array(t,n,o)):void 0},t}(o.a);t.a=n},function(a,o,e){"use strict";var l=l||{};l.NIFTI1=l.NIFTI1||e(80),l.NIFTI2=l.NIFTI2||e(162),l.Utils=l.Utils||e(28);var n=n||e(19);l.isNIFTI1=function(a){var t,e,n,r;return t=new DataView(a),e=t.getUint8(l.NIFTI1.MAGIC_NUMBER_LOCATION),n=t.getUint8(l.NIFTI1.MAGIC_NUMBER_LOCATION+1),r=t.getUint8(l.NIFTI1.MAGIC_NUMBER_LOCATION+2),e===l.NIFTI1.MAGIC_NUMBER[0]&&n===l.NIFTI1.MAGIC_NUMBER[1]&&r===l.NIFTI1.MAGIC_NUMBER[2]},l.isNIFTI2=function(a){var t,e,n,r;return t=new DataView(a),e=t.getUint8(l.NIFTI2.MAGIC_NUMBER_LOCATION),n=t.getUint8(l.NIFTI2.MAGIC_NUMBER_LOCATION+1),r=t.getUint8(l.NIFTI2.MAGIC_NUMBER_LOCATION+2),e===l.NIFTI2.MAGIC_NUMBER[0]&&n===l.NIFTI2.MAGIC_NUMBER[1]&&r===l.NIFTI2.MAGIC_NUMBER[2]},l.isNIFTI=function(e){return l.isNIFTI1(e)||l.isNIFTI2(e)},l.isCompressed=function(a){var t,e,o;if(a){if(t=new DataView(a),e=t.getUint8(0),o=t.getUint8(1),e===l.Utils.GUNZIP_MAGIC_COOKIE1)return!0;if(o===l.Utils.GUNZIP_MAGIC_COOKIE2)return!0}return!1},l.decompress=function(e){return n.inflate(e).buffer},l.readHeader=function(a){var t=null;return l.isCompressed(a)&&(a=l.decompress(a)),l.isNIFTI1(a)?t=new l.NIFTI1:l.isNIFTI2(a)&&(t=new l.NIFTI2),t?t.readHeader(a):console.error("That file does not appear to be NIFTI!"),t},l.hasExtension=function(e){return 0!=e.extensionFlag[0]},l.readImage=function(a,t){var e=a.vox_offset,n=1,i=1;a.dims[4]&&(n=a.dims[4]),a.dims[5]&&(i=a.dims[5]);var r=a.dims[1]*a.dims[2]*a.dims[3]*n*i*(a.numBitsPerVoxel/8);return t.slice(e,e+r)},l.readExtension=function(a,t){var e=a.getExtensionLocation(),o=a.extensionSize;return t.slice(e,e+o)},l.readExtensionData=function(a,t){var e=a.getExtensionLocation(),o=a.extensionSize;return t.slice(e+8,e+o-8)},"undefined"!==typeof a&&a.exports&&(a.exports=l)},function(a,o,e){"use strict";var l=l||{};l.Utils=l.Utils||e(28),l.NIFTI1=l.NIFTI1||e(80),l.NIFTI2=l.NIFTI2||function(){this.littleEndian=!1,this.dim_info=0,this.dims=[],this.intent_p1=0,this.intent_p2=0,this.intent_p3=0,this.intent_code=0,this.datatypeCode=0,this.numBitsPerVoxel=0,this.slice_start=0,this.slice_end=0,this.slice_code=0,this.pixDims=[],this.vox_offset=0,this.scl_slope=1,this.scl_inter=0,this.xyzt_units=0,this.cal_max=0,this.cal_min=0,this.slice_duration=0,this.toffset=0,this.description="",this.aux_file="",this.intent_name="",this.qform_code=0,this.sform_code=0,this.quatern_b=0,this.quatern_c=0,this.quatern_d=0,this.qoffset_x=0,this.qoffset_y=0,this.qoffset_z=0,this.affine=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],this.magic=0,this.extensionFlag=[0,0,0,0]},l.NIFTI2.MAGIC_COOKIE=540,l.NIFTI2.MAGIC_NUMBER_LOCATION=4,l.NIFTI2.MAGIC_NUMBER=[110,43,50,0,13,10,26,10],l.NIFTI2.prototype.readHeader=function(i){var t=new DataView(i),a=l.Utils.getIntAt(t,0,this.littleEndian),s,e,n,r;if(a!==l.NIFTI2.MAGIC_COOKIE&&(this.littleEndian=!0,a=l.Utils.getIntAt(t,0,this.littleEndian)),a!==l.NIFTI2.MAGIC_COOKIE)throw new Error("This does not appear to be a NIFTI file!");for(this.datatypeCode=l.Utils.getShortAt(t,12,this.littleEndian),this.numBitsPerVoxel=l.Utils.getShortAt(t,14,this.littleEndian),s=0;8>s;s+=1)r=16+8*s,this.dims[s]=l.Utils.getLongAt(t,r,this.littleEndian);for(this.intent_p1=l.Utils.getDoubleAt(t,80,this.littleEndian),this.intent_p2=l.Utils.getDoubleAt(t,88,this.littleEndian),this.intent_p3=l.Utils.getDoubleAt(t,96,this.littleEndian),s=0;8>s;s+=1)r=104+8*s,this.pixDims[s]=l.Utils.getDoubleAt(t,r,this.littleEndian);for(this.vox_offset=l.Utils.getLongAt(t,168,this.littleEndian),this.scl_slope=l.Utils.getDoubleAt(t,176,this.littleEndian),this.scl_inter=l.Utils.getDoubleAt(t,184,this.littleEndian),this.cal_max=l.Utils.getDoubleAt(t,192,this.littleEndian),this.cal_min=l.Utils.getDoubleAt(t,200,this.littleEndian),this.slice_duration=l.Utils.getDoubleAt(t,208,this.littleEndian),this.toffset=l.Utils.getDoubleAt(t,216,this.littleEndian),this.slice_start=l.Utils.getLongAt(t,224,this.littleEndian),this.slice_end=l.Utils.getLongAt(t,232,this.littleEndian),this.description=l.Utils.getStringAt(t,240,320),this.aux_file=l.Utils.getStringAt(t,320,344),this.qform_code=l.Utils.getIntAt(t,344,this.littleEndian),this.sform_code=l.Utils.getIntAt(t,348,this.littleEndian),this.quatern_b=l.Utils.getDoubleAt(t,352,this.littleEndian),this.quatern_c=l.Utils.getDoubleAt(t,360,this.littleEndian),this.quatern_d=l.Utils.getDoubleAt(t,368,this.littleEndian),this.qoffset_x=l.Utils.getDoubleAt(t,376,this.littleEndian),this.qoffset_y=l.Utils.getDoubleAt(t,384,this.littleEndian),this.qoffset_z=l.Utils.getDoubleAt(t,392,this.littleEndian),e=0;3>e;e+=1)for(n=0;4>n;n+=1)r=400+8*(4*e+n),this.affine[e][n]=l.Utils.getDoubleAt(t,r,this.littleEndian);this.affine[3][0]=0,this.affine[3][1]=0,this.affine[3][2]=0,this.affine[3][3]=1,this.slice_code=l.Utils.getIntAt(t,496,this.littleEndian),this.xyzt_units=l.Utils.getIntAt(t,500,this.littleEndian),this.intent_code=l.Utils.getIntAt(t,504,this.littleEndian),this.intent_name=l.Utils.getStringAt(t,508,524),this.dim_info=l.Utils.getByteAt(t,524),t.byteLength>l.NIFTI2.MAGIC_COOKIE&&(this.extensionFlag[0]=l.Utils.getByteAt(t,540),this.extensionFlag[1]=l.Utils.getByteAt(t,541),this.extensionFlag[2]=l.Utils.getByteAt(t,542),this.extensionFlag[3]=l.Utils.getByteAt(t,543),this.extensionFlag[0]&&(this.extensionSize=this.getExtensionSize(t),this.extensionCode=this.getExtensionCode(t)))},l.NIFTI2.prototype.toFormattedString=function(){var a=l.Utils.formatNumber,t="";return t+="Datatype = "+ +this.datatypeCode+" ("+this.getDatatypeCodeString(this.datatypeCode)+")\n",t+="Bits Per Voxel =  = "+this.numBitsPerVoxel+"\n",t+="Image Dimensions (1-8): "+this.dims[0]+", "+this.dims[1]+", "+this.dims[2]+", "+this.dims[3]+", "+this.dims[4]+", "+this.dims[5]+", "+this.dims[6]+", "+this.dims[7]+"\n",t+="Intent Parameters (1-3): "+this.intent_p1+", "+this.intent_p2+", "+this.intent_p3+"\n",t+="Voxel Dimensions (1-8): "+a(this.pixDims[0])+", "+a(this.pixDims[1])+", "+a(this.pixDims[2])+", "+a(this.pixDims[3])+", "+a(this.pixDims[4])+", "+a(this.pixDims[5])+", "+a(this.pixDims[6])+", "+a(this.pixDims[7])+"\n",t+="Image Offset = "+this.vox_offset+"\n",t+="Data Scale:  Slope = "+a(this.scl_slope)+"  Intercept = "+a(this.scl_inter)+"\n",t+="Display Range:  Max = "+a(this.cal_max)+"  Min = "+a(this.cal_min)+"\n",t+="Slice Duration = "+this.slice_duration+"\n",t+="Time Axis Shift = "+this.toffset+"\n",t+="Slice Start = "+this.slice_start+"\n",t+="Slice End = "+this.slice_end+"\n",t+="Description: \""+this.description+"\"\n",t+="Auxiliary File: \""+this.aux_file+"\"\n",t+="Q-Form Code = "+this.qform_code+" ("+this.getTransformCodeString(this.qform_code)+")\n",t+="S-Form Code = "+this.sform_code+" ("+this.getTransformCodeString(this.sform_code)+")\n",t+="Quaternion Parameters:  b = "+a(this.quatern_b)+"  c = "+a(this.quatern_c)+"  d = "+a(this.quatern_d)+"\n",t+="Quaternion Offsets:  x = "+this.qoffset_x+"  y = "+this.qoffset_y+"  z = "+this.qoffset_z+"\n",t+="S-Form Parameters X: "+a(this.affine[0][0])+", "+a(this.affine[0][1])+", "+a(this.affine[0][2])+", "+a(this.affine[0][3])+"\n",t+="S-Form Parameters Y: "+a(this.affine[1][0])+", "+a(this.affine[1][1])+", "+a(this.affine[1][2])+", "+a(this.affine[1][3])+"\n",t+="S-Form Parameters Z: "+a(this.affine[2][0])+", "+a(this.affine[2][1])+", "+a(this.affine[2][2])+", "+a(this.affine[2][3])+"\n",t+="Slice Code = "+this.slice_code+"\n",t+="Units Code = "+this.xyzt_units+" ("+this.getUnitsCodeString(l.NIFTI1.SPATIAL_UNITS_MASK&this.xyzt_units)+", "+this.getUnitsCodeString(l.NIFTI1.TEMPORAL_UNITS_MASK&this.xyzt_units)+")\n",t+="Intent Code = "+this.intent_code+"\n",t+="Intent Name: \""+this.intent_name+"\"\n",t+="Dim Info = "+this.dim_info+"\n"},l.NIFTI2.prototype.getExtensionLocation=function(){return l.NIFTI2.MAGIC_COOKIE+4},l.NIFTI2.prototype.getExtensionSize=l.NIFTI1.prototype.getExtensionSize,l.NIFTI2.prototype.getExtensionCode=l.NIFTI1.prototype.getExtensionCode,l.NIFTI2.prototype.getDatatypeCodeString=l.NIFTI1.prototype.getDatatypeCodeString,l.NIFTI2.prototype.getTransformCodeString=l.NIFTI1.prototype.getTransformCodeString,l.NIFTI2.prototype.getUnitsCodeString=l.NIFTI1.prototype.getUnitsCodeString,l.NIFTI2.prototype.getQformMat=l.NIFTI1.prototype.getQformMat,l.NIFTI2.prototype.convertNiftiQFormToNiftiSForm=l.NIFTI1.prototype.convertNiftiQFormToNiftiSForm,l.NIFTI2.prototype.convertNiftiSFormToNEMA=l.NIFTI1.prototype.convertNiftiSFormToNEMA,l.NIFTI2.prototype.nifti_mat33_mul=l.NIFTI1.prototype.nifti_mat33_mul,l.NIFTI2.prototype.nifti_mat33_determ=l.NIFTI1.prototype.nifti_mat33_determ,"undefined"!==typeof a&&a.exports&&(a.exports=l.NIFTI2)},function(H,t,e){"use strict";function n(e){return e.replace("\\","\\\\").replace("\n","\\n")}function i(e){return e.split("\\\\").map(function(e){return e.replace("\\n","\n")}).join("\\")}function r(a,t,l,n){var i=s(a),c;switch(a){case"data":case"buffer":case"keys":case"version":break;case"content":case"number":case"sampleUnits":case"space":c=i+": "+t;break;case"blockSize":case"lineSkip":case"byteSkip":case"dimension":case"spaceDimension":P("number"==typeof t||t instanceof Number,"Field "+a+" should at least contain a number!"),c=i+": "+t;break;case"min":case"max":case"oldMin":case"oldMax":P("number"==typeof t||t instanceof Number,"Field "+a+" should contain a number!"),c=i+": "+t;break;case"spaceOrigin":P(t.length===n,"Field "+a+" should be a list with length equal to the space dimension!"),t.forEach(function(t){P("number"==typeof t||t instanceof Number,"Field "+a+" should be a list of numbers!")}),c=i+": ("+t.join(",")+")";break;case"labels":case"units":case"spaceUnits":P(void 0!==t.length&&t.length==l,"Field "+a+" should be a list with length equal to the dimension!"),t.forEach(function(t){P("string"==typeof t||t instanceof String,"Field "+a+" should be a list of numbers!")}),c=i+": "+t.map(p).join(" ");break;case"sizes":P(void 0!==t.length&&t.length==l,"Field "+a+" should be a list with length equal to the dimension!"),t.forEach(function(t){P("number"==typeof t||t instanceof Number,"Field "+a+" should be a list of numbers!")}),c=i+": "+t.join(" ");break;case"spacings":case"thicknesses":case"axisMins":case"axisMaxs":P(void 0!==t.length&&t.length==l,"Field "+a+" should be a list with length equal to the dimension!"),t.forEach(function(t){P("number"==typeof t||t instanceof Number,"Field "+a+" should be a list of numbers!")}),c=i+": "+t.join(" ");break;case"spaceDirections":P(void 0!==t.length&&t.length===l,"Field "+a+" should be a list with length equal to the dimension!"),t.forEach(function(t){P(null===t||void 0!==t.length&&t.length===n,"The elements of field "+a+" should be lists with length equal to the space dimension!"),null!==t&&t.forEach(function(t){P("number"==typeof t||t instanceof Number,"The elements of field "+a+" should be lists of numbers!")})}),c=i+": "+t.map(function(e){return null===e?"none":"("+e.join(",")+")"}).join(" ");break;case"measurementFrame":P(void 0!==t.length&&t.length===n,"Field "+a+" should be a list with length equal to the space dimension!"),t.forEach(function(t){P(null===t||void 0!==t.length&&t.length===n,"The elements of field "+a+" should be lists with length equal to the space dimension!"),null!==t&&t.forEach(function(t){P("number"==typeof t||t instanceof Number,"The elements of field "+a+" should be lists of numbers!")})}),c=i+": "+t.map(function(e){return null===e?"none":"("+e.join(",")+")"}).join(" ");break;case"type":case"encoding":case"endian":P("string"==typeof t||t instanceof String,"Field "+a+" should contain a string!"),c=i+": "+t;break;case"dataFile":t.length||t.files&&"subdim"in t||(c=i+": "+g(t));break;case"centers":case"kinds":P(void 0!==t.length&&t.length==l,"Field "+a+" should be a list with length equal to the dimension!"),c=i+": "+t.map(b).join(" ");break;default:console.warn("Unrecognized NRRD field: "+a+", skipping.");}return c}function V(a,t){switch(a){case"content":case"number":case"sampleUnits":break;case"dimension":case"blockSize":case"lineSkip":case"byteSkip":case"spaceDimension":t=X(t);break;case"min":case"max":case"oldMin":case"oldMax":t=o(t);break;case"spaceOrigin":t=l(t);break;case"labels":case"units":case"spaceUnits":t=d(t,c);break;case"sizes":t=d(t,X);break;case"spacings":case"thicknesses":case"axisMins":case"axisMaxs":t=d(t,o);break;case"spaceDirections":case"measurementFrame":t=d(t,l);break;case"type":t=u(t);break;case"encoding":t=m(t);break;case"endian":t=q(t);break;case"dataFile":t=h(t);break;case"centers":t=d(t,f);break;case"kinds":t=d(t,y);break;case"space":t=_(t);break;default:console.warn("Unrecognized NRRD field: "+a);}return t}function W(e){return(e=e.toLowerCase())in R?R[e]:e}function s(e){return e in D?D[e]:e}function X(o){var t=parseInt(o,10);if(a(t))throw new Error("Malformed NRRD integer: "+o);return t}function o(o){if(0<=(o=o.toLowerCase()).indexOf("nan"))return NaN;if(0<=o.indexOf("-inf"))return-1/0;if(0<=o.indexOf("inf"))return 1/0;var t=parseFloat(o);if(a(t))throw new Error("Malformed NRRD float: "+o);return t}function l(e){if("none"==e)return null;if(2>e.length||"("!==e[0]||")"!==e[e.length-1])throw new Error("Malformed NRRD vector: "+e);return e.slice(1,-1).split(",").map(o)}function c(e){if(2>length||"\""!=e[0]||"\""!=e[e.length-1])throw new Error("Invalid NRRD quoted string: "+e);return e.slice(1,-1).replace("\\\"","\"")}function p(e){return"\""+e.replace("\"","\\\"")+"\""}function d(a,t){return a.split(k).map(t)}function u(e){switch(e.toLowerCase()){case"signed char":case"int8":case"int8_t":return"int8";case"uchar":case"unsigned char":case"uint8":case"uint8_t":return"uint8";case"short":case"short int":case"signed short":case"signed short int":case"int16":case"int16_t":return"int16";case"ushort":case"unsigned short":case"unsigned short int":case"uint16":case"uint16_t":return"uint16";case"int":case"signed int":case"int32":case"int32_t":return"int32";case"uint":case"unsigned int":case"uint32":case"uint32_t":return"uint32";case"longlong":case"long long":case"long long int":case"signed long long":case"signed long long int":case"int64":case"int64_t":return"int64";case"ulonglong":case"unsigned long long":case"unsigned long long int":case"uint64":case"uint64_t":return"uint64";case"float":return"float";case"double":return"double";case"block":return"block";default:return console.warn("Unrecognized NRRD type: "+e),e;}}function m(e){switch(e.toLowerCase()){case"raw":return"raw";case"txt":case"text":case"ascii":return"ascii";case"hex":return"hex";case"gz":case"gzip":return"gzip";case"bz2":case"bzip2":return"bzip2";default:return console.warn("Unrecognized NRRD encoding: "+e),e;}}function _(e){switch(e.toLowerCase()){case"right-anterior-superior":case"ras":return"right-anterior-superior";case"left-anterior-superior":case"las":return"left-anterior-superior";case"left-posterior-superior":case"lps":return"left-posterior-superior";case"right-anterior-superior-time":case"rast":return"right-anterior-superior-time";case"left-anterior-superior-time":case"last":return"left-anterior-superior-time";case"left-posterior-superior-time":case"lpst":return"left-posterior-superior-time";case"scanner-xyz":return"scanner-xyz";case"scanner-xyz-time":return"scanner-xyz-time";case"3d-right-handed":return"3D-right-handed";case"3d-left-handed":return"3D-left-handed";case"3d-right-handed-time":return"3D-right-handed-time";case"3d-left-handed-time":return"3D-left-handed-time";default:return console.warn("Unrecognized space: "+e),e;}}function q(e){switch(e.toLowerCase()){case"little":return"little";case"big":return"big";default:return console.warn("Unrecognized NRRD endianness: "+e),e;}}function h(a){var t=O.exec(a);return t?5==t.length&&t[4]?{format:a.substring(0,t.index),min:X(t[1]),max:X(t[2]),step:X(t[3]),subdim:X(t[4])}:{format:a.substring(0,t.index),min:X(t[1]),max:X(t[2]),step:X(t[3])}:a}function g(e){if("string"==typeof e||e instanceof String)return e;if("format"in e&&"min"in e&&"max"in e&&"step"in e)return"subdim"in e?e.format+" "+e.min+" "+e.max+" "+e.step+" "+e.subdim:e.format+" "+e.min+" "+e.max+" "+e.step;throw new Error("Unrecognized data file format!")}function f(e){switch(e.toLowerCase()){case"cell":return"cell";case"node":return"node";case"???":case"none":return null;default:return console.warn("Unrecognized NRRD center: "+e),e;}}function y(a){var t=a.toLowerCase();return t in U?U[t]:(console.warn("Unrecognized NRRD kind: "+a),a)}function b(e){return null===e?"???":e}function x(c,t,e,n){function i(t){if(c.byteLength<r*t)throw new Error("NRRD file does not contain enough data!")}var r=1,l,o,a;for(l=0;l<e.length;l++){if(0>=e[l])throw new Error("Sizes should be a list of positive (>0) integers!");r*=e[l]}if("block"==t)return c.slice(0,r*n.blockSize);if("int8"==t||"uint8"==t||n.endian==N)return"int8"===t?(i(1),new Int8Array(c.slice(0,r))):"uint8"===t?(i(1),new Uint8Array(c.slice(0,r))):"int16"===t?(i(2),new Int16Array(c.slice(0,2*r))):"uint16"===t?(i(2),new Uint16Array(c.slice(0,2*r))):"int32"===t?(i(4),new Int32Array(c.slice(0,4*r))):"uint32"===t?(i(4),new Uint32Array(c.slice(0,4*r))):"float"===t?(i(4),new Float32Array(c.slice(0,4*r))):"double"===t?(i(8),new Float64Array(c.slice(0,8*r))):void console.warn("Unsupported NRRD type: "+t+", returning raw buffer.");switch(n.endian){case"big":break;case"little":break;default:return void console.warn("Unsupported endianness in NRRD file: "+n.endian);}switch(a=new DataView(c),t){case"int8":for(o=new Int8Array(r),l=0;l<r;l++)o[l]=a.getInt8(l);return o;case"uint8":for(o=new Uint8Array(r),l=0;l<r;l++)o[l]=a.getUint8(l);return o;case"int16":for(o=new Int16Array(r),l=0;l<r;l++)o[l]=a.getInt16(2*l);return o;case"uint16":for(o=new Uint16Array(r),l=0;l<r;l++)o[l]=a.getUint16(2*l);return o;case"int32":for(o=new Int32Array(r),l=0;l<r;l++)o[l]=a.getInt32(4*l);return o;case"uint32":for(o=new Uint32Array(r),l=0;l<r;l++)o[l]=a.getUint32(4*l);return o;case"float":for(o=new Float32Array(r),l=0;l<r;l++)o[l]=a.getFloat32(4*l);return o;case"double":for(o=new Float64Array(r),l=0;l<r;l++)o[l]=a.getFloat64(8*l);return o;default:return void console.warn("Unsupported NRRD type: "+t+", returning raw buffer.");}}function v(l,t,e){var n=1,s,i,r,c;for(s=0;s<e.length;s++){if(0>=e[s])throw new Error("Sizes should be a list of positive (>0) integers!");n*=e[s]}if(i=new Uint8Array(l),r=F.apply(null,i),(c=r.split(B)).length<n)throw new Error("Not enough data in NRRD file!");switch(c.length>n&&(""===c[0]&&(c=c.slice(1)),c=c.slice(0,n)),t){case"int8":return new Int8Array(c.map(X));case"uint8":return new Uint8Array(c.map(X));case"int16":return new Int16Array(c.map(X));case"uint16":return new Uint16Array(c.map(X));case"int32":return new Int32Array(c.map(X));case"uint32":return new Uint32Array(c.map(X));case"float":return new Float32Array(c.map(o));case"double":return new Float64Array(c.map(o));default:return void console.warn("Unsupported NRRD type: "+t+".");}}function S(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":return 4;case"int64":case"uint64":return 8;case"float":return 4;case"double":return 8;default:throw new Error("Do not know the size of NRRD type: "+e);}}function w(e){if(void 0===e.dimension)throw new Error("Dimension missing from NRRD file!");if(void 0===e.type)throw new Error("Type missing from NRRD file!");if(void 0===e.encoding)throw new Error("Encoding missing from NRRD file!");if(void 0===e.sizes)throw new Error("Sizes missing from NRRD file!");if("block"!=e.type&&"int8"!=e.type&&"uint8"!=e.type&&"ascii"!=e.encoding&&void 0===e.endian)throw new Error("Endianness missing from NRRD file!");if("block"==e.type&&void 0===e.blockSize)throw new Error("Missing block size in NRRD file!");if(0===e.dimension)throw new Error("Zero-dimensional NRRD file?");if(e.dimension!=e.sizes.length)throw new Error("Length of 'sizes' is different from 'dimension' in an NRRD file!");if(e.spacings&&e.dimension!=e.spacings.length)throw new Error("Length of 'spacings' is different from 'dimension' in an NRRD file!");if(e.thicknesses&&e.dimension!=e.thicknesses.length)throw new Error("Length of 'thicknesses' is different from 'dimension' in an NRRD file!");if(e.axisMins&&e.dimension!=e.axisMins.length)throw new Error("Length of 'axis mins' is different from 'dimension' in an NRRD file!");if(e.axisMaxs&&e.dimension!=e.axisMaxs.length)throw new Error("Length of 'axis maxs' is different from 'dimension' in an NRRD file!");if(e.centers&&e.dimension!=e.centers.length)throw new Error("Length of 'centers' is different from 'dimension' in an NRRD file!");if(e.labels&&e.dimension!=e.labels.length)throw new Error("Length of 'labels' is different from 'dimension' in an NRRD file!");if(e.units&&e.dimension!=e.units.length)throw new Error("Length of 'units' is different from 'dimension' in an NRRD file!");if(e.kinds&&e.dimension!=e.kinds.length)throw new Error("Length of 'kinds' is different from 'dimension' in an NRRD file!");if((void 0===e.data||0===e.data.length)&&(void 0===e.buffer||0===e.buffer.byteLength)&&void 0===e.dataFile)throw new Error("NRRD file has neither inline or external data!")}function E(a,t){switch(t){case"int8":return new Int8Array(a);case"uint8":return new Uint8Array(a);case"int16":return new Int16Array(a);case"uint16":return new Uint16Array(a);case"int32":return new Int32Array(a);case"uint32":return new Uint32Array(a);case"float":return new Float32Array(a);case"double":return new Float64Array(a);default:throw new Error("Cannot cast to NRRD type: "+t);}}function T(l,t,e){var n=S(t),a=new ArrayBuffer(l.length*n),s,i,r;switch(e){case"big":i=!1;break;case"little":i=!0;break;default:return void console.warn("Unsupported endianness in NRRD file: "+e);}switch(r=new DataView(a),t){case"int8":for(s=0;s<l.length;s++)r.setInt8(s,l[s],i);return a;case"uint8":for(s=0;s<l.length;s++)r.setUint8(s,l[s],i);return a;case"int16":for(s=0;s<l.length;s++)r.setInt16(2*s,l[s],i);return a;case"uint16":for(s=0;s<l.length;s++)r.setUint16(2*s,l[s],i);return a;case"int32":for(s=0;s<l.length;s++)r.setInt32(4*s,l[s],i);return a;case"uint32":for(s=0;s<l.length;s++)r.setUint32(4*s,l[s],i);return a;case"float":for(s=0;s<l.length;s++)r.setFloat32(4*s,l[s],i);return a;case"double":for(s=0;s<l.length;s++)r.setFloat64(8*s,l[s],i);return a;default:return void console.warn("Cannot serialize NRRD type: "+t+".");}}function M(a){var t=Array(a.length),o,e,n,i;for(o=0;o<a.length;o++)t[o]=""+a[o];for(e=t.join(" "),n=new ArrayBuffer(e.length),i=new Uint8Array(n),o=0;o<i.length;o++)i[o]=e.charCodeAt(o);return n}var P=e(72),C=/[ \f\t\v]*\r?\n/,A=/^NRRD\d{4}$/,L=/^([^:]*)(:[ =])(.*)$/,I=/^LIST(?: (\d+))?$/;H.exports.serialize=function(o){var t=1,i={},d=[],_,e,g,f,a,s,l,y,h,x;for(f in o)i[f]=o[f];if(void 0===i.sizes)throw new Error("Sizes missing from NRRD file!");if(void 0===i.dimension&&(i.dimension=i.sizes.length),i.data instanceof Int8Array?a="int8":i.data instanceof Uint8Array?a="uint8":i.data instanceof Int16Array?a="int16":i.data instanceof Uint16Array?a="uint16":i.data instanceof Int32Array?a="int32":i.data instanceof Uint32Array?a="uint32":i.data instanceof Float32Array?a="float":i.data instanceof Float64Array&&(a="double"),void 0===i.type&&void 0!==a)i.type=a;else{if(void 0===i.type)throw new Error("Type of data is not given and cannot be inferred!");("string"==typeof i.type||i.type instanceof String)&&(i.type=u(i.type))}void 0===i.encoding?i.encoding="raw":("string"==typeof i.encoding||i.encoding instanceof String)&&(i.encoding=m(i.encoding)),i.data&&"block"!=i.type&&"int8"!=i.type&&"uint8"!=i.type&&"ascii"!=i.encoding?i.endian=N:"block"==i.type||"int8"==i.type||"uint8"==i.type||"ascii"==i.encoding?i.endian=void 0:("string"==typeof i.endian||i.endian instanceof String)&&(i.endian=q(i.endian));var p;if(void 0!==i.spaceDimension)p=i.spaceDimension;else if(void 0!==i.space)switch(i.space){case"right-anterior-superior":case"RAS":p=3;break;case"left-anterior-superior":case"LAS":p=3;break;case"left-posterior-superior":case"LPS":p=3;break;case"right-anterior-superior-time":case"RAST":p=4;break;case"left-anterior-superior-time":case"LAST":p=4;break;case"left-posterior-superior-time":case"LPST":p=4;break;case"scanner-xyz":p=3;break;case"scanner-xyz-time":p=4;break;case"3D-right-handed":case"3D-left-handed":p=3;break;case"3D-right-handed-time":case"3D-left-handed-time":p=4;break;default:console.warn("Unrecognized space: "+i.space);}for(w(i),_=0;_<i.sizes.length;_++){if(0>=i.sizes[_])throw new Error("Sizes should be a list of positive (>0) integers!");t*=i.sizes[_]}if(i.data){if(i.data.length<t)throw new Error("Missing data to serialize!");}else if(i.buffer){if("raw"==i.encoding&&(s="block"==i.type&&void 0!==i.blockSize?i.blockSize:S(i.type),i.buffer.byteLength<t*s))throw new Error("Missing data to serialize!");}else if(!i.dataFile)throw new Error("Will not serialize an empty NRRD file!");if(i.data)switch(i.encoding){case"raw":l=i.type==a&&i.endian==N?i.data.buffer.slice(i.data.byteOffset,i.data.byteOffset+i.data.byteLength):i.endian==N?(l=E(i.data,i.type)).buffer.slice(l.byteOffset,l.byteOffset+l.byteLength):T(i.data,i.type,i.endian);break;case"ascii":l=M(i.type==a?i.data:E(i.data,i.type));break;default:throw new Error("Unsupported NRRD encoding: "+i.encoding);}else i.buffer&&(l=i.buffer);d.push("NRRD0005"),d.push("# Generated by nrrd-js");var v=["dimension","spaceDimension","space"];for(_=0;_<v.length;_++)void 0!==i[f=v[_]]&&void 0!==(h=r(f,i[f],i.dimension,p))&&d.push(h);for(f in i)void 0!==i[f]&&(0<=v.indexOf(f)||void 0!==(h=r(f,i[f],i.dimension,p))&&d.push(h));if(i.keys)for(f in i.keys){if(0<=f.indexOf(":="))throw new Error("The combination ':=' is not allowed in an NRRD key!");d.push(f+":="+n(i[f]))}if(i.dataFile&&i.dataFile.length?(d.push("data file: LIST"),Array.prototype.push.apply(d,i.dataFile)):i.dataFile&&i.dataFile.files&&"subdim"in i.dataFile&&(d.push("data file: LIST "+i.dataFile.subdim),Array.prototype.push.apply(d,i.dataFile.files)),!l||"dataFile"in i)for(d.push(""),x=d.join("\n"),e=new ArrayBuffer(x.length),g=new Uint8Array(e),_=0;_<x.length;_++)g[_]=x.charCodeAt(_);else{for(d.push(""),d.push(""),x=d.join("\n"),e=new ArrayBuffer(x.length+l.byteLength),g=new Uint8Array(e),_=0;_<x.length;_++)g[_]=x.charCodeAt(_);y=new Uint8Array(l),g.set(y,x.length)}return e},H.exports.parse=function(a){var t={data:void 0,buffer:void 0,keys:{},version:void 0},r=new Uint8Array(a),s,e,n,c,o,l;for(r.buffer!==a&&(a=r.buffer),s=2;s<r.length;)if(10==r[s]){if(10==r[s-1]||13==r[s-1]&&10==r[s-2]){n=s+1;break}s++}else 13==r[s]?s++:s+=2;if(void 0===n?e=F.apply(null,r):(e=F.apply(null,r.subarray(0,n)),t.buffer=a.slice(n)),c=e.split(C),c=c.filter(function(e){return 0<e.length&&"#"!=e[0]}),!A.test(c[0]))throw new Error("File is not an NRRD file!");for(t.version=parseInt(c[0].substring(4,8),10),5<t.version&&console.warn("Reading an unsupported version of the NRRD format; things may go haywire."),s=1;s<c.length;s++)if(!(o=L.exec(c[s])))console.warn("Unrecognized line in NRRD header: "+c[s]);else if(": "==o[2])o[1]=W(o[1]),"dataFile"==o[1]&&(l=I.exec(o[3]))?(t[o[1]]=2==l.length&&l[1]?{files:c.slice(s+1),subdim:X(l[1])}:c.slice(s+1),c.length=s):t[o[1]]=V(o[1],o[3]);else{if(":="!=o[2])throw new Error("Logic error in NRRD parser.");t.keys[o[1]]=i(o[3])}if(w(t),"dataFile"in t)console.warn("No support for external data yet!");else switch(t.encoding){case"raw":t.data=x(t.buffer,t.type,t.sizes,{endian:t.endian,blockSize:t.blockSize});break;case"ascii":t.data=v(t.buffer,t.type,t.sizes);break;default:console.warn("Unsupported NRRD encoding: "+t.encoding);}return t};var R={"block size":"blockSize",blocksize:"blockSize","old min":"oldMin",oldmin:"oldMin","old max":"oldMax",oldmax:"oldMax","data file":"dataFile",datafile:"dataFile","line skip":"lineSkip",lineskip:"lineSkip","byte skip":"byteSkip",byteskip:"byteSkip","sample units":"sampleUnits",sampleunits:"sampleUnits","axis mins":"axisMins","axis maxs":"axisMaxs",centers:"centers",centerings:"centers","space dimension":"spaceDimension","space units":"spaceUnits","space origin":"spaceOrigin","space directions":"spaceDirections","measurement frame":"measurementFrame"},D=function(){var a={},e;for(e in R)a[R[e]]=e;return a}(),k=/[ \t]+/,O=/ (-?\d+) (-?\d+) (-?\d+)(?: (\d+))?$/,U={domain:"domain",space:"space",time:"time",list:"list",point:"point",vector:"vector","covariant-vector":"covariant-vector",normal:"normal",stub:"stub",scalar:"scalar",complex:"complex","2-vector":"2-vector","3-color":"3-color","rgb-color":"RGB-color","hsv-color":"HSV-color","xyz-color":"XYZ-color","4-color":"4-color","rgba-color":"RGBA-color","3-vector":"3-vector","3-gradient":"3-gradient","3-normal":"3-normal","4-vector":"4-vector",quaternion:"quaternion","2d-symmetric-matrix":"2D-symmetric-matrix","2d-masked-symmetric-matrix":"2D-masked-symmetric-matrix","2d-matrix":"2D-matrix","2d-masked-matrix":"2D-masked-matrix","3d-symmetric-matrix":"3D-symmetric-matrix","3d-masked-symmetric-matrix":"3D-masked-symmetric-matrix","3d-matrix":"3D-matrix","3d-masked-matrix":"3D-masked-matrix","???":null,none:null},N=function(){var a=new ArrayBuffer(4),t=new Uint32Array(a),e=new Uint8Array(a);return t[0]=16909060,1==e[0]&&2==e[1]&&3==e[2]&&4==e[3]?"big":4==e[0]&&3==e[1]&&2==e[2]&&1==e[3]?"little":void console.warn("Unrecognized system endianness!")}(),B=/[ \t\n\r\v\f]+/},function(l,t,e){"use strict";var n=e(60),i=e(23),r=e(57),o=e(83);e.d(t,"a",function(){return n.a}),e.d(t,"c",function(){return i.a}),e.d(t,"b",function(){return r.a}),e.d(t,"d",function(){return o.a})},function(l,t,e){"use strict";var n=e(61),i=e(82),r=e(79),o=e(81);e.d(t,"a",function(){return n.a}),e.d(t,"b",function(){return i.a}),e.d(t,"c",function(){return r.a}),e.d(t,"d",function(){return o.a})},function(a,t,e){"use strict";var o=e(167);e.d(t,"a",function(){return o.a})},function(l,t,e){"use strict";function n(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}var i=e(168),r=function(){function a(a,o){for(var e=0,r;e<o.length;e++)r=o[e],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}return function(t,e,o){return e&&a(t.prototype,e),o&&a(t,o),t}}(),o=function(){function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"Freesurfer";n(this,a),this._presetID=t,this._presets=this.presetSegs()}return a.prototype.fetchPreset=function(e){return this._presets[e]},a.prototype.addPreset=function(e){this._presets.push(e)},a.prototype.presetsAvailable=function(){0<arguments.length&&void 0!==arguments[0]&&arguments[0];var a=[],t=this._presets;for(var e in t)a.push(e);return a},a.prototype.presetSegs=function(){return{Freesurfer:i.a}},r(a,[{key:"preset",set:function(e){this._presetID=e},get:function(){return this.fetchPreset(this._presetID)}}]),a}();t.a=o},function(a,t){"use strict";t.a={0:{color:[0,0,0],opacity:0,label:"Unknown"},1:{color:[70,130,180],opacity:1,label:"Left-Cerebral-Exterior"},2:{color:[245,245,245],opacity:1,label:"Left-Cerebral-White-Matter"},3:{color:[205,62,78],opacity:1,label:"Left-Cerebral-Cortex"},4:{color:[120,18,134],opacity:1,label:"Left-Lateral-Ventricle"},5:{color:[196,58,250],opacity:1,label:"Left-Inf-Lat-Vent"},6:{color:[0,148,0],opacity:1,label:"Left-Cerebellum-Exterior"},7:{color:[220,248,164],opacity:1,label:"Left-Cerebellum-White-Matter"},8:{color:[230,148,34],opacity:1,label:"Left-Cerebellum-Cortex"},9:{color:[0,118,14],opacity:1,label:"Left-Thalamus"},10:{color:[0,118,14],opacity:1,label:"Left-Thalamus-Proper"},11:{color:[122,186,220],opacity:1,label:"Left-Caudate"},12:{color:[236,13,176],opacity:1,label:"Left-Putamen"},13:{color:[12,48,255],opacity:1,label:"Left-Pallidum"},14:{color:[204,182,142],opacity:1,label:"3rd-Ventricle"},15:{color:[42,204,164],opacity:1,label:"4th-Ventricle"},16:{color:[119,159,176],opacity:1,label:"Brain-Stem"},17:{color:[220,216,20],opacity:1,label:"Left-Hippocampus"},18:{color:[103,255,255],opacity:1,label:"Left-Amygdala"},19:{color:[80,196,98],opacity:1,label:"Left-Insula"},20:{color:[60,58,210],opacity:1,label:"Left-Operculum"},21:{color:[60,58,210],opacity:1,label:"Line-1"},22:{color:[60,58,210],opacity:1,label:"Line-2"},23:{color:[60,58,210],opacity:1,label:"Line-3"},24:{color:[60,60,60],opacity:1,label:"CSF"},25:{color:[255,165,0],opacity:1,label:"Left-Lesion"},26:{color:[255,165,0],opacity:1,label:"Left-Accumbens-area"},27:{color:[0,255,127],opacity:1,label:"Left-Substancia-Nigra"},28:{color:[165,42,42],opacity:1,label:"Left-VentralDC"},29:{color:[135,206,235],opacity:1,label:"Left-undetermined"},30:{color:[160,32,240],opacity:1,label:"Left-vessel"},31:{color:[0,200,200],opacity:1,label:"Left-choroid-plexus"},32:{color:[100,50,100],opacity:1,label:"Left-F3orb"},33:{color:[135,50,74],opacity:1,label:"Left-lOg"},34:{color:[122,135,50],opacity:1,label:"Left-aOg"},35:{color:[51,50,135],opacity:1,label:"Left-mOg"},36:{color:[74,155,60],opacity:1,label:"Left-pOg"},37:{color:[120,62,43],opacity:1,label:"Left-Stellate"},38:{color:[74,155,60],opacity:1,label:"Left-Porg"},39:{color:[122,135,50],opacity:1,label:"Left-Aorg"},40:{color:[70,130,180],opacity:1,label:"Right-Cerebral-Exterior"},41:{color:[245,245,245],opacity:1,label:"Right-Cerebral-White-Matter"},42:{color:[205,62,78],opacity:1,label:"Right-Cerebral-Cortex"},43:{color:[120,18,134],opacity:1,label:"Right-Lateral-Ventricle"},44:{color:[196,58,250],opacity:1,label:"Right-Inf-Lat-Vent"},45:{color:[0,148,0],opacity:1,label:"Right-Cerebellum-Exterior"},46:{color:[220,248,164],opacity:1,label:"Right-Cerebellum-White-Matter"},47:{color:[230,148,34],opacity:1,label:"Right-Cerebellum-Cortex"},48:{color:[0,118,14],opacity:1,label:"Right-Thalamus"},49:{color:[0,118,14],opacity:1,label:"Right-Thalamus-Proper"},50:{color:[122,186,220],opacity:1,label:"Right-Caudate"},51:{color:[236,13,176],opacity:1,label:"Right-Putamen"},52:{color:[13,48,255],opacity:1,label:"Right-Pallidum"},53:{color:[220,216,20],opacity:1,label:"Right-Hippocampus"},54:{color:[103,255,255],opacity:1,label:"Right-Amygdala"},55:{color:[80,196,98],opacity:1,label:"Right-Insula"},56:{color:[60,58,210],opacity:1,label:"Right-Operculum"},57:{color:[255,165,0],opacity:1,label:"Right-Lesion"},58:{color:[255,165,0],opacity:1,label:"Right-Accumbens-area"},59:{color:[0,255,127],opacity:1,label:"Right-Substancia-Nigra"},60:{color:[165,42,42],opacity:1,label:"Right-VentralDC"},61:{color:[135,206,235],opacity:1,label:"Right-undetermined"},62:{color:[160,32,240],opacity:1,label:"Right-vessel"},63:{color:[0,200,221],opacity:1,label:"Right-choroid-plexus"},64:{color:[100,50,100],opacity:1,label:"Right-F3orb"},65:{color:[135,50,74],opacity:1,label:"Right-lOg"},66:{color:[122,135,50],opacity:1,label:"Right-aOg"},67:{color:[51,50,135],opacity:1,label:"Right-mOg"},68:{color:[74,155,60],opacity:1,label:"Right-pOg"},69:{color:[120,62,43],opacity:1,label:"Right-Stellate"},70:{color:[74,155,60],opacity:1,label:"Right-Porg"},71:{color:[122,135,50],opacity:1,label:"Right-Aorg"},72:{color:[120,190,150],opacity:1,label:"5th-Ventricle"},73:{color:[122,135,50],opacity:1,label:"Left-Interior"},74:{color:[122,135,50],opacity:1,label:"Right-Interior"},77:{color:[200,70,255],opacity:1,label:"WM-hypointensities"},78:{color:[255,148,10],opacity:1,label:"Left-WM-hypointensities"},79:{color:[255,148,10],opacity:1,label:"Right-WM-hypointensities"},80:{color:[164,108,226],opacity:1,label:"non-WM-hypointensities"},81:{color:[164,108,226],opacity:1,label:"Left-non-WM-hypointensities"},82:{color:[164,108,226],opacity:1,label:"Right-non-WM-hypointensities"},83:{color:[255,218,185],opacity:1,label:"Left-F1"},84:{color:[255,218,185],opacity:1,label:"Right-F1"},85:{color:[234,169,30],opacity:1,label:"Optic-Chiasm"},192:{color:[250,255,50],opacity:1,label:"Corpus_Callosum"},86:{color:[200,120,255],opacity:1,label:"Left_future_WMSA"},87:{color:[200,121,255],opacity:1,label:"Right_future_WMSA"},88:{color:[200,122,255],opacity:1,label:"future_WMSA"},96:{color:[205,10,125],opacity:1,label:"Left-Amygdala-Anterior"},97:{color:[205,10,125],opacity:1,label:"Right-Amygdala-Anterior"},98:{color:[160,32,240],opacity:1,label:"Dura"},100:{color:[124,140,178],opacity:1,label:"Left-wm-intensity-abnormality"},101:{color:[125,140,178],opacity:1,label:"Left-caudate-intensity-abnormality"},102:{color:[126,140,178],opacity:1,label:"Left-putamen-intensity-abnormality"},103:{color:[127,140,178],opacity:1,label:"Left-accumbens-intensity-abnormality"},104:{color:[124,141,178],opacity:1,label:"Left-pallidum-intensity-abnormality"},105:{color:[124,142,178],opacity:1,label:"Left-amygdala-intensity-abnormality"},106:{color:[124,143,178],opacity:1,label:"Left-hippocampus-intensity-abnormality"},107:{color:[124,144,178],opacity:1,label:"Left-thalamus-intensity-abnormality"},108:{color:[124,140,179],opacity:1,label:"Left-VDC-intensity-abnormality"},109:{color:[124,140,178],opacity:1,label:"Right-wm-intensity-abnormality"},110:{color:[125,140,178],opacity:1,label:"Right-caudate-intensity-abnormality"},111:{color:[126,140,178],opacity:1,label:"Right-putamen-intensity-abnormality"},112:{color:[127,140,178],opacity:1,label:"Right-accumbens-intensity-abnormality"},113:{color:[124,141,178],opacity:1,label:"Right-pallidum-intensity-abnormality"},114:{color:[124,142,178],opacity:1,label:"Right-amygdala-intensity-abnormality"},115:{color:[124,143,178],opacity:1,label:"Right-hippocampus-intensity-abnormality"},116:{color:[124,144,178],opacity:1,label:"Right-thalamus-intensity-abnormality"},117:{color:[124,140,179],opacity:1,label:"Right-VDC-intensity-abnormality"},118:{color:[255,20,147],opacity:1,label:"Epidermis"},119:{color:[205,179,139],opacity:1,label:"Conn-Tissue"},120:{color:[238,238,209],opacity:1,label:"SC-Fat-Muscle"},121:{color:[200,200,200],opacity:1,label:"Cranium"},122:{color:[74,255,74],opacity:1,label:"CSF-SA"},123:{color:[238,0,0],opacity:1,label:"Muscle"},124:{color:[0,0,139],opacity:1,label:"Ear"},125:{color:[173,255,47],opacity:1,label:"Adipose"},126:{color:[133,203,229],opacity:1,label:"Spinal-Cord"},127:{color:[26,237,57],opacity:1,label:"Soft-Tissue"},128:{color:[34,139,34],opacity:1,label:"Nerve"},129:{color:[30,144,255],opacity:1,label:"Bone"},130:{color:[147,19,173],opacity:1,label:"Air"},131:{color:[238,59,59],opacity:1,label:"Orbital-Fat"},132:{color:[221,39,200],opacity:1,label:"Tongue"},133:{color:[238,174,238],opacity:1,label:"Nasal-Structures"},134:{color:[255,0,0],opacity:1,label:"Globe"},135:{color:[72,61,139],opacity:1,label:"Teeth"},136:{color:[21,39,132],opacity:1,label:"Left-Caudate-Putamen"},137:{color:[21,39,132],opacity:1,label:"Right-Caudate-Putamen"},138:{color:[65,135,20],opacity:1,label:"Left-Claustrum"},139:{color:[65,135,20],opacity:1,label:"Right-Claustrum"},140:{color:[134,4,160],opacity:1,label:"Cornea"},142:{color:[221,226,68],opacity:1,label:"Diploe"},143:{color:[255,255,254],opacity:1,label:"Vitreous-Humor"},144:{color:[52,209,226],opacity:1,label:"Lens"},145:{color:[239,160,223],opacity:1,label:"Aqueous-Humor"},146:{color:[70,130,180],opacity:1,label:"Outer-Table"},147:{color:[70,130,181],opacity:1,label:"Inner-Table"},148:{color:[139,121,94],opacity:1,label:"Periosteum"},149:{color:[224,224,224],opacity:1,label:"Endosteum"},150:{color:[255,0,0],opacity:1,label:"R-C-S"},151:{color:[205,205,0],opacity:1,label:"Iris"},152:{color:[238,238,209],opacity:1,label:"SC-Adipose-Muscle"},153:{color:[139,121,94],opacity:1,label:"SC-Tissue"},154:{color:[238,59,59],opacity:1,label:"Orbital-Adipose"},155:{color:[238,59,59],opacity:1,label:"Left-IntCapsule-Ant"},156:{color:[238,59,59],opacity:1,label:"Right-IntCapsule-Ant"},157:{color:[62,10,205],opacity:1,label:"Left-IntCapsule-Pos"},158:{color:[62,10,205],opacity:1,label:"Right-IntCapsule-Pos"},159:{color:[0,118,14],opacity:1,label:"Left-Cerebral-WM-unmyelinated"},160:{color:[0,118,14],opacity:1,label:"Right-Cerebral-WM-unmyelinated"},161:{color:[220,216,21],opacity:1,label:"Left-Cerebral-WM-myelinated"},162:{color:[220,216,21],opacity:1,label:"Right-Cerebral-WM-myelinated"},163:{color:[122,186,220],opacity:1,label:"Left-Subcortical-Gray-Matter"},164:{color:[122,186,220],opacity:1,label:"Right-Subcortical-Gray-Matter"},165:{color:[120,120,120],opacity:1,label:"Skull"},166:{color:[14,48,255],opacity:1,label:"Posterior-fossa"},167:{color:[166,42,42],opacity:1,label:"Scalp"},168:{color:[121,18,134],opacity:1,label:"Hematoma"},169:{color:[236,13,127],opacity:1,label:"Left-Basal-Ganglia"},176:{color:[236,13,126],opacity:1,label:"Right-Basal-Ganglia"},170:{color:[119,159,176],opacity:1,label:"brainstem"},171:{color:[119,0,176],opacity:1,label:"DCG"},172:{color:[119,100,176],opacity:1,label:"Vermis"},173:{color:[242,104,76],opacity:1,label:"Midbrain"},174:{color:[206,195,58],opacity:1,label:"Pons"},175:{color:[119,159,176],opacity:1,label:"Medulla"},177:{color:[119,50,176],opacity:1,label:"Vermis-White-Matter"},178:{color:[142,182,0],opacity:1,label:"SCP"},179:{color:[19,100,176],opacity:1,label:"Floculus"},180:{color:[73,61,139],opacity:1,label:"Left-Cortical-Dysplasia"},181:{color:[73,62,139],opacity:1,label:"Right-Cortical-Dysplasia"},182:{color:[10,100,176],opacity:1,label:"CblumNodulus"},193:{color:[0,196,255],opacity:1,label:"Left-hippocampal_fissure"},194:{color:[255,164,164],opacity:1,label:"Left-CADG-head"},195:{color:[196,196,0],opacity:1,label:"Left-subiculum"},196:{color:[0,100,255],opacity:1,label:"Left-fimbria"},197:{color:[128,196,164],opacity:1,label:"Right-hippocampal_fissure"},198:{color:[0,126,75],opacity:1,label:"Right-CADG-head"},199:{color:[128,96,64],opacity:1,label:"Right-subiculum"},200:{color:[0,50,128],opacity:1,label:"Right-fimbria"},201:{color:[255,204,153],opacity:1,label:"alveus"},202:{color:[255,128,128],opacity:1,label:"perforant_pathway"},203:{color:[255,255,0],opacity:1,label:"parasubiculum"},204:{color:[64,0,64],opacity:1,label:"presubiculum"},205:{color:[0,0,255],opacity:1,label:"subiculum"},206:{color:[255,0,0],opacity:1,label:"CA1"},207:{color:[128,128,255],opacity:1,label:"CA2"},208:{color:[0,128,0],opacity:1,label:"CA3"},209:{color:[196,160,128],opacity:1,label:"CA4"},210:{color:[32,200,255],opacity:1,label:"GC-DG"},211:{color:[128,255,128],opacity:1,label:"HATA"},212:{color:[204,153,204],opacity:1,label:"fimbria"},213:{color:[121,17,136],opacity:1,label:"lateral_ventricle"},214:{color:[128,0,0],opacity:1,label:"molecular_layer_HP"},215:{color:[128,32,255],opacity:1,label:"hippocampal_fissure"},216:{color:[255,204,102],opacity:1,label:"entorhinal_cortex"},217:{color:[128,128,128],opacity:1,label:"molecular_layer_subiculum"},218:{color:[104,255,255],opacity:1,label:"Amygdala"},219:{color:[0,226,0],opacity:1,label:"Cerebral_White_Matter"},220:{color:[205,63,78],opacity:1,label:"Cerebral_Cortex"},221:{color:[197,58,250],opacity:1,label:"Inf_Lat_Vent"},222:{color:[33,150,250],opacity:1,label:"Perirhinal"},223:{color:[226,0,0],opacity:1,label:"Cerebral_White_Matter_Edge"},224:{color:[100,100,100],opacity:1,label:"Background"},225:{color:[197,150,250],opacity:1,label:"Ectorhinal"},226:{color:[170,170,255],opacity:1,label:"HP_tail"},250:{color:[255,0,0],opacity:1,label:"Fornix"},251:{color:[0,0,64],opacity:1,label:"CC_Posterior"},252:{color:[0,0,112],opacity:1,label:"CC_Mid_Posterior"},253:{color:[0,0,160],opacity:1,label:"CC_Central"},254:{color:[0,0,208],opacity:1,label:"CC_Mid_Anterior"},255:{color:[0,0,255],opacity:1,label:"CC_Anterior"},256:{color:[0,0,0],opacity:1,label:"Voxel-Unchanged"},257:{color:[60,60,60],opacity:1,label:"CSF-ExtraCerebral"},258:{color:[150,150,200],opacity:1,label:"Head-ExtraCerebral"},259:{color:[120,120,120],opacity:1,label:"SkullApprox"},260:{color:[119,159,176],opacity:1,label:"BoneOrAir"},261:{color:[120,18,134],opacity:1,label:"PossibleFluid"},262:{color:[119,159,176],opacity:1,label:"Sinus"},263:{color:[119,159,176],opacity:1,label:"Left-Eustachian"},264:{color:[119,159,176],opacity:1,label:"Right-Eustachian"},331:{color:[255,0,0],opacity:1,label:"Aorta"},332:{color:[255,80,0],opacity:1,label:"Left-Common-IliacA"},333:{color:[255,160,0],opacity:1,label:"Right-Common-IliacA"},334:{color:[255,255,0],opacity:1,label:"Left-External-IliacA"},335:{color:[0,255,0],opacity:1,label:"Right-External-IliacA"},336:{color:[255,0,160],opacity:1,label:"Left-Internal-IliacA"},337:{color:[255,0,255],opacity:1,label:"Right-Internal-IliacA"},338:{color:[255,50,80],opacity:1,label:"Left-Lateral-SacralA"},339:{color:[80,255,50],opacity:1,label:"Right-Lateral-SacralA"},340:{color:[160,255,50],opacity:1,label:"Left-ObturatorA"},341:{color:[160,200,255],opacity:1,label:"Right-ObturatorA"},342:{color:[0,255,160],opacity:1,label:"Left-Internal-PudendalA"},343:{color:[0,0,255],opacity:1,label:"Right-Internal-PudendalA"},344:{color:[80,50,255],opacity:1,label:"Left-UmbilicalA"},345:{color:[160,0,255],opacity:1,label:"Right-UmbilicalA"},346:{color:[255,210,0],opacity:1,label:"Left-Inf-RectalA"},347:{color:[0,160,255],opacity:1,label:"Right-Inf-RectalA"},348:{color:[255,200,80],opacity:1,label:"Left-Common-IliacV"},349:{color:[255,200,160],opacity:1,label:"Right-Common-IliacV"},350:{color:[255,80,200],opacity:1,label:"Left-External-IliacV"},351:{color:[255,160,200],opacity:1,label:"Right-External-IliacV"},352:{color:[30,255,80],opacity:1,label:"Left-Internal-IliacV"},353:{color:[80,200,255],opacity:1,label:"Right-Internal-IliacV"},354:{color:[80,255,200],opacity:1,label:"Left-ObturatorV"},355:{color:[195,255,200],opacity:1,label:"Right-ObturatorV"},356:{color:[120,200,20],opacity:1,label:"Left-Internal-PudendalV"},357:{color:[170,10,200],opacity:1,label:"Right-Internal-PudendalV"},358:{color:[20,130,180],opacity:1,label:"Pos-Lymph"},359:{color:[20,180,130],opacity:1,label:"Neg-Lymph"},400:{color:[206,62,78],opacity:1,label:"V1"},401:{color:[121,18,134],opacity:1,label:"V2"},402:{color:[199,58,250],opacity:1,label:"BA44"},403:{color:[1,148,0],opacity:1,label:"BA45"},404:{color:[221,248,164],opacity:1,label:"BA4a"},405:{color:[231,148,34],opacity:1,label:"BA4p"},406:{color:[1,118,14],opacity:1,label:"BA6"},407:{color:[120,118,14],opacity:1,label:"BA2"},408:{color:[123,186,221],opacity:1,label:"BA1_old"},409:{color:[238,13,177],opacity:1,label:"BAun2"},410:{color:[123,186,220],opacity:1,label:"BA1"},411:{color:[138,13,206],opacity:1,label:"BA2b"},412:{color:[238,130,176],opacity:1,label:"BA3a"},413:{color:[218,230,76],opacity:1,label:"BA3b"},414:{color:[38,213,176],opacity:1,label:"MT"},415:{color:[1,225,176],opacity:1,label:"AIPS_AIP_l"},416:{color:[1,225,176],opacity:1,label:"AIPS_AIP_r"},417:{color:[200,2,100],opacity:1,label:"AIPS_VIP_l"},418:{color:[200,2,100],opacity:1,label:"AIPS_VIP_r"},419:{color:[5,200,90],opacity:1,label:"IPL_PFcm_l"},420:{color:[5,200,90],opacity:1,label:"IPL_PFcm_r"},421:{color:[100,5,200],opacity:1,label:"IPL_PF_l"},422:{color:[25,255,100],opacity:1,label:"IPL_PFm_l"},423:{color:[25,255,100],opacity:1,label:"IPL_PFm_r"},424:{color:[230,7,100],opacity:1,label:"IPL_PFop_l"},425:{color:[230,7,100],opacity:1,label:"IPL_PFop_r"},426:{color:[100,5,200],opacity:1,label:"IPL_PF_r"},427:{color:[150,10,200],opacity:1,label:"IPL_PFt_l"},428:{color:[150,10,200],opacity:1,label:"IPL_PFt_r"},429:{color:[175,10,176],opacity:1,label:"IPL_PGa_l"},430:{color:[175,10,176],opacity:1,label:"IPL_PGa_r"},431:{color:[10,100,255],opacity:1,label:"IPL_PGp_l"},432:{color:[10,100,255],opacity:1,label:"IPL_PGp_r"},433:{color:[150,45,70],opacity:1,label:"Visual_V3d_l"},434:{color:[150,45,70],opacity:1,label:"Visual_V3d_r"},435:{color:[45,200,15],opacity:1,label:"Visual_V4_l"},436:{color:[45,200,15],opacity:1,label:"Visual_V4_r"},437:{color:[227,45,100],opacity:1,label:"Visual_V5_b"},438:{color:[227,45,100],opacity:1,label:"Visual_VP_l"},439:{color:[227,45,100],opacity:1,label:"Visual_VP_r"},498:{color:[143,188,143],opacity:1,label:"wmsa"},499:{color:[255,248,220],opacity:1,label:"other_wmsa"},500:{color:[17,85,136],opacity:1,label:"right_CA2_3"},501:{color:[119,187,102],opacity:1,label:"right_alveus"},502:{color:[204,68,34],opacity:1,label:"right_CA1"},503:{color:[204,0,255],opacity:1,label:"right_fimbria"},504:{color:[221,187,17],opacity:1,label:"right_presubiculum"},505:{color:[153,221,238],opacity:1,label:"right_hippocampal_fissure"},506:{color:[51,17,17],opacity:1,label:"right_CA4_DG"},507:{color:[0,119,85],opacity:1,label:"right_subiculum"},508:{color:[20,100,200],opacity:1,label:"right_fornix"},550:{color:[17,85,137],opacity:1,label:"left_CA2_3"},551:{color:[119,187,103],opacity:1,label:"left_alveus"},552:{color:[204,68,35],opacity:1,label:"left_CA1"},553:{color:[204,0,254],opacity:1,label:"left_fimbria"},554:{color:[221,187,16],opacity:1,label:"left_presubiculum"},555:{color:[153,221,239],opacity:1,label:"left_hippocampal_fissure"},556:{color:[51,17,18],opacity:1,label:"left_CA4_DG"},557:{color:[0,119,86],opacity:1,label:"left_subiculum"},558:{color:[20,100,201],opacity:1,label:"left_fornix"},600:{color:[254,254,254],opacity:1,label:"Tumor"},601:{color:[70,130,180],opacity:1,label:"Cbm_Left_I_IV"},602:{color:[245,245,245],opacity:1,label:"Cbm_Right_I_IV"},603:{color:[205,62,78],opacity:1,label:"Cbm_Left_V"},604:{color:[120,18,134],opacity:1,label:"Cbm_Right_V"},605:{color:[196,58,250],opacity:1,label:"Cbm_Left_VI"},606:{color:[0,148,0],opacity:1,label:"Cbm_Vermis_VI"},607:{color:[220,248,164],opacity:1,label:"Cbm_Right_VI"},608:{color:[230,148,34],opacity:1,label:"Cbm_Left_CrusI"},609:{color:[0,118,14],opacity:1,label:"Cbm_Vermis_CrusI"},610:{color:[0,118,14],opacity:1,label:"Cbm_Right_CrusI"},611:{color:[122,186,220],opacity:1,label:"Cbm_Left_CrusII"},612:{color:[236,13,176],opacity:1,label:"Cbm_Vermis_CrusII"},613:{color:[12,48,255],opacity:1,label:"Cbm_Right_CrusII"},614:{color:[204,182,142],opacity:1,label:"Cbm_Left_VIIb"},615:{color:[42,204,164],opacity:1,label:"Cbm_Vermis_VIIb"},616:{color:[119,159,176],opacity:1,label:"Cbm_Right_VIIb"},617:{color:[220,216,20],opacity:1,label:"Cbm_Left_VIIIa"},618:{color:[103,255,255],opacity:1,label:"Cbm_Vermis_VIIIa"},619:{color:[80,196,98],opacity:1,label:"Cbm_Right_VIIIa"},620:{color:[60,58,210],opacity:1,label:"Cbm_Left_VIIIb"},621:{color:[60,58,210],opacity:1,label:"Cbm_Vermis_VIIIb"},622:{color:[60,58,210],opacity:1,label:"Cbm_Right_VIIIb"},623:{color:[60,58,210],opacity:1,label:"Cbm_Left_IX"},624:{color:[60,60,60],opacity:1,label:"Cbm_Vermis_IX"},625:{color:[255,165,0],opacity:1,label:"Cbm_Right_IX"},626:{color:[255,165,0],opacity:1,label:"Cbm_Left_X"},627:{color:[0,255,127],opacity:1,label:"Cbm_Vermis_X"},628:{color:[165,42,42],opacity:1,label:"Cbm_Right_X"},640:{color:[204,0,0],opacity:1,label:"Cbm_Right_I_V_med"},641:{color:[255,0,0],opacity:1,label:"Cbm_Right_I_V_mid"},642:{color:[0,0,255],opacity:1,label:"Cbm_Right_VI_med"},643:{color:[30,144,255],opacity:1,label:"Cbm_Right_VI_mid"},644:{color:[100,212,237],opacity:1,label:"Cbm_Right_VI_lat"},645:{color:[218,165,32],opacity:1,label:"Cbm_Right_CrusI_med"},646:{color:[255,215,0],opacity:1,label:"Cbm_Right_CrusI_mid"},647:{color:[255,255,166],opacity:1,label:"Cbm_Right_CrusI_lat"},648:{color:[153,0,204],opacity:1,label:"Cbm_Right_CrusII_med"},649:{color:[153,141,209],opacity:1,label:"Cbm_Right_CrusII_mid"},650:{color:[204,204,255],opacity:1,label:"Cbm_Right_CrusII_lat"},651:{color:[31,212,194],opacity:1,label:"Cbm_Right_7med"},652:{color:[3,255,237],opacity:1,label:"Cbm_Right_7mid"},653:{color:[204,255,255],opacity:1,label:"Cbm_Right_7lat"},654:{color:[86,74,147],opacity:1,label:"Cbm_Right_8med"},655:{color:[114,114,190],opacity:1,label:"Cbm_Right_8mid"},656:{color:[184,178,255],opacity:1,label:"Cbm_Right_8lat"},657:{color:[126,138,37],opacity:1,label:"Cbm_Right_PUNs"},658:{color:[189,197,117],opacity:1,label:"Cbm_Right_TONs"},659:{color:[240,230,140],opacity:1,label:"Cbm_Right_FLOs"},660:{color:[204,0,0],opacity:1,label:"Cbm_Left_I_V_med"},661:{color:[255,0,0],opacity:1,label:"Cbm_Left_I_V_mid"},662:{color:[0,0,255],opacity:1,label:"Cbm_Left_VI_med"},663:{color:[30,144,255],opacity:1,label:"Cbm_Left_VI_mid"},664:{color:[100,212,237],opacity:1,label:"Cbm_Left_VI_lat"},665:{color:[218,165,32],opacity:1,label:"Cbm_Left_CrusI_med"},666:{color:[255,215,0],opacity:1,label:"Cbm_Left_CrusI_mid"},667:{color:[255,255,166],opacity:1,label:"Cbm_Left_CrusI_lat"},668:{color:[153,0,204],opacity:1,label:"Cbm_Left_CrusII_med"},669:{color:[153,141,209],opacity:1,label:"Cbm_Left_CrusII_mid"},670:{color:[204,204,255],opacity:1,label:"Cbm_Left_CrusII_lat"},671:{color:[31,212,194],opacity:1,label:"Cbm_Left_7med"},672:{color:[3,255,237],opacity:1,label:"Cbm_Left_7mid"},673:{color:[204,255,255],opacity:1,label:"Cbm_Left_7lat"},674:{color:[86,74,147],opacity:1,label:"Cbm_Left_8med"},675:{color:[114,114,190],opacity:1,label:"Cbm_Left_8mid"},676:{color:[184,178,255],opacity:1,label:"Cbm_Left_8lat"},677:{color:[126,138,37],opacity:1,label:"Cbm_Left_PUNs"},678:{color:[189,197,117],opacity:1,label:"Cbm_Left_TONs"},679:{color:[240,230,140],opacity:1,label:"Cbm_Left_FLOs"},690:{color:[122,135,50],opacity:1,label:"CbmWM_Gyri_Left"},691:{color:[122,135,50],opacity:1,label:"CbmWM_Gyri_Right"},701:{color:[120,18,134],opacity:1,label:"CSF-FSL-FAST"},702:{color:[205,62,78],opacity:1,label:"GrayMatter-FSL-FAST"},703:{color:[0,225,0],opacity:1,label:"WhiteMatter-FSL-FAST"},999:{color:[255,100,100],opacity:1,label:"SUSPICIOUS"},1e3:{color:[25,5,25],opacity:1,label:"ctx-lh-unknown"},1001:{color:[25,100,40],opacity:1,label:"ctx-lh-bankssts"},1002:{color:[125,100,160],opacity:1,label:"ctx-lh-caudalanteriorcingulate"},1003:{color:[100,25,0],opacity:1,label:"ctx-lh-caudalmiddlefrontal"},1004:{color:[120,70,50],opacity:1,label:"ctx-lh-corpuscallosum"},1005:{color:[220,20,100],opacity:1,label:"ctx-lh-cuneus"},1006:{color:[220,20,10],opacity:1,label:"ctx-lh-entorhinal"},1007:{color:[180,220,140],opacity:1,label:"ctx-lh-fusiform"},1008:{color:[220,60,220],opacity:1,label:"ctx-lh-inferiorparietal"},1009:{color:[180,40,120],opacity:1,label:"ctx-lh-inferiortemporal"},1010:{color:[140,20,140],opacity:1,label:"ctx-lh-isthmuscingulate"},1011:{color:[20,30,140],opacity:1,label:"ctx-lh-lateraloccipital"},1012:{color:[35,75,50],opacity:1,label:"ctx-lh-lateralorbitofrontal"},1013:{color:[225,140,140],opacity:1,label:"ctx-lh-lingual"},1014:{color:[200,35,75],opacity:1,label:"ctx-lh-medialorbitofrontal"},1015:{color:[160,100,50],opacity:1,label:"ctx-lh-middletemporal"},1016:{color:[20,220,60],opacity:1,label:"ctx-lh-parahippocampal"},1017:{color:[60,220,60],opacity:1,label:"ctx-lh-paracentral"},1018:{color:[220,180,140],opacity:1,label:"ctx-lh-parsopercularis"},1019:{color:[20,100,50],opacity:1,label:"ctx-lh-parsorbitalis"},1020:{color:[220,60,20],opacity:1,label:"ctx-lh-parstriangularis"},1021:{color:[120,100,60],opacity:1,label:"ctx-lh-pericalcarine"},1022:{color:[220,20,20],opacity:1,label:"ctx-lh-postcentral"},1023:{color:[220,180,220],opacity:1,label:"ctx-lh-posteriorcingulate"},1024:{color:[60,20,220],opacity:1,label:"ctx-lh-precentral"},1025:{color:[160,140,180],opacity:1,label:"ctx-lh-precuneus"},1026:{color:[80,20,140],opacity:1,label:"ctx-lh-rostralanteriorcingulate"},1027:{color:[75,50,125],opacity:1,label:"ctx-lh-rostralmiddlefrontal"},1028:{color:[20,220,160],opacity:1,label:"ctx-lh-superiorfrontal"},1029:{color:[20,180,140],opacity:1,label:"ctx-lh-superiorparietal"},1030:{color:[140,220,220],opacity:1,label:"ctx-lh-superiortemporal"},1031:{color:[80,160,20],opacity:1,label:"ctx-lh-supramarginal"},1032:{color:[100,0,100],opacity:1,label:"ctx-lh-frontalpole"},1033:{color:[70,70,70],opacity:1,label:"ctx-lh-temporalpole"},1034:{color:[150,150,200],opacity:1,label:"ctx-lh-transversetemporal"},1035:{color:[255,192,32],opacity:1,label:"ctx-lh-insula"},2e3:{color:[25,5,25],opacity:1,label:"ctx-rh-unknown"},2001:{color:[25,100,40],opacity:1,label:"ctx-rh-bankssts"},2002:{color:[125,100,160],opacity:1,label:"ctx-rh-caudalanteriorcingulate"},2003:{color:[100,25,0],opacity:1,label:"ctx-rh-caudalmiddlefrontal"},2004:{color:[120,70,50],opacity:1,label:"ctx-rh-corpuscallosum"},2005:{color:[220,20,100],opacity:1,label:"ctx-rh-cuneus"},2006:{color:[220,20,10],opacity:1,label:"ctx-rh-entorhinal"},2007:{color:[180,220,140],opacity:1,label:"ctx-rh-fusiform"},2008:{color:[220,60,220],opacity:1,label:"ctx-rh-inferiorparietal"},2009:{color:[180,40,120],opacity:1,label:"ctx-rh-inferiortemporal"},2010:{color:[140,20,140],opacity:1,label:"ctx-rh-isthmuscingulate"},2011:{color:[20,30,140],opacity:1,label:"ctx-rh-lateraloccipital"},2012:{color:[35,75,50],opacity:1,label:"ctx-rh-lateralorbitofrontal"},2013:{color:[225,140,140],opacity:1,label:"ctx-rh-lingual"},2014:{color:[200,35,75],opacity:1,label:"ctx-rh-medialorbitofrontal"},2015:{color:[160,100,50],opacity:1,label:"ctx-rh-middletemporal"},2016:{color:[20,220,60],opacity:1,label:"ctx-rh-parahippocampal"},2017:{color:[60,220,60],opacity:1,label:"ctx-rh-paracentral"},2018:{color:[220,180,140],opacity:1,label:"ctx-rh-parsopercularis"},2019:{color:[20,100,50],opacity:1,label:"ctx-rh-parsorbitalis"},2020:{color:[220,60,20],opacity:1,label:"ctx-rh-parstriangularis"},2021:{color:[120,100,60],opacity:1,label:"ctx-rh-pericalcarine"},2022:{color:[220,20,20],opacity:1,label:"ctx-rh-postcentral"},2023:{color:[220,180,220],opacity:1,label:"ctx-rh-posteriorcingulate"},2024:{color:[60,20,220],opacity:1,label:"ctx-rh-precentral"},2025:{color:[160,140,180],opacity:1,label:"ctx-rh-precuneus"},2026:{color:[80,20,140],opacity:1,label:"ctx-rh-rostralanteriorcingulate"},2027:{color:[75,50,125],opacity:1,label:"ctx-rh-rostralmiddlefrontal"},2028:{color:[20,220,160],opacity:1,label:"ctx-rh-superiorfrontal"},2029:{color:[20,180,140],opacity:1,label:"ctx-rh-superiorparietal"},2030:{color:[140,220,220],opacity:1,label:"ctx-rh-superiortemporal"},2031:{color:[80,160,20],opacity:1,label:"ctx-rh-supramarginal"},2032:{color:[100,0,100],opacity:1,label:"ctx-rh-frontalpole"},2033:{color:[70,70,70],opacity:1,label:"ctx-rh-temporalpole"},2034:{color:[150,150,200],opacity:1,label:"ctx-rh-transversetemporal"},2035:{color:[255,192,32],opacity:1,label:"ctx-rh-insula"},3e3:{color:[230,250,230],opacity:1,label:"wm-lh-unknown"},3001:{color:[230,155,215],opacity:1,label:"wm-lh-bankssts"},3002:{color:[130,155,95],opacity:1,label:"wm-lh-caudalanteriorcingulate"},3003:{color:[155,230,255],opacity:1,label:"wm-lh-caudalmiddlefrontal"},3004:{color:[135,185,205],opacity:1,label:"wm-lh-corpuscallosum"},3005:{color:[35,235,155],opacity:1,label:"wm-lh-cuneus"},3006:{color:[35,235,245],opacity:1,label:"wm-lh-entorhinal"},3007:{color:[75,35,115],opacity:1,label:"wm-lh-fusiform"},3008:{color:[35,195,35],opacity:1,label:"wm-lh-inferiorparietal"},3009:{color:[75,215,135],opacity:1,label:"wm-lh-inferiortemporal"},3010:{color:[115,235,115],opacity:1,label:"wm-lh-isthmuscingulate"},3011:{color:[235,225,115],opacity:1,label:"wm-lh-lateraloccipital"},3012:{color:[220,180,205],opacity:1,label:"wm-lh-lateralorbitofrontal"},3013:{color:[30,115,115],opacity:1,label:"wm-lh-lingual"},3014:{color:[55,220,180],opacity:1,label:"wm-lh-medialorbitofrontal"},3015:{color:[95,155,205],opacity:1,label:"wm-lh-middletemporal"},3016:{color:[235,35,195],opacity:1,label:"wm-lh-parahippocampal"},3017:{color:[195,35,195],opacity:1,label:"wm-lh-paracentral"},3018:{color:[35,75,115],opacity:1,label:"wm-lh-parsopercularis"},3019:{color:[235,155,205],opacity:1,label:"wm-lh-parsorbitalis"},3020:{color:[35,195,235],opacity:1,label:"wm-lh-parstriangularis"},3021:{color:[135,155,195],opacity:1,label:"wm-lh-pericalcarine"},3022:{color:[35,235,235],opacity:1,label:"wm-lh-postcentral"},3023:{color:[35,75,35],opacity:1,label:"wm-lh-posteriorcingulate"},3024:{color:[195,235,35],opacity:1,label:"wm-lh-precentral"},3025:{color:[95,115,75],opacity:1,label:"wm-lh-precuneus"},3026:{color:[175,235,115],opacity:1,label:"wm-lh-rostralanteriorcingulate"},3027:{color:[180,205,130],opacity:1,label:"wm-lh-rostralmiddlefrontal"},3028:{color:[235,35,95],opacity:1,label:"wm-lh-superiorfrontal"},3029:{color:[235,75,115],opacity:1,label:"wm-lh-superiorparietal"},3030:{color:[115,35,35],opacity:1,label:"wm-lh-superiortemporal"},3031:{color:[175,95,235],opacity:1,label:"wm-lh-supramarginal"},3032:{color:[155,255,155],opacity:1,label:"wm-lh-frontalpole"},3033:{color:[185,185,185],opacity:1,label:"wm-lh-temporalpole"},3034:{color:[105,105,55],opacity:1,label:"wm-lh-transversetemporal"},3035:{color:[20,220,160],opacity:1,label:"wm-lh-insula"},4e3:{color:[230,250,230],opacity:1,label:"wm-rh-unknown"},4001:{color:[230,155,215],opacity:1,label:"wm-rh-bankssts"},4002:{color:[130,155,95],opacity:1,label:"wm-rh-caudalanteriorcingulate"},4003:{color:[155,230,255],opacity:1,label:"wm-rh-caudalmiddlefrontal"},4004:{color:[135,185,205],opacity:1,label:"wm-rh-corpuscallosum"},4005:{color:[35,235,155],opacity:1,label:"wm-rh-cuneus"},4006:{color:[35,235,245],opacity:1,label:"wm-rh-entorhinal"},4007:{color:[75,35,115],opacity:1,label:"wm-rh-fusiform"},4008:{color:[35,195,35],opacity:1,label:"wm-rh-inferiorparietal"},4009:{color:[75,215,135],opacity:1,label:"wm-rh-inferiortemporal"},4010:{color:[115,235,115],opacity:1,label:"wm-rh-isthmuscingulate"},4011:{color:[235,225,115],opacity:1,label:"wm-rh-lateraloccipital"},4012:{color:[220,180,205],opacity:1,label:"wm-rh-lateralorbitofrontal"},4013:{color:[30,115,115],opacity:1,label:"wm-rh-lingual"},4014:{color:[55,220,180],opacity:1,label:"wm-rh-medialorbitofrontal"},4015:{color:[95,155,205],opacity:1,label:"wm-rh-middletemporal"},4016:{color:[235,35,195],opacity:1,label:"wm-rh-parahippocampal"},4017:{color:[195,35,195],opacity:1,label:"wm-rh-paracentral"},4018:{color:[35,75,115],opacity:1,label:"wm-rh-parsopercularis"},4019:{color:[235,155,205],opacity:1,label:"wm-rh-parsorbitalis"},4020:{color:[35,195,235],opacity:1,label:"wm-rh-parstriangularis"},4021:{color:[135,155,195],opacity:1,label:"wm-rh-pericalcarine"},4022:{color:[35,235,235],opacity:1,label:"wm-rh-postcentral"},4023:{color:[35,75,35],opacity:1,label:"wm-rh-posteriorcingulate"},4024:{color:[195,235,35],opacity:1,label:"wm-rh-precentral"},4025:{color:[95,115,75],opacity:1,label:"wm-rh-precuneus"},4026:{color:[175,235,115],opacity:1,label:"wm-rh-rostralanteriorcingulate"},4027:{color:[180,205,130],opacity:1,label:"wm-rh-rostralmiddlefrontal"},4028:{color:[235,35,95],opacity:1,label:"wm-rh-superiorfrontal"},4029:{color:[235,75,115],opacity:1,label:"wm-rh-superiorparietal"},4030:{color:[115,35,35],opacity:1,label:"wm-rh-superiortemporal"},4031:{color:[175,95,235],opacity:1,label:"wm-rh-supramarginal"},4032:{color:[155,255,155],opacity:1,label:"wm-rh-frontalpole"},4033:{color:[185,185,185],opacity:1,label:"wm-rh-temporalpole"},4034:{color:[105,105,55],opacity:1,label:"wm-rh-transversetemporal"},4035:{color:[20,220,160],opacity:1,label:"wm-rh-insula"},3201:{color:[235,35,95],opacity:1,label:"wm-lh-frontal-lobe"},3203:{color:[35,75,35],opacity:1,label:"wm-lh-cingulate-lobe"},3204:{color:[135,155,195],opacity:1,label:"wm-lh-occiptal-lobe"},3205:{color:[115,35,35],opacity:1,label:"wm-lh-temporal-lobe"},3206:{color:[35,195,35],opacity:1,label:"wm-lh-parietal-lobe"},3207:{color:[20,220,160],opacity:1,label:"wm-lh-insula-lobe"},4201:{color:[235,35,95],opacity:1,label:"wm-rh-frontal-lobe"},4203:{color:[35,75,35],opacity:1,label:"wm-rh-cingulate-lobe"},4204:{color:[135,155,195],opacity:1,label:"wm-rh-occiptal-lobe"},4205:{color:[115,35,35],opacity:1,label:"wm-rh-temporal-lobe"},4206:{color:[35,195,35],opacity:1,label:"wm-rh-parietal-lobe"},4207:{color:[20,220,160],opacity:1,label:"wm-rh-insula-lobe"},1100:{color:[0,0,0],opacity:1,label:"ctx-lh-Unknown"},1101:{color:[50,50,50],opacity:1,label:"ctx-lh-Corpus_callosum"},1102:{color:[180,20,30],opacity:1,label:"ctx-lh-G_and_S_Insula_ONLY_AVERAGE"},1103:{color:[60,25,25],opacity:1,label:"ctx-lh-G_cingulate-Isthmus"},1104:{color:[25,60,60],opacity:1,label:"ctx-lh-G_cingulate-Main_part"},1200:{color:[25,60,61],opacity:1,label:"ctx-lh-G_cingulate-caudal_ACC"},1201:{color:[25,90,60],opacity:1,label:"ctx-lh-G_cingulate-rostral_ACC"},1202:{color:[25,120,60],opacity:1,label:"ctx-lh-G_cingulate-posterior"},1205:{color:[25,150,60],opacity:1,label:"ctx-lh-S_cingulate-caudal_ACC"},1206:{color:[25,180,60],opacity:1,label:"ctx-lh-S_cingulate-rostral_ACC"},1207:{color:[25,210,60],opacity:1,label:"ctx-lh-S_cingulate-posterior"},1210:{color:[25,150,90],opacity:1,label:"ctx-lh-S_pericallosal-caudal"},1211:{color:[25,180,90],opacity:1,label:"ctx-lh-S_pericallosal-rostral"},1212:{color:[25,210,90],opacity:1,label:"ctx-lh-S_pericallosal-posterior"},1105:{color:[180,20,20],opacity:1,label:"ctx-lh-G_cuneus"},1106:{color:[220,20,100],opacity:1,label:"ctx-lh-G_frontal_inf-Opercular_part"},1107:{color:[140,60,60],opacity:1,label:"ctx-lh-G_frontal_inf-Orbital_part"},1108:{color:[180,220,140],opacity:1,label:"ctx-lh-G_frontal_inf-Triangular_part"},1109:{color:[140,100,180],opacity:1,label:"ctx-lh-G_frontal_middle"},1110:{color:[180,20,140],opacity:1,label:"ctx-lh-G_frontal_superior"},1111:{color:[140,20,140],opacity:1,label:"ctx-lh-G_frontomarginal"},1112:{color:[21,10,10],opacity:1,label:"ctx-lh-G_insular_long"},1113:{color:[225,140,140],opacity:1,label:"ctx-lh-G_insular_short"},1114:{color:[23,60,180],opacity:1,label:"ctx-lh-G_and_S_occipital_inferior"},1115:{color:[180,60,180],opacity:1,label:"ctx-lh-G_occipital_middle"},1116:{color:[20,220,60],opacity:1,label:"ctx-lh-G_occipital_superior"},1117:{color:[60,20,140],opacity:1,label:"ctx-lh-G_occipit-temp_lat-Or_fusiform"},1118:{color:[220,180,140],opacity:1,label:"ctx-lh-G_occipit-temp_med-Lingual_part"},1119:{color:[65,100,20],opacity:1,label:"ctx-lh-G_occipit-temp_med-Parahippocampal_part"},1120:{color:[220,60,20],opacity:1,label:"ctx-lh-G_orbital"},1121:{color:[60,100,60],opacity:1,label:"ctx-lh-G_paracentral"},1122:{color:[20,60,220],opacity:1,label:"ctx-lh-G_parietal_inferior-Angular_part"},1123:{color:[100,100,60],opacity:1,label:"ctx-lh-G_parietal_inferior-Supramarginal_part"},1124:{color:[220,180,220],opacity:1,label:"ctx-lh-G_parietal_superior"},1125:{color:[20,180,140],opacity:1,label:"ctx-lh-G_postcentral"},1126:{color:[60,140,180],opacity:1,label:"ctx-lh-G_precentral"},1127:{color:[25,20,140],opacity:1,label:"ctx-lh-G_precuneus"},1128:{color:[20,60,100],opacity:1,label:"ctx-lh-G_rectus"},1129:{color:[60,220,20],opacity:1,label:"ctx-lh-G_subcallosal"},1130:{color:[60,20,220],opacity:1,label:"ctx-lh-G_subcentral"},1131:{color:[220,220,100],opacity:1,label:"ctx-lh-G_temporal_inferior"},1132:{color:[180,60,60],opacity:1,label:"ctx-lh-G_temporal_middle"},1133:{color:[60,60,220],opacity:1,label:"ctx-lh-G_temp_sup-G_temp_transv_and_interm_S"},1134:{color:[220,60,220],opacity:1,label:"ctx-lh-G_temp_sup-Lateral_aspect"},1135:{color:[65,220,60],opacity:1,label:"ctx-lh-G_temp_sup-Planum_polare"},1136:{color:[25,140,20],opacity:1,label:"ctx-lh-G_temp_sup-Planum_tempolare"},1137:{color:[13,0,250],opacity:1,label:"ctx-lh-G_and_S_transverse_frontopolar"},1138:{color:[61,20,220],opacity:1,label:"ctx-lh-Lat_Fissure-ant_sgt-ramus_horizontal"},1139:{color:[61,20,60],opacity:1,label:"ctx-lh-Lat_Fissure-ant_sgt-ramus_vertical"},1140:{color:[61,60,100],opacity:1,label:"ctx-lh-Lat_Fissure-post_sgt"},1141:{color:[25,25,25],opacity:1,label:"ctx-lh-Medial_wall"},1142:{color:[140,20,60],opacity:1,label:"ctx-lh-Pole_occipital"},1143:{color:[220,180,20],opacity:1,label:"ctx-lh-Pole_temporal"},1144:{color:[63,180,180],opacity:1,label:"ctx-lh-S_calcarine"},1145:{color:[221,20,10],opacity:1,label:"ctx-lh-S_central"},1146:{color:[21,220,20],opacity:1,label:"ctx-lh-S_central_insula"},1147:{color:[183,100,20],opacity:1,label:"ctx-lh-S_cingulate-Main_part_and_Intracingulate"},1148:{color:[221,20,100],opacity:1,label:"ctx-lh-S_cingulate-Marginalis_part"},1149:{color:[221,60,140],opacity:1,label:"ctx-lh-S_circular_insula_anterior"},1150:{color:[221,20,220],opacity:1,label:"ctx-lh-S_circular_insula_inferior"},1151:{color:[61,220,220],opacity:1,label:"ctx-lh-S_circular_insula_superior"},1152:{color:[100,200,200],opacity:1,label:"ctx-lh-S_collateral_transverse_ant"},1153:{color:[10,200,200],opacity:1,label:"ctx-lh-S_collateral_transverse_post"},1154:{color:[221,220,20],opacity:1,label:"ctx-lh-S_frontal_inferior"},1155:{color:[141,20,100],opacity:1,label:"ctx-lh-S_frontal_middle"},1156:{color:[61,220,100],opacity:1,label:"ctx-lh-S_frontal_superior"},1157:{color:[21,220,60],opacity:1,label:"ctx-lh-S_frontomarginal"},1158:{color:[141,60,20],opacity:1,label:"ctx-lh-S_intermedius_primus-Jensen"},1159:{color:[143,20,220],opacity:1,label:"ctx-lh-S_intraparietal-and_Parietal_transverse"},1160:{color:[61,20,180],opacity:1,label:"ctx-lh-S_occipital_anterior"},1161:{color:[101,60,220],opacity:1,label:"ctx-lh-S_occipital_middle_and_Lunatus"},1162:{color:[21,20,140],opacity:1,label:"ctx-lh-S_occipital_superior_and_transversalis"},1163:{color:[221,140,20],opacity:1,label:"ctx-lh-S_occipito-temporal_lateral"},1164:{color:[141,100,220],opacity:1,label:"ctx-lh-S_occipito-temporal_medial_and_S_Lingual"},1165:{color:[101,20,20],opacity:1,label:"ctx-lh-S_orbital-H_shapped"},1166:{color:[221,100,20],opacity:1,label:"ctx-lh-S_orbital_lateral"},1167:{color:[181,200,20],opacity:1,label:"ctx-lh-S_orbital_medial-Or_olfactory"},1168:{color:[21,180,140],opacity:1,label:"ctx-lh-S_paracentral"},1169:{color:[101,100,180],opacity:1,label:"ctx-lh-S_parieto_occipital"},1170:{color:[181,220,20],opacity:1,label:"ctx-lh-S_pericallosal"},1171:{color:[21,140,200],opacity:1,label:"ctx-lh-S_postcentral"},1172:{color:[21,20,240],opacity:1,label:"ctx-lh-S_precentral-Inferior-part"},1173:{color:[21,20,200],opacity:1,label:"ctx-lh-S_precentral-Superior-part"},1174:{color:[61,180,60],opacity:1,label:"ctx-lh-S_subcentral_ant"},1175:{color:[61,180,250],opacity:1,label:"ctx-lh-S_subcentral_post"},1176:{color:[21,20,60],opacity:1,label:"ctx-lh-S_suborbital"},1177:{color:[101,60,60],opacity:1,label:"ctx-lh-S_subparietal"},1178:{color:[21,220,220],opacity:1,label:"ctx-lh-S_supracingulate"},1179:{color:[21,180,180],opacity:1,label:"ctx-lh-S_temporal_inferior"},1180:{color:[223,220,60],opacity:1,label:"ctx-lh-S_temporal_superior"},1181:{color:[221,60,60],opacity:1,label:"ctx-lh-S_temporal_transverse"},2100:{color:[0,0,0],opacity:1,label:"ctx-rh-Unknown"},2101:{color:[50,50,50],opacity:1,label:"ctx-rh-Corpus_callosum"},2102:{color:[180,20,30],opacity:1,label:"ctx-rh-G_and_S_Insula_ONLY_AVERAGE"},2103:{color:[60,25,25],opacity:1,label:"ctx-rh-G_cingulate-Isthmus"},2104:{color:[25,60,60],opacity:1,label:"ctx-rh-G_cingulate-Main_part"},2105:{color:[180,20,20],opacity:1,label:"ctx-rh-G_cuneus"},2106:{color:[220,20,100],opacity:1,label:"ctx-rh-G_frontal_inf-Opercular_part"},2107:{color:[140,60,60],opacity:1,label:"ctx-rh-G_frontal_inf-Orbital_part"},2108:{color:[180,220,140],opacity:1,label:"ctx-rh-G_frontal_inf-Triangular_part"},2109:{color:[140,100,180],opacity:1,label:"ctx-rh-G_frontal_middle"},2110:{color:[180,20,140],opacity:1,label:"ctx-rh-G_frontal_superior"},2111:{color:[140,20,140],opacity:1,label:"ctx-rh-G_frontomarginal"},2112:{color:[21,10,10],opacity:1,label:"ctx-rh-G_insular_long"},2113:{color:[225,140,140],opacity:1,label:"ctx-rh-G_insular_short"},2114:{color:[23,60,180],opacity:1,label:"ctx-rh-G_and_S_occipital_inferior"},2115:{color:[180,60,180],opacity:1,label:"ctx-rh-G_occipital_middle"},2116:{color:[20,220,60],opacity:1,label:"ctx-rh-G_occipital_superior"},2117:{color:[60,20,140],opacity:1,label:"ctx-rh-G_occipit-temp_lat-Or_fusiform"},2118:{color:[220,180,140],opacity:1,label:"ctx-rh-G_occipit-temp_med-Lingual_part"},2119:{color:[65,100,20],opacity:1,label:"ctx-rh-G_occipit-temp_med-Parahippocampal_part"},2120:{color:[220,60,20],opacity:1,label:"ctx-rh-G_orbital"},2121:{color:[60,100,60],opacity:1,label:"ctx-rh-G_paracentral"},2122:{color:[20,60,220],opacity:1,label:"ctx-rh-G_parietal_inferior-Angular_part"},2123:{color:[100,100,60],opacity:1,label:"ctx-rh-G_parietal_inferior-Supramarginal_part"},2124:{color:[220,180,220],opacity:1,label:"ctx-rh-G_parietal_superior"},2125:{color:[20,180,140],opacity:1,label:"ctx-rh-G_postcentral"},2126:{color:[60,140,180],opacity:1,label:"ctx-rh-G_precentral"},2127:{color:[25,20,140],opacity:1,label:"ctx-rh-G_precuneus"},2128:{color:[20,60,100],opacity:1,label:"ctx-rh-G_rectus"},2129:{color:[60,220,20],opacity:1,label:"ctx-rh-G_subcallosal"},2130:{color:[60,20,220],opacity:1,label:"ctx-rh-G_subcentral"},2131:{color:[220,220,100],opacity:1,label:"ctx-rh-G_temporal_inferior"},2132:{color:[180,60,60],opacity:1,label:"ctx-rh-G_temporal_middle"},2133:{color:[60,60,220],opacity:1,label:"ctx-rh-G_temp_sup-G_temp_transv_and_interm_S"},2134:{color:[220,60,220],opacity:1,label:"ctx-rh-G_temp_sup-Lateral_aspect"},2135:{color:[65,220,60],opacity:1,label:"ctx-rh-G_temp_sup-Planum_polare"},2136:{color:[25,140,20],opacity:1,label:"ctx-rh-G_temp_sup-Planum_tempolare"},2137:{color:[13,0,250],opacity:1,label:"ctx-rh-G_and_S_transverse_frontopolar"},2138:{color:[61,20,220],opacity:1,label:"ctx-rh-Lat_Fissure-ant_sgt-ramus_horizontal"},2139:{color:[61,20,60],opacity:1,label:"ctx-rh-Lat_Fissure-ant_sgt-ramus_vertical"},2140:{color:[61,60,100],opacity:1,label:"ctx-rh-Lat_Fissure-post_sgt"},2141:{color:[25,25,25],opacity:1,label:"ctx-rh-Medial_wall"},2142:{color:[140,20,60],opacity:1,label:"ctx-rh-Pole_occipital"},2143:{color:[220,180,20],opacity:1,label:"ctx-rh-Pole_temporal"},2144:{color:[63,180,180],opacity:1,label:"ctx-rh-S_calcarine"},2145:{color:[221,20,10],opacity:1,label:"ctx-rh-S_central"},2146:{color:[21,220,20],opacity:1,label:"ctx-rh-S_central_insula"},2147:{color:[183,100,20],opacity:1,label:"ctx-rh-S_cingulate-Main_part_and_Intracingulate"},2148:{color:[221,20,100],opacity:1,label:"ctx-rh-S_cingulate-Marginalis_part"},2149:{color:[221,60,140],opacity:1,label:"ctx-rh-S_circular_insula_anterior"},2150:{color:[221,20,220],opacity:1,label:"ctx-rh-S_circular_insula_inferior"},2151:{color:[61,220,220],opacity:1,label:"ctx-rh-S_circular_insula_superior"},2152:{color:[100,200,200],opacity:1,label:"ctx-rh-S_collateral_transverse_ant"},2153:{color:[10,200,200],opacity:1,label:"ctx-rh-S_collateral_transverse_post"},2154:{color:[221,220,20],opacity:1,label:"ctx-rh-S_frontal_inferior"},2155:{color:[141,20,100],opacity:1,label:"ctx-rh-S_frontal_middle"},2156:{color:[61,220,100],opacity:1,label:"ctx-rh-S_frontal_superior"},2157:{color:[21,220,60],opacity:1,label:"ctx-rh-S_frontomarginal"},2158:{color:[141,60,20],opacity:1,label:"ctx-rh-S_intermedius_primus-Jensen"},2159:{color:[143,20,220],opacity:1,label:"ctx-rh-S_intraparietal-and_Parietal_transverse"},2160:{color:[61,20,180],opacity:1,label:"ctx-rh-S_occipital_anterior"},2161:{color:[101,60,220],opacity:1,label:"ctx-rh-S_occipital_middle_and_Lunatus"},2162:{color:[21,20,140],opacity:1,label:"ctx-rh-S_occipital_superior_and_transversalis"},2163:{color:[221,140,20],opacity:1,label:"ctx-rh-S_occipito-temporal_lateral"},2164:{color:[141,100,220],opacity:1,label:"ctx-rh-S_occipito-temporal_medial_and_S_Lingual"},2165:{color:[101,20,20],opacity:1,label:"ctx-rh-S_orbital-H_shapped"},2166:{color:[221,100,20],opacity:1,label:"ctx-rh-S_orbital_lateral"},2167:{color:[181,200,20],opacity:1,label:"ctx-rh-S_orbital_medial-Or_olfactory"},2168:{color:[21,180,140],opacity:1,label:"ctx-rh-S_paracentral"},2169:{color:[101,100,180],opacity:1,label:"ctx-rh-S_parieto_occipital"},2170:{color:[181,220,20],opacity:1,label:"ctx-rh-S_pericallosal"},2171:{color:[21,140,200],opacity:1,label:"ctx-rh-S_postcentral"},2172:{color:[21,20,240],opacity:1,label:"ctx-rh-S_precentral-Inferior-part"},2173:{color:[21,20,200],opacity:1,label:"ctx-rh-S_precentral-Superior-part"},2174:{color:[61,180,60],opacity:1,label:"ctx-rh-S_subcentral_ant"},2175:{color:[61,180,250],opacity:1,label:"ctx-rh-S_subcentral_post"},2176:{color:[21,20,60],opacity:1,label:"ctx-rh-S_suborbital"},2177:{color:[101,60,60],opacity:1,label:"ctx-rh-S_subparietal"},2178:{color:[21,220,220],opacity:1,label:"ctx-rh-S_supracingulate"},2179:{color:[21,180,180],opacity:1,label:"ctx-rh-S_temporal_inferior"},2180:{color:[223,220,60],opacity:1,label:"ctx-rh-S_temporal_superior"},2181:{color:[221,60,60],opacity:1,label:"ctx-rh-S_temporal_transverse"},2200:{color:[25,60,61],opacity:1,label:"ctx-rh-G_cingulate-caudal_ACC"},2201:{color:[25,90,60],opacity:1,label:"ctx-rh-G_cingulate-rostral_ACC"},2202:{color:[25,120,60],opacity:1,label:"ctx-rh-G_cingulate-posterior"},2205:{color:[25,150,60],opacity:1,label:"ctx-rh-S_cingulate-caudal_ACC"},2206:{color:[25,180,60],opacity:1,label:"ctx-rh-S_cingulate-rostral_ACC"},2207:{color:[25,210,60],opacity:1,label:"ctx-rh-S_cingulate-posterior"},2210:{color:[25,150,90],opacity:1,label:"ctx-rh-S_pericallosal-caudal"},2211:{color:[25,180,90],opacity:1,label:"ctx-rh-S_pericallosal-rostral"},2212:{color:[25,210,90],opacity:1,label:"ctx-rh-S_pericallosal-posterior"},3100:{color:[0,0,0],opacity:1,label:"wm-lh-Unknown"},3101:{color:[50,50,50],opacity:1,label:"wm-lh-Corpus_callosum"},3102:{color:[180,20,30],opacity:1,label:"wm-lh-G_and_S_Insula_ONLY_AVERAGE"},3103:{color:[60,25,25],opacity:1,label:"wm-lh-G_cingulate-Isthmus"},3104:{color:[25,60,60],opacity:1,label:"wm-lh-G_cingulate-Main_part"},3105:{color:[180,20,20],opacity:1,label:"wm-lh-G_cuneus"},3106:{color:[220,20,100],opacity:1,label:"wm-lh-G_frontal_inf-Opercular_part"},3107:{color:[140,60,60],opacity:1,label:"wm-lh-G_frontal_inf-Orbital_part"},3108:{color:[180,220,140],opacity:1,label:"wm-lh-G_frontal_inf-Triangular_part"},3109:{color:[140,100,180],opacity:1,label:"wm-lh-G_frontal_middle"},3110:{color:[180,20,140],opacity:1,label:"wm-lh-G_frontal_superior"},3111:{color:[140,20,140],opacity:1,label:"wm-lh-G_frontomarginal"},3112:{color:[21,10,10],opacity:1,label:"wm-lh-G_insular_long"},3113:{color:[225,140,140],opacity:1,label:"wm-lh-G_insular_short"},3114:{color:[23,60,180],opacity:1,label:"wm-lh-G_and_S_occipital_inferior"},3115:{color:[180,60,180],opacity:1,label:"wm-lh-G_occipital_middle"},3116:{color:[20,220,60],opacity:1,label:"wm-lh-G_occipital_superior"},3117:{color:[60,20,140],opacity:1,label:"wm-lh-G_occipit-temp_lat-Or_fusiform"},3118:{color:[220,180,140],opacity:1,label:"wm-lh-G_occipit-temp_med-Lingual_part"},3119:{color:[65,100,20],opacity:1,label:"wm-lh-G_occipit-temp_med-Parahippocampal_part"},3120:{color:[220,60,20],opacity:1,label:"wm-lh-G_orbital"},3121:{color:[60,100,60],opacity:1,label:"wm-lh-G_paracentral"},3122:{color:[20,60,220],opacity:1,label:"wm-lh-G_parietal_inferior-Angular_part"},3123:{color:[100,100,60],opacity:1,label:"wm-lh-G_parietal_inferior-Supramarginal_part"},3124:{color:[220,180,220],opacity:1,label:"wm-lh-G_parietal_superior"},3125:{color:[20,180,140],opacity:1,label:"wm-lh-G_postcentral"},3126:{color:[60,140,180],opacity:1,label:"wm-lh-G_precentral"},3127:{color:[25,20,140],opacity:1,label:"wm-lh-G_precuneus"},3128:{color:[20,60,100],opacity:1,label:"wm-lh-G_rectus"},3129:{color:[60,220,20],opacity:1,label:"wm-lh-G_subcallosal"},3130:{color:[60,20,220],opacity:1,label:"wm-lh-G_subcentral"},3131:{color:[220,220,100],opacity:1,label:"wm-lh-G_temporal_inferior"},3132:{color:[180,60,60],opacity:1,label:"wm-lh-G_temporal_middle"},3133:{color:[60,60,220],opacity:1,label:"wm-lh-G_temp_sup-G_temp_transv_and_interm_S"},3134:{color:[220,60,220],opacity:1,label:"wm-lh-G_temp_sup-Lateral_aspect"},3135:{color:[65,220,60],opacity:1,label:"wm-lh-G_temp_sup-Planum_polare"},3136:{color:[25,140,20],opacity:1,label:"wm-lh-G_temp_sup-Planum_tempolare"},3137:{color:[13,0,250],opacity:1,label:"wm-lh-G_and_S_transverse_frontopolar"},3138:{color:[61,20,220],opacity:1,label:"wm-lh-Lat_Fissure-ant_sgt-ramus_horizontal"},3139:{color:[61,20,60],opacity:1,label:"wm-lh-Lat_Fissure-ant_sgt-ramus_vertical"},3140:{color:[61,60,100],opacity:1,label:"wm-lh-Lat_Fissure-post_sgt"},3141:{color:[25,25,25],opacity:1,label:"wm-lh-Medial_wall"},3142:{color:[140,20,60],opacity:1,label:"wm-lh-Pole_occipital"},3143:{color:[220,180,20],opacity:1,label:"wm-lh-Pole_temporal"},3144:{color:[63,180,180],opacity:1,label:"wm-lh-S_calcarine"},3145:{color:[221,20,10],opacity:1,label:"wm-lh-S_central"},3146:{color:[21,220,20],opacity:1,label:"wm-lh-S_central_insula"},3147:{color:[183,100,20],opacity:1,label:"wm-lh-S_cingulate-Main_part_and_Intracingulate"},3148:{color:[221,20,100],opacity:1,label:"wm-lh-S_cingulate-Marginalis_part"},3149:{color:[221,60,140],opacity:1,label:"wm-lh-S_circular_insula_anterior"},3150:{color:[221,20,220],opacity:1,label:"wm-lh-S_circular_insula_inferior"},3151:{color:[61,220,220],opacity:1,label:"wm-lh-S_circular_insula_superior"},3152:{color:[100,200,200],opacity:1,label:"wm-lh-S_collateral_transverse_ant"},3153:{color:[10,200,200],opacity:1,label:"wm-lh-S_collateral_transverse_post"},3154:{color:[221,220,20],opacity:1,label:"wm-lh-S_frontal_inferior"},3155:{color:[141,20,100],opacity:1,label:"wm-lh-S_frontal_middle"},3156:{color:[61,220,100],opacity:1,label:"wm-lh-S_frontal_superior"},3157:{color:[21,220,60],opacity:1,label:"wm-lh-S_frontomarginal"},3158:{color:[141,60,20],opacity:1,label:"wm-lh-S_intermedius_primus-Jensen"},3159:{color:[143,20,220],opacity:1,label:"wm-lh-S_intraparietal-and_Parietal_transverse"},3160:{color:[61,20,180],opacity:1,label:"wm-lh-S_occipital_anterior"},3161:{color:[101,60,220],opacity:1,label:"wm-lh-S_occipital_middle_and_Lunatus"},3162:{color:[21,20,140],opacity:1,label:"wm-lh-S_occipital_superior_and_transversalis"},3163:{color:[221,140,20],opacity:1,label:"wm-lh-S_occipito-temporal_lateral"},3164:{color:[141,100,220],opacity:1,label:"wm-lh-S_occipito-temporal_medial_and_S_Lingual"},3165:{color:[101,20,20],opacity:1,label:"wm-lh-S_orbital-H_shapped"},3166:{color:[221,100,20],opacity:1,label:"wm-lh-S_orbital_lateral"},3167:{color:[181,200,20],opacity:1,label:"wm-lh-S_orbital_medial-Or_olfactory"},3168:{color:[21,180,140],opacity:1,label:"wm-lh-S_paracentral"},3169:{color:[101,100,180],opacity:1,label:"wm-lh-S_parieto_occipital"},3170:{color:[181,220,20],opacity:1,label:"wm-lh-S_pericallosal"},3171:{color:[21,140,200],opacity:1,label:"wm-lh-S_postcentral"},3172:{color:[21,20,240],opacity:1,label:"wm-lh-S_precentral-Inferior-part"},3173:{color:[21,20,200],opacity:1,label:"wm-lh-S_precentral-Superior-part"},3174:{color:[61,180,60],opacity:1,label:"wm-lh-S_subcentral_ant"},3175:{color:[61,180,250],opacity:1,label:"wm-lh-S_subcentral_post"},3176:{color:[21,20,60],opacity:1,label:"wm-lh-S_suborbital"},3177:{color:[101,60,60],opacity:1,label:"wm-lh-S_subparietal"},3178:{color:[21,220,220],opacity:1,label:"wm-lh-S_supracingulate"},3179:{color:[21,180,180],opacity:1,label:"wm-lh-S_temporal_inferior"},3180:{color:[223,220,60],opacity:1,label:"wm-lh-S_temporal_superior"},3181:{color:[221,60,60],opacity:1,label:"wm-lh-S_temporal_transverse"},4100:{color:[0,0,0],opacity:1,label:"wm-rh-Unknown"},4101:{color:[50,50,50],opacity:1,label:"wm-rh-Corpus_callosum"},4102:{color:[180,20,30],opacity:1,label:"wm-rh-G_and_S_Insula_ONLY_AVERAGE"},4103:{color:[60,25,25],opacity:1,label:"wm-rh-G_cingulate-Isthmus"},4104:{color:[25,60,60],opacity:1,label:"wm-rh-G_cingulate-Main_part"},4105:{color:[180,20,20],opacity:1,label:"wm-rh-G_cuneus"},4106:{color:[220,20,100],opacity:1,label:"wm-rh-G_frontal_inf-Opercular_part"},4107:{color:[140,60,60],opacity:1,label:"wm-rh-G_frontal_inf-Orbital_part"},4108:{color:[180,220,140],opacity:1,label:"wm-rh-G_frontal_inf-Triangular_part"},4109:{color:[140,100,180],opacity:1,label:"wm-rh-G_frontal_middle"},4110:{color:[180,20,140],opacity:1,label:"wm-rh-G_frontal_superior"},4111:{color:[140,20,140],opacity:1,label:"wm-rh-G_frontomarginal"},4112:{color:[21,10,10],opacity:1,label:"wm-rh-G_insular_long"},4113:{color:[225,140,140],opacity:1,label:"wm-rh-G_insular_short"},4114:{color:[23,60,180],opacity:1,label:"wm-rh-G_and_S_occipital_inferior"},4115:{color:[180,60,180],opacity:1,label:"wm-rh-G_occipital_middle"},4116:{color:[20,220,60],opacity:1,label:"wm-rh-G_occipital_superior"},4117:{color:[60,20,140],opacity:1,label:"wm-rh-G_occipit-temp_lat-Or_fusiform"},4118:{color:[220,180,140],opacity:1,label:"wm-rh-G_occipit-temp_med-Lingual_part"},4119:{color:[65,100,20],opacity:1,label:"wm-rh-G_occipit-temp_med-Parahippocampal_part"},4120:{color:[220,60,20],opacity:1,label:"wm-rh-G_orbital"},4121:{color:[60,100,60],opacity:1,label:"wm-rh-G_paracentral"},4122:{color:[20,60,220],opacity:1,label:"wm-rh-G_parietal_inferior-Angular_part"},4123:{color:[100,100,60],opacity:1,label:"wm-rh-G_parietal_inferior-Supramarginal_part"},4124:{color:[220,180,220],opacity:1,label:"wm-rh-G_parietal_superior"},4125:{color:[20,180,140],opacity:1,label:"wm-rh-G_postcentral"},4126:{color:[60,140,180],opacity:1,label:"wm-rh-G_precentral"},4127:{color:[25,20,140],opacity:1,label:"wm-rh-G_precuneus"},4128:{color:[20,60,100],opacity:1,label:"wm-rh-G_rectus"},4129:{color:[60,220,20],opacity:1,label:"wm-rh-G_subcallosal"},4130:{color:[60,20,220],opacity:1,label:"wm-rh-G_subcentral"},4131:{color:[220,220,100],opacity:1,label:"wm-rh-G_temporal_inferior"},4132:{color:[180,60,60],opacity:1,label:"wm-rh-G_temporal_middle"},4133:{color:[60,60,220],opacity:1,label:"wm-rh-G_temp_sup-G_temp_transv_and_interm_S"},4134:{color:[220,60,220],opacity:1,label:"wm-rh-G_temp_sup-Lateral_aspect"},4135:{color:[65,220,60],opacity:1,label:"wm-rh-G_temp_sup-Planum_polare"},4136:{color:[25,140,20],opacity:1,label:"wm-rh-G_temp_sup-Planum_tempolare"},4137:{color:[13,0,250],opacity:1,label:"wm-rh-G_and_S_transverse_frontopolar"},4138:{color:[61,20,220],opacity:1,label:"wm-rh-Lat_Fissure-ant_sgt-ramus_horizontal"},4139:{color:[61,20,60],opacity:1,label:"wm-rh-Lat_Fissure-ant_sgt-ramus_vertical"},4140:{color:[61,60,100],opacity:1,label:"wm-rh-Lat_Fissure-post_sgt"},4141:{color:[25,25,25],opacity:1,label:"wm-rh-Medial_wall"},4142:{color:[140,20,60],opacity:1,label:"wm-rh-Pole_occipital"},4143:{color:[220,180,20],opacity:1,label:"wm-rh-Pole_temporal"},4144:{color:[63,180,180],opacity:1,label:"wm-rh-S_calcarine"},4145:{color:[221,20,10],opacity:1,label:"wm-rh-S_central"},4146:{color:[21,220,20],opacity:1,label:"wm-rh-S_central_insula"},4147:{color:[183,100,20],opacity:1,label:"wm-rh-S_cingulate-Main_part_and_Intracingulate"},4148:{color:[221,20,100],opacity:1,label:"wm-rh-S_cingulate-Marginalis_part"},4149:{color:[221,60,140],opacity:1,label:"wm-rh-S_circular_insula_anterior"},4150:{color:[221,20,220],opacity:1,label:"wm-rh-S_circular_insula_inferior"},4151:{color:[61,220,220],opacity:1,label:"wm-rh-S_circular_insula_superior"},4152:{color:[100,200,200],opacity:1,label:"wm-rh-S_collateral_transverse_ant"},4153:{color:[10,200,200],opacity:1,label:"wm-rh-S_collateral_transverse_post"},4154:{color:[221,220,20],opacity:1,label:"wm-rh-S_frontal_inferior"},4155:{color:[141,20,100],opacity:1,label:"wm-rh-S_frontal_middle"},4156:{color:[61,220,100],opacity:1,label:"wm-rh-S_frontal_superior"},4157:{color:[21,220,60],opacity:1,label:"wm-rh-S_frontomarginal"},4158:{color:[141,60,20],opacity:1,label:"wm-rh-S_intermedius_primus-Jensen"},4159:{color:[143,20,220],opacity:1,label:"wm-rh-S_intraparietal-and_Parietal_transverse"},4160:{color:[61,20,180],opacity:1,label:"wm-rh-S_occipital_anterior"},4161:{color:[101,60,220],opacity:1,label:"wm-rh-S_occipital_middle_and_Lunatus"},4162:{color:[21,20,140],opacity:1,label:"wm-rh-S_occipital_superior_and_transversalis"},4163:{color:[221,140,20],opacity:1,label:"wm-rh-S_occipito-temporal_lateral"},4164:{color:[141,100,220],opacity:1,label:"wm-rh-S_occipito-temporal_medial_and_S_Lingual"},4165:{color:[101,20,20],opacity:1,label:"wm-rh-S_orbital-H_shapped"},4166:{color:[221,100,20],opacity:1,label:"wm-rh-S_orbital_lateral"},4167:{color:[181,200,20],opacity:1,label:"wm-rh-S_orbital_medial-Or_olfactory"},4168:{color:[21,180,140],opacity:1,label:"wm-rh-S_paracentral"},4169:{color:[101,100,180],opacity:1,label:"wm-rh-S_parieto_occipital"},4170:{color:[181,220,20],opacity:1,label:"wm-rh-S_pericallosal"},4171:{color:[21,140,200],opacity:1,label:"wm-rh-S_postcentral"},4172:{color:[21,20,240],opacity:1,label:"wm-rh-S_precentral-Inferior-part"},4173:{color:[21,20,200],opacity:1,label:"wm-rh-S_precentral-Superior-part"},4174:{color:[61,180,60],opacity:1,label:"wm-rh-S_subcentral_ant"},4175:{color:[61,180,250],opacity:1,label:"wm-rh-S_subcentral_post"},4176:{color:[21,20,60],opacity:1,label:"wm-rh-S_suborbital"},4177:{color:[101,60,60],opacity:1,label:"wm-rh-S_subparietal"},4178:{color:[21,220,220],opacity:1,label:"wm-rh-S_supracingulate"},4179:{color:[21,180,180],opacity:1,label:"wm-rh-S_temporal_inferior"},4180:{color:[223,220,60],opacity:1,label:"wm-rh-S_temporal_superior"},4181:{color:[221,60,60],opacity:1,label:"wm-rh-S_temporal_transverse"},5001:{color:[20,30,40],opacity:1,label:"Left-UnsegmentedWhiteMatter"},5002:{color:[20,30,40],opacity:1,label:"Right-UnsegmentedWhiteMatter"},5100:{color:[204,102,102],opacity:1,label:"fmajor"},5101:{color:[204,102,102],opacity:1,label:"fminor"},5102:{color:[255,255,102],opacity:1,label:"lh.atr"},5103:{color:[153,204,0],opacity:1,label:"lh.cab"},5104:{color:[0,153,153],opacity:1,label:"lh.ccg"},5105:{color:[204,153,255],opacity:1,label:"lh.cst"},5106:{color:[255,153,51],opacity:1,label:"lh.ilf"},5107:{color:[204,204,204],opacity:1,label:"lh.slfp"},5108:{color:[153,255,255],opacity:1,label:"lh.slft"},5109:{color:[102,153,255],opacity:1,label:"lh.unc"},5110:{color:[255,255,102],opacity:1,label:"rh.atr"},5111:{color:[153,204,0],opacity:1,label:"rh.cab"},5112:{color:[0,153,153],opacity:1,label:"rh.ccg"},5113:{color:[204,153,255],opacity:1,label:"rh.cst"},5114:{color:[255,153,51],opacity:1,label:"rh.ilf"},5115:{color:[204,204,204],opacity:1,label:"rh.slfp"},5116:{color:[153,255,255],opacity:1,label:"rh.slft"},5117:{color:[102,153,255],opacity:1,label:"rh.unc"},5200:{color:[204,102,102],opacity:1,label:"CC-ForcepsMajor"},5201:{color:[204,102,102],opacity:1,label:"CC-ForcepsMinor"},5202:{color:[255,255,102],opacity:1,label:"LAntThalRadiation"},5203:{color:[153,204,0],opacity:1,label:"LCingulumAngBundle"},5204:{color:[0,153,153],opacity:1,label:"LCingulumCingGyrus"},5205:{color:[204,153,255],opacity:1,label:"LCorticospinalTract"},5206:{color:[255,153,51],opacity:1,label:"LInfLongFas"},5207:{color:[204,204,204],opacity:1,label:"LSupLongFasParietal"},5208:{color:[153,255,255],opacity:1,label:"LSupLongFasTemporal"},5209:{color:[102,153,255],opacity:1,label:"LUncinateFas"},5210:{color:[255,255,102],opacity:1,label:"RAntThalRadiation"},5211:{color:[153,204,0],opacity:1,label:"RCingulumAngBundle"},5212:{color:[0,153,153],opacity:1,label:"RCingulumCingGyrus"},5213:{color:[204,153,255],opacity:1,label:"RCorticospinalTract"},5214:{color:[255,153,51],opacity:1,label:"RInfLongFas"},5215:{color:[204,204,204],opacity:1,label:"RSupLongFasParietal"},5216:{color:[153,255,255],opacity:1,label:"RSupLongFasTemporal"},5217:{color:[102,153,255],opacity:1,label:"RUncinateFas"},6e3:{color:[0,255,0],opacity:1,label:"CST-orig"},6001:{color:[255,255,0],opacity:1,label:"CST-hammer"},6002:{color:[0,255,255],opacity:1,label:"CST-CVS"},6003:{color:[0,0,255],opacity:1,label:"CST-flirt"},6010:{color:[236,16,231],opacity:1,label:"Left-SLF1"},6020:{color:[237,18,232],opacity:1,label:"Right-SLF1"},6030:{color:[236,13,227],opacity:1,label:"Left-SLF3"},6040:{color:[236,17,228],opacity:1,label:"Right-SLF3"},6050:{color:[1,255,1],opacity:1,label:"Left-CST"},6060:{color:[2,255,1],opacity:1,label:"Right-CST"},6070:{color:[236,14,230],opacity:1,label:"Left-SLF2"},6080:{color:[237,14,230],opacity:1,label:"Right-SLF2"},7001:{color:[72,132,181],opacity:1,label:"Lateral-nucleus"},7002:{color:[243,243,243],opacity:1,label:"Basolateral-nucleus"},7003:{color:[207,63,79],opacity:1,label:"Basal-nucleus"},7004:{color:[121,20,135],opacity:1,label:"Centromedial-nucleus"},7005:{color:[197,60,248],opacity:1,label:"Central-nucleus"},7006:{color:[2,149,2],opacity:1,label:"Medial-nucleus"},7007:{color:[221,249,166],opacity:1,label:"Cortical-nucleus"},7008:{color:[232,146,35],opacity:1,label:"Accessory-Basal-nucleus"},7009:{color:[20,60,120],opacity:1,label:"Corticoamygdaloid-transitio"},7010:{color:[250,250,0],opacity:1,label:"Anterior-amygdaloid-area-AAA"},7011:{color:[122,187,222],opacity:1,label:"Fusion-amygdala-HP-FAH"},7012:{color:[237,12,177],opacity:1,label:"Hippocampal-amygdala-transition-HATA"},7013:{color:[10,49,255],opacity:1,label:"Endopiriform-nucleus"},7014:{color:[205,184,144],opacity:1,label:"Lateral-nucleus-olfactory-tract"},7015:{color:[45,205,165],opacity:1,label:"Paralaminar-nucleus"},7016:{color:[117,160,175],opacity:1,label:"Intercalated-nucleus"},7017:{color:[221,217,21],opacity:1,label:"Prepiriform-cortex"},7018:{color:[20,60,120],opacity:1,label:"Periamygdaloid-cortex"},7019:{color:[141,21,100],opacity:1,label:"Envelope-Amygdala"},7020:{color:[225,140,141],opacity:1,label:"Extranuclear-Amydala"},7100:{color:[42,201,168],opacity:1,label:"Brainstem-inferior-colliculus"},7101:{color:[168,104,162],opacity:1,label:"Brainstem-cochlear-nucleus"},8001:{color:[74,130,181],opacity:1,label:"Thalamus-Anterior"},8002:{color:[242,241,240],opacity:1,label:"Thalamus-Ventral-anterior"},8003:{color:[206,65,78],opacity:1,label:"Thalamus-Lateral-dorsal"},8004:{color:[120,21,133],opacity:1,label:"Thalamus-Lateral-posterior"},8005:{color:[195,61,246],opacity:1,label:"Thalamus-Ventral-lateral"},8006:{color:[3,147,6],opacity:1,label:"Thalamus-Ventral-posterior-medial"},8007:{color:[220,251,163],opacity:1,label:"Thalamus-Ventral-posterior-lateral"},8008:{color:[232,146,33],opacity:1,label:"Thalamus-intralaminar"},8009:{color:[4,114,14],opacity:1,label:"Thalamus-centromedian"},8010:{color:[121,184,220],opacity:1,label:"Thalamus-mediodorsal"},8011:{color:[235,11,175],opacity:1,label:"Thalamus-medial"},8012:{color:[12,46,250],opacity:1,label:"Thalamus-pulvinar"},8013:{color:[203,182,143],opacity:1,label:"Thalamus-lateral-geniculate"},8014:{color:[42,204,167],opacity:1,label:"Thalamus-medial-geniculate"},9e3:{color:[50,100,30],opacity:1,label:"ctx-lh-prefrontal"},9001:{color:[30,100,45],opacity:1,label:"ctx-lh-primary-motor"},9002:{color:[130,100,165],opacity:1,label:"ctx-lh-premotor"},9003:{color:[105,25,5],opacity:1,label:"ctx-lh-temporal"},9004:{color:[125,70,55],opacity:1,label:"ctx-lh-posterior-parietal"},9005:{color:[225,20,105],opacity:1,label:"ctx-lh-prim-sec-somatosensory"},9006:{color:[225,20,15],opacity:1,label:"ctx-lh-occipital"},9500:{color:[50,200,30],opacity:1,label:"ctx-rh-prefrontal"},9501:{color:[30,150,45],opacity:1,label:"ctx-rh-primary-motor"},9502:{color:[130,150,165],opacity:1,label:"ctx-rh-premotor"},9503:{color:[105,75,5],opacity:1,label:"ctx-rh-temporal"},9504:{color:[125,120,55],opacity:1,label:"ctx-rh-posterior-parietal"},9505:{color:[225,70,105],opacity:1,label:"ctx-rh-prim-sec-somatosensory"},9506:{color:[225,70,15],opacity:1,label:"ctx-rh-occipital"},11100:{color:[0,0,0],opacity:1,label:"ctx_lh_Unknown"},11101:{color:[23,220,60],opacity:1,label:"ctx_lh_G_and_S_frontomargin"},11102:{color:[23,60,180],opacity:1,label:"ctx_lh_G_and_S_occipital_inf"},11103:{color:[63,100,60],opacity:1,label:"ctx_lh_G_and_S_paracentral"},11104:{color:[63,20,220],opacity:1,label:"ctx_lh_G_and_S_subcentral"},11105:{color:[13,0,250],opacity:1,label:"ctx_lh_G_and_S_transv_frontopol"},11106:{color:[26,60,0],opacity:1,label:"ctx_lh_G_and_S_cingul-Ant"},11107:{color:[26,60,75],opacity:1,label:"ctx_lh_G_and_S_cingul-Mid-Ant"},11108:{color:[26,60,150],opacity:1,label:"ctx_lh_G_and_S_cingul-Mid-Post"},11109:{color:[25,60,250],opacity:1,label:"ctx_lh_G_cingul-Post-dorsal"},11110:{color:[60,25,25],opacity:1,label:"ctx_lh_G_cingul-Post-ventral"},11111:{color:[180,20,20],opacity:1,label:"ctx_lh_G_cuneus"},11112:{color:[220,20,100],opacity:1,label:"ctx_lh_G_front_inf-Opercular"},11113:{color:[140,60,60],opacity:1,label:"ctx_lh_G_front_inf-Orbital"},11114:{color:[180,220,140],opacity:1,label:"ctx_lh_G_front_inf-Triangul"},11115:{color:[140,100,180],opacity:1,label:"ctx_lh_G_front_middle"},11116:{color:[180,20,140],opacity:1,label:"ctx_lh_G_front_sup"},11117:{color:[23,10,10],opacity:1,label:"ctx_lh_G_Ins_lg_and_S_cent_ins"},11118:{color:[225,140,140],opacity:1,label:"ctx_lh_G_insular_short"},11119:{color:[180,60,180],opacity:1,label:"ctx_lh_G_occipital_middle"},11120:{color:[20,220,60],opacity:1,label:"ctx_lh_G_occipital_sup"},11121:{color:[60,20,140],opacity:1,label:"ctx_lh_G_oc-temp_lat-fusifor"},11122:{color:[220,180,140],opacity:1,label:"ctx_lh_G_oc-temp_med-Lingual"},11123:{color:[65,100,20],opacity:1,label:"ctx_lh_G_oc-temp_med-Parahip"},11124:{color:[220,60,20],opacity:1,label:"ctx_lh_G_orbital"},11125:{color:[20,60,220],opacity:1,label:"ctx_lh_G_pariet_inf-Angular"},11126:{color:[100,100,60],opacity:1,label:"ctx_lh_G_pariet_inf-Supramar"},11127:{color:[220,180,220],opacity:1,label:"ctx_lh_G_parietal_sup"},11128:{color:[20,180,140],opacity:1,label:"ctx_lh_G_postcentral"},11129:{color:[60,140,180],opacity:1,label:"ctx_lh_G_precentral"},11130:{color:[25,20,140],opacity:1,label:"ctx_lh_G_precuneus"},11131:{color:[20,60,100],opacity:1,label:"ctx_lh_G_rectus"},11132:{color:[60,220,20],opacity:1,label:"ctx_lh_G_subcallosal"},11133:{color:[60,60,220],opacity:1,label:"ctx_lh_G_temp_sup-G_T_transv"},11134:{color:[220,60,220],opacity:1,label:"ctx_lh_G_temp_sup-Lateral"},11135:{color:[65,220,60],opacity:1,label:"ctx_lh_G_temp_sup-Plan_polar"},11136:{color:[25,140,20],opacity:1,label:"ctx_lh_G_temp_sup-Plan_tempo"},11137:{color:[220,220,100],opacity:1,label:"ctx_lh_G_temporal_inf"},11138:{color:[180,60,60],opacity:1,label:"ctx_lh_G_temporal_middle"},11139:{color:[61,20,220],opacity:1,label:"ctx_lh_Lat_Fis-ant-Horizont"},11140:{color:[61,20,60],opacity:1,label:"ctx_lh_Lat_Fis-ant-Vertical"},11141:{color:[61,60,100],opacity:1,label:"ctx_lh_Lat_Fis-post"},11142:{color:[25,25,25],opacity:1,label:"ctx_lh_Medial_wall"},11143:{color:[140,20,60],opacity:1,label:"ctx_lh_Pole_occipital"},11144:{color:[220,180,20],opacity:1,label:"ctx_lh_Pole_temporal"},11145:{color:[63,180,180],opacity:1,label:"ctx_lh_S_calcarine"},11146:{color:[221,20,10],opacity:1,label:"ctx_lh_S_central"},11147:{color:[221,20,100],opacity:1,label:"ctx_lh_S_cingul-Marginalis"},11148:{color:[221,60,140],opacity:1,label:"ctx_lh_S_circular_insula_ant"},11149:{color:[221,20,220],opacity:1,label:"ctx_lh_S_circular_insula_inf"},11150:{color:[61,220,220],opacity:1,label:"ctx_lh_S_circular_insula_sup"},11151:{color:[100,200,200],opacity:1,label:"ctx_lh_S_collat_transv_ant"},11152:{color:[10,200,200],opacity:1,label:"ctx_lh_S_collat_transv_post"},11153:{color:[221,220,20],opacity:1,label:"ctx_lh_S_front_inf"},11154:{color:[141,20,100],opacity:1,label:"ctx_lh_S_front_middle"},11155:{color:[61,220,100],opacity:1,label:"ctx_lh_S_front_sup"},11156:{color:[141,60,20],opacity:1,label:"ctx_lh_S_interm_prim-Jensen"},11157:{color:[143,20,220],opacity:1,label:"ctx_lh_S_intrapariet_and_P_trans"},11158:{color:[101,60,220],opacity:1,label:"ctx_lh_S_oc_middle_and_Lunatus"},11159:{color:[21,20,140],opacity:1,label:"ctx_lh_S_oc_sup_and_transversal"},11160:{color:[61,20,180],opacity:1,label:"ctx_lh_S_occipital_ant"},11161:{color:[221,140,20],opacity:1,label:"ctx_lh_S_oc-temp_lat"},11162:{color:[141,100,220],opacity:1,label:"ctx_lh_S_oc-temp_med_and_Lingual"},11163:{color:[221,100,20],opacity:1,label:"ctx_lh_S_orbital_lateral"},11164:{color:[181,200,20],opacity:1,label:"ctx_lh_S_orbital_med-olfact"},11165:{color:[101,20,20],opacity:1,label:"ctx_lh_S_orbital-H_Shaped"},11166:{color:[101,100,180],opacity:1,label:"ctx_lh_S_parieto_occipital"},11167:{color:[181,220,20],opacity:1,label:"ctx_lh_S_pericallosal"},11168:{color:[21,140,200],opacity:1,label:"ctx_lh_S_postcentral"},11169:{color:[21,20,240],opacity:1,label:"ctx_lh_S_precentral-inf-part"},11170:{color:[21,20,200],opacity:1,label:"ctx_lh_S_precentral-sup-part"},11171:{color:[21,20,60],opacity:1,label:"ctx_lh_S_suborbital"},11172:{color:[101,60,60],opacity:1,label:"ctx_lh_S_subparietal"},11173:{color:[21,180,180],opacity:1,label:"ctx_lh_S_temporal_inf"},11174:{color:[223,220,60],opacity:1,label:"ctx_lh_S_temporal_sup"},11175:{color:[221,60,60],opacity:1,label:"ctx_lh_S_temporal_transverse"},12100:{color:[0,0,0],opacity:1,label:"ctx_rh_Unknown"},12101:{color:[23,220,60],opacity:1,label:"ctx_rh_G_and_S_frontomargin"},12102:{color:[23,60,180],opacity:1,label:"ctx_rh_G_and_S_occipital_inf"},12103:{color:[63,100,60],opacity:1,label:"ctx_rh_G_and_S_paracentral"},12104:{color:[63,20,220],opacity:1,label:"ctx_rh_G_and_S_subcentral"},12105:{color:[13,0,250],opacity:1,label:"ctx_rh_G_and_S_transv_frontopol"},12106:{color:[26,60,0],opacity:1,label:"ctx_rh_G_and_S_cingul-Ant"},12107:{color:[26,60,75],opacity:1,label:"ctx_rh_G_and_S_cingul-Mid-Ant"},12108:{color:[26,60,150],opacity:1,label:"ctx_rh_G_and_S_cingul-Mid-Post"},12109:{color:[25,60,250],opacity:1,label:"ctx_rh_G_cingul-Post-dorsal"},12110:{color:[60,25,25],opacity:1,label:"ctx_rh_G_cingul-Post-ventral"},12111:{color:[180,20,20],opacity:1,label:"ctx_rh_G_cuneus"},12112:{color:[220,20,100],opacity:1,label:"ctx_rh_G_front_inf-Opercular"},12113:{color:[140,60,60],opacity:1,label:"ctx_rh_G_front_inf-Orbital"},12114:{color:[180,220,140],opacity:1,label:"ctx_rh_G_front_inf-Triangul"},12115:{color:[140,100,180],opacity:1,label:"ctx_rh_G_front_middle"},12116:{color:[180,20,140],opacity:1,label:"ctx_rh_G_front_sup"},12117:{color:[23,10,10],opacity:1,label:"ctx_rh_G_Ins_lg_and_S_cent_ins"},12118:{color:[225,140,140],opacity:1,label:"ctx_rh_G_insular_short"},12119:{color:[180,60,180],opacity:1,label:"ctx_rh_G_occipital_middle"},12120:{color:[20,220,60],opacity:1,label:"ctx_rh_G_occipital_sup"},12121:{color:[60,20,140],opacity:1,label:"ctx_rh_G_oc-temp_lat-fusifor"},12122:{color:[220,180,140],opacity:1,label:"ctx_rh_G_oc-temp_med-Lingual"},12123:{color:[65,100,20],opacity:1,label:"ctx_rh_G_oc-temp_med-Parahip"},12124:{color:[220,60,20],opacity:1,label:"ctx_rh_G_orbital"},12125:{color:[20,60,220],opacity:1,label:"ctx_rh_G_pariet_inf-Angular"},12126:{color:[100,100,60],opacity:1,label:"ctx_rh_G_pariet_inf-Supramar"},12127:{color:[220,180,220],opacity:1,label:"ctx_rh_G_parietal_sup"},12128:{color:[20,180,140],opacity:1,label:"ctx_rh_G_postcentral"},12129:{color:[60,140,180],opacity:1,label:"ctx_rh_G_precentral"},12130:{color:[25,20,140],opacity:1,label:"ctx_rh_G_precuneus"},12131:{color:[20,60,100],opacity:1,label:"ctx_rh_G_rectus"},12132:{color:[60,220,20],opacity:1,label:"ctx_rh_G_subcallosal"},12133:{color:[60,60,220],opacity:1,label:"ctx_rh_G_temp_sup-G_T_transv"},12134:{color:[220,60,220],opacity:1,label:"ctx_rh_G_temp_sup-Lateral"},12135:{color:[65,220,60],opacity:1,label:"ctx_rh_G_temp_sup-Plan_polar"},12136:{color:[25,140,20],opacity:1,label:"ctx_rh_G_temp_sup-Plan_tempo"},12137:{color:[220,220,100],opacity:1,label:"ctx_rh_G_temporal_inf"},12138:{color:[180,60,60],opacity:1,label:"ctx_rh_G_temporal_middle"},12139:{color:[61,20,220],opacity:1,label:"ctx_rh_Lat_Fis-ant-Horizont"},12140:{color:[61,20,60],opacity:1,label:"ctx_rh_Lat_Fis-ant-Vertical"},12141:{color:[61,60,100],opacity:1,label:"ctx_rh_Lat_Fis-post"},12142:{color:[25,25,25],opacity:1,label:"ctx_rh_Medial_wall"},12143:{color:[140,20,60],opacity:1,label:"ctx_rh_Pole_occipital"},12144:{color:[220,180,20],opacity:1,label:"ctx_rh_Pole_temporal"},12145:{color:[63,180,180],opacity:1,label:"ctx_rh_S_calcarine"},12146:{color:[221,20,10],opacity:1,label:"ctx_rh_S_central"},12147:{color:[221,20,100],opacity:1,label:"ctx_rh_S_cingul-Marginalis"},12148:{color:[221,60,140],opacity:1,label:"ctx_rh_S_circular_insula_ant"},12149:{color:[221,20,220],opacity:1,label:"ctx_rh_S_circular_insula_inf"},12150:{color:[61,220,220],opacity:1,label:"ctx_rh_S_circular_insula_sup"},12151:{color:[100,200,200],opacity:1,label:"ctx_rh_S_collat_transv_ant"},12152:{color:[10,200,200],opacity:1,label:"ctx_rh_S_collat_transv_post"},12153:{color:[221,220,20],opacity:1,label:"ctx_rh_S_front_inf"},12154:{color:[141,20,100],opacity:1,label:"ctx_rh_S_front_middle"},12155:{color:[61,220,100],opacity:1,label:"ctx_rh_S_front_sup"},12156:{color:[141,60,20],opacity:1,label:"ctx_rh_S_interm_prim-Jensen"},12157:{color:[143,20,220],opacity:1,label:"ctx_rh_S_intrapariet_and_P_trans"},12158:{color:[101,60,220],opacity:1,label:"ctx_rh_S_oc_middle_and_Lunatus"},12159:{color:[21,20,140],opacity:1,label:"ctx_rh_S_oc_sup_and_transversal"},12160:{color:[61,20,180],opacity:1,label:"ctx_rh_S_occipital_ant"},12161:{color:[221,140,20],opacity:1,label:"ctx_rh_S_oc-temp_lat"},12162:{color:[141,100,220],opacity:1,label:"ctx_rh_S_oc-temp_med_and_Lingual"},12163:{color:[221,100,20],opacity:1,label:"ctx_rh_S_orbital_lateral"},12164:{color:[181,200,20],opacity:1,label:"ctx_rh_S_orbital_med-olfact"},12165:{color:[101,20,20],opacity:1,label:"ctx_rh_S_orbital-H_Shaped"},12166:{color:[101,100,180],opacity:1,label:"ctx_rh_S_parieto_occipital"},12167:{color:[181,220,20],opacity:1,label:"ctx_rh_S_pericallosal"},12168:{color:[21,140,200],opacity:1,label:"ctx_rh_S_postcentral"},12169:{color:[21,20,240],opacity:1,label:"ctx_rh_S_precentral-inf-part"},12170:{color:[21,20,200],opacity:1,label:"ctx_rh_S_precentral-sup-part"},12171:{color:[21,20,60],opacity:1,label:"ctx_rh_S_suborbital"},12172:{color:[101,60,60],opacity:1,label:"ctx_rh_S_subparietal"},12173:{color:[21,180,180],opacity:1,label:"ctx_rh_S_temporal_inf"},12174:{color:[223,220,60],opacity:1,label:"ctx_rh_S_temporal_sup"},12175:{color:[221,60,60],opacity:1,label:"ctx_rh_S_temporal_transverse"},13100:{color:[0,0,0],opacity:1,label:"wm_lh_Unknown"},13101:{color:[23,220,60],opacity:1,label:"wm_lh_G_and_S_frontomargin"},13102:{color:[23,60,180],opacity:1,label:"wm_lh_G_and_S_occipital_inf"},13103:{color:[63,100,60],opacity:1,label:"wm_lh_G_and_S_paracentral"},13104:{color:[63,20,220],opacity:1,label:"wm_lh_G_and_S_subcentral"},13105:{color:[13,0,250],opacity:1,label:"wm_lh_G_and_S_transv_frontopol"},13106:{color:[26,60,0],opacity:1,label:"wm_lh_G_and_S_cingul-Ant"},13107:{color:[26,60,75],opacity:1,label:"wm_lh_G_and_S_cingul-Mid-Ant"},13108:{color:[26,60,150],opacity:1,label:"wm_lh_G_and_S_cingul-Mid-Post"},13109:{color:[25,60,250],opacity:1,label:"wm_lh_G_cingul-Post-dorsal"},13110:{color:[60,25,25],opacity:1,label:"wm_lh_G_cingul-Post-ventral"},13111:{color:[180,20,20],opacity:1,label:"wm_lh_G_cuneus"},13112:{color:[220,20,100],opacity:1,label:"wm_lh_G_front_inf-Opercular"},13113:{color:[140,60,60],opacity:1,label:"wm_lh_G_front_inf-Orbital"},13114:{color:[180,220,140],opacity:1,label:"wm_lh_G_front_inf-Triangul"},13115:{color:[140,100,180],opacity:1,label:"wm_lh_G_front_middle"},13116:{color:[180,20,140],opacity:1,label:"wm_lh_G_front_sup"},13117:{color:[23,10,10],opacity:1,label:"wm_lh_G_Ins_lg_and_S_cent_ins"},13118:{color:[225,140,140],opacity:1,label:"wm_lh_G_insular_short"},13119:{color:[180,60,180],opacity:1,label:"wm_lh_G_occipital_middle"},13120:{color:[20,220,60],opacity:1,label:"wm_lh_G_occipital_sup"},13121:{color:[60,20,140],opacity:1,label:"wm_lh_G_oc-temp_lat-fusifor"},13122:{color:[220,180,140],opacity:1,label:"wm_lh_G_oc-temp_med-Lingual"},13123:{color:[65,100,20],opacity:1,label:"wm_lh_G_oc-temp_med-Parahip"},13124:{color:[220,60,20],opacity:1,label:"wm_lh_G_orbital"},13125:{color:[20,60,220],opacity:1,label:"wm_lh_G_pariet_inf-Angular"},13126:{color:[100,100,60],opacity:1,label:"wm_lh_G_pariet_inf-Supramar"},13127:{color:[220,180,220],opacity:1,label:"wm_lh_G_parietal_sup"},13128:{color:[20,180,140],opacity:1,label:"wm_lh_G_postcentral"},13129:{color:[60,140,180],opacity:1,label:"wm_lh_G_precentral"},13130:{color:[25,20,140],opacity:1,label:"wm_lh_G_precuneus"},13131:{color:[20,60,100],opacity:1,label:"wm_lh_G_rectus"},13132:{color:[60,220,20],opacity:1,label:"wm_lh_G_subcallosal"},13133:{color:[60,60,220],opacity:1,label:"wm_lh_G_temp_sup-G_T_transv"},13134:{color:[220,60,220],opacity:1,label:"wm_lh_G_temp_sup-Lateral"},13135:{color:[65,220,60],opacity:1,label:"wm_lh_G_temp_sup-Plan_polar"},13136:{color:[25,140,20],opacity:1,label:"wm_lh_G_temp_sup-Plan_tempo"},13137:{color:[220,220,100],opacity:1,label:"wm_lh_G_temporal_inf"},13138:{color:[180,60,60],opacity:1,label:"wm_lh_G_temporal_middle"},13139:{color:[61,20,220],opacity:1,label:"wm_lh_Lat_Fis-ant-Horizont"},13140:{color:[61,20,60],opacity:1,label:"wm_lh_Lat_Fis-ant-Vertical"},13141:{color:[61,60,100],opacity:1,label:"wm_lh_Lat_Fis-post"},13142:{color:[25,25,25],opacity:1,label:"wm_lh_Medial_wall"},13143:{color:[140,20,60],opacity:1,label:"wm_lh_Pole_occipital"},13144:{color:[220,180,20],opacity:1,label:"wm_lh_Pole_temporal"},13145:{color:[63,180,180],opacity:1,label:"wm_lh_S_calcarine"},13146:{color:[221,20,10],opacity:1,label:"wm_lh_S_central"},13147:{color:[221,20,100],opacity:1,label:"wm_lh_S_cingul-Marginalis"},13148:{color:[221,60,140],opacity:1,label:"wm_lh_S_circular_insula_ant"},13149:{color:[221,20,220],opacity:1,label:"wm_lh_S_circular_insula_inf"},13150:{color:[61,220,220],opacity:1,label:"wm_lh_S_circular_insula_sup"},13151:{color:[100,200,200],opacity:1,label:"wm_lh_S_collat_transv_ant"},13152:{color:[10,200,200],opacity:1,label:"wm_lh_S_collat_transv_post"},13153:{color:[221,220,20],opacity:1,label:"wm_lh_S_front_inf"},13154:{color:[141,20,100],opacity:1,label:"wm_lh_S_front_middle"},13155:{color:[61,220,100],opacity:1,label:"wm_lh_S_front_sup"},13156:{color:[141,60,20],opacity:1,label:"wm_lh_S_interm_prim-Jensen"},13157:{color:[143,20,220],opacity:1,label:"wm_lh_S_intrapariet_and_P_trans"},13158:{color:[101,60,220],opacity:1,label:"wm_lh_S_oc_middle_and_Lunatus"},13159:{color:[21,20,140],opacity:1,label:"wm_lh_S_oc_sup_and_transversal"},13160:{color:[61,20,180],opacity:1,label:"wm_lh_S_occipital_ant"},13161:{color:[221,140,20],opacity:1,label:"wm_lh_S_oc-temp_lat"},13162:{color:[141,100,220],opacity:1,label:"wm_lh_S_oc-temp_med_and_Lingual"},13163:{color:[221,100,20],opacity:1,label:"wm_lh_S_orbital_lateral"},13164:{color:[181,200,20],opacity:1,label:"wm_lh_S_orbital_med-olfact"},13165:{color:[101,20,20],opacity:1,label:"wm_lh_S_orbital-H_Shaped"},13166:{color:[101,100,180],opacity:1,label:"wm_lh_S_parieto_occipital"},13167:{color:[181,220,20],opacity:1,label:"wm_lh_S_pericallosal"},13168:{color:[21,140,200],opacity:1,label:"wm_lh_S_postcentral"},13169:{color:[21,20,240],opacity:1,label:"wm_lh_S_precentral-inf-part"},13170:{color:[21,20,200],opacity:1,label:"wm_lh_S_precentral-sup-part"},13171:{color:[21,20,60],opacity:1,label:"wm_lh_S_suborbital"},13172:{color:[101,60,60],opacity:1,label:"wm_lh_S_subparietal"},13173:{color:[21,180,180],opacity:1,label:"wm_lh_S_temporal_inf"},13174:{color:[223,220,60],opacity:1,label:"wm_lh_S_temporal_sup"},13175:{color:[221,60,60],opacity:1,label:"wm_lh_S_temporal_transverse"},14100:{color:[0,0,0],opacity:1,label:"wm_rh_Unknown"},14101:{color:[23,220,60],opacity:1,label:"wm_rh_G_and_S_frontomargin"},14102:{color:[23,60,180],opacity:1,label:"wm_rh_G_and_S_occipital_inf"},14103:{color:[63,100,60],opacity:1,label:"wm_rh_G_and_S_paracentral"},14104:{color:[63,20,220],opacity:1,label:"wm_rh_G_and_S_subcentral"},14105:{color:[13,0,250],opacity:1,label:"wm_rh_G_and_S_transv_frontopol"},14106:{color:[26,60,0],opacity:1,label:"wm_rh_G_and_S_cingul-Ant"},14107:{color:[26,60,75],opacity:1,label:"wm_rh_G_and_S_cingul-Mid-Ant"},14108:{color:[26,60,150],opacity:1,label:"wm_rh_G_and_S_cingul-Mid-Post"},14109:{color:[25,60,250],opacity:1,label:"wm_rh_G_cingul-Post-dorsal"},14110:{color:[60,25,25],opacity:1,label:"wm_rh_G_cingul-Post-ventral"},14111:{color:[180,20,20],opacity:1,label:"wm_rh_G_cuneus"},14112:{color:[220,20,100],opacity:1,label:"wm_rh_G_front_inf-Opercular"},14113:{color:[140,60,60],opacity:1,label:"wm_rh_G_front_inf-Orbital"},14114:{color:[180,220,140],opacity:1,label:"wm_rh_G_front_inf-Triangul"},14115:{color:[140,100,180],opacity:1,label:"wm_rh_G_front_middle"},14116:{color:[180,20,140],opacity:1,label:"wm_rh_G_front_sup"},14117:{color:[23,10,10],opacity:1,label:"wm_rh_G_Ins_lg_and_S_cent_ins"},14118:{color:[225,140,140],opacity:1,label:"wm_rh_G_insular_short"},14119:{color:[180,60,180],opacity:1,label:"wm_rh_G_occipital_middle"},14120:{color:[20,220,60],opacity:1,label:"wm_rh_G_occipital_sup"},14121:{color:[60,20,140],opacity:1,label:"wm_rh_G_oc-temp_lat-fusifor"},14122:{color:[220,180,140],opacity:1,label:"wm_rh_G_oc-temp_med-Lingual"},14123:{color:[65,100,20],opacity:1,label:"wm_rh_G_oc-temp_med-Parahip"},14124:{color:[220,60,20],opacity:1,label:"wm_rh_G_orbital"},14125:{color:[20,60,220],opacity:1,label:"wm_rh_G_pariet_inf-Angular"},14126:{color:[100,100,60],opacity:1,label:"wm_rh_G_pariet_inf-Supramar"},14127:{color:[220,180,220],opacity:1,label:"wm_rh_G_parietal_sup"},14128:{color:[20,180,140],opacity:1,label:"wm_rh_G_postcentral"},14129:{color:[60,140,180],opacity:1,label:"wm_rh_G_precentral"},14130:{color:[25,20,140],opacity:1,label:"wm_rh_G_precuneus"},14131:{color:[20,60,100],opacity:1,label:"wm_rh_G_rectus"},14132:{color:[60,220,20],opacity:1,label:"wm_rh_G_subcallosal"},14133:{color:[60,60,220],opacity:1,label:"wm_rh_G_temp_sup-G_T_transv"},14134:{color:[220,60,220],opacity:1,label:"wm_rh_G_temp_sup-Lateral"},14135:{color:[65,220,60],opacity:1,label:"wm_rh_G_temp_sup-Plan_polar"},14136:{color:[25,140,20],opacity:1,label:"wm_rh_G_temp_sup-Plan_tempo"},14137:{color:[220,220,100],opacity:1,label:"wm_rh_G_temporal_inf"},14138:{color:[180,60,60],opacity:1,label:"wm_rh_G_temporal_middle"},14139:{color:[61,20,220],opacity:1,label:"wm_rh_Lat_Fis-ant-Horizont"},14140:{color:[61,20,60],opacity:1,label:"wm_rh_Lat_Fis-ant-Vertical"},14141:{color:[61,60,100],opacity:1,label:"wm_rh_Lat_Fis-post"},14142:{color:[25,25,25],opacity:1,label:"wm_rh_Medial_wall"},14143:{color:[140,20,60],opacity:1,label:"wm_rh_Pole_occipital"},14144:{color:[220,180,20],opacity:1,label:"wm_rh_Pole_temporal"},14145:{color:[63,180,180],opacity:1,label:"wm_rh_S_calcarine"},14146:{color:[221,20,10],opacity:1,label:"wm_rh_S_central"},14147:{color:[221,20,100],opacity:1,label:"wm_rh_S_cingul-Marginalis"},14148:{color:[221,60,140],opacity:1,label:"wm_rh_S_circular_insula_ant"},14149:{color:[221,20,220],opacity:1,label:"wm_rh_S_circular_insula_inf"},14150:{color:[61,220,220],opacity:1,label:"wm_rh_S_circular_insula_sup"},14151:{color:[100,200,200],opacity:1,label:"wm_rh_S_collat_transv_ant"},14152:{color:[10,200,200],opacity:1,label:"wm_rh_S_collat_transv_post"},14153:{color:[221,220,20],opacity:1,label:"wm_rh_S_front_inf"},14154:{color:[141,20,100],opacity:1,label:"wm_rh_S_front_middle"},14155:{color:[61,220,100],opacity:1,label:"wm_rh_S_front_sup"},14156:{color:[141,60,20],opacity:1,label:"wm_rh_S_interm_prim-Jensen"},14157:{color:[143,20,220],opacity:1,label:"wm_rh_S_intrapariet_and_P_trans"},14158:{color:[101,60,220],opacity:1,label:"wm_rh_S_oc_middle_and_Lunatus"},14159:{color:[21,20,140],opacity:1,label:"wm_rh_S_oc_sup_and_transversal"},14160:{color:[61,20,180],opacity:1,label:"wm_rh_S_occipital_ant"},14161:{color:[221,140,20],opacity:1,label:"wm_rh_S_oc-temp_lat"},14162:{color:[141,100,220],opacity:1,label:"wm_rh_S_oc-temp_med_and_Lingual"},14163:{color:[221,100,20],opacity:1,label:"wm_rh_S_orbital_lateral"},14164:{color:[181,200,20],opacity:1,label:"wm_rh_S_orbital_med-olfact"},14165:{color:[101,20,20],opacity:1,label:"wm_rh_S_orbital-H_Shaped"},14166:{color:[101,100,180],opacity:1,label:"wm_rh_S_parieto_occipital"},14167:{color:[181,220,20],opacity:1,label:"wm_rh_S_pericallosal"},14168:{color:[21,140,200],opacity:1,label:"wm_rh_S_postcentral"},14169:{color:[21,20,240],opacity:1,label:"wm_rh_S_precentral-inf-part"},14170:{color:[21,20,200],opacity:1,label:"wm_rh_S_precentral-sup-part"},14171:{color:[21,20,60],opacity:1,label:"wm_rh_S_suborbital"},14172:{color:[101,60,60],opacity:1,label:"wm_rh_S_subparietal"},14173:{color:[21,180,180],opacity:1,label:"wm_rh_S_temporal_inf"},14174:{color:[223,220,60],opacity:1,label:"wm_rh_S_temporal_sup"},14175:{color:[221,60,60],opacity:1,label:"wm_rh_S_temporal_transverse"}}},function(y,t,e){"use strict";var n=e(35),i=e(37),r=e(36),o=e(43),a=e(45),s=e(44),l=e(49),c=e(51),h=e(50),u=e(170),p=e(171),d=e(172),f=e(38),m=e(40),_=e(39);e.d(t,"b",function(){return n.a}),e.d(t,"a",function(){return i.a}),e.d(t,"c",function(){return r.a}),e.d(t,"e",function(){return o.a}),e.d(t,"d",function(){return a.a}),e.d(t,"f",function(){return s.a}),e.d(t,"n",function(){return l.a}),e.d(t,"m",function(){return c.a}),e.d(t,"o",function(){return h.a}),e.d(t,"h",function(){return u.a}),e.d(t,"g",function(){return p.a}),e.d(t,"i",function(){return d.a}),e.d(t,"k",function(){return f.a}),e.d(t,"j",function(){return m.a}),e.d(t,"l",function(){return _.a})},function(a,t,e){"use strict";function n(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}var i=e(0),r=function(){function e(){n(this,e)}return e.uniforms=function(){return{uTextureBackTest0:{type:"t",value:[],typeGLSL:"sampler2D"},uTextureBackTest1:{type:"t",value:[],typeGLSL:"sampler2D"},uOpacity0:{type:"f",value:1,typeGLSL:"float"},uOpacity1:{type:"f",value:1,typeGLSL:"float"},uType0:{type:"i",value:0,typeGLSL:"int"},uType1:{type:"i",value:1,typeGLSL:"int"},uTrackMouse:{type:"i",value:0,typeGLSL:"int"},uMouse:{type:"v2",value:new i.e,typeGLSL:"vec2"}}},e}();t.a=r},function(a,t){"use strict";function o(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}var e=function(){function a(t){o(this,a),this._uniforms=t,this._functions={},this._main=""}return a.prototype.functions=function(){""===this._main&&this.main();var a="";for(var t in this._functions)a+=this._functions[t]+"\n";return a},a.prototype.uniforms=function(){var a="";for(var t in this._uniforms){var e=this._uniforms[t];a+="uniform "+e.typeGLSL+" "+t,e&&e.length&&(a+="["+e.length+"]"),a+=";\n"}return a},a.prototype.main=function(){this._main="\nvoid main(void) {\n\n  vec2 texc = vec2(((vProjectedCoords.x / vProjectedCoords.w) + 1.0 ) / 2.0,\n                ((vProjectedCoords.y / vProjectedCoords.w) + 1.0 ) / 2.0 );\n\n  // just silence warning for\n  // vec4 dummy = vPos;\n\n  //The back position is the world space position stored in the texture.\n  vec4 baseColor0 = texture2D(uTextureBackTest0, texc);\n  vec4 baseColor1 = texture2D(uTextureBackTest1, texc);\n\n  if( uTrackMouse == 1 ){\n\n      if( vProjectedCoords.x < uMouse.x ){\n\n        gl_FragColor = baseColor0;\n\n      }\n      else{\n\n        gl_FragColor = mix( baseColor0, baseColor1, uOpacity1 );\n\n      }\n\n  }\n  else{\n\n    if( uType1 == 0 ){\n\n      //merge an image into\n      gl_FragColor = mix( baseColor0, baseColor1, uOpacity1 );\n\n    }\n    else{\n\n      float opacity = baseColor1.a;\n      gl_FragColor = mix( baseColor0, baseColor1, opacity * uOpacity1 );\n\n    }\n\n  }\n\n  return;\n}\n   "},a.prototype.compute=function(){return"\n// uniforms\n"+this.uniforms()+"\n\n// varying (should fetch it from vertex directly)\n// varying vec4      vPos;\nvarying vec4      vProjectedCoords;\n\n// tailored functions\n"+this.functions()+"\n\n// main loop\n"+this._main+"\n      "},a}();t.a=e},function(a,t){"use strict";function e(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function a(){e(this,a)}return a.prototype.compute=function(){return"\n// varying vec4 vPos;\nvarying vec4 vProjectedCoords;\n\n//\n// main\n//\nvoid main() {\n\n  vec4 vPos = modelMatrix * vec4(position, 1.0 );\n  vProjectedCoords =  projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0 );\n\n}\n        "},a}();t.a=o},function(c,t,e){"use strict";var n=e(174),i=e(175),r=e(14),o=e(176),a=e(177),s=e(178);e.d(t,"a",function(){return n.a}),e.d(t,"b",function(){return i.a}),e.d(t,"c",function(){return r.a}),e.d(t,"d",function(){return o.a}),e.d(t,"e",function(){return a.a}),e.d(t,"f",function(){return s.a})},function(d,t,e){"use strict";function m(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function i(a,o){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o&&("object"==("undefined"===typeof o?"undefined":babelHelpers.typeof(o))||"function"==typeof o)?o:a}function r(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof o?"undefined":babelHelpers.typeof(o)));a.prototype=Object.create(o&&o.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(a,o):a.__proto__=o)}var o=e(8),_=e(14),s=e(0),a=function(){function a(a,o){for(var e=0,r;e<o.length;e++)r=o[e],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}return function(t,e,o){return e&&a(t.prototype,e),o&&a(t,o),t}}(),n=function(l){function t(e,r,o,a){m(this,t);var n=i(this,l.call(this));n._targetMesh=e,n._controls=r,n._camera=o,n._container=a,n._active=!0,n._worldPosition=new s.f,null!==n._targetMesh&&(n._worldPosition=n._targetMesh.position),n._material=null,n._geometry=null,n._mesh=null,n._line=null,n._label=null,n._cone=null,n._labeltext=null,n._alreadycreated=null,n._movinglabel=null,n._labelmoved=!1,n._labelhovered=!1,n._domHovered=!1,n._hovered=!0,n._manuallabeldisplay=!1,n._labelpositionx=null,n._labelpositiony=null,n._differencemousecenterlabelx=0,n._differencemousecenterlabely=0,n._handles=[];var c=new _.a(n._targetMesh,n._controls,n._camera,n._container);c.worldPosition=n._worldPosition,c.hovered=!0,n.add(c),n._handles.push(c);var d=new _.a(n._targetMesh,n._controls,n._camera,n._container);return d.worldPosition=n._worldPosition,d.hovered=!0,d.active=!0,d.tracking=!0,n.add(d),n._handles.push(d),n.create(),n.onEnd=n.onEnd.bind(n),n.onMove=n.onMove.bind(n),n.onHoverlabel=n.onHoverlabel.bind(n),n.notonHoverlabel=n.notonHoverlabel.bind(n),n.changelabeltext=n.changelabeltext.bind(n),n.movelabel=n.movelabel.bind(n),n.notmovelabel=n.notmovelabel.bind(n),n.addEventListeners(),n}return r(t,l),t.prototype.addEventListeners=function(){this._label.addEventListener("mouseenter",this.onHoverlabel),this._label.addEventListener("mouseleave",this.notonHoverlabel),this._label.addEventListener("dblclick",this.changelabeltext),this._label.addEventListener("mousedown",this.movelabel),this._container.addEventListener("mouseup",this.notmovelabel),this._container.addEventListener("mousewheel",this.onMove),this._container.addEventListener("DOMMouseScroll",this.onMove)},t.prototype.movelabel=function(){if(this._labelhovered){this._movinglabel=!0,this._labelmoved=!0;var a=-(-event.clientY+this._container.offsetHeight),t=event.clientX;this._differencemousecenterlabelx=N(N(t)-N(this._labelpositionx)),this._differencemousecenterlabely=N(N(a)-N(this._labelpositiony))}},t.prototype.notmovelabel=function(){this._movinglabel=!1,this._handles[0]._controls.enabled=!0,this._handles[1]._controls.enabled=!0,this._differencemousecenterlabelx=0,this._differencemousecenterlabely=0},t.prototype.onHoverlabel=function(){this._labelhovered=!0},t.prototype.notonHoverlabel=function(){this._labelhovered=!1},t.prototype.onMove=function(e){this._movinglabel&&(this._handles[0]._controls.enabled=!1,this._handles[1]._controls.enabled=!1),this._dragged=!0,this._handles[0].onMove(e),this._handles[1].onMove(e),this._hovered=this._handles[0].hovered||this._handles[1].hovered||this._labelhovered,this.update()},t.prototype.onStart=function(e){this._dragged=!1,this._handles[0].onStart(e),this._handles[1].onStart(e),this._active=this._handles[0].active||this._handles[1].active,this.update()},t.prototype.setlabeltext=function(){this._labeltext=prompt("Please enter the name of the label",""),"string"==typeof this._labeltext&&(0<this._labeltext.length?(this._label.innerHTML=this._labeltext,this._label.style.display="",this._dashline.style.display=""):(this._label.innerHTML=this._labeltext,this._label.style.display="none",this._dashline.style.display="none"))},t.prototype.changelabeltext=function(){this._labeltext=prompt("Please enter new name of the label",this._label.innerHTML),"string"==typeof this._labeltext&&(0<this._labeltext.length?(this._label.innerHTML=this._labeltext,this._label.style.display="",this._dashline.style.display=""):(this._label.innerHTML=this._labeltext,this._label.style.display="none",this._dashline.style.display="none"))},t.prototype.displaylabel=function(){"string"==typeof this._labeltext&&(this._label.innerHTML=this._labeltext,this._label.style.display="",this._dashline.style.display="",this._label.style.transform="translate3D("+this._labelpositionx+"px,"+this._labelpositiony+"px, 0)")},t.prototype.onEnd=function(e){this._handles[0].onEnd(e),this._dragged||!this._handles[1].tracking?(this._handles[1].tracking=!1,this._handles[1].onEnd(e)):this._handles[1].tracking=!1,this._alreadycreated||(this.setlabeltext(),this._alreadycreated=!0),this._active=this._handles[0].active||this._handles[1].active,this.update()},t.prototype.create=function(){this.createMesh(),this.createDOM()},t.prototype.update=function(){this.updateColor(),this.updateMeshColor(),this.updateMeshPosition(),this.updateDOMPosition(),this.updateDOMColor()},t.prototype.createMesh=function(){this._geometry=new THREE.Geometry,this._geometry.vertices.push(this._handles[0].worldPosition),this._geometry.vertices.push(this._handles[1].worldPosition),this._material=new THREE.LineBasicMaterial,this.updateMeshColor(),this._meshline=new THREE.Line(this._geometry,this._material),this._meshline.visible=!0,this.add(this._meshline),this._conegeometry=new THREE.CylinderGeometry(0,2,10),this._conegeometry.translate(0,-5,0),this._conegeometry.rotateX(-Gn/2),this._cone=new THREE.Mesh(this._conegeometry,this._material),this._cone.visible=!0,this.add(this._cone)},t.prototype.updateMeshColor=function(){this._material&&this._material.color.set(this._color)},t.prototype.updateMeshPosition=function(){this._geometry&&(this._geometry.verticesNeedUpdate=!0)},t.prototype.createDOM=function(){this._line=document.createElement("div"),this._line.setAttribute("class","widgets handle line"),this._line.style.position="absolute",this._line.style.transformOrigin="0 100%",this._line.style.marginTop="-1px",this._line.style.height="2px",this._line.style.width="3px",this._container.appendChild(this._line),this._dashline=document.createElement("div"),this._dashline.setAttribute("class","widgets handle dashline"),this._dashline.style.position="absolute",this._dashline.style.border="none",this._dashline.style.borderTop="2.5px dashed #F9F9F9",this._dashline.style.transformOrigin="0 100%",this._dashline.style.height="1px",this._dashline.style.width="50%",this._dashline.style.display="none",this._container.appendChild(this._dashline),this._label=document.createElement("div"),this._label.setAttribute("id",this.uuid),this._label.setAttribute("class","widgets handle label"),this._label.style.border="2px solid #F9F9F9",this._label.style.backgroundColor="#F9F9F9",this._label.style.color="#353535",this._label.style.padding="4px",this._label.style.position="absolute",this._label.style.transformOrigin="0 100%",this._label.innerHTML="Hello, world!",this._label.style.display="none",this._container.appendChild(this._label),this.updateDOMColor()},t.prototype.updateDOMPosition=function(){var F=this._handles[0].screenPosition.x,t=this._handles[0].screenPosition.y,e=this._handles[1].screenPosition.x,n=this._handles[1].screenPosition.y,i=F+(e-F)/2,r=t+(n-t)/2,o=O((F-e)*(F-e)+(t-n)*(t-n)),a=180*k(n-t,e-F)/Gn,s="translate3D("+F+"px,"+(t-this._container.offsetHeight)+"px, 0)";s+=" rotate("+a+"deg)",this._line.style.transform=s,this._line.style.width=o+"px";var l=0,c=0,h;if(h=r-this._container.offsetHeight-this._label.offsetHeight/2,i-=this._label.offsetWidth/2,!this._labelmoved){var u="translate3D("+P(i)+"px,"+P(h)+"px, 0)";this._label.style.transform=u,this._labelpositionx=P(i),this._labelpositiony=P(h)}this._movinglabel&&(l=event.clientX,c=-(-event.clientY+this._container.offsetHeight),this._label.style.transform="translate3D("+(l-this._differencemousecenterlabelx)+"px,"+(c-this._differencemousecenterlabely)+"px, 0)",this._labelpositionx=l-this._differencemousecenterlabelx,this._labelpositiony=c-this._differencemousecenterlabely),this._manuallabeldisplay&&this.displaylabel();var p=this._handles[0].worldPosition,d=this._handles[1].worldPosition;this._cone.position.set(d.x,d.y,d.z),this._cone.lookAt(p),F=this._handles[0].screenPosition.x,t=this._handles[0].screenPosition.y,e=this._labelpositionx,n=this._labelpositiony+this._container.offsetHeight;var f=this._label.offsetHeight,m=this._label.offsetWidth,_=0,g=0;isFinite(m)&&isFinite(f)&&(_=m/2,g=f/2),e+=_,n+=g;var y=this._handles[0].screenPosition.x,v=this._handles[0].screenPosition.y,b=(this._handles[0].screenPosition.x+this._handles[1].screenPosition.x)/2,w=(this._handles[0].screenPosition.y+this._handles[1].screenPosition.y)/2,x=this._handles[1].screenPosition.x,S=this._handles[1].screenPosition.y,E=O((y-e)*(y-e)+(v-n)*(v-n)),M=O((b-e)*(b-e)+(w-n)*(w-n)),T=O((x-e)*(x-e)+(S-n)*(S-n)),A=U(E,M,T),I=[E,M,T].indexOf(A);0==I&&(F=y,t=v),1==I&&(F=b,t=w),2==I&&(F=x,t=S);var C=O((F-e)*(F-e)+(t-n)*(t-n)),L=180*k(n-t,e-F)/Gn,R="translate3D("+F+"px,"+(t-this._container.offsetHeight)+"px, 0)";R+=" rotate("+L+"deg)",this._dashline.style.transform=R,this._dashline.style.width=C+"px"},t.prototype.updateDOMColor=function(){this._line.style.backgroundColor=""+this._color,this._dashline.style.borderTop="2.5px dashed "+this._color,this._label.style.borderColor=""+this._color},t.prototype.hideDOM=function(){this._line.style.display="none",this._dashline.style.display="none",this._label.style.display="none"},t.prototype.showDOM=function(){this._line.style.display="",this._dashline.style.display="",this._label.style.display=""},t.prototype.hideMesh=function(){this.visible=!1},t.prototype.showMesh=function(){this.visible=!0},t.prototype.show=function(){this.showDOM(),this.showMesh()},t.prototype.hide=function(){this.hideDOM(),this.hideMesh()},a(t,[{key:"worldPosition",get:function(){return this._worldPosition},set:function(e){this._worldPosition=e,this._handles[0].worldPosition=this._worldPosition,this._handles[1].worldPosition=this._worldPosition,this.update()}}]),t}(o.a);t.a=n},function(d,t,e){"use strict";function m(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function i(a,o){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o&&("object"==("undefined"===typeof o?"undefined":babelHelpers.typeof(o))||"function"==typeof o)?o:a}function r(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof o?"undefined":babelHelpers.typeof(o)));a.prototype=Object.create(o&&o.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(a,o):a.__proto__=o)}var o=e(8),_=e(14),s=e(0),a=function(){function a(a,o){for(var e=0,r;e<o.length;e++)r=o[e],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}return function(t,e,o){return e&&a(t.prototype,e),o&&a(t,o),t}}(),n=function(l){function t(e,r,o,a){m(this,t);var n=i(this,l.call(this));n._targetMesh=e,n._controls=r,n._camera=o,n._container=a,n._active=!0,n._initOrtho=!1,n._worldPosition=new s.f,null!==n._targetMesh&&(n._worldPosition=n._targetMesh.position),n._material=null,n._geometry=null,n._mesh=null,n._line=null,n._distance=null,n._handles=[];var c=new _.a(n._targetMesh,n._controls,n._camera,n._container);c.worldPosition=n._worldPosition,c.hovered=!0,n.add(c),n._handles.push(c);var u=new _.a(n._targetMesh,n._controls,n._camera,n._container);u.worldPosition=n._worldPosition,u.hovered=!0,u.active=!0,u.tracking=!0,n.add(u),n._handles.push(u);var p=new _.a(n._targetMesh,n._controls,n._camera,n._container);p.worldPosition=n._worldPosition,p.hovered=!0,n.add(p),n._handles.push(p);var d=new _.a(n._targetMesh,n._controls,n._camera,n._container);return d.worldPosition=n._worldPosition,d.hovered=!0,n.add(d),n._handles.push(d),n.create(),n.onMove=n.onMove.bind(n),n.addEventListeners(),n._orientation=null,n._slice=null,n}return r(t,l),t.prototype.addEventListeners=function(){this._container.addEventListener("mousewheel",this.onMove),this._container.addEventListener("DOMMouseScroll",this.onMove)},t.prototype.onMove=function(e){this._dragged=!0,this._handles[0].onMove(e),this._handles[1].onMove(e),this._handles[2].onMove(e),this._handles[3].onMove(e),this._hovered=this._handles[0].hovered||this._handles[1].hovered||this._handles[2].hovered||this._handles[3].hovered,this.update()},t.prototype.onStart=function(e){this._dragged=!1,this._handles[0].onStart(e),this._handles[1].onStart(e),this._handles[2].onStart(e),this._handles[3].onStart(e),this._active=this._handles[0].active||this._handles[1].active||this._handles[2].active||this._handles[3].active,this.update()},t.prototype.onEnd=function(e){this._handles[0].onEnd(e),this._handles[2].onEnd(e),this._handles[3].onEnd(e),window.console.log(this),this._dragged||!this._handles[1].tracking?(this._handles[1].tracking=!1,this._handles[1].onEnd(e)):this._handles[1].tracking=!1,this._active=this._handles[0].active||this._handles[1].active||this._handles[2].active||this._handles[3].active,this.update()},t.prototype.create=function(){this.createMesh(),this.createDOM()},t.prototype.hideDOM=function(){for(var e in this._line.style.display="none",this._distance.style.display="none",this._line2.style.display="none",this._distance2.style.display="none",this._handles)this._handles[e].hideDOM();this._dashline.style.display="none"},t.prototype.showDOM=function(){for(var e in this._line.style.display="",this._distance.style.display="",this._line2.style.display="",this._distance2.style.display="",this._handles)this._handles[e].showDOM();this._dashline.style.display=""},t.prototype.hideMesh=function(){this._mesh.visible=!1,this._mesh2.visible=!1,this._handles[0].visible=!1,this._handles[1].visible=!1,this._handles[2].visible=!1,this._handles[3].visible=!1},t.prototype.showMesh=function(){this._mesh.visible=!0,this._mesh2.visible=!0,this._handles[0].visible=!0,this._handles[1].visible=!0,this._handles[2].visible=!0,this._handles[3].visible=!0},t.prototype.show=function(){this.showDOM(),this.showMesh()},t.prototype.hide=function(){this.hideDOM(),this.hideMesh()},t.prototype.update=function(){this.updateColor(),this.updateMeshColor(),this.updateMeshPosition(),this.updateDOMPosition(),this.updateDOMColor()},t.prototype.createMesh=function(){this._geometry=new THREE.Geometry,this._geometry.vertices.push(this._handles[0].worldPosition),this._geometry.vertices.push(this._handles[1].worldPosition),this._geometry2=new THREE.Geometry,this._geometry2.vertices.push(this._handles[2].worldPosition),this._geometry2.vertices.push(this._handles[3].worldPosition),this._material=new THREE.LineBasicMaterial,this._material2=new THREE.LineBasicMaterial,this.updateMeshColor(),this._mesh=new THREE.Line(this._geometry,this._material),this._mesh.visible=!0,this._mesh2=new THREE.Line(this._geometry2,this._material2),this._mesh2.visible=!0,this.add(this._mesh),this.add(this._mesh2)},t.prototype.updateMeshColor=function(){this._material&&this._material.color.set(this._color),this._material2&&this._material2.color.set(this._color)},t.prototype.updateMeshPosition=function(){this._geometry&&(this._geometry.verticesNeedUpdate=!0),this._geometry2&&(this._geometry2.verticesNeedUpdate=!0)},t.prototype.createDOM=function(){this._line=document.createElement("div"),this._line.setAttribute("class","widgets handle line"),this._line.style.position="absolute",this._line.style.transformOrigin="0 100%",this._line.style.marginTop="-1px",this._line.style.height="2px",this._line.style.width="3px",this._container.appendChild(this._line),this._distance=document.createElement("div"),this._distance.setAttribute("class","widgets handle distance"),this._distance.style.border="2px solid",this._distance.style.backgroundColor="#F9F9F9",this._distance.style.color="#353535",this._distance.style.padding="4px",this._distance.style.position="absolute",this._distance.style.transformOrigin="0 100%",this._distance.innerHTML="Hello, world!",this._container.appendChild(this._distance),this._line2=document.createElement("div"),this._line2.setAttribute("class","widgets handle line"),this._line2.style.position="absolute",this._line2.style.transformOrigin="0 100%",this._line2.style.marginTop="-1px",this._line2.style.height="2px",this._line2.style.width="3px",this._container.appendChild(this._line2),this._distance2=document.createElement("div"),this._distance2.setAttribute("class","widgets handle distance"),this._distance.style.border="2px solid",this._distance.style.backgroundColor="#F9F9F9",this._distance2.style.color="#353535",this._distance2.style.padding="4px",this._distance2.style.position="absolute",this._distance2.style.transformOrigin="0 100%",this._distance2.innerHTML="Hello, world!",this._container.appendChild(this._distance2),this._dashline=document.createElement("div"),this._dashline.setAttribute("class","widgets handle dashline"),this._dashline.style.position="absolute",this._dashline.style.border="none",this._dashline.style.borderTop="2.5px dashed #F9F9F9",this._dashline.style.transformOrigin="0 100%",this._dashline.style.height="1px",this._dashline.style.width="50%",this._container.appendChild(this._dashline),this.updateDOMColor()},t.prototype.updateDOMPosition=function(){var C=this._handles[0].screenPosition.x,t=this._handles[0].screenPosition.y,e=this._handles[1].screenPosition.x,n=this._handles[1].screenPosition.y,i=e,r=n;r=t>=n?n-30:n+30;var o=O((C-e)*(C-e)+(t-n)*(t-n)),a=180*k(n-t,e-C)/Gn,s=t-this._container.offsetHeight,l="translate3D("+C+"px,"+s+"px, 0)";l+=" rotate("+a+"deg)",this._line.style.transform=l,this._line.style.width=o+"px";var c=this._handles[0].worldPosition,h=this._handles[1].worldPosition;this._distance.innerHTML=O((c.x-h.x)*(c.x-h.x)+(c.y-h.y)*(c.y-h.y)+(c.z-h.z)*(c.z-h.z)).toFixed(2)+" mm",this._distanceValue=O((c.x-h.x)*(c.x-h.x)+(c.y-h.y)*(c.y-h.y)+(c.z-h.z)*(c.z-h.z)).toFixed(2);var u=r-this._container.offsetHeight-this._distance.offsetHeight/2;i-=this._distance.offsetWidth/2;var p="translate3D("+P(i)+"px,"+P(u)+"px, 0)";this._distance.style.transform=p;var d=this._handles[2].screenPosition.x,f=this._handles[2].screenPosition.y,m=this._handles[3].screenPosition.x,_=this._handles[3].screenPosition.y,g=m,y=_;y=f>=_?_-30:_+30,o=O((d-m)*(d-m)+(f-_)*(f-_)),a=180*k(_-f,m-d)/Gn,l="translate3D("+d+"px,"+(s=f-this._container.offsetHeight)+"px, 0)",l+=" rotate("+a+"deg)",this._line2.style.transform=l,this._line2.style.width=o+"px";var v=this._handles[2].worldPosition,b=this._handles[3].worldPosition;this._distance2.innerHTML=O((v.x-b.x)*(v.x-b.x)+(v.y-b.y)*(v.y-b.y)+(v.z-b.z)*(v.z-b.z)).toFixed(2)+" mm",this._distance2Value=O((v.x-b.x)*(v.x-b.x)+(v.y-b.y)*(v.y-b.y)+(v.z-b.z)*(v.z-b.z)).toFixed(2);var w=y-this._container.offsetHeight-this._distance2.offsetHeight/2;g-=this._distance2.offsetWidth/2,p="translate3D("+P(g)+"px,"+P(w)+"px, 0)",this._distance2.style.transform=p;var x=this.getPointInBetweenByPerc(this._handles[0].worldPosition,this._handles[1].worldPosition,.5),S=this.getPointInBetweenByPerc(this._handles[2].worldPosition,this._handles[3].worldPosition,.5),E=this._handles[0].worldToScreen(x,this._camera,this._container),M=this._handles[0].worldToScreen(S,this._camera,this._container);C=E.x,t=E.y,e=M.x,n=M.y,o=O((C-e)*(C-e)+(t-n)*(t-n)),a=180*k(n-t,e-C)/Gn,l="translate3D("+C+"px,"+(s=t-this._container.offsetHeight)+"px, 0)",l+=" rotate("+a+"deg)",this._dashline.style.transform=l,this._dashline.style.width=o+"px"},t.prototype.updateDOMColor=function(){this._line.style.backgroundColor=""+this._color,this._distance.style.borderColor=""+this._color,this._line2.style.backgroundColor=""+this._color,this._distance2.style.borderColor=""+this._color},t.prototype.getPointInBetweenByPerc=function(a,t,e){var o=t.clone().sub(a),n=o.length();return o=o.normalize().multiplyScalar(n*e),a.clone().add(o)},t.prototype.initOrtho=function(){this._initOrtho=!0;var e=this.getPointInBetweenByPerc(this._handles[0].worldPosition,this._handles[1].worldPosition,.5);this._handles[2].worldPosition=this.getPointInBetweenByPerc(this._handles[0].worldPosition,this._handles[1].worldPosition,.25),this._handles[3].worldPosition=this.getPointInBetweenByPerc(this._handles[0].worldPosition,this._handles[1].worldPosition,.75),this._handles[2].worldPosition.x=e.x-O((e.y-this._handles[2].worldPosition.y)*(e.y-this._handles[2].worldPosition.y)),this._handles[2].worldPosition.y=e.y+O((e.x-this._handles[2].worldPosition.x)*(e.x-this._handles[2].worldPosition.x)),this._handles[3].worldPosition.x=e.x+O((e.y-this._handles[2].worldPosition.y)*(e.y-this._handles[2].worldPosition.y)),this._handles[3].worldPosition.y=e.y-O((e.x-this._handles[2].worldPosition.x)*(e.x-this._handles[2].worldPosition.x))},a(t,[{key:"worldPosition",get:function(){return this._worldPosition},set:function(e){this._worldPosition=e,this._handles[0].worldPosition=this._worldPosition,this._handles[1].worldPosition=this._worldPosition,this._handles[2].worldPosition=this._worldPosition,this._handles[3].worldPosition=this._worldPosition,this.update()}},{key:"shotestDistance",get:function(){return this._distanceValue<this._distance2Value?this._distanceValue:this._distance2Value}},{key:"longestDistance",get:function(){return this._distanceValue>this._distance2Value?this._distanceValue:this._distance2Value}}]),t}(o.a);t.a=n},function(d,t,e){"use strict";function p(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function i(a,o){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o&&("object"==("undefined"===typeof o?"undefined":babelHelpers.typeof(o))||"function"==typeof o)?o:a}function r(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof o?"undefined":babelHelpers.typeof(o)));a.prototype=Object.create(o&&o.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(a,o):a.__proto__=o)}var o=e(8),m=e(14),s=e(0),a=function(){function a(a,o){for(var e=0,r;e<o.length;e++)r=o[e],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}return function(t,e,o){return e&&a(t.prototype,e),o&&a(t,o),t}}(),n=function(l){function t(e,r,o,a){p(this,t);var n=i(this,l.call(this));n._targetMesh=e,n._controls=r,n._camera=o,n._container=a,n._active=!0,n._init=!1,n._worldPosition=new s.f,null!==n._targetMesh&&(n._worldPosition=n._targetMesh.position),n._material=null,n._geometry=null,n._mesh=null,n._lines=[],n._area=null,n._handles=[];var c=new m.a(n._targetMesh,n._controls,n._camera,n._container);return c.worldPosition=n._worldPosition,c.hovered=!0,n.add(c),n._handles.push(c),n.create(),n.onMove=n.onMove.bind(n),n.addEventListeners(),n._orientation=null,n._slice=null,n}return r(t,l),t.prototype.addEventListeners=function(){this._container.addEventListener("mousewheel",this.onMove),this._container.addEventListener("DOMMouseScroll",this.onMove)},t.prototype.onMove=function(l){this._dragged=!0;var t=this._handles.length;if(this.active&&!this._init){var e=this._handles[t-1];e.hovered=!1,e.active=!1,e.tracking=!1;var n=new m.a(this._targetMesh,this._controls,this._camera,this._container);n.worldPosition=this._worldPosition,n.hovered=!0,n.active=!0,n.tracking=!0,this.add(n),this._handles.push(n);var i=document.createElement("div");i.setAttribute("class","widgets handle line"),i.style.position="absolute",i.style.transformOrigin="0 100%",i.style.marginTop="-1px",i.style.height="2px",i.style.width="3px",i.style.backgroundColor="#F9F9F9",this._lines.push(i),this._container.appendChild(i)}var r=!1;for(var o in this._handles)this._handles[o].onMove(l),r=r||this._handles[o].hovered;this._hovered=r,this.active&&2<t&&this.pushPopHandle(),this.update()},t.prototype.onStart=function(a){this._dragged=!1;var t=!1;for(var e in this._handles)this._handles[e].onStart(a),t=t||this._handles[e].active;this._active=t,this.update()},t.prototype.onEnd=function(a){var t=!1;for(var e in this._handles.slice(0,this._handles.length-2))this._handles[e].onEnd(a),t=t||this._handles[e].active;if(this._dragged||!this._handles[this._handles.length-1].tracking?(this._handles[this._handles.length-1].tracking=!1,this._handles[this._handles.length-1].onEnd(a)):this._handles[this._handles.length-1].tracking=!1,t=t||this._handles[this._handles.length-1].active,this._active=t,this._lines.length<this._handles.length){var o=document.createElement("div");o.setAttribute("class","widgets handle line"),o.style.position="absolute",o.style.transformOrigin="0 100%",o.style.marginTop="-1px",o.style.height="2px",o.style.width="3px",o.style.backgroundColor="#F9F9F9",this._lines.push(o),this._container.appendChild(o)}this._init=!0,this.update()},t.prototype.create=function(){this.createMesh(),this.createDOM()},t.prototype.hideDOM=function(){for(var a in this._handles)this._handles[a].hideDOM();for(var t in this._lines)this._lines[t].style.display="none"},t.prototype.showDOM=function(){for(var a in this._handles)this._handles[a].showDOM();for(var t in this._lines)this._lines[t].style.display=""},t.prototype.hideMesh=function(){this.visible=!1},t.prototype.showMesh=function(){this.visible=!0},t.prototype.show=function(){this.showDOM(),this.showMesh()},t.prototype.hide=function(){this.hideDOM(),this.hideMesh()},t.prototype.update=function(){for(var e in this.updateColor(),this._handles)this._handles[e].update();this.updateMeshColor(),this.updateMeshPosition(),this.updateDOMPosition(),this.updateDOMColor()},t.prototype.createMesh=function(){for(var e in this._geometry=new THREE.Geometry,this._handles)this._geometry.vertices.push(this._handles[e].worldPosition);this._material=new THREE.LineBasicMaterial,this.updateMeshColor(),this._mesh=new THREE.Line(this._geometry,this._material),this._mesh.visible=!0,this.add(this._mesh)},t.prototype.updateMeshColor=function(){this._material&&this._material.color.set(this._color)},t.prototype.updateMeshPosition=function(){this._geometry&&(this._geometry.verticesNeedUpdate=!0)},t.prototype.createDOM=function(){this._line=document.createElement("div"),this._line.setAttribute("class","widgets handle line"),this._line.style.position="absolute",this._line.style.transformOrigin="0 100%",this._line.style.marginTop="-1px",this._line.style.height="2px",this._line.style.width="3px",this._container.appendChild(this._line),this._distance=document.createElement("div"),this._distance.setAttribute("class","widgets handle distance"),this._distance.style.border="2px solid",this._distance.style.backgroundColor="#F9F9F9",this._distance.style.color="#353535",this._distance.style.padding="4px",this._distance.style.position="absolute",this._distance.style.transformOrigin="0 100%",this._distance.innerHTML="Hello, world!",this._container.appendChild(this._distance),this.updateDOMColor()},t.prototype.isPointOnLine=function(a,t,e){var o=new s.f;return o.crossVectors(a.clone().sub(e),t.clone().sub(e)),!o.length()},t.prototype.pushPopHandle=function(){var a=this._handles[this._handles.length-3],t=this._handles[this._handles.length-2],e=this._handles[this._handles.length-1],o=this.isPointOnLine(a.worldPosition,t.worldPosition,e.worldPosition);if(o){t._dom.style.display="none",this.remove(t),this._handles[this._handles.length-2]=e,this._handles.pop();var n=this._lines.pop();n.style.display="none",this._container.removeChild(n)}return o},t.prototype.updateLineDOM=function(d,t,e){var n=this._handles[t].screenPosition.x,i=this._handles[t].screenPosition.y,r=this._handles[e].screenPosition.x,o=this._handles[e].screenPosition.y,a=O((n-r)*(n-r)+(i-o)*(i-o)),s=180*k(o-i,r-n)/Gn,l="translate3D("+n+"px, "+(i-this._container.offsetHeight)+"px, 0)";l+=" rotate("+s+"deg)",this._lines[d].style.transform=l,this._lines[d].style.width=a},t.prototype.updateDOMPosition=function(){if(2<=this._handles.length)for(var e in this._lines)this.updateLineDOM(e,e,parseInt(e)+1==this._handles.length?0:parseInt(e)+1)},t.prototype.updateDOMColor=function(){this._line.style.backgroundColor=""+this._color,this._distance.style.borderColor=""+this._color},t.prototype.getPointInBetweenByPerc=function(a,t,e){var o=t.clone().sub(a),n=o.length();return o=o.normalize().multiplyScalar(n*e),a.clone().add(o)},a(t,[{key:"worldPosition",get:function(){return this._worldPosition},set:function(a){for(var t in this._worldPosition=a,this._handles)this._handles[t]._worldPosition=this._worldPosition;this.update()}}]),t}(o.a);t.a=n},function(d,t,e){"use strict";function m(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function i(a,o){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o&&("object"==("undefined"===typeof o?"undefined":babelHelpers.typeof(o))||"function"==typeof o)?o:a}function r(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof o?"undefined":babelHelpers.typeof(o)));a.prototype=Object.create(o&&o.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(a,o):a.__proto__=o)}var o=e(8),_=e(14),s=e(0),a=function(){function a(a,o){for(var e=0,r;e<o.length;e++)r=o[e],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}return function(t,e,o){return e&&a(t.prototype,e),o&&a(t,o),t}}(),n=function(l){function t(e,r,o,a){m(this,t);var n=i(this,l.call(this,a));n._targetMesh=e,n._controls=r,n._camera=o,n._active=!0,n._lastEvent=null,n._worldPosition=new s.f,null!==n._targetMesh&&(n._worldPosition=n._targetMesh.position),n._material=null,n._geometry=null,n._mesh=null,n._line=null,n._distance=null,n._handles=[];var c=new _.a(n._targetMesh,n._controls,n._camera,n._container);c.worldPosition=n._worldPosition,c.hovered=!0,n.add(c),n._handles.push(c);var d=new _.a(n._targetMesh,n._controls,n._camera,n._container);return d.worldPosition=n._worldPosition,d.hovered=!0,d.active=!0,d.tracking=!0,n.add(d),n._handles.push(d),n.create(),n.initOffsets(),n.onMove=n.onMove.bind(n),n.onEndControl=n.onEndControl.bind(n),n.addEventListeners(),n}return r(t,l),t.prototype.addEventListeners=function(){this._container.addEventListener("mousewheel",this.onMove),this._container.addEventListener("DOMMouseScroll",this.onMove),this._controls.addEventListener("end",this.onEndControl)},t.prototype.removeEventListeners=function(){this._container.removeEventListener("mousewheel",this.onMove),this._container.removeEventListener("DOMMouseScroll",this.onMove),this._controls.removeEventListener("end",this.onEndControl)},t.prototype.onMove=function(e){this._lastEvent=e,this._dragged=!0,this._handles[0].onMove(e),this._handles[1].onMove(e),this._hovered=this._handles[0].hovered||this._handles[1].hovered,this.update()},t.prototype.onStart=function(e){this._lastEvent=e,this._dragged=!1,this._handles[0].onStart(e),this._handles[1].onStart(e),this._active=this._handles[0].active||this._handles[1].active,this.update()},t.prototype.onEnd=function(e){this._lastEvent=e,this._handles[0].onEnd(e),this._dragged||!this._handles[1].tracking?(this._handles[1].tracking=!1,this._handles[1].onEnd(e)):this._handles[1].tracking=!1,this._active=this._handles[0].active||this._handles[1].active,this.update()},t.prototype.onEndControl=function(){var e=this;this._lastEvent&&window.requestAnimationFrame(function(){e.onMove(e._lastEvent)})},t.prototype.create=function(){this.createMesh(),this.createDOM()},t.prototype.hideDOM=function(){for(var e in this._line.style.display="none",this._distance.style.display="none",this._handles)this._handles[e].hideDOM()},t.prototype.showDOM=function(){for(var e in this._line.style.display="",this._distance.style.display="",this._handles)this._handles[e].showDOM()},t.prototype.hideMesh=function(){this.visible=!1},t.prototype.showMesh=function(){this.visible=!0},t.prototype.show=function(){this.showDOM(),this.showMesh()},t.prototype.hide=function(){this.hideDOM(),this.hideMesh()},t.prototype.update=function(){this.updateColor(),this._handles[0].update(),this._handles[1].update(),this.updateMeshColor(),this.updateMeshPosition(),this.updateDOMColor(),this.updateDOMPosition()},t.prototype.createMesh=function(){this._geometry=new THREE.Geometry,this._geometry.vertices.push(this._handles[0].worldPosition),this._geometry.vertices.push(this._handles[1].worldPosition),this._material=new THREE.LineBasicMaterial,this.updateMeshColor(),this._mesh=new THREE.Line(this._geometry,this._material),this._mesh.visible=!0,this.add(this._mesh)},t.prototype.updateMeshColor=function(){this._material&&this._material.color.set(this._color)},t.prototype.updateMeshPosition=function(){this._geometry&&(this._geometry.verticesNeedUpdate=!0)},t.prototype.createDOM=function(){this._line=document.createElement("div"),this._line.setAttribute("id",this.uuid),this._line.setAttribute("class","AMI Widget Ruler"),this._line.style.position="absolute",this._line.style.transformOrigin="0 100%",this._line.style.marginTop="-1px",this._line.style.height="2px",this._line.style.width="3px",this._container.appendChild(this._line),this._distance=document.createElement("div"),this._distance.setAttribute("class","widgets handle distance"),this._distance.style.border="2px solid",this._distance.style.backgroundColor="#F9F9F9",this._distance.style.color="#353535",this._distance.style.padding="4px",this._distance.style.position="absolute",this._distance.style.transformOrigin="0 100%",this._distance.innerHTML="Hello, world!",this._container.appendChild(this._distance),this.updateDOMColor()},t.prototype.updateDOMPosition=function(){var d=this._handles[0].screenPosition.x,t=this._handles[0].screenPosition.y,e=this._handles[1].screenPosition.x,n=this._handles[1].screenPosition.y,i=e,r=n;r=t>=n?n-30:n+30;var o=O((d-e)*(d-e)+(t-n)*(t-n)),a=180*k(n-t,e-d)/Gn,s="translate3D("+d+"px,"+(t-this._container.offsetHeight)+"px, 0)";s+=" rotate("+a+"deg)",this._line.style.transform=s,this._line.style.width=o+"px";var l=this._handles[0].worldPosition,c=this._handles[1].worldPosition;this._distance.innerHTML=O((l.x-c.x)*(l.x-c.x)+(l.y-c.y)*(l.y-c.y)+(l.z-c.z)*(l.z-c.z)).toFixed(2)+" mm";var m=r-this._container.offsetHeight-this._distance.offsetHeight/2;i-=this._distance.offsetWidth/2;var u="translate3D("+P(i)+"px,"+P(m)+"px, 0)";this._distance.style.transform=u},t.prototype.updateDOMColor=function(){this._line.style.backgroundColor=""+this._color,this._distance.style.borderColor=""+this._color},t.prototype.free=function(){this._container.removeEventListener("mousewheel",this.onMove),this._container.removeEventListener("DOMMouseScroll",this.onMove),this._handles.forEach(function(e){e.free()}),this._handles=[],this._container.removeChild(this._line),this._container.removeChild(this._distance),this.remove(this._mesh),l.prototype.free.call(this)},a(t,[{key:"worldPosition",get:function(){return this._worldPosition},set:function(e){this._worldPosition=e,this._handles[0].worldPosition=this._worldPosition,this._handles[1].worldPosition=this._worldPosition,this.update()}}]),t}(o.a);t.a=n},function(m,t,e){"use strict";function _(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function i(a,o){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o&&("object"==("undefined"===typeof o?"undefined":babelHelpers.typeof(o))||"function"==typeof o)?o:a}function r(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof o?"undefined":babelHelpers.typeof(o)));a.prototype=Object.create(o&&o.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(a,o):a.__proto__=o)}var o=e(8),a=e(32),n=e(23),l=e(83),s=e(9),h=e(0),c=function(){function a(a,o){for(var e=0,r;e<o.length;e++)r=o[e],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}return function(t,e,o){return e&&a(t.prototype,e),o&&a(t,o),t}}(),p=function(d){function t(e,r,o,a,n){_(this,t);var l=i(this,d.call(this,n));return l._stack=e,l._targetMesh=r,l._controls=o,l._camera=a,l._plane={position:new h.f,direction:new h.f},l._offset=new h.f,l._raycaster=new THREE.Raycaster,l._tracking=!1,l._mouse=new h.e,l._lastEvent=null,l._worldPosition=new h.f,l._screenPosition=new h.e,l._material=null,l._geometry=null,l._mesh=null,l._meshDisplayed=!0,l._meshHovered=!1,l._meshStyle="sphere",l._dom=null,l._domDisplayed=!0,l._domHovered=!1,l._domStyle="circle",null!==l._targetMesh&&l._worldPosition.copy(l._targetMesh.position),l._screenPosition=l.worldToScreen(l._worldPosition,l._camera,l._container),l.create(),l.initOffsets(),l.onMove=l.onMove.bind(l),l.onHover=l.onHover.bind(l),l.onEndControl=l.onEndControl.bind(l),l.addEventListeners(),l}return r(t,d),t.prototype.addEventListeners=function(){this._dom.addEventListener("mouseenter",this.onHover),this._dom.addEventListener("mouseleave",this.onHover),this._container.addEventListener("mousewheel",this.onMove),this._container.addEventListener("DOMMouseScroll",this.onMove),this._controls.addEventListener("end",this.onEndControl)},t.prototype.removeEventListeners=function(){this._dom.removeEventListener("mouseenter",this.onHover),this._dom.removeEventListener("mouseleave",this.onHover),this._container.removeEventListener("mousewheel",this.onMove),this._container.removeEventListener("DOMMouseScroll",this.onMove),this._controls.removeEventListener("end",this.onEndControl)},t.prototype.onStart=function(a){this._lastEvent=a,a.preventDefault();var t=this.getMouseOffsets(a,this._container);if(this._mouse.set(t.x,t.y),this._raycaster.setFromCamera(this._mouse,this._camera),this._raycaster.ray.position=this._raycaster.ray.origin,this._hovered){if(this._active=!0,this._controls.enabled=!1,this._targetMesh){var e=this._raycaster.intersectObject(this._targetMesh);0<e.length&&this._offset.copy(e[0].point).sub(this._worldPosition)}else{this._plane.position.copy(this._worldPosition),this._plane.direction.copy(this._camera.getWorldDirection());var o=s.a.rayPlane(this._raycaster.ray,this._plane);null!==o&&this._offset.copy(o).sub(this._plane.position)}this.update()}},t.prototype.onEnd=function(e){this._lastEvent=e,e.preventDefault(),!0!==this._tracking&&(!this._dragged&&this._active&&(this._selected=!this._selected),this._active=!1,this._dragged=!1,this._controls.enabled=!0,this.update())},t.prototype.onEndControl=function(){var e=this;this._lastEvent&&window.requestAnimationFrame(function(){e.onMove(e._lastEvent)})},t.prototype.onMove=function(a){this._lastEvent=a,a.preventDefault();var t=this.getMouseOffsets(a,this._container);if(!(this._mouse.set(t.x,t.y),this._raycaster.setFromCamera(this._mouse,this._camera),this._raycaster.ray.position=this._raycaster.ray.origin,this._active))this.onHover(null);else if(this._dragged=!0,null!==this._targetMesh){var e=this._raycaster.intersectObject(this._targetMesh);0<e.length&&this._worldPosition.copy(e[0].point.sub(this._offset))}else{0===this._plane.direction.length()&&(this._plane.position.copy(this._worldPosition),this._plane.direction.copy(this._camera.getWorldDirection()));var o=s.a.rayPlane(this._raycaster.ray,this._plane);null!==o&&this._worldPosition.copy(o.sub(this._offset))}this.update()},t.prototype.onHover=function(e){e&&(this._lastEvent=e,e.preventDefault(),this.hoverDom(e)),this.hoverMesh(),this._hovered=this._meshHovered||this._domHovered,this._container.style.cursor=this._hovered?"pointer":"default"},t.prototype.hoverMesh=function(){var e=this._raycaster.intersectObject(this._mesh);this._meshHovered=0<e.length},t.prototype.hoverDom=function(e){this._domHovered="mouseenter"===e.type},t.prototype.worldToScreen=function(a,t,e){var o=a.clone();return o.project(t),o.x=P((o.x+1)*e.offsetWidth/2),o.y=P((1-o.y)*e.offsetHeight/2),o.z=0,o},t.prototype.create=function(){this.createVoxel(),this.createMesh(),this.createDOM()},t.prototype.createVoxel=function(){this._voxel=new l.a,this._voxel.id=this.id,this._voxel.worldCoordinates=this._worldCoordinates},t.prototype.createMesh=function(){var e=n.a.worldToData(this._stack,this._worldPosition);this._geometry=new a.a(e),this._material=new THREE.MeshBasicMaterial({wireframe:!0,wireframeLinewidth:1}),this._mesh=new THREE.Mesh(this._geometry,this._material),this._mesh.applyMatrix(this._stack.ijk2LPS),this._mesh.visible=!0,this.updateMeshColor(),this.add(this._mesh)},t.prototype.updateMeshColor=function(){this._material&&this._material.color.set(this._color)},t.prototype.createDOM=function(){this._dom=document.createElement("div"),this._dom.setAttribute("id",this.uuid),this._dom.setAttribute("class","AMI Widget VoxelProbe"),this._dom.style.border="2px solid #000",this._dom.style.backgroundColor="rgb(249, 249, 249)",this._dom.style.color="#212121",this._dom.style.position="absolute",this._dom.style.transformOrigin="0px 100% 0px";var a=document.createElement("div"),t=document.createElement("div");t.setAttribute("id","lpsPosition"),a.appendChild(t);var e=document.createElement("div");e.setAttribute("id","ijkPosition"),a.appendChild(e);var o=document.createElement("div");o.setAttribute("id","value"),a.appendChild(o),this.updateDOMColor(),this._dom.appendChild(a),this._container.appendChild(this._dom)},t.prototype.updateDOMContent=function(){this._dom.querySelector("#lpsPosition").innerHTML="LPS: \n      "+this._voxel.worldCoordinates.x.toFixed(2)+" :\n      "+this._voxel.worldCoordinates.y.toFixed(2)+" :\n      "+this._voxel.worldCoordinates.z.toFixed(2),this._dom.querySelector("#ijkPosition").innerHTML="IJK: \n      "+this._voxel.dataCoordinates.x+" :\n      "+this._voxel.dataCoordinates.y+" :\n      "+this._voxel.dataCoordinates.z,this._dom.querySelector("#value").innerHTML="Value: "+this._voxel.value},t.prototype.update=function(){this.updateColor(),this._screenPosition=this.worldToScreen(this._worldPosition,this._camera,this._container),this.updateVoxel(this._worldPosition),this.updateMeshColor(),this._mesh&&this._mesh.geometry&&(this._mesh.geometry.location=this._voxel.dataCoordinates,this._mesh.updateMatrix()),this.updateDOMContent(),this.updateDOMColor(),this.updateDOMPosition()},t.prototype.updateVoxel=function(a){this._voxel.worldCoordinates=a,this._voxel.dataCoordinates=n.a.worldToData(this._stack,this._voxel.worldCoordinates);var t=n.a.value(this._stack,this._voxel.dataCoordinates);this._voxel.value=n.a.valueRescaleSlopeIntercept(t,this._stack.rescaleSlope,this._stack.rescaleIntercept)},t.prototype.updateDOMPosition=function(){if(this._dom){var e=this._screenPosition.y-this._container.offsetHeight;this._dom.style.transform="translate3D("+this._screenPosition.x+"px, "+e+"px, 0)"}},t.prototype.updateDOMColor=function(){this._dom.style.borderColor=""+this._color},t.prototype.free=function(){this._container.removeEventListener("mouseup",this.onMouseUpHandler,!1),this._container.removeEventListener("mousemove",this.onMouseMoveHandler,!1),this._container.removeEventListener("mousewheel",this.onMouseMoveHandler,!1),this._container.removeEventListener("DOMMouseScroll",this.onMouseMoveHandler,!1),this._voxel.removeTest(),this.remove(this._voxel),this._voxel=null,d.prototype.free.call(this)},t.prototype.hoverVoxel=function(e){var t=e.screenX-this._voxel.voxel.screenCoordinates.x,a=e.screenY-this._voxel.voxel.screenCoordinates.y,o=O(t*t+a*a);this._voxel.distance=o,this._hover=0<=o&&10>o},t.prototype.hideDOM=function(){this._dom.style.display="none"},t.prototype.showDOM=function(){this._dom.style.display=""},t.prototype.hideMesh=function(){this.visible=!1},t.prototype.showMesh=function(){this.visible=!0},t.prototype.show=function(){this.showDOM(),this.showMesh()},t.prototype.hide=function(){this.hideDOM(),this.hideMesh()},c(t,[{key:"worldPosition",set:function(e){this._worldPosition.copy(e),this.update()}},{key:"defaultColor",set:function(e){this._defaultColor=e,this.update()},get:function(){return this._defaultColor}},{key:"activeColor",set:function(e){this._activeColor=e,this.update()},get:function(){return this._activeColor}},{key:"hoverColor",set:function(e){this._hoverColor=e,this.update()},get:function(){return this._hoverColor}},{key:"selectedColor",set:function(e){this._selectedColor=e,this.update()},get:function(){return this._selectedColor}},{key:"showVoxel",set:function(e){this._showVoxel=e,this.update()},get:function(){return this._showVoxel}},{key:"showDomSVG",set:function(e){this._showDomSVG=e,this.update()},get:function(){return this._showDomSVG}},{key:"showDomMeasurements",set:function(e){this._showDomMeasurements=e,this.update()},get:function(){return this._showDomMeasurements}}]),t}(o.a);t.a=p},function(e){e.exports={name:"ami.js",version:"0.0.23-dev",main:"build/ami.js",keywords:["ami","ami.js","three.js","webgl","dicom","nifti","awesome","medical","imaging","xtk","nrrd","vtk","stl","trk"],author:{name:"Nicolas Rannou",email:"nicolas@eunate.ch",url:"https://eunate.ch"},license:"Apache-2.0",repository:{type:"git",url:"https://fnndsc.github.io/ami"},config:{threeVersion:"87",amiCDN:"https://cdnjs.cloudflare.com/ajax/libs/ami.js",gaKey:"UA-39303022-3",babel:"--module-bind js=babel-loader --colors --display-error-details"},dependencies:{"dicom-parser":"1.7.3","image-JPEG2000":"OHIF/image-JPEG2000#master","jpeg-lossless-decoder-js":"1.2.3","math-float32-to-binary-string":"^1.0.0","nifti-reader-js":"v0.5.3","nrrd-js":"^0.2.1",pako:"1.0.1",three:"0.87.0"},scripts:{"build:ami":"webpack --config webpack.config.build.js","build:ami:prod":"cross-env NODE_ENV=production yarn build:ami","build:clean":"rimraf -rf build/*","build:clean:hot":"rimraf -rf build/*.hot-update.*","dev:ami":"webpack --config webpack.config.build.js --hot --watch --colors","dist:ami":"yarn build:clean && yarn build:ami && yarn build:ami:prod && yarn doc","dist:examples":"node ./scripts/buildDist.js && node ./scripts/router.js examples deploy","dist:clean":"rimraf -rf dist/*","analyze:ami":"cross-env NODE_WEBPACK_ANALYZE=true yarn build:ami","analyze:ami:prod":"cross-env NODE_WEBPACK_ANALYZE=true yarn build:ami:prod",clean:"yarn build:clean && yarn dist:clean",example:"node ./scripts/router.js examples",lesson:"node ./scripts/router.js lessons","gen:index:examples":"node ./scripts/genIndexFiles.js examples","gen:index:examples:ga":"cross-env NODE_GA=true node ./scripts/genIndexFiles.js examples","gen:index:lessons":"node ./scripts/genIndexFiles.js lessons","gen:index:lessons:cdn":"node ./scripts/genIndexFiles.js lessons cdn",test:"karma start",lint:"eslint src/**/*.js",doc:"jsdoc -p -r -R README.md -c jsdoc.json -d dist/doc src",ami:"yarn lint && yarn dist:ami && yarn test",deploy:"yarn dist:clean && yarn build:clean && yarn dist:ami && yarn dist:examples && gh-pages -d dist"},devDependencies:{"babel-cli":"latest","babel-core":"^6.26.0","babel-loader":"^7.1.2","babel-preset-env":"^1.6.0","babel-runtime":"^6.26.0","compression-webpack-plugin":"^1.0.1","cross-env":"^3.2.3",eslint:"latest","eslint-config-google":"latest","gh-pages":"latest",glslify:"5.1.0","jasmine-core":"latest",jsdoc:"jsdoc3/jsdoc#master",karma:"latest","karma-chrome-launcher":"^2.2.0","karma-jasmine":"latest","karma-sinon":"^1.0.5","karma-spec-reporter":"latest","karma-webpack":"^2.0.4","live-server":"^1.1.0",puppeteer:"^0.13.0",rimraf:"^2.6.1","rollup-plugin-node-builtins":"^2.1.2",shelljs:"latest",sinon:"^2.0.0","uglifyjs-webpack-plugin":"^1.0.0-beta.3",webpack:"^3.7.1","webpack-bundle-analyzer":"^2.9.0","webpack-dev-server":"^2.9.1","webpack-watch-livereload-plugin":"^0.0.1"},engines:{node:">=6.9.0"}}}])});</script><dom-module id="iron-image" assetpath="../bower_components/iron-image/"><template><style>:host{display:inline-block;overflow:hidden;position:relative;}#baseURIAnchor{display:none;}#sizedImgDiv{position:absolute;top:0px;right:0px;bottom:0px;left:0px;display:none;}#img{display:block;width:var(--iron-image-width, auto);height:var(--iron-image-height, auto);}:host([sizing]) #sizedImgDiv{display:block;}:host([sizing]) #img{display:none;}#placeholder{position:absolute;top:0px;right:0px;bottom:0px;left:0px;background-color:inherit;opacity:1;@apply --iron-image-placeholder;}#placeholder.faded-out{transition:opacity 0.5s linear;opacity:0;}</style><a id="baseURIAnchor" href="#"></a><div id="sizedImgDiv" role="img" hidden$="[[_computeImgDivHidden(sizing)]]" aria-hidden$="[[_computeImgDivARIAHidden(alt)]]" aria-label$="[[_computeImgDivARIALabel(alt, src)]]"></div><img id="img" alt$="[[alt]]" hidden$="[[_computeImgHidden(sizing)]]" crossorigin$="[[crossorigin]]" on-load="_imgOnLoad" on-error="_imgOnError"><div id="placeholder" hidden$="[[_computePlaceholderHidden(preload, fade, loading, loaded)]]" class$="[[_computePlaceholderClassName(preload, fade, loading, loaded)]]"></div></template><script>Polymer({is:'iron-image',properties:{src:{type:String,value:''},alt:{type:String,value:null},crossorigin:{type:String,value:null},preventLoad:{type:Boolean,value:!1},sizing:{type:String,value:null,reflectToAttribute:!0},position:{type:String,value:'center'},preload:{type:Boolean,value:!1},placeholder:{type:String,value:null,observer:'_placeholderChanged'},fade:{type:Boolean,value:!1},loaded:{notify:!0,readOnly:!0,type:Boolean,value:!1},loading:{notify:!0,readOnly:!0,type:Boolean,value:!1},error:{notify:!0,readOnly:!0,type:Boolean,value:!1},width:{observer:'_widthChanged',type:Number,value:null},height:{observer:'_heightChanged',type:Number,value:null}},observers:['_transformChanged(sizing, position)','_loadStateObserver(src, preventLoad)'],created:function(){this._resolvedSrc=''},_imgOnLoad:function(){this.$.img.src!==this._resolveSrc(this.src)||(this._setLoading(!1),this._setLoaded(!0),this._setError(!1))},_imgOnError:function(){this.$.img.src!==this._resolveSrc(this.src)||(this.$.img.removeAttribute('src'),this.$.sizedImgDiv.style.backgroundImage='',this._setLoading(!1),this._setLoaded(!1),this._setError(!0))},_computePlaceholderHidden:function(){return!this.preload||!this.fade&&!this.loading&&this.loaded},_computePlaceholderClassName:function(){return this.preload&&this.fade&&!this.loading&&this.loaded?'faded-out':''},_computeImgDivHidden:function(){return!this.sizing},_computeImgDivARIAHidden:function(){return''===this.alt?'true':void 0},_computeImgDivARIALabel:function(){if(null!==this.alt)return this.alt;if(''===this.src)return'';var a=this._resolveSrc(this.src);return a.replace(/[?|#].*/g,'').split('/').pop()},_computeImgHidden:function(){return!!this.sizing},_widthChanged:function(){this.style.width=isNaN(this.width)?this.width:this.width+'px'},_heightChanged:function(){this.style.height=isNaN(this.height)?this.height:this.height+'px'},_loadStateObserver:function(a,b){var c=this._resolveSrc(a);c===this._resolvedSrc||(this._resolvedSrc='',this.$.img.removeAttribute('src'),this.$.sizedImgDiv.style.backgroundImage='',''===a||b?(this._setLoading(!1),this._setLoaded(!1),this._setError(!1)):(this._resolvedSrc=c,this.$.img.src=this._resolvedSrc,this.$.sizedImgDiv.style.backgroundImage='url("'+this._resolvedSrc+'")',this._setLoading(!0),this._setLoaded(!1),this._setError(!1)))},_placeholderChanged:function(){this.$.placeholder.style.backgroundImage=this.placeholder?'url("'+this.placeholder+'")':''},_transformChanged:function(){var a=this.$.sizedImgDiv.style,b=this.$.placeholder.style;a.backgroundSize=b.backgroundSize=this.sizing,a.backgroundPosition=b.backgroundPosition=this.sizing?this.position:'',a.backgroundRepeat=b.backgroundRepeat=this.sizing?'no-repeat':''},_resolveSrc:function(a){var b=Polymer.ResolveUrl.resolveUrl(a,this.$.baseURIAnchor.href);return'/'===b[0]&&(b=(location.origin||location.protocol+'//'+location.host)+b),b}});</script></dom-module><dom-module id="paper-card" assetpath="../bower_components/paper-card/"><template><style include="paper-material-styles">:host{display:inline-block;position:relative;box-sizing:border-box;background-color:var(--paper-card-background-color, var(--primary-background-color));border-radius:2px;@apply --paper-font-common-base;@apply --paper-card;}:host([hidden]), [hidden]{display:none !important;}.header{position:relative;border-top-left-radius:inherit;border-top-right-radius:inherit;overflow:hidden;@apply --paper-card-header;}.header iron-image{display:block;width:100%;--iron-image-width:100%;pointer-events:none;@apply --paper-card-header-image;}.header .title-text{padding:16px;font-size:24px;font-weight:400;color:var(--paper-card-header-color, #000);@apply --paper-card-header-text;}.header .title-text.over-image{position:absolute;bottom:0px;@apply --paper-card-header-image-text;}:host ::slotted(.card-content){padding:16px;position:relative;@apply --paper-card-content;}:host ::slotted(.card-actions){border-top:1px solid #e8e8e8;padding:5px 16px;position:relative;@apply --paper-card-actions;}:host([elevation="1"]){@apply --paper-material-elevation-1;}:host([elevation="2"]){@apply --paper-material-elevation-2;}:host([elevation="3"]){@apply --paper-material-elevation-3;}:host([elevation="4"]){@apply --paper-material-elevation-4;}:host([elevation="5"]){@apply --paper-material-elevation-5;}</style><div class="header"><iron-image hidden$="[[!image]]" aria-hidden$="[[_isHidden(image)]]" src="[[image]]" alt="[[alt]]" placeholder="[[placeholderImage]]" preload="[[preloadImage]]" fade="[[fadeImage]]"></iron-image><div hidden$="[[!heading]]" class$="title-text [[_computeHeadingClass(image)]]">[[heading]]</div></div><slot></slot></template><script>Polymer({is:'paper-card',properties:{heading:{type:String,value:'',observer:'_headingChanged'},image:{type:String,value:''},alt:{type:String},preloadImage:{type:Boolean,value:!1},fadeImage:{type:Boolean,value:!1},placeholderImage:{type:String,value:null},elevation:{type:Number,value:1,reflectToAttribute:!0},animatedShadow:{type:Boolean,value:!1},animated:{type:Boolean,reflectToAttribute:!0,readOnly:!0,computed:'_computeAnimated(animatedShadow)'}},_isHidden:function(a){return a?'false':'true'},_headingChanged:function(a){var b=this.getAttribute('heading'),c=this.getAttribute('aria-label');('string'!==typeof c||c===b)&&this.setAttribute('aria-label',a)},_computeHeadingClass:function(a){return a?' over-image':''},_computeAnimated:function(a){return a}});</script></dom-module><link rel="import " href="my-icons.html"><link rel="import " href="style/shared-styles.html"><dom-module id="contours-list-item" assetpath="elements/"><template><style include="shared-styles">.contour-item paper-checkbox, .contour-item-all paper-checkbox{@apply (--layout-horizontal);padding:8px;margin:8px 0;}</style><div style="width:100%"><div class="separator"><span>[[title]]<span></span></span></div><div class="contour-item-all"><paper-checkbox class="label" checked="{{allShow}}">Show / hide all</paper-checkbox></div><div class="separator"></div><template is="dom-repeat" items="{{contours}}" as="contour"><div class="contour-item" id="contour-{{contour.id}}" on-mouseover="_mouseOverContour" on-mouseout="_mouseOutContour"><paper-checkbox checked="{{contour.visible}}" on-tap="_onCheckContour"><span style="color:{{contour.color}}">{{contour.label}}</span></paper-checkbox></div></template></div></template><script>var ContoursListIem=function(a){function b(){babelHelpers.classCallCheck(this,b);var a=babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return a.stopPropagationAllShow=!1,a}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,null,[{key:'is',get:function(){return'contours-list-item'}},{key:'properties',get:function(){return{title:{type:String,value:'List of contours'},contours:{type:Array,value:[]},allShow:{type:Boolean,value:!0,observer:'_allShowChanged'}}}}]),babelHelpers.createClass(b,[{key:'ready',value:function(){babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),'ready',this).call(this)}},{key:'_allShowChanged',value:function(){if(!this.stopPropagationAllShow)for(var a=0;a<this.contours.length;a++)this.set('contours.'+a+'.visible',this.allShow),this._updateContourVisibled(a)}},{key:'_mouseOverContour',value:function(a){var b=this._getContourId(a.target);this.set('contours.'+b+'.contour.selected',!0)}},{key:'_mouseOutContour',value:function(a){var b=this._getContourId(a.target);this.set('contours.'+b+'.contour.selected',!1)}},{key:'_onCheckContour',value:function(a){var b=this._getContourId(a.target);this._updateContourVisibled(b),this.stopPropagationAllShow||this._updateAllShow()}},{key:'_updateAllShow',value:function(){for(var a=!0,b=0;b<this.contours.length&&a;b++)a=a&&this.contours[b].visible;this.stopPropagationAllShow=!0,this.set('allShow',a),this.stopPropagationAllShow=!1}},{key:'_updateContourVisibled',value:function(a){var b=this.contours[a].visible;this.set('contours.'+a+'.contour.meshBack.visible',b),this.set('contours.'+a+'.contour.meshFront.visible',b)}},{key:'_getContourId',value:function(a){for(var b=a;(b=b.parentElement)&&!b.classList.contains('contour-item'););var c=b.getAttribute('id');return c=c.replace('contour-',''),parseInt(c)}}]),b}(Polymer.Element);window.customElements.define(ContoursListIem.is,ContoursListIem);</script></dom-module><dom-module id="viewers-style" assetpath="style/"><template><style include="shared-styles">:host{display:block;}app-header{background-color:var(--dark-primary-color);color:var(--text-primary-color);}app-header paper-icon-button{--paper-icon-button-ink-color:white;}.content{display:-webkit-box;display:-ms-flexbox;display:flex;height:100%;background-color:#fff;}.tools{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;min-width:256px;min-height:0;overflow-y:scroll;}.viewers{display:-webkit-box;display:-ms-flexbox;display:flex;width:100%;height:100%;position:relative;}.viewer{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-ms-flex:1;flex:1;width:0;}.main,
.small,
.s2{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;overflow:hidden;position:relative;}.move{-webkit-box-flex:1;-ms-flex:1;flex:1;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;}.move paper-slider{background-color:var(--default-primary-color);width:100%;}.main{width:70%;}.small{width:30%;}.small>*{height:50%;}.v2{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-ms-flex:1;flex:1;}paper-radio-button{width:100%;-webkit-box-sizing:border-box;box-sizing:border-box;padding-left:16px;padding-right:16px;}.s2{border:1px solid #ffffff;}.main{border-top:1px solid #ffffff;border-bottom:1px solid #ffffff;}a{color:#fff;cursor:auto;text-decoration:none;}a paper-button{background-color:var(--default-primary-color);color:#fff;}.fulloff{height:24px;padding:0;font-size:12px;color:#d9d9d9;position:absolute;top:0;right:0;z-index:1;cursor:default;font-weight:lighter;}.advanced{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;height:auto;background-color:rgba(0, 0, 0, 0.8);margin-bottom:8px;}.controls{height:40px;border-bottom:1px solid var(--divider-color);text-align:right;padding:0 8px;}#collapse>div{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:0 8px;}#collapse>div:last-child{-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;}.next-link{display:-webkit-box;display:-ms-flexbox;display:flex;}.next-button{-webkit-box-flex:1;-ms-flex:1;flex:1;}.horizontal{@apply (--layout-horizontal);}.inline{display:inline;}.align-right{float:right;}.only-for-small{display:none;}@media only screen and (max-width: 767px){.only-for-small{display:block;}.small{display:none;}.main{width:100%;}}.loader{position:fixed;top:0;bottom:0;left:0;right:0;z-index:9;background-color:var(--dark-primary-color);display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;}.cube-wrapper{position:fixed;left:50%;top:50%;margin-top:-50px;margin-left:-50px;width:100px;height:100px;text-align:center;}.cube-wrapper:after{content:'';position:absolute;left:0;right:0;bottom:-20px;margin:auto;width:90px;height:6px;background-color:rgba(0, 0, 0, 0.1);-webkit-filter:blur(2px);filter:blur(2px);-moz-border-radius:100%;-webkit-border-radius:100%;border-radius:100%;z-index:1;-moz-animation:shadow 0.5s ease infinite alternate;-webkit-animation:shadow 0.5s ease infinite alternate;animation:shadow 0.5s ease infinite alternate;}.cube-wrapper .loading{font-size:12px;letter-spacing:0.1em;display:block;color:white;position:relative;top:25px;z-index:2;-moz-animation:text 0.5s ease infinite alternate;-webkit-animation:text 0.5s ease infinite alternate;animation:text 0.5s ease infinite alternate;}@-moz-keyframes text{100%{top:35px;}}@-webkit-keyframes text{100%{top:35px;}}@keyframes text{100%{top:35px;}}@-moz-keyframes shadow{100%{bottom:-18px;width:100px;}}@-webkit-keyframes shadow{100%{bottom:-18px;width:100px;}}@keyframes shadow{100%{bottom:-18px;width:100px;}}.cube-folding{width:50px;height:50px;display:inline-block;-moz-transform:rotate(45deg);-ms-transform:rotate(45deg);-webkit-transform:rotate(45deg);transform:rotate(45deg);font-size:0;}.cube-folding span{position:relative;width:25px;height:25px;-moz-transform:scale(1.1);-ms-transform:scale(1.1);-webkit-transform:scale(1.1);transform:scale(1.1);display:inline-block;}.cube-folding span::before{content:'';background-color:white;position:absolute;left:0;top:0;display:block;width:25px;height:25px;-moz-transform-origin:100% 100%;-ms-transform-origin:100% 100%;-webkit-transform-origin:100% 100%;transform-origin:100% 100%;-moz-animation:folding 2.5s infinite linear both;-webkit-animation:folding 2.5s infinite linear both;animation:folding 2.5s infinite linear both;}.cube-folding .leaf2{-moz-transform:rotateZ(90deg) scale(1.1);-ms-transform:rotateZ(90deg) scale(1.1);-webkit-transform:rotateZ(90deg) scale(1.1);transform:rotateZ(90deg) scale(1.1);}.cube-folding .leaf2::before{-moz-animation-delay:0.3s;-webkit-animation-delay:0.3s;animation-delay:0.3s;background-color:#f2f2f2;}.cube-folding .leaf3{-moz-transform:rotateZ(270deg) scale(1.1);-ms-transform:rotateZ(270deg) scale(1.1);-webkit-transform:rotateZ(270deg) scale(1.1);transform:rotateZ(270deg) scale(1.1);}.cube-folding .leaf3::before{-moz-animation-delay:0.9s;-webkit-animation-delay:0.9s;animation-delay:0.9s;background-color:#f2f2f2;}.cube-folding .leaf4{-moz-transform:rotateZ(180deg) scale(1.1);-ms-transform:rotateZ(180deg) scale(1.1);-webkit-transform:rotateZ(180deg) scale(1.1);transform:rotateZ(180deg) scale(1.1);}.cube-folding .leaf4::before{-moz-animation-delay:0.6s;-webkit-animation-delay:0.6s;animation-delay:0.6s;background-color:#e6e6e6;}@-moz-keyframes folding{0%,
    10%{-moz-transform:perspective(140px) rotateX(-180deg);transform:perspective(140px) rotateX(-180deg);opacity:0;}25%,
    75%{-moz-transform:perspective(140px) rotateX(0deg);transform:perspective(140px) rotateX(0deg);opacity:1;}90%,
    100%{-moz-transform:perspective(140px) rotateY(180deg);transform:perspective(140px) rotateY(180deg);opacity:0;}}@-webkit-keyframes folding{0%,
    10%{-webkit-transform:perspective(140px) rotateX(-180deg);transform:perspective(140px) rotateX(-180deg);opacity:0;}25%,
    75%{-webkit-transform:perspective(140px) rotateX(0deg);transform:perspective(140px) rotateX(0deg);opacity:1;}90%,
    100%{-webkit-transform:perspective(140px) rotateY(180deg);transform:perspective(140px) rotateY(180deg);opacity:0;}}@keyframes folding{0%,
    10%{-moz-transform:perspective(140px) rotateX(-180deg);-ms-transform:perspective(140px) rotateX(-180deg);-webkit-transform:perspective(140px) rotateX(-180deg);transform:perspective(140px) rotateX(-180deg);opacity:0;}25%,
    75%{-moz-transform:perspective(140px) rotateX(0deg);-ms-transform:perspective(140px) rotateX(0deg);-webkit-transform:perspective(140px) rotateX(0deg);transform:perspective(140px) rotateX(0deg);opacity:1;}90%,
    100%{-moz-transform:perspective(140px) rotateY(180deg);-ms-transform:perspective(140px) rotateY(180deg);-webkit-transform:perspective(140px) rotateY(180deg);transform:perspective(140px) rotateY(180deg);opacity:0;}}</style></template></dom-module><dom-module id="app-drawer" assetpath="../bower_components/app-layout/app-drawer/"><template><style>:host{position:fixed;top:-120px;right:0;bottom:-120px;left:0;visibility:hidden;transition-property:visibility;}:host([opened]){visibility:visible;}:host([persistent]){width:var(--app-drawer-width, 256px);}:host([persistent][position=left]){right:auto;}:host([persistent][position=right]){left:auto;}#contentContainer{position:absolute;top:0;bottom:0;left:0;width:var(--app-drawer-width, 256px);padding:120px 0;transition-property:-webkit-transform;transition-property:transform;-webkit-transform:translate3d(-100%, 0, 0);transform:translate3d(-100%, 0, 0);background-color:#FFF;@apply --app-drawer-content-container;}#contentContainer[persistent]{width:100%;}#contentContainer[position=right]{right:0;left:auto;-webkit-transform:translate3d(100%, 0, 0);transform:translate3d(100%, 0, 0);}#contentContainer[swipe-open]::after{position:fixed;top:0;bottom:0;left:100%;visibility:visible;width:20px;content:'';}#contentContainer[swipe-open][position=right]::after{right:100%;left:auto;}#contentContainer[opened]{-webkit-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);}#scrim{position:absolute;top:0;right:0;bottom:0;left:0;transition-property:opacity;-webkit-transform:translateZ(0);transform:translateZ(0);opacity:0;background:var(--app-drawer-scrim-background, rgba(0, 0, 0, 0.5));}#scrim.visible{opacity:1;}</style><div id="scrim" on-click="close"></div><div id="contentContainer" opened$="[[opened]]" persistent$="[[persistent]]" position$="[[position]]" swipe-open$="[[swipeOpen]]"><slot></slot></div></template><script>Polymer({is:'app-drawer',properties:{opened:{type:Boolean,value:!1,notify:!0,reflectToAttribute:!0},persistent:{type:Boolean,value:!1,reflectToAttribute:!0},transitionDuration:{type:Number,value:200},align:{type:String,value:'left'},position:{type:String,readOnly:!0,reflectToAttribute:!0},swipeOpen:{type:Boolean,value:!1,reflectToAttribute:!0},noFocusTrap:{type:Boolean,value:!1},disableSwipe:{type:Boolean,value:!1}},observers:['resetLayout(position, isAttached)','_resetPosition(align, isAttached)','_styleTransitionDuration(transitionDuration)','_openedPersistentChanged(opened, persistent)'],_translateOffset:0,_trackDetails:null,_drawerState:0,_boundEscKeydownHandler:null,_firstTabStop:null,_lastTabStop:null,attached:function(){Polymer.RenderStatus.afterNextRender(this,function(){this._boundEscKeydownHandler=this._escKeydownHandler.bind(this),this.addEventListener('keydown',this._tabKeydownHandler.bind(this)),this.listen(this,'track','_track'),this.setScrollDirection('y')}),this.fire('app-reset-layout')},detached:function(){document.removeEventListener('keydown',this._boundEscKeydownHandler)},open:function(){this.opened=!0},close:function(){this.opened=!1},toggle:function(){this.opened=!this.opened},getWidth:function(){return this.$.contentContainer.offsetWidth},_isRTL:function(){return'rtl'===window.getComputedStyle(this).direction},_resetPosition:function(){switch(this.align){case'start':return void this._setPosition(this._isRTL()?'right':'left');case'end':return void this._setPosition(this._isRTL()?'left':'right');}this._setPosition(this.align)},_escKeydownHandler:function(a){a.keyCode===27&&(a.preventDefault(),this.close())},_track:function(a){if(!(this.persistent||this.disableSwipe))switch(a.preventDefault(),a.detail.state){case'start':this._trackStart(a);break;case'track':this._trackMove(a);break;case'end':this._trackEnd(a);}},_trackStart:function(){this._drawerState=this._DRAWER_STATE.TRACKING,this._styleTransitionDuration(0),this.style.visibility='visible';var a=this.$.contentContainer.getBoundingClientRect();this._translateOffset='left'===this.position?a.left:a.right-window.innerWidth,this._trackDetails=[]},_trackMove:function(a){this._translateDrawer(a.detail.dx+this._translateOffset),this._trackDetails.push({dx:a.detail.dx,timeStamp:Date.now()})},_trackEnd:function(a){var b=a.detail.dx+this._translateOffset,c=this.getWidth(),d='left'===this.position,e=d?0<=b||b<=-c:0>=b||b>=c;if(!e){var f=this._trackDetails;if(this._trackDetails=null,this._flingDrawer(a,f),this._drawerState===this._DRAWER_STATE.FLINGING)return}var g=c/2;a.detail.dx<-g?this.opened='right'===this.position:a.detail.dx>g&&(this.opened='left'===this.position),e?this.debounce('_resetDrawerState',this._resetDrawerState):this.debounce('_resetDrawerState',this._resetDrawerState,this.transitionDuration),this._styleTransitionDuration(this.transitionDuration),this._resetDrawerTranslate(),this.style.visibility=''},_calculateVelocity:function(a,b){for(var c,e=Date.now(),f=0,g=b.length-1;f<=g;){var h=f+g>>1,i=b[h];i.timeStamp>=e-100?(c=i,g=h-1):f=h+1}if(c){var d=a.detail.dx-c.dx,j=e-c.timeStamp||1;return d/j}return 0},_flingDrawer:function(a,b){var c=this._calculateVelocity(a,b);if(!(Math.abs(c)<this._MIN_FLING_THRESHOLD)){this._drawerState=this._DRAWER_STATE.FLINGING;var d,e=a.detail.dx+this._translateOffset,f=this.getWidth(),g='left'===this.position,h=0<c;d=!h&&g?-(e+f):h&&!g?f-e:-e,h?(c=Math.max(c,this._MIN_TRANSITION_VELOCITY),this.opened='left'===this.position):(c=Math.min(c,-this._MIN_TRANSITION_VELOCITY),this.opened='right'===this.position);var i=this._FLING_INITIAL_SLOPE*d/c;this._styleTransitionDuration(i),this._styleTransitionTimingFunction(this._FLING_TIMING_FUNCTION),this._resetDrawerTranslate(),this.debounce('_resetDrawerState',this._resetDrawerState,i)}},_styleTransitionDuration:function(a){this.style.transitionDuration=a+'ms',this.$.contentContainer.style.transitionDuration=a+'ms',this.$.scrim.style.transitionDuration=a+'ms'},_styleTransitionTimingFunction:function(a){this.$.contentContainer.style.transitionTimingFunction=a,this.$.scrim.style.transitionTimingFunction=a},_translateDrawer:function(a){var b=Math.min,c=Math.max,d=this.getWidth();'left'===this.position?(a=c(-d,b(a,0)),this.$.scrim.style.opacity=1+a/d):(a=c(0,b(a,d)),this.$.scrim.style.opacity=1-a/d),this.translate3d(a+'px','0','0',this.$.contentContainer)},_resetDrawerTranslate:function(){this.$.scrim.style.opacity='',this.transform('',this.$.contentContainer)},_resetDrawerState:function(){var a=this._drawerState;a===this._DRAWER_STATE.FLINGING&&(this._styleTransitionDuration(this.transitionDuration),this._styleTransitionTimingFunction(''),this.style.visibility=''),this._drawerState=this.opened?this.persistent?this._DRAWER_STATE.OPENED_PERSISTENT:this._DRAWER_STATE.OPENED:this._DRAWER_STATE.CLOSED,a!==this._drawerState&&(this._drawerState===this._DRAWER_STATE.OPENED?(this._setKeyboardFocusTrap(),document.addEventListener('keydown',this._boundEscKeydownHandler),document.body.style.overflow='hidden'):(document.removeEventListener('keydown',this._boundEscKeydownHandler),document.body.style.overflow=''),a!==this._DRAWER_STATE.INIT&&this.fire('app-drawer-transitioned'))},resetLayout:function(){this.fire('app-reset-layout')},_setKeyboardFocusTrap:function(){if(!this.noFocusTrap){var a=Polymer.dom(this).querySelectorAll('a[href]:not([tabindex="-1"]),area[href]:not([tabindex="-1"]),input:not([disabled]):not([tabindex="-1"]),select:not([disabled]):not([tabindex="-1"]),textarea:not([disabled]):not([tabindex="-1"]),button:not([disabled]):not([tabindex="-1"]),iframe:not([tabindex="-1"]),[tabindex]:not([tabindex="-1"]),[contentEditable=true]:not([tabindex="-1"])');0<a.length?(this._firstTabStop=a[0],this._lastTabStop=a[a.length-1]):(this._firstTabStop=null,this._lastTabStop=null);var b=this.getAttribute('tabindex');b&&-1<parseInt(b,10)?this.focus():this._firstTabStop&&this._firstTabStop.focus()}},_tabKeydownHandler:function(a){if(!this.noFocusTrap){this._drawerState===this._DRAWER_STATE.OPENED&&a.keyCode===9&&(a.shiftKey?this._firstTabStop&&Polymer.dom(a).localTarget===this._firstTabStop&&(a.preventDefault(),this._lastTabStop.focus()):this._lastTabStop&&Polymer.dom(a).localTarget===this._lastTabStop&&(a.preventDefault(),this._firstTabStop.focus()))}},_openedPersistentChanged:function(a,b){this.toggleClass('visible',a&&!b,this.$.scrim),this.debounce('_resetDrawerState',this._resetDrawerState,this.transitionDuration)},_MIN_FLING_THRESHOLD:0.2,_MIN_TRANSITION_VELOCITY:1.2,_FLING_TIMING_FUNCTION:'cubic-bezier(0.667, 1, 0.667, 1)',_FLING_INITIAL_SLOPE:1.5,_DRAWER_STATE:{INIT:0,OPENED:1,OPENED_PERSISTENT:2,CLOSED:3,TRACKING:4,FLINGING:5}});</script></dom-module><script>Polymer({is:'iron-media-query',properties:{queryMatches:{type:Boolean,value:!1,readOnly:!0,notify:!0},query:{type:String,observer:'queryChanged'},full:{type:Boolean,value:!1},_boundMQHandler:{value:function(){return this.queryHandler.bind(this)}},_mq:{value:null}},attached:function(){this.style.display='none',this.queryChanged()},detached:function(){this._remove()},_add:function(){this._mq&&this._mq.addListener(this._boundMQHandler)},_remove:function(){this._mq&&this._mq.removeListener(this._boundMQHandler),this._mq=null},queryChanged:function(){this._remove();var a=this.query;a&&(!this.full&&'('!==a[0]&&(a='('+a+')'),this._mq=window.matchMedia(a),this._add(),this.queryHandler(this._mq))},queryHandler:function(a){this._setQueryMatches(a.matches)}});</script><dom-module id="app-drawer-layout" assetpath="../bower_components/app-layout/app-drawer-layout/"><template><style>:host{display:block;position:relative;z-index:0;}:host ::slotted([slot=drawer]){z-index:1;}:host([fullbleed]){@apply --layout-fit;}#contentContainer{position:relative;z-index:0;height:100%;transition:var(--app-drawer-layout-content-transition, none);}#contentContainer[drawer-position=left]{margin-left:var(--app-drawer-width, 256px);}#contentContainer[drawer-position=right]{margin-right:var(--app-drawer-width, 256px);}</style><slot id="drawerSlot" name="drawer"></slot><div id="contentContainer" drawer-position$="[[_drawerPosition]]"><slot></slot></div><iron-media-query query="[[_computeMediaQuery(forceNarrow, responsiveWidth)]]" on-query-matches-changed="_onQueryMatchesChanged"></iron-media-query></template><script>Polymer({is:'app-drawer-layout',behaviors:[Polymer.AppLayoutBehavior],properties:{forceNarrow:{type:Boolean,value:!1},responsiveWidth:{type:String,value:'640px'},narrow:{type:Boolean,reflectToAttribute:!0,readOnly:!0,notify:!0},openedWhenNarrow:{type:Boolean,value:!1},_drawerPosition:{type:String}},listeners:{click:'_clickHandler'},observers:['_narrowChanged(narrow)'],get drawer(){return Polymer.dom(this.$.drawerSlot).getDistributedNodes()[0]},attached:function(){var a=this.drawer;a&&(this._savedDrawerTransitionDuration=a.transitionDuration,a.transitionDuration=0)},_clickHandler:function(a){var b=Polymer.dom(a).localTarget;if(b&&b.hasAttribute('drawer-toggle')){var c=this.drawer;c&&!c.persistent&&c.toggle()}},_updateLayoutStates:function(){var a=this.drawer;a&&(this._drawerPosition=this.narrow?null:a.position,this._drawerNeedsReset&&(this.narrow?(a.opened=this.openedWhenNarrow,a.persistent=!1):a.opened=a.persistent=!0,this._savedDrawerTransitionDuration&&Polymer.RenderStatus.afterNextRender(this,function(){a.transitionDuration=this._savedDrawerTransitionDuration,this._savedDrawerTransitionDuration=0}),this._drawerNeedsReset=!1))},_narrowChanged:function(){this._drawerNeedsReset=!0,this.resetLayout()},_onQueryMatchesChanged:function(a){this._setNarrow(a.detail.value)},_computeMediaQuery:function(a,b){return a?'(min-width: 0px)':'(max-width: '+b+')'}});</script></dom-module><script>Polymer.AppLayout.registerEffect('blend-background',{setUp:function(){var a={};a.backgroundFrontLayer=this._getDOMRef('backgroundFrontLayer'),a.backgroundRearLayer=this._getDOMRef('backgroundRearLayer'),a.backgroundFrontLayer.style.willChange='opacity',a.backgroundFrontLayer.style.transform='translateZ(0)',a.backgroundRearLayer.style.willChange='opacity',a.backgroundRearLayer.style.transform='translateZ(0)',a.backgroundRearLayer.style.opacity=0,this._fxBlendBackground=a},run:function(a){var b=this._fxBlendBackground;b.backgroundFrontLayer.style.opacity=1-a,b.backgroundRearLayer.style.opacity=a},tearDown:function(){delete this._fxBlendBackground}});</script><script>Polymer.AppLayout.registerEffect('fade-background',{setUp:function(a){var b={},c=a.duration||'0.5s';b.backgroundFrontLayer=this._getDOMRef('backgroundFrontLayer'),b.backgroundRearLayer=this._getDOMRef('backgroundRearLayer'),b.backgroundFrontLayer.style.willChange='opacity',b.backgroundFrontLayer.style.webkitTransform='translateZ(0)',b.backgroundFrontLayer.style.transitionProperty='opacity',b.backgroundFrontLayer.style.transitionDuration=c,b.backgroundRearLayer.style.willChange='opacity',b.backgroundRearLayer.style.webkitTransform='translateZ(0)',b.backgroundRearLayer.style.transitionProperty='opacity',b.backgroundRearLayer.style.transitionDuration=c,this._fxFadeBackground=b},run:function(a){var b=this._fxFadeBackground;1<=a?(b.backgroundFrontLayer.style.opacity=0,b.backgroundRearLayer.style.opacity=1):(b.backgroundFrontLayer.style.opacity=1,b.backgroundRearLayer.style.opacity=0)},tearDown:function(){delete this._fxFadeBackground}});</script><script>Polymer.AppLayout.registerEffect('waterfall',{run:function(){this.shadow=this.isOnScreen()&&this.isContentBelow()}});</script><script>(function(){function a(a,b,c,d){c.apply(d,b.map(function(b){return b[0]+(b[1]-b[0])*a}))}Polymer.AppLayout.registerEffect('resize-title',{setUp:function(){var a=this._getDOMRef('mainTitle'),b=this._getDOMRef('condensedTitle');if(!b)return console.warn('Scroll effect `resize-title`: undefined `condensed-title`'),!1;if(!a)return console.warn('Scroll effect `resize-title`: undefined `main-title`'),!1;b.style.willChange='opacity',b.style.webkitTransform='translateZ(0)',b.style.transform='translateZ(0)',b.style.webkitTransformOrigin='left top',b.style.transformOrigin='left top',a.style.willChange='opacity',a.style.webkitTransformOrigin='left top',a.style.transformOrigin='left top',a.style.webkitTransform='translateZ(0)',a.style.transform='translateZ(0)';var c=a.getBoundingClientRect(),d=b.getBoundingClientRect(),e={};e.scale=parseInt(window.getComputedStyle(b)['font-size'],10)/parseInt(window.getComputedStyle(a)['font-size'],10),e.titleDX=c.left-d.left,e.titleDY=c.top-d.top,e.condensedTitle=b,e.title=a,this._fxResizeTitle=e},run:function(b,c){var d=this._fxResizeTitle;this.condenses||(c=0),1<=b?(d.title.style.opacity=0,d.condensedTitle.style.opacity=1):(d.title.style.opacity=1,d.condensedTitle.style.opacity=0),a(Math.min(1,b),[[1,d.scale],[0,-d.titleDX],[c,c-d.titleDY]],function(a,b,c){this.transform('translate('+b+'px, '+c+'px) scale3d('+a+', '+a+', 1)',d.title)},this)},tearDown:function(){delete this._fxResizeTitle}})})();</script><script>Polymer.AppLayout.registerEffect('parallax-background',{setUp:function(a){var b={},c=parseFloat(a.scalar);b.background=this._getDOMRef('background'),b.backgroundFrontLayer=this._getDOMRef('backgroundFrontLayer'),b.backgroundRearLayer=this._getDOMRef('backgroundRearLayer'),b.deltaBg=b.backgroundFrontLayer.offsetHeight-b.background.offsetHeight,0===b.deltaBg?(isNaN(c)&&(c=0.8),b.deltaBg=this._dHeight*c):(isNaN(c)&&(c=1),b.deltaBg*=c),this._fxParallaxBackground=b},run:function(a){var b=Math.min,c=this._fxParallaxBackground;this.transform('translate3d(0px, '+c.deltaBg*b(1,a)+'px, 0px)',c.backgroundFrontLayer),c.backgroundRearLayer&&this.transform('translate3d(0px, '+c.deltaBg*b(1,a)+'px, 0px)',c.backgroundRearLayer)},tearDown:function(){delete this._fxParallaxBackground}});</script><script>Polymer.AppLayout.registerEffect('material',{setUp:function(){return this.effects='waterfall resize-title blend-background parallax-background',!1}});</script><script>Polymer.AppLayout.registerEffect('resize-snapped-title',{setUp:function(a){var b=this._getDOMRef('mainTitle'),c=this._getDOMRef('condensedTitle'),d=a.duration||'0.2s',e={};return c?b?void(b.style.transitionProperty='opacity',b.style.transitionDuration=d,c.style.transitionProperty='opacity',c.style.transitionDuration=d,e.condensedTitle=c,e.title=b,this._fxResizeSnappedTitle=e):(console.warn('Scroll effect `resize-snapped-title`: undefined `main-title`'),!1):(console.warn('Scroll effect `resize-snapped-title`: undefined `condensed-title`'),!1)},run:function(a){var b=this._fxResizeSnappedTitle;0<a?(b.title.style.opacity=0,b.condensedTitle.style.opacity=1):(b.title.style.opacity=1,b.condensedTitle.style.opacity=0)},tearDown:function(){var a=this._fxResizeSnappedTitle;a.title.style.transition='',a.condensedTitle.style.transition='',delete this._fxResizeSnappedTitle}});</script></body></html>