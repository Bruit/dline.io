<html><head><script>var MixShaderFragment=function(){function MixShaderFragment(uniforms){babelHelpers.classCallCheck(this,MixShaderFragment);this._uniforms=uniforms;this._functions={};this._main=""}babelHelpers.createClass(MixShaderFragment,[{key:"functions",value:function functions(){if(""===this._main){this.main()}var content="";for(var property in this._functions){content+=this._functions[property]+"\n"}return content}},{key:"uniforms",value:function uniforms(){var content="";for(var property in this._uniforms){var uniform=this._uniforms[property];content+="uniform ".concat(uniform.typeGLSL," ").concat(property);if(uniform&&uniform.length){content+="[".concat(uniform.length,"]")}content+=";\n"}return content}},{key:"main",value:function main(){this._main="\nvoid main(void) {\n\n    vec2 texc = vec2(((vProjectedCoords.x / vProjectedCoords.w) + 1.0 ) / 2.0,\n                    ((vProjectedCoords.y / vProjectedCoords.w) + 1.0 ) / 2.0 );\n  \n  //The back position is the world space position stored in the texture.\n  vec4 baseColor0 = texture2D(uTextureBackTest0, texc);\n  vec4 baseColor1 = texture2D(uTextureBackTest1, texc);\n  \n  if( uTrackMouse == 1 ){\n\n    if (uMixMode == 0) \n    {\n        if (vProjectedCoords.x > uMouse.x)\n        {\n            gl_FragColor = baseColor0;\n        }   \n        else\n        {\n            gl_FragColor = mix( baseColor0, baseColor1, uOpacity1 );\n        }\n    }\n    else if (uMixMode == 1)\n    {\n        if (vProjectedCoords.y > uMouse.y)\n        {\n            gl_FragColor = baseColor0;\n        }   \n        else\n        {\n            gl_FragColor = mix( baseColor0, baseColor1, uOpacity1 );\n        }\n    }\n    else // 2\n    {\n        if ( (vProjectedCoords.x > uMouse.x && vProjectedCoords.y > uMouse.y) \n        || (vProjectedCoords.x < uMouse.x && vProjectedCoords.y < uMouse.y) )\n        {\n            gl_FragColor = baseColor0;\n        }   \n        else\n        {\n            gl_FragColor = mix( baseColor0, baseColor1, uOpacity1 );\n        }\n    }\n  }\n  else{\n\n    if( uType1 == 0 ){\n\n      //merge an image into\n      gl_FragColor = mix( baseColor0, baseColor1, uOpacity1 );\n\n    }\n    else{\n\n      float opacity = baseColor1.a;\n      gl_FragColor = mix( baseColor0, baseColor1, opacity * uOpacity1 );\n\n    }\n\n  }\n\n  return;\n}\n   "}},{key:"compute",value:function compute(){return"\n// uniforms\n".concat(this.uniforms(),"\n\n// varying (should fetch it from vertex directly)\n// varying vec4      vPos;\nvarying vec4      vProjectedCoords;\n\n// tailored functions\n").concat(this.functions(),"\n\n// main loop\n").concat(this._main,"\n      ")}}]);return MixShaderFragment}();</script><script>var MixShadersUniform=function(){function MixShadersUniform(){babelHelpers.classCallCheck(this,MixShadersUniform)}babelHelpers.createClass(MixShadersUniform,null,[{key:"uniforms",value:function uniforms(){return{uTextureBackTest0:{type:"t",value:[],typeGLSL:"sampler2D"},uTextureBackTest1:{type:"t",value:[],typeGLSL:"sampler2D"},uOpacity0:{type:"f",value:1,typeGLSL:"float"},uOpacity1:{type:"f",value:1,typeGLSL:"float"},uType0:{type:"i",value:0,typeGLSL:"int"},uType1:{type:"i",value:1,typeGLSL:"int"},uTrackMouse:{type:"i",value:0,typeGLSL:"int"},uMouse:{type:"v2",value:new THREE.Vector2,typeGLSL:"vec2"},uMixMode:{type:"i",value:0,typeGLSL:"int"},uShift:{type:"v2",value:new THREE.Vector2,typeGLSL:"vec2"},uCanvasWidth:{type:"f",value:0,typeGLSL:"float"},uCanvasHeight:{type:"f",value:0,typeGLSL:"float"}}}}]);return MixShadersUniform}();</script></head><body></body></html>